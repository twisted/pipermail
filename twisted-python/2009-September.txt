From mlbright at gmail.com  Tue Sep  1 11:20:26 2009
From: mlbright at gmail.com (Martin-Louis Bright)
Date: Tue, 1 Sep 2009 11:20:26 -0400
Subject: [Twisted-Python] deciding to use twisted or not
In-Reply-To: <loom.20090827T181848-915@post.gmane.org>
References: <3055c0a0908261356l5453665cg4e25e2777c4f8d@mail.gmail.com>
	<d9047f780908261841g268bd8fdh3af9faac727f943c@mail.gmail.com>
	<3fce0ae70908261854o2348f433y3e91847687925409@mail.gmail.com>
	<d9047f780908261908m70897fa1x757e934517ad1cb8@mail.gmail.com>
	<3055c0a0908261946j6f668069m1459928c21aa63d1@mail.gmail.com>
	<4120a220908270511l7798458ak870c6c81176aa77d@mail.gmail.com>
	<3055c0a0908270648n68863bfcmd093ffb3b94f190c@mail.gmail.com>
	<loom.20090827T181848-915@post.gmane.org>
Message-ID: <3055c0a0909010820i5366f9b8r48a7757c5c397d49@mail.gmail.com>

PyInotify only allows you to detect file changes, leaving you with the task
of asynchronously sending http requests.

-martin

On Thu, Aug 27, 2009 at 12:19 PM, Mikhail <termim at gmail.com> wrote:

> Martin-Louis Bright <mlbright <at> gmail.com> writes:
>
> >
> >
> > I am using linux, and I want the daemon to be as responsive as possible
> to log
> events, so I think I would rather have it sit on the same box as where the
> log
> is produced. (Perhaps I'm wrong about this?) So I'm going to try Cary's
> ProcessProtocol approach, and if that doesn't work, Glyph's LoopingCall
> with a
> read() approach.
> >
>
> You can also use pyinotify to watch your log file changes.
> http://trac.dbzteam.org/pyinotify
>
> Regards,
> Mikhail
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090901/78d32072/attachment.htm 

From hoadley at gmail.com  Tue Sep  1 13:03:19 2009
From: hoadley at gmail.com (Rob Hoadley)
Date: Tue, 1 Sep 2009 10:03:19 -0700
Subject: [Twisted-Python] deciding to use twisted or not
In-Reply-To: <3055c0a0909010820i5366f9b8r48a7757c5c397d49@mail.gmail.com>
References: <3055c0a0908261356l5453665cg4e25e2777c4f8d@mail.gmail.com>
	<d9047f780908261841g268bd8fdh3af9faac727f943c@mail.gmail.com>
	<3fce0ae70908261854o2348f433y3e91847687925409@mail.gmail.com>
	<d9047f780908261908m70897fa1x757e934517ad1cb8@mail.gmail.com>
	<3055c0a0908261946j6f668069m1459928c21aa63d1@mail.gmail.com>
	<4120a220908270511l7798458ak870c6c81176aa77d@mail.gmail.com>
	<3055c0a0908270648n68863bfcmd093ffb3b94f190c@mail.gmail.com>
	<loom.20090827T181848-915@post.gmane.org>
	<3055c0a0909010820i5366f9b8r48a7757c5c397d49@mail.gmail.com>
Message-ID: <9bb390e70909011003r16c6bd70r2f26ce5e2c0796ad@mail.gmail.com>

I've handled this problem 2 ways: 1) for almost realtime... using
twisted and .read() file as glyph mentioned and 2) used splunk and
it's functionality to send search "matching" data to a program that in
turn does http notification.  This is at 5 min search intervals.

As previous posters have mentioned, tail's behavior is inconsistent on
different platforms.  If your OS platform never changes then you could
use tail -f as a process protocol. I originally started doing my work
using the process protocol and tail -f but needed the software to work
on 3 versions of linux and os x.     The read() way of doing it was
ultimately the most cross platform way I could come up with.  Good
luck.

-rob


On Tue, Sep 1, 2009 at 8:20 AM, Martin-Louis Bright<mlbright at gmail.com> wrote:
> PyInotify only allows you to detect file changes, leaving you with the task
> of asynchronously sending http requests.
>
> -martin
>
> On Thu, Aug 27, 2009 at 12:19 PM, Mikhail <termim at gmail.com> wrote:
>>
>> Martin-Louis Bright <mlbright <at> gmail.com> writes:
>>
>> >
>> >
>> > I am using linux, and I want the daemon to be as responsive as possible
>> > to log
>> events, so I think I would rather have it sit on the same box as where the
>> log
>> is produced. (Perhaps I'm wrong about this?) So I'm going to try Cary's
>> ProcessProtocol approach, and if that doesn't work, Glyph's LoopingCall
>> with a
>> read() approach.
>> >
>>
>> You can also use pyinotify to watch your log file changes.
>> http://trac.dbzteam.org/pyinotify
>>
>> Regards,
>> Mikhail
>>
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


From hellfeuer at gmail.com  Tue Sep  1 13:28:04 2009
From: hellfeuer at gmail.com (Salil)
Date: Tue, 1 Sep 2009 22:58:04 +0530
Subject: [Twisted-Python] connecting through an http proxy
Message-ID: <47ec90170909011028x4089494s9b963ebe332fcd78@mail.gmail.com>

First of let me say that I'm *very* new to twisted (I'm only trying to patch
an app that uses twisted). So sorry if this is a stupid question.

The problem is I am behind an http proxy (with authentication), so I need to
connect through that proxy. The documentation doesn't help (me) much and
neither does google (mostly because there are a million people who have
created their own proxy server. This is not what I want to do).

Any tips? The app is currently using ClientCreator (to make an SSL
connection), but I'm willing to change all that if necessary.

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090901/dc070ced/attachment.htm 

From mlbright at gmail.com  Tue Sep  1 13:39:31 2009
From: mlbright at gmail.com (Martin-Louis Bright)
Date: Tue, 1 Sep 2009 13:39:31 -0400
Subject: [Twisted-Python] twistd plugin or .tac file?
Message-ID: <3055c0a0909011039x6e84d645i18d1fe2349ec50cb@mail.gmail.com>

hi!
Which is the recommended or preferred way to deploy an app that will
leverage twistd: designing the app as a twistd plugin or creating a Service
and using a .tac file?

Also, if you need to expose your functionality as a Service to properly use
the twisted application framework, how do you achieve this if your app
doesn't need a network port?

-martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090901/641af704/attachment.htm 

From filoufake-python at yahoo.fr  Tue Sep  1 16:49:27 2009
From: filoufake-python at yahoo.fr (filoufake-python at yahoo.fr)
Date: Tue, 1 Sep 2009 13:49:27 -0700 (PDT)
Subject: [Twisted-Python] Re : Re : Telnet server using Twisted and
	AuthenticatingTelnetProtocol
In-Reply-To: <20090827135231.7475.428699872.divmod.xquotient.36@localhost.localdomain>
References: <986632.28669.qm@web26103.mail.ukl.yahoo.com>
	<20090820164821.7726.1422282903.divmod.xquotient.79@localhost.localdomain>
	<140670.22919.qm@web26108.mail.ukl.yahoo.com>
	<20090827135231.7475.428699872.divmod.xquotient.36@localhost.localdomain>
Message-ID: <483632.81503.qm@web26102.mail.ukl.yahoo.com>

Hello,

Thanks to your help, the server now requests a username and password for the authentication.
Once the password has been enterred, nothing happened on the client side. I'm even not able to escape from the client. I have to ctrl-c in the server console.
If I well understood the doc, for each state of the connection a method is called: telnet_User called when state = 'User', telnet_Password called when state = 'Password' and at the end telnet_Command (to be written by me).
I have added my "telnet_Command" method into my ITelnetProtocol implementation return by requestAvatar, but it is never called.
In the telnet_Password method, the deferred calls _cbLogin in case of good authentication or _ebLogin.
I could verify that _cbLogin is well called but it seems the application blocks in.

The method looks like this:
def _cbLogin(self, ial):
        interface, protocol, logout = ial
        assert interface is ITelnetProtocol
        self.protocol = protocol
        self.logout = logout
        self.state = 'Command'
        protocol.makeConnection(self.transport)
        self.transport.protocol = protocol

I almost sure this has to do with what requestAvatar returns in my Realm class:
class Realm:
    implements(portal.IRealm)

    def requestAvatar(self, avatarId, mind, *interfaces):
        if ITelnetProtocol in interfaces:
            av = MyTelnet()
            return ITelnetProtocol, av, lambda:None
        raise NotImplementedError("Only IProtocolUser interface is supported by this realm")

MyTelnet being a derived class of StatefulTelnetProtocol.

Is it what you explained in your previous reply?
>AuthenticatingTelnetProtocol is an ITelnetProtocol implementation.  So, 
>it needs to be hooked up to an ITelnetTransport implementation, as all 
>ITelnetProtocol implementations need to.
>
>However, since the only thing it knows how to do is handle 
>authentication, it also wants to get /another/ ITelnetProtocol 
>implementation out of the portal you give it.  After authentication 
>succeeds, that new ITelnetProtocol implementation will be given control 
>of the connection and the AuthenticatingTelnetProtocol will get out of 
>the way.
>
>So you end up with one telnet transport and two telnet protocols.

I think I did all you said but I'm not able to get it work. Do you have another idea?
Thanks in advance.

Here is the log on the server:
2009-09-01 22:37:35+0200 [-] Log opened.
2009-09-01 22:37:35+0200 [-] twisted.internet.protocol.ServerFactory starting on 4738
2009-09-01 22:37:35+0200 [-] Starting factory <twisted.internet.protocol.ServerFactory instance at 0x00D82DA0>
2009-09-01 22:37:57+0200 [twisted.internet.protocol.ServerFactory] state User
2009-09-01 22:38:01+0200 [TelnetTransport,0,127.0.0.1] state User
2009-09-01 22:38:02+0200 [TelnetTransport,0,127.0.0.1] state Password
2009-09-01 22:38:02+0200 [TelnetTransport,0,127.0.0.1] BEGUG in requestAvatar: av = <__main__.MyTelnet instance at 0x00E757D8>
2009-09-01 22:38:02+0200 [TelnetTransport,0,127.0.0.1] BEGUG in _cbLogin: ial = (<InterfaceClass twisted.conch.telnet.ITelnetProtocol>, <__main__.MyTelnet instance at 0x00E757D8>, None)
2009-09-01 22:38:02+0200 [TelnetTransport,0,127.0.0.1] BEGUG in _cbLogin: state = Command
2009-09-01 22:38:02+0200 [TelnetTransport,0,127.0.0.1] BEGUG in telnet_Password: deferred d = <Deferred at 0xe75b48  current result: None>

Regards,
Philippe



      



From lvh at laurensvh.be  Tue Sep  1 17:22:24 2009
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Tue, 1 Sep 2009 23:22:24 +0200
Subject: [Twisted-Python] twisted.positioning progress report + small review
	question
Message-ID: <cedc0c090909011422p79a1316fkb62ac37010e2805@mail.gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi :-)


Just reporting progress on twisted.positioning. The NMEA parser is
basically functional, it's got one or two warts I don't quite like but
I intend on fixing once I figured out how (apparently GSV is
*supposed* to be awkward, but I'm going to try very hard to make it
less so).  I'm working on GPSD support. This should take a lot less
time than NMEA support did because GPSD's protocol is not terrible :-)
Again, watch this space, I'll keep reporting of course.

My review question, however small, is a tad urgent. With GPSD support
on the horizon, even more stuff is pretending to be a sentence, and
although they don't share an interface (that wouldn't be very sensible
anyway, since Sentences in t.positioning terminology are
implementation-specific containers), the way these sentences work is
quite important. The longer it takes for me to figure out how people
want me to do it, the more will need to be changed :-)

Personally I'm still not terribly objected towards __getattr__.
Usually I wouldn't like it either, but personally I just really don't
like the look of the bunch of properties alternative. Maybe I'm just
being stupid -- at least not so stupid that I'm not willing to listen
to anyone willing to show me a clean way of doing it.

The obvious objection to __getattr__ (the way it's implemented
currently) is that silently failing and returning None for arbitrary
keys is not a replacement for object attributes. There's a point to
that, and I agree entirely (I've had to hunt a few bugs with NoneType
not having a certain attribute), but I think I have solution:

I propose that we have a given set of attributes that __getattr__
would accept, and simply raise AttributeError (as expected) for
attributes not in that set. This would return None for things that
*can* be in a sentence but aren't -- and that makes perfect sense to
me. This list of allowed attributes can be generated quite easily
programmatically for NMEASentence.


Let me know what you think, thanks in advance for your time
Laurens
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)
Comment: Use GnuPG with Firefox : http://getfiregpg.org (Version: 0.7.8)

iEYEARECAAYFAkqdekoACgkQT5v5zGkvKT7dJACglKUDpDDow65YJrG9sfxnB4Aj
BzoAoLNv+Pm20r3Y0cI1lSGqvzZO7T9g
=/uT+
-----END PGP SIGNATURE-----


From exarkun at twistedmatrix.com  Tue Sep  1 17:37:12 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 01 Sep 2009 21:37:12 -0000
Subject: [Twisted-Python] Re : Re : Telnet server using Twisted
	and	AuthenticatingTelnetProtocol
In-Reply-To: <483632.81503.qm@web26102.mail.ukl.yahoo.com>
References: <986632.28669.qm@web26103.mail.ukl.yahoo.com>
	<20090820164821.7726.1422282903.divmod.xquotient.79@localhost.localdomain>
	<140670.22919.qm@web26108.mail.ukl.yahoo.com>
	<20090827135231.7475.428699872.divmod.xquotient.36@localhost.localdomain>
	<483632.81503.qm@web26102.mail.ukl.yahoo.com>
Message-ID: <20090901213712.7436.649981883.divmod.xquotient.131@localhost.localdomain>

On 08:49 pm, filoufake-python at yahoo.fr wrote:
>Hello,
>
>Thanks to your help, the server now requests a username and password 
>for the authentication.
>Once the password has been enterred, nothing happened on the client 
>side. I'm even not able to escape from the client. I have to ctrl-c in 
>the server console.
>If I well understood the doc, for each state of the connection a method 
>is called: telnet_User called when state = 'User', telnet_Password 
>called when state = 'Password' and at the end telnet_Command (to be 
>written by me).
>I have added my "telnet_Command" method into my ITelnetProtocol 
>implementation return by requestAvatar, but it is never called.
>In the telnet_Password method, the deferred calls _cbLogin in case of 
>good authentication or _ebLogin.
>I could verify that _cbLogin is well called but it seems the 
>application blocks in.

It's hard to say what's going wrong without being able to see all of the 
code.  A short, self contained, correct example (<http://sscce.org/>) 
would help a lot.

Jean-Paul


From exarkun at twistedmatrix.com  Tue Sep  1 17:51:40 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 01 Sep 2009 21:51:40 -0000
Subject: [Twisted-Python] connecting through an http proxy
In-Reply-To: <47ec90170909011028x4089494s9b963ebe332fcd78@mail.gmail.com>
References: <47ec90170909011028x4089494s9b963ebe332fcd78@mail.gmail.com>
Message-ID: <20090901215140.7436.617816276.divmod.xquotient.137@localhost.localdomain>

On 05:28 pm, hellfeuer at gmail.com wrote:
>First of let me say that I'm *very* new to twisted (I'm only trying to 
>patch
>an app that uses twisted). So sorry if this is a stupid question.
>
>The problem is I am behind an http proxy (with authentication), so I 
>need to
>connect through that proxy. The documentation doesn't help (me) much 
>and
>neither does google (mostly because there are a million people who have
>created their own proxy server. This is not what I want to do).
>
>Any tips? The app is currently using ClientCreator (to make an SSL
>connection), but I'm willing to change all that if necessary.

If you're using twisted.web.client, then this will be tough, as there 
really isn't any support for HTTP proxies in that API.  You might be 
able to get something to work if you're using HTTPPageGetter directly, 
though - specify the right proxy authentication headers in the headers 
dictionary you give to the factory, make sure you put the full URI in 
the request path, etc.

If you're doing something else, then maybe you can elaborate on that. :)

The new HTTP client API which has not yet been part of any release will 
make this easier, but that doesn't help you if you need to work with an 
existing version of Twisted.

Jean-Paul


From matt at bennett.name  Tue Sep  1 18:51:21 2009
From: matt at bennett.name (Matt Bennett)
Date: Tue, 1 Sep 2009 23:51:21 +0100
Subject: [Twisted-Python] FTPClient - aborting transfers
Message-ID: <e554908b0909011551h501339f7of45672954d08338@mail.gmail.com>

Hello all,

I've got an FTPClient implementation very similar to the one at [1],
and I've added the ability to retrieve a file from the server with the
following snippet:

class FileReceiver(Protocol):
    """
        Protocol subclass that writes received data to a local file.
    """
    def __init__(self, filename):
        self.file = open(filename, 'wb')

    def dataReceived(self, data):
        self.file.write(data)

receiver = FileReceiver(local_path)
d = ftpClient.retrieveFile(remote_path,receiver)

I want to be able to abort the transfers if they've not completed
after a specific period of time. When the timeout is triggered, I call
ftpClient.transport.loseConnection() which seems to stop the dL on
line 109 of [1] from firing, but the data transfer continues until
completion. This is true for both storing and retrieving files.

In the storing case, I thought that
twisted.protocols.basic.FileSender's stopProducing method might help,
but all it seems to do is trigger the errback for anyone waiting for a
response - the actual data transfer continues.

How do I abort the transfer and clear the wire when the timeout fires?

Many thanks,
Matt.


[1] http://twistedmatrix.com/pipermail/twisted-python/attachments/20031204/d43a4251/attachment.txt


From morbid.concept at gmail.com  Tue Sep  1 22:15:02 2009
From: morbid.concept at gmail.com (Nathan Lundquist)
Date: Tue, 01 Sep 2009 21:15:02 -0500
Subject: [Twisted-Python] TDD using Trial
In-Reply-To: <0654472F-2F5F-4F9E-9807-A0BA78137A39@sdsc.edu>
References: <4A9AC689.8000404@gmail.com>
	<4A9AC7A2.8070104@gmail.com>	<20090831010835.GB3466@thristian.org>
	<0654472F-2F5F-4F9E-9807-A0BA78137A39@sdsc.edu>
Message-ID: <4A9DD526.8060400@gmail.com>

Tim and Paul,

Thanks for all the information. Exactly what I was looking for.

Paul Hubbard wrote:
> I also found this quite helpful in writing StringIO tests -
> 
> http://twistedmatrix.com/trac/browser/branches/trial-tutorial-2443-2/doc/core/howto/trial.xhtml
> 
> My code is nowhere near the standards of Twisted yet, but FWIW here's  
> what I came up with:
> 
> http://amoeba.ucsd.edu:82/?p=attribute_store.git;a=blob;f=test/test_protocol.py;h=1d7df304a757adddfe98ab7e01e0aa15d29a1571;hb=HEAD
> 
> HTH,
> Paul
> 
> 
> On Aug 30, 2009, at 6:08 PM, Tim Allen wrote:
> 
>> On Sun, Aug 30, 2009 at 01:40:34PM -0500, Nathan Lundquist wrote:
>>> I was wondering if any tutorials existed for setting up unit tests  
>>> for
>>> use with trial. I've done a fair share of googling and only found
>>> tickets suggesting that more documentation be made available for  
>>> trial.
>> Setting up unit tests with trial is (deliberately) almost identical to
>> setting up unit tests with the "unittest" module in Python's standard
>> library. The key differences are:
>>
>>    - Trial provides a subclass of unittest.TestCase called
>>      twisted.trial.unittest.TestCase, which adds the following  
>> features
>>      on top of the standard Python API:
>> 	- t.t.u.TestCase supports testing of Twisted-based code,
>> 	  spinning up the reactor and shutting it down when necessary,
>> 	  etc.
>> 	- t.t.u.TestCase allows the setUp, tearDown and individual test
>> 	  methods to return Deferreds, which causes Trial to wait for
>> 	  those Deferreds to fire before it continues on.
>> 	- t.t.u.TestCase has an expanded set of assertions available,
>> 	  including Twisted-specific ones like failUnlessFailure (to
>> 	  check the Failure object returned by a deferred) but also
>> 	  prettier output for simple ones like failUnlessEqual.
>> 	- t.t.u.TestCase has a 'patch' method which allows you to
>> 	  monkeypatch other code for testing purposes. All patches are
>> 	  reverted at the end of the individual test.
>> 	- t.t.u.TestCase subclasses and even individual test methods can
>> 	  be given a 'skip' property, set to a string describing why
>> 	  that TestCase or test should be skipped. This lets you stop
>> 	  broken tests being reported as failures, but unlike just
>> 	  commenting them out, you don't have to worry that the test
>> 	  will be left out of refactorings or forgotten about and never
>> 	  uncommented. You can even skip tests at runtime, for example
>> 	  if a test is platform specific and the test is being run on
>> 	  the 'wrong' platform.
>>    - Trial will happily run unittest.TestCase test cases, but they
>>      can't use Twisted features like the reactor or deferreds. If
>>      you just want to use Trial as an alternative to nosetests, you
>>      should be fine.
>>    - If you want the automatic test-discovery to work, you need to put
>>      your TestCase classes inside files named "test_whatever.py",
>>      inside a Python package. Then you can just give Trial the name of
>>      the Python package and it will run all the tests it can find
>>      inside it.
>>
>> Is that helpful?
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 



From filoufake-python at yahoo.fr  Wed Sep  2 07:44:16 2009
From: filoufake-python at yahoo.fr (filoufake-python at yahoo.fr)
Date: Wed, 2 Sep 2009 04:44:16 -0700 (PDT)
Subject: [Twisted-Python] Re : Re : Re : Telnet server using Twisted and
	AuthenticatingTelnetProtocol
In-Reply-To: <20090901213712.7436.649981883.divmod.xquotient.131@localhost.localdomain>
References: <986632.28669.qm@web26103.mail.ukl.yahoo.com>
	<20090820164821.7726.1422282903.divmod.xquotient.79@localhost.localdomain>
	<140670.22919.qm@web26108.mail.ukl.yahoo.com>
	<20090827135231.7475.428699872.divmod.xquotient.36@localhost.localdomain>
	<483632.81503.qm@web26102.mail.ukl.yahoo.com>
	<20090901213712.7436.649981883.divmod.xquotient.131@localhost.localdomain>
Message-ID: <901134.40070.qm@web26101.mail.ukl.yahoo.com>

Hello,

>It's hard to say what's going wrong without being able to see all of the 
>code.  A short, self contained, correct example (<http://sscce.org/>) 
>would help a lot.

Hereafter is the simplest code that generates the problem.
If you run it, you will see that after entering the password nothing
happened. The "telnet_Command" method of MyTelnet is never called.
I think the problem is what requestAvatar returns.
Thanks again for your support

import sys
from zope.interface import implements
from twisted.internet import protocol
from twisted.python import log
from twisted.cred import error
from twisted.cred import portal
from twisted.cred import checkers
from twisted.cred import credentials
from twisted.conch.telnet import AuthenticatingTelnetProtocol
from twisted.conch.telnet import StatefulTelnetProtocol
from twisted.conch.telnet import ITelnetProtocol
from twisted.conch.telnet import TelnetTransport

class Realm:
  implements(portal.IRealm)

  def requestAvatar(self, avatarId, mind, *interfaces):
    if ITelnetProtocol in interfaces:
      av = MyTelnet()
      return ITelnetProtocol, av, lambda:None
    raise NotImplementedError("Not supported by this realm")

class MyTelnet(StatefulTelnetProtocol):
  def telnet_Command(self, line):
    print "line received via telnet", line

def main():
  r = Realm()
  p = portal.Portal(r)
  c = checkers.InMemoryUsernamePasswordDatabaseDontUse()
  c.addUser("AA", "aa")
  p.registerChecker(c)
  p.registerChecker(checkers.AllowAnonymousAccess())
  f = protocol.ServerFactory()
  f.protocol = lambda: TelnetTransport(AuthenticatingTelnetProtocol, p)
  log.startLogging(sys.stdout)
  from twisted.internet import reactor
  reactor.listenTCP(4738, f)
  reactor.run()

if __name__ == '__main__':
  main()


      



From itamar at itamarst.org  Wed Sep  2 08:56:13 2009
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Wed, 02 Sep 2009 08:56:13 -0400
Subject: [Twisted-Python] twistd plugin or .tac file?
In-Reply-To: <3055c0a0909011039x6e84d645i18d1fe2349ec50cb@mail.gmail.com>
References: <3055c0a0909011039x6e84d645i18d1fe2349ec50cb@mail.gmail.com>
Message-ID: <1251896174.4290.40.camel@pintsize>

On Tue, 2009-09-01 at 13:39 -0400, Martin-Louis Bright wrote:

> Which is the recommended or preferred way to deploy an app that will
> leverage twistd: designing the app as a twistd plugin or creating a
> Service and using a .tac file?

A plugin is nicer in that you can have command-line options, e.g.

$ twistd -n web --path=/tmp --port=8080

> Also, if you need to expose your functionality as a Service to
> properly use the twisted application framework, how do you achieve
> this if your app doesn't need a network port?

Just subclass Service and override startService and stopService to do
whatever you need to start and stop.

--Itamar



From exarkun at twistedmatrix.com  Wed Sep  2 10:27:40 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 02 Sep 2009 14:27:40 -0000
Subject: [Twisted-Python] Re : Re : Re : Telnet server using Twisted
	and	AuthenticatingTelnetProtocol
In-Reply-To: <901134.40070.qm@web26101.mail.ukl.yahoo.com>
References: <986632.28669.qm@web26103.mail.ukl.yahoo.com>
	<20090820164821.7726.1422282903.divmod.xquotient.79@localhost.localdomain>
	<140670.22919.qm@web26108.mail.ukl.yahoo.com>
	<20090827135231.7475.428699872.divmod.xquotient.36@localhost.localdomain>
	<483632.81503.qm@web26102.mail.ukl.yahoo.com>
	<20090901213712.7436.649981883.divmod.xquotient.131@localhost.localdomain>
	<901134.40070.qm@web26101.mail.ukl.yahoo.com>
Message-ID: <20090902142740.7436.129677005.divmod.xquotient.158@localhost.localdomain>

On 11:44 am, filoufake-python at yahoo.fr wrote:
>Hello,
>>It's hard to say what's going wrong without being able to see all of 
>>the
>>code.  A short, self contained, correct example (<http://sscce.org/>)
>>would help a lot.
>
>Hereafter is the simplest code that generates the problem.
>If you run it, you will see that after entering the password nothing
>happened. The "telnet_Command" method of MyTelnet is never called.
>I think the problem is what requestAvatar returns.
>Thanks again for your support
>
>import sys
>from zope.interface import implements
>from twisted.internet import protocol
>from twisted.python import log
>from twisted.cred import error
>from twisted.cred import portal
>from twisted.cred import checkers
>from twisted.cred import credentials
>from twisted.conch.telnet import AuthenticatingTelnetProtocol
>from twisted.conch.telnet import StatefulTelnetProtocol
>from twisted.conch.telnet import ITelnetProtocol
>from twisted.conch.telnet import TelnetTransport
>
>class Realm:
>  implements(portal.IRealm)
>
>  def requestAvatar(self, avatarId, mind, *interfaces):
>    if ITelnetProtocol in interfaces:
>      av = MyTelnet()
>      return ITelnetProtocol, av, lambda:None
>    raise NotImplementedError("Not supported by this realm")
>
>class MyTelnet(StatefulTelnetProtocol):
>  def telnet_Command(self, line):
>    print "line received via telnet", line
>
>def main():
>  r = Realm()
>  p = portal.Portal(r)
>  c = checkers.InMemoryUsernamePasswordDatabaseDontUse()
>  c.addUser("AA", "aa")
>  p.registerChecker(c)
>  p.registerChecker(checkers.AllowAnonymousAccess())
>  f = protocol.ServerFactory()
>  f.protocol = lambda: TelnetTransport(AuthenticatingTelnetProtocol, p)
>  log.startLogging(sys.stdout)
>  from twisted.internet import reactor
>  reactor.listenTCP(4738, f)
>  reactor.run()
>
>if __name__ == '__main__':
>  main()


The default state of StatefulTelnetProtocol is "Discard".  If you change 
the avatar's state to "Command" before returning it from requestAvatar, 
I think you'll see the behavior you want.

Jean-Paul


From hellfeuer at gmail.com  Thu Sep  3 05:07:31 2009
From: hellfeuer at gmail.com (Salil)
Date: Thu, 3 Sep 2009 14:37:31 +0530
Subject: [Twisted-Python] connecting through an http proxy
In-Reply-To: <20090901215140.7436.617816276.divmod.xquotient.137@localhost.localdomain>
References: <47ec90170909011028x4089494s9b963ebe332fcd78@mail.gmail.com>
	<20090901215140.7436.617816276.divmod.xquotient.137@localhost.localdomain>
Message-ID: <47ec90170909030207g7b029dd3u3a5d2d596081fc0b@mail.gmail.com>

Thanks for your reply. The app I was interested in fixing was gm-notify (
https://code.launchpad.net/gm-notify) which is a notifier for gmail. But to
be honest I've since lost interest in the question because I patched gwibber
to read the gmail atom feed instead of fixing this :)

Anyway the relevant code is:
d = defer.Deferred()
c = ClientCreator(reactor, IMAPClient)
c.connectSSL("imap.gmail.com", 993,
ssl.ClientContextFactory()).addCallback(self._gotProtocol, d)

Here connectSSL should use a proxy
In case someone knows how to fix this I'm sure there will be other people
who will appreciate it (https://bugs.launchpad.net/gm-notify/+bug/371878)

Thanks

On Wed, Sep 2, 2009 at 3:21 AM, <exarkun at twistedmatrix.com> wrote:

> On 05:28 pm, hellfeuer at gmail.com wrote:
> >First of let me say that I'm *very* new to twisted (I'm only trying to
> >patch
> >an app that uses twisted). So sorry if this is a stupid question.
> >
> >The problem is I am behind an http proxy (with authentication), so I
> >need to
> >connect through that proxy. The documentation doesn't help (me) much
> >and
> >neither does google (mostly because there are a million people who have
> >created their own proxy server. This is not what I want to do).
> >
> >Any tips? The app is currently using ClientCreator (to make an SSL
> >connection), but I'm willing to change all that if necessary.
>
> If you're using twisted.web.client, then this will be tough, as there
> really isn't any support for HTTP proxies in that API.  You might be
> able to get something to work if you're using HTTPPageGetter directly,
> though - specify the right proxy authentication headers in the headers
> dictionary you give to the factory, make sure you put the full URI in
> the request path, etc.
>
> If you're doing something else, then maybe you can elaborate on that. :)
>
> The new HTTP client API which has not yet been part of any release will
> make this easier, but that doesn't help you if you need to work with an
> existing version of Twisted.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090903/77e716f7/attachment.htm 

From p.mayers at imperial.ac.uk  Thu Sep  3 05:38:26 2009
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Thu, 03 Sep 2009 10:38:26 +0100
Subject: [Twisted-Python] Conch/SSH & Cisco IOS
Message-ID: <4A9F8E92.9070103@imperial.ac.uk>

All,

I've been having some problems using Conch/SSH to talk to the SSH server 
on Cisco IOS (specifically the netconf subsystem)

It seems that the IOS SSH server reacts badly to the following:

c: syn
s: syn,ack
c: ack
c: PSH <my version>, <my kex>
s: PSH <ios version>
<hang>

i.e. IOS doesn't like being bombarded with either the version string or 
KEX before it's sent its own banner.

I've patched this locally by overriding connectionMade to be a noop and 
re-implementing dataReceived; but if I prepare a patch would it be accepted?

If not, could I prepare a patch factoring some of this logic out so it 
can be more easily overridden?


From lvh at laurensvh.be  Thu Sep  3 07:36:25 2009
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Thu, 3 Sep 2009 13:36:25 +0200
Subject: [Twisted-Python] twisted.positioning: storing the error information
Message-ID: <cedc0c090909030436wa301decp3e06c8ea781b25bf@mail.gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi,


First of all, sorry for the lack of promised gpsd support updates
yesterday, I was in bed with the flu (and still am, I guess -- it's
just slightly less bad than yesterday), so if I'm not making any
sense, blame me being delirious.

As you might know t.positioning currently has one object for storing a
bunch of errors, and the IPositioningReceiver interface describes one
method (positioningErrorReceived) for receiving such an error object.
Coming from NMEA (which only reports HDOP VDOP and PDOP), putting all
of it in one object made sense -- there is an obvious mathematical
relation between the three,  so in case one is missing we can
calculate it, and that's exactly what t.p.base.PositioningError does.

For more information as to what all these xDOPs are, see:
http://en.wikipedia.org/wiki/Dilution_of_precision_%28GPS%29. Quick
introduction (skip this paragraph if you already know what xDOP
means): HDOP is the relative imprecision (expressed in the value times
the reference imprecision, which depends on the device) on latitude
and longitude. Suppose the device has a reference imprecision of 1
meter and the HDOP is 5, you know where you are (lat/lon wise) within
a five meter radius. Similarly, VDOP gives you an idea of your
altitude. Suppose the device normally provides altitude precisions up
to one meter, and the VDOP is 5, you know where you are altitude-wise
on a 5 meter line. PDOP is the euclidian norm of the (HDOP, VDOP)
vector, and as such is slightly less useful as something directly
translatable to an error measurement (it's the radius of a sphere...
sort of) but more of a relative measure of goodness-of-fix.

Anyway, the problem is this. Now that I'm implementing GPSD support,
I've noticed that it's perfectly sensible to have your positioning
source report all sorts of errors: climb error estimates, time error
estimates, position error estimates... (all of these measured in
meters, m/s, degrees/second... instead of relative values). This was
actually the original idea, and I think it was only dropped because it
was hard to do with NMEA. However, if there's anything I've learned
about NMEA it's that the less your public API looks like it probably
the better, so perhaps we should change how this works?

Maybe we could have a bunch of separate kinds of errors, and supply
them with that information. The NMEAAdapter, which does not provide
such error estimates yet (in most cases) could provide dummy error
reports with all relevant error attributes set to None. (This could be
elegantly done by simply seeding self._state).

Splitting all of this up isn't incredibly easy though. Obviously HDOP
(as well as XDOP/YDOP, which apparently will be reported separately in
NMEA3.0) is related to the position and VDOP is related to the
altitude. Where do you put PDOP, though?


Thanks in advance for your thoughts
Laurens
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)
Comment: Use GnuPG with Firefox : http://getfiregpg.org (Version: 0.7.8)

iEYEARECAAYFAkqfqegACgkQT5v5zGkvKT74qgCfY2ok9rcFkhpoRU4+f6DIOGot
1t4AoL1n9rb9OUxOwMTuojaiBMlWLG35
=lEq+
-----END PGP SIGNATURE-----


From lvh at laurensvh.be  Thu Sep  3 08:23:47 2009
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Thu, 3 Sep 2009 14:23:47 +0200
Subject: [Twisted-Python] twisted.positioning: storing the error
	information
In-Reply-To: <cedc0c090909030436wa301decp3e06c8ea781b25bf@mail.gmail.com>
References: <cedc0c090909030436wa301decp3e06c8ea781b25bf@mail.gmail.com>
Message-ID: <cedc0c090909030523y6c8691f5q572383a4ba5150f9@mail.gmail.com>

Oh, I think I've just found a nice and clever way of doing it.

Let's stop pretending that altitudes are special. After all, the axes
altitude, latitude and longitude are measured on are all orthogonal.
The only difference is that we use degrees to measure one and meters
to measure the other (because the earth just isn't flat). The
"position" in time-position-velocity (TPV) is traditionally understood
to also contain altitude information.

This has the advantage of keeping the Position(ing)Error object
consistent with the way it works now, and then we only have to remove
the IPositioningReceiver.altitudeReceived callback and merge it with
IPositioningReceiver.positionReceived, and then add a bunch of objects
for describing all sorts of errors (ClimbError, HeadingError...),
rename PositioningError to PositionError and add it as a parameter on
positionReceived, and similarly add a parameter for all of the other
callbacks except for beaconInformationReceived.

Make sense to anyone else but me?


Thanks for listening
Laurens


From foom at fuhm.net  Thu Sep  3 13:04:15 2009
From: foom at fuhm.net (James Y Knight)
Date: Thu, 3 Sep 2009 13:04:15 -0400
Subject: [Twisted-Python] Conch/SSH & Cisco IOS
In-Reply-To: <4A9F8E92.9070103@imperial.ac.uk>
References: <4A9F8E92.9070103@imperial.ac.uk>
Message-ID: <1CF75890-4A8D-45C6-A38F-C4E71FF7DC2F@fuhm.net>


On Sep 3, 2009, at 5:38 AM, Phil Mayers wrote:

> All,
>
> I've been having some problems using Conch/SSH to talk to the SSH  
> server
> on Cisco IOS (specifically the netconf subsystem)
>
> It seems that the IOS SSH server reacts badly to the following:
>
> c: syn
> s: syn,ack
> c: ack
> c: PSH <my version>, <my kex>
> s: PSH <ios version>
> <hang>
>
> i.e. IOS doesn't like being bombarded with either the version string  
> or
> KEX before it's sent its own banner.

I'm surprised to hear that, given that other users have posted  
programs using conch that run commands against multiple Cisco routers  
-- and apparently those programs worked. Do you have a particularly  
old IOS? (Or maybe particularly new?)

But if that's the case, it is clearly a bug in their ssh implementation.

 From http://www.ietf.org/rfc/rfc4253.txt:
>    Since the new client MAY immediately send additional data after its
>    identification string (before receiving the server's identification
>    string), the old protocol may already be corrupt when the client
>    learns that the server is old.  When this happens, the client  
> SHOULD
>    close the connection to the server, and reconnect using the old
>    protocol.


But anyhow, a patch to add a "broken-server-bug-workaround" option  
seems reasonable. Once you've reported the bug to Cisco, so they'll  
fix it at some point, that is.

James


From pahan at xzrq.net  Thu Sep  3 16:07:14 2009
From: pahan at xzrq.net (Pavel Pergamenshchik)
Date: Thu, 3 Sep 2009 13:07:14 -0700
Subject: [Twisted-Python] Conch/SSH & Cisco IOS
In-Reply-To: <4A9F8E92.9070103@imperial.ac.uk>
References: <4A9F8E92.9070103@imperial.ac.uk>
Message-ID: <7447a0ac0909031307n1c903d8vaf5dc14ea4163049@mail.gmail.com>

On Thu, Sep 3, 2009 at 2:38 AM, Phil Mayers<p.mayers at imperial.ac.uk> wrote:
> All,
>
> I've been having some problems using Conch/SSH to talk to the SSH server
> on Cisco IOS (specifically the netconf subsystem)
...
> i.e. IOS doesn't like being bombarded with either the version string or
> KEX before it's sent its own banner.

What version of IOS, what router model and what version of Twisted are
you using? Can you post the ssh-related parts of your router
configuration?


From p.mayers at imperial.ac.uk  Thu Sep  3 18:19:16 2009
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Thu, 03 Sep 2009 23:19:16 +0100
Subject: [Twisted-Python] Conch/SSH & Cisco IOS
In-Reply-To: <1CF75890-4A8D-45C6-A38F-C4E71FF7DC2F@fuhm.net>
References: <4A9F8E92.9070103@imperial.ac.uk>
	<1CF75890-4A8D-45C6-A38F-C4E71FF7DC2F@fuhm.net>
Message-ID: <4AA040E4.5000700@imperial.ac.uk>

James Y Knight wrote:
>> It seems that the IOS SSH server reacts badly to the following:
>>
>> c: syn
>> s: syn,ack
>> c: ack
>> c: PSH <my version>, <my kex>
>> s: PSH <ios version>
>> <hang>
>>
>> i.e. IOS doesn't like being bombarded with either the version string  
>> or
>> KEX before it's sent its own banner.
> 
> I'm surprised to hear that, given that other users have posted  
> programs using conch that run commands against multiple Cisco routers  

Well, it's possible I've mis-diagnosed the problem.

The symptoms are that my Conch SSH client only connects maybe one time 
out of every 20, with a tcpdump showing the above. If I patch conch to 
only send its banner after the cisco, it works fine.

If I get time I'll try to work up a minimal example and test it against 
an older IOS version. Time is not something I have a lot of - this is 
strictly a "nice to have" project.

> -- and apparently those programs worked. Do you have a particularly  
> old IOS? (Or maybe particularly new?)

It's pretty new - 12.2(33)SXI on Cisco 6500/sup720

> But if that's the case, it is clearly a bug in their ssh implementation.

Probably.

> 
>  From http://www.ietf.org/rfc/rfc4253.txt:
>>    Since the new client MAY immediately send additional data after its
>>    identification string (before receiving the server's identification
>>    string), the old protocol may already be corrupt when the client
>>    learns that the server is old.  When this happens, the client  
>> SHOULD
>>    close the connection to the server, and reconnect using the old
>>    protocol.
> 
> 
> But anyhow, a patch to add a "broken-server-bug-workaround" option  
> seems reasonable. Once you've reported the bug to Cisco, so they'll  
> fix it at some point, that is.

I'll be honest; I'm unlikely to spend the time to do that. I open about 
10 TAC cases a month for things varying from malloc failures to full-on 
crashes, and I have opened enough to know what their response would be.

*If* I can reproduce a clear regression against a previous software 
version I *might* open a fire&forget TAC case.


From p.mayers at imperial.ac.uk  Thu Sep  3 18:33:22 2009
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Thu, 03 Sep 2009 23:33:22 +0100
Subject: [Twisted-Python] Conch/SSH & Cisco IOS
In-Reply-To: <7447a0ac0909031307n1c903d8vaf5dc14ea4163049@mail.gmail.com>
References: <4A9F8E92.9070103@imperial.ac.uk>
	<7447a0ac0909031307n1c903d8vaf5dc14ea4163049@mail.gmail.com>
Message-ID: <4AA04432.1040207@imperial.ac.uk>

Pavel Pergamenshchik wrote:
> On Thu, Sep 3, 2009 at 2:38 AM, Phil Mayers<p.mayers at imperial.ac.uk> wrote:
>> All,
>>
>> I've been having some problems using Conch/SSH to talk to the SSH server
>> on Cisco IOS (specifically the netconf subsystem)
> ...
>> i.e. IOS doesn't like being bombarded with either the version string or
>> KEX before it's sent its own banner.
> 
> What version of IOS, what router model and what version of Twisted are

12.2(33)SXI2 on 6500/sup720

Twisted version is either 2.5.0 or 8.2.0 - same results with both.

It does seem to be an IOS bug; it doesn't happen against some of other 
other kit (e.g. 3750s running 12.2(46)SE)

> you using? Can you post the ssh-related parts of your router
> configuration?

There is none; it's using plain defaults i.e. boot the box, run a 
"crypto key generate rsa", SSH is enabled.

Sigh. I am really not looking forward to opening a TAC case here.

"What SSH client are you running?"
"Twisted Conch"
"Is that a windows application"
"No it's an SSH library"
"We support Putty"
"It's a library"
"Perl?"

Grumble.


From nathan.stocks at gmail.com  Fri Sep  4 02:22:10 2009
From: nathan.stocks at gmail.com (Nathan)
Date: Fri, 4 Sep 2009 00:22:10 -0600
Subject: [Twisted-Python] Installing twisted on Snow Leopard with custom
	32-bit Python from python.org
Message-ID: <96c9d6a80909032322x32fc4304i8b22e4b8fbf4a5f5@mail.gmail.com>

I've installed the 32-bit Python on Snow Leopard (for various reasons
unrelated to twisted) and would like to get twisted working with it.
I've tried downloading twisted and running the standard "sudo python
setup.py install" -- but that seems to simply install it in the system
Python installation.  How can I get twisted installed where the Python
installation that I got from python.org can use it?

~ Nathan


From ronaldoussoren at mac.com  Fri Sep  4 06:21:08 2009
From: ronaldoussoren at mac.com (Ronald Oussoren)
Date: Fri, 04 Sep 2009 12:21:08 +0200
Subject: [Twisted-Python] Installing twisted on Snow Leopard with
	custom	32-bit Python from python.org
In-Reply-To: <96c9d6a80909032322x32fc4304i8b22e4b8fbf4a5f5@mail.gmail.com>
References: <96c9d6a80909032322x32fc4304i8b22e4b8fbf4a5f5@mail.gmail.com>
Message-ID: <63475578504701279737914897104356085641-Webmail@me.com>

 
On Friday, 04 September, 2009, at 08:22AM, "Nathan" <nathan.stocks at gmail.com> wrote:
>I've installed the 32-bit Python on Snow Leopard (for various reasons
>unrelated to twisted) and would like to get twisted working with it.
>I've tried downloading twisted and running the standard "sudo python
>setup.py install" -- but that seems to simply install it in the system
>Python installation.  How can I get twisted installed where the Python
>installation that I got from python.org can use it?

Your probably using /usr/bin/python rather than the one you downloaded from Python.org. 

What's the output of 'which python'?  The python.org installer places binaries into /usr/local/bin, and also has a script in /Application/Python 2.6/ that will patch the startup profile of your shell to ensure that the python.org binaries are earlier on $PATH than the system install.

Ronald



From exarkun at twistedmatrix.com  Fri Sep  4 09:29:06 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 04 Sep 2009 13:29:06 -0000
Subject: [Twisted-Python] FTPClient - aborting transfers
In-Reply-To: <e554908b0909011551h501339f7of45672954d08338@mail.gmail.com>
References: <e554908b0909011551h501339f7of45672954d08338@mail.gmail.com>
Message-ID: <20090904132906.7436.1198691450.divmod.xquotient.266@localhost.localdomain>

On 1 Sep, 10:51 pm, matt at bennett.name wrote:
>Hello all,
>
>I've got an FTPClient implementation very similar to the one at [1],
>and I've added the ability to retrieve a file from the server with the
>following snippet:
>
>class FileReceiver(Protocol):
>    """
>        Protocol subclass that writes received data to a local file.
>    """
>    def __init__(self, filename):
>        self.file = open(filename, 'wb')
>
>    def dataReceived(self, data):
>        self.file.write(data)
>
>receiver = FileReceiver(local_path)
>d = ftpClient.retrieveFile(remote_path,receiver)
>
>I want to be able to abort the transfers if they've not completed
>after a specific period of time. When the timeout is triggered, I call
>ftpClient.transport.loseConnection() which seems to stop the dL on
>line 109 of [1] from firing, but the data transfer continues until
>completion. This is true for both storing and retrieving files.
>
>In the storing case, I thought that
>twisted.protocols.basic.FileSender's stopProducing method might help,
>but all it seems to do is trigger the errback for anyone waiting for a
>response - the actual data transfer continues.
>
>How do I abort the transfer and clear the wire when the timeout fires?

The DTP connection is set as the (undocumented) dtpInstance attribute on 
the FTP instance it's associated with.  You can call loseConnection on 
that object's transport and the download should stop.  It might be 
worthwhile for someone to clean this up a bit.  Does it ever make sense 
for the transfer to continue when the control channel is gone?  Even if 
so, it'd be nice to have a supported (or at least documented) way to do 
this cleanup.

Jean-Paul


From p.mayers at imperial.ac.uk  Fri Sep  4 09:36:44 2009
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Fri, 04 Sep 2009 14:36:44 +0100
Subject: [Twisted-Python] Conch/SSH & Cisco IOS
In-Reply-To: <1CF75890-4A8D-45C6-A38F-C4E71FF7DC2F@fuhm.net>
References: <4A9F8E92.9070103@imperial.ac.uk>
	<1CF75890-4A8D-45C6-A38F-C4E71FF7DC2F@fuhm.net>
Message-ID: <4AA117EC.7070400@imperial.ac.uk>

James Y Knight wrote:
> On Sep 3, 2009, at 5:38 AM, Phil Mayers wrote:
> 
>> All,
>>
>> I've been having some problems using Conch/SSH to talk to the SSH  
>> server
>> on Cisco IOS (specifically the netconf subsystem)
>>
>> It seems that the IOS SSH server reacts badly to the following:
>>
>> c: syn
>> s: syn,ack
>> c: ack
>> c: PSH <my version>, <my kex>
>> s: PSH <ios version>
>> <hang>
>>
>> i.e. IOS doesn't like being bombarded with either the version string  
>> or
>> KEX before it's sent its own banner.
> 
> I'm surprised to hear that, given that other users have posted  
> programs using conch that run commands against multiple Cisco routers  
> -- and apparently those programs worked. Do you have a particularly  
> old IOS? (Or maybe particularly new?)

As per my other email, it seems to be limited to the 12.2(33) train on 
the 6500 platform. Later and earlier trains on other platforms don't 
display the issue.

> 
> But if that's the case, it is clearly a bug in their ssh implementation.
> 
>  From http://www.ietf.org/rfc/rfc4253.txt:
>>    Since the new client MAY immediately send additional data after its
>>    identification string (before receiving the server's identification
>>    string), the old protocol may already be corrupt when the client
>>    learns that the server is old.  When this happens, the client  
>> SHOULD
>>    close the connection to the server, and reconnect using the old
>>    protocol.
> 
> 
> But anyhow, a patch to add a "broken-server-bug-workaround" option  
> seems reasonable. Once you've reported the bug to Cisco, so they'll  
> fix it at some point, that is.

FWIW I've opened a TAC case with Cisco; we'll see what they say.

I note that OpenSSH seems to wait for the server banner before sending 
the client banner & kex.


From peter.westlake at pobox.com  Fri Sep  4 09:53:37 2009
From: peter.westlake at pobox.com (Peter Westlake)
Date: Fri, 04 Sep 2009 14:53:37 +0100
Subject: [Twisted-Python] Is there an equivalent of tap2deb?
Message-ID: <1252072417.21540.1333224733@webmail.messagingengine.com>

Now that .tap files are obsolete, is there a supported way of making
Debian packages like tap2dep?

Thanks,

Peter.


From screwtape at froup.com  Fri Sep  4 10:29:54 2009
From: screwtape at froup.com (Tim Allen)
Date: Sat, 5 Sep 2009 00:29:54 +1000
Subject: [Twisted-Python] Is there an equivalent of tap2deb?
In-Reply-To: <1252072417.21540.1333224733@webmail.messagingengine.com>
References: <1252072417.21540.1333224733@webmail.messagingengine.com>
Message-ID: <20090904142954.GC5111@thristian.org>

On Fri, Sep 04, 2009 at 02:53:37PM +0100, Peter Westlake wrote:
> Now that .tap files are obsolete, is there a supported way of making
> Debian packages like tap2dep?

.tap files (Pickle-based config files) may be obsolete, but I don't
believe the other variants (.tac for Python-based config files, and
I think there's an XML serialisation too) are obsolete.

I've never used tap2deb, but twistd and tap2rpm both seem to be quite
happy with .tac files in our production systems here.


From nathan.stocks at gmail.com  Fri Sep  4 12:45:11 2009
From: nathan.stocks at gmail.com (Nathan)
Date: Fri, 4 Sep 2009 10:45:11 -0600
Subject: [Twisted-Python] Installing twisted on Snow Leopard with custom
	32-bit Python from python.org
In-Reply-To: <63475578504701279737914897104356085641-Webmail@me.com>
References: <96c9d6a80909032322x32fc4304i8b22e4b8fbf4a5f5@mail.gmail.com>
	<63475578504701279737914897104356085641-Webmail@me.com>
Message-ID: <96c9d6a80909040945o41b41abfrfbb2325bc8a00b27@mail.gmail.com>

On Fri, Sep 4, 2009 at 4:21 AM, Ronald Oussoren<ronaldoussoren at mac.com> wrote:
>
> On Friday, 04 September, 2009, at 08:22AM, "Nathan" <nathan.stocks at gmail.com> wrote:
>>I've installed the 32-bit Python on Snow Leopard (for various reasons
>>unrelated to twisted) and would like to get twisted working with it.
>>I've tried downloading twisted and running the standard "sudo python
>>setup.py install" -- but that seems to simply install it in the system
>>Python installation. ?How can I get twisted installed where the Python
>>installation that I got from python.org can use it?
>
> Your probably using /usr/bin/python rather than the one you downloaded from Python.org.
>
> What's the output of 'which python'? ?The python.org installer places binaries into /usr/local/bin, and also has a script in /Application/Python 2.6/ that will patch the startup profile of your shell to ensure that the python.org binaries are earlier on $PATH than the system install.

Nope, I was calling
"/Library/Frameworks/Python.framework/Versions/2.6/bin/python"
explicitly, which is the location that the binary 32-bit installer
indicated it was installing into.  I disabled most (maybe all) of the
"helpful" python.org installer features like altering my path for me,
installing into /usr/local/bin, and installing the GUI apps.

But since you are mentioning it, perhaps twisted will install into the
custom python if it is earlier in the path than the system python?
Trying....nope.  Well, something's different--perhaps there's more
paths I need to add?  Here's what I tried:

export PATH="/Library/Frameworks/Python.framework/Versions/2.6/bin/:$PATH"

$ sudo python setup.py install
running install
running build
running build_py
running build_ext
gcc -arch ppc -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk
-fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -O3
-I/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6
-c conftest.c -o conftest.o
gcc -arch ppc -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk
-fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -O3
-I/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6
-c conftest.c -o conftest.o
conftest.c:1:23: error: sys/epoll.h: No such file or directory
conftest.c:1:23: error: sys/epoll.h: No such file or directory
lipo: can't figure out the architecture type of: /var/tmp//ccIcwAI5.out
building 'twisted.runner.portmap' extension
creating build/temp.macosx-10.3-fat-2.6
creating build/temp.macosx-10.3-fat-2.6/twisted
creating build/temp.macosx-10.3-fat-2.6/twisted/runner
gcc -arch ppc -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk
-fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -O3
-I/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6
-c twisted/runner/portmap.c -o
build/temp.macosx-10.3-fat-2.6/twisted/runner/portmap.o
In file included from
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/unicodeobject.h:4,
                 from
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/Python.h:85,
                 from twisted/runner/portmap.c:10:
/Developer/SDKs/MacOSX10.4u.sdk/usr/include/stdarg.h:4:25: error:
stdarg.h: No such file or directory
In file included from
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/unicodeobject.h:4,
                 from
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/Python.h:85,
                 from twisted/runner/portmap.c:10:
/Developer/SDKs/MacOSX10.4u.sdk/usr/include/stdarg.h:4:25: error:
stdarg.h: No such file or directory
lipo: can't figure out the architecture type of: /var/tmp//ccnV11Ya.out
error: command 'gcc' failed with exit status 1


~ Nathan


From peter.westlake at pobox.com  Fri Sep  4 14:03:41 2009
From: peter.westlake at pobox.com (Peter Westlake)
Date: Fri, 04 Sep 2009 19:03:41 +0100
Subject: [Twisted-Python] Is there an equivalent of tap2deb?
In-Reply-To: <20090904142954.GC5111@thristian.org>
References: <1252072417.21540.1333224733@webmail.messagingengine.com>
	<20090904142954.GC5111@thristian.org>
Message-ID: <1252087421.30084.1333270037@webmail.messagingengine.com>

On Sat, 05 Sep 2009 00:29 +1000, "Tim Allen" <screwtape at froup.com>
wrote:
> On Fri, Sep 04, 2009 at 02:53:37PM +0100, Peter Westlake wrote:
> > Now that .tap files are obsolete, is there a supported way of making
> > Debian packages like tap2dep?
> 
> .tap files (Pickle-based config files) may be obsolete, but I don't
> believe the other variants (.tac for Python-based config files, and
> I think there's an XML serialisation too) are obsolete.
> 
> I've never used tap2deb, but twistd and tap2rpm both seem to be quite
> happy with .tac files in our production systems here.

I'll try that, thanks!

Peter.


From art at academ.org  Fri Sep  4 16:59:45 2009
From: art at academ.org (Bokhan Artem)
Date: Sat, 05 Sep 2009 03:59:45 +0700
Subject: [Twisted-Python] network server on multiprocessor hardware
Message-ID: <4AA17FC1.1070303@academ.org>

Hello.

Is there right (standard) way to write twisted network server
(tcp/web/mail/etc) which could use several cpu cores? For example,
master+workers model, where every worker doing the same job.
If so, may somebody help to wrap the sample code below?
May be some well-known twisted based software can do that?


from twisted.application import service,internet
from twisted.web import server,resource

class Simple(resource.Resource):
    isLeaf = True
    def render_GET(self, request):
        return "Hello world."

application = service.Application("http")
ServerFactory = server.Site(Simple())
ServerService = internet.TCPServer(8081, ServerFactory)
ServerService.setServiceParent(application)




From glyph at twistedmatrix.com  Fri Sep  4 19:20:57 2009
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Fri, 4 Sep 2009 19:20:57 -0400
Subject: [Twisted-Python] network server on multiprocessor hardware
In-Reply-To: <4AA17FC1.1070303@academ.org>
References: <4AA17FC1.1070303@academ.org>
Message-ID: <d9047f780909041620y417dd667w5f2cce684e090c3f@mail.gmail.com>

On Fri, Sep 4, 2009 at 4:59 PM, Bokhan Artem <art at academ.org> wrote:

> Hello.
>
> Is there right (standard) way to write twisted network server
> (tcp/web/mail/etc) which could use several cpu cores? For example,
> master+workers model, where every worker doing the same job.
> If so, may somebody help to wrap the sample code below?
> May be some well-known twisted based software can do that?
>

The sample code you've provided doesn't do anything; no CPU consumption of
its own (it's all in the framework) and no network I/O of its own.  So it's
hard to come up with a realistic example.  There's no way to tell Twisted
itself to spread itself out over multiple CPU cores, but then, Twisted
itself is rarely the chief CPU consumer in an application.

If you want to take advantage of multiple CPU cures though, have a look at
Ampoule: <https://launchpad.net/ampoule>.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090904/c9a1407d/attachment.htm 

From matt at bennett.name  Fri Sep  4 19:50:36 2009
From: matt at bennett.name (Matt Bennett)
Date: Sat, 5 Sep 2009 00:50:36 +0100
Subject: [Twisted-Python] os x installer, multiple source locations
Message-ID: <e554908b0909041650q3bcd76b5t51a1c88217c4d87c@mail.gmail.com>

Hello all,

I used the Twisted 8.2.0 for OS X 10.5 installer from [1] to install
twisted on my mac. I don't understand why, but I seem to have two
copies of the source on the disk, one at
/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/twisted
and another at /Library/Python/2.5/site-packages/twisted. Both
locations are on sys.path, the former taking precedence.

More curiously, the two versions appear to be different. The following
snippet fails with the version that python finds by default:

from twisted.python import usage

class Options(usage.Options):
    optParameters = [["shiny_integer", "s", 1, None, int]]
    optParameters = [["dummy_float", "d", 3.14159, None, float]]

o = Options()

Resulting in:

Traceback (most recent call last):
  File "options.py", line 7, in <module>
    o = Options()
  File "/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/twisted/python/usage.py",
line 120, in __init__
    (longOpt, shortOpt, docs, settings, synonyms, dispatch) = c()
  File "/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/twisted/python/usage.py",
line 287, in _gather_parameters
    long, short, default, doc = util.padTo(4, parameter)
  File "/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/twisted/python/util.py",
line 227, in padTo
    raise ValueError, "%d elements is more than %d." % (len(seq), n)
ValueError: 5 elements is more than 4.

The same snippet works with the version in the other location. Is this a bug?

Thanks,
Matt.

[1] http://tmrc.mit.edu/mirror/twisted/Twisted/8.2/Twisted-8.2.0_py2.5_osx10.5.dmg


From jjoske at nextdigital.com  Fri Sep  4 22:49:39 2009
From: jjoske at nextdigital.com (John Joske)
Date: Sat, 5 Sep 2009 12:49:39 +1000
Subject: [Twisted-Python] Looping in a deffered
Message-ID: <4DB589C0660D1442900051415FDBE5C0018B02DA@exchange.wdg>

I'm trying to make a simple deferred that will continue get a message of
a message queue, process it and then wait for another message.

 

While I can get the first message easily I am unable to work out how I
can get a second message without creating a new deferred in the printMsg
function, which eventually gives me a maximum recursion depth exceeded.

 

Basic code is a follows: 

 

from twisted.internet import reactor,defer

 

def printMsg(msg):

    print "Message is:"

    print msg

    

    deferred=getMsg()

    deferred.addCallback(printMsg)

 

 

def getMsg() :

    d=defer.Deferred()

    #replaced with code that actually goes to a queue to get the message

    msg="This is a message"

    d.callback(msg)

    return d

 

deferred=getMsg()

deferred.addCallback(printMsg)

reactor.run()

    

Can any one point me on the right path to solve this?

 

Thanks

 

John

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090905/3277bb8d/attachment.htm 

From art at academ.org  Sat Sep  5 07:56:34 2009
From: art at academ.org (Bokhan Artem)
Date: Sat, 05 Sep 2009 18:56:34 +0700
Subject: [Twisted-Python] network server on multiprocessor hardware
In-Reply-To: <d9047f780909041620y417dd667w5f2cce684e090c3f@mail.gmail.com>
References: <4AA17FC1.1070303@academ.org>
	<d9047f780909041620y417dd667w5f2cce684e090c3f@mail.gmail.com>
Message-ID: <4AA251F2.2060205@academ.org>

Glyph Lefkowitz ?????:
> On Fri, Sep 4, 2009 at 4:59 PM, Bokhan Artem <art at academ.org 
> <mailto:art at academ.org>> wrote:
> 
>     Hello.
> 
>     Is there right (standard) way to write twisted network server
>     (tcp/web/mail/etc) which could use several cpu cores? For example,
>     master+workers model, where every worker doing the same job.
>     If so, may somebody help to wrap the sample code below?
>     May be some well-known twisted based software can do that?
> 
> 
> The sample code you've provided doesn't do anything;

Yes, it's just a dummy sample.

> no CPU consumption of its own (it's all in the framework) and no network I/O of its own.

> So it's hard to come up with a realistic example.  There's no way to 
> tell Twisted itself to spread itself out over multiple CPU cores, but 
> then, Twisted itself is rarely the chief CPU consumer in an application.

This dummy sample can serve about 1k req/s on one cpu core. I want to find 
standard ways to make it serve 1k*ncpu req/s.

I see only one way: run master which listen network and balance requests between 
several forked twisted processes. I'm not very familiar with twisted so I want 
to see somebody's opinion and may be examples.
> 
> If you want to take advantage of multiple CPU cures though, have a look 
> at Ampoule: <https://launchpad.net/ampoule>.

Thanks, I'll take a look.

> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From lvh at laurensvh.be  Sat Sep  5 08:16:35 2009
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Sat, 5 Sep 2009 14:16:35 +0200
Subject: [Twisted-Python] network server on multiprocessor hardware
In-Reply-To: <4AA251F2.2060205@academ.org>
References: <4AA17FC1.1070303@academ.org>
	<d9047f780909041620y417dd667w5f2cce684e090c3f@mail.gmail.com>
	<4AA251F2.2060205@academ.org>
Message-ID: <cedc0c090909050516r7a7367e3ra5578af60749b6d5@mail.gmail.com>

Are you sure it's dying out because of CPU limitations? Can you show
any real applications where this happens? In my experience your
network IO always gives up ages before my processors croak :-)

I happen to be in the middle of writing a project with a big
computational component (at least when I'm not hacking away at
twisted.positioning), and generally the heavy computational stuff
doesn't live in the Twisted layer. In that case you probably want to
defer computation to a different process, a la Ampoule.


have fun,
Laurens


From art at academ.org  Sat Sep  5 10:07:24 2009
From: art at academ.org (Bokhan Artem)
Date: Sat, 05 Sep 2009 21:07:24 +0700
Subject: [Twisted-Python] network server on multiprocessor hardware
In-Reply-To: <cedc0c090909050516r7a7367e3ra5578af60749b6d5@mail.gmail.com>
References: <4AA17FC1.1070303@academ.org>	<d9047f780909041620y417dd667w5f2cce684e090c3f@mail.gmail.com>	<4AA251F2.2060205@academ.org>
	<cedc0c090909050516r7a7367e3ra5578af60749b6d5@mail.gmail.com>
Message-ID: <4AA2709C.4090501@academ.org>

Laurens Van Houtven ?????:
> Are you sure it's dying out because of CPU limitations? 

Yes, with 1k req/s cpu is 100% busy with python.

> Can you show any real applications where this happens? 

I do not have real application in python/twisted now.
That could be any internet server with high load or under dos.

> In my experience your network IO always gives up ages before my processors croak :-)

It depends.

> 
> I happen to be in the middle of writing a project with a big
> computational component (at least when I'm not hacking away at
> twisted.positioning), and generally the heavy computational stuff
> doesn't live in the Twisted layer. 

I do not have any heavy computations, just high request rate.

In that case you probably want to
> defer computation to a different process, a la Ampoule.
> 
> 
> have fun,
> Laurens
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From exarkun at twistedmatrix.com  Sat Sep  5 10:17:00 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sat, 05 Sep 2009 14:17:00 -0000
Subject: [Twisted-Python] Looping in a deffered
In-Reply-To: <4DB589C0660D1442900051415FDBE5C0018B02DA@exchange.wdg>
References: <4DB589C0660D1442900051415FDBE5C0018B02DA@exchange.wdg>
Message-ID: <20090905141700.7436.533833547.divmod.xquotient.416@localhost.localdomain>

On 02:49 am, jjoske at nextdigital.com wrote:
>I'm trying to make a simple deferred that will continue get a message 
>of
>a message queue, process it and then wait for another message.
>
>While I can get the first message easily I am unable to work out how I
>can get a second message without creating a new deferred in the 
>printMsg
>function, which eventually gives me a maximum recursion depth exceeded.
>
>Basic code is a follows:
>
>from twisted.internet import reactor,defer
>
>def printMsg(msg):
>    print "Message is:"
>    print msg
>
>    deferred=getMsg()
>    deferred.addCallback(printMsg)
>
>def getMsg() :
>    d=defer.Deferred()
>    #replaced with code that actually goes to a queue to get the message
>    msg="This is a message"
>    d.callback(msg)
>    return d
>
>deferred=getMsg()
>deferred.addCallback(printMsg)
>reactor.run()
>
>Can any one point me on the right path to solve this?
>
>Thanks
>
>John

The above code is basically another way of writing this:

    def getMsg():
        return "This is a message"

    def printMsg(msg):
        print "Message is:"
        print msg
        printMsg(getMsg())

    printMsg(getMsg())

Hopefully it's obvious why this version of the code would fail 
eventually with a recursion error.  These are equivalent because 
d.addCallback(f) will call f immediately (ie, before addCallback 
returns) if d.callback(result) has already been called.

This only changes if getMsg (the original Deferred-returning one) ever 
returns a Deferred which has *not* already fired.  In such a case, the 
call stack will unwind back to the main loop and the code won't run any 
further until the Deferred returned by getMsg is called back.

I would expect the actual queue-retrieval version of the code to 
sometimes (or always) return a Deferred which has not yet been called 
back.  However, if you're seeing recursion errors, then this must not be 
the case.  Are you expecting the queue-retrieval version to return 
Deferreds that have already fired?

If you aren't, then I don't think I understand why you're encountering 
this error (or you're mistaken in your expectations).  An example closer 
to your actual program might help clear things up.

If you are, then you have two options.

First, you can stop using Deferreds and change the code from recursive 
to iterative.  eg,

    def getMsg():
        return "This is a message"

    def printMsg(msg):
        print "Message is:"
        print msg

    while True:
        printMsg(getMsg())

Of course, that's not very event loop friendly, so you might try making 
it cooperative by hooking it up to a scheduler:

    def messageIteration():
        printMsg(getMsg())
        reactor.callLater(0, messageIteration)

Or, factoring the specific scheduler policy out:

    def messagePrinter():
        while True:
            yield printMsg(getMsg())

    from twisted.internet.task import coiterate
    coiterate(messagePrinter())

Second, if there's a good reason to use Deferreds in this code (for 
example, there are multiple implementations of getMsg, some of which are 
synchronous, some of which are asynchronous, and preserving the 
interface between all of them is desirable), then you may want to use 
one of the above scheduler techniques as a trampoline so that you can 
avoid having the stack build up when a synchronous implementation is 
used:

    def messagePrinter():
        d = getMsg()
        d.addCallback(printMsg)
        d.addCallback(lambda ignored: reactor.callLater(0, 
messagePrinter))

Or you might use inlineCallbacks to define the trampoline:

    @inlineCallbacks
    def messagePrinter():
        while True:
            pringMsg(yield getMsg())

The idea here being that you never let recursion continue unbounded. 
You process one iteration and then let its call frames finish, return, 
and pop off the call stack so that they're out of the way for the next 
iteration.

Incidentally, there are a couple of other ways that Deferreds can trick 
you into hitting the call stack limit.  They can be addressed in ways 
similar to the ones I've described here.  However, they're also due to 
implementation limitations which hopefully will be removed someday.  The 
problem that you've run into here, though, doesn't seem to be due to an 
implementation limitation (at least not one that I can imagine any 
resolution to now) - it's just a pattern you need to avoid.

Hope this helps,

Jean-Paul


From phil at bubblehouse.org  Sat Sep  5 22:08:06 2009
From: phil at bubblehouse.org (Phil Christensen)
Date: Sat, 5 Sep 2009 22:08:06 -0400
Subject: [Twisted-Python] os x installer, multiple source locations
In-Reply-To: <e554908b0909041650q3bcd76b5t51a1c88217c4d87c@mail.gmail.com>
References: <e554908b0909041650q3bcd76b5t51a1c88217c4d87c@mail.gmail.com>
Message-ID: <F6FE837E-BB3C-43E1-AA89-6BA297ED50A6@bubblehouse.org>

On Sep 4, 2009, at 7:50 PM, Matt Bennett wrote:
> Hello all,
>
> I used the Twisted 8.2.0 for OS X 10.5 installer from [1] to install
> twisted on my mac. I don't understand why, but I seem to have two
> copies of the source on the disk

This is a frustrating partial install of Twisted that ships with OS X  
(AFAIK just to support iCal Server). Interestingly enough, it's gone  
from Snow Leopard; the calendar server must use something else these  
days...

You have two options. One option is to create a .pth file that points  
to your twisted source dir (I used this method since I was running SVN  
head). My twisted.pth file in site-packages looks like this:

import sys; sys.path = [s for s in sys.path if s != '/Library/Python/ 
2.5/site-packages']
import sys; sys.path.insert(0, '/Library/Python/2.5/site-packages')
import sys; sys.path.insert(0, '/Users/phil/Workspace/Twisted')

But honestly, I think all you'd really need is the last line. I don't  
develop on my 10.5 machine anymore, so I don't exactly remember why I  
did some of this ;-)

Another option I hadn't considered until now is to just remove that  
existing Twisted install. Unless you use iCal server it doesn't get  
used by anything else in the OS, so you should be fine. You could  
always zip it just to be safe.

Hope my ramblings help in some way ;-)

-phil


From exarkun at twistedmatrix.com  Sun Sep  6 00:05:13 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 06 Sep 2009 04:05:13 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1252209913.29.1726385160@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090906/1939c34a/attachment.htm 

From listes at sourcelibre.com  Sun Sep  6 10:46:46 2009
From: listes at sourcelibre.com (Alexandre Quessy)
Date: Sun, 6 Sep 2009 10:46:46 -0400
Subject: [Twisted-Python] deciding to use twisted or not
In-Reply-To: <9bb390e70909011003r16c6bd70r2f26ce5e2c0796ad@mail.gmail.com>
References: <3055c0a0908261356l5453665cg4e25e2777c4f8d@mail.gmail.com>
	<d9047f780908261841g268bd8fdh3af9faac727f943c@mail.gmail.com>
	<3fce0ae70908261854o2348f433y3e91847687925409@mail.gmail.com>
	<d9047f780908261908m70897fa1x757e934517ad1cb8@mail.gmail.com>
	<3055c0a0908261946j6f668069m1459928c21aa63d1@mail.gmail.com>
	<4120a220908270511l7798458ak870c6c81176aa77d@mail.gmail.com>
	<3055c0a0908270648n68863bfcmd093ffb3b94f190c@mail.gmail.com>
	<loom.20090827T181848-915@post.gmane.org>
	<3055c0a0909010820i5366f9b8r48a7757c5c397d49@mail.gmail.com>
	<9bb390e70909011003r16c6bd70r2f26ce5e2c0796ad@mail.gmail.com>
Message-ID: <8f32d9ee0909060746o1c21ca73pc665414fb615531b@mail.gmail.com>

Hi !
You might want to look at my implementation of a tail -F :
https://svn.sat.qc.ca/trac/miville/browser/trunk/py/miville/utils/tail.py
Let me know if you have better than that.
a

2009/9/1 Rob Hoadley <hoadley at gmail.com>:
> I've handled this problem 2 ways: 1) for almost realtime... using
> twisted and .read() file as glyph mentioned and 2) used splunk and
> it's functionality to send search "matching" data to a program that in
> turn does http notification. ?This is at 5 min search intervals.
>
> As previous posters have mentioned, tail's behavior is inconsistent on
> different platforms. ?If your OS platform never changes then you could
> use tail -f as a process protocol. I originally started doing my work
> using the process protocol and tail -f but needed the software to work
> on 3 versions of linux and os x. ? ? The read() way of doing it was
> ultimately the most cross platform way I could come up with. ?Good
> luck.
>
> -rob
>
>
> On Tue, Sep 1, 2009 at 8:20 AM, Martin-Louis Bright<mlbright at gmail.com> wrote:
>> PyInotify only allows you to detect file changes, leaving you with the task
>> of asynchronously sending http requests.
>>
>> -martin
>>
>> On Thu, Aug 27, 2009 at 12:19 PM, Mikhail <termim at gmail.com> wrote:
>>>
>>> Martin-Louis Bright <mlbright <at> gmail.com> writes:
>>>
>>> >
>>> >
>>> > I am using linux, and I want the daemon to be as responsive as possible
>>> > to log
>>> events, so I think I would rather have it sit on the same box as where the
>>> log
>>> is produced. (Perhaps I'm wrong about this?) So I'm going to try Cary's
>>> ProcessProtocol approach, and if that doesn't work, Glyph's LoopingCall
>>> with a
>>> read() approach.
>>> >
>>>
>>> You can also use pyinotify to watch your log file changes.
>>> http://trac.dbzteam.org/pyinotify
>>>
>>> Regards,
>>> Mikhail
>>>
>>>
>>>
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
Alexandre Quessy
http://alexandre.quessy.net
http://www.puredata.info/Members/aalex


From mlbright at gmail.com  Sun Sep  6 12:46:00 2009
From: mlbright at gmail.com (Martin-Louis Bright)
Date: Sun, 6 Sep 2009 12:46:00 -0400
Subject: [Twisted-Python] deciding to use twisted or not
In-Reply-To: <8f32d9ee0909060746o1c21ca73pc665414fb615531b@mail.gmail.com>
References: <3055c0a0908261356l5453665cg4e25e2777c4f8d@mail.gmail.com>
	<3fce0ae70908261854o2348f433y3e91847687925409@mail.gmail.com>
	<d9047f780908261908m70897fa1x757e934517ad1cb8@mail.gmail.com>
	<3055c0a0908261946j6f668069m1459928c21aa63d1@mail.gmail.com>
	<4120a220908270511l7798458ak870c6c81176aa77d@mail.gmail.com>
	<3055c0a0908270648n68863bfcmd093ffb3b94f190c@mail.gmail.com>
	<loom.20090827T181848-915@post.gmane.org>
	<3055c0a0909010820i5366f9b8r48a7757c5c397d49@mail.gmail.com>
	<9bb390e70909011003r16c6bd70r2f26ce5e2c0796ad@mail.gmail.com>
	<8f32d9ee0909060746o1c21ca73pc665414fb615531b@mail.gmail.com>
Message-ID: <3055c0a0909060946g40b59ce0q326a49008ac848d0@mail.gmail.com>

Brilliant! Thank you. -martin

On Sun, Sep 6, 2009 at 10:46 AM, Alexandre Quessy<listes at sourcelibre.com> wrote:
> Hi !
> You might want to look at my implementation of a tail -F :
> https://svn.sat.qc.ca/trac/miville/browser/trunk/py/miville/utils/tail.py
> Let me know if you have better than that.
> a
>
> 2009/9/1 Rob Hoadley <hoadley at gmail.com>:
>> I've handled this problem 2 ways: 1) for almost realtime... using
>> twisted and .read() file as glyph mentioned and 2) used splunk and
>> it's functionality to send search "matching" data to a program that in
>> turn does http notification. ?This is at 5 min search intervals.
>>
>> As previous posters have mentioned, tail's behavior is inconsistent on
>> different platforms. ?If your OS platform never changes then you could
>> use tail -f as a process protocol. I originally started doing my work
>> using the process protocol and tail -f but needed the software to work
>> on 3 versions of linux and os x. ? ? The read() way of doing it was
>> ultimately the most cross platform way I could come up with. ?Good
>> luck.
>>
>> -rob
>>
>>
>> On Tue, Sep 1, 2009 at 8:20 AM, Martin-Louis Bright<mlbright at gmail.com> wrote:
>>> PyInotify only allows you to detect file changes, leaving you with the task
>>> of asynchronously sending http requests.
>>>
>>> -martin
>>>
>>> On Thu, Aug 27, 2009 at 12:19 PM, Mikhail <termim at gmail.com> wrote:
>>>>
>>>> Martin-Louis Bright <mlbright <at> gmail.com> writes:
>>>>
>>>> >
>>>> >
>>>> > I am using linux, and I want the daemon to be as responsive as possible
>>>> > to log
>>>> events, so I think I would rather have it sit on the same box as where the
>>>> log
>>>> is produced. (Perhaps I'm wrong about this?) So I'm going to try Cary's
>>>> ProcessProtocol approach, and if that doesn't work, Glyph's LoopingCall
>>>> with a
>>>> read() approach.
>>>> >
>>>>
>>>> You can also use pyinotify to watch your log file changes.
>>>> http://trac.dbzteam.org/pyinotify
>>>>
>>>> Regards,
>>>> Mikhail
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> Twisted-Python mailing list
>>>> Twisted-Python at twistedmatrix.com
>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>
>>>
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>
>>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>
>
>
> --
> Alexandre Quessy
> http://alexandre.quessy.net
> http://www.puredata.info/Members/aalex
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From matt at bennett.name  Sun Sep  6 16:14:46 2009
From: matt at bennett.name (Matt Bennett)
Date: Sun, 6 Sep 2009 21:14:46 +0100
Subject: [Twisted-Python] os x installer, multiple source locations
In-Reply-To: <F6FE837E-BB3C-43E1-AA89-6BA297ED50A6@bubblehouse.org>
References: <e554908b0909041650q3bcd76b5t51a1c88217c4d87c@mail.gmail.com>
	<F6FE837E-BB3C-43E1-AA89-6BA297ED50A6@bubblehouse.org>
Message-ID: <e554908b0909061314p6c862814j4a7fe58f0c86e31@mail.gmail.com>

On Sun, Sep 6, 2009 at 3:08 AM, Phil Christensen<phil at bubblehouse.org> wrote:
> On Sep 4, 2009, at 7:50 PM, Matt Bennett wrote:
>> Hello all,
>>
>> I used the Twisted 8.2.0 for OS X 10.5 installer from [1] to install
>> twisted on my mac. I don't understand why, but I seem to have two
>> copies of the source on the disk
>
> This is a frustrating partial install of Twisted that ships with OS X
> (AFAIK just to support iCal Server). Interestingly enough, it's gone
> from Snow Leopard; the calendar server must use something else these
> days...

Very curious. I don't know anything about the design rationale but the
end result is pretty unintuitive. At the very least some documentation
about the situation would be useful.

> You have two options. One option is to create a .pth file that points
> to your twisted source dir (I used this method since I was running SVN
> head). My twisted.pth file in site-packages looks like this:
>
> import sys; sys.path = [s for s in sys.path if s != '/Library/Python/
> 2.5/site-packages']
> import sys; sys.path.insert(0, '/Library/Python/2.5/site-packages')
> import sys; sys.path.insert(0, '/Users/phil/Workspace/Twisted')
>
> But honestly, I think all you'd really need is the last line. I don't
> develop on my 10.5 machine anymore, so I don't exactly remember why I
> did some of this ;-)
>
> Another option I hadn't considered until now is to just remove that
> existing Twisted install. Unless you use iCal server it doesn't get
> used by anything else in the OS, so you should be fine. You could
> always zip it just to be safe.
>
> Hope my ramblings help in some way ;-)

Certainly did, thank you. I modified my path just as you suggested,
although I'm curious as to how this approach doesn't also break iCal
server.

Matt.

> -phil
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From phil at bubblehouse.org  Mon Sep  7 02:10:53 2009
From: phil at bubblehouse.org (Phil Christensen)
Date: Mon, 7 Sep 2009 02:10:53 -0400
Subject: [Twisted-Python] os x installer, multiple source locations
In-Reply-To: <e554908b0909061314p6c862814j4a7fe58f0c86e31@mail.gmail.com>
References: <e554908b0909041650q3bcd76b5t51a1c88217c4d87c@mail.gmail.com>
	<F6FE837E-BB3C-43E1-AA89-6BA297ED50A6@bubblehouse.org>
	<e554908b0909061314p6c862814j4a7fe58f0c86e31@mail.gmail.com>
Message-ID: <F99231E6-59D2-4E20-8D77-2BE715FC110D@bubblehouse.org>

On Sep 6, 2009, at 4:14 PM, Matt Bennett wrote:
> Very curious. I don't know anything about the design rationale but  
> the end result is pretty unintuitive. At the very least some  
> documentation about the situation would be useful.

Agreed, but for whatever reason, this is the first time I've heard it  
come up on the list since I ran into it, which may be why it hasn't  
been added to the install docs. I'm sure a docs patch would be well  
received, if you were so inclined ;-)

On Sep 6, 2009, at 4:14 PM, Matt Bennett wrote:
> On Sun, Sep 6, 2009 at 3:08 AM, Phil Christensen wrote:
>> Hope my ramblings help in some way ;-)
>
> Certainly did, thank you. I modified my path just as you suggested,
> although I'm curious as to how this approach doesn't also break iCal  
> server.

Well, to be honest, it could easily break iCal Server; I'm not really  
sure. I only use regular iCal, which is unaffected by this change.

That said, I've had a lot of luck running old applications against  
brand new checkouts of Twisted. It's obviously going to depend on what  
parts of it are used, and which parts are in active development, but  
historically I haven't had too many problems.

Also, I was under the impression that only OS X Server came with the  
iCal Server, so on second thought, I'm not sure why the twisted source  
is even there in the client install. Of course, at this point I'm  
operating entirely on heresay and conjecture, since I never took the  
time to look for iCal Server in the client installation of OS X.

-phil


From gabriel.rossetti at arimaz.com  Mon Sep  7 10:21:04 2009
From: gabriel.rossetti at arimaz.com (Gabriel Rossetti)
Date: Mon, 07 Sep 2009 16:21:04 +0200
Subject: [Twisted-Python] Twisted, wxPython & PyPubSub
Message-ID: <4AA516D0.5000207@arimaz.com>

Hello everyone,

I am using wx with twisted and pubsub (not the on in wx but the 
independent one) to notify each one of what is going on. I was wondering 
if I should use reactor.callFromThread to call publisher.sendMessage or 
not? I haven't been doing that until now but I wondered if it was better to.

thanks,
Gabriel


From exarkun at twistedmatrix.com  Mon Sep  7 10:36:11 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 07 Sep 2009 14:36:11 -0000
Subject: [Twisted-Python] Twisted, wxPython & PyPubSub
In-Reply-To: <4AA516D0.5000207@arimaz.com>
References: <4AA516D0.5000207@arimaz.com>
Message-ID: <20090907143611.7485.1439067646.divmod.xquotient.5@localhost.localdomain>

On 02:21 pm, gabriel.rossetti at arimaz.com wrote:
>Hello everyone,
>
>I am using wx with twisted and pubsub (not the on in wx but the
>independent one) to notify each one of what is going on. I was 
>wondering
>if I should use reactor.callFromThread to call publisher.sendMessage or
>not? I haven't been doing that until now but I wondered if it was 
>better to.

Use reactor.callFromThread if you have code running in a non-reactor 
thread and you want it to initiate some action in the reactor thread.

So, if publisher.sendMessage is using Twisted APIs or otherwise requires 
that it be run only in the reactor thread, and you need to use it from a 
non-reactor thread, then use reactor.callFromThread.  Otherwise, don't.

Jean-Paul


From foom at fuhm.net  Mon Sep  7 14:27:36 2009
From: foom at fuhm.net (James Y Knight)
Date: Mon, 7 Sep 2009 14:27:36 -0400
Subject: [Twisted-Python] os x installer, multiple source locations
In-Reply-To: <F6FE837E-BB3C-43E1-AA89-6BA297ED50A6@bubblehouse.org>
References: <e554908b0909041650q3bcd76b5t51a1c88217c4d87c@mail.gmail.com>
	<F6FE837E-BB3C-43E1-AA89-6BA297ED50A6@bubblehouse.org>
Message-ID: <BE9797C6-C58A-4773-B75C-219228B6BA0F@fuhm.net>


On Sep 5, 2009, at 10:08 PM, Phil Christensen wrote:

> This is a frustrating partial install of Twisted that ships with OS X

Not true. It was fixed soon after 10.5's release. I think in the very  
first patch, 10.5.1, but I could be wrong about that.

> Interestingly enough, it's gone
> from Snow Leopard

It's not gone from Snow Leopard -- Twisted is still installed by  
default. Along with a bunch of other software.

See:
/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/ 
python/twisted/

James


From teemu.harju at gmail.com  Tue Sep  8 06:05:45 2009
From: teemu.harju at gmail.com (Teemu Harju)
Date: Tue, 8 Sep 2009 13:05:45 +0300
Subject: [Twisted-Python] Twisted on Jython
Message-ID: <96274d630909080305y76d76c0cj90c5faba550e34a8@mail.gmail.com>

Hi,
I've been trying to get Twisted working on Jython and haven't been
successful yet. I've seen that there are some bugs still on Jython or
Twisted side. What I'd like to know is that is it currently possible somehow
get Twisted running on Jython? I've tried using trunk versions of both
without success.

Br,

- Teemu

-- 
Teemu Harju

email/jabber: teemu.harju at gmail.com
blog: http://blog.teemu.im
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090908/a2f8c9d4/attachment.htm 

From glyph at twistedmatrix.com  Tue Sep  8 07:55:11 2009
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Tue, 8 Sep 2009 07:55:11 -0400
Subject: [Twisted-Python] Twisted on Jython
In-Reply-To: <96274d630909080305y76d76c0cj90c5faba550e34a8@mail.gmail.com>
References: <96274d630909080305y76d76c0cj90c5faba550e34a8@mail.gmail.com>
Message-ID: <d9047f780909080455m2b94664h6d100eb86fa94f9b@mail.gmail.com>

On Tue, Sep 8, 2009 at 6:05 AM, Teemu Harju <teemu.harju at gmail.com> wrote:

> Hi,
>

Hi, Teemu.


> I've been trying to get Twisted working on Jython and haven't been
> successful yet. I've seen that there are some bugs still on Jython or
> Twisted side. What I'd like to know is that is it currently possible somehow
> get Twisted running on Jython? I've tried using trunk versions of both
> without success.
>

It is not currently possible, although both the Twisted and Jython teams
would like to see this happen.

There is a ticket - <http://twistedmatrix.com/trac/ticket/3413> - and a
related branch, "jython-3413", which contains a collection of
quick-and-dirty workarounds; about enough to get 'trial' to bootstrap on
Jython so you can start to fix failing tests.

You could consider submitting patches against that branch, or fixing some of
the related Jython issues (for example: <
http://twistedmatrix.com/trac/ticket/3725>) to help this process along.

I don't believe there's a huge amount of work required to make Twisted work
on Jython, but it needs a couple of days of concerted attention from someone
who really needs it to actually work.  Maybe you could be that person :).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090908/4bdca8e8/attachment.htm 

From gabriel.rossetti at arimaz.com  Wed Sep  9 03:12:23 2009
From: gabriel.rossetti at arimaz.com (Gabriel Rossetti)
Date: Wed, 09 Sep 2009 09:12:23 +0200
Subject: [Twisted-Python] Twisted, wxPython & PyPubSub
In-Reply-To: <20090907143611.7485.1439067646.divmod.xquotient.5@localhost.localdomain>
References: <4AA516D0.5000207@arimaz.com>
	<20090907143611.7485.1439067646.divmod.xquotient.5@localhost.localdomain>
Message-ID: <4AA75557.8040005@arimaz.com>


Arimaz SA
Ing?nieur en Informatique
Av. du 24 Janvier 11
Ateliers de la Ville de Renens, Atelier 5
1020 Renens, Switzerland
www.arimaz.com
www.mydeskfriend.com
Mob: +41-(0)79-539-0069
Tel: +41-(0)21-566-7343



exarkun at twistedmatrix.com wrote:
> On 02:21 pm, gabriel.rossetti at arimaz.com wrote:
>   
>> Hello everyone,
>>
>> I am using wx with twisted and pubsub (not the on in wx but the
>> independent one) to notify each one of what is going on. I was 
>> wondering
>> if I should use reactor.callFromThread to call publisher.sendMessage or
>> not? I haven't been doing that until now but I wondered if it was 
>> better to.
>>     
>
> Use reactor.callFromThread if you have code running in a non-reactor 
> thread and you want it to initiate some action in the reactor thread.
>
> So, if publisher.sendMessage is using Twisted APIs or otherwise requires 
> that it be run only in the reactor thread, and you need to use it from a 
> non-reactor thread, then use reactor.callFromThread.  Otherwise, don't.
>
> Jean-Paul
>
>   

Would you consider the wxreactor like a non-reactor thread? I haven't 
checked out the code behind PyPubSub, but it's basically the 
Observer-Pattern so when I call publisher.sendMessage(...) it iterates 
the "subscribers" (observers) and calls the functions they associated w/ 
the subscription. Those functions are both in the twisted code and the 
wx code. The Twisted code sends messages nd the wx code brings-up/hides 
dialogs or frames. In the wxdemo it does :

# look, we can use twisted calls!
reactor.callLater(2, self.twoSecondsPassed)

but doesn't use reactor.callFromThread, but unless I'm wrong 
reactor.callLater does the same thing but deferred in time. I often see 
reactor.callLater(0, myFunc) being used.

Thank you,
Gabriel




From matt at bennett.name  Wed Sep  9 09:28:26 2009
From: matt at bennett.name (Matt Bennett)
Date: Wed, 9 Sep 2009 14:28:26 +0100
Subject: [Twisted-Python] FTPClient - aborting transfers
In-Reply-To: <20090904132906.7436.1198691450.divmod.xquotient.266@localhost.localdomain>
References: <e554908b0909011551h501339f7of45672954d08338@mail.gmail.com>
	<20090904132906.7436.1198691450.divmod.xquotient.266@localhost.localdomain>
Message-ID: <e554908b0909090628w41096ed0j53ce675d70bf47a6@mail.gmail.com>

On Fri, Sep 4, 2009 at 2:29 PM, <exarkun at twistedmatrix.com> wrote:
>
> On 1 Sep, 10:51 pm, matt at bennett.name wrote:
> >Hello all,
> >
> >I've got an FTPClient implementation very similar to the one at [1],
> >and I've added the ability to retrieve a file from the server with the
> >following snippet:
> >
> >class FileReceiver(Protocol):
> > ? ?"""
> > ? ? ? ?Protocol subclass that writes received data to a local file.
> > ? ?"""
> > ? ?def __init__(self, filename):
> > ? ? ? ?self.file = open(filename, 'wb')
> >
> > ? ?def dataReceived(self, data):
> > ? ? ? ?self.file.write(data)
> >
> >receiver = FileReceiver(local_path)
> >d = ftpClient.retrieveFile(remote_path,receiver)
> >
> >I want to be able to abort the transfers if they've not completed
> >after a specific period of time. When the timeout is triggered, I call
> >ftpClient.transport.loseConnection() which seems to stop the dL on
> >line 109 of [1] from firing, but the data transfer continues until
> >completion. This is true for both storing and retrieving files.
> >
> >In the storing case, I thought that
> >twisted.protocols.basic.FileSender's stopProducing method might help,
> >but all it seems to do is trigger the errback for anyone waiting for a
> >response - the actual data transfer continues.
> >
> >How do I abort the transfer and clear the wire when the timeout fires?
>
> The DTP connection is set as the (undocumented) dtpInstance attribute on
> the FTP instance it's associated with. ?You can call loseConnection on
> that object's transport and the download should stop. ?It might be
> worthwhile for someone to clean this up a bit. ?Does it ever make sense
> for the transfer to continue when the control channel is gone? ?Even if
> so, it'd be nice to have a supported (or at least documented) way to do
> this cleanup.

The only reference to dtpInstance I can find in
twisted/protocols/ftp.py exists on the FTP class. I may be confused,
but I thought this class was the protocol for FTP servers, rather than
clients?

In my attempt to find and stop *something* on the FTPClient, I ended
up calling finish() on the IFinishableConsumer passed into
FileSender's send method. This seems to stop the transfer in the store
case, but unfortunately I'm no closer to a solution when retrieving a
file.

Am I missing something?

Thanks,
Matt.

>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From cdelfosse at mandriva.com  Wed Sep  9 11:28:21 2009
From: cdelfosse at mandriva.com (Cedric Delfosse)
Date: Wed, 09 Sep 2009 17:28:21 +0200
Subject: [Twisted-Python] IOCP reactor on Windows 2000
Message-ID: <1252510101.20208.76.camel@lolita.localnet>

Hello,

Twisted Python 8.2.0 on Windows 2000 gives me this TB when I try to use
the IOCP reactor. Is it supported on this platform ? (Works very well on
Windows XP)

The instance's SvcRun() method failed 
  File "win32serviceutil.pyc", line 805, in SvcRun
  File "server-win32.pyc", line 81, in SvcDoRun
  File "twisted\internet\iocpreactor\__init__.pyc", line 8, in <module>
  File "twisted\internet\iocpreactor\reactor.pyc", line 19, in <module>
  File "twisted\internet\iocpreactor\iocpsupport.pyc", line 12, in <module>
  File "twisted\internet\iocpreactor\iocpsupport.pyc", line 10, in __load
  File "iocpsupport.pyx", line 242, in iocpsupport 
<type 'exceptions.ValueError'>: Failed to initialize Winsock function vectors 

Regards,

-- 
Cedric Delfosse                                    Mandriva / Linbox
152, rue de Grigy - Technopole Metz              57070 METZ - FRANCE
tel: +33 (0)3 87 50 87 90                        http://mandriva.com




From cyclops at speakeasy.net  Wed Sep  9 12:39:03 2009
From: cyclops at speakeasy.net (John Crawford)
Date: Wed, 09 Sep 2009 12:39:03 -0400
Subject: [Twisted-Python] PB/Remote Object/Deferred question
In-Reply-To: <mailman.5.1252512002.3830.twisted-python@twistedmatrix.com
 >
References: <mailman.5.1252512002.3830.twisted-python@twistedmatrix.com>
Message-ID: <mailman.7.1252514668.23371.twisted-python@twistedmatrix.com>

I'm trying to understand the Perspective Broker, reading over the 
on-site documentation, specifically the article:

http://twistedmatrix.com/projects/core/documentation/howto/pb-usage.html

and there is a section about the callRemote() function that I really 
don't understand :)

First, consider these three lines:

d = factory.getRootObject()
d.addCallback(lambda object: object.callRemote("echo", "hello network"))
d.addCallback(lambda echo: 'server echoed: '+echo)

Second, the documentation says, "...object.callRemote() returns a 
Deferred. Assuming the remote method was run without causing an 
exception (including an attempt to invoke an unknown method), the 
callback attached to that Deferred will be invoked with any objects 
that were returned by the remote method call."

If I read this correctly, callRemote() returns a whole new Deferred 
object, which is *not* the same as the 'd' Deferred object we already 
have. So that *new* Deferred should be the one that the next callback 
(line 3) is added to, since the next callback is based on the success 
of the callRemote(). So wouldn't these be the correct lines:

d = factory.getRootObject()
d2 = d.addCallback(lambda object: object.callRemote("echo", "hello network"))
d2.addCallback(lambda echo: 'server echoed: '+echo)


Thanks in advance for any clarification.

John C>






From exarkun at twistedmatrix.com  Wed Sep  9 12:56:39 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 09 Sep 2009 16:56:39 -0000
Subject: [Twisted-Python] PB/Remote Object/Deferred question
In-Reply-To: <E1MlQHU-0001tv-J4@cube.twistedmatrix.com>
References: <mailman.5.1252512002.3830.twisted-python@twistedmatrix.com>
	<E1MlQHU-0001tv-J4@cube.twistedmatrix.com>
Message-ID: <20090909165639.7485.440446374.divmod.xquotient.365@localhost.localdomain>

On 04:39 pm, cyclops at speakeasy.net wrote:
>I'm trying to understand the Perspective Broker, reading over the
>on-site documentation, specifically the article:
>
>http://twistedmatrix.com/projects/core/documentation/howto/pb- 
>usage.html
>
>and there is a section about the callRemote() function that I really
>don't understand :)
>
>First, consider these three lines:
>
>d = factory.getRootObject()
>d.addCallback(lambda object: object.callRemote("echo", "hello 
>network"))
>d.addCallback(lambda echo: 'server echoed: '+echo)
>
>Second, the documentation says, "...object.callRemote() returns a
>Deferred. Assuming the remote method was run without causing an
>exception (including an attempt to invoke an unknown method), the
>callback attached to that Deferred will be invoked with any objects
>that were returned by the remote method call."
>
>If I read this correctly, callRemote() returns a whole new Deferred
>object, which is *not* the same as the 'd' Deferred object we already
>have. So that *new* Deferred should be the one that the next callback
>(line 3) is added to, since the next callback is based on the success
>of the callRemote(). So wouldn't these be the correct lines:
>
>d = factory.getRootObject()
>d2 = d.addCallback(lambda object: object.callRemote("echo", "hello 
>network"))
>d2.addCallback(lambda echo: 'server echoed: '+echo)

When one Deferred is returned from a callback on another Deferred, the 
two Deferreds are "chained".  This means that the result of the one 
Deferred becomes the result of the other Deferred, and callbacks added 
to the other Deferred are not run until this happens.

Additionally, Deferred.addCallback returns self, so your version of the 
code is really exactly the same as the original version.

Jean-Paul


From peter.westlake at pobox.com  Wed Sep  9 13:35:53 2009
From: peter.westlake at pobox.com (Peter Westlake)
Date: Wed, 09 Sep 2009 18:35:53 +0100
Subject: [Twisted-Python] PB/Remote Object/Deferred question
In-Reply-To: <E1MlQHU-0001tv-J4@cube.twistedmatrix.com>
References: <mailman.5.1252512002.3830.twisted-python@twistedmatrix.com>
	<E1MlQHU-0001tv-J4@cube.twistedmatrix.com>
Message-ID: <1252517753.23380.1334004013@webmail.messagingengine.com>

On Wed, 09 Sep 2009 12:39 -0400, "John Crawford" <cyclops at speakeasy.net>
wrote:
> I'm trying to understand the Perspective Broker, reading over the 
> on-site documentation, specifically the article:
> 
> http://twistedmatrix.com/projects/core/documentation/howto/pb-usage.html
> 
> and there is a section about the callRemote() function that I really 
> don't understand :)
> 
> First, consider these three lines:
> 
> d = factory.getRootObject()
> d.addCallback(lambda object: object.callRemote("echo", "hello network"))
> d.addCallback(lambda echo: 'server echoed: '+echo)
> 
> Second, the documentation says, "...object.callRemote() returns a 
> Deferred. Assuming the remote method was run without causing an 
> exception (including an attempt to invoke an unknown method), the 
> callback attached to that Deferred will be invoked with any objects 
> that were returned by the remote method call."
> 
> If I read this correctly, callRemote() returns a whole new Deferred 
> object, which is *not* the same as the 'd' Deferred object we already 
> have. So that *new* Deferred should be the one that the next callback 
> (line 3) is added to, since the next callback is based on the success 
> of the callRemote(). So wouldn't these be the correct lines:
> 
> d = factory.getRootObject()
> d2 = d.addCallback(lambda object: object.callRemote("echo", "hello
> network"))
> d2.addCallback(lambda echo: 'server echoed: '+echo)

Can I get in before someone else does? If I do, will I get it right?
Be kind, O wise ones!

Here goes:

d.addCallback always returns d. Remember that the callRemote is only
called once d is fired, so its result and the result of the lambda
expression are (simplifying a little) only computed after this piece
of code is long since over and done with. It just adds callback
functions (your lambda expressions) to the callback chain of d.
 
The result of each callback function is fed into the callback chain, to
be passed as parameter to the next callback.

Because the return value from the first callback is a Deferred, it is
not passed directly to the next callback. Instead processing pauses
until this new Deferred fires, and then the value it returns is passed
to the echo callback. It's a feature, and a most nifty one :-)

In summary:

factory.getRootObject returns a Deferred, d.

Two callbacks are added to d.

...time passes...

Something in the factory module finishes doing getRootObject
and passes the result ("thing", say) to d: "d.callback(thing)".

The first callback function uses it: "object.callRemote(rootThing)".

callRemote returns a new Deferred, d2.

The code of Deferred.callback spots the callback has returned
a Deferred. It puts d2 aside in a safe place, and d.callback()
returns.

...time passes...

The callRemote gets an answer, and d2 fires. It doesn't have
any callbacks (that you know about, at least) so it returns
the value.

The code of Deferred.callback that previously stashed d2
notices that it has fired, picks up the value and passes
it along the next callback in d's chain, the lambda echo.


Regards,

Peter.




From exarkun at twistedmatrix.com  Wed Sep  9 21:47:23 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 10 Sep 2009 01:47:23 -0000
Subject: [Twisted-Python] FTPClient - aborting transfers
In-Reply-To: <e554908b0909090628w41096ed0j53ce675d70bf47a6@mail.gmail.com>
References: <e554908b0909011551h501339f7of45672954d08338@mail.gmail.com>
	<20090904132906.7436.1198691450.divmod.xquotient.266@localhost.localdomain>
	<e554908b0909090628w41096ed0j53ce675d70bf47a6@mail.gmail.com>
Message-ID: <20090910014723.7485.803038671.divmod.xquotient.375@localhost.localdomain>

On 9 Sep, 01:28 pm, matt at bennett.name wrote:
>[snip]
>
>The only reference to dtpInstance I can find in
>twisted/protocols/ftp.py exists on the FTP class. I may be confused,
>but I thought this class was the protocol for FTP servers, rather than
>clients?

You're right, I wasn't thinking about clients.
>In my attempt to find and stop *something* on the FTPClient, I ended
>up calling finish() on the IFinishableConsumer passed into
>FileSender's send method. This seems to stop the transfer in the store
>case, but unfortunately I'm no closer to a solution when retrieving a
>file.
>
>Am I missing something?

It seems FTPClient doesn't really keep track of enough objects to make 
this easy.  A patch addressing this would be welcome.

Jean-Paul


From exarkun at twistedmatrix.com  Wed Sep  9 21:46:28 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 10 Sep 2009 01:46:28 -0000
Subject: [Twisted-Python] Twisted, wxPython & PyPubSub
In-Reply-To: <4AA75557.8040005@arimaz.com>
References: <4AA516D0.5000207@arimaz.com>
	<20090907143611.7485.1439067646.divmod.xquotient.5@localhost.localdomain>
	<4AA75557.8040005@arimaz.com>
Message-ID: <20090910014628.7485.1039456853.divmod.xquotient.373@localhost.localdomain>

On 9 Sep, 07:12 am, gabriel.rossetti at arimaz.com wrote:
>exarkun at twistedmatrix.com wrote:
>>On 02:21 pm, gabriel.rossetti at arimaz.com wrote:
>>>Hello everyone,
>>>
>>>I am using wx with twisted and pubsub (not the on in wx but the
>>>independent one) to notify each one of what is going on. I was
>>>wondering
>>>if I should use reactor.callFromThread to call publisher.sendMessage 
>>>or
>>>not? I haven't been doing that until now but I wondered if it was
>>>better to.
>>
>>Use reactor.callFromThread if you have code running in a non-reactor
>>thread and you want it to initiate some action in the reactor thread.
>>
>>So, if publisher.sendMessage is using Twisted APIs or otherwise 
>>requires
>>that it be run only in the reactor thread, and you need to use it from 
>>a
>>non-reactor thread, then use reactor.callFromThread.  Otherwise, 
>>don't.
>>
>>Jean-Paul
>
>Would you consider the wxreactor like a non-reactor thread?

I'm not sure what you mean.  The "reactor thread" is the thread that 
"reactor.run()" is called in.  Even if you're using wxreactor.
>I haven't
>checked out the code behind PyPubSub, but it's basically the
>Observer-Pattern so when I call publisher.sendMessage(...) it iterates
>the "subscribers" (observers) and calls the functions they associated 
>w/
>the subscription. Those functions are both in the twisted code and the
>wx code. The Twisted code sends messages nd the wx code brings-up/hides
>dialogs or frames. In the wxdemo it does :
>
># look, we can use twisted calls!
>reactor.callLater(2, self.twoSecondsPassed)
>
>but doesn't use reactor.callFromThread, but unless I'm wrong
>reactor.callLater does the same thing but deferred in time. I often see
>reactor.callLater(0, myFunc) being used.

The wx demo doesn't do anything with threads, so it doesn't need to use 
callFromThread.  So, if you're only doing things like what the wx demo 
does, you probably don't need callFromThread either.

callLater doesn't do the same thing as callFromThread.  There might be 
some vague similarities (really the only one is that neither one calls 
the function you pass it right away), but they're for very different 
things.

Jean-Paul


From exarkun at twistedmatrix.com  Wed Sep  9 21:54:42 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 10 Sep 2009 01:54:42 -0000
Subject: [Twisted-Python] IOCP reactor on Windows 2000
In-Reply-To: <1252510101.20208.76.camel@lolita.localnet>
References: <1252510101.20208.76.camel@lolita.localnet>
Message-ID: <20090910015442.7485.2089845849.divmod.xquotient.390@localhost.localdomain>

On 9 Sep, 03:28 pm, cdelfosse at mandriva.com wrote:
>Hello,
>
>Twisted Python 8.2.0 on Windows 2000 gives me this TB when I try to use
>the IOCP reactor. Is it supported on this platform ? (Works very well 
>on
>Windows XP)
>
>The instance's SvcRun() method failed
>  File "win32serviceutil.pyc", line 805, in SvcRun
>  File "server-win32.pyc", line 81, in SvcDoRun
>  File "twisted\internet\iocpreactor\__init__.pyc", line 8, in <module>
>  File "twisted\internet\iocpreactor\reactor.pyc", line 19, in <module>
>  File "twisted\internet\iocpreactor\iocpsupport.pyc", line 12, in 
><module>
>  File "twisted\internet\iocpreactor\iocpsupport.pyc", line 10, in 
>__load
>  File "iocpsupport.pyx", line 242, in iocpsupport
><type 'exceptions.ValueError'>: Failed to initialize Winsock function 
>vectors

We're currently only doing testing on Windows XP.  I know that some 
version of iocpreactor worked on Windows 2000 at some point in the past, 
but that may have been before the significant rewrite.

We're short on Windows machines for testing already - we barely have 
enough for Windows XP coverage.  If support for other platforms would be 
useful for you, there are a few (non-exclusive) things you can do:

  - Contribute patches implementing the support you're after.  This is 
tricky, since as a project we don't have access to any Windows 2000 
machines, and we're much less likely to look at patches that fix issues 
on platforms we don't have access to.  However, it's not impossible that 
such patches could be accepted.  It depends on the problem and the 
patch.

  - Contribute a slave for that platform.  Slaves need to be online most 
of the time and be able to run Buildbot and Twisted's test suite.

  - Contribute funds for us to get a machine to run such a slave.

As far as the particular error you're seeing goes, I don't really have a 
clue.  I hope that one of the people more familiar with iocpreactor will 
chime in about that.

Jean-Paul


From pahan at xzrq.net  Thu Sep 10 00:41:31 2009
From: pahan at xzrq.net (Pavel Pergamenshchik)
Date: Wed, 9 Sep 2009 21:41:31 -0700
Subject: [Twisted-Python] IOCP reactor on Windows 2000
In-Reply-To: <1252510101.20208.76.camel@lolita.localnet>
References: <1252510101.20208.76.camel@lolita.localnet>
Message-ID: <7447a0ac0909092141w39f6995dv1e8d7da02a682167@mail.gmail.com>

On Wed, Sep 9, 2009 at 8:28 AM, Cedric Delfosse <cdelfosse at mandriva.com> wrote:
> Hello,
>
> Twisted Python 8.2.0 on Windows 2000 gives me this TB when I try to use
> the IOCP reactor. Is it supported on this platform ? (Works very well on
> Windows XP)
>
> The instance's SvcRun() method failed
> ?File "win32serviceutil.pyc", line 805, in SvcRun
> ?File "server-win32.pyc", line 81, in SvcDoRun
> ?File "twisted\internet\iocpreactor\__init__.pyc", line 8, in <module>
> ?File "twisted\internet\iocpreactor\reactor.pyc", line 19, in <module>
> ?File "twisted\internet\iocpreactor\iocpsupport.pyc", line 12, in <module>
> ?File "twisted\internet\iocpreactor\iocpsupport.pyc", line 10, in __load
> ?File "iocpsupport.pyx", line 242, in iocpsupport
> <type 'exceptions.ValueError'>: Failed to initialize Winsock function vectors

iocpreactor is not supported on Windows 2000. iocpreactor relies on
ConnectEx() API. It was introduced in Windows XP. It is,
theoretically, possible to work around it, but nobody has done so.


From matt at bennett.name  Thu Sep 10 05:21:16 2009
From: matt at bennett.name (Matt Bennett)
Date: Thu, 10 Sep 2009 10:21:16 +0100
Subject: [Twisted-Python] os x installer, multiple source locations
In-Reply-To: <BE9797C6-C58A-4773-B75C-219228B6BA0F@fuhm.net>
References: <e554908b0909041650q3bcd76b5t51a1c88217c4d87c@mail.gmail.com>
	<F6FE837E-BB3C-43E1-AA89-6BA297ED50A6@bubblehouse.org>
	<BE9797C6-C58A-4773-B75C-219228B6BA0F@fuhm.net>
Message-ID: <e554908b0909100221m3b5d8c73gee870917be691dd2@mail.gmail.com>

On Mon, Sep 7, 2009 at 7:27 PM, James Y Knight<foom at fuhm.net> wrote:
>
> On Sep 5, 2009, at 10:08 PM, Phil Christensen wrote:
>
>> This is a frustrating partial install of Twisted that ships with OS X
>
> Not true. It was fixed soon after 10.5's release. I think in the very
> first patch, 10.5.1, but I could be wrong about that.
>
>> Interestingly enough, it's gone
>> from Snow Leopard
>
> It's not gone from Snow Leopard -- Twisted is still installed by
> default. Along with a bunch of other software.
>
> See:
> /System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/
> python/twisted/

I'm running 10.5.7 and clearly there's still some version of Twisted installed.

I'd happily submit a docs patch surrounding this, but I'm not sure
where the appropriate place to document it is. There don't appear to
be any docs on installing twisted under version control. Maybe a note
on the wiki download page would be sufficient?

Matt.

> James
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From gabriel.rossetti at arimaz.com  Thu Sep 10 09:47:15 2009
From: gabriel.rossetti at arimaz.com (Gabriel Rossetti)
Date: Thu, 10 Sep 2009 15:47:15 +0200
Subject: [Twisted-Python] Twisted, wxPython & PyPubSub
In-Reply-To: <20090910014628.7485.1039456853.divmod.xquotient.373@localhost.localdomain>
References: <4AA516D0.5000207@arimaz.com>	<20090907143611.7485.1439067646.divmod.xquotient.5@localhost.localdomain>	<4AA75557.8040005@arimaz.com>
	<20090910014628.7485.1039456853.divmod.xquotient.373@localhost.localdomain>
Message-ID: <4AA90363.50503@arimaz.com>

exarkun at twistedmatrix.com wrote:
> On 9 Sep, 07:12 am, gabriel.rossetti at arimaz.com wrote:
>   
>> exarkun at twistedmatrix.com wrote:
>>     
>>> On 02:21 pm, gabriel.rossetti at arimaz.com wrote:
>>>       
>>>> Hello everyone,
>>>>
>>>> I am using wx with twisted and pubsub (not the on in wx but the
>>>> independent one) to notify each one of what is going on. I was
>>>> wondering
>>>> if I should use reactor.callFromThread to call publisher.sendMessage 
>>>> or
>>>> not? I haven't been doing that until now but I wondered if it was
>>>> better to.
>>>>         
>>> Use reactor.callFromThread if you have code running in a non-reactor
>>> thread and you want it to initiate some action in the reactor thread.
>>>
>>> So, if publisher.sendMessage is using Twisted APIs or otherwise 
>>> requires
>>> that it be run only in the reactor thread, and you need to use it from 
>>> a
>>> non-reactor thread, then use reactor.callFromThread.  Otherwise, 
>>> don't.
>>>
>>> Jean-Paul
>>>       
>> Would you consider the wxreactor like a non-reactor thread?
>>     
>
> I'm not sure what you mean.  The "reactor thread" is the thread that 
> "reactor.run()" is called in.  Even if you're using wxreactor.
>   
>> I haven't
>> checked out the code behind PyPubSub, but it's basically the
>> Observer-Pattern so when I call publisher.sendMessage(...) it iterates
>> the "subscribers" (observers) and calls the functions they associated 
>> w/
>> the subscription. Those functions are both in the twisted code and the
>> wx code. The Twisted code sends messages nd the wx code brings-up/hides
>> dialogs or frames. In the wxdemo it does :
>>
>> # look, we can use twisted calls!
>> reactor.callLater(2, self.twoSecondsPassed)
>>
>> but doesn't use reactor.callFromThread, but unless I'm wrong
>> reactor.callLater does the same thing but deferred in time. I often see
>> reactor.callLater(0, myFunc) being used.
>>     
>
> The wx demo doesn't do anything with threads, so it doesn't need to use 
> callFromThread.  So, if you're only doing things like what the wx demo 
> does, you probably don't need callFromThread either.
>
> callLater doesn't do the same thing as callFromThread.  There might be 
> some vague similarities (really the only one is that neither one calls 
> the function you pass it right away), but they're for very different 
> things.
>
> Jean-Paul
>   

Ok, well, from looking into the twisted source, it looks like the wx 
main loop is run in a seperate thread 
(http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.1.0/twisted/internet/wxreactor.py#L60). 
If this is correct, I don't think I can just call a function from the 
twisted code that will in turn call a function in the wx code anytime, 
because the wx event loop will be busy doing something else. It is the 
same the other way around, here is an example :

the user clicks on a button, this calls 
publisher.sendMessage("notify.server", button.name). The twisted code 
registered to receive this event and so did the wx code. The twisted 
code registered a callback that formats a message and sends it to the 
server, the wx code updates the status to "pending" on the gui. When the 
answer arrives from the server, this time the twisted code calls 
publisher.sendMessage("server.response", res) and wx had registered to 
receive this event to update the status to something else.

Now, since publisher.sendMessage() was called from wx, and from what I 
understand from the WxReactor class code it runs in a thread, then the 
callback on the twisted side should use reactor.callFromThread() 
shouldn't it (since it was called from a different thread), but not the 
callback in the wx code since it was called from the wx code? And when 
publisher.sendMessage() is called from twisted code, shouldn't I do the 
same, that is the callback in the twisted is just called and the 
callback in the wx code is called with wx.CallLater() (to schedule it's 
call in the main loop)?

Thank you,
Gabriel


From vitaly at synapticvision.com  Thu Sep 10 09:47:08 2009
From: vitaly at synapticvision.com (vitaly at synapticvision.com)
Date: Thu, 10 Sep 2009 09:47:08 -0400
Subject: [Twisted-Python] time between request and response
Message-ID: <20090910094708.42993jva3y8d30ow@216.129.205.5>

Hi,
is there any way to calculate time spent between AMF Request and  
appropriate AMF Response
from TwistedGateway (without using Python's profilers) ?

Appreciate the help.



From exarkun at twistedmatrix.com  Thu Sep 10 10:03:27 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 10 Sep 2009 14:03:27 -0000
Subject: [Twisted-Python] Twisted, wxPython & PyPubSub
In-Reply-To: <4AA90363.50503@arimaz.com>
References: <4AA516D0.5000207@arimaz.com>
	<20090907143611.7485.1439067646.divmod.xquotient.5@localhost.localdomain>
	<4AA75557.8040005@arimaz.com>
	<20090910014628.7485.1039456853.divmod.xquotient.373@localhost.localdomain>
	<4AA90363.50503@arimaz.com>
Message-ID: <20090910140327.7485.437142722.divmod.xquotient.397@localhost.localdomain>

On 01:47 pm, gabriel.rossetti at arimaz.com wrote:
>exarkun at twistedmatrix.com wrote:
>>On 9 Sep, 07:12 am, gabriel.rossetti at arimaz.com wrote:
>>>exarkun at twistedmatrix.com wrote:
>>>>On 02:21 pm, gabriel.rossetti at arimaz.com wrote:
>>>>>Hello everyone,
>>>>>
>>>>>I am using wx with twisted and pubsub (not the on in wx but the
>>>>>independent one) to notify each one of what is going on. I was
>>>>>wondering
>>>>>if I should use reactor.callFromThread to call 
>>>>>publisher.sendMessage
>>>>>or
>>>>>not? I haven't been doing that until now but I wondered if it was
>>>>>better to.
>>>>Use reactor.callFromThread if you have code running in a non-reactor
>>>>thread and you want it to initiate some action in the reactor 
>>>>thread.
>>>>
>>>>So, if publisher.sendMessage is using Twisted APIs or otherwise
>>>>requires
>>>>that it be run only in the reactor thread, and you need to use it 
>>>>from
>>>>a
>>>>non-reactor thread, then use reactor.callFromThread.  Otherwise,
>>>>don't.
>>>>
>>>>Jean-Paul
>>>Would you consider the wxreactor like a non-reactor thread?
>>
>>I'm not sure what you mean.  The "reactor thread" is the thread that
>>"reactor.run()" is called in.  Even if you're using wxreactor.
>>>I haven't
>>>checked out the code behind PyPubSub, but it's basically the
>>>Observer-Pattern so when I call publisher.sendMessage(...) it 
>>>iterates
>>>the "subscribers" (observers) and calls the functions they associated
>>>w/
>>>the subscription. Those functions are both in the twisted code and 
>>>the
>>>wx code. The Twisted code sends messages nd the wx code brings- 
>>>up/hides
>>>dialogs or frames. In the wxdemo it does :
>>>
>>># look, we can use twisted calls!
>>>reactor.callLater(2, self.twoSecondsPassed)
>>>
>>>but doesn't use reactor.callFromThread, but unless I'm wrong
>>>reactor.callLater does the same thing but deferred in time. I often 
>>>see
>>>reactor.callLater(0, myFunc) being used.
>>
>>The wx demo doesn't do anything with threads, so it doesn't need to 
>>use
>>callFromThread.  So, if you're only doing things like what the wx demo
>>does, you probably don't need callFromThread either.
>>
>>callLater doesn't do the same thing as callFromThread.  There might be
>>some vague similarities (really the only one is that neither one calls
>>the function you pass it right away), but they're for very different
>>things.
>>
>>Jean-Paul
>
>Ok, well, from looking into the twisted source, it looks like the wx
>main loop is run in a seperate thread
>(http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.1.0/twisted/internet/wxreactor.py#L60).

That's an implementation detail.  You've also misinterpreted it 
slightly.  The wx main loop is run in the same thread reactor.run() is 
called in.  The other thread is used for other things.

Jean-Paul


From listes at sourcelibre.com  Thu Sep 10 14:53:43 2009
From: listes at sourcelibre.com (Alexandre Quessy)
Date: Thu, 10 Sep 2009 14:53:43 -0400
Subject: [Twisted-Python] Twisted users/developers in Montreal?
Message-ID: <8f32d9ee0909101153h25c9c533y9472d0507e279ef8@mail.gmail.com>

Hi everyone,
Do you guys know anyone using or developing Twisted in the area around
the city of Montreal? I organize the Open Forum of Code
http://foc.sat.qc.ca/ at SAT.qc.ca and our next meeting has a special
focus on programming in network. (for arts)
I also go to Montreal Python from time to time, and I think Twisted
would make a good special topic to cover. It would help converting
more developers to it.
See http://montrealpython.org/

So, please write to me at alexandre at sat.qc.ca (or on this list) if you
guys know anyone interested in sharing Twisted knowledge in my area.
Cheers !

-- 
Alexandre Quessy
http://alexandre.quessy.net


From vitaly at synapticvision.com  Thu Sep 10 17:40:56 2009
From: vitaly at synapticvision.com (vitaly at synapticvision.com)
Date: Thu, 10 Sep 2009 17:40:56 -0400
Subject: [Twisted-Python] Preprocessor question
Message-ID: <20090910174056.15003fj8gnjgc2as@216.129.205.5>

hi,
can anyone please point me to the doc-s or just explain what does that  
line mean on Twisted:
[root:twisted:375] Preprocessor expands to: None

Thank you.



From exarkun at twistedmatrix.com  Thu Sep 10 17:51:44 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 10 Sep 2009 21:51:44 -0000
Subject: [Twisted-Python] Preprocessor question
In-Reply-To: <20090910174056.15003fj8gnjgc2as@216.129.205.5>
References: <20090910174056.15003fj8gnjgc2as@216.129.205.5>
Message-ID: <20090910215144.7485.468247680.divmod.xquotient.597@localhost.localdomain>

On 09:40 pm, vitaly at synapticvision.com wrote:
>hi,
>can anyone please point me to the doc-s or just explain what does that
>line mean on Twisted:
>[root:twisted:375] Preprocessor expands to: None

It's not clear to me what you're talking about.  Can you try to provide 
more context for this question?

Jean-Paul


From glyph at twistedmatrix.com  Thu Sep 10 20:35:53 2009
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 10 Sep 2009 20:35:53 -0400
Subject: [Twisted-Python] new contributors
Message-ID: <d9047f780909101735q31a1231ib82c092802da227@mail.gmail.com>

We *still* don't have a totally official process for adding new contributors
to SVN, but I've been noticing a steady stream of contributions from two new
folks: lvh and jesstess.

Would you folks like commit access?

If so, does anyone have an objection on adding them to the Twisted Matrix
Labs?  (Feel free to contact me privately if you'd rather not be mean in
public ;-)).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090910/4d88bd1d/attachment.htm 

From nick at boxdesign.co.uk  Fri Sep 11 03:35:46 2009
From: nick at boxdesign.co.uk (Nick Joyce)
Date: Fri, 11 Sep 2009 08:35:46 +0100
Subject: [Twisted-Python] Preprocessor question
In-Reply-To: <20090910174056.15003fj8gnjgc2as@216.129.205.5>
References: <20090910174056.15003fj8gnjgc2as@216.129.205.5>
Message-ID: <4C67B799-4573-4F63-B5BD-FCED31D71519@boxdesign.co.uk>

This _appears_ to be a log message when using the TwistedGateway from  
PyAMF. PyAMF gives the option to be able to preprocess service method  
calls, to set up db connections, sessions, w/e.

Nick

On 10 Sep 2009, at 22:40, vitaly at synapticvision.com wrote:

> hi,
> can anyone please point me to the doc-s or just explain what does that
> line mean on Twisted:
> [root:twisted:375] Preprocessor expands to: None
>
> Thank you.
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From lvh at laurensvh.be  Fri Sep 11 07:59:25 2009
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Fri, 11 Sep 2009 13:59:25 +0200
Subject: [Twisted-Python] new contributors
In-Reply-To: <d9047f780909101735q31a1231ib82c092802da227@mail.gmail.com>
References: <d9047f780909101735q31a1231ib82c092802da227@mail.gmail.com>
Message-ID: <cedc0c090909110459u7bdeaf64p6b755137d12694a2@mail.gmail.com>

On Fri, Sep 11, 2009 at 2:35 AM, Glyph Lefkowitz
<glyph at twistedmatrix.com> wrote:
> We still?don't have a totally official process for adding new contributors
> to SVN, but I've been noticing a steady stream of contributions from two new
> folks: lvh and jesstess.

Hi! That's me :-)

> Would you folks like commit access?

I'm not 100% sure if that'd be useful, right now I'm perfectly happy
with bzr, but I suppose having commit access that might be useful one
day is better than not having commit access but wanting it one day :-)

> If so, does anyone have an objection on adding them to the Twisted Matrix
> Labs? ?(Feel free to contact me privately if you'd rather not be mean in
> public ;-)).

What does that mean exactly? :-) (Is that just a fancy way of saying
'has a commit bit'?)

Anyway, go ahead, I'm sure I won't be annoyed :-D


thanks for the vote of confidence
Laurens


From gabriel.rossetti at arimaz.com  Fri Sep 11 08:58:48 2009
From: gabriel.rossetti at arimaz.com (Gabriel Rossetti)
Date: Fri, 11 Sep 2009 14:58:48 +0200
Subject: [Twisted-Python] Twisted, wxPython & PyPubSub
In-Reply-To: <20090910140327.7485.437142722.divmod.xquotient.397@localhost.localdomain>
References: <4AA516D0.5000207@arimaz.com>	<20090907143611.7485.1439067646.divmod.xquotient.5@localhost.localdomain>	<4AA75557.8040005@arimaz.com>	<20090910014628.7485.1039456853.divmod.xquotient.373@localhost.localdomain>	<4AA90363.50503@arimaz.com>
	<20090910140327.7485.437142722.divmod.xquotient.397@localhost.localdomain>
Message-ID: <4AAA4988.7000303@arimaz.com>

exarkun at twistedmatrix.com wrote:
> On 01:47 pm, gabriel.rossetti at arimaz.com wrote:
>   
>> exarkun at twistedmatrix.com wrote:
>>     
>>> On 9 Sep, 07:12 am, gabriel.rossetti at arimaz.com wrote:
>>>       
>>>> exarkun at twistedmatrix.com wrote:
>>>>         
>>>>> On 02:21 pm, gabriel.rossetti at arimaz.com wrote:
>>>>>           
>>>>>> Hello everyone,
>>>>>>
>>>>>> I am using wx with twisted and pubsub (not the on in wx but the
>>>>>> independent one) to notify each one of what is going on. I was
>>>>>> wondering
>>>>>> if I should use reactor.callFromThread to call 
>>>>>> publisher.sendMessage
>>>>>> or
>>>>>> not? I haven't been doing that until now but I wondered if it was
>>>>>> better to.
>>>>>>             
>>>>> Use reactor.callFromThread if you have code running in a non-reactor
>>>>> thread and you want it to initiate some action in the reactor 
>>>>> thread.
>>>>>
>>>>> So, if publisher.sendMessage is using Twisted APIs or otherwise
>>>>> requires
>>>>> that it be run only in the reactor thread, and you need to use it 
>>>>> from
>>>>> a
>>>>> non-reactor thread, then use reactor.callFromThread.  Otherwise,
>>>>> don't.
>>>>>
>>>>> Jean-Paul
>>>>>           
>>>> Would you consider the wxreactor like a non-reactor thread?
>>>>         
>>> I'm not sure what you mean.  The "reactor thread" is the thread that
>>> "reactor.run()" is called in.  Even if you're using wxreactor.
>>>       
>>>> I haven't
>>>> checked out the code behind PyPubSub, but it's basically the
>>>> Observer-Pattern so when I call publisher.sendMessage(...) it 
>>>> iterates
>>>> the "subscribers" (observers) and calls the functions they associated
>>>> w/
>>>> the subscription. Those functions are both in the twisted code and 
>>>> the
>>>> wx code. The Twisted code sends messages nd the wx code brings- 
>>>> up/hides
>>>> dialogs or frames. In the wxdemo it does :
>>>>
>>>> # look, we can use twisted calls!
>>>> reactor.callLater(2, self.twoSecondsPassed)
>>>>
>>>> but doesn't use reactor.callFromThread, but unless I'm wrong
>>>> reactor.callLater does the same thing but deferred in time. I often 
>>>> see
>>>> reactor.callLater(0, myFunc) being used.
>>>>         
>>> The wx demo doesn't do anything with threads, so it doesn't need to 
>>> use
>>> callFromThread.  So, if you're only doing things like what the wx demo
>>> does, you probably don't need callFromThread either.
>>>
>>> callLater doesn't do the same thing as callFromThread.  There might be
>>> some vague similarities (really the only one is that neither one calls
>>> the function you pass it right away), but they're for very different
>>> things.
>>>
>>> Jean-Paul
>>>       
>> Ok, well, from looking into the twisted source, it looks like the wx
>> main loop is run in a seperate thread
>> (http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.1.0/twisted/internet/wxreactor.py#L60).
>>     
>
> That's an implementation detail.  You've also misinterpreted it 
> slightly.  The wx main loop is run in the same thread reactor.run() is 
> called in.  The other thread is used for other things.
>
> Jean-Paul
>
>   
Ok, thanks for the clarification, so if I understand correctly then I 
can make wx calls (like self.factory.myFrame.Show()) from twisted just 
like if it was 100% twisted, and make twisted calls (like 
self.txClient.transport.write()) from wx just like if it was 100% wx? 
Cool :-)

Gabriel


From exarkun at twistedmatrix.com  Fri Sep 11 09:15:10 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 11 Sep 2009 13:15:10 -0000
Subject: [Twisted-Python] Twisted, wxPython & PyPubSub
In-Reply-To: <4AAA4988.7000303@arimaz.com>
References: <4AA516D0.5000207@arimaz.com>
	<20090907143611.7485.1439067646.divmod.xquotient.5@localhost.localdomain>
	<4AA75557.8040005@arimaz.com>
	<20090910014628.7485.1039456853.divmod.xquotient.373@localhost.localdomain>
	<4AA90363.50503@arimaz.com>
	<20090910140327.7485.437142722.divmod.xquotient.397@localhost.localdomain>
	<4AAA4988.7000303@arimaz.com>
Message-ID: <20090911131510.7485.1446625330.divmod.xquotient.598@localhost.localdomain>

On 12:58 pm, gabriel.rossetti at arimaz.com wrote:
>
>Ok, thanks for the clarification, so if I understand correctly then I
>can make wx calls (like self.factory.myFrame.Show()) from twisted just
>like if it was 100% twisted, and make twisted calls (like
>self.txClient.transport.write()) from wx just like if it was 100% wx?
>Cool :-)

Exactly.

Jean-Paul


From jessica.mckellar at gmail.com  Fri Sep 11 09:50:24 2009
From: jessica.mckellar at gmail.com (Jessica McKellar)
Date: Fri, 11 Sep 2009 09:50:24 -0400
Subject: [Twisted-Python] new contributors
In-Reply-To: <d9047f780909101735q31a1231ib82c092802da227@mail.gmail.com>
References: <d9047f780909101735q31a1231ib82c092802da227@mail.gmail.com>
Message-ID: <b282a1340909110650m2c11cd35l932a73144dc2f84a@mail.gmail.com>

Commit access would be useful, particularly for speeding along inclusion of
small patches and documentation fixes without giving the small number of
regular ticket resolvers even more work to do :). Thanks Glyph.

-Jessica (jesstess)


On Thu, Sep 10, 2009 at 8:35 PM, Glyph Lefkowitz <glyph at twistedmatrix.com>wrote:

> We *still* don't have a totally official process for adding new
> contributors to SVN, but I've been noticing a steady stream of contributions
> from two new folks: lvh and jesstess.
>
> Would you folks like commit access?
>
>
If so, does anyone have an objection on adding them to the Twisted Matrix
> Labs?  (Feel free to contact me privately if you'd rather not be mean in
> public ;-)).
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090911/b9a4c2f3/attachment.htm 

From vitaly at synapticvision.com  Fri Sep 11 10:10:53 2009
From: vitaly at synapticvision.com (vitaly at synapticvision.com)
Date: Fri, 11 Sep 2009 10:10:53 -0400
Subject: [Twisted-Python] Preprocessor question
In-Reply-To: <4C67B799-4573-4F63-B5BD-FCED31D71519@boxdesign.co.uk>
References: <20090910174056.15003fj8gnjgc2as@216.129.205.5>
	<4C67B799-4573-4F63-B5BD-FCED31D71519@boxdesign.co.uk>
Message-ID: <20090911101053.14045fdpafjeyi5k@216.129.205.5>


Can you point me please to the documentation,may be examples, that  
explains in details "preprocessor" feature?

Quoting "Nick Joyce" <nick at boxdesign.co.uk>:

> This _appears_ to be a log message when using the TwistedGateway from
> PyAMF. PyAMF gives the option to be able to preprocess service method
> calls, to set up db connections, sessions, w/e.
>
> Nick
>
> On 10 Sep 2009, at 22:40, vitaly at synapticvision.com wrote:
>
>> hi,
>> can anyone please point me to the doc-s or just explain what does that
>> line mean on Twisted:
>> [root:twisted:375] Preprocessor expands to: None
>>
>> Thank you.
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>





From freddy at cbm.uo.edu.cu  Fri Sep 11 10:26:19 2009
From: freddy at cbm.uo.edu.cu (Freddy Martinez Garcia)
Date: Fri, 11 Sep 2009 10:26:19 -0400
Subject: [Twisted-Python] about process !!!
Message-ID: <200909111026.19581.freddy@cbm.uo.edu.cu>

hello...

My friends, I need your help... I have an application in python, and I need 
execute this application with twisted... my problem is that when I run the 
application without twisted, there is not a problem, but when I run it with 
twisted as a twisted's process, I have some problem... my application it's a 
server and when it receive one file with the char ' " ', the server through an 
Exception, but when I run the application as standalone, there is not a 
problem !!! 

-------
Freddy Martinez Garcia
Lic. en Ciencia de la Computaci?n.
Edad: 27 A?os
Santiago de Cuba
e-mails:
    * freddy at cbm.uo.edu.cu
    * freddy311082 at gmail.com
    * freddymg311082 at hotmail.com 

-- 
Este mensaje ha sido analizado por MailScanner
en busca de virus y otros contenidos peligrosos,
y se considera que est? limpio.
For all your IT requirements visit: http://www.transtec.co.uk



From exarkun at twistedmatrix.com  Fri Sep 11 10:35:05 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 11 Sep 2009 14:35:05 -0000
Subject: [Twisted-Python] new contributors
In-Reply-To: <d9047f780909101735q31a1231ib82c092802da227@mail.gmail.com>
References: <d9047f780909101735q31a1231ib82c092802da227@mail.gmail.com>
Message-ID: <20090911143505.7485.1574338111.divmod.xquotient.644@localhost.localdomain>

On 12:35 am, glyph at twistedmatrix.com wrote:
>We *still* don't have a totally official process for adding new 
>contributors
>to SVN, but I've been noticing a steady stream of contributions from 
>two new
>folks: lvh and jesstess.
>
>Would you folks like commit access?
>
>If so, does anyone have an objection on adding them to the Twisted 
>Matrix
>Labs?  (Feel free to contact me privately if you'd rather not be mean 
>in
>public ;-)).

I don't see any reason not to, and I doubt anyone mailed you off-list 
about it. :)  So if lvh and jesstess want to send me their SSH public 
keys, I'll set it up.
I also offered commit access to Esteve recently.  Esteve, want to send 
me your key, too?

With respect to the lack of an official process for adding contributors, 
yea.  It doesn't come up so often that we've bothered to streamline it 
much.  We should probably do *something*, though.  With that in mind, 
here's a dump of some ideas that I think everyone knows already, but 
should probably be explicit:

  * Keep your SSH keys secure.  If they're compromised, let us know so we 
can change them out for new ones.

  * Follow the documented development process.  In general, you have free 
reign in branches (but please follow the branch naming convention), but 
only commit to trunk after the review process has been carried out 
successfully.

  * You must license anything you contribute to Twisted under the MIT 
license.

That's probably all the stuff you need to know up front.

We should have a document somewhere, maybe.

Jean-Paul


From gslindstrom at gmail.com  Fri Sep 11 10:37:40 2009
From: gslindstrom at gmail.com (gslindstrom at gmail.com)
Date: Fri, 11 Sep 2009 14:37:40 +0000
Subject: [Twisted-Python] sftp with Twisted
Message-ID: <0016e68ea0b2139ea204734e4267@google.com>

I am new to Twisted but have read through the Twisted Book (O'Reilley) and  
worked many of the examples. I think I have deferreds down (though I'm not  
sure I understand the red/green diagram, yet :-). I'm running Python 2.4 on  
Gentoo Linux.

We would like to look into using Twisted for sftp. Looking through  
the "conch" routines I found the test_filetransfer.py. I see lots of  
classes, "Avitars" and tests but I can't figure out what everything is  
doing or how to connect to a box (using either a username/password of a  
key) and transfer files! Is there a "how-to" showing, well..., how to set  
up and use sftp with Twisted? If not, I'd be willing to write one up if  
someone would volunteer to mentor me through the process.

Thanks for your help,

--greg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090911/88a7af55/attachment.htm 

From exarkun at twistedmatrix.com  Fri Sep 11 10:39:49 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 11 Sep 2009 14:39:49 -0000
Subject: [Twisted-Python] about process !!!
In-Reply-To: <200909111026.19581.freddy@cbm.uo.edu.cu>
References: <200909111026.19581.freddy@cbm.uo.edu.cu>
Message-ID: <20090911143949.7485.1121634739.divmod.xquotient.650@localhost.localdomain>

On 02:26 pm, freddy at cbm.uo.edu.cu wrote:
>hello...
>
>My friends, I need your help... I have an application in python, and I 
>need
>execute this application with twisted... my problem is that when I run 
>the
>application without twisted, there is not a problem, but when I run it 
>with
>twisted as a twisted's process, I have some problem... my application 
>it's a
>server and when it receive one file with the char ' " ', the server 
>through an
>Exception, but when I run the application as standalone, there is not a
>problem !!!

Hi Freddy,

Unfortunately, the way you've asked your question will make it very 
difficult for anyone to provide you with a productive answer.  We don't 
know what your application is.  We don't know what it means to "run the 
application with twisted" or "run it with twisted as a twisted's 
process".  These phrases are too vague to assign a specific technical 
meaning to.  It's also not clear what the error condition you're 
encountering is.

http://sscce.org/ may help you formulate a better question so that we 
can help you.

Jean-Paul


From cdelfosse at mandriva.com  Fri Sep 11 12:42:04 2009
From: cdelfosse at mandriva.com (Cedric Delfosse)
Date: Fri, 11 Sep 2009 18:42:04 +0200
Subject: [Twisted-Python] IOCP reactor on Windows 2000
In-Reply-To: <7447a0ac0909092141w39f6995dv1e8d7da02a682167@mail.gmail.com>
References: <1252510101.20208.76.camel@lolita.localnet>
	<7447a0ac0909092141w39f6995dv1e8d7da02a682167@mail.gmail.com>
Message-ID: <1252687324.3971.19.camel@lolita.localnet>

Le mercredi 09 septembre 2009 ? 21:41 -0700, Pavel Pergamenshchik a
?crit :
> On Wed, Sep 9, 2009 at 8:28 AM, Cedric Delfosse <cdelfosse at mandriva.com> wrote:
> > Hello,
> >
> > Twisted Python 8.2.0 on Windows 2000 gives me this TB when I try to use
> > the IOCP reactor. Is it supported on this platform ? (Works very well on
> > Windows XP)
> >
> > The instance's SvcRun() method failed
> >  File "win32serviceutil.pyc", line 805, in SvcRun
> >  File "server-win32.pyc", line 81, in SvcDoRun
> >  File "twisted\internet\iocpreactor\__init__.pyc", line 8, in <module>
> >  File "twisted\internet\iocpreactor\reactor.pyc", line 19, in <module>
> >  File "twisted\internet\iocpreactor\iocpsupport.pyc", line 12, in <module>
> >  File "twisted\internet\iocpreactor\iocpsupport.pyc", line 10, in __load
> >  File "iocpsupport.pyx", line 242, in iocpsupport
> > <type 'exceptions.ValueError'>: Failed to initialize Winsock function vectors
> 
> iocpreactor is not supported on Windows 2000. iocpreactor relies on
> ConnectEx() API. It was introduced in Windows XP. It is,
> theoretically, possible to work around it, but nobody has done so.

Hello,

thanks a lot.

Unfortunately I'm not used at all to Windows programming. I tried to use
a library thats wrap missing API for Windows 2000, but with no luck (gpt
some obscure DLL issues):
http://win2kgaming.site90.com/phpBB2/viewtopic.php?t=7

Maybe the ConnectEx() API replacement used by this library could be a
solution ? (see code attached to this mail)

Regards,

-- 
Cedric Delfosse                                    Mandriva / Linbox
152, rue de Grigy - Technopole Metz              57070 METZ - FRANCE
tel: +33 (0)3 87 50 87 90                        http://mandriva.com

-------------- next part --------------
A non-text attachment was scrubbed...
Name: win2k_xp_ws2_32.c
Type: text/x-csrc
Size: 9204 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20090911/1c0277cc/attachment.c 

From andrewfr_ice at yahoo.com  Fri Sep 11 13:09:32 2009
From: andrewfr_ice at yahoo.com (Andrew Francis)
Date: Fri, 11 Sep 2009 10:09:32 -0700 (PDT)
Subject: [Twisted-Python] Twisted users/developers in Montreal?
In-Reply-To: <mailman.72153.1252678372.23374.twisted-python@twistedmatrix.com>
Message-ID: <935014.61276.qm@web112403.mail.gq1.yahoo.com>

Hi Alexandre:

>Do you guys know anyone using or developing Twisted in the area around
>the city of Montreal? 

I live in Montreal and I use Twisted.

>I also go to Montreal Python from time to time, and I think Twisted
>would make a good special topic to cover. It would help converting
>more developers to it. See http://montrealpython.org/

I will be giving a talk on Stackless Python on September 30th, as a part
of Montreal Python. In a section of that talk, I will briefly touch on
Twisted. 

Cheers,
Andrew



      


From glyph at twistedmatrix.com  Fri Sep 11 22:10:24 2009
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Fri, 11 Sep 2009 22:10:24 -0400
Subject: [Twisted-Python] new contributors
In-Reply-To: <20090911143505.7485.1574338111.divmod.xquotient.644@localhost.localdomain>
References: <d9047f780909101735q31a1231ib82c092802da227@mail.gmail.com>
	<20090911143505.7485.1574338111.divmod.xquotient.644@localhost.localdomain>
Message-ID: <d9047f780909111910t35e44d10p8e801d54b772e74e@mail.gmail.com>

On Fri, Sep 11, 2009 at 10:35 AM, <exarkun at twistedmatrix.com> wrote:

> I don't see any reason not to, and I doubt anyone mailed you off-list
> about it. :)


Indeed not.  Everybody loves new core developers!


> So if lvh and jesstess want to send me their SSH public
> keys, I'll set it up.
>

Laurens' keys are already here: https://launchpad.net/~lvh/+sshkeys

I can't find jesstess on launchpad.  I think it's generally a good idea to
have an account there for other reasons than SSH key exchange; perhaps you
should get one? :)


> I also offered commit access to Esteve recently.  Esteve, want to send
> me your key, too?
>

https://launchpad.net/~esteve/+sshkeys


> We should have a document somewhere, maybe.
>

For sure.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090911/0e71799e/attachment.htm 

From jessica.mckellar at gmail.com  Fri Sep 11 23:59:03 2009
From: jessica.mckellar at gmail.com (Jessica McKellar)
Date: Fri, 11 Sep 2009 23:59:03 -0400
Subject: [Twisted-Python] new contributors
In-Reply-To: <d9047f780909111910t35e44d10p8e801d54b772e74e@mail.gmail.com>
References: <d9047f780909101735q31a1231ib82c092802da227@mail.gmail.com>
	<20090911143505.7485.1574338111.divmod.xquotient.644@localhost.localdomain>
	<d9047f780909111910t35e44d10p8e801d54b772e74e@mail.gmail.com>
Message-ID: <b282a1340909112059y1f3c1162rbc2b3a0bd3ea2f31@mail.gmail.com>

Here we go: https://launchpad.net/~jesstess/+sshkeys

-Jessica


On Fri, Sep 11, 2009 at 10:10 PM, Glyph Lefkowitz
<glyph at twistedmatrix.com>wrote:

> On Fri, Sep 11, 2009 at 10:35 AM, <exarkun at twistedmatrix.com> wrote:
>
>> I don't see any reason not to, and I doubt anyone mailed you off-list
>> about it. :)
>
>
> Indeed not.  Everybody loves new core developers!
>
>
>> So if lvh and jesstess want to send me their SSH public
>> keys, I'll set it up.
>>
>
> Laurens' keys are already here: https://launchpad.net/~lvh/+sshkeys<https://launchpad.net/%7Elvh/+sshkeys>
>
> I can't find jesstess on launchpad.  I think it's generally a good idea to
> have an account there for other reasons than SSH key exchange; perhaps you
> should get one? :)
>
>
>> I also offered commit access to Esteve recently.  Esteve, want to send
>> me your key, too?
>>
>
> https://launchpad.net/~esteve/+sshkeys<https://launchpad.net/%7Eesteve/+sshkeys>
>
>
>> We should have a document somewhere, maybe.
>>
>
> For sure.
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090911/29c14401/attachment.htm 

From exarkun at twistedmatrix.com  Sun Sep 13 00:05:31 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 13 Sep 2009 04:05:31 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1252814731.72.1829935580@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090913/c9192dc9/attachment.htm 

From art at academ.org  Mon Sep 14 11:09:38 2009
From: art at academ.org (Artem Bokhan)
Date: Mon, 14 Sep 2009 22:09:38 +0700
Subject: [Twisted-Python] simple global counter
Message-ID: <4AAE5CB2.8080302@academ.org>

Hello.

May somebody give a sample code of simple global counter which could be 
used with twisted (non-web) enviroment?


From markv at lumierevfx.com  Mon Sep 14 12:11:46 2009
From: markv at lumierevfx.com (Mark Visser)
Date: Mon, 14 Sep 2009 12:11:46 -0400
Subject: [Twisted-Python] How to detect when there is nothing waiting in the
	event queue
Message-ID: <4AAE6B42.7010606@lumierevfx.com>

Hi, we've been using Twisted in an internal project for the past 4 
months. It's a system that polls for events from a web source (looping 
call) and also accepts connections via perspective broker. Each of these 
events is turned into a series of Deferreds that run various tasks. Some 
of these tasks are long-running and can take several hours to complete.

Because of this, it's very difficult to restart the server when we roll 
out a new release.

I've added a signal handler to catch SIGHUP and call stop() on the 
looping call and stopListening() on the perspective broker Root. How can 
I detect when all remaining Deferreds have fired so I can stop the 
reactor safely, without stranding any running processes?

thanks

-- 
Mark Visser, Software Director
Lumi?re VFX
Email: markv at lumierevfx.com
Phone: +1-514-316-1080 x3030



From freddy at cbm.uo.edu.cu  Mon Sep 14 14:57:59 2009
From: freddy at cbm.uo.edu.cu (Freddy Martinez Garcia)
Date: Mon, 14 Sep 2009 14:57:59 -0400
Subject: [Twisted-Python] help with rector
Message-ID: <200909141457.59382.freddy@cbm.uo.edu.cu>

hello to everybody...

well I need to do something with twisted, and I don't how I can do it...

My application use the twisted's framework, and it is a process manager. My 
problem is when I run a process with twisted I have to do "reactor.run()" and 
my application is one web service which is running, and to run this web 
service I have to do too "reactor.run()"...

how can I run one process with twisted if the reactor is running ???

thanks

regards

Freddy

-------
Freddy Martinez Garcia
Lic. en Ciencia de la Computaci?n.
Edad: 27 A?os
Santiago de Cuba
e-mails:
    * freddy at cbm.uo.edu.cu
    * freddy311082 at gmail.com
    * freddymg311082 at hotmail.com 

-- 
Este mensaje ha sido analizado por MailScanner
en busca de virus y otros contenidos peligrosos,
y se considera que est? limpio.
For all your IT requirements visit: http://www.transtec.co.uk

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090914/3859aeaa/attachment.htm 

From matusis at yahoo.com  Mon Sep 14 16:29:14 2009
From: matusis at yahoo.com (Alec Matusis)
Date: Mon, 14 Sep 2009 13:29:14 -0700
Subject: [Twisted-Python] memory leak on 8.2.0/2.6 versus 2.5/2.4
Message-ID: <02ce01ca357a$06c9a140$145ce3c0$@com>

I am running identical twisted servers under high load, one on 2.5.0
(patched for epoll bug) on python 2.4.4 and second one on 8.2.0 on python
2.6.2.
The 8.2/2.6 one leaks memory compared to 2.5/2.4.4 to the point that I am
about to roll back to older Twisted and then to older Python.

Any insight on this? 



From kevin.horn at gmail.com  Mon Sep 14 18:16:52 2009
From: kevin.horn at gmail.com (Kevin Horn)
Date: Mon, 14 Sep 2009 17:16:52 -0500
Subject: [Twisted-Python] help with rector
In-Reply-To: <200909141457.59382.freddy@cbm.uo.edu.cu>
References: <200909141457.59382.freddy@cbm.uo.edu.cu>
Message-ID: <562bcc10909141516t16547a2cr674b092b0f0b623c@mail.gmail.com>

On Mon, Sep 14, 2009 at 1:57 PM, Freddy Martinez Garcia <
freddy at cbm.uo.edu.cu> wrote:

> hello to everybody...
>
>
> well I need to do something with twisted, and I don't how I can do it...
>
>
> My application use the twisted's framework, and it is a process manager. My
> problem is when I run a process with twisted I have to do "reactor.run()"
> and my application is one web service which is running, and to run this web
> service I have to do too "reactor.run()"...
>
>
> how can I run one process with twisted if the reactor is running ???
>
>
> thanks
>
>
> regards
>
>
> Freddy
>
>
> -------
> Freddy Martinez Garcia
>


I'm not sure it's clear what exactly you are trying to do...

Have you read:
http://twistedmatrix.com/projects/core/documentation/howto/process.html

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090914/5f8f29d8/attachment.htm 

From screwtape at froup.com  Mon Sep 14 20:47:58 2009
From: screwtape at froup.com (Tim Allen)
Date: Tue, 15 Sep 2009 10:47:58 +1000
Subject: [Twisted-Python] simple global counter
In-Reply-To: <4AAE5CB2.8080302@academ.org>
References: <4AAE5CB2.8080302@academ.org>
Message-ID: <20090915004758.GK5111@thristian.org>

On Mon, Sep 14, 2009 at 10:09:38PM +0700, Artem Bokhan wrote:
> May somebody give a sample code of simple global counter which could be 
> used with twisted (non-web) enviroment?

I'm not sure what you mean. If you want to keep a count of something, you can just
store it in a variable like anything else.

    event_counter = 0

    def handle_event(event):
	global event_counter

	event.do_something()
	event_counter += 1


From screwtape at froup.com  Mon Sep 14 20:58:25 2009
From: screwtape at froup.com (Tim Allen)
Date: Tue, 15 Sep 2009 10:58:25 +1000
Subject: [Twisted-Python] How to detect when there is nothing waiting in
 the event queue
In-Reply-To: <4AAE6B42.7010606@lumierevfx.com>
References: <4AAE6B42.7010606@lumierevfx.com>
Message-ID: <20090915005825.GL5111@thristian.org>

On Mon, Sep 14, 2009 at 12:11:46PM -0400, Mark Visser wrote:
> I've added a signal handler to catch SIGHUP and call stop() on the 
> looping call and stopListening() on the perspective broker Root. How can 
> I detect when all remaining Deferreds have fired so I can stop the 
> reactor safely, without stranding any running processes?

I was looking at something like this for our production system a while
back; so far as I can tell, the only thing you can do is to maintain
a list of all 'live' deferreds as your process runs. When you get
the 'stop' signal, stop accepting incoming requests, put all the
deferreds into a DeferredList and don't exit until the DeferredList
fires. Our system makes it rather difficult to gather all possible
deferreds, and our processes only run for less than a minute, so we
decided to just put up with occasional lost processes.

As well as catching SIGHUP, you might want to investigate the reactor's
'addSystemEventTrigger' method, where you can queue calls to be called
at shutdown, and return a deferred that will cause the shutdown to be
delayed until the deferred fires.


From exarkun at twistedmatrix.com  Mon Sep 14 15:46:36 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 14 Sep 2009 19:46:36 -0000
Subject: [Twisted-Python] help with rector
In-Reply-To: <200909141457.59382.freddy@cbm.uo.edu.cu>
References: <200909141457.59382.freddy@cbm.uo.edu.cu>
Message-ID: <20090914194636.8731.1616394944.divmod.xquotient.17@localhost.localdomain>

On 06:57 pm, freddy at cbm.uo.edu.cu wrote:
>hello to everybody...
>
>well I need to do something with twisted, and I don't how I can do 
>it...
>
>My application use the twisted's framework, and it is a process 
>manager. My
>problem is when I run a process with twisted I have to do 
>"reactor.run()" and
>my application is one web service which is running, and to run this web
>service I have to do too "reactor.run()"...
>
>how can I run one process with twisted if the reactor is running ???

You only have to call "reactor.run()" once.  Your processes and your web 
server will start.

Jean-Paul


From exarkun at twistedmatrix.com  Mon Sep 14 15:16:32 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 14 Sep 2009 19:16:32 -0000
Subject: [Twisted-Python] How to detect when there is nothing waiting
	in	the event queue
In-Reply-To: <4AAE6B42.7010606@lumierevfx.com>
References: <4AAE6B42.7010606@lumierevfx.com>
Message-ID: <20090914191632.8731.787545973.divmod.xquotient.15@localhost.localdomain>

On 04:11 pm, markv at lumierevfx.com wrote:
>Hi, we've been using Twisted in an internal project for the past 4
>months. It's a system that polls for events from a web source (looping
>call) and also accepts connections via perspective broker. Each of 
>these
>events is turned into a series of Deferreds that run various tasks. 
>Some
>of these tasks are long-running and can take several hours to complete.
>
>Because of this, it's very difficult to restart the server when we roll
>out a new release.
>
>I've added a signal handler to catch SIGHUP and call stop() on the
>looping call and stopListening() on the perspective broker Root. How 
>can
>I detect when all remaining Deferreds have fired so I can stop the
>reactor safely, without stranding any running processes?

There's no way to know when "all remaining Deferreds have fired".  Since 
Deferreds are general purpose and any part of Twisted may internally use 
them for anything they're suited for, this isn't really what you want 
anyway.  You want to know when all of *your* tasks have completed.  So, 
you should look at all the APIs you have which return Deferreds, decide 
which APIs need to be allowed to complete (perhaps it will be all of 
them) before shutdown can happen, and then instrument those APIs to keep 
track of their own status.  This may be as simple as internally adding a 
callback to the Deferreds being returned (before returning them), 
letting you know when each task has completed.  This should let you 
decide when things are quiet enough to shut down.

Jean-Paul


From art at academ.org  Tue Sep 15 05:54:09 2009
From: art at academ.org (Artem Bokhan)
Date: Tue, 15 Sep 2009 16:54:09 +0700
Subject: [Twisted-Python] simple global counter
In-Reply-To: <20090915004758.GK5111@thristian.org>
References: <4AAE5CB2.8080302@academ.org> <20090915004758.GK5111@thristian.org>
Message-ID: <4AAF6441.2090903@academ.org>

Tim Allen ?????:
> On Mon, Sep 14, 2009 at 10:09:38PM +0700, Artem Bokhan wrote:
>   
>> May somebody give a sample code of simple global counter which could be 
>> used with twisted (non-web) enviroment?
>>     
>
> I'm not sure what you mean. 
I want find out if it's possible to count things in context of the
whole twisted server, not just one tcp session.
> If you want to keep a count of something, you can just
> store it in a variable like anything else.
>
>     event_counter = 0
>
>     def handle_event(event):
> 	global event_counter
>
> 	event.do_something()
> 	event_counter += 1
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>   



From screwtape at froup.com  Tue Sep 15 06:33:09 2009
From: screwtape at froup.com (Tim Allen)
Date: Tue, 15 Sep 2009 20:33:09 +1000
Subject: [Twisted-Python] simple global counter
In-Reply-To: <4AAF6441.2090903@academ.org>
References: <4AAE5CB2.8080302@academ.org> <20090915004758.GK5111@thristian.org>
	<4AAF6441.2090903@academ.org>
Message-ID: <20090915103309.GM5111@thristian.org>

On Tue, Sep 15, 2009 at 04:54:09PM +0700, Artem Bokhan wrote:
> Tim Allen ?????:
> > On Mon, Sep 14, 2009 at 10:09:38PM +0700, Artem Bokhan wrote:
> >   
> >> May somebody give a sample code of simple global counter which could be 
> >> used with twisted (non-web) enviroment?
> >
> > I'm not sure what you mean. 
> I want find out if it's possible to count things in context of the
> whole twisted server, not just one tcp session.

Well, of course - you can create global variables in Python, and nothing
in Twisted affects that.


From petshmidt at googlemail.com  Tue Sep 15 06:37:30 2009
From: petshmidt at googlemail.com (Pet)
Date: Tue, 15 Sep 2009 12:37:30 +0200
Subject: [Twisted-Python] run queries in deffered, but not in transaction
Message-ID: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com>

Hi,

I'd like to run several queries in background, some of them may fail.
Currently, I do runInteraction for each query. Is there a way to run
them all in one deferred, so that if one of them fails, other are not
aborted?

Thanks in advance!

Pet


From art at academ.org  Tue Sep 15 10:20:29 2009
From: art at academ.org (Artem Bokhan)
Date: Tue, 15 Sep 2009 21:20:29 +0700
Subject: [Twisted-Python] network server on multiprocessor hardware
In-Reply-To: <4AA17FC1.1070303@academ.org>
References: <4AA17FC1.1070303@academ.org>
Message-ID: <4AAFA2AD.4090304@academ.org>

Is there any know implementation of the method author of this thread 
http://twistedmatrix.com/pipermail/twisted-python/2009-April/019478.html 
talks about?

Bokhan Artem ?????:
> Hello.
>
> Is there right (standard) way to write twisted network server
> (tcp/web/mail/etc) which could use several cpu cores? For example,
> master+workers model, where every worker doing the same job.
> If so, may somebody help to wrap the sample code below?
> May be some well-known twisted based software can do that?
>
>   



From exarkun at twistedmatrix.com  Tue Sep 15 10:51:59 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 15 Sep 2009 14:51:59 -0000
Subject: [Twisted-Python] memory leak on 8.2.0/2.6 versus 2.5/2.4
In-Reply-To: <02ce01ca357a$06c9a140$145ce3c0$@com>
References: <02ce01ca357a$06c9a140$145ce3c0$@com>
Message-ID: <20090915145159.8731.612401860.divmod.xquotient.115@localhost.localdomain>

On 14 Sep, 08:29 pm, matusis at yahoo.com wrote:
>I am running identical twisted servers under high load, one on 2.5.0
>(patched for epoll bug) on python 2.4.4 and second one on 8.2.0 on 
>python
>2.6.2.
>The 8.2/2.6 one leaks memory compared to 2.5/2.4.4 to the point that I 
>am
>about to roll back to older Twisted and then to older Python.
>
>Any insight on this?

Hi Alec,

Nothing springs to mind, unfortunately.  What parts of Twisted does the 
app use?  Maybe narrowing the field a bit will help jog someone's 
memory...  Otherwise, good luck in tracking it down, and I hope you'll 
let us know if you come to any conclusions.

Jean-Paul


From exarkun at twistedmatrix.com  Tue Sep 15 10:55:22 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 15 Sep 2009 14:55:22 -0000
Subject: [Twisted-Python] run queries in deffered, but not in transaction
In-Reply-To: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com>
References: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com>
Message-ID: <20090915145522.8731.1321821537.divmod.xquotient.121@localhost.localdomain>

On 10:37 am, petshmidt at googlemail.com wrote:
>Hi,
>
>I'd like to run several queries in background, some of them may fail.
>Currently, I do runInteraction for each query. Is there a way to run
>them all in one deferred, so that if one of them fails, other are not
>aborted?

If you have a function along the lines of this one:

    def someInteractions(db):
        interactions = [
            db.runInteraction(one),
            db.runInteraction(two),
            db.runInteraction(three)]

Then a failure in one shouldn't affect two or three; likewise for any 
other failure or combination of failures.  They are naturally (ugh, not 
a good word, but I can't think of a better one) independent.  You have 
to go out of your way to associate them somehow.

Since it sounds like this isn't the behavior you're seeing, I think I'm 
probably misunderstanding some aspect of your question.  If this doesn't 
help, perhaps you can clarify?

Jean-Paul


From markv at lumierevfx.com  Tue Sep 15 11:19:07 2009
From: markv at lumierevfx.com (Mark Visser)
Date: Tue, 15 Sep 2009 11:19:07 -0400
Subject: [Twisted-Python] run queries in deffered, but not in transaction
In-Reply-To: <20090915145522.8731.1321821537.divmod.xquotient.121@localhost.localdomain>
References: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com>
	<20090915145522.8731.1321821537.divmod.xquotient.121@localhost.localdomain>
Message-ID: <4AAFB06B.4010305@lumierevfx.com>

exarkun at twistedmatrix.com wrote:
> On 10:37 am, petshmidt at googlemail.com wrote:
>>
>> I'd like to run several queries in background, some of them may fail.
>>     
>
> If you have a function along the lines of this one:
>
>     def someInteractions(db):
>         interactions = [
>             db.runInteraction(one),
>             db.runInteraction(two),
>             db.runInteraction(three)]
>
> Then a failure in one shouldn't affect two or three; likewise for any 
> other failure or combination of failures.  They are naturally (ugh, not 
> a good word, but I can't think of a better one) independent.  You have 
> to go out of your way to associate them somehow.
>   
I think he might mean he wants them to run sequentially, even if one fails.

You can do that explicitly via @inlineCallbacks like this:

@inlineCallbacks
def someInteractions(db):
    try:
        yield db.runInteraction(one)
    except:
       pass

    try:
        yield db.runInteraction(two)
    except:
       pass

    try:
        yield db.runInteraction(three)
    except:
       pass

Or with callback/errbacks, like this:

def someInteractions(db)
        d = db.runInteraction(one).addBoth(db.runInteraction, 
two).addBoth(db.runInteraction, three)

addBoth is a convenience method that adds the same function as a 
callback and an errback:

http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.defer.Deferred.html#addBoth

-- 
Mark Visser, Software Director
Lumi?re VFX
Email: markv at lumierevfx.com
Phone: +1-514-316-1080 x3030



From petshmidt at googlemail.com  Tue Sep 15 12:21:05 2009
From: petshmidt at googlemail.com (Pet)
Date: Tue, 15 Sep 2009 18:21:05 +0200
Subject: [Twisted-Python] run queries in deffered, but not in transaction
In-Reply-To: <4AAFB06B.4010305@lumierevfx.com>
References: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com> 
	<20090915145522.8731.1321821537.divmod.xquotient.121@localhost.localdomain>
	<4AAFB06B.4010305@lumierevfx.com>
Message-ID: <b460e9630909150921h7e95b4egda47d37322cdbb0@mail.gmail.com>

On Tue, Sep 15, 2009 at 5:19 PM, Mark Visser <markv at lumierevfx.com> wrote:
> exarkun at twistedmatrix.com wrote:
>> On 10:37 am, petshmidt at googlemail.com wrote:
>>>
>>> I'd like to run several queries in background, some of them may fail.
>>>
>>
>> If you have a function along the lines of this one:
>>
>> ? ? def someInteractions(db):
>> ? ? ? ? interactions = [
>> ? ? ? ? ? ? db.runInteraction(one),
>> ? ? ? ? ? ? db.runInteraction(two),
>> ? ? ? ? ? ? db.runInteraction(three)]
>>
>> Then a failure in one shouldn't affect two or three; likewise for any
>> other failure or combination of failures. ?They are naturally (ugh, not
>> a good word, but I can't think of a better one) independent. ?You have
>> to go out of your way to associate them somehow.
>>
> I think he might mean he wants them to run sequentially, even if one fails.
>
> You can do that explicitly via @inlineCallbacks like this:
>
> @inlineCallbacks
> def someInteractions(db):
> ? ?try:
> ? ? ? ?yield db.runInteraction(one)
> ? ?except:
> ? ? ? pass
>
> ? ?try:
> ? ? ? ?yield db.runInteraction(two)
> ? ?except:
> ? ? ? pass
>
> ? ?try:
> ? ? ? ?yield db.runInteraction(three)
> ? ?except:
> ? ? ? pass
>
> Or with callback/errbacks, like this:
>
> def someInteractions(db)
> ? ? ? ?d = db.runInteraction(one).addBoth(db.runInteraction,
> two).addBoth(db.runInteraction, three)

Hi Mark!

Yes, I'd like run them sequentially, it was not clear for me, how to
do it in one deferred.

I will try your suggestions out.

Thanks for help!

Pet

>
> addBoth is a convenience method that adds the same function as a
> callback and an errback:
>
> http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.defer.Deferred.html#addBoth
>
> --
> Mark Visser, Software Director
> Lumi?re VFX
> Email: markv at lumierevfx.com
> Phone: +1-514-316-1080 x3030
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From freddy at cbm.uo.edu.cu  Tue Sep 15 12:47:56 2009
From: freddy at cbm.uo.edu.cu (Freddy Martinez Garcia)
Date: Tue, 15 Sep 2009 12:47:56 -0400
Subject: [Twisted-Python] hi !!!
Message-ID: <200909151247.56909.freddy@cbm.uo.edu.cu>

I wrote my problem in the last message an I wasn't clear with that...

Ok... I'm going again... !!!

I have a web server... this server was implemented with twisted using 
XMLRPC... when the server start to run, in this moment I did 
"reactor.run()"...

well, my server is listening by 8080 port, and when one command had become, I 
catch the command, interpret it, and after I need to run another process tu 
execute the command. To execute another process I have to call 
"reactor.spawnProcess(...)" with its parameters, and after I have to say again 
"reactor.run()", but the reactor is running because the server isn't stop.

I need to run another process with twisted without reactor.... how can I do 
that ?? or, I can do the same thing with another variant ???

please.... help me !!!

-------
[Tank]
"Amar desenfrenadamente es abrazar la utop?a de que tenemos lo que queremos."
-------
Freddy Martinez Garcia
Lic. en Ciencia de la Computaci?n.
Edad: 27 A?os
Santiago de Cuba
e-mails:
    * freddy at cbm.uo.edu.cu
    * freddy311082 at gmail.com
    * freddymg311082 at hotmail.com 

-- 
Este mensaje ha sido analizado por MailScanner
en busca de virus y otros contenidos peligrosos,
y se considera que est? limpio.
For all your IT requirements visit: http://www.transtec.co.uk

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090915/9c08fb1f/attachment.htm 

From colin.alston at thusa.co.za  Tue Sep 15 13:29:05 2009
From: colin.alston at thusa.co.za (Colin Alston)
Date: Tue, 15 Sep 2009 19:29:05 +0200
Subject: [Twisted-Python] hi !!!
In-Reply-To: <200909151247.56909.freddy@cbm.uo.edu.cu>
References: <200909151247.56909.freddy@cbm.uo.edu.cu>
Message-ID: <78bfcf050909151029o4233dc1dx616f56a866190c2d@mail.gmail.com>

On Tue, Sep 15, 2009 at 6:47 PM, Freddy Martinez Garcia <
freddy at cbm.uo.edu.cu> wrote:

> I wrote my problem in the last message an I wasn't clear with that...
>
>
> Ok... I'm going again... !!!
>
>
> I have a web server... this server was implemented with twisted using
> XMLRPC... when the server start to run, in this moment I did
> "reactor.run()"...
>
>
> well, my server is listening by 8080 port, and when one command had become,
> I catch the command, interpret it, and after I need to run another process
> tu execute the command. To execute another process I have to call
> "reactor.spawnProcess(...)" with its parameters, and after I have to say
> again "reactor.run()
>

No, as was explained you do not have to call reactor.run() again.

Twisted use a global event loop (so to speak), you have one and you start it
once, and when it is running all defereds will execute.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090915/17bad91b/attachment.htm 

From timwylie at hotmail.com  Tue Sep 15 13:58:18 2009
From: timwylie at hotmail.com (tim wylie)
Date: Tue, 15 Sep 2009 12:58:18 -0500
Subject: [Twisted-Python] Perspective Broker for plugins
Message-ID: <BAY112-W338A236FA1011A5CB812E7D1E30@phx.gbl>


Hello,
  I'm just now undergoing my first real twisted application.  There is a main server which users authenticate with, and the main server also has different plugins for chat/whatever features.  The client side also has a handler for each of these plugins and then a GTK gui associate with them.  I've been reading the documentation, tutorials, etc, and I'm a little confused about what the best approach would be.

Would you all suggest using Perspective Broker?  Each plugin has it's own set of communication that needs to happen with the plugin handler server side as well.  Would this be easier some other way?

Another question has to do with a GTK handler.  I saw that twisted has a reactor built in for that.  I do have events that need to be triggered from the server.  Should I use twisted for that as well, or just send requests to a callback within the GTK application?

Really there is just so much information out there about twisted and everyone does it differently that it's confusing to get started.  Any help would be appreciated.  Thanks.
Tim

_________________________________________________________________
Hotmail: Free, trusted and rich email service.
http://clk.atdmt.com/GBL/go/171222984/direct/01/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090915/6442bdb2/attachment.htm 

From matusis at yahoo.com  Tue Sep 15 23:08:26 2009
From: matusis at yahoo.com (Alec Matusis)
Date: Tue, 15 Sep 2009 20:08:26 -0700
Subject: [Twisted-Python] memory leak on 8.2.0/2.6 versus 2.5/2.4
In-Reply-To: <20090915145159.8731.612401860.divmod.xquotient.115@localhost.localdomain>
References: <02ce01ca357a$06c9a140$145ce3c0$@com>
	<20090915145159.8731.612401860.divmod.xquotient.115@localhost.localdomain>
Message-ID: <021701ca367a$f8dccb50$ea9661f0$@com>

> Nothing springs to mind, unfortunately.  What parts of Twisted does the
> app use?  Maybe narrowing the field a bit will help jog someone's
> memory... 
 
Nothing special:
Epoll reactor and twisted.enterprise.adbapi

Will keep you guys posted.

> -----Original Message-----
> From: twisted-python-bounces at twistedmatrix.com [mailto:twisted-python-
> bounces at twistedmatrix.com] On Behalf Of exarkun at twistedmatrix.com
> Sent: Tuesday, September 15, 2009 7:52 AM
> To: Twisted general discussion
> Subject: Re: [Twisted-Python] memory leak on 8.2.0/2.6 versus 2.5/2.4
> 
> On 14 Sep, 08:29 pm, matusis at yahoo.com wrote:
> >I am running identical twisted servers under high load, one on 2.5.0
> >(patched for epoll bug) on python 2.4.4 and second one on 8.2.0 on
> >python
> >2.6.2.
> >The 8.2/2.6 one leaks memory compared to 2.5/2.4.4 to the point that I
> >am
> >about to roll back to older Twisted and then to older Python.
> >
> >Any insight on this?
> 
> Hi Alec,
> 
> Nothing springs to mind, unfortunately.  What parts of Twisted does the
> app use?  Maybe narrowing the field a bit will help jog someone's
> memory...  Otherwise, good luck in tracking it down, and I hope you'll
> let us know if you come to any conclusions.
> 
> Jean-Paul
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From mardiros at laposte.net  Wed Sep 16 05:48:52 2009
From: mardiros at laposte.net (mardiros)
Date: Wed, 16 Sep 2009 11:48:52 +0200 (CEST)
Subject: [Twisted-Python] Twistd, tac and Logging
In-Reply-To: <021701ca367a$f8dccb50$ea9661f0$@com>
References: <02ce01ca357a$06c9a140$145ce3c0$@com>
	<20090915145159.8731.612401860.divmod.xquotient.115@localhost.localdomain>
	<021701ca367a$f8dccb50$ea9661f0$@com>
Message-ID: <9129144.1754.1253094532775.JavaMail.www@wwinf8217>


Hi,

I have written an Twisted app in a tac file which use a custom LogObserver
and I'd like to turn off the output of twistd.


First, I 've tried something like this? ( a Debian initd service file )

TACFILE=/opt/email2sms/email2smsd.tac
DAEMON=/usr/bin/twistd
PIDFILE=/var/run/mytac.pid
SCRIPTNAME=/etc/init.d/mytac

$DAEMON -oy $TACFILE --pidfile=$PIDFILE --logfile=/dev/null

but the logfile rotate, and it's create /dev/null.1, ...

What is the right way too do that ?

Thanks,

---------------------------------------------------------------------------- 
Laposte.net f?te ses 10 ans ! 

Gratuite, garantie ? vie et d?j? utilis?e par des millions d'internautes... 
vous aussi, pour votre adresse e-mail, choisissez laposte.net. 

Laposte.net, bien + qu'une messagerie 
----------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090916/60d34309/attachment.htm 

From alendit at googlemail.com  Wed Sep 16 09:27:16 2009
From: alendit at googlemail.com (Dimitri Vorona)
Date: Wed, 16 Sep 2009 15:27:16 +0200
Subject: [Twisted-Python] Using reactor with multiple processes
Message-ID: <ad422ae80909160627o5d9e3c65kf74d322ad377f51a@mail.gmail.com>

Hi,

i'd like to be able to start additional instances of my server using
multiprocess module. To do it i just start a new Process with
mutiprocessing and then create a new instance of my Application there.
Everything works fine, but i can't figure out a way to
stop such a process. If I run reactor.stop() in the child process I
get an infinite loop of errors looking like this:

   --- <exception caught here> ---
 File "/usr/share/exe/twisted/internet/tcp.py", line 755, in doRead
   skt, addr = self.socket.accept()
 File "/usr/lib/python2.6/socket.py", line 195, in accept
   sock, addr = self._sock.accept()
<class 'socket.error'>: [Errno 22] Invalid argument

 I couldn't not find much information on using reactor from different
processes, so i'm asking for help here.

Dimitri


From p.mayers at imperial.ac.uk  Wed Sep 16 10:02:00 2009
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Wed, 16 Sep 2009 15:02:00 +0100
Subject: [Twisted-Python] Using reactor with multiple processes
In-Reply-To: <ad422ae80909160627o5d9e3c65kf74d322ad377f51a@mail.gmail.com>
References: <ad422ae80909160627o5d9e3c65kf74d322ad377f51a@mail.gmail.com>
Message-ID: <4AB0EFD8.2090705@imperial.ac.uk>

Dimitri Vorona wrote:
> Hi,
> 
> i'd like to be able to start additional instances of my server using
> multiprocess module. To do it i just start a new Process with
> mutiprocessing and then create a new instance of my Application there.
> Everything works fine, but i can't figure out a way to
> stop such a process. If I run reactor.stop() in the child process I
> get an infinite loop of errors looking like this:
> 
>    --- <exception caught here> ---
>  File "/usr/share/exe/twisted/internet/tcp.py", line 755, in doRead
>    skt, addr = self.socket.accept()
>  File "/usr/lib/python2.6/socket.py", line 195, in accept
>    sock, addr = self._sock.accept()
> <class 'socket.error'>: [Errno 22] Invalid argument
> 
>  I couldn't not find much information on using reactor from different
> processes, so i'm asking for help here.

I doubt this will work.

When are you starting the multiprocess children?

If it's after the main reactor has started, then you'll run into all 
kinds of problems. When I last looked into it, multiprocess just calls 
"fork()" and then carries on going - it doesn't re-exec the python 
interpreter, so the child process and parent process share state, 
including open file descriptors and such - closing the child process 
will cause "damage" to file descriptors in the parent, amongst other things.

Aside from all that, multiprocess is blocking so doesn't play well with 
Twisted.

You should look into something like Ampoule:

https://launchpad.net/ampoule

...which will work "correctly" with Twisted.


From vpogrebi at verizon.net  Wed Sep 16 12:10:13 2009
From: vpogrebi at verizon.net (Valeriy Pogrebitskiy)
Date: Wed, 16 Sep 2009 12:10:13 -0400
Subject: [Twisted-Python] Twisted Trial (unittest) and Ant
Message-ID: <C5105377-22CC-4B21-A2CD-F78CD294D4AA@verizon.net>

I am trying to implement Ant build.xml script that would include  
testing Python code using twisted.trial.unittest. When using available  
pyAntTasks (<py-test> target), I am getting all sorts of errors - even  
though test scripts complete successfully using Python directly, or  
using Eclipse's' Run As --> Python unit-test' option.

Some errors come from twisted.python.log module, others - I do not  
even know where from. For example, I am seeing following error:

   [py-test]   import pkg_resources
   [py-test] Traceback (most recent call last):
   [py-test]   File "<stdin>", line 3, in <module>
   [py-test] TypeError: __init__() takes at least 2 arguments (1 given)


I wonder if anyone has Ant (build.xml) code samples of executing  
Twisted's unittest scripts. Any help would be appreciated.


Kind regards,

Val.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090916/025311ed/attachment.htm 

From petshmidt at googlemail.com  Wed Sep 16 12:18:41 2009
From: petshmidt at googlemail.com (Pet)
Date: Wed, 16 Sep 2009 18:18:41 +0200
Subject: [Twisted-Python] run queries in deffered, but not in transaction
In-Reply-To: <b460e9630909150921h7e95b4egda47d37322cdbb0@mail.gmail.com>
References: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com> 
	<20090915145522.8731.1321821537.divmod.xquotient.121@localhost.localdomain>
	<4AAFB06B.4010305@lumierevfx.com>
	<b460e9630909150921h7e95b4egda47d37322cdbb0@mail.gmail.com>
Message-ID: <b460e9630909160918qdc55b23r4f825fc8eca1fc1b@mail.gmail.com>

On Tue, Sep 15, 2009 at 6:21 PM, Pet <petshmidt at googlemail.com> wrote:
> On Tue, Sep 15, 2009 at 5:19 PM, Mark Visser <markv at lumierevfx.com> wrote:
>> exarkun at twistedmatrix.com wrote:
>>> On 10:37 am, petshmidt at googlemail.com wrote:
>>>>
>>>> I'd like to run several queries in background, some of them may fail.
>>>>
>>>
>>> If you have a function along the lines of this one:
>>>
>>> ? ? def someInteractions(db):
>>> ? ? ? ? interactions = [
>>> ? ? ? ? ? ? db.runInteraction(one),
>>> ? ? ? ? ? ? db.runInteraction(two),
>>> ? ? ? ? ? ? db.runInteraction(three)]
>>>
>>> Then a failure in one shouldn't affect two or three; likewise for any
>>> other failure or combination of failures. ?They are naturally (ugh, not
>>> a good word, but I can't think of a better one) independent. ?You have
>>> to go out of your way to associate them somehow.
>>>
>> I think he might mean he wants them to run sequentially, even if one fails.
>>
>> You can do that explicitly via @inlineCallbacks like this:
>>
>> @inlineCallbacks
>> def someInteractions(db):
>> ? ?try:
>> ? ? ? ?yield db.runInteraction(one)
>> ? ?except:
>> ? ? ? pass
>>
>> ? ?try:
>> ? ? ? ?yield db.runInteraction(two)
>> ? ?except:
>> ? ? ? pass
>>
>> ? ?try:
>> ? ? ? ?yield db.runInteraction(three)
>> ? ?except:
>> ? ? ? pass
>>
>> Or with callback/errbacks, like this:
>>
>> def someInteractions(db)
>> ? ? ? ?d = db.runInteraction(one).addBoth(db.runInteraction,
>> two).addBoth(db.runInteraction, three)
>

Hi,


I've tried to do following:

def logRequest(self, *arg, **kw):
    obj = copy.deepcopy(kw['obj'])

    d = self.db.runInteraction(obj.first)

    d.addCallback(self.db.runInteraction, obj.second, param1, param2)
    d.addErrback(log.err)

    d.addCallback(self.db.runInteraction, obj.third)
    d.addErrback(log.err)


unfortunately it doesn't work in that way, because I suppose, obj is
destroyed if second or third interaction starts.
Is there a way to solve this?

Thanks, Pet

> Hi Mark!
>
> Yes, I'd like run them sequentially, it was not clear for me, how to
> do it in one deferred.
>
> I will try your suggestions out.
>
> Thanks for help!
>
> Pet
>
>>
>> addBoth is a convenience method that adds the same function as a
>> callback and an errback:
>>
>> http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.defer.Deferred.html#addBoth
>>
>> --
>> Mark Visser, Software Director
>> Lumi?re VFX
>> Email: markv at lumierevfx.com
>> Phone: +1-514-316-1080 x3030
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>


From david.yoakley at gmail.com  Wed Sep 16 12:33:51 2009
From: david.yoakley at gmail.com (David Yoakley)
Date: Wed, 16 Sep 2009 11:33:51 -0500
Subject: [Twisted-Python] Using reactor with multiple processes
Message-ID: <90be4d570909160933m5528f053yeef0629765c2d1a0@mail.gmail.com>

Dimitri Vorona wrote:
> Hi,
>
> i'd like to be able to start additional instances of my server using
> multiprocess module. To do it i just start a new Process with
> mutiprocessing and then create a new instance of my Application there.
> Everything works fine, but i can't figure out a way to
> stop such a process. If I run reactor.stop() in the child process I
> get an infinite loop of errors looking like this:
>

This is a very timely discussion for us.  We are trying to launch multiple
independent twistedized children with python multiprocess and yes (as Phil
noted) we are getting very strange results.  We were aware the multiprocess
module does a fork to spawn children but we hoping that this would not be an
issue for us because our parent process does NOT start a reactor before
spawning the children.  In fact even if our parent process never starts its
reactor, as soon as we spawn the 2nd twistedized child, bad things start
happening in the children.   The parent does import the child modules in
order to start them and since each child module also imports twisted, we are
thinking that some twisted state gets established just on the import of the
twisted reactor into the parent and then the fork clones that state into the
children.

Thanks Phil for the reference to ampoule.   We will look at that next.  We
are still hoping to get the parent set up in such a way that whatever the
forking :-) shared state is, it does not get established until after the
children are spawed. I'll post back later with what we find.  Phil your
thoughts on this would also be appreciated.

Cheers,
David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090916/819d13b5/attachment.htm 

From kevin.horn at gmail.com  Wed Sep 16 17:25:34 2009
From: kevin.horn at gmail.com (Kevin Horn)
Date: Wed, 16 Sep 2009 16:25:34 -0500
Subject: [Twisted-Python] network server on multiprocessor hardware
In-Reply-To: <4AA2709C.4090501@academ.org>
References: <4AA17FC1.1070303@academ.org>
	<d9047f780909041620y417dd667w5f2cce684e090c3f@mail.gmail.com>
	<4AA251F2.2060205@academ.org>
	<cedc0c090909050516r7a7367e3ra5578af60749b6d5@mail.gmail.com>
	<4AA2709C.4090501@academ.org>
Message-ID: <562bcc10909161425g361e3ffej3402b4308dfa4ec5@mail.gmail.com>

On Sat, Sep 5, 2009 at 9:07 AM, Bokhan Artem <art at academ.org> wrote:

> Laurens Van Houtven ?????:
> > Are you sure it's dying out because of CPU limitations?
>
> Yes, with 1k req/s cpu is 100% busy with python.
>
> > Can you show any real applications where this happens?
>
> I do not have real application in python/twisted now.
> That could be any internet server with high load or under dos.
>
> > In my experience your network IO always gives up ages before my
> processors croak :-)
>
> It depends.
>
> >
> > I happen to be in the middle of writing a project with a big
> > computational component (at least when I'm not hacking away at
> > twisted.positioning), and generally the heavy computational stuff
> > doesn't live in the Twisted layer.
>
> I do not have any heavy computations, just high request rate.
>
>
> If you are looking for load balancing, you might also find txLoadBalancer
useful:
http://groups.google.com/group/txlb-dev

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090916/ba253243/attachment.htm 

From foom at fuhm.net  Wed Sep 16 18:29:24 2009
From: foom at fuhm.net (James Y Knight)
Date: Wed, 16 Sep 2009 18:29:24 -0400
Subject: [Twisted-Python] Using reactor with multiple processes
In-Reply-To: <90be4d570909160933m5528f053yeef0629765c2d1a0@mail.gmail.com>
References: <90be4d570909160933m5528f053yeef0629765c2d1a0@mail.gmail.com>
Message-ID: <2A0E194C-50A7-4970-96DF-12EBF8B7B586@fuhm.net>

On Sep 16, 2009, at 12:33 PM, David Yoakley wrote:
> Thanks Phil for the reference to ampoule.   We will look at that  
> next.  We are still hoping to get the parent set up in such a way  
> that whatever the forking :-) shared state is, it does not get  
> established until after the children are spawed. I'll post back  
> later with what we find.  Phil your thoughts on this would also be  
> appreciated.

It think it would be a nice for this to work. Importing (but not  
running) twisted should ideally not cause strange side effects.

So if this turns out to be a problem with some twisted-internal code  
rather than your code, a bug report would be a good idea, and a patch  
causing such problematic setup to be done at reactor startup rather  
than import time even better.

That should at least fix the case of forking before starting the  
reactor. For people who want to fork while the reactor is running,  
there would need to be API for clearing out all the timed events, open  
sockets, etc and starting over. Which is probably more trouble than  
it's worth.

James


From matt at unshift.net  Wed Sep 16 22:35:06 2009
From: matt at unshift.net (Matt Perry)
Date: Wed, 16 Sep 2009 22:35:06 -0400
Subject: [Twisted-Python] run queries in deffered, but not in transaction
In-Reply-To: <b460e9630909160918qdc55b23r4f825fc8eca1fc1b@mail.gmail.com>
References: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com>
	<20090915145522.8731.1321821537.divmod.xquotient.121@localhost.localdomain>
	<4AAFB06B.4010305@lumierevfx.com>
	<b460e9630909150921h7e95b4egda47d37322cdbb0@mail.gmail.com>
	<b460e9630909160918qdc55b23r4f825fc8eca1fc1b@mail.gmail.com>
Message-ID: <a8c89c8c0909161935t1bf1d2e4j5679ff7963ae36f6@mail.gmail.com>

Make sure you're using the @inlineCallbacks decorator and the yield
statement referenced previously.  Without those you're just adding several
callbacks to the same Deferred; with them, the function will wait until the
Deferred fires before continuing.

def logRequest(self, *arg, **kw):
   obj = copy.deepcopy(kw['obj'])

   d = self.db.runInteraction(obj.first)

   d.addCallback(self.db.runInteraction, obj.second, param1, param2)
   d.addErrback(log.err)

   d.addCallback(self.db.runInteraction, obj.third)
   d.addErrback(log.err)


Note that "d" is the same Deferred throughout.  If you change it to:

@inlineCallbacks
def logRequest(self, *arg, **kw):
   obj = copy.deepcopy(kw['obj'])

   firstDeferred = self.db.runInteraction(obj.first)
   yield firstDeferred

  # code here won't get resumed until "firstDeferred" has a result
  print firstDeferred.result

  secondDeferred = self.db.runInteraction(obj.second)
  yield secondDeferred

  # same as above, code won't get executed until "secondDeferred" has a
result

then you'll get the behavior you're looking for.

See
http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.defer.html#inlineCallbacksfor
some more information.

   - Matt



On Wed, Sep 16, 2009 at 12:18 PM, Pet <petshmidt at googlemail.com> wrote:

> On Tue, Sep 15, 2009 at 6:21 PM, Pet <petshmidt at googlemail.com> wrote:
> > On Tue, Sep 15, 2009 at 5:19 PM, Mark Visser <markv at lumierevfx.com>
> wrote:
> >> exarkun at twistedmatrix.com wrote:
> >>> On 10:37 am, petshmidt at googlemail.com wrote:
> >>>>
> >>>> I'd like to run several queries in background, some of them may fail.
> >>>>
> >>>
> >>> If you have a function along the lines of this one:
> >>>
> >>>     def someInteractions(db):
> >>>         interactions = [
> >>>             db.runInteraction(one),
> >>>             db.runInteraction(two),
> >>>             db.runInteraction(three)]
> >>>
> >>> Then a failure in one shouldn't affect two or three; likewise for any
> >>> other failure or combination of failures.  They are naturally (ugh, not
> >>> a good word, but I can't think of a better one) independent.  You have
> >>> to go out of your way to associate them somehow.
> >>>
> >> I think he might mean he wants them to run sequentially, even if one
> fails.
> >>
> >> You can do that explicitly via @inlineCallbacks like this:
> >>
> >> @inlineCallbacks
> >> def someInteractions(db):
> >>    try:
> >>        yield db.runInteraction(one)
> >>    except:
> >>       pass
> >>
> >>    try:
> >>        yield db.runInteraction(two)
> >>    except:
> >>       pass
> >>
> >>    try:
> >>        yield db.runInteraction(three)
> >>    except:
> >>       pass
> >>
> >> Or with callback/errbacks, like this:
> >>
> >> def someInteractions(db)
> >>        d = db.runInteraction(one).addBoth(db.runInteraction,
> >> two).addBoth(db.runInteraction, three)
> >
>
> Hi,
>
>
> I've tried to do following:
>
> def logRequest(self, *arg, **kw):
>    obj = copy.deepcopy(kw['obj'])
>
>    d = self.db.runInteraction(obj.first)
>
>    d.addCallback(self.db.runInteraction, obj.second, param1, param2)
>    d.addErrback(log.err)
>
>    d.addCallback(self.db.runInteraction, obj.third)
>    d.addErrback(log.err)
>
>
> unfortunately it doesn't work in that way, because I suppose, obj is
> destroyed if second or third interaction starts.
> Is there a way to solve this?
>
> Thanks, Pet
>
> > Hi Mark!
> >
> > Yes, I'd like run them sequentially, it was not clear for me, how to
> > do it in one deferred.
> >
> > I will try your suggestions out.
> >
> > Thanks for help!
> >
> > Pet
> >
> >>
> >> addBoth is a convenience method that adds the same function as a
> >> callback and an errback:
> >>
> >>
> http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.defer.Deferred.html#addBoth
> >>
> >> --
> >> Mark Visser, Software Director
> >> Lumi?re VFX
> >> Email: markv at lumierevfx.com
> >> Phone: +1-514-316-1080 x3030
> >>
> >>
> >> _______________________________________________
> >> Twisted-Python mailing list
> >> Twisted-Python at twistedmatrix.com
> >> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >>
> >
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090916/8da2e45b/attachment-0001.htm 

From petshmidt at googlemail.com  Thu Sep 17 02:48:02 2009
From: petshmidt at googlemail.com (Pet)
Date: Thu, 17 Sep 2009 08:48:02 +0200
Subject: [Twisted-Python] run queries in deffered, but not in transaction
In-Reply-To: <a8c89c8c0909161935t1bf1d2e4j5679ff7963ae36f6@mail.gmail.com>
References: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com> 
	<20090915145522.8731.1321821537.divmod.xquotient.121@localhost.localdomain>
	<4AAFB06B.4010305@lumierevfx.com>
	<b460e9630909150921h7e95b4egda47d37322cdbb0@mail.gmail.com> 
	<b460e9630909160918qdc55b23r4f825fc8eca1fc1b@mail.gmail.com> 
	<a8c89c8c0909161935t1bf1d2e4j5679ff7963ae36f6@mail.gmail.com>
Message-ID: <b460e9630909162348q2b7c2c0cub38ad5124d6dfded@mail.gmail.com>

On Thu, Sep 17, 2009 at 4:35 AM, Matt Perry <matt at unshift.net> wrote:
> Make sure you're using the @inlineCallbacks decorator and the yield
> statement referenced previously.? Without those you're just adding several
> callbacks to the same Deferred; with them, the function will wait until the
> Deferred fires before continuing.
>
> def logRequest(self, *arg, **kw):
> ? ?obj = copy.deepcopy(kw['obj'])
>
> ? ?d = self.db.runInteraction(obj.first)
>
> ? ?d.addCallback(self.db.runInteraction, obj.second, param1, param2)
> ? ?d.addErrback(log.err)
>
> ? ?d.addCallback(self.db.runInteraction, obj.third)
> ? ?d.addErrback(log.err)
>
>
> Note that "d" is the same Deferred throughout.? If you change it to:
>
> @inlineCallbacks
> def logRequest(self, *arg, **kw):
> ? ?obj = copy.deepcopy(kw['obj'])
>
> ?? firstDeferred = self.db.runInteraction(obj.first)
> ?? yield firstDeferred
>
> ? # code here won't get resumed until "firstDeferred" has a result
> ? print firstDeferred.result
>
> ? secondDeferred = self.db.runInteraction(obj.second)
> ? yield secondDeferred
>
> ? # same as above, code won't get executed until "secondDeferred" has a
> result
>
> then you'll get the behavior you're looking for.
>
> See
> http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.defer.html#inlineCallbacks
> for some more information.
>

Matt and Jean-Paul,

thank you for help!

Pet

> ?? - Matt
>
>
>
> On Wed, Sep 16, 2009 at 12:18 PM, Pet <petshmidt at googlemail.com> wrote:
>>
>> On Tue, Sep 15, 2009 at 6:21 PM, Pet <petshmidt at googlemail.com> wrote:
>> > On Tue, Sep 15, 2009 at 5:19 PM, Mark Visser <markv at lumierevfx.com>
>> > wrote:
>> >> exarkun at twistedmatrix.com wrote:
>> >>> On 10:37 am, petshmidt at googlemail.com wrote:
>> >>>>
>> >>>> I'd like to run several queries in background, some of them may fail.
>> >>>>
>> >>>
>> >>> If you have a function along the lines of this one:
>> >>>
>> >>> ? ? def someInteractions(db):
>> >>> ? ? ? ? interactions = [
>> >>> ? ? ? ? ? ? db.runInteraction(one),
>> >>> ? ? ? ? ? ? db.runInteraction(two),
>> >>> ? ? ? ? ? ? db.runInteraction(three)]
>> >>>
>> >>> Then a failure in one shouldn't affect two or three; likewise for any
>> >>> other failure or combination of failures. ?They are naturally (ugh,
>> >>> not
>> >>> a good word, but I can't think of a better one) independent. ?You have
>> >>> to go out of your way to associate them somehow.
>> >>>
>> >> I think he might mean he wants them to run sequentially, even if one
>> >> fails.
>> >>
>> >> You can do that explicitly via @inlineCallbacks like this:
>> >>
>> >> @inlineCallbacks
>> >> def someInteractions(db):
>> >> ? ?try:
>> >> ? ? ? ?yield db.runInteraction(one)
>> >> ? ?except:
>> >> ? ? ? pass
>> >>
>> >> ? ?try:
>> >> ? ? ? ?yield db.runInteraction(two)
>> >> ? ?except:
>> >> ? ? ? pass
>> >>
>> >> ? ?try:
>> >> ? ? ? ?yield db.runInteraction(three)
>> >> ? ?except:
>> >> ? ? ? pass
>> >>
>> >> Or with callback/errbacks, like this:
>> >>
>> >> def someInteractions(db)
>> >> ? ? ? ?d = db.runInteraction(one).addBoth(db.runInteraction,
>> >> two).addBoth(db.runInteraction, three)
>> >
>>
>> Hi,
>>
>>
>> I've tried to do following:
>>
>> def logRequest(self, *arg, **kw):
>> ? ?obj = copy.deepcopy(kw['obj'])
>>
>> ? ?d = self.db.runInteraction(obj.first)
>>
>> ? ?d.addCallback(self.db.runInteraction, obj.second, param1, param2)
>> ? ?d.addErrback(log.err)
>>
>> ? ?d.addCallback(self.db.runInteraction, obj.third)
>> ? ?d.addErrback(log.err)
>>
>>
>> unfortunately it doesn't work in that way, because I suppose, obj is
>> destroyed if second or third interaction starts.
>> Is there a way to solve this?
>>
>> Thanks, Pet
>>
>> > Hi Mark!
>> >
>> > Yes, I'd like run them sequentially, it was not clear for me, how to
>> > do it in one deferred.
>> >
>> > I will try your suggestions out.
>> >
>> > Thanks for help!
>> >
>> > Pet
>> >
>> >>
>> >> addBoth is a convenience method that adds the same function as a
>> >> callback and an errback:
>> >>
>> >>
>> >> http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.defer.Deferred.html#addBoth
>> >>
>> >> --
>> >> Mark Visser, Software Director
>> >> Lumi?re VFX
>> >> Email: markv at lumierevfx.com
>> >> Phone: +1-514-316-1080 x3030
>> >>
>> >>
>> >> _______________________________________________
>> >> Twisted-Python mailing list
>> >> Twisted-Python at twistedmatrix.com
>> >> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> >>
>> >
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


From amauryfa at gmail.com  Thu Sep 17 03:32:13 2009
From: amauryfa at gmail.com (Amaury Forgeot d'Arc)
Date: Thu, 17 Sep 2009 09:32:13 +0200
Subject: [Twisted-Python] run queries in deffered, but not in transaction
In-Reply-To: <a8c89c8c0909161935t1bf1d2e4j5679ff7963ae36f6@mail.gmail.com>
References: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com>
	<20090915145522.8731.1321821537.divmod.xquotient.121@localhost.localdomain>
	<4AAFB06B.4010305@lumierevfx.com>
	<b460e9630909150921h7e95b4egda47d37322cdbb0@mail.gmail.com>
	<b460e9630909160918qdc55b23r4f825fc8eca1fc1b@mail.gmail.com>
	<a8c89c8c0909161935t1bf1d2e4j5679ff7963ae36f6@mail.gmail.com>
Message-ID: <e27efe130909170032u3f93b925w490c3254f94b1413@mail.gmail.com>

Hello,

2009/9/17 Matt Perry <matt at unshift.net>:
> Make sure you're using the @inlineCallbacks decorator and the yield
> statement referenced previously.? Without those you're just adding several
> callbacks to the same Deferred; with them, the function will wait until the
> Deferred fires before continuing.
>
> def logRequest(self, *arg, **kw):
> ? ?obj = copy.deepcopy(kw['obj'])
>
> ? ?d = self.db.runInteraction(obj.first)
>
> ? ?d.addCallback(self.db.runInteraction, obj.second, param1, param2)
> ? ?d.addErrback(log.err)
>
> ? ?d.addCallback(self.db.runInteraction, obj.third)
> ? ?d.addErrback(log.err)

I don't understand your explanation. When a callback returns a Deferred itself,
the main Deferred object waits for its completion before continuing.
This is IMO the best feature of Deferreds!

I often write code like the function above, so I would like to understand why
it does not work in this case.

-- 
Amaury Forgeot d'Arc


From p.mayers at imperial.ac.uk  Thu Sep 17 07:07:34 2009
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Thu, 17 Sep 2009 12:07:34 +0100
Subject: [Twisted-Python] Using reactor with multiple processes
In-Reply-To: <2A0E194C-50A7-4970-96DF-12EBF8B7B586@fuhm.net>
References: <90be4d570909160933m5528f053yeef0629765c2d1a0@mail.gmail.com>
	<2A0E194C-50A7-4970-96DF-12EBF8B7B586@fuhm.net>
Message-ID: <4AB21876.9070609@imperial.ac.uk>

James Y Knight wrote:
> On Sep 16, 2009, at 12:33 PM, David Yoakley wrote:
>> Thanks Phil for the reference to ampoule.   We will look at that  
>> next.  We are still hoping to get the parent set up in such a way  
>> that whatever the forking :-) shared state is, it does not get  
>> established until after the children are spawed. I'll post back  
>> later with what we find.  Phil your thoughts on this would also be  
>> appreciated.
> 
> It think it would be a nice for this to work. Importing (but not  
> running) twisted should ideally not cause strange side effects.

Well, doing:

from twisted.internet import reactor

...causes all kinds of code to be executed. I suspect that:

posixreactorbase.installWaker()

...is the problem, since this creates an FD pair and adds it to the 
reactor. I guess this should really be done during reactor.run()


From twisted at ralphm.ik.nu  Thu Sep 17 10:33:43 2009
From: twisted at ralphm.ik.nu (Ralph Meijer)
Date: Thu, 17 Sep 2009 16:33:43 +0200
Subject: [Twisted-Python] An XMPP client with SSL support
In-Reply-To: <1219872700.10045.29.camel@pcard0ze.ca.nortel.com>
References: <1219872700.10045.29.camel@pcard0ze.ca.nortel.com>
Message-ID: <1253198023.5546.9.camel@dwaal>

On Wed, 2008-08-27 at 17:31 -0400, Pedro Sanchez wrote:
> Hello,
> 
> I have a sample XMPP client with the following structure:
> 
> from twisted.words.protocols.jabber import client, jid
> from twisted.internet import reactor
> ...
> factory = client.basicClientFactory(myJid, myPasswd)
> reactor.connectTCP(host,5222,factory)
> reactor.run()
> 
> It works well, I can connect to the XMPP server. But I would appreciate
> if some one could give me some hints on what's required to get the
> client to connect using a secure SSL link.

Use client.XMPPClientFactory instead, and make sure you have pyOpenSSL
installed.

ralphm




From matt at unshift.net  Thu Sep 17 12:35:05 2009
From: matt at unshift.net (Matt Perry)
Date: Thu, 17 Sep 2009 12:35:05 -0400
Subject: [Twisted-Python] run queries in deffered, but not in transaction
In-Reply-To: <e27efe130909170032u3f93b925w490c3254f94b1413@mail.gmail.com>
References: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com>
	<20090915145522.8731.1321821537.divmod.xquotient.121@localhost.localdomain>
	<4AAFB06B.4010305@lumierevfx.com>
	<b460e9630909150921h7e95b4egda47d37322cdbb0@mail.gmail.com>
	<b460e9630909160918qdc55b23r4f825fc8eca1fc1b@mail.gmail.com>
	<a8c89c8c0909161935t1bf1d2e4j5679ff7963ae36f6@mail.gmail.com>
	<e27efe130909170032u3f93b925w490c3254f94b1413@mail.gmail.com>
Message-ID: <a8c89c8c0909170935r386f277chcc10642f68f1026c@mail.gmail.com>

That way works, but the original problem was that a failure in one of them
was stopping the whole callback chain.

Missing from my example (but present in a past example) was a try/except
around the yield keyword.  So:

...
try:
   yield deferred1
except:
   pass
...
try:
   yield deferred2
except:
   pass


would swallow any exceptions thrown by deferred1 and continue on to create
deferred2.  If you did:

d.addCallback(foo)
d.addCallback(bar)
d.addCallback(baz)

then an exception in "foo" would break the whole callback chain.


   - Matt

On Thu, Sep 17, 2009 at 3:32 AM, Amaury Forgeot d'Arc <amauryfa at gmail.com>wrote:

> Hello,
>
> 2009/9/17 Matt Perry <matt at unshift.net>:
> > Make sure you're using the @inlineCallbacks decorator and the yield
> > statement referenced previously.  Without those you're just adding
> several
> > callbacks to the same Deferred; with them, the function will wait until
> the
> > Deferred fires before continuing.
> >
> > def logRequest(self, *arg, **kw):
> >    obj = copy.deepcopy(kw['obj'])
> >
> >    d = self.db.runInteraction(obj.first)
> >
> >    d.addCallback(self.db.runInteraction, obj.second, param1, param2)
> >    d.addErrback(log.err)
> >
> >    d.addCallback(self.db.runInteraction, obj.third)
> >    d.addErrback(log.err)
>
> I don't understand your explanation. When a callback returns a Deferred
> itself,
> the main Deferred object waits for its completion before continuing.
> This is IMO the best feature of Deferreds!
>
> I often write code like the function above, so I would like to understand
> why
> it does not work in this case.
>
> --
> Amaury Forgeot d'Arc
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090917/0be166bc/attachment.htm 

From markv at lumierevfx.com  Thu Sep 17 12:51:33 2009
From: markv at lumierevfx.com (Mark Visser)
Date: Thu, 17 Sep 2009 12:51:33 -0400
Subject: [Twisted-Python] run queries in deffered, but not in transaction
In-Reply-To: <a8c89c8c0909170935r386f277chcc10642f68f1026c@mail.gmail.com>
References: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com>	<20090915145522.8731.1321821537.divmod.xquotient.121@localhost.localdomain>	<4AAFB06B.4010305@lumierevfx.com>	<b460e9630909150921h7e95b4egda47d37322cdbb0@mail.gmail.com>	<b460e9630909160918qdc55b23r4f825fc8eca1fc1b@mail.gmail.com>	<a8c89c8c0909161935t1bf1d2e4j5679ff7963ae36f6@mail.gmail.com>	<e27efe130909170032u3f93b925w490c3254f94b1413@mail.gmail.com>
	<a8c89c8c0909170935r386f277chcc10642f68f1026c@mail.gmail.com>
Message-ID: <4AB26915.70400@lumierevfx.com>

Matt Perry wrote:
> would swallow any exceptions thrown by deferred1 and continue on to 
> create deferred2.  If you did:
>
> d.addCallback(foo)
> d.addCallback(bar)
> d.addCallback(baz)
>
> then an exception in "foo" would break the whole callback chain.
You can also use addBoth(), which adds a callback and errback at the 
same time. Though I prefer the @inlineCallbacks semantics, since they 
produce much more readable code.

cheers,
-Mark


From pemboa at gmail.com  Thu Sep 17 14:31:40 2009
From: pemboa at gmail.com (Arthur Pemberton)
Date: Thu, 17 Sep 2009 13:31:40 -0500
Subject: [Twisted-Python] Seeking advice on use of Perspective Broker
Message-ID: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>

Good day,

I have scanned through the docs a few times, and I am in need of some
advice and explanation to determine if Twisted's Perspective Broker
meetings my perceived needs

What I am trying to do : create a client/server project where the
server is a a typical access multiple data sources, enforce business
logic, and pass data to client. I am looking to use RPC type
technology to facilitate transparent use of the network to communicate
between the client and server.

What I am looked at so far : CORBA implemenations OmniORB and Orbit,
Pyro and Twisted. So far from my scans of the docs of both Pyro and
Twisted, I am a lot clearer on how I could use Pyro to achieve my
goals. However, as part of my application I want to be able to do file
transfers between server and client -- Twisted provides tools for
that. Also, Pyro has this re alert with the use of pickled data being
sent over the network, and it's not clear if simply using SSL
mitigates that problem.

So I've joined this list in the hopes of find some more information,
specifically:
 1) Is the Twisted Matrix book published by Orielly relevant ie. updated enough?
 2) How easy it to package Twisted for distribution on Windows system
(which would be inevitable)
 3) Are there any further documentation/tutorial resources online
giving close to real world use of Perspective Broker
 4) Is it safe to assume that Twisted provides quite a bit in the way
of securing communications between client and server

This is my first project of this scale, so I would appreciate any
advice that seems relevant. In case this matters, this project is thus
far just a hobby.

Thank you.
-- 
Fedora 10
(www.pembo13.com)


From brett at gladserv.com  Thu Sep 17 15:09:43 2009
From: brett at gladserv.com (Brett Sheffield)
Date: Thu, 17 Sep 2009 20:09:43 +0100
Subject: [Twisted-Python] Seeking advice on use of Perspective Broker
In-Reply-To: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>
References: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>
Message-ID: <4AB28977.2090405@gladserv.com>

Arthur Pemberton wrote:
>  1) Is the Twisted Matrix book published by Orielly relevant ie. updated enough?

Yes.  I just read it and it has excellent Perspective Broker examples in
chapters 5 & 6 which got me to a flying start recently.   Obviously
you'll want to read the online docs too.

It doesn't cover twisted.web and nevoew very well because the API was
still shifting about then, but the rest seems pretty good.  It was
published in 2006.

>  3) Are there any further documentation/tutorial resources online
> giving close to real world use of Perspective Broker

All the building blocks are documented, but I don't know of a really
good online example using all the security features fully.  Hopefully
someone else will respond here and tell me I'm wrong. :-)

>  4) Is it safe to assume that Twisted provides quite a bit in the way
> of securing communications between client and server

You used "safe" and "assume" in the same sentence.  Next you'll be
saying "should" ;-)

But yes, all the bits are there - you'll need to plug them together though.

-- 
__________________________________________________________
Application Hosting | Virtual Servers | Monitoring | Email
Tel: 0131 510 0340                http://www.gladserv.com/


From twisted at ralphm.ik.nu  Thu Sep 17 16:36:00 2009
From: twisted at ralphm.ik.nu (Ralph Meijer)
Date: Thu, 17 Sep 2009 22:36:00 +0200
Subject: [Twisted-Python] An XMPP client with SSL support
In-Reply-To: <1253198023.5546.9.camel@dwaal>
References: <1219872700.10045.29.camel@pcard0ze.ca.nortel.com>
	<1253198023.5546.9.camel@dwaal>
Message-ID: <20090917203600.GA41744@ik.nu>

On Thu, Sep 17, 2009 at 04:33:43PM +0200, Ralph Meijer wrote:
> On Wed, 2008-08-27 at 17:31 -0400, Pedro Sanchez wrote:

Oh, ahum. That's quite the latency...

-- 
Groetjes,

ralphm


From pemboa at gmail.com  Thu Sep 17 18:39:17 2009
From: pemboa at gmail.com (Arthur Pemberton)
Date: Thu, 17 Sep 2009 17:39:17 -0500
Subject: [Twisted-Python] Seeking advice on use of Perspective Broker
In-Reply-To: <4AB28977.2090405@gladserv.com>
References: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>
	<4AB28977.2090405@gladserv.com>
Message-ID: <16de708d0909171539q1f2c2483vbbacd1a479c4655b@mail.gmail.com>

On Thu, Sep 17, 2009 at 2:09 PM, Brett Sheffield <brett at gladserv.com> wrote:
> Arthur Pemberton wrote:
>> ?1) Is the Twisted Matrix book published by Orielly relevant ie. updated enough?
>
> Yes. ?I just read it and it has excellent Perspective Broker examples in
> chapters 5 & 6 which got me to a flying start recently. ? Obviously
> you'll want to read the online docs too.
>
> It doesn't cover twisted.web and nevoew very well because the API was
> still shifting about then, but the rest seems pretty good. ?It was
> published in 2006.

I know it was published in 2006, but 3 years can be a long time in the
computing industry, but you've convinced me that its worth a ready. Is
there any link/path to purchase through which the project gets a a
cut? I know amazon has referrer programs.


Thanks for the further information.

-- 
Fedora 10
(www.pembo13.com)


From brett at gladserv.com  Thu Sep 17 19:09:04 2009
From: brett at gladserv.com (Brett Sheffield)
Date: Fri, 18 Sep 2009 00:09:04 +0100
Subject: [Twisted-Python] Seeking advice on use of Perspective Broker
In-Reply-To: <16de708d0909171539q1f2c2483vbbacd1a479c4655b@mail.gmail.com>
References: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>	<4AB28977.2090405@gladserv.com>
	<16de708d0909171539q1f2c2483vbbacd1a479c4655b@mail.gmail.com>
Message-ID: <4AB2C190.4030505@gladserv.com>

Arthur Pemberton wrote:
> On Thu, Sep 17, 2009 at 2:09 PM, Brett Sheffield <brett at gladserv.com> wrote:
>> It doesn't cover twisted.web and nevoew very well because the API was
>> still shifting about then, but the rest seems pretty good.  It was
>> published in 2006.
> 
> I know it was published in 2006, but 3 years can be a long time in the
> computing industry, but you've convinced me that its worth a ready. 

Aye - curse these developers - they never sit still (especially the
Twisted lot!)  Always improving things.  I've been experimenting with
the latest Twisted and wsgi containers to get django running on top of
Twisted.  Seems to work rather well so far.

> Is
> there any link/path to purchase through which the project gets a a
> cut? I know amazon has referrer programs.

There's a link on the page at:
  http://twistedmatrix.com/trac/

> Thanks for the further information.

No worries.

-- 
__________________________________________________________
Application Hosting | Virtual Servers | Monitoring | Email
Tel: 0131 510 0340                http://www.gladserv.com/


From urbansoot at gmail.com  Thu Sep 17 19:29:07 2009
From: urbansoot at gmail.com (Slava Yanson)
Date: Thu, 17 Sep 2009 16:29:07 -0700
Subject: [Twisted-Python] Twisted FTP server fails on PASV
Message-ID: <e5b8dac40909171629k72bb5d76j7801c1cbd7450838@mail.gmail.com>

It just doesn't want to go past PASV. Spent past 3 hours trying to figure
this one out. Any help is appreciated.


Log:

2009-09-17 16:26:56-0700 [-] Log opened.
2009-09-17 16:26:56-0700 [-] twisted.protocols.ftp.FTPFactory starting on
*****
2009-09-17 16:26:56-0700 [-] Starting factory
<twisted.protocols.ftp.FTPFactory instance at 0x2b3a031037a0>
2009-09-17 16:26:59-0700 [twisted.protocols.ftp.FTPFactory] client connected
2009-09-17 16:26:59-0700 [twisted.protocols.ftp.FTPFactory] --> 220 Twisted
8.2.0 FTP Server
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] <-- USER fnet
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] --> 331 Password
required for fnet.
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] <-- PASS *****
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] --> 230 User logged
in, proceed
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] <-- TYPE A
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] --> 200 Type set to
A.
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] <-- SYST
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] --> 215 UNIX Type:
L8
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] <-- PWD
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] --> 257 "/"
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] <-- PASV
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21]
DTPFactory.setTimeout set to 10 seconds
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21]
twisted.protocols.ftp.DTPFactory starting on 38637
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] Starting factory
<twisted.protocols.ftp.DTPFactory instance at 0x2b3a0544a170>
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] --> 227 Entering
Passive Mode (65,61,232,130,150,237).
2009-09-17 16:27:10-0700 [-] timed out waiting for DTP connection
2009-09-17 16:27:10-0700 [-] Unexpected FTP error
2009-09-17 16:27:10-0700 [-] Unhandled Error
    Traceback (most recent call last):
    Failure: twisted.internet.defer.TimeoutError:

2009-09-17 16:27:10-0700 [-] --> 550 Requested action not taken: internal
server error
2009-09-17 16:27:10-0700 [-] dtpFactory.stopFactory



Code:

from twisted.protocols.ftp import FTPFactory, FTPRealm, FTP
from twisted.cred.portal import Portal
from twisted.cred.checkers import FilePasswordDB
from twisted.internet import reactor
from twisted.python import log
import sys

log.startLogging(sys.stdout)

class bcFTPProtocol(FTP):
    def connectionMade(self):
        log.msg("client connected")

        FTP.connectionMade(self)

    def lineReceived(self, line):
        log.msg("<-- " + line)
        FTP.lineReceived(self, line)

    def sendLine(self, msg):
        log.msg("--> " + msg)
        FTP.sendLine(self, msg)

ftp_portal = Portal(FTPRealm('data/'), [FilePasswordDB("ftp.users")])
ftp_factory = FTPFactory(ftp_portal)
ftp_factory.protocol = bcFTPProtocol

reactor.listenTCP(*****, ftp_factory)
reactor.run()






Thank you,

Slava Yanson
Positive Blue, LLC

web: www.positiveblue.com
tel: (323) 963-4787
aim/yahoo/skype: urbansoot

http://www.LinuxDecals.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090917/ccc0afb8/attachment-0001.htm 

From listsin at integrateddevcorp.com  Thu Sep 17 19:39:19 2009
From: listsin at integrateddevcorp.com (Steve Steiner (listsin))
Date: Thu, 17 Sep 2009 19:39:19 -0400
Subject: [Twisted-Python] Twisted FTP server fails on PASV
In-Reply-To: <e5b8dac40909171629k72bb5d76j7801c1cbd7450838@mail.gmail.com>
References: <e5b8dac40909171629k72bb5d76j7801c1cbd7450838@mail.gmail.com>
Message-ID: <ECF82A50-535E-4A0C-8012-9FB088FB39B9@integrateddevcorp.com>


On Sep 17, 2009, at 7:29 PM, Slava Yanson wrote:

> It just doesn't want to go past PASV. Spent past 3 hours trying to  
> figure this one out. Any help is appreciated.

Since PASV mode goes to higher ports (> 1023), is it possible that a  
firewall's at the server getting in the way?

http://slacksite.com/other/ftp.html#passive

It looks like it's just timing out.

S




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090917/c8f449e9/attachment.htm 

From urbansoot at gmail.com  Thu Sep 17 20:11:00 2009
From: urbansoot at gmail.com (Slava Yanson)
Date: Thu, 17 Sep 2009 17:11:00 -0700
Subject: [Twisted-Python] Twisted FTP server fails on PASV
In-Reply-To: <ECF82A50-535E-4A0C-8012-9FB088FB39B9@integrateddevcorp.com>
References: <e5b8dac40909171629k72bb5d76j7801c1cbd7450838@mail.gmail.com> 
	<ECF82A50-535E-4A0C-8012-9FB088FB39B9@integrateddevcorp.com>
Message-ID: <e5b8dac40909171711m502e0a63p76bf74763e9bfaef@mail.gmail.com>

Here is part of ipconfig file:

-A RH-Firewall-1-INPUT -m tcp -p tcp --dport 65000:65200 -j ACCEPT
-A RH-Firewall-1-INPUT -m udp -p udp --dport 65000:65200 -j ACCEPT

And I just tried setting passivePortRange to that range and it still didn't
work. netstat showed that port listening and it still didn't work even
though vsftpd on same machine works fine with those ports. Just checked and
I can login from same machine so it is firewall issue... Anyone has any
ideas on how to fix that?

Thank you,

Slava Yanson
Positive Blue, LLC

web: www.positiveblue.com
tel: (323) 963-4787
aim/yahoo/skype: urbansoot

http://www.LinuxDecals.com/


On Thu, Sep 17, 2009 at 4:39 PM, Steve Steiner (listsin) <
listsin at integrateddevcorp.com> wrote:

>
> On Sep 17, 2009, at 7:29 PM, Slava Yanson wrote:
>
> It just doesn't want to go past PASV. Spent past 3 hours trying to figure
> this one out. Any help is appreciated.
>
>
> Since PASV mode goes to higher ports (> 1023), is it possible that a
> firewall's at the server getting in the way?
>
> http://slacksite.com/other/ftp.html#passive
>
> It looks like it's just timing out.
>
> S
>
>
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090917/7fc667d2/attachment.htm 

From stephen at thorne.id.au  Thu Sep 17 20:30:03 2009
From: stephen at thorne.id.au (Stephen Thorne)
Date: Fri, 18 Sep 2009 10:30:03 +1000
Subject: [Twisted-Python] Twisted FTP server fails on PASV
In-Reply-To: <e5b8dac40909171711m502e0a63p76bf74763e9bfaef@mail.gmail.com>
References: <e5b8dac40909171629k72bb5d76j7801c1cbd7450838@mail.gmail.com>
	<ECF82A50-535E-4A0C-8012-9FB088FB39B9@integrateddevcorp.com>
	<e5b8dac40909171711m502e0a63p76bf74763e9bfaef@mail.gmail.com>
Message-ID: <20090918003003.GG7151@thorne.id.au>

On 2009-09-17, Slava Yanson wrote:
> Here is part of ipconfig file:
> 
> -A RH-Firewall-1-INPUT -m tcp -p tcp --dport 65000:65200 -j ACCEPT
> -A RH-Firewall-1-INPUT -m udp -p udp --dport 65000:65200 -j ACCEPT
> 
> And I just tried setting passivePortRange to that range and it still didn't
> work. netstat showed that port listening and it still didn't work even
> though vsftpd on same machine works fine with those ports. Just checked and
> I can login from same machine so it is firewall issue... Anyone has any
> ideas on how to fix that?

Yes, the best thing to do is to add a -j LOG rule to your firewall and
then look at /var/log/kernel in order to see what packets are being
blocked.

I would combine that approach with tcpdump to see what you can do to
resolve this.

-- 
Regards,
Stephen Thorne
Development Engineer
NetBox Blue - 1300 737 060


From ltaylor.volks at gmail.com  Thu Sep 17 21:06:06 2009
From: ltaylor.volks at gmail.com (Lucas Taylor)
Date: Thu, 17 Sep 2009 20:06:06 -0500
Subject: [Twisted-Python] Seeking advice on use of Perspective Broker
In-Reply-To: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>
References: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>
Message-ID: <4AB2DCFE.6060306@gmail.com>

On 9/17/09 1:31 PM, Arthur Pemberton wrote:
>  2) How easy it to package Twisted for distribution on Windows system
> (which would be inevitable)

You can use py2exe to distribute your application as one or more
executables. It is also possible to create NT services using the
win32all package.

Lucas Taylor


From pemboa at gmail.com  Fri Sep 18 03:57:25 2009
From: pemboa at gmail.com (Arthur Pemberton)
Date: Fri, 18 Sep 2009 02:57:25 -0500
Subject: [Twisted-Python] Seeking advice on use of Perspective Broker
In-Reply-To: <4AB2DCFE.6060306@gmail.com>
References: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>
	<4AB2DCFE.6060306@gmail.com>
Message-ID: <16de708d0909180057t3a1b4237y8877818aebc065d2@mail.gmail.com>

On Thu, Sep 17, 2009 at 8:06 PM, Lucas Taylor <ltaylor.volks at gmail.com> wrote:
> On 9/17/09 1:31 PM, Arthur Pemberton wrote:
>> ?2) How easy it to package Twisted for distribution on Windows system
>> (which would be inevitable)
>
> You can use py2exe to distribute your application as one or more
> executables. It is also possible to create NT services using the
> win32all package.
>


I'm glad you brought that up, does py2exe work well with Twisted?

-- 
Fedora 10
(www.pembo13.com)


From lvh at laurensvh.be  Fri Sep 18 08:50:06 2009
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Fri, 18 Sep 2009 14:50:06 +0200
Subject: [Twisted-Python] Reviewer who understands basic numeric algorithms
	wanted
Message-ID: <cedc0c090909180550l71a16866mbd383aa5d6ca19ad@mail.gmail.com>

Hello :-)



twisted.positioning has just (read: last night) grown a new module,
called util, which has two functions I needed for statistical
analysis: the error function (erf) and the inverse normal cumulative
distribution function (Phi).

As most of you on this mailing list probably know, code headed for
trunk needs to be reviewed. The reason I need to ask for this
specifically is because the reviewer does not need to know anything
about Twisted, but does need some experience with how numerical
algorithms work -- and that's about the opposite of most Twisted
reviewers ;-)

The default is to attempt to use scipy's implementation (which is
hopefully faster), but otherwise fall back to a pure Python
implementation (which from my tests is still way more than fast
enough).

The implementations rely on Chebyshev polynomial interpolation. The
error function is a pretty simple one, the inverse normal cdf is
slightly harder (three parts: the center is a simple rational, the
'tails' are rationals expressed in a linearizing parameter). There are
two things that make this easier:

1. Other people have done similar things, and said coefficients can be
looked up in other places (I'm not the first person to do the math --
I'm just the first person to implement both in Python with a shared
Horner scheme evaluator, apparently)
2. It can be shown to be accurate by comparing the results at random
points with scipy's reference implementation if we do it for 10**5 or
10**6 points or so -- there's already an automated unit test that does
it for a much smaller number

If you're not 100% sure you're up to it from just seeing the code, I
can also talk you through it and show how I got there :-)

It might be more useful to create a separate ticket for this piece of
code for reviewing purposes, if anyone else feels that's the case I'll
make the ticket.

People who are interested: you can reply to this mail, mail me
personally, or contact me on freenode (nick: lvh).

(Oh, and before someone tells me I'm reinventing the wheel: yes, but
not really -- the only commonly available python implementation is
Scipy, that's *already* used as the default, and we do need something
in case of no scipy (adding a dependency just because of one function
on all of scipy is not exactly good either) and the only other simpler
alternative would be a giant LUT with linear interpolation which would
have been *much* worse near the edges of the interval of invncdf,
which also happen to be the *interesting* bits of that function...)

tia
lvh


From lvh at laurensvh.be  Fri Sep 18 10:01:24 2009
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Fri, 18 Sep 2009 16:01:24 +0200
Subject: [Twisted-Python] Reviewer who understands basic numeric
	algorithms wanted
In-Reply-To: <cedc0c090909180550l71a16866mbd383aa5d6ca19ad@mail.gmail.com>
References: <cedc0c090909180550l71a16866mbd383aa5d6ca19ad@mail.gmail.com>
Message-ID: <cedc0c090909180701g57aa24fdl9ab15380fb59f69a@mail.gmail.com>

Oh, and I might drop the Scipy implementation entirely (except for
unit testing as a reference implementation). Turns out that the scipy
version, while probably being more precise (precise way beyond the
point of being interesting for most uses), is a good deal slower than
approximation, by a factor of just over 21.

http://paste.pocoo.org/show/140351/

tia
lvh


From gabriel.rossetti at arimaz.com  Fri Sep 18 10:23:47 2009
From: gabriel.rossetti at arimaz.com (Gabriel Rossetti)
Date: Fri, 18 Sep 2009 16:23:47 +0200
Subject: [Twisted-Python] What is the difference in between reactor.running
	and reactor._stopped
Message-ID: <4AB397F3.8090101@arimaz.com>

Hello,

I tried using reactor.running for a test, to not try to stop the reactor 
if it's already stopped, but it doesn't work. If I use reactor._stopped 
instead, it works. I know I'm not supposed to access it sonce it is 
prefixed by the underscore, so my question is what is the difference in 
between reactor.running and reactor._stopped, and why does 
reactor.running not work as I expect (not reactor.running == 
reactor._stopped)?

Thank you, Gabriel


From dripton at ripton.net  Fri Sep 18 10:52:22 2009
From: dripton at ripton.net (David Ripton)
Date: Fri, 18 Sep 2009 07:52:22 -0700
Subject: [Twisted-Python] Seeking advice on use of Perspective Broker
In-Reply-To: <16de708d0909171539q1f2c2483vbbacd1a479c4655b@mail.gmail.com>
References: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>
	<4AB28977.2090405@gladserv.com>
	<16de708d0909171539q1f2c2483vbbacd1a479c4655b@mail.gmail.com>
Message-ID: <20090918145222.GA21764@vidar.dreamhost.com>

On 2009.09.17 17:39:17 -0500, Arthur Pemberton wrote:
> On Thu, Sep 17, 2009 at 2:09 PM, Brett Sheffield <brett at gladserv.com> wrote:
> > Arthur Pemberton wrote:
> >> ?1) Is the Twisted Matrix book published by Orielly relevant ie. updated enough?
> >
> > Yes. ?I just read it and it has excellent Perspective Broker examples in
> > chapters 5 & 6 which got me to a flying start recently. ? Obviously
> > you'll want to read the online docs too.
> >
> > It doesn't cover twisted.web and nevoew very well because the API was
> > still shifting about then, but the rest seems pretty good. ?It was
> > published in 2006.
> 
> I know it was published in 2006, but 3 years can be a long time in the
> computing industry, but you've convinced me that its worth a ready. Is

PB has changed very little lately.  My PB-using project started in 2003.
The last time I remember changing something to sync with a Twisted
change was in late 2003, when I switched my from using the old cred API
to the new cred API.  Since then it's been 100% boringly
backward-compatible.  If you want stable documentation and the most
examples and a very strong likelihood that the API won't change
underneath you, PB is your best Twisted RPC option.

(Other Twisted RPC options include AMP, Foolscap, and txprotobuf.  I
recommend learning PB first because it has the most examples and docs so
it's the easiest to learn.  If you end up using one of the others to get
better security or portability or whatever, it'll be pretty easy to
learn because the Twisted fundamentals carry over.)

-- 
David Ripton    dripton at ripton.net


From markv at lumierevfx.com  Fri Sep 18 10:56:23 2009
From: markv at lumierevfx.com (Mark Visser)
Date: Fri, 18 Sep 2009 10:56:23 -0400
Subject: [Twisted-Python] Seeking advice on use of Perspective Broker
In-Reply-To: <20090918145222.GA21764@vidar.dreamhost.com>
References: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>	<4AB28977.2090405@gladserv.com>	<16de708d0909171539q1f2c2483vbbacd1a479c4655b@mail.gmail.com>
	<20090918145222.GA21764@vidar.dreamhost.com>
Message-ID: <4AB39F97.1020104@lumierevfx.com>

Another happy PB user here, and I used the O'Reilly book.

In fact, PB has changed so little that it's still using old-style 
classes. That bit us in the ass a couple times (no super!).

David Ripton wrote:
> On 2009.09.17 17:39:17 -0500, Arthur Pemberton wrote:
>   
>> On Thu, Sep 17, 2009 at 2:09 PM, Brett Sheffield <brett at gladserv.com> wrote:
>>     
>>> Arthur Pemberton wrote:
>>>       
>>>>  1) Is the Twisted Matrix book published by Orielly relevant ie. updated enough?
>>>>         
>>> Yes.  I just read it and it has excellent Perspective Broker examples in
>>> chapters 5 & 6 which got me to a flying start recently.   Obviously
>>> you'll want to read the online docs too.
>>>
>>> It doesn't cover twisted.web and nevoew very well because the API was
>>> still shifting about then, but the rest seems pretty good.  It was
>>> published in 2006.
>>>       
>> I know it was published in 2006, but 3 years can be a long time in the
>> computing industry, but you've convinced me that its worth a ready. Is
>>     
>
> PB has changed very little lately.  My PB-using project started in 2003.
> The last time I remember changing something to sync with a Twisted
> change was in late 2003, when I switched my from using the old cred API
> to the new cred API.  Since then it's been 100% boringly
> backward-compatible.  If you want stable documentation and the most
> examples and a very strong likelihood that the API won't change
> underneath you, PB is your best Twisted RPC option.
>
> (Other Twisted RPC options include AMP, Foolscap, and txprotobuf.  I
> recommend learning PB first because it has the most examples and docs so
> it's the easiest to learn.  If you end up using one of the others to get
> better security or portability or whatever, it'll be pretty easy to
> learn because the Twisted fundamentals carry over.)
>
>   


-- 
Mark Visser, Software Director
Lumi?re VFX
Email: markv at lumierevfx.com
Phone: +1-514-316-1080 x3030



From gx1986 at mail.ustc.edu.cn  Fri Sep 18 11:48:36 2009
From: gx1986 at mail.ustc.edu.cn (gx1986 at mail.ustc.edu.cn)
Date: Fri, 18 Sep 2009 23:48:36 +0800 (CST)
Subject: [Twisted-Python] hang when using twisted
Message-ID: <8698335.3591253288916465.JavaMail.coremail@mailweb>



I met some problem when writing twisted.

The code is

1 #! /usr/bin/python 
2 # fileName remoteCopyFile 
3 from twisted.internet import protocol , reactor 
4 import os 
5 import updateCurrentIPList 
6 import time 
7
8 PORT = 7777 
9
10 class TSClientProtocol(protocol.Protocol): 
11     def sendData(self): 
12         path = '/usr/local/'+self.factory.filename 
13         if os.path.isfile(path): 
14             f = open(path,'rb') 
15             data = f.read() 
16             f.close() 
17             self.transport.write("filename="+self.factory.filename+'=') 
18             self.transport.write(data) 
19             self.transport.write('EOF') 
20         else: 
21             self.transport.loseConnection() 
22
23     def connectionMade(self): 
24             self.sendData()
25             
26 
27     def dataReceived(self,data): 
28             if data == 'EOF': 
29             print 'finished'	
30             self.transport.loseConnection()	
31
32
33 class TSClientFactory(protocol.ClientFactory): 
34     def __init__(self,filename): 
35            self.filename = filename 
36            protocol = TSClientProtocol 
37            clientConnectionLost = clientConnectionFailed = lambda self,connector,reason:reactor.stop() 
38 
39     def remoteCopyFile(HOST,filename = '4'): 
40            reactor.connectTCP(HOST,PORT,TSClientFactory(filename)) 
41            reactor.run(installSignalHandlers=0) 
42            updateCurrentIPList.updateCurrentIPList(HOST) 
43            reactor.connectTCP(HOST,PORT,TSClientFactory('currentIP')) 
44            reactor.run(installSignalHandlers=0) 
45            
46
47 if __name__ == '__main__': 
48     remoteCopyFile('127.0.0.1')


The program print two "finished",then hang.
If i delete the line 40 and 41  or delete the line 43 and 44 ,the program become good.
whether can't we use two "reactor.run()" in one function? why?
Thank you! 


From exarkun at twistedmatrix.com  Fri Sep 18 12:05:57 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 18 Sep 2009 16:05:57 -0000
Subject: [Twisted-Python] hang when using twisted
In-Reply-To: <8698335.3591253288916465.JavaMail.coremail@mailweb>
References: <8698335.3591253288916465.JavaMail.coremail@mailweb>
Message-ID: <20090918160557.8482.1900050988.divmod.xquotient.51@localhost.localdomain>

On 03:48 pm, gx1986 at mail.ustc.edu.cn wrote:
>
>
>I met some problem when writing twisted.
>
>The code is
>
>[snip]
>38
>39     def remoteCopyFile(HOST,filename = '4'):
>40            reactor.connectTCP(HOST,PORT,TSClientFactory(filename))
>41            reactor.run(installSignalHandlers=0)
>42            updateCurrentIPList.updateCurrentIPList(HOST)
>43 
>reactor.connectTCP(HOST,PORT,TSClientFactory('currentIP'))
>44            reactor.run(installSignalHandlers=0)
>45
>[snip]
>
>The program print two "finished",then hang.
>If i delete the line 40 and 41  or delete the line 43 and 44 ,the 
>program become good.
>whether can't we use two "reactor.run()" in one function? why?
>Thank you!

Yes, you cannot call reactor.run() twice (anywhere in the same program - 
whether within one function or otherwise).  This is an minor 
implementation limitation which could fairly easily be lifted if anyone 
really wanted to.  However, there's not a lot of reason to bother. 
Instead of stopping the reactor after your first task and then starting 
it for your second task, just start your second task when the first one 
is done - don't stop the reactor and then start it again.  When you're 
done with everything and ready to exit, that's when you should stop the 
reactor.

Jean-Paul


From exarkun at twistedmatrix.com  Fri Sep 18 12:07:40 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 18 Sep 2009 16:07:40 -0000
Subject: [Twisted-Python] Reviewer who understands basic
	numeric	algorithms wanted
In-Reply-To: <cedc0c090909180550l71a16866mbd383aa5d6ca19ad@mail.gmail.com>
References: <cedc0c090909180550l71a16866mbd383aa5d6ca19ad@mail.gmail.com>
Message-ID: <20090918160740.8482.2117785321.divmod.xquotient.54@localhost.localdomain>

On 12:50 pm, lvh at laurensvh.be wrote:
>Hello :-)
>
>twisted.positioning has just (read: last night) grown a new module,
>called util, which has two functions I needed for statistical
>analysis: the error function (erf) and the inverse normal cumulative
>distribution function (Phi).

Please think up a better name than "util". :)  How about "statmath" or 
"errorstats" or something along those lines?

Jean-Paul


From lvh at laurensvh.be  Fri Sep 18 12:17:00 2009
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Fri, 18 Sep 2009 18:17:00 +0200
Subject: [Twisted-Python] Reviewer who understands basic numeric
	algorithms wanted
In-Reply-To: <20090918160740.8482.2117785321.divmod.xquotient.54@localhost.localdomain>
References: <cedc0c090909180550l71a16866mbd383aa5d6ca19ad@mail.gmail.com>
	<20090918160740.8482.2117785321.divmod.xquotient.54@localhost.localdomain>
Message-ID: <cedc0c090909180917v7952c7a5rcb77880c16492ff1@mail.gmail.com>

On Fri, Sep 18, 2009 at 6:07 PM,  <exarkun at twistedmatrix.com> wrote:
> On 12:50 pm, lvh at laurensvh.be wrote:
>>Hello :-)

> Please think up a better name than "util". :) ?How about "statmath" or
> "errorstats" or something along those lines?

This sounds like a good idea. While we're on that topic, regarding
package location: perhaps it should be in twisted.util, not
twisted.positioning? It's not positioning-specific, I just happen to
be the first guy that wants it.


> Jean-Paul
Laurens


From exarkun at twistedmatrix.com  Fri Sep 18 12:21:17 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 18 Sep 2009 16:21:17 -0000
Subject: [Twisted-Python] What is the difference in
	between	reactor.running and reactor._stopped
In-Reply-To: <4AB397F3.8090101@arimaz.com>
References: <4AB397F3.8090101@arimaz.com>
Message-ID: <20090918162117.8482.1774374040.divmod.xquotient.59@localhost.localdomain>

On 02:23 pm, gabriel.rossetti at arimaz.com wrote:
>Hello,
>
>I tried using reactor.running for a test, to not try to stop the 
>reactor
>if it's already stopped, but it doesn't work. If I use reactor._stopped
>instead, it works. I know I'm not supposed to access it sonce it is
>prefixed by the underscore, so my question is what is the difference in
>between reactor.running and reactor._stopped, and why does
>reactor.running not work as I expect (not reactor.running ==
>reactor._stopped)?

reactor.running is really only provided for backwards compatibility.  It 
was never intended to be public.  It has bizarre semantics which you can 
read about in its unit tests:

http://twistedmatrix.com/trac/browser/trunk/twisted/internet/test/test_core.py

What you would almost certainly rather do is change your code not to 
rely on it.  Why do you find yourself needing to ask the reactor if you 
have previously asked it to stop?  Generally, your code should be able 
to keep track of that itself.

Jean-Paul


From exarkun at twistedmatrix.com  Fri Sep 18 12:25:26 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 18 Sep 2009 16:25:26 -0000
Subject: [Twisted-Python] Reviewer who understands basic
	numeric	algorithms wanted
In-Reply-To: <cedc0c090909180917v7952c7a5rcb77880c16492ff1@mail.gmail.com>
References: <cedc0c090909180550l71a16866mbd383aa5d6ca19ad@mail.gmail.com>
	<20090918160740.8482.2117785321.divmod.xquotient.54@localhost.localdomain>
	<cedc0c090909180917v7952c7a5rcb77880c16492ff1@mail.gmail.com>
Message-ID: <20090918162526.8482.213864905.divmod.xquotient.64@localhost.localdomain>

On 04:17 pm, lvh at laurensvh.be wrote:
>On Fri, Sep 18, 2009 at 6:07 PM,  <exarkun at twistedmatrix.com> wrote:
>>On 12:50 pm, lvh at laurensvh.be wrote:
>>>Hello :-)
>
>>Please think up a better name than "util". :) ?How about "statmath" or
>>"errorstats" or something along those lines?
>
>This sounds like a good idea. While we're on that topic, regarding
>package location: perhaps it should be in twisted.util, not
>twisted.positioning? It's not positioning-specific, I just happen to
>be the first guy that wants it.

Actually, now that you mention it, how about also making it private in 
twisted.positioning? :)

If it turns out Twisted Web or Twisted Names or something eventually 
needs this functionality, then we should think about moving it into 
twisted.python (I think that's what you meant when you said 
twisted.util).  Until then, though, there's not much reason to expose 
what should just be an implementation detail as a new public interface.

Twisted is not a stats package. :)

Jean-Paul


From david.yoakley at gmail.com  Fri Sep 18 13:01:11 2009
From: david.yoakley at gmail.com (David Yoakley)
Date: Fri, 18 Sep 2009 12:01:11 -0500
Subject: [Twisted-Python] Using reactor with multiple processes
Message-ID: <90be4d570909181001r36abb6a4s4489644b10e042b1@mail.gmail.com>

I promised a follow-up on what we found so here it is.  As Phil
indicated prior and is now clear to us, twisted is not designed to be
fork safe.  But as I considered patching it to set up all state when
the reactor is started then I began to worry about whether I was
really going to be happy with using twisted in a python multiprocess
architecture since its ultimately not twisted aware and thus there are
probably going to be blocking issues with using any of cool
multiprocess abstractions.  I think we were just going in the wrong
direction, attracted by a shiny new thing.  To make a long story
short, we think making twisted work with python multiprocess package
is probably a dead end.  The abstractions are nice and maybe the right
direction but under the hood its just not going to work.

Instead, we implemented a simple framework using twisted
PerspectiveBroker (pb) where we spawn processes with python
subprocess.Popen and use PB remote calls to manage the processes.  Its
now working well and is very simple.

There are other aspects we didn't think about that are actually
working out better for us with this PB based framework.  Mostly, our
child processes are much less coupled to the parent; they are able to
be launched on their own from a command line for unit tests and such
but each child is an independent server (implementing
pb.PBServerFactory).  They can be launched from our main process
(implementing pb.PBClientFactory) in production and any number of
other ways during development and test.  Similarly, we could allocate
the children even to separate machines if we wanted to since their
connections are via tcp.  The last thing is more subtle.  We are now
not tempted to use tighter synchronization (more coupling) such as
shared memory or other mechanisms offered by python multiprocess in
cases where its not strictly necessary.   The processes all share
configuration (such as child tcp port assignments) by having the
parent send on the command line,  an absolute path to a common config
file when the process is launched and after that the children carry on
pretty much independently, occasionally collaborating with each other
and with the parent through remote calls as needed.  When its time for
the application to go away, the parent sends each child a stop command
which blocks the parents shutdown completion (in the sense that its
synchronous and the parent waits on the response, but NOT in the sense
that any other logical twisted threads on the parent get blocked)
until the child responds or times out.

Cheers,
David Yoakley


From gx1986 at mail.ustc.edu.cn  Fri Sep 18 13:02:38 2009
From: gx1986 at mail.ustc.edu.cn (gx1986 at mail.ustc.edu.cn)
Date: Sat, 19 Sep 2009 01:02:38 +0800 (CST)
Subject: [Twisted-Python] What is the difference in
	between	reactor.running and reactor._stopped
In-Reply-To: <20090918162117.8482.1774374040.divmod.xquotient.59@localhost.localdomain>
References: <20090918162117.8482.1774374040.divmod.xquotient.59@localhost.localdomain>
	<4AB397F3.8090101@arimaz.com>
Message-ID: <16170408.5481253293358726.JavaMail.coremail@mailweb>


Thank you for your instruct! I am a new people in twisted,so I still have another problem.
If i transfer a lot of data(a big file),program will hang when transmission finished.
If transfering a few words ,program will give me another chance to input.
what's the reason about this?

> -----Original E-mail-----
> From: exarkun at twistedmatrix.com
> Sent Time: 2009-9-19 0:21:17
> To: "Twisted general discussion" <twisted-python at twistedmatrix.com>
> Cc: 
> Subject: Re: [Twisted-Python] What is the difference in
	between	reactor.running and reactor._stopped
> 
> On 02:23 pm, gabriel.rossetti at arimaz.com wrote:
> >Hello,
> >
> >I tried using reactor.running for a test, to not try to stop the 
> >reactor
> >if it's already stopped, but it doesn't work. If I use reactor._stopped
> >instead, it works. I know I'm not supposed to access it sonce it is
> >prefixed by the underscore, so my question is what is the difference in
> >between reactor.running and reactor._stopped, and why does
> >reactor.running not work as I expect (not reactor.running ==
> >reactor._stopped)?
> 
> reactor.running is really only provided for backwards compatibility.  It 
> was never intended to be public.  It has bizarre semantics which you can 
> read about in its unit tests:
> 
> http://twistedmatrix.com/trac/browser/trunk/twisted/internet/test/test_core.py
> 
> What you would almost certainly rather do is change your code not to 
> rely on it.  Why do you find yourself needing to ask the reactor if you 
> have previously asked it to stop?  Generally, your code should be able 
> to keep track of that itself.
> 
> Jean-Paul
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From psanchez at colcan.ca  Fri Sep 18 13:27:32 2009
From: psanchez at colcan.ca (Pedro I. Sanchez)
Date: Fri, 18 Sep 2009 13:27:32 -0400
Subject: [Twisted-Python] An XMPP client with SSL support
In-Reply-To: <20090917203600.GA41744@ik.nu>
References: <1219872700.10045.29.camel@pcard0ze.ca.nortel.com>	<1253198023.5546.9.camel@dwaal>
	<20090917203600.GA41744@ik.nu>
Message-ID: <4AB3C304.2040903@colcan.ca>

Ralph Meijer wrote:
> On Thu, Sep 17, 2009 at 04:33:43PM +0200, Ralph Meijer wrote:
>> On Wed, 2008-08-27 at 17:31 -0400, Pedro Sanchez wrote:
> 
> Oh, ahum. That's quite the latency...
> 
Thanks for the answer nevertheless. I'm still around :-)

-- 
Pedro


From esteve at sindominio.net  Fri Sep 18 15:10:12 2009
From: esteve at sindominio.net (Esteve Fernandez)
Date: Fri, 18 Sep 2009 21:10:12 +0200
Subject: [Twisted-Python] new contributors
In-Reply-To: <d9047f780909111910t35e44d10p8e801d54b772e74e@mail.gmail.com>
References: <d9047f780909101735q31a1231ib82c092802da227@mail.gmail.com>
	<20090911143505.7485.1574338111.divmod.xquotient.644@localhost.localdomain>
	<d9047f780909111910t35e44d10p8e801d54b772e74e@mail.gmail.com>
Message-ID: <200909182110.12302.esteve@sindominio.net>

Hi

sorry for the delay

On Saturday 12 September 2009 04:10:24 Glyph Lefkowitz wrote:
> > I also offered commit access to Esteve recently.  Esteve, want to send
> > me your key, too?
>
> https://launchpad.net/~esteve/+sshkeys

Wow, thanks! However, if I'm sincere, I can't promise I'll always be able 
dedicate time to Twisted (i.e. reply to the mailing lists, review tickets, 
fix bugs, etc.). If that's ok, I'll gladly accept the honor :-)

Anyway, I just wanted to be honest.

Cheers.



From exarkun at twistedmatrix.com  Fri Sep 18 15:10:26 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 18 Sep 2009 19:10:26 -0000
Subject: [Twisted-Python] What is the difference in
	between	reactor.running and reactor._stopped
In-Reply-To: <16170408.5481253293358726.JavaMail.coremail@mailweb>
References: <20090918162117.8482.1774374040.divmod.xquotient.59@localhost.localdomain>
	<4AB397F3.8090101@arimaz.com>
	<16170408.5481253293358726.JavaMail.coremail@mailweb>
Message-ID: <20090918191026.16892.1173356605.divmod.xquotient.2@localhost.localdomain>

On 05:02 pm, gx1986 at mail.ustc.edu.cn wrote:
>
>Thank you for your instruct! I am a new people in twisted,so I still 
>have another problem.
>If i transfer a lot of data(a big file),program will hang when 
>transmission finished.
>If transfering a few words ,program will give me another chance to 
>input.
>what's the reason about this?

Hi,

I don't quite understand your message.  I'm not sure how it relates to 
Gabriel's question or my answer to it.  Perhaps you could start a new 
thread and provide more details about your program, what it does, how 
you expect it to behave, and how it is actually behaving?

Jean-Paul


From dripton at ripton.net  Fri Sep 18 15:27:22 2009
From: dripton at ripton.net (David Ripton)
Date: Fri, 18 Sep 2009 12:27:22 -0700
Subject: [Twisted-Python] Using reactor with multiple processes
In-Reply-To: <90be4d570909181001r36abb6a4s4489644b10e042b1@mail.gmail.com>
References: <90be4d570909181001r36abb6a4s4489644b10e042b1@mail.gmail.com>
Message-ID: <20090918192722.GA2487@vidar.dreamhost.com>

On 2009.09.18 12:01:11 -0500, David Yoakley wrote:
> Instead, we implemented a simple framework using twisted
> PerspectiveBroker (pb) where we spawn processes with python
> subprocess.Popen and use PB remote calls to manage the processes.  Its
> now working well and is very simple.

Sounds great.  Thanks for the update.

I just want to mention that I mistrust the subprocess module because of
lots of personal experience with http://bugs.python.org/issue1731717 .
If you see weird intermittent failures to spawn processes, consider
switching to reactor.spawnProcess.  (IMX such failures are common with
Python 2.4, less common with Python 2.5 or 2.6.  So if you're not
shackled to^W^W using RHEL or some other archaic piece of^W^W^W
Enterprise-friendly distribution, you can probably safely ignore this
paragraph.)

-- 
David Ripton    dripton at ripton.net


From gx1986 at mail.ustc.edu.cn  Fri Sep 18 22:33:07 2009
From: gx1986 at mail.ustc.edu.cn (gx1986 at mail.ustc.edu.cn)
Date: Sat, 19 Sep 2009 10:33:07 +0800 (CST)
Subject: [Twisted-Python] What is the difference in
	between	reactor.running and reactor._stopped
In-Reply-To: <20090918191026.16892.1173356605.divmod.xquotient.2@localhost.localdomain>
References: <20090918191026.16892.1173356605.divmod.xquotient.2@localhost.localdomain>
	<20090918162117.8482.1774374040.divmod.xquotient.59@localhost.localdomain>
	<4AB397F3.8090101@arimaz.com>
	<16170408.5481253293358726.JavaMail.coremail@mailweb>
Message-ID: <24928047.13991253327587570.JavaMail.coremail@mailweb>

Ok,let me express what i want to do clearly.
I use twisted to transfer a file.What i do is to open a file in client,then transfer it by TCP.Server received it and write it into a file.
The filename in "reactor.connectTCP(HOST,PORT,TSClientFactory(filename))" is  what i want to transfer.
If i want to transfer two file,what i do is to write "reactor.connectTCP(HOST,PORT,TSClientFactory(filename))  reactor.run(installSignalHandlers=0)" twice.But this will be error which you have told me. Now how could i to solve this problem?

Meanwhile,if transfered file is big,the server's "dataReceived" function will run several times to receive all the data.If i transfer all of files one time,using "reactor.connectTCP(HOST,PORT,TSClientFactory(filenameList))". It will be hard to distinguish these different files,because "dataReceived" just receive.


> -----Original E-mail-----
> From: exarkun at twistedmatrix.com
> Sent Time: 2009-9-19 3:10:26
> To: "Twisted general discussion" <twisted-python at twistedmatrix.com>
> Cc: 
> Subject: Re: [Twisted-Python] What is the difference in
	between	reactor.running and reactor._stopped
> 
> On 05:02 pm, gx1986 at mail.ustc.edu.cn wrote:
> >
> >Thank you for your instruct! I am a new people in twisted,so I still 
> >have another problem.
> >If i transfer a lot of data(a big file),program will hang when 
> >transmission finished.
> >If transfering a few words ,program will give me another chance to 
> >input.
> >what's the reason about this?
> 
> Hi,
> 
> I don't quite understand your message.  I'm not sure how it relates to 
> Gabriel's question or my answer to it.  Perhaps you could start a new 
> thread and provide more details about your program, what it does, how 
> you expect it to behave, and how it is actually behaving?
> 
> Jean-Paul
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From gx1986 at mail.ustc.edu.cn  Fri Sep 18 22:50:58 2009
From: gx1986 at mail.ustc.edu.cn (gx1986 at mail.ustc.edu.cn)
Date: Sat, 19 Sep 2009 10:50:58 +0800 (CST)
Subject: [Twisted-Python] What is the difference in
	between	reactor.running and reactor._stopped
In-Reply-To: <20090918191026.16892.1173356605.divmod.xquotient.2@localhost.localdomain>
References: <20090918191026.16892.1173356605.divmod.xquotient.2@localhost.localdomain>
	<20090918162117.8482.1774374040.divmod.xquotient.59@localhost.localdomain>
	<4AB397F3.8090101@arimaz.com>
	<16170408.5481253293358726.JavaMail.coremail@mailweb>
Message-ID: <27815976.14891253328658108.JavaMail.coremail@mailweb>

Ok,let me express what i want to do clearly.
I use twisted to transfer a file.What i do is to open a file in client,then transfer it by TCP.Server received it and write it into a file.
The filename in "reactor.connectTCP(HOST,PORT,TSClientFactory(filename))" is  what i want to transfer.
If i want to transfer two file,what i do is to write "reactor.connectTCP(HOST,PORT,TSClientFactory(filename))  reactor.run(installSignalHandlers=0)" twice.But this will be error which you have told me. Now how could i to solve this problem?

Meanwhile,if transfered file is big,the server's "dataReceived" function will  be called several times to receive all the data.If i transfer all of files one time,using "reactor.connectTCP(HOST,PORT,TSClientFactory(filenameList))". It will be hard to distinguish these different files in server,because "dataReceived" just receive.Could you have some way in twisted to notice server the end of previous file and to receive a new file by recalling "dataReceived" function , instead of receiving all the data together.



> -----Original E-mail-----
> From: exarkun at twistedmatrix.com
> Sent Time: 2009-9-19 3:10:26
> To: "Twisted general discussion" <twisted-python at twistedmatrix.com>
> Cc: 
> Subject: Re: [Twisted-Python] What is the difference in
	between	reactor.running and reactor._stopped
> 
> On 05:02 pm, gx1986 at mail.ustc.edu.cn wrote:
> >
> >Thank you for your instruct! I am a new people in twisted,so I still 
> >have another problem.
> >If i transfer a lot of data(a big file),program will hang when 
> >transmission finished.
> >If transfering a few words ,program will give me another chance to 
> >input.
> >what's the reason about this?
> 
> Hi,
> 
> I don't quite understand your message.  I'm not sure how it relates to 
> Gabriel's question or my answer to it.  Perhaps you could start a new 
> thread and provide more details about your program, what it does, how 
> you expect it to behave, and how it is actually behaving?
> 
> Jean-Paul
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From exarkun at twistedmatrix.com  Sat Sep 19 12:06:37 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sat, 19 Sep 2009 16:06:37 -0000
Subject: [Twisted-Python] What is the difference in
	between	reactor.running and reactor._stopped
In-Reply-To: <24928047.13991253327587570.JavaMail.coremail@mailweb>
References: <20090918191026.16892.1173356605.divmod.xquotient.2@localhost.localdomain>
	<20090918162117.8482.1774374040.divmod.xquotient.59@localhost.localdomain>
	<4AB397F3.8090101@arimaz.com>
	<16170408.5481253293358726.JavaMail.coremail@mailweb>
	<24928047.13991253327587570.JavaMail.coremail@mailweb>
Message-ID: <20090919160637.18975.1382831204.divmod.xquotient.18@localhost.localdomain>

On 02:33 am, gx1986 at mail.ustc.edu.cn wrote:
>Ok,let me express what i want to do clearly.
>I use twisted to transfer a file.What i do is to open a file in 
>client,then transfer it by TCP.Server received it and write it into a 
>file.
>The filename in 
>"reactor.connectTCP(HOST,PORT,TSClientFactory(filename))" is  what i 
>want to transfer.
>If i want to transfer two file,what i do is to write 
>"reactor.connectTCP(HOST,PORT,TSClientFactory(filename)) 
>reactor.run(installSignalHandlers=0)" twice.But this will be error 
>which you have told me. Now how could i to solve this problem?

You have to solve it by only calling reactor.run once.
>
>Meanwhile,if transfered file is big,the server's "dataReceived" 
>function will run several times to receive all the data.If i transfer 
>all of files one time,using 
>"reactor.connectTCP(HOST,PORT,TSClientFactory(filenameList))". It will 
>be hard to distinguish these different files,because "dataReceived" 
>just receive.

You have to use a protocol which lets you distinguish between different 
files.  I'm not sure what "TS" is so I can't make any specific 
suggestions.

Another possibility is to keep using multiple connections.  You can call 
reactor.connectTCP as many times as you want.  It's only reactor.run 
that can only be called once.

Jean-Paul


From gx1986 at mail.ustc.edu.cn  Sat Sep 19 23:03:07 2009
From: gx1986 at mail.ustc.edu.cn (gx1986 at mail.ustc.edu.cn)
Date: Sun, 20 Sep 2009 11:03:07 +0800 (CST)
Subject: [Twisted-Python] What is the difference
	in	between	reactor.running and reactor._stopped
In-Reply-To: <20090919160637.18975.1382831204.divmod.xquotient.18@localhost.localdomain>
References: <20090919160637.18975.1382831204.divmod.xquotient.18@localhost.localdomain>
	<20090918191026.16892.1173356605.divmod.xquotient.2@localhost.localdomain>
	<20090918162117.8482.1774374040.divmod.xquotient.59@localhost.localdomain>
	<4AB397F3.8090101@arimaz.com>
	<16170408.5481253293358726.JavaMail.coremail@mailweb>
	<24928047.13991253327587570.JavaMail.coremail@mailweb>
Message-ID: <9866304.55721253415787525.JavaMail.coremail@mailweb>

I will try.
Thank you very much!


> -----Original E-mail-----
> From: exarkun at twistedmatrix.com
> Sent Time: 2009-9-20 0:06:37
> To: "Twisted general discussion" <twisted-python at twistedmatrix.com>
> Cc: 
> Subject: Re: [Twisted-Python] What is the difference in
	between	reactor.running and reactor._stopped
> 
> On 02:33 am, gx1986 at mail.ustc.edu.cn wrote:
> >Ok,let me express what i want to do clearly.
> >I use twisted to transfer a file.What i do is to open a file in 
> >client,then transfer it by TCP.Server received it and write it into a 
> >file.
> >The filename in 
> >"reactor.connectTCP(HOST,PORT,TSClientFactory(filename))" is  what i 
> >want to transfer.
> >If i want to transfer two file,what i do is to write 
> >"reactor.connectTCP(HOST,PORT,TSClientFactory(filename)) 
> >reactor.run(installSignalHandlers=0)" twice.But this will be error 
> >which you have told me. Now how could i to solve this problem?
> 
> You have to solve it by only calling reactor.run once.
> >
> >Meanwhile,if transfered file is big,the server's "dataReceived" 
> >function will run several times to receive all the data.If i transfer 
> >all of files one time,using 
> >"reactor.connectTCP(HOST,PORT,TSClientFactory(filenameList))". It will 
> >be hard to distinguish these different files,because "dataReceived" 
> >just receive.
> 
> You have to use a protocol which lets you distinguish between different 
> files.  I'm not sure what "TS" is so I can't make any specific 
> suggestions.
> 
> Another possibility is to keep using multiple connections.  You can call 
> reactor.connectTCP as many times as you want.  It's only reactor.run 
> that can only be called once.
> 
> Jean-Paul
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From exarkun at twistedmatrix.com  Sun Sep 20 00:05:18 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 20 Sep 2009 04:05:18 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1253419518.65.2017511848@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090920/350fae38/attachment.htm 

From ltaylor.volks at gmail.com  Sun Sep 20 11:27:21 2009
From: ltaylor.volks at gmail.com (Lucas Taylor)
Date: Sun, 20 Sep 2009 10:27:21 -0500
Subject: [Twisted-Python] Seeking advice on use of Perspective Broker
In-Reply-To: <16de708d0909180057t3a1b4237y8877818aebc065d2@mail.gmail.com>
References: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>	
	<4AB2DCFE.6060306@gmail.com>
	<16de708d0909180057t3a1b4237y8877818aebc065d2@mail.gmail.com>
Message-ID: <4AB649D9.7080509@gmail.com>

On 9/18/09 2:57 AM, Arthur Pemberton wrote:
> On Thu, Sep 17, 2009 at 8:06 PM, Lucas Taylor <ltaylor.volks at gmail.com> wrote:
>> On 9/17/09 1:31 PM, Arthur Pemberton wrote:
>>>  2) How easy it to package Twisted for distribution on Windows system
>>> (which would be inevitable)
>> You can use py2exe to distribute your application as one or more
>> executables. It is also possible to create NT services using the
>> win32all package.
>>
> 
> 
> I'm glad you brought that up, does py2exe work well with Twisted?
> 

Yes. It's generally no big deal. In some cases py2exe has trouble
finding every importable package and you need to manually specify what
it should be including. Buildbot does this (look at the 'includes'
directive to py2exe):
http://buildbot.net/trac/browser/contrib/windows/setup.py


From jessica.mckellar at gmail.com  Sun Sep 20 22:09:05 2009
From: jessica.mckellar at gmail.com (Jessica McKellar)
Date: Sun, 20 Sep 2009 22:09:05 -0400
Subject: [Twisted-Python] Boston Twisted Sprint
Message-ID: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>

Let's try this again:

The proposal was for a sprint in Boston from September 28-October 2. That
starts a week from today.

At this point:
1. There will be no funding for transportation/lodging for out of town folks
2. The location would be classrooms at MIT unless someone has an alternative
3. There will be no funding for food or snacks or drinks or anything like
that

Facts about using MIT classrooms as a Sprint location:
1. Room reservations would be for after school hours, aka after 5pm, for
weekdays.
2. Guests register their MAC address and have 14 days of wireless. It's
plausible that some of you visit MIT and have used up your free wireless. I
don't have a solution for that besides "find a different computer to
register and use".
3. The doors on campus are mostly locked at night and I won't be there to
let you in all the time. Some special doors remain unlocked. Bottom line:
you can get it and get to the rooms but it may be quite circuitous.

I'm cool with that if you're cool with that. Are you cool with that? Please
send me an e-mail off-list with:
1. if you'd attend, and if so which days
2. regardless of 1, if you believe that the sprint should be delayed until
funding/better location/more notice/whatever has a chance to happen

-jesstess
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090920/50c3c7ac/attachment.htm 

From listsin at integrateddevcorp.com  Sun Sep 20 22:59:40 2009
From: listsin at integrateddevcorp.com (Steve Steiner (listsin))
Date: Sun, 20 Sep 2009 22:59:40 -0400
Subject: [Twisted-Python] Boston Twisted Sprint
In-Reply-To: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
References: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
Message-ID: <08F4C3E1-5C81-4D51-ADAF-487E1DC26AEC@integrateddevcorp.com>


On Sep 20, 2009, at 10:09 PM, Jessica McKellar wrote:

> Let's try this again:
>
> The proposal was for a sprint in Boston from September 28-October 2.  
> That starts a week from today.

I'm sorry, maybe I missed something.  The last message I have on this  
list, about this event, is from July 29th wherein I indicated my  
possible Thurs->Sun availability.

Were there other subsequent messages about this event that I missed?

My search for "sprint" in my Twisted List e-mail folder only pulls up  
the message from the 29th, then yours from 10:09PM today; nothing in  
between.

Thanks,

S

P.S.  I have comments/issues/etc. about the rest of the event, but  
let's just handle one thing at a time i.e. messages about the event  
between 2009-07-29 -> present.

s



From jessica.mckellar at gmail.com  Sun Sep 20 23:23:12 2009
From: jessica.mckellar at gmail.com (Jessica McKellar)
Date: Sun, 20 Sep 2009 23:23:12 -0400
Subject: [Twisted-Python] Boston Twisted Sprint
In-Reply-To: <08F4C3E1-5C81-4D51-ADAF-487E1DC26AEC@integrateddevcorp.com>
References: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
	<08F4C3E1-5C81-4D51-ADAF-487E1DC26AEC@integrateddevcorp.com>
Message-ID: <b282a1340909202023m42101720s8beb9df15de5f074@mail.gmail.com>

To my knowledge you aren't missing e-mails. I asked jml last week about the
Sprint since I wanted to know if it was still happening and he indicated
that he was unable to organize the Sprint at this time. I then volunteered
to try and get something concrete happening, be it an on-time Sprint or be
it a delayed Sprint. A location and funding hadn't been secured by the time
I asked last week so that's why there aren't really any options for
anything.

-jesstess



On Sun, Sep 20, 2009 at 10:59 PM, Steve Steiner (listsin) <
listsin at integrateddevcorp.com> wrote:

>
> On Sep 20, 2009, at 10:09 PM, Jessica McKellar wrote:
>
> > Let's try this again:
> >
> > The proposal was for a sprint in Boston from September 28-October 2.
> > That starts a week from today.
>
> I'm sorry, maybe I missed something.  The last message I have on this
> list, about this event, is from July 29th wherein I indicated my
> possible Thurs->Sun availability.
>
> Were there other subsequent messages about this event that I missed?
>
> My search for "sprint" in my Twisted List e-mail folder only pulls up
> the message from the 29th, then yours from 10:09PM today; nothing in
> between.
>
> Thanks,
>
> S
>
> P.S.  I have comments/issues/etc. about the rest of the event, but
> let's just handle one thing at a time i.e. messages about the event
> between 2009-07-29 -> present.
>
> s
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090920/93f5e2fb/attachment.htm 

From radix at twistedmatrix.com  Sun Sep 20 23:33:47 2009
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sun, 20 Sep 2009 23:33:47 -0400
Subject: [Twisted-Python] Boston Twisted Sprint
In-Reply-To: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
References: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
Message-ID: <60ed19d40909202033r75c1f225mf4e70c67483f8e48@mail.gmail.com>

On Sun, Sep 20, 2009 at 10:09 PM, Jessica McKellar
<jessica.mckellar at gmail.com> wrote:
> I'm cool with that if you're cool with that. Are you cool with that? Please
> send me an e-mail off-list with:
> 1. if you'd attend, and if so which days
> 2. regardless of 1, if you believe that the sprint should be delayed until
> funding/better location/more notice/whatever has a chance to happen

I can make it all next week, unless something Comes Up, which it may
very well do, but I don't have any plans otherwise.

As for 2, I think we should Just Do It as long as we can get some good
core developer representation for next week.


-- 
Christopher Armstrong
http://radix.twistedmatrix.com/
http://planet-if.com/


From nathan.stocks at gmail.com  Mon Sep 21 06:36:47 2009
From: nathan.stocks at gmail.com (Nathan)
Date: Mon, 21 Sep 2009 04:36:47 -0600
Subject: [Twisted-Python] Reviewer who understands basic numeric
	algorithms wanted
In-Reply-To: <cedc0c090909180550l71a16866mbd383aa5d6ca19ad@mail.gmail.com>
References: <cedc0c090909180550l71a16866mbd383aa5d6ca19ad@mail.gmail.com>
Message-ID: <96c9d6a80909210336m5a2049b3wb32b9ceadb7f8f51@mail.gmail.com>

On Fri, Sep 18, 2009 at 6:50 AM, Laurens Van Houtven <lvh at laurensvh.be> wrote:
> Hello :-)
>
>
>
> twisted.positioning has just (read: last night) grown a new module,
> called util, which has two functions I needed for statistical
> analysis: the error function (erf) and the inverse normal cumulative
> distribution function (Phi).
>
> As most of you on this mailing list probably know, code headed for
> trunk needs to be reviewed. The reason I need to ask for this
> specifically is because the reviewer does not need to know anything
> about Twisted, but does need some experience with how numerical
> algorithms work -- and that's about the opposite of most Twisted
> reviewers ;-)

I would suggest Travis Oliphant, my old EE professor of numpy fame,
who taught a very difficult grad-level-difficulty undergrad stats
course for the EE department back when I was in college.

http://www.linkedin.com/pub/travis-oliphant/3/151/b1a

~ Nathan


From itamar at itamarst.org  Mon Sep 21 20:20:40 2009
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 21 Sep 2009 20:20:40 -0400
Subject: [Twisted-Python] Boston Twisted Sprint
In-Reply-To: <60ed19d40909202033r75c1f225mf4e70c67483f8e48@mail.gmail.com>
References: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
	<60ed19d40909202033r75c1f225mf4e70c67483f8e48@mail.gmail.com>
Message-ID: <1253578840.4290.212.camel@pintsize>

On Sun, 2009-09-20 at 23:33 -0400, Christopher Armstrong wrote:
> On Sun, Sep 20, 2009 at 10:09 PM, Jessica McKellar
> <jessica.mckellar at gmail.com> wrote:
> > I'm cool with that if you're cool with that. Are you cool with that? Please
> > send me an e-mail off-list with:
> > 1. if you'd attend, and if so which days
> > 2. regardless of 1, if you believe that the sprint should be delayed until
> > funding/better location/more notice/whatever has a chance to happen
> 
> I can make it all next week, unless something Comes Up, which it may
> very well do, but I don't have any plans otherwise.
> 
> As for 2, I think we should Just Do It as long as we can get some good
> core developer representation for next week.

Is the whole week a good idea? We should only do that for that long if we'll actually have people the whole time.



From pemboa at gmail.com  Tue Sep 22 01:38:41 2009
From: pemboa at gmail.com (Arthur Pemberton)
Date: Tue, 22 Sep 2009 00:38:41 -0500
Subject: [Twisted-Python] Seeking advice on use of Perspective Broker
In-Reply-To: <4AB39F97.1020104@lumierevfx.com>
References: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>
	<4AB28977.2090405@gladserv.com>
	<16de708d0909171539q1f2c2483vbbacd1a479c4655b@mail.gmail.com>
	<20090918145222.GA21764@vidar.dreamhost.com>
	<4AB39F97.1020104@lumierevfx.com>
Message-ID: <16de708d0909212238h2842c205g8f7bc7657606dd35@mail.gmail.com>

Thanks for the recommendations. I'll get the book and work from there.

-- 
Fedora 10
(www.pembo13.com)


From glyph at twistedmatrix.com  Tue Sep 22 04:07:10 2009
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Tue, 22 Sep 2009 04:07:10 -0400
Subject: [Twisted-Python] Boston Twisted Sprint
In-Reply-To: <60ed19d40909202033r75c1f225mf4e70c67483f8e48@mail.gmail.com>
References: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
	<60ed19d40909202033r75c1f225mf4e70c67483f8e48@mail.gmail.com>
Message-ID: <d9047f780909220107h111e0671ic25f4a4c3156c58e@mail.gmail.com>

On Sun, Sep 20, 2009 at 11:33 PM, Christopher Armstrong <
radix at twistedmatrix.com> wrote:

> On Sun, Sep 20, 2009 at 10:09 PM, Jessica McKellar
> <jessica.mckellar at gmail.com> wrote:
> > I'm cool with that if you're cool with that. Are you cool with that?
> Please
> > send me an e-mail off-list with:
>

I'm sending my reply on-list in the hopes that it may remind folks who
haven't done this yet :).


> > 1. if you'd attend, and if so which days
>

I expect that I will be able to attend Monday, Tuesday, and Thursday.
 Unfortunately Things Are Happening with alarming regularity for me right
now, so I may be able to attend more days or fewer; but I should make it for
at least two of those three.

> 2. regardless of 1, if you believe that the sprint should be delayed until
> > funding/better location/more notice/whatever has a chance to happen
>

We can always have another sprint later.


> I can make it all next week, unless something Comes Up, which it may
> very well do, but I don't have any plans otherwise.
>
> As for 2, I think we should Just Do It as long as we can get some good
> core developer representation for next week.


Agreed!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090922/e4ac6346/attachment.htm 

From paulswartz at gmail.com  Tue Sep 22 08:58:22 2009
From: paulswartz at gmail.com (Paul Swartz)
Date: Tue, 22 Sep 2009 08:58:22 -0400
Subject: [Twisted-Python] Boston Twisted Sprint
In-Reply-To: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
References: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
Message-ID: <324cfb540909220558l5c2dbba9m9adfcce1651b18ac@mail.gmail.com>

On Sun, Sep 20, 2009 at 10:09 PM, Jessica
McKellar<jessica.mckellar at gmail.com> wrote:
> Let's try this again:
>
> The proposal was for a sprint in Boston from September 28-October 2. That
> starts a week from today.

[radio edit]

> I'm cool with that if you're cool with that. Are you cool with that? Please
> send me an e-mail off-list with:
> 1. if you'd attend, and if so which days

Work's gotten a lot busier, so I can probably only take off 1-2 of the
days, but it doesn't really matter which.  If I do make it >1 day, is
there someone's floor/couch I can crash on?

> 2. regardless of 1, if you believe that the sprint should be delayed until
> funding/better location/more notice/whatever has a chance to happen

I don't have a strong preference about this.

-p
-- 
Paul Swartz
paulswartz at gmail dot com
http://paulswartz.net/
AIM: z3penguin


From radix at twistedmatrix.com  Tue Sep 22 12:45:26 2009
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Tue, 22 Sep 2009 12:45:26 -0400
Subject: [Twisted-Python] Boston Twisted Sprint
In-Reply-To: <d9047f780909220107h111e0671ic25f4a4c3156c58e@mail.gmail.com>
References: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
	<60ed19d40909202033r75c1f225mf4e70c67483f8e48@mail.gmail.com>
	<d9047f780909220107h111e0671ic25f4a4c3156c58e@mail.gmail.com>
Message-ID: <60ed19d40909220945v5bbaa14awd1ecd26a3c381214@mail.gmail.com>

On Tue, Sep 22, 2009 at 4:07 AM, Glyph Lefkowitz
<glyph at twistedmatrix.com> wrote:
>> > 1. if you'd attend, and if so which days
>
> I expect that I will be able to attend Monday, Tuesday, and Thursday.
> ?Unfortunately Things Are Happening with alarming regularity for me right
> now, so I may be able to attend more days or fewer; but I should make it for
> at least two of those three.

Given that your availability is limited, as is Jean-Paul's
availability (and his limited ability to do significant Twisted work),
I don't think it's worth it to have a week-long sprint next week.

Can we just do a one or two-day sprint next weekend?


-- 
Christopher Armstrong
http://radix.twistedmatrix.com/
http://planet-if.com/


From cyclops at speakeasy.net  Tue Sep 22 22:14:15 2009
From: cyclops at speakeasy.net (John Crawford)
Date: Tue, 22 Sep 2009 22:14:15 -0400
Subject: [Twisted-Python] Where is TwistedQuotes source code?
In-Reply-To: <mailman.1.1253635201.26558.twisted-python@twistedmatrix.co
 m>
References: <mailman.1.1253635201.26558.twisted-python@twistedmatrix.com>
Message-ID: <mailman.8.1253672392.23371.twisted-python@twistedmatrix.com>

I'm trying to find the source code for the TwistedQuotes application. 
I've looked in every section of the website, and failed to find it, 
alas. Is it still there, and if so, where?

I'm primarily interested in it, to use in understanding the 
documentation section, "Designing Twisted Applications", which uses 
TwistedQuotes as its example code.

Thanks for any help.

John C>



From dripton at ripton.net  Wed Sep 23 08:44:13 2009
From: dripton at ripton.net (David Ripton)
Date: Wed, 23 Sep 2009 05:44:13 -0700
Subject: [Twisted-Python] Where is TwistedQuotes source code?
In-Reply-To: <E1MqHSS-0000rE-NW@cube.twistedmatrix.com>
References: <mailman.1.1253635201.26558.twisted-python@twistedmatrix.com>
	<E1MqHSS-0000rE-NW@cube.twistedmatrix.com>
Message-ID: <20090923124413.GA9709@vidar.dreamhost.com>

On 2009.09.22 22:14:15 -0400, John Crawford wrote:
> I'm trying to find the source code for the TwistedQuotes application. 
> I've looked in every section of the website, and failed to find it, 
> alas. Is it still there, and if so, where?

You can browse it using Trac here:
http://twistedmatrix.com/trac/browser/trunk/doc/core/howto/listings/TwistedQuotes

Or just checkout the Twisted trunk from svn.

-- 
David Ripton    dripton at ripton.net


From burslem2001 at yahoo.com  Wed Sep 23 11:04:44 2009
From: burslem2001 at yahoo.com (gary clark)
Date: Wed, 23 Sep 2009 08:04:44 -0700 (PDT)
Subject: [Twisted-Python] VC++ client and a Twisted OpenSSL Server
Message-ID: <608322.51924.qm@web112519.mail.gq1.yahoo.com>

Hello,

Firstly I'm new to twisted hence patience and a deep breath my be necessary.

I wrote a simple VC++ client that communicates to a VC++ server using OpenSSL. It loads .pem file and communicates great.

However I want the client to talk to a twisted server provided from TwistedMatrix:

# Copyright (c) 2001-2004 Twisted Matrix Laboratories.
# See LICENSE for details.


from OpenSSL import SSL
from twisted.internet.protocol import Factory
from twisted.internet import ssl, reactor
from twisted.python import log

class ServerContextFactory:

    def getContext(self):
        """Create an SSL context.
        
        This is a sample implementation that loads a certificate from a file 
        called 'server.pem'."""
        ctx = SSL.Context(SSL.SSLv23_METHOD)
        ctx.use_certificate_file('nfdclient.pem')
        ctx.use_privatekey_file('nfdclient.pem')
        return ctx


if __name__ == '__main__':
    import echoserv, sys
    log.startLogging(sys.stdout)
    factory = Factory()
    factory.protocol = echoserv.Echo
    port =int(sys.argv[1])
    reactor.listenSSL(port, factory, ServerContextFactory())
    reactor.run()


When attempting to connect the client, it failed on BIO_do_connect.

Has anybody attempted to do this? If so could they shed some light into the direction of getting the BIO to connect.

Thanks,
Garyc


From exarkun at twistedmatrix.com  Wed Sep 23 14:37:45 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 23 Sep 2009 18:37:45 -0000
Subject: [Twisted-Python] VC++ client and a Twisted OpenSSL Server
In-Reply-To: <608322.51924.qm@web112519.mail.gq1.yahoo.com>
References: <608322.51924.qm@web112519.mail.gq1.yahoo.com>
Message-ID: <20090923183745.1533.1142862823.divmod.xquotient.207@localhost.localdomain>

On 03:04 pm, burslem2001 at yahoo.com wrote:
>Hello,
>
>Firstly I'm new to twisted hence patience and a deep breath my be 
>necessary.
>
>I wrote a simple VC++ client that communicates to a VC++ server using 
>OpenSSL. It loads .pem file and communicates great.
>
>However I want the client to talk to a twisted server provided from 
>TwistedMatrix:
>
>[snip]
>
>When attempting to connect the client, it failed on BIO_do_connect.

Hi Gary,

I suggest investigating the cause of the BIO_do_connect failure more 
thoroughly.  OpenSSL provides a lot of information when an API fails. 
Check out ERR_get_error and the related APIs in OpenSSL and use them to 
learn more about the BIO_do_connect failure.  This should point more 
directly at the reason the connection cannot be set up, and that may 
suggest further avenues for debugging.  Feel free to come back with the 
details if you'd like help interpreting them.

Jean-Paul


From ygingras at ygingras.net  Wed Sep 23 14:58:44 2009
From: ygingras at ygingras.net (Yannick Gingras)
Date: Wed, 23 Sep 2009 14:58:44 -0400
Subject: [Twisted-Python] ConFoo.ca call for speakers
Message-ID: <200909231458.44475.ygingras@ygingras.net>


Greetings Twisters, 
  I'm coordinator for the Python track at the ConFoo.ca conference and I
have an announcement to make that will certainly be of interest to
many of you.

PHP-Qu?bec, Montr?al-Python, Ruby Montr?al, W3Qc, and OWASP Montr?al
are organizing the first edition of the ConFoo.ca conference,
which will be held in Montr?al on March 10th through 12th at the
Hilton Bonaventure Hotel.  With over 500 expected attendees,
ConFoo.ca is the largest Web development conference in North
America.

We are looking for the best speakers willing to share their experience
and skills with programmers, managers, marketers and decision
makers. The conference is divided into two parts:

  A technical part, encompassing different aspects of Web development:
  PHP, Python, Ruby, security, project management, CMSs and
  frameworks, databases, systems administration, Web standards,
  accessibility and agile methods.

  A decision-making part: referencing (SEO), Web marketing analysis,
  and social networking.

Presenters can decide to present in English or French.  Presentations
are roughly one hour long and these may be recorded for later
broadcast in digital format.  All relevant details concerning the
conference are available on the call for speaker website [1].

Even though Python can be used for a wide range of programming tasks,
the Python track at ConFoo.ca will focus on Web development with
Python.  For all the other fascinating aspects of Python, do not
hesitate to submit a talk to PyCon [2], which is also running its
call for speakers as I write this.

Share the word!

[1]: http://confoo.ca/en/cfp
[2]: http://us.pycon.org/2010/about/

-- 
Yannick Gingras
http://ygingras.net
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: This is a digitally signed message part.
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20090923/8044e372/attachment.pgp 

From bash at intelerad.com  Wed Sep 23 15:06:04 2009
From: bash at intelerad.com (Benjamin Ash)
Date: Wed, 23 Sep 2009 15:06:04 -0400
Subject: [Twisted-Python] Having touble with spread.pb un-serializing an
	object
Message-ID: <20090923190603.GB4116@intelerad.com>

Hi,

I am trying to send new style classes that implement __slots__ with spread.pb.
Things seem to go awry when attempting to un-serialize the objects on the
client side.  I am not sure if this is a known issue.  How can I work around
this issue?

Thanks,

-ben

Stack trace:
"""
Unhandled error in Deferred:
Traceback (most recent call last):
  File "/usr/lib/python-2.6/lib/python2.6/site-packages/twisted/spread/pb.py", line 514, in expressionReceived
    method(*sexp[1:])
  File "/usr/lib/python-2.6/lib/python2.6/site-packages/twisted/spread/pb.py", line 884, in proto_answer
    d.callback(self.unserialize(netResult))
  File "/usr/lib/python-2.6/lib/python2.6/site-packages/twisted/internet/defer.py", line 243, in callback
    self._startRunCallbacks(result)
  File "/usr/lib/python-2.6/lib/python2.6/site-packages/twisted/internet/defer.py", line 312, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib/python-2.6/lib/python2.6/site-packages/twisted/internet/defer.py", line 328, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "./postRelease.in", line 36, in checkMissingRpms
    print obj.name
exceptions.AttributeError: name
"""




Intelerad Medical Systems 
Central Station 
895, de la Gauchetiere W., Suite 400 
Montreal, QC Canada H3B 4G1 
www.intelerad.com   

This email or any attachments may contain confidential or legally privileged information intended for the sole use of the addressees. Any use, redistribution, disclosure, or reproduction of this information, except as intended, is prohibited. If you received this email in error, please notify the sender and remove all copies of the message, including any attachments.   

From exarkun at twistedmatrix.com  Wed Sep 23 17:42:26 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 23 Sep 2009 21:42:26 -0000
Subject: [Twisted-Python] Having touble with spread.pb un-serializing
	an	object
In-Reply-To: <20090923190603.GB4116@intelerad.com>
References: <20090923190603.GB4116@intelerad.com>
Message-ID: <20090923214226.1533.1467370706.divmod.xquotient.220@localhost.localdomain>

On 07:06 pm, bash at intelerad.com wrote:
>Hi,
>
>I am trying to send new style classes that implement __slots__ with 
>spread.pb.
>Things seem to go awry when attempting to un-serialize the objects on 
>the
>client side.  I am not sure if this is a known issue.  How can I work 
>around
>this issue?

Perhaps the presence of __slots__ breaks PB's unserialization code.  Can 
you share a SSCCE (<http://sscce.org/>)?  Then perhaps it may make sense 
to file an enhancement ticket to support this case.

Jean-Paul


From burslem2001 at yahoo.com  Wed Sep 23 21:03:02 2009
From: burslem2001 at yahoo.com (gary clark)
Date: Wed, 23 Sep 2009 18:03:02 -0700 (PDT)
Subject: [Twisted-Python]  VC++ client and a Twisted OpenSSL Server
Message-ID: <496864.47252.qm@web112501.mail.gq1.yahoo.com>

Hello,

error:02002751:system library:connect:reason(1873)

Is dumped out from the client. This apparently is a :

0x2751 == 10065 == (WSA)EHOSTUNREACH
> "A socket operation was attempted to an unreachable host."

Strange because I can ping the server machine from the client. Not very informative.

Oh boy any ideas? I'm running the client on windows and the twisted server on linux.

Thanks,
Garyc




From burslem2001 at yahoo.com  Thu Sep 24 00:21:02 2009
From: burslem2001 at yahoo.com (gary clark)
Date: Wed, 23 Sep 2009 21:21:02 -0700 (PDT)
Subject: [Twisted-Python] VC++ client and a Twisted OpenSSL Server
Message-ID: <272158.21396.qm@web112507.mail.gq1.yahoo.com>

Ok I downloaded wireshark onto the linux box and commenced sniffing the packets. I saw the problem with sending the packets back (Host unreachable). Dont know why the pings were not being stopped (proabably allowing ICMP).

I then enable the port on the linux box.

I am now seeing the following:

error:0200274D:system library:connect:reason(1869)
ECONNREFUSED = 0x274D = 10061

Any ideas would be appreciated.

Thanks,
Garyc

--- On Wed, 9/23/09, gary clark <burslem2001 at yahoo.com> wrote:

> From: gary clark <burslem2001 at yahoo.com>
> Subject: [Twisted-Python] VC++ client and a Twisted OpenSSL Server
> To: twisted-python at twistedmatrix.com
> Date: Wednesday, September 23, 2009, 8:03 PM
> Hello,
> 
> error:02002751:system library:connect:reason(1873)
> 
> Is dumped out from the client. This apparently is a :
> 
> 0x2751 == 10065 == (WSA)EHOSTUNREACH
> > "A socket operation was attempted to an unreachable
> host."
> 
> Strange because I can ping the server machine from the
> client. Not very informative.
> 
> Oh boy any ideas? I'm running the client on windows and the
> twisted server on linux.
> 
> Thanks,
> Garyc
> 
> 



From burslem2001 at yahoo.com  Thu Sep 24 08:45:21 2009
From: burslem2001 at yahoo.com (gary clark)
Date: Thu, 24 Sep 2009 05:45:21 -0700 (PDT)
Subject: [Twisted-Python] Twisted OpenSSL Server Debug Information
In-Reply-To: <272158.21396.qm@web112507.mail.gq1.yahoo.com>
Message-ID: <285262.8846.qm@web112514.mail.gq1.yahoo.com>

Hello,

I am a new guy looking into the twisted platform.

I am trying to track down why the twisted server using open-ssl is
failing to communicate to my VC++ open-ssl client:

error:0200274D:system library:connect:reason(1869)

I am seeing 0x274D which is a ECONNREFUSED 10061 not sure what the
exact reason is. However would like to debug it at the twisted server so I can get more information on what is going on. I now know that the packets are going back and forth to the machines.

Simply put what is the recommended way to debug the twisted server so I can discover why the connection failed to the server? 


Much appreciated,
Garyc



From burslem2001 at yahoo.com  Thu Sep 24 08:56:54 2009
From: burslem2001 at yahoo.com (gary clark)
Date: Thu, 24 Sep 2009 05:56:54 -0700 (PDT)
Subject: [Twisted-Python] Twisted OpenSSL Server Debug Information
In-Reply-To: <285262.8846.qm@web112514.mail.gq1.yahoo.com>
Message-ID: <393281.30908.qm@web112513.mail.gq1.yahoo.com>


Oh boy. I finally got it working and connecting. Now to move onto the real stuff.


--- On Thu, 9/24/09, gary clark <burslem2001 at yahoo.com> wrote:

> From: gary clark <burslem2001 at yahoo.com>
> Subject: [Twisted-Python] Twisted OpenSSL Server Debug Information
> To: twisted-python at twistedmatrix.com
> Date: Thursday, September 24, 2009, 7:45 AM
> Hello,
> 
> I am a new guy looking into the twisted platform.
> 
> I am trying to track down why the twisted server using
> open-ssl is
> failing to communicate to my VC++ open-ssl client:
> 
> error:0200274D:system library:connect:reason(1869)
> 
> I am seeing 0x274D which is a ECONNREFUSED 10061 not sure
> what the
> exact reason is. However would like to debug it at the
> twisted server so I can get more information on what is
> going on. I now know that the packets are going back and
> forth to the machines.
> 
> Simply put what is the recommended way to debug the twisted
> server so I can discover why the connection failed to the
> server? 
> 
> 
> Much appreciated,
> Garyc
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 



From patrick at priority5.com  Thu Sep 24 12:51:25 2009
From: patrick at priority5.com (Patrick Hartling)
Date: Thu, 24 Sep 2009 11:51:25 -0500
Subject: [Twisted-Python] Unit tests, inline callbacks,
	and exception handling
Message-ID: <DFB8BDD1-93E3-469B-B4E1-0C28F6B978B6@priority5.com>

We are using nose and the twisted.trial.unittest.TestCase class from  
Twisted 8.2.0 to write tests that use inline callbacks. In one of the  
tests, we are trying to validate that the code will behave correctly  
by raising an exception if two clients with the same user name connect  
to a server. The basic test code is similar to this:

@inlineCallbacks
def testDuplicateConnect(self):
    server_port = random.randint(10000, 40000)
    server = Server()
    server.listen(port = server_port)

    client1 = Client(username = "Test")
    yield client1.connect(port = server_port)

    try:
       client2 = Client(username = "Test")
       yield client2.connect(port = server_port)
       assert False
    except UsernameAlreadyExists, ex:
       pass

    yield server.close()
    yield client.close()

The test method executes and returns successfully. The exception is  
raised and caught correctly, but because a  
twisted.python.failure.Failure object was seen during deferred  
processing, twisted.trial.unittest.TestCase._cleanUp() concludes that  
an error occurred. That is perhaps not the most accurate way of  
describing what happens, but the end result is that a caught exception  
ends up being reported as an error.

My question is this: are there any tips for performing exception  
handling in test methods that are decorated with @inlineCallbacks? I  
have been tracing through a lot of code trying to find any extension  
point, hook, etc. where I could indicate that the exception was caught  
correctly, but I have not found anything yet. Adding the obvious  
@raises decoration does not work because the method catches the  
exception. The closest I have come is to call  
self._observer._ignoreErrors() from the test method with the exception  
type in question, but that does not strike me as being on the right  
track.

  -Patrick


--
Patrick L. Hartling
Senior Software Engineer, Priority 5
http://www.priority5.com/

The information transmitted in this communication is intended only for
the person or entity to which it is addressed and contains proprietary
material. Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by persons or
entities other than the intended recipient is prohibited. If you
received this in error, please destroy any copies, contact the sender
and delete the material from any computer.



From exarkun at twistedmatrix.com  Thu Sep 24 12:59:49 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 24 Sep 2009 16:59:49 -0000
Subject: [Twisted-Python] Unit tests, inline callbacks,
	and exception handling
In-Reply-To: <DFB8BDD1-93E3-469B-B4E1-0C28F6B978B6@priority5.com>
References: <DFB8BDD1-93E3-469B-B4E1-0C28F6B978B6@priority5.com>
Message-ID: <20090924165949.1533.1033005023.divmod.xquotient.322@localhost.localdomain>

On 04:51 pm, patrick at priority5.com wrote:
>We are using nose and the twisted.trial.unittest.TestCase class from
>Twisted 8.2.0 to write tests that use inline callbacks. In one of the
>tests, we are trying to validate that the code will behave correctly
>by raising an exception if two clients with the same user name connect
>to a server. The basic test code is similar to this:
>
>@inlineCallbacks
>def testDuplicateConnect(self):
>    server_port = random.randint(10000, 40000)
>    server = Server()
>    server.listen(port = server_port)
>
>    client1 = Client(username = "Test")
>    yield client1.connect(port = server_port)
>
>    try:
>       client2 = Client(username = "Test")
>       yield client2.connect(port = server_port)
>       assert False
>    except UsernameAlreadyExists, ex:
>       pass
>
>    yield server.close()
>    yield client.close()
>
>The test method executes and returns successfully. The exception is
>raised and caught correctly, but because a
>twisted.python.failure.Failure object was seen during deferred
>processing, twisted.trial.unittest.TestCase._cleanUp() concludes that
>an error occurred. That is perhaps not the most accurate way of
>describing what happens, but the end result is that a caught exception
>ends up being reported as an error.
>
>My question is this: are there any tips for performing exception
>handling in test methods that are decorated with @inlineCallbacks? I
>have been tracing through a lot of code trying to find any extension
>point, hook, etc. where I could indicate that the exception was caught
>correctly, but I have not found anything yet. Adding the obvious
>@raises decoration does not work because the method catches the
>exception. The closest I have come is to call
>self._observer._ignoreErrors() from the test method with the exception
>type in question, but that does not strike me as being on the right
>track.

If the problem is because the server code uses `twisted.python.log.err` 
to log the double client connection attempt, then you can make it so 
that this doesn't fail the test by flushing the error before the test 
returns, with something like this:

    self.flushLoggedErrors(UsernameAlreadyExists)

Or possibly a different exception type, depending on what exactly the 
server is logging.

If the server isn't logging anything, then I can't really know why your 
test is failing based on the example you've given.  If you can construct 
a SSCCE (<http://sscce.org>), that would help a lot.

Jean-Paul


From patrick at priority5.com  Thu Sep 24 13:04:07 2009
From: patrick at priority5.com (Patrick Hartling)
Date: Thu, 24 Sep 2009 12:04:07 -0500
Subject: [Twisted-Python] Unit tests, inline callbacks,
	and exception handling
In-Reply-To: <20090924165949.1533.1033005023.divmod.xquotient.322@localhost.localdomain>
References: <DFB8BDD1-93E3-469B-B4E1-0C28F6B978B6@priority5.com>
	<20090924165949.1533.1033005023.divmod.xquotient.322@localhost.localdomain>
Message-ID: <6967807B-9839-4D28-A64A-BFE726EB28B5@priority5.com>

On Sep 24, 2009, at 11:59 AM, exarkun at twistedmatrix.com wrote:

> On 04:51 pm, patrick at priority5.com wrote:
>> We are using nose and the twisted.trial.unittest.TestCase class from
>> Twisted 8.2.0 to write tests that use inline callbacks. In one of the
>> tests, we are trying to validate that the code will behave correctly
>> by raising an exception if two clients with the same user name  
>> connect
>> to a server. The basic test code is similar to this:
>>
>> @inlineCallbacks
>> def testDuplicateConnect(self):
>>   server_port = random.randint(10000, 40000)
>>   server = Server()
>>   server.listen(port = server_port)
>>
>>   client1 = Client(username = "Test")
>>   yield client1.connect(port = server_port)
>>
>>   try:
>>      client2 = Client(username = "Test")
>>      yield client2.connect(port = server_port)
>>      assert False
>>   except UsernameAlreadyExists, ex:
>>      pass
>>
>>   yield server.close()
>>   yield client.close()
>>
>> The test method executes and returns successfully. The exception is
>> raised and caught correctly, but because a
>> twisted.python.failure.Failure object was seen during deferred
>> processing, twisted.trial.unittest.TestCase._cleanUp() concludes that
>> an error occurred. That is perhaps not the most accurate way of
>> describing what happens, but the end result is that a caught  
>> exception
>> ends up being reported as an error.
>>
>> My question is this: are there any tips for performing exception
>> handling in test methods that are decorated with @inlineCallbacks? I
>> have been tracing through a lot of code trying to find any extension
>> point, hook, etc. where I could indicate that the exception was  
>> caught
>> correctly, but I have not found anything yet. Adding the obvious
>> @raises decoration does not work because the method catches the
>> exception. The closest I have come is to call
>> self._observer._ignoreErrors() from the test method with the  
>> exception
>> type in question, but that does not strike me as being on the right
>> track.
>
> If the problem is because the server code uses  
> `twisted.python.log.err`
> to log the double client connection attempt, then you can make it so
> that this doesn't fail the test by flushing the error before the test
> returns, with something like this:
>
>    self.flushLoggedErrors(UsernameAlreadyExists)
>
> Or possibly a different exception type, depending on what exactly the
> server is logging.

That did it. Thanks!

  -Patrick

> If the server isn't logging anything, then I can't really know why  
> your
> test is failing based on the example you've given.  If you can  
> construct
> a SSCCE (<http://sscce.org>), that would help a lot.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

--
Patrick L. Hartling
Senior Software Engineer, Priority 5
http://www.priority5.com/

The information transmitted in this communication is intended only for
the person or entity to which it is addressed and contains proprietary
material. Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by persons or
entities other than the intended recipient is prohibited. If you
received this in error, please destroy any copies, contact the sender
and delete the material from any computer.



From terry at jon.es  Thu Sep 24 13:08:39 2009
From: terry at jon.es (Terry Jones)
Date: Thu, 24 Sep 2009 19:08:39 +0200
Subject: [Twisted-Python] Unit tests, inline callbacks,
	and exception handling
In-Reply-To: Your message at 11:51:25 on Thursday, 24 September 2009
References: <DFB8BDD1-93E3-469B-B4E1-0C28F6B978B6@priority5.com>
Message-ID: <19131.42903.809453.308684@jon.es>

Hi Patrick

You have

    try:
        client2 = Client(username = "Test")
        yield client2.connect(port = server_port)
        assert False
    except UsernameAlreadyExists, ex:
        pass

You could instead try:

    client2 = Client(username = "Test")
    d = client2.connect(port = server_port)
    self.failUnlessFailure(d, UsernameAlreadyExists)
    yield d

Terry


From luke.leighton at googlemail.com  Thu Sep 24 16:53:12 2009
From: luke.leighton at googlemail.com (Luke Kenneth Casson Leighton)
Date: Thu, 24 Sep 2009 20:53:12 +0000
Subject: [Twisted-Python] Pyjamas + web2py + twisted vs Django + Pinax
In-Reply-To: <ced5f0f60909241348g5e11c5e6q6d84111126895d54@mail.gmail.com>
References: <ced5f0f60909241348g5e11c5e6q6d84111126895d54@mail.gmail.com>
Message-ID: <ced5f0f60909241353s7a970cdbk4404673451a4c742@mail.gmail.com>

In-Reply-To=65BAE9EEDADD409CA83C32F2E54A0CB9%40Podcaster

sorry, folks: i didn't see this message, and it's taken me ten months
of obscure searches to find it.

> > I'm about to start programming a game in Python. The game will
> > be a web-based board game with a social aspect, something like
> > http://www.chesspark.com. I want the game to run in both browsers
> > and as a desktop client.

 and presumably you don't want to duplicate effort.  ergo, pyjamas
 is a good choice.  actually... it's your _only_ python choice
 if you don't want to burden the users.

 your other choices are: adobe AIR, silverlight, and, more recently,
 appcelerator.  appcelerator is interesting: you get to run IronPython
 because appcelerator's "titanium" is actually a silverlight / browser
 plugin that gives IronPython apps access to the DOM model of the
 browser.


> > Therefore I'm wondering what python-based
> > technologies I need. I know that Javascript/AJAX is necessary for
> > the browser part so I have decided on the following:
> >
> > 1. Pyjamas -  (for the AJAX browser stuff)
> >
> > 2. Pyjamas-desktop - (for the desktop client)

 pyjamas-desktop now has XULrunner and MSHTML as back-end engines.
 the MSHTML one is particularly strategically significant, as the
 only real requirements are, instead of a whopping 30mb bundle
 including gtk, cairo, xulrunner, pygtk, pycairo, pygobject _and_
 not to mention python itself, you can just install... python-comtypes
 (which is a 200k download).  for the POSIX-compliant systems, such
 as debian, there's "apt-get install hulahop", and you get python-xpcom,
 xulrunner and all other dependencies pulled in "for free".

 > > 3. Web2py (or djanjo, or django+pinax)  - for the website on
which the game will run and for database access and social part -
login, chat, members, profiles, game history, etc.)
> >
> > 4. Twisted - for the networking and chat functionality.
> >
> > 5. Pygame - for most of the game stuff, sprites, inages, etc. (Actually I don't know if Pygame is necessary for a board-type game.)

 no, it's not.  i wrote a board-type game "meta-engine" which involved
 moving of pyjamas.ui.Image "tokens" around a pyjamas.ui.AbsolutePanel
 and it was incredibly simple and it actually worked.  i went to a lot
 of trouble to use the django server and AJAX (actually JSONRPC) to
 communicate "moving" of tokens.  as one user moved a token, the fact
 that it had "moved" would be noted in a database table
 (id, game_session_id, user_id, token_id)
 of course obviously excluding the user who had moved it.

 a continuous poll by a user of the database would empty the table
 of "moved" notifications for that user, and return a list of new
 position info for the tokens that needed to be moved.

 update speed turned out to be about 1-2 frames per second: perfectly
 adequate for a board game.

 oh: for "Go", due to the number of tokens, however, i found
 that over 700 tokens resulted in _considerably_ slow Firefox 2
 initialisation times, which turns out to be a known bug in Firefox 2.
 adding over 256 absolute-positioned items to a div element using
 DOM manipulation is *SEVERELY* cpu-intensive: beyond some sort of
 fixed limit, adding elements turns from O(N) to O(N^2).  for full information
 on the issue, courtesy of john gunther, and a solution, see:
 http://pyjamas.svn.sourceforge.net/viewvc/pyjamas/trunk/library/pyjamas/chart/GChartWidgets.py?view=log

 i also added "spectators" which were simply "users with no rights
 to move tokens".  they got their own "chat" channel so as not to
 interfere with the players.

 twisted users are probably screaming loudly at the "polling" technique
 especially one that hammers a database so heavily, but hey, you can't
 have everything :)  if anyone knows of any better event-driven methods
 including example code that can be queried with JSONRPC i'm _really_
 interested to hear about it.  think in terms of "don't respond to the
 JSONRPC request unless either 15 seconds has passed, or there are some
 events which have been triggered by other users".

 yes i fully understand the complexities involved and that one possible
 implementation is a single-process asynchronous JSONRPC HTTP service,
 which is _nasty_ as hell: i'm interested to hear if there's anything
 better.

> > My understanding of the above technologies is still limited and I'm not sure if I need all of these because some functionality may be overlapped. e.g. I don't know where Pyjamas leaves off and where web2py/danjo/pinax begins.
> >
> > Can someone please give me some advice?
>
> That's a fine laundry list of frameworks, but i believe getting all of
> them to cooperate would be practically impossible.  (Note: a framework
> is a library that's grown to the point where it thinks it owns your
> whole program.  Getting multiple frameworks to play nicely together is
> usually hard.  There are rare exceptions, like the beautiful integration
> between Twisted and PyGTK, but they're rare.)

 the integration point of choice between pyjamas and frameworks is JSONRPC,
 simply because it was the first one that was implemented, and it's turned
 out to be incredibly practical.

 examination of the wiki http://code.google.com/p/pyjamas/wiki shows
 over 90% of the wiki pages are "how to use pyjamas with <insert framework>".
 including two or three methods for twisted, and two or more with django.


> I know that Django and pygame and Twisted are useful, mature, documented
> frameworks that actually get used in production by people other than
> their authors.  I don't know about Pyjamas.

 http://pyjs.org/FAQ.html "i'm a bit underwhelmed by the apparent lack
 of documentation": says "go back to main site, http://pyjs.org, see
 Documentation section" which has these:

 http://pyjs.org/api
 http://pyjs.org/book/output/Bookreader.html
 still relevant, because the U.I API hasn't really changed:
 http://code.google.com/webtoolkit/documentation
 for best results, read:
 http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/index.html
 specifically the U.I "package":
 http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/user/client/ui/package-summary.html



> If putting 100% Python in one end and getting Ajax out the other is
> really important to you, then you need Pyjamas to work.  (Or wait for
> PyPy and its JavaScript backend to mature from experimental research
> code to production-quality stuff.)

 that's not going to happen.  the pypy javascript back-end has been
 abandoned.  it's still available in a branch, but you are not going
 to get anywhere with it.  plus, due to the fact that the sole and
 exclusive focus of the pypy javascript back-end is to be totally
 100% python interoperable, to the absolute exclusion of all else
 (e.g. speed), even if you got it going, you'd find that apps ran
 like treacle.  then, if you tried to debug the app, you'd find that
 it was near-impossible, because the code is near-pure-assembler-like,
 having gone through rpython, first.  being utterly divorced from its
 original python, you are entirely at the mercy of the pypy developers
 for bug-fixes aaand... they've abandoned it.

 bottom line: forget pypy.

> So my advice is to write a simple
> tic-tac-toe game in Pyjamas, and find out.

 or a lightout game.  http://pyjs.org/examples/lightout/output/lightout.html
 or a sudoku game. http://lkcl.net/sudoku/output/Sudoku.html
 (in each case, full source code is 1 level below)

 of course, these are single-user games.  what you should be slightly
 surprised by is the fact that the source code of each app is so damn
 small.  the sudoku one, it hardly looks like there's any actual
 "pyjamas" code in it at all.  you have to _really_ peer very hard
 at the code, looking for clues such as "ListBox", "Grid", "HTML"
 and "HorizontalPanel" in order to discern the bits that just get
 on with serving up a sudoku game and the bits which "glorify pyjamas"
 so to speak.  "oh look, there's a button.  i wonder if it calls
 this funny method named 'onClick' if the button gets clicked.  why
 yes, what a surprise, it does!"

 anyway this is a bit long, i'll stop now :)

 l.


From bash at intelerad.com  Thu Sep 24 23:42:23 2009
From: bash at intelerad.com (Benjamin Ash)
Date: Thu, 24 Sep 2009 23:42:23 -0400
Subject: [Twisted-Python] Having touble with spread.pb un-serializing	an
	object
In-Reply-To: <20090923214226.1533.1467370706.divmod.xquotient.220@localhost.localdomain>
References: <20090923190603.GB4116@intelerad.com>
	<20090923214226.1533.1467370706.divmod.xquotient.220@localhost.localdomain>
Message-ID: <20090925034221.GD29130@intelerad.com>

Hi Jean-Paul,

Here is a sample server and client code that demonstrates the problem
with PB's unserialization code and objects that use __slots__.  The
SlotsObject class implements __slots__ and the NoSlotsObject does not.
The problem arises when de-serializing the SlotsObject.  The stack trace
is a little different than the original one I posted but the net-effect
is the same; an AttributeError exception.

Thanks,

-ben

sample.py (server and copyable objects):
"""
import sys
import os

from twisted.spread import pb
from twisted.internet import reactor

class BaseObject(object, pb.Copyable, pb.RemoteCopy):

    def __init__(self, name):
        self.name = name
        self.version = "1"
        self.release = "2"

    def __str__(self):
        return "%s-%s-%s" % (self.name, self.version, self.release)

class SlotsObject(BaseObject):
    """
    Some object that implements __slots__
    """
    __slots__ = ["name", "version", "release"]

    def __init__(self):
        super(SlotsObject, self).__init__("slots")

class NoSlotsObject(BaseObject):

    def __init__(self):
        super(NoSlotsObject, self).__init__("no-slots")

class SampleServer(pb.Root, object):
    """
    Serve up some objects that implement __slots__.
    """
    def remote_getSlotsObject(self):
        return SlotsObject()

    def remote_getNoSlotsObject(self):
        return NoSlotsObject()
    
def main():
    reactor.listenTCP(12346, pb.PBServerFactory(SampleServer()))
    reactor.run()

if __name__ == "__main__":
    from sample import SlotsObject, NoSlotsObject
    main()
"""

sample client code:
"""
import sys
import os

from twisted.internet import reactor
from twisted.spread import pb
from twisted.python import util

from sample import SlotsObject, NoSlotsObject

pb.setUnjellyableForClass(SlotsObject, SlotsObject)
pb.setUnjellyableForClass(NoSlotsObject, NoSlotsObject)

def call(factory, name):
    remote = factory.getRootObject()
    remote.addCallback(lambda obj: obj.callRemote(name))
    remote.addCallback(lambda obj: util.println("name is %r" % obj.name))
    remote.addErrback(lambda err: err.printTraceback())
    return remote

factory = pb.PBClientFactory()
reactor.connectTCP("localhost", 12346, factory)
call(factory, "getSlotsObject")
remote = call(factory, "getNoSlotsObject")
remote.addCallback(lambda _: reactor.stop())
reactor.run()
"""

Output:
"""
Traceback (most recent call last):
  File "/usr/lib64/python2.5/site-packages/twisted/internet/defer.py", line 304, in _startRunCallbacks
    self._runCallbacks()
  File "/usr/lib64/python2.5/site-packages/twisted/internet/defer.py", line 317, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/python2.5/site-packages/twisted/internet/defer.py", line 281, in _continue
    self.unpause()
  File "/usr/lib64/python2.5/site-packages/twisted/internet/defer.py", line 277, in unpause
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/python2.5/site-packages/twisted/internet/defer.py", line 317, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "./sample-client.py", line 17, in <lambda>
    remote.addCallback(lambda obj: util.println("name is %r" % obj.name))
exceptions.AttributeError: name
name is 'no-slots'
"""

On Wed, Sep 23, 2009 at 09:42:26PM -0000, exarkun at twistedmatrix.com wrote:
> On 07:06 pm, bash at intelerad.com wrote:
> >Hi,
> >
> >I am trying to send new style classes that implement __slots__ with 
> >spread.pb.
> >Things seem to go awry when attempting to un-serialize the objects on 
> >the
> >client side.  I am not sure if this is a known issue.  How can I work 
> >around
> >this issue?
> 
> Perhaps the presence of __slots__ breaks PB's unserialization code.  Can 
> you share a SSCCE (<http://sscce.org/>)?  Then perhaps it may make sense 
> to file an enhancement ticket to support this case.
> 
> Jean-Paul
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




Intelerad Medical Systems 
Central Station 
895, de la Gauchetiere W., Suite 400 
Montreal, QC Canada H3B 4G1 
www.intelerad.com   

This email or any attachments may contain confidential or legally privileged information intended for the sole use of the addressees. Any use, redistribution, disclosure, or reproduction of this information, except as intended, is prohibited. If you received this email in error, please notify the sender and remove all copies of the message, including any attachments.   

From jessica.mckellar at gmail.com  Fri Sep 25 13:58:00 2009
From: jessica.mckellar at gmail.com (Jessica McKellar)
Date: Fri, 25 Sep 2009 13:58:00 -0400
Subject: [Twisted-Python] Boston Twisted Sprint
In-Reply-To: <60ed19d40909220945v5bbaa14awd1ecd26a3c381214@mail.gmail.com>
References: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
	<60ed19d40909202033r75c1f225mf4e70c67483f8e48@mail.gmail.com>
	<d9047f780909220107h111e0671ic25f4a4c3156c58e@mail.gmail.com>
	<60ed19d40909220945v5bbaa14awd1ecd26a3c381214@mail.gmail.com>
Message-ID: <b282a1340909251058i40b2da73y8e2eb0722d2adb5e@mail.gmail.com>

This sounds like plenty of support for a Sprint! People have mostly
expressed an ability to attend Monday, Tuesday, and Wednesday, so it seems
reasonable to start with that as the Sprint window and we can reevaluate as
we go alone. That said, I have room reservations through Sunday so people
should feel free to use those spaces.

Room Details for Monday-Wednesday, 5pm-midnight:
-The room number is 4-159, so it's in building 4 on the first floor.
Attached is a poorly gimped zoomed-in view of main campus with some
annotation on how to get to the room.
-Details on how to get to MIT in general as well as a complete map and other
information can be found here: http://whereis.mit.edu/
-The way that will always work to get to 4-159 is to follow the arrow on the
attached map: go in through "Lobby 7" on Massachusetts Ave. It's the big
entrance with huge columns shortly before you hit the Charles River. Then
just go down the hallway until you turn right at a sign for building 4.
-If you take the T in and get off at the Kendall T stop on the Red Line, it
would be annoying to go all the way to Massachusetts Ave. just to have to
loop back through the Lobby 7 route. I'd recommend getting there before the
doors lock (~5pm), pinging someone you know is already there, or waiting for
a stranger to let you in around buildings 56 and 66.
-I'll put up signs to help guide people and have a sign on the room door.
-There will also be a room reservation confirmation attached to the back of
the door, should anyone ask for one and should I not be there to talk to
them.

I will be at the room and on #twisted at 5pm on Monday.

If this information is unclear / incomplete or if you have special needs
that need accommodating please don't hesitate to reply on-list or to me.

-Jessica



On Tue, Sep 22, 2009 at 12:45 PM, Christopher Armstrong <
radix at twistedmatrix.com> wrote:

> On Tue, Sep 22, 2009 at 4:07 AM, Glyph Lefkowitz
> <glyph at twistedmatrix.com> wrote:
> >> > 1. if you'd attend, and if so which days
> >
> > I expect that I will be able to attend Monday, Tuesday, and Thursday.
> >  Unfortunately Things Are Happening with alarming regularity for me right
> > now, so I may be able to attend more days or fewer; but I should make it
> for
> > at least two of those three.
>
> Given that your availability is limited, as is Jean-Paul's
> availability (and his limited ability to do significant Twisted work),
> I don't think it's worth it to have a week-long sprint next week.
>
> Can we just do a one or two-day sprint next weekend?
>
>
> --
> Christopher Armstrong
> http://radix.twistedmatrix.com/
> http://planet-if.com/
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090925/951c9a3b/attachment-0001.htm 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: zoom.png
Type: image/png
Size: 178096 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20090925/951c9a3b/attachment-0001.png 

From markv at lumierevfx.com  Fri Sep 25 15:47:00 2009
From: markv at lumierevfx.com (Mark Visser)
Date: Fri, 25 Sep 2009 15:47:00 -0400
Subject: [Twisted-Python] Trial: Blocking until all deferreds have fired in
	test
Message-ID: <4ABD1E34.8080301@lumierevfx.com>

I have a class that looks something like this:

|class FooListener(object):
    def __init__(self):
        pass

    @inlineCallbacks
    def fooBar():
        try:
            yield doSomeSetup()
            doSomethingThatReturnsADeferred()
            returnValue('success!')
        except:
            returnValue('failure!')

|Note that doSomethingThatReturnsADeferred() has no callbacks.

I also have a unit test that looks something like this:

|def TestFoo(unittest.TestCase):
    def setUp(self):
        timeout = 1000000
        self.listener = FooListener()

    @inlineCallbacks
    def testFooBar(self):
        yield self.listener.fooBar()
|
When I run this, I get this error:

[ERROR]: foo.TestFoo.testFooBar

Traceback (most recent call last):
Failure: twisted.trial.util.DirtyReactorAggregateError: Reactor was unclean.
Selectables:
<twisted.internet.process.ProcessWriter object at 0x3b7b650>
-------------------------------------------------------------------------------
Ran 1 tests in 9.028s

FAILED (errors=1, successes=1)

I'm clever enough to understand that Trial isn't waiting for the 
"backgrounded" Deferreds to fire, but I'm not clever enough to figure 
how to fix it. :-)

I could hack around this by passing a test_mode parameter to 
TestFoo.__init__ and "yield"-ing doSomethingThatReturnsADeferred(), but 
I'd rather not introduce special cases for testing.

Is there a way to instruct Trial to "wait" for Deferreds to fire?

thanks

-- 
Mark Visser, Software Director
Lumi?re VFX
Email: markv at lumierevfx.com
Phone: +1-514-316-1080 x3030

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090925/67b19849/attachment.htm 

From terry at jon.es  Fri Sep 25 17:25:59 2009
From: terry at jon.es (Terry Jones)
Date: Fri, 25 Sep 2009 23:25:59 +0200
Subject: [Twisted-Python] Trial: Blocking until all deferreds have fired
	in	test
In-Reply-To: Your message at 15:47:00 on Friday, 25 September 2009
References: <4ABD1E34.8080301@lumierevfx.com>
Message-ID: <19133.13671.202032.722226@jon.es>

Hi Mark.

I'd write your FooListener class like this (untested):

class FooListener(object):
    def fooBar():
        d = doSomeSetup()
        d.addCallback(lambda ign: doSomethingThatReturnsADeferred())
        d.addCallbacks(lambda ign: 'success!', lambda ign: 'failure!')
        return d

And leave your unit test as is. Then the unit test (with the yield on
fooBar() will do the right thing. And your other (non-test) code will
continue to get what it was getting before.

BTW, it's a slight red flag (to me) that you're returning the 'failure!'
string as the value of the deferred (i.e., if an error happens, that
errback function returns a string, which is going to get you back onto the
callback chain in the deferred - since you're not raising or returning a
failure).  I say it's a red flag because I tried stuff like that once and
later realized that things are much cleaner if you just let Twisted handle
errors in it's normal way. To do so you could just drop the addErrback
above and let any error flow back to the caller of fooBar in the normal way
(on the errback chain) rather than trying to catch problems and return a
result on the callback chain that indicates an error (i.e., a string like
'failure!').

Hope that helps.

Terry


From exarkun at twistedmatrix.com  Sun Sep 27 00:05:19 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 27 Sep 2009 04:05:19 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1254024319.7.136281212@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090927/34ec94d7/attachment.htm 

From burslem2001 at yahoo.com  Sun Sep 27 16:08:45 2009
From: burslem2001 at yahoo.com (gary clark)
Date: Sun, 27 Sep 2009 13:08:45 -0700 (PDT)
Subject: [Twisted-Python] Twisted OpenSSL Server and multiple clients
Message-ID: <455440.32017.qm@web112505.mail.gq1.yahoo.com>

Hello,

I am new to Twisted, hence the red flag and patience card pulled out.

I have written a client that connects perfectly well to a twisted server thats using open-ssl to communicate to each other. Basically I took the open-ssl echo server example and tweaked it.

Thats all fine and dandy, but I want to have multiple clients that can connect to the server.

So I have a few questions:

1) When a client connects to my server? What connection information
   can be collected and stored persistently? 

   Upon a client connecting I want to store connection information and
   I want to remove connection information when its disconnected from 
   the persistent store.

2) What persistent store is adopted for twisted if any?

3) I want to know when a table has changed so I can then pull information
   from a table and use the connection information if present to send data 
   to my client. How is this accomplished in twisted?

Again I apologise in advance, if someone can shed some light into how twisted accomplishes the basic tasks of multiple clients thats great.

Oh boy.

Thanks,
Garyc






From burslem2001 at yahoo.com  Sun Sep 27 17:02:37 2009
From: burslem2001 at yahoo.com (gary clark)
Date: Sun, 27 Sep 2009 14:02:37 -0700 (PDT)
Subject: [Twisted-Python] Twisted OpenSSL Server and multiple clients
Message-ID: <717792.89947.qm@web112509.mail.gq1.yahoo.com>

Ok I'm answering my own questions:

After browsing around I kinda pieced together what is going on.

Basically the factory object manages the persistent information
of protcols. You can use self.clients.append( newclient )
to store when a connection is made and self.clients.remove( client ) when a client disconnects within the factory object to cycle through all the protocol (clients) in the factory:

In the factory:

for proto in self.clients
    proto.transport.write( message )

I found the below code very useful:

import string
from twisted.application import service, internet
from twisted.internet import reactor, protocol
from twisted.internet.protocol import Protocol, Factory

port = 80

class AirChat(Protocol):
	
	username = ""
	session = False
	
	def connectionMade( self ):
		self.factory.numProtocols = self.factory.numProtocols+1
		self.factory.addClient(  self )
		
	def connectionLost( self , reason ):
		self.factory.numProtocols = self.factory.numProtocols-1
		self.factory.delClient( self )
		
	def dataReceived( self , data ):
		
		# parse out HTTP
		a = data.split( '\x00' )[0].split(' ')
		
		# look for HTTP header
		if a[0] == 'GET' or a[0] == 'POST':
			self.transport.write( """HTTP/1.1 200 OK\r\n\r\n""" )
			self.transport.write( """<html><strong>AIR Chat 1.0</strong></html>""" )
			self.transport.loseConnection()
			return
			
		a = data.split( '\x00' )[0].split( '||' )
		
		if a[0] == '1':
			self.factory.sendAll( '1||' + self.factory.stripChars( a[1] ) + '||' + self.factory.stripChars( a[2] ) + '\x00'  )
			
		elif a[0] == '2':
			self.transport.write( '2||' + str( self.factory.numProtocols )  + '\x00')


class AirChatFactory(Factory):
	protocol = AirChat
	numProtocols = 0
	clients = []
	
	def stripChars(self, textIn):
		textIn = textIn.replace('<', '')
		textIn = textIn.replace('</', '')
		textIn = textIn.replace('>', '')
		textIn = textIn.replace('/>', '')
		return textIn
	
	def addClient(self, newclient):
		self.clients.append( newclient )
	
	def delClient(self, client):
		self.clients.remove( client )
	
	def sendAll(self, message):
		for proto in self.clients:
			proto.transport.write( message )
	
	
class AirChatService( internet.TCPServer ):
	def __init__(self):
		internet.TCPServer.__init__(self, 80, AirChatFactory())


I think thats good for now. I dont have to create my own repository just manipulate the factory object, marvelous. Time for a pint.

Thanks,
Garyc

--- On Sun, 9/27/09, gary clark <burslem2001 at yahoo.com> wrote:

> From: gary clark <burslem2001 at yahoo.com>
> Subject: Twisted OpenSSL Server and multiple clients
> To: twisted-python at twistedmatrix.com
> Date: Sunday, September 27, 2009, 3:08 PM
> Hello,
> 
> I am new to Twisted, hence the red flag and patience card
> pulled out.
> 
> I have written a client that connects perfectly well to a
> twisted server thats using open-ssl to communicate to each
> other. Basically I took the open-ssl echo server example and
> tweaked it.
> 
> Thats all fine and dandy, but I want to have multiple
> clients that can connect to the server.
> 
> So I have a few questions:
> 
> 1) When a client connects to my server? What connection
> information
> ???can be collected and stored persistently?
> 
> 
> ???Upon a client connecting I want to store
> connection information and
> ???I want to remove connection information
> when its disconnected from 
> ???the persistent store.
> 
> 2) What persistent store is adopted for twisted if any?
> 
> 3) I want to know when a table has changed so I can then
> pull information
> ???from a table and use the connection
> information if present to send data 
> ???to my client. How is this accomplished in
> twisted?
> 
> Again I apologise in advance, if someone can shed some
> light into how twisted accomplishes the basic tasks of
> multiple clients thats great.
> 
> Oh boy.
> 
> Thanks,
> Garyc
> 
> 
> 
> 



From burslem2001 at yahoo.com  Mon Sep 28 07:15:11 2009
From: burslem2001 at yahoo.com (gary clark)
Date: Mon, 28 Sep 2009 04:15:11 -0700 (PDT)
Subject: [Twisted-Python] Knowing end of packet
Message-ID: <984345.38867.qm@web112504.mail.gq1.yahoo.com>

Hello,

I am sending a large amount of data to a twisted server. I want to know how
the protocol class knows that no more data is to be received. 

I dont pass the length of the data in the packet, hence I'm looking for a termination field in the packet.Like </MESSAGE>.

I did see a logging class but not sure if thats what I want. If I have to
overload the dataReceived method, and buffer the data until I see the termination field thats ok, just need to know if this seems correct in twisted.

Much appreciated for any help.

Thanks,
Garyc



From glyph at twistedmatrix.com  Mon Sep 28 07:29:30 2009
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Mon, 28 Sep 2009 07:29:30 -0400
Subject: [Twisted-Python] Knowing end of packet
In-Reply-To: <984345.38867.qm@web112504.mail.gq1.yahoo.com>
References: <984345.38867.qm@web112504.mail.gq1.yahoo.com>
Message-ID: <d9047f780909280429hf5a9c34l5c820141f974a257@mail.gmail.com>

On Mon, Sep 28, 2009 at 7:15 AM, gary clark <burslem2001 at yahoo.com> wrote:

> Hello,
>
> I am sending a large amount of data to a twisted server. I want to know how
> the protocol class knows that no more data is to be received.
>
> I dont pass the length of the data in the packet, hence I'm looking for a
> termination field in the packet.Like </MESSAGE>.
>

I think this FAQ might help you:

http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#Whyisprotocol.dataReceivedcalledwithonlypartofthedataIcalledtransport.writewith

Let us know if that answers your question.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090928/afff5b42/attachment.htm 

From burslem2001 at yahoo.com  Mon Sep 28 08:24:56 2009
From: burslem2001 at yahoo.com (gary clark)
Date: Mon, 28 Sep 2009 05:24:56 -0700 (PDT)
Subject: [Twisted-Python] Knowing end of packet
In-Reply-To: <d9047f780909280429hf5a9c34l5c820141f974a257@mail.gmail.com>
Message-ID: <836263.16845.qm@web112504.mail.gq1.yahoo.com>


Marvelous. Much appreciated. 

"from twisted.protocols.basic import NetstringReceiver"

Thanks,
Garyc
--- On Mon, 9/28/09, Glyph Lefkowitz <glyph at twistedmatrix.com> wrote:

> From: Glyph Lefkowitz <glyph at twistedmatrix.com>
> Subject: Re: [Twisted-Python] Knowing end of packet
> To: "Twisted general discussion" <twisted-python at twistedmatrix.com>
> Date: Monday, September 28, 2009, 6:29 AM
> On Mon, Sep 28,
> 2009 at 7:15 AM, gary clark <burslem2001 at yahoo.com>
> wrote:
> 
> Hello,
> 
> 
> 
> I am sending a large amount of data to a twisted server. I
> want to know how
> 
> the protocol class knows that no more data is to be
> received.
> 
> 
> 
> I dont pass the length of the data in the packet, hence
> I'm looking for a termination field in the packet.Like
> </MESSAGE>.
> 
> I think this FAQ might help you:
> 
> http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#Whyisprotocol.dataReceivedcalledwithonlypartofthedataIcalledtransport.writewith
> 
> 
> 
> Let us know if that answers your question.
> 
> 
> 
> -----Inline Attachment Follows-----
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 



From burslem2001 at yahoo.com  Mon Sep 28 09:07:05 2009
From: burslem2001 at yahoo.com (gary clark)
Date: Mon, 28 Sep 2009 06:07:05 -0700 (PDT)
Subject: [Twisted-Python] Twisted and db table changes
In-Reply-To: <836263.16845.qm@web112504.mail.gq1.yahoo.com>
Message-ID: <522237.35121.qm@web112510.mail.gq1.yahoo.com>

Hello,

I have a server that needs to track changes on a table database.

When a table changes it needs the server accesses the table and send data out.

Not sure what the best approach to do this in twisted. Do I create a thread in twisted and monitor for any changes in a table or can I create
a callback method to be triggered when a change occurs to table.

Thanks,
Garyc





From exarkun at twistedmatrix.com  Mon Sep 28 09:26:06 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 28 Sep 2009 13:26:06 -0000
Subject: [Twisted-Python] Having touble with spread.pb un-serializing
	an	object
In-Reply-To: <20090925034221.GD29130@intelerad.com>
References: <20090923190603.GB4116@intelerad.com>
	<20090923214226.1533.1467370706.divmod.xquotient.220@localhost.localdomain>
	<20090925034221.GD29130@intelerad.com>
Message-ID: <20090928132606.1533.1481101934.divmod.xquotient.384@localhost.localdomain>

On 25 Sep, 03:42 am, bash at intelerad.com wrote:
>Hi Jean-Paul,
>
>Here is a sample server and client code that demonstrates the problem
>with PB's unserialization code and objects that use __slots__.  The
>SlotsObject class implements __slots__ and the NoSlotsObject does not.
>The problem arises when de-serializing the SlotsObject.  The stack 
>trace
>is a little different than the original one I posted but the net-effect
>is the same; an AttributeError exception.

Hi Benjamin,

Thanks for the example.  I can reproduce the problem you're seeing.  I 
don't see any particular reason PB shouldn't support classes with 
__slots__.  Can you file a ticket and attach the example?

Thanks,
Jean-Paul


From steve at divillo.com  Mon Sep 28 12:46:14 2009
From: steve at divillo.com (Steve)
Date: Mon, 28 Sep 2009 09:46:14 -0700
Subject: [Twisted-Python] =?utf-8?q?PostgreSQL_LISTEN_NOTIFY_Example=3F?=
Message-ID: <20090928094614.e13ae574f475ea337c2ec5b0e03ebbf3.e25756b250.wbe@email02.secureserver.net>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090928/75b6d5fa/attachment.htm 

From steve at divillo.com  Mon Sep 28 12:58:46 2009
From: steve at divillo.com (Steve)
Date: Mon, 28 Sep 2009 09:58:46 -0700
Subject: [Twisted-Python] =?utf-8?q?PostgreSQL_LISTEN_NOTIFY_example=3F?=
Message-ID: <20090928095846.e13ae574f475ea337c2ec5b0e03ebbf3.91627d84aa.wbe@email02.secureserver.net>

My first message was sent as an HTML attachment - sorry!

Hello, this is my first post to this list. I only started exploring
Twisted less than a week ago.


One thing that I would like to do is trigger a function via the
PostgreSQL NOTIFY mechanism.


Does anyone have an example or link to an example of how to correctly do
this? I have something working but I am not sure if it is the best way.I
would post the code but I am at work right now.



From jacopo.pecci at gmail.com  Mon Sep 28 14:08:37 2009
From: jacopo.pecci at gmail.com (Jacopo Pecci)
Date: Mon, 28 Sep 2009 21:08:37 +0300
Subject: [Twisted-Python] reactor blocked
Message-ID: <295c22190909281108j3aa1a5baq3d6be5c173b6c9ae@mail.gmail.com>

How could I get the first result as soon as ready and therefore
parallelize things? I don?t want to block the reactor with further processing if
It has some results ready to be redurned.

thanks, Jacopo

SERVER:

fibo=Fibonacci()
fact=pb.PBServerFactory(fibo)
reactor.listenTCP(port, fact)
reactor.run()

CLIENT:

fact=pb.PBClientFactory()
reactor.connectTCP(host, port, fact)
d=fact.getRootObject()
n1=10000
d.addCallback(lambda obj: obj.callRemote("compute1", n1))
d.addCallback(elaborateResult1)
d2=fact.getRootObject()
n2=10000
d2.addCallback(lambda obj: obj.callRemote("compute2", n2))
d2.addCallback(elaborateResult2)
reactor.run()


From radix at twistedmatrix.com  Mon Sep 28 14:37:14 2009
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Mon, 28 Sep 2009 14:37:14 -0400
Subject: [Twisted-Python] Boston Twisted Sprint
In-Reply-To: <b282a1340909251058i40b2da73y8e2eb0722d2adb5e@mail.gmail.com>
References: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
	<60ed19d40909202033r75c1f225mf4e70c67483f8e48@mail.gmail.com>
	<d9047f780909220107h111e0671ic25f4a4c3156c58e@mail.gmail.com>
	<60ed19d40909220945v5bbaa14awd1ecd26a3c381214@mail.gmail.com>
	<b282a1340909251058i40b2da73y8e2eb0722d2adb5e@mail.gmail.com>
Message-ID: <60ed19d40909281137g29da9a9ckde2cb2aba168887@mail.gmail.com>

On Fri, Sep 25, 2009 at 1:58 PM, Jessica McKellar
<jessica.mckellar at gmail.com> wrote:
> This sounds like plenty of support for a Sprint! People have mostly
> expressed an ability to attend Monday, Tuesday, and Wednesday, so it seems

I'll see everyone there tonight.


-- 
Christopher Armstrong
http://radix.twistedmatrix.com/
http://planet-if.com/


From rutt.4 at osu.edu  Mon Sep 28 20:10:33 2009
From: rutt.4 at osu.edu (Benjamin Rutt)
Date: Mon, 28 Sep 2009 20:10:33 -0400
Subject: [Twisted-Python] getPeer() inside conch
Message-ID: <68f3f1f70909281710p1ddc3a47l134208c06b680cdb@mail.gmail.com>

Hello.  I'm moderately experienced with twisted, and am starting out writing
an ssh server using conch.  I'm writing a protocol which inherits from the
recvline.HistoricRecvLine class. It has connectionMade() and lineReceived()
methods so it feels a lot like the twisted.protocols.basic.LineReceiver
class I'm used to using.

But, it seems the recvline.HistoricRecvLine class wants me to use
self.terminal rather than self.transport to talk to the client.  That's
fine, but it seems that self.terminal lacks a getPeer() method.  How do I
find out the IP address of the client inside a conch ssh server?  (For
starters, I wish to log all successful client connections so I know who's
connecting).

I searched and found the below issue.  I assume it is related, but could
someone confirm?

http://twistedmatrix.com/trac/ticket/2453

Thanks.
-- 
Benjamin Rutt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090928/1d9fcb04/attachment.htm 

From glyph at twistedmatrix.com  Tue Sep 29 01:58:37 2009
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Tue, 29 Sep 2009 01:58:37 -0400
Subject: [Twisted-Python] getPeer() inside conch
In-Reply-To: <68f3f1f70909281710p1ddc3a47l134208c06b680cdb@mail.gmail.com>
References: <68f3f1f70909281710p1ddc3a47l134208c06b680cdb@mail.gmail.com>
Message-ID: <d9047f780909282258v167e852cl76105ba92adb976a@mail.gmail.com>

On Mon, Sep 28, 2009 at 8:10 PM, Benjamin Rutt <rutt.4 at osu.edu> wrote:


> But, it seems the recvline.HistoricRecvLine class wants me to use
> self.terminal rather than self.transport to talk to the client.  That's
> fine, but it seems that self.terminal lacks a getPeer() method.  How do I
> find out the IP address of the client inside a conch ssh server?  (For
> starters, I wish to log all successful client connections so I know who's
> connecting).
>

So, after reading through the code a bit, self.terminal should be an
ITerminalTransport.  There are only a few ITerminalTransport
implementations, several of which are also Protocol subclasses and therefore
have a 'transport' attribute.

I'm not 100% sure what the eventual composiiton of your application will be,
but you could try self.terminal.transport.getPeer(); it might work.

Technically speaking, ITerminalTransport is a subclass of ITransport, which
has a getPeer method.  Therefore any classes which implement
ITerminalTransport without providing getPeer are buggy.  It would be really
helpful if you could provide a patch that addressed the issue you mention
:).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090929/fa62648f/attachment.htm 

From antonio.beamud at gmail.com  Tue Sep 29 04:27:34 2009
From: antonio.beamud at gmail.com (Antonio Beamud Montero)
Date: Tue, 29 Sep 2009 10:27:34 +0200
Subject: [Twisted-Python] AlreadyCalledError trying more than a server
Message-ID: <4AC1C4F6.1060609@gmail.com>

Hi all:
I've implemented my client as comes in twisted documentation
(FingerProxy example).
I want to connect with several machines at the same time, send and
receive data from this servers and start again (monitoring in one word).

I've created a ClientFactory and a loop like this:

    conf['hosts'] = [list of hostnames]
    commands = [list of string commands, like 'status' or 'temp']
    def runall(data):
        nodes = []

        for h in conf['hosts']:
                mcf = manager.ClientFactory(commands)
                reactor.connectTCP(h, SERVER_PORT, mcf)
                nodes.append(mcf.deferred)

        dlist = defer.DeferredList(nodes)
        dlist.addCallback(runall)
        dlist.addErrback(lambda _: None)

Only when the ClientFactory receives a 'bye' response, call's the
d.callback('ok').
With a only host, works perfect, but trying to run against two o more
hosts, the next exception is raised:

File "/usr/lib/python2.6/site-packages/twisted/internet/defer.py", line
293, in _startRunCallbacks
    raise AlreadyCalledError
twisted.internet.defer.AlreadyCalledError:

In my debug console:

This is the deferredList
[<Deferred at 0x84c3d6c>, <Deferred at 0x852d1ac>]
...
IPv4Address(TCP, 'ira', 10162) <Deferred at 0x84c3d6c>
IPv4Address(TCP, 'lujuria', 10162) <Deferred at 0x84c3d6c  current
result: 'ok'>

Twisted is invoking the same deferred, and chaining them, the 'ok'
result is produced by the 'ira' callback invokation instead using everly
deferred separately.

What I'm doing wrong...?

A lot of thanks.




From exarkun at twistedmatrix.com  Tue Sep 29 11:11:29 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 29 Sep 2009 15:11:29 -0000
Subject: [Twisted-Python] Twisted and db table changes
In-Reply-To: <522237.35121.qm@web112510.mail.gq1.yahoo.com>
References: <836263.16845.qm@web112504.mail.gq1.yahoo.com>
	<522237.35121.qm@web112510.mail.gq1.yahoo.com>
Message-ID: <20090929151129.1533.1787329823.divmod.xquotient.403@localhost.localdomain>

On 28 Sep, 01:07 pm, burslem2001 at yahoo.com wrote:
>Hello,
>
>I have a server that needs to track changes on a table database.
>
>When a table changes it needs the server accesses the table and send 
>data out.
>
>Not sure what the best approach to do this in twisted. Do I create a 
>thread in twisted and monitor for any changes in a table or can I 
>create
>a callback method to be triggered when a change occurs to table.

There's nothing special in Twisted for this.  If your database provides 
callback functionality, then you should be able to hook this up to your 
Twisted application somehow.  If you provide some more information about 
this, someone may be able to help you figure out how to do that.  If 
your database doesn't, then you either need a separate out-of-band 
notification when updates happen or you need to poll the database.

Jean-Paul


From exarkun at twistedmatrix.com  Tue Sep 29 12:24:43 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 29 Sep 2009 16:24:43 -0000
Subject: [Twisted-Python] AlreadyCalledError trying more than a server
In-Reply-To: <4AC1C4F6.1060609@gmail.com>
References: <4AC1C4F6.1060609@gmail.com>
Message-ID: <20090929162443.1533.1953865337.divmod.xquotient.405@localhost.localdomain>

On 08:27 am, antonio.beamud at gmail.com wrote:
>Hi all:
>I've implemented my client as comes in twisted documentation
>(FingerProxy example).
>I want to connect with several machines at the same time, send and
>receive data from this servers and start again (monitoring in one 
>word).
>
>I've created a ClientFactory and a loop like this:
>
>    conf['hosts'] = [list of hostnames]
>    commands = [list of string commands, like 'status' or 'temp']
>    def runall(data):
>        nodes = []
>
>        for h in conf['hosts']:
>                mcf = manager.ClientFactory(commands)
>                reactor.connectTCP(h, SERVER_PORT, mcf)
>                nodes.append(mcf.deferred)
>
>        dlist = defer.DeferredList(nodes)
>        dlist.addCallback(runall)
>        dlist.addErrback(lambda _: None)
>
>Only when the ClientFactory receives a 'bye' response, call's the
>d.callback('ok').
>With a only host, works perfect, but trying to run against two o more
>hosts, the next exception is raised:
>
>File "/usr/lib/python2.6/site-packages/twisted/internet/defer.py", line
>293, in _startRunCallbacks
>    raise AlreadyCalledError
>twisted.internet.defer.AlreadyCalledError:
>
>In my debug console:
>
>This is the deferredList
>[<Deferred at 0x84c3d6c>, <Deferred at 0x852d1ac>]
>...
>IPv4Address(TCP, 'ira', 10162) <Deferred at 0x84c3d6c>
>IPv4Address(TCP, 'lujuria', 10162) <Deferred at 0x84c3d6c  current
>result: 'ok'>
>
>Twisted is invoking the same deferred, and chaining them, the 'ok'
>result is produced by the 'ira' callback invokation instead using 
>everly
>deferred separately.
>
>What I'm doing wrong...?

I don't think you've shared enough of your code for anyone to figure out 
what you're doing wrong (aside from calling one Deferred's callback 
method more than once).  Your "runall" function above looks okay, so 
perhaps the problem is in some other part of your code.  An SSCCE 
(<http://sscce.org/>) would be the best thing for you to share.

Jean-Paul


From matusis at yahoo.com  Tue Sep 29 14:16:40 2009
From: matusis at yahoo.com (Alec Matusis)
Date: Tue, 29 Sep 2009 11:16:40 -0700
Subject: [Twisted-Python] I found an interisting comment about Twisted vs.
	Erlang
Message-ID: <01e801ca4130$fe2120a0$fa6361e0$@com>

I have been a long time Twisted user, and I do not know Erlang.
I run into this interesting comment in engineering notes on Facebook Chat
scalability:

http://www.facebook.com/note.php?note_id=51412338919&comments

?Leif K-Brooks
I'm curious whether you considered using the Python library Twisted
(http://twistedmatrix.com/) before deciding on Erlang. Its architecture is
also supposed to be able to support a large number of concurrent
connections. I would be interested in hearing about any issues you
discovered with it.
February 18 at 3:17am ??Report

Lawrence Oluyede
TwistedMatrix does not possess the capabilities of Erlang, not even close.
February 18 at 4:35am ??Report
 

What do you guys think?




From listsin at integrateddevcorp.com  Tue Sep 29 15:02:21 2009
From: listsin at integrateddevcorp.com (Steve Steiner (listsin))
Date: Tue, 29 Sep 2009 15:02:21 -0400
Subject: [Twisted-Python] I found an interisting comment about Twisted
	vs. Erlang
In-Reply-To: <01e801ca4130$fe2120a0$fa6361e0$@com>
References: <01e801ca4130$fe2120a0$fa6361e0$@com>
Message-ID: <F68410CC-9772-491C-911D-CD9F96EFFC38@integrateddevcorp.com>


On Sep 29, 2009, at 2:16 PM, Alec Matusis wrote:

> I have been a long time Twisted user, and I do not know Erlang.
> I run into this interesting comment in engineering notes on Facebook  
> Chat
> scalability:
>
> http://www.facebook.com/note.php?note_id=51412338919&comments
>
> ?Leif K-Brooks
> I'm curious whether you considered using the Python library Twisted
> (http://twistedmatrix.com/) before deciding on Erlang. Its  
> architecture is
> also supposed to be able to support a large number of concurrent
> connections. I would be interested in hearing about any issues you
> discovered with it.
> February 18 at 3:17am ? Report
>
> Lawrence Oluyede
> TwistedMatrix does not possess the capabilities of Erlang, not even  
> close.
> February 18 at 4:35am ? Report
> What do you guys think?

Doesn't sound like he even knows the name of the library.

I'm sure they did a thorough analysis  ;-).

S



From markv at lumierevfx.com  Tue Sep 29 15:04:20 2009
From: markv at lumierevfx.com (Mark Visser)
Date: Tue, 29 Sep 2009 15:04:20 -0400
Subject: [Twisted-Python] Twisted and db table changes
In-Reply-To: <522237.35121.qm@web112510.mail.gq1.yahoo.com>
References: <522237.35121.qm@web112510.mail.gq1.yahoo.com>
Message-ID: <4AC25A34.3050202@lumierevfx.com>

gary clark wrote:
> Hello,
>
> I have a server that needs to track changes on a table database.
>
> When a table changes it needs the server accesses the table and send data out.
>
> Not sure what the best approach to do this in twisted. Do I create a thread in twisted and monitor for any changes in a table or can I create
> a callback method to be triggered when a change occurs to table.
>   
Check out twisted.internet.task.LoopingCall. It will run a callback 
periodically, during which you can poll for changes.


-- 
Mark Visser, Software Director
Lumi?re VFX
Email: markv at lumierevfx.com
Phone: +1-514-316-1080 x3030



From listsin at integrateddevcorp.com  Tue Sep 29 15:08:44 2009
From: listsin at integrateddevcorp.com (Steve Steiner (listsin))
Date: Tue, 29 Sep 2009 15:08:44 -0400
Subject: [Twisted-Python] strange exception on Python 2.6 + Snow Leopard
In-Reply-To: <413E681C-F5D0-4C8E-BF70-7B28347454FA@bubblehouse.org>
References: <AE767569-997B-4F1C-9F4F-E984E4659B0E@bubblehouse.org>
	<B23801ED-A811-4221-A110-6B363DA00319@integrateddevcorp.com>
	<413E681C-F5D0-4C8E-BF70-7B28347454FA@bubblehouse.org>
Message-ID: <2324094B-A1AF-47BA-ADD2-0E1004EFBC43@integrateddevcorp.com>

> Hmm, sorry to question, but are you sure?

You're right, different error.  Sorry for not replying earlier -- just  
found this when Googling for 10.6 build instructions as I'm having a  
devil of a time building from SVN on 10.6 with Python 2.6.1.

S




From lvh at laurensvh.be  Tue Sep 29 15:11:54 2009
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Tue, 29 Sep 2009 21:11:54 +0200
Subject: [Twisted-Python] I found an interisting comment about Twisted
	vs. Erlang
In-Reply-To: <F68410CC-9772-491C-911D-CD9F96EFFC38@integrateddevcorp.com>
References: <01e801ca4130$fe2120a0$fa6361e0$@com>
	<F68410CC-9772-491C-911D-CD9F96EFFC38@integrateddevcorp.com>
Message-ID: <cedc0c090909291211i6a1d7536r5c9ea1bbe9a1861@mail.gmail.com>

One is a language. The other is an event loop. I'm not sure how we are
supposed to compare the two. If he would've said E and Twisted,
perhaps it'd be a more interesting comparison :-)

Also, what Steve said jumped right into my eye as well. Don't get me
wrong. I like Erlang -- it's functional, it's robust, it's very easy
to make your programs execute in parallel. RabbitMQ and Scalaris are
two examples of *excellent* Erlang software. I don't really think
Erlang was a bad choice -- I just think they don't know enough about
Twisted to judge :-)


Laurens


From drew.smathers at gmail.com  Tue Sep 29 15:22:35 2009
From: drew.smathers at gmail.com (Drew Smathers)
Date: Tue, 29 Sep 2009 15:22:35 -0400
Subject: [Twisted-Python] I found an interisting comment about Twisted
	vs. Erlang
In-Reply-To: <01e801ca4130$fe2120a0$fa6361e0$@com>
References: <01e801ca4130$fe2120a0$fa6361e0$@com>
Message-ID: <368574aa0909291222g514a0f3fn5df64dacbf0c4e25@mail.gmail.com>

On Tue, Sep 29, 2009 at 2:16 PM, Alec Matusis <matusis at yahoo.com> wrote:

> I have been a long time Twisted user, and I do not know Erlang.
> I run into this interesting comment in engineering notes on Facebook Chat
> scalability:
>
> http://www.facebook.com/note.php?note_id=51412338919&comments
>
> ?Leif K-Brooks
> I'm curious whether you considered using the Python library Twisted
> (http://twistedmatrix.com/) before deciding on Erlang. Its architecture is
> also supposed to be able to support a large number of concurrent
> connections. I would be interested in hearing about any issues you
> discovered with it.
> February 18 at 3:17am ? Report
>
> Lawrence Oluyede
> TwistedMatrix does not possess the capabilities of Erlang, not even close.
> February 18 at 4:35am ? Report
>
>
> What do you guys think?
>
>
I remember reading that comment and sighing to myself.  First of all:

1. Twisted is a framework for event-driven programming
2. Erlang is a programming language / VM

So any comparison between the two doesn't make much sense.

Secondly, the use of the term "TwistedMatrix" indicates pretty strongly that
the poster knows next-to-nothing about Twisted.    At surface level the
comment is completely unqualified, lacking any detail.

<sarcasm>It doesn't "possess the capabilities" of Erlang?  So Erlang has
some unspecified capabilities (they most be really important ones) that
Twisted obviously does not.  That's great to know.  Thanks for the detail
there Mr. Oluyede.</sarcasm>

A comparison between Erlang and Python the VMs might be more interesting.
First of all, Erlang was developed from the ground up with performance and
concurrency in mind, whereas Python was not.  The primary design concern of
Python, arguably, was to develop a language that was easy to learn with a
syntax that lended itself to programs that are easy to read and thus easy to
maintain.

A fast VM is great, but do you want that at the expense of having less
choices for third-party libraries or having to learn an entirely different
language paradigm.  If you work primarily with OOP, for example, Erlang
might be a dramatic shift for your development team - switching to FP.
That's not much fun if programming is your livlihood moreso than a hobby.

Personally I prefer Python to Erlang accepting the performance trade-off.
There's more choices when it comes to open-source libraries for the language
and it performs well enough.  I'm writing production applications in Python
using Twisted and we have 0 issues with performance (memory, CPU, IO).
Twisted does handle a large number of connections.  The issues we've run
into in our application have always been at a layer above Twisted (i.e. our
shit that's broken, not Twisted).  It performs, it's stable.  So ... what
are my motiviations for abandoning Python/Twisted in favor or Erlang?

Let me just say though that I really like Erlang.  I think it's a decent
language with simple-enough syntax and a kick-ass concurrency paradigm -
shared nothing and message passing.  It looks like things are also
dramatically improving in the Erlang open-space (and it seems this is
improving dramatically: http://erlware.org/erlware/index.html), so it might
not be long before there are as many or more library choices for Erlang as
Python.

Nonethelless, please let first-hand experience using a language, gaining
productivity and then buy-in from your development team be the key deciding
factors - not some arbitrary number in a benchmark test or even worse a
completely uninformed comment on a Facebook dev blog post.

-Drew
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090929/8efee957/attachment.htm 

From lvh at laurensvh.be  Tue Sep 29 15:28:00 2009
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Tue, 29 Sep 2009 21:28:00 +0200
Subject: [Twisted-Python] I found an interisting comment about Twisted
	vs. Erlang
In-Reply-To: <368574aa0909291222g514a0f3fn5df64dacbf0c4e25@mail.gmail.com>
References: <01e801ca4130$fe2120a0$fa6361e0$@com>
	<368574aa0909291222g514a0f3fn5df64dacbf0c4e25@mail.gmail.com>
Message-ID: <cedc0c090909291228n73eead25gd9235649d96f7cb3@mail.gmail.com>

I think we are accounting way too much time to the unfounded
unaccountable random blathering of a troll :-)


From matusis at yahoo.com  Tue Sep 29 15:36:54 2009
From: matusis at yahoo.com (Alec Matusis)
Date: Tue, 29 Sep 2009 12:36:54 -0700
Subject: [Twisted-Python] I found an interisting comment about
	Twisted	vs. Erlang
In-Reply-To: <cedc0c090909291228n73eead25gd9235649d96f7cb3@mail.gmail.com>
References: <01e801ca4130$fe2120a0$fa6361e0$@com>	<368574aa0909291222g514a0f3fn5df64dacbf0c4e25@mail.gmail.com>
	<cedc0c090909291228n73eead25gd9235649d96f7cb3@mail.gmail.com>
Message-ID: <024901ca413c$337e7850$9a7b68f0$@com>

> I think we are accounting way too much time to the unfounded
> unaccountable random blathering of a troll :-)


As you can see from the %CPU column, I have my reasons for concern ;) This
is current copy and paste from a node with 2x quad core xeon L5420  @
2.50GHz - 1 twistd process per core.

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND

24448 nobody     20   0  991m 607m 2452 R   99  4.3  24764:37 twistd

28553 nobody     20   0  909m 453m 2412 R   95  3.2   1346:51 twistd

24640 nobody     20   0 1092m 676m 2452 R   93  4.8  32750:14 twistd

29900 nobody     20   0  802m 362m 2412 R   93  2.6   1180:53 twistd

24279 nobody     20   0  761m 277m 2424 R   42  2.0  13891:58 twistd

32422 nobody     20   0 1381m 962m 2372 R   10  6.9  13241:54 twistd

24210 nobody     20   0  599m 236m 2396 S    4  1.7   9063:29 twistd

29862 nobody     20   0  323m  14m 2384 S    2  0.1  71:53.50 twistd     



> -----Original Message-----
> From: twisted-python-bounces at twistedmatrix.com [mailto:twisted-python-
> bounces at twistedmatrix.com] On Behalf Of Laurens Van Houtven
> Sent: Tuesday, September 29, 2009 12:28 PM
> To: Twisted general discussion
> Subject: Re: [Twisted-Python] I found an interisting comment about
> Twisted vs. Erlang
> 
> I think we are accounting way too much time to the unfounded
> unaccountable random blathering of a troll :-)
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From jkakar at kakar.ca  Tue Sep 29 15:48:17 2009
From: jkakar at kakar.ca (Jamu Kakar)
Date: Tue, 29 Sep 2009 12:48:17 -0700
Subject: [Twisted-Python] I found an interisting comment about Twisted
	vs. Erlang
In-Reply-To: <024901ca413c$337e7850$9a7b68f0$@com>
References: <01e801ca4130$fe2120a0$fa6361e0$@com>
	<368574aa0909291222g514a0f3fn5df64dacbf0c4e25@mail.gmail.com>
	<cedc0c090909291228n73eead25gd9235649d96f7cb3@mail.gmail.com>
	<024901ca413c$337e7850$9a7b68f0$@com>
Message-ID: <aa66e7aa0909291248j4e21d702q5d59fcd7b6703274@mail.gmail.com>

Hi Alec,

On Tue, Sep 29, 2009 at 12:36 PM, Alec Matusis <matusis at yahoo.com> wrote:
> As you can see from the %CPU column, I have my reasons for concern ;) This
> is current copy and paste from a node with 2x quad core xeon L5420 ?@
> 2.50GHz - 1 twistd process per core.
>
> ?PID USER ? ? ?PR ?NI ?VIRT ?RES ?SHR S %CPU %MEM ? ?TIME+ ?COMMAND
>
> 24448 nobody ? ? 20 ? 0 ?991m 607m 2452 R ? 99 ?4.3 ?24764:37 twistd
>
> 28553 nobody ? ? 20 ? 0 ?909m 453m 2412 R ? 95 ?3.2 ? 1346:51 twistd
>
> 24640 nobody ? ? 20 ? 0 1092m 676m 2452 R ? 93 ?4.8 ?32750:14 twistd
>
> 29900 nobody ? ? 20 ? 0 ?802m 362m 2412 R ? 93 ?2.6 ? 1180:53 twistd
>
> 24279 nobody ? ? 20 ? 0 ?761m 277m 2424 R ? 42 ?2.0 ?13891:58 twistd
>
> 32422 nobody ? ? 20 ? 0 1381m 962m 2372 R ? 10 ?6.9 ?13241:54 twistd
>
> 24210 nobody ? ? 20 ? 0 ?599m 236m 2396 S ? ?4 ?1.7 ? 9063:29 twistd
>
> 29862 nobody ? ? 20 ? 0 ?323m ?14m 2384 S ? ?2 ?0.1 ?71:53.50 twistd

What was your application doing at the time?  Was it idle, heavily
loaded, somewhere in the middle?  What is the QoS for each client
connecting to your service?  Are requests being handled in a timely
fashion?  Do the users of your service perceive a performance
problem or do you just not like seeing big numbers in the %CPU
column?  Are performance problems really in Twisted, or are they
because of suboptimal decisions in application logic/factoring?

Posting a list like that and suggesting that something is wrong (or
right, even) with Twisted isn't really productive: there's nowhere
obvious to go from here to make it better.

My first glance at those numbers made me think Twisted is awesome
because it lets you write an application that can actually make full
use of the CPU power you have, but I'm guessing that's not what
you're getting at. :)

Thanks,
J.


From matusis at yahoo.com  Tue Sep 29 15:51:26 2009
From: matusis at yahoo.com (Alec Matusis)
Date: Tue, 29 Sep 2009 12:51:26 -0700
Subject: [Twisted-Python] I found an interisting comment about	Twisted	vs.
	Erlang
Message-ID: <026001ca413e$3b99e680$b2cdb380$@com>

PS.


From matusis at yahoo.com  Tue Sep 29 16:00:40 2009
From: matusis at yahoo.com (Alec Matusis)
Date: Tue, 29 Sep 2009 13:00:40 -0700
Subject: [Twisted-Python] I found an interisting comment about
	Twisted	vs. Erlang
In-Reply-To: <aa66e7aa0909291248j4e21d702q5d59fcd7b6703274@mail.gmail.com>
References: <01e801ca4130$fe2120a0$fa6361e0$@com>	<368574aa0909291222g514a0f3fn5df64dacbf0c4e25@mail.gmail.com>	<cedc0c090909291228n73eead25gd9235649d96f7cb3@mail.gmail.com>	<024901ca413c$337e7850$9a7b68f0$@com>
	<aa66e7aa0909291248j4e21d702q5d59fcd7b6703274@mail.gmail.com>
Message-ID: <026a01ca413f$857ce3a0$9076aae0$@com>

> What was your application doing at the time?  Was it idle, heavily
> loaded, somewhere in the middle?  What is the QoS for each client
> connecting to your service?  Are requests being handled in a timely
> fashion?  Do the users of your service perceive a performance
> problem or do you just not like seeing big numbers in the %CPU
> column?  Are performance problems really in Twisted, or are they
> because of suboptimal decisions in application logic/factoring?
> 
> Posting a list like that and suggesting that something is wrong (or
> right, even) with Twisted isn't really productive: there's nowhere
> obvious to go from here to make it better.
> 
> My first glance at those numbers made me think Twisted is awesome
> because it lets you write an application that can actually make full
> use of the CPU power you have, but I'm guessing that's not what
> you're getting at. :)

I am actually not suggesting the performance is bad, it's quite decent. 

Each process is handling about 30,000 clients, using epoll reactor, and is heavily loaded as you can see from S column, which shows "R".  The app broadcasts the messages sent from a client to groups of other clients, and has some other logic.
I posted this twice by mistake, but as I wrote in my second post, the debugging is pretty hard, esp memory leaks... Also, performance debugging- say how much time is spent in each function? FB engineers seems to say that debugging of E is transparent, but I do not have the first hand knowledge. 

> -----Original Message-----
> From: twisted-python-bounces at twistedmatrix.com [mailto:twisted-python-
> bounces at twistedmatrix.com] On Behalf Of Jamu Kakar
> Sent: Tuesday, September 29, 2009 12:48 PM
> To: Twisted general discussion
> Subject: Re: [Twisted-Python] I found an interisting comment about
> Twisted vs. Erlang
> 
> Hi Alec,
> 
> On Tue, Sep 29, 2009 at 12:36 PM, Alec Matusis <matusis at yahoo.com>
> wrote:
> > As you can see from the %CPU column, I have my reasons for concern ;)
> This
> > is current copy and paste from a node with 2x quad core xeon L5420  @
> > 2.50GHz - 1 twistd process per core.
> >
> >  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
> >
> > 24448 nobody     20   0  991m 607m 2452 R   99  4.3  24764:37 twistd
> >
> > 28553 nobody     20   0  909m 453m 2412 R   95  3.2   1346:51 twistd
> >
> > 24640 nobody     20   0 1092m 676m 2452 R   93  4.8  32750:14 twistd
> >
> > 29900 nobody     20   0  802m 362m 2412 R   93  2.6   1180:53 twistd
> >
> > 24279 nobody     20   0  761m 277m 2424 R   42  2.0  13891:58 twistd
> >
> > 32422 nobody     20   0 1381m 962m 2372 R   10  6.9  13241:54 twistd
> >
> > 24210 nobody     20   0  599m 236m 2396 S    4  1.7   9063:29 twistd
> >
> > 29862 nobody     20   0  323m  14m 2384 S    2  0.1  71:53.50 twistd
> 
> What was your application doing at the time?  Was it idle, heavily
> loaded, somewhere in the middle?  What is the QoS for each client
> connecting to your service?  Are requests being handled in a timely
> fashion?  Do the users of your service perceive a performance
> problem or do you just not like seeing big numbers in the %CPU
> column?  Are performance problems really in Twisted, or are they
> because of suboptimal decisions in application logic/factoring?
> 
> Posting a list like that and suggesting that something is wrong (or
> right, even) with Twisted isn't really productive: there's nowhere
> obvious to go from here to make it better.
> 
> My first glance at those numbers made me think Twisted is awesome
> because it lets you write an application that can actually make full
> use of the CPU power you have, but I'm guessing that's not what
> you're getting at. :)
> 
> Thanks,
> J.
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From phil at bubblehouse.org  Tue Sep 29 16:37:22 2009
From: phil at bubblehouse.org (Phil Christensen)
Date: Tue, 29 Sep 2009 16:37:22 -0400
Subject: [Twisted-Python] strange exception on Python 2.6 + Snow Leopard
In-Reply-To: <2324094B-A1AF-47BA-ADD2-0E1004EFBC43@integrateddevcorp.com>
References: <AE767569-997B-4F1C-9F4F-E984E4659B0E@bubblehouse.org>
	<B23801ED-A811-4221-A110-6B363DA00319@integrateddevcorp.com>
	<413E681C-F5D0-4C8E-BF70-7B28347454FA@bubblehouse.org>
	<2324094B-A1AF-47BA-ADD2-0E1004EFBC43@integrateddevcorp.com>
Message-ID: <E49D8702-DE0B-496C-9DE4-60FB1D8AA81E@bubblehouse.org>

On Sep 29, 2009, at 3:08 PM, Steve Steiner (listsin) wrote:
>> Hmm, sorry to question, but are you sure?
>
> You're right, different error.  Sorry for not replying earlier -- just
> found this when Googling for 10.6 build instructions as I'm having a
> devil of a time building from SVN on 10.6 with Python 2.6.1.

No worries, I'm glad you bumped this thread. I'm still seeing the  
traceback on startup (exceptions.AttributeError: 'module' object has  
no attribute 'ssl_test'), although they haven't affected my use of  
Twisted. Just annoying to see, that's all.

What kind of build problems are you having? I just updated/installed  
SVN HEAD without much of a problem using `python setup.py develop`.

I do see the following issues during compilation, which cause the  
epoll reactor to fail. I don't use the epoll reactor, so I haven't  
bothered trying to fix it:

gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -fwrapv - 
Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch ppc - 
arch x86_64 -pipe -I/System/Library/Frameworks/Python.framework/ 
Versions/2.6/include/python2.6 -c conftest.c -o conftest.o
gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -fwrapv - 
Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch ppc - 
arch x86_64 -pipe -I/System/Library/Frameworks/Python.framework/ 
Versions/2.6/include/python2.6 -c conftest.c -o conftest.o
conftest.c:1:23: error: sys/epoll.h: No such file or directory
conftest.c:1:23: error: sys/epoll.h: No such file or directory
conftest.c:1:23: error: sys/epoll.h: No such file or directory
lipo: can't open input file: /var/tmp//ccGt0yAW.out (No such file or  
directory)



-phil


From exarkun at twistedmatrix.com  Tue Sep 29 16:42:33 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 29 Sep 2009 20:42:33 -0000
Subject: [Twisted-Python] strange exception on Python 2.6 + Snow Leopard
In-Reply-To: <E49D8702-DE0B-496C-9DE4-60FB1D8AA81E@bubblehouse.org>
References: <AE767569-997B-4F1C-9F4F-E984E4659B0E@bubblehouse.org>
	<B23801ED-A811-4221-A110-6B363DA00319@integrateddevcorp.com>
	<413E681C-F5D0-4C8E-BF70-7B28347454FA@bubblehouse.org>
	<2324094B-A1AF-47BA-ADD2-0E1004EFBC43@integrateddevcorp.com>
	<E49D8702-DE0B-496C-9DE4-60FB1D8AA81E@bubblehouse.org>
Message-ID: <20090929204233.1533.1544059758.divmod.xquotient.420@localhost.localdomain>

On 08:37 pm, phil at bubblehouse.org wrote:
>On Sep 29, 2009, at 3:08 PM, Steve Steiner (listsin) wrote:
>>>Hmm, sorry to question, but are you sure?
>>
>>You're right, different error.  Sorry for not replying earlier -- just
>>found this when Googling for 10.6 build instructions as I'm having a
>>devil of a time building from SVN on 10.6 with Python 2.6.1.
>
>No worries, I'm glad you bumped this thread. I'm still seeing the
>traceback on startup (exceptions.AttributeError: 'module' object has
>no attribute 'ssl_test'), although they haven't affected my use of
>Twisted. Just annoying to see, that's all.
>
>What kind of build problems are you having? I just updated/installed
>SVN HEAD without much of a problem using `python setup.py develop`.
>
>I do see the following issues during compilation, which cause the
>epoll reactor to fail. I don't use the epoll reactor, so I haven't
>bothered trying to fix it:
>
>gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -fwrapv -
>Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch ppc -
>arch x86_64 -pipe -I/System/Library/Frameworks/Python.framework/
>Versions/2.6/include/python2.6 -c conftest.c -o conftest.o
>gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -fwrapv -
>Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch ppc -
>arch x86_64 -pipe -I/System/Library/Frameworks/Python.framework/
>Versions/2.6/include/python2.6 -c conftest.c -o conftest.o
>conftest.c:1:23: error: sys/epoll.h: No such file or directory
>conftest.c:1:23: error: sys/epoll.h: No such file or directory
>conftest.c:1:23: error: sys/epoll.h: No such file or directory
>lipo: can't open input file: /var/tmp//ccGt0yAW.out (No such file or
>directory)

These aren't really fixable.  OS X does not have epoll.  The epoll 
reactor is for Linux.

Jean-Paul


From listsin at integrateddevcorp.com  Tue Sep 29 16:44:22 2009
From: listsin at integrateddevcorp.com (Steve Steiner (listsin))
Date: Tue, 29 Sep 2009 16:44:22 -0400
Subject: [Twisted-Python] strange exception on Python 2.6 + Snow Leopard
In-Reply-To: <E49D8702-DE0B-496C-9DE4-60FB1D8AA81E@bubblehouse.org>
References: <AE767569-997B-4F1C-9F4F-E984E4659B0E@bubblehouse.org>
	<B23801ED-A811-4221-A110-6B363DA00319@integrateddevcorp.com>
	<413E681C-F5D0-4C8E-BF70-7B28347454FA@bubblehouse.org>
	<2324094B-A1AF-47BA-ADD2-0E1004EFBC43@integrateddevcorp.com>
	<E49D8702-DE0B-496C-9DE4-60FB1D8AA81E@bubblehouse.org>
Message-ID: <565137B7-868F-4A75-987F-2003D1E5AEB5@integrateddevcorp.com>


On Sep 29, 2009, at 4:37 PM, Phil Christensen wrote:

> On Sep 29, 2009, at 3:08 PM, Steve Steiner (listsin) wrote:
>>> Hmm, sorry to question, but are you sure?
>>
>> You're right, different error.  Sorry for not replying earlier --  
>> just
>> found this when Googling for 10.6 build instructions as I'm having a
>> devil of a time building from SVN on 10.6 with Python 2.6.1.
>
> No worries, I'm glad you bumped this thread. I'm still seeing the  
> traceback on startup (exceptions.AttributeError: 'module' object has  
> no attribute 'ssl_test'), although they haven't affected my use of  
> Twisted. Just annoying to see, that's all.
>
> What kind of build problems are you having? I just updated/installed  
> SVN HEAD without much of a problem using `python setup.py develop`.

Mine goes much more horribly wrong than the error you listed...  It  
looks like, now that I look more closely, it's trying to build against  
the 10.4SDK which I think I may not have installed.  Maybe that's all  
it is!

Thanks,

S


thon setup.py develop
running develop
running egg_info
writing requirements to Twisted.egg-info/requires.txt
writing Twisted.egg-info/PKG-INFO
writing top-level names to Twisted.egg-info/top_level.txt
writing dependency_links to Twisted.egg-info/dependency_links.txt
unrecognized .svn/entries format in
reading manifest file 'Twisted.egg-info/SOURCES.txt'
writing manifest file 'Twisted.egg-info/SOURCES.txt'
running build_ext
Compiling with an SDK that doesn't seem to exist: /Developer/SDKs/ 
MacOSX10.4u.sdk
Please check your Xcode installation
gcc -arch ppc -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk - 
fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -O3 -I/Library/ 
Frameworks/Python.framework/Versions/2.6/include/python2.6 -c  
conftest.c -o conftest.o
conftest.c:1:21: error: rpc/rpc.h: No such file or directory
conftest.c:1:21: error: rpc/rpc.h: No such file or directory
lipo: can't figure out the architecture type of: /var/folders/ 
71/716EyABBHM8EA6F853Q-vU+++TI/-Tmp-//cc7bbdzM.out
Compiling with an SDK that doesn't seem to exist: /Developer/SDKs/ 
MacOSX10.4u.sdk
Please check your Xcode installation
gcc -arch ppc -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk - 
fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -O3 -I/Library/ 
Frameworks/Python.framework/Versions/2.6/include/python2.6 -c  
conftest.c -o conftest.o
conftest.c:1:23: error: sys/epoll.h: No such file or directory
conftest.c:1:23: error: sys/epoll.h: No such file or directory
lipo: can't figure out the architecture type of: /var/folders/ 
71/716EyABBHM8EA6F853Q-vU+++TI/-Tmp-//cc954vfC.out
building 'twisted.protocols._c_urlarg' extension
Compiling with an SDK that doesn't seem to exist: /Developer/SDKs/ 
MacOSX10.4u.sdk
Please check your Xcode installation
gcc -arch ppc -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk - 
fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -O3 -I/Library/ 
Frameworks/Python.framework/Versions/2.6/include/python2.6 -c twisted/ 
protocols/_c_urlarg.c -o build/temp.macosx-10.3-i386-2.6/twisted/ 
protocols/_c_urlarg.o
In file included from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:19:20: error: limits.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:22:2: error: #error "Something's broken.  UCHAR_MAX should be  
defined in limits.h."
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:26:2: error: #error "Python's source code assumes C's  
unsigned char is an 8-bit type."
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:33:19: error: stdio.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:35:5: error: #error "Python.h requires that stdio.h define  
NULL."
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:38:20: error: string.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:40:19: error: errno.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:42:20: error: stdlib.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:44:20: error: unistd.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:56:20: error: assert.h: No such file or directory
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:58,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:7:20: error: stdint.h: No such file or directory
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:58,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:89: error: expected ?=?, ?,?, ?;?, ?asm? or ?__attribute__?  
before ?Py_uintptr_t?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:90: error: expected ?=?, ?,?, ?;?, ?asm? or ?__attribute__?  
before ?Py_intptr_t?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:113: error: expected ?=?, ?,?, ?;?, ?asm? or ?__attribute__?  
before ?Py_ssize_t?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:235:76: error: math.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:242:22: error: sys/time.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:243:18: error: time.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:261:24: error: sys/select.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:300:22: error: sys/stat.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:479:21: error: termios.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:480: warning: ?struct winsize? declared inside parameter list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:480: warning: its scope is only this definition or  
declaration, which is probably not what you want
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:480: warning: ?struct termios? declared inside parameter list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:481: error: expected ?=?, ?,?, ?;?, ?asm? or ?__attribute__?  
before ?forkpty?
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:78,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pymem.h:52: warning: parameter names (without types) in function  
declaration
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pymem.h:53: error: expected declaration specifiers or ?...? before  
?size_t?
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:80,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:107: error: expected specifier-qualifier-list before  
?Py_ssize_t?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:111: error: expected specifier-qualifier-list before  
?Py_ssize_t?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:137: error: expected declaration specifiers or ?...? before  
?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:137: error: ?Py_ssize_t? declared as function returning a  
function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:157: error: ?readbufferproc? declared as function returning a  
function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:158: error: ?writebufferproc? declared as function returning  
a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:159: error: ?segcountproc? declared as function returning a  
function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:160: error: ?charbufferproc? declared as function returning a  
function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:167: error: field ?len? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:168: error: field ?itemsize? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:274: error: expected specifier-qualifier-list before ?lenfunc?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:288: error: expected specifier-qualifier-list before ?lenfunc?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:305: error: expected declaration specifiers or ?...? before  
?FILE?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:319: warning: ?struct _typeobject? declared inside parameter  
list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:320: warning: ?struct _typeobject? declared inside parameter  
list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:323: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:323: error: field ?ob_size? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:325: error: field ?tp_basicsize? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:325: error: field ?tp_itemsize? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:370: error: field ?tp_weaklistoffset? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:385: error: field ?tp_dictoffset? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:456: error: expected declaration specifiers or ?...? before  
?FILE?
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:81,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
objimpl.h:97: warning: parameter names (without types) in function  
declaration
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
objimpl.h:98: error: expected declaration specifiers or ?...? before  
?size_t?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
objimpl.h:228: error: ?PyGC_Collect? declared as function returning a  
function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
objimpl.h:249: error: field ?gc_refs? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
objimpl.h:288: warning: parameter names (without types) in function  
declaration
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:85,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:4:20: error: stdarg.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:57:19: error: ctype.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:120:21: error: wchar.h: No such file or directory
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:85,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:413: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:414: error: field ?length? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:489: error: ?PyUnicodeUCS2_GetSize? declared as  
function returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:553: error: expected declaration specifiers or ?...?  
before ?va_list?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:572: error: expected ?;?, ?,? or ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:590: error: expected ?;?, ?,? or ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:1234: error: ?PyUnicodeUCS2_Tailmatch? declared as  
function returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:1246: error: ?PyUnicodeUCS2_Find? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:1255: error: ?PyUnicodeUCS2_Count? declared as  
function returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:86,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
intobject.h:24: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
intobject.h:39: warning: parameter names (without types) in function  
declaration
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
intobject.h:42: error: ?PyInt_AsSsize_t? declared as function  
returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:88,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
longobject.h:21: warning: parameter names (without types) in function  
declaration
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
longobject.h:26: error: ?PyLong_AsSsize_t? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
longobject.h:73: error: expected ?=?, ?,?, ?;?, ?asm? or  
?__attribute__? before ?_PyLong_NumBits?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
longobject.h:89: error: expected declaration specifiers or ?...?  
before ?size_t?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
longobject.h:112: error: expected declaration specifiers or ?...?  
before ?size_t?
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:89,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
floatobject.h:15: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:91,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
complexobject.h:41: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:94,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
stringobject.h:36: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
stringobject.h:36: error: field ?ob_size? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
stringobject.h:64: error: expected declaration specifiers or ?...?  
before ?va_list?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
stringobject.h:68: error: ?PyString_Size? declared as function  
returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:98,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
bytearrayobject.h:23: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
bytearrayobject.h:23: error: field ?ob_size? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
bytearrayobject.h:26: error: field ?ob_alloc? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
bytearrayobject.h:42: error: ?PyByteArray_Size? declared as function  
returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:99,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
tupleobject.h:25: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
tupleobject.h:25: error: field ?ob_size? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
tupleobject.h:41: error: ?PyTuple_Size? declared as function returning  
a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:100,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
listobject.h:23: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
listobject.h:23: error: field ?ob_size? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
listobject.h:38: error: field ?allocated? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
listobject.h:48: error: ?PyList_Size? declared as function returning a  
function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:101,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:55: error: field ?me_hash? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:71: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:72: error: field ?ma_fill? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:73: error: field ?ma_used? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:79: error: field ?ma_mask? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:109: error: ?PyDict_Size? declared as function returning  
a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:103,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
setobject.h:36: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
setobject.h:38: error: field ?fill? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
setobject.h:39: error: field ?used? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
setobject.h:45: error: field ?mask? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
setobject.h:85: error: ?PySet_Size? declared as function returning a  
function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:104,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
methodobject.h:82: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:106,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
funcobject.h:22: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:107,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
classobject.h:13: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
classobject.h:24: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
classobject.h:31: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:108,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:11: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:12: error: expected specifier-qualifier-list before ?FILE?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:42: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:44: error: expected ?=?, ?,?, ?;?, ?asm? or  
?__attribute__? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:63: error: expected declaration specifiers or ?...?  
before ?FILE?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:64: error: expected ?=?, ?,?, ?;?, ?asm? or  
?__attribute__? before ?Py_UniversalNewlineFread?
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:109,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
cobject.h:53: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:110,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
traceback.h:13: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:111,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
sliceobject.h:23: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:112,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
cellobject.h:10: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:114,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
genobject.h:13: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:115,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
descrobject.h:46: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
descrobject.h:50: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
descrobject.h:55: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
descrobject.h:60: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
descrobject.h:65: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:117,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
weakrefobject.h:16: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
weakrefobject.h:65: error: ?_PyWeakref_GetWeakrefCount? declared as  
function returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:120,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:10: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:17: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:31: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:37: error: field ?start? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:38: error: field ?end? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:44: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:52: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:321: error: expected declaration specifiers or ?...? before  
?size_t?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:322: error: format string argument not a string type
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:323: error: expected declaration specifiers or ?...? before  
?size_t?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:323: error: expected declaration specifiers or ?...? before  
?va_list?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:324: error: format string argument not a string type
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:124,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyarena.h:50: error: expected declaration specifiers or ?...? before  
?size_t?
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:125,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
modsupport.h:23: error: expected declaration specifiers or ?...?  
before ?va_list?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
modsupport.h:35: error: expected declaration specifiers or ?...?  
before ?va_list?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
modsupport.h:37: error: expected declaration specifiers or ?...?  
before ?va_list?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
modsupport.h:38: error: expected declaration specifiers or ?...?  
before ?va_list?
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:126,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:35: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:36: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:38: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:39: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:40: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:45: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:55: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:61: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:78: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:146: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:148: error: expected ?)? before ?*? token
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:128,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
sysmodule.h:12: error: expected ?=?, ?,?, ?;?, ?asm? or  
?__attribute__? before ?*? token
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:130,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
import.h:31: error: expected declaration specifiers or ?...? before  
?size_t?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
import.h:31: error: expected declaration specifiers or ?...? before  
?FILE?
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:132,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:421: error: ?PyObject_Size? declared as function returning  
a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:433: error: ?PyObject_Length? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:436: error: ?_PyObject_LengthHint? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:859: error: ?PyNumber_AsSsize_t? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1054: error: ?PySequence_Size? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1063: error: ?PySequence_Length? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1185: error: ?PySequence_Count? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1204: error: ?_PySequence_IterSearch? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1229: error: ?PySequence_Index? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1268: error: ?PyMapping_Size? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1278: error: ?PyMapping_Length? declared as function  
returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/compile.h:5,
                  from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:134,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
code.h:11: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:137,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pystrtod.h:11: error: expected declaration specifiers or ?...? before  
?size_t?
twisted/protocols/_c_urlarg.c: In function ?unquote?:
twisted/protocols/_c_urlarg.c:44: error: ?NULL? undeclared (first use  
in this function)
twisted/protocols/_c_urlarg.c:44: error: (Each undeclared identifier  
is reported only once
twisted/protocols/_c_urlarg.c:44: error: for each function it appears  
in.)
twisted/protocols/_c_urlarg.c:48: warning: return from incompatible  
pointer type
twisted/protocols/_c_urlarg.c:52: warning: comparison of distinct  
pointer types lacks a cast
twisted/protocols/_c_urlarg.c:53: warning: return from incompatible  
pointer type
twisted/protocols/_c_urlarg.c:65: warning: passing argument 3 of  
?PycStringIO->cwrite? makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:75: warning: passing argument 3 of  
?PycStringIO->cwrite? makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:83: warning: passing argument 3 of  
?PycStringIO->cwrite? makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:85: warning: passing argument 3 of  
?PycStringIO->cwrite? makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:93: warning: passing argument 3 of  
?PycStringIO->cwrite? makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:96: warning: passing argument 3 of  
?PycStringIO->cwrite? makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:97: warning: passing argument 3 of  
?PycStringIO->cwrite? makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:103: error: ?PyObject? has no member  
named ?ob_refcnt?
twisted/protocols/_c_urlarg.c:103: error: lvalue required as decrement  
operand
twisted/protocols/_c_urlarg.c:103: error: lvalue required as decrement  
operand
twisted/protocols/_c_urlarg.c:103: error: ?PyObject? has no member  
named ?ob_type?
twisted/protocols/_c_urlarg.c:103: error: request for member  
?tp_dealloc? in something not a structure or union
twisted/protocols/_c_urlarg.c:103: error: called object ?*(char **) 
&<erroneous-expression>? is not a function
twisted/protocols/_c_urlarg.c: At top level:
twisted/protocols/_c_urlarg.c:109: error: ?NULL? undeclared here (not  
in a function)
twisted/protocols/_c_urlarg.c:109: error: initializer element is not  
constant
twisted/protocols/_c_urlarg.c:109: error: (near initialization for  
?_c_urlarg_methods[1].ml_name?)
twisted/protocols/_c_urlarg.c:109: error: initializer element is not  
constant
twisted/protocols/_c_urlarg.c:109: error: (near initialization for  
?_c_urlarg_methods[1].ml_meth?)
twisted/protocols/_c_urlarg.c: In function ?init_c_urlarg?:
twisted/protocols/_c_urlarg.c:123: warning: passing argument 3 of  
?PyErr_NewException? from incompatible pointer type
In file included from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:19:20: error: limits.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:22:2: error: #error "Something's broken.  UCHAR_MAX should be  
defined in limits.h."
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:26:2: error: #error "Python's source code assumes C's  
unsigned char is an 8-bit type."
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:33:19: error: stdio.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:35:5: error: #error "Python.h requires that stdio.h define  
NULL."
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:38:20: error: string.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:40:19: error: errno.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:42:20: error: stdlib.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:44:20: error: unistd.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:56:20: error: assert.h: No such file or directory
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:58,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:7:20: error: stdint.h: No such file or directory
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:58,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:89: error: expected ?=?, ?,?, ?;?, ?asm? or ?__attribute__?  
before ?Py_uintptr_t?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:90: error: expected ?=?, ?,?, ?;?, ?asm? or ?__attribute__?  
before ?Py_intptr_t?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:113: error: expected ?=?, ?,?, ?;?, ?asm? or ?__attribute__?  
before ?Py_ssize_t?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:235:76: error: math.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:242:22: error: sys/time.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:243:18: error: time.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:261:24: error: sys/select.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:300:22: error: sys/stat.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:479:21: error: termios.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:480: warning: ?struct winsize? declared inside parameter list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:480: warning: its scope is only this definition or  
declaration, which is probably not what you want
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:480: warning: ?struct termios? declared inside parameter list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:481: error: expected ?=?, ?,?, ?;?, ?asm? or ?__attribute__?  
before ?forkpty?
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:78,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pymem.h:52: warning: parameter names (without types) in function  
declaration
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pymem.h:53: error: expected declaration specifiers or ?...? before  
?size_t?
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:80,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:107: error: expected specifier-qualifier-list before  
?Py_ssize_t?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:111: error: expected specifier-qualifier-list before  
?Py_ssize_t?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:137: error: expected declaration specifiers or ?...? before  
?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:137: error: ?Py_ssize_t? declared as function returning a  
function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:157: error: ?readbufferproc? declared as function returning a  
function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:158: error: ?writebufferproc? declared as function returning  
a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:159: error: ?segcountproc? declared as function returning a  
function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:160: error: ?charbufferproc? declared as function returning a  
function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:167: error: field ?len? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:168: error: field ?itemsize? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:274: error: expected specifier-qualifier-list before ?lenfunc?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:288: error: expected specifier-qualifier-list before ?lenfunc?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:305: error: expected declaration specifiers or ?...? before  
?FILE?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:319: warning: ?struct _typeobject? declared inside parameter  
list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:320: warning: ?struct _typeobject? declared inside parameter  
list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:323: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:323: error: field ?ob_size? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:325: error: field ?tp_basicsize? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:325: error: field ?tp_itemsize? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:370: error: field ?tp_weaklistoffset? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:385: error: field ?tp_dictoffset? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:456: error: expected declaration specifiers or ?...? before  
?FILE?
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:81,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
objimpl.h:97: warning: parameter names (without types) in function  
declaration
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
objimpl.h:98: error: expected declaration specifiers or ?...? before  
?size_t?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
objimpl.h:228: error: ?PyGC_Collect? declared as function returning a  
function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
objimpl.h:249: error: field ?gc_refs? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
objimpl.h:288: warning: parameter names (without types) in function  
declaration
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:85,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:4:20: error: stdarg.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:57:19: error: ctype.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:120:21: error: wchar.h: No such file or directory
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:85,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:413: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:414: error: field ?length? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:489: error: ?PyUnicodeUCS2_GetSize? declared as  
function returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:553: error: expected declaration specifiers or ?...?  
before ?va_list?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:572: error: expected ?;?, ?,? or ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:590: error: expected ?;?, ?,? or ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:1234: error: ?PyUnicodeUCS2_Tailmatch? declared as  
function returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:1246: error: ?PyUnicodeUCS2_Find? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:1255: error: ?PyUnicodeUCS2_Count? declared as  
function returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:86,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
intobject.h:24: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
intobject.h:39: warning: parameter names (without types) in function  
declaration
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
intobject.h:42: error: ?PyInt_AsSsize_t? declared as function  
returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:88,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
longobject.h:21: warning: parameter names (without types) in function  
declaration
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
longobject.h:26: error: ?PyLong_AsSsize_t? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
longobject.h:73: error: expected ?=?, ?,?, ?;?, ?asm? or  
?__attribute__? before ?_PyLong_NumBits?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
longobject.h:89: error: expected declaration specifiers or ?...?  
before ?size_t?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
longobject.h:112: error: expected declaration specifiers or ?...?  
before ?size_t?
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:89,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
floatobject.h:15: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:91,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
complexobject.h:41: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:94,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
stringobject.h:36: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
stringobject.h:36: error: field ?ob_size? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
stringobject.h:64: error: expected declaration specifiers or ?...?  
before ?va_list?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
stringobject.h:68: error: ?PyString_Size? declared as function  
returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:98,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
bytearrayobject.h:23: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
bytearrayobject.h:23: error: field ?ob_size? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
bytearrayobject.h:26: error: field ?ob_alloc? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
bytearrayobject.h:42: error: ?PyByteArray_Size? declared as function  
returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:99,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
tupleobject.h:25: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
tupleobject.h:25: error: field ?ob_size? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
tupleobject.h:41: error: ?PyTuple_Size? declared as function returning  
a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:100,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
listobject.h:23: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
listobject.h:23: error: field ?ob_size? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
listobject.h:38: error: field ?allocated? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
listobject.h:48: error: ?PyList_Size? declared as function returning a  
function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:101,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:55: error: field ?me_hash? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:71: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:72: error: field ?ma_fill? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:73: error: field ?ma_used? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:79: error: field ?ma_mask? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:109: error: ?PyDict_Size? declared as function returning  
a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:103,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
setobject.h:36: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
setobject.h:38: error: field ?fill? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
setobject.h:39: error: field ?used? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
setobject.h:45: error: field ?mask? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
setobject.h:85: error: ?PySet_Size? declared as function returning a  
function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:104,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
methodobject.h:82: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:106,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
funcobject.h:22: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:107,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
classobject.h:13: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
classobject.h:24: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
classobject.h:31: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:108,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:11: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:12: error: expected specifier-qualifier-list before ?FILE?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:42: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:44: error: expected ?=?, ?,?, ?;?, ?asm? or  
?__attribute__? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:63: error: expected declaration specifiers or ?...?  
before ?FILE?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:64: error: expected ?=?, ?,?, ?;?, ?asm? or  
?__attribute__? before ?Py_UniversalNewlineFread?
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:109,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
cobject.h:53: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:110,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
traceback.h:13: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:111,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
sliceobject.h:23: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:112,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
cellobject.h:10: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:114,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
genobject.h:13: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:115,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
descrobject.h:46: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
descrobject.h:50: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
descrobject.h:55: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
descrobject.h:60: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
descrobject.h:65: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:117,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
weakrefobject.h:16: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
weakrefobject.h:65: error: ?_PyWeakref_GetWeakrefCount? declared as  
function returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:120,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:10: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:17: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:31: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:37: error: field ?start? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:38: error: field ?end? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:44: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:52: error: field ?ob_refcnt? declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:321: error: expected declaration specifiers or ?...? before  
?size_t?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:322: error: format string argument not a string type
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:323: error: expected declaration specifiers or ?...? before  
?size_t?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:323: error: expected declaration specifiers or ?...? before  
?va_list?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:324: error: format string argument not a string type
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:124,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyarena.h:50: error: expected declaration specifiers or ?...? before  
?size_t?
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:125,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
modsupport.h:23: error: expected declaration specifiers or ?...?  
before ?va_list?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
modsupport.h:35: error: expected declaration specifiers or ?...?  
before ?va_list?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
modsupport.h:37: error: expected declaration specifiers or ?...?  
before ?va_list?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
modsupport.h:38: error: expected declaration specifiers or ?...?  
before ?va_list?
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:126,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:35: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:36: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:38: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:39: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:40: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:45: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:55: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:61: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:78: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:146: error: expected ?)? before ?*? token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:148: error: expected ?)? before ?*? token
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:128,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
sysmodule.h:12: error: expected ?=?, ?,?, ?;?, ?asm? or  
?__attribute__? before ?*? token
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:130,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
import.h:31: error: expected declaration specifiers or ?...? before  
?size_t?
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
import.h:31: error: expected declaration specifiers or ?...? before  
?FILE?
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:132,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:421: error: ?PyObject_Size? declared as function returning  
a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:433: error: ?PyObject_Length? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:436: error: ?_PyObject_LengthHint? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:859: error: ?PyNumber_AsSsize_t? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1054: error: ?PySequence_Size? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1063: error: ?PySequence_Length? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1185: error: ?PySequence_Count? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1204: error: ?_PySequence_IterSearch? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1229: error: ?PySequence_Index? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1268: error: ?PyMapping_Size? declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1278: error: ?PyMapping_Length? declared as function  
returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/compile.h:5,
                  from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:134,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
code.h:11: error: field ?ob_refcnt? declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:137,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pystrtod.h:11: error: expected declaration specifiers or ?...? before  
?size_t?
twisted/protocols/_c_urlarg.c: In function ?unquote?:
twisted/protocols/_c_urlarg.c:44: error: ?NULL? undeclared (first use  
in this function)
twisted/protocols/_c_urlarg.c:44: error: (Each undeclared identifier  
is reported only once
twisted/protocols/_c_urlarg.c:44: error: for each function it appears  
in.)
twisted/protocols/_c_urlarg.c:48: warning: return from incompatible  
pointer type
twisted/protocols/_c_urlarg.c:52: warning: comparison of distinct  
pointer types lacks a cast
twisted/protocols/_c_urlarg.c:53: warning: return from incompatible  
pointer type
twisted/protocols/_c_urlarg.c:65: warning: passing argument 3 of  
?PycStringIO->cwrite? makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:75: warning: passing argument 3 of  
?PycStringIO->cwrite? makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:83: warning: passing argument 3 of  
?PycStringIO->cwrite? makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:85: warning: passing argument 3 of  
?PycStringIO->cwrite? makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:93: warning: passing argument 3 of  
?PycStringIO->cwrite? makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:96: warning: passing argument 3 of  
?PycStringIO->cwrite? makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:97: warning: passing argument 3 of  
?PycStringIO->cwrite? makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:103: error: ?PyObject? has no member  
named ?ob_refcnt?
twisted/protocols/_c_urlarg.c:103: error: lvalue required as decrement  
operand
twisted/protocols/_c_urlarg.c:103: error: lvalue required as decrement  
operand
twisted/protocols/_c_urlarg.c:103: error: ?PyObject? has no member  
named ?ob_type?
twisted/protocols/_c_urlarg.c:103: error: request for member  
?tp_dealloc? in something not a structure or union
twisted/protocols/_c_urlarg.c:103: error: called object ?*(char **) 
&<erroneous-expression>? is not a function
twisted/protocols/_c_urlarg.c: At top level:
twisted/protocols/_c_urlarg.c:109: error: ?NULL? undeclared here (not  
in a function)
twisted/protocols/_c_urlarg.c:109: error: initializer element is not  
constant
twisted/protocols/_c_urlarg.c:109: error: (near initialization for  
?_c_urlarg_methods[1].ml_name?)
twisted/protocols/_c_urlarg.c:109: error: initializer element is not  
constant
twisted/protocols/_c_urlarg.c:109: error: (near initialization for  
?_c_urlarg_methods[1].ml_meth?)
twisted/protocols/_c_urlarg.c: In function ?init_c_urlarg?:
twisted/protocols/_c_urlarg.c:123: warning: passing argument 3 of  
?PyErr_NewException? from incompatible pointer type
lipo: can't figure out the architecture type of: /var/folders/ 
71/716EyABBHM8EA6F853Q-vU+++TI/-Tmp-//ccVGxOtq.out
error: command 'gcc' failed with exit status 1



From phil at bubblehouse.org  Tue Sep 29 16:50:29 2009
From: phil at bubblehouse.org (Phil Christensen)
Date: Tue, 29 Sep 2009 16:50:29 -0400
Subject: [Twisted-Python] strange exception on Python 2.6 + Snow Leopard
In-Reply-To: <20090929204233.1533.1544059758.divmod.xquotient.420@localhost.localdomain>
References: <AE767569-997B-4F1C-9F4F-E984E4659B0E@bubblehouse.org>
	<B23801ED-A811-4221-A110-6B363DA00319@integrateddevcorp.com>
	<413E681C-F5D0-4C8E-BF70-7B28347454FA@bubblehouse.org>
	<2324094B-A1AF-47BA-ADD2-0E1004EFBC43@integrateddevcorp.com>
	<E49D8702-DE0B-496C-9DE4-60FB1D8AA81E@bubblehouse.org>
	<20090929204233.1533.1544059758.divmod.xquotient.420@localhost.localdomain>
Message-ID: <5540F8D9-6206-47A2-BE7E-2B769120432C@bubblehouse.org>

On Sep 29, 2009, at 4:42 PM, exarkun at twistedmatrix.com wrote:
> On 08:37 pm, phil at bubblehouse.org wrote:
>> I do see the following issues during compilation, which cause the
>> epoll reactor to fail. I don't use the epoll reactor, so I haven't
>> bothered trying to fix it:
[snip]
> These aren't really fixable.  OS X does not have epoll.  The epoll
> reactor is for Linux.

Ah yes, I should have known that.

Any idea what's causing these tracebacks on startup? I've grepped  
everywhere for occurrences of ssl_test, _test, cleared out my  
dropin.cache files, etc, but nothing makes any difference.

-phil




Traceback (most recent call last):
   File "/Users/phil/Workspace/Twisted/twisted/python/usage.py", line  
413, in __str__
     return self.getSynopsis() + '\n' + self.getUsage(width=None)
   File "/Users/phil/Workspace/Twisted/twisted/python/usage.py", line  
449, in getUsage
     for (cmd, short, parser, desc) in self.subCommands:
   File "/Users/phil/Workspace/Twisted/twisted/application/app.py",  
line 675, in subCommands
     for plug in plugins:
   File "/Users/phil/Workspace/Twisted/twisted/plugin.py", line 200,  
in getPlugins
     allDropins = getCache(package)
--- <exception caught here> ---
   File "/Users/phil/Workspace/Twisted/twisted/plugin.py", line 165,  
in getCache
     provider = pluginModule.load()
   File "/Users/phil/Workspace/Twisted/twisted/python/modules.py",  
line 381, in load
     return self.pathEntry.pythonPath.moduleLoader(self.name)
   File "/Users/phil/Workspace/Twisted/twisted/python/reflect.py",  
line 473, in namedAny
     obj = getattr(obj, n)
exceptions.AttributeError: 'module' object has no attribute 'ssl_test'


From jarrod at vertigrated.com  Tue Sep 29 17:54:21 2009
From: jarrod at vertigrated.com (Jarrod Roberson)
Date: Tue, 29 Sep 2009 17:54:21 -0400
Subject: [Twisted-Python] I found an interisting comment about Twisted
	vs. Erlang
In-Reply-To: <cedc0c090909291211i6a1d7536r5c9ea1bbe9a1861@mail.gmail.com>
References: <01e801ca4130$fe2120a0$fa6361e0$@com>
	<F68410CC-9772-491C-911D-CD9F96EFFC38@integrateddevcorp.com>
	<cedc0c090909291211i6a1d7536r5c9ea1bbe9a1861@mail.gmail.com>
Message-ID: <fa3d0c740909291454s60f8ec6dy2af5fa02d15fec4d@mail.gmail.com>

On Tue, Sep 29, 2009 at 3:11 PM, Laurens Van Houtven <lvh at laurensvh.be>wrote:

> One is a language. The other is an event loop. I'm not sure how we are
> supposed to compare the two. If he would've said E and Twisted,
> perhaps it'd be a more interesting comparison :-)
>
> Also, what Steve said jumped right into my eye as well. Don't get me
> wrong. I like Erlang -- it's functional, it's robust, it's very easy
> to make your programs execute in parallel. RabbitMQ and Scalaris are
> two examples of *excellent* Erlang software. I don't really think
> Erlang was a bad choice -- I just think they don't know enough about
> Twisted to judge :-)
>
>
> Laurens
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

actually one is a Concurrent Virtual Machine and language and Applications
Framework (OTP) the other is a single threaded event loop library.
Apples and Oranges. I have written production level code at a major ISP
using Twisted. It became very painful once
we started getting CPU bound on 32 core CPU machines. We had to run multiple
instances of our Twisted server implementation
to saturate the machine. I have since "ported" the same application to
Erlang/OTP. It is about 1/5 the amount of code.
And it scales 1:1 horizontally (adding more CPUs local or remote ) and
vertically (adding FASTER cpus ) with no code changes.

The broad statement that Twisted doesn't possess the capabilities of
Erlang/OTP is pretty much accurate. Each solves a different problem.
Granted Erlang/OTP is definately a super-set of what Twisted does

-- 
Jarrod Roberson
678.551.2852
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090929/8c2711fe/attachment.htm 

From rutt.4 at osu.edu  Tue Sep 29 19:16:44 2009
From: rutt.4 at osu.edu (Benjamin Rutt)
Date: Tue, 29 Sep 2009 19:16:44 -0400
Subject: [Twisted-Python] getPeer() inside conch
In-Reply-To: <d9047f780909282258v167e852cl76105ba92adb976a@mail.gmail.com>
References: <68f3f1f70909281710p1ddc3a47l134208c06b680cdb@mail.gmail.com>
	<d9047f780909282258v167e852cl76105ba92adb976a@mail.gmail.com>
Message-ID: <68f3f1f70909291616tc8c23c3t75de943b725a9b21@mail.gmail.com>

The code:

    print 'hello, peer %s' % (self.terminal.transport.getPeer())

Fails with:

    AttributeError: SSHSessionProcessProtocol instance has no attribute
'getPeer'

One possible patch to twisted 8.2.0's conch/ssh/session.py's
SSHSessionProcessProtocol class to add a getPeer() method would be:

$ diff -u session.py.orig session.py
--- session.py.orig     2009-06-10 06:30:33.000000000 -0400
+++ session.py  2009-09-29 12:30:01.622444000 -0400
@@ -13,7 +13,7 @@

 import struct

-from twisted.internet import protocol
+from twisted.internet import protocol, address
 from twisted.python import log
 from twisted.conch.interfaces import ISession
 from twisted.conch.ssh import common, channel
@@ -210,6 +210,10 @@
     def loseConnection(self):
         self.session.loseConnection()

+    def getPeer(self):
+        client = self.session.conn.transport.transport.client
+        return address.IPv4Address('TCP', client[0], client[1])
+
 class SSHSessionClient(protocol.Protocol):

     def dataReceived(self, data):

Could someone comment on this?  (I'm fairly certain ssh runs over TCP, but
less certain that the mouthful self.session.conn.transport.transport.client
isn't invading layers of abstraction in an unfriendly way).  Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090929/e9cc4bcb/attachment.htm 

From glyph at twistedmatrix.com  Tue Sep 29 22:48:54 2009
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Tue, 29 Sep 2009 22:48:54 -0400
Subject: [Twisted-Python] getPeer() inside conch
In-Reply-To: <68f3f1f70909291616tc8c23c3t75de943b725a9b21@mail.gmail.com>
References: <68f3f1f70909281710p1ddc3a47l134208c06b680cdb@mail.gmail.com>
	<d9047f780909282258v167e852cl76105ba92adb976a@mail.gmail.com>
	<68f3f1f70909291616tc8c23c3t75de943b725a9b21@mail.gmail.com>
Message-ID: <d9047f780909291948n5e433b54l6b4a5cf1b82ec831@mail.gmail.com>

On Tue, Sep 29, 2009 at 7:16 PM, Benjamin Rutt <rutt.4 at osu.edu> wrote:

> The code:
>
>     print 'hello, peer %s' % (self.terminal.transport.getPeer())
>
> Fails with:
>
>     AttributeError: SSHSessionProcessProtocol instance has no attribute
> 'getPeer'
>

Oops.  Looks like my reading of the code was wrong.

One possible patch to twisted 8.2.0's conch/ssh/session.py's
> SSHSessionProcessProtocol class to add a getPeer() method would be:
>


> +        client = self.session.conn.transport.transport.client
> +        return address.IPv4Address('TCP', client[0], client[1])
> Could someone comment on this?  (I'm fairly certain ssh runs over TCP, but
> less certain that the mouthful self.session.conn.transport.transport.client
> isn't invading layers of abstraction in an unfriendly way).  Thanks.
>

So, nominally, all those things are public (none of them starts with an
underscore) but I'd have to sift through the code to understand exactly how
kosher they are (whether those attributes are a part of the interfaces in
question).

However, (A) 'TCP' isn't quite the right answer here, because actually
there's some SSH in the way, and (B) I am pretty sure there is a getPeer
closer than that.  In particular,

SSHSessionProcessProtocol.session is a twisted.conch.session.SSHSession
SSHSession subclasses twisted.conch.ssh.channel.SSHChannel
SSHChannel implements getPeer already.

So you *should* be able to do self.session.getPeer() and get something
useful.  I hope.

That said, the getPeer implementation in question should really be returning
an IAddress, not a tuple, so you can subclass or delegate to IPv4Address and
still access 'host' on the return value.

Independent of the grossness, if you can contribute some test coverage for
this, we could make the implementation less gross later :).  This is
especially important since hopefully many of these conch APIs will change in
the near future.  (z3p, are you planning on coming to the sprint this
week...?)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090929/5c0bdf29/attachment.htm 

From antonio.beamud at gmail.com  Wed Sep 30 08:20:23 2009
From: antonio.beamud at gmail.com (Antonio Beamud Montero)
Date: Wed, 30 Sep 2009 14:20:23 +0200
Subject: [Twisted-Python] AlreadyCalledError trying more than a server
In-Reply-To: <20090929162443.1533.1953865337.divmod.xquotient.405@localhost.localdomain>
References: <4AC1C4F6.1060609@gmail.com>
	<20090929162443.1533.1953865337.divmod.xquotient.405@localhost.localdomain>
Message-ID: <4AC34D07.1060108@gmail.com>

exarkun at twistedmatrix.com escribi?:
> I don't think you've shared enough of your code for anyone to figure out 
> what you're doing wrong (aside from calling one Deferred's callback 
> method more than once).  Your "runall" function above looks okay, so 
> perhaps the problem is in some other part of your code.  An SSCCE 
> (<http://sscce.org/>) would be the best thing for you to share
>   
Yes, you're right. I've created an example with the minimal code to 
reproduce the problem.

http://pastebin.com/f4e445dc3

A lot of thanks.

Greetings.


From andrew at bemusement.org  Wed Sep 30 10:10:16 2009
From: andrew at bemusement.org (Andrew Bennetts)
Date: Thu, 1 Oct 2009 00:10:16 +1000
Subject: [Twisted-Python] AlreadyCalledError trying more than a server
In-Reply-To: <4AC34D07.1060108@gmail.com>
References: <4AC1C4F6.1060609@gmail.com>
	<20090929162443.1533.1953865337.divmod.xquotient.405@localhost.localdomain>
	<4AC34D07.1060108@gmail.com>
Message-ID: <20090930141016.GG1931@steerpike.home.puzzling.org>

Antonio Beamud Montero wrote:
> exarkun at twistedmatrix.com escribi?:
> > I don't think you've shared enough of your code for anyone to figure out 
> > what you're doing wrong (aside from calling one Deferred's callback 
> > method more than once).  Your "runall" function above looks okay, so 
> > perhaps the problem is in some other part of your code.  An SSCCE 
> > (<http://sscce.org/>) would be the best thing for you to share
> >   
> Yes, you're right. I've created an example with the minimal code to 
> reproduce the problem.
> 
> http://pastebin.com/f4e445dc3

This fails the ?self-contained? criterion, by the way, as it assumes access to a
host called ?romeo?.

[It also fairly clear isn't *completely* minimal either, e.g. I'm pretty sure
the addCallback(runall) is not required to see your problem.  I also suspect
that you only need one connection to demonstrate this bug, but because it's not
self-contained it's hard to tell how far from minimal it actually is.]

Anyhow, my guess (it has to be a guess, as your example isn't self-contained, so
I cannot run it to examine the problem for myself), is that the problem is that:

 a) you create one Deferred per connection (self.deferred in MyClientFactory),
    combined with...
 b) your lineReceived invokes gotData which often calls that deferred without
    any robust defence against calling that deferred multiple times.

e.g.  consider a server that sends "221 2.0.0 Bye" followed by a blank line.
The specific data triggering your problem should be obvious from the output of
your ?print repr(data)? line in gotData.

-Andrew.



From exarkun at twistedmatrix.com  Wed Sep 30 10:38:48 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 30 Sep 2009 14:38:48 -0000
Subject: [Twisted-Python] strange exception on Python 2.6 + Snow Leopard
In-Reply-To: <5540F8D9-6206-47A2-BE7E-2B769120432C@bubblehouse.org>
References: <AE767569-997B-4F1C-9F4F-E984E4659B0E@bubblehouse.org>
	<B23801ED-A811-4221-A110-6B363DA00319@integrateddevcorp.com>
	<413E681C-F5D0-4C8E-BF70-7B28347454FA@bubblehouse.org>
	<2324094B-A1AF-47BA-ADD2-0E1004EFBC43@integrateddevcorp.com>
	<E49D8702-DE0B-496C-9DE4-60FB1D8AA81E@bubblehouse.org>
	<20090929204233.1533.1544059758.divmod.xquotient.420@localhost.localdomain>
	<5540F8D9-6206-47A2-BE7E-2B769120432C@bubblehouse.org>
Message-ID: <20090930143848.1533.553112061.divmod.xquotient.435@localhost.localdomain>

On 29 Sep, 08:50 pm, phil at bubblehouse.org wrote:
>On Sep 29, 2009, at 4:42 PM, exarkun at twistedmatrix.com wrote:
>>On 08:37 pm, phil at bubblehouse.org wrote:
>>>I do see the following issues during compilation, which cause the
>>>epoll reactor to fail. I don't use the epoll reactor, so I haven't
>>>bothered trying to fix it:
>[snip]
>>These aren't really fixable.  OS X does not have epoll.  The epoll
>>reactor is for Linux.
>
>Ah yes, I should have known that.
>
>Any idea what's causing these tracebacks on startup? I've grepped
>everywhere for occurrences of ssl_test, _test, cleared out my
>dropin.cache files, etc, but nothing makes any difference.

If you startup with debugging enabled, do you get dropped into pdb at 
the point of the error?  If so, it should be simple to look around at 
some of the data and track down the cause.

Jean-Paul


From matusis at yahoo.com  Wed Sep 30 16:00:05 2009
From: matusis at yahoo.com (Alec Matusis)
Date: Wed, 30 Sep 2009 13:00:05 -0700
Subject: [Twisted-Python] I found an interisting comment about Twisted
	vs. Erlang
In-Reply-To: <fa3d0c740909291454s60f8ec6dy2af5fa02d15fec4d@mail.gmail.com>
References: <01e801ca4130$fe2120a0$fa6361e0$@com>	<F68410CC-9772-491C-911D-CD9F96EFFC38@integrateddevcorp.com>	<cedc0c090909291211i6a1d7536r5c9ea1bbe9a1861@mail.gmail.com>
	<fa3d0c740909291454s60f8ec6dy2af5fa02d15fec4d@mail.gmail.com>
Message-ID: <01d501ca4208$9ad96330$d08c2990$@com>


>It became very painful once
>we started getting CPU bound on 32 core CPU machines. We had to run
multiple instances of our Twisted server implementation
>to saturate the machine. I have since "ported" the same application to
Erlang/OTP. It is about 1/5 the amount of code.
>And it scales 1:1 horizontally (adding more CPUs local or remote ) and
vertically (adding FASTER cpus ) with no code changes.

>The broad statement that Twisted doesn't possess the capabilities of
Erlang/OTP is pretty much accurate. Each solves a different problem.
>Granted Erlang/OTP is definately a super-set of what Twisted does.


Scaling horizontally, i.e. parallelization of twisted servers over multiple
cores is a difficult problem. We run this on 8 and 16 core CPU machines, one
process per core, and I use UDP multicasts on internal LAN for messaging
between the servers (both inside the same physical machine, or to remote
nodes). This is of course less than ideal. It would be very nice if Twisted
had some inherent capabilities for scaling horizontally.
 

> vertically (adding FASTER cpus ) with no code changes.

When you ported, were you able to serve to less or more clients on the same
speed CPU core?

The biggest advantage of Twisted is a shorter development time, and the
availability of Python libraries. But I wonder if running something of the
scale of Facebook chat would be feasible at all, or if there are people on
this list that have run many parallelized twisted servers that saturated
many multi-core machines? In other words, are there practical examples of
large-scale Twisted deployment? 




From cyclops at speakeasy.net  Wed Sep 30 16:16:48 2009
From: cyclops at speakeasy.net (John Crawford)
Date: Wed, 30 Sep 2009 16:16:48 -0400
Subject: [Twisted-Python] Not understanding buildProtocol(),
	any clarification?
In-Reply-To: <mailman.79595.1254257074.23374.twisted-python@twistedmatri x.com>
References: <mailman.79595.1254257074.23374.twisted-python@twistedmatrix.com>
Message-ID: <mailman.10.1254342150.23371.twisted-python@twistedmatrix.com>

Hello, I'm trying to understand and use buildProtocol(), which isn't 
working as I expected, in two ways :) Question 1. If I have, on the 
Server side:

class MyFactory(Factory):
         protocol = MyTestProtocol
         def buildProtocol(self, addr):
                 p = Factory.buildProtocol(self, addr)
                 p.transport.write('connected.\n')
                 return p

Should this work? Would the write() function execute? I thought that 
'p' was a fully usable Protocol object at that point, but Python 
disagrees with me :) Tells me it's a 'Nonetype' with no write() 
method. If I take out the write(), everything works fine, I can 
communicate between client/server, so no problems in the rest of the code.

Question 2. If I use buildProtocol() on the Server side to *not* make 
a connection, as:

class MyFactory(Factory):
         protocol = MyTestProtocol
         def buildProtocol(self, addr):
                 if (some condition):
                         return Factory.buildProtocol(self, addr)
                 else:
                         return None

What is supposed to happen on the Client Side when I return None? I 
was thinking that my factory's clientConnectionFailed() would fire, 
indicating that the Server refused a connection.

Instead, what I get is my Client's connectionMade() firing, 
immediately followed by a clientConnectionLost() firing, as if the 
connection was made then dropped.

Just to check, I changed it to:
         buildProtocol(self, addr):
                 return None

which behaved the same way on the Client side. So what is really 
happening in buildProtocol? Is it making a connection to the Client 
side, and firing connectionMade(), no matter what? Or is something 
else going that I don't understand :)

Thanks in advance for any clarification.

John C>






From exarkun at twistedmatrix.com  Wed Sep 30 16:34:40 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 30 Sep 2009 20:34:40 -0000
Subject: [Twisted-Python] Not understanding buildProtocol(),
	any clarification?
In-Reply-To: <E1Mt5h2-0001x5-8y@cube.twistedmatrix.com>
References: <mailman.79595.1254257074.23374.twisted-python@twistedmatrix.com>
	<E1Mt5h2-0001x5-8y@cube.twistedmatrix.com>
Message-ID: <20090930203440.1533.453072741.divmod.xquotient.489@localhost.localdomain>

On 08:16 pm, cyclops at speakeasy.net wrote:
>Hello, I'm trying to understand and use buildProtocol(), which isn't
>working as I expected, in two ways :) Question 1. If I have, on the
>Server side:
>
>class MyFactory(Factory):
>         protocol = MyTestProtocol
>         def buildProtocol(self, addr):
>                 p = Factory.buildProtocol(self, addr)
>                 p.transport.write('connected.\n')
>                 return p
>
>Should this work? Would the write() function execute? I thought that
>'p' was a fully usable Protocol object at that point, but Python
>disagrees with me :) Tells me it's a 'Nonetype' with no write()
>method. If I take out the write(), everything works fine, I can
>communicate between client/server, so no problems in the rest of the 
>code.

Nope.  There's no transport in buildProtocol.  That happens later.  You 
have to wait until "connectionMade" is called on the protocol before you 
trying to use the transport.
>
>Question 2. If I use buildProtocol() on the Server side to *not* make
>a connection, as:
>
>class MyFactory(Factory):
>         protocol = MyTestProtocol
>         def buildProtocol(self, addr):
>                 if (some condition):
>                         return Factory.buildProtocol(self, addr)
>                 else:
>                         return None
>
>What is supposed to happen on the Client Side when I return None? I
>was thinking that my factory's clientConnectionFailed() would fire,
>indicating that the Server refused a connection.
>
>Instead, what I get is my Client's connectionMade() firing,
>immediately followed by a clientConnectionLost() firing, as if the
>connection was made then dropped.

As you observed, doing this on the server accepts and then immediately 
closes the connection.  There is no way to not accept the connection. 
This is a limitation of the underlying platform APIs.

Jean-Paul


From mike at mv3d.com  Wed Sep 30 18:10:40 2009
From: mike at mv3d.com (Michael Handverger)
Date: Wed, 30 Sep 2009 18:10:40 -0400 (EDT)
Subject: [Twisted-Python] I found an interisting comment about Twisted
 vs. Erlang
In-Reply-To: <14946894.50381254348251112.JavaMail.root@verity.int.mv3d.com>
Message-ID: <26858752.50411254348640149.JavaMail.root@verity.int.mv3d.com>


> The biggest advantage of Twisted is a shorter development time, and the
> availability of Python libraries. But I wonder if running something of the
> scale of Facebook chat would be feasible at all, or if there are people on
> this list that have run many parallelized twisted servers that saturated
> many multi-core machines? In other words, are there practical examples of
> large-scale Twisted deployment? 

My previous employer isn't quite up to Facebook's size, but they do over 1/2 billion monthly pageviews using Twisted for the data access layer on around 80 cores. I have no doubt that a Twisted app could scale a site to Facebook's size. You certainly wouldn't be without tough scaling problems to solve, but you'll have those no matter what technology you use if you want to scale to that level.

Mike



From glyph at twistedmatrix.com  Wed Sep 30 19:44:20 2009
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 30 Sep 2009 19:44:20 -0400
Subject: [Twisted-Python] I found an interisting comment about Twisted
	vs. Erlang
In-Reply-To: <01d501ca4208$9ad96330$d08c2990$@com>
References: <01e801ca4130$fe2120a0$fa6361e0$@com>
	<F68410CC-9772-491C-911D-CD9F96EFFC38@integrateddevcorp.com>
	<cedc0c090909291211i6a1d7536r5c9ea1bbe9a1861@mail.gmail.com>
	<fa3d0c740909291454s60f8ec6dy2af5fa02d15fec4d@mail.gmail.com>
	<01d501ca4208$9ad96330$d08c2990$@com>
Message-ID: <d9047f780909301644v7bf56be1v416c00dee50f91d1@mail.gmail.com>

On Wed, Sep 30, 2009 at 4:00 PM, Alec Matusis <matusis at yahoo.com> wrote:


> The biggest advantage of Twisted is a shorter development time, and the
> availability of Python libraries. But I wonder if running something of the
> scale of Facebook chat would be feasible at all, or if there are people on
> this list that have run many parallelized twisted servers that saturated
> many multi-core machines? In other words, are there practical examples of
> large-scale Twisted deployment?
>

http://twistedmatrix.com/trac/wiki/SuccessStories#Justin.tv

"Justin.tv is the largest live video site on the internet. ... Our Twisted
video cluster currently supports thousands of simultaneous broadcasts and
serves up to 30M live video streams per day."
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20090930/4f9ac7fc/attachment.htm 

From mlbright at gmail.com  Tue Sep  1 09:20:26 2009
From: mlbright at gmail.com (Martin-Louis Bright)
Date: Tue, 1 Sep 2009 11:20:26 -0400
Subject: [Twisted-Python] deciding to use twisted or not
In-Reply-To: <loom.20090827T181848-915@post.gmane.org>
References: <3055c0a0908261356l5453665cg4e25e2777c4f8d@mail.gmail.com>
	<d9047f780908261841g268bd8fdh3af9faac727f943c@mail.gmail.com>
	<3fce0ae70908261854o2348f433y3e91847687925409@mail.gmail.com>
	<d9047f780908261908m70897fa1x757e934517ad1cb8@mail.gmail.com>
	<3055c0a0908261946j6f668069m1459928c21aa63d1@mail.gmail.com>
	<4120a220908270511l7798458ak870c6c81176aa77d@mail.gmail.com>
	<3055c0a0908270648n68863bfcmd093ffb3b94f190c@mail.gmail.com>
	<loom.20090827T181848-915@post.gmane.org>
Message-ID: <3055c0a0909010820i5366f9b8r48a7757c5c397d49@mail.gmail.com>

PyInotify only allows you to detect file changes, leaving you with the task
of asynchronously sending http requests.

-martin

On Thu, Aug 27, 2009 at 12:19 PM, Mikhail <termim at gmail.com> wrote:

> Martin-Louis Bright <mlbright <at> gmail.com> writes:
>
> >
> >
> > I am using linux, and I want the daemon to be as responsive as possible
> to log
> events, so I think I would rather have it sit on the same box as where the
> log
> is produced. (Perhaps I'm wrong about this?) So I'm going to try Cary's
> ProcessProtocol approach, and if that doesn't work, Glyph's LoopingCall
> with a
> read() approach.
> >
>
> You can also use pyinotify to watch your log file changes.
> http://trac.dbzteam.org/pyinotify
>
> Regards,
> Mikhail
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090901/78d32072/attachment-0001.html>

From hoadley at gmail.com  Tue Sep  1 11:03:19 2009
From: hoadley at gmail.com (Rob Hoadley)
Date: Tue, 1 Sep 2009 10:03:19 -0700
Subject: [Twisted-Python] deciding to use twisted or not
In-Reply-To: <3055c0a0909010820i5366f9b8r48a7757c5c397d49@mail.gmail.com>
References: <3055c0a0908261356l5453665cg4e25e2777c4f8d@mail.gmail.com>
	<d9047f780908261841g268bd8fdh3af9faac727f943c@mail.gmail.com>
	<3fce0ae70908261854o2348f433y3e91847687925409@mail.gmail.com>
	<d9047f780908261908m70897fa1x757e934517ad1cb8@mail.gmail.com>
	<3055c0a0908261946j6f668069m1459928c21aa63d1@mail.gmail.com>
	<4120a220908270511l7798458ak870c6c81176aa77d@mail.gmail.com>
	<3055c0a0908270648n68863bfcmd093ffb3b94f190c@mail.gmail.com>
	<loom.20090827T181848-915@post.gmane.org>
	<3055c0a0909010820i5366f9b8r48a7757c5c397d49@mail.gmail.com>
Message-ID: <9bb390e70909011003r16c6bd70r2f26ce5e2c0796ad@mail.gmail.com>

I've handled this problem 2 ways: 1) for almost realtime... using
twisted and .read() file as glyph mentioned and 2) used splunk and
it's functionality to send search "matching" data to a program that in
turn does http notification.  This is at 5 min search intervals.

As previous posters have mentioned, tail's behavior is inconsistent on
different platforms.  If your OS platform never changes then you could
use tail -f as a process protocol. I originally started doing my work
using the process protocol and tail -f but needed the software to work
on 3 versions of linux and os x.     The read() way of doing it was
ultimately the most cross platform way I could come up with.  Good
luck.

-rob


On Tue, Sep 1, 2009 at 8:20 AM, Martin-Louis Bright<mlbright at gmail.com> wrote:
> PyInotify only allows you to detect file changes, leaving you with the task
> of asynchronously sending http requests.
>
> -martin
>
> On Thu, Aug 27, 2009 at 12:19 PM, Mikhail <termim at gmail.com> wrote:
>>
>> Martin-Louis Bright <mlbright <at> gmail.com> writes:
>>
>> >
>> >
>> > I am using linux, and I want the daemon to be as responsive as possible
>> > to log
>> events, so I think I would rather have it sit on the same box as where the
>> log
>> is produced. (Perhaps I'm wrong about this?) So I'm going to try Cary's
>> ProcessProtocol approach, and if that doesn't work, Glyph's LoopingCall
>> with a
>> read() approach.
>> >
>>
>> You can also use pyinotify to watch your log file changes.
>> http://trac.dbzteam.org/pyinotify
>>
>> Regards,
>> Mikhail
>>
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



From hellfeuer at gmail.com  Tue Sep  1 11:28:04 2009
From: hellfeuer at gmail.com (Salil)
Date: Tue, 1 Sep 2009 22:58:04 +0530
Subject: [Twisted-Python] connecting through an http proxy
Message-ID: <47ec90170909011028x4089494s9b963ebe332fcd78@mail.gmail.com>

First of let me say that I'm *very* new to twisted (I'm only trying to patch
an app that uses twisted). So sorry if this is a stupid question.

The problem is I am behind an http proxy (with authentication), so I need to
connect through that proxy. The documentation doesn't help (me) much and
neither does google (mostly because there are a million people who have
created their own proxy server. This is not what I want to do).

Any tips? The app is currently using ClientCreator (to make an SSL
connection), but I'm willing to change all that if necessary.

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090901/dc070ced/attachment.html>

From mlbright at gmail.com  Tue Sep  1 11:39:31 2009
From: mlbright at gmail.com (Martin-Louis Bright)
Date: Tue, 1 Sep 2009 13:39:31 -0400
Subject: [Twisted-Python] twistd plugin or .tac file?
Message-ID: <3055c0a0909011039x6e84d645i18d1fe2349ec50cb@mail.gmail.com>

hi!
Which is the recommended or preferred way to deploy an app that will
leverage twistd: designing the app as a twistd plugin or creating a Service
and using a .tac file?

Also, if you need to expose your functionality as a Service to properly use
the twisted application framework, how do you achieve this if your app
doesn't need a network port?

-martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090901/641af704/attachment.html>

From filoufake-python at yahoo.fr  Tue Sep  1 14:49:27 2009
From: filoufake-python at yahoo.fr (filoufake-python at yahoo.fr)
Date: Tue, 1 Sep 2009 13:49:27 -0700 (PDT)
Subject: [Twisted-Python] Re : Re : Telnet server using Twisted and
	AuthenticatingTelnetProtocol
In-Reply-To: <20090827135231.7475.428699872.divmod.xquotient.36@localhost.localdomain>
References: <986632.28669.qm@web26103.mail.ukl.yahoo.com>
	<20090820164821.7726.1422282903.divmod.xquotient.79@localhost.localdomain>
	<140670.22919.qm@web26108.mail.ukl.yahoo.com>
	<20090827135231.7475.428699872.divmod.xquotient.36@localhost.localdomain>
Message-ID: <483632.81503.qm@web26102.mail.ukl.yahoo.com>

Hello,

Thanks to your help, the server now requests a username and password for the authentication.
Once the password has been enterred, nothing happened on the client side. I'm even not able to escape from the client. I have to ctrl-c in the server console.
If I well understood the doc, for each state of the connection a method is called: telnet_User called when state = 'User', telnet_Password called when state = 'Password' and at the end telnet_Command (to be written by me).
I have added my "telnet_Command" method into my ITelnetProtocol implementation return by requestAvatar, but it is never called.
In the telnet_Password method, the deferred calls _cbLogin in case of good authentication or _ebLogin.
I could verify that _cbLogin is well called but it seems the application blocks in.

The method looks like this:
def _cbLogin(self, ial):
        interface, protocol, logout = ial
        assert interface is ITelnetProtocol
        self.protocol = protocol
        self.logout = logout
        self.state = 'Command'
        protocol.makeConnection(self.transport)
        self.transport.protocol = protocol

I almost sure this has to do with what requestAvatar returns in my Realm class:
class Realm:
    implements(portal.IRealm)

    def requestAvatar(self, avatarId, mind, *interfaces):
        if ITelnetProtocol in interfaces:
            av = MyTelnet()
            return ITelnetProtocol, av, lambda:None
        raise NotImplementedError("Only IProtocolUser interface is supported by this realm")

MyTelnet being a derived class of StatefulTelnetProtocol.

Is it what you explained in your previous reply?
>AuthenticatingTelnetProtocol is an ITelnetProtocol implementation.  So, 
>it needs to be hooked up to an ITelnetTransport implementation, as all 
>ITelnetProtocol implementations need to.
>
>However, since the only thing it knows how to do is handle 
>authentication, it also wants to get /another/ ITelnetProtocol 
>implementation out of the portal you give it.  After authentication 
>succeeds, that new ITelnetProtocol implementation will be given control 
>of the connection and the AuthenticatingTelnetProtocol will get out of 
>the way.
>
>So you end up with one telnet transport and two telnet protocols.

I think I did all you said but I'm not able to get it work. Do you have another idea?
Thanks in advance.

Here is the log on the server:
2009-09-01 22:37:35+0200 [-] Log opened.
2009-09-01 22:37:35+0200 [-] twisted.internet.protocol.ServerFactory starting on 4738
2009-09-01 22:37:35+0200 [-] Starting factory <twisted.internet.protocol.ServerFactory instance at 0x00D82DA0>
2009-09-01 22:37:57+0200 [twisted.internet.protocol.ServerFactory] state User
2009-09-01 22:38:01+0200 [TelnetTransport,0,127.0.0.1] state User
2009-09-01 22:38:02+0200 [TelnetTransport,0,127.0.0.1] state Password
2009-09-01 22:38:02+0200 [TelnetTransport,0,127.0.0.1] BEGUG in requestAvatar: av = <__main__.MyTelnet instance at 0x00E757D8>
2009-09-01 22:38:02+0200 [TelnetTransport,0,127.0.0.1] BEGUG in _cbLogin: ial = (<InterfaceClass twisted.conch.telnet.ITelnetProtocol>, <__main__.MyTelnet instance at 0x00E757D8>, None)
2009-09-01 22:38:02+0200 [TelnetTransport,0,127.0.0.1] BEGUG in _cbLogin: state = Command
2009-09-01 22:38:02+0200 [TelnetTransport,0,127.0.0.1] BEGUG in telnet_Password: deferred d = <Deferred at 0xe75b48  current result: None>

Regards,
Philippe



      




From lvh at laurensvh.be  Tue Sep  1 15:22:24 2009
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Tue, 1 Sep 2009 23:22:24 +0200
Subject: [Twisted-Python] twisted.positioning progress report + small review
	question
Message-ID: <cedc0c090909011422p79a1316fkb62ac37010e2805@mail.gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi :-)


Just reporting progress on twisted.positioning. The NMEA parser is
basically functional, it's got one or two warts I don't quite like but
I intend on fixing once I figured out how (apparently GSV is
*supposed* to be awkward, but I'm going to try very hard to make it
less so).  I'm working on GPSD support. This should take a lot less
time than NMEA support did because GPSD's protocol is not terrible :-)
Again, watch this space, I'll keep reporting of course.

My review question, however small, is a tad urgent. With GPSD support
on the horizon, even more stuff is pretending to be a sentence, and
although they don't share an interface (that wouldn't be very sensible
anyway, since Sentences in t.positioning terminology are
implementation-specific containers), the way these sentences work is
quite important. The longer it takes for me to figure out how people
want me to do it, the more will need to be changed :-)

Personally I'm still not terribly objected towards __getattr__.
Usually I wouldn't like it either, but personally I just really don't
like the look of the bunch of properties alternative. Maybe I'm just
being stupid -- at least not so stupid that I'm not willing to listen
to anyone willing to show me a clean way of doing it.

The obvious objection to __getattr__ (the way it's implemented
currently) is that silently failing and returning None for arbitrary
keys is not a replacement for object attributes. There's a point to
that, and I agree entirely (I've had to hunt a few bugs with NoneType
not having a certain attribute), but I think I have solution:

I propose that we have a given set of attributes that __getattr__
would accept, and simply raise AttributeError (as expected) for
attributes not in that set. This would return None for things that
*can* be in a sentence but aren't -- and that makes perfect sense to
me. This list of allowed attributes can be generated quite easily
programmatically for NMEASentence.


Let me know what you think, thanks in advance for your time
Laurens
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)
Comment: Use GnuPG with Firefox : http://getfiregpg.org (Version: 0.7.8)

iEYEARECAAYFAkqdekoACgkQT5v5zGkvKT7dJACglKUDpDDow65YJrG9sfxnB4Aj
BzoAoLNv+Pm20r3Y0cI1lSGqvzZO7T9g
=/uT+
-----END PGP SIGNATURE-----



From exarkun at twistedmatrix.com  Tue Sep  1 15:37:12 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 01 Sep 2009 21:37:12 -0000
Subject: [Twisted-Python] Re : Re : Telnet server using Twisted
	and	AuthenticatingTelnetProtocol
In-Reply-To: <483632.81503.qm@web26102.mail.ukl.yahoo.com>
References: <986632.28669.qm@web26103.mail.ukl.yahoo.com>
	<20090820164821.7726.1422282903.divmod.xquotient.79@localhost.localdomain>
	<140670.22919.qm@web26108.mail.ukl.yahoo.com>
	<20090827135231.7475.428699872.divmod.xquotient.36@localhost.localdomain>
	<483632.81503.qm@web26102.mail.ukl.yahoo.com>
Message-ID: <20090901213712.7436.649981883.divmod.xquotient.131@localhost.localdomain>

On 08:49 pm, filoufake-python at yahoo.fr wrote:
>Hello,
>
>Thanks to your help, the server now requests a username and password 
>for the authentication.
>Once the password has been enterred, nothing happened on the client 
>side. I'm even not able to escape from the client. I have to ctrl-c in 
>the server console.
>If I well understood the doc, for each state of the connection a method 
>is called: telnet_User called when state = 'User', telnet_Password 
>called when state = 'Password' and at the end telnet_Command (to be 
>written by me).
>I have added my "telnet_Command" method into my ITelnetProtocol 
>implementation return by requestAvatar, but it is never called.
>In the telnet_Password method, the deferred calls _cbLogin in case of 
>good authentication or _ebLogin.
>I could verify that _cbLogin is well called but it seems the 
>application blocks in.

It's hard to say what's going wrong without being able to see all of the 
code.  A short, self contained, correct example (<http://sscce.org/>) 
would help a lot.

Jean-Paul



From exarkun at twistedmatrix.com  Tue Sep  1 15:51:40 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 01 Sep 2009 21:51:40 -0000
Subject: [Twisted-Python] connecting through an http proxy
In-Reply-To: <47ec90170909011028x4089494s9b963ebe332fcd78@mail.gmail.com>
References: <47ec90170909011028x4089494s9b963ebe332fcd78@mail.gmail.com>
Message-ID: <20090901215140.7436.617816276.divmod.xquotient.137@localhost.localdomain>

On 05:28 pm, hellfeuer at gmail.com wrote:
>First of let me say that I'm *very* new to twisted (I'm only trying to 
>patch
>an app that uses twisted). So sorry if this is a stupid question.
>
>The problem is I am behind an http proxy (with authentication), so I 
>need to
>connect through that proxy. The documentation doesn't help (me) much 
>and
>neither does google (mostly because there are a million people who have
>created their own proxy server. This is not what I want to do).
>
>Any tips? The app is currently using ClientCreator (to make an SSL
>connection), but I'm willing to change all that if necessary.

If you're using twisted.web.client, then this will be tough, as there 
really isn't any support for HTTP proxies in that API.  You might be 
able to get something to work if you're using HTTPPageGetter directly, 
though - specify the right proxy authentication headers in the headers 
dictionary you give to the factory, make sure you put the full URI in 
the request path, etc.

If you're doing something else, then maybe you can elaborate on that. :)

The new HTTP client API which has not yet been part of any release will 
make this easier, but that doesn't help you if you need to work with an 
existing version of Twisted.

Jean-Paul



From matt at bennett.name  Tue Sep  1 16:51:21 2009
From: matt at bennett.name (Matt Bennett)
Date: Tue, 1 Sep 2009 23:51:21 +0100
Subject: [Twisted-Python] FTPClient - aborting transfers
Message-ID: <e554908b0909011551h501339f7of45672954d08338@mail.gmail.com>

Hello all,

I've got an FTPClient implementation very similar to the one at [1],
and I've added the ability to retrieve a file from the server with the
following snippet:

class FileReceiver(Protocol):
    """
        Protocol subclass that writes received data to a local file.
    """
    def __init__(self, filename):
        self.file = open(filename, 'wb')

    def dataReceived(self, data):
        self.file.write(data)

receiver = FileReceiver(local_path)
d = ftpClient.retrieveFile(remote_path,receiver)

I want to be able to abort the transfers if they've not completed
after a specific period of time. When the timeout is triggered, I call
ftpClient.transport.loseConnection() which seems to stop the dL on
line 109 of [1] from firing, but the data transfer continues until
completion. This is true for both storing and retrieving files.

In the storing case, I thought that
twisted.protocols.basic.FileSender's stopProducing method might help,
but all it seems to do is trigger the errback for anyone waiting for a
response - the actual data transfer continues.

How do I abort the transfer and clear the wire when the timeout fires?

Many thanks,
Matt.


[1] http://twistedmatrix.com/pipermail/twisted-python/attachments/20031204/d43a4251/attachment.txt



From morbid.concept at gmail.com  Tue Sep  1 20:15:02 2009
From: morbid.concept at gmail.com (Nathan Lundquist)
Date: Tue, 01 Sep 2009 21:15:02 -0500
Subject: [Twisted-Python] TDD using Trial
In-Reply-To: <0654472F-2F5F-4F9E-9807-A0BA78137A39@sdsc.edu>
References: <4A9AC689.8000404@gmail.com>
	<4A9AC7A2.8070104@gmail.com>	<20090831010835.GB3466@thristian.org>
	<0654472F-2F5F-4F9E-9807-A0BA78137A39@sdsc.edu>
Message-ID: <4A9DD526.8060400@gmail.com>

Tim and Paul,

Thanks for all the information. Exactly what I was looking for.

Paul Hubbard wrote:
> I also found this quite helpful in writing StringIO tests -
> 
> http://twistedmatrix.com/trac/browser/branches/trial-tutorial-2443-2/doc/core/howto/trial.xhtml
> 
> My code is nowhere near the standards of Twisted yet, but FWIW here's  
> what I came up with:
> 
> http://amoeba.ucsd.edu:82/?p=attribute_store.git;a=blob;f=test/test_protocol.py;h=1d7df304a757adddfe98ab7e01e0aa15d29a1571;hb=HEAD
> 
> HTH,
> Paul
> 
> 
> On Aug 30, 2009, at 6:08 PM, Tim Allen wrote:
> 
>> On Sun, Aug 30, 2009 at 01:40:34PM -0500, Nathan Lundquist wrote:
>>> I was wondering if any tutorials existed for setting up unit tests  
>>> for
>>> use with trial. I've done a fair share of googling and only found
>>> tickets suggesting that more documentation be made available for  
>>> trial.
>> Setting up unit tests with trial is (deliberately) almost identical to
>> setting up unit tests with the "unittest" module in Python's standard
>> library. The key differences are:
>>
>>    - Trial provides a subclass of unittest.TestCase called
>>      twisted.trial.unittest.TestCase, which adds the following  
>> features
>>      on top of the standard Python API:
>> 	- t.t.u.TestCase supports testing of Twisted-based code,
>> 	  spinning up the reactor and shutting it down when necessary,
>> 	  etc.
>> 	- t.t.u.TestCase allows the setUp, tearDown and individual test
>> 	  methods to return Deferreds, which causes Trial to wait for
>> 	  those Deferreds to fire before it continues on.
>> 	- t.t.u.TestCase has an expanded set of assertions available,
>> 	  including Twisted-specific ones like failUnlessFailure (to
>> 	  check the Failure object returned by a deferred) but also
>> 	  prettier output for simple ones like failUnlessEqual.
>> 	- t.t.u.TestCase has a 'patch' method which allows you to
>> 	  monkeypatch other code for testing purposes. All patches are
>> 	  reverted at the end of the individual test.
>> 	- t.t.u.TestCase subclasses and even individual test methods can
>> 	  be given a 'skip' property, set to a string describing why
>> 	  that TestCase or test should be skipped. This lets you stop
>> 	  broken tests being reported as failures, but unlike just
>> 	  commenting them out, you don't have to worry that the test
>> 	  will be left out of refactorings or forgotten about and never
>> 	  uncommented. You can even skip tests at runtime, for example
>> 	  if a test is platform specific and the test is being run on
>> 	  the 'wrong' platform.
>>    - Trial will happily run unittest.TestCase test cases, but they
>>      can't use Twisted features like the reactor or deferreds. If
>>      you just want to use Trial as an alternative to nosetests, you
>>      should be fine.
>>    - If you want the automatic test-discovery to work, you need to put
>>      your TestCase classes inside files named "test_whatever.py",
>>      inside a Python package. Then you can just give Trial the name of
>>      the Python package and it will run all the tests it can find
>>      inside it.
>>
>> Is that helpful?
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 




From filoufake-python at yahoo.fr  Wed Sep  2 05:44:16 2009
From: filoufake-python at yahoo.fr (filoufake-python at yahoo.fr)
Date: Wed, 2 Sep 2009 04:44:16 -0700 (PDT)
Subject: [Twisted-Python] Re : Re : Re : Telnet server using Twisted and
	AuthenticatingTelnetProtocol
In-Reply-To: <20090901213712.7436.649981883.divmod.xquotient.131@localhost.localdomain>
References: <986632.28669.qm@web26103.mail.ukl.yahoo.com>
	<20090820164821.7726.1422282903.divmod.xquotient.79@localhost.localdomain>
	<140670.22919.qm@web26108.mail.ukl.yahoo.com>
	<20090827135231.7475.428699872.divmod.xquotient.36@localhost.localdomain>
	<483632.81503.qm@web26102.mail.ukl.yahoo.com>
	<20090901213712.7436.649981883.divmod.xquotient.131@localhost.localdomain>
Message-ID: <901134.40070.qm@web26101.mail.ukl.yahoo.com>

Hello,

>It's hard to say what's going wrong without being able to see all of the 
>code.  A short, self contained, correct example (<http://sscce.org/>) 
>would help a lot.

Hereafter is the simplest code that generates the problem.
If you run it, you will see that after entering the password nothing
happened. The "telnet_Command" method of MyTelnet is never called.
I think the problem is what requestAvatar returns.
Thanks again for your support

import sys
from zope.interface import implements
from twisted.internet import protocol
from twisted.python import log
from twisted.cred import error
from twisted.cred import portal
from twisted.cred import checkers
from twisted.cred import credentials
from twisted.conch.telnet import AuthenticatingTelnetProtocol
from twisted.conch.telnet import StatefulTelnetProtocol
from twisted.conch.telnet import ITelnetProtocol
from twisted.conch.telnet import TelnetTransport

class Realm:
  implements(portal.IRealm)

  def requestAvatar(self, avatarId, mind, *interfaces):
    if ITelnetProtocol in interfaces:
      av = MyTelnet()
      return ITelnetProtocol, av, lambda:None
    raise NotImplementedError("Not supported by this realm")

class MyTelnet(StatefulTelnetProtocol):
  def telnet_Command(self, line):
    print "line received via telnet", line

def main():
  r = Realm()
  p = portal.Portal(r)
  c = checkers.InMemoryUsernamePasswordDatabaseDontUse()
  c.addUser("AA", "aa")
  p.registerChecker(c)
  p.registerChecker(checkers.AllowAnonymousAccess())
  f = protocol.ServerFactory()
  f.protocol = lambda: TelnetTransport(AuthenticatingTelnetProtocol, p)
  log.startLogging(sys.stdout)
  from twisted.internet import reactor
  reactor.listenTCP(4738, f)
  reactor.run()

if __name__ == '__main__':
  main()


      




From itamar at itamarst.org  Wed Sep  2 06:56:13 2009
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Wed, 02 Sep 2009 08:56:13 -0400
Subject: [Twisted-Python] twistd plugin or .tac file?
In-Reply-To: <3055c0a0909011039x6e84d645i18d1fe2349ec50cb@mail.gmail.com>
References: <3055c0a0909011039x6e84d645i18d1fe2349ec50cb@mail.gmail.com>
Message-ID: <1251896174.4290.40.camel@pintsize>

On Tue, 2009-09-01 at 13:39 -0400, Martin-Louis Bright wrote:

> Which is the recommended or preferred way to deploy an app that will
> leverage twistd: designing the app as a twistd plugin or creating a
> Service and using a .tac file?

A plugin is nicer in that you can have command-line options, e.g.

$ twistd -n web --path=/tmp --port=8080

> Also, if you need to expose your functionality as a Service to
> properly use the twisted application framework, how do you achieve
> this if your app doesn't need a network port?

Just subclass Service and override startService and stopService to do
whatever you need to start and stop.

--Itamar




From exarkun at twistedmatrix.com  Wed Sep  2 08:27:40 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 02 Sep 2009 14:27:40 -0000
Subject: [Twisted-Python] Re : Re : Re : Telnet server using Twisted
	and	AuthenticatingTelnetProtocol
In-Reply-To: <901134.40070.qm@web26101.mail.ukl.yahoo.com>
References: <986632.28669.qm@web26103.mail.ukl.yahoo.com>
	<20090820164821.7726.1422282903.divmod.xquotient.79@localhost.localdomain>
	<140670.22919.qm@web26108.mail.ukl.yahoo.com>
	<20090827135231.7475.428699872.divmod.xquotient.36@localhost.localdomain>
	<483632.81503.qm@web26102.mail.ukl.yahoo.com>
	<20090901213712.7436.649981883.divmod.xquotient.131@localhost.localdomain>
	<901134.40070.qm@web26101.mail.ukl.yahoo.com>
Message-ID: <20090902142740.7436.129677005.divmod.xquotient.158@localhost.localdomain>

On 11:44 am, filoufake-python at yahoo.fr wrote:
>Hello,
>>It's hard to say what's going wrong without being able to see all of 
>>the
>>code.  A short, self contained, correct example (<http://sscce.org/>)
>>would help a lot.
>
>Hereafter is the simplest code that generates the problem.
>If you run it, you will see that after entering the password nothing
>happened. The "telnet_Command" method of MyTelnet is never called.
>I think the problem is what requestAvatar returns.
>Thanks again for your support
>
>import sys
>from zope.interface import implements
>from twisted.internet import protocol
>from twisted.python import log
>from twisted.cred import error
>from twisted.cred import portal
>from twisted.cred import checkers
>from twisted.cred import credentials
>from twisted.conch.telnet import AuthenticatingTelnetProtocol
>from twisted.conch.telnet import StatefulTelnetProtocol
>from twisted.conch.telnet import ITelnetProtocol
>from twisted.conch.telnet import TelnetTransport
>
>class Realm:
>  implements(portal.IRealm)
>
>  def requestAvatar(self, avatarId, mind, *interfaces):
>    if ITelnetProtocol in interfaces:
>      av = MyTelnet()
>      return ITelnetProtocol, av, lambda:None
>    raise NotImplementedError("Not supported by this realm")
>
>class MyTelnet(StatefulTelnetProtocol):
>  def telnet_Command(self, line):
>    print "line received via telnet", line
>
>def main():
>  r = Realm()
>  p = portal.Portal(r)
>  c = checkers.InMemoryUsernamePasswordDatabaseDontUse()
>  c.addUser("AA", "aa")
>  p.registerChecker(c)
>  p.registerChecker(checkers.AllowAnonymousAccess())
>  f = protocol.ServerFactory()
>  f.protocol = lambda: TelnetTransport(AuthenticatingTelnetProtocol, p)
>  log.startLogging(sys.stdout)
>  from twisted.internet import reactor
>  reactor.listenTCP(4738, f)
>  reactor.run()
>
>if __name__ == '__main__':
>  main()


The default state of StatefulTelnetProtocol is "Discard".  If you change 
the avatar's state to "Command" before returning it from requestAvatar, 
I think you'll see the behavior you want.

Jean-Paul



From hellfeuer at gmail.com  Thu Sep  3 03:07:31 2009
From: hellfeuer at gmail.com (Salil)
Date: Thu, 3 Sep 2009 14:37:31 +0530
Subject: [Twisted-Python] connecting through an http proxy
In-Reply-To: <20090901215140.7436.617816276.divmod.xquotient.137@localhost.localdomain>
References: <47ec90170909011028x4089494s9b963ebe332fcd78@mail.gmail.com>
	<20090901215140.7436.617816276.divmod.xquotient.137@localhost.localdomain>
Message-ID: <47ec90170909030207g7b029dd3u3a5d2d596081fc0b@mail.gmail.com>

Thanks for your reply. The app I was interested in fixing was gm-notify (
https://code.launchpad.net/gm-notify) which is a notifier for gmail. But to
be honest I've since lost interest in the question because I patched gwibber
to read the gmail atom feed instead of fixing this :)

Anyway the relevant code is:
d = defer.Deferred()
c = ClientCreator(reactor, IMAPClient)
c.connectSSL("imap.gmail.com", 993,
ssl.ClientContextFactory()).addCallback(self._gotProtocol, d)

Here connectSSL should use a proxy
In case someone knows how to fix this I'm sure there will be other people
who will appreciate it (https://bugs.launchpad.net/gm-notify/+bug/371878)

Thanks

On Wed, Sep 2, 2009 at 3:21 AM, <exarkun at twistedmatrix.com> wrote:

> On 05:28 pm, hellfeuer at gmail.com wrote:
> >First of let me say that I'm *very* new to twisted (I'm only trying to
> >patch
> >an app that uses twisted). So sorry if this is a stupid question.
> >
> >The problem is I am behind an http proxy (with authentication), so I
> >need to
> >connect through that proxy. The documentation doesn't help (me) much
> >and
> >neither does google (mostly because there are a million people who have
> >created their own proxy server. This is not what I want to do).
> >
> >Any tips? The app is currently using ClientCreator (to make an SSL
> >connection), but I'm willing to change all that if necessary.
>
> If you're using twisted.web.client, then this will be tough, as there
> really isn't any support for HTTP proxies in that API.  You might be
> able to get something to work if you're using HTTPPageGetter directly,
> though - specify the right proxy authentication headers in the headers
> dictionary you give to the factory, make sure you put the full URI in
> the request path, etc.
>
> If you're doing something else, then maybe you can elaborate on that. :)
>
> The new HTTP client API which has not yet been part of any release will
> make this easier, but that doesn't help you if you need to work with an
> existing version of Twisted.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090903/77e716f7/attachment-0001.html>

From p.mayers at imperial.ac.uk  Thu Sep  3 03:38:26 2009
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Thu, 03 Sep 2009 10:38:26 +0100
Subject: [Twisted-Python] Conch/SSH & Cisco IOS
Message-ID: <4A9F8E92.9070103@imperial.ac.uk>

All,

I've been having some problems using Conch/SSH to talk to the SSH server 
on Cisco IOS (specifically the netconf subsystem)

It seems that the IOS SSH server reacts badly to the following:

c: syn
s: syn,ack
c: ack
c: PSH <my version>, <my kex>
s: PSH <ios version>
<hang>

i.e. IOS doesn't like being bombarded with either the version string or 
KEX before it's sent its own banner.

I've patched this locally by overriding connectionMade to be a noop and 
re-implementing dataReceived; but if I prepare a patch would it be accepted?

If not, could I prepare a patch factoring some of this logic out so it 
can be more easily overridden?



From lvh at laurensvh.be  Thu Sep  3 05:36:25 2009
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Thu, 3 Sep 2009 13:36:25 +0200
Subject: [Twisted-Python] twisted.positioning: storing the error information
Message-ID: <cedc0c090909030436wa301decp3e06c8ea781b25bf@mail.gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi,


First of all, sorry for the lack of promised gpsd support updates
yesterday, I was in bed with the flu (and still am, I guess -- it's
just slightly less bad than yesterday), so if I'm not making any
sense, blame me being delirious.

As you might know t.positioning currently has one object for storing a
bunch of errors, and the IPositioningReceiver interface describes one
method (positioningErrorReceived) for receiving such an error object.
Coming from NMEA (which only reports HDOP VDOP and PDOP), putting all
of it in one object made sense -- there is an obvious mathematical
relation between the three,  so in case one is missing we can
calculate it, and that's exactly what t.p.base.PositioningError does.

For more information as to what all these xDOPs are, see:
http://en.wikipedia.org/wiki/Dilution_of_precision_%28GPS%29. Quick
introduction (skip this paragraph if you already know what xDOP
means): HDOP is the relative imprecision (expressed in the value times
the reference imprecision, which depends on the device) on latitude
and longitude. Suppose the device has a reference imprecision of 1
meter and the HDOP is 5, you know where you are (lat/lon wise) within
a five meter radius. Similarly, VDOP gives you an idea of your
altitude. Suppose the device normally provides altitude precisions up
to one meter, and the VDOP is 5, you know where you are altitude-wise
on a 5 meter line. PDOP is the euclidian norm of the (HDOP, VDOP)
vector, and as such is slightly less useful as something directly
translatable to an error measurement (it's the radius of a sphere...
sort of) but more of a relative measure of goodness-of-fix.

Anyway, the problem is this. Now that I'm implementing GPSD support,
I've noticed that it's perfectly sensible to have your positioning
source report all sorts of errors: climb error estimates, time error
estimates, position error estimates... (all of these measured in
meters, m/s, degrees/second... instead of relative values). This was
actually the original idea, and I think it was only dropped because it
was hard to do with NMEA. However, if there's anything I've learned
about NMEA it's that the less your public API looks like it probably
the better, so perhaps we should change how this works?

Maybe we could have a bunch of separate kinds of errors, and supply
them with that information. The NMEAAdapter, which does not provide
such error estimates yet (in most cases) could provide dummy error
reports with all relevant error attributes set to None. (This could be
elegantly done by simply seeding self._state).

Splitting all of this up isn't incredibly easy though. Obviously HDOP
(as well as XDOP/YDOP, which apparently will be reported separately in
NMEA3.0) is related to the position and VDOP is related to the
altitude. Where do you put PDOP, though?


Thanks in advance for your thoughts
Laurens
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)
Comment: Use GnuPG with Firefox : http://getfiregpg.org (Version: 0.7.8)

iEYEARECAAYFAkqfqegACgkQT5v5zGkvKT74qgCfY2ok9rcFkhpoRU4+f6DIOGot
1t4AoL1n9rb9OUxOwMTuojaiBMlWLG35
=lEq+
-----END PGP SIGNATURE-----



From lvh at laurensvh.be  Thu Sep  3 06:23:47 2009
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Thu, 3 Sep 2009 14:23:47 +0200
Subject: [Twisted-Python] twisted.positioning: storing the error
	information
In-Reply-To: <cedc0c090909030436wa301decp3e06c8ea781b25bf@mail.gmail.com>
References: <cedc0c090909030436wa301decp3e06c8ea781b25bf@mail.gmail.com>
Message-ID: <cedc0c090909030523y6c8691f5q572383a4ba5150f9@mail.gmail.com>

Oh, I think I've just found a nice and clever way of doing it.

Let's stop pretending that altitudes are special. After all, the axes
altitude, latitude and longitude are measured on are all orthogonal.
The only difference is that we use degrees to measure one and meters
to measure the other (because the earth just isn't flat). The
"position" in time-position-velocity (TPV) is traditionally understood
to also contain altitude information.

This has the advantage of keeping the Position(ing)Error object
consistent with the way it works now, and then we only have to remove
the IPositioningReceiver.altitudeReceived callback and merge it with
IPositioningReceiver.positionReceived, and then add a bunch of objects
for describing all sorts of errors (ClimbError, HeadingError...),
rename PositioningError to PositionError and add it as a parameter on
positionReceived, and similarly add a parameter for all of the other
callbacks except for beaconInformationReceived.

Make sense to anyone else but me?


Thanks for listening
Laurens



From foom at fuhm.net  Thu Sep  3 11:04:15 2009
From: foom at fuhm.net (James Y Knight)
Date: Thu, 3 Sep 2009 13:04:15 -0400
Subject: [Twisted-Python] Conch/SSH & Cisco IOS
In-Reply-To: <4A9F8E92.9070103@imperial.ac.uk>
References: <4A9F8E92.9070103@imperial.ac.uk>
Message-ID: <1CF75890-4A8D-45C6-A38F-C4E71FF7DC2F@fuhm.net>


On Sep 3, 2009, at 5:38 AM, Phil Mayers wrote:

> All,
>
> I've been having some problems using Conch/SSH to talk to the SSH  
> server
> on Cisco IOS (specifically the netconf subsystem)
>
> It seems that the IOS SSH server reacts badly to the following:
>
> c: syn
> s: syn,ack
> c: ack
> c: PSH <my version>, <my kex>
> s: PSH <ios version>
> <hang>
>
> i.e. IOS doesn't like being bombarded with either the version string  
> or
> KEX before it's sent its own banner.

I'm surprised to hear that, given that other users have posted  
programs using conch that run commands against multiple Cisco routers  
-- and apparently those programs worked. Do you have a particularly  
old IOS? (Or maybe particularly new?)

But if that's the case, it is clearly a bug in their ssh implementation.

 From http://www.ietf.org/rfc/rfc4253.txt:
>    Since the new client MAY immediately send additional data after its
>    identification string (before receiving the server's identification
>    string), the old protocol may already be corrupt when the client
>    learns that the server is old.  When this happens, the client  
> SHOULD
>    close the connection to the server, and reconnect using the old
>    protocol.


But anyhow, a patch to add a "broken-server-bug-workaround" option  
seems reasonable. Once you've reported the bug to Cisco, so they'll  
fix it at some point, that is.

James



From pahan at xzrq.net  Thu Sep  3 14:07:14 2009
From: pahan at xzrq.net (Pavel Pergamenshchik)
Date: Thu, 3 Sep 2009 13:07:14 -0700
Subject: [Twisted-Python] Conch/SSH & Cisco IOS
In-Reply-To: <4A9F8E92.9070103@imperial.ac.uk>
References: <4A9F8E92.9070103@imperial.ac.uk>
Message-ID: <7447a0ac0909031307n1c903d8vaf5dc14ea4163049@mail.gmail.com>

On Thu, Sep 3, 2009 at 2:38 AM, Phil Mayers<p.mayers at imperial.ac.uk> wrote:
> All,
>
> I've been having some problems using Conch/SSH to talk to the SSH server
> on Cisco IOS (specifically the netconf subsystem)
...
> i.e. IOS doesn't like being bombarded with either the version string or
> KEX before it's sent its own banner.

What version of IOS, what router model and what version of Twisted are
you using? Can you post the ssh-related parts of your router
configuration?



From p.mayers at imperial.ac.uk  Thu Sep  3 16:19:16 2009
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Thu, 03 Sep 2009 23:19:16 +0100
Subject: [Twisted-Python] Conch/SSH & Cisco IOS
In-Reply-To: <1CF75890-4A8D-45C6-A38F-C4E71FF7DC2F@fuhm.net>
References: <4A9F8E92.9070103@imperial.ac.uk>
	<1CF75890-4A8D-45C6-A38F-C4E71FF7DC2F@fuhm.net>
Message-ID: <4AA040E4.5000700@imperial.ac.uk>

James Y Knight wrote:
>> It seems that the IOS SSH server reacts badly to the following:
>>
>> c: syn
>> s: syn,ack
>> c: ack
>> c: PSH <my version>, <my kex>
>> s: PSH <ios version>
>> <hang>
>>
>> i.e. IOS doesn't like being bombarded with either the version string  
>> or
>> KEX before it's sent its own banner.
> 
> I'm surprised to hear that, given that other users have posted  
> programs using conch that run commands against multiple Cisco routers  

Well, it's possible I've mis-diagnosed the problem.

The symptoms are that my Conch SSH client only connects maybe one time 
out of every 20, with a tcpdump showing the above. If I patch conch to 
only send its banner after the cisco, it works fine.

If I get time I'll try to work up a minimal example and test it against 
an older IOS version. Time is not something I have a lot of - this is 
strictly a "nice to have" project.

> -- and apparently those programs worked. Do you have a particularly  
> old IOS? (Or maybe particularly new?)

It's pretty new - 12.2(33)SXI on Cisco 6500/sup720

> But if that's the case, it is clearly a bug in their ssh implementation.

Probably.

> 
>  From http://www.ietf.org/rfc/rfc4253.txt:
>>    Since the new client MAY immediately send additional data after its
>>    identification string (before receiving the server's identification
>>    string), the old protocol may already be corrupt when the client
>>    learns that the server is old.  When this happens, the client  
>> SHOULD
>>    close the connection to the server, and reconnect using the old
>>    protocol.
> 
> 
> But anyhow, a patch to add a "broken-server-bug-workaround" option  
> seems reasonable. Once you've reported the bug to Cisco, so they'll  
> fix it at some point, that is.

I'll be honest; I'm unlikely to spend the time to do that. I open about 
10 TAC cases a month for things varying from malloc failures to full-on 
crashes, and I have opened enough to know what their response would be.

*If* I can reproduce a clear regression against a previous software 
version I *might* open a fire&forget TAC case.



From p.mayers at imperial.ac.uk  Thu Sep  3 16:33:22 2009
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Thu, 03 Sep 2009 23:33:22 +0100
Subject: [Twisted-Python] Conch/SSH & Cisco IOS
In-Reply-To: <7447a0ac0909031307n1c903d8vaf5dc14ea4163049@mail.gmail.com>
References: <4A9F8E92.9070103@imperial.ac.uk>
	<7447a0ac0909031307n1c903d8vaf5dc14ea4163049@mail.gmail.com>
Message-ID: <4AA04432.1040207@imperial.ac.uk>

Pavel Pergamenshchik wrote:
> On Thu, Sep 3, 2009 at 2:38 AM, Phil Mayers<p.mayers at imperial.ac.uk> wrote:
>> All,
>>
>> I've been having some problems using Conch/SSH to talk to the SSH server
>> on Cisco IOS (specifically the netconf subsystem)
> ...
>> i.e. IOS doesn't like being bombarded with either the version string or
>> KEX before it's sent its own banner.
> 
> What version of IOS, what router model and what version of Twisted are

12.2(33)SXI2 on 6500/sup720

Twisted version is either 2.5.0 or 8.2.0 - same results with both.

It does seem to be an IOS bug; it doesn't happen against some of other 
other kit (e.g. 3750s running 12.2(46)SE)

> you using? Can you post the ssh-related parts of your router
> configuration?

There is none; it's using plain defaults i.e. boot the box, run a 
"crypto key generate rsa", SSH is enabled.

Sigh. I am really not looking forward to opening a TAC case here.

"What SSH client are you running?"
"Twisted Conch"
"Is that a windows application"
"No it's an SSH library"
"We support Putty"
"It's a library"
"Perl?"

Grumble.



From nathan.stocks at gmail.com  Fri Sep  4 00:22:10 2009
From: nathan.stocks at gmail.com (Nathan)
Date: Fri, 4 Sep 2009 00:22:10 -0600
Subject: [Twisted-Python] Installing twisted on Snow Leopard with custom
	32-bit Python from python.org
Message-ID: <96c9d6a80909032322x32fc4304i8b22e4b8fbf4a5f5@mail.gmail.com>

I've installed the 32-bit Python on Snow Leopard (for various reasons
unrelated to twisted) and would like to get twisted working with it.
I've tried downloading twisted and running the standard "sudo python
setup.py install" -- but that seems to simply install it in the system
Python installation.  How can I get twisted installed where the Python
installation that I got from python.org can use it?

~ Nathan



From ronaldoussoren at mac.com  Fri Sep  4 04:21:08 2009
From: ronaldoussoren at mac.com (Ronald Oussoren)
Date: Fri, 04 Sep 2009 12:21:08 +0200
Subject: [Twisted-Python] Installing twisted on Snow Leopard with
	custom	32-bit Python from python.org
In-Reply-To: <96c9d6a80909032322x32fc4304i8b22e4b8fbf4a5f5@mail.gmail.com>
References: <96c9d6a80909032322x32fc4304i8b22e4b8fbf4a5f5@mail.gmail.com>
Message-ID: <63475578504701279737914897104356085641-Webmail@me.com>

 
On Friday, 04 September, 2009, at 08:22AM, "Nathan" <nathan.stocks at gmail.com> wrote:
>I've installed the 32-bit Python on Snow Leopard (for various reasons
>unrelated to twisted) and would like to get twisted working with it.
>I've tried downloading twisted and running the standard "sudo python
>setup.py install" -- but that seems to simply install it in the system
>Python installation.  How can I get twisted installed where the Python
>installation that I got from python.org can use it?

Your probably using /usr/bin/python rather than the one you downloaded from Python.org. 

What's the output of 'which python'?  The python.org installer places binaries into /usr/local/bin, and also has a script in /Application/Python 2.6/ that will patch the startup profile of your shell to ensure that the python.org binaries are earlier on $PATH than the system install.

Ronald




From exarkun at twistedmatrix.com  Fri Sep  4 07:29:06 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 04 Sep 2009 13:29:06 -0000
Subject: [Twisted-Python] FTPClient - aborting transfers
In-Reply-To: <e554908b0909011551h501339f7of45672954d08338@mail.gmail.com>
References: <e554908b0909011551h501339f7of45672954d08338@mail.gmail.com>
Message-ID: <20090904132906.7436.1198691450.divmod.xquotient.266@localhost.localdomain>

On 1 Sep, 10:51 pm, matt at bennett.name wrote:
>Hello all,
>
>I've got an FTPClient implementation very similar to the one at [1],
>and I've added the ability to retrieve a file from the server with the
>following snippet:
>
>class FileReceiver(Protocol):
>    """
>        Protocol subclass that writes received data to a local file.
>    """
>    def __init__(self, filename):
>        self.file = open(filename, 'wb')
>
>    def dataReceived(self, data):
>        self.file.write(data)
>
>receiver = FileReceiver(local_path)
>d = ftpClient.retrieveFile(remote_path,receiver)
>
>I want to be able to abort the transfers if they've not completed
>after a specific period of time. When the timeout is triggered, I call
>ftpClient.transport.loseConnection() which seems to stop the dL on
>line 109 of [1] from firing, but the data transfer continues until
>completion. This is true for both storing and retrieving files.
>
>In the storing case, I thought that
>twisted.protocols.basic.FileSender's stopProducing method might help,
>but all it seems to do is trigger the errback for anyone waiting for a
>response - the actual data transfer continues.
>
>How do I abort the transfer and clear the wire when the timeout fires?

The DTP connection is set as the (undocumented) dtpInstance attribute on 
the FTP instance it's associated with.  You can call loseConnection on 
that object's transport and the download should stop.  It might be 
worthwhile for someone to clean this up a bit.  Does it ever make sense 
for the transfer to continue when the control channel is gone?  Even if 
so, it'd be nice to have a supported (or at least documented) way to do 
this cleanup.

Jean-Paul



From p.mayers at imperial.ac.uk  Fri Sep  4 07:36:44 2009
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Fri, 04 Sep 2009 14:36:44 +0100
Subject: [Twisted-Python] Conch/SSH & Cisco IOS
In-Reply-To: <1CF75890-4A8D-45C6-A38F-C4E71FF7DC2F@fuhm.net>
References: <4A9F8E92.9070103@imperial.ac.uk>
	<1CF75890-4A8D-45C6-A38F-C4E71FF7DC2F@fuhm.net>
Message-ID: <4AA117EC.7070400@imperial.ac.uk>

James Y Knight wrote:
> On Sep 3, 2009, at 5:38 AM, Phil Mayers wrote:
> 
>> All,
>>
>> I've been having some problems using Conch/SSH to talk to the SSH  
>> server
>> on Cisco IOS (specifically the netconf subsystem)
>>
>> It seems that the IOS SSH server reacts badly to the following:
>>
>> c: syn
>> s: syn,ack
>> c: ack
>> c: PSH <my version>, <my kex>
>> s: PSH <ios version>
>> <hang>
>>
>> i.e. IOS doesn't like being bombarded with either the version string  
>> or
>> KEX before it's sent its own banner.
> 
> I'm surprised to hear that, given that other users have posted  
> programs using conch that run commands against multiple Cisco routers  
> -- and apparently those programs worked. Do you have a particularly  
> old IOS? (Or maybe particularly new?)

As per my other email, it seems to be limited to the 12.2(33) train on 
the 6500 platform. Later and earlier trains on other platforms don't 
display the issue.

> 
> But if that's the case, it is clearly a bug in their ssh implementation.
> 
>  From http://www.ietf.org/rfc/rfc4253.txt:
>>    Since the new client MAY immediately send additional data after its
>>    identification string (before receiving the server's identification
>>    string), the old protocol may already be corrupt when the client
>>    learns that the server is old.  When this happens, the client  
>> SHOULD
>>    close the connection to the server, and reconnect using the old
>>    protocol.
> 
> 
> But anyhow, a patch to add a "broken-server-bug-workaround" option  
> seems reasonable. Once you've reported the bug to Cisco, so they'll  
> fix it at some point, that is.

FWIW I've opened a TAC case with Cisco; we'll see what they say.

I note that OpenSSH seems to wait for the server banner before sending 
the client banner & kex.



From peter.westlake at pobox.com  Fri Sep  4 07:53:37 2009
From: peter.westlake at pobox.com (Peter Westlake)
Date: Fri, 04 Sep 2009 14:53:37 +0100
Subject: [Twisted-Python] Is there an equivalent of tap2deb?
Message-ID: <1252072417.21540.1333224733@webmail.messagingengine.com>

Now that .tap files are obsolete, is there a supported way of making
Debian packages like tap2dep?

Thanks,

Peter.



From screwtape at froup.com  Fri Sep  4 08:29:54 2009
From: screwtape at froup.com (Tim Allen)
Date: Sat, 5 Sep 2009 00:29:54 +1000
Subject: [Twisted-Python] Is there an equivalent of tap2deb?
In-Reply-To: <1252072417.21540.1333224733@webmail.messagingengine.com>
References: <1252072417.21540.1333224733@webmail.messagingengine.com>
Message-ID: <20090904142954.GC5111@thristian.org>

On Fri, Sep 04, 2009 at 02:53:37PM +0100, Peter Westlake wrote:
> Now that .tap files are obsolete, is there a supported way of making
> Debian packages like tap2dep?

.tap files (Pickle-based config files) may be obsolete, but I don't
believe the other variants (.tac for Python-based config files, and
I think there's an XML serialisation too) are obsolete.

I've never used tap2deb, but twistd and tap2rpm both seem to be quite
happy with .tac files in our production systems here.



From nathan.stocks at gmail.com  Fri Sep  4 10:45:11 2009
From: nathan.stocks at gmail.com (Nathan)
Date: Fri, 4 Sep 2009 10:45:11 -0600
Subject: [Twisted-Python] Installing twisted on Snow Leopard with custom
	32-bit Python from python.org
In-Reply-To: <63475578504701279737914897104356085641-Webmail@me.com>
References: <96c9d6a80909032322x32fc4304i8b22e4b8fbf4a5f5@mail.gmail.com>
	<63475578504701279737914897104356085641-Webmail@me.com>
Message-ID: <96c9d6a80909040945o41b41abfrfbb2325bc8a00b27@mail.gmail.com>

On Fri, Sep 4, 2009 at 4:21 AM, Ronald Oussoren<ronaldoussoren at mac.com> wrote:
>
> On Friday, 04 September, 2009, at 08:22AM, "Nathan" <nathan.stocks at gmail.com> wrote:
>>I've installed the 32-bit Python on Snow Leopard (for various reasons
>>unrelated to twisted) and would like to get twisted working with it.
>>I've tried downloading twisted and running the standard "sudo python
>>setup.py install" -- but that seems to simply install it in the system
>>Python installation. How can I get twisted installed where the Python
>>installation that I got from python.org can use it?
>
> Your probably using /usr/bin/python rather than the one you downloaded from Python.org.
>
> What's the output of 'which python'? The python.org installer places binaries into /usr/local/bin, and also has a script in /Application/Python 2.6/ that will patch the startup profile of your shell to ensure that the python.org binaries are earlier on $PATH than the system install.

Nope, I was calling
"/Library/Frameworks/Python.framework/Versions/2.6/bin/python"
explicitly, which is the location that the binary 32-bit installer
indicated it was installing into.  I disabled most (maybe all) of the
"helpful" python.org installer features like altering my path for me,
installing into /usr/local/bin, and installing the GUI apps.

But since you are mentioning it, perhaps twisted will install into the
custom python if it is earlier in the path than the system python?
Trying....nope.  Well, something's different--perhaps there's more
paths I need to add?  Here's what I tried:

export PATH="/Library/Frameworks/Python.framework/Versions/2.6/bin/:$PATH"

$ sudo python setup.py install
running install
running build
running build_py
running build_ext
gcc -arch ppc -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk
-fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -O3
-I/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6
-c conftest.c -o conftest.o
gcc -arch ppc -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk
-fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -O3
-I/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6
-c conftest.c -o conftest.o
conftest.c:1:23: error: sys/epoll.h: No such file or directory
conftest.c:1:23: error: sys/epoll.h: No such file or directory
lipo: can't figure out the architecture type of: /var/tmp//ccIcwAI5.out
building 'twisted.runner.portmap' extension
creating build/temp.macosx-10.3-fat-2.6
creating build/temp.macosx-10.3-fat-2.6/twisted
creating build/temp.macosx-10.3-fat-2.6/twisted/runner
gcc -arch ppc -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk
-fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -O3
-I/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6
-c twisted/runner/portmap.c -o
build/temp.macosx-10.3-fat-2.6/twisted/runner/portmap.o
In file included from
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/unicodeobject.h:4,
                 from
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/Python.h:85,
                 from twisted/runner/portmap.c:10:
/Developer/SDKs/MacOSX10.4u.sdk/usr/include/stdarg.h:4:25: error:
stdarg.h: No such file or directory
In file included from
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/unicodeobject.h:4,
                 from
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/Python.h:85,
                 from twisted/runner/portmap.c:10:
/Developer/SDKs/MacOSX10.4u.sdk/usr/include/stdarg.h:4:25: error:
stdarg.h: No such file or directory
lipo: can't figure out the architecture type of: /var/tmp//ccnV11Ya.out
error: command 'gcc' failed with exit status 1


~ Nathan



From peter.westlake at pobox.com  Fri Sep  4 12:03:41 2009
From: peter.westlake at pobox.com (Peter Westlake)
Date: Fri, 04 Sep 2009 19:03:41 +0100
Subject: [Twisted-Python] Is there an equivalent of tap2deb?
In-Reply-To: <20090904142954.GC5111@thristian.org>
References: <1252072417.21540.1333224733@webmail.messagingengine.com>
	<20090904142954.GC5111@thristian.org>
Message-ID: <1252087421.30084.1333270037@webmail.messagingengine.com>

On Sat, 05 Sep 2009 00:29 +1000, "Tim Allen" <screwtape at froup.com>
wrote:
> On Fri, Sep 04, 2009 at 02:53:37PM +0100, Peter Westlake wrote:
> > Now that .tap files are obsolete, is there a supported way of making
> > Debian packages like tap2dep?
> 
> .tap files (Pickle-based config files) may be obsolete, but I don't
> believe the other variants (.tac for Python-based config files, and
> I think there's an XML serialisation too) are obsolete.
> 
> I've never used tap2deb, but twistd and tap2rpm both seem to be quite
> happy with .tac files in our production systems here.

I'll try that, thanks!

Peter.



From art at academ.org  Fri Sep  4 14:59:45 2009
From: art at academ.org (Bokhan Artem)
Date: Sat, 05 Sep 2009 03:59:45 +0700
Subject: [Twisted-Python] network server on multiprocessor hardware
Message-ID: <4AA17FC1.1070303@academ.org>

Hello.

Is there right (standard) way to write twisted network server
(tcp/web/mail/etc) which could use several cpu cores? For example,
master+workers model, where every worker doing the same job.
If so, may somebody help to wrap the sample code below?
May be some well-known twisted based software can do that?


from twisted.application import service,internet
from twisted.web import server,resource

class Simple(resource.Resource):
    isLeaf = True
    def render_GET(self, request):
        return "Hello world."

application = service.Application("http")
ServerFactory = server.Site(Simple())
ServerService = internet.TCPServer(8081, ServerFactory)
ServerService.setServiceParent(application)





From glyph at twistedmatrix.com  Fri Sep  4 17:20:57 2009
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Fri, 4 Sep 2009 19:20:57 -0400
Subject: [Twisted-Python] network server on multiprocessor hardware
In-Reply-To: <4AA17FC1.1070303@academ.org>
References: <4AA17FC1.1070303@academ.org>
Message-ID: <d9047f780909041620y417dd667w5f2cce684e090c3f@mail.gmail.com>

On Fri, Sep 4, 2009 at 4:59 PM, Bokhan Artem <art at academ.org> wrote:

> Hello.
>
> Is there right (standard) way to write twisted network server
> (tcp/web/mail/etc) which could use several cpu cores? For example,
> master+workers model, where every worker doing the same job.
> If so, may somebody help to wrap the sample code below?
> May be some well-known twisted based software can do that?
>

The sample code you've provided doesn't do anything; no CPU consumption of
its own (it's all in the framework) and no network I/O of its own.  So it's
hard to come up with a realistic example.  There's no way to tell Twisted
itself to spread itself out over multiple CPU cores, but then, Twisted
itself is rarely the chief CPU consumer in an application.

If you want to take advantage of multiple CPU cures though, have a look at
Ampoule: <https://launchpad.net/ampoule>.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090904/c9a1407d/attachment.html>

From matt at bennett.name  Fri Sep  4 17:50:36 2009
From: matt at bennett.name (Matt Bennett)
Date: Sat, 5 Sep 2009 00:50:36 +0100
Subject: [Twisted-Python] os x installer, multiple source locations
Message-ID: <e554908b0909041650q3bcd76b5t51a1c88217c4d87c@mail.gmail.com>

Hello all,

I used the Twisted 8.2.0 for OS X 10.5 installer from [1] to install
twisted on my mac. I don't understand why, but I seem to have two
copies of the source on the disk, one at
/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/twisted
and another at /Library/Python/2.5/site-packages/twisted. Both
locations are on sys.path, the former taking precedence.

More curiously, the two versions appear to be different. The following
snippet fails with the version that python finds by default:

from twisted.python import usage

class Options(usage.Options):
    optParameters = [["shiny_integer", "s", 1, None, int]]
    optParameters = [["dummy_float", "d", 3.14159, None, float]]

o = Options()

Resulting in:

Traceback (most recent call last):
  File "options.py", line 7, in <module>
    o = Options()
  File "/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/twisted/python/usage.py",
line 120, in __init__
    (longOpt, shortOpt, docs, settings, synonyms, dispatch) = c()
  File "/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/twisted/python/usage.py",
line 287, in _gather_parameters
    long, short, default, doc = util.padTo(4, parameter)
  File "/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/twisted/python/util.py",
line 227, in padTo
    raise ValueError, "%d elements is more than %d." % (len(seq), n)
ValueError: 5 elements is more than 4.

The same snippet works with the version in the other location. Is this a bug?

Thanks,
Matt.

[1] http://tmrc.mit.edu/mirror/twisted/Twisted/8.2/Twisted-8.2.0_py2.5_osx10.5.dmg



From jjoske at nextdigital.com  Fri Sep  4 20:49:39 2009
From: jjoske at nextdigital.com (John Joske)
Date: Sat, 5 Sep 2009 12:49:39 +1000
Subject: [Twisted-Python] Looping in a deffered
Message-ID: <4DB589C0660D1442900051415FDBE5C0018B02DA@exchange.wdg>

I'm trying to make a simple deferred that will continue get a message of
a message queue, process it and then wait for another message.

 

While I can get the first message easily I am unable to work out how I
can get a second message without creating a new deferred in the printMsg
function, which eventually gives me a maximum recursion depth exceeded.

 

Basic code is a follows: 

 

from twisted.internet import reactor,defer

 

def printMsg(msg):

    print "Message is:"

    print msg

    

    deferred=getMsg()

    deferred.addCallback(printMsg)

 

 

def getMsg() :

    d=defer.Deferred()

    #replaced with code that actually goes to a queue to get the message

    msg="This is a message"

    d.callback(msg)

    return d

 

deferred=getMsg()

deferred.addCallback(printMsg)

reactor.run()

    

Can any one point me on the right path to solve this?

 

Thanks

 

John

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090905/3277bb8d/attachment.html>

From art at academ.org  Sat Sep  5 05:56:34 2009
From: art at academ.org (Bokhan Artem)
Date: Sat, 05 Sep 2009 18:56:34 +0700
Subject: [Twisted-Python] network server on multiprocessor hardware
In-Reply-To: <d9047f780909041620y417dd667w5f2cce684e090c3f@mail.gmail.com>
References: <4AA17FC1.1070303@academ.org>
	<d9047f780909041620y417dd667w5f2cce684e090c3f@mail.gmail.com>
Message-ID: <4AA251F2.2060205@academ.org>

Glyph Lefkowitz :
> On Fri, Sep 4, 2009 at 4:59 PM, Bokhan Artem <art at academ.org 
> <mailto:art at academ.org>> wrote:
> 
>     Hello.
> 
>     Is there right (standard) way to write twisted network server
>     (tcp/web/mail/etc) which could use several cpu cores? For example,
>     master+workers model, where every worker doing the same job.
>     If so, may somebody help to wrap the sample code below?
>     May be some well-known twisted based software can do that?
> 
> 
> The sample code you've provided doesn't do anything;

Yes, it's just a dummy sample.

> no CPU consumption of its own (it's all in the framework) and no network I/O of its own.

> So it's hard to come up with a realistic example.  There's no way to 
> tell Twisted itself to spread itself out over multiple CPU cores, but 
> then, Twisted itself is rarely the chief CPU consumer in an application.

This dummy sample can serve about 1k req/s on one cpu core. I want to find 
standard ways to make it serve 1k*ncpu req/s.

I see only one way: run master which listen network and balance requests between 
several forked twisted processes. I'm not very familiar with twisted so I want 
to see somebody's opinion and may be examples.
> 
> If you want to take advantage of multiple CPU cures though, have a look 
> at Ampoule: <https://launchpad.net/ampoule>.

Thanks, I'll take a look.

> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From lvh at laurensvh.be  Sat Sep  5 06:16:35 2009
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Sat, 5 Sep 2009 14:16:35 +0200
Subject: [Twisted-Python] network server on multiprocessor hardware
In-Reply-To: <4AA251F2.2060205@academ.org>
References: <4AA17FC1.1070303@academ.org>
	<d9047f780909041620y417dd667w5f2cce684e090c3f@mail.gmail.com>
	<4AA251F2.2060205@academ.org>
Message-ID: <cedc0c090909050516r7a7367e3ra5578af60749b6d5@mail.gmail.com>

Are you sure it's dying out because of CPU limitations? Can you show
any real applications where this happens? In my experience your
network IO always gives up ages before my processors croak :-)

I happen to be in the middle of writing a project with a big
computational component (at least when I'm not hacking away at
twisted.positioning), and generally the heavy computational stuff
doesn't live in the Twisted layer. In that case you probably want to
defer computation to a different process, a la Ampoule.


have fun,
Laurens



From art at academ.org  Sat Sep  5 08:07:24 2009
From: art at academ.org (Bokhan Artem)
Date: Sat, 05 Sep 2009 21:07:24 +0700
Subject: [Twisted-Python] network server on multiprocessor hardware
In-Reply-To: <cedc0c090909050516r7a7367e3ra5578af60749b6d5@mail.gmail.com>
References: <4AA17FC1.1070303@academ.org>	<d9047f780909041620y417dd667w5f2cce684e090c3f@mail.gmail.com>	<4AA251F2.2060205@academ.org>
	<cedc0c090909050516r7a7367e3ra5578af60749b6d5@mail.gmail.com>
Message-ID: <4AA2709C.4090501@academ.org>

Laurens Van Houtven :
> Are you sure it's dying out because of CPU limitations? 

Yes, with 1k req/s cpu is 100% busy with python.

> Can you show any real applications where this happens? 

I do not have real application in python/twisted now.
That could be any internet server with high load or under dos.

> In my experience your network IO always gives up ages before my processors croak :-)

It depends.

> 
> I happen to be in the middle of writing a project with a big
> computational component (at least when I'm not hacking away at
> twisted.positioning), and generally the heavy computational stuff
> doesn't live in the Twisted layer. 

I do not have any heavy computations, just high request rate.

In that case you probably want to
> defer computation to a different process, a la Ampoule.
> 
> 
> have fun,
> Laurens
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From exarkun at twistedmatrix.com  Sat Sep  5 08:17:00 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sat, 05 Sep 2009 14:17:00 -0000
Subject: [Twisted-Python] Looping in a deffered
In-Reply-To: <4DB589C0660D1442900051415FDBE5C0018B02DA@exchange.wdg>
References: <4DB589C0660D1442900051415FDBE5C0018B02DA@exchange.wdg>
Message-ID: <20090905141700.7436.533833547.divmod.xquotient.416@localhost.localdomain>

On 02:49 am, jjoske at nextdigital.com wrote:
>I'm trying to make a simple deferred that will continue get a message 
>of
>a message queue, process it and then wait for another message.
>
>While I can get the first message easily I am unable to work out how I
>can get a second message without creating a new deferred in the 
>printMsg
>function, which eventually gives me a maximum recursion depth exceeded.
>
>Basic code is a follows:
>
>from twisted.internet import reactor,defer
>
>def printMsg(msg):
>    print "Message is:"
>    print msg
>
>    deferred=getMsg()
>    deferred.addCallback(printMsg)
>
>def getMsg() :
>    d=defer.Deferred()
>    #replaced with code that actually goes to a queue to get the message
>    msg="This is a message"
>    d.callback(msg)
>    return d
>
>deferred=getMsg()
>deferred.addCallback(printMsg)
>reactor.run()
>
>Can any one point me on the right path to solve this?
>
>Thanks
>
>John

The above code is basically another way of writing this:

    def getMsg():
        return "This is a message"

    def printMsg(msg):
        print "Message is:"
        print msg
        printMsg(getMsg())

    printMsg(getMsg())

Hopefully it's obvious why this version of the code would fail 
eventually with a recursion error.  These are equivalent because 
d.addCallback(f) will call f immediately (ie, before addCallback 
returns) if d.callback(result) has already been called.

This only changes if getMsg (the original Deferred-returning one) ever 
returns a Deferred which has *not* already fired.  In such a case, the 
call stack will unwind back to the main loop and the code won't run any 
further until the Deferred returned by getMsg is called back.

I would expect the actual queue-retrieval version of the code to 
sometimes (or always) return a Deferred which has not yet been called 
back.  However, if you're seeing recursion errors, then this must not be 
the case.  Are you expecting the queue-retrieval version to return 
Deferreds that have already fired?

If you aren't, then I don't think I understand why you're encountering 
this error (or you're mistaken in your expectations).  An example closer 
to your actual program might help clear things up.

If you are, then you have two options.

First, you can stop using Deferreds and change the code from recursive 
to iterative.  eg,

    def getMsg():
        return "This is a message"

    def printMsg(msg):
        print "Message is:"
        print msg

    while True:
        printMsg(getMsg())

Of course, that's not very event loop friendly, so you might try making 
it cooperative by hooking it up to a scheduler:

    def messageIteration():
        printMsg(getMsg())
        reactor.callLater(0, messageIteration)

Or, factoring the specific scheduler policy out:

    def messagePrinter():
        while True:
            yield printMsg(getMsg())

    from twisted.internet.task import coiterate
    coiterate(messagePrinter())

Second, if there's a good reason to use Deferreds in this code (for 
example, there are multiple implementations of getMsg, some of which are 
synchronous, some of which are asynchronous, and preserving the 
interface between all of them is desirable), then you may want to use 
one of the above scheduler techniques as a trampoline so that you can 
avoid having the stack build up when a synchronous implementation is 
used:

    def messagePrinter():
        d = getMsg()
        d.addCallback(printMsg)
        d.addCallback(lambda ignored: reactor.callLater(0, 
messagePrinter))

Or you might use inlineCallbacks to define the trampoline:

    @inlineCallbacks
    def messagePrinter():
        while True:
            pringMsg(yield getMsg())

The idea here being that you never let recursion continue unbounded. 
You process one iteration and then let its call frames finish, return, 
and pop off the call stack so that they're out of the way for the next 
iteration.

Incidentally, there are a couple of other ways that Deferreds can trick 
you into hitting the call stack limit.  They can be addressed in ways 
similar to the ones I've described here.  However, they're also due to 
implementation limitations which hopefully will be removed someday.  The 
problem that you've run into here, though, doesn't seem to be due to an 
implementation limitation (at least not one that I can imagine any 
resolution to now) - it's just a pattern you need to avoid.

Hope this helps,

Jean-Paul



From phil at bubblehouse.org  Sat Sep  5 20:08:06 2009
From: phil at bubblehouse.org (Phil Christensen)
Date: Sat, 5 Sep 2009 22:08:06 -0400
Subject: [Twisted-Python] os x installer, multiple source locations
In-Reply-To: <e554908b0909041650q3bcd76b5t51a1c88217c4d87c@mail.gmail.com>
References: <e554908b0909041650q3bcd76b5t51a1c88217c4d87c@mail.gmail.com>
Message-ID: <F6FE837E-BB3C-43E1-AA89-6BA297ED50A6@bubblehouse.org>

On Sep 4, 2009, at 7:50 PM, Matt Bennett wrote:
> Hello all,
>
> I used the Twisted 8.2.0 for OS X 10.5 installer from [1] to install
> twisted on my mac. I don't understand why, but I seem to have two
> copies of the source on the disk

This is a frustrating partial install of Twisted that ships with OS X  
(AFAIK just to support iCal Server). Interestingly enough, it's gone  
from Snow Leopard; the calendar server must use something else these  
days...

You have two options. One option is to create a .pth file that points  
to your twisted source dir (I used this method since I was running SVN  
head). My twisted.pth file in site-packages looks like this:

import sys; sys.path = [s for s in sys.path if s != '/Library/Python/ 
2.5/site-packages']
import sys; sys.path.insert(0, '/Library/Python/2.5/site-packages')
import sys; sys.path.insert(0, '/Users/phil/Workspace/Twisted')

But honestly, I think all you'd really need is the last line. I don't  
develop on my 10.5 machine anymore, so I don't exactly remember why I  
did some of this ;-)

Another option I hadn't considered until now is to just remove that  
existing Twisted install. Unless you use iCal server it doesn't get  
used by anything else in the OS, so you should be fine. You could  
always zip it just to be safe.

Hope my ramblings help in some way ;-)

-phil



From exarkun at twistedmatrix.com  Sat Sep  5 22:05:13 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 06 Sep 2009 04:05:13 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1252209913.29.1726385160@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090906/1939c34a/attachment-0001.html>

From listes at sourcelibre.com  Sun Sep  6 08:46:46 2009
From: listes at sourcelibre.com (Alexandre Quessy)
Date: Sun, 6 Sep 2009 10:46:46 -0400
Subject: [Twisted-Python] deciding to use twisted or not
In-Reply-To: <9bb390e70909011003r16c6bd70r2f26ce5e2c0796ad@mail.gmail.com>
References: <3055c0a0908261356l5453665cg4e25e2777c4f8d@mail.gmail.com>
	<d9047f780908261841g268bd8fdh3af9faac727f943c@mail.gmail.com>
	<3fce0ae70908261854o2348f433y3e91847687925409@mail.gmail.com>
	<d9047f780908261908m70897fa1x757e934517ad1cb8@mail.gmail.com>
	<3055c0a0908261946j6f668069m1459928c21aa63d1@mail.gmail.com>
	<4120a220908270511l7798458ak870c6c81176aa77d@mail.gmail.com>
	<3055c0a0908270648n68863bfcmd093ffb3b94f190c@mail.gmail.com>
	<loom.20090827T181848-915@post.gmane.org>
	<3055c0a0909010820i5366f9b8r48a7757c5c397d49@mail.gmail.com>
	<9bb390e70909011003r16c6bd70r2f26ce5e2c0796ad@mail.gmail.com>
Message-ID: <8f32d9ee0909060746o1c21ca73pc665414fb615531b@mail.gmail.com>

Hi !
You might want to look at my implementation of a tail -F :
https://svn.sat.qc.ca/trac/miville/browser/trunk/py/miville/utils/tail.py
Let me know if you have better than that.
a

2009/9/1 Rob Hoadley <hoadley at gmail.com>:
> I've handled this problem 2 ways: 1) for almost realtime... using
> twisted and .read() file as glyph mentioned and 2) used splunk and
> it's functionality to send search "matching" data to a program that in
> turn does http notification. This is at 5 min search intervals.
>
> As previous posters have mentioned, tail's behavior is inconsistent on
> different platforms. If your OS platform never changes then you could
> use tail -f as a process protocol. I originally started doing my work
> using the process protocol and tail -f but needed the software to work
> on 3 versions of linux and os x.   The read() way of doing it was
> ultimately the most cross platform way I could come up with. Good
> luck.
>
> -rob
>
>
> On Tue, Sep 1, 2009 at 8:20 AM, Martin-Louis Bright<mlbright at gmail.com> wrote:
>> PyInotify only allows you to detect file changes, leaving you with the task
>> of asynchronously sending http requests.
>>
>> -martin
>>
>> On Thu, Aug 27, 2009 at 12:19 PM, Mikhail <termim at gmail.com> wrote:
>>>
>>> Martin-Louis Bright <mlbright <at> gmail.com> writes:
>>>
>>> >
>>> >
>>> > I am using linux, and I want the daemon to be as responsive as possible
>>> > to log
>>> events, so I think I would rather have it sit on the same box as where the
>>> log
>>> is produced. (Perhaps I'm wrong about this?) So I'm going to try Cary's
>>> ProcessProtocol approach, and if that doesn't work, Glyph's LoopingCall
>>> with a
>>> read() approach.
>>> >
>>>
>>> You can also use pyinotify to watch your log file changes.
>>> http://trac.dbzteam.org/pyinotify
>>>
>>> Regards,
>>> Mikhail
>>>
>>>
>>>
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
Alexandre Quessy
http://alexandre.quessy.net
http://www.puredata.info/Members/aalex



From mlbright at gmail.com  Sun Sep  6 10:46:00 2009
From: mlbright at gmail.com (Martin-Louis Bright)
Date: Sun, 6 Sep 2009 12:46:00 -0400
Subject: [Twisted-Python] deciding to use twisted or not
In-Reply-To: <8f32d9ee0909060746o1c21ca73pc665414fb615531b@mail.gmail.com>
References: <3055c0a0908261356l5453665cg4e25e2777c4f8d@mail.gmail.com>
	<3fce0ae70908261854o2348f433y3e91847687925409@mail.gmail.com>
	<d9047f780908261908m70897fa1x757e934517ad1cb8@mail.gmail.com>
	<3055c0a0908261946j6f668069m1459928c21aa63d1@mail.gmail.com>
	<4120a220908270511l7798458ak870c6c81176aa77d@mail.gmail.com>
	<3055c0a0908270648n68863bfcmd093ffb3b94f190c@mail.gmail.com>
	<loom.20090827T181848-915@post.gmane.org>
	<3055c0a0909010820i5366f9b8r48a7757c5c397d49@mail.gmail.com>
	<9bb390e70909011003r16c6bd70r2f26ce5e2c0796ad@mail.gmail.com>
	<8f32d9ee0909060746o1c21ca73pc665414fb615531b@mail.gmail.com>
Message-ID: <3055c0a0909060946g40b59ce0q326a49008ac848d0@mail.gmail.com>

Brilliant! Thank you. -martin

On Sun, Sep 6, 2009 at 10:46 AM, Alexandre Quessy<listes at sourcelibre.com> wrote:
> Hi !
> You might want to look at my implementation of a tail -F :
> https://svn.sat.qc.ca/trac/miville/browser/trunk/py/miville/utils/tail.py
> Let me know if you have better than that.
> a
>
> 2009/9/1 Rob Hoadley <hoadley at gmail.com>:
>> I've handled this problem 2 ways: 1) for almost realtime... using
>> twisted and .read() file as glyph mentioned and 2) used splunk and
>> it's functionality to send search "matching" data to a program that in
>> turn does http notification. This is at 5 min search intervals.
>>
>> As previous posters have mentioned, tail's behavior is inconsistent on
>> different platforms. If your OS platform never changes then you could
>> use tail -f as a process protocol. I originally started doing my work
>> using the process protocol and tail -f but needed the software to work
>> on 3 versions of linux and os x.   The read() way of doing it was
>> ultimately the most cross platform way I could come up with. Good
>> luck.
>>
>> -rob
>>
>>
>> On Tue, Sep 1, 2009 at 8:20 AM, Martin-Louis Bright<mlbright at gmail.com> wrote:
>>> PyInotify only allows you to detect file changes, leaving you with the task
>>> of asynchronously sending http requests.
>>>
>>> -martin
>>>
>>> On Thu, Aug 27, 2009 at 12:19 PM, Mikhail <termim at gmail.com> wrote:
>>>>
>>>> Martin-Louis Bright <mlbright <at> gmail.com> writes:
>>>>
>>>> >
>>>> >
>>>> > I am using linux, and I want the daemon to be as responsive as possible
>>>> > to log
>>>> events, so I think I would rather have it sit on the same box as where the
>>>> log
>>>> is produced. (Perhaps I'm wrong about this?) So I'm going to try Cary's
>>>> ProcessProtocol approach, and if that doesn't work, Glyph's LoopingCall
>>>> with a
>>>> read() approach.
>>>> >
>>>>
>>>> You can also use pyinotify to watch your log file changes.
>>>> http://trac.dbzteam.org/pyinotify
>>>>
>>>> Regards,
>>>> Mikhail
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> Twisted-Python mailing list
>>>> Twisted-Python at twistedmatrix.com
>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>
>>>
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>
>>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>
>
>
> --
> Alexandre Quessy
> http://alexandre.quessy.net
> http://www.puredata.info/Members/aalex
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From matt at bennett.name  Sun Sep  6 14:14:46 2009
From: matt at bennett.name (Matt Bennett)
Date: Sun, 6 Sep 2009 21:14:46 +0100
Subject: [Twisted-Python] os x installer, multiple source locations
In-Reply-To: <F6FE837E-BB3C-43E1-AA89-6BA297ED50A6@bubblehouse.org>
References: <e554908b0909041650q3bcd76b5t51a1c88217c4d87c@mail.gmail.com>
	<F6FE837E-BB3C-43E1-AA89-6BA297ED50A6@bubblehouse.org>
Message-ID: <e554908b0909061314p6c862814j4a7fe58f0c86e31@mail.gmail.com>

On Sun, Sep 6, 2009 at 3:08 AM, Phil Christensen<phil at bubblehouse.org> wrote:
> On Sep 4, 2009, at 7:50 PM, Matt Bennett wrote:
>> Hello all,
>>
>> I used the Twisted 8.2.0 for OS X 10.5 installer from [1] to install
>> twisted on my mac. I don't understand why, but I seem to have two
>> copies of the source on the disk
>
> This is a frustrating partial install of Twisted that ships with OS X
> (AFAIK just to support iCal Server). Interestingly enough, it's gone
> from Snow Leopard; the calendar server must use something else these
> days...

Very curious. I don't know anything about the design rationale but the
end result is pretty unintuitive. At the very least some documentation
about the situation would be useful.

> You have two options. One option is to create a .pth file that points
> to your twisted source dir (I used this method since I was running SVN
> head). My twisted.pth file in site-packages looks like this:
>
> import sys; sys.path = [s for s in sys.path if s != '/Library/Python/
> 2.5/site-packages']
> import sys; sys.path.insert(0, '/Library/Python/2.5/site-packages')
> import sys; sys.path.insert(0, '/Users/phil/Workspace/Twisted')
>
> But honestly, I think all you'd really need is the last line. I don't
> develop on my 10.5 machine anymore, so I don't exactly remember why I
> did some of this ;-)
>
> Another option I hadn't considered until now is to just remove that
> existing Twisted install. Unless you use iCal server it doesn't get
> used by anything else in the OS, so you should be fine. You could
> always zip it just to be safe.
>
> Hope my ramblings help in some way ;-)

Certainly did, thank you. I modified my path just as you suggested,
although I'm curious as to how this approach doesn't also break iCal
server.

Matt.

> -phil
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From phil at bubblehouse.org  Mon Sep  7 00:10:53 2009
From: phil at bubblehouse.org (Phil Christensen)
Date: Mon, 7 Sep 2009 02:10:53 -0400
Subject: [Twisted-Python] os x installer, multiple source locations
In-Reply-To: <e554908b0909061314p6c862814j4a7fe58f0c86e31@mail.gmail.com>
References: <e554908b0909041650q3bcd76b5t51a1c88217c4d87c@mail.gmail.com>
	<F6FE837E-BB3C-43E1-AA89-6BA297ED50A6@bubblehouse.org>
	<e554908b0909061314p6c862814j4a7fe58f0c86e31@mail.gmail.com>
Message-ID: <F99231E6-59D2-4E20-8D77-2BE715FC110D@bubblehouse.org>

On Sep 6, 2009, at 4:14 PM, Matt Bennett wrote:
> Very curious. I don't know anything about the design rationale but  
> the end result is pretty unintuitive. At the very least some  
> documentation about the situation would be useful.

Agreed, but for whatever reason, this is the first time I've heard it  
come up on the list since I ran into it, which may be why it hasn't  
been added to the install docs. I'm sure a docs patch would be well  
received, if you were so inclined ;-)

On Sep 6, 2009, at 4:14 PM, Matt Bennett wrote:
> On Sun, Sep 6, 2009 at 3:08 AM, Phil Christensen wrote:
>> Hope my ramblings help in some way ;-)
>
> Certainly did, thank you. I modified my path just as you suggested,
> although I'm curious as to how this approach doesn't also break iCal  
> server.

Well, to be honest, it could easily break iCal Server; I'm not really  
sure. I only use regular iCal, which is unaffected by this change.

That said, I've had a lot of luck running old applications against  
brand new checkouts of Twisted. It's obviously going to depend on what  
parts of it are used, and which parts are in active development, but  
historically I haven't had too many problems.

Also, I was under the impression that only OS X Server came with the  
iCal Server, so on second thought, I'm not sure why the twisted source  
is even there in the client install. Of course, at this point I'm  
operating entirely on heresay and conjecture, since I never took the  
time to look for iCal Server in the client installation of OS X.

-phil



From gabriel.rossetti at arimaz.com  Mon Sep  7 08:21:04 2009
From: gabriel.rossetti at arimaz.com (Gabriel Rossetti)
Date: Mon, 07 Sep 2009 16:21:04 +0200
Subject: [Twisted-Python] Twisted, wxPython & PyPubSub
Message-ID: <4AA516D0.5000207@arimaz.com>

Hello everyone,

I am using wx with twisted and pubsub (not the on in wx but the 
independent one) to notify each one of what is going on. I was wondering 
if I should use reactor.callFromThread to call publisher.sendMessage or 
not? I haven't been doing that until now but I wondered if it was better to.

thanks,
Gabriel



From exarkun at twistedmatrix.com  Mon Sep  7 08:36:11 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 07 Sep 2009 14:36:11 -0000
Subject: [Twisted-Python] Twisted, wxPython & PyPubSub
In-Reply-To: <4AA516D0.5000207@arimaz.com>
References: <4AA516D0.5000207@arimaz.com>
Message-ID: <20090907143611.7485.1439067646.divmod.xquotient.5@localhost.localdomain>

On 02:21 pm, gabriel.rossetti at arimaz.com wrote:
>Hello everyone,
>
>I am using wx with twisted and pubsub (not the on in wx but the
>independent one) to notify each one of what is going on. I was 
>wondering
>if I should use reactor.callFromThread to call publisher.sendMessage or
>not? I haven't been doing that until now but I wondered if it was 
>better to.

Use reactor.callFromThread if you have code running in a non-reactor 
thread and you want it to initiate some action in the reactor thread.

So, if publisher.sendMessage is using Twisted APIs or otherwise requires 
that it be run only in the reactor thread, and you need to use it from a 
non-reactor thread, then use reactor.callFromThread.  Otherwise, don't.

Jean-Paul



From foom at fuhm.net  Mon Sep  7 12:27:36 2009
From: foom at fuhm.net (James Y Knight)
Date: Mon, 7 Sep 2009 14:27:36 -0400
Subject: [Twisted-Python] os x installer, multiple source locations
In-Reply-To: <F6FE837E-BB3C-43E1-AA89-6BA297ED50A6@bubblehouse.org>
References: <e554908b0909041650q3bcd76b5t51a1c88217c4d87c@mail.gmail.com>
	<F6FE837E-BB3C-43E1-AA89-6BA297ED50A6@bubblehouse.org>
Message-ID: <BE9797C6-C58A-4773-B75C-219228B6BA0F@fuhm.net>


On Sep 5, 2009, at 10:08 PM, Phil Christensen wrote:

> This is a frustrating partial install of Twisted that ships with OS X

Not true. It was fixed soon after 10.5's release. I think in the very  
first patch, 10.5.1, but I could be wrong about that.

> Interestingly enough, it's gone
> from Snow Leopard

It's not gone from Snow Leopard -- Twisted is still installed by  
default. Along with a bunch of other software.

See:
/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/ 
python/twisted/

James



From teemu.harju at gmail.com  Tue Sep  8 04:05:45 2009
From: teemu.harju at gmail.com (Teemu Harju)
Date: Tue, 8 Sep 2009 13:05:45 +0300
Subject: [Twisted-Python] Twisted on Jython
Message-ID: <96274d630909080305y76d76c0cj90c5faba550e34a8@mail.gmail.com>

Hi,
I've been trying to get Twisted working on Jython and haven't been
successful yet. I've seen that there are some bugs still on Jython or
Twisted side. What I'd like to know is that is it currently possible somehow
get Twisted running on Jython? I've tried using trunk versions of both
without success.

Br,

- Teemu

-- 
Teemu Harju

email/jabber: teemu.harju at gmail.com
blog: http://blog.teemu.im
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090908/a2f8c9d4/attachment-0001.html>

From glyph at twistedmatrix.com  Tue Sep  8 05:55:11 2009
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Tue, 8 Sep 2009 07:55:11 -0400
Subject: [Twisted-Python] Twisted on Jython
In-Reply-To: <96274d630909080305y76d76c0cj90c5faba550e34a8@mail.gmail.com>
References: <96274d630909080305y76d76c0cj90c5faba550e34a8@mail.gmail.com>
Message-ID: <d9047f780909080455m2b94664h6d100eb86fa94f9b@mail.gmail.com>

On Tue, Sep 8, 2009 at 6:05 AM, Teemu Harju <teemu.harju at gmail.com> wrote:

> Hi,
>

Hi, Teemu.


> I've been trying to get Twisted working on Jython and haven't been
> successful yet. I've seen that there are some bugs still on Jython or
> Twisted side. What I'd like to know is that is it currently possible somehow
> get Twisted running on Jython? I've tried using trunk versions of both
> without success.
>

It is not currently possible, although both the Twisted and Jython teams
would like to see this happen.

There is a ticket - <http://twistedmatrix.com/trac/ticket/3413> - and a
related branch, "jython-3413", which contains a collection of
quick-and-dirty workarounds; about enough to get 'trial' to bootstrap on
Jython so you can start to fix failing tests.

You could consider submitting patches against that branch, or fixing some of
the related Jython issues (for example: <
http://twistedmatrix.com/trac/ticket/3725>) to help this process along.

I don't believe there's a huge amount of work required to make Twisted work
on Jython, but it needs a couple of days of concerted attention from someone
who really needs it to actually work.  Maybe you could be that person :).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090908/4bdca8e8/attachment.html>

From gabriel.rossetti at arimaz.com  Wed Sep  9 01:12:23 2009
From: gabriel.rossetti at arimaz.com (Gabriel Rossetti)
Date: Wed, 09 Sep 2009 09:12:23 +0200
Subject: [Twisted-Python] Twisted, wxPython & PyPubSub
In-Reply-To: <20090907143611.7485.1439067646.divmod.xquotient.5@localhost.localdomain>
References: <4AA516D0.5000207@arimaz.com>
	<20090907143611.7485.1439067646.divmod.xquotient.5@localhost.localdomain>
Message-ID: <4AA75557.8040005@arimaz.com>


Arimaz SA
Ingnieur en Informatique
Av. du 24 Janvier 11
Ateliers de la Ville de Renens, Atelier 5
1020 Renens, Switzerland
www.arimaz.com
www.mydeskfriend.com
Mob: +41-(0)79-539-0069
Tel: +41-(0)21-566-7343



exarkun at twistedmatrix.com wrote:
> On 02:21 pm, gabriel.rossetti at arimaz.com wrote:
>   
>> Hello everyone,
>>
>> I am using wx with twisted and pubsub (not the on in wx but the
>> independent one) to notify each one of what is going on. I was 
>> wondering
>> if I should use reactor.callFromThread to call publisher.sendMessage or
>> not? I haven't been doing that until now but I wondered if it was 
>> better to.
>>     
>
> Use reactor.callFromThread if you have code running in a non-reactor 
> thread and you want it to initiate some action in the reactor thread.
>
> So, if publisher.sendMessage is using Twisted APIs or otherwise requires 
> that it be run only in the reactor thread, and you need to use it from a 
> non-reactor thread, then use reactor.callFromThread.  Otherwise, don't.
>
> Jean-Paul
>
>   

Would you consider the wxreactor like a non-reactor thread? I haven't 
checked out the code behind PyPubSub, but it's basically the 
Observer-Pattern so when I call publisher.sendMessage(...) it iterates 
the "subscribers" (observers) and calls the functions they associated w/ 
the subscription. Those functions are both in the twisted code and the 
wx code. The Twisted code sends messages nd the wx code brings-up/hides 
dialogs or frames. In the wxdemo it does :

# look, we can use twisted calls!
reactor.callLater(2, self.twoSecondsPassed)

but doesn't use reactor.callFromThread, but unless I'm wrong 
reactor.callLater does the same thing but deferred in time. I often see 
reactor.callLater(0, myFunc) being used.

Thank you,
Gabriel





From matt at bennett.name  Wed Sep  9 07:28:26 2009
From: matt at bennett.name (Matt Bennett)
Date: Wed, 9 Sep 2009 14:28:26 +0100
Subject: [Twisted-Python] FTPClient - aborting transfers
In-Reply-To: <20090904132906.7436.1198691450.divmod.xquotient.266@localhost.localdomain>
References: <e554908b0909011551h501339f7of45672954d08338@mail.gmail.com>
	<20090904132906.7436.1198691450.divmod.xquotient.266@localhost.localdomain>
Message-ID: <e554908b0909090628w41096ed0j53ce675d70bf47a6@mail.gmail.com>

On Fri, Sep 4, 2009 at 2:29 PM, <exarkun at twistedmatrix.com> wrote:
>
> On 1 Sep, 10:51 pm, matt at bennett.name wrote:
> >Hello all,
> >
> >I've got an FTPClient implementation very similar to the one at [1],
> >and I've added the ability to retrieve a file from the server with the
> >following snippet:
> >
> >class FileReceiver(Protocol):
> >  """
> >    Protocol subclass that writes received data to a local file.
> >  """
> >  def __init__(self, filename):
> >    self.file = open(filename, 'wb')
> >
> >  def dataReceived(self, data):
> >    self.file.write(data)
> >
> >receiver = FileReceiver(local_path)
> >d = ftpClient.retrieveFile(remote_path,receiver)
> >
> >I want to be able to abort the transfers if they've not completed
> >after a specific period of time. When the timeout is triggered, I call
> >ftpClient.transport.loseConnection() which seems to stop the dL on
> >line 109 of [1] from firing, but the data transfer continues until
> >completion. This is true for both storing and retrieving files.
> >
> >In the storing case, I thought that
> >twisted.protocols.basic.FileSender's stopProducing method might help,
> >but all it seems to do is trigger the errback for anyone waiting for a
> >response - the actual data transfer continues.
> >
> >How do I abort the transfer and clear the wire when the timeout fires?
>
> The DTP connection is set as the (undocumented) dtpInstance attribute on
> the FTP instance it's associated with. You can call loseConnection on
> that object's transport and the download should stop. It might be
> worthwhile for someone to clean this up a bit. Does it ever make sense
> for the transfer to continue when the control channel is gone? Even if
> so, it'd be nice to have a supported (or at least documented) way to do
> this cleanup.

The only reference to dtpInstance I can find in
twisted/protocols/ftp.py exists on the FTP class. I may be confused,
but I thought this class was the protocol for FTP servers, rather than
clients?

In my attempt to find and stop *something* on the FTPClient, I ended
up calling finish() on the IFinishableConsumer passed into
FileSender's send method. This seems to stop the transfer in the store
case, but unfortunately I'm no closer to a solution when retrieving a
file.

Am I missing something?

Thanks,
Matt.

>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From cdelfosse at mandriva.com  Wed Sep  9 09:28:21 2009
From: cdelfosse at mandriva.com (Cedric Delfosse)
Date: Wed, 09 Sep 2009 17:28:21 +0200
Subject: [Twisted-Python] IOCP reactor on Windows 2000
Message-ID: <1252510101.20208.76.camel@lolita.localnet>

Hello,

Twisted Python 8.2.0 on Windows 2000 gives me this TB when I try to use
the IOCP reactor. Is it supported on this platform ? (Works very well on
Windows XP)

The instance's SvcRun() method failed 
  File "win32serviceutil.pyc", line 805, in SvcRun
  File "server-win32.pyc", line 81, in SvcDoRun
  File "twisted\internet\iocpreactor\__init__.pyc", line 8, in <module>
  File "twisted\internet\iocpreactor\reactor.pyc", line 19, in <module>
  File "twisted\internet\iocpreactor\iocpsupport.pyc", line 12, in <module>
  File "twisted\internet\iocpreactor\iocpsupport.pyc", line 10, in __load
  File "iocpsupport.pyx", line 242, in iocpsupport 
<type 'exceptions.ValueError'>: Failed to initialize Winsock function vectors 

Regards,

-- 
Cedric Delfosse                                    Mandriva / Linbox
152, rue de Grigy - Technopole Metz              57070 METZ - FRANCE
tel: +33 (0)3 87 50 87 90                        http://mandriva.com





From cyclops at speakeasy.net  Wed Sep  9 10:39:03 2009
From: cyclops at speakeasy.net (John Crawford)
Date: Wed, 09 Sep 2009 12:39:03 -0400
Subject: [Twisted-Python] PB/Remote Object/Deferred question
In-Reply-To: <mailman.5.1252512002.3830.twisted-python@twistedmatrix.com
 >
References: <mailman.5.1252512002.3830.twisted-python@twistedmatrix.com>
Message-ID: <mailman.7.1574573436.12674.twisted-python@twistedmatrix.com>

I'm trying to understand the Perspective Broker, reading over the 
on-site documentation, specifically the article:

http://twistedmatrix.com/projects/core/documentation/howto/pb-usage.html

and there is a section about the callRemote() function that I really 
don't understand :)

First, consider these three lines:

d = factory.getRootObject()
d.addCallback(lambda object: object.callRemote("echo", "hello network"))
d.addCallback(lambda echo: 'server echoed: '+echo)

Second, the documentation says, "...object.callRemote() returns a 
Deferred. Assuming the remote method was run without causing an 
exception (including an attempt to invoke an unknown method), the 
callback attached to that Deferred will be invoked with any objects 
that were returned by the remote method call."

If I read this correctly, callRemote() returns a whole new Deferred 
object, which is *not* the same as the 'd' Deferred object we already 
have. So that *new* Deferred should be the one that the next callback 
(line 3) is added to, since the next callback is based on the success 
of the callRemote(). So wouldn't these be the correct lines:

d = factory.getRootObject()
d2 = d.addCallback(lambda object: object.callRemote("echo", "hello network"))
d2.addCallback(lambda echo: 'server echoed: '+echo)


Thanks in advance for any clarification.

John C>







From exarkun at twistedmatrix.com  Wed Sep  9 10:56:39 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 09 Sep 2009 16:56:39 -0000
Subject: [Twisted-Python] PB/Remote Object/Deferred question
In-Reply-To: <E1MlQHU-0001tv-J4@cube.twistedmatrix.com>
References: <mailman.5.1252512002.3830.twisted-python@twistedmatrix.com>
	<E1MlQHU-0001tv-J4@cube.twistedmatrix.com>
Message-ID: <20090909165639.7485.440446374.divmod.xquotient.365@localhost.localdomain>

On 04:39 pm, cyclops at speakeasy.net wrote:
>I'm trying to understand the Perspective Broker, reading over the
>on-site documentation, specifically the article:
>
>http://twistedmatrix.com/projects/core/documentation/howto/pb- 
>usage.html
>
>and there is a section about the callRemote() function that I really
>don't understand :)
>
>First, consider these three lines:
>
>d = factory.getRootObject()
>d.addCallback(lambda object: object.callRemote("echo", "hello 
>network"))
>d.addCallback(lambda echo: 'server echoed: '+echo)
>
>Second, the documentation says, "...object.callRemote() returns a
>Deferred. Assuming the remote method was run without causing an
>exception (including an attempt to invoke an unknown method), the
>callback attached to that Deferred will be invoked with any objects
>that were returned by the remote method call."
>
>If I read this correctly, callRemote() returns a whole new Deferred
>object, which is *not* the same as the 'd' Deferred object we already
>have. So that *new* Deferred should be the one that the next callback
>(line 3) is added to, since the next callback is based on the success
>of the callRemote(). So wouldn't these be the correct lines:
>
>d = factory.getRootObject()
>d2 = d.addCallback(lambda object: object.callRemote("echo", "hello 
>network"))
>d2.addCallback(lambda echo: 'server echoed: '+echo)

When one Deferred is returned from a callback on another Deferred, the 
two Deferreds are "chained".  This means that the result of the one 
Deferred becomes the result of the other Deferred, and callbacks added 
to the other Deferred are not run until this happens.

Additionally, Deferred.addCallback returns self, so your version of the 
code is really exactly the same as the original version.

Jean-Paul



From peter.westlake at pobox.com  Wed Sep  9 11:35:53 2009
From: peter.westlake at pobox.com (Peter Westlake)
Date: Wed, 09 Sep 2009 18:35:53 +0100
Subject: [Twisted-Python] PB/Remote Object/Deferred question
In-Reply-To: <E1MlQHU-0001tv-J4@cube.twistedmatrix.com>
References: <mailman.5.1252512002.3830.twisted-python@twistedmatrix.com>
	<E1MlQHU-0001tv-J4@cube.twistedmatrix.com>
Message-ID: <1252517753.23380.1334004013@webmail.messagingengine.com>

On Wed, 09 Sep 2009 12:39 -0400, "John Crawford" <cyclops at speakeasy.net>
wrote:
> I'm trying to understand the Perspective Broker, reading over the 
> on-site documentation, specifically the article:
> 
> http://twistedmatrix.com/projects/core/documentation/howto/pb-usage.html
> 
> and there is a section about the callRemote() function that I really 
> don't understand :)
> 
> First, consider these three lines:
> 
> d = factory.getRootObject()
> d.addCallback(lambda object: object.callRemote("echo", "hello network"))
> d.addCallback(lambda echo: 'server echoed: '+echo)
> 
> Second, the documentation says, "...object.callRemote() returns a 
> Deferred. Assuming the remote method was run without causing an 
> exception (including an attempt to invoke an unknown method), the 
> callback attached to that Deferred will be invoked with any objects 
> that were returned by the remote method call."
> 
> If I read this correctly, callRemote() returns a whole new Deferred 
> object, which is *not* the same as the 'd' Deferred object we already 
> have. So that *new* Deferred should be the one that the next callback 
> (line 3) is added to, since the next callback is based on the success 
> of the callRemote(). So wouldn't these be the correct lines:
> 
> d = factory.getRootObject()
> d2 = d.addCallback(lambda object: object.callRemote("echo", "hello
> network"))
> d2.addCallback(lambda echo: 'server echoed: '+echo)

Can I get in before someone else does? If I do, will I get it right?
Be kind, O wise ones!

Here goes:

d.addCallback always returns d. Remember that the callRemote is only
called once d is fired, so its result and the result of the lambda
expression are (simplifying a little) only computed after this piece
of code is long since over and done with. It just adds callback
functions (your lambda expressions) to the callback chain of d.
 
The result of each callback function is fed into the callback chain, to
be passed as parameter to the next callback.

Because the return value from the first callback is a Deferred, it is
not passed directly to the next callback. Instead processing pauses
until this new Deferred fires, and then the value it returns is passed
to the echo callback. It's a feature, and a most nifty one :-)

In summary:

factory.getRootObject returns a Deferred, d.

Two callbacks are added to d.

...time passes...

Something in the factory module finishes doing getRootObject
and passes the result ("thing", say) to d: "d.callback(thing)".

The first callback function uses it: "object.callRemote(rootThing)".

callRemote returns a new Deferred, d2.

The code of Deferred.callback spots the callback has returned
a Deferred. It puts d2 aside in a safe place, and d.callback()
returns.

...time passes...

The callRemote gets an answer, and d2 fires. It doesn't have
any callbacks (that you know about, at least) so it returns
the value.

The code of Deferred.callback that previously stashed d2
notices that it has fired, picks up the value and passes
it along the next callback in d's chain, the lambda echo.


Regards,

Peter.





From exarkun at twistedmatrix.com  Wed Sep  9 19:47:23 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 10 Sep 2009 01:47:23 -0000
Subject: [Twisted-Python] FTPClient - aborting transfers
In-Reply-To: <e554908b0909090628w41096ed0j53ce675d70bf47a6@mail.gmail.com>
References: <e554908b0909011551h501339f7of45672954d08338@mail.gmail.com>
	<20090904132906.7436.1198691450.divmod.xquotient.266@localhost.localdomain>
	<e554908b0909090628w41096ed0j53ce675d70bf47a6@mail.gmail.com>
Message-ID: <20090910014723.7485.803038671.divmod.xquotient.375@localhost.localdomain>

On 9 Sep, 01:28 pm, matt at bennett.name wrote:
>[snip]
>
>The only reference to dtpInstance I can find in
>twisted/protocols/ftp.py exists on the FTP class. I may be confused,
>but I thought this class was the protocol for FTP servers, rather than
>clients?

You're right, I wasn't thinking about clients.
>In my attempt to find and stop *something* on the FTPClient, I ended
>up calling finish() on the IFinishableConsumer passed into
>FileSender's send method. This seems to stop the transfer in the store
>case, but unfortunately I'm no closer to a solution when retrieving a
>file.
>
>Am I missing something?

It seems FTPClient doesn't really keep track of enough objects to make 
this easy.  A patch addressing this would be welcome.

Jean-Paul



From exarkun at twistedmatrix.com  Wed Sep  9 19:46:28 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 10 Sep 2009 01:46:28 -0000
Subject: [Twisted-Python] Twisted, wxPython & PyPubSub
In-Reply-To: <4AA75557.8040005@arimaz.com>
References: <4AA516D0.5000207@arimaz.com>
	<20090907143611.7485.1439067646.divmod.xquotient.5@localhost.localdomain>
	<4AA75557.8040005@arimaz.com>
Message-ID: <20090910014628.7485.1039456853.divmod.xquotient.373@localhost.localdomain>

On 9 Sep, 07:12 am, gabriel.rossetti at arimaz.com wrote:
>exarkun at twistedmatrix.com wrote:
>>On 02:21 pm, gabriel.rossetti at arimaz.com wrote:
>>>Hello everyone,
>>>
>>>I am using wx with twisted and pubsub (not the on in wx but the
>>>independent one) to notify each one of what is going on. I was
>>>wondering
>>>if I should use reactor.callFromThread to call publisher.sendMessage 
>>>or
>>>not? I haven't been doing that until now but I wondered if it was
>>>better to.
>>
>>Use reactor.callFromThread if you have code running in a non-reactor
>>thread and you want it to initiate some action in the reactor thread.
>>
>>So, if publisher.sendMessage is using Twisted APIs or otherwise 
>>requires
>>that it be run only in the reactor thread, and you need to use it from 
>>a
>>non-reactor thread, then use reactor.callFromThread.  Otherwise, 
>>don't.
>>
>>Jean-Paul
>
>Would you consider the wxreactor like a non-reactor thread?

I'm not sure what you mean.  The "reactor thread" is the thread that 
"reactor.run()" is called in.  Even if you're using wxreactor.
>I haven't
>checked out the code behind PyPubSub, but it's basically the
>Observer-Pattern so when I call publisher.sendMessage(...) it iterates
>the "subscribers" (observers) and calls the functions they associated 
>w/
>the subscription. Those functions are both in the twisted code and the
>wx code. The Twisted code sends messages nd the wx code brings-up/hides
>dialogs or frames. In the wxdemo it does :
>
># look, we can use twisted calls!
>reactor.callLater(2, self.twoSecondsPassed)
>
>but doesn't use reactor.callFromThread, but unless I'm wrong
>reactor.callLater does the same thing but deferred in time. I often see
>reactor.callLater(0, myFunc) being used.

The wx demo doesn't do anything with threads, so it doesn't need to use 
callFromThread.  So, if you're only doing things like what the wx demo 
does, you probably don't need callFromThread either.

callLater doesn't do the same thing as callFromThread.  There might be 
some vague similarities (really the only one is that neither one calls 
the function you pass it right away), but they're for very different 
things.

Jean-Paul



From exarkun at twistedmatrix.com  Wed Sep  9 19:54:42 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 10 Sep 2009 01:54:42 -0000
Subject: [Twisted-Python] IOCP reactor on Windows 2000
In-Reply-To: <1252510101.20208.76.camel@lolita.localnet>
References: <1252510101.20208.76.camel@lolita.localnet>
Message-ID: <20090910015442.7485.2089845849.divmod.xquotient.390@localhost.localdomain>

On 9 Sep, 03:28 pm, cdelfosse at mandriva.com wrote:
>Hello,
>
>Twisted Python 8.2.0 on Windows 2000 gives me this TB when I try to use
>the IOCP reactor. Is it supported on this platform ? (Works very well 
>on
>Windows XP)
>
>The instance's SvcRun() method failed
>  File "win32serviceutil.pyc", line 805, in SvcRun
>  File "server-win32.pyc", line 81, in SvcDoRun
>  File "twisted\internet\iocpreactor\__init__.pyc", line 8, in <module>
>  File "twisted\internet\iocpreactor\reactor.pyc", line 19, in <module>
>  File "twisted\internet\iocpreactor\iocpsupport.pyc", line 12, in 
><module>
>  File "twisted\internet\iocpreactor\iocpsupport.pyc", line 10, in 
>__load
>  File "iocpsupport.pyx", line 242, in iocpsupport
><type 'exceptions.ValueError'>: Failed to initialize Winsock function 
>vectors

We're currently only doing testing on Windows XP.  I know that some 
version of iocpreactor worked on Windows 2000 at some point in the past, 
but that may have been before the significant rewrite.

We're short on Windows machines for testing already - we barely have 
enough for Windows XP coverage.  If support for other platforms would be 
useful for you, there are a few (non-exclusive) things you can do:

  - Contribute patches implementing the support you're after.  This is 
tricky, since as a project we don't have access to any Windows 2000 
machines, and we're much less likely to look at patches that fix issues 
on platforms we don't have access to.  However, it's not impossible that 
such patches could be accepted.  It depends on the problem and the 
patch.

  - Contribute a slave for that platform.  Slaves need to be online most 
of the time and be able to run Buildbot and Twisted's test suite.

  - Contribute funds for us to get a machine to run such a slave.

As far as the particular error you're seeing goes, I don't really have a 
clue.  I hope that one of the people more familiar with iocpreactor will 
chime in about that.

Jean-Paul



From pahan at xzrq.net  Wed Sep  9 22:41:31 2009
From: pahan at xzrq.net (Pavel Pergamenshchik)
Date: Wed, 9 Sep 2009 21:41:31 -0700
Subject: [Twisted-Python] IOCP reactor on Windows 2000
In-Reply-To: <1252510101.20208.76.camel@lolita.localnet>
References: <1252510101.20208.76.camel@lolita.localnet>
Message-ID: <7447a0ac0909092141w39f6995dv1e8d7da02a682167@mail.gmail.com>

On Wed, Sep 9, 2009 at 8:28 AM, Cedric Delfosse <cdelfosse at mandriva.com> wrote:
> Hello,
>
> Twisted Python 8.2.0 on Windows 2000 gives me this TB when I try to use
> the IOCP reactor. Is it supported on this platform ? (Works very well on
> Windows XP)
>
> The instance's SvcRun() method failed
> File "win32serviceutil.pyc", line 805, in SvcRun
> File "server-win32.pyc", line 81, in SvcDoRun
> File "twisted\internet\iocpreactor\__init__.pyc", line 8, in <module>
> File "twisted\internet\iocpreactor\reactor.pyc", line 19, in <module>
> File "twisted\internet\iocpreactor\iocpsupport.pyc", line 12, in <module>
> File "twisted\internet\iocpreactor\iocpsupport.pyc", line 10, in __load
> File "iocpsupport.pyx", line 242, in iocpsupport
> <type 'exceptions.ValueError'>: Failed to initialize Winsock function vectors

iocpreactor is not supported on Windows 2000. iocpreactor relies on
ConnectEx() API. It was introduced in Windows XP. It is,
theoretically, possible to work around it, but nobody has done so.



From matt at bennett.name  Thu Sep 10 03:21:16 2009
From: matt at bennett.name (Matt Bennett)
Date: Thu, 10 Sep 2009 10:21:16 +0100
Subject: [Twisted-Python] os x installer, multiple source locations
In-Reply-To: <BE9797C6-C58A-4773-B75C-219228B6BA0F@fuhm.net>
References: <e554908b0909041650q3bcd76b5t51a1c88217c4d87c@mail.gmail.com>
	<F6FE837E-BB3C-43E1-AA89-6BA297ED50A6@bubblehouse.org>
	<BE9797C6-C58A-4773-B75C-219228B6BA0F@fuhm.net>
Message-ID: <e554908b0909100221m3b5d8c73gee870917be691dd2@mail.gmail.com>

On Mon, Sep 7, 2009 at 7:27 PM, James Y Knight<foom at fuhm.net> wrote:
>
> On Sep 5, 2009, at 10:08 PM, Phil Christensen wrote:
>
>> This is a frustrating partial install of Twisted that ships with OS X
>
> Not true. It was fixed soon after 10.5's release. I think in the very
> first patch, 10.5.1, but I could be wrong about that.
>
>> Interestingly enough, it's gone
>> from Snow Leopard
>
> It's not gone from Snow Leopard -- Twisted is still installed by
> default. Along with a bunch of other software.
>
> See:
> /System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/
> python/twisted/

I'm running 10.5.7 and clearly there's still some version of Twisted installed.

I'd happily submit a docs patch surrounding this, but I'm not sure
where the appropriate place to document it is. There don't appear to
be any docs on installing twisted under version control. Maybe a note
on the wiki download page would be sufficient?

Matt.

> James
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From gabriel.rossetti at arimaz.com  Thu Sep 10 07:47:15 2009
From: gabriel.rossetti at arimaz.com (Gabriel Rossetti)
Date: Thu, 10 Sep 2009 15:47:15 +0200
Subject: [Twisted-Python] Twisted, wxPython & PyPubSub
In-Reply-To: <20090910014628.7485.1039456853.divmod.xquotient.373@localhost.localdomain>
References: <4AA516D0.5000207@arimaz.com>	<20090907143611.7485.1439067646.divmod.xquotient.5@localhost.localdomain>	<4AA75557.8040005@arimaz.com>
	<20090910014628.7485.1039456853.divmod.xquotient.373@localhost.localdomain>
Message-ID: <4AA90363.50503@arimaz.com>

exarkun at twistedmatrix.com wrote:
> On 9 Sep, 07:12 am, gabriel.rossetti at arimaz.com wrote:
>   
>> exarkun at twistedmatrix.com wrote:
>>     
>>> On 02:21 pm, gabriel.rossetti at arimaz.com wrote:
>>>       
>>>> Hello everyone,
>>>>
>>>> I am using wx with twisted and pubsub (not the on in wx but the
>>>> independent one) to notify each one of what is going on. I was
>>>> wondering
>>>> if I should use reactor.callFromThread to call publisher.sendMessage 
>>>> or
>>>> not? I haven't been doing that until now but I wondered if it was
>>>> better to.
>>>>         
>>> Use reactor.callFromThread if you have code running in a non-reactor
>>> thread and you want it to initiate some action in the reactor thread.
>>>
>>> So, if publisher.sendMessage is using Twisted APIs or otherwise 
>>> requires
>>> that it be run only in the reactor thread, and you need to use it from 
>>> a
>>> non-reactor thread, then use reactor.callFromThread.  Otherwise, 
>>> don't.
>>>
>>> Jean-Paul
>>>       
>> Would you consider the wxreactor like a non-reactor thread?
>>     
>
> I'm not sure what you mean.  The "reactor thread" is the thread that 
> "reactor.run()" is called in.  Even if you're using wxreactor.
>   
>> I haven't
>> checked out the code behind PyPubSub, but it's basically the
>> Observer-Pattern so when I call publisher.sendMessage(...) it iterates
>> the "subscribers" (observers) and calls the functions they associated 
>> w/
>> the subscription. Those functions are both in the twisted code and the
>> wx code. The Twisted code sends messages nd the wx code brings-up/hides
>> dialogs or frames. In the wxdemo it does :
>>
>> # look, we can use twisted calls!
>> reactor.callLater(2, self.twoSecondsPassed)
>>
>> but doesn't use reactor.callFromThread, but unless I'm wrong
>> reactor.callLater does the same thing but deferred in time. I often see
>> reactor.callLater(0, myFunc) being used.
>>     
>
> The wx demo doesn't do anything with threads, so it doesn't need to use 
> callFromThread.  So, if you're only doing things like what the wx demo 
> does, you probably don't need callFromThread either.
>
> callLater doesn't do the same thing as callFromThread.  There might be 
> some vague similarities (really the only one is that neither one calls 
> the function you pass it right away), but they're for very different 
> things.
>
> Jean-Paul
>   

Ok, well, from looking into the twisted source, it looks like the wx 
main loop is run in a seperate thread 
(http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.1.0/twisted/internet/wxreactor.py#L60). 
If this is correct, I don't think I can just call a function from the 
twisted code that will in turn call a function in the wx code anytime, 
because the wx event loop will be busy doing something else. It is the 
same the other way around, here is an example :

the user clicks on a button, this calls 
publisher.sendMessage("notify.server", button.name). The twisted code 
registered to receive this event and so did the wx code. The twisted 
code registered a callback that formats a message and sends it to the 
server, the wx code updates the status to "pending" on the gui. When the 
answer arrives from the server, this time the twisted code calls 
publisher.sendMessage("server.response", res) and wx had registered to 
receive this event to update the status to something else.

Now, since publisher.sendMessage() was called from wx, and from what I 
understand from the WxReactor class code it runs in a thread, then the 
callback on the twisted side should use reactor.callFromThread() 
shouldn't it (since it was called from a different thread), but not the 
callback in the wx code since it was called from the wx code? And when 
publisher.sendMessage() is called from twisted code, shouldn't I do the 
same, that is the callback in the twisted is just called and the 
callback in the wx code is called with wx.CallLater() (to schedule it's 
call in the main loop)?

Thank you,
Gabriel



From vitaly at synapticvision.com  Thu Sep 10 07:47:08 2009
From: vitaly at synapticvision.com (vitaly at synapticvision.com)
Date: Thu, 10 Sep 2009 09:47:08 -0400
Subject: [Twisted-Python] time between request and response
Message-ID: <20090910094708.42993jva3y8d30ow@216.129.205.5>

Hi,
is there any way to calculate time spent between AMF Request and  
appropriate AMF Response
from TwistedGateway (without using Python's profilers) ?

Appreciate the help.




From exarkun at twistedmatrix.com  Thu Sep 10 08:03:27 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 10 Sep 2009 14:03:27 -0000
Subject: [Twisted-Python] Twisted, wxPython & PyPubSub
In-Reply-To: <4AA90363.50503@arimaz.com>
References: <4AA516D0.5000207@arimaz.com>
	<20090907143611.7485.1439067646.divmod.xquotient.5@localhost.localdomain>
	<4AA75557.8040005@arimaz.com>
	<20090910014628.7485.1039456853.divmod.xquotient.373@localhost.localdomain>
	<4AA90363.50503@arimaz.com>
Message-ID: <20090910140327.7485.437142722.divmod.xquotient.397@localhost.localdomain>

On 01:47 pm, gabriel.rossetti at arimaz.com wrote:
>exarkun at twistedmatrix.com wrote:
>>On 9 Sep, 07:12 am, gabriel.rossetti at arimaz.com wrote:
>>>exarkun at twistedmatrix.com wrote:
>>>>On 02:21 pm, gabriel.rossetti at arimaz.com wrote:
>>>>>Hello everyone,
>>>>>
>>>>>I am using wx with twisted and pubsub (not the on in wx but the
>>>>>independent one) to notify each one of what is going on. I was
>>>>>wondering
>>>>>if I should use reactor.callFromThread to call 
>>>>>publisher.sendMessage
>>>>>or
>>>>>not? I haven't been doing that until now but I wondered if it was
>>>>>better to.
>>>>Use reactor.callFromThread if you have code running in a non-reactor
>>>>thread and you want it to initiate some action in the reactor 
>>>>thread.
>>>>
>>>>So, if publisher.sendMessage is using Twisted APIs or otherwise
>>>>requires
>>>>that it be run only in the reactor thread, and you need to use it 
>>>>from
>>>>a
>>>>non-reactor thread, then use reactor.callFromThread.  Otherwise,
>>>>don't.
>>>>
>>>>Jean-Paul
>>>Would you consider the wxreactor like a non-reactor thread?
>>
>>I'm not sure what you mean.  The "reactor thread" is the thread that
>>"reactor.run()" is called in.  Even if you're using wxreactor.
>>>I haven't
>>>checked out the code behind PyPubSub, but it's basically the
>>>Observer-Pattern so when I call publisher.sendMessage(...) it 
>>>iterates
>>>the "subscribers" (observers) and calls the functions they associated
>>>w/
>>>the subscription. Those functions are both in the twisted code and 
>>>the
>>>wx code. The Twisted code sends messages nd the wx code brings- 
>>>up/hides
>>>dialogs or frames. In the wxdemo it does :
>>>
>>># look, we can use twisted calls!
>>>reactor.callLater(2, self.twoSecondsPassed)
>>>
>>>but doesn't use reactor.callFromThread, but unless I'm wrong
>>>reactor.callLater does the same thing but deferred in time. I often 
>>>see
>>>reactor.callLater(0, myFunc) being used.
>>
>>The wx demo doesn't do anything with threads, so it doesn't need to 
>>use
>>callFromThread.  So, if you're only doing things like what the wx demo
>>does, you probably don't need callFromThread either.
>>
>>callLater doesn't do the same thing as callFromThread.  There might be
>>some vague similarities (really the only one is that neither one calls
>>the function you pass it right away), but they're for very different
>>things.
>>
>>Jean-Paul
>
>Ok, well, from looking into the twisted source, it looks like the wx
>main loop is run in a seperate thread
>(http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.1.0/twisted/internet/wxreactor.py#L60).

That's an implementation detail.  You've also misinterpreted it 
slightly.  The wx main loop is run in the same thread reactor.run() is 
called in.  The other thread is used for other things.

Jean-Paul



From listes at sourcelibre.com  Thu Sep 10 12:53:43 2009
From: listes at sourcelibre.com (Alexandre Quessy)
Date: Thu, 10 Sep 2009 14:53:43 -0400
Subject: [Twisted-Python] Twisted users/developers in Montreal?
Message-ID: <8f32d9ee0909101153h25c9c533y9472d0507e279ef8@mail.gmail.com>

Hi everyone,
Do you guys know anyone using or developing Twisted in the area around
the city of Montreal? I organize the Open Forum of Code
http://foc.sat.qc.ca/ at SAT.qc.ca and our next meeting has a special
focus on programming in network. (for arts)
I also go to Montreal Python from time to time, and I think Twisted
would make a good special topic to cover. It would help converting
more developers to it.
See http://montrealpython.org/

So, please write to me at alexandre at sat.qc.ca (or on this list) if you
guys know anyone interested in sharing Twisted knowledge in my area.
Cheers !

-- 
Alexandre Quessy
http://alexandre.quessy.net



From vitaly at synapticvision.com  Thu Sep 10 15:40:56 2009
From: vitaly at synapticvision.com (vitaly at synapticvision.com)
Date: Thu, 10 Sep 2009 17:40:56 -0400
Subject: [Twisted-Python] Preprocessor question
Message-ID: <20090910174056.15003fj8gnjgc2as@216.129.205.5>

hi,
can anyone please point me to the doc-s or just explain what does that  
line mean on Twisted:
[root:twisted:375] Preprocessor expands to: None

Thank you.




From exarkun at twistedmatrix.com  Thu Sep 10 15:51:44 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 10 Sep 2009 21:51:44 -0000
Subject: [Twisted-Python] Preprocessor question
In-Reply-To: <20090910174056.15003fj8gnjgc2as@216.129.205.5>
References: <20090910174056.15003fj8gnjgc2as@216.129.205.5>
Message-ID: <20090910215144.7485.468247680.divmod.xquotient.597@localhost.localdomain>

On 09:40 pm, vitaly at synapticvision.com wrote:
>hi,
>can anyone please point me to the doc-s or just explain what does that
>line mean on Twisted:
>[root:twisted:375] Preprocessor expands to: None

It's not clear to me what you're talking about.  Can you try to provide 
more context for this question?

Jean-Paul



From glyph at twistedmatrix.com  Thu Sep 10 18:35:53 2009
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 10 Sep 2009 20:35:53 -0400
Subject: [Twisted-Python] new contributors
Message-ID: <d9047f780909101735q31a1231ib82c092802da227@mail.gmail.com>

We *still* don't have a totally official process for adding new contributors
to SVN, but I've been noticing a steady stream of contributions from two new
folks: lvh and jesstess.

Would you folks like commit access?

If so, does anyone have an objection on adding them to the Twisted Matrix
Labs?  (Feel free to contact me privately if you'd rather not be mean in
public ;-)).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090910/4d88bd1d/attachment.html>

From nick at boxdesign.co.uk  Fri Sep 11 01:35:46 2009
From: nick at boxdesign.co.uk (Nick Joyce)
Date: Fri, 11 Sep 2009 08:35:46 +0100
Subject: [Twisted-Python] Preprocessor question
In-Reply-To: <20090910174056.15003fj8gnjgc2as@216.129.205.5>
References: <20090910174056.15003fj8gnjgc2as@216.129.205.5>
Message-ID: <4C67B799-4573-4F63-B5BD-FCED31D71519@boxdesign.co.uk>

This _appears_ to be a log message when using the TwistedGateway from  
PyAMF. PyAMF gives the option to be able to preprocess service method  
calls, to set up db connections, sessions, w/e.

Nick

On 10 Sep 2009, at 22:40, vitaly at synapticvision.com wrote:

> hi,
> can anyone please point me to the doc-s or just explain what does that
> line mean on Twisted:
> [root:twisted:375] Preprocessor expands to: None
>
> Thank you.
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From lvh at laurensvh.be  Fri Sep 11 05:59:25 2009
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Fri, 11 Sep 2009 13:59:25 +0200
Subject: [Twisted-Python] new contributors
In-Reply-To: <d9047f780909101735q31a1231ib82c092802da227@mail.gmail.com>
References: <d9047f780909101735q31a1231ib82c092802da227@mail.gmail.com>
Message-ID: <cedc0c090909110459u7bdeaf64p6b755137d12694a2@mail.gmail.com>

On Fri, Sep 11, 2009 at 2:35 AM, Glyph Lefkowitz
<glyph at twistedmatrix.com> wrote:
> We stilldon't have a totally official process for adding new contributors
> to SVN, but I've been noticing a steady stream of contributions from two new
> folks: lvh and jesstess.

Hi! That's me :-)

> Would you folks like commit access?

I'm not 100% sure if that'd be useful, right now I'm perfectly happy
with bzr, but I suppose having commit access that might be useful one
day is better than not having commit access but wanting it one day :-)

> If so, does anyone have an objection on adding them to the Twisted Matrix
> Labs? (Feel free to contact me privately if you'd rather not be mean in
> public ;-)).

What does that mean exactly? :-) (Is that just a fancy way of saying
'has a commit bit'?)

Anyway, go ahead, I'm sure I won't be annoyed :-D


thanks for the vote of confidence
Laurens



From gabriel.rossetti at arimaz.com  Fri Sep 11 06:58:48 2009
From: gabriel.rossetti at arimaz.com (Gabriel Rossetti)
Date: Fri, 11 Sep 2009 14:58:48 +0200
Subject: [Twisted-Python] Twisted, wxPython & PyPubSub
In-Reply-To: <20090910140327.7485.437142722.divmod.xquotient.397@localhost.localdomain>
References: <4AA516D0.5000207@arimaz.com>	<20090907143611.7485.1439067646.divmod.xquotient.5@localhost.localdomain>	<4AA75557.8040005@arimaz.com>	<20090910014628.7485.1039456853.divmod.xquotient.373@localhost.localdomain>	<4AA90363.50503@arimaz.com>
	<20090910140327.7485.437142722.divmod.xquotient.397@localhost.localdomain>
Message-ID: <4AAA4988.7000303@arimaz.com>

exarkun at twistedmatrix.com wrote:
> On 01:47 pm, gabriel.rossetti at arimaz.com wrote:
>   
>> exarkun at twistedmatrix.com wrote:
>>     
>>> On 9 Sep, 07:12 am, gabriel.rossetti at arimaz.com wrote:
>>>       
>>>> exarkun at twistedmatrix.com wrote:
>>>>         
>>>>> On 02:21 pm, gabriel.rossetti at arimaz.com wrote:
>>>>>           
>>>>>> Hello everyone,
>>>>>>
>>>>>> I am using wx with twisted and pubsub (not the on in wx but the
>>>>>> independent one) to notify each one of what is going on. I was
>>>>>> wondering
>>>>>> if I should use reactor.callFromThread to call 
>>>>>> publisher.sendMessage
>>>>>> or
>>>>>> not? I haven't been doing that until now but I wondered if it was
>>>>>> better to.
>>>>>>             
>>>>> Use reactor.callFromThread if you have code running in a non-reactor
>>>>> thread and you want it to initiate some action in the reactor 
>>>>> thread.
>>>>>
>>>>> So, if publisher.sendMessage is using Twisted APIs or otherwise
>>>>> requires
>>>>> that it be run only in the reactor thread, and you need to use it 
>>>>> from
>>>>> a
>>>>> non-reactor thread, then use reactor.callFromThread.  Otherwise,
>>>>> don't.
>>>>>
>>>>> Jean-Paul
>>>>>           
>>>> Would you consider the wxreactor like a non-reactor thread?
>>>>         
>>> I'm not sure what you mean.  The "reactor thread" is the thread that
>>> "reactor.run()" is called in.  Even if you're using wxreactor.
>>>       
>>>> I haven't
>>>> checked out the code behind PyPubSub, but it's basically the
>>>> Observer-Pattern so when I call publisher.sendMessage(...) it 
>>>> iterates
>>>> the "subscribers" (observers) and calls the functions they associated
>>>> w/
>>>> the subscription. Those functions are both in the twisted code and 
>>>> the
>>>> wx code. The Twisted code sends messages nd the wx code brings- 
>>>> up/hides
>>>> dialogs or frames. In the wxdemo it does :
>>>>
>>>> # look, we can use twisted calls!
>>>> reactor.callLater(2, self.twoSecondsPassed)
>>>>
>>>> but doesn't use reactor.callFromThread, but unless I'm wrong
>>>> reactor.callLater does the same thing but deferred in time. I often 
>>>> see
>>>> reactor.callLater(0, myFunc) being used.
>>>>         
>>> The wx demo doesn't do anything with threads, so it doesn't need to 
>>> use
>>> callFromThread.  So, if you're only doing things like what the wx demo
>>> does, you probably don't need callFromThread either.
>>>
>>> callLater doesn't do the same thing as callFromThread.  There might be
>>> some vague similarities (really the only one is that neither one calls
>>> the function you pass it right away), but they're for very different
>>> things.
>>>
>>> Jean-Paul
>>>       
>> Ok, well, from looking into the twisted source, it looks like the wx
>> main loop is run in a seperate thread
>> (http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.1.0/twisted/internet/wxreactor.py#L60).
>>     
>
> That's an implementation detail.  You've also misinterpreted it 
> slightly.  The wx main loop is run in the same thread reactor.run() is 
> called in.  The other thread is used for other things.
>
> Jean-Paul
>
>   
Ok, thanks for the clarification, so if I understand correctly then I 
can make wx calls (like self.factory.myFrame.Show()) from twisted just 
like if it was 100% twisted, and make twisted calls (like 
self.txClient.transport.write()) from wx just like if it was 100% wx? 
Cool :-)

Gabriel



From exarkun at twistedmatrix.com  Fri Sep 11 07:15:10 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 11 Sep 2009 13:15:10 -0000
Subject: [Twisted-Python] Twisted, wxPython & PyPubSub
In-Reply-To: <4AAA4988.7000303@arimaz.com>
References: <4AA516D0.5000207@arimaz.com>
	<20090907143611.7485.1439067646.divmod.xquotient.5@localhost.localdomain>
	<4AA75557.8040005@arimaz.com>
	<20090910014628.7485.1039456853.divmod.xquotient.373@localhost.localdomain>
	<4AA90363.50503@arimaz.com>
	<20090910140327.7485.437142722.divmod.xquotient.397@localhost.localdomain>
	<4AAA4988.7000303@arimaz.com>
Message-ID: <20090911131510.7485.1446625330.divmod.xquotient.598@localhost.localdomain>

On 12:58 pm, gabriel.rossetti at arimaz.com wrote:
>
>Ok, thanks for the clarification, so if I understand correctly then I
>can make wx calls (like self.factory.myFrame.Show()) from twisted just
>like if it was 100% twisted, and make twisted calls (like
>self.txClient.transport.write()) from wx just like if it was 100% wx?
>Cool :-)

Exactly.

Jean-Paul



From jessica.mckellar at gmail.com  Fri Sep 11 07:50:24 2009
From: jessica.mckellar at gmail.com (Jessica McKellar)
Date: Fri, 11 Sep 2009 09:50:24 -0400
Subject: [Twisted-Python] new contributors
In-Reply-To: <d9047f780909101735q31a1231ib82c092802da227@mail.gmail.com>
References: <d9047f780909101735q31a1231ib82c092802da227@mail.gmail.com>
Message-ID: <b282a1340909110650m2c11cd35l932a73144dc2f84a@mail.gmail.com>

Commit access would be useful, particularly for speeding along inclusion of
small patches and documentation fixes without giving the small number of
regular ticket resolvers even more work to do :). Thanks Glyph.

-Jessica (jesstess)


On Thu, Sep 10, 2009 at 8:35 PM, Glyph Lefkowitz <glyph at twistedmatrix.com>wrote:

> We *still* don't have a totally official process for adding new
> contributors to SVN, but I've been noticing a steady stream of contributions
> from two new folks: lvh and jesstess.
>
> Would you folks like commit access?
>
>
If so, does anyone have an objection on adding them to the Twisted Matrix
> Labs?  (Feel free to contact me privately if you'd rather not be mean in
> public ;-)).
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090911/b9a4c2f3/attachment.html>

From vitaly at synapticvision.com  Fri Sep 11 08:10:53 2009
From: vitaly at synapticvision.com (vitaly at synapticvision.com)
Date: Fri, 11 Sep 2009 10:10:53 -0400
Subject: [Twisted-Python] Preprocessor question
In-Reply-To: <4C67B799-4573-4F63-B5BD-FCED31D71519@boxdesign.co.uk>
References: <20090910174056.15003fj8gnjgc2as@216.129.205.5>
	<4C67B799-4573-4F63-B5BD-FCED31D71519@boxdesign.co.uk>
Message-ID: <20090911101053.14045fdpafjeyi5k@216.129.205.5>


Can you point me please to the documentation,may be examples, that  
explains in details "preprocessor" feature?

Quoting "Nick Joyce" <nick at boxdesign.co.uk>:

> This _appears_ to be a log message when using the TwistedGateway from
> PyAMF. PyAMF gives the option to be able to preprocess service method
> calls, to set up db connections, sessions, w/e.
>
> Nick
>
> On 10 Sep 2009, at 22:40, vitaly at synapticvision.com wrote:
>
>> hi,
>> can anyone please point me to the doc-s or just explain what does that
>> line mean on Twisted:
>> [root:twisted:375] Preprocessor expands to: None
>>
>> Thank you.
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>






From freddy at cbm.uo.edu.cu  Fri Sep 11 08:26:19 2009
From: freddy at cbm.uo.edu.cu (Freddy Martinez Garcia)
Date: Fri, 11 Sep 2009 10:26:19 -0400
Subject: [Twisted-Python] about process !!!
Message-ID: <200909111026.19581.freddy@cbm.uo.edu.cu>

hello...

My friends, I need your help... I have an application in python, and I need 
execute this application with twisted... my problem is that when I run the 
application without twisted, there is not a problem, but when I run it with 
twisted as a twisted's process, I have some problem... my application it's a 
server and when it receive one file with the char ' " ', the server through an 
Exception, but when I run the application as standalone, there is not a 
problem !!! 

-------
Freddy Martinez Garcia
Lic. en Ciencia de la Computacin.
Edad: 27 Aos
Santiago de Cuba
e-mails:
    * freddy at cbm.uo.edu.cu
    * freddy311082 at gmail.com
    * freddymg311082 at hotmail.com 

-- 
Este mensaje ha sido analizado por MailScanner
en busca de virus y otros contenidos peligrosos,
y se considera que est limpio.
For all your IT requirements visit: http://www.transtec.co.uk




From exarkun at twistedmatrix.com  Fri Sep 11 08:35:05 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 11 Sep 2009 14:35:05 -0000
Subject: [Twisted-Python] new contributors
In-Reply-To: <d9047f780909101735q31a1231ib82c092802da227@mail.gmail.com>
References: <d9047f780909101735q31a1231ib82c092802da227@mail.gmail.com>
Message-ID: <20090911143505.7485.1574338111.divmod.xquotient.644@localhost.localdomain>

On 12:35 am, glyph at twistedmatrix.com wrote:
>We *still* don't have a totally official process for adding new 
>contributors
>to SVN, but I've been noticing a steady stream of contributions from 
>two new
>folks: lvh and jesstess.
>
>Would you folks like commit access?
>
>If so, does anyone have an objection on adding them to the Twisted 
>Matrix
>Labs?  (Feel free to contact me privately if you'd rather not be mean 
>in
>public ;-)).

I don't see any reason not to, and I doubt anyone mailed you off-list 
about it. :)  So if lvh and jesstess want to send me their SSH public 
keys, I'll set it up.
I also offered commit access to Esteve recently.  Esteve, want to send 
me your key, too?

With respect to the lack of an official process for adding contributors, 
yea.  It doesn't come up so often that we've bothered to streamline it 
much.  We should probably do *something*, though.  With that in mind, 
here's a dump of some ideas that I think everyone knows already, but 
should probably be explicit:

  * Keep your SSH keys secure.  If they're compromised, let us know so we 
can change them out for new ones.

  * Follow the documented development process.  In general, you have free 
reign in branches (but please follow the branch naming convention), but 
only commit to trunk after the review process has been carried out 
successfully.

  * You must license anything you contribute to Twisted under the MIT 
license.

That's probably all the stuff you need to know up front.

We should have a document somewhere, maybe.

Jean-Paul



From gslindstrom at gmail.com  Fri Sep 11 08:37:40 2009
From: gslindstrom at gmail.com (gslindstrom at gmail.com)
Date: Fri, 11 Sep 2009 14:37:40 +0000
Subject: [Twisted-Python] sftp with Twisted
Message-ID: <0016e68ea0b2139ea204734e4267@google.com>

I am new to Twisted but have read through the Twisted Book (O'Reilley) and  
worked many of the examples. I think I have deferreds down (though I'm not  
sure I understand the red/green diagram, yet :-). I'm running Python 2.4 on  
Gentoo Linux.

We would like to look into using Twisted for sftp. Looking through  
the "conch" routines I found the test_filetransfer.py. I see lots of  
classes, "Avitars" and tests but I can't figure out what everything is  
doing or how to connect to a box (using either a username/password of a  
key) and transfer files! Is there a "how-to" showing, well..., how to set  
up and use sftp with Twisted? If not, I'd be willing to write one up if  
someone would volunteer to mentor me through the process.

Thanks for your help,

--greg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090911/88a7af55/attachment-0001.html>

From exarkun at twistedmatrix.com  Fri Sep 11 08:39:49 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 11 Sep 2009 14:39:49 -0000
Subject: [Twisted-Python] about process !!!
In-Reply-To: <200909111026.19581.freddy@cbm.uo.edu.cu>
References: <200909111026.19581.freddy@cbm.uo.edu.cu>
Message-ID: <20090911143949.7485.1121634739.divmod.xquotient.650@localhost.localdomain>

On 02:26 pm, freddy at cbm.uo.edu.cu wrote:
>hello...
>
>My friends, I need your help... I have an application in python, and I 
>need
>execute this application with twisted... my problem is that when I run 
>the
>application without twisted, there is not a problem, but when I run it 
>with
>twisted as a twisted's process, I have some problem... my application 
>it's a
>server and when it receive one file with the char ' " ', the server 
>through an
>Exception, but when I run the application as standalone, there is not a
>problem !!!

Hi Freddy,

Unfortunately, the way you've asked your question will make it very 
difficult for anyone to provide you with a productive answer.  We don't 
know what your application is.  We don't know what it means to "run the 
application with twisted" or "run it with twisted as a twisted's 
process".  These phrases are too vague to assign a specific technical 
meaning to.  It's also not clear what the error condition you're 
encountering is.

http://sscce.org/ may help you formulate a better question so that we 
can help you.

Jean-Paul



From cdelfosse at mandriva.com  Fri Sep 11 10:42:04 2009
From: cdelfosse at mandriva.com (Cedric Delfosse)
Date: Fri, 11 Sep 2009 18:42:04 +0200
Subject: [Twisted-Python] IOCP reactor on Windows 2000
In-Reply-To: <7447a0ac0909092141w39f6995dv1e8d7da02a682167@mail.gmail.com>
References: <1252510101.20208.76.camel@lolita.localnet>
	<7447a0ac0909092141w39f6995dv1e8d7da02a682167@mail.gmail.com>
Message-ID: <1252687324.3971.19.camel@lolita.localnet>

Le mercredi 09 septembre 2009  21:41 -0700, Pavel Pergamenshchik a
crit :
> On Wed, Sep 9, 2009 at 8:28 AM, Cedric Delfosse <cdelfosse at mandriva.com> wrote:
> > Hello,
> >
> > Twisted Python 8.2.0 on Windows 2000 gives me this TB when I try to use
> > the IOCP reactor. Is it supported on this platform ? (Works very well on
> > Windows XP)
> >
> > The instance's SvcRun() method failed
> >  File "win32serviceutil.pyc", line 805, in SvcRun
> >  File "server-win32.pyc", line 81, in SvcDoRun
> >  File "twisted\internet\iocpreactor\__init__.pyc", line 8, in <module>
> >  File "twisted\internet\iocpreactor\reactor.pyc", line 19, in <module>
> >  File "twisted\internet\iocpreactor\iocpsupport.pyc", line 12, in <module>
> >  File "twisted\internet\iocpreactor\iocpsupport.pyc", line 10, in __load
> >  File "iocpsupport.pyx", line 242, in iocpsupport
> > <type 'exceptions.ValueError'>: Failed to initialize Winsock function vectors
> 
> iocpreactor is not supported on Windows 2000. iocpreactor relies on
> ConnectEx() API. It was introduced in Windows XP. It is,
> theoretically, possible to work around it, but nobody has done so.

Hello,

thanks a lot.

Unfortunately I'm not used at all to Windows programming. I tried to use
a library thats wrap missing API for Windows 2000, but with no luck (gpt
some obscure DLL issues):
http://win2kgaming.site90.com/phpBB2/viewtopic.php?t=7

Maybe the ConnectEx() API replacement used by this library could be a
solution ? (see code attached to this mail)

Regards,

-- 
Cedric Delfosse                                    Mandriva / Linbox
152, rue de Grigy - Technopole Metz              57070 METZ - FRANCE
tel: +33 (0)3 87 50 87 90                        http://mandriva.com

-------------- next part --------------
A non-text attachment was scrubbed...
Name: win2k_xp_ws2_32.c
Type: text/x-csrc
Size: 9204 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20090911/1c0277cc/attachment-0002.c>

From andrewfr_ice at yahoo.com  Fri Sep 11 11:09:32 2009
From: andrewfr_ice at yahoo.com (Andrew Francis)
Date: Fri, 11 Sep 2009 10:09:32 -0700 (PDT)
Subject: [Twisted-Python] Twisted users/developers in Montreal?
In-Reply-To: <mailman.72153.1252678372.23374.twisted-python@twistedmatrix.com>
Message-ID: <935014.61276.qm@web112403.mail.gq1.yahoo.com>

Hi Alexandre:

>Do you guys know anyone using or developing Twisted in the area around
>the city of Montreal? 

I live in Montreal and I use Twisted.

>I also go to Montreal Python from time to time, and I think Twisted
>would make a good special topic to cover. It would help converting
>more developers to it. See http://montrealpython.org/

I will be giving a talk on Stackless Python on September 30th, as a part
of Montreal Python. In a section of that talk, I will briefly touch on
Twisted. 

Cheers,
Andrew



      



From glyph at twistedmatrix.com  Fri Sep 11 20:10:24 2009
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Fri, 11 Sep 2009 22:10:24 -0400
Subject: [Twisted-Python] new contributors
In-Reply-To: <20090911143505.7485.1574338111.divmod.xquotient.644@localhost.localdomain>
References: <d9047f780909101735q31a1231ib82c092802da227@mail.gmail.com>
	<20090911143505.7485.1574338111.divmod.xquotient.644@localhost.localdomain>
Message-ID: <d9047f780909111910t35e44d10p8e801d54b772e74e@mail.gmail.com>

On Fri, Sep 11, 2009 at 10:35 AM, <exarkun at twistedmatrix.com> wrote:

> I don't see any reason not to, and I doubt anyone mailed you off-list
> about it. :)


Indeed not.  Everybody loves new core developers!


> So if lvh and jesstess want to send me their SSH public
> keys, I'll set it up.
>

Laurens' keys are already here: https://launchpad.net/~lvh/+sshkeys

I can't find jesstess on launchpad.  I think it's generally a good idea to
have an account there for other reasons than SSH key exchange; perhaps you
should get one? :)


> I also offered commit access to Esteve recently.  Esteve, want to send
> me your key, too?
>

https://launchpad.net/~esteve/+sshkeys


> We should have a document somewhere, maybe.
>

For sure.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090911/0e71799e/attachment.html>

From jessica.mckellar at gmail.com  Fri Sep 11 21:59:03 2009
From: jessica.mckellar at gmail.com (Jessica McKellar)
Date: Fri, 11 Sep 2009 23:59:03 -0400
Subject: [Twisted-Python] new contributors
In-Reply-To: <d9047f780909111910t35e44d10p8e801d54b772e74e@mail.gmail.com>
References: <d9047f780909101735q31a1231ib82c092802da227@mail.gmail.com>
	<20090911143505.7485.1574338111.divmod.xquotient.644@localhost.localdomain>
	<d9047f780909111910t35e44d10p8e801d54b772e74e@mail.gmail.com>
Message-ID: <b282a1340909112059y1f3c1162rbc2b3a0bd3ea2f31@mail.gmail.com>

Here we go: https://launchpad.net/~jesstess/+sshkeys

-Jessica


On Fri, Sep 11, 2009 at 10:10 PM, Glyph Lefkowitz
<glyph at twistedmatrix.com>wrote:

> On Fri, Sep 11, 2009 at 10:35 AM, <exarkun at twistedmatrix.com> wrote:
>
>> I don't see any reason not to, and I doubt anyone mailed you off-list
>> about it. :)
>
>
> Indeed not.  Everybody loves new core developers!
>
>
>> So if lvh and jesstess want to send me their SSH public
>> keys, I'll set it up.
>>
>
> Laurens' keys are already here: https://launchpad.net/~lvh/+sshkeys<https://launchpad.net/%7Elvh/+sshkeys>
>
> I can't find jesstess on launchpad.  I think it's generally a good idea to
> have an account there for other reasons than SSH key exchange; perhaps you
> should get one? :)
>
>
>> I also offered commit access to Esteve recently.  Esteve, want to send
>> me your key, too?
>>
>
> https://launchpad.net/~esteve/+sshkeys<https://launchpad.net/%7Eesteve/+sshkeys>
>
>
>> We should have a document somewhere, maybe.
>>
>
> For sure.
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090911/29c14401/attachment.html>

From exarkun at twistedmatrix.com  Sat Sep 12 22:05:31 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 13 Sep 2009 04:05:31 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1252814731.72.1829935580@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090913/c9192dc9/attachment-0001.html>

From art at academ.org  Mon Sep 14 09:09:38 2009
From: art at academ.org (Artem Bokhan)
Date: Mon, 14 Sep 2009 22:09:38 +0700
Subject: [Twisted-Python] simple global counter
Message-ID: <4AAE5CB2.8080302@academ.org>

Hello.

May somebody give a sample code of simple global counter which could be 
used with twisted (non-web) enviroment?



From markv at lumierevfx.com  Mon Sep 14 10:11:46 2009
From: markv at lumierevfx.com (Mark Visser)
Date: Mon, 14 Sep 2009 12:11:46 -0400
Subject: [Twisted-Python] How to detect when there is nothing waiting in the
	event queue
Message-ID: <4AAE6B42.7010606@lumierevfx.com>

Hi, we've been using Twisted in an internal project for the past 4 
months. It's a system that polls for events from a web source (looping 
call) and also accepts connections via perspective broker. Each of these 
events is turned into a series of Deferreds that run various tasks. Some 
of these tasks are long-running and can take several hours to complete.

Because of this, it's very difficult to restart the server when we roll 
out a new release.

I've added a signal handler to catch SIGHUP and call stop() on the 
looping call and stopListening() on the perspective broker Root. How can 
I detect when all remaining Deferreds have fired so I can stop the 
reactor safely, without stranding any running processes?

thanks

-- 
Mark Visser, Software Director
Lumire VFX
Email: markv at lumierevfx.com
Phone: +1-514-316-1080 x3030




From freddy at cbm.uo.edu.cu  Mon Sep 14 12:57:59 2009
From: freddy at cbm.uo.edu.cu (Freddy Martinez Garcia)
Date: Mon, 14 Sep 2009 14:57:59 -0400
Subject: [Twisted-Python] help with rector
Message-ID: <200909141457.59382.freddy@cbm.uo.edu.cu>

hello to everybody...

well I need to do something with twisted, and I don't how I can do it...

My application use the twisted's framework, and it is a process manager. My 
problem is when I run a process with twisted I have to do "reactor.run()" and 
my application is one web service which is running, and to run this web 
service I have to do too "reactor.run()"...

how can I run one process with twisted if the reactor is running ???

thanks

regards

Freddy

-------
Freddy Martinez Garcia
Lic. en Ciencia de la Computacin.
Edad: 27 Aos
Santiago de Cuba
e-mails:
    * freddy at cbm.uo.edu.cu
    * freddy311082 at gmail.com
    * freddymg311082 at hotmail.com 

-- 
Este mensaje ha sido analizado por MailScanner
en busca de virus y otros contenidos peligrosos,
y se considera que est limpio.
For all your IT requirements visit: http://www.transtec.co.uk

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090914/3859aeaa/attachment.html>

From matusis at yahoo.com  Mon Sep 14 14:29:14 2009
From: matusis at yahoo.com (Alec Matusis)
Date: Mon, 14 Sep 2009 13:29:14 -0700
Subject: [Twisted-Python] memory leak on 8.2.0/2.6 versus 2.5/2.4
Message-ID: <02ce01ca357a$06c9a140$145ce3c0$@com>

I am running identical twisted servers under high load, one on 2.5.0
(patched for epoll bug) on python 2.4.4 and second one on 8.2.0 on python
2.6.2.
The 8.2/2.6 one leaks memory compared to 2.5/2.4.4 to the point that I am
about to roll back to older Twisted and then to older Python.

Any insight on this? 




From kevin.horn at gmail.com  Mon Sep 14 16:16:52 2009
From: kevin.horn at gmail.com (Kevin Horn)
Date: Mon, 14 Sep 2009 17:16:52 -0500
Subject: [Twisted-Python] help with rector
In-Reply-To: <200909141457.59382.freddy@cbm.uo.edu.cu>
References: <200909141457.59382.freddy@cbm.uo.edu.cu>
Message-ID: <562bcc10909141516t16547a2cr674b092b0f0b623c@mail.gmail.com>

On Mon, Sep 14, 2009 at 1:57 PM, Freddy Martinez Garcia <
freddy at cbm.uo.edu.cu> wrote:

> hello to everybody...
>
>
> well I need to do something with twisted, and I don't how I can do it...
>
>
> My application use the twisted's framework, and it is a process manager. My
> problem is when I run a process with twisted I have to do "reactor.run()"
> and my application is one web service which is running, and to run this web
> service I have to do too "reactor.run()"...
>
>
> how can I run one process with twisted if the reactor is running ???
>
>
> thanks
>
>
> regards
>
>
> Freddy
>
>
> -------
> Freddy Martinez Garcia
>


I'm not sure it's clear what exactly you are trying to do...

Have you read:
http://twistedmatrix.com/projects/core/documentation/howto/process.html

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090914/5f8f29d8/attachment.html>

From screwtape at froup.com  Mon Sep 14 18:47:58 2009
From: screwtape at froup.com (Tim Allen)
Date: Tue, 15 Sep 2009 10:47:58 +1000
Subject: [Twisted-Python] simple global counter
In-Reply-To: <4AAE5CB2.8080302@academ.org>
References: <4AAE5CB2.8080302@academ.org>
Message-ID: <20090915004758.GK5111@thristian.org>

On Mon, Sep 14, 2009 at 10:09:38PM +0700, Artem Bokhan wrote:
> May somebody give a sample code of simple global counter which could be 
> used with twisted (non-web) enviroment?

I'm not sure what you mean. If you want to keep a count of something, you can just
store it in a variable like anything else.

    event_counter = 0

    def handle_event(event):
	global event_counter

	event.do_something()
	event_counter += 1



From screwtape at froup.com  Mon Sep 14 18:58:25 2009
From: screwtape at froup.com (Tim Allen)
Date: Tue, 15 Sep 2009 10:58:25 +1000
Subject: [Twisted-Python] How to detect when there is nothing waiting in
 the event queue
In-Reply-To: <4AAE6B42.7010606@lumierevfx.com>
References: <4AAE6B42.7010606@lumierevfx.com>
Message-ID: <20090915005825.GL5111@thristian.org>

On Mon, Sep 14, 2009 at 12:11:46PM -0400, Mark Visser wrote:
> I've added a signal handler to catch SIGHUP and call stop() on the 
> looping call and stopListening() on the perspective broker Root. How can 
> I detect when all remaining Deferreds have fired so I can stop the 
> reactor safely, without stranding any running processes?

I was looking at something like this for our production system a while
back; so far as I can tell, the only thing you can do is to maintain
a list of all 'live' deferreds as your process runs. When you get
the 'stop' signal, stop accepting incoming requests, put all the
deferreds into a DeferredList and don't exit until the DeferredList
fires. Our system makes it rather difficult to gather all possible
deferreds, and our processes only run for less than a minute, so we
decided to just put up with occasional lost processes.

As well as catching SIGHUP, you might want to investigate the reactor's
'addSystemEventTrigger' method, where you can queue calls to be called
at shutdown, and return a deferred that will cause the shutdown to be
delayed until the deferred fires.



From exarkun at twistedmatrix.com  Mon Sep 14 13:46:36 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 14 Sep 2009 19:46:36 -0000
Subject: [Twisted-Python] help with rector
In-Reply-To: <200909141457.59382.freddy@cbm.uo.edu.cu>
References: <200909141457.59382.freddy@cbm.uo.edu.cu>
Message-ID: <20090914194636.8731.1616394944.divmod.xquotient.17@localhost.localdomain>

On 06:57 pm, freddy at cbm.uo.edu.cu wrote:
>hello to everybody...
>
>well I need to do something with twisted, and I don't how I can do 
>it...
>
>My application use the twisted's framework, and it is a process 
>manager. My
>problem is when I run a process with twisted I have to do 
>"reactor.run()" and
>my application is one web service which is running, and to run this web
>service I have to do too "reactor.run()"...
>
>how can I run one process with twisted if the reactor is running ???

You only have to call "reactor.run()" once.  Your processes and your web 
server will start.

Jean-Paul



From exarkun at twistedmatrix.com  Mon Sep 14 13:16:32 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 14 Sep 2009 19:16:32 -0000
Subject: [Twisted-Python] How to detect when there is nothing waiting
	in	the event queue
In-Reply-To: <4AAE6B42.7010606@lumierevfx.com>
References: <4AAE6B42.7010606@lumierevfx.com>
Message-ID: <20090914191632.8731.787545973.divmod.xquotient.15@localhost.localdomain>

On 04:11 pm, markv at lumierevfx.com wrote:
>Hi, we've been using Twisted in an internal project for the past 4
>months. It's a system that polls for events from a web source (looping
>call) and also accepts connections via perspective broker. Each of 
>these
>events is turned into a series of Deferreds that run various tasks. 
>Some
>of these tasks are long-running and can take several hours to complete.
>
>Because of this, it's very difficult to restart the server when we roll
>out a new release.
>
>I've added a signal handler to catch SIGHUP and call stop() on the
>looping call and stopListening() on the perspective broker Root. How 
>can
>I detect when all remaining Deferreds have fired so I can stop the
>reactor safely, without stranding any running processes?

There's no way to know when "all remaining Deferreds have fired".  Since 
Deferreds are general purpose and any part of Twisted may internally use 
them for anything they're suited for, this isn't really what you want 
anyway.  You want to know when all of *your* tasks have completed.  So, 
you should look at all the APIs you have which return Deferreds, decide 
which APIs need to be allowed to complete (perhaps it will be all of 
them) before shutdown can happen, and then instrument those APIs to keep 
track of their own status.  This may be as simple as internally adding a 
callback to the Deferreds being returned (before returning them), 
letting you know when each task has completed.  This should let you 
decide when things are quiet enough to shut down.

Jean-Paul



From art at academ.org  Tue Sep 15 03:54:09 2009
From: art at academ.org (Artem Bokhan)
Date: Tue, 15 Sep 2009 16:54:09 +0700
Subject: [Twisted-Python] simple global counter
In-Reply-To: <20090915004758.GK5111@thristian.org>
References: <4AAE5CB2.8080302@academ.org> <20090915004758.GK5111@thristian.org>
Message-ID: <4AAF6441.2090903@academ.org>

Tim Allen :
> On Mon, Sep 14, 2009 at 10:09:38PM +0700, Artem Bokhan wrote:
>   
>> May somebody give a sample code of simple global counter which could be 
>> used with twisted (non-web) enviroment?
>>     
>
> I'm not sure what you mean. 
I want find out if it's possible to count things in context of the
whole twisted server, not just one tcp session.
> If you want to keep a count of something, you can just
> store it in a variable like anything else.
>
>     event_counter = 0
>
>     def handle_event(event):
> 	global event_counter
>
> 	event.do_something()
> 	event_counter += 1
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>   




From screwtape at froup.com  Tue Sep 15 04:33:09 2009
From: screwtape at froup.com (Tim Allen)
Date: Tue, 15 Sep 2009 20:33:09 +1000
Subject: [Twisted-Python] simple global counter
In-Reply-To: <4AAF6441.2090903@academ.org>
References: <4AAE5CB2.8080302@academ.org> <20090915004758.GK5111@thristian.org>
	<4AAF6441.2090903@academ.org>
Message-ID: <20090915103309.GM5111@thristian.org>

On Tue, Sep 15, 2009 at 04:54:09PM +0700, Artem Bokhan wrote:
> Tim Allen :
> > On Mon, Sep 14, 2009 at 10:09:38PM +0700, Artem Bokhan wrote:
> >   
> >> May somebody give a sample code of simple global counter which could be 
> >> used with twisted (non-web) enviroment?
> >
> > I'm not sure what you mean. 
> I want find out if it's possible to count things in context of the
> whole twisted server, not just one tcp session.

Well, of course - you can create global variables in Python, and nothing
in Twisted affects that.



From petshmidt at googlemail.com  Tue Sep 15 04:37:30 2009
From: petshmidt at googlemail.com (Pet)
Date: Tue, 15 Sep 2009 12:37:30 +0200
Subject: [Twisted-Python] run queries in deffered, but not in transaction
Message-ID: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com>

Hi,

I'd like to run several queries in background, some of them may fail.
Currently, I do runInteraction for each query. Is there a way to run
them all in one deferred, so that if one of them fails, other are not
aborted?

Thanks in advance!

Pet



From art at academ.org  Tue Sep 15 08:20:29 2009
From: art at academ.org (Artem Bokhan)
Date: Tue, 15 Sep 2009 21:20:29 +0700
Subject: [Twisted-Python] network server on multiprocessor hardware
In-Reply-To: <4AA17FC1.1070303@academ.org>
References: <4AA17FC1.1070303@academ.org>
Message-ID: <4AAFA2AD.4090304@academ.org>

Is there any know implementation of the method author of this thread 
http://twistedmatrix.com/pipermail/twisted-python/2009-April/019478.html 
talks about?

Bokhan Artem :
> Hello.
>
> Is there right (standard) way to write twisted network server
> (tcp/web/mail/etc) which could use several cpu cores? For example,
> master+workers model, where every worker doing the same job.
> If so, may somebody help to wrap the sample code below?
> May be some well-known twisted based software can do that?
>
>   




From exarkun at twistedmatrix.com  Tue Sep 15 08:51:59 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 15 Sep 2009 14:51:59 -0000
Subject: [Twisted-Python] memory leak on 8.2.0/2.6 versus 2.5/2.4
In-Reply-To: <02ce01ca357a$06c9a140$145ce3c0$@com>
References: <02ce01ca357a$06c9a140$145ce3c0$@com>
Message-ID: <20090915145159.8731.612401860.divmod.xquotient.115@localhost.localdomain>

On 14 Sep, 08:29 pm, matusis at yahoo.com wrote:
>I am running identical twisted servers under high load, one on 2.5.0
>(patched for epoll bug) on python 2.4.4 and second one on 8.2.0 on 
>python
>2.6.2.
>The 8.2/2.6 one leaks memory compared to 2.5/2.4.4 to the point that I 
>am
>about to roll back to older Twisted and then to older Python.
>
>Any insight on this?

Hi Alec,

Nothing springs to mind, unfortunately.  What parts of Twisted does the 
app use?  Maybe narrowing the field a bit will help jog someone's 
memory...  Otherwise, good luck in tracking it down, and I hope you'll 
let us know if you come to any conclusions.

Jean-Paul



From exarkun at twistedmatrix.com  Tue Sep 15 08:55:22 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 15 Sep 2009 14:55:22 -0000
Subject: [Twisted-Python] run queries in deffered, but not in transaction
In-Reply-To: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com>
References: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com>
Message-ID: <20090915145522.8731.1321821537.divmod.xquotient.121@localhost.localdomain>

On 10:37 am, petshmidt at googlemail.com wrote:
>Hi,
>
>I'd like to run several queries in background, some of them may fail.
>Currently, I do runInteraction for each query. Is there a way to run
>them all in one deferred, so that if one of them fails, other are not
>aborted?

If you have a function along the lines of this one:

    def someInteractions(db):
        interactions = [
            db.runInteraction(one),
            db.runInteraction(two),
            db.runInteraction(three)]

Then a failure in one shouldn't affect two or three; likewise for any 
other failure or combination of failures.  They are naturally (ugh, not 
a good word, but I can't think of a better one) independent.  You have 
to go out of your way to associate them somehow.

Since it sounds like this isn't the behavior you're seeing, I think I'm 
probably misunderstanding some aspect of your question.  If this doesn't 
help, perhaps you can clarify?

Jean-Paul



From markv at lumierevfx.com  Tue Sep 15 09:19:07 2009
From: markv at lumierevfx.com (Mark Visser)
Date: Tue, 15 Sep 2009 11:19:07 -0400
Subject: [Twisted-Python] run queries in deffered, but not in transaction
In-Reply-To: <20090915145522.8731.1321821537.divmod.xquotient.121@localhost.localdomain>
References: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com>
	<20090915145522.8731.1321821537.divmod.xquotient.121@localhost.localdomain>
Message-ID: <4AAFB06B.4010305@lumierevfx.com>

exarkun at twistedmatrix.com wrote:
> On 10:37 am, petshmidt at googlemail.com wrote:
>>
>> I'd like to run several queries in background, some of them may fail.
>>     
>
> If you have a function along the lines of this one:
>
>     def someInteractions(db):
>         interactions = [
>             db.runInteraction(one),
>             db.runInteraction(two),
>             db.runInteraction(three)]
>
> Then a failure in one shouldn't affect two or three; likewise for any 
> other failure or combination of failures.  They are naturally (ugh, not 
> a good word, but I can't think of a better one) independent.  You have 
> to go out of your way to associate them somehow.
>   
I think he might mean he wants them to run sequentially, even if one fails.

You can do that explicitly via @inlineCallbacks like this:

@inlineCallbacks
def someInteractions(db):
    try:
        yield db.runInteraction(one)
    except:
       pass

    try:
        yield db.runInteraction(two)
    except:
       pass

    try:
        yield db.runInteraction(three)
    except:
       pass

Or with callback/errbacks, like this:

def someInteractions(db)
        d = db.runInteraction(one).addBoth(db.runInteraction, 
two).addBoth(db.runInteraction, three)

addBoth is a convenience method that adds the same function as a 
callback and an errback:

http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.defer.Deferred.html#addBoth

-- 
Mark Visser, Software Director
Lumire VFX
Email: markv at lumierevfx.com
Phone: +1-514-316-1080 x3030




From petshmidt at googlemail.com  Tue Sep 15 10:21:05 2009
From: petshmidt at googlemail.com (Pet)
Date: Tue, 15 Sep 2009 18:21:05 +0200
Subject: [Twisted-Python] run queries in deffered, but not in transaction
In-Reply-To: <4AAFB06B.4010305@lumierevfx.com>
References: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com> 
	<20090915145522.8731.1321821537.divmod.xquotient.121@localhost.localdomain>
	<4AAFB06B.4010305@lumierevfx.com>
Message-ID: <b460e9630909150921h7e95b4egda47d37322cdbb0@mail.gmail.com>

On Tue, Sep 15, 2009 at 5:19 PM, Mark Visser <markv at lumierevfx.com> wrote:
> exarkun at twistedmatrix.com wrote:
>> On 10:37 am, petshmidt at googlemail.com wrote:
>>>
>>> I'd like to run several queries in background, some of them may fail.
>>>
>>
>> If you have a function along the lines of this one:
>>
>>   def someInteractions(db):
>>     interactions = [
>>       db.runInteraction(one),
>>       db.runInteraction(two),
>>       db.runInteraction(three)]
>>
>> Then a failure in one shouldn't affect two or three; likewise for any
>> other failure or combination of failures. They are naturally (ugh, not
>> a good word, but I can't think of a better one) independent. You have
>> to go out of your way to associate them somehow.
>>
> I think he might mean he wants them to run sequentially, even if one fails.
>
> You can do that explicitly via @inlineCallbacks like this:
>
> @inlineCallbacks
> def someInteractions(db):
>  try:
>    yield db.runInteraction(one)
>  except:
>    pass
>
>  try:
>    yield db.runInteraction(two)
>  except:
>    pass
>
>  try:
>    yield db.runInteraction(three)
>  except:
>    pass
>
> Or with callback/errbacks, like this:
>
> def someInteractions(db)
>    d = db.runInteraction(one).addBoth(db.runInteraction,
> two).addBoth(db.runInteraction, three)

Hi Mark!

Yes, I'd like run them sequentially, it was not clear for me, how to
do it in one deferred.

I will try your suggestions out.

Thanks for help!

Pet

>
> addBoth is a convenience method that adds the same function as a
> callback and an errback:
>
> http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.defer.Deferred.html#addBoth
>
> --
> Mark Visser, Software Director
> Lumire VFX
> Email: markv at lumierevfx.com
> Phone: +1-514-316-1080 x3030
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From freddy at cbm.uo.edu.cu  Tue Sep 15 10:47:56 2009
From: freddy at cbm.uo.edu.cu (Freddy Martinez Garcia)
Date: Tue, 15 Sep 2009 12:47:56 -0400
Subject: [Twisted-Python] hi !!!
Message-ID: <200909151247.56909.freddy@cbm.uo.edu.cu>

I wrote my problem in the last message an I wasn't clear with that...

Ok... I'm going again... !!!

I have a web server... this server was implemented with twisted using 
XMLRPC... when the server start to run, in this moment I did 
"reactor.run()"...

well, my server is listening by 8080 port, and when one command had become, I 
catch the command, interpret it, and after I need to run another process tu 
execute the command. To execute another process I have to call 
"reactor.spawnProcess(...)" with its parameters, and after I have to say again 
"reactor.run()", but the reactor is running because the server isn't stop.

I need to run another process with twisted without reactor.... how can I do 
that ?? or, I can do the same thing with another variant ???

please.... help me !!!

-------
[Tank]
"Amar desenfrenadamente es abrazar la utopa de que tenemos lo que queremos."
-------
Freddy Martinez Garcia
Lic. en Ciencia de la Computacin.
Edad: 27 Aos
Santiago de Cuba
e-mails:
    * freddy at cbm.uo.edu.cu
    * freddy311082 at gmail.com
    * freddymg311082 at hotmail.com 

-- 
Este mensaje ha sido analizado por MailScanner
en busca de virus y otros contenidos peligrosos,
y se considera que est limpio.
For all your IT requirements visit: http://www.transtec.co.uk

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090915/9c08fb1f/attachment.html>

From colin.alston at thusa.co.za  Tue Sep 15 11:29:05 2009
From: colin.alston at thusa.co.za (Colin Alston)
Date: Tue, 15 Sep 2009 19:29:05 +0200
Subject: [Twisted-Python] hi !!!
In-Reply-To: <200909151247.56909.freddy@cbm.uo.edu.cu>
References: <200909151247.56909.freddy@cbm.uo.edu.cu>
Message-ID: <78bfcf050909151029o4233dc1dx616f56a866190c2d@mail.gmail.com>

On Tue, Sep 15, 2009 at 6:47 PM, Freddy Martinez Garcia <
freddy at cbm.uo.edu.cu> wrote:

> I wrote my problem in the last message an I wasn't clear with that...
>
>
> Ok... I'm going again... !!!
>
>
> I have a web server... this server was implemented with twisted using
> XMLRPC... when the server start to run, in this moment I did
> "reactor.run()"...
>
>
> well, my server is listening by 8080 port, and when one command had become,
> I catch the command, interpret it, and after I need to run another process
> tu execute the command. To execute another process I have to call
> "reactor.spawnProcess(...)" with its parameters, and after I have to say
> again "reactor.run()
>

No, as was explained you do not have to call reactor.run() again.

Twisted use a global event loop (so to speak), you have one and you start it
once, and when it is running all defereds will execute.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090915/17bad91b/attachment.html>

From timwylie at hotmail.com  Tue Sep 15 11:58:18 2009
From: timwylie at hotmail.com (tim wylie)
Date: Tue, 15 Sep 2009 12:58:18 -0500
Subject: [Twisted-Python] Perspective Broker for plugins
Message-ID: <BAY112-W338A236FA1011A5CB812E7D1E30@phx.gbl>


Hello,
  I'm just now undergoing my first real twisted application.  There is a main server which users authenticate with, and the main server also has different plugins for chat/whatever features.  The client side also has a handler for each of these plugins and then a GTK gui associate with them.  I've been reading the documentation, tutorials, etc, and I'm a little confused about what the best approach would be.

Would you all suggest using Perspective Broker?  Each plugin has it's own set of communication that needs to happen with the plugin handler server side as well.  Would this be easier some other way?

Another question has to do with a GTK handler.  I saw that twisted has a reactor built in for that.  I do have events that need to be triggered from the server.  Should I use twisted for that as well, or just send requests to a callback within the GTK application?

Really there is just so much information out there about twisted and everyone does it differently that it's confusing to get started.  Any help would be appreciated.  Thanks.
Tim

_________________________________________________________________
Hotmail: Free, trusted and rich email service.
http://clk.atdmt.com/GBL/go/171222984/direct/01/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090915/6442bdb2/attachment.html>

From matusis at yahoo.com  Tue Sep 15 21:08:26 2009
From: matusis at yahoo.com (Alec Matusis)
Date: Tue, 15 Sep 2009 20:08:26 -0700
Subject: [Twisted-Python] memory leak on 8.2.0/2.6 versus 2.5/2.4
In-Reply-To: <20090915145159.8731.612401860.divmod.xquotient.115@localhost.localdomain>
References: <02ce01ca357a$06c9a140$145ce3c0$@com>
	<20090915145159.8731.612401860.divmod.xquotient.115@localhost.localdomain>
Message-ID: <021701ca367a$f8dccb50$ea9661f0$@com>

> Nothing springs to mind, unfortunately.  What parts of Twisted does the
> app use?  Maybe narrowing the field a bit will help jog someone's
> memory... 
 
Nothing special:
Epoll reactor and twisted.enterprise.adbapi

Will keep you guys posted.

> -----Original Message-----
> From: twisted-python-bounces at twistedmatrix.com [mailto:twisted-python-
> bounces at twistedmatrix.com] On Behalf Of exarkun at twistedmatrix.com
> Sent: Tuesday, September 15, 2009 7:52 AM
> To: Twisted general discussion
> Subject: Re: [Twisted-Python] memory leak on 8.2.0/2.6 versus 2.5/2.4
> 
> On 14 Sep, 08:29 pm, matusis at yahoo.com wrote:
> >I am running identical twisted servers under high load, one on 2.5.0
> >(patched for epoll bug) on python 2.4.4 and second one on 8.2.0 on
> >python
> >2.6.2.
> >The 8.2/2.6 one leaks memory compared to 2.5/2.4.4 to the point that I
> >am
> >about to roll back to older Twisted and then to older Python.
> >
> >Any insight on this?
> 
> Hi Alec,
> 
> Nothing springs to mind, unfortunately.  What parts of Twisted does the
> app use?  Maybe narrowing the field a bit will help jog someone's
> memory...  Otherwise, good luck in tracking it down, and I hope you'll
> let us know if you come to any conclusions.
> 
> Jean-Paul
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From mardiros at laposte.net  Wed Sep 16 03:48:52 2009
From: mardiros at laposte.net (mardiros)
Date: Wed, 16 Sep 2009 11:48:52 +0200 (CEST)
Subject: [Twisted-Python] Twistd, tac and Logging
In-Reply-To: <021701ca367a$f8dccb50$ea9661f0$@com>
References: <02ce01ca357a$06c9a140$145ce3c0$@com>
	<20090915145159.8731.612401860.divmod.xquotient.115@localhost.localdomain>
	<021701ca367a$f8dccb50$ea9661f0$@com>
Message-ID: <9129144.1754.1253094532775.JavaMail.www@wwinf8217>


Hi,

I have written an Twisted app in a tac file which use a custom LogObserver
and I'd like to turn off the output of twistd.


First, I 've tried something like this ( a Debian initd service file )

TACFILE=/opt/email2sms/email2smsd.tac
DAEMON=/usr/bin/twistd
PIDFILE=/var/run/mytac.pid
SCRIPTNAME=/etc/init.d/mytac

$DAEMON -oy $TACFILE --pidfile=$PIDFILE --logfile=/dev/null

but the logfile rotate, and it's create /dev/null.1, ...

What is the right way too do that ?

Thanks,

---------------------------------------------------------------------------- 
Laposte.net fte ses 10 ans ! 

Gratuite, garantie  vie et dj utilise par des millions d'internautes... 
vous aussi, pour votre adresse e-mail, choisissez laposte.net. 

Laposte.net, bien + qu'une messagerie 
----------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090916/60d34309/attachment.html>

From alendit at googlemail.com  Wed Sep 16 07:27:16 2009
From: alendit at googlemail.com (Dimitri Vorona)
Date: Wed, 16 Sep 2009 15:27:16 +0200
Subject: [Twisted-Python] Using reactor with multiple processes
Message-ID: <ad422ae80909160627o5d9e3c65kf74d322ad377f51a@mail.gmail.com>

Hi,

i'd like to be able to start additional instances of my server using
multiprocess module. To do it i just start a new Process with
mutiprocessing and then create a new instance of my Application there.
Everything works fine, but i can't figure out a way to
stop such a process. If I run reactor.stop() in the child process I
get an infinite loop of errors looking like this:

   --- <exception caught here> ---
 File "/usr/share/exe/twisted/internet/tcp.py", line 755, in doRead
   skt, addr = self.socket.accept()
 File "/usr/lib/python2.6/socket.py", line 195, in accept
   sock, addr = self._sock.accept()
<class 'socket.error'>: [Errno 22] Invalid argument

 I couldn't not find much information on using reactor from different
processes, so i'm asking for help here.

Dimitri



From p.mayers at imperial.ac.uk  Wed Sep 16 08:02:00 2009
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Wed, 16 Sep 2009 15:02:00 +0100
Subject: [Twisted-Python] Using reactor with multiple processes
In-Reply-To: <ad422ae80909160627o5d9e3c65kf74d322ad377f51a@mail.gmail.com>
References: <ad422ae80909160627o5d9e3c65kf74d322ad377f51a@mail.gmail.com>
Message-ID: <4AB0EFD8.2090705@imperial.ac.uk>

Dimitri Vorona wrote:
> Hi,
> 
> i'd like to be able to start additional instances of my server using
> multiprocess module. To do it i just start a new Process with
> mutiprocessing and then create a new instance of my Application there.
> Everything works fine, but i can't figure out a way to
> stop such a process. If I run reactor.stop() in the child process I
> get an infinite loop of errors looking like this:
> 
>    --- <exception caught here> ---
>  File "/usr/share/exe/twisted/internet/tcp.py", line 755, in doRead
>    skt, addr = self.socket.accept()
>  File "/usr/lib/python2.6/socket.py", line 195, in accept
>    sock, addr = self._sock.accept()
> <class 'socket.error'>: [Errno 22] Invalid argument
> 
>  I couldn't not find much information on using reactor from different
> processes, so i'm asking for help here.

I doubt this will work.

When are you starting the multiprocess children?

If it's after the main reactor has started, then you'll run into all 
kinds of problems. When I last looked into it, multiprocess just calls 
"fork()" and then carries on going - it doesn't re-exec the python 
interpreter, so the child process and parent process share state, 
including open file descriptors and such - closing the child process 
will cause "damage" to file descriptors in the parent, amongst other things.

Aside from all that, multiprocess is blocking so doesn't play well with 
Twisted.

You should look into something like Ampoule:

https://launchpad.net/ampoule

...which will work "correctly" with Twisted.



From vpogrebi at verizon.net  Wed Sep 16 10:10:13 2009
From: vpogrebi at verizon.net (Valeriy Pogrebitskiy)
Date: Wed, 16 Sep 2009 12:10:13 -0400
Subject: [Twisted-Python] Twisted Trial (unittest) and Ant
Message-ID: <C5105377-22CC-4B21-A2CD-F78CD294D4AA@verizon.net>

I am trying to implement Ant build.xml script that would include  
testing Python code using twisted.trial.unittest. When using available  
pyAntTasks (<py-test> target), I am getting all sorts of errors - even  
though test scripts complete successfully using Python directly, or  
using Eclipse's' Run As --> Python unit-test' option.

Some errors come from twisted.python.log module, others - I do not  
even know where from. For example, I am seeing following error:

   [py-test]   import pkg_resources
   [py-test] Traceback (most recent call last):
   [py-test]   File "<stdin>", line 3, in <module>
   [py-test] TypeError: __init__() takes at least 2 arguments (1 given)


I wonder if anyone has Ant (build.xml) code samples of executing  
Twisted's unittest scripts. Any help would be appreciated.


Kind regards,

Val.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090916/025311ed/attachment.html>

From petshmidt at googlemail.com  Wed Sep 16 10:18:41 2009
From: petshmidt at googlemail.com (Pet)
Date: Wed, 16 Sep 2009 18:18:41 +0200
Subject: [Twisted-Python] run queries in deffered, but not in transaction
In-Reply-To: <b460e9630909150921h7e95b4egda47d37322cdbb0@mail.gmail.com>
References: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com> 
	<20090915145522.8731.1321821537.divmod.xquotient.121@localhost.localdomain>
	<4AAFB06B.4010305@lumierevfx.com>
	<b460e9630909150921h7e95b4egda47d37322cdbb0@mail.gmail.com>
Message-ID: <b460e9630909160918qdc55b23r4f825fc8eca1fc1b@mail.gmail.com>

On Tue, Sep 15, 2009 at 6:21 PM, Pet <petshmidt at googlemail.com> wrote:
> On Tue, Sep 15, 2009 at 5:19 PM, Mark Visser <markv at lumierevfx.com> wrote:
>> exarkun at twistedmatrix.com wrote:
>>> On 10:37 am, petshmidt at googlemail.com wrote:
>>>>
>>>> I'd like to run several queries in background, some of them may fail.
>>>>
>>>
>>> If you have a function along the lines of this one:
>>>
>>>   def someInteractions(db):
>>>     interactions = [
>>>       db.runInteraction(one),
>>>       db.runInteraction(two),
>>>       db.runInteraction(three)]
>>>
>>> Then a failure in one shouldn't affect two or three; likewise for any
>>> other failure or combination of failures. They are naturally (ugh, not
>>> a good word, but I can't think of a better one) independent. You have
>>> to go out of your way to associate them somehow.
>>>
>> I think he might mean he wants them to run sequentially, even if one fails.
>>
>> You can do that explicitly via @inlineCallbacks like this:
>>
>> @inlineCallbacks
>> def someInteractions(db):
>>  try:
>>    yield db.runInteraction(one)
>>  except:
>>    pass
>>
>>  try:
>>    yield db.runInteraction(two)
>>  except:
>>    pass
>>
>>  try:
>>    yield db.runInteraction(three)
>>  except:
>>    pass
>>
>> Or with callback/errbacks, like this:
>>
>> def someInteractions(db)
>>    d = db.runInteraction(one).addBoth(db.runInteraction,
>> two).addBoth(db.runInteraction, three)
>

Hi,


I've tried to do following:

def logRequest(self, *arg, **kw):
    obj = copy.deepcopy(kw['obj'])

    d = self.db.runInteraction(obj.first)

    d.addCallback(self.db.runInteraction, obj.second, param1, param2)
    d.addErrback(log.err)

    d.addCallback(self.db.runInteraction, obj.third)
    d.addErrback(log.err)


unfortunately it doesn't work in that way, because I suppose, obj is
destroyed if second or third interaction starts.
Is there a way to solve this?

Thanks, Pet

> Hi Mark!
>
> Yes, I'd like run them sequentially, it was not clear for me, how to
> do it in one deferred.
>
> I will try your suggestions out.
>
> Thanks for help!
>
> Pet
>
>>
>> addBoth is a convenience method that adds the same function as a
>> callback and an errback:
>>
>> http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.defer.Deferred.html#addBoth
>>
>> --
>> Mark Visser, Software Director
>> Lumire VFX
>> Email: markv at lumierevfx.com
>> Phone: +1-514-316-1080 x3030
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>



From david.yoakley at gmail.com  Wed Sep 16 10:33:51 2009
From: david.yoakley at gmail.com (David Yoakley)
Date: Wed, 16 Sep 2009 11:33:51 -0500
Subject: [Twisted-Python] Using reactor with multiple processes
Message-ID: <90be4d570909160933m5528f053yeef0629765c2d1a0@mail.gmail.com>

Dimitri Vorona wrote:
> Hi,
>
> i'd like to be able to start additional instances of my server using
> multiprocess module. To do it i just start a new Process with
> mutiprocessing and then create a new instance of my Application there.
> Everything works fine, but i can't figure out a way to
> stop such a process. If I run reactor.stop() in the child process I
> get an infinite loop of errors looking like this:
>

This is a very timely discussion for us.  We are trying to launch multiple
independent twistedized children with python multiprocess and yes (as Phil
noted) we are getting very strange results.  We were aware the multiprocess
module does a fork to spawn children but we hoping that this would not be an
issue for us because our parent process does NOT start a reactor before
spawning the children.  In fact even if our parent process never starts its
reactor, as soon as we spawn the 2nd twistedized child, bad things start
happening in the children.   The parent does import the child modules in
order to start them and since each child module also imports twisted, we are
thinking that some twisted state gets established just on the import of the
twisted reactor into the parent and then the fork clones that state into the
children.

Thanks Phil for the reference to ampoule.   We will look at that next.  We
are still hoping to get the parent set up in such a way that whatever the
forking :-) shared state is, it does not get established until after the
children are spawed. I'll post back later with what we find.  Phil your
thoughts on this would also be appreciated.

Cheers,
David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090916/819d13b5/attachment.html>

From kevin.horn at gmail.com  Wed Sep 16 15:25:34 2009
From: kevin.horn at gmail.com (Kevin Horn)
Date: Wed, 16 Sep 2009 16:25:34 -0500
Subject: [Twisted-Python] network server on multiprocessor hardware
In-Reply-To: <4AA2709C.4090501@academ.org>
References: <4AA17FC1.1070303@academ.org>
	<d9047f780909041620y417dd667w5f2cce684e090c3f@mail.gmail.com>
	<4AA251F2.2060205@academ.org>
	<cedc0c090909050516r7a7367e3ra5578af60749b6d5@mail.gmail.com>
	<4AA2709C.4090501@academ.org>
Message-ID: <562bcc10909161425g361e3ffej3402b4308dfa4ec5@mail.gmail.com>

On Sat, Sep 5, 2009 at 9:07 AM, Bokhan Artem <art at academ.org> wrote:

> Laurens Van Houtven :
> > Are you sure it's dying out because of CPU limitations?
>
> Yes, with 1k req/s cpu is 100% busy with python.
>
> > Can you show any real applications where this happens?
>
> I do not have real application in python/twisted now.
> That could be any internet server with high load or under dos.
>
> > In my experience your network IO always gives up ages before my
> processors croak :-)
>
> It depends.
>
> >
> > I happen to be in the middle of writing a project with a big
> > computational component (at least when I'm not hacking away at
> > twisted.positioning), and generally the heavy computational stuff
> > doesn't live in the Twisted layer.
>
> I do not have any heavy computations, just high request rate.
>
>
> If you are looking for load balancing, you might also find txLoadBalancer
useful:
http://groups.google.com/group/txlb-dev

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090916/ba253243/attachment.html>

From foom at fuhm.net  Wed Sep 16 16:29:24 2009
From: foom at fuhm.net (James Y Knight)
Date: Wed, 16 Sep 2009 18:29:24 -0400
Subject: [Twisted-Python] Using reactor with multiple processes
In-Reply-To: <90be4d570909160933m5528f053yeef0629765c2d1a0@mail.gmail.com>
References: <90be4d570909160933m5528f053yeef0629765c2d1a0@mail.gmail.com>
Message-ID: <2A0E194C-50A7-4970-96DF-12EBF8B7B586@fuhm.net>

On Sep 16, 2009, at 12:33 PM, David Yoakley wrote:
> Thanks Phil for the reference to ampoule.   We will look at that  
> next.  We are still hoping to get the parent set up in such a way  
> that whatever the forking :-) shared state is, it does not get  
> established until after the children are spawed. I'll post back  
> later with what we find.  Phil your thoughts on this would also be  
> appreciated.

It think it would be a nice for this to work. Importing (but not  
running) twisted should ideally not cause strange side effects.

So if this turns out to be a problem with some twisted-internal code  
rather than your code, a bug report would be a good idea, and a patch  
causing such problematic setup to be done at reactor startup rather  
than import time even better.

That should at least fix the case of forking before starting the  
reactor. For people who want to fork while the reactor is running,  
there would need to be API for clearing out all the timed events, open  
sockets, etc and starting over. Which is probably more trouble than  
it's worth.

James



From matt at unshift.net  Wed Sep 16 20:35:06 2009
From: matt at unshift.net (Matt Perry)
Date: Wed, 16 Sep 2009 22:35:06 -0400
Subject: [Twisted-Python] run queries in deffered, but not in transaction
In-Reply-To: <b460e9630909160918qdc55b23r4f825fc8eca1fc1b@mail.gmail.com>
References: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com>
	<20090915145522.8731.1321821537.divmod.xquotient.121@localhost.localdomain>
	<4AAFB06B.4010305@lumierevfx.com>
	<b460e9630909150921h7e95b4egda47d37322cdbb0@mail.gmail.com>
	<b460e9630909160918qdc55b23r4f825fc8eca1fc1b@mail.gmail.com>
Message-ID: <a8c89c8c0909161935t1bf1d2e4j5679ff7963ae36f6@mail.gmail.com>

Make sure you're using the @inlineCallbacks decorator and the yield
statement referenced previously.  Without those you're just adding several
callbacks to the same Deferred; with them, the function will wait until the
Deferred fires before continuing.

def logRequest(self, *arg, **kw):
   obj = copy.deepcopy(kw['obj'])

   d = self.db.runInteraction(obj.first)

   d.addCallback(self.db.runInteraction, obj.second, param1, param2)
   d.addErrback(log.err)

   d.addCallback(self.db.runInteraction, obj.third)
   d.addErrback(log.err)


Note that "d" is the same Deferred throughout.  If you change it to:

@inlineCallbacks
def logRequest(self, *arg, **kw):
   obj = copy.deepcopy(kw['obj'])

   firstDeferred = self.db.runInteraction(obj.first)
   yield firstDeferred

  # code here won't get resumed until "firstDeferred" has a result
  print firstDeferred.result

  secondDeferred = self.db.runInteraction(obj.second)
  yield secondDeferred

  # same as above, code won't get executed until "secondDeferred" has a
result

then you'll get the behavior you're looking for.

See
http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.defer.html#inlineCallbacksfor
some more information.

   - Matt



On Wed, Sep 16, 2009 at 12:18 PM, Pet <petshmidt at googlemail.com> wrote:

> On Tue, Sep 15, 2009 at 6:21 PM, Pet <petshmidt at googlemail.com> wrote:
> > On Tue, Sep 15, 2009 at 5:19 PM, Mark Visser <markv at lumierevfx.com>
> wrote:
> >> exarkun at twistedmatrix.com wrote:
> >>> On 10:37 am, petshmidt at googlemail.com wrote:
> >>>>
> >>>> I'd like to run several queries in background, some of them may fail.
> >>>>
> >>>
> >>> If you have a function along the lines of this one:
> >>>
> >>>     def someInteractions(db):
> >>>         interactions = [
> >>>             db.runInteraction(one),
> >>>             db.runInteraction(two),
> >>>             db.runInteraction(three)]
> >>>
> >>> Then a failure in one shouldn't affect two or three; likewise for any
> >>> other failure or combination of failures.  They are naturally (ugh, not
> >>> a good word, but I can't think of a better one) independent.  You have
> >>> to go out of your way to associate them somehow.
> >>>
> >> I think he might mean he wants them to run sequentially, even if one
> fails.
> >>
> >> You can do that explicitly via @inlineCallbacks like this:
> >>
> >> @inlineCallbacks
> >> def someInteractions(db):
> >>    try:
> >>        yield db.runInteraction(one)
> >>    except:
> >>       pass
> >>
> >>    try:
> >>        yield db.runInteraction(two)
> >>    except:
> >>       pass
> >>
> >>    try:
> >>        yield db.runInteraction(three)
> >>    except:
> >>       pass
> >>
> >> Or with callback/errbacks, like this:
> >>
> >> def someInteractions(db)
> >>        d = db.runInteraction(one).addBoth(db.runInteraction,
> >> two).addBoth(db.runInteraction, three)
> >
>
> Hi,
>
>
> I've tried to do following:
>
> def logRequest(self, *arg, **kw):
>    obj = copy.deepcopy(kw['obj'])
>
>    d = self.db.runInteraction(obj.first)
>
>    d.addCallback(self.db.runInteraction, obj.second, param1, param2)
>    d.addErrback(log.err)
>
>    d.addCallback(self.db.runInteraction, obj.third)
>    d.addErrback(log.err)
>
>
> unfortunately it doesn't work in that way, because I suppose, obj is
> destroyed if second or third interaction starts.
> Is there a way to solve this?
>
> Thanks, Pet
>
> > Hi Mark!
> >
> > Yes, I'd like run them sequentially, it was not clear for me, how to
> > do it in one deferred.
> >
> > I will try your suggestions out.
> >
> > Thanks for help!
> >
> > Pet
> >
> >>
> >> addBoth is a convenience method that adds the same function as a
> >> callback and an errback:
> >>
> >>
> http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.defer.Deferred.html#addBoth
> >>
> >> --
> >> Mark Visser, Software Director
> >> Lumire VFX
> >> Email: markv at lumierevfx.com
> >> Phone: +1-514-316-1080 x3030
> >>
> >>
> >> _______________________________________________
> >> Twisted-Python mailing list
> >> Twisted-Python at twistedmatrix.com
> >> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >>
> >
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090916/8da2e45b/attachment.html>

From petshmidt at googlemail.com  Thu Sep 17 00:48:02 2009
From: petshmidt at googlemail.com (Pet)
Date: Thu, 17 Sep 2009 08:48:02 +0200
Subject: [Twisted-Python] run queries in deffered, but not in transaction
In-Reply-To: <a8c89c8c0909161935t1bf1d2e4j5679ff7963ae36f6@mail.gmail.com>
References: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com> 
	<20090915145522.8731.1321821537.divmod.xquotient.121@localhost.localdomain>
	<4AAFB06B.4010305@lumierevfx.com>
	<b460e9630909150921h7e95b4egda47d37322cdbb0@mail.gmail.com> 
	<b460e9630909160918qdc55b23r4f825fc8eca1fc1b@mail.gmail.com> 
	<a8c89c8c0909161935t1bf1d2e4j5679ff7963ae36f6@mail.gmail.com>
Message-ID: <b460e9630909162348q2b7c2c0cub38ad5124d6dfded@mail.gmail.com>

On Thu, Sep 17, 2009 at 4:35 AM, Matt Perry <matt at unshift.net> wrote:
> Make sure you're using the @inlineCallbacks decorator and the yield
> statement referenced previously. Without those you're just adding several
> callbacks to the same Deferred; with them, the function will wait until the
> Deferred fires before continuing.
>
> def logRequest(self, *arg, **kw):
>  obj = copy.deepcopy(kw['obj'])
>
>  d = self.db.runInteraction(obj.first)
>
>  d.addCallback(self.db.runInteraction, obj.second, param1, param2)
>  d.addErrback(log.err)
>
>  d.addCallback(self.db.runInteraction, obj.third)
>  d.addErrback(log.err)
>
>
> Note that "d" is the same Deferred throughout. If you change it to:
>
> @inlineCallbacks
> def logRequest(self, *arg, **kw):
>  obj = copy.deepcopy(kw['obj'])
>
>  firstDeferred = self.db.runInteraction(obj.first)
>  yield firstDeferred
>
>  # code here won't get resumed until "firstDeferred" has a result
>  print firstDeferred.result
>
>  secondDeferred = self.db.runInteraction(obj.second)
>  yield secondDeferred
>
>  # same as above, code won't get executed until "secondDeferred" has a
> result
>
> then you'll get the behavior you're looking for.
>
> See
> http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.defer.html#inlineCallbacks
> for some more information.
>

Matt and Jean-Paul,

thank you for help!

Pet

>  - Matt
>
>
>
> On Wed, Sep 16, 2009 at 12:18 PM, Pet <petshmidt at googlemail.com> wrote:
>>
>> On Tue, Sep 15, 2009 at 6:21 PM, Pet <petshmidt at googlemail.com> wrote:
>> > On Tue, Sep 15, 2009 at 5:19 PM, Mark Visser <markv at lumierevfx.com>
>> > wrote:
>> >> exarkun at twistedmatrix.com wrote:
>> >>> On 10:37 am, petshmidt at googlemail.com wrote:
>> >>>>
>> >>>> I'd like to run several queries in background, some of them may fail.
>> >>>>
>> >>>
>> >>> If you have a function along the lines of this one:
>> >>>
>> >>>   def someInteractions(db):
>> >>>     interactions = [
>> >>>       db.runInteraction(one),
>> >>>       db.runInteraction(two),
>> >>>       db.runInteraction(three)]
>> >>>
>> >>> Then a failure in one shouldn't affect two or three; likewise for any
>> >>> other failure or combination of failures. They are naturally (ugh,
>> >>> not
>> >>> a good word, but I can't think of a better one) independent. You have
>> >>> to go out of your way to associate them somehow.
>> >>>
>> >> I think he might mean he wants them to run sequentially, even if one
>> >> fails.
>> >>
>> >> You can do that explicitly via @inlineCallbacks like this:
>> >>
>> >> @inlineCallbacks
>> >> def someInteractions(db):
>> >>  try:
>> >>    yield db.runInteraction(one)
>> >>  except:
>> >>    pass
>> >>
>> >>  try:
>> >>    yield db.runInteraction(two)
>> >>  except:
>> >>    pass
>> >>
>> >>  try:
>> >>    yield db.runInteraction(three)
>> >>  except:
>> >>    pass
>> >>
>> >> Or with callback/errbacks, like this:
>> >>
>> >> def someInteractions(db)
>> >>    d = db.runInteraction(one).addBoth(db.runInteraction,
>> >> two).addBoth(db.runInteraction, three)
>> >
>>
>> Hi,
>>
>>
>> I've tried to do following:
>>
>> def logRequest(self, *arg, **kw):
>>  obj = copy.deepcopy(kw['obj'])
>>
>>  d = self.db.runInteraction(obj.first)
>>
>>  d.addCallback(self.db.runInteraction, obj.second, param1, param2)
>>  d.addErrback(log.err)
>>
>>  d.addCallback(self.db.runInteraction, obj.third)
>>  d.addErrback(log.err)
>>
>>
>> unfortunately it doesn't work in that way, because I suppose, obj is
>> destroyed if second or third interaction starts.
>> Is there a way to solve this?
>>
>> Thanks, Pet
>>
>> > Hi Mark!
>> >
>> > Yes, I'd like run them sequentially, it was not clear for me, how to
>> > do it in one deferred.
>> >
>> > I will try your suggestions out.
>> >
>> > Thanks for help!
>> >
>> > Pet
>> >
>> >>
>> >> addBoth is a convenience method that adds the same function as a
>> >> callback and an errback:
>> >>
>> >>
>> >> http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.defer.Deferred.html#addBoth
>> >>
>> >> --
>> >> Mark Visser, Software Director
>> >> Lumire VFX
>> >> Email: markv at lumierevfx.com
>> >> Phone: +1-514-316-1080 x3030
>> >>
>> >>
>> >> _______________________________________________
>> >> Twisted-Python mailing list
>> >> Twisted-Python at twistedmatrix.com
>> >> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> >>
>> >
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



From amauryfa at gmail.com  Thu Sep 17 01:32:13 2009
From: amauryfa at gmail.com (Amaury Forgeot d'Arc)
Date: Thu, 17 Sep 2009 09:32:13 +0200
Subject: [Twisted-Python] run queries in deffered, but not in transaction
In-Reply-To: <a8c89c8c0909161935t1bf1d2e4j5679ff7963ae36f6@mail.gmail.com>
References: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com>
	<20090915145522.8731.1321821537.divmod.xquotient.121@localhost.localdomain>
	<4AAFB06B.4010305@lumierevfx.com>
	<b460e9630909150921h7e95b4egda47d37322cdbb0@mail.gmail.com>
	<b460e9630909160918qdc55b23r4f825fc8eca1fc1b@mail.gmail.com>
	<a8c89c8c0909161935t1bf1d2e4j5679ff7963ae36f6@mail.gmail.com>
Message-ID: <e27efe130909170032u3f93b925w490c3254f94b1413@mail.gmail.com>

Hello,

2009/9/17 Matt Perry <matt at unshift.net>:
> Make sure you're using the @inlineCallbacks decorator and the yield
> statement referenced previously. Without those you're just adding several
> callbacks to the same Deferred; with them, the function will wait until the
> Deferred fires before continuing.
>
> def logRequest(self, *arg, **kw):
>  obj = copy.deepcopy(kw['obj'])
>
>  d = self.db.runInteraction(obj.first)
>
>  d.addCallback(self.db.runInteraction, obj.second, param1, param2)
>  d.addErrback(log.err)
>
>  d.addCallback(self.db.runInteraction, obj.third)
>  d.addErrback(log.err)

I don't understand your explanation. When a callback returns a Deferred itself,
the main Deferred object waits for its completion before continuing.
This is IMO the best feature of Deferreds!

I often write code like the function above, so I would like to understand why
it does not work in this case.

-- 
Amaury Forgeot d'Arc



From p.mayers at imperial.ac.uk  Thu Sep 17 05:07:34 2009
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Thu, 17 Sep 2009 12:07:34 +0100
Subject: [Twisted-Python] Using reactor with multiple processes
In-Reply-To: <2A0E194C-50A7-4970-96DF-12EBF8B7B586@fuhm.net>
References: <90be4d570909160933m5528f053yeef0629765c2d1a0@mail.gmail.com>
	<2A0E194C-50A7-4970-96DF-12EBF8B7B586@fuhm.net>
Message-ID: <4AB21876.9070609@imperial.ac.uk>

James Y Knight wrote:
> On Sep 16, 2009, at 12:33 PM, David Yoakley wrote:
>> Thanks Phil for the reference to ampoule.   We will look at that  
>> next.  We are still hoping to get the parent set up in such a way  
>> that whatever the forking :-) shared state is, it does not get  
>> established until after the children are spawed. I'll post back  
>> later with what we find.  Phil your thoughts on this would also be  
>> appreciated.
> 
> It think it would be a nice for this to work. Importing (but not  
> running) twisted should ideally not cause strange side effects.

Well, doing:

from twisted.internet import reactor

...causes all kinds of code to be executed. I suspect that:

posixreactorbase.installWaker()

...is the problem, since this creates an FD pair and adds it to the 
reactor. I guess this should really be done during reactor.run()



From twisted at ralphm.ik.nu  Thu Sep 17 08:33:43 2009
From: twisted at ralphm.ik.nu (Ralph Meijer)
Date: Thu, 17 Sep 2009 16:33:43 +0200
Subject: [Twisted-Python] An XMPP client with SSL support
In-Reply-To: <1219872700.10045.29.camel@pcard0ze.ca.nortel.com>
References: <1219872700.10045.29.camel@pcard0ze.ca.nortel.com>
Message-ID: <1253198023.5546.9.camel@dwaal>

On Wed, 2008-08-27 at 17:31 -0400, Pedro Sanchez wrote:
> Hello,
> 
> I have a sample XMPP client with the following structure:
> 
> from twisted.words.protocols.jabber import client, jid
> from twisted.internet import reactor
> ...
> factory = client.basicClientFactory(myJid, myPasswd)
> reactor.connectTCP(host,5222,factory)
> reactor.run()
> 
> It works well, I can connect to the XMPP server. But I would appreciate
> if some one could give me some hints on what's required to get the
> client to connect using a secure SSL link.

Use client.XMPPClientFactory instead, and make sure you have pyOpenSSL
installed.

ralphm





From matt at unshift.net  Thu Sep 17 10:35:05 2009
From: matt at unshift.net (Matt Perry)
Date: Thu, 17 Sep 2009 12:35:05 -0400
Subject: [Twisted-Python] run queries in deffered, but not in transaction
In-Reply-To: <e27efe130909170032u3f93b925w490c3254f94b1413@mail.gmail.com>
References: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com>
	<20090915145522.8731.1321821537.divmod.xquotient.121@localhost.localdomain>
	<4AAFB06B.4010305@lumierevfx.com>
	<b460e9630909150921h7e95b4egda47d37322cdbb0@mail.gmail.com>
	<b460e9630909160918qdc55b23r4f825fc8eca1fc1b@mail.gmail.com>
	<a8c89c8c0909161935t1bf1d2e4j5679ff7963ae36f6@mail.gmail.com>
	<e27efe130909170032u3f93b925w490c3254f94b1413@mail.gmail.com>
Message-ID: <a8c89c8c0909170935r386f277chcc10642f68f1026c@mail.gmail.com>

That way works, but the original problem was that a failure in one of them
was stopping the whole callback chain.

Missing from my example (but present in a past example) was a try/except
around the yield keyword.  So:

...
try:
   yield deferred1
except:
   pass
...
try:
   yield deferred2
except:
   pass


would swallow any exceptions thrown by deferred1 and continue on to create
deferred2.  If you did:

d.addCallback(foo)
d.addCallback(bar)
d.addCallback(baz)

then an exception in "foo" would break the whole callback chain.


   - Matt

On Thu, Sep 17, 2009 at 3:32 AM, Amaury Forgeot d'Arc <amauryfa at gmail.com>wrote:

> Hello,
>
> 2009/9/17 Matt Perry <matt at unshift.net>:
> > Make sure you're using the @inlineCallbacks decorator and the yield
> > statement referenced previously.  Without those you're just adding
> several
> > callbacks to the same Deferred; with them, the function will wait until
> the
> > Deferred fires before continuing.
> >
> > def logRequest(self, *arg, **kw):
> >    obj = copy.deepcopy(kw['obj'])
> >
> >    d = self.db.runInteraction(obj.first)
> >
> >    d.addCallback(self.db.runInteraction, obj.second, param1, param2)
> >    d.addErrback(log.err)
> >
> >    d.addCallback(self.db.runInteraction, obj.third)
> >    d.addErrback(log.err)
>
> I don't understand your explanation. When a callback returns a Deferred
> itself,
> the main Deferred object waits for its completion before continuing.
> This is IMO the best feature of Deferreds!
>
> I often write code like the function above, so I would like to understand
> why
> it does not work in this case.
>
> --
> Amaury Forgeot d'Arc
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090917/0be166bc/attachment.html>

From markv at lumierevfx.com  Thu Sep 17 10:51:33 2009
From: markv at lumierevfx.com (Mark Visser)
Date: Thu, 17 Sep 2009 12:51:33 -0400
Subject: [Twisted-Python] run queries in deffered, but not in transaction
In-Reply-To: <a8c89c8c0909170935r386f277chcc10642f68f1026c@mail.gmail.com>
References: <b460e9630909150337h67d26e0ele75395de70b4dd54@mail.gmail.com>	<20090915145522.8731.1321821537.divmod.xquotient.121@localhost.localdomain>	<4AAFB06B.4010305@lumierevfx.com>	<b460e9630909150921h7e95b4egda47d37322cdbb0@mail.gmail.com>	<b460e9630909160918qdc55b23r4f825fc8eca1fc1b@mail.gmail.com>	<a8c89c8c0909161935t1bf1d2e4j5679ff7963ae36f6@mail.gmail.com>	<e27efe130909170032u3f93b925w490c3254f94b1413@mail.gmail.com>
	<a8c89c8c0909170935r386f277chcc10642f68f1026c@mail.gmail.com>
Message-ID: <4AB26915.70400@lumierevfx.com>

Matt Perry wrote:
> would swallow any exceptions thrown by deferred1 and continue on to 
> create deferred2.  If you did:
>
> d.addCallback(foo)
> d.addCallback(bar)
> d.addCallback(baz)
>
> then an exception in "foo" would break the whole callback chain.
You can also use addBoth(), which adds a callback and errback at the 
same time. Though I prefer the @inlineCallbacks semantics, since they 
produce much more readable code.

cheers,
-Mark



From pemboa at gmail.com  Thu Sep 17 12:31:40 2009
From: pemboa at gmail.com (Arthur Pemberton)
Date: Thu, 17 Sep 2009 13:31:40 -0500
Subject: [Twisted-Python] Seeking advice on use of Perspective Broker
Message-ID: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>

Good day,

I have scanned through the docs a few times, and I am in need of some
advice and explanation to determine if Twisted's Perspective Broker
meetings my perceived needs

What I am trying to do : create a client/server project where the
server is a a typical access multiple data sources, enforce business
logic, and pass data to client. I am looking to use RPC type
technology to facilitate transparent use of the network to communicate
between the client and server.

What I am looked at so far : CORBA implemenations OmniORB and Orbit,
Pyro and Twisted. So far from my scans of the docs of both Pyro and
Twisted, I am a lot clearer on how I could use Pyro to achieve my
goals. However, as part of my application I want to be able to do file
transfers between server and client -- Twisted provides tools for
that. Also, Pyro has this re alert with the use of pickled data being
sent over the network, and it's not clear if simply using SSL
mitigates that problem.

So I've joined this list in the hopes of find some more information,
specifically:
 1) Is the Twisted Matrix book published by Orielly relevant ie. updated enough?
 2) How easy it to package Twisted for distribution on Windows system
(which would be inevitable)
 3) Are there any further documentation/tutorial resources online
giving close to real world use of Perspective Broker
 4) Is it safe to assume that Twisted provides quite a bit in the way
of securing communications between client and server

This is my first project of this scale, so I would appreciate any
advice that seems relevant. In case this matters, this project is thus
far just a hobby.

Thank you.
-- 
Fedora 10
(www.pembo13.com)



From brett at gladserv.com  Thu Sep 17 13:09:43 2009
From: brett at gladserv.com (Brett Sheffield)
Date: Thu, 17 Sep 2009 20:09:43 +0100
Subject: [Twisted-Python] Seeking advice on use of Perspective Broker
In-Reply-To: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>
References: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>
Message-ID: <4AB28977.2090405@gladserv.com>

Arthur Pemberton wrote:
>  1) Is the Twisted Matrix book published by Orielly relevant ie. updated enough?

Yes.  I just read it and it has excellent Perspective Broker examples in
chapters 5 & 6 which got me to a flying start recently.   Obviously
you'll want to read the online docs too.

It doesn't cover twisted.web and nevoew very well because the API was
still shifting about then, but the rest seems pretty good.  It was
published in 2006.

>  3) Are there any further documentation/tutorial resources online
> giving close to real world use of Perspective Broker

All the building blocks are documented, but I don't know of a really
good online example using all the security features fully.  Hopefully
someone else will respond here and tell me I'm wrong. :-)

>  4) Is it safe to assume that Twisted provides quite a bit in the way
> of securing communications between client and server

You used "safe" and "assume" in the same sentence.  Next you'll be
saying "should" ;-)

But yes, all the bits are there - you'll need to plug them together though.

-- 
__________________________________________________________
Application Hosting | Virtual Servers | Monitoring | Email
Tel: 0131 510 0340                http://www.gladserv.com/



From twisted at ralphm.ik.nu  Thu Sep 17 14:36:00 2009
From: twisted at ralphm.ik.nu (Ralph Meijer)
Date: Thu, 17 Sep 2009 22:36:00 +0200
Subject: [Twisted-Python] An XMPP client with SSL support
In-Reply-To: <1253198023.5546.9.camel@dwaal>
References: <1219872700.10045.29.camel@pcard0ze.ca.nortel.com>
	<1253198023.5546.9.camel@dwaal>
Message-ID: <20090917203600.GA41744@ik.nu>

On Thu, Sep 17, 2009 at 04:33:43PM +0200, Ralph Meijer wrote:
> On Wed, 2008-08-27 at 17:31 -0400, Pedro Sanchez wrote:

Oh, ahum. That's quite the latency...

-- 
Groetjes,

ralphm



From pemboa at gmail.com  Thu Sep 17 16:39:17 2009
From: pemboa at gmail.com (Arthur Pemberton)
Date: Thu, 17 Sep 2009 17:39:17 -0500
Subject: [Twisted-Python] Seeking advice on use of Perspective Broker
In-Reply-To: <4AB28977.2090405@gladserv.com>
References: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>
	<4AB28977.2090405@gladserv.com>
Message-ID: <16de708d0909171539q1f2c2483vbbacd1a479c4655b@mail.gmail.com>

On Thu, Sep 17, 2009 at 2:09 PM, Brett Sheffield <brett at gladserv.com> wrote:
> Arthur Pemberton wrote:
>> 1) Is the Twisted Matrix book published by Orielly relevant ie. updated enough?
>
> Yes. I just read it and it has excellent Perspective Broker examples in
> chapters 5 & 6 which got me to a flying start recently.  Obviously
> you'll want to read the online docs too.
>
> It doesn't cover twisted.web and nevoew very well because the API was
> still shifting about then, but the rest seems pretty good. It was
> published in 2006.

I know it was published in 2006, but 3 years can be a long time in the
computing industry, but you've convinced me that its worth a ready. Is
there any link/path to purchase through which the project gets a a
cut? I know amazon has referrer programs.


Thanks for the further information.

-- 
Fedora 10
(www.pembo13.com)



From brett at gladserv.com  Thu Sep 17 17:09:04 2009
From: brett at gladserv.com (Brett Sheffield)
Date: Fri, 18 Sep 2009 00:09:04 +0100
Subject: [Twisted-Python] Seeking advice on use of Perspective Broker
In-Reply-To: <16de708d0909171539q1f2c2483vbbacd1a479c4655b@mail.gmail.com>
References: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>	<4AB28977.2090405@gladserv.com>
	<16de708d0909171539q1f2c2483vbbacd1a479c4655b@mail.gmail.com>
Message-ID: <4AB2C190.4030505@gladserv.com>

Arthur Pemberton wrote:
> On Thu, Sep 17, 2009 at 2:09 PM, Brett Sheffield <brett at gladserv.com> wrote:
>> It doesn't cover twisted.web and nevoew very well because the API was
>> still shifting about then, but the rest seems pretty good.  It was
>> published in 2006.
> 
> I know it was published in 2006, but 3 years can be a long time in the
> computing industry, but you've convinced me that its worth a ready. 

Aye - curse these developers - they never sit still (especially the
Twisted lot!)  Always improving things.  I've been experimenting with
the latest Twisted and wsgi containers to get django running on top of
Twisted.  Seems to work rather well so far.

> Is
> there any link/path to purchase through which the project gets a a
> cut? I know amazon has referrer programs.

There's a link on the page at:
  http://twistedmatrix.com/trac/

> Thanks for the further information.

No worries.

-- 
__________________________________________________________
Application Hosting | Virtual Servers | Monitoring | Email
Tel: 0131 510 0340                http://www.gladserv.com/



From urbansoot at gmail.com  Thu Sep 17 17:29:07 2009
From: urbansoot at gmail.com (Slava Yanson)
Date: Thu, 17 Sep 2009 16:29:07 -0700
Subject: [Twisted-Python] Twisted FTP server fails on PASV
Message-ID: <e5b8dac40909171629k72bb5d76j7801c1cbd7450838@mail.gmail.com>

It just doesn't want to go past PASV. Spent past 3 hours trying to figure
this one out. Any help is appreciated.


Log:

2009-09-17 16:26:56-0700 [-] Log opened.
2009-09-17 16:26:56-0700 [-] twisted.protocols.ftp.FTPFactory starting on
*****
2009-09-17 16:26:56-0700 [-] Starting factory
<twisted.protocols.ftp.FTPFactory instance at 0x2b3a031037a0>
2009-09-17 16:26:59-0700 [twisted.protocols.ftp.FTPFactory] client connected
2009-09-17 16:26:59-0700 [twisted.protocols.ftp.FTPFactory] --> 220 Twisted
8.2.0 FTP Server
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] <-- USER fnet
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] --> 331 Password
required for fnet.
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] <-- PASS *****
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] --> 230 User logged
in, proceed
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] <-- TYPE A
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] --> 200 Type set to
A.
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] <-- SYST
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] --> 215 UNIX Type:
L8
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] <-- PWD
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] --> 257 "/"
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] <-- PASV
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21]
DTPFactory.setTimeout set to 10 seconds
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21]
twisted.protocols.ftp.DTPFactory starting on 38637
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] Starting factory
<twisted.protocols.ftp.DTPFactory instance at 0x2b3a0544a170>
2009-09-17 16:27:00-0700 [ProtocolWrapper,0,24.43.31.21] --> 227 Entering
Passive Mode (65,61,232,130,150,237).
2009-09-17 16:27:10-0700 [-] timed out waiting for DTP connection
2009-09-17 16:27:10-0700 [-] Unexpected FTP error
2009-09-17 16:27:10-0700 [-] Unhandled Error
    Traceback (most recent call last):
    Failure: twisted.internet.defer.TimeoutError:

2009-09-17 16:27:10-0700 [-] --> 550 Requested action not taken: internal
server error
2009-09-17 16:27:10-0700 [-] dtpFactory.stopFactory



Code:

from twisted.protocols.ftp import FTPFactory, FTPRealm, FTP
from twisted.cred.portal import Portal
from twisted.cred.checkers import FilePasswordDB
from twisted.internet import reactor
from twisted.python import log
import sys

log.startLogging(sys.stdout)

class bcFTPProtocol(FTP):
    def connectionMade(self):
        log.msg("client connected")

        FTP.connectionMade(self)

    def lineReceived(self, line):
        log.msg("<-- " + line)
        FTP.lineReceived(self, line)

    def sendLine(self, msg):
        log.msg("--> " + msg)
        FTP.sendLine(self, msg)

ftp_portal = Portal(FTPRealm('data/'), [FilePasswordDB("ftp.users")])
ftp_factory = FTPFactory(ftp_portal)
ftp_factory.protocol = bcFTPProtocol

reactor.listenTCP(*****, ftp_factory)
reactor.run()






Thank you,

Slava Yanson
Positive Blue, LLC

web: www.positiveblue.com
tel: (323) 963-4787
aim/yahoo/skype: urbansoot

http://www.LinuxDecals.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090917/ccc0afb8/attachment.html>

From listsin at integrateddevcorp.com  Thu Sep 17 17:39:19 2009
From: listsin at integrateddevcorp.com (Steve Steiner (listsin))
Date: Thu, 17 Sep 2009 19:39:19 -0400
Subject: [Twisted-Python] Twisted FTP server fails on PASV
In-Reply-To: <e5b8dac40909171629k72bb5d76j7801c1cbd7450838@mail.gmail.com>
References: <e5b8dac40909171629k72bb5d76j7801c1cbd7450838@mail.gmail.com>
Message-ID: <ECF82A50-535E-4A0C-8012-9FB088FB39B9@integrateddevcorp.com>


On Sep 17, 2009, at 7:29 PM, Slava Yanson wrote:

> It just doesn't want to go past PASV. Spent past 3 hours trying to  
> figure this one out. Any help is appreciated.

Since PASV mode goes to higher ports (> 1023), is it possible that a  
firewall's at the server getting in the way?

http://slacksite.com/other/ftp.html#passive

It looks like it's just timing out.

S




-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090917/c8f449e9/attachment.html>

From urbansoot at gmail.com  Thu Sep 17 18:11:00 2009
From: urbansoot at gmail.com (Slava Yanson)
Date: Thu, 17 Sep 2009 17:11:00 -0700
Subject: [Twisted-Python] Twisted FTP server fails on PASV
In-Reply-To: <ECF82A50-535E-4A0C-8012-9FB088FB39B9@integrateddevcorp.com>
References: <e5b8dac40909171629k72bb5d76j7801c1cbd7450838@mail.gmail.com> 
	<ECF82A50-535E-4A0C-8012-9FB088FB39B9@integrateddevcorp.com>
Message-ID: <e5b8dac40909171711m502e0a63p76bf74763e9bfaef@mail.gmail.com>

Here is part of ipconfig file:

-A RH-Firewall-1-INPUT -m tcp -p tcp --dport 65000:65200 -j ACCEPT
-A RH-Firewall-1-INPUT -m udp -p udp --dport 65000:65200 -j ACCEPT

And I just tried setting passivePortRange to that range and it still didn't
work. netstat showed that port listening and it still didn't work even
though vsftpd on same machine works fine with those ports. Just checked and
I can login from same machine so it is firewall issue... Anyone has any
ideas on how to fix that?

Thank you,

Slava Yanson
Positive Blue, LLC

web: www.positiveblue.com
tel: (323) 963-4787
aim/yahoo/skype: urbansoot

http://www.LinuxDecals.com/


On Thu, Sep 17, 2009 at 4:39 PM, Steve Steiner (listsin) <
listsin at integrateddevcorp.com> wrote:

>
> On Sep 17, 2009, at 7:29 PM, Slava Yanson wrote:
>
> It just doesn't want to go past PASV. Spent past 3 hours trying to figure
> this one out. Any help is appreciated.
>
>
> Since PASV mode goes to higher ports (> 1023), is it possible that a
> firewall's at the server getting in the way?
>
> http://slacksite.com/other/ftp.html#passive
>
> It looks like it's just timing out.
>
> S
>
>
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090917/7fc667d2/attachment.html>

From stephen at thorne.id.au  Thu Sep 17 18:30:03 2009
From: stephen at thorne.id.au (Stephen Thorne)
Date: Fri, 18 Sep 2009 10:30:03 +1000
Subject: [Twisted-Python] Twisted FTP server fails on PASV
In-Reply-To: <e5b8dac40909171711m502e0a63p76bf74763e9bfaef@mail.gmail.com>
References: <e5b8dac40909171629k72bb5d76j7801c1cbd7450838@mail.gmail.com>
	<ECF82A50-535E-4A0C-8012-9FB088FB39B9@integrateddevcorp.com>
	<e5b8dac40909171711m502e0a63p76bf74763e9bfaef@mail.gmail.com>
Message-ID: <20090918003003.GG7151@thorne.id.au>

On 2009-09-17, Slava Yanson wrote:
> Here is part of ipconfig file:
> 
> -A RH-Firewall-1-INPUT -m tcp -p tcp --dport 65000:65200 -j ACCEPT
> -A RH-Firewall-1-INPUT -m udp -p udp --dport 65000:65200 -j ACCEPT
> 
> And I just tried setting passivePortRange to that range and it still didn't
> work. netstat showed that port listening and it still didn't work even
> though vsftpd on same machine works fine with those ports. Just checked and
> I can login from same machine so it is firewall issue... Anyone has any
> ideas on how to fix that?

Yes, the best thing to do is to add a -j LOG rule to your firewall and
then look at /var/log/kernel in order to see what packets are being
blocked.

I would combine that approach with tcpdump to see what you can do to
resolve this.

-- 
Regards,
Stephen Thorne
Development Engineer
NetBox Blue - 1300 737 060



From ltaylor.volks at gmail.com  Thu Sep 17 19:06:06 2009
From: ltaylor.volks at gmail.com (Lucas Taylor)
Date: Thu, 17 Sep 2009 20:06:06 -0500
Subject: [Twisted-Python] Seeking advice on use of Perspective Broker
In-Reply-To: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>
References: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>
Message-ID: <4AB2DCFE.6060306@gmail.com>

On 9/17/09 1:31 PM, Arthur Pemberton wrote:
>  2) How easy it to package Twisted for distribution on Windows system
> (which would be inevitable)

You can use py2exe to distribute your application as one or more
executables. It is also possible to create NT services using the
win32all package.

Lucas Taylor



From pemboa at gmail.com  Fri Sep 18 01:57:25 2009
From: pemboa at gmail.com (Arthur Pemberton)
Date: Fri, 18 Sep 2009 02:57:25 -0500
Subject: [Twisted-Python] Seeking advice on use of Perspective Broker
In-Reply-To: <4AB2DCFE.6060306@gmail.com>
References: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>
	<4AB2DCFE.6060306@gmail.com>
Message-ID: <16de708d0909180057t3a1b4237y8877818aebc065d2@mail.gmail.com>

On Thu, Sep 17, 2009 at 8:06 PM, Lucas Taylor <ltaylor.volks at gmail.com> wrote:
> On 9/17/09 1:31 PM, Arthur Pemberton wrote:
>> 2) How easy it to package Twisted for distribution on Windows system
>> (which would be inevitable)
>
> You can use py2exe to distribute your application as one or more
> executables. It is also possible to create NT services using the
> win32all package.
>


I'm glad you brought that up, does py2exe work well with Twisted?

-- 
Fedora 10
(www.pembo13.com)



From lvh at laurensvh.be  Fri Sep 18 06:50:06 2009
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Fri, 18 Sep 2009 14:50:06 +0200
Subject: [Twisted-Python] Reviewer who understands basic numeric algorithms
	wanted
Message-ID: <cedc0c090909180550l71a16866mbd383aa5d6ca19ad@mail.gmail.com>

Hello :-)



twisted.positioning has just (read: last night) grown a new module,
called util, which has two functions I needed for statistical
analysis: the error function (erf) and the inverse normal cumulative
distribution function (Phi).

As most of you on this mailing list probably know, code headed for
trunk needs to be reviewed. The reason I need to ask for this
specifically is because the reviewer does not need to know anything
about Twisted, but does need some experience with how numerical
algorithms work -- and that's about the opposite of most Twisted
reviewers ;-)

The default is to attempt to use scipy's implementation (which is
hopefully faster), but otherwise fall back to a pure Python
implementation (which from my tests is still way more than fast
enough).

The implementations rely on Chebyshev polynomial interpolation. The
error function is a pretty simple one, the inverse normal cdf is
slightly harder (three parts: the center is a simple rational, the
'tails' are rationals expressed in a linearizing parameter). There are
two things that make this easier:

1. Other people have done similar things, and said coefficients can be
looked up in other places (I'm not the first person to do the math --
I'm just the first person to implement both in Python with a shared
Horner scheme evaluator, apparently)
2. It can be shown to be accurate by comparing the results at random
points with scipy's reference implementation if we do it for 10**5 or
10**6 points or so -- there's already an automated unit test that does
it for a much smaller number

If you're not 100% sure you're up to it from just seeing the code, I
can also talk you through it and show how I got there :-)

It might be more useful to create a separate ticket for this piece of
code for reviewing purposes, if anyone else feels that's the case I'll
make the ticket.

People who are interested: you can reply to this mail, mail me
personally, or contact me on freenode (nick: lvh).

(Oh, and before someone tells me I'm reinventing the wheel: yes, but
not really -- the only commonly available python implementation is
Scipy, that's *already* used as the default, and we do need something
in case of no scipy (adding a dependency just because of one function
on all of scipy is not exactly good either) and the only other simpler
alternative would be a giant LUT with linear interpolation which would
have been *much* worse near the edges of the interval of invncdf,
which also happen to be the *interesting* bits of that function...)

tia
lvh



From lvh at laurensvh.be  Fri Sep 18 08:01:24 2009
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Fri, 18 Sep 2009 16:01:24 +0200
Subject: [Twisted-Python] Reviewer who understands basic numeric
	algorithms wanted
In-Reply-To: <cedc0c090909180550l71a16866mbd383aa5d6ca19ad@mail.gmail.com>
References: <cedc0c090909180550l71a16866mbd383aa5d6ca19ad@mail.gmail.com>
Message-ID: <cedc0c090909180701g57aa24fdl9ab15380fb59f69a@mail.gmail.com>

Oh, and I might drop the Scipy implementation entirely (except for
unit testing as a reference implementation). Turns out that the scipy
version, while probably being more precise (precise way beyond the
point of being interesting for most uses), is a good deal slower than
approximation, by a factor of just over 21.

http://paste.pocoo.org/show/140351/

tia
lvh



From gabriel.rossetti at arimaz.com  Fri Sep 18 08:23:47 2009
From: gabriel.rossetti at arimaz.com (Gabriel Rossetti)
Date: Fri, 18 Sep 2009 16:23:47 +0200
Subject: [Twisted-Python] What is the difference in between reactor.running
	and reactor._stopped
Message-ID: <4AB397F3.8090101@arimaz.com>

Hello,

I tried using reactor.running for a test, to not try to stop the reactor 
if it's already stopped, but it doesn't work. If I use reactor._stopped 
instead, it works. I know I'm not supposed to access it sonce it is 
prefixed by the underscore, so my question is what is the difference in 
between reactor.running and reactor._stopped, and why does 
reactor.running not work as I expect (not reactor.running == 
reactor._stopped)?

Thank you, Gabriel



From dripton at ripton.net  Fri Sep 18 08:52:22 2009
From: dripton at ripton.net (David Ripton)
Date: Fri, 18 Sep 2009 07:52:22 -0700
Subject: [Twisted-Python] Seeking advice on use of Perspective Broker
In-Reply-To: <16de708d0909171539q1f2c2483vbbacd1a479c4655b@mail.gmail.com>
References: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>
	<4AB28977.2090405@gladserv.com>
	<16de708d0909171539q1f2c2483vbbacd1a479c4655b@mail.gmail.com>
Message-ID: <20090918145222.GA21764@vidar.dreamhost.com>

On 2009.09.17 17:39:17 -0500, Arthur Pemberton wrote:
> On Thu, Sep 17, 2009 at 2:09 PM, Brett Sheffield <brett at gladserv.com> wrote:
> > Arthur Pemberton wrote:
> >> 1) Is the Twisted Matrix book published by Orielly relevant ie. updated enough?
> >
> > Yes. I just read it and it has excellent Perspective Broker examples in
> > chapters 5 & 6 which got me to a flying start recently.  Obviously
> > you'll want to read the online docs too.
> >
> > It doesn't cover twisted.web and nevoew very well because the API was
> > still shifting about then, but the rest seems pretty good. It was
> > published in 2006.
> 
> I know it was published in 2006, but 3 years can be a long time in the
> computing industry, but you've convinced me that its worth a ready. Is

PB has changed very little lately.  My PB-using project started in 2003.
The last time I remember changing something to sync with a Twisted
change was in late 2003, when I switched my from using the old cred API
to the new cred API.  Since then it's been 100% boringly
backward-compatible.  If you want stable documentation and the most
examples and a very strong likelihood that the API won't change
underneath you, PB is your best Twisted RPC option.

(Other Twisted RPC options include AMP, Foolscap, and txprotobuf.  I
recommend learning PB first because it has the most examples and docs so
it's the easiest to learn.  If you end up using one of the others to get
better security or portability or whatever, it'll be pretty easy to
learn because the Twisted fundamentals carry over.)

-- 
David Ripton    dripton at ripton.net



From markv at lumierevfx.com  Fri Sep 18 08:56:23 2009
From: markv at lumierevfx.com (Mark Visser)
Date: Fri, 18 Sep 2009 10:56:23 -0400
Subject: [Twisted-Python] Seeking advice on use of Perspective Broker
In-Reply-To: <20090918145222.GA21764@vidar.dreamhost.com>
References: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>	<4AB28977.2090405@gladserv.com>	<16de708d0909171539q1f2c2483vbbacd1a479c4655b@mail.gmail.com>
	<20090918145222.GA21764@vidar.dreamhost.com>
Message-ID: <4AB39F97.1020104@lumierevfx.com>

Another happy PB user here, and I used the O'Reilly book.

In fact, PB has changed so little that it's still using old-style 
classes. That bit us in the ass a couple times (no super!).

David Ripton wrote:
> On 2009.09.17 17:39:17 -0500, Arthur Pemberton wrote:
>   
>> On Thu, Sep 17, 2009 at 2:09 PM, Brett Sheffield <brett at gladserv.com> wrote:
>>     
>>> Arthur Pemberton wrote:
>>>       
>>>>  1) Is the Twisted Matrix book published by Orielly relevant ie. updated enough?
>>>>         
>>> Yes.  I just read it and it has excellent Perspective Broker examples in
>>> chapters 5 & 6 which got me to a flying start recently.   Obviously
>>> you'll want to read the online docs too.
>>>
>>> It doesn't cover twisted.web and nevoew very well because the API was
>>> still shifting about then, but the rest seems pretty good.  It was
>>> published in 2006.
>>>       
>> I know it was published in 2006, but 3 years can be a long time in the
>> computing industry, but you've convinced me that its worth a ready. Is
>>     
>
> PB has changed very little lately.  My PB-using project started in 2003.
> The last time I remember changing something to sync with a Twisted
> change was in late 2003, when I switched my from using the old cred API
> to the new cred API.  Since then it's been 100% boringly
> backward-compatible.  If you want stable documentation and the most
> examples and a very strong likelihood that the API won't change
> underneath you, PB is your best Twisted RPC option.
>
> (Other Twisted RPC options include AMP, Foolscap, and txprotobuf.  I
> recommend learning PB first because it has the most examples and docs so
> it's the easiest to learn.  If you end up using one of the others to get
> better security or portability or whatever, it'll be pretty easy to
> learn because the Twisted fundamentals carry over.)
>
>   


-- 
Mark Visser, Software Director
Lumire VFX
Email: markv at lumierevfx.com
Phone: +1-514-316-1080 x3030




From gx1986 at mail.ustc.edu.cn  Fri Sep 18 09:48:36 2009
From: gx1986 at mail.ustc.edu.cn (gx1986 at mail.ustc.edu.cn)
Date: Fri, 18 Sep 2009 23:48:36 +0800 (CST)
Subject: [Twisted-Python] hang when using twisted
Message-ID: <8698335.3591253288916465.JavaMail.coremail@mailweb>



I met some problem when writing twisted.

The code is

1 #! /usr/bin/python 
2 # fileName remoteCopyFile 
3 from twisted.internet import protocol , reactor 
4 import os 
5 import updateCurrentIPList 
6 import time 
7
8 PORT = 7777 
9
10 class TSClientProtocol(protocol.Protocol): 
11     def sendData(self): 
12         path = '/usr/local/'+self.factory.filename 
13         if os.path.isfile(path): 
14             f = open(path,'rb') 
15             data = f.read() 
16             f.close() 
17             self.transport.write("filename="+self.factory.filename+'=') 
18             self.transport.write(data) 
19             self.transport.write('EOF') 
20         else: 
21             self.transport.loseConnection() 
22
23     def connectionMade(self): 
24             self.sendData()
25             
26 
27     def dataReceived(self,data): 
28             if data == 'EOF': 
29             print 'finished'	
30             self.transport.loseConnection()	
31
32
33 class TSClientFactory(protocol.ClientFactory): 
34     def __init__(self,filename): 
35            self.filename = filename 
36            protocol = TSClientProtocol 
37            clientConnectionLost = clientConnectionFailed = lambda self,connector,reason:reactor.stop() 
38 
39     def remoteCopyFile(HOST,filename = '4'): 
40            reactor.connectTCP(HOST,PORT,TSClientFactory(filename)) 
41            reactor.run(installSignalHandlers=0) 
42            updateCurrentIPList.updateCurrentIPList(HOST) 
43            reactor.connectTCP(HOST,PORT,TSClientFactory('currentIP')) 
44            reactor.run(installSignalHandlers=0) 
45            
46
47 if __name__ == '__main__': 
48     remoteCopyFile('127.0.0.1')


The program print two "finished",then hang.
If i delete the line 40 and 41  or delete the line 43 and 44 ,the program become good.
whether can't we use two "reactor.run()" in one function? why?
Thank you! 



From exarkun at twistedmatrix.com  Fri Sep 18 10:05:57 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 18 Sep 2009 16:05:57 -0000
Subject: [Twisted-Python] hang when using twisted
In-Reply-To: <8698335.3591253288916465.JavaMail.coremail@mailweb>
References: <8698335.3591253288916465.JavaMail.coremail@mailweb>
Message-ID: <20090918160557.8482.1900050988.divmod.xquotient.51@localhost.localdomain>

On 03:48 pm, gx1986 at mail.ustc.edu.cn wrote:
>
>
>I met some problem when writing twisted.
>
>The code is
>
>[snip]
>38
>39     def remoteCopyFile(HOST,filename = '4'):
>40            reactor.connectTCP(HOST,PORT,TSClientFactory(filename))
>41            reactor.run(installSignalHandlers=0)
>42            updateCurrentIPList.updateCurrentIPList(HOST)
>43 
>reactor.connectTCP(HOST,PORT,TSClientFactory('currentIP'))
>44            reactor.run(installSignalHandlers=0)
>45
>[snip]
>
>The program print two "finished",then hang.
>If i delete the line 40 and 41  or delete the line 43 and 44 ,the 
>program become good.
>whether can't we use two "reactor.run()" in one function? why?
>Thank you!

Yes, you cannot call reactor.run() twice (anywhere in the same program - 
whether within one function or otherwise).  This is an minor 
implementation limitation which could fairly easily be lifted if anyone 
really wanted to.  However, there's not a lot of reason to bother. 
Instead of stopping the reactor after your first task and then starting 
it for your second task, just start your second task when the first one 
is done - don't stop the reactor and then start it again.  When you're 
done with everything and ready to exit, that's when you should stop the 
reactor.

Jean-Paul



From exarkun at twistedmatrix.com  Fri Sep 18 10:07:40 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 18 Sep 2009 16:07:40 -0000
Subject: [Twisted-Python] Reviewer who understands basic
	numeric	algorithms wanted
In-Reply-To: <cedc0c090909180550l71a16866mbd383aa5d6ca19ad@mail.gmail.com>
References: <cedc0c090909180550l71a16866mbd383aa5d6ca19ad@mail.gmail.com>
Message-ID: <20090918160740.8482.2117785321.divmod.xquotient.54@localhost.localdomain>

On 12:50 pm, lvh at laurensvh.be wrote:
>Hello :-)
>
>twisted.positioning has just (read: last night) grown a new module,
>called util, which has two functions I needed for statistical
>analysis: the error function (erf) and the inverse normal cumulative
>distribution function (Phi).

Please think up a better name than "util". :)  How about "statmath" or 
"errorstats" or something along those lines?

Jean-Paul



From lvh at laurensvh.be  Fri Sep 18 10:17:00 2009
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Fri, 18 Sep 2009 18:17:00 +0200
Subject: [Twisted-Python] Reviewer who understands basic numeric
	algorithms wanted
In-Reply-To: <20090918160740.8482.2117785321.divmod.xquotient.54@localhost.localdomain>
References: <cedc0c090909180550l71a16866mbd383aa5d6ca19ad@mail.gmail.com>
	<20090918160740.8482.2117785321.divmod.xquotient.54@localhost.localdomain>
Message-ID: <cedc0c090909180917v7952c7a5rcb77880c16492ff1@mail.gmail.com>

On Fri, Sep 18, 2009 at 6:07 PM,  <exarkun at twistedmatrix.com> wrote:
> On 12:50 pm, lvh at laurensvh.be wrote:
>>Hello :-)

> Please think up a better name than "util". :) How about "statmath" or
> "errorstats" or something along those lines?

This sounds like a good idea. While we're on that topic, regarding
package location: perhaps it should be in twisted.util, not
twisted.positioning? It's not positioning-specific, I just happen to
be the first guy that wants it.


> Jean-Paul
Laurens



From exarkun at twistedmatrix.com  Fri Sep 18 10:21:17 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 18 Sep 2009 16:21:17 -0000
Subject: [Twisted-Python] What is the difference in
	between	reactor.running and reactor._stopped
In-Reply-To: <4AB397F3.8090101@arimaz.com>
References: <4AB397F3.8090101@arimaz.com>
Message-ID: <20090918162117.8482.1774374040.divmod.xquotient.59@localhost.localdomain>

On 02:23 pm, gabriel.rossetti at arimaz.com wrote:
>Hello,
>
>I tried using reactor.running for a test, to not try to stop the 
>reactor
>if it's already stopped, but it doesn't work. If I use reactor._stopped
>instead, it works. I know I'm not supposed to access it sonce it is
>prefixed by the underscore, so my question is what is the difference in
>between reactor.running and reactor._stopped, and why does
>reactor.running not work as I expect (not reactor.running ==
>reactor._stopped)?

reactor.running is really only provided for backwards compatibility.  It 
was never intended to be public.  It has bizarre semantics which you can 
read about in its unit tests:

http://twistedmatrix.com/trac/browser/trunk/twisted/internet/test/test_core.py

What you would almost certainly rather do is change your code not to 
rely on it.  Why do you find yourself needing to ask the reactor if you 
have previously asked it to stop?  Generally, your code should be able 
to keep track of that itself.

Jean-Paul



From exarkun at twistedmatrix.com  Fri Sep 18 10:25:26 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 18 Sep 2009 16:25:26 -0000
Subject: [Twisted-Python] Reviewer who understands basic
	numeric	algorithms wanted
In-Reply-To: <cedc0c090909180917v7952c7a5rcb77880c16492ff1@mail.gmail.com>
References: <cedc0c090909180550l71a16866mbd383aa5d6ca19ad@mail.gmail.com>
	<20090918160740.8482.2117785321.divmod.xquotient.54@localhost.localdomain>
	<cedc0c090909180917v7952c7a5rcb77880c16492ff1@mail.gmail.com>
Message-ID: <20090918162526.8482.213864905.divmod.xquotient.64@localhost.localdomain>

On 04:17 pm, lvh at laurensvh.be wrote:
>On Fri, Sep 18, 2009 at 6:07 PM,  <exarkun at twistedmatrix.com> wrote:
>>On 12:50 pm, lvh at laurensvh.be wrote:
>>>Hello :-)
>
>>Please think up a better name than "util". :) How about "statmath" or
>>"errorstats" or something along those lines?
>
>This sounds like a good idea. While we're on that topic, regarding
>package location: perhaps it should be in twisted.util, not
>twisted.positioning? It's not positioning-specific, I just happen to
>be the first guy that wants it.

Actually, now that you mention it, how about also making it private in 
twisted.positioning? :)

If it turns out Twisted Web or Twisted Names or something eventually 
needs this functionality, then we should think about moving it into 
twisted.python (I think that's what you meant when you said 
twisted.util).  Until then, though, there's not much reason to expose 
what should just be an implementation detail as a new public interface.

Twisted is not a stats package. :)

Jean-Paul



From david.yoakley at gmail.com  Fri Sep 18 11:01:11 2009
From: david.yoakley at gmail.com (David Yoakley)
Date: Fri, 18 Sep 2009 12:01:11 -0500
Subject: [Twisted-Python] Using reactor with multiple processes
Message-ID: <90be4d570909181001r36abb6a4s4489644b10e042b1@mail.gmail.com>

I promised a follow-up on what we found so here it is.  As Phil
indicated prior and is now clear to us, twisted is not designed to be
fork safe.  But as I considered patching it to set up all state when
the reactor is started then I began to worry about whether I was
really going to be happy with using twisted in a python multiprocess
architecture since its ultimately not twisted aware and thus there are
probably going to be blocking issues with using any of cool
multiprocess abstractions.  I think we were just going in the wrong
direction, attracted by a shiny new thing.  To make a long story
short, we think making twisted work with python multiprocess package
is probably a dead end.  The abstractions are nice and maybe the right
direction but under the hood its just not going to work.

Instead, we implemented a simple framework using twisted
PerspectiveBroker (pb) where we spawn processes with python
subprocess.Popen and use PB remote calls to manage the processes.  Its
now working well and is very simple.

There are other aspects we didn't think about that are actually
working out better for us with this PB based framework.  Mostly, our
child processes are much less coupled to the parent; they are able to
be launched on their own from a command line for unit tests and such
but each child is an independent server (implementing
pb.PBServerFactory).  They can be launched from our main process
(implementing pb.PBClientFactory) in production and any number of
other ways during development and test.  Similarly, we could allocate
the children even to separate machines if we wanted to since their
connections are via tcp.  The last thing is more subtle.  We are now
not tempted to use tighter synchronization (more coupling) such as
shared memory or other mechanisms offered by python multiprocess in
cases where its not strictly necessary.   The processes all share
configuration (such as child tcp port assignments) by having the
parent send on the command line,  an absolute path to a common config
file when the process is launched and after that the children carry on
pretty much independently, occasionally collaborating with each other
and with the parent through remote calls as needed.  When its time for
the application to go away, the parent sends each child a stop command
which blocks the parents shutdown completion (in the sense that its
synchronous and the parent waits on the response, but NOT in the sense
that any other logical twisted threads on the parent get blocked)
until the child responds or times out.

Cheers,
David Yoakley



From gx1986 at mail.ustc.edu.cn  Fri Sep 18 11:02:38 2009
From: gx1986 at mail.ustc.edu.cn (gx1986 at mail.ustc.edu.cn)
Date: Sat, 19 Sep 2009 01:02:38 +0800 (CST)
Subject: [Twisted-Python] What is the difference in
	between	reactor.running and reactor._stopped
In-Reply-To: <20090918162117.8482.1774374040.divmod.xquotient.59@localhost.localdomain>
References: <20090918162117.8482.1774374040.divmod.xquotient.59@localhost.localdomain>
	<4AB397F3.8090101@arimaz.com>
Message-ID: <16170408.5481253293358726.JavaMail.coremail@mailweb>


Thank you for your instruct! I am a new people in twisted,so I still have another problem.
If i transfer a lot of data(a big file),program will hang when transmission finished.
If transfering a few words ,program will give me another chance to input.
what's the reason about this?

> -----Original E-mail-----
> From: exarkun at twistedmatrix.com
> Sent Time: 2009-9-19 0:21:17
> To: "Twisted general discussion" <twisted-python at twistedmatrix.com>
> Cc: 
> Subject: Re: [Twisted-Python] What is the difference in
	between	reactor.running and reactor._stopped
> 
> On 02:23 pm, gabriel.rossetti at arimaz.com wrote:
> >Hello,
> >
> >I tried using reactor.running for a test, to not try to stop the 
> >reactor
> >if it's already stopped, but it doesn't work. If I use reactor._stopped
> >instead, it works. I know I'm not supposed to access it sonce it is
> >prefixed by the underscore, so my question is what is the difference in
> >between reactor.running and reactor._stopped, and why does
> >reactor.running not work as I expect (not reactor.running ==
> >reactor._stopped)?
> 
> reactor.running is really only provided for backwards compatibility.  It 
> was never intended to be public.  It has bizarre semantics which you can 
> read about in its unit tests:
> 
> http://twistedmatrix.com/trac/browser/trunk/twisted/internet/test/test_core.py
> 
> What you would almost certainly rather do is change your code not to 
> rely on it.  Why do you find yourself needing to ask the reactor if you 
> have previously asked it to stop?  Generally, your code should be able 
> to keep track of that itself.
> 
> Jean-Paul
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From psanchez at colcan.ca  Fri Sep 18 11:27:32 2009
From: psanchez at colcan.ca (Pedro I. Sanchez)
Date: Fri, 18 Sep 2009 13:27:32 -0400
Subject: [Twisted-Python] An XMPP client with SSL support
In-Reply-To: <20090917203600.GA41744@ik.nu>
References: <1219872700.10045.29.camel@pcard0ze.ca.nortel.com>	<1253198023.5546.9.camel@dwaal>
	<20090917203600.GA41744@ik.nu>
Message-ID: <4AB3C304.2040903@colcan.ca>

Ralph Meijer wrote:
> On Thu, Sep 17, 2009 at 04:33:43PM +0200, Ralph Meijer wrote:
>> On Wed, 2008-08-27 at 17:31 -0400, Pedro Sanchez wrote:
> 
> Oh, ahum. That's quite the latency...
> 
Thanks for the answer nevertheless. I'm still around :-)

-- 
Pedro



From esteve at sindominio.net  Fri Sep 18 13:10:12 2009
From: esteve at sindominio.net (Esteve Fernandez)
Date: Fri, 18 Sep 2009 21:10:12 +0200
Subject: [Twisted-Python] new contributors
In-Reply-To: <d9047f780909111910t35e44d10p8e801d54b772e74e@mail.gmail.com>
References: <d9047f780909101735q31a1231ib82c092802da227@mail.gmail.com>
	<20090911143505.7485.1574338111.divmod.xquotient.644@localhost.localdomain>
	<d9047f780909111910t35e44d10p8e801d54b772e74e@mail.gmail.com>
Message-ID: <200909182110.12302.esteve@sindominio.net>

Hi

sorry for the delay

On Saturday 12 September 2009 04:10:24 Glyph Lefkowitz wrote:
> > I also offered commit access to Esteve recently.  Esteve, want to send
> > me your key, too?
>
> https://launchpad.net/~esteve/+sshkeys

Wow, thanks! However, if I'm sincere, I can't promise I'll always be able 
dedicate time to Twisted (i.e. reply to the mailing lists, review tickets, 
fix bugs, etc.). If that's ok, I'll gladly accept the honor :-)

Anyway, I just wanted to be honest.

Cheers.




From exarkun at twistedmatrix.com  Fri Sep 18 13:10:26 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 18 Sep 2009 19:10:26 -0000
Subject: [Twisted-Python] What is the difference in
	between	reactor.running and reactor._stopped
In-Reply-To: <16170408.5481253293358726.JavaMail.coremail@mailweb>
References: <20090918162117.8482.1774374040.divmod.xquotient.59@localhost.localdomain>
	<4AB397F3.8090101@arimaz.com>
	<16170408.5481253293358726.JavaMail.coremail@mailweb>
Message-ID: <20090918191026.16892.1173356605.divmod.xquotient.2@localhost.localdomain>

On 05:02 pm, gx1986 at mail.ustc.edu.cn wrote:
>
>Thank you for your instruct! I am a new people in twisted,so I still 
>have another problem.
>If i transfer a lot of data(a big file),program will hang when 
>transmission finished.
>If transfering a few words ,program will give me another chance to 
>input.
>what's the reason about this?

Hi,

I don't quite understand your message.  I'm not sure how it relates to 
Gabriel's question or my answer to it.  Perhaps you could start a new 
thread and provide more details about your program, what it does, how 
you expect it to behave, and how it is actually behaving?

Jean-Paul



From dripton at ripton.net  Fri Sep 18 13:27:22 2009
From: dripton at ripton.net (David Ripton)
Date: Fri, 18 Sep 2009 12:27:22 -0700
Subject: [Twisted-Python] Using reactor with multiple processes
In-Reply-To: <90be4d570909181001r36abb6a4s4489644b10e042b1@mail.gmail.com>
References: <90be4d570909181001r36abb6a4s4489644b10e042b1@mail.gmail.com>
Message-ID: <20090918192722.GA2487@vidar.dreamhost.com>

On 2009.09.18 12:01:11 -0500, David Yoakley wrote:
> Instead, we implemented a simple framework using twisted
> PerspectiveBroker (pb) where we spawn processes with python
> subprocess.Popen and use PB remote calls to manage the processes.  Its
> now working well and is very simple.

Sounds great.  Thanks for the update.

I just want to mention that I mistrust the subprocess module because of
lots of personal experience with http://bugs.python.org/issue1731717 .
If you see weird intermittent failures to spawn processes, consider
switching to reactor.spawnProcess.  (IMX such failures are common with
Python 2.4, less common with Python 2.5 or 2.6.  So if you're not
shackled to^W^W using RHEL or some other archaic piece of^W^W^W
Enterprise-friendly distribution, you can probably safely ignore this
paragraph.)

-- 
David Ripton    dripton at ripton.net



From gx1986 at mail.ustc.edu.cn  Fri Sep 18 20:33:07 2009
From: gx1986 at mail.ustc.edu.cn (gx1986 at mail.ustc.edu.cn)
Date: Sat, 19 Sep 2009 10:33:07 +0800 (CST)
Subject: [Twisted-Python] What is the difference in
	between	reactor.running and reactor._stopped
In-Reply-To: <20090918191026.16892.1173356605.divmod.xquotient.2@localhost.localdomain>
References: <20090918191026.16892.1173356605.divmod.xquotient.2@localhost.localdomain>
	<20090918162117.8482.1774374040.divmod.xquotient.59@localhost.localdomain>
	<4AB397F3.8090101@arimaz.com>
	<16170408.5481253293358726.JavaMail.coremail@mailweb>
Message-ID: <24928047.13991253327587570.JavaMail.coremail@mailweb>

Ok,let me express what i want to do clearly.
I use twisted to transfer a file.What i do is to open a file in client,then transfer it by TCP.Server received it and write it into a file.
The filename in "reactor.connectTCP(HOST,PORT,TSClientFactory(filename))" is  what i want to transfer.
If i want to transfer two file,what i do is to write "reactor.connectTCP(HOST,PORT,TSClientFactory(filename))  reactor.run(installSignalHandlers=0)" twice.But this will be error which you have told me. Now how could i to solve this problem?

Meanwhile,if transfered file is big,the server's "dataReceived" function will run several times to receive all the data.If i transfer all of files one time,using "reactor.connectTCP(HOST,PORT,TSClientFactory(filenameList))". It will be hard to distinguish these different files,because "dataReceived" just receive.


> -----Original E-mail-----
> From: exarkun at twistedmatrix.com
> Sent Time: 2009-9-19 3:10:26
> To: "Twisted general discussion" <twisted-python at twistedmatrix.com>
> Cc: 
> Subject: Re: [Twisted-Python] What is the difference in
	between	reactor.running and reactor._stopped
> 
> On 05:02 pm, gx1986 at mail.ustc.edu.cn wrote:
> >
> >Thank you for your instruct! I am a new people in twisted,so I still 
> >have another problem.
> >If i transfer a lot of data(a big file),program will hang when 
> >transmission finished.
> >If transfering a few words ,program will give me another chance to 
> >input.
> >what's the reason about this?
> 
> Hi,
> 
> I don't quite understand your message.  I'm not sure how it relates to 
> Gabriel's question or my answer to it.  Perhaps you could start a new 
> thread and provide more details about your program, what it does, how 
> you expect it to behave, and how it is actually behaving?
> 
> Jean-Paul
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From gx1986 at mail.ustc.edu.cn  Fri Sep 18 20:50:58 2009
From: gx1986 at mail.ustc.edu.cn (gx1986 at mail.ustc.edu.cn)
Date: Sat, 19 Sep 2009 10:50:58 +0800 (CST)
Subject: [Twisted-Python] What is the difference in
	between	reactor.running and reactor._stopped
In-Reply-To: <20090918191026.16892.1173356605.divmod.xquotient.2@localhost.localdomain>
References: <20090918191026.16892.1173356605.divmod.xquotient.2@localhost.localdomain>
	<20090918162117.8482.1774374040.divmod.xquotient.59@localhost.localdomain>
	<4AB397F3.8090101@arimaz.com>
	<16170408.5481253293358726.JavaMail.coremail@mailweb>
Message-ID: <27815976.14891253328658108.JavaMail.coremail@mailweb>

Ok,let me express what i want to do clearly.
I use twisted to transfer a file.What i do is to open a file in client,then transfer it by TCP.Server received it and write it into a file.
The filename in "reactor.connectTCP(HOST,PORT,TSClientFactory(filename))" is  what i want to transfer.
If i want to transfer two file,what i do is to write "reactor.connectTCP(HOST,PORT,TSClientFactory(filename))  reactor.run(installSignalHandlers=0)" twice.But this will be error which you have told me. Now how could i to solve this problem?

Meanwhile,if transfered file is big,the server's "dataReceived" function will  be called several times to receive all the data.If i transfer all of files one time,using "reactor.connectTCP(HOST,PORT,TSClientFactory(filenameList))". It will be hard to distinguish these different files in server,because "dataReceived" just receive.Could you have some way in twisted to notice server the end of previous file and to receive a new file by recalling "dataReceived" function , instead of receiving all the data together.



> -----Original E-mail-----
> From: exarkun at twistedmatrix.com
> Sent Time: 2009-9-19 3:10:26
> To: "Twisted general discussion" <twisted-python at twistedmatrix.com>
> Cc: 
> Subject: Re: [Twisted-Python] What is the difference in
	between	reactor.running and reactor._stopped
> 
> On 05:02 pm, gx1986 at mail.ustc.edu.cn wrote:
> >
> >Thank you for your instruct! I am a new people in twisted,so I still 
> >have another problem.
> >If i transfer a lot of data(a big file),program will hang when 
> >transmission finished.
> >If transfering a few words ,program will give me another chance to 
> >input.
> >what's the reason about this?
> 
> Hi,
> 
> I don't quite understand your message.  I'm not sure how it relates to 
> Gabriel's question or my answer to it.  Perhaps you could start a new 
> thread and provide more details about your program, what it does, how 
> you expect it to behave, and how it is actually behaving?
> 
> Jean-Paul
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From exarkun at twistedmatrix.com  Sat Sep 19 10:06:37 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sat, 19 Sep 2009 16:06:37 -0000
Subject: [Twisted-Python] What is the difference in
	between	reactor.running and reactor._stopped
In-Reply-To: <24928047.13991253327587570.JavaMail.coremail@mailweb>
References: <20090918191026.16892.1173356605.divmod.xquotient.2@localhost.localdomain>
	<20090918162117.8482.1774374040.divmod.xquotient.59@localhost.localdomain>
	<4AB397F3.8090101@arimaz.com>
	<16170408.5481253293358726.JavaMail.coremail@mailweb>
	<24928047.13991253327587570.JavaMail.coremail@mailweb>
Message-ID: <20090919160637.18975.1382831204.divmod.xquotient.18@localhost.localdomain>

On 02:33 am, gx1986 at mail.ustc.edu.cn wrote:
>Ok,let me express what i want to do clearly.
>I use twisted to transfer a file.What i do is to open a file in 
>client,then transfer it by TCP.Server received it and write it into a 
>file.
>The filename in 
>"reactor.connectTCP(HOST,PORT,TSClientFactory(filename))" is  what i 
>want to transfer.
>If i want to transfer two file,what i do is to write 
>"reactor.connectTCP(HOST,PORT,TSClientFactory(filename)) 
>reactor.run(installSignalHandlers=0)" twice.But this will be error 
>which you have told me. Now how could i to solve this problem?

You have to solve it by only calling reactor.run once.
>
>Meanwhile,if transfered file is big,the server's "dataReceived" 
>function will run several times to receive all the data.If i transfer 
>all of files one time,using 
>"reactor.connectTCP(HOST,PORT,TSClientFactory(filenameList))". It will 
>be hard to distinguish these different files,because "dataReceived" 
>just receive.

You have to use a protocol which lets you distinguish between different 
files.  I'm not sure what "TS" is so I can't make any specific 
suggestions.

Another possibility is to keep using multiple connections.  You can call 
reactor.connectTCP as many times as you want.  It's only reactor.run 
that can only be called once.

Jean-Paul



From gx1986 at mail.ustc.edu.cn  Sat Sep 19 21:03:07 2009
From: gx1986 at mail.ustc.edu.cn (gx1986 at mail.ustc.edu.cn)
Date: Sun, 20 Sep 2009 11:03:07 +0800 (CST)
Subject: [Twisted-Python] What is the difference
	in	between	reactor.running and reactor._stopped
In-Reply-To: <20090919160637.18975.1382831204.divmod.xquotient.18@localhost.localdomain>
References: <20090919160637.18975.1382831204.divmod.xquotient.18@localhost.localdomain>
	<20090918191026.16892.1173356605.divmod.xquotient.2@localhost.localdomain>
	<20090918162117.8482.1774374040.divmod.xquotient.59@localhost.localdomain>
	<4AB397F3.8090101@arimaz.com>
	<16170408.5481253293358726.JavaMail.coremail@mailweb>
	<24928047.13991253327587570.JavaMail.coremail@mailweb>
Message-ID: <9866304.55721253415787525.JavaMail.coremail@mailweb>

I will try.
Thank you very much!


> -----Original E-mail-----
> From: exarkun at twistedmatrix.com
> Sent Time: 2009-9-20 0:06:37
> To: "Twisted general discussion" <twisted-python at twistedmatrix.com>
> Cc: 
> Subject: Re: [Twisted-Python] What is the difference in
	between	reactor.running and reactor._stopped
> 
> On 02:33 am, gx1986 at mail.ustc.edu.cn wrote:
> >Ok,let me express what i want to do clearly.
> >I use twisted to transfer a file.What i do is to open a file in 
> >client,then transfer it by TCP.Server received it and write it into a 
> >file.
> >The filename in 
> >"reactor.connectTCP(HOST,PORT,TSClientFactory(filename))" is  what i 
> >want to transfer.
> >If i want to transfer two file,what i do is to write 
> >"reactor.connectTCP(HOST,PORT,TSClientFactory(filename)) 
> >reactor.run(installSignalHandlers=0)" twice.But this will be error 
> >which you have told me. Now how could i to solve this problem?
> 
> You have to solve it by only calling reactor.run once.
> >
> >Meanwhile,if transfered file is big,the server's "dataReceived" 
> >function will run several times to receive all the data.If i transfer 
> >all of files one time,using 
> >"reactor.connectTCP(HOST,PORT,TSClientFactory(filenameList))". It will 
> >be hard to distinguish these different files,because "dataReceived" 
> >just receive.
> 
> You have to use a protocol which lets you distinguish between different 
> files.  I'm not sure what "TS" is so I can't make any specific 
> suggestions.
> 
> Another possibility is to keep using multiple connections.  You can call 
> reactor.connectTCP as many times as you want.  It's only reactor.run 
> that can only be called once.
> 
> Jean-Paul
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From exarkun at twistedmatrix.com  Sat Sep 19 22:05:18 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 20 Sep 2009 04:05:18 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1253419518.65.2017511848@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090920/350fae38/attachment-0001.html>

From ltaylor.volks at gmail.com  Sun Sep 20 09:27:21 2009
From: ltaylor.volks at gmail.com (Lucas Taylor)
Date: Sun, 20 Sep 2009 10:27:21 -0500
Subject: [Twisted-Python] Seeking advice on use of Perspective Broker
In-Reply-To: <16de708d0909180057t3a1b4237y8877818aebc065d2@mail.gmail.com>
References: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>	
	<4AB2DCFE.6060306@gmail.com>
	<16de708d0909180057t3a1b4237y8877818aebc065d2@mail.gmail.com>
Message-ID: <4AB649D9.7080509@gmail.com>

On 9/18/09 2:57 AM, Arthur Pemberton wrote:
> On Thu, Sep 17, 2009 at 8:06 PM, Lucas Taylor <ltaylor.volks at gmail.com> wrote:
>> On 9/17/09 1:31 PM, Arthur Pemberton wrote:
>>>  2) How easy it to package Twisted for distribution on Windows system
>>> (which would be inevitable)
>> You can use py2exe to distribute your application as one or more
>> executables. It is also possible to create NT services using the
>> win32all package.
>>
> 
> 
> I'm glad you brought that up, does py2exe work well with Twisted?
> 

Yes. It's generally no big deal. In some cases py2exe has trouble
finding every importable package and you need to manually specify what
it should be including. Buildbot does this (look at the 'includes'
directive to py2exe):
http://buildbot.net/trac/browser/contrib/windows/setup.py



From jessica.mckellar at gmail.com  Sun Sep 20 20:09:05 2009
From: jessica.mckellar at gmail.com (Jessica McKellar)
Date: Sun, 20 Sep 2009 22:09:05 -0400
Subject: [Twisted-Python] Boston Twisted Sprint
Message-ID: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>

Let's try this again:

The proposal was for a sprint in Boston from September 28-October 2. That
starts a week from today.

At this point:
1. There will be no funding for transportation/lodging for out of town folks
2. The location would be classrooms at MIT unless someone has an alternative
3. There will be no funding for food or snacks or drinks or anything like
that

Facts about using MIT classrooms as a Sprint location:
1. Room reservations would be for after school hours, aka after 5pm, for
weekdays.
2. Guests register their MAC address and have 14 days of wireless. It's
plausible that some of you visit MIT and have used up your free wireless. I
don't have a solution for that besides "find a different computer to
register and use".
3. The doors on campus are mostly locked at night and I won't be there to
let you in all the time. Some special doors remain unlocked. Bottom line:
you can get it and get to the rooms but it may be quite circuitous.

I'm cool with that if you're cool with that. Are you cool with that? Please
send me an e-mail off-list with:
1. if you'd attend, and if so which days
2. regardless of 1, if you believe that the sprint should be delayed until
funding/better location/more notice/whatever has a chance to happen

-jesstess
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090920/50c3c7ac/attachment-0001.html>

From listsin at integrateddevcorp.com  Sun Sep 20 20:59:40 2009
From: listsin at integrateddevcorp.com (Steve Steiner (listsin))
Date: Sun, 20 Sep 2009 22:59:40 -0400
Subject: [Twisted-Python] Boston Twisted Sprint
In-Reply-To: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
References: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
Message-ID: <08F4C3E1-5C81-4D51-ADAF-487E1DC26AEC@integrateddevcorp.com>


On Sep 20, 2009, at 10:09 PM, Jessica McKellar wrote:

> Let's try this again:
>
> The proposal was for a sprint in Boston from September 28-October 2.  
> That starts a week from today.

I'm sorry, maybe I missed something.  The last message I have on this  
list, about this event, is from July 29th wherein I indicated my  
possible Thurs->Sun availability.

Were there other subsequent messages about this event that I missed?

My search for "sprint" in my Twisted List e-mail folder only pulls up  
the message from the 29th, then yours from 10:09PM today; nothing in  
between.

Thanks,

S

P.S.  I have comments/issues/etc. about the rest of the event, but  
let's just handle one thing at a time i.e. messages about the event  
between 2009-07-29 -> present.

s




From jessica.mckellar at gmail.com  Sun Sep 20 21:23:12 2009
From: jessica.mckellar at gmail.com (Jessica McKellar)
Date: Sun, 20 Sep 2009 23:23:12 -0400
Subject: [Twisted-Python] Boston Twisted Sprint
In-Reply-To: <08F4C3E1-5C81-4D51-ADAF-487E1DC26AEC@integrateddevcorp.com>
References: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
	<08F4C3E1-5C81-4D51-ADAF-487E1DC26AEC@integrateddevcorp.com>
Message-ID: <b282a1340909202023m42101720s8beb9df15de5f074@mail.gmail.com>

To my knowledge you aren't missing e-mails. I asked jml last week about the
Sprint since I wanted to know if it was still happening and he indicated
that he was unable to organize the Sprint at this time. I then volunteered
to try and get something concrete happening, be it an on-time Sprint or be
it a delayed Sprint. A location and funding hadn't been secured by the time
I asked last week so that's why there aren't really any options for
anything.

-jesstess



On Sun, Sep 20, 2009 at 10:59 PM, Steve Steiner (listsin) <
listsin at integrateddevcorp.com> wrote:

>
> On Sep 20, 2009, at 10:09 PM, Jessica McKellar wrote:
>
> > Let's try this again:
> >
> > The proposal was for a sprint in Boston from September 28-October 2.
> > That starts a week from today.
>
> I'm sorry, maybe I missed something.  The last message I have on this
> list, about this event, is from July 29th wherein I indicated my
> possible Thurs->Sun availability.
>
> Were there other subsequent messages about this event that I missed?
>
> My search for "sprint" in my Twisted List e-mail folder only pulls up
> the message from the 29th, then yours from 10:09PM today; nothing in
> between.
>
> Thanks,
>
> S
>
> P.S.  I have comments/issues/etc. about the rest of the event, but
> let's just handle one thing at a time i.e. messages about the event
> between 2009-07-29 -> present.
>
> s
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090920/93f5e2fb/attachment.html>

From radix at twistedmatrix.com  Sun Sep 20 21:33:47 2009
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sun, 20 Sep 2009 23:33:47 -0400
Subject: [Twisted-Python] Boston Twisted Sprint
In-Reply-To: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
References: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
Message-ID: <60ed19d40909202033r75c1f225mf4e70c67483f8e48@mail.gmail.com>

On Sun, Sep 20, 2009 at 10:09 PM, Jessica McKellar
<jessica.mckellar at gmail.com> wrote:
> I'm cool with that if you're cool with that. Are you cool with that? Please
> send me an e-mail off-list with:
> 1. if you'd attend, and if so which days
> 2. regardless of 1, if you believe that the sprint should be delayed until
> funding/better location/more notice/whatever has a chance to happen

I can make it all next week, unless something Comes Up, which it may
very well do, but I don't have any plans otherwise.

As for 2, I think we should Just Do It as long as we can get some good
core developer representation for next week.


-- 
Christopher Armstrong
http://radix.twistedmatrix.com/
http://planet-if.com/



From nathan.stocks at gmail.com  Mon Sep 21 04:36:47 2009
From: nathan.stocks at gmail.com (Nathan)
Date: Mon, 21 Sep 2009 04:36:47 -0600
Subject: [Twisted-Python] Reviewer who understands basic numeric
	algorithms wanted
In-Reply-To: <cedc0c090909180550l71a16866mbd383aa5d6ca19ad@mail.gmail.com>
References: <cedc0c090909180550l71a16866mbd383aa5d6ca19ad@mail.gmail.com>
Message-ID: <96c9d6a80909210336m5a2049b3wb32b9ceadb7f8f51@mail.gmail.com>

On Fri, Sep 18, 2009 at 6:50 AM, Laurens Van Houtven <lvh at laurensvh.be> wrote:
> Hello :-)
>
>
>
> twisted.positioning has just (read: last night) grown a new module,
> called util, which has two functions I needed for statistical
> analysis: the error function (erf) and the inverse normal cumulative
> distribution function (Phi).
>
> As most of you on this mailing list probably know, code headed for
> trunk needs to be reviewed. The reason I need to ask for this
> specifically is because the reviewer does not need to know anything
> about Twisted, but does need some experience with how numerical
> algorithms work -- and that's about the opposite of most Twisted
> reviewers ;-)

I would suggest Travis Oliphant, my old EE professor of numpy fame,
who taught a very difficult grad-level-difficulty undergrad stats
course for the EE department back when I was in college.

http://www.linkedin.com/pub/travis-oliphant/3/151/b1a

~ Nathan



From itamar at itamarst.org  Mon Sep 21 18:20:40 2009
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 21 Sep 2009 20:20:40 -0400
Subject: [Twisted-Python] Boston Twisted Sprint
In-Reply-To: <60ed19d40909202033r75c1f225mf4e70c67483f8e48@mail.gmail.com>
References: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
	<60ed19d40909202033r75c1f225mf4e70c67483f8e48@mail.gmail.com>
Message-ID: <1253578840.4290.212.camel@pintsize>

On Sun, 2009-09-20 at 23:33 -0400, Christopher Armstrong wrote:
> On Sun, Sep 20, 2009 at 10:09 PM, Jessica McKellar
> <jessica.mckellar at gmail.com> wrote:
> > I'm cool with that if you're cool with that. Are you cool with that? Please
> > send me an e-mail off-list with:
> > 1. if you'd attend, and if so which days
> > 2. regardless of 1, if you believe that the sprint should be delayed until
> > funding/better location/more notice/whatever has a chance to happen
> 
> I can make it all next week, unless something Comes Up, which it may
> very well do, but I don't have any plans otherwise.
> 
> As for 2, I think we should Just Do It as long as we can get some good
> core developer representation for next week.

Is the whole week a good idea? We should only do that for that long if we'll actually have people the whole time.




From pemboa at gmail.com  Mon Sep 21 23:38:41 2009
From: pemboa at gmail.com (Arthur Pemberton)
Date: Tue, 22 Sep 2009 00:38:41 -0500
Subject: [Twisted-Python] Seeking advice on use of Perspective Broker
In-Reply-To: <4AB39F97.1020104@lumierevfx.com>
References: <16de708d0909171131i309646a4nd300bdc35060f0ef@mail.gmail.com>
	<4AB28977.2090405@gladserv.com>
	<16de708d0909171539q1f2c2483vbbacd1a479c4655b@mail.gmail.com>
	<20090918145222.GA21764@vidar.dreamhost.com>
	<4AB39F97.1020104@lumierevfx.com>
Message-ID: <16de708d0909212238h2842c205g8f7bc7657606dd35@mail.gmail.com>

Thanks for the recommendations. I'll get the book and work from there.

-- 
Fedora 10
(www.pembo13.com)



From glyph at twistedmatrix.com  Tue Sep 22 02:07:10 2009
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Tue, 22 Sep 2009 04:07:10 -0400
Subject: [Twisted-Python] Boston Twisted Sprint
In-Reply-To: <60ed19d40909202033r75c1f225mf4e70c67483f8e48@mail.gmail.com>
References: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
	<60ed19d40909202033r75c1f225mf4e70c67483f8e48@mail.gmail.com>
Message-ID: <d9047f780909220107h111e0671ic25f4a4c3156c58e@mail.gmail.com>

On Sun, Sep 20, 2009 at 11:33 PM, Christopher Armstrong <
radix at twistedmatrix.com> wrote:

> On Sun, Sep 20, 2009 at 10:09 PM, Jessica McKellar
> <jessica.mckellar at gmail.com> wrote:
> > I'm cool with that if you're cool with that. Are you cool with that?
> Please
> > send me an e-mail off-list with:
>

I'm sending my reply on-list in the hopes that it may remind folks who
haven't done this yet :).


> > 1. if you'd attend, and if so which days
>

I expect that I will be able to attend Monday, Tuesday, and Thursday.
 Unfortunately Things Are Happening with alarming regularity for me right
now, so I may be able to attend more days or fewer; but I should make it for
at least two of those three.

> 2. regardless of 1, if you believe that the sprint should be delayed until
> > funding/better location/more notice/whatever has a chance to happen
>

We can always have another sprint later.


> I can make it all next week, unless something Comes Up, which it may
> very well do, but I don't have any plans otherwise.
>
> As for 2, I think we should Just Do It as long as we can get some good
> core developer representation for next week.


Agreed!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090922/e4ac6346/attachment-0001.html>

From paulswartz at gmail.com  Tue Sep 22 06:58:22 2009
From: paulswartz at gmail.com (Paul Swartz)
Date: Tue, 22 Sep 2009 08:58:22 -0400
Subject: [Twisted-Python] Boston Twisted Sprint
In-Reply-To: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
References: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
Message-ID: <324cfb540909220558l5c2dbba9m9adfcce1651b18ac@mail.gmail.com>

On Sun, Sep 20, 2009 at 10:09 PM, Jessica
McKellar<jessica.mckellar at gmail.com> wrote:
> Let's try this again:
>
> The proposal was for a sprint in Boston from September 28-October 2. That
> starts a week from today.

[radio edit]

> I'm cool with that if you're cool with that. Are you cool with that? Please
> send me an e-mail off-list with:
> 1. if you'd attend, and if so which days

Work's gotten a lot busier, so I can probably only take off 1-2 of the
days, but it doesn't really matter which.  If I do make it >1 day, is
there someone's floor/couch I can crash on?

> 2. regardless of 1, if you believe that the sprint should be delayed until
> funding/better location/more notice/whatever has a chance to happen

I don't have a strong preference about this.

-p
-- 
Paul Swartz
paulswartz at gmail dot com
http://paulswartz.net/
AIM: z3penguin



From radix at twistedmatrix.com  Tue Sep 22 10:45:26 2009
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Tue, 22 Sep 2009 12:45:26 -0400
Subject: [Twisted-Python] Boston Twisted Sprint
In-Reply-To: <d9047f780909220107h111e0671ic25f4a4c3156c58e@mail.gmail.com>
References: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
	<60ed19d40909202033r75c1f225mf4e70c67483f8e48@mail.gmail.com>
	<d9047f780909220107h111e0671ic25f4a4c3156c58e@mail.gmail.com>
Message-ID: <60ed19d40909220945v5bbaa14awd1ecd26a3c381214@mail.gmail.com>

On Tue, Sep 22, 2009 at 4:07 AM, Glyph Lefkowitz
<glyph at twistedmatrix.com> wrote:
>> > 1. if you'd attend, and if so which days
>
> I expect that I will be able to attend Monday, Tuesday, and Thursday.
> Unfortunately Things Are Happening with alarming regularity for me right
> now, so I may be able to attend more days or fewer; but I should make it for
> at least two of those three.

Given that your availability is limited, as is Jean-Paul's
availability (and his limited ability to do significant Twisted work),
I don't think it's worth it to have a week-long sprint next week.

Can we just do a one or two-day sprint next weekend?


-- 
Christopher Armstrong
http://radix.twistedmatrix.com/
http://planet-if.com/



From cyclops at speakeasy.net  Tue Sep 22 20:14:15 2009
From: cyclops at speakeasy.net (John Crawford)
Date: Tue, 22 Sep 2009 22:14:15 -0400
Subject: [Twisted-Python] Where is TwistedQuotes source code?
In-Reply-To: <mailman.1.1253635201.26558.twisted-python@twistedmatrix.co
 m>
References: <mailman.1.1253635201.26558.twisted-python@twistedmatrix.com>
Message-ID: <mailman.8.1574573437.12674.twisted-python@twistedmatrix.com>

I'm trying to find the source code for the TwistedQuotes application. 
I've looked in every section of the website, and failed to find it, 
alas. Is it still there, and if so, where?

I'm primarily interested in it, to use in understanding the 
documentation section, "Designing Twisted Applications", which uses 
TwistedQuotes as its example code.

Thanks for any help.

John C>




From dripton at ripton.net  Wed Sep 23 06:44:13 2009
From: dripton at ripton.net (David Ripton)
Date: Wed, 23 Sep 2009 05:44:13 -0700
Subject: [Twisted-Python] Where is TwistedQuotes source code?
In-Reply-To: <E1MqHSS-0000rE-NW@cube.twistedmatrix.com>
References: <mailman.1.1253635201.26558.twisted-python@twistedmatrix.com>
	<E1MqHSS-0000rE-NW@cube.twistedmatrix.com>
Message-ID: <20090923124413.GA9709@vidar.dreamhost.com>

On 2009.09.22 22:14:15 -0400, John Crawford wrote:
> I'm trying to find the source code for the TwistedQuotes application. 
> I've looked in every section of the website, and failed to find it, 
> alas. Is it still there, and if so, where?

You can browse it using Trac here:
http://twistedmatrix.com/trac/browser/trunk/doc/core/howto/listings/TwistedQuotes

Or just checkout the Twisted trunk from svn.

-- 
David Ripton    dripton at ripton.net



From burslem2001 at yahoo.com  Wed Sep 23 09:04:44 2009
From: burslem2001 at yahoo.com (gary clark)
Date: Wed, 23 Sep 2009 08:04:44 -0700 (PDT)
Subject: [Twisted-Python] VC++ client and a Twisted OpenSSL Server
Message-ID: <608322.51924.qm@web112519.mail.gq1.yahoo.com>

Hello,

Firstly I'm new to twisted hence patience and a deep breath my be necessary.

I wrote a simple VC++ client that communicates to a VC++ server using OpenSSL. It loads .pem file and communicates great.

However I want the client to talk to a twisted server provided from TwistedMatrix:

# Copyright (c) 2001-2004 Twisted Matrix Laboratories.
# See LICENSE for details.


from OpenSSL import SSL
from twisted.internet.protocol import Factory
from twisted.internet import ssl, reactor
from twisted.python import log

class ServerContextFactory:

    def getContext(self):
        """Create an SSL context.
        
        This is a sample implementation that loads a certificate from a file 
        called 'server.pem'."""
        ctx = SSL.Context(SSL.SSLv23_METHOD)
        ctx.use_certificate_file('nfdclient.pem')
        ctx.use_privatekey_file('nfdclient.pem')
        return ctx


if __name__ == '__main__':
    import echoserv, sys
    log.startLogging(sys.stdout)
    factory = Factory()
    factory.protocol = echoserv.Echo
    port =int(sys.argv[1])
    reactor.listenSSL(port, factory, ServerContextFactory())
    reactor.run()


When attempting to connect the client, it failed on BIO_do_connect.

Has anybody attempted to do this? If so could they shed some light into the direction of getting the BIO to connect.

Thanks,
Garyc



From exarkun at twistedmatrix.com  Wed Sep 23 12:37:45 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 23 Sep 2009 18:37:45 -0000
Subject: [Twisted-Python] VC++ client and a Twisted OpenSSL Server
In-Reply-To: <608322.51924.qm@web112519.mail.gq1.yahoo.com>
References: <608322.51924.qm@web112519.mail.gq1.yahoo.com>
Message-ID: <20090923183745.1533.1142862823.divmod.xquotient.207@localhost.localdomain>

On 03:04 pm, burslem2001 at yahoo.com wrote:
>Hello,
>
>Firstly I'm new to twisted hence patience and a deep breath my be 
>necessary.
>
>I wrote a simple VC++ client that communicates to a VC++ server using 
>OpenSSL. It loads .pem file and communicates great.
>
>However I want the client to talk to a twisted server provided from 
>TwistedMatrix:
>
>[snip]
>
>When attempting to connect the client, it failed on BIO_do_connect.

Hi Gary,

I suggest investigating the cause of the BIO_do_connect failure more 
thoroughly.  OpenSSL provides a lot of information when an API fails. 
Check out ERR_get_error and the related APIs in OpenSSL and use them to 
learn more about the BIO_do_connect failure.  This should point more 
directly at the reason the connection cannot be set up, and that may 
suggest further avenues for debugging.  Feel free to come back with the 
details if you'd like help interpreting them.

Jean-Paul



From ygingras at ygingras.net  Wed Sep 23 12:58:44 2009
From: ygingras at ygingras.net (Yannick Gingras)
Date: Wed, 23 Sep 2009 14:58:44 -0400
Subject: [Twisted-Python] ConFoo.ca call for speakers
Message-ID: <200909231458.44475.ygingras@ygingras.net>


Greetings Twisters, 
  I'm coordinator for the Python track at the ConFoo.ca conference and I
have an announcement to make that will certainly be of interest to
many of you.

PHP-Qubec, Montral-Python, Ruby Montral, W3Qc, and OWASP Montral
are organizing the first edition of the ConFoo.ca conference,
which will be held in Montral on March 10th through 12th at the
Hilton Bonaventure Hotel.  With over 500 expected attendees,
ConFoo.ca is the largest Web development conference in North
America.

We are looking for the best speakers willing to share their experience
and skills with programmers, managers, marketers and decision
makers. The conference is divided into two parts:

  A technical part, encompassing different aspects of Web development:
  PHP, Python, Ruby, security, project management, CMSs and
  frameworks, databases, systems administration, Web standards,
  accessibility and agile methods.

  A decision-making part: referencing (SEO), Web marketing analysis,
  and social networking.

Presenters can decide to present in English or French.  Presentations
are roughly one hour long and these may be recorded for later
broadcast in digital format.  All relevant details concerning the
conference are available on the call for speaker website [1].

Even though Python can be used for a wide range of programming tasks,
the Python track at ConFoo.ca will focus on Web development with
Python.  For all the other fascinating aspects of Python, do not
hesitate to submit a talk to PyCon [2], which is also running its
call for speakers as I write this.

Share the word!

[1]: http://confoo.ca/en/cfp
[2]: http://us.pycon.org/2010/about/

-- 
Yannick Gingras
http://ygingras.net
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 197 bytes
Desc: This is a digitally signed message part.
URL: </pipermail/twisted-python/attachments/20090923/8044e372/attachment.sig>

From bash at intelerad.com  Wed Sep 23 13:06:04 2009
From: bash at intelerad.com (Benjamin Ash)
Date: Wed, 23 Sep 2009 15:06:04 -0400
Subject: [Twisted-Python] Having touble with spread.pb un-serializing an
	object
Message-ID: <20090923190603.GB4116@intelerad.com>

Hi,

I am trying to send new style classes that implement __slots__ with spread.pb.
Things seem to go awry when attempting to un-serialize the objects on the
client side.  I am not sure if this is a known issue.  How can I work around
this issue?

Thanks,

-ben

Stack trace:
"""
Unhandled error in Deferred:
Traceback (most recent call last):
  File "/usr/lib/python-2.6/lib/python2.6/site-packages/twisted/spread/pb.py", line 514, in expressionReceived
    method(*sexp[1:])
  File "/usr/lib/python-2.6/lib/python2.6/site-packages/twisted/spread/pb.py", line 884, in proto_answer
    d.callback(self.unserialize(netResult))
  File "/usr/lib/python-2.6/lib/python2.6/site-packages/twisted/internet/defer.py", line 243, in callback
    self._startRunCallbacks(result)
  File "/usr/lib/python-2.6/lib/python2.6/site-packages/twisted/internet/defer.py", line 312, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib/python-2.6/lib/python2.6/site-packages/twisted/internet/defer.py", line 328, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "./postRelease.in", line 36, in checkMissingRpms
    print obj.name
exceptions.AttributeError: name
"""




Intelerad Medical Systems 
Central Station 
895, de la Gauchetiere W., Suite 400 
Montreal, QC Canada H3B 4G1 
www.intelerad.com   

This email or any attachments may contain confidential or legally privileged information intended for the sole use of the addressees. Any use, redistribution, disclosure, or reproduction of this information, except as intended, is prohibited. If you received this email in error, please notify the sender and remove all copies of the message, including any attachments.   


From exarkun at twistedmatrix.com  Wed Sep 23 15:42:26 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 23 Sep 2009 21:42:26 -0000
Subject: [Twisted-Python] Having touble with spread.pb un-serializing
	an	object
In-Reply-To: <20090923190603.GB4116@intelerad.com>
References: <20090923190603.GB4116@intelerad.com>
Message-ID: <20090923214226.1533.1467370706.divmod.xquotient.220@localhost.localdomain>

On 07:06 pm, bash at intelerad.com wrote:
>Hi,
>
>I am trying to send new style classes that implement __slots__ with 
>spread.pb.
>Things seem to go awry when attempting to un-serialize the objects on 
>the
>client side.  I am not sure if this is a known issue.  How can I work 
>around
>this issue?

Perhaps the presence of __slots__ breaks PB's unserialization code.  Can 
you share a SSCCE (<http://sscce.org/>)?  Then perhaps it may make sense 
to file an enhancement ticket to support this case.

Jean-Paul



From burslem2001 at yahoo.com  Wed Sep 23 19:03:02 2009
From: burslem2001 at yahoo.com (gary clark)
Date: Wed, 23 Sep 2009 18:03:02 -0700 (PDT)
Subject: [Twisted-Python]  VC++ client and a Twisted OpenSSL Server
Message-ID: <496864.47252.qm@web112501.mail.gq1.yahoo.com>

Hello,

error:02002751:system library:connect:reason(1873)

Is dumped out from the client. This apparently is a :

0x2751 == 10065 == (WSA)EHOSTUNREACH
> "A socket operation was attempted to an unreachable host."

Strange because I can ping the server machine from the client. Not very informative.

Oh boy any ideas? I'm running the client on windows and the twisted server on linux.

Thanks,
Garyc





From burslem2001 at yahoo.com  Wed Sep 23 22:21:02 2009
From: burslem2001 at yahoo.com (gary clark)
Date: Wed, 23 Sep 2009 21:21:02 -0700 (PDT)
Subject: [Twisted-Python] VC++ client and a Twisted OpenSSL Server
Message-ID: <272158.21396.qm@web112507.mail.gq1.yahoo.com>

Ok I downloaded wireshark onto the linux box and commenced sniffing the packets. I saw the problem with sending the packets back (Host unreachable). Dont know why the pings were not being stopped (proabably allowing ICMP).

I then enable the port on the linux box.

I am now seeing the following:

error:0200274D:system library:connect:reason(1869)
ECONNREFUSED = 0x274D = 10061

Any ideas would be appreciated.

Thanks,
Garyc

--- On Wed, 9/23/09, gary clark <burslem2001 at yahoo.com> wrote:

> From: gary clark <burslem2001 at yahoo.com>
> Subject: [Twisted-Python] VC++ client and a Twisted OpenSSL Server
> To: twisted-python at twistedmatrix.com
> Date: Wednesday, September 23, 2009, 8:03 PM
> Hello,
> 
> error:02002751:system library:connect:reason(1873)
> 
> Is dumped out from the client. This apparently is a :
> 
> 0x2751 == 10065 == (WSA)EHOSTUNREACH
> > "A socket operation was attempted to an unreachable
> host."
> 
> Strange because I can ping the server machine from the
> client. Not very informative.
> 
> Oh boy any ideas? I'm running the client on windows and the
> twisted server on linux.
> 
> Thanks,
> Garyc
> 
> 




From burslem2001 at yahoo.com  Thu Sep 24 06:45:21 2009
From: burslem2001 at yahoo.com (gary clark)
Date: Thu, 24 Sep 2009 05:45:21 -0700 (PDT)
Subject: [Twisted-Python] Twisted OpenSSL Server Debug Information
In-Reply-To: <272158.21396.qm@web112507.mail.gq1.yahoo.com>
Message-ID: <285262.8846.qm@web112514.mail.gq1.yahoo.com>

Hello,

I am a new guy looking into the twisted platform.

I am trying to track down why the twisted server using open-ssl is
failing to communicate to my VC++ open-ssl client:

error:0200274D:system library:connect:reason(1869)

I am seeing 0x274D which is a ECONNREFUSED 10061 not sure what the
exact reason is. However would like to debug it at the twisted server so I can get more information on what is going on. I now know that the packets are going back and forth to the machines.

Simply put what is the recommended way to debug the twisted server so I can discover why the connection failed to the server? 


Much appreciated,
Garyc




From burslem2001 at yahoo.com  Thu Sep 24 06:56:54 2009
From: burslem2001 at yahoo.com (gary clark)
Date: Thu, 24 Sep 2009 05:56:54 -0700 (PDT)
Subject: [Twisted-Python] Twisted OpenSSL Server Debug Information
In-Reply-To: <285262.8846.qm@web112514.mail.gq1.yahoo.com>
Message-ID: <393281.30908.qm@web112513.mail.gq1.yahoo.com>


Oh boy. I finally got it working and connecting. Now to move onto the real stuff.


--- On Thu, 9/24/09, gary clark <burslem2001 at yahoo.com> wrote:

> From: gary clark <burslem2001 at yahoo.com>
> Subject: [Twisted-Python] Twisted OpenSSL Server Debug Information
> To: twisted-python at twistedmatrix.com
> Date: Thursday, September 24, 2009, 7:45 AM
> Hello,
> 
> I am a new guy looking into the twisted platform.
> 
> I am trying to track down why the twisted server using
> open-ssl is
> failing to communicate to my VC++ open-ssl client:
> 
> error:0200274D:system library:connect:reason(1869)
> 
> I am seeing 0x274D which is a ECONNREFUSED 10061 not sure
> what the
> exact reason is. However would like to debug it at the
> twisted server so I can get more information on what is
> going on. I now know that the packets are going back and
> forth to the machines.
> 
> Simply put what is the recommended way to debug the twisted
> server so I can discover why the connection failed to the
> server? 
> 
> 
> Much appreciated,
> Garyc
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 




From patrick at priority5.com  Thu Sep 24 10:51:25 2009
From: patrick at priority5.com (Patrick Hartling)
Date: Thu, 24 Sep 2009 11:51:25 -0500
Subject: [Twisted-Python] Unit tests, inline callbacks,
	and exception handling
Message-ID: <DFB8BDD1-93E3-469B-B4E1-0C28F6B978B6@priority5.com>

We are using nose and the twisted.trial.unittest.TestCase class from  
Twisted 8.2.0 to write tests that use inline callbacks. In one of the  
tests, we are trying to validate that the code will behave correctly  
by raising an exception if two clients with the same user name connect  
to a server. The basic test code is similar to this:

@inlineCallbacks
def testDuplicateConnect(self):
    server_port = random.randint(10000, 40000)
    server = Server()
    server.listen(port = server_port)

    client1 = Client(username = "Test")
    yield client1.connect(port = server_port)

    try:
       client2 = Client(username = "Test")
       yield client2.connect(port = server_port)
       assert False
    except UsernameAlreadyExists, ex:
       pass

    yield server.close()
    yield client.close()

The test method executes and returns successfully. The exception is  
raised and caught correctly, but because a  
twisted.python.failure.Failure object was seen during deferred  
processing, twisted.trial.unittest.TestCase._cleanUp() concludes that  
an error occurred. That is perhaps not the most accurate way of  
describing what happens, but the end result is that a caught exception  
ends up being reported as an error.

My question is this: are there any tips for performing exception  
handling in test methods that are decorated with @inlineCallbacks? I  
have been tracing through a lot of code trying to find any extension  
point, hook, etc. where I could indicate that the exception was caught  
correctly, but I have not found anything yet. Adding the obvious  
@raises decoration does not work because the method catches the  
exception. The closest I have come is to call  
self._observer._ignoreErrors() from the test method with the exception  
type in question, but that does not strike me as being on the right  
track.

  -Patrick


--
Patrick L. Hartling
Senior Software Engineer, Priority 5
http://www.priority5.com/

The information transmitted in this communication is intended only for
the person or entity to which it is addressed and contains proprietary
material. Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by persons or
entities other than the intended recipient is prohibited. If you
received this in error, please destroy any copies, contact the sender
and delete the material from any computer.




From exarkun at twistedmatrix.com  Thu Sep 24 10:59:49 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 24 Sep 2009 16:59:49 -0000
Subject: [Twisted-Python] Unit tests, inline callbacks,
	and exception handling
In-Reply-To: <DFB8BDD1-93E3-469B-B4E1-0C28F6B978B6@priority5.com>
References: <DFB8BDD1-93E3-469B-B4E1-0C28F6B978B6@priority5.com>
Message-ID: <20090924165949.1533.1033005023.divmod.xquotient.322@localhost.localdomain>

On 04:51 pm, patrick at priority5.com wrote:
>We are using nose and the twisted.trial.unittest.TestCase class from
>Twisted 8.2.0 to write tests that use inline callbacks. In one of the
>tests, we are trying to validate that the code will behave correctly
>by raising an exception if two clients with the same user name connect
>to a server. The basic test code is similar to this:
>
>@inlineCallbacks
>def testDuplicateConnect(self):
>    server_port = random.randint(10000, 40000)
>    server = Server()
>    server.listen(port = server_port)
>
>    client1 = Client(username = "Test")
>    yield client1.connect(port = server_port)
>
>    try:
>       client2 = Client(username = "Test")
>       yield client2.connect(port = server_port)
>       assert False
>    except UsernameAlreadyExists, ex:
>       pass
>
>    yield server.close()
>    yield client.close()
>
>The test method executes and returns successfully. The exception is
>raised and caught correctly, but because a
>twisted.python.failure.Failure object was seen during deferred
>processing, twisted.trial.unittest.TestCase._cleanUp() concludes that
>an error occurred. That is perhaps not the most accurate way of
>describing what happens, but the end result is that a caught exception
>ends up being reported as an error.
>
>My question is this: are there any tips for performing exception
>handling in test methods that are decorated with @inlineCallbacks? I
>have been tracing through a lot of code trying to find any extension
>point, hook, etc. where I could indicate that the exception was caught
>correctly, but I have not found anything yet. Adding the obvious
>@raises decoration does not work because the method catches the
>exception. The closest I have come is to call
>self._observer._ignoreErrors() from the test method with the exception
>type in question, but that does not strike me as being on the right
>track.

If the problem is because the server code uses `twisted.python.log.err` 
to log the double client connection attempt, then you can make it so 
that this doesn't fail the test by flushing the error before the test 
returns, with something like this:

    self.flushLoggedErrors(UsernameAlreadyExists)

Or possibly a different exception type, depending on what exactly the 
server is logging.

If the server isn't logging anything, then I can't really know why your 
test is failing based on the example you've given.  If you can construct 
a SSCCE (<http://sscce.org>), that would help a lot.

Jean-Paul



From patrick at priority5.com  Thu Sep 24 11:04:07 2009
From: patrick at priority5.com (Patrick Hartling)
Date: Thu, 24 Sep 2009 12:04:07 -0500
Subject: [Twisted-Python] Unit tests, inline callbacks,
	and exception handling
In-Reply-To: <20090924165949.1533.1033005023.divmod.xquotient.322@localhost.localdomain>
References: <DFB8BDD1-93E3-469B-B4E1-0C28F6B978B6@priority5.com>
	<20090924165949.1533.1033005023.divmod.xquotient.322@localhost.localdomain>
Message-ID: <6967807B-9839-4D28-A64A-BFE726EB28B5@priority5.com>

On Sep 24, 2009, at 11:59 AM, exarkun at twistedmatrix.com wrote:

> On 04:51 pm, patrick at priority5.com wrote:
>> We are using nose and the twisted.trial.unittest.TestCase class from
>> Twisted 8.2.0 to write tests that use inline callbacks. In one of the
>> tests, we are trying to validate that the code will behave correctly
>> by raising an exception if two clients with the same user name  
>> connect
>> to a server. The basic test code is similar to this:
>>
>> @inlineCallbacks
>> def testDuplicateConnect(self):
>>   server_port = random.randint(10000, 40000)
>>   server = Server()
>>   server.listen(port = server_port)
>>
>>   client1 = Client(username = "Test")
>>   yield client1.connect(port = server_port)
>>
>>   try:
>>      client2 = Client(username = "Test")
>>      yield client2.connect(port = server_port)
>>      assert False
>>   except UsernameAlreadyExists, ex:
>>      pass
>>
>>   yield server.close()
>>   yield client.close()
>>
>> The test method executes and returns successfully. The exception is
>> raised and caught correctly, but because a
>> twisted.python.failure.Failure object was seen during deferred
>> processing, twisted.trial.unittest.TestCase._cleanUp() concludes that
>> an error occurred. That is perhaps not the most accurate way of
>> describing what happens, but the end result is that a caught  
>> exception
>> ends up being reported as an error.
>>
>> My question is this: are there any tips for performing exception
>> handling in test methods that are decorated with @inlineCallbacks? I
>> have been tracing through a lot of code trying to find any extension
>> point, hook, etc. where I could indicate that the exception was  
>> caught
>> correctly, but I have not found anything yet. Adding the obvious
>> @raises decoration does not work because the method catches the
>> exception. The closest I have come is to call
>> self._observer._ignoreErrors() from the test method with the  
>> exception
>> type in question, but that does not strike me as being on the right
>> track.
>
> If the problem is because the server code uses  
> `twisted.python.log.err`
> to log the double client connection attempt, then you can make it so
> that this doesn't fail the test by flushing the error before the test
> returns, with something like this:
>
>    self.flushLoggedErrors(UsernameAlreadyExists)
>
> Or possibly a different exception type, depending on what exactly the
> server is logging.

That did it. Thanks!

  -Patrick

> If the server isn't logging anything, then I can't really know why  
> your
> test is failing based on the example you've given.  If you can  
> construct
> a SSCCE (<http://sscce.org>), that would help a lot.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

--
Patrick L. Hartling
Senior Software Engineer, Priority 5
http://www.priority5.com/

The information transmitted in this communication is intended only for
the person or entity to which it is addressed and contains proprietary
material. Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by persons or
entities other than the intended recipient is prohibited. If you
received this in error, please destroy any copies, contact the sender
and delete the material from any computer.




From terry at jon.es  Thu Sep 24 11:08:39 2009
From: terry at jon.es (Terry Jones)
Date: Thu, 24 Sep 2009 19:08:39 +0200
Subject: [Twisted-Python] Unit tests, inline callbacks,
	and exception handling
In-Reply-To: Your message at 11:51:25 on Thursday, 24 September 2009
References: <DFB8BDD1-93E3-469B-B4E1-0C28F6B978B6@priority5.com>
Message-ID: <19131.42903.809453.308684@jon.es>

Hi Patrick

You have

    try:
        client2 = Client(username = "Test")
        yield client2.connect(port = server_port)
        assert False
    except UsernameAlreadyExists, ex:
        pass

You could instead try:

    client2 = Client(username = "Test")
    d = client2.connect(port = server_port)
    self.failUnlessFailure(d, UsernameAlreadyExists)
    yield d

Terry



From luke.leighton at googlemail.com  Thu Sep 24 14:53:12 2009
From: luke.leighton at googlemail.com (Luke Kenneth Casson Leighton)
Date: Thu, 24 Sep 2009 20:53:12 +0000
Subject: [Twisted-Python] Pyjamas + web2py + twisted vs Django + Pinax
In-Reply-To: <ced5f0f60909241348g5e11c5e6q6d84111126895d54@mail.gmail.com>
References: <ced5f0f60909241348g5e11c5e6q6d84111126895d54@mail.gmail.com>
Message-ID: <ced5f0f60909241353s7a970cdbk4404673451a4c742@mail.gmail.com>

In-Reply-To=65BAE9EEDADD409CA83C32F2E54A0CB9%40Podcaster

sorry, folks: i didn't see this message, and it's taken me ten months
of obscure searches to find it.

> > I'm about to start programming a game in Python. The game will
> > be a web-based board game with a social aspect, something like
> > http://www.chesspark.com. I want the game to run in both browsers
> > and as a desktop client.

 and presumably you don't want to duplicate effort.  ergo, pyjamas
 is a good choice.  actually... it's your _only_ python choice
 if you don't want to burden the users.

 your other choices are: adobe AIR, silverlight, and, more recently,
 appcelerator.  appcelerator is interesting: you get to run IronPython
 because appcelerator's "titanium" is actually a silverlight / browser
 plugin that gives IronPython apps access to the DOM model of the
 browser.


> > Therefore I'm wondering what python-based
> > technologies I need. I know that Javascript/AJAX is necessary for
> > the browser part so I have decided on the following:
> >
> > 1. Pyjamas -  (for the AJAX browser stuff)
> >
> > 2. Pyjamas-desktop - (for the desktop client)

 pyjamas-desktop now has XULrunner and MSHTML as back-end engines.
 the MSHTML one is particularly strategically significant, as the
 only real requirements are, instead of a whopping 30mb bundle
 including gtk, cairo, xulrunner, pygtk, pycairo, pygobject _and_
 not to mention python itself, you can just install... python-comtypes
 (which is a 200k download).  for the POSIX-compliant systems, such
 as debian, there's "apt-get install hulahop", and you get python-xpcom,
 xulrunner and all other dependencies pulled in "for free".

 > > 3. Web2py (or djanjo, or django+pinax)  - for the website on
which the game will run and for database access and social part -
login, chat, members, profiles, game history, etc.)
> >
> > 4. Twisted - for the networking and chat functionality.
> >
> > 5. Pygame - for most of the game stuff, sprites, inages, etc. (Actually I don't know if Pygame is necessary for a board-type game.)

 no, it's not.  i wrote a board-type game "meta-engine" which involved
 moving of pyjamas.ui.Image "tokens" around a pyjamas.ui.AbsolutePanel
 and it was incredibly simple and it actually worked.  i went to a lot
 of trouble to use the django server and AJAX (actually JSONRPC) to
 communicate "moving" of tokens.  as one user moved a token, the fact
 that it had "moved" would be noted in a database table
 (id, game_session_id, user_id, token_id)
 of course obviously excluding the user who had moved it.

 a continuous poll by a user of the database would empty the table
 of "moved" notifications for that user, and return a list of new
 position info for the tokens that needed to be moved.

 update speed turned out to be about 1-2 frames per second: perfectly
 adequate for a board game.

 oh: for "Go", due to the number of tokens, however, i found
 that over 700 tokens resulted in _considerably_ slow Firefox 2
 initialisation times, which turns out to be a known bug in Firefox 2.
 adding over 256 absolute-positioned items to a div element using
 DOM manipulation is *SEVERELY* cpu-intensive: beyond some sort of
 fixed limit, adding elements turns from O(N) to O(N^2).  for full information
 on the issue, courtesy of john gunther, and a solution, see:
 http://pyjamas.svn.sourceforge.net/viewvc/pyjamas/trunk/library/pyjamas/chart/GChartWidgets.py?view=log

 i also added "spectators" which were simply "users with no rights
 to move tokens".  they got their own "chat" channel so as not to
 interfere with the players.

 twisted users are probably screaming loudly at the "polling" technique
 especially one that hammers a database so heavily, but hey, you can't
 have everything :)  if anyone knows of any better event-driven methods
 including example code that can be queried with JSONRPC i'm _really_
 interested to hear about it.  think in terms of "don't respond to the
 JSONRPC request unless either 15 seconds has passed, or there are some
 events which have been triggered by other users".

 yes i fully understand the complexities involved and that one possible
 implementation is a single-process asynchronous JSONRPC HTTP service,
 which is _nasty_ as hell: i'm interested to hear if there's anything
 better.

> > My understanding of the above technologies is still limited and I'm not sure if I need all of these because some functionality may be overlapped. e.g. I don't know where Pyjamas leaves off and where web2py/danjo/pinax begins.
> >
> > Can someone please give me some advice?
>
> That's a fine laundry list of frameworks, but i believe getting all of
> them to cooperate would be practically impossible.  (Note: a framework
> is a library that's grown to the point where it thinks it owns your
> whole program.  Getting multiple frameworks to play nicely together is
> usually hard.  There are rare exceptions, like the beautiful integration
> between Twisted and PyGTK, but they're rare.)

 the integration point of choice between pyjamas and frameworks is JSONRPC,
 simply because it was the first one that was implemented, and it's turned
 out to be incredibly practical.

 examination of the wiki http://code.google.com/p/pyjamas/wiki shows
 over 90% of the wiki pages are "how to use pyjamas with <insert framework>".
 including two or three methods for twisted, and two or more with django.


> I know that Django and pygame and Twisted are useful, mature, documented
> frameworks that actually get used in production by people other than
> their authors.  I don't know about Pyjamas.

 http://pyjs.org/FAQ.html "i'm a bit underwhelmed by the apparent lack
 of documentation": says "go back to main site, http://pyjs.org, see
 Documentation section" which has these:

 http://pyjs.org/api
 http://pyjs.org/book/output/Bookreader.html
 still relevant, because the U.I API hasn't really changed:
 http://code.google.com/webtoolkit/documentation
 for best results, read:
 http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/index.html
 specifically the U.I "package":
 http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/user/client/ui/package-summary.html



> If putting 100% Python in one end and getting Ajax out the other is
> really important to you, then you need Pyjamas to work.  (Or wait for
> PyPy and its JavaScript backend to mature from experimental research
> code to production-quality stuff.)

 that's not going to happen.  the pypy javascript back-end has been
 abandoned.  it's still available in a branch, but you are not going
 to get anywhere with it.  plus, due to the fact that the sole and
 exclusive focus of the pypy javascript back-end is to be totally
 100% python interoperable, to the absolute exclusion of all else
 (e.g. speed), even if you got it going, you'd find that apps ran
 like treacle.  then, if you tried to debug the app, you'd find that
 it was near-impossible, because the code is near-pure-assembler-like,
 having gone through rpython, first.  being utterly divorced from its
 original python, you are entirely at the mercy of the pypy developers
 for bug-fixes aaand... they've abandoned it.

 bottom line: forget pypy.

> So my advice is to write a simple
> tic-tac-toe game in Pyjamas, and find out.

 or a lightout game.  http://pyjs.org/examples/lightout/output/lightout.html
 or a sudoku game. http://lkcl.net/sudoku/output/Sudoku.html
 (in each case, full source code is 1 level below)

 of course, these are single-user games.  what you should be slightly
 surprised by is the fact that the source code of each app is so damn
 small.  the sudoku one, it hardly looks like there's any actual
 "pyjamas" code in it at all.  you have to _really_ peer very hard
 at the code, looking for clues such as "ListBox", "Grid", "HTML"
 and "HorizontalPanel" in order to discern the bits that just get
 on with serving up a sudoku game and the bits which "glorify pyjamas"
 so to speak.  "oh look, there's a button.  i wonder if it calls
 this funny method named 'onClick' if the button gets clicked.  why
 yes, what a surprise, it does!"

 anyway this is a bit long, i'll stop now :)

 l.



From bash at intelerad.com  Thu Sep 24 21:42:23 2009
From: bash at intelerad.com (Benjamin Ash)
Date: Thu, 24 Sep 2009 23:42:23 -0400
Subject: [Twisted-Python] Having touble with spread.pb un-serializing	an
	object
In-Reply-To: <20090923214226.1533.1467370706.divmod.xquotient.220@localhost.localdomain>
References: <20090923190603.GB4116@intelerad.com>
	<20090923214226.1533.1467370706.divmod.xquotient.220@localhost.localdomain>
Message-ID: <20090925034221.GD29130@intelerad.com>

Hi Jean-Paul,

Here is a sample server and client code that demonstrates the problem
with PB's unserialization code and objects that use __slots__.  The
SlotsObject class implements __slots__ and the NoSlotsObject does not.
The problem arises when de-serializing the SlotsObject.  The stack trace
is a little different than the original one I posted but the net-effect
is the same; an AttributeError exception.

Thanks,

-ben

sample.py (server and copyable objects):
"""
import sys
import os

from twisted.spread import pb
from twisted.internet import reactor

class BaseObject(object, pb.Copyable, pb.RemoteCopy):

    def __init__(self, name):
        self.name = name
        self.version = "1"
        self.release = "2"

    def __str__(self):
        return "%s-%s-%s" % (self.name, self.version, self.release)

class SlotsObject(BaseObject):
    """
    Some object that implements __slots__
    """
    __slots__ = ["name", "version", "release"]

    def __init__(self):
        super(SlotsObject, self).__init__("slots")

class NoSlotsObject(BaseObject):

    def __init__(self):
        super(NoSlotsObject, self).__init__("no-slots")

class SampleServer(pb.Root, object):
    """
    Serve up some objects that implement __slots__.
    """
    def remote_getSlotsObject(self):
        return SlotsObject()

    def remote_getNoSlotsObject(self):
        return NoSlotsObject()
    
def main():
    reactor.listenTCP(12346, pb.PBServerFactory(SampleServer()))
    reactor.run()

if __name__ == "__main__":
    from sample import SlotsObject, NoSlotsObject
    main()
"""

sample client code:
"""
import sys
import os

from twisted.internet import reactor
from twisted.spread import pb
from twisted.python import util

from sample import SlotsObject, NoSlotsObject

pb.setUnjellyableForClass(SlotsObject, SlotsObject)
pb.setUnjellyableForClass(NoSlotsObject, NoSlotsObject)

def call(factory, name):
    remote = factory.getRootObject()
    remote.addCallback(lambda obj: obj.callRemote(name))
    remote.addCallback(lambda obj: util.println("name is %r" % obj.name))
    remote.addErrback(lambda err: err.printTraceback())
    return remote

factory = pb.PBClientFactory()
reactor.connectTCP("localhost", 12346, factory)
call(factory, "getSlotsObject")
remote = call(factory, "getNoSlotsObject")
remote.addCallback(lambda _: reactor.stop())
reactor.run()
"""

Output:
"""
Traceback (most recent call last):
  File "/usr/lib64/python2.5/site-packages/twisted/internet/defer.py", line 304, in _startRunCallbacks
    self._runCallbacks()
  File "/usr/lib64/python2.5/site-packages/twisted/internet/defer.py", line 317, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/python2.5/site-packages/twisted/internet/defer.py", line 281, in _continue
    self.unpause()
  File "/usr/lib64/python2.5/site-packages/twisted/internet/defer.py", line 277, in unpause
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/python2.5/site-packages/twisted/internet/defer.py", line 317, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "./sample-client.py", line 17, in <lambda>
    remote.addCallback(lambda obj: util.println("name is %r" % obj.name))
exceptions.AttributeError: name
name is 'no-slots'
"""

On Wed, Sep 23, 2009 at 09:42:26PM -0000, exarkun at twistedmatrix.com wrote:
> On 07:06 pm, bash at intelerad.com wrote:
> >Hi,
> >
> >I am trying to send new style classes that implement __slots__ with 
> >spread.pb.
> >Things seem to go awry when attempting to un-serialize the objects on 
> >the
> >client side.  I am not sure if this is a known issue.  How can I work 
> >around
> >this issue?
> 
> Perhaps the presence of __slots__ breaks PB's unserialization code.  Can 
> you share a SSCCE (<http://sscce.org/>)?  Then perhaps it may make sense 
> to file an enhancement ticket to support this case.
> 
> Jean-Paul
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




Intelerad Medical Systems 
Central Station 
895, de la Gauchetiere W., Suite 400 
Montreal, QC Canada H3B 4G1 
www.intelerad.com   

This email or any attachments may contain confidential or legally privileged information intended for the sole use of the addressees. Any use, redistribution, disclosure, or reproduction of this information, except as intended, is prohibited. If you received this email in error, please notify the sender and remove all copies of the message, including any attachments.   


From jessica.mckellar at gmail.com  Fri Sep 25 11:58:00 2009
From: jessica.mckellar at gmail.com (Jessica McKellar)
Date: Fri, 25 Sep 2009 13:58:00 -0400
Subject: [Twisted-Python] Boston Twisted Sprint
In-Reply-To: <60ed19d40909220945v5bbaa14awd1ecd26a3c381214@mail.gmail.com>
References: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
	<60ed19d40909202033r75c1f225mf4e70c67483f8e48@mail.gmail.com>
	<d9047f780909220107h111e0671ic25f4a4c3156c58e@mail.gmail.com>
	<60ed19d40909220945v5bbaa14awd1ecd26a3c381214@mail.gmail.com>
Message-ID: <b282a1340909251058i40b2da73y8e2eb0722d2adb5e@mail.gmail.com>

This sounds like plenty of support for a Sprint! People have mostly
expressed an ability to attend Monday, Tuesday, and Wednesday, so it seems
reasonable to start with that as the Sprint window and we can reevaluate as
we go alone. That said, I have room reservations through Sunday so people
should feel free to use those spaces.

Room Details for Monday-Wednesday, 5pm-midnight:
-The room number is 4-159, so it's in building 4 on the first floor.
Attached is a poorly gimped zoomed-in view of main campus with some
annotation on how to get to the room.
-Details on how to get to MIT in general as well as a complete map and other
information can be found here: http://whereis.mit.edu/
-The way that will always work to get to 4-159 is to follow the arrow on the
attached map: go in through "Lobby 7" on Massachusetts Ave. It's the big
entrance with huge columns shortly before you hit the Charles River. Then
just go down the hallway until you turn right at a sign for building 4.
-If you take the T in and get off at the Kendall T stop on the Red Line, it
would be annoying to go all the way to Massachusetts Ave. just to have to
loop back through the Lobby 7 route. I'd recommend getting there before the
doors lock (~5pm), pinging someone you know is already there, or waiting for
a stranger to let you in around buildings 56 and 66.
-I'll put up signs to help guide people and have a sign on the room door.
-There will also be a room reservation confirmation attached to the back of
the door, should anyone ask for one and should I not be there to talk to
them.

I will be at the room and on #twisted at 5pm on Monday.

If this information is unclear / incomplete or if you have special needs
that need accommodating please don't hesitate to reply on-list or to me.

-Jessica



On Tue, Sep 22, 2009 at 12:45 PM, Christopher Armstrong <
radix at twistedmatrix.com> wrote:

> On Tue, Sep 22, 2009 at 4:07 AM, Glyph Lefkowitz
> <glyph at twistedmatrix.com> wrote:
> >> > 1. if you'd attend, and if so which days
> >
> > I expect that I will be able to attend Monday, Tuesday, and Thursday.
> >  Unfortunately Things Are Happening with alarming regularity for me right
> > now, so I may be able to attend more days or fewer; but I should make it
> for
> > at least two of those three.
>
> Given that your availability is limited, as is Jean-Paul's
> availability (and his limited ability to do significant Twisted work),
> I don't think it's worth it to have a week-long sprint next week.
>
> Can we just do a one or two-day sprint next weekend?
>
>
> --
> Christopher Armstrong
> http://radix.twistedmatrix.com/
> http://planet-if.com/
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090925/951c9a3b/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: zoom.png
Type: image/png
Size: 178096 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20090925/951c9a3b/attachment-0002.png>

From markv at lumierevfx.com  Fri Sep 25 13:47:00 2009
From: markv at lumierevfx.com (Mark Visser)
Date: Fri, 25 Sep 2009 15:47:00 -0400
Subject: [Twisted-Python] Trial: Blocking until all deferreds have fired in
	test
Message-ID: <4ABD1E34.8080301@lumierevfx.com>

I have a class that looks something like this:

|class FooListener(object):
    def __init__(self):
        pass

    @inlineCallbacks
    def fooBar():
        try:
            yield doSomeSetup()
            doSomethingThatReturnsADeferred()
            returnValue('success!')
        except:
            returnValue('failure!')

|Note that doSomethingThatReturnsADeferred() has no callbacks.

I also have a unit test that looks something like this:

|def TestFoo(unittest.TestCase):
    def setUp(self):
        timeout = 1000000
        self.listener = FooListener()

    @inlineCallbacks
    def testFooBar(self):
        yield self.listener.fooBar()
|
When I run this, I get this error:

[ERROR]: foo.TestFoo.testFooBar

Traceback (most recent call last):
Failure: twisted.trial.util.DirtyReactorAggregateError: Reactor was unclean.
Selectables:
<twisted.internet.process.ProcessWriter object at 0x3b7b650>
-------------------------------------------------------------------------------
Ran 1 tests in 9.028s

FAILED (errors=1, successes=1)

I'm clever enough to understand that Trial isn't waiting for the 
"backgrounded" Deferreds to fire, but I'm not clever enough to figure 
how to fix it. :-)

I could hack around this by passing a test_mode parameter to 
TestFoo.__init__ and "yield"-ing doSomethingThatReturnsADeferred(), but 
I'd rather not introduce special cases for testing.

Is there a way to instruct Trial to "wait" for Deferreds to fire?

thanks

-- 
Mark Visser, Software Director
Lumire VFX
Email: markv at lumierevfx.com
Phone: +1-514-316-1080 x3030

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090925/67b19849/attachment-0001.html>

From terry at jon.es  Fri Sep 25 15:25:59 2009
From: terry at jon.es (Terry Jones)
Date: Fri, 25 Sep 2009 23:25:59 +0200
Subject: [Twisted-Python] Trial: Blocking until all deferreds have fired
	in	test
In-Reply-To: Your message at 15:47:00 on Friday, 25 September 2009
References: <4ABD1E34.8080301@lumierevfx.com>
Message-ID: <19133.13671.202032.722226@jon.es>

Hi Mark.

I'd write your FooListener class like this (untested):

class FooListener(object):
    def fooBar():
        d = doSomeSetup()
        d.addCallback(lambda ign: doSomethingThatReturnsADeferred())
        d.addCallbacks(lambda ign: 'success!', lambda ign: 'failure!')
        return d

And leave your unit test as is. Then the unit test (with the yield on
fooBar() will do the right thing. And your other (non-test) code will
continue to get what it was getting before.

BTW, it's a slight red flag (to me) that you're returning the 'failure!'
string as the value of the deferred (i.e., if an error happens, that
errback function returns a string, which is going to get you back onto the
callback chain in the deferred - since you're not raising or returning a
failure).  I say it's a red flag because I tried stuff like that once and
later realized that things are much cleaner if you just let Twisted handle
errors in it's normal way. To do so you could just drop the addErrback
above and let any error flow back to the caller of fooBar in the normal way
(on the errback chain) rather than trying to catch problems and return a
result on the callback chain that indicates an error (i.e., a string like
'failure!').

Hope that helps.

Terry



From exarkun at twistedmatrix.com  Sat Sep 26 22:05:19 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 27 Sep 2009 04:05:19 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1254024319.7.136281212@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090927/34ec94d7/attachment-0001.html>

From burslem2001 at yahoo.com  Sun Sep 27 14:08:45 2009
From: burslem2001 at yahoo.com (gary clark)
Date: Sun, 27 Sep 2009 13:08:45 -0700 (PDT)
Subject: [Twisted-Python] Twisted OpenSSL Server and multiple clients
Message-ID: <455440.32017.qm@web112505.mail.gq1.yahoo.com>

Hello,

I am new to Twisted, hence the red flag and patience card pulled out.

I have written a client that connects perfectly well to a twisted server thats using open-ssl to communicate to each other. Basically I took the open-ssl echo server example and tweaked it.

Thats all fine and dandy, but I want to have multiple clients that can connect to the server.

So I have a few questions:

1) When a client connects to my server? What connection information
   can be collected and stored persistently? 

   Upon a client connecting I want to store connection information and
   I want to remove connection information when its disconnected from 
   the persistent store.

2) What persistent store is adopted for twisted if any?

3) I want to know when a table has changed so I can then pull information
   from a table and use the connection information if present to send data 
   to my client. How is this accomplished in twisted?

Again I apologise in advance, if someone can shed some light into how twisted accomplishes the basic tasks of multiple clients thats great.

Oh boy.

Thanks,
Garyc







From burslem2001 at yahoo.com  Sun Sep 27 15:02:37 2009
From: burslem2001 at yahoo.com (gary clark)
Date: Sun, 27 Sep 2009 14:02:37 -0700 (PDT)
Subject: [Twisted-Python] Twisted OpenSSL Server and multiple clients
Message-ID: <717792.89947.qm@web112509.mail.gq1.yahoo.com>

Ok I'm answering my own questions:

After browsing around I kinda pieced together what is going on.

Basically the factory object manages the persistent information
of protcols. You can use self.clients.append( newclient )
to store when a connection is made and self.clients.remove( client ) when a client disconnects within the factory object to cycle through all the protocol (clients) in the factory:

In the factory:

for proto in self.clients
    proto.transport.write( message )

I found the below code very useful:

import string
from twisted.application import service, internet
from twisted.internet import reactor, protocol
from twisted.internet.protocol import Protocol, Factory

port = 80

class AirChat(Protocol):
	
	username = ""
	session = False
	
	def connectionMade( self ):
		self.factory.numProtocols = self.factory.numProtocols+1
		self.factory.addClient(  self )
		
	def connectionLost( self , reason ):
		self.factory.numProtocols = self.factory.numProtocols-1
		self.factory.delClient( self )
		
	def dataReceived( self , data ):
		
		# parse out HTTP
		a = data.split( '\x00' )[0].split(' ')
		
		# look for HTTP header
		if a[0] == 'GET' or a[0] == 'POST':
			self.transport.write( """HTTP/1.1 200 OK\r\n\r\n""" )
			self.transport.write( """<html><strong>AIR Chat 1.0</strong></html>""" )
			self.transport.loseConnection()
			return
			
		a = data.split( '\x00' )[0].split( '||' )
		
		if a[0] == '1':
			self.factory.sendAll( '1||' + self.factory.stripChars( a[1] ) + '||' + self.factory.stripChars( a[2] ) + '\x00'  )
			
		elif a[0] == '2':
			self.transport.write( '2||' + str( self.factory.numProtocols )  + '\x00')


class AirChatFactory(Factory):
	protocol = AirChat
	numProtocols = 0
	clients = []
	
	def stripChars(self, textIn):
		textIn = textIn.replace('<', '')
		textIn = textIn.replace('</', '')
		textIn = textIn.replace('>', '')
		textIn = textIn.replace('/>', '')
		return textIn
	
	def addClient(self, newclient):
		self.clients.append( newclient )
	
	def delClient(self, client):
		self.clients.remove( client )
	
	def sendAll(self, message):
		for proto in self.clients:
			proto.transport.write( message )
	
	
class AirChatService( internet.TCPServer ):
	def __init__(self):
		internet.TCPServer.__init__(self, 80, AirChatFactory())


I think thats good for now. I dont have to create my own repository just manipulate the factory object, marvelous. Time for a pint.

Thanks,
Garyc

--- On Sun, 9/27/09, gary clark <burslem2001 at yahoo.com> wrote:

> From: gary clark <burslem2001 at yahoo.com>
> Subject: Twisted OpenSSL Server and multiple clients
> To: twisted-python at twistedmatrix.com
> Date: Sunday, September 27, 2009, 3:08 PM
> Hello,
> 
> I am new to Twisted, hence the red flag and patience card
> pulled out.
> 
> I have written a client that connects perfectly well to a
> twisted server thats using open-ssl to communicate to each
> other. Basically I took the open-ssl echo server example and
> tweaked it.
> 
> Thats all fine and dandy, but I want to have multiple
> clients that can connect to the server.
> 
> So I have a few questions:
> 
> 1) When a client connects to my server? What connection
> information
> can be collected and stored persistently?
> 
> 
> Upon a client connecting I want to store
> connection information and
> I want to remove connection information
> when its disconnected from 
> the persistent store.
> 
> 2) What persistent store is adopted for twisted if any?
> 
> 3) I want to know when a table has changed so I can then
> pull information
> from a table and use the connection
> information if present to send data 
> to my client. How is this accomplished in
> twisted?
> 
> Again I apologise in advance, if someone can shed some
> light into how twisted accomplishes the basic tasks of
> multiple clients thats great.
> 
> Oh boy.
> 
> Thanks,
> Garyc
> 
> 
> 
> 




From burslem2001 at yahoo.com  Mon Sep 28 05:15:11 2009
From: burslem2001 at yahoo.com (gary clark)
Date: Mon, 28 Sep 2009 04:15:11 -0700 (PDT)
Subject: [Twisted-Python] Knowing end of packet
Message-ID: <984345.38867.qm@web112504.mail.gq1.yahoo.com>

Hello,

I am sending a large amount of data to a twisted server. I want to know how
the protocol class knows that no more data is to be received. 

I dont pass the length of the data in the packet, hence I'm looking for a termination field in the packet.Like </MESSAGE>.

I did see a logging class but not sure if thats what I want. If I have to
overload the dataReceived method, and buffer the data until I see the termination field thats ok, just need to know if this seems correct in twisted.

Much appreciated for any help.

Thanks,
Garyc




From glyph at twistedmatrix.com  Mon Sep 28 05:29:30 2009
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Mon, 28 Sep 2009 07:29:30 -0400
Subject: [Twisted-Python] Knowing end of packet
In-Reply-To: <984345.38867.qm@web112504.mail.gq1.yahoo.com>
References: <984345.38867.qm@web112504.mail.gq1.yahoo.com>
Message-ID: <d9047f780909280429hf5a9c34l5c820141f974a257@mail.gmail.com>

On Mon, Sep 28, 2009 at 7:15 AM, gary clark <burslem2001 at yahoo.com> wrote:

> Hello,
>
> I am sending a large amount of data to a twisted server. I want to know how
> the protocol class knows that no more data is to be received.
>
> I dont pass the length of the data in the packet, hence I'm looking for a
> termination field in the packet.Like </MESSAGE>.
>

I think this FAQ might help you:

http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#Whyisprotocol.dataReceivedcalledwithonlypartofthedataIcalledtransport.writewith

Let us know if that answers your question.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090928/afff5b42/attachment-0001.html>

From burslem2001 at yahoo.com  Mon Sep 28 06:24:56 2009
From: burslem2001 at yahoo.com (gary clark)
Date: Mon, 28 Sep 2009 05:24:56 -0700 (PDT)
Subject: [Twisted-Python] Knowing end of packet
In-Reply-To: <d9047f780909280429hf5a9c34l5c820141f974a257@mail.gmail.com>
Message-ID: <836263.16845.qm@web112504.mail.gq1.yahoo.com>


Marvelous. Much appreciated. 

"from twisted.protocols.basic import NetstringReceiver"

Thanks,
Garyc
--- On Mon, 9/28/09, Glyph Lefkowitz <glyph at twistedmatrix.com> wrote:

> From: Glyph Lefkowitz <glyph at twistedmatrix.com>
> Subject: Re: [Twisted-Python] Knowing end of packet
> To: "Twisted general discussion" <twisted-python at twistedmatrix.com>
> Date: Monday, September 28, 2009, 6:29 AM
> On Mon, Sep 28,
> 2009 at 7:15 AM, gary clark <burslem2001 at yahoo.com>
> wrote:
> 
> Hello,
> 
> 
> 
> I am sending a large amount of data to a twisted server. I
> want to know how
> 
> the protocol class knows that no more data is to be
> received.
> 
> 
> 
> I dont pass the length of the data in the packet, hence
> I'm looking for a termination field in the packet.Like
> </MESSAGE>.
> 
> I think this FAQ might help you:
> 
> http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#Whyisprotocol.dataReceivedcalledwithonlypartofthedataIcalledtransport.writewith
> 
> 
> 
> Let us know if that answers your question.
> 
> 
> 
> -----Inline Attachment Follows-----
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 




From burslem2001 at yahoo.com  Mon Sep 28 07:07:05 2009
From: burslem2001 at yahoo.com (gary clark)
Date: Mon, 28 Sep 2009 06:07:05 -0700 (PDT)
Subject: [Twisted-Python] Twisted and db table changes
In-Reply-To: <836263.16845.qm@web112504.mail.gq1.yahoo.com>
Message-ID: <522237.35121.qm@web112510.mail.gq1.yahoo.com>

Hello,

I have a server that needs to track changes on a table database.

When a table changes it needs the server accesses the table and send data out.

Not sure what the best approach to do this in twisted. Do I create a thread in twisted and monitor for any changes in a table or can I create
a callback method to be triggered when a change occurs to table.

Thanks,
Garyc






From exarkun at twistedmatrix.com  Mon Sep 28 07:26:06 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 28 Sep 2009 13:26:06 -0000
Subject: [Twisted-Python] Having touble with spread.pb un-serializing
	an	object
In-Reply-To: <20090925034221.GD29130@intelerad.com>
References: <20090923190603.GB4116@intelerad.com>
	<20090923214226.1533.1467370706.divmod.xquotient.220@localhost.localdomain>
	<20090925034221.GD29130@intelerad.com>
Message-ID: <20090928132606.1533.1481101934.divmod.xquotient.384@localhost.localdomain>

On 25 Sep, 03:42 am, bash at intelerad.com wrote:
>Hi Jean-Paul,
>
>Here is a sample server and client code that demonstrates the problem
>with PB's unserialization code and objects that use __slots__.  The
>SlotsObject class implements __slots__ and the NoSlotsObject does not.
>The problem arises when de-serializing the SlotsObject.  The stack 
>trace
>is a little different than the original one I posted but the net-effect
>is the same; an AttributeError exception.

Hi Benjamin,

Thanks for the example.  I can reproduce the problem you're seeing.  I 
don't see any particular reason PB shouldn't support classes with 
__slots__.  Can you file a ticket and attach the example?

Thanks,
Jean-Paul



From steve at divillo.com  Mon Sep 28 10:46:14 2009
From: steve at divillo.com (Steve)
Date: Mon, 28 Sep 2009 09:46:14 -0700
Subject: [Twisted-Python] =?utf-8?q?PostgreSQL_LISTEN_NOTIFY_Example=3F?=
Message-ID: <20090928094614.e13ae574f475ea337c2ec5b0e03ebbf3.e25756b250.wbe@email02.secureserver.net>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090928/75b6d5fa/attachment-0001.html>

From steve at divillo.com  Mon Sep 28 10:58:46 2009
From: steve at divillo.com (Steve)
Date: Mon, 28 Sep 2009 09:58:46 -0700
Subject: [Twisted-Python] =?utf-8?q?PostgreSQL_LISTEN_NOTIFY_example=3F?=
Message-ID: <20090928095846.e13ae574f475ea337c2ec5b0e03ebbf3.91627d84aa.wbe@email02.secureserver.net>

My first message was sent as an HTML attachment - sorry!

Hello, this is my first post to this list. I only started exploring
Twisted less than a week ago.


One thing that I would like to do is trigger a function via the
PostgreSQL NOTIFY mechanism.


Does anyone have an example or link to an example of how to correctly do
this? I have something working but I am not sure if it is the best way.I
would post the code but I am at work right now.




From jacopo.pecci at gmail.com  Mon Sep 28 12:08:37 2009
From: jacopo.pecci at gmail.com (Jacopo Pecci)
Date: Mon, 28 Sep 2009 21:08:37 +0300
Subject: [Twisted-Python] reactor blocked
Message-ID: <295c22190909281108j3aa1a5baq3d6be5c173b6c9ae@mail.gmail.com>

How could I get the first result as soon as ready and therefore
parallelize things? I dont want to block the reactor with further processing if
It has some results ready to be redurned.

thanks, Jacopo

SERVER:

fibo=Fibonacci()
fact=pb.PBServerFactory(fibo)
reactor.listenTCP(port, fact)
reactor.run()

CLIENT:

fact=pb.PBClientFactory()
reactor.connectTCP(host, port, fact)
d=fact.getRootObject()
n1=10000
d.addCallback(lambda obj: obj.callRemote("compute1", n1))
d.addCallback(elaborateResult1)
d2=fact.getRootObject()
n2=10000
d2.addCallback(lambda obj: obj.callRemote("compute2", n2))
d2.addCallback(elaborateResult2)
reactor.run()



From radix at twistedmatrix.com  Mon Sep 28 12:37:14 2009
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Mon, 28 Sep 2009 14:37:14 -0400
Subject: [Twisted-Python] Boston Twisted Sprint
In-Reply-To: <b282a1340909251058i40b2da73y8e2eb0722d2adb5e@mail.gmail.com>
References: <b282a1340909201909w5eb75b2fve13a00ffe32cc368@mail.gmail.com>
	<60ed19d40909202033r75c1f225mf4e70c67483f8e48@mail.gmail.com>
	<d9047f780909220107h111e0671ic25f4a4c3156c58e@mail.gmail.com>
	<60ed19d40909220945v5bbaa14awd1ecd26a3c381214@mail.gmail.com>
	<b282a1340909251058i40b2da73y8e2eb0722d2adb5e@mail.gmail.com>
Message-ID: <60ed19d40909281137g29da9a9ckde2cb2aba168887@mail.gmail.com>

On Fri, Sep 25, 2009 at 1:58 PM, Jessica McKellar
<jessica.mckellar at gmail.com> wrote:
> This sounds like plenty of support for a Sprint! People have mostly
> expressed an ability to attend Monday, Tuesday, and Wednesday, so it seems

I'll see everyone there tonight.


-- 
Christopher Armstrong
http://radix.twistedmatrix.com/
http://planet-if.com/



From rutt.4 at osu.edu  Mon Sep 28 18:10:33 2009
From: rutt.4 at osu.edu (Benjamin Rutt)
Date: Mon, 28 Sep 2009 20:10:33 -0400
Subject: [Twisted-Python] getPeer() inside conch
Message-ID: <68f3f1f70909281710p1ddc3a47l134208c06b680cdb@mail.gmail.com>

Hello.  I'm moderately experienced with twisted, and am starting out writing
an ssh server using conch.  I'm writing a protocol which inherits from the
recvline.HistoricRecvLine class. It has connectionMade() and lineReceived()
methods so it feels a lot like the twisted.protocols.basic.LineReceiver
class I'm used to using.

But, it seems the recvline.HistoricRecvLine class wants me to use
self.terminal rather than self.transport to talk to the client.  That's
fine, but it seems that self.terminal lacks a getPeer() method.  How do I
find out the IP address of the client inside a conch ssh server?  (For
starters, I wish to log all successful client connections so I know who's
connecting).

I searched and found the below issue.  I assume it is related, but could
someone confirm?

http://twistedmatrix.com/trac/ticket/2453

Thanks.
-- 
Benjamin Rutt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090928/1d9fcb04/attachment.html>

From glyph at twistedmatrix.com  Mon Sep 28 23:58:37 2009
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Tue, 29 Sep 2009 01:58:37 -0400
Subject: [Twisted-Python] getPeer() inside conch
In-Reply-To: <68f3f1f70909281710p1ddc3a47l134208c06b680cdb@mail.gmail.com>
References: <68f3f1f70909281710p1ddc3a47l134208c06b680cdb@mail.gmail.com>
Message-ID: <d9047f780909282258v167e852cl76105ba92adb976a@mail.gmail.com>

On Mon, Sep 28, 2009 at 8:10 PM, Benjamin Rutt <rutt.4 at osu.edu> wrote:


> But, it seems the recvline.HistoricRecvLine class wants me to use
> self.terminal rather than self.transport to talk to the client.  That's
> fine, but it seems that self.terminal lacks a getPeer() method.  How do I
> find out the IP address of the client inside a conch ssh server?  (For
> starters, I wish to log all successful client connections so I know who's
> connecting).
>

So, after reading through the code a bit, self.terminal should be an
ITerminalTransport.  There are only a few ITerminalTransport
implementations, several of which are also Protocol subclasses and therefore
have a 'transport' attribute.

I'm not 100% sure what the eventual composiiton of your application will be,
but you could try self.terminal.transport.getPeer(); it might work.

Technically speaking, ITerminalTransport is a subclass of ITransport, which
has a getPeer method.  Therefore any classes which implement
ITerminalTransport without providing getPeer are buggy.  It would be really
helpful if you could provide a patch that addressed the issue you mention
:).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090929/fa62648f/attachment.html>

From antonio.beamud at gmail.com  Tue Sep 29 02:27:34 2009
From: antonio.beamud at gmail.com (Antonio Beamud Montero)
Date: Tue, 29 Sep 2009 10:27:34 +0200
Subject: [Twisted-Python] AlreadyCalledError trying more than a server
Message-ID: <4AC1C4F6.1060609@gmail.com>

Hi all:
I've implemented my client as comes in twisted documentation
(FingerProxy example).
I want to connect with several machines at the same time, send and
receive data from this servers and start again (monitoring in one word).

I've created a ClientFactory and a loop like this:

    conf['hosts'] = [list of hostnames]
    commands = [list of string commands, like 'status' or 'temp']
    def runall(data):
        nodes = []

        for h in conf['hosts']:
                mcf = manager.ClientFactory(commands)
                reactor.connectTCP(h, SERVER_PORT, mcf)
                nodes.append(mcf.deferred)

        dlist = defer.DeferredList(nodes)
        dlist.addCallback(runall)
        dlist.addErrback(lambda _: None)

Only when the ClientFactory receives a 'bye' response, call's the
d.callback('ok').
With a only host, works perfect, but trying to run against two o more
hosts, the next exception is raised:

File "/usr/lib/python2.6/site-packages/twisted/internet/defer.py", line
293, in _startRunCallbacks
    raise AlreadyCalledError
twisted.internet.defer.AlreadyCalledError:

In my debug console:

This is the deferredList
[<Deferred at 0x84c3d6c>, <Deferred at 0x852d1ac>]
...
IPv4Address(TCP, 'ira', 10162) <Deferred at 0x84c3d6c>
IPv4Address(TCP, 'lujuria', 10162) <Deferred at 0x84c3d6c  current
result: 'ok'>

Twisted is invoking the same deferred, and chaining them, the 'ok'
result is produced by the 'ira' callback invokation instead using everly
deferred separately.

What I'm doing wrong...?

A lot of thanks.





From exarkun at twistedmatrix.com  Tue Sep 29 09:11:29 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 29 Sep 2009 15:11:29 -0000
Subject: [Twisted-Python] Twisted and db table changes
In-Reply-To: <522237.35121.qm@web112510.mail.gq1.yahoo.com>
References: <836263.16845.qm@web112504.mail.gq1.yahoo.com>
	<522237.35121.qm@web112510.mail.gq1.yahoo.com>
Message-ID: <20090929151129.1533.1787329823.divmod.xquotient.403@localhost.localdomain>

On 28 Sep, 01:07 pm, burslem2001 at yahoo.com wrote:
>Hello,
>
>I have a server that needs to track changes on a table database.
>
>When a table changes it needs the server accesses the table and send 
>data out.
>
>Not sure what the best approach to do this in twisted. Do I create a 
>thread in twisted and monitor for any changes in a table or can I 
>create
>a callback method to be triggered when a change occurs to table.

There's nothing special in Twisted for this.  If your database provides 
callback functionality, then you should be able to hook this up to your 
Twisted application somehow.  If you provide some more information about 
this, someone may be able to help you figure out how to do that.  If 
your database doesn't, then you either need a separate out-of-band 
notification when updates happen or you need to poll the database.

Jean-Paul



From exarkun at twistedmatrix.com  Tue Sep 29 10:24:43 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 29 Sep 2009 16:24:43 -0000
Subject: [Twisted-Python] AlreadyCalledError trying more than a server
In-Reply-To: <4AC1C4F6.1060609@gmail.com>
References: <4AC1C4F6.1060609@gmail.com>
Message-ID: <20090929162443.1533.1953865337.divmod.xquotient.405@localhost.localdomain>

On 08:27 am, antonio.beamud at gmail.com wrote:
>Hi all:
>I've implemented my client as comes in twisted documentation
>(FingerProxy example).
>I want to connect with several machines at the same time, send and
>receive data from this servers and start again (monitoring in one 
>word).
>
>I've created a ClientFactory and a loop like this:
>
>    conf['hosts'] = [list of hostnames]
>    commands = [list of string commands, like 'status' or 'temp']
>    def runall(data):
>        nodes = []
>
>        for h in conf['hosts']:
>                mcf = manager.ClientFactory(commands)
>                reactor.connectTCP(h, SERVER_PORT, mcf)
>                nodes.append(mcf.deferred)
>
>        dlist = defer.DeferredList(nodes)
>        dlist.addCallback(runall)
>        dlist.addErrback(lambda _: None)
>
>Only when the ClientFactory receives a 'bye' response, call's the
>d.callback('ok').
>With a only host, works perfect, but trying to run against two o more
>hosts, the next exception is raised:
>
>File "/usr/lib/python2.6/site-packages/twisted/internet/defer.py", line
>293, in _startRunCallbacks
>    raise AlreadyCalledError
>twisted.internet.defer.AlreadyCalledError:
>
>In my debug console:
>
>This is the deferredList
>[<Deferred at 0x84c3d6c>, <Deferred at 0x852d1ac>]
>...
>IPv4Address(TCP, 'ira', 10162) <Deferred at 0x84c3d6c>
>IPv4Address(TCP, 'lujuria', 10162) <Deferred at 0x84c3d6c  current
>result: 'ok'>
>
>Twisted is invoking the same deferred, and chaining them, the 'ok'
>result is produced by the 'ira' callback invokation instead using 
>everly
>deferred separately.
>
>What I'm doing wrong...?

I don't think you've shared enough of your code for anyone to figure out 
what you're doing wrong (aside from calling one Deferred's callback 
method more than once).  Your "runall" function above looks okay, so 
perhaps the problem is in some other part of your code.  An SSCCE 
(<http://sscce.org/>) would be the best thing for you to share.

Jean-Paul



From matusis at yahoo.com  Tue Sep 29 12:16:40 2009
From: matusis at yahoo.com (Alec Matusis)
Date: Tue, 29 Sep 2009 11:16:40 -0700
Subject: [Twisted-Python] I found an interisting comment about Twisted vs.
	Erlang
Message-ID: <01e801ca4130$fe2120a0$fa6361e0$@com>

I have been a long time Twisted user, and I do not know Erlang.
I run into this interesting comment in engineering notes on Facebook Chat
scalability:

http://www.facebook.com/note.php?note_id=51412338919&comments

Leif K-Brooks
I'm curious whether you considered using the Python library Twisted
(http://twistedmatrix.com/) before deciding on Erlang. Its architecture is
also supposed to be able to support a large number of concurrent
connections. I would be interested in hearing about any issues you
discovered with it.
February 18 at 3:17am Report

Lawrence Oluyede
TwistedMatrix does not possess the capabilities of Erlang, not even close.
February 18 at 4:35am Report
 

What do you guys think?





From listsin at integrateddevcorp.com  Tue Sep 29 13:02:21 2009
From: listsin at integrateddevcorp.com (Steve Steiner (listsin))
Date: Tue, 29 Sep 2009 15:02:21 -0400
Subject: [Twisted-Python] I found an interisting comment about Twisted
	vs. Erlang
In-Reply-To: <01e801ca4130$fe2120a0$fa6361e0$@com>
References: <01e801ca4130$fe2120a0$fa6361e0$@com>
Message-ID: <F68410CC-9772-491C-911D-CD9F96EFFC38@integrateddevcorp.com>


On Sep 29, 2009, at 2:16 PM, Alec Matusis wrote:

> I have been a long time Twisted user, and I do not know Erlang.
> I run into this interesting comment in engineering notes on Facebook  
> Chat
> scalability:
>
> http://www.facebook.com/note.php?note_id=51412338919&comments
>
> Leif K-Brooks
> I'm curious whether you considered using the Python library Twisted
> (http://twistedmatrix.com/) before deciding on Erlang. Its  
> architecture is
> also supposed to be able to support a large number of concurrent
> connections. I would be interested in hearing about any issues you
> discovered with it.
> February 18 at 3:17am  Report
>
> Lawrence Oluyede
> TwistedMatrix does not possess the capabilities of Erlang, not even  
> close.
> February 18 at 4:35am  Report
> What do you guys think?

Doesn't sound like he even knows the name of the library.

I'm sure they did a thorough analysis  ;-).

S




From markv at lumierevfx.com  Tue Sep 29 13:04:20 2009
From: markv at lumierevfx.com (Mark Visser)
Date: Tue, 29 Sep 2009 15:04:20 -0400
Subject: [Twisted-Python] Twisted and db table changes
In-Reply-To: <522237.35121.qm@web112510.mail.gq1.yahoo.com>
References: <522237.35121.qm@web112510.mail.gq1.yahoo.com>
Message-ID: <4AC25A34.3050202@lumierevfx.com>

gary clark wrote:
> Hello,
>
> I have a server that needs to track changes on a table database.
>
> When a table changes it needs the server accesses the table and send data out.
>
> Not sure what the best approach to do this in twisted. Do I create a thread in twisted and monitor for any changes in a table or can I create
> a callback method to be triggered when a change occurs to table.
>   
Check out twisted.internet.task.LoopingCall. It will run a callback 
periodically, during which you can poll for changes.


-- 
Mark Visser, Software Director
Lumire VFX
Email: markv at lumierevfx.com
Phone: +1-514-316-1080 x3030




From listsin at integrateddevcorp.com  Tue Sep 29 13:08:44 2009
From: listsin at integrateddevcorp.com (Steve Steiner (listsin))
Date: Tue, 29 Sep 2009 15:08:44 -0400
Subject: [Twisted-Python] strange exception on Python 2.6 + Snow Leopard
In-Reply-To: <413E681C-F5D0-4C8E-BF70-7B28347454FA@bubblehouse.org>
References: <AE767569-997B-4F1C-9F4F-E984E4659B0E@bubblehouse.org>
	<B23801ED-A811-4221-A110-6B363DA00319@integrateddevcorp.com>
	<413E681C-F5D0-4C8E-BF70-7B28347454FA@bubblehouse.org>
Message-ID: <2324094B-A1AF-47BA-ADD2-0E1004EFBC43@integrateddevcorp.com>

> Hmm, sorry to question, but are you sure?

You're right, different error.  Sorry for not replying earlier -- just  
found this when Googling for 10.6 build instructions as I'm having a  
devil of a time building from SVN on 10.6 with Python 2.6.1.

S





From lvh at laurensvh.be  Tue Sep 29 13:11:54 2009
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Tue, 29 Sep 2009 21:11:54 +0200
Subject: [Twisted-Python] I found an interisting comment about Twisted
	vs. Erlang
In-Reply-To: <F68410CC-9772-491C-911D-CD9F96EFFC38@integrateddevcorp.com>
References: <01e801ca4130$fe2120a0$fa6361e0$@com>
	<F68410CC-9772-491C-911D-CD9F96EFFC38@integrateddevcorp.com>
Message-ID: <cedc0c090909291211i6a1d7536r5c9ea1bbe9a1861@mail.gmail.com>

One is a language. The other is an event loop. I'm not sure how we are
supposed to compare the two. If he would've said E and Twisted,
perhaps it'd be a more interesting comparison :-)

Also, what Steve said jumped right into my eye as well. Don't get me
wrong. I like Erlang -- it's functional, it's robust, it's very easy
to make your programs execute in parallel. RabbitMQ and Scalaris are
two examples of *excellent* Erlang software. I don't really think
Erlang was a bad choice -- I just think they don't know enough about
Twisted to judge :-)


Laurens



From drew.smathers at gmail.com  Tue Sep 29 13:22:35 2009
From: drew.smathers at gmail.com (Drew Smathers)
Date: Tue, 29 Sep 2009 15:22:35 -0400
Subject: [Twisted-Python] I found an interisting comment about Twisted
	vs. Erlang
In-Reply-To: <01e801ca4130$fe2120a0$fa6361e0$@com>
References: <01e801ca4130$fe2120a0$fa6361e0$@com>
Message-ID: <368574aa0909291222g514a0f3fn5df64dacbf0c4e25@mail.gmail.com>

On Tue, Sep 29, 2009 at 2:16 PM, Alec Matusis <matusis at yahoo.com> wrote:

> I have been a long time Twisted user, and I do not know Erlang.
> I run into this interesting comment in engineering notes on Facebook Chat
> scalability:
>
> http://www.facebook.com/note.php?note_id=51412338919&comments
>
> Leif K-Brooks
> I'm curious whether you considered using the Python library Twisted
> (http://twistedmatrix.com/) before deciding on Erlang. Its architecture is
> also supposed to be able to support a large number of concurrent
> connections. I would be interested in hearing about any issues you
> discovered with it.
> February 18 at 3:17am  Report
>
> Lawrence Oluyede
> TwistedMatrix does not possess the capabilities of Erlang, not even close.
> February 18 at 4:35am  Report
>
>
> What do you guys think?
>
>
I remember reading that comment and sighing to myself.  First of all:

1. Twisted is a framework for event-driven programming
2. Erlang is a programming language / VM

So any comparison between the two doesn't make much sense.

Secondly, the use of the term "TwistedMatrix" indicates pretty strongly that
the poster knows next-to-nothing about Twisted.    At surface level the
comment is completely unqualified, lacking any detail.

<sarcasm>It doesn't "possess the capabilities" of Erlang?  So Erlang has
some unspecified capabilities (they most be really important ones) that
Twisted obviously does not.  That's great to know.  Thanks for the detail
there Mr. Oluyede.</sarcasm>

A comparison between Erlang and Python the VMs might be more interesting.
First of all, Erlang was developed from the ground up with performance and
concurrency in mind, whereas Python was not.  The primary design concern of
Python, arguably, was to develop a language that was easy to learn with a
syntax that lended itself to programs that are easy to read and thus easy to
maintain.

A fast VM is great, but do you want that at the expense of having less
choices for third-party libraries or having to learn an entirely different
language paradigm.  If you work primarily with OOP, for example, Erlang
might be a dramatic shift for your development team - switching to FP.
That's not much fun if programming is your livlihood moreso than a hobby.

Personally I prefer Python to Erlang accepting the performance trade-off.
There's more choices when it comes to open-source libraries for the language
and it performs well enough.  I'm writing production applications in Python
using Twisted and we have 0 issues with performance (memory, CPU, IO).
Twisted does handle a large number of connections.  The issues we've run
into in our application have always been at a layer above Twisted (i.e. our
shit that's broken, not Twisted).  It performs, it's stable.  So ... what
are my motiviations for abandoning Python/Twisted in favor or Erlang?

Let me just say though that I really like Erlang.  I think it's a decent
language with simple-enough syntax and a kick-ass concurrency paradigm -
shared nothing and message passing.  It looks like things are also
dramatically improving in the Erlang open-space (and it seems this is
improving dramatically: http://erlware.org/erlware/index.html), so it might
not be long before there are as many or more library choices for Erlang as
Python.

Nonethelless, please let first-hand experience using a language, gaining
productivity and then buy-in from your development team be the key deciding
factors - not some arbitrary number in a benchmark test or even worse a
completely uninformed comment on a Facebook dev blog post.

-Drew
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090929/8efee957/attachment.html>

From lvh at laurensvh.be  Tue Sep 29 13:28:00 2009
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Tue, 29 Sep 2009 21:28:00 +0200
Subject: [Twisted-Python] I found an interisting comment about Twisted
	vs. Erlang
In-Reply-To: <368574aa0909291222g514a0f3fn5df64dacbf0c4e25@mail.gmail.com>
References: <01e801ca4130$fe2120a0$fa6361e0$@com>
	<368574aa0909291222g514a0f3fn5df64dacbf0c4e25@mail.gmail.com>
Message-ID: <cedc0c090909291228n73eead25gd9235649d96f7cb3@mail.gmail.com>

I think we are accounting way too much time to the unfounded
unaccountable random blathering of a troll :-)



From matusis at yahoo.com  Tue Sep 29 13:36:54 2009
From: matusis at yahoo.com (Alec Matusis)
Date: Tue, 29 Sep 2009 12:36:54 -0700
Subject: [Twisted-Python] I found an interisting comment about
	Twisted	vs. Erlang
In-Reply-To: <cedc0c090909291228n73eead25gd9235649d96f7cb3@mail.gmail.com>
References: <01e801ca4130$fe2120a0$fa6361e0$@com>	<368574aa0909291222g514a0f3fn5df64dacbf0c4e25@mail.gmail.com>
	<cedc0c090909291228n73eead25gd9235649d96f7cb3@mail.gmail.com>
Message-ID: <024901ca413c$337e7850$9a7b68f0$@com>

> I think we are accounting way too much time to the unfounded
> unaccountable random blathering of a troll :-)


As you can see from the %CPU column, I have my reasons for concern ;) This
is current copy and paste from a node with 2x quad core xeon L5420  @
2.50GHz - 1 twistd process per core.

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND

24448 nobody     20   0  991m 607m 2452 R   99  4.3  24764:37 twistd

28553 nobody     20   0  909m 453m 2412 R   95  3.2   1346:51 twistd

24640 nobody     20   0 1092m 676m 2452 R   93  4.8  32750:14 twistd

29900 nobody     20   0  802m 362m 2412 R   93  2.6   1180:53 twistd

24279 nobody     20   0  761m 277m 2424 R   42  2.0  13891:58 twistd

32422 nobody     20   0 1381m 962m 2372 R   10  6.9  13241:54 twistd

24210 nobody     20   0  599m 236m 2396 S    4  1.7   9063:29 twistd

29862 nobody     20   0  323m  14m 2384 S    2  0.1  71:53.50 twistd     



> -----Original Message-----
> From: twisted-python-bounces at twistedmatrix.com [mailto:twisted-python-
> bounces at twistedmatrix.com] On Behalf Of Laurens Van Houtven
> Sent: Tuesday, September 29, 2009 12:28 PM
> To: Twisted general discussion
> Subject: Re: [Twisted-Python] I found an interisting comment about
> Twisted vs. Erlang
> 
> I think we are accounting way too much time to the unfounded
> unaccountable random blathering of a troll :-)
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python





From jkakar at kakar.ca  Tue Sep 29 13:48:17 2009
From: jkakar at kakar.ca (Jamu Kakar)
Date: Tue, 29 Sep 2009 12:48:17 -0700
Subject: [Twisted-Python] I found an interisting comment about Twisted
	vs. Erlang
In-Reply-To: <024901ca413c$337e7850$9a7b68f0$@com>
References: <01e801ca4130$fe2120a0$fa6361e0$@com>
	<368574aa0909291222g514a0f3fn5df64dacbf0c4e25@mail.gmail.com>
	<cedc0c090909291228n73eead25gd9235649d96f7cb3@mail.gmail.com>
	<024901ca413c$337e7850$9a7b68f0$@com>
Message-ID: <aa66e7aa0909291248j4e21d702q5d59fcd7b6703274@mail.gmail.com>

Hi Alec,

On Tue, Sep 29, 2009 at 12:36 PM, Alec Matusis <matusis at yahoo.com> wrote:
> As you can see from the %CPU column, I have my reasons for concern ;) This
> is current copy and paste from a node with 2x quad core xeon L5420 @
> 2.50GHz - 1 twistd process per core.
>
> PID USER   PR NI VIRT RES SHR S %CPU %MEM  TIME+ COMMAND
>
> 24448 nobody   20  0 991m 607m 2452 R  99 4.3 24764:37 twistd
>
> 28553 nobody   20  0 909m 453m 2412 R  95 3.2  1346:51 twistd
>
> 24640 nobody   20  0 1092m 676m 2452 R  93 4.8 32750:14 twistd
>
> 29900 nobody   20  0 802m 362m 2412 R  93 2.6  1180:53 twistd
>
> 24279 nobody   20  0 761m 277m 2424 R  42 2.0 13891:58 twistd
>
> 32422 nobody   20  0 1381m 962m 2372 R  10 6.9 13241:54 twistd
>
> 24210 nobody   20  0 599m 236m 2396 S  4 1.7  9063:29 twistd
>
> 29862 nobody   20  0 323m 14m 2384 S  2 0.1 71:53.50 twistd

What was your application doing at the time?  Was it idle, heavily
loaded, somewhere in the middle?  What is the QoS for each client
connecting to your service?  Are requests being handled in a timely
fashion?  Do the users of your service perceive a performance
problem or do you just not like seeing big numbers in the %CPU
column?  Are performance problems really in Twisted, or are they
because of suboptimal decisions in application logic/factoring?

Posting a list like that and suggesting that something is wrong (or
right, even) with Twisted isn't really productive: there's nowhere
obvious to go from here to make it better.

My first glance at those numbers made me think Twisted is awesome
because it lets you write an application that can actually make full
use of the CPU power you have, but I'm guessing that's not what
you're getting at. :)

Thanks,
J.



From matusis at yahoo.com  Tue Sep 29 13:51:26 2009
From: matusis at yahoo.com (Alec Matusis)
Date: Tue, 29 Sep 2009 12:51:26 -0700
Subject: [Twisted-Python] I found an interisting comment about	Twisted	vs.
	Erlang
Message-ID: <026001ca413e$3b99e680$b2cdb380$@com>

PS.

>From my experience, the hardest problem in running large-scale Twisted
servers is finding memory leaks, and to a lesser extent debugging
intermittent silent server crashes.
It's not easy to attach a debugger to a production sever if you are looking
for sources of intermittent crashes for example. 
Looking for memory leaks, esp Python garbage collection problems/circular
references is not easy as well, the manhole does not always help here.
Again, attaching a debugger that allows to list *all* objects in the memory,
is not often feasible for a production server under high load. And memory
leaks often appear only under CPU utilization, due to problems with
scheduling garbage collection.

I believe E has a way to dynamically and meaningfully inspect ALL objects in
the memory of any running process.

> I think we are accounting way too much time to the unfounded
> unaccountable random blathering of a troll :-)


As you can see from the %CPU column, I have my reasons for concern ;) This
is current copy and paste from a node with 2x quad core xeon L5420  @
2.50GHz - 1 twistd process per core.

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND

24448 nobody     20   0  991m 607m 2452 R   99  4.3  24764:37 twistd

28553 nobody     20   0  909m 453m 2412 R   95  3.2   1346:51 twistd

24640 nobody     20   0 1092m 676m 2452 R   93  4.8  32750:14 twistd

29900 nobody     20   0  802m 362m 2412 R   93  2.6   1180:53 twistd

24279 nobody     20   0  761m 277m 2424 R   42  2.0  13891:58 twistd

32422 nobody     20   0 1381m 962m 2372 R   10  6.9  13241:54 twistd

24210 nobody     20   0  599m 236m 2396 S    4  1.7   9063:29 twistd

29862 nobody     20   0  323m  14m 2384 S    2  0.1  71:53.50 twistd     





> -----Original Message-----
> From: twisted-python-bounces at twistedmatrix.com [mailto:twisted-python-
> bounces at twistedmatrix.com] On Behalf Of Laurens Van Houtven
> Sent: Tuesday, September 29, 2009 12:28 PM
> To: Twisted general discussion
> Subject: Re: [Twisted-Python] I found an interisting comment about
> Twisted vs. Erlang
> 
> I think we are accounting way too much time to the unfounded
> unaccountable random blathering of a troll :-)
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From matusis at yahoo.com  Tue Sep 29 14:00:40 2009
From: matusis at yahoo.com (Alec Matusis)
Date: Tue, 29 Sep 2009 13:00:40 -0700
Subject: [Twisted-Python] I found an interisting comment about
	Twisted	vs. Erlang
In-Reply-To: <aa66e7aa0909291248j4e21d702q5d59fcd7b6703274@mail.gmail.com>
References: <01e801ca4130$fe2120a0$fa6361e0$@com>	<368574aa0909291222g514a0f3fn5df64dacbf0c4e25@mail.gmail.com>	<cedc0c090909291228n73eead25gd9235649d96f7cb3@mail.gmail.com>	<024901ca413c$337e7850$9a7b68f0$@com>
	<aa66e7aa0909291248j4e21d702q5d59fcd7b6703274@mail.gmail.com>
Message-ID: <026a01ca413f$857ce3a0$9076aae0$@com>

> What was your application doing at the time?  Was it idle, heavily
> loaded, somewhere in the middle?  What is the QoS for each client
> connecting to your service?  Are requests being handled in a timely
> fashion?  Do the users of your service perceive a performance
> problem or do you just not like seeing big numbers in the %CPU
> column?  Are performance problems really in Twisted, or are they
> because of suboptimal decisions in application logic/factoring?
> 
> Posting a list like that and suggesting that something is wrong (or
> right, even) with Twisted isn't really productive: there's nowhere
> obvious to go from here to make it better.
> 
> My first glance at those numbers made me think Twisted is awesome
> because it lets you write an application that can actually make full
> use of the CPU power you have, but I'm guessing that's not what
> you're getting at. :)

I am actually not suggesting the performance is bad, it's quite decent. 

Each process is handling about 30,000 clients, using epoll reactor, and is heavily loaded as you can see from S column, which shows "R".  The app broadcasts the messages sent from a client to groups of other clients, and has some other logic.
I posted this twice by mistake, but as I wrote in my second post, the debugging is pretty hard, esp memory leaks... Also, performance debugging- say how much time is spent in each function? FB engineers seems to say that debugging of E is transparent, but I do not have the first hand knowledge. 

> -----Original Message-----
> From: twisted-python-bounces at twistedmatrix.com [mailto:twisted-python-
> bounces at twistedmatrix.com] On Behalf Of Jamu Kakar
> Sent: Tuesday, September 29, 2009 12:48 PM
> To: Twisted general discussion
> Subject: Re: [Twisted-Python] I found an interisting comment about
> Twisted vs. Erlang
> 
> Hi Alec,
> 
> On Tue, Sep 29, 2009 at 12:36 PM, Alec Matusis <matusis at yahoo.com>
> wrote:
> > As you can see from the %CPU column, I have my reasons for concern ;)
> This
> > is current copy and paste from a node with 2x quad core xeon L5420  @
> > 2.50GHz - 1 twistd process per core.
> >
> >  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
> >
> > 24448 nobody     20   0  991m 607m 2452 R   99  4.3  24764:37 twistd
> >
> > 28553 nobody     20   0  909m 453m 2412 R   95  3.2   1346:51 twistd
> >
> > 24640 nobody     20   0 1092m 676m 2452 R   93  4.8  32750:14 twistd
> >
> > 29900 nobody     20   0  802m 362m 2412 R   93  2.6   1180:53 twistd
> >
> > 24279 nobody     20   0  761m 277m 2424 R   42  2.0  13891:58 twistd
> >
> > 32422 nobody     20   0 1381m 962m 2372 R   10  6.9  13241:54 twistd
> >
> > 24210 nobody     20   0  599m 236m 2396 S    4  1.7   9063:29 twistd
> >
> > 29862 nobody     20   0  323m  14m 2384 S    2  0.1  71:53.50 twistd
> 
> What was your application doing at the time?  Was it idle, heavily
> loaded, somewhere in the middle?  What is the QoS for each client
> connecting to your service?  Are requests being handled in a timely
> fashion?  Do the users of your service perceive a performance
> problem or do you just not like seeing big numbers in the %CPU
> column?  Are performance problems really in Twisted, or are they
> because of suboptimal decisions in application logic/factoring?
> 
> Posting a list like that and suggesting that something is wrong (or
> right, even) with Twisted isn't really productive: there's nowhere
> obvious to go from here to make it better.
> 
> My first glance at those numbers made me think Twisted is awesome
> because it lets you write an application that can actually make full
> use of the CPU power you have, but I'm guessing that's not what
> you're getting at. :)
> 
> Thanks,
> J.
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From phil at bubblehouse.org  Tue Sep 29 14:37:22 2009
From: phil at bubblehouse.org (Phil Christensen)
Date: Tue, 29 Sep 2009 16:37:22 -0400
Subject: [Twisted-Python] strange exception on Python 2.6 + Snow Leopard
In-Reply-To: <2324094B-A1AF-47BA-ADD2-0E1004EFBC43@integrateddevcorp.com>
References: <AE767569-997B-4F1C-9F4F-E984E4659B0E@bubblehouse.org>
	<B23801ED-A811-4221-A110-6B363DA00319@integrateddevcorp.com>
	<413E681C-F5D0-4C8E-BF70-7B28347454FA@bubblehouse.org>
	<2324094B-A1AF-47BA-ADD2-0E1004EFBC43@integrateddevcorp.com>
Message-ID: <E49D8702-DE0B-496C-9DE4-60FB1D8AA81E@bubblehouse.org>

On Sep 29, 2009, at 3:08 PM, Steve Steiner (listsin) wrote:
>> Hmm, sorry to question, but are you sure?
>
> You're right, different error.  Sorry for not replying earlier -- just
> found this when Googling for 10.6 build instructions as I'm having a
> devil of a time building from SVN on 10.6 with Python 2.6.1.

No worries, I'm glad you bumped this thread. I'm still seeing the  
traceback on startup (exceptions.AttributeError: 'module' object has  
no attribute 'ssl_test'), although they haven't affected my use of  
Twisted. Just annoying to see, that's all.

What kind of build problems are you having? I just updated/installed  
SVN HEAD without much of a problem using `python setup.py develop`.

I do see the following issues during compilation, which cause the  
epoll reactor to fail. I don't use the epoll reactor, so I haven't  
bothered trying to fix it:

gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -fwrapv - 
Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch ppc - 
arch x86_64 -pipe -I/System/Library/Frameworks/Python.framework/ 
Versions/2.6/include/python2.6 -c conftest.c -o conftest.o
gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -fwrapv - 
Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch ppc - 
arch x86_64 -pipe -I/System/Library/Frameworks/Python.framework/ 
Versions/2.6/include/python2.6 -c conftest.c -o conftest.o
conftest.c:1:23: error: sys/epoll.h: No such file or directory
conftest.c:1:23: error: sys/epoll.h: No such file or directory
conftest.c:1:23: error: sys/epoll.h: No such file or directory
lipo: can't open input file: /var/tmp//ccGt0yAW.out (No such file or  
directory)



-phil



From exarkun at twistedmatrix.com  Tue Sep 29 14:42:33 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 29 Sep 2009 20:42:33 -0000
Subject: [Twisted-Python] strange exception on Python 2.6 + Snow Leopard
In-Reply-To: <E49D8702-DE0B-496C-9DE4-60FB1D8AA81E@bubblehouse.org>
References: <AE767569-997B-4F1C-9F4F-E984E4659B0E@bubblehouse.org>
	<B23801ED-A811-4221-A110-6B363DA00319@integrateddevcorp.com>
	<413E681C-F5D0-4C8E-BF70-7B28347454FA@bubblehouse.org>
	<2324094B-A1AF-47BA-ADD2-0E1004EFBC43@integrateddevcorp.com>
	<E49D8702-DE0B-496C-9DE4-60FB1D8AA81E@bubblehouse.org>
Message-ID: <20090929204233.1533.1544059758.divmod.xquotient.420@localhost.localdomain>

On 08:37 pm, phil at bubblehouse.org wrote:
>On Sep 29, 2009, at 3:08 PM, Steve Steiner (listsin) wrote:
>>>Hmm, sorry to question, but are you sure?
>>
>>You're right, different error.  Sorry for not replying earlier -- just
>>found this when Googling for 10.6 build instructions as I'm having a
>>devil of a time building from SVN on 10.6 with Python 2.6.1.
>
>No worries, I'm glad you bumped this thread. I'm still seeing the
>traceback on startup (exceptions.AttributeError: 'module' object has
>no attribute 'ssl_test'), although they haven't affected my use of
>Twisted. Just annoying to see, that's all.
>
>What kind of build problems are you having? I just updated/installed
>SVN HEAD without much of a problem using `python setup.py develop`.
>
>I do see the following issues during compilation, which cause the
>epoll reactor to fail. I don't use the epoll reactor, so I haven't
>bothered trying to fix it:
>
>gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -fwrapv -
>Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch ppc -
>arch x86_64 -pipe -I/System/Library/Frameworks/Python.framework/
>Versions/2.6/include/python2.6 -c conftest.c -o conftest.o
>gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -fwrapv -
>Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch ppc -
>arch x86_64 -pipe -I/System/Library/Frameworks/Python.framework/
>Versions/2.6/include/python2.6 -c conftest.c -o conftest.o
>conftest.c:1:23: error: sys/epoll.h: No such file or directory
>conftest.c:1:23: error: sys/epoll.h: No such file or directory
>conftest.c:1:23: error: sys/epoll.h: No such file or directory
>lipo: can't open input file: /var/tmp//ccGt0yAW.out (No such file or
>directory)

These aren't really fixable.  OS X does not have epoll.  The epoll 
reactor is for Linux.

Jean-Paul



From listsin at integrateddevcorp.com  Tue Sep 29 14:44:22 2009
From: listsin at integrateddevcorp.com (Steve Steiner (listsin))
Date: Tue, 29 Sep 2009 16:44:22 -0400
Subject: [Twisted-Python] strange exception on Python 2.6 + Snow Leopard
In-Reply-To: <E49D8702-DE0B-496C-9DE4-60FB1D8AA81E@bubblehouse.org>
References: <AE767569-997B-4F1C-9F4F-E984E4659B0E@bubblehouse.org>
	<B23801ED-A811-4221-A110-6B363DA00319@integrateddevcorp.com>
	<413E681C-F5D0-4C8E-BF70-7B28347454FA@bubblehouse.org>
	<2324094B-A1AF-47BA-ADD2-0E1004EFBC43@integrateddevcorp.com>
	<E49D8702-DE0B-496C-9DE4-60FB1D8AA81E@bubblehouse.org>
Message-ID: <565137B7-868F-4A75-987F-2003D1E5AEB5@integrateddevcorp.com>


On Sep 29, 2009, at 4:37 PM, Phil Christensen wrote:

> On Sep 29, 2009, at 3:08 PM, Steve Steiner (listsin) wrote:
>>> Hmm, sorry to question, but are you sure?
>>
>> You're right, different error.  Sorry for not replying earlier --  
>> just
>> found this when Googling for 10.6 build instructions as I'm having a
>> devil of a time building from SVN on 10.6 with Python 2.6.1.
>
> No worries, I'm glad you bumped this thread. I'm still seeing the  
> traceback on startup (exceptions.AttributeError: 'module' object has  
> no attribute 'ssl_test'), although they haven't affected my use of  
> Twisted. Just annoying to see, that's all.
>
> What kind of build problems are you having? I just updated/installed  
> SVN HEAD without much of a problem using `python setup.py develop`.

Mine goes much more horribly wrong than the error you listed...  It  
looks like, now that I look more closely, it's trying to build against  
the 10.4SDK which I think I may not have installed.  Maybe that's all  
it is!

Thanks,

S


thon setup.py develop
running develop
running egg_info
writing requirements to Twisted.egg-info/requires.txt
writing Twisted.egg-info/PKG-INFO
writing top-level names to Twisted.egg-info/top_level.txt
writing dependency_links to Twisted.egg-info/dependency_links.txt
unrecognized .svn/entries format in
reading manifest file 'Twisted.egg-info/SOURCES.txt'
writing manifest file 'Twisted.egg-info/SOURCES.txt'
running build_ext
Compiling with an SDK that doesn't seem to exist: /Developer/SDKs/ 
MacOSX10.4u.sdk
Please check your Xcode installation
gcc -arch ppc -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk - 
fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -O3 -I/Library/ 
Frameworks/Python.framework/Versions/2.6/include/python2.6 -c  
conftest.c -o conftest.o
conftest.c:1:21: error: rpc/rpc.h: No such file or directory
conftest.c:1:21: error: rpc/rpc.h: No such file or directory
lipo: can't figure out the architecture type of: /var/folders/ 
71/716EyABBHM8EA6F853Q-vU+++TI/-Tmp-//cc7bbdzM.out
Compiling with an SDK that doesn't seem to exist: /Developer/SDKs/ 
MacOSX10.4u.sdk
Please check your Xcode installation
gcc -arch ppc -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk - 
fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -O3 -I/Library/ 
Frameworks/Python.framework/Versions/2.6/include/python2.6 -c  
conftest.c -o conftest.o
conftest.c:1:23: error: sys/epoll.h: No such file or directory
conftest.c:1:23: error: sys/epoll.h: No such file or directory
lipo: can't figure out the architecture type of: /var/folders/ 
71/716EyABBHM8EA6F853Q-vU+++TI/-Tmp-//cc954vfC.out
building 'twisted.protocols._c_urlarg' extension
Compiling with an SDK that doesn't seem to exist: /Developer/SDKs/ 
MacOSX10.4u.sdk
Please check your Xcode installation
gcc -arch ppc -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk - 
fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -O3 -I/Library/ 
Frameworks/Python.framework/Versions/2.6/include/python2.6 -c twisted/ 
protocols/_c_urlarg.c -o build/temp.macosx-10.3-i386-2.6/twisted/ 
protocols/_c_urlarg.o
In file included from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:19:20: error: limits.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:22:2: error: #error "Something's broken.  UCHAR_MAX should be  
defined in limits.h."
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:26:2: error: #error "Python's source code assumes C's  
unsigned char is an 8-bit type."
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:33:19: error: stdio.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:35:5: error: #error "Python.h requires that stdio.h define  
NULL."
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:38:20: error: string.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:40:19: error: errno.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:42:20: error: stdlib.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:44:20: error: unistd.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:56:20: error: assert.h: No such file or directory
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:58,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:7:20: error: stdint.h: No such file or directory
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:58,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:89: error: expected =, ,, ;, asm or __attribute__  
before Py_uintptr_t
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:90: error: expected =, ,, ;, asm or __attribute__  
before Py_intptr_t
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:113: error: expected =, ,, ;, asm or __attribute__  
before Py_ssize_t
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:235:76: error: math.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:242:22: error: sys/time.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:243:18: error: time.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:261:24: error: sys/select.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:300:22: error: sys/stat.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:479:21: error: termios.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:480: warning: struct winsize declared inside parameter list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:480: warning: its scope is only this definition or  
declaration, which is probably not what you want
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:480: warning: struct termios declared inside parameter list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:481: error: expected =, ,, ;, asm or __attribute__  
before forkpty
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:78,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pymem.h:52: warning: parameter names (without types) in function  
declaration
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pymem.h:53: error: expected declaration specifiers or ... before  
size_t
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:80,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:107: error: expected specifier-qualifier-list before  
Py_ssize_t
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:111: error: expected specifier-qualifier-list before  
Py_ssize_t
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:137: error: expected declaration specifiers or ... before  
* token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:137: error: Py_ssize_t declared as function returning a  
function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:157: error: readbufferproc declared as function returning a  
function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:158: error: writebufferproc declared as function returning  
a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:159: error: segcountproc declared as function returning a  
function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:160: error: charbufferproc declared as function returning a  
function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:167: error: field len declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:168: error: field itemsize declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:274: error: expected specifier-qualifier-list before lenfunc
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:288: error: expected specifier-qualifier-list before lenfunc
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:305: error: expected declaration specifiers or ... before  
FILE
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:319: warning: struct _typeobject declared inside parameter  
list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:320: warning: struct _typeobject declared inside parameter  
list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:323: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:323: error: field ob_size declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:325: error: field tp_basicsize declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:325: error: field tp_itemsize declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:370: error: field tp_weaklistoffset declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:385: error: field tp_dictoffset declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:456: error: expected declaration specifiers or ... before  
FILE
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:81,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
objimpl.h:97: warning: parameter names (without types) in function  
declaration
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
objimpl.h:98: error: expected declaration specifiers or ... before  
size_t
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
objimpl.h:228: error: PyGC_Collect declared as function returning a  
function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
objimpl.h:249: error: field gc_refs declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
objimpl.h:288: warning: parameter names (without types) in function  
declaration
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:85,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:4:20: error: stdarg.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:57:19: error: ctype.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:120:21: error: wchar.h: No such file or directory
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:85,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:413: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:414: error: field length declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:489: error: PyUnicodeUCS2_GetSize declared as  
function returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:553: error: expected declaration specifiers or ...  
before va_list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:572: error: expected ;, , or ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:590: error: expected ;, , or ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:1234: error: PyUnicodeUCS2_Tailmatch declared as  
function returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:1246: error: PyUnicodeUCS2_Find declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:1255: error: PyUnicodeUCS2_Count declared as  
function returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:86,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
intobject.h:24: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
intobject.h:39: warning: parameter names (without types) in function  
declaration
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
intobject.h:42: error: PyInt_AsSsize_t declared as function  
returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:88,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
longobject.h:21: warning: parameter names (without types) in function  
declaration
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
longobject.h:26: error: PyLong_AsSsize_t declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
longobject.h:73: error: expected =, ,, ;, asm or  
__attribute__ before _PyLong_NumBits
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
longobject.h:89: error: expected declaration specifiers or ...  
before size_t
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
longobject.h:112: error: expected declaration specifiers or ...  
before size_t
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:89,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
floatobject.h:15: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:91,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
complexobject.h:41: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:94,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
stringobject.h:36: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
stringobject.h:36: error: field ob_size declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
stringobject.h:64: error: expected declaration specifiers or ...  
before va_list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
stringobject.h:68: error: PyString_Size declared as function  
returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:98,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
bytearrayobject.h:23: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
bytearrayobject.h:23: error: field ob_size declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
bytearrayobject.h:26: error: field ob_alloc declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
bytearrayobject.h:42: error: PyByteArray_Size declared as function  
returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:99,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
tupleobject.h:25: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
tupleobject.h:25: error: field ob_size declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
tupleobject.h:41: error: PyTuple_Size declared as function returning  
a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:100,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
listobject.h:23: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
listobject.h:23: error: field ob_size declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
listobject.h:38: error: field allocated declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
listobject.h:48: error: PyList_Size declared as function returning a  
function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:101,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:55: error: field me_hash declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:71: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:72: error: field ma_fill declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:73: error: field ma_used declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:79: error: field ma_mask declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:109: error: PyDict_Size declared as function returning  
a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:103,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
setobject.h:36: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
setobject.h:38: error: field fill declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
setobject.h:39: error: field used declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
setobject.h:45: error: field mask declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
setobject.h:85: error: PySet_Size declared as function returning a  
function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:104,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
methodobject.h:82: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:106,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
funcobject.h:22: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:107,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
classobject.h:13: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
classobject.h:24: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
classobject.h:31: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:108,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:11: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:12: error: expected specifier-qualifier-list before FILE
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:42: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:44: error: expected =, ,, ;, asm or  
__attribute__ before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:63: error: expected declaration specifiers or ...  
before FILE
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:64: error: expected =, ,, ;, asm or  
__attribute__ before Py_UniversalNewlineFread
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:109,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
cobject.h:53: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:110,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
traceback.h:13: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:111,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
sliceobject.h:23: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:112,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
cellobject.h:10: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:114,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
genobject.h:13: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:115,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
descrobject.h:46: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
descrobject.h:50: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
descrobject.h:55: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
descrobject.h:60: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
descrobject.h:65: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:117,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
weakrefobject.h:16: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
weakrefobject.h:65: error: _PyWeakref_GetWeakrefCount declared as  
function returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:120,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:10: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:17: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:31: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:37: error: field start declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:38: error: field end declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:44: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:52: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:321: error: expected declaration specifiers or ... before  
size_t
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:322: error: format string argument not a string type
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:323: error: expected declaration specifiers or ... before  
size_t
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:323: error: expected declaration specifiers or ... before  
va_list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:324: error: format string argument not a string type
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:124,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyarena.h:50: error: expected declaration specifiers or ... before  
size_t
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:125,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
modsupport.h:23: error: expected declaration specifiers or ...  
before va_list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
modsupport.h:35: error: expected declaration specifiers or ...  
before va_list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
modsupport.h:37: error: expected declaration specifiers or ...  
before va_list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
modsupport.h:38: error: expected declaration specifiers or ...  
before va_list
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:126,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:35: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:36: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:38: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:39: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:40: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:45: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:55: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:61: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:78: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:146: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:148: error: expected ) before * token
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:128,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
sysmodule.h:12: error: expected =, ,, ;, asm or  
__attribute__ before * token
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:130,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
import.h:31: error: expected declaration specifiers or ... before  
size_t
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
import.h:31: error: expected declaration specifiers or ... before  
FILE
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:132,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:421: error: PyObject_Size declared as function returning  
a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:433: error: PyObject_Length declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:436: error: _PyObject_LengthHint declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:859: error: PyNumber_AsSsize_t declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1054: error: PySequence_Size declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1063: error: PySequence_Length declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1185: error: PySequence_Count declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1204: error: _PySequence_IterSearch declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1229: error: PySequence_Index declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1268: error: PyMapping_Size declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1278: error: PyMapping_Length declared as function  
returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/compile.h:5,
                  from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:134,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
code.h:11: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:137,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pystrtod.h:11: error: expected declaration specifiers or ... before  
size_t
twisted/protocols/_c_urlarg.c: In function unquote:
twisted/protocols/_c_urlarg.c:44: error: NULL undeclared (first use  
in this function)
twisted/protocols/_c_urlarg.c:44: error: (Each undeclared identifier  
is reported only once
twisted/protocols/_c_urlarg.c:44: error: for each function it appears  
in.)
twisted/protocols/_c_urlarg.c:48: warning: return from incompatible  
pointer type
twisted/protocols/_c_urlarg.c:52: warning: comparison of distinct  
pointer types lacks a cast
twisted/protocols/_c_urlarg.c:53: warning: return from incompatible  
pointer type
twisted/protocols/_c_urlarg.c:65: warning: passing argument 3 of  
PycStringIO->cwrite makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:75: warning: passing argument 3 of  
PycStringIO->cwrite makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:83: warning: passing argument 3 of  
PycStringIO->cwrite makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:85: warning: passing argument 3 of  
PycStringIO->cwrite makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:93: warning: passing argument 3 of  
PycStringIO->cwrite makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:96: warning: passing argument 3 of  
PycStringIO->cwrite makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:97: warning: passing argument 3 of  
PycStringIO->cwrite makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:103: error: PyObject has no member  
named ob_refcnt
twisted/protocols/_c_urlarg.c:103: error: lvalue required as decrement  
operand
twisted/protocols/_c_urlarg.c:103: error: lvalue required as decrement  
operand
twisted/protocols/_c_urlarg.c:103: error: PyObject has no member  
named ob_type
twisted/protocols/_c_urlarg.c:103: error: request for member  
tp_dealloc in something not a structure or union
twisted/protocols/_c_urlarg.c:103: error: called object *(char **) 
&<erroneous-expression> is not a function
twisted/protocols/_c_urlarg.c: At top level:
twisted/protocols/_c_urlarg.c:109: error: NULL undeclared here (not  
in a function)
twisted/protocols/_c_urlarg.c:109: error: initializer element is not  
constant
twisted/protocols/_c_urlarg.c:109: error: (near initialization for  
_c_urlarg_methods[1].ml_name)
twisted/protocols/_c_urlarg.c:109: error: initializer element is not  
constant
twisted/protocols/_c_urlarg.c:109: error: (near initialization for  
_c_urlarg_methods[1].ml_meth)
twisted/protocols/_c_urlarg.c: In function init_c_urlarg:
twisted/protocols/_c_urlarg.c:123: warning: passing argument 3 of  
PyErr_NewException from incompatible pointer type
In file included from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:19:20: error: limits.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:22:2: error: #error "Something's broken.  UCHAR_MAX should be  
defined in limits.h."
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:26:2: error: #error "Python's source code assumes C's  
unsigned char is an 8-bit type."
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:33:19: error: stdio.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:35:5: error: #error "Python.h requires that stdio.h define  
NULL."
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:38:20: error: string.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:40:19: error: errno.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:42:20: error: stdlib.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:44:20: error: unistd.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
Python.h:56:20: error: assert.h: No such file or directory
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:58,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:7:20: error: stdint.h: No such file or directory
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:58,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:89: error: expected =, ,, ;, asm or __attribute__  
before Py_uintptr_t
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:90: error: expected =, ,, ;, asm or __attribute__  
before Py_intptr_t
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:113: error: expected =, ,, ;, asm or __attribute__  
before Py_ssize_t
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:235:76: error: math.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:242:22: error: sys/time.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:243:18: error: time.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:261:24: error: sys/select.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:300:22: error: sys/stat.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:479:21: error: termios.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:480: warning: struct winsize declared inside parameter list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:480: warning: its scope is only this definition or  
declaration, which is probably not what you want
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:480: warning: struct termios declared inside parameter list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyport.h:481: error: expected =, ,, ;, asm or __attribute__  
before forkpty
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:78,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pymem.h:52: warning: parameter names (without types) in function  
declaration
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pymem.h:53: error: expected declaration specifiers or ... before  
size_t
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:80,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:107: error: expected specifier-qualifier-list before  
Py_ssize_t
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:111: error: expected specifier-qualifier-list before  
Py_ssize_t
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:137: error: expected declaration specifiers or ... before  
* token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:137: error: Py_ssize_t declared as function returning a  
function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:157: error: readbufferproc declared as function returning a  
function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:158: error: writebufferproc declared as function returning  
a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:159: error: segcountproc declared as function returning a  
function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:160: error: charbufferproc declared as function returning a  
function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:167: error: field len declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:168: error: field itemsize declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:274: error: expected specifier-qualifier-list before lenfunc
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:288: error: expected specifier-qualifier-list before lenfunc
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:305: error: expected declaration specifiers or ... before  
FILE
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:319: warning: struct _typeobject declared inside parameter  
list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:320: warning: struct _typeobject declared inside parameter  
list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:323: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:323: error: field ob_size declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:325: error: field tp_basicsize declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:325: error: field tp_itemsize declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:370: error: field tp_weaklistoffset declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:385: error: field tp_dictoffset declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
object.h:456: error: expected declaration specifiers or ... before  
FILE
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:81,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
objimpl.h:97: warning: parameter names (without types) in function  
declaration
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
objimpl.h:98: error: expected declaration specifiers or ... before  
size_t
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
objimpl.h:228: error: PyGC_Collect declared as function returning a  
function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
objimpl.h:249: error: field gc_refs declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
objimpl.h:288: warning: parameter names (without types) in function  
declaration
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:85,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:4:20: error: stdarg.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:57:19: error: ctype.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:120:21: error: wchar.h: No such file or directory
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:85,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:413: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:414: error: field length declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:489: error: PyUnicodeUCS2_GetSize declared as  
function returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:553: error: expected declaration specifiers or ...  
before va_list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:572: error: expected ;, , or ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:590: error: expected ;, , or ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:1234: error: PyUnicodeUCS2_Tailmatch declared as  
function returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:1246: error: PyUnicodeUCS2_Find declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
unicodeobject.h:1255: error: PyUnicodeUCS2_Count declared as  
function returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:86,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
intobject.h:24: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
intobject.h:39: warning: parameter names (without types) in function  
declaration
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
intobject.h:42: error: PyInt_AsSsize_t declared as function  
returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:88,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
longobject.h:21: warning: parameter names (without types) in function  
declaration
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
longobject.h:26: error: PyLong_AsSsize_t declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
longobject.h:73: error: expected =, ,, ;, asm or  
__attribute__ before _PyLong_NumBits
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
longobject.h:89: error: expected declaration specifiers or ...  
before size_t
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
longobject.h:112: error: expected declaration specifiers or ...  
before size_t
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:89,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
floatobject.h:15: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:91,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
complexobject.h:41: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:94,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
stringobject.h:36: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
stringobject.h:36: error: field ob_size declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
stringobject.h:64: error: expected declaration specifiers or ...  
before va_list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
stringobject.h:68: error: PyString_Size declared as function  
returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:98,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
bytearrayobject.h:23: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
bytearrayobject.h:23: error: field ob_size declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
bytearrayobject.h:26: error: field ob_alloc declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
bytearrayobject.h:42: error: PyByteArray_Size declared as function  
returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:99,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
tupleobject.h:25: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
tupleobject.h:25: error: field ob_size declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
tupleobject.h:41: error: PyTuple_Size declared as function returning  
a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:100,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
listobject.h:23: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
listobject.h:23: error: field ob_size declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
listobject.h:38: error: field allocated declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
listobject.h:48: error: PyList_Size declared as function returning a  
function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:101,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:55: error: field me_hash declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:71: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:72: error: field ma_fill declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:73: error: field ma_used declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:79: error: field ma_mask declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
dictobject.h:109: error: PyDict_Size declared as function returning  
a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:103,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
setobject.h:36: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
setobject.h:38: error: field fill declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
setobject.h:39: error: field used declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
setobject.h:45: error: field mask declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
setobject.h:85: error: PySet_Size declared as function returning a  
function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:104,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
methodobject.h:82: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:106,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
funcobject.h:22: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:107,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
classobject.h:13: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
classobject.h:24: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
classobject.h:31: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:108,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:11: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:12: error: expected specifier-qualifier-list before FILE
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:42: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:44: error: expected =, ,, ;, asm or  
__attribute__ before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:63: error: expected declaration specifiers or ...  
before FILE
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
fileobject.h:64: error: expected =, ,, ;, asm or  
__attribute__ before Py_UniversalNewlineFread
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:109,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
cobject.h:53: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:110,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
traceback.h:13: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:111,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
sliceobject.h:23: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:112,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
cellobject.h:10: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:114,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
genobject.h:13: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:115,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
descrobject.h:46: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
descrobject.h:50: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
descrobject.h:55: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
descrobject.h:60: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
descrobject.h:65: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:117,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
weakrefobject.h:16: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
weakrefobject.h:65: error: _PyWeakref_GetWeakrefCount declared as  
function returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:120,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:10: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:17: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:31: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:37: error: field start declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:38: error: field end declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:44: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:52: error: field ob_refcnt declared as a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:321: error: expected declaration specifiers or ... before  
size_t
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:322: error: format string argument not a string type
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:323: error: expected declaration specifiers or ... before  
size_t
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:323: error: expected declaration specifiers or ... before  
va_list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyerrors.h:324: error: format string argument not a string type
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:124,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pyarena.h:50: error: expected declaration specifiers or ... before  
size_t
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:125,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
modsupport.h:23: error: expected declaration specifiers or ...  
before va_list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
modsupport.h:35: error: expected declaration specifiers or ...  
before va_list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
modsupport.h:37: error: expected declaration specifiers or ...  
before va_list
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
modsupport.h:38: error: expected declaration specifiers or ...  
before va_list
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:126,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:35: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:36: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:38: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:39: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:40: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:45: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:55: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:61: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:78: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:146: error: expected ) before * token
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pythonrun.h:148: error: expected ) before * token
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:128,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
sysmodule.h:12: error: expected =, ,, ;, asm or  
__attribute__ before * token
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:130,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
import.h:31: error: expected declaration specifiers or ... before  
size_t
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
import.h:31: error: expected declaration specifiers or ... before  
FILE
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:132,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:421: error: PyObject_Size declared as function returning  
a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:433: error: PyObject_Length declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:436: error: _PyObject_LengthHint declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:859: error: PyNumber_AsSsize_t declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1054: error: PySequence_Size declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1063: error: PySequence_Length declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1185: error: PySequence_Count declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1204: error: _PySequence_IterSearch declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1229: error: PySequence_Index declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1268: error: PyMapping_Size declared as function  
returning a function
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
abstract.h:1278: error: PyMapping_Length declared as function  
returning a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/compile.h:5,
                  from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:134,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
code.h:11: error: field ob_refcnt declared as a function
In file included from /Library/Frameworks/Python.framework/Versions/ 
2.6/include/python2.6/Python.h:137,
                  from twisted/protocols/_c_urlarg.c:12:
/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/ 
pystrtod.h:11: error: expected declaration specifiers or ... before  
size_t
twisted/protocols/_c_urlarg.c: In function unquote:
twisted/protocols/_c_urlarg.c:44: error: NULL undeclared (first use  
in this function)
twisted/protocols/_c_urlarg.c:44: error: (Each undeclared identifier  
is reported only once
twisted/protocols/_c_urlarg.c:44: error: for each function it appears  
in.)
twisted/protocols/_c_urlarg.c:48: warning: return from incompatible  
pointer type
twisted/protocols/_c_urlarg.c:52: warning: comparison of distinct  
pointer types lacks a cast
twisted/protocols/_c_urlarg.c:53: warning: return from incompatible  
pointer type
twisted/protocols/_c_urlarg.c:65: warning: passing argument 3 of  
PycStringIO->cwrite makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:75: warning: passing argument 3 of  
PycStringIO->cwrite makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:83: warning: passing argument 3 of  
PycStringIO->cwrite makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:85: warning: passing argument 3 of  
PycStringIO->cwrite makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:93: warning: passing argument 3 of  
PycStringIO->cwrite makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:96: warning: passing argument 3 of  
PycStringIO->cwrite makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:97: warning: passing argument 3 of  
PycStringIO->cwrite makes pointer from integer without a cast
twisted/protocols/_c_urlarg.c:103: error: PyObject has no member  
named ob_refcnt
twisted/protocols/_c_urlarg.c:103: error: lvalue required as decrement  
operand
twisted/protocols/_c_urlarg.c:103: error: lvalue required as decrement  
operand
twisted/protocols/_c_urlarg.c:103: error: PyObject has no member  
named ob_type
twisted/protocols/_c_urlarg.c:103: error: request for member  
tp_dealloc in something not a structure or union
twisted/protocols/_c_urlarg.c:103: error: called object *(char **) 
&<erroneous-expression> is not a function
twisted/protocols/_c_urlarg.c: At top level:
twisted/protocols/_c_urlarg.c:109: error: NULL undeclared here (not  
in a function)
twisted/protocols/_c_urlarg.c:109: error: initializer element is not  
constant
twisted/protocols/_c_urlarg.c:109: error: (near initialization for  
_c_urlarg_methods[1].ml_name)
twisted/protocols/_c_urlarg.c:109: error: initializer element is not  
constant
twisted/protocols/_c_urlarg.c:109: error: (near initialization for  
_c_urlarg_methods[1].ml_meth)
twisted/protocols/_c_urlarg.c: In function init_c_urlarg:
twisted/protocols/_c_urlarg.c:123: warning: passing argument 3 of  
PyErr_NewException from incompatible pointer type
lipo: can't figure out the architecture type of: /var/folders/ 
71/716EyABBHM8EA6F853Q-vU+++TI/-Tmp-//ccVGxOtq.out
error: command 'gcc' failed with exit status 1




From phil at bubblehouse.org  Tue Sep 29 14:50:29 2009
From: phil at bubblehouse.org (Phil Christensen)
Date: Tue, 29 Sep 2009 16:50:29 -0400
Subject: [Twisted-Python] strange exception on Python 2.6 + Snow Leopard
In-Reply-To: <20090929204233.1533.1544059758.divmod.xquotient.420@localhost.localdomain>
References: <AE767569-997B-4F1C-9F4F-E984E4659B0E@bubblehouse.org>
	<B23801ED-A811-4221-A110-6B363DA00319@integrateddevcorp.com>
	<413E681C-F5D0-4C8E-BF70-7B28347454FA@bubblehouse.org>
	<2324094B-A1AF-47BA-ADD2-0E1004EFBC43@integrateddevcorp.com>
	<E49D8702-DE0B-496C-9DE4-60FB1D8AA81E@bubblehouse.org>
	<20090929204233.1533.1544059758.divmod.xquotient.420@localhost.localdomain>
Message-ID: <5540F8D9-6206-47A2-BE7E-2B769120432C@bubblehouse.org>

On Sep 29, 2009, at 4:42 PM, exarkun at twistedmatrix.com wrote:
> On 08:37 pm, phil at bubblehouse.org wrote:
>> I do see the following issues during compilation, which cause the
>> epoll reactor to fail. I don't use the epoll reactor, so I haven't
>> bothered trying to fix it:
[snip]
> These aren't really fixable.  OS X does not have epoll.  The epoll
> reactor is for Linux.

Ah yes, I should have known that.

Any idea what's causing these tracebacks on startup? I've grepped  
everywhere for occurrences of ssl_test, _test, cleared out my  
dropin.cache files, etc, but nothing makes any difference.

-phil




Traceback (most recent call last):
   File "/Users/phil/Workspace/Twisted/twisted/python/usage.py", line  
413, in __str__
     return self.getSynopsis() + '\n' + self.getUsage(width=None)
   File "/Users/phil/Workspace/Twisted/twisted/python/usage.py", line  
449, in getUsage
     for (cmd, short, parser, desc) in self.subCommands:
   File "/Users/phil/Workspace/Twisted/twisted/application/app.py",  
line 675, in subCommands
     for plug in plugins:
   File "/Users/phil/Workspace/Twisted/twisted/plugin.py", line 200,  
in getPlugins
     allDropins = getCache(package)
--- <exception caught here> ---
   File "/Users/phil/Workspace/Twisted/twisted/plugin.py", line 165,  
in getCache
     provider = pluginModule.load()
   File "/Users/phil/Workspace/Twisted/twisted/python/modules.py",  
line 381, in load
     return self.pathEntry.pythonPath.moduleLoader(self.name)
   File "/Users/phil/Workspace/Twisted/twisted/python/reflect.py",  
line 473, in namedAny
     obj = getattr(obj, n)
exceptions.AttributeError: 'module' object has no attribute 'ssl_test'



From jarrod at vertigrated.com  Tue Sep 29 15:54:21 2009
From: jarrod at vertigrated.com (Jarrod Roberson)
Date: Tue, 29 Sep 2009 17:54:21 -0400
Subject: [Twisted-Python] I found an interisting comment about Twisted
	vs. Erlang
In-Reply-To: <cedc0c090909291211i6a1d7536r5c9ea1bbe9a1861@mail.gmail.com>
References: <01e801ca4130$fe2120a0$fa6361e0$@com>
	<F68410CC-9772-491C-911D-CD9F96EFFC38@integrateddevcorp.com>
	<cedc0c090909291211i6a1d7536r5c9ea1bbe9a1861@mail.gmail.com>
Message-ID: <fa3d0c740909291454s60f8ec6dy2af5fa02d15fec4d@mail.gmail.com>

On Tue, Sep 29, 2009 at 3:11 PM, Laurens Van Houtven <lvh at laurensvh.be>wrote:

> One is a language. The other is an event loop. I'm not sure how we are
> supposed to compare the two. If he would've said E and Twisted,
> perhaps it'd be a more interesting comparison :-)
>
> Also, what Steve said jumped right into my eye as well. Don't get me
> wrong. I like Erlang -- it's functional, it's robust, it's very easy
> to make your programs execute in parallel. RabbitMQ and Scalaris are
> two examples of *excellent* Erlang software. I don't really think
> Erlang was a bad choice -- I just think they don't know enough about
> Twisted to judge :-)
>
>
> Laurens
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

actually one is a Concurrent Virtual Machine and language and Applications
Framework (OTP) the other is a single threaded event loop library.
Apples and Oranges. I have written production level code at a major ISP
using Twisted. It became very painful once
we started getting CPU bound on 32 core CPU machines. We had to run multiple
instances of our Twisted server implementation
to saturate the machine. I have since "ported" the same application to
Erlang/OTP. It is about 1/5 the amount of code.
And it scales 1:1 horizontally (adding more CPUs local or remote ) and
vertically (adding FASTER cpus ) with no code changes.

The broad statement that Twisted doesn't possess the capabilities of
Erlang/OTP is pretty much accurate. Each solves a different problem.
Granted Erlang/OTP is definately a super-set of what Twisted does

-- 
Jarrod Roberson
678.551.2852
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090929/8c2711fe/attachment.html>

From rutt.4 at osu.edu  Tue Sep 29 17:16:44 2009
From: rutt.4 at osu.edu (Benjamin Rutt)
Date: Tue, 29 Sep 2009 19:16:44 -0400
Subject: [Twisted-Python] getPeer() inside conch
In-Reply-To: <d9047f780909282258v167e852cl76105ba92adb976a@mail.gmail.com>
References: <68f3f1f70909281710p1ddc3a47l134208c06b680cdb@mail.gmail.com>
	<d9047f780909282258v167e852cl76105ba92adb976a@mail.gmail.com>
Message-ID: <68f3f1f70909291616tc8c23c3t75de943b725a9b21@mail.gmail.com>

The code:

    print 'hello, peer %s' % (self.terminal.transport.getPeer())

Fails with:

    AttributeError: SSHSessionProcessProtocol instance has no attribute
'getPeer'

One possible patch to twisted 8.2.0's conch/ssh/session.py's
SSHSessionProcessProtocol class to add a getPeer() method would be:

$ diff -u session.py.orig session.py
--- session.py.orig     2009-06-10 06:30:33.000000000 -0400
+++ session.py  2009-09-29 12:30:01.622444000 -0400
@@ -13,7 +13,7 @@

 import struct

-from twisted.internet import protocol
+from twisted.internet import protocol, address
 from twisted.python import log
 from twisted.conch.interfaces import ISession
 from twisted.conch.ssh import common, channel
@@ -210,6 +210,10 @@
     def loseConnection(self):
         self.session.loseConnection()

+    def getPeer(self):
+        client = self.session.conn.transport.transport.client
+        return address.IPv4Address('TCP', client[0], client[1])
+
 class SSHSessionClient(protocol.Protocol):

     def dataReceived(self, data):

Could someone comment on this?  (I'm fairly certain ssh runs over TCP, but
less certain that the mouthful self.session.conn.transport.transport.client
isn't invading layers of abstraction in an unfriendly way).  Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090929/e9cc4bcb/attachment.html>

From glyph at twistedmatrix.com  Tue Sep 29 20:48:54 2009
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Tue, 29 Sep 2009 22:48:54 -0400
Subject: [Twisted-Python] getPeer() inside conch
In-Reply-To: <68f3f1f70909291616tc8c23c3t75de943b725a9b21@mail.gmail.com>
References: <68f3f1f70909281710p1ddc3a47l134208c06b680cdb@mail.gmail.com>
	<d9047f780909282258v167e852cl76105ba92adb976a@mail.gmail.com>
	<68f3f1f70909291616tc8c23c3t75de943b725a9b21@mail.gmail.com>
Message-ID: <d9047f780909291948n5e433b54l6b4a5cf1b82ec831@mail.gmail.com>

On Tue, Sep 29, 2009 at 7:16 PM, Benjamin Rutt <rutt.4 at osu.edu> wrote:

> The code:
>
>     print 'hello, peer %s' % (self.terminal.transport.getPeer())
>
> Fails with:
>
>     AttributeError: SSHSessionProcessProtocol instance has no attribute
> 'getPeer'
>

Oops.  Looks like my reading of the code was wrong.

One possible patch to twisted 8.2.0's conch/ssh/session.py's
> SSHSessionProcessProtocol class to add a getPeer() method would be:
>


> +        client = self.session.conn.transport.transport.client
> +        return address.IPv4Address('TCP', client[0], client[1])
> Could someone comment on this?  (I'm fairly certain ssh runs over TCP, but
> less certain that the mouthful self.session.conn.transport.transport.client
> isn't invading layers of abstraction in an unfriendly way).  Thanks.
>

So, nominally, all those things are public (none of them starts with an
underscore) but I'd have to sift through the code to understand exactly how
kosher they are (whether those attributes are a part of the interfaces in
question).

However, (A) 'TCP' isn't quite the right answer here, because actually
there's some SSH in the way, and (B) I am pretty sure there is a getPeer
closer than that.  In particular,

SSHSessionProcessProtocol.session is a twisted.conch.session.SSHSession
SSHSession subclasses twisted.conch.ssh.channel.SSHChannel
SSHChannel implements getPeer already.

So you *should* be able to do self.session.getPeer() and get something
useful.  I hope.

That said, the getPeer implementation in question should really be returning
an IAddress, not a tuple, so you can subclass or delegate to IPv4Address and
still access 'host' on the return value.

Independent of the grossness, if you can contribute some test coverage for
this, we could make the implementation less gross later :).  This is
especially important since hopefully many of these conch APIs will change in
the near future.  (z3p, are you planning on coming to the sprint this
week...?)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090929/5c0bdf29/attachment.html>

From antonio.beamud at gmail.com  Wed Sep 30 06:20:23 2009
From: antonio.beamud at gmail.com (Antonio Beamud Montero)
Date: Wed, 30 Sep 2009 14:20:23 +0200
Subject: [Twisted-Python] AlreadyCalledError trying more than a server
In-Reply-To: <20090929162443.1533.1953865337.divmod.xquotient.405@localhost.localdomain>
References: <4AC1C4F6.1060609@gmail.com>
	<20090929162443.1533.1953865337.divmod.xquotient.405@localhost.localdomain>
Message-ID: <4AC34D07.1060108@gmail.com>

exarkun at twistedmatrix.com escribi:
> I don't think you've shared enough of your code for anyone to figure out 
> what you're doing wrong (aside from calling one Deferred's callback 
> method more than once).  Your "runall" function above looks okay, so 
> perhaps the problem is in some other part of your code.  An SSCCE 
> (<http://sscce.org/>) would be the best thing for you to share
>   
Yes, you're right. I've created an example with the minimal code to 
reproduce the problem.

http://pastebin.com/f4e445dc3

A lot of thanks.

Greetings.



From andrew at bemusement.org  Wed Sep 30 08:10:16 2009
From: andrew at bemusement.org (Andrew Bennetts)
Date: Thu, 1 Oct 2009 00:10:16 +1000
Subject: [Twisted-Python] AlreadyCalledError trying more than a server
In-Reply-To: <4AC34D07.1060108@gmail.com>
References: <4AC1C4F6.1060609@gmail.com>
	<20090929162443.1533.1953865337.divmod.xquotient.405@localhost.localdomain>
	<4AC34D07.1060108@gmail.com>
Message-ID: <20090930141016.GG1931@steerpike.home.puzzling.org>

Antonio Beamud Montero wrote:
> exarkun at twistedmatrix.com escribi:
> > I don't think you've shared enough of your code for anyone to figure out 
> > what you're doing wrong (aside from calling one Deferred's callback 
> > method more than once).  Your "runall" function above looks okay, so 
> > perhaps the problem is in some other part of your code.  An SSCCE 
> > (<http://sscce.org/>) would be the best thing for you to share
> >   
> Yes, you're right. I've created an example with the minimal code to 
> reproduce the problem.
> 
> http://pastebin.com/f4e445dc3

This fails the self-contained criterion, by the way, as it assumes access to a
host called romeo.

[It also fairly clear isn't *completely* minimal either, e.g. I'm pretty sure
the addCallback(runall) is not required to see your problem.  I also suspect
that you only need one connection to demonstrate this bug, but because it's not
self-contained it's hard to tell how far from minimal it actually is.]

Anyhow, my guess (it has to be a guess, as your example isn't self-contained, so
I cannot run it to examine the problem for myself), is that the problem is that:

 a) you create one Deferred per connection (self.deferred in MyClientFactory),
    combined with...
 b) your lineReceived invokes gotData which often calls that deferred without
    any robust defence against calling that deferred multiple times.

e.g.  consider a server that sends "221 2.0.0 Bye" followed by a blank line.
The specific data triggering your problem should be obvious from the output of
your print repr(data) line in gotData.

-Andrew.




From exarkun at twistedmatrix.com  Wed Sep 30 08:38:48 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 30 Sep 2009 14:38:48 -0000
Subject: [Twisted-Python] strange exception on Python 2.6 + Snow Leopard
In-Reply-To: <5540F8D9-6206-47A2-BE7E-2B769120432C@bubblehouse.org>
References: <AE767569-997B-4F1C-9F4F-E984E4659B0E@bubblehouse.org>
	<B23801ED-A811-4221-A110-6B363DA00319@integrateddevcorp.com>
	<413E681C-F5D0-4C8E-BF70-7B28347454FA@bubblehouse.org>
	<2324094B-A1AF-47BA-ADD2-0E1004EFBC43@integrateddevcorp.com>
	<E49D8702-DE0B-496C-9DE4-60FB1D8AA81E@bubblehouse.org>
	<20090929204233.1533.1544059758.divmod.xquotient.420@localhost.localdomain>
	<5540F8D9-6206-47A2-BE7E-2B769120432C@bubblehouse.org>
Message-ID: <20090930143848.1533.553112061.divmod.xquotient.435@localhost.localdomain>

On 29 Sep, 08:50 pm, phil at bubblehouse.org wrote:
>On Sep 29, 2009, at 4:42 PM, exarkun at twistedmatrix.com wrote:
>>On 08:37 pm, phil at bubblehouse.org wrote:
>>>I do see the following issues during compilation, which cause the
>>>epoll reactor to fail. I don't use the epoll reactor, so I haven't
>>>bothered trying to fix it:
>[snip]
>>These aren't really fixable.  OS X does not have epoll.  The epoll
>>reactor is for Linux.
>
>Ah yes, I should have known that.
>
>Any idea what's causing these tracebacks on startup? I've grepped
>everywhere for occurrences of ssl_test, _test, cleared out my
>dropin.cache files, etc, but nothing makes any difference.

If you startup with debugging enabled, do you get dropped into pdb at 
the point of the error?  If so, it should be simple to look around at 
some of the data and track down the cause.

Jean-Paul



From matusis at yahoo.com  Wed Sep 30 14:00:05 2009
From: matusis at yahoo.com (Alec Matusis)
Date: Wed, 30 Sep 2009 13:00:05 -0700
Subject: [Twisted-Python] I found an interisting comment about Twisted
	vs. Erlang
In-Reply-To: <fa3d0c740909291454s60f8ec6dy2af5fa02d15fec4d@mail.gmail.com>
References: <01e801ca4130$fe2120a0$fa6361e0$@com>	<F68410CC-9772-491C-911D-CD9F96EFFC38@integrateddevcorp.com>	<cedc0c090909291211i6a1d7536r5c9ea1bbe9a1861@mail.gmail.com>
	<fa3d0c740909291454s60f8ec6dy2af5fa02d15fec4d@mail.gmail.com>
Message-ID: <01d501ca4208$9ad96330$d08c2990$@com>


>It became very painful once
>we started getting CPU bound on 32 core CPU machines. We had to run
multiple instances of our Twisted server implementation
>to saturate the machine. I have since "ported" the same application to
Erlang/OTP. It is about 1/5 the amount of code.
>And it scales 1:1 horizontally (adding more CPUs local or remote ) and
vertically (adding FASTER cpus ) with no code changes.

>The broad statement that Twisted doesn't possess the capabilities of
Erlang/OTP is pretty much accurate. Each solves a different problem.
>Granted Erlang/OTP is definately a super-set of what Twisted does.


Scaling horizontally, i.e. parallelization of twisted servers over multiple
cores is a difficult problem. We run this on 8 and 16 core CPU machines, one
process per core, and I use UDP multicasts on internal LAN for messaging
between the servers (both inside the same physical machine, or to remote
nodes). This is of course less than ideal. It would be very nice if Twisted
had some inherent capabilities for scaling horizontally.
 

> vertically (adding FASTER cpus ) with no code changes.

When you ported, were you able to serve to less or more clients on the same
speed CPU core?

The biggest advantage of Twisted is a shorter development time, and the
availability of Python libraries. But I wonder if running something of the
scale of Facebook chat would be feasible at all, or if there are people on
this list that have run many parallelized twisted servers that saturated
many multi-core machines? In other words, are there practical examples of
large-scale Twisted deployment? 





From cyclops at speakeasy.net  Wed Sep 30 14:16:48 2009
From: cyclops at speakeasy.net (John Crawford)
Date: Wed, 30 Sep 2009 16:16:48 -0400
Subject: [Twisted-Python] Not understanding buildProtocol(),
	any clarification?
In-Reply-To: <mailman.79595.1254257074.23374.twisted-python@twistedmatri x.com>
References: <mailman.79595.1254257074.23374.twisted-python@twistedmatrix.com>
Message-ID: <mailman.9.1574573438.12674.twisted-python@twistedmatrix.com>

Hello, I'm trying to understand and use buildProtocol(), which isn't 
working as I expected, in two ways :) Question 1. If I have, on the 
Server side:

class MyFactory(Factory):
         protocol = MyTestProtocol
         def buildProtocol(self, addr):
                 p = Factory.buildProtocol(self, addr)
                 p.transport.write('connected.\n')
                 return p

Should this work? Would the write() function execute? I thought that 
'p' was a fully usable Protocol object at that point, but Python 
disagrees with me :) Tells me it's a 'Nonetype' with no write() 
method. If I take out the write(), everything works fine, I can 
communicate between client/server, so no problems in the rest of the code.

Question 2. If I use buildProtocol() on the Server side to *not* make 
a connection, as:

class MyFactory(Factory):
         protocol = MyTestProtocol
         def buildProtocol(self, addr):
                 if (some condition):
                         return Factory.buildProtocol(self, addr)
                 else:
                         return None

What is supposed to happen on the Client Side when I return None? I 
was thinking that my factory's clientConnectionFailed() would fire, 
indicating that the Server refused a connection.

Instead, what I get is my Client's connectionMade() firing, 
immediately followed by a clientConnectionLost() firing, as if the 
connection was made then dropped.

Just to check, I changed it to:
         buildProtocol(self, addr):
                 return None

which behaved the same way on the Client side. So what is really 
happening in buildProtocol? Is it making a connection to the Client 
side, and firing connectionMade(), no matter what? Or is something 
else going that I don't understand :)

Thanks in advance for any clarification.

John C>







From exarkun at twistedmatrix.com  Wed Sep 30 14:34:40 2009
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 30 Sep 2009 20:34:40 -0000
Subject: [Twisted-Python] Not understanding buildProtocol(),
	any clarification?
In-Reply-To: <E1Mt5h2-0001x5-8y@cube.twistedmatrix.com>
References: <mailman.79595.1254257074.23374.twisted-python@twistedmatrix.com>
	<E1Mt5h2-0001x5-8y@cube.twistedmatrix.com>
Message-ID: <20090930203440.1533.453072741.divmod.xquotient.489@localhost.localdomain>

On 08:16 pm, cyclops at speakeasy.net wrote:
>Hello, I'm trying to understand and use buildProtocol(), which isn't
>working as I expected, in two ways :) Question 1. If I have, on the
>Server side:
>
>class MyFactory(Factory):
>         protocol = MyTestProtocol
>         def buildProtocol(self, addr):
>                 p = Factory.buildProtocol(self, addr)
>                 p.transport.write('connected.\n')
>                 return p
>
>Should this work? Would the write() function execute? I thought that
>'p' was a fully usable Protocol object at that point, but Python
>disagrees with me :) Tells me it's a 'Nonetype' with no write()
>method. If I take out the write(), everything works fine, I can
>communicate between client/server, so no problems in the rest of the 
>code.

Nope.  There's no transport in buildProtocol.  That happens later.  You 
have to wait until "connectionMade" is called on the protocol before you 
trying to use the transport.
>
>Question 2. If I use buildProtocol() on the Server side to *not* make
>a connection, as:
>
>class MyFactory(Factory):
>         protocol = MyTestProtocol
>         def buildProtocol(self, addr):
>                 if (some condition):
>                         return Factory.buildProtocol(self, addr)
>                 else:
>                         return None
>
>What is supposed to happen on the Client Side when I return None? I
>was thinking that my factory's clientConnectionFailed() would fire,
>indicating that the Server refused a connection.
>
>Instead, what I get is my Client's connectionMade() firing,
>immediately followed by a clientConnectionLost() firing, as if the
>connection was made then dropped.

As you observed, doing this on the server accepts and then immediately 
closes the connection.  There is no way to not accept the connection. 
This is a limitation of the underlying platform APIs.

Jean-Paul



From mike at mv3d.com  Wed Sep 30 16:10:40 2009
From: mike at mv3d.com (Michael Handverger)
Date: Wed, 30 Sep 2009 18:10:40 -0400 (EDT)
Subject: [Twisted-Python] I found an interisting comment about Twisted
 vs. Erlang
In-Reply-To: <14946894.50381254348251112.JavaMail.root@verity.int.mv3d.com>
Message-ID: <26858752.50411254348640149.JavaMail.root@verity.int.mv3d.com>


> The biggest advantage of Twisted is a shorter development time, and the
> availability of Python libraries. But I wonder if running something of the
> scale of Facebook chat would be feasible at all, or if there are people on
> this list that have run many parallelized twisted servers that saturated
> many multi-core machines? In other words, are there practical examples of
> large-scale Twisted deployment? 

My previous employer isn't quite up to Facebook's size, but they do over 1/2 billion monthly pageviews using Twisted for the data access layer on around 80 cores. I have no doubt that a Twisted app could scale a site to Facebook's size. You certainly wouldn't be without tough scaling problems to solve, but you'll have those no matter what technology you use if you want to scale to that level.

Mike




From glyph at twistedmatrix.com  Wed Sep 30 17:44:20 2009
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 30 Sep 2009 19:44:20 -0400
Subject: [Twisted-Python] I found an interisting comment about Twisted
	vs. Erlang
In-Reply-To: <01d501ca4208$9ad96330$d08c2990$@com>
References: <01e801ca4130$fe2120a0$fa6361e0$@com>
	<F68410CC-9772-491C-911D-CD9F96EFFC38@integrateddevcorp.com>
	<cedc0c090909291211i6a1d7536r5c9ea1bbe9a1861@mail.gmail.com>
	<fa3d0c740909291454s60f8ec6dy2af5fa02d15fec4d@mail.gmail.com>
	<01d501ca4208$9ad96330$d08c2990$@com>
Message-ID: <d9047f780909301644v7bf56be1v416c00dee50f91d1@mail.gmail.com>

On Wed, Sep 30, 2009 at 4:00 PM, Alec Matusis <matusis at yahoo.com> wrote:


> The biggest advantage of Twisted is a shorter development time, and the
> availability of Python libraries. But I wonder if running something of the
> scale of Facebook chat would be feasible at all, or if there are people on
> this list that have run many parallelized twisted servers that saturated
> many multi-core machines? In other words, are there practical examples of
> large-scale Twisted deployment?
>

http://twistedmatrix.com/trac/wiki/SuccessStories#Justin.tv

"Justin.tv is the largest live video site on the internet. ... Our Twisted
video cluster currently supports thousands of simultaneous broadcasts and
serves up to 30M live video streams per day."
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20090930/4f9ac7fc/attachment-0001.html>

