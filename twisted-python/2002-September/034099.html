<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [XML-SIG] Re: [Twisted-Python] Can anyone recommend a sensible  XML parser for Python?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BXML-SIG%5D%20Re%3A%20%5BTwisted-Python%5D%20Can%20anyone%20recommend%20a%20sensible%20%0A%20XML%20parser%20for%20Python%3F&In-Reply-To=%3CE17nYor-0000u0-00%40malatesta.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="034098.html">
   <LINK REL="Next"  HREF="034100.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[XML-SIG] Re: [Twisted-Python] Can anyone recommend a sensible  XML parser for Python?</H1>
    <B>Uche Ogbuji</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BXML-SIG%5D%20Re%3A%20%5BTwisted-Python%5D%20Can%20anyone%20recommend%20a%20sensible%20%0A%20XML%20parser%20for%20Python%3F&In-Reply-To=%3CE17nYor-0000u0-00%40malatesta.local%3E"
       TITLE="[XML-SIG] Re: [Twisted-Python] Can anyone recommend a sensible  XML parser for Python?">uche.ogbuji at fourthought.com
       </A><BR>
    <I>Sat Sep  7 00:10:51 MDT 2002</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="034098.html">[XML-SIG] Re: [Twisted-Python] Can anyone recommend a sensible XML parser for Python?
</A></li>
        <LI>Next message (by thread): <A HREF="034100.html">[XML-SIG] Re: [Twisted-Python] Can anyone recommend a sensible XML parser for Python?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34099">[ date ]</a>
              <a href="thread.html#34099">[ thread ]</a>
              <a href="subject.html#34099">[ subject ]</a>
              <a href="author.html#34099">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> ----Security_Multipart(Fri_Sep__6_22:44:42_2002_475)--
</I>&gt;<i> Content-Type: Text/Plain; charset=us-ascii
</I>&gt;<i> Content-Transfer-Encoding: 7bit
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Fri, 06 Sep 2002 17:31:51 -0600, Uche Ogbuji &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">uche.ogbuji at fourthought.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; BTW, from what you're describing above, you are *not* parsing XHTML.  If it 
</I>&gt;<i> &gt; violates the DTD, it is not XHTML.  Period.
</I>&gt;<i> 
</I>&gt;<i> &gt; Just say you're parsing &quot;HTML&quot; and don't mention a version.  That's the only 
</I>&gt;<i> &gt; way to say it correctly  ;-)
</I>&gt;<i> 
</I>&gt;<i> OK, &quot;XML which browsers will render&quot;.  I am not parsing HTML, in that I won't
</I>&gt;<i> accept XML that is not well-formed.  I suppose I could try to wrap HtmlParser
</I>&gt;<i> with minidom... yuck.  Gross, but probably a good idea, come to think of it :)
</I>
I can't imagine why this would be gross.  IMO, it's illustrates very admirable 
technique, and one of the strengths of Python/XML.  The parsing mechanism and 
the generated representation are independent of each other, so you can mix 
them and match them in order to take advantage of the most needed features of 
either.

We put a lot of work into making this possible, and I find it very elegant.  
C++ folks took ages before they cottonned on to such an approach (in the STL), 
and now it has them in raptures (generic programming is all the rage).  Of 
course, old strait-jacket Java can't touch this.  Too bad for them.


&gt;<i> The reason I mentioned the cloneNode bug is because it is the most reliable and
</I>&gt;<i> the most trivial to demonstrate.  Like I said; at some point, I will clean up
</I>&gt;<i> my complaints and submit some bug reports.  Here's a &quot;bare test case&quot; of that
</I>&gt;<i> particular spurious accusation:
</I>&gt;<i> 
</I>&gt;<i>     <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at zelda</A>:~% python
</I>&gt;<i>     Python 2.2.1 (#1, Aug 30 2002, 09:36:47) 
</I>&gt;<i>     [GCC 2.95.4 20011002 (Debian prerelease)] on linux2
</I>&gt;<i>     Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
</I>&gt;<i>     &gt;&gt;&gt; from xml.dom.minidom import parseString
</I>&gt;<i>     &gt;&gt;&gt; parseString(&quot;&lt;hello_world/&gt;&quot;).cloneNode(1)
</I>&gt;<i>     Traceback (most recent call last):
</I>&gt;<i>       File &quot;&lt;stdin&gt;&quot;, line 1, in ?
</I>&gt;<i>       File &quot;/usr/lib/python2.2/site-packages/_xmlplus/dom/minidom.py&quot;, line 186, in cloneNode
</I>&gt;<i>         clone = _clone_node(self, deep, self.ownerDocument or self)
</I>&gt;<i>       File &quot;/usr/lib/python2.2/site-packages/_xmlplus/dom/minidom.py&quot;, line 1248, in _clone_node
</I>&gt;<i>         elif node.nodeType == PROCESSING_INSTRUCTION_NODE:
</I>&gt;<i>     NameError: global name 'PROCESSING_INSTRUCTION_NODE' is not defined
</I>

You see, this is why reporting such &quot;bugs&quot; early is helpful.  I could have 
told you ages ago that it is a *bad* idea to call cloneNode on a Document 
object.

Accordin to the DOM Level 2 spec:

&quot;And, cloning Document, DocumentType, Entity, and Notation nodes is 
implementation dependent.&quot;

IOW, yer gets what yer gets and can't really complain  :-)

Can you expand a bit more on the actual use case that makes you think you want 
to clone a document node?

I do agree that the confused error message is a glitch.  Current PyXML CVS 
gives a more straightforward &quot;sod off&quot;  :-)

&gt;&gt;&gt;<i> from xml.dom.minidom import parseString
</I>&gt;&gt;&gt;<i> parseString(&quot;&lt;hello_world/&gt;&quot;).cloneNode(1)
</I>Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in ?
  File &quot;/home/uogbuji/lib/python2.2/site-packages/_xmlplus/dom/minidom.py&quot;, 
line 198, in cloneNode
    clone = _clone_node(self, deep, self.ownerDocument or self)
  File &quot;/home/uogbuji/lib/python2.2/site-packages/_xmlplus/dom/minidom.py&quot;, 
line 1454, in _clone_node
    raise Exception(&quot;Cannot clone node %s&quot; % repr(node))
Exception: Cannot clone node &lt;xml.dom.minidom.Document instance at 0x82e9cbc&gt;


We choose not to allow it.  Perfectly legal, and I think this is the right 
choice.


&gt;<i> In order to do the work I want to do, though, those bug reports aren't going to
</I>&gt;<i> help.  Even if you resolved every bug report that I submitted within a week, I
</I>&gt;<i> would be stuck in the same place I am now: I have to work around the bugs in a
</I>&gt;<i> bunch of old versions of PyXML
</I>
You mean you can't require, say PyXML 0.8.1?  Tough crowd you develop for?  :-)


&gt;<i> or produce what amounts to my own `implementation' of an XML parser. 
</I>
If you try going this route, I guarantee you'll still be trying to get the 
most basic things right six months from now.


&gt;<i> Granted, if I packaged a newer, fixed-up
</I>&gt;<i> version of PyXML with Twisted, I wouldn't have to be mucking about with bits
</I>&gt;<i> and bytes -- but I *would* have to understand the entire ontology of confusion
</I>&gt;<i> associated with cross-language XML APIs.
</I>&gt;<i> 
</I>&gt;<i> My main frustration is with packaging.  If all the world were running Debian
</I>&gt;<i> unstable, I'd be fine: I'd just say Depends: python2.2-xml &gt;= 0.9.  However,
</I>&gt;<i> with lots of users in Windows, and many more on other linux platforms with less
</I>&gt;<i> pleasant package management, every new package that Twisted requires is another
</I>&gt;<i> fifteen minutes that the software takes to get running.  It's already confusing
</I>&gt;<i> enough to understand it when it *works*; I want the process of getting it
</I>&gt;<i> running to be as seamless as possible :).
</I>
Here you have a point.  Python, PyXML, and a lot of the related packages move 
very quickly,. and so quickly that they cause all manner of packaging problems.

There is no easy solution to this.  Python is much more of a volunteer 
community than, say JAva.  People work on Python and PyXML mostly to scratch 
their itches, which means they have less incentive to worry about the 
packaging mess they leave behind.

This is the impetus for the Python-in-a-tie effort for Python proper.  I do 
think we'd make a lot more friends if there were a matching PyXML-in-a-tie.  
It would mean companies would have to commit scarce resources to freezing 
interfaces and then testing and packaging to oblivion.

I have had it in mind to suggest a PyXML-in-a-tie type effort in the Python 
Business Forum once the effort on Python itself starts to gain legs.  I guess 
I can count on you to at least help cheerlead?  :-)


&gt;<i> For the applications that I'm intending to write, just doing my own parser and
</I>&gt;<i> API is both more appealing and more rewarding.
</I>
Really?  Color me deep skeptical.  I have not seen an application on earth 
where implementing one's own parser is a good idea, and precious few where 
implementing one's own API is a good idea.  I have a lot of colleagues who 
have tried.

By all means, if you'd like to try, go ahead.


&gt;<i> Neither DOM nor SAX will
</I>&gt;<i> present an API which allows me to get network XML events in quite the way I
</I>&gt;<i> want, so I'm going to have to do some wrapping.
</I>
I have learned through my own bitter experience that you do not want network 
interfaces to have *anything* to do with the lexical XML layer (or even 
Infoset).  It is best to design network interactions around *application* 
level semantics.  Basically sending around chunks of XML text is far less 
hazardous than what I think you mean.


&gt;<i> (I do wish pyRXP were
</I>&gt;<i> event-based... it's very close, in spirit, to what I want.)  If the general
</I>&gt;<i> quality of XML parsers in Python were really high, I would regard this impulse
</I>&gt;<i> as contrary and counterproductive -- why write my own library for doing this
</I>&gt;<i> when perfectly good ones already exist and and are deployed all over the place?
</I>
Well, as I said, I don't see any evidence that the quality of XML parsers in 
Python is not high.  You pointed out one problem in cloneNode which, from what 
I gather, was mostly because you're abusing DOM.  This had nothing to do with 
parsing.  Are you speaking generically?


&gt;<i> So maybe I'm just rationalizing what I would have done anyway.  Nevertheless,
</I>&gt;<i> it is easier to write my own XML parser than to even properly report the bugs
</I>&gt;<i> that I have thus far discovered.
</I>
I find this claim ludicrous on its face.  Writing an XML parser with the 
compliance level and quality of any of the ones in PyXML takes years.  Yes.  
Years.

Feel free to re-learn this fact the hard way, if you wish.


&gt;<i> For more information my perception of XML, and why my requirements are as
</I>&gt;<i> stripped-down as they are, look at the presentation here:
</I>&gt;<i> 
</I>&gt;<i>     <A HREF="http://xmlsucks.org/but_you_have_to_use_it_anyway/">http://xmlsucks.org/but_you_have_to_use_it_anyway/</A>
</I>&gt;<i> 
</I>&gt;<i> (Yes, it's a real URL, and it's not mine.)
</I>
Yes.  I'd guess we've all seen that link.  &lt;shrug&gt;  So what useful technology 
doesn't suck?  XML works for me.  Your mileage may vary.


-- 
Uche Ogbuji                                    Fourthought, Inc.
<A HREF="http://uche.ogbuji.net">http://uche.ogbuji.net</A>    <A HREF="http://4Suite.org">http://4Suite.org</A>    <A HREF="http://fourthought.com">http://fourthought.com</A>
Track chair, XML/Web Services One Boston: <A HREF="http://www.xmlconference.com/">http://www.xmlconference.com/</A>
Basic XML and RDF techniques for knowledge management, Part 7 - 
<A HREF="http://www-106.ibm.com/developerworks/xml/library/x-think12.html">http://www-106.ibm.com/developerworks/xml/library/x-think12.html</A>
Keeping pace with James Clark - <A HREF="http://www-106.ibm.com/developerworks/xml/libra">http://www-106.ibm.com/developerworks/xml/libra</A>
ry/x-jclark.html
Python and XML development using 4Suite, Part 3: 4RDF - 
<A HREF="http://www-105.ibm.com/developerworks/education.nsf/xml-onlinecourse-bytitle/8A">http://www-105.ibm.com/developerworks/education.nsf/xml-onlinecourse-bytitle/8A</A>
1EA5A2CF4621C386256BBB006F4CEC




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="034098.html">[XML-SIG] Re: [Twisted-Python] Can anyone recommend a sensible XML parser for Python?
</A></li>
	<LI>Next message (by thread): <A HREF="034100.html">[XML-SIG] Re: [Twisted-Python] Can anyone recommend a sensible XML parser for Python?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34099">[ date ]</a>
              <a href="thread.html#34099">[ thread ]</a>
              <a href="subject.html#34099">[ subject ]</a>
              <a href="author.html#34099">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
