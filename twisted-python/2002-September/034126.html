<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] version control, QA, branching ...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20version%20control%2C%20QA%2C%20branching%20...&In-Reply-To=%3C1031781315.19657.15.camel%40troglodyte.funhouse%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="034125.html">
   <LINK REL="Next"  HREF="034129.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] version control, QA, branching ...</H1>
    <B>Kevin Turner</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20version%20control%2C%20QA%2C%20branching%20...&In-Reply-To=%3C1031781315.19657.15.camel%40troglodyte.funhouse%3E"
       TITLE="[Twisted-Python] version control, QA, branching ...">acapnotic at twistedmatrix.com
       </A><BR>
    <I>Wed Sep 11 15:55:13 MDT 2002</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="034125.html">[Twisted-Python] man pages
</A></li>
        <LI>Next message (by thread): <A HREF="034129.html">[Twisted-Python] version control, QA, branching ... 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34126">[ date ]</a>
              <a href="thread.html#34126">[ thread ]</a>
              <a href="subject.html#34126">[ subject ]</a>
              <a href="author.html#34126">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I caught some bits of a discussion on #twisted on my way to bed last
night, and thought &quot;Hey, I should read that.&quot;  So I plundered the logs
and did a lot of pruning and here you are, a discussion involving
quality maintance practices with version controlled branches and unit
tests and things.  [attached]

Keep in mind that this log HAS been trimmed by me, and while I have made
an effort to maintain context, it's quite possible that you aren't
seeing the full context for every remark made.

Random notes from me:

        * Michael Schwem was telling me about
          [<A HREF="http://aegis.sourceforge.net/">http://aegis.sourceforge.net/</A> Aegis], which sounds like it's
          *much* better at branches than CVS is, and pays much stricter
          attention to the entire QA process.
        * In my recent romp through CVS resources, I found
          [<A HREF="http://codestriker.sourceforge.net/">http://codestriker.sourceforge.net/</A> CodeStriker].  I haven't
          talked to anyone who's used this, but it has some ideas in it.




-------------- next part --------------
[05:26] &lt;glyph&gt; radix and I had some discussions about release procedure today, btw :)
[05:26] &lt;glyph&gt; we came to some pretty radical conclusions
[05:27] &lt;itamar&gt; glyph: and they were?
[05:27] &lt;glyph&gt; itamar: release candidates should always be made from HEAD
[05:27] &lt;glyph&gt; itamar: Twisted developers need to learn how to use branches for developing experimental features; HEAD should *always* be releaseable
[05:27] &lt;itamar&gt; branches, here we come
[05:28] &lt;glyph&gt; itamar: the better tests we have, the less craziness with branches is necessary.
[05:36] &lt;fzZzy_&gt; glyph: shall I check in highly untested domtemplate=&gt;microdom code? or wait, and test it some more? 
[05:36] &lt;fzZzy_&gt; I guess this goes back to the cvs branch issue 
[05:37] &lt;dash&gt; fzZzy_: well, isn't testing it easy? =D
[05:38] &lt;fzZzy_&gt; dash: not at 2:30 am 
[05:38] &lt;fzZzy_&gt; and no, I never wrote any domtemplate tests 
[05:39] &lt;dash&gt; fzZzy_: no domtemplate tests?! gasp
[05:39] &lt;dash&gt; fzZzy_: you sound like me
[05:39] &lt;fzZzy_&gt; ok I'm going to bed instead since glyph didn't respond instantaneously ;-) 
[05:39] &lt;fzZzy_&gt; I'll be banging on it tomorrow 
[05:40] *** glyph has changed topic to &quot;Welcome to the Twisted project: sleazeware produced in a drunken fury by college dropouts!&quot;
[05:40] &lt;dash&gt; glyph: !!!
[05:40] &lt;dash&gt; glyph: I GRADUATED
[05:40] &lt;glyph&gt; dash: you didn't write most of twisted :)
[05:40] *** dash waves diploma madly
[06:15] &lt;glyph&gt; jml: much like linux; even very stable kernels with frozen APIs contain &quot;experimental&quot; drivers and such 
[06:15] &lt;jml&gt; glyph: so the trick is to mark them as such?
[06:15] &lt;glyph&gt; itamar: I don't think that's the case; in Twisted's history we've had releases that were pretty stable and didn't require a lot of after-the-fact tweaking
[06:16] &lt;jml&gt; glyph: for many commercial packages, it's not that long after release that you get SP1.. no one really thinks it a bad thing.
[06:16] &lt;jml&gt; just as long as code-breaking changes aren't slipped under the door.
[06:17] &lt;glyph&gt; jml: I am increasingly confident in our test suites lately
[06:17] &lt;glyph&gt; jml: we seem to have had relatively few problems with code-breaking stuff slipping in without anyone noticing :)
[06:17] &lt;jml&gt; glyph: btw, how's the test-first design going? I've found it hard in the past to keep disciplined about it.
[06:18] &lt;glyph&gt; jml: it's hard to keep disciplined about it for me too
:<i>-(.  When I can do it, it's *definitely* better than the other way.
</I>
[...a big discussion on one-point-oh philosophy intervenes here.  Only
a few tangentially related bits are included in this log excerpt...]

[06:22] &lt;glyph&gt; itamar: in &quot;policy&quot;: we don't have a policy for continuing development of Twisted after 1.0, in terms of legacy support of APIs that may need to change for some reason.  (Yes, some large portion of twisted.internet is stable, but what is our support policy for the *other* portions of twisted that you *need* to use for a useful app?  Are they just unsupported continuing forward?).  We don't have a policy for releases which is sustaina
[06:23] &lt;glyph&gt; this includes things like &quot;when should developers use a branch?&quot; and &quot;how should the release manager interact with users in order to decide whether we mihgt be breaking something important?&quot;
[...]
[06:27] &lt;glyph&gt; itamar: but then, a developer has some feature they want to play around with, which they believe to be potentially unstable, but doesn't break any tests
[06:27] &lt;glyph&gt; what are the guidelines for them to work with that?  
[...]

[06:52] &lt;moshez&gt; glyph: which reminds me.
[06:52] &lt;glyph&gt; moshez: hmm?
[06:52] &lt;moshez&gt; glyph: tell radix to fix ReleaseProcedure
[06:52] &lt;glyph&gt; moshez: we've talked about changes to ReleaseProcedure
[06:52] &lt;moshez&gt; glyph: I left a note there what he should fix
[06:52] &lt;glyph&gt; moshez: OK
[06:53] &lt;moshez&gt; glyph: I'm not talking about changes to the procedure, just bring the document up todate on reality.
[06:53] &lt;glyph&gt; moshez: I don't see the note :)
[06:54] &lt;moshez&gt;    ---- This part is sorely out of date -- document the new Debian way --
[06:54] &lt;itamar&gt; oh
[06:54] &lt;itamar&gt; new policy is to do all major devel on brances?
[06:55] &lt;itamar&gt; better mail the list then
[06:55] &lt;glyph&gt; itamar: that's a proposa, still need to hash it out, and to make sure that it is SUPER EASY for developers to do this
[06:55] &lt;itamar&gt; it sounds painful
[06:55] &lt;moshez&gt; glyph: it isn't.
[06:55] &lt;itamar&gt; but it probably is easy
[06:55] &lt;moshez&gt; glyph: it isn't even mildly easy
[06:55] &lt;moshez&gt; glyph: I'm not sure I like that propsal actually.
[06:56] &lt;glyph&gt; moshez: I figured you wouldn't :)
[06:56] &lt;itamar&gt; here we go again
[06:56] &lt;glyph&gt; but I'm not really sure what you wouldn't like
[06:56] &lt;itamar&gt; it may make more sense to branch on each release
[06:56] &lt;moshez&gt; glyph: merging is hell on earth
[06:57] &lt;glyph&gt; moshez: that gives the developer incentive to integrate early, as well as provide backwards compatibility hooks and good tests so that he doesn't have to hang out in a branch for too long :)
[06:58] &lt;warner&gt; my exp: each branch doubles the total effort. don't branch unless you know you won't do much work on one of the paths
[06:58] &lt;glyph&gt; moshez: when radix and I discussed the policy, we were also debating the need for coverage tools in order to qualify particular changes for branches
[06:58] &lt;moshez&gt; glyph: how do you decide which changes go on a branch and which go on HEAD?
[06:58] &lt;glyph&gt; like if the module you are planning to restructure has 95% unit test coverage, chances are you can get away with not having a branch at all, provided you don't change tests
[06:59] &lt;moshez&gt; glyph: and woulnd't it just make sense to say &quot;never break unittests&quot;?
[06:59] &lt;glyph&gt; moshez: yes, that makes sense
[06:59] &lt;itamar&gt; possibly the effort should go into more tests
[06:59] &lt;itamar&gt; instead of branches
[06:59] &lt;glyph&gt; itamar: that would be optimal
[06:59] &lt;itamar&gt; ugh
[06:59] &lt;itamar&gt; this is too distracting
[06:59] *** itamar has quit IRC (&quot;must work&quot;) (~<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">itamar at line102-187.adsl.actcom.co.il</A>)
[07:00] &lt;glyph&gt; i win!
[07:00] &lt;moshez&gt; &quot;Finish Him&quot;
[07:00] *** glyph isn't clear what that would entail, since itamar's already disappeared
[07:01] &lt;glyph&gt; moshez: So yes, &quot;never break unittests&quot; is good, but if you're doing work on, for example, cReactor, there just isn't good enough coverage to be sure that you're OK to check in to a branch which should be always-releaseable (HEAD), even if unittests are A-OK
[07:02] &lt;moshez&gt; glyphy: and when would the merge from the branch to HEAD happen?
[07:02] &lt;glyph&gt; moshez: after our army of simean warriors bashes on the code for several weeks
[07:03] &lt;moshez&gt; glyph: in other words &quot;after several weeks pass&quot;
[07:03] &lt;glyph&gt; moshez: i need to read up on the exact mechanics of branches in order to understand your concerns, I think
[07:03] &lt;moshez&gt; glyph: ok. do so.
[07:03] &lt;glyph&gt; is it not possible for a developer to continuously re-integrate patches to HEAD into their branch?
[07:03] &lt;moshez&gt; glyph: wait.
[07:05] &lt;moshez&gt; glyph: <A HREF="http://www.lerner.co.il/~moshez/cvs/cvstut34.html">http://www.lerner.co.il/~moshez/cvs/cvstut34.html</A>
[07:05] &lt;warner&gt; glyph: in my experience, yes
[07:05] &lt;warner&gt; glyph: however the question of &quot;should I or not&quot; takes up as much time as doing the commit separately to both branches
[07:06] &lt;glyph&gt; warner: hmm
[07:06] &lt;glyph&gt; warner: what was your experience working with branches?
[07:07] &lt;moshez&gt; <A HREF="http://cvsbook.red-bean.com/cvsbook.html#Going_Out_On_A_Limb__How_To_Work_With_Branches_And_Survive">http://cvsbook.red-bean.com/cvsbook.html#Going_Out_On_A_Limb__How_To_Work_With_Branches_And_Survive</A>_
[07:08] &lt;glyph&gt; moshez: ugghh
[07:08] &lt;glyph&gt; moshez: the 'spurious conflicts' bit is ... interesting
[07:09] &lt;warner&gt; well, the workfolk kept alternating between the &quot;current on HEAD&quot; and &quot;current on branch&quot; schemes
[07:09] &lt;warner&gt; the biggest problem was that people expected the merge features to mean they could do less work
[07:09] &lt;warner&gt; but the real issue was who decided which bugs/features should get done in which releases
[07:10] &lt;moshez&gt; glyph: I am evil
[07:11] &lt;glyph&gt; warner: hmm
[07:11] &lt;warner&gt; basically foisting developer work off to the config mgmt people, who didn't know the code well enough to say yes or no
[07:11] &lt;glyph&gt; okay, I worked with branches in perforce
[07:11] &lt;glyph&gt; they made *waaaay* more sense than this
[07:11] &lt;glyph&gt; I think cvs's semantics are broken
[07:12] &lt;warner&gt; yup, P4's scheme is easier to work with
[07:12] &lt;glyph&gt; at the very least, they're not what I want ;)
[07:12] &lt;warner&gt; the workfolk took the other path out: ClearCase
[07:12] &lt;warner&gt; That was two years ago and they're still trying to figure out how it works.
[07:12] &lt;moshez&gt; glyph: well, if we moved to SVN, we'd have easier branching
[07:13] &lt;warner&gt; But at least it's expensive. They get good use out of their big NetApp boxes too.
[07:13] &lt;jml&gt; I suppose subversion is out of the question?
[07:13] &lt;warner&gt; I tend to see CVS's painful branching as similar to the 8-char tabstops in the linux kernel..
[07:14] &lt;warner&gt; .. a bug that makes you aware of just how bad it is to overuse that thing..
[07:14] &lt;warner&gt; .. if you were to fix it (or find a tool that did it better), you'd be tempted to use it more, and that would be bad.
[07:16] &lt;glyph&gt; jml: Well, I originally really didn't want to consider it, because I thought that there would be funding for a Twisted-based version control system in the near future
[07:17] &lt;jml&gt; understandable. I disagree though.
[07:18] &lt;glyph&gt; jml: Well, the funding didn't appear as expected (though it still will at some point, most likely about a year from now), and this is the first time I've really wanted a feature which svn potentially implements better
[07:18] &lt;glyph&gt; svn's infrastructure strategy frankly scares me though
[07:19] &lt;warner&gt; twisted.revisions? my brain hurts
[07:20] &lt;jml&gt; glyph: yeah, fair enough. I'm quite happy to have at least one or two network apps that aren't twisted, but that's me.
[07:20] &lt;warner&gt; or maybe that's just the lack of sleep
[07:20] &lt;glyph&gt; warner: your brain hurts?  *your* brain hurts?
[07:20] &lt;glyph&gt; warner: YOU HAVE NOT YET COME TO KNOW PAIN, MORTAL
[07:20] *** warner laughs
[07:23] &lt;phed__&gt; twisted.revision features: every client is also a server. you create a branch every time you edit a file. versioning is measured in minutes. realtime versioning. integrated QA
[07:25] &lt;warner&gt; &quot;integrated QA&quot;: my current learn-as-I-go Twisted project is a tinderbox-like distributed build network, including various forms of 'make test' stages
[07:25] &lt;glyph&gt; warner: awesome!
[07:25] &lt;glyph&gt; warner: is this going to be publicly available?
[07:26] &lt;warner&gt; I'm basing it off CVS commit messages, but direct-from-VC would be better
[07:26] &lt;warner&gt; glyph: yup. I did a similar thing for work (before I found twisted), now I'm rewriting it without the shackles of employment
[07:27] &lt;glyph&gt; warner: are you using CVSToys?
[07:27] &lt;warner&gt; glyph: nope. whazzat?
[07:27] &lt;glyph&gt; warner: ooooohhhh
[07:27] &lt;glyph&gt; <A HREF="http://twistedmatrix.com/users/acapnotic/cvs.png">http://twistedmatrix.com/users/acapnotic/cvs.png</A>
[07:27] &lt;moshez&gt; <A HREF="http://www.freebsd.org/doc/en_US.ISO8859-1/books/faq/misc.html#BIKESHED-PAINTING">http://www.freebsd.org/doc/en_US.ISO8859-1/books/faq/misc.html#BIKESHED-PAINTING</A>
[07:27] &lt;glyph&gt; warner: talk to acapnotic :)
[07:29] &lt;warner&gt; glyph: will do. if I guess correctly about what it does, it would get rid of yet another piece of code I need to write. Just like twisted did for the entire serialization and transport layer.
[07:30] &lt;warner&gt; (if I wait long enough, the rest of the necessary code will disappear too. love it.)
[07:31] &lt;glyph&gt; warner: cool :)
[07:31] &lt;glyph&gt; warner: hey wait
[07:31] &lt;glyph&gt; warner: you know, we could really use something like that
[07:31] &lt;glyph&gt; warner: I keep meaning to write an automated unit-test runner with e-mail notification
[07:33] &lt;glyph&gt; I'm going to go to sleep for about 16 hours right now
[07:33] &lt;glyph&gt; talk to you crazy cats later
[07:33] &lt;warner&gt; glyph: that'd be part of it. Of course with twisted you'd get an IRC bot too. The motivation back at work was to punish folks who broke the build. The status output was a web page they'd refresh every once in a while until they saw their changes were built successfully. But I'm planning on Gtk clients too.
[07:34] &lt;warner&gt; catch you later glyph. I'll let you know what I code up.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="034125.html">[Twisted-Python] man pages
</A></li>
	<LI>Next message (by thread): <A HREF="034129.html">[Twisted-Python] version control, QA, branching ... 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34126">[ date ]</a>
              <a href="thread.html#34126">[ thread ]</a>
              <a href="subject.html#34126">[ subject ]</a>
              <a href="author.html#34126">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
