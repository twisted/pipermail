<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] thoughts on a reactor feature
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20thoughts%20on%20a%20reactor%20feature&In-Reply-To=%3C20020923.200747.121185519.glyph%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="034222.html">
   <LINK REL="Next"  HREF="034233.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] thoughts on a reactor feature</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20thoughts%20on%20a%20reactor%20feature&In-Reply-To=%3C20020923.200747.121185519.glyph%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] thoughts on a reactor feature">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon Sep 23 19:07:47 MDT 2002</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="034222.html">[Twisted-Python] thoughts on a reactor feature
</A></li>
        <LI>Next message (by thread): <A HREF="034233.html">[Twisted-Python] thoughts on a reactor feature
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34224">[ date ]</a>
              <a href="thread.html#34224">[ thread ]</a>
              <a href="subject.html#34224">[ subject ]</a>
              <a href="author.html#34224">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 23 Sep 2002 12:54:22 -0600, Bruce Mitchener &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">bruce at cubik.org</A>&gt; wrote:

&gt;<i> One would be have an interface to POSIX clocks and track the amount of 
</I>&gt;<i> time spent between calls out of reactor.run() and report anything that 
</I>&gt;<i> takes over a specified threshold of time to execute.
</I>
If I understand your proposal correctly, I think this could be implemented
quite simply by writing a Python wrapper around the reactor, that would wrap
each protocol and protocol factory being passed to it in something that would
catch events and time their execution.  This should work for just about any
reactor.  With a few extra features, it might even be good for measuring their
differences.  Would you need a wrapper around POSIX clocks more robust than
time.clock()?

(I think this could also compare time.clock() to time.time() to see if
potentially blocking calls were being made.)

&gt;<i> Another is to implement some sort of stack trace sampling where you
</I>&gt;<i> periodically take a stack trace when a utility program is running and you've
</I>&gt;<i> noted periods of long latency.
</I>
This I don't know how to do; possibly it's doable with Python's
debugger/profiler hooks?  I'm not quite clear on how you do the &quot;noting&quot; -- is
this a message that the user sends to Twisted or is it something that the
profiler performs some heuristic to get?

-- 
 |    &lt;`'&gt;    |  Glyph Lefkowitz: Traveling Sorcerer   |
 |   &lt; _/ &gt;   |  Lead Developer,  the Twisted project  |
 |  &lt; ___/ &gt;  |      <A HREF="http://www.twistedmatrix.com">http://www.twistedmatrix.com</A>      |
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
URL: &lt;/pipermail/twisted-python/attachments/20020923/8604d943/attachment.sig&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="034222.html">[Twisted-Python] thoughts on a reactor feature
</A></li>
	<LI>Next message (by thread): <A HREF="034233.html">[Twisted-Python] thoughts on a reactor feature
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34224">[ date ]</a>
              <a href="thread.html#34224">[ thread ]</a>
              <a href="subject.html#34224">[ subject ]</a>
              <a href="author.html#34224">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
