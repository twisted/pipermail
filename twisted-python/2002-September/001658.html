<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Perspective vs. Identity question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Perspective%20vs.%20Identity%20question&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001656.html">
   <LINK REL="Next"  HREF="001660.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Perspective vs. Identity question</H1>
    <B>Brian Warner</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Perspective%20vs.%20Identity%20question&In-Reply-To="
       TITLE="[Twisted-Python] Perspective vs. Identity question">warner at lothar.com
       </A><BR>
    <I>Sun Sep 15 08:42:31 EDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="001656.html">[Twisted-Python] More DOMTemplate/WebMVC examples
</A></li>
        <LI>Next message: <A HREF="001660.html">[Twisted-Python] persistence interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1658">[ date ]</a>
              <a href="thread.html#1658">[ thread ]</a>
              <a href="subject.html#1658">[ subject ]</a>
              <a href="author.html#1658">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> sounds like you are on the right track. For another example, take a look at
</I>&gt;<i> twisted.enterprise.dbcred. It has two authorizers that create perspective
</I>&gt;<i> and identities from a relational database and a &quot;reflector&quot; which is another
</I>&gt;<i> type of data source.
</I>
Thanks for the confirmation. This stuff is finally starting to make sense.
You're right, dbcred is a good example. SQL is still pretty foreign to me,
but somehow seeing the SQL tables and the way dbcred is accessing them helps
me grok the identity/perspective stuff better. The fact that it's a different
style (building Identities on the fly rather than having them pre-built)
helps a lot.

So.. the Identity doesn't really have to exist before the call to
.getIdentityRequest().. it might be pre-made, or pulled out of a database by
name (or other persistent structure), or created with data retrieved from a
third party, or just faked altogether (like a chat service that lets anybody
log in, .getIdentityRequest() could just make a new Identity for every
caller, maybe enforcing unique names).

And the same is true for the Perspectives? .getPerspectiveRequest() could
retrieve an existing Perspective or create a new one on demand? I guess if
the perspective is supposed to hang around (like, um, say a chat service that
remembers user state between logins) then it shouldn't get deleted from the
service when the .detach() method is called. Ah, but it could get saved to
disk and then dropped from memory. And then reloaded when they log in again.
Hence .cachePerspective() and friend. Enlightenment dawns.

I keep coming up with more questions, but the process of phrasing the
question in a concrete manner is letting me figure out the answer without
asking it. Interesting. I think that means I'm past some inflection point.

Last rhetorical question (which I ask so that someone can tell me if I'm
wrong). There should be a roughly one-to-one correspondence between
perspective subclasses and service subclasses, right? Each service's
.getPerspectiveNamed method will create arbitrarily many Perspective objects,
with different names, for different Identities, but (generally) always of the
same class? MyFooService will have a bunch of instances of MyFooPerspective,
etc? The hierarchy looks something like:

 Application
  Authorizer
   Identity[0]
    username, password
    servicenameA,perspectivenameA
    servicenameB,perspectivenameB
    ...
   Identity[1]...
  ServiceA
   servicename=&quot;A&quot;
   PerspectiveA[0]
    name
    otherdata
   PerspectiveA[1]..
  ServiceB
   servicename=&quot;B&quot;
   PerspectiveB[0]
   PerspectiveB[1]..

If that were a graph, there'd also be arrows from Identity[0] to both
PerspectiveA[0] and PerspectiveB[0].

Ok, that's as much enlightenment as I can take for one day. Somebody tell me
if I got it confused. I'll try to write this up somehow so it might help
someone else.

thanks,
 -Brian



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001656.html">[Twisted-Python] More DOMTemplate/WebMVC examples
</A></li>
	<LI>Next message: <A HREF="001660.html">[Twisted-Python] persistence interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1658">[ date ]</a>
              <a href="thread.html#1658">[ thread ]</a>
              <a href="subject.html#1658">[ subject ]</a>
              <a href="author.html#1658">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
