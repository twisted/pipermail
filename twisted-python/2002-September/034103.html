<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] serial datatype in t.e.row
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20serial%20datatype%20in%20t.e.row&In-Reply-To=%3CHOEEKPCOKELHCNIJNMAGCEKHCGAA.sean%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="034102.html">
   <LINK REL="Next"  HREF="034106.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] serial datatype in t.e.row</H1>
    <B>Sean Riley</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20serial%20datatype%20in%20t.e.row&In-Reply-To=%3CHOEEKPCOKELHCNIJNMAGCEKHCGAA.sean%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] serial datatype in t.e.row">sean at twistedmatrix.com
       </A><BR>
    <I>Sat Sep  7 12:21:40 MDT 2002</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="034102.html">[Twisted-Python] 2.3 and an unstable chroot
</A></li>
        <LI>Next message (by thread): <A HREF="034106.html">[Twisted-Python] serial datatype in t.e.row
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34103">[ date ]</a>
              <a href="thread.html#34103">[ thread ]</a>
              <a href="subject.html#34103">[ subject ]</a>
              <a href="author.html#34103">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have been looking at adding support for &quot;serial&quot; columns into
twisted.enterprise.row and it appears to be harder than i originally
thought.

Serial columns auto-increment when a row is inserted so that the application
doesnt have to manage the value of the index manually. So:

	CREATE TABLE mytable
	(
	  column1  serial,
	  column2  int
	);

	INSERT INTO mytable (column2) VALUES (33);

will actually auto-increment the sequence for &quot;column1&quot; and use the next
value.

But.. using twisted enterprise:

	newRow = MyRow()
	reflector.insertRow(newRow)

does effectively the same thing, but the newRow object doesn't know the
value of the index column (column1 in this case) that was just inserted, so
it doesn't know how to update or delete itself!

One solution may be to manually run a

	SELECT nextval('sequencename')

to get the next value and use that for the insert, but this requires an
extra step for each insert, and requires that the we know which tables have
serial columns (suprisingly hard to figure out..) and makes the behavior for
tables with serial columns and no serial columns very different.

Also, the behavior of auto-incrementing key columns is different for every
database implementation...



----------------
&quot;If he's so smart, then how come he's dead?&quot;, Homer Simspon
Sean Riley
<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">sean at ninjaneering.com</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="034102.html">[Twisted-Python] 2.3 and an unstable chroot
</A></li>
	<LI>Next message (by thread): <A HREF="034106.html">[Twisted-Python] serial datatype in t.e.row
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34103">[ date ]</a>
              <a href="thread.html#34103">[ thread ]</a>
              <a href="subject.html#34103">[ subject ]</a>
              <a href="author.html#34103">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
