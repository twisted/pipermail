<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: Can anyone recommend a sensible XML parser for Python?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%3A%20Can%20anyone%20recommend%20a%20sensible%20XML%20parser%20for%20Python%3F&In-Reply-To=%3C20020908.200653.27439528.glyph%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="034100.html">
   <LINK REL="Next"  HREF="034115.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: Can anyone recommend a sensible XML parser for Python?</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%3A%20Can%20anyone%20recommend%20a%20sensible%20XML%20parser%20for%20Python%3F&In-Reply-To=%3C20020908.200653.27439528.glyph%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Re: Can anyone recommend a sensible XML parser for Python?">glyph at twistedmatrix.com
       </A><BR>
    <I>Sun Sep  8 19:06:53 MDT 2002</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="034100.html">[XML-SIG] Re: [Twisted-Python] Can anyone recommend a sensible XML parser for Python?
</A></li>
        <LI>Next message (by thread): <A HREF="034115.html">[XML-SIG] Re: [Twisted-Python] Can anyone recommend a sensible  XML parser for Python?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34113">[ date ]</a>
              <a href="thread.html#34113">[ thread ]</a>
              <a href="subject.html#34113">[ subject ]</a>
              <a href="author.html#34113">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, 07 Sep 2002 00:10:51 -0600, Uche Ogbuji &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">uche.ogbuji at fourthought.com</A>&gt; wrote:
&gt;<i> &gt; On Fri, 06 Sep 2002 17:31:51 -0600, Uche Ogbuji &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">uche.ogbuji at fourthought.com</A>&gt; wrote:
</I>
&gt;<i> &gt; I suppose I could try to wrap HtmlParser with minidom... yuck.  Gross, but
</I>&gt;<i> &gt; probably a good idea, come to think of it :)
</I>
&gt;<i> I can't imagine why this would be gross.
</I>
Sorry, I was saying that making sense of non-XHTML HTML is kind of gross.  I
did say that it was a good idea, and it's definitely a neat trick.

&gt;<i> Accordin to the DOM Level 2 spec: &quot;And, cloning Document, DocumentType,
</I>&gt;<i> Entity, and Notation nodes is implementation dependent.&quot;
</I>
This is why standards compliance is not terribly important to me.  I would
rather have a useful XML API than a standardized one.

&gt;<i> Can you expand a bit more on the actual use case that makes you think you want 
</I>&gt;<i> to clone a document node?
</I>
I have a template &quot;frame&quot; document.  I want to clone the document, populate it
with information lifted from other XML files, and then write the resultant
(cloned) document out.  This is the very first use-case I ever had working with
XML and it is still the most common.

&gt;<i> We choose not to allow it.  Perfectly legal, and I think this is the right 
</I>&gt;<i> choice.
</I>
Yes, but the point remains that this *used* to work, and now it *doesn't*.
This is functionality I found useful.  While I can't comment on the intrinsic
sense or nonsense of cloning document nodes in DOM, I do know that it's
difficult to keep track of when features like this appear and disappear in the
various different XML solutions for Python.

Maybe this is the only feature that has done this; I don't know.  It just
happens that it's a very commonly-used one for me.

This is just another instance of my general complaint that tracking versioning
dependencies is not worth the effort for my degenerately simple use-cases for
XML.

&gt;<i> You mean you can't require, say PyXML 0.8.1?  Tough crowd you develop for?
</I>&gt;<i> :-)
</I>
There are still some parties interested in Twisted who are upset that it
requires Python 2.1; in fact, I felt guilty doing 2.1 support because I am
likely going to have to backport portions of it to 1.5.2 for some people.  We
can all thank Red Hat for this inane persistence of ancient python versions,
but it is sadly the world I live in.

&gt;<i> &gt; My main frustration is with packaging.
</I>
&gt;<i> Here you have a point.  Python, PyXML, and a lot of the related packages move
</I>&gt;<i> very quickly,. and so quickly that they cause all manner of packaging
</I>&gt;<i> problems.
</I>
This is my main point, and this is the one that the PyXML community can do the
least to address.  Buggy and idiosyncratic implementations are already in the
wild, and some apps will depend on those particular bugs and idiosyncrasies.
If twisted depends on a new or different set of bugs and quirks, I make it
incompatible with whatever other XML-using applications are out there today.

Given that XML is an integration technology this is certainly less than
desirable.

&gt;<i> There is no easy solution to this.
</I>
Having a project that is precipitously approaching 1.0 myself, I can
sympathize.  As much as this sort of dependency and compatibility problem has
bothered me, I *know* there will be people that write apps for Twisted and will
curse my name when I enhance some functionality later on :-).

&gt;<i> I have had it in mind to suggest a PyXML-in-a-tie type effort in the Python
</I>&gt;<i> Business Forum once the effort on Python itself starts to gain legs.  I guess
</I>&gt;<i> I can count on you to at least help cheerlead?  :-)
</I>
Cheerleading, certainly :-).  Although I'm less interested in seeing PyXML
prepared for &quot;business&quot; clients and more interested in just seeing the level of
QA on the volunteer work go up.  If I *had* any spare &quot;scarce resources&quot; to
commit beyond my own projects, I would certainly help getting the unit tests
unified and automated.

&gt;<i> &gt; or produce what amounts to my own `implementation' of an XML parser.
</I>&gt;<i> 
</I>&gt;<i> If you try going this route, I guarantee you'll still be trying to get the 
</I>&gt;<i> most basic things right six months from now.
</I>
...

&gt;<i> &gt; For the applications that I'm intending to write, just doing my own parser and
</I>&gt;<i> &gt; API is both more appealing and more rewarding.
</I>&gt;<i> 
</I>&gt;<i> Really?  Color me deep skeptical.  I have not seen an application on earth 
</I>&gt;<i> where implementing one's own parser is a good idea, and precious few where 
</I>&gt;<i> implementing one's own API is a good idea.  I have a lot of colleagues who 
</I>&gt;<i> have tried.
</I>
While it is *possible* that I'm smarter than you think I am, it is certain that
I'm more stubborn.  My sophomoric attempt at an XML parser is now in Twisted
CVS.

I've had this objection raised over writing yet another a web server, yet
another remote procedure call protocol, yet another asynchronous socket server
and yet another database interface.  It seems like at least some of these ideas
were good ones, so I went ahead and wrote an XML parser and representation
anyway :-).

A fellow I know from IRC once said &quot;it's easier to write an s-expression parser
for a particular platform by hand than to learn to use any of the XML tools for
that platform&quot;.  I think that if you're interested in keeping your focus narrow
in terms of what you do with XML, the same is true of writing an XML parser.

As a data point for this hypothesis, writing the parser and the node tree took
me less than half as much time as writing these posts to various mailing lists
about XML tools (not counting this post, which has been the most
time-consuming): it took less than a quarter as much time as attempting (and
failing) to track down bugs in PyXML, not counting the time I spent trying to
figure out how to turn off undesired features in a way that would work on more
than one version.  My two main existing PyXML-using applications are already
ported to this, changing barely any of their code.

Even so, this is almost not a fair comparison because I have several months of
experience with those tools on Python 2.1, and I've read a few books on XML
already.

&gt;<i> &gt; Neither DOM nor SAX will present an API which allows me to get network XML
</I>&gt;<i> &gt; events in quite the way I want, so I'm going to have to do some wrapping.
</I>
&gt;<i> I have learned through my own bitter experience that you do not want network
</I>&gt;<i> interfaces to have *anything* to do with the lexical XML layer (or even
</I>&gt;<i> Infoset).  It is best to design network interactions around *application*
</I>&gt;<i> level semantics.  Basically sending around chunks of XML text is far less
</I>&gt;<i> hazardous than what I think you mean.
</I>
I'm not sure what you think I mean, really, but specifically, I'm thinking
particularly of parsing and routing Jabber XML streams.  If they are designed
in a &quot;hazardous&quot; way then it's not my issue...  I don't think much of their
protocol design as it is, especially with regard to routing.  (As you might
guess, I think the whole idea of using XML as a network protocol is rather
strange; but Jabber in particular could have been much better done.  BEEP, for
example, I consider odd, but not broken.)

&gt;<i> &gt; (I do wish pyRXP were event-based... it's very close, in spirit, to what I
</I>&gt;<i> &gt; want.)  If the general quality of XML parsers in Python were really high, I
</I>&gt;<i> &gt; would regard this impulse as contrary and counterproductive -- why write my
</I>&gt;<i> &gt; own library for doing this when perfectly good ones already exist and and
</I>&gt;<i> &gt; are deployed all over the place?
</I>
&gt;<i> Well, as I said, I don't see any evidence that the quality of XML parsers in 
</I>&gt;<i> Python is not high.  You pointed out one problem in cloneNode which, from what 
</I>&gt;<i> I gather, was mostly because you're abusing DOM.  This had nothing to do with 
</I>&gt;<i> parsing.  Are you speaking generically?
</I>
When I run my particular XML-munging tool, sometimes I get:

    NameError: global name 'PROCESSING_INSTRUCTION_NODE' is not defined

which we have discussed the reasons for here.  Slightly less often, but still with
a significant frequency (same python, same PyXML, same input), I get:

    zsh: segmentation fault       ] (doc/howto/basics)

I can't present hard evidence for this, I'm sorry, because I'm not familiar
with the internals of PyXML or expat and I can't get the bug to happen
reliably.  If I can ever boil it down to something predictable (i.e. less than
1500 lines of code and half a meg of XML to trigger it) be assured I will make
the most complete bug report I can.

&gt;<i> &gt; Nevertheless, it is easier to write my own XML parser than to even properly
</I>&gt;<i> &gt; report the bugs that I have thus far discovered.
</I>
&gt;<i> I find this claim ludicrous on its face.  Writing an XML parser with the 
</I>&gt;<i> compliance level and quality of any of the ones in PyXML takes years.  Yes.  
</I>&gt;<i> Years.
</I>
I never claimed to need a parser with PyXML's level of compliance; in fact,
I've said several times that compliance at that level is annoying to me because
it's too strict.

I think we're going to have to agree to disagree on &quot;quality&quot;, but at least for
my use cases I don't get occasional coredumps from my parser.  I cannot
substantiate this with real bug reports, so please feel free to dismiss this as
FUD if you disagree.  From my discussions with other developers near my
interest area, however, QA on the PyXML project is notoriously poor, and the
quality is wildly variant from release to release.  As you yourself have said,
this is likely to remain so until someone funds improvements.

I do not feel as though I am owed anything in particular by the PyXML project
or by any subscriber to any of these lists.  In fact, I'm quite grateful for it
having provided a nice, simple introduction to the world of XML; I probably
would not be using XML today at all if it weren't for the PyXML project.
Unfortunately, due to my larger-than-average concerns about dependencies and
ease of automating testing for my own project, I don't think that PyXML is a
good solution.  I need a *very* small XML library, with no strings attached.
PyXML is huge, and featureful, and I'm sure in the most recent incarnations
it's very robust.  It does come with a lot of strings attached though.

I have decided it's not worth my time at this point to invest a lot of effort
in helping out, until a few versions go by and the general impressions I get
from XML developers I work with are becoming more positive.  This doesn't mean
I won't lend a helping hand when I can, but the communication overhead to
working in the PyXML community is not currently worth the gain I would get from
it.

I wish you the best of luck in making me look foolish for saying that :-).

-- 
 |    &lt;`'&gt;    |  Glyph Lefkowitz: Traveling Sorcerer   |
 |   &lt; _/ &gt;   |  Lead Developer,  the Twisted project  |
 |  &lt; ___/ &gt;  |      <A HREF="http://www.twistedmatrix.com">http://www.twistedmatrix.com</A>      |
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
URL: &lt;/pipermail/twisted-python/attachments/20020908/7b56fd46/attachment.sig&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="034100.html">[XML-SIG] Re: [Twisted-Python] Can anyone recommend a sensible XML parser for Python?
</A></li>
	<LI>Next message (by thread): <A HREF="034115.html">[XML-SIG] Re: [Twisted-Python] Can anyone recommend a sensible  XML parser for Python?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34113">[ date ]</a>
              <a href="thread.html#34113">[ thread ]</a>
              <a href="subject.html#34113">[ subject ]</a>
              <a href="author.html#34113">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
