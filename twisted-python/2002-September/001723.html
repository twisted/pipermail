<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Enterprise Row Objects
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Enterprise%20Row%20Objects&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001725.html">
   <LINK REL="Next"  HREF="001724.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Enterprise Row Objects</H1>
    <B>Sean Riley</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Enterprise%20Row%20Objects&In-Reply-To="
       TITLE="[Twisted-Python] Enterprise Row Objects">sean at twistedmatrix.com
       </A><BR>
    <I>Mon Sep 23 23:57:02 EDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="001725.html">[Twisted-Python] thoughts on a reactor feature
</A></li>
        <LI>Next message: <A HREF="001724.html">[Twisted-Python] Enterprise Row Objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1723">[ date ]</a>
              <a href="thread.html#1723">[ thread ]</a>
              <a href="subject.html#1723">[ subject ]</a>
              <a href="author.html#1723">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I found that if I can remove all of the database implementation specific
code and the database initialization phase for reflectors if the class
attribute &quot;rowColumns&quot; is extended to include the type of the column in
addition to its name.

so when users define a new row class,

rowColumns = [&quot;col1&quot;, &quot;col2&quot;, &quot;col3&quot;]

becomes:

rowColumns = [(&quot;col1&quot;, &quot;int&quot;), (&quot;col2&quot;, &quot;varchar&quot;), (&quot;col3&quot;, &quot;int&quot;)]

Itamar pointed me at PySQLite ( <A HREF="http://www.hwaci.com/sw/sqlite/">http://www.hwaci.com/sw/sqlite/</A> and
<A HREF="http://pysqlite.sourceforge.net/">http://pysqlite.sourceforge.net/</A> ) and i couldnt implement a reflector for
it because there is no way to determine the type of a column as SQLite lacks
detailed system catalogs. Adding the type information to rowColumns was the
obvious solution and happily it has additional benefits:
 - no longer require a database catalog lookup to populate rowClasses
 - no defered initialization phase for reflectors
 - databases without full schema information available (XML and SQLite) can
be supported.

So, the SQL Reflector now works purely on the python DBAPI spec - it should
work with any supported  python DBAPI module. I've run it with PostgreSQL
and SQLite. I'd like to hear if anyone can run it on another database or
platform??

In Twisted.doc.examples there is now:

	row_util.py  - classes for row examples
	row_schema.sql - sample database schema
	row_example.py - example code using a postgresql or sqlite database
	row_xml.py  - example code that uses an XML &quot;database&quot;

Additional functionality would be the ability to generate stubbed rowObject
classes from a relational database schema.

...and I wont update the documentation with PageMill.

----------------
&quot;If he's so smart, then how come he's dead?&quot;, Homer Simspon
Sean Riley
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">sean at ninjaneering.com</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001725.html">[Twisted-Python] thoughts on a reactor feature
</A></li>
	<LI>Next message: <A HREF="001724.html">[Twisted-Python] Enterprise Row Objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1723">[ date ]</a>
              <a href="thread.html#1723">[ thread ]</a>
              <a href="subject.html#1723">[ subject ]</a>
              <a href="author.html#1723">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
