<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Anyone seeing hanging of Twisted HTTPS servers?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Anyone%20seeing%20hanging%20of%20Twisted%20HTTPS%20servers%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010468.html">
   <LINK REL="Next"  HREF="010467.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Anyone seeing hanging of Twisted HTTPS servers?</H1>
    <B>Mike C. Fletcher</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Anyone%20seeing%20hanging%20of%20Twisted%20HTTPS%20servers%3F&In-Reply-To="
       TITLE="[Twisted-Python] Anyone seeing hanging of Twisted HTTPS servers?">mcfletch at rogers.com
       </A><BR>
    <I>Wed May 18 09:31:44 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010468.html">[Twisted-Python] Simpler twistedmatrix.com doc indexes
</A></li>
        <LI>Next message: <A HREF="010467.html">[Twisted-Python] Anyone seeing hanging of Twisted HTTPS servers?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10466">[ date ]</a>
              <a href="thread.html#10466">[ thread ]</a>
              <a href="subject.html#10466">[ subject ]</a>
              <a href="author.html#10466">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We've recently picked up 3 or 4 minute blocks on one of our servers. 
Wondering if anyone else has seen these.

We have a &quot;zombiechecker&quot; script that downloads the front page of the
web front-end every minute (restarting the entire server if it can't
connect).  After 20 or 30 minutes (sometimes a few hours) we see 3 or 4
of those checks queued, the connection has been accepted, but the server
appears to be frozen (the reactor doesn't appear to be processing
anything, neither web front-end or the processing back-end).  After the
3 or 4 minutes frozen, the server starts processing the back-end
operations and eventually gets around to replying to the web front-end
requests.  Most of the time we see an error in the logs like this just
as the blockage is clearing:

Traceback (most recent call last):
  File &quot;/home/mcfletch/cvs/twisted/python/log.py&quot;, line 41, in
callWithContext
    return context.call({ILogContext: newCtx}, func, *args, **kw)
  File &quot;/home/mcfletch/cvs/twisted/python/context.py&quot;, line 52, in
callWithContext
    return self.currentContext().callWithContext(ctx, func, *args, **kw)
  File &quot;/home/mcfletch/cvs/twisted/python/context.py&quot;, line 31, in
callWithContext
    return func(*args,**kw)
  File &quot;/home/mcfletch/cvs/twisted/internet/selectreactor.py&quot;, line 139,
in _doReadOrWrite
    why = getattr(selectable, method)()
--- &lt;exception caught here&gt; ---
  File &quot;/home/mcfletch/cvs/twisted/internet/tcp.py&quot;, line 111, in doRead
    return Connection.doRead(self)
  File &quot;/home/mcfletch/cvs/twisted/internet/tcp.py&quot;, line 343, in doRead
    data = self.socket.recv(self.bufferSize)
OpenSSL.SSL.Error: [('SSL routines', 'SSL23_READ', 'ssl handshake failure')]

but the web front-end query still goes through (possibly because
web.client is retrying?).

Anyway, just wondering if anyone else has seen it or whether we're off
in funky land. In the meantime I'm going to try turning on every bit of
logging in the system while I'm off at a meeting and see if I can
discover the precise point where it's hanging.

Oh, FreeBSD 5.3-RC2, Python 2.3.4, Twisted 2.0, Nevow from CVS.

Thanks all,
Mike

-- 
________________________________________________
  Mike C. Fletcher
  Designer, VR Plumber, Coder
  <A HREF="http://www.vrplumber.com">http://www.vrplumber.com</A>
  <A HREF="http://blog.vrplumber.com">http://blog.vrplumber.com</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010468.html">[Twisted-Python] Simpler twistedmatrix.com doc indexes
</A></li>
	<LI>Next message: <A HREF="010467.html">[Twisted-Python] Anyone seeing hanging of Twisted HTTPS servers?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10466">[ date ]</a>
              <a href="thread.html#10466">[ thread ]</a>
              <a href="subject.html#10466">[ subject ]</a>
              <a href="author.html#10466">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
