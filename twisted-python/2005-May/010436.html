<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: Hanging test cases (Was: Evangelism notes...)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20Hanging%20test%20cases%20%28Was%3A%20Evangelism%20notes...%29&In-Reply-To=uis1pcp6w.fsf%40fitlinxx.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010434.html">
   <LINK REL="Next"  HREF="010359.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: Hanging test cases (Was: Evangelism notes...)</H1>
    <B>Christopher Armstrong</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20Hanging%20test%20cases%20%28Was%3A%20Evangelism%20notes...%29&In-Reply-To=uis1pcp6w.fsf%40fitlinxx.com"
       TITLE="[Twisted-Python] Re: Hanging test cases (Was: Evangelism notes...)">radeex at gmail.com
       </A><BR>
    <I>Wed May 11 19:47:48 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010434.html">[Twisted-Python] Re: Hanging test cases (Was: Evangelism notes...)
</A></li>
        <LI>Next message: <A HREF="010359.html">[Twisted-Python] Evangelism notes...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10436">[ date ]</a>
              <a href="thread.html#10436">[ thread ]</a>
              <a href="subject.html#10436">[ subject ]</a>
              <a href="author.html#10436">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11 May 2005 19:34:15 -0400, David Bolen &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">db3l at fitlinxx.com</A>&gt; wrote:
&gt;<i> Christopher Armstrong &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">radeex at gmail.com</A>&gt; writes:
</I>&gt;<i> &gt;     testCase = deferredGenerator(testCase)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; after the definition of the method, or even:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     @deferredGenerator
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; before the definition of the method.
</I>&gt;<i> 
</I>&gt;<i> But then who actually performs the iteration over the test case to
</I>&gt;<i> trigger the generator?  Clearly some top level code needs to invoke
</I>&gt;<i> the reactor.run() and at some point iterate over testCase while
</I>&gt;<i> beneath a running reactor.  We're just using unittest, so something
</I>&gt;<i> would need to be added to serve as the basic framework for that sort
</I>&gt;<i> of test.
</I>
deferredGenerator does the iteration. This is how defgen works: you
define a generator. It should yield waitForDeferred instances. Then
you wrap that generator function with deferredGenerator.
deferredGenerator wraps that function such that, when called, returns
a Deferred (not a generator object!). The original generator will be
exhausted (doing the magic wait-for-deferred stuff along the way) and
the Deferred returned from your function will result in the last item
yielded from the generator. Since trial supports test methods
returning deferreds, this Just Works.

-- 
  Twisted   |  Christopher Armstrong: International Man of Twistery
   Radix    |    -- <A HREF="http://radix.twistedmatrix.com">http://radix.twistedmatrix.com</A>
            |  Release Manager, Twisted Project
  \\\V///   |    -- <A HREF="http://twistedmatrix.com">http://twistedmatrix.com</A>
   |o O|    |  Founding Member, Hobart Hacking Society
w----v----w-+    -- <A HREF="http://hackingsociety.org/chapters/hash">http://hackingsociety.org/chapters/hash</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010434.html">[Twisted-Python] Re: Hanging test cases (Was: Evangelism notes...)
</A></li>
	<LI>Next message: <A HREF="010359.html">[Twisted-Python] Evangelism notes...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10436">[ date ]</a>
              <a href="thread.html#10436">[ thread ]</a>
              <a href="subject.html#10436">[ subject ]</a>
              <a href="author.html#10436">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
