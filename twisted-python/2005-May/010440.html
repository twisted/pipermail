<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Unit Testing in twisted 2.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Unit%20Testing%20in%20twisted%202.0&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010465.html">
   <LINK REL="Next"  HREF="010464.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Unit Testing in twisted 2.0</H1>
    <B>Shawn Church</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Unit%20Testing%20in%20twisted%202.0&In-Reply-To="
       TITLE="[Twisted-Python] Unit Testing in twisted 2.0">Sl_Church at sbcglobal.net
       </A><BR>
    <I>Thu May 12 15:54:58 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010465.html">[Twisted-Python] pending twisted fixes
</A></li>
        <LI>Next message: <A HREF="010464.html">[Twisted-Python] Unit Testing in twisted 2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10440">[ date ]</a>
              <a href="thread.html#10440">[ thread ]</a>
              <a href="subject.html#10440">[ subject ]</a>
              <a href="author.html#10440">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've been following the recent thread on the problems with twisted.trial
and since it is evidently broken I am hesitant about using it.  Instead
I create a class that performs all of my tests and sets class attributes
with the results.  I can then create this class once (at the module
level) and then use the standard unittest module to check the results. 
For example (this is untested code, I'm just trying to briefly
illustrate the approach I'm taking):

class PerformTests:
    def __init__(self):
       self.reactorStartedResults=False
       self.reactorStoppedResults=False

       reactor.callLater(0,self.reactorStarted)
       reactor.run()
       self.reactorStoppedResults=True

    def reactorStarted(self):
       self.reactorStartedResults=True

       # Issue another test here with .addboth(self.nextTestMethodName)
or stop reactor:
       reactor.stop()
      
   

performTests=PerformTests()

class Test(unittest.TestCase):
    def testReactorStart(self):
        self.assert_(performTests.self.reactorStartedResults)

    def testReactorStopped(self):
        self.assert_(performTests.self.reactorStoppedResults)

   # other tests


Should I use twisted.trial despite it's problems?  If not, is there a
better way to implement unit testing then the approach illustrated
above?  Any suggestions will be appreciated.


Thanks,


Shawn Church
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">sl_church at sbcglobal.net</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010465.html">[Twisted-Python] pending twisted fixes
</A></li>
	<LI>Next message: <A HREF="010464.html">[Twisted-Python] Unit Testing in twisted 2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10440">[ date ]</a>
              <a href="thread.html#10440">[ thread ]</a>
              <a href="subject.html#10440">[ subject ]</a>
              <a href="author.html#10440">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
