<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Reactors and New Asynchronous APIs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Reactors%20and%20New%20Asynchronous%20APIs&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010340.html">
   <LINK REL="Next"  HREF="010330.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Reactors and New Asynchronous APIs</H1>
    <B>Patrick M&#233;zard</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Reactors%20and%20New%20Asynchronous%20APIs&In-Reply-To="
       TITLE="[Twisted-Python] Reactors and New Asynchronous APIs">pmezard at gmail.com
       </A><BR>
    <I>Thu May  5 05:52:18 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010340.html">[Twisted-Python] twistedmatrix.com gets a touch-up
</A></li>
        <LI>Next message: <A HREF="010330.html">[Twisted-Python] Reactors and New Asynchronous APIs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10328">[ date ]</a>
              <a href="thread.html#10328">[ thread ]</a>
              <a href="subject.html#10328">[ subject ]</a>
              <a href="author.html#10328">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,
I have several questions about twisted reactors and extending the twisted
framework with new asynchronous APIs.

1- What is the status of the IOCP reactor? Is it stable? If it is, is there any
reason for not selecting it as the default reactor for win32 NT platforms?

2- I am considering the integration of a custom database API (like Berkeley DB)
in a twisted application. I could easily wrap the API in a C++ python module and
access it synchronously from twisted, at least in a prototyping phase. 
Obviously, if the blocking calls are too long it would make the whole framework
completely useless. Then, the calls could be made from twisted managed threads.
Assuming the module code was written to minimize GIL contention it would 
probably greatly improve the situation. The most efficient solution would be
to plug the asynchronous API directly into the reactor: 

Is it possible to extend reactors with new asynchronous API implemented in
separate client modules?

With my little knowledge of the twisted framework and quick glances at the
selectreactor and iocpreactor implementation, I think the answer is no.
The practical solution would be to duplicate the reactor code and extend it
with the new API calls.

I do not know if it would be easy or not to provide a pluggable asynchronous
framework *at C module level*. Basically, the reactor is nothing else than a
thread-safe event queue with a (post/get)-event API. If this abstraction can be
implemented at C level, then plugging new asynchronous handlers would be clearly
doable, _iocp.c is a good example for that. Now, I am not really knowledgeable
(yet) about python C module coding, and I guess it is not exactly easy to bind
C callbacks from one python C module into another using normal python code as
glue. In the end, this is just another plugin/component system like COM to
write so...

Any thoughts?

Patrick M&#233;zard




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010340.html">[Twisted-Python] twistedmatrix.com gets a touch-up
</A></li>
	<LI>Next message: <A HREF="010330.html">[Twisted-Python] Reactors and New Asynchronous APIs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10328">[ date ]</a>
              <a href="thread.html#10328">[ thread ]</a>
              <a href="subject.html#10328">[ subject ]</a>
              <a href="author.html#10328">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
