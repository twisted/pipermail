<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] using yield in unittest.TestCase
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20using%20yield%20in%20unittest.TestCase&In-Reply-To=20050519175631.GB21108%40flyingdutchmen.vanu.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010480.html">
   <LINK REL="Next"  HREF="010483.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] using yield in unittest.TestCase</H1>
    <B>Jp Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20using%20yield%20in%20unittest.TestCase&In-Reply-To=20050519175631.GB21108%40flyingdutchmen.vanu.com"
       TITLE="[Twisted-Python] using yield in unittest.TestCase">exarkun at divmod.com
       </A><BR>
    <I>Thu May 19 14:43:30 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010480.html">[Twisted-Python] using yield in unittest.TestCase
</A></li>
        <LI>Next message: <A HREF="010483.html">[Twisted-Python] using yield in unittest.TestCase
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10481">[ date ]</a>
              <a href="thread.html#10481">[ thread ]</a>
              <a href="subject.html#10481">[ subject ]</a>
              <a href="author.html#10481">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 19 May 2005 13:56:31 -0400, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">maitland at vanu.com</A> wrote:
&gt;<i>Hi all-
</I>&gt;<i>
</I>&gt;<i>I've been trying to unit test some code that uses a lot of generators
</I>&gt;<i>and Callbacks, so I would like to be able yield my Callbacks and check
</I>&gt;<i>them out.  However, whenever I stick a yield in my test case (in a
</I>&gt;<i>subclass of trial.unittest.TestCase), the test automatically passes
</I>&gt;<i>and, as far as I can tell, doesn't actually get evaluated at all.
</I>&gt;<i>
</I>&gt;<i>Is this a known issue?  Does anybody know of a way I can work around
</I>&gt;<i>it?
</I>&gt;<i>
</I>
    As you're probably aware, putting a yield into a function definition turns the function into a generator function.  As you are also probably aware, calling a generator function returns a generator, but doesn't execute any code in the generator function: only when the generator is iterated is the generator function executed.


    So trial calls your test method and gets back a generator.  It doesn't know a thing about generators.  So it ignores it and moves on.  The test passes because it didn't raise an exception.

    If you're trying to use the new Deferred generator feature to use use a generator function to manipulate a Deferred, you need to decorate your test method with deferredGenerator:

        def testFoo(self):
            ...
        testFoo = deferredGenerator(testFoo)

    If you're trying to use flow, you probably shouldn't.  It's unclear to me what the path to support flow in trial is.

    If you're trying to do something else... I'm confused.

  Jp


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010480.html">[Twisted-Python] using yield in unittest.TestCase
</A></li>
	<LI>Next message: <A HREF="010483.html">[Twisted-Python] using yield in unittest.TestCase
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10481">[ date ]</a>
              <a href="thread.html#10481">[ thread ]</a>
              <a href="subject.html#10481">[ subject ]</a>
              <a href="author.html#10481">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
