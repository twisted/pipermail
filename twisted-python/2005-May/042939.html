<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] adbapi, PostgreSQL and Unicode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20adbapi%2C%20PostgreSQL%20and%20Unicode&In-Reply-To=%3C42820871.6020906%40smartology.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="042938.html">
   <LINK REL="Next"  HREF="042949.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] adbapi, PostgreSQL and Unicode</H1>
    <B>Remy Cool</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20adbapi%2C%20PostgreSQL%20and%20Unicode&In-Reply-To=%3C42820871.6020906%40smartology.nl%3E"
       TITLE="[Twisted-Python] adbapi, PostgreSQL and Unicode">mailinglists at smartology.nl
       </A><BR>
    <I>Wed May 11 07:28:17 MDT 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="042938.html">[Twisted-Python] adbapi, PostgreSQL and Unicode
</A></li>
        <LI>Next message (by thread): <A HREF="042949.html">[Twisted-Python] adbapi, PostgreSQL and Unicode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42939">[ date ]</a>
              <a href="thread.html#42939">[ thread ]</a>
              <a href="subject.html#42939">[ subject ]</a>
              <a href="author.html#42939">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matt Goodall wrote:
&gt;<i> Michal Eldar wrote:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i>I keep getting - Unhandled error in Deferred
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> You should attach an errback to the deferred and handle, or at least
</I>&gt;<i> log, the exception. That's what &quot;Unhandled error in Deferred&quot; means ;-).
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i>I'm trying to perform an INSERT on my db (using adbapi with *pgdb*
</I>&gt;&gt;<i>module).
</I>&gt;&gt;<i>INSERT which comprises *Unicode* string
</I>&gt;&gt;<i>e.g. -
</I>&gt;&gt;<i>unicodeChar1 = u&quot;Character=[\N{GREEK CAPITAL LETTER GAMMA}]&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>the db is defined to Unicode
</I>&gt;&gt;<i>*client_encoding* value is set to *Unicode* when checking its value in
</I>&gt;&gt;<i>*cp_openfun *called function
</I>&gt;&gt;<i>execute the same INSERT directly with *pgdb *works great
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Does anyone has experience with adbapi with Unicode db ?!?!
</I>
&lt;snip&gt;

I also use pgdb with adbapi and unicode without problems. Insert's with
unicode strings should not be problem even if the database is set to
SQLASCII. The pgdb module inspects the string before sending it to the
postgres machinery. If it's a unicode string (isinstance('the string',
unicode) ) it's encoded to utf-8.

I've submitted a patch to Darcy at pygresql.org for enhanced unicode
support for pgdb. This patch takes care of the client_encoding stuff and
makes it possible to fetch unicode strings from select queries.

-- Remy --



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="042938.html">[Twisted-Python] adbapi, PostgreSQL and Unicode
</A></li>
	<LI>Next message (by thread): <A HREF="042949.html">[Twisted-Python] adbapi, PostgreSQL and Unicode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42939">[ date ]</a>
              <a href="thread.html#42939">[ thread ]</a>
              <a href="subject.html#42939">[ subject ]</a>
              <a href="author.html#42939">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
