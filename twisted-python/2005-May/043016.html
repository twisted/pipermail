<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How to create a new service and listen on a new	port?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20to%20create%20a%20new%20service%20and%20listen%20on%20a%20new%0A%09port%3F&In-Reply-To=%3C20050523094143.559.1531852400.divmod.quotient.7609%40ohm%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="043014.html">
   <LINK REL="Next"  HREF="043018.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How to create a new service and listen on a new	port?</H1>
    <B>Jp Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20to%20create%20a%20new%20service%20and%20listen%20on%20a%20new%0A%09port%3F&In-Reply-To=%3C20050523094143.559.1531852400.divmod.quotient.7609%40ohm%3E"
       TITLE="[Twisted-Python] How to create a new service and listen on a new	port?">exarkun at divmod.com
       </A><BR>
    <I>Mon May 23 03:41:43 MDT 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="043014.html">[Twisted-Python] How to create a new service and listen on a new	port?
</A></li>
        <LI>Next message (by thread): <A HREF="043018.html">[Twisted-Python] How to create a new service and listen on a new	port?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43016">[ date ]</a>
              <a href="thread.html#43016">[ thread ]</a>
              <a href="subject.html#43016">[ subject ]</a>
              <a href="author.html#43016">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 23 May 2005 13:49:21 +0800, Eric Hsu &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">nkeric at gmail.com</A>&gt; wrote:
&gt;<i>Hi all,
</I>&gt;<i>
</I>&gt;<i>This is my first post here, and I'm not a native English speaker, so
</I>&gt;<i>please bear with me :)
</I>&gt;<i>I'm trying to implement something like this:
</I>&gt;<i>
</I>&gt;<i> * A UDP server listening on port1 for incoming request
</I>&gt;<i> * A client sends the requset to port1
</I>&gt;<i> * The server confirms the request and creates another (different) UDP
</I>&gt;<i>service on a new port (port2)
</I>&gt;<i> * The client then would be able to connect to port2 and do some other things...
</I>&gt;<i>
</I>&gt;<i>By reading this &quot;Writing a New Plug-In for mktap&quot;
</I>&gt;<i> - <A HREF="http://twistedmatrix.com/projects/core/documentation/howto/plugin.html">http://twistedmatrix.com/projects/core/documentation/howto/plugin.html</A>
</I>&gt;<i>
</I>&gt;<i>I've implemented a UDP server and could run it with &quot;twisted -f&quot;.
</I>&gt;<i>Now the server receives request on port1, and creates a new service at
</I>&gt;<i>port2 for client to connect to it.
</I>&gt;<i>
</I>&gt;<i>I implemented this as the following:
</I>&gt;<i>
</I>&gt;<i>class FooServer(DatagramProtocol):
</I>&gt;<i>    def datagramReceived(self, data, addr):
</I>&gt;<i>        # do something to verify the request and send the client with
</I>&gt;<i>a confirm msg
</I>&gt;<i>        reactor.listenUDP(port2, AnotherService())
</I>&gt;<i>        reactor.run()
</I>&gt;<i>
</I>
  Since nothing is likely to call datagramReceived unless the reactor is running, and calling reactor.run() while the reactor is running is a terribly broken thing to do, the above code is likely mistaken in calling reactor.run().

  I bet shutdown behavioor will become much nicer if you remove the call to reactor.run() here, and in any other similar places.

  twistd will start and stop the reactor for you.

Jp


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="043014.html">[Twisted-Python] How to create a new service and listen on a new	port?
</A></li>
	<LI>Next message (by thread): <A HREF="043018.html">[Twisted-Python] How to create a new service and listen on a new	port?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43016">[ date ]</a>
              <a href="thread.html#43016">[ thread ]</a>
              <a href="subject.html#43016">[ subject ]</a>
              <a href="author.html#43016">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
