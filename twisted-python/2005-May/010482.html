<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Anyone seeing hanging of Twisted HTTPS servers?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Anyone%20seeing%20hanging%20of%20Twisted%20HTTPS%20servers%3F&In-Reply-To=C945921D-A0CD-4B91-A64B-36A356DA9E76%40fuhm.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010478.html">
   <LINK REL="Next"  HREF="010493.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Anyone seeing hanging of Twisted HTTPS servers?</H1>
    <B>Mike C. Fletcher</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Anyone%20seeing%20hanging%20of%20Twisted%20HTTPS%20servers%3F&In-Reply-To=C945921D-A0CD-4B91-A64B-36A356DA9E76%40fuhm.net"
       TITLE="[Twisted-Python] Anyone seeing hanging of Twisted HTTPS servers?">mcfletch at rogers.com
       </A><BR>
    <I>Thu May 19 14:57:44 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010478.html">[Twisted-Python] Anyone seeing hanging of Twisted HTTPS servers?
</A></li>
        <LI>Next message: <A HREF="010493.html">[Twisted-Python] Re: Anyone seeing hanging of Twisted HTTPS servers?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10482">[ date ]</a>
              <a href="thread.html#10482">[ thread ]</a>
              <a href="subject.html#10482">[ subject ]</a>
              <a href="author.html#10482">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>James Y Knight wrote:
...

&gt;<i> I think it's probably more likely that it's not hanging in C code at
</I>&gt;<i> all, but in a bit of application python code. What I'd do is add a
</I>&gt;<i> &quot;watchdog&quot; timer, something like this. Of course, this won't work if
</I>&gt;<i> it's blocking in a C call somewhere because the python signal handler
</I>&gt;<i> won't be called until the C call returns. But even that might give you
</I>&gt;<i> some useful information on what the problem is.
</I>&gt;<i>
</I>&gt;<i> import signal, pdb, sys
</I>&gt;<i> from twisted.internet import task
</I>&gt;<i>
</I>&gt;<i> def timeout(*args):
</I>&gt;<i> sys.stderr.write(&quot;SIGALRM timeout, breaking into debugger.\n&quot;)
</I>&gt;<i> import pdb; pdb.set_trace()
</I>&gt;<i>
</I>&gt;<i> signal.signal(signal.SIGALRM, timeout)
</I>&gt;<i>
</I>&gt;<i> task.LoopingCall(signal.alarm, 10).start(1)
</I>
That's really nice. However, it seems that the alarm handler drops into
the database thread, rather than the foreground thread. Still, it does
make it possible to simply log the heck out of everything and force an
exit of the whole application to see where in the log it's stopping.

Thanks,
Mike

-- 
________________________________________________
  Mike C. Fletcher
  Designer, VR Plumber, Coder
  <A HREF="http://www.vrplumber.com">http://www.vrplumber.com</A>
  <A HREF="http://blog.vrplumber.com">http://blog.vrplumber.com</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010478.html">[Twisted-Python] Anyone seeing hanging of Twisted HTTPS servers?
</A></li>
	<LI>Next message: <A HREF="010493.html">[Twisted-Python] Re: Anyone seeing hanging of Twisted HTTPS servers?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10482">[ date ]</a>
              <a href="thread.html#10482">[ thread ]</a>
              <a href="subject.html#10482">[ subject ]</a>
              <a href="author.html#10482">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
