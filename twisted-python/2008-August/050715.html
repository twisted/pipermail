<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] AsynQueue: return deferred from queued method
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20AsynQueue%3A%20return%20deferred%20from%20queued%20method&In-Reply-To=%3C48A06033.4010107%40eepatents.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="050714.html">
   <LINK REL="Next"  HREF="050726.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] AsynQueue: return deferred from queued method</H1>
    <B>Ed Suominen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20AsynQueue%3A%20return%20deferred%20from%20queued%20method&In-Reply-To=%3C48A06033.4010107%40eepatents.com%3E"
       TITLE="[Twisted-Python] AsynQueue: return deferred from queued method">general at eepatents.com
       </A><BR>
    <I>Mon Aug 11 09:52:19 MDT 2008</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="050714.html">[Twisted-Python] AsynQueue: return deferred from queued method
</A></li>
        <LI>Next message (by thread): <A HREF="050726.html">[Twisted-Python] AsynQueue: return deferred from queued method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50715">[ date ]</a>
              <a href="thread.html#50715">[ thread ]</a>
              <a href="subject.html#50715">[ subject ]</a>
              <a href="author.html#50715">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Stephan Jaeger wrote:
&gt;<i> I'm trying to use AsynQueue for queuing requests for a synchronous
</I>&gt;<i> protocol (emi/ucp). Is it possible to return a deferred from the queued
</I>&gt;<i> method so the next method in the queue is only called after the deferred
</I>&gt;<i> from the first was fired? Or is there a better way to handle synchronous
</I>&gt;<i> protocols where i have to wait for an answer of a message sent over the
</I>&gt;<i> wire before i can send another one?
</I>
Just use a single implementer of IWorker that only accepts one 
assignment at a time. The queue will not feed it its next task until the 
deferred from its previous one has fired.

What you're trying to do is exactly what AsynQueue is for. For example, 
my sAsync package uses AsynQueue to feed database queries to the SQLite 
database engine one at a time in a single thread.

If you have multiple connections that each can handle successive 
requests successively, but independently the other connection, you can 
simply use an IWorker implementer for each one. (I don't know that 
emi/ucp has any way of doing this.) Then the queue will feed requests to 
whoever is ready, one at a time.

I use this for running jobs asynchronously over a cluster of CPU nodes. 
The queue gets fed thousands of tasks nearly at once, and parcels them 
out one at a time to each node. Some CPU nodes run faster than others, 
and the queueing makes that all work out fine.

Please note that there is also a very simple and elegant queue object in 
twisted.internet.defer that might meet your needs without the complexity 
(and capability) of AsynQueue.

Feel free to contact me offline if you have additional questions on this.

Best regards,
Ed Suominen


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="050714.html">[Twisted-Python] AsynQueue: return deferred from queued method
</A></li>
	<LI>Next message (by thread): <A HREF="050726.html">[Twisted-Python] AsynQueue: return deferred from queued method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50715">[ date ]</a>
              <a href="thread.html#50715">[ thread ]</a>
              <a href="subject.html#50715">[ subject ]</a>
              <a href="author.html#50715">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
