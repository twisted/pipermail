<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How does the pollreactor work?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20How%20does%20the%20pollreactor%20work%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018310.html">
   <LINK REL="Next"  HREF="018314.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How does the pollreactor work?</H1>
    <B>Rodney Lott</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20How%20does%20the%20pollreactor%20work%3F&In-Reply-To="
       TITLE="[Twisted-Python] How does the pollreactor work?">rlott at evertz.com
       </A><BR>
    <I>Fri Aug 29 11:35:59 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="018310.html">[Twisted-Python] Processes in Twisted,	only possible to run external prog?
</A></li>
        <LI>Next message: <A HREF="018314.html">[Twisted-Python] How does the pollreactor work?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18311">[ date ]</a>
              <a href="thread.html#18311">[ thread ]</a>
              <a href="subject.html#18311">[ subject ]</a>
              <a href="author.html#18311">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, there.

I have been trying to figure out how to use the twisted.internet.pollreactor so that I can use it to monitor a Linux named PIPE (i.e. a FIFO created using mkfifo()).  I tried without success to Google some examples but I couldn't find anything.

Now, for a simple TCP server, the setup looks something like this (i.e. like the QOTD example in the documentation):

	from twisted.internet.protocol import Protocol, Factory
	from twisted.internet import reactor
	
	class QOTD(Protocol):
	
	    def connectionMade(self):
	        self.transport.write(&quot;An apple a day keeps the doctor away\r\n&quot;) 
	        self.transport.loseConnection()
	
	# Next lines are magic:
	factory = Factory()
	factory.protocol = QOTD
	
	# 8007 is the port you want to run under. Choose something &gt;1024
	reactor.listenTCP(8007, factory)
	reactor.run()

So, the TCP type of reactor has something that tells it to listen to port 8007 and use some form of factory or object to take care of things when a connection occurs.  As far as I can guess, I would need to do some steps like this (NOTE: using mixture of real and pseudo code):

	from twisted.internet import pollreactor
	pollreactor.install()

	&lt;create a FileDescriptor object using /tmp/myfifo, maybe a class?&gt;
	&lt;use the reactor.addReader() call to register the FileDescriptor object with the reactor&gt;
	&lt;call reactor.run() (no loop) or call reactor.doPoll() (in a loop, processing returned events)?&gt;

Anyways, if anyone can give me some direction on how this reactor works.  Ideally, I would assume that the relationships would be somewhat like this:

	Protocol analogous to FileDescriptor
	reactor.listenTCP analogous to reactor.addReader()
	reactor.run() would invoke the appropriate call in my FileDescriptor-based class to handle any read events on /tmp/myfifo

Thanks in advance.

-Rodney

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20080829/6afb72ff/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20080829/6afb72ff/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018310.html">[Twisted-Python] Processes in Twisted,	only possible to run external prog?
</A></li>
	<LI>Next message: <A HREF="018314.html">[Twisted-Python] How does the pollreactor work?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18311">[ date ]</a>
              <a href="thread.html#18311">[ thread ]</a>
              <a href="subject.html#18311">[ subject ]</a>
              <a href="author.html#18311">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
