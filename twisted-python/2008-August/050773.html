<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] wxPython + Twisted = signals no longer caught
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20wxPython%20%2B%20Twisted%20%3D%20signals%20no%20longer%20caught&In-Reply-To=%3C48AE89F0.10004%40arimaz.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="050771.html">
   <LINK REL="Next"  HREF="050774.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] wxPython + Twisted = signals no longer caught</H1>
    <B>Gabriel Rossetti</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20wxPython%20%2B%20Twisted%20%3D%20signals%20no%20longer%20caught&In-Reply-To=%3C48AE89F0.10004%40arimaz.com%3E"
       TITLE="[Twisted-Python] wxPython + Twisted = signals no longer caught">gabriel.rossetti at arimaz.com
       </A><BR>
    <I>Fri Aug 22 03:42:08 MDT 2008</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="050771.html">[Twisted-Python] Multithreaded UDP server in Twisted?
</A></li>
        <LI>Next message (by thread): <A HREF="050774.html">[Twisted-Python] twisted.web session expiry
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50773">[ date ]</a>
              <a href="thread.html#50773">[ thread ]</a>
              <a href="subject.html#50773">[ subject ]</a>
              <a href="author.html#50773">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello everyone,

I am writing a (Twisted) program that intercepts some signals using , 
such as Ctrl+C, and stops the reactor. I have a base class that sets-up 
signal handlers and it works great. The handlers are in my base factory 
class (we'll call it MyBaseFactory). Here's the code in the 
MyBaseFactory's __init__() :

    def __init__(self, proto, *args, **kwargs):
        self.protocol = proto
       
        if signal.getsignal(signal.SIGINT) == signal.default_int_handler:
            # only handle if there isn't already a handler, e.g. for Pdb.
            signal.signal(signal.SIGINT, self._sigHandler)
        signal.signal(signal.SIGTERM, self._sigHandler)
       
        # Catch Ctrl-Break in windows
        if hasattr(signal, &quot;SIGBREAK&quot;):
            signal.signal(signal.SIGBREAK, self._sigHandler)

    def _sigHandler(self, signum, frame):
        if(signum == signal.SIGINT or signal.SIGTERM):
            reactor.callLater(0, reactor.stop)
        # Catch Ctrl-Break in windows
        elif hasattr(signal, &quot;SIGBREAK&quot;) and signum == signal.SIGBREAK:
            reactor.callLater(0, reactor.stop)


I've recently had to integrate wxPython in parts of my application and 
I've inherited from MyBaseFactory and wx.App. When the Gui starts, it 
creates a wx.Dialog descendant/child that creates a wx.TaskBarIcon. I 
use the wxPython integration reactor code. Also, I have tried using 
wx.Frame instead of wx.Dialog but it doesn't change anything.

The interface works great, I can use twisted, I get and receive msgs, 
etc, but when I'm in the terminal were the program was run from, and I 
send SIGINT (Ctrl+C) nothing happens. Does anyone know why wxPython or 
Twisted eats my Ctrl+C in the terminal? This code (MyBaseFactory) works 
without the wxPython (I've been using it for several months).

Thank you,
Gabriel

PS I've also posted before to the wxPython mailing list without 
mentioning the twisted part, but apparently pure wxPython does not do 
this. I've also tested it (removed all the twisted stuff) and it does 
close when a SIGINT is sent.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="050771.html">[Twisted-Python] Multithreaded UDP server in Twisted?
</A></li>
	<LI>Next message (by thread): <A HREF="050774.html">[Twisted-Python] twisted.web session expiry
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50773">[ date ]</a>
              <a href="thread.html#50773">[ thread ]</a>
              <a href="subject.html#50773">[ subject ]</a>
              <a href="author.html#50773">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
