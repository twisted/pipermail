<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Permanent Object
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Permanent%20Object&In-Reply-To=%3C18584.17469.959750.275930%40jon.es%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="050693.html">
   <LINK REL="Next"  HREF="050697.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Permanent Object</H1>
    <B>Terry Jones</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Permanent%20Object&In-Reply-To=%3C18584.17469.959750.275930%40jon.es%3E"
       TITLE="[Twisted-Python] Permanent Object">terry at jon.es
       </A><BR>
    <I>Tue Aug  5 06:14:53 MDT 2008</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="050693.html">[Twisted-Python] Permanent Object
</A></li>
        <LI>Next message (by thread): <A HREF="050697.html">[Twisted-Python] Bluetooth reactor interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50694">[ date ]</a>
              <a href="thread.html#50694">[ thread ]</a>
              <a href="subject.html#50694">[ subject ]</a>
              <a href="author.html#50694">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;&gt;&gt;&gt;&gt;<i> &quot;JP&quot; == Jean-Paul Calderone &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at divmod.com</A>&gt; writes:
</I>JP&gt; On Tue, 5 Aug 2008 17:13:41 +0530, Squzer Crawler &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">squzer at declum.com</A>&gt; wrote:
&gt;&gt;<i> I want to create a server in twisted that has a permanent variable which i
</I>&gt;&gt;<i> want to use as the number of request requested to the server. When i use
</I>&gt;&gt;<i> that for Protocol, each time the variable is created newly.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Then i used
</I>&gt;&gt;<i> *class Echo(Protocol):
</I>&gt;&gt;<i> def dataReceived(self, data):
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> if &quot;data&quot; not in dir(self.factory):
</I>&gt;&gt;<i> self.factory.data = 0
</I>&gt;&gt;<i> self.factory.data = self.factory.data + 1
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> &quot;&quot;&quot;As soon as any data is received, write it back.&quot;&quot;&quot;
</I>&gt;&gt;<i> self.transport.write(data + str(self.factory.data))
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> but i want to remove the code that is:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> **        if &quot;data&quot; not in dir(self.factory):
</I>&gt;&gt;<i> self.factory.data = 0
</I>&gt;&gt;<i> self.factory.data = self.factory.data + 1
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> How to do that?
</I>
JP&gt; Why?  You said it's what you wanted.

Hi JP

I think Squzer meant that he'd like to put the initialization code elsewhere.

Squzer, why not do the initialization of self.factory.data when the factory
is created, and then increment the variable each time a connection is made?
Is that what you meant?

Terry


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="050693.html">[Twisted-Python] Permanent Object
</A></li>
	<LI>Next message (by thread): <A HREF="050697.html">[Twisted-Python] Bluetooth reactor interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50694">[ date ]</a>
              <a href="thread.html#50694">[ thread ]</a>
              <a href="subject.html#50694">[ subject ]</a>
              <a href="author.html#50694">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
