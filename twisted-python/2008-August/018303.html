<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Processes in Twisted,	only possible to run external prog?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Processes%20in%20Twisted%2C%0A%09only%20possible%20to%20run%20external%20prog%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018298.html">
   <LINK REL="Next"  HREF="018304.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Processes in Twisted,	only possible to run external prog?</H1>
    <B>Gabriel Rossetti</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Processes%20in%20Twisted%2C%0A%09only%20possible%20to%20run%20external%20prog%3F&In-Reply-To="
       TITLE="[Twisted-Python] Processes in Twisted,	only possible to run external prog?">gabriel.rossetti at arimaz.com
       </A><BR>
    <I>Fri Aug 29 05:06:59 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="018298.html">[Twisted-Python] Monitoring configuration of twisted calls.
</A></li>
        <LI>Next message: <A HREF="018304.html">[Twisted-Python] Processes in Twisted,	only possible to run external prog?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18303">[ date ]</a>
              <a href="thread.html#18303">[ thread ]</a>
              <a href="subject.html#18303">[ subject ]</a>
              <a href="author.html#18303">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello everyone,

Here's the problem : I need to run a windows executable (proprietary, 
they won't give us the code) with wine to do some audio compression. I 
need to do different processing before (like calling sox, or parsing 
files, etc) so I wrote some functions that do everything. The windows 
exec creates a tmp file named &quot;_tmp&quot; in the working dir, so if I want to 
run several in parallel, I have to create a tmp dir with a unique name 
and change the working dir, if not then the multiple executions will 
overwrite each other's tmp file. So when I call my function that does 
the whole process, I first create a tmp dir, then pass it the tmp dir 
and the input filename, then once inside the function, it does an 
os.chDir() into the tmp dir and at the end it does it again to go back 
to the original current dir. Then I run that function in threads. The 
problem is that threads share the current dir :

<A HREF="http://www.biais.org/blog/index.php/2007/01/23/19-python-threads-and-oschdir">http://www.biais.org/blog/index.php/2007/01/23/19-python-threads-and-oschdir</A> 

<A HREF="http://bugs.python.org/issue1367">http://bugs.python.org/issue1367</A>

so I need to use processes instead, as they each have their own current 
dir. The thing is that from what I understand, Twisted's process API is 
intended to be used with external executables only, correct? I wasn' t 
able to fins anything that allowed me to do stuff like I would using 
fork(). Should I just use python's fock() instead? Is it safe with Twisted?

Thank you,
Gabriel


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018298.html">[Twisted-Python] Monitoring configuration of twisted calls.
</A></li>
	<LI>Next message: <A HREF="018304.html">[Twisted-Python] Processes in Twisted,	only possible to run external prog?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18303">[ date ]</a>
              <a href="thread.html#18303">[ thread ]</a>
              <a href="subject.html#18303">[ subject ]</a>
              <a href="author.html#18303">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
