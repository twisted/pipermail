<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Execute interactive commands with a custom ssh	shell
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Execute%20interactive%20commands%20with%20a%20custom%20ssh%0A%09shell&In-Reply-To=%3C20080816121441.29191.2037211177.divmod.quotient.15180%40ohm%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="050739.html">
   <LINK REL="Next"  HREF="050742.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Execute interactive commands with a custom ssh	shell</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Execute%20interactive%20commands%20with%20a%20custom%20ssh%0A%09shell&In-Reply-To=%3C20080816121441.29191.2037211177.divmod.quotient.15180%40ohm%3E"
       TITLE="[Twisted-Python] Execute interactive commands with a custom ssh	shell">exarkun at divmod.com
       </A><BR>
    <I>Sat Aug 16 06:14:41 MDT 2008</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="050739.html">[Twisted-Python] Execute interactive commands with a custom ssh	shell
</A></li>
        <LI>Next message (by thread): <A HREF="050742.html">[Twisted-Python] Execute interactive commands with a custom ssh	shell
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50741">[ date ]</a>
              <a href="thread.html#50741">[ thread ]</a>
              <a href="subject.html#50741">[ subject ]</a>
              <a href="author.html#50741">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, 16 Aug 2008 14:04:22 +0200, The Noob &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">thenoob06 at gmail.com</A>&gt; wrote:
&gt;<i>Hello all,
</I>&gt;<i>I try to implement a custom ssh server with twisted . I use* sshserver.py to
</I>&gt;<i>begin (* <A HREF="http://www.devshed.com/c/a/Python/SSH-with-Twisted/">http://www.devshed.com/c/a/Python/SSH-with-Twisted/</A> )
</I>&gt;<i>I would like to execute interactive scripts which are on my server. The
</I>&gt;<i>problem is theses scripts are interactives. How can I redirect IO on my
</I>&gt;<i>shell ?
</I>&gt;<i>For example, if I want to install a software with apt. I have questions to
</I>&gt;<i>install dependencies ( yes/no)
</I>&gt;<i>I start to create a definition for this function like def do_apt. And then
</I>&gt;<i>when in my custom shell I execute ( apt python)., that executes apt-get
</I>&gt;<i>install python on the server. But how can I redirect the output in my shell
</I>&gt;<i>to answer dependencies questions ?
</I>&gt;<i>Thanks for your help
</I>
To run a program like apt, you must be using `reactor.spawnProcess´.  That
means that you have two different protocol implementations.  One to talk
to the SSH connection (eg, `SSHDemoProtocol´ in the O'Reilly example) and
one to talk to the child process.

If you want output from the child process to show up in the SSH client, then
when the process protocol receives data from it, it should pass it on to the
SSH protocol to write to the client.  Similarly, if you want input from the
SSH client written to the stdin of the child process, when the SSH protocol
receives data it should pass it on to the process protocol to write to the
child process.

You'll have to keep track of what state your application is in to do this
correctly.  Input should only be handled this way when there is actually
a child process running.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="050739.html">[Twisted-Python] Execute interactive commands with a custom ssh	shell
</A></li>
	<LI>Next message (by thread): <A HREF="050742.html">[Twisted-Python] Execute interactive commands with a custom ssh	shell
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50741">[ date ]</a>
              <a href="thread.html#50741">[ thread ]</a>
              <a href="subject.html#50741">[ subject ]</a>
              <a href="author.html#50741">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
