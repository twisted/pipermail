<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] RemoteReference decref
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20RemoteReference%20decref&In-Reply-To=20080828125121.29191.814020133.divmod.quotient.18993%40ohm">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018288.html">
   <LINK REL="Next"  HREF="018289.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] RemoteReference decref</H1>
    <B>A</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20RemoteReference%20decref&In-Reply-To=20080828125121.29191.814020133.divmod.quotient.18993%40ohm"
       TITLE="[Twisted-Python] RemoteReference decref">aldoogy at gmail.com
       </A><BR>
    <I>Fri Aug 29 11:44:16 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="018288.html">[Twisted-Python] RemoteReference decref
</A></li>
        <LI>Next message: <A HREF="018289.html">[Twisted-Python] Could not accept new connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18312">[ date ]</a>
              <a href="thread.html#18312">[ thread ]</a>
              <a href="subject.html#18312">[ subject ]</a>
              <a href="author.html#18312">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks I didn't quite understand what decref was for.
I thought it might be the cause of another problem I was having.
but it's not a major problem - decref will just have to be triggered 
manually in an AS client.

I have a tendency to just jump in at the deep end and hope I can figure 
things out  .. .
so I really appreciate the help.

Jean-Paul Calderone wrote:
&gt;<i> On Thu, 28 Aug 2008 13:19:50 +0100, A &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">aldoogy at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i> I'm still working on an Actionscript pb client,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> and have run into a bit of a conundrum with RemoteReference which is 
</I>&gt;&gt;<i> using python's built-in __del__  to trigger a decref.
</I>&gt;&gt;<i> Actionscript doesn't have destructors so I will need to trigger the 
</I>&gt;&gt;<i> decref manually.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> based on my capture of a clent/server converation I am thinking that 
</I>&gt;&gt;<i> the client could do this in proto_answer
</I>&gt;<i>
</I>&gt;<i> This doesn't sound like it makes sense.  You should only decref when the
</I>&gt;<i> object is no longer in use.  If you can't do it from a destructor, then
</I>&gt;<i> you have to require application code to do it.  The protocol 
</I>&gt;<i> implementation
</I>&gt;<i> can't know when the application has finished using the object.
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> s -:  ('version', 6)
</I>&gt;&gt;<i> r -:  ['version', 6]
</I>&gt;&gt;<i> r -:  ['message', 1, 'root', 'login', 1, ['tuple', 'alice'], 
</I>&gt;&gt;<i> ['dictionary']]
</I>&gt;&gt;<i> s -:  ('answer', 1, ['tuple', 
</I>&gt;&gt;<i> 'x\x9b\x95\x1c\tJp\xe0\x96]\xf4\xdb\xeb\x13\t9', ('remote', 1)])
</I>&gt;&gt;<i> r -:  ['message', 2, 1, 'respond', 1, ['tuple', 
</I>&gt;&gt;<i> '\x06\x04\xf1vI\xfeP\xa0\xdfzl(\xd9\x7f!t', ['remote', 1]], 
</I>&gt;&gt;<i> ['dictionary']]
</I>&gt;&gt;<i> s -:  ('answer', 2, ('remote', 2))
</I>&gt;&gt;<i> r -:  ['decref', 1]
</I>&gt;&gt;<i> r -:  ['message', 3, 2, 'joinGroup', 1, ['tuple', 
</I>&gt;&gt;<i> '#lookingForFourth'], ['dictionary']]
</I>&gt;&gt;<i> s -:  ('answer', 3, ('remote', 3))
</I>&gt;&gt;<i> r -:  ['decref', 2]
</I>&gt;&gt;<i> r -:  ['message', 4, 3, 'send', 1, ['tuple', 'You can call me Al.'], 
</I>&gt;&gt;<i> ['dictionary']]
</I>&gt;&gt;<i> s -:  ('message', 1, 1, 'print', 1, ['tuple', '&lt;alice&gt; says: You can 
</I>&gt;&gt;<i> call me Al.'], ['dictionary'])
</I>&gt;&gt;<i> s -:  ('answer', 4, ['None'])
</I>&gt;&gt;<i> r -:  ['decref', 3]
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The protocol capture shows decrefs after answers purely by 
</I>&gt;<i> coincidence.  If
</I>&gt;<i> the application code being run to generate this kept references to the
</I>&gt;<i> objects longer, then you wouldn't see this pattern.
</I>&gt;<i>
</I>&gt;<i> Jean-Paul
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018288.html">[Twisted-Python] RemoteReference decref
</A></li>
	<LI>Next message: <A HREF="018289.html">[Twisted-Python] Could not accept new connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18312">[ date ]</a>
              <a href="thread.html#18312">[ thread ]</a>
              <a href="subject.html#18312">[ subject ]</a>
              <a href="author.html#18312">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
