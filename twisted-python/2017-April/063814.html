<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] [ANN] txkube 0.1.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%5BANN%5D%20txkube%200.1.0&In-Reply-To=%3C35A2126E-61DD-4E17-8A23-F231AD0E0ABA%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="063813.html">
   <LINK REL="Next"  HREF="031354.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] [ANN] txkube 0.1.0</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%5BANN%5D%20txkube%200.1.0&In-Reply-To=%3C35A2126E-61DD-4E17-8A23-F231AD0E0ABA%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] [ANN] txkube 0.1.0">glyph at twistedmatrix.com
       </A><BR>
    <I>Tue Apr 11 19:56:38 MDT 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="063813.html">[Twisted-Python] [ANN] txkube 0.1.0
</A></li>
        <LI>Next message (by thread): <A HREF="031354.html">[Twisted-Python] Beginner
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63814">[ date ]</a>
              <a href="thread.html#63814">[ thread ]</a>
              <a href="subject.html#63814">[ subject ]</a>
              <a href="author.html#63814">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On Apr 11, 2017, at 4:14 AM, Jean-Paul Calderone &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> On Tue, Apr 11, 2017 at 1:15 AM, Glyph Lefkowitz &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt;&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> On Apr 10, 2017, at 11:11 AM, Jean-Paul Calderone &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt;&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Hello all,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I'm pleased to announce the first release of txkube, a Twisted-based library for interacting with Kubernetes using the HTTP API.
</I>&gt;<i> 
</I>&gt;<i> âœ¨Â³âœ¨ðŸŽ‰
</I>&gt;<i> 
</I>&gt;&gt;<i> This release supports several of the most commonly used basic Kubernetes objects, including Services, ConfigMaps, Deployments, ReplicaSets, and Pods.  While Kubernetes has many, many more object kinds, this collection of kinds already supports a very useful set of interactions.
</I>&gt;<i> 
</I>&gt;<i> Thanks for the announcement!
</I>&gt;<i> 
</I>&gt;<i> I do have one question about txkube, since this comes up periodically in every higher-level networking layer, and it's a place where I think Twisted has some advantages over other HTTP clients: is there a way to specify custom trust roots, or construct a custom Agent to pass in to txkube?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> There's another constructor for IKubernetesService &lt;<A HREF="https://github.com/LeastAuthority/txkube/blob/b2e81400e40989696f82cabfd575d5283f7180e8/src/txkube/_interface.py">https://github.com/LeastAuthority/txkube/blob/b2e81400e40989696f82cabfd575d5283f7180e8/src/txkube/_interface.py</A>&gt;, network_kubernetes &lt;<A HREF="https://github.com/LeastAuthority/txkube/blob/b2e81400e40989696f82cabfd575d5283f7180e8/src/txkube/_network.py#L41-L56">https://github.com/LeastAuthority/txkube/blob/b2e81400e40989696f82cabfd575d5283f7180e8/src/txkube/_network.py#L41-L56</A>&gt;.  It takes an IAgent.  So one can do:
</I>&gt;<i> 
</I>&gt;<i>     network_kubernetes(base_url=url, agent=Agent(contextFactory=...))
</I>&gt;<i> 
</I>&gt;<i> Does that approach fit with any emerging conventions for exposing this kind of functionality?  I'd be happy to adapt it if there's a better pattern.
</I>
I think that's the state of the art, and it's a good primitive to build upon. If something needs to change, it's not the way txkube (et. al.) accept their argument, but rather a function in Twisted somewhere that computes the Towers of Hanoi Agent-stacking solution that Treq contains: <A HREF="https://github.com/twisted/treq/blob/b436c6c89b3a1b7fb2ecb5300ae24bcbea20fad0/src/treq/client.py#L198-L217">https://github.com/twisted/treq/blob/b436c6c89b3a1b7fb2ecb5300ae24bcbea20fad0/src/treq/client.py#L198-L217</A>

&gt;<i> Also note that it's common for Kubernetes to be deployed with a self-signed or other non-cartel certificate.  So even the API in the example, network_kubernetes_from_context, doesn't trust the usual web-oriented collection of CAs.  It only respects the certificate found in the local Kubernetes configuration.  This means that there's another way to control this - edit ~/.kube/config and put the desired CA certificate there.
</I>
Cool.  Although this is actually exactly what I'd expect (as I would imagine most Kubernetes users) this behavior sounds like something that might be worth calling out in the README.

&gt;<i>  
</I>&gt;&gt;<i> Here is an example of txkube usage, taken from the README:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i>    from __future__ import print_function
</I>&gt;&gt;<i>    from twisted.internet.task import react
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i>    from txkube import v1, network_kubernetes_from_context
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i>    @react
</I>&gt;<i> 
</I>&gt;<i> btw, don't think I didn't notice this &lt;<A HREF="https://github.com/twisted/twisted/pull/646#discussion_r96104930">https://github.com/twisted/twisted/pull/646#discussion_r96104930</A>&gt;...
</I>&gt;<i> 
</I>&gt;<i> ðŸ˜‚
</I>&gt;<i> 
</I>&gt;<i> Jean-Paul
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i>    def main(reactor):
</I>&gt;&gt;<i>        k8s = network_kubernetes_from_context(reactor, u&quot;minikube&quot;)
</I>&gt;&gt;<i>        client = k8s.client()
</I>&gt;&gt;<i>        d = client.list(v1.Namespace)
</I>&gt;&gt;<i>        d.addCallback(print)
</I>&gt;&gt;<i>        return d
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> You can download txkube from PyPI &lt;<A HREF="https://pypi.python.org/pypi">https://pypi.python.org/pypi</A>&gt;.
</I>&gt;&gt;<i> You can contribute to its development on GitHub &lt;<A HREF="https://github.com/LeastAuthority/txkube">https://github.com/LeastAuthority/txkube</A>&gt;.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Thanks to Least Authority Enterprises &lt;<A HREF="https://leastauthority.com/">https://leastauthority.com/</A>&gt; for sponsoring this development.
</I>&gt;<i> 
</I>&gt;<i> Thanks, LAE!
</I>&gt;<i> 
</I>&gt;<i> -glyph
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>&gt;
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A> &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>&gt;
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A> &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>&gt;
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20170411/b0c93191/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="063813.html">[Twisted-Python] [ANN] txkube 0.1.0
</A></li>
	<LI>Next message (by thread): <A HREF="031354.html">[Twisted-Python] Beginner
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63814">[ date ]</a>
              <a href="thread.html#63814">[ thread ]</a>
              <a href="subject.html#63814">[ subject ]</a>
              <a href="author.html#63814">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
