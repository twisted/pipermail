<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] revert / rework of &quot;AMPv2&quot; change?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20revert%20/%20rework%20of%20%22AMPv2%22%20change%3F&In-Reply-To=%3CBE3583A2-6E4E-4550-AE6D-ACD4A12CF900%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="065295.html">
   <LINK REL="Next"  HREF="065289.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] revert / rework of &quot;AMPv2&quot; change?</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20revert%20/%20rework%20of%20%22AMPv2%22%20change%3F&In-Reply-To=%3CBE3583A2-6E4E-4550-AE6D-ACD4A12CF900%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] revert / rework of &quot;AMPv2&quot; change?">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon Oct 19 11:18:22 MDT 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="065295.html">[Twisted-Python] Re-run Azure tests
</A></li>
        <LI>Next message (by thread): <A HREF="065289.html">[Twisted-Python] revert / rework of &quot;AMPv2&quot; change?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65288">[ date ]</a>
              <a href="thread.html#65288">[ thread ]</a>
              <a href="subject.html#65288">[ subject ]</a>
              <a href="author.html#65288">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I just glanced at <A HREF="https://github.com/twisted/twisted/pull/1417">https://github.com/twisted/twisted/pull/1417</A> &lt;<A HREF="https://github.com/twisted/twisted/pull/1417">https://github.com/twisted/twisted/pull/1417</A>&gt; after it was merged and noticed a few problems:

- It exposes a new top-level name rather than setting the protocol version as a parameter
- The NEWS files are malformed which is going to lead to some confusing duplication in the changelog
- AMPv2 itself does not appear to be &quot;standardized&quot; - the page at <A HREF="https://amp-protocol.net/conversations_v2.html">https://amp-protocol.net/conversations_v2.html</A> &lt;<A HREF="https://amp-protocol.net/conversations_v2.html">https://amp-protocol.net/conversations_v2.html</A>&gt; appears to be a preliminary suggestion for how long values might be handled rather than something broadly implemented; for one thing, I'd never heard of it before and for another the site itself doesn't link the document. This would be fine as a first draft, but I think it needs to be given some more revisions, given that (for example) there are a number of backwards-compatible ways to do this.
- The layering is wrong because it puts the protocol-parsing into a leaf class in the hierarchy, when the parsing logic was deliberately isolated to a lower level to facilitate different framing mechanisms.
- As JP pointed out, the tests have a potential bug where they can leak errors between cases.

I don't normally like to revert folks' work once it's been reviewed and accepted, particularly when there's no process violation (broken CI, lack of code coverage etc), but I'm particularly concerned about lending Twisted's imprimatur to this protocol extension as a whole new version without much more context on who is implementing it and what other options were considered, particularly when I personally (nominally the inventor of AMP) don't like the direction it has taken :).

What do other folks think?  Anyone else have more of a finger on the pulse of where the &quot;v2&quot; conversation has been happening?

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20201019/eec32344/attachment.htm&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="065295.html">[Twisted-Python] Re-run Azure tests
</A></li>
	<LI>Next message (by thread): <A HREF="065289.html">[Twisted-Python] revert / rework of &quot;AMPv2&quot; change?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65288">[ date ]</a>
              <a href="thread.html#65288">[ thread ]</a>
              <a href="subject.html#65288">[ subject ]</a>
              <a href="author.html#65288">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
