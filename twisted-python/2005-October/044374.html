<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How to force synchronous behavior
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20to%20force%20synchronous%20behavior&In-Reply-To=%3C43663083.1080803%40nortel.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="044373.html">
   <LINK REL="Next"  HREF="044375.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How to force synchronous behavior</H1>
    <B>Pedro Sanchez</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20to%20force%20synchronous%20behavior&In-Reply-To=%3C43663083.1080803%40nortel.com%3E"
       TITLE="[Twisted-Python] How to force synchronous behavior">psanchez at nortel.com
       </A><BR>
    <I>Mon Oct 31 07:56:03 MST 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="044373.html">[Twisted-Python] How to force synchronous behavior
</A></li>
        <LI>Next message (by thread): <A HREF="044375.html">[Twisted-Python] How to force synchronous behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44374">[ date ]</a>
              <a href="thread.html#44374">[ thread ]</a>
              <a href="subject.html#44374">[ subject ]</a>
              <a href="author.html#44374">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Stefan Behnel wrote:
&gt;<i> Pedro Sanchez wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i>But, the behavior of the authentication wrapper is synchronous. That is,
</I>&gt;&gt;<i>access to the system cannot be granted until all deferred operations
</I>&gt;&gt;<i>have happended.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Maybe I'm underestimating your problem, but that sounds to me like Deferred
</I>&gt;<i> chaining is all you need. Merge the pending Deferreds into a DeferredList and
</I>&gt;<i> then append your login procedure to that.
</I>&gt;<i> 
</I>&gt;<i> Stefan
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i> 
</I>I tried this already and couldn't make it work. In one of the functions 
called during the validation process I have this

     def registerSession(self, session):
         def _customerInit(self, customer):
            ...
            session.customerInit = True

         # initialize customer data
         d = defer.Deferred()
         d1 = defer.maybeDeferred(customerInit, session)
         d1.addCallback(_customerInit)
         d1.addErrback(errhandler, session)
         d.chainDeferred(d1)
         return d

customerInit() fires several deferreds which I collect with a 
deferredList already. This works well. My goal therefore is to force 
&quot;registerSession()&quot; to behave synchronously[1] so that whoever is 
invoking it will block. I thought that by defining my own deferred d, 
and that by chaining it to d1 I would achive this. But I don't, the 
caller still doesn't block and goes along thinking that 
registerSsession() is done. I guess I don't understand how to use the 
chainDeferred() call. Hints are welcome; regardeless of what I end up 
doing, I'd like to understand who deferred chaining works.

In a previous answer from Jean-Paul Calderone, he mentions that the 
requestAvatar and requestAvatarId methods don't have to be synchronous 
(thanks Jean-Paul!). This is no evident from the documentation, in fact, 
I dare to say that in all examples I've seen so far these calls are 
always synchronous, therefore my wrong assumption that they had to be.
This is likely the right way to go to modify my program. I'll look into it.

Thanks again!

-- 
Pedro



[1] Boy, I say this with hesitation after the long thread I spawned with 
my post, and after reading repeately that I shouldn't even attempt to do 
it. Which is fine, I take it, thanks for the imput. But I'm just trying 
to figure out the best way around it for my application.




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="044373.html">[Twisted-Python] How to force synchronous behavior
</A></li>
	<LI>Next message (by thread): <A HREF="044375.html">[Twisted-Python] How to force synchronous behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44374">[ date ]</a>
              <a href="thread.html#44374">[ thread ]</a>
              <a href="subject.html#44374">[ subject ]</a>
              <a href="author.html#44374">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
