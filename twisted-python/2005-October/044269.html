<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Thoughts about testing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Thoughts%20about%20testing&In-Reply-To=%3C20051025121943.431.qmail%40web33909.mail.mud.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="044262.html">
   <LINK REL="Next"  HREF="044281.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Thoughts about testing</H1>
    <B>Antony Kummel</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Thoughts%20about%20testing&In-Reply-To=%3C20051025121943.431.qmail%40web33909.mail.mud.yahoo.com%3E"
       TITLE="[Twisted-Python] Thoughts about testing">antonykummel at yahoo.com
       </A><BR>
    <I>Tue Oct 25 06:19:43 MDT 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="044262.html">[Twisted-Python] Twisted Jabber mailinglist
</A></li>
        <LI>Next message (by thread): <A HREF="044281.html">[Twisted-Python] Thoughts about testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44269">[ date ]</a>
              <a href="thread.html#44269">[ thread ]</a>
              <a href="subject.html#44269">[ subject ]</a>
              <a href="author.html#44269">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I just want to share some ideas that I have had.

&gt;<i>From my experience, testing with Trial is too hard. My
</I>problems can be divided into three categories: 1.
obscure error reporting, 2. unclean reactor 3. whoop
whoop whoop. 

I am also pretty sure that I'm doing things that Trial
does not want me to do, such as actually opening
sockets and communication over the network. I'm saying
this because it does not seem to happen in the Twisted
test-suite. But I don't think there is a good reason
for this limitation.

Actually, in sum, I think there are too many
limitations on writing tests with Trial, and they all
boil down to the unclean reactor problem (or at least
most of them). I want to suggest an alternative
approach.

How about not requiring the reactor to be clean at the
end of a test? If anyone wants to make sure that
anything they do leaves the reactor in a clean state,
they can test for it themselves. This seems to me more
like a constraint imposed by the implementation of
Trial rather than a useful feature. Also, parts of
Twisted itself are practically unusable inside a test
because they leave the reactor dirty (such as threaded
address resolution). An alternative feature could be
enabling the user to specify that a certain delayed
call or thread is allowed to remain after the test,
and then Trial won't complain. The only question
remaining is how to do it. Simple: use a different
process. Run the tests in a different process, and
create a new one each time the reactor is dirtied.
py.execnet is a nice example of this concept.

The second thought is this: there seem to be popping
up different testing toolkits each with their own very
nice extensions and features
(<A HREF="http://testoob.sourceforge.net/,">http://testoob.sourceforge.net/,</A>
<A HREF="http://codespeak.net/py/current/doc/test.html">http://codespeak.net/py/current/doc/test.html</A>). Trial
cannot benefit from this, having branched away at the
pyUnit level. I think Trial's special features can be
relatively easily formulated as plugins to a
plugin-oriented testing framework (especially if the
clean reactor requirement is relieved), and so can the
other testing packages. What this means, is that the
best thing anyone who wants the world of unit testing
to develop, and to benefit from it, is to push for a
plugin-oriented pyUnit, and for an implementation of
Trial (and the other tools) as a plugin for that
framework. I think.

Any comments?

Antony Kummel


		
__________________________________ 
Yahoo! FareChase: Search multiple travel sites in one click.
<A HREF="http://farechase.yahoo.com">http://farechase.yahoo.com</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="044262.html">[Twisted-Python] Twisted Jabber mailinglist
</A></li>
	<LI>Next message (by thread): <A HREF="044281.html">[Twisted-Python] Thoughts about testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44269">[ date ]</a>
              <a href="thread.html#44269">[ thread ]</a>
              <a href="subject.html#44269">[ subject ]</a>
              <a href="author.html#44269">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
