<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Freevo 2.0, Kamaelia, pyevent,	Eventnet/LGT: what's going on?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Freevo%202.0%2C%20Kamaelia%2C%20pyevent%2C%0A%09Eventnet/LGT%3A%20what%27s%20going%20on%3F&In-Reply-To=1129849803.5945.39.camel%40fsol">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011727.html">
   <LINK REL="Next"  HREF="011736.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Freevo 2.0, Kamaelia, pyevent,	Eventnet/LGT: what's going on?</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Freevo%202.0%2C%20Kamaelia%2C%20pyevent%2C%0A%09Eventnet/LGT%3A%20what%27s%20going%20on%3F&In-Reply-To=1129849803.5945.39.camel%40fsol"
       TITLE="[Twisted-Python] Freevo 2.0, Kamaelia, pyevent,	Eventnet/LGT: what's going on?">andrew-twisted at puzzling.org
       </A><BR>
    <I>Thu Oct 20 19:54:17 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011727.html">[Twisted-Python] Freevo 2.0, Kamaelia, pyevent, Eventnet/LGT:	what's going on?
</A></li>
        <LI>Next message: <A HREF="011736.html">[Twisted-Python] Freevo 2.0, Kamaelia, pyevent,	Eventnet/LGT: what's going on?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11731">[ date ]</a>
              <a href="thread.html#11731">[ thread ]</a>
              <a href="subject.html#11731">[ subject ]</a>
              <a href="author.html#11731">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Oct 21, 2005 at 01:10:03AM +0200, Antoine Pitrou wrote:
[...]
&gt;<i> 
</I>&gt;<i> There is a terminology problem, since I don't understand why something
</I>&gt;<i> named &quot;Protocol&quot; should be destroyed at every connection. Or it should
</I>&gt;<i> be, quite logically, renamed &quot;Connection&quot;. Also this doesn't appear in
</I>&gt;<i> the API docs (again).
</I>
I think high-level concepts like this are much better explained through
proper documents than docstrings (which is the source of our API docs).
Docstrings are generally like man pages; they give a basic reference for
something, if you're lucky an example even, but for anything more than that,
like understanding the design, you really want a more comprehensive and
coherent document than a collection of docstrings.  API docs are mainly
useful to people that already understand what's going on.

That's not to say our documentation in this area is perfect.  You're right
that the design of protocols and factories isn't really discussed
explicitly; either you find it by working through the tutorial, or perhaps
from
<A HREF="http://twistedmatrix.com/projects/core/documentation/howto/servers.html.">http://twistedmatrix.com/projects/core/documentation/howto/servers.html.</A>
Improvements welcome! ;)

As to why it's &quot;Protocol&quot; rather than &quot;Connection&quot;... that would be
differently confusing :)

The &quot;connection&quot; to me sounds like what the transport already is -- the
thing responsible for taking bytes (or datagrams) from here and sending them
to there, and that you can disconnect, and so on.  In Twisted, the
&quot;Protocol&quot; is the thing responsible for interpreting events from the
underlying connection (and in most cases, doesn't care if the underlying
transport is TCP, SSL, UNIX domain sockets, or whatever -- how the bytes are
transported isn't its responsibility).

&gt;<i> For me, a &quot;protocol&quot; is something like HTTP or SMTP. It is &quot;eternal&quot;,
</I>&gt;<i> I'm not expecting it to be created/destroyed at every connection (that
</I>&gt;<i> would be like calling an int a float, or whatever).
</I>
Well, the logic of how to interpret the byte stream into higher-level events
is &quot;eternal&quot;: your Protocol *class* is that.  The actual interpretation
(e.g.  &quot;ok, I've just seen '\n' so this is a lineReceived event... ok, I've
just seen a blank line and I was in the 'expecting HTTP headers' state so
now I'm in the 'expecting request body state', but this is a GET request so
there's no body, so this is a 'requestReceived' event&quot;) is almost always
stateful though, and state means objects, i.e. instances.  

So: you need an interpreter per connection (because interpreting a byte
stream is stateful), and interpreters ought to be able to work with any byte
stream, because most of the time there's no or little difference.  So the
interpreter and byte-stream have different objects: a Protocol and a
Transport.

&gt;<i> There is no documentation on the magic that really happens when
</I>&gt;<i> something is triggered (for example when a TCP session is established).
</I>&gt;<i> Which methods are called, which objects are created, in which order,
</I>&gt;<i> etc. Unexplained magic is annoying in software development.
</I>
There's not much magic, but there's also not much documentation.  Of course,
the end result is of inadequate documentation isn't very distinguishable
from magic :(

Depending on what levels of abstraction you care about, see the interfaces
for IReactorTCP, IConnector, IProtocolFactory, IProtocol and ITransportTCP,
and Factory itself:
    <A HREF="http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.html">http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.html</A>
    <A HREF="http://twistedmatrix.com/documents/current/api/twisted.internet.protocol.Factory.html">http://twistedmatrix.com/documents/current/api/twisted.internet.protocol.Factory.html</A>

Or ask specific questions on this list!

I hope I've helped,

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011727.html">[Twisted-Python] Freevo 2.0, Kamaelia, pyevent, Eventnet/LGT:	what's going on?
</A></li>
	<LI>Next message: <A HREF="011736.html">[Twisted-Python] Freevo 2.0, Kamaelia, pyevent,	Eventnet/LGT: what's going on?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11731">[ date ]</a>
              <a href="thread.html#11731">[ thread ]</a>
              <a href="subject.html#11731">[ subject ]</a>
              <a href="author.html#11731">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
