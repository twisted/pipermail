<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] IMAP4Client closes connection cleanly during	search()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20IMAP4Client%20closes%20connection%20cleanly%20during%0A%09search%28%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011791.html">
   <LINK REL="Next"  HREF="011793.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] IMAP4Client closes connection cleanly during	search()</H1>
    <B>Johannes Beigel</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20IMAP4Client%20closes%20connection%20cleanly%20during%0A%09search%28%29&In-Reply-To="
       TITLE="[Twisted-Python] IMAP4Client closes connection cleanly during	search()">johannes.beigel at brainbot.com
       </A><BR>
    <I>Wed Oct 26 04:27:51 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011791.html">[Twisted-Python] Weekly Bug Summary
</A></li>
        <LI>Next message: <A HREF="011793.html">[Twisted-Python] IMAP4Client closes connection cleanly during	search()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11792">[ date ]</a>
              <a href="thread.html#11792">[ thread ]</a>
              <a href="subject.html#11792">[ subject ]</a>
              <a href="author.html#11792">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello.

I'm using twisted.mail.imap4.IMAP4Client and sometimes the connection 
gets closed cleanly &quot;in the middle&quot; of a command. This occurs (in a 
reproducible way) when I do imapClient.search(imap4.Query(all=True)) on 
a really big mailbox folder. The big problem is: Neither callback nor 
errback added to the Deferred from search() is called!

I override factory.connectionLost() to get notified about the connection 
loss, but I'm not really sure what to do when I lose the connection 
(would be a lot of code to get to the same state the IMAP client has 
been in, when some command fails). If the errback connected to search() 
would be called the handling would be much easier, although I think this 
would just result in a new connection loss when trying again.

Any ideas about what happens? e-mail clients like Thunderbird have to 
problems listing the contents of this folder.

It's an courier-imap server, plain (non-TLS) connection.

Any help appreciated!

TIA
-jojo



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011791.html">[Twisted-Python] Weekly Bug Summary
</A></li>
	<LI>Next message: <A HREF="011793.html">[Twisted-Python] IMAP4Client closes connection cleanly during	search()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11792">[ date ]</a>
              <a href="thread.html#11792">[ thread ]</a>
              <a href="subject.html#11792">[ subject ]</a>
              <a href="author.html#11792">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
