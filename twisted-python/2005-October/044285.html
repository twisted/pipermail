<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Thoughts about testing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Thoughts%20about%20testing&In-Reply-To=%3C20051025200931.56727.qmail%40web33902.mail.mud.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="044281.html">
   <LINK REL="Next"  HREF="044292.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Thoughts about testing</H1>
    <B>Antony Kummel</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Thoughts%20about%20testing&In-Reply-To=%3C20051025200931.56727.qmail%40web33902.mail.mud.yahoo.com%3E"
       TITLE="[Twisted-Python] Thoughts about testing">antonykummel at yahoo.com
       </A><BR>
    <I>Tue Oct 25 14:09:31 MDT 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="044281.html">[Twisted-Python] Thoughts about testing
</A></li>
        <LI>Next message (by thread): <A HREF="044292.html">[Twisted-Python] Thoughts about testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44285">[ date ]</a>
              <a href="thread.html#44285">[ thread ]</a>
              <a href="subject.html#44285">[ subject ]</a>
              <a href="author.html#44285">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jp,

--- Jean-Paul Calderone &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at divmod.com</A>&gt; wrote:

&gt;<i> &gt;An alternative feature could be
</I>&gt;<i> &gt;enabling the user to specify that a certain delayed
</I>&gt;<i> &gt;call or thread is allowed to remain after the test,
</I>&gt;<i> &gt;and then Trial won't complain. The only question
</I>&gt;<i> &gt;remaining is how to do it. Simple: use a different
</I>&gt;<i> &gt;process. Run the tests in a different process, and
</I>&gt;<i> &gt;create a new one each time the reactor is dirtied.
</I>&gt;<i> &gt;py.execnet is a nice example of this concept.
</I>&gt;<i> 
</I>&gt;<i> Running tests in a child process is an interesting
</I>&gt;<i> idea.  It 
</I>&gt;<i> provides a much greater degree of isolation between
</I>&gt;<i> tests than 
</I>&gt;<i> essentially any other approach, which is great. 
</I>&gt;<i> Isolation is 
</I>&gt;<i> great for unit tests.  Unfortunately, it comes with
</I>&gt;<i> a lot of 
</I>&gt;<i> overhead.  While there are techniques for optimizing
</I>&gt;<i> the 
</I>&gt;<i> implementation of such a feature, running each test
</I>&gt;<i> method in a
</I>&gt;<i> different process would probably add at least 4
</I>&gt;<i> minutes to 
</I>&gt;<i> Twisted's test suite.  This is basically
</I>&gt;<i> unacceptable (Twisted's 
</I>&gt;<i> suite takes way too long to run already).
</I>
Well, it will certainly be non-optimal, but let me add
some more points in its favour:
1. It may still be faster than debugging unit tests
that fail because of a dirty reactor or other problems
that it resolves.
2. You don't have to run each test method in a
different process, only the ones who leave the
environment dirty. Of course people are likely to be
lazy if they get the chance, but it makes more sense
to leave it up to them. And of course it could be
optimized (is a pool of process what you had in mind?)
3. This feature brings us very close to completely
distributed unit testing. This will make it possible
to easily run tests simultaneously on different
computers which would actually make it faster than the
current method with very little effort (given enough
computers).
4. A mechanism allowing for running unit tests at
random locations (processes or machines) will probably
be good for making the tests themselves span more than
one computer. Despite your justified objections I
think this could be quite a powerful tool.
5. The same mechanism can be useful for another
problem I often run into: dirtying of the interactive
prompt environment. When using a relatively rich tool
such as PyCrust, for example, I have to close it and
start it again every time I make a grave enough
mistake (for example when I need to reload nested
modules). If the code I write at the prompt was to run
in a different process, I could simply click a button
to restart that process without it having an annoying
impact.

&gt;<i> &gt;The second thought is this: there seem to be
</I>&gt;<i> popping
</I>&gt;<i> &gt;up different testing toolkits each with their own
</I>&gt;<i> very
</I>&gt;<i> &gt;nice extensions and features
</I>&gt;<i> &gt;(<A HREF="http://testoob.sourceforge.net/,">http://testoob.sourceforge.net/,</A>
</I>&gt;<i> &gt;<A HREF="http://codespeak.net/py/current/doc/test.html">http://codespeak.net/py/current/doc/test.html</A>).
</I>&gt;<i> Trial
</I>&gt;<i> &gt;cannot benefit from this, having branched away at
</I>&gt;<i> the
</I>&gt;<i> &gt;pyUnit level. I think Trial's special features can
</I>&gt;<i> be
</I>&gt;<i> &gt;relatively easily formulated as plugins to a
</I>&gt;<i> &gt;plugin-oriented testing framework (especially if
</I>&gt;<i> the
</I>&gt;<i> &gt;clean reactor requirement is relieved), and so can
</I>&gt;<i> the
</I>&gt;<i> &gt;other testing packages. What this means, is that
</I>&gt;<i> the
</I>&gt;<i> &gt;best thing anyone who wants the world of unit
</I>&gt;<i> testing
</I>&gt;<i> &gt;to develop, and to benefit from it, is to push for
</I>&gt;<i> a
</I>&gt;<i> &gt;plugin-oriented pyUnit, and for an implementation
</I>&gt;<i> of
</I>&gt;<i> &gt;Trial (and the other tools) as a plugin for that
</I>&gt;<i> &gt;framework. I think.
</I>&gt;<i> 
</I>&gt;<i> Rather than hearing about the plethora of new
</I>&gt;<i> testing libraries 
</I>&gt;<i> appearing, I'd like to hear about features they
</I>&gt;<i> provide that are
</I>&gt;<i> valuable for writing tests.  I would certainly like
</I>&gt;<i> to borrow 
</I>&gt;<i> py.test's magical assert.  What other features are
</I>&gt;<i> test authors 
</I>&gt;<i> finding useful in some of these projects?
</I>
First of all, TestOOB already allows you to run test
in a different process (although I didn't go down to
the details -- this may be a little different than
what I talked about). If the plugin-oriented framework
I proposed existed, the feature we discussed above
would have already been available to us.

Secondly, it is not hard to think about ways to make
unit testing easier. Take a graphical UI for example.
In the current situation, any such improvement will be
useful for only a small group of users, and that group
is likely to grow ever smaller with the emergeance of
new frameworks. And when doing unit tests, we all
desparately want the same thing -- to make it easier.
With a common base, properly designed, we can all
benefit from everyone else's efforts, and I think this
is good enough a reason.

I join you in wanting to hear what test authors are
finding useful in these projects.

Antony Kummel



		
__________________________________ 
Start your day with Yahoo! - Make it your home page! 
<A HREF="http://www.yahoo.com/r/hs">http://www.yahoo.com/r/hs</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="044281.html">[Twisted-Python] Thoughts about testing
</A></li>
	<LI>Next message (by thread): <A HREF="044292.html">[Twisted-Python] Thoughts about testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44285">[ date ]</a>
              <a href="thread.html#44285">[ thread ]</a>
              <a href="subject.html#44285">[ subject ]</a>
              <a href="author.html#44285">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
