<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] svn-reorg blocking
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20svn-reorg%20blocking&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011776.html">
   <LINK REL="Next"  HREF="011783.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] svn-reorg blocking</H1>
    <B>Christopher Armstrong</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20svn-reorg%20blocking&In-Reply-To="
       TITLE="[Twisted-Python] svn-reorg blocking">radeex at gmail.com
       </A><BR>
    <I>Tue Oct 25 21:01:53 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011776.html">[Twisted-Python] Twisted - SQLite and SQLObject
</A></li>
        <LI>Next message: <A HREF="011783.html">[Twisted-Python] svn-reorg blocking
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11781">[ date ]</a>
              <a href="thread.html#11781">[ thread ]</a>
              <a href="subject.html#11781">[ subject ]</a>
              <a href="author.html#11781">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I really want to get svn-reorg finished up, because lots of people
really want me to release Twisted sumo, and releasing sumo without
svn-reorg is going to be very scary. Unfortunately, there's something
blocking svn-reorg's merge: We haven't figured out a way to get the
test suite to actually run with it.

Trial, in trunk, looks for packages by traversing the filesystem. This
doesn't work with packages made up of __path__s, which is how
svn-reorg works. svn-reorg includes some changes to trial that
replaces filesystem traversal with package importing, and special
support for __path__. However, this doesn't work when a package is
unimportable.

Twisted has (at least) two packages which for various reasons are
unimportable depending on your environment:
twisted.internet.iocpreactor and twisted.internet.serialport. Both of
them are unimportable because their __init__.py files have code in
them, which is against the coding standard. I think glyph mentioned
elsewhere in this thread that the coding standard allows it for
current public interfaces, but it actually only allows it for the
purposes of backwards compatibility while refactoring a module into a
package.

for iocpreactor, this is easy enough to fix: all it does in
__init__.py is &quot;from proactor import install&quot;, which is easily
replaced with

def install(*a, **kw):
    from proactor import install
    return install(*a, **kw)

However, serialport is much more devious: 'from serialport import *'.
This then causes an error on any system that doesn't have the
third-party &quot;serial&quot; module installed (which is imported by
serialport.py). The best suggestion I've heard for fixing this one is
to make serialport a single module (again) that defines all the
classes conditionally, but I do think that at least as far as code
organisation is concerned, the current way the files are laid out is
nice.

Can we try to come to a conclusion about this stuff soon?


--
  Twisted   |  Christopher Armstrong: International Man of Twistery
   Radix    |    -- <A HREF="http://radix.twistedmatrix.com">http://radix.twistedmatrix.com</A>
            |  Release Manager, Twisted Project
  \\\V///   |    -- <A HREF="http://twistedmatrix.com">http://twistedmatrix.com</A>
   |o O|    |
w----v----w-+


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011776.html">[Twisted-Python] Twisted - SQLite and SQLObject
</A></li>
	<LI>Next message: <A HREF="011783.html">[Twisted-Python] svn-reorg blocking
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11781">[ date ]</a>
              <a href="thread.html#11781">[ thread ]</a>
              <a href="subject.html#11781">[ subject ]</a>
              <a href="author.html#11781">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
