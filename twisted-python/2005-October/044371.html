<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How to force synchronous behavior
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20to%20force%20synchronous%20behavior&In-Reply-To=%3C43661C07.1070906%40nortel.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="044369.html">
   <LINK REL="Next"  HREF="044372.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How to force synchronous behavior</H1>
    <B>Pedro Sanchez</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20to%20force%20synchronous%20behavior&In-Reply-To=%3C43661C07.1070906%40nortel.com%3E"
       TITLE="[Twisted-Python] How to force synchronous behavior">psanchez at nortel.com
       </A><BR>
    <I>Mon Oct 31 06:28:39 MST 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="044369.html">[Twisted-Python] How to force synchronous behavior
</A></li>
        <LI>Next message (by thread): <A HREF="044372.html">[Twisted-Python] How to force synchronous behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44371">[ date ]</a>
              <a href="thread.html#44371">[ thread ]</a>
              <a href="subject.html#44371">[ subject ]</a>
              <a href="author.html#44371">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am the original poster of this thread. First of all, thank you for the 
different responses. However I still don't have a clear answer (other 
than what I'm thinking of doing is wrong, which is OK, it can be fixed).

I'm working on a Twisted/Nevow application, and yes, I'm new to both and 
I can tell that if learning Twisted has a step curve, doing it in 
conjuction with Nevow is really almost vertical. But, nevertheless, my 
application is working well these days.

The motivation for my question is the following: I added the 
guard/credentials stuff to my application. The issue is that in order to 
accept a login my application requires several things to happen before 
access can be granted. I therefore implemented my own AuthChecker() 
which fires several deferreds to acomplish its task. This is working 
well, including the use of deferToThread() in several places.

But, the behavior of the authentication wrapper is synchronous. That is, 
access to the system cannot be granted until all deferred operations 
have happended. In this wrapper I have something like:

     def requestAvatar(self, avatarId, mind, *interfaces):
         for iface in interfaces:
             if iface is inevow.IResource:
                 if avatarId is checkers.ANONYMOUS:
                     resc = login.LoginPage()
                     resc.realm = self
                     return (inevow.IResource, resc, noLogout)
                 else:
                     resc = home.RootPage()
                     resc.realm = self
                     return (inevow.IResource, resc,
                             self.createLogout(avatarId, mind))
             else:
                 raise NotImplementedError(&quot;Not supported.&quot;)

So let me rephrase my original question. Given that the real user 
authentication is happening in my AuthChecker() implemented somewhere 
else, with deferreds and what not, how can I force this requestAvatar() 
thing to wait until the whole login process has finished? My idea was to 
force a synchronous behavior on AuthChecker() forcing this way the login 
process to wait for it to finish.

While writting this I realize that I may be missunderstanding how the 
credentials stuff works ... who knows.

Any suggestions are appreciated,

Thank you,

-- 
Pedro




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="044369.html">[Twisted-Python] How to force synchronous behavior
</A></li>
	<LI>Next message (by thread): <A HREF="044372.html">[Twisted-Python] How to force synchronous behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44371">[ date ]</a>
              <a href="thread.html#44371">[ thread ]</a>
              <a href="subject.html#44371">[ subject ]</a>
              <a href="author.html#44371">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
