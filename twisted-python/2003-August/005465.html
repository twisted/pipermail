<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] SQL, Threaded, and flows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20SQL%2C%20Threaded%2C%20and%20flows&In-Reply-To=Pine.BSO.4.44.0308091633040.32656-100000%40cyclops4.esentire.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005462.html">
   <LINK REL="Next"  HREF="005466.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] SQL, Threaded, and flows</H1>
    <B>Clark C. Evans</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20SQL%2C%20Threaded%2C%20and%20flows&In-Reply-To=Pine.BSO.4.44.0308091633040.32656-100000%40cyclops4.esentire.com"
       TITLE="[Twisted-Python] SQL, Threaded, and flows">cce at clarkevans.com
       </A><BR>
    <I>Sat Aug  9 17:14:05 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="005462.html">[Twisted-Python] SQL, Threaded, and flows
</A></li>
        <LI>Next message: <A HREF="005466.html">[Twisted-Python] SQL, Threaded, and flows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5465">[ date ]</a>
              <a href="thread.html#5465">[ thread ]</a>
              <a href="subject.html#5465">[ subject ]</a>
              <a href="author.html#5465">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Edmund,

   This has been fixed in the CVS repository.  In short, when flow
   was added into twisted, the &quot;threaded&quot; stuff seemed to be not 
   totally stable and really not core (as it is more useful with an
   async Database or LDAP driver).  Thus, QueryIterator and Threaded
   arn't imported into the flow module automatically as the example
   assumed.  You can get to these two classes via:

      from twisted.flow.threads import QueryIterator, Threaded

   And then the example should mostly work from there.  Although
   you do need an actual database connection, of course.   

Best,

Clark

[1] <A HREF="http://twistedmatrix.com/users/jh.twistd/viewcvs/cgi/viewcvs.cgi/doc/howto/flow.html?rev=HEAD&amp;content-type=text/vnd.viewcvs-markup&amp;cvsroot=Twisted">http://twistedmatrix.com/users/jh.twistd/viewcvs/cgi/viewcvs.cgi/doc/howto/flow.html?rev=HEAD&amp;content-type=text/vnd.viewcvs-markup&amp;cvsroot=Twisted</A>

On Sat, Aug 09, 2003 at 04:35:24PM -0400, Edmund Dengler wrote:
|<i> Hi all!
</I>|<i> 
</I>|<i> I am trying the example from the Flow HowTo page, and I have into an
</I>|<i> exception.
</I>|<i> 
</I>|<i> ===========================
</I>|<i> 
</I>|<i> from __future__         import generators
</I>|<i> from twisted.enterprise import adbapi
</I>|<i> from twisted.internet   import reactor
</I>|<i> from twisted.flow import flow
</I>|<i> 
</I>|<i> dbpool = adbapi.ConnectionPool(&quot;SomeDriver&quot;,host='localhost',
</I>|<i>              db='Database',user='User',passwd='Password')
</I>|<i> 
</I>|<i> sql = &quot;&quot;&quot;
</I>|<i>   (SELECT 'one')
</I>|<i> UNION ALL
</I>|<i>   (SELECT 'two')
</I>|<i> UNION ALL
</I>|<i>   (SELECT 'three')
</I>|<i> &quot;&quot;&quot;
</I>|<i> 
</I>|<i> def consumer():
</I>|<i>     query = flow.Threaded(flow.QueryIterator(dbpool, sql))
</I>|<i>     yield query
</I>|<i>     for row in query:
</I>|<i>         print &quot;Processed result : &quot;, row
</I>|<i> 
</I>|<i> from twisted.internet import reactor
</I>|<i> def finish(result):
</I>|<i>     print &quot;Deferred Complete : &quot;, result
</I>|<i> f = flow.Deferred(consumer())
</I>|<i> f.addBoth(finish)
</I>|<i> reactor.callLater(1,reactor.stop)
</I>|<i> reactor.run()
</I>|<i> 
</I>|<i> # prints
</I>|<i> # Processed result :  ('one',)
</I>|<i> # Processed result :  ('two',)
</I>|<i> # Processed result :  ('three',)
</I>|<i> # Deferred Complete:  []
</I>|<i> 
</I>|<i> ===========================
</I>|<i> 
</I>|<i> &gt; python flow-query.py
</I>|<i> Deferred Complete :  [Failure instance: Traceback: exceptions.AttributeError, 'module' object has no attribute 'Threaded'
</I>|<i> /opt/python/lib/python2.2/site-packages/twisted/flow/wrap.py:100:_yield
</I>|<i> flow-query.py:18:consumer
</I>|<i> ]
</I>|<i> 
</I>|<i> Is there something I need to do? Has the API changed?
</I>|<i> 
</I>|<i> Regards!
</I>|<i> Ed
</I>|<i> 
</I>|<i> 
</I>|<i> 
</I>|<i> _______________________________________________
</I>|<i> Twisted-Python mailing list
</I>|<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>|<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005462.html">[Twisted-Python] SQL, Threaded, and flows
</A></li>
	<LI>Next message: <A HREF="005466.html">[Twisted-Python] SQL, Threaded, and flows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5465">[ date ]</a>
              <a href="thread.html#5465">[ thread ]</a>
              <a href="subject.html#5465">[ subject ]</a>
              <a href="author.html#5465">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
