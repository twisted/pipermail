<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted and Rendezvous
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20and%20Rendezvous&In-Reply-To=%3C20030801080603.GA7792%40ferd2.thristian.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="037838.html">
   <LINK REL="Next"  HREF="037830.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted and Rendezvous</H1>
    <B>screwtape at froup.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20and%20Rendezvous&In-Reply-To=%3C20030801080603.GA7792%40ferd2.thristian.org%3E"
       TITLE="[Twisted-Python] Twisted and Rendezvous">screwtape at froup.com
       </A><BR>
    <I>Fri Aug  1 02:06:03 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="037838.html">[Twisted-Python] twisted and wxPython 2.4.1.2
</A></li>
        <LI>Next message (by thread): <A HREF="037830.html">[Twisted-Python] Callbacks, Looping, and Variable Binding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37828">[ date ]</a>
              <a href="thread.html#37828">[ thread ]</a>
              <a href="subject.html#37828">[ subject ]</a>
              <a href="author.html#37828">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Jul 30, 2003 at 02:56:47PM -0700, Brian Warner wrote:
&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">screwtape at froup.com</A> writes:
</I>&gt;<i> 
</I>&gt;<i> &gt; A few weeks ago, someone on the list mentioned Rendezvous support for
</I>&gt;<i> &gt; Twisted. Curious, I picked up the Rendezvous specification documents,
</I>&gt;<i> &gt; and got to hacking.
</I>&gt;<i> 
</I>&gt;<i> That's cool. I'm not sure this falls into the same scope, but it occurred to
</I>&gt;<i> me that it would be handy to have a DNS server that provided SRV records
</I>&gt;<i> based upon registrations arriving from other server programs. If the
</I>&gt;<i> application (say, an HTTP server) launched, started listening on an
</I>&gt;<i> arbitrary port, then told the DNS/SRV server its service name and port
</I>&gt;<i> number, the DNS server could start feeding appropriate SRV records for the
</I>&gt;<i> application.
</I>
Having a nice standard structure for SRV records is the purposes of
the DNS-SD specification: <A HREF="http://tinyurl.com/ipj7">http://tinyurl.com/ipj7</A>

It turns out that a service like what you describe is going to be
quite important for anyone who wants to write software that uses
Rendezvous and doesn't require Mac OS X - as far as I can tell, only
one application at a time per host can bind to a particular port on a
multicast address, so if the OS doesn't supply an mDNS responder (or
your language doesn't have bindings for the OS's mDNS responder) then
applications will try and supply their own, and if two or more such
applications try and run simultaneously, problems will occur.

Thus some kind of server that sits on the network and offers mDNS
services to applications who otherwise can't offer them, possibly
working as a regular DNS server as well (configure it as the DNS
server for the '.local' domain to make legacy apps magically look up
multicast-DNS based host-names) would be an absolute boon.

Note that you only need a multicast DNS proxy to serve DNS records -
if another process on your host has already bound to the mDNS address
and port, you can look up multicast DNS records by sending ordinary
DNS packets to the mDNS port. In Twisted, it looks like this:

	from twisted.names import client

	resl = client.Resolver(servers=[('224.0.0.251', 5353)])
	resl.lookupAddress('grundoon.local').addCallback(processAddress)


&gt;<i> I'd have the application keep a TCP connection open to the DNS server, and
</I>&gt;<i> if that connection went down, the SRV record would be removed. It would work
</I>&gt;<i> a lot like dynamic DNS, except per-application instead of per-host.
</I>
The DNS-SD documentation mentions (in passing) various other
ways of updating DNS rather than multicast DNS - manual update,
scripts that use protocol-specific browsing to create a standard DNS
zone file, or (as you mention) RFC 2136, Dynamic DNS Update.

I had a brief, 20-second glance at the dynamic DNS RFC, and I can't
see any reason you shouldn't be able to send per-application records
to a dynamic DNS server. You'd still have hassles with cooperatively
maintaining DNS records and so forth, of course...

I like the idea of having a TCP connection alive (with keepalive
packets, I assume) to maintain one's DNS records. You should be able
to supply more than one record, of course (DNS-SD requires that you
serve up a PTR record and a TXT record along with your SRV record),
so the wire protocol might be a bit more complex.



Hmm.. how stable and extensible and reliable is twisted.names?

&gt;<i> just looking to plant some idea seeds..
</I>&gt;<i>  -Brian
</I>
Always welcome. :)

-- 
 ___________ ___________________________________
|<i> Screwtape | <A HREF="http://livejournal.com/~thristian">http://livejournal.com/~thristian</A> |______ _____ ___ __ _  _   _    _
</I>|<i>
</I>|<i> &quot;We've got a lot in common&quot; &quot;I've always thought so, too.&quot; -- M*A*S*H
</I>|<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="037838.html">[Twisted-Python] twisted and wxPython 2.4.1.2
</A></li>
	<LI>Next message (by thread): <A HREF="037830.html">[Twisted-Python] Callbacks, Looping, and Variable Binding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37828">[ date ]</a>
              <a href="thread.html#37828">[ thread ]</a>
              <a href="subject.html#37828">[ subject ]</a>
              <a href="author.html#37828">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
