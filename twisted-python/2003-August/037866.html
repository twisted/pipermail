<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Surprises in twisted.web.woven
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Surprises%20in%20twisted.web.woven&In-Reply-To=%3CA00950EC-C660-11D7-B0D7-003065D61A3E%40froup.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="037860.html">
   <LINK REL="Next"  HREF="037867.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Surprises in twisted.web.woven</H1>
    <B>Tim Allen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Surprises%20in%20twisted.web.woven&In-Reply-To=%3CA00950EC-C660-11D7-B0D7-003065D61A3E%40froup.com%3E"
       TITLE="[Twisted-Python] Surprises in twisted.web.woven">screwtape at froup.com
       </A><BR>
    <I>Mon Aug  4 03:47:13 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="037860.html">[Twisted-Python] Surprises in twisted.web.woven
</A></li>
        <LI>Next message (by thread): <A HREF="037867.html">[Twisted-Python] Surprises in twisted.web.woven
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37866">[ date ]</a>
              <a href="thread.html#37866">[ thread ]</a>
              <a href="subject.html#37866">[ subject ]</a>
              <a href="author.html#37866">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Monday, Aug 4, 2003, at 01:37 Australia/Sydney, Alex Levy wrote:

&gt;<i> On Sun, Aug 03, 2003 at 11:05:48PM +1000, Tim Allen wrote:
</I>&gt;&gt;<i> I had a little play with Woven tonight, and I'm pleased to report that
</I>&gt;&gt;<i> I'm (slowly) getting my head around it quite satisfyingly. However, I
</I>&gt;&gt;<i> did come across some things which surprised me - I'm not going to call
</I>&gt;&gt;<i> them bugs, because I don't understand Woven well enough.
</I>&gt;<i>
</I>&gt;<i> Don't you know anything about software development? These are FEATURES 
</I>&gt;<i> :)
</I>
Oh, right, my bad. :)

&gt;<i> You've hit a problem that I encountered as well; the root element in a 
</I>&gt;<i> Woven
</I>&gt;<i> template doesn't behave the same way as its child elements. What you 
</I>&gt;<i> want is
</I>&gt;<i> this:
</I>&gt;<i>
</I>&gt;<i>   class TestContent(view.View):
</I>&gt;<i>     template = &quot;&quot;&quot;
</I>&gt;<i>     &lt;div&gt;&lt;ul model=&quot;sampleList&quot; view=&quot;List&quot;&gt;...&lt;/ul&gt;&lt;/div&gt;
</I>&gt;<i>     &quot;&quot;&quot;
</I>&gt;<i>
</I>&gt;<i> I believe this is one of those &quot;just accept it&quot; situations. 
</I>&gt;<i> Fortunately,
</I>&gt;<i> wrapping your work in &lt;div&gt;&lt;/div&gt;'s isn't that bad; they don't affect 
</I>&gt;<i> layout
</I>&gt;<i> (unless your CSS puts padding on every div, which is nuts), and HTML
</I>&gt;<i> pretty-printing has been added to CVS in time for the next release.
</I>
Donovan Preston writes that he considers it a bug, I have faith he'll 
get around to it eventually, that's good enough for me. (Last time I 
wrote, I asked for HTML pretty-printing, and lo and behold, here it is. 
:<i>)
</I>
&gt;<i> O[Bn to your models question. Views must be given a model to operate 
</I>&gt;<i> on; they
</I>&gt;<i> do not (as far as I know) intrinsically contain models of their own.
</I>
Ahh, that makes sense.

I was being misled by the special case of Page - Page inherits from 
View, but uses itself as the default model. Apparently other things 
that inherit from View have different behaviour.

&lt;snip&gt;

&gt;&gt;<i> Finally, if I have a template that looks like this:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     &lt;p&gt;Have a look at
</I>&gt;&gt;<i>     &lt;a href=&quot;cat1.png&quot;&gt;these&lt;/a&gt;
</I>&gt;&gt;<i>     &lt;a href=&quot;cat2.png&quot;&gt;three&lt;/a&gt;
</I>&gt;&gt;<i>     &lt;a href=&quot;cat3.png&quot;&gt;cats&lt;/a&gt;.&lt;/p&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> then the output HTML looks like:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     &lt;p&gt;Have a look at &lt;a href=&quot;cat1.png&quot;&gt;these&lt;/a&gt;&lt;a
</I>&gt;&gt;<i>     href=&quot;cat2.png&quot;&gt;three&lt;/a&gt;&lt;a href=&quot;cat3.png&quot;&gt;cats&lt;/a&gt;.&lt;/p&gt;
</I>&gt;<i>
</I>&gt;<i> This is another issue that I've wrangled with for some time. Feel free 
</I>&gt;<i> to
</I>&gt;<i> make a lot of noise and hope somebody fixes it; I believe the problem 
</I>&gt;<i> lies
</I>&gt;<i> in the XML parser itself. As Wayne so aptly put it, &quot;We fear change.&quot;
</I>
Hmm. How sad.

I guess I'll have a look at the XML parser, if I have time.

&gt;<i> The two quick fixes I've employed to get around this until a better 
</I>&gt;<i> solution
</I>&gt;<i> presents itself are either &nbsp; entities after every anchor, or 
</I>&gt;<i> using CSS
</I>&gt;<i> to add spacing. [The second option is, in my opinion, much cleaner.]
</I>
Cleaner, yes, but not much. :(

Also, I'm imagining this same problem could crop up among hetereogenous 
collections of tags, in which case CSS isn't quite as useful.

&gt;<i> I'm not entirely happy with this, but it makes my pages look nice 
</I>&gt;<i> until any
</I>&gt;<i> issues with the XML parser get hammered out.
</I>
As an interim step, sure.

&gt;<i> As far as chomping off docstrings, that's something you might want to 
</I>&gt;<i> add to
</I>&gt;<i> the tracker &lt;<A HREF="http://www.twistedmatrix.com/bugs">http://www.twistedmatrix.com/bugs</A>&gt;. I see it happening on 
</I>&gt;<i> my
</I>&gt;<i> site as well, and Woven probably shouldn't be doing that.
</I>
Well, I was going to try fixing this little issue so I spent a while 
tracing code and learning the structure of view.View and so forth, 
until I discovered the following snippet in 
microdom.Document.writexml():

         if self.doctype:
             stream.write(&quot;&lt;!DOCTYPE &quot;+self.doctype+&quot;&gt;&quot; + newl)

And lo and behold, ever since I discovered that, it's been working fine.

Maybe I should subscribe to the CVS commits list as well before I start 
poking around in Twisted again. :)



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="037860.html">[Twisted-Python] Surprises in twisted.web.woven
</A></li>
	<LI>Next message (by thread): <A HREF="037867.html">[Twisted-Python] Surprises in twisted.web.woven
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37866">[ date ]</a>
              <a href="thread.html#37866">[ thread ]</a>
              <a href="subject.html#37866">[ subject ]</a>
              <a href="author.html#37866">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
