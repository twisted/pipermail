<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Deferring the return within PB
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Deferring%20the%20return%20within%20PB&In-Reply-To=Pine.BSO.4.44.0308092011260.32656-100000%40cyclops4.esentire.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005470.html">
   <LINK REL="Next"  HREF="005475.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Deferring the return within PB</H1>
    <B>Abe Fettig</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Deferring%20the%20return%20within%20PB&In-Reply-To=Pine.BSO.4.44.0308092011260.32656-100000%40cyclops4.esentire.com"
       TITLE="[Twisted-Python] Deferring the return within PB">abe at fettig.net
       </A><BR>
    <I>Sat Aug  9 21:17:30 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="005470.html">[Twisted-Python] Deferring the return within PB
</A></li>
        <LI>Next message: <A HREF="005475.html">[Twisted-Python] Uninteruptable infinite loop: Woven rendering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5472">[ date ]</a>
              <a href="thread.html#5472">[ thread ]</a>
              <a href="subject.html#5472">[ subject ]</a>
              <a href="author.html#5472">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, 2003-08-09 at 20:17, Edmund Dengler wrote:

&gt;<i> I would like to perform a database operation on the server end. How do I
</I>&gt;<i> defer the return statement til the operation is done?
</I>&gt;<i> 
</I>&gt;<i> Roughly speaking:
</I>&gt;<i> 
</I>&gt;<i>     def perspective_transferXXX(self, XXX):
</I>&gt;<i>         ...perform the database operation, defer to doneTransferXXX()...
</I>&gt;<i>         ...do NOT return a value for the perspective call...
</I>&gt;<i> 
</I>&gt;<i>     def doneTransferXXX(self, XXX):
</I>&gt;<i>         ...perform any other cleanup...
</I>&gt;<i>         ...NOW return a value for the perspective call...
</I>
Good news - you can add multiple callbacks to a single Deferred, and
they will be called sequentially, with the output of each one passed to
the next.  So, in your example:

	def perspective_transferXXX(self, *args):
		d = deferredFunction()
		d.addCallback(self.doneTransfer)
		return d

	def doneTransfer(self, response):
		return response.split() # or whatever

In this example, the (eventually) returned value of deferredFunction()
gets passed to doneTransfer first, which is free to alter it as
neccessary before actually returning the value to the client.

For a much better explanation, see the &quot;Using Deferreds&quot; HOWTO.

Abe



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005470.html">[Twisted-Python] Deferring the return within PB
</A></li>
	<LI>Next message: <A HREF="005475.html">[Twisted-Python] Uninteruptable infinite loop: Woven rendering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5472">[ date ]</a>
              <a href="thread.html#5472">[ thread ]</a>
              <a href="subject.html#5472">[ subject ]</a>
              <a href="author.html#5472">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
