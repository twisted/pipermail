<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Advice on starting a project
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Advice%20on%20starting%20a%20project&In-Reply-To=3F311C5D.2000405%40cache-22.co.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005418.html">
   <LINK REL="Next"  HREF="005436.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Advice on starting a project</H1>
    <B>Alexander Zhukov</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Advice%20on%20starting%20a%20project&In-Reply-To=3F311C5D.2000405%40cache-22.co.uk"
       TITLE="[Twisted-Python] Advice on starting a project">tard at 2kservices.com
       </A><BR>
    <I>Thu Aug  7 03:00:45 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="005418.html">[Twisted-Python] Advice on starting a project
</A></li>
        <LI>Next message: <A HREF="005436.html">[Twisted-Python] Advice on starting a project
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5434">[ date ]</a>
              <a href="thread.html#5434">[ thread ]</a>
              <a href="subject.html#5434">[ subject ]</a>
              <a href="author.html#5434">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello RLivsey,

Wednesday, August 6, 2003, 7:18:53 PM, you wrote:

R&gt; How would I get a list of clients currently connected so that I can send
R&gt; a message from one client to its recipient?
R&gt; Any advice on what to look at and any examples that would be useful?

I'm new to twisted too and work on a similar project now (twisted
on serverside and flash and C# on clientside).

I'm not sure if it's the right way in twisted, but this example
receivs lines from one connection and writes them to all other
connections.

from twisted.internet.protocol import Factory
from twisted.protocols.basic import LineReceiver
from twisted.internet import reactor

class Chat(LineReceiver):
    def connectionMade(self):
        self.factory.addClient(self)

    def lineReceived(self,line):
        self.factory.sendAll(line)

    def connectionLost(self, reason):
        self.factory.removeClient(self)

class MyFactory(Factory):

    protocol = Chat

    def startFactory(self):
        self.clients = []

    def addClient(self,cli):
        self.clients.append(cli)

    def removeClient(self,cli):
        self.clients.remove(cli)

    def sendAll(self,msg):
        [cli.sendLine(msg) for cli in self.clients]

def main():
    f = MyFactory()
    reactor.listenTCP(8000, f)
    reactor.run()

if __name__ == '__main__':
    main()

-- 
Best regards,
 Alexander                            mailto:<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">tard at 2kservices.com</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005418.html">[Twisted-Python] Advice on starting a project
</A></li>
	<LI>Next message: <A HREF="005436.html">[Twisted-Python] Advice on starting a project
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5434">[ date ]</a>
              <a href="thread.html#5434">[ thread ]</a>
              <a href="subject.html#5434">[ subject ]</a>
              <a href="author.html#5434">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
