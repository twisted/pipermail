<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Surprises in twisted.web.woven
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Surprises%20in%20twisted.web.woven&In-Reply-To=3372A4FF-C5B3-11D7-B0D7-003065D61A3E%40froup.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005348.html">
   <LINK REL="Next"  HREF="005352.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Surprises in twisted.web.woven</H1>
    <B>Alex Levy</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Surprises%20in%20twisted.web.woven&In-Reply-To=3372A4FF-C5B3-11D7-B0D7-003065D61A3E%40froup.com"
       TITLE="[Twisted-Python] Surprises in twisted.web.woven">mesozoic at polynode.com
       </A><BR>
    <I>Sun Aug  3 11:37:27 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="005348.html">[Twisted-Python] Surprises in twisted.web.woven
</A></li>
        <LI>Next message: <A HREF="005352.html">[Twisted-Python] Surprises in twisted.web.woven
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5349">[ date ]</a>
              <a href="thread.html#5349">[ thread ]</a>
              <a href="subject.html#5349">[ subject ]</a>
              <a href="author.html#5349">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Aug 03, 2003 at 11:05:48PM +1000, Tim Allen wrote:
&gt;<i> I had a little play with Woven tonight, and I'm pleased to report that 
</I>&gt;<i> I'm (slowly) getting my head around it quite satisfyingly. However, I 
</I>&gt;<i> did come across some things which surprised me - I'm not going to call 
</I>&gt;<i> them bugs, because I don't understand Woven well enough.
</I>
Don't you know anything about software development? These are FEATURES :)

You've hit a problem that I encountered as well; the root element in a Woven
template doesn't behave the same way as its child elements. What you want is
this:

  class TestContent(view.View):
    template = &quot;&quot;&quot;
    &lt;div&gt;&lt;ul model=&quot;sampleList&quot; view=&quot;List&quot;&gt;...&lt;/ul&gt;&lt;/div&gt;
    &quot;&quot;&quot;

I believe this is one of those &quot;just accept it&quot; situations. Fortunately,
wrapping your work in &lt;div&gt;&lt;/div&gt;'s isn't that bad; they don't affect layout
(unless your CSS puts padding on every div, which is nuts), and HTML
pretty-printing has been added to CVS in time for the next release.

O[Bn to your models question. Views must be given a model to operate on; they
do not (as far as I know) intrinsically contain models of their own. When
your &lt;div view=&quot;content&quot;/&gt; element is given no explicit model in the
template, it is given the entire Page as its model. (That means the 'model'
object being passed to wvfactory_content is actually the Page instance.)
This works because it looks for the sampleList submodel on whatever model
it's been given.

Unless you have a good reason for passing the entire Page model to your
views (and you might), another way to do this is:

  class TestContent(view.View):
    template = &quot;&quot;&quot;
    &lt;div&gt;&lt;ul model=&quot;.&quot; view=&quot;List&quot;&gt;...&lt;/ul&gt;&lt;/div&gt;
    &quot;&quot;&quot;
    
  class TestPage(page.Page):
    template = &quot;&quot;&quot;
    &lt;html&gt;...&lt;div model=&quot;sampleList&quot; view=&quot;content&quot;/&gt;...&lt;/html&gt;
    &quot;&quot;&quot;

&gt;<i> Finally, if I have a template that looks like this:
</I>&gt;<i> 
</I>&gt;<i>     &lt;p&gt;Have a look at
</I>&gt;<i>     &lt;a href=&quot;cat1.png&quot;&gt;these&lt;/a&gt;
</I>&gt;<i>     &lt;a href=&quot;cat2.png&quot;&gt;three&lt;/a&gt;
</I>&gt;<i>     &lt;a href=&quot;cat3.png&quot;&gt;cats&lt;/a&gt;.&lt;/p&gt;
</I>&gt;<i> 
</I>&gt;<i> then the output HTML looks like:
</I>&gt;<i> 
</I>&gt;<i>     &lt;p&gt;Have a look at &lt;a href=&quot;cat1.png&quot;&gt;these&lt;/a&gt;&lt;a
</I>&gt;<i>     href=&quot;cat2.png&quot;&gt;three&lt;/a&gt;&lt;a href=&quot;cat3.png&quot;&gt;cats&lt;/a&gt;.&lt;/p&gt;
</I>
This is another issue that I've wrangled with for some time. Feel free to
make a lot of noise and hope somebody fixes it; I believe the problem lies
in the XML parser itself. As Wayne so aptly put it, &quot;We fear change.&quot;

The two quick fixes I've employed to get around this until a better solution
presents itself are either &amp;nbsp; entities after every anchor, or using CSS
to add spacing. [The second option is, in my opinion, much cleaner.]

  in my template:
  &lt;a class=&quot;navbar&quot; href=&quot;1&quot;&gt;Home&lt;/a&gt;
  &lt;a class=&quot;navbar&quot; href=&quot;2&quot;&gt;Stuff&lt;/a&gt;
  ...
  
  in my CSS:
  a.navbar { padding: 0px 5px 0px 5px; }

I'm not entirely happy with this, but it makes my pages look nice until any
issues with the XML parser get hammered out.

As far as chomping off docstrings, that's something you might want to add to
the tracker &lt;<A HREF="http://www.twistedmatrix.com/bugs">http://www.twistedmatrix.com/bugs</A>&gt;. I see it happening on my
site as well, and Woven probably shouldn't be doing that.

-- 
Alex Levy
WWW: <A HREF="http://mesozoic.geecs.org">http://mesozoic.geecs.org</A>
 
&quot;Never let your sense of morals prevent you from doing what is right.&quot;
 -- Salvor Hardin, Isaac Asimov's _Foundation_


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005348.html">[Twisted-Python] Surprises in twisted.web.woven
</A></li>
	<LI>Next message: <A HREF="005352.html">[Twisted-Python] Surprises in twisted.web.woven
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5349">[ date ]</a>
              <a href="thread.html#5349">[ thread ]</a>
              <a href="subject.html#5349">[ subject ]</a>
              <a href="author.html#5349">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
