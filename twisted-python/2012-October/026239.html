<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] a question about monotonic clock
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20a%20question%20about%20monotonic%20clock&In-Reply-To=508E3F6C.1030301%40imperial.ac.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026238.html">
   <LINK REL="Next"  HREF="026241.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] a question about monotonic clock</H1>
    <B>Tristan Seligmann</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20a%20question%20about%20monotonic%20clock&In-Reply-To=508E3F6C.1030301%40imperial.ac.uk"
       TITLE="[Twisted-Python] a question about monotonic clock">mithrandi at mithrandi.net
       </A><BR>
    <I>Mon Oct 29 05:59:02 EDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="026238.html">[Twisted-Python] a question about monotonic clock
</A></li>
        <LI>Next message: <A HREF="026241.html">[Twisted-Python] a question about monotonic clock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26239">[ date ]</a>
              <a href="thread.html#26239">[ thread ]</a>
              <a href="subject.html#26239">[ subject ]</a>
              <a href="author.html#26239">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Oct 29, 2012 at 10:33 AM, Phil Mayers &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">p.mayers at imperial.ac.uk</A>&gt; wrote:
&gt;<i> On 10/28/2012 10:16 PM, Tristan Seligmann wrote:
</I>&gt;&gt;<i> On Mon, Oct 29, 2012 at 12:05 AM, Phil Mayers &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">p.mayers at imperial.ac.uk</A>&gt; wrote:
</I>&gt;<i> Sadly, this is not the case. As has already been pointed out, virtual
</I>&gt;<i> machine clocks can undergo stepping in &quot;normal&quot; oepration. A specfic
</I>&gt;<i> example: if a VMWare installation performs live migration of a host. We
</I>&gt;<i> often see:
</I>&gt;<i>
</I>&gt;<i> ntpd[1793]: time reset +0.263757 s
</I>&gt;<i>
</I>&gt;<i> ...when this happens. This can occur several times a day, as we're
</I>&gt;<i> running vCenter-controlled auto-migration - a very common setup. This is
</I>&gt;<i> forward stepping of course, so is relatively harmless (backward is a pain).
</I>
My original reply was perhaps a bit... exclusionary. But I think the
point I was trying to make is still valid; if your VM is suspended for
250ms due to a migration (or CPU throttling, or ...) then it is
impossible to maintain a consistent stream of time events because
there isn't any code executing at all. Whether the clock stalls, or is
jumped forward 250ms, you still have an unavoidable problem as far as
time-keeping is concerned.

&gt;&gt;&gt;<i> Who knows what newer implementations like chrony or openntpd do!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If they're doing something silly, then maybe you shouldn't use them.
</I>
I didn't intend it that way, but I can see how what I said could be
read in a hostile / defensive tone. Perhaps this would be a better
phrasing:

If chrony or openntpd are doing something sensible, then there
shouldn't be any serious issues with using them; if they're doing
something that seriously destabilizes the system clock, then you
probably shouldn't be using them, at least not if you want reliable
timekeeping. I'm not familiar enough with either of them to know which
case applies, so I didn't intend to come across as bashing chrony
and/or openntpd.

&gt;<i> Maybe &quot;Twisted doesn't need a monotonic clock&quot; is the right reply, but
</I>&gt;<i> it would be wrong to base that on the assumpton that &quot;ntpd doesn't step&quot;
</I>&gt;<i> - that's all I was trying to say.
</I>
I don't think anyone in this thread is arguing *against* implementing
this functionality; I think the point was just that this functionality
is only of critical importance under a limited range of circumstances,
as opposed to being something of urgent need for every Twisted-using
program that needs to schedule timed events.
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar

</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026238.html">[Twisted-Python] a question about monotonic clock
</A></li>
	<LI>Next message: <A HREF="026241.html">[Twisted-Python] a question about monotonic clock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26239">[ date ]</a>
              <a href="thread.html#26239">[ thread ]</a>
              <a href="subject.html#26239">[ subject ]</a>
              <a href="author.html#26239">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
