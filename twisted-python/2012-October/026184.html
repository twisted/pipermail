<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] git repo maintenance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20git%20repo%20maintenance&In-Reply-To=CAFJQhU5k%3Dy%3DXYcLjYpiuTUBb-_aXEEC%3DgBPUg6jJ4wA1nDNiwg%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026178.html">
   <LINK REL="Next"  HREF="026180.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] git repo maintenance</H1>
    <B>Duncan McGreggor</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20git%20repo%20maintenance&In-Reply-To=CAFJQhU5k%3Dy%3DXYcLjYpiuTUBb-_aXEEC%3DgBPUg6jJ4wA1nDNiwg%40mail.gmail.com"
       TITLE="[Twisted-Python] git repo maintenance">oubiwann at twistedmatrix.com
       </A><BR>
    <I>Mon Oct 22 15:48:56 EDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="026178.html">[Twisted-Python] git repo maintenance
</A></li>
        <LI>Next message: <A HREF="026180.html">[Twisted-Python] git repo maintenance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26184">[ date ]</a>
              <a href="thread.html#26184">[ thread ]</a>
              <a href="subject.html#26184">[ subject ]</a>
              <a href="author.html#26184">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Oct 22, 2012 at 12:04 PM, Duncan McGreggor
&lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">duncan.mcgreggor at gmail.com</A>&gt; wrote:
&gt;<i> On Mon, Oct 22, 2012 at 12:01 PM, Duncan McGreggor
</I>&gt;<i> &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">duncan.mcgreggor at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> On Mon, Oct 22, 2012 at 11:30 AM, David Reid &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">dreid at dreid.org</A>&gt; wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Mon, Oct 22, 2012 at 10:55 AM, Duncan McGreggor
</I>&gt;&gt;&gt;<i> &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">oubiwann at twistedmatrix.com</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> On Sat, Oct 20, 2012 at 4:24 PM, Duncan McGreggor
</I>&gt;&gt;&gt;&gt;<i> &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">oubiwann at twistedmatrix.com</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i> &gt; Hey all,
</I>&gt;&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;&gt;<i> &gt; At the sprint today, Glyph mentioned that the github repo hasn't been
</I>&gt;&gt;&gt;&gt;<i> &gt; updated recently and needs someone to maintain it regularly. He also
</I>&gt;&gt;&gt;&gt;<i> &gt; mentioned that pull requests would be accepted from github, at which
</I>&gt;&gt;&gt;&gt;<i> &gt; point
</I>&gt;&gt;&gt;&gt;<i> &gt; I immediately volunteered to keep the repo up to date :-) (I can't bear
</I>&gt;&gt;&gt;&gt;<i> &gt; using svn anymore...)
</I>&gt;&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;&gt;<i> &gt; I'll be putting things in place (infrastructure, scripts, etc.) to
</I>&gt;&gt;&gt;&gt;<i> &gt; assist me
</I>&gt;&gt;&gt;&gt;<i> &gt; with this, so let me know if you have any concerns, questions, ideas,
</I>&gt;&gt;&gt;&gt;<i> &gt; etc.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> So, I've got a git repo set up for trunk of svn, and for the life of
</I>&gt;&gt;&gt;&gt;<i> me, I can't merge it with the git repo on github.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> As such, my desire is to do a force push. *However* this would break
</I>&gt;&gt;&gt;&gt;<i> github forks that everyone has made so far, based on twisted/twisted
</I>&gt;&gt;&gt;&gt;<i> (the complete list is here:
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://github.com/twisted/twisted/network/members">https://github.com/twisted/twisted/network/members</A>).
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Based on <A HREF="https://github.com/twisted/twisted/network">https://github.com/twisted/twisted/network</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> (That graph indicates that no one has actually done any substantial work
</I>&gt;&gt;&gt;<i> based on the old repository.)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I'm inclined to say do it.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I'm a little concerned about how you ended up with a thing that which wasn't
</I>&gt;&gt;&gt;<i> mergeable?  Could we start by you documenting how you created this repo?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Sure thing. All I did to build a git repo was the usual:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> git svn clone <A HREF="svn://svn.twistedmatrix.com/svn/Twitsed/trunk">svn://svn.twistedmatrix.com/svn/Twitsed/trunk</A> twisted
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> All of my attempts to merge were using the local copy created by the
</I>&gt;&gt;<i> branch above (or by creating a clone of it with just one or two
</I>&gt;&gt;<i> revisions beyond what the github repo has, to minimize the commit #
</I>&gt;&gt;<i> and maximize the chance of a successful merge).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> For instance:
</I>&gt;&gt;<i>  * git clone <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">git at github.com</A>:twisted/twisted.git twisted-github; cd
</I>&gt;&gt;<i> twisted-github; git pull ../twisted master
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> (and other variations upon that theme).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've tried using several different merge strategies; either they
</I>&gt;&gt;<i> couldn't complete the merge, or they resulted in gobs of conflicts.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> d
</I>&gt;<i>
</I>&gt;<i> So I just tried something else:
</I>&gt;<i>
</I>&gt;<i> git pull -s recursive -Xtheirs ../twisted master
</I>&gt;<i>
</I>&gt;<i> since this was run in the github master, the &quot;theirs&quot; is the svn clone
</I>&gt;<i> master, and forcing the adoption of &quot;theirs&quot; resulted in many fewer
</I>&gt;<i> conflicts. Hundreds of fewer conflicts, maybe?
</I>&gt;<i>
</I>&gt;<i> Looking into this to see if anything was broken by this approach...
</I>&gt;<i>
</I>&gt;<i> d
</I>
It seems that the topfiles were mostly affected by this. Some deleted
files git didn't know what do to with. But then I noticed that other
files that had been modified weren't included in the change set.

*sighs*

As a sanity check, I did a local rsync, and sure enough, there are a
bunch of files that didn't get merged using the strategy above that
were changed in the svn repo.

I'll put this part of the effort on hold, and take a look at the repo
mirror that Glyph pointed me to in his most recent email...

d

</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026178.html">[Twisted-Python] git repo maintenance
</A></li>
	<LI>Next message: <A HREF="026180.html">[Twisted-Python] git repo maintenance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26184">[ date ]</a>
              <a href="thread.html#26184">[ thread ]</a>
              <a href="subject.html#26184">[ subject ]</a>
              <a href="author.html#26184">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
