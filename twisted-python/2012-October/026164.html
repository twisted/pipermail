<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Adding mock as a test suite dependency
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Adding%20mock%20as%20a%20test%20suite%20dependency&In-Reply-To=AA732414-3B2B-4085-9C0F-6B389C0FE009%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026162.html">
   <LINK REL="Next"  HREF="026165.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Adding mock as a test suite dependency</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Adding%20mock%20as%20a%20test%20suite%20dependency&In-Reply-To=AA732414-3B2B-4085-9C0F-6B389C0FE009%40twistedmatrix.com"
       TITLE="[Twisted-Python] Adding mock as a test suite dependency">exarkun at twistedmatrix.com
       </A><BR>
    <I>Mon Oct 22 12:46:08 EDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="026162.html">[Twisted-Python] Adding mock as a test suite dependency
</A></li>
        <LI>Next message: <A HREF="026165.html">[Twisted-Python] Adding mock as a test suite dependency
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26164">[ date ]</a>
              <a href="thread.html#26164">[ thread ]</a>
              <a href="subject.html#26164">[ subject ]</a>
              <a href="author.html#26164">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 03:00 am, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A> wrote:
&gt;<i>On Oct 21, 2012, at 7:45 PM, Julian Berman &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">julian at grayvines.com</A>&gt; 
</I>&gt;<i>wrote:
</I>&gt;&gt;<i>The *benefit* though for me in having mock present is that it 
</I>&gt;&gt;<i>decreases the
</I>&gt;&gt;<i>lines of code necessary to write stubs and mocks. While doing so is 
</I>&gt;&gt;<i>not really
</I>&gt;&gt;<i>that difficult anyhow, it *is* just a bit more clutter to do so 
</I>&gt;&gt;<i>without mock,
</I>&gt;&gt;<i>and the extra 3 or 4 lines mean that in more than one instance I have 
</I>&gt;&gt;<i>found
</I>&gt;&gt;<i>myself pick a different strategy than I would have because of the 
</I>&gt;&gt;<i>extra lines
</I>&gt;&gt;<i>of code that clutter the test method.
</I>&gt;<i>
</I>&gt;<i>This seems like a pretty small benefit; adding a new dependency affects 
</I>&gt;<i>lots of people and introduces a new point of failure in the 
</I>&gt;<i>installation process, especially for Windows users who already have a 
</I>&gt;<i>devil of a time getting Twisted installed.
</I>&gt;<i>
</I>&gt;<i>Also I don't particularly like the testing style associated with Mock. 
</I>&gt;<i>I think it might discourage us yet further from writing verified fakes, 
</I>&gt;<i>i.e. supported in-memory implementations of things like IReactorTCP, 
</I>&gt;<i>that have somewhat intricate behavior that's tedious to emulate with 
</I>&gt;<i>Mock.
</I>
I'm also not a huge fan of the *unverified* mock style of testing.  I 
don't think anything says that mocks *have* to be unverified, though it 
seems they're often used that way.

The mock library that got added to the stdlib has the notion of 
constructing a mock using another object as a template.  I haven't used 
this feature, but it seems like the intent is to at least take a step 
towards verification.  It'd be nice if someone who knows more about the 
features of this library could give some examples.

In case anyone isn't clear, the problem with unverified fakes is that 
they either start out incompatible with the objects they're fakes of, or 
else they become incompatible with them over time.  Once they're 
incompatible, the tests that use them become significantly less useful, 
since they demonstrate little or nothing about what will happen when you 
try to use the code for real.

Verified fakes solve this problem by adding assertions that objects and 
their fakes have the necessary overlap in either interface or 
functionality in order for the tests using them to be valid.

Beyond that, considering the particular example presented, I wouldn't 
actually use mocks to test this.  The real object, the debugger, should 
be perfectly usable in unit tests.  It doesn't allocate or depend on 
expensive resources, it doesn't do network I/O, etc.  Mocks are perhaps 
an attractive nuisance that distract from coming up with a better test.

Jean-Paul
&gt;<i>Personally I'm -0.  Don't let that stop you from cooking up a patch 
</I>&gt;<i>that would include it though, I might be in the minority here.
</I>&gt;<i>
</I>&gt;<i>-glyph
</I>
</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026162.html">[Twisted-Python] Adding mock as a test suite dependency
</A></li>
	<LI>Next message: <A HREF="026165.html">[Twisted-Python] Adding mock as a test suite dependency
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26164">[ date ]</a>
              <a href="thread.html#26164">[ thread ]</a>
              <a href="subject.html#26164">[ subject ]</a>
              <a href="author.html#26164">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
