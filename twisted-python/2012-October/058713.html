<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] a question about monotonic clock
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20a%20question%20about%20monotonic%20clock&In-Reply-To=%3CCABkOF6RCWsFyXK-CXeiRDV%3DPsHz6L-2hJJwznz4vjsYLVoGT2g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="058711.html">
   <LINK REL="Next"  HREF="058714.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] a question about monotonic clock</H1>
    <B>gelin yan</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20a%20question%20about%20monotonic%20clock&In-Reply-To=%3CCABkOF6RCWsFyXK-CXeiRDV%3DPsHz6L-2hJJwznz4vjsYLVoGT2g%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] a question about monotonic clock">dynamicgl at gmail.com
       </A><BR>
    <I>Mon Oct 29 09:21:51 MDT 2012</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="058711.html">[Twisted-Python] a question about monotonic clock
</A></li>
        <LI>Next message (by thread): <A HREF="058714.html">[Twisted-Python] a question about monotonic clock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58713">[ date ]</a>
              <a href="thread.html#58713">[ thread ]</a>
              <a href="subject.html#58713">[ subject ]</a>
              <a href="author.html#58713">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Oct 29, 2012 at 5:59 PM, Tristan Seligmann
&lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mithrandi at mithrandi.net</A>&gt;wrote:

&gt;<i> On Mon, Oct 29, 2012 at 10:33 AM, Phil Mayers &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">p.mayers at imperial.ac.uk</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; On 10/28/2012 10:16 PM, Tristan Seligmann wrote:
</I>&gt;<i> &gt;&gt; On Mon, Oct 29, 2012 at 12:05 AM, Phil Mayers &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">p.mayers at imperial.ac.uk</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; Sadly, this is not the case. As has already been pointed out, virtual
</I>&gt;<i> &gt; machine clocks can undergo stepping in &quot;normal&quot; oepration. A specfic
</I>&gt;<i> &gt; example: if a VMWare installation performs live migration of a host. We
</I>&gt;<i> &gt; often see:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ntpd[1793]: time reset +0.263757 s
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ...when this happens. This can occur several times a day, as we're
</I>&gt;<i> &gt; running vCenter-controlled auto-migration - a very common setup. This is
</I>&gt;<i> &gt; forward stepping of course, so is relatively harmless (backward is a
</I>&gt;<i> pain).
</I>&gt;<i>
</I>&gt;<i> My original reply was perhaps a bit... exclusionary. But I think the
</I>&gt;<i> point I was trying to make is still valid; if your VM is suspended for
</I>&gt;<i> 250ms due to a migration (or CPU throttling, or ...) then it is
</I>&gt;<i> impossible to maintain a consistent stream of time events because
</I>&gt;<i> there isn't any code executing at all. Whether the clock stalls, or is
</I>&gt;<i> jumped forward 250ms, you still have an unavoidable problem as far as
</I>&gt;<i> time-keeping is concerned.
</I>&gt;<i>
</I>&gt;<i> &gt;&gt;&gt; Who knows what newer implementations like chrony or openntpd do!
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; If they're doing something silly, then maybe you shouldn't use them.
</I>&gt;<i>
</I>&gt;<i> I didn't intend it that way, but I can see how what I said could be
</I>&gt;<i> read in a hostile / defensive tone. Perhaps this would be a better
</I>&gt;<i> phrasing:
</I>&gt;<i>
</I>&gt;<i> If chrony or openntpd are doing something sensible, then there
</I>&gt;<i> shouldn't be any serious issues with using them; if they're doing
</I>&gt;<i> something that seriously destabilizes the system clock, then you
</I>&gt;<i> probably shouldn't be using them, at least not if you want reliable
</I>&gt;<i> timekeeping. I'm not familiar enough with either of them to know which
</I>&gt;<i> case applies, so I didn't intend to come across as bashing chrony
</I>&gt;<i> and/or openntpd.
</I>&gt;<i>
</I>&gt;<i> &gt; Maybe &quot;Twisted doesn't need a monotonic clock&quot; is the right reply, but
</I>&gt;<i> &gt; it would be wrong to base that on the assumpton that &quot;ntpd doesn't step&quot;
</I>&gt;<i> &gt; - that's all I was trying to say.
</I>&gt;<i>
</I>&gt;<i> I don't think anyone in this thread is arguing *against* implementing
</I>&gt;<i> this functionality; I think the point was just that this functionality
</I>&gt;<i> is only of critical importance under a limited range of circumstances,
</I>&gt;<i> as opposed to being something of urgent need for every Twisted-using
</I>&gt;<i> program that needs to schedule timed events.
</I>&gt;<i> --
</I>&gt;<i> mithrandi, i Ainil en-Balandor, a faer Ambar
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>
Hi

   Actually clock forward can be accepted at least for my case but not
backward which may freeze the whole process and nobody know when it will be
resumed in the future.

Regards

gelin yan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20121029/ba6fbc1c/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="058711.html">[Twisted-Python] a question about monotonic clock
</A></li>
	<LI>Next message (by thread): <A HREF="058714.html">[Twisted-Python] a question about monotonic clock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58713">[ date ]</a>
              <a href="thread.html#58713">[ thread ]</a>
              <a href="subject.html#58713">[ subject ]</a>
              <a href="author.html#58713">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
