<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] &quot;Cleared to Land&quot;?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%22Cleared%20to%20Land%22%3F&In-Reply-To=%3C1531099285.2176090.1433940984.684C32D6%40webmail.messagingengine.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="031966.html">
   <LINK REL="Next"  HREF="031968.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] &quot;Cleared to Land&quot;?</H1>
    <B>Tom Most</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%22Cleared%20to%20Land%22%3F&In-Reply-To=%3C1531099285.2176090.1433940984.684C32D6%40webmail.messagingengine.com%3E"
       TITLE="[Twisted-Python] &quot;Cleared to Land&quot;?">twm at freecog.net
       </A><BR>
    <I>Sun Jul  8 19:21:25 MDT 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="031966.html">[Twisted-Python] &quot;Cleared to Land&quot;?
</A></li>
        <LI>Next message (by thread): <A HREF="031968.html">[Twisted-Python] &quot;Cleared to Land&quot;?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31967">[ date ]</a>
              <a href="thread.html#31967">[ thread ]</a>
              <a href="subject.html#31967">[ subject ]</a>
              <a href="author.html#31967">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Jul 8, 2018, at 12:06 PM, Glyph wrote:
&gt;&gt;<i> On Jul 8, 2018, at 7:44 AM, Adi Roiban &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A>&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On Sat, 7 Jul 2018 at 22:45, Glyph &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> On Jul 7, 2018, at 12:36 PM, Tom Most &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twm at freecog.net</A>&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> [snip]
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Thanks for driving this to completion, Tom!  Much appreciated.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> For future reference though, when landing stuff on trunk, please use
</I>&gt;&gt;&gt;<i> this format exactly:&gt;&gt;&gt; 
</I>&gt;&gt;&gt;<i> <A HREF="https://twistedmatrix.com/trac/wiki/ReviewProcess#Authors:Howtomergethechangetotrunk">https://twistedmatrix.com/trac/wiki/ReviewProcess#Authors:Howtomergethechangetotrunk</A>&gt;&gt;&gt; 
</I>&gt;&gt;&gt;<i> This helps with both automatically closing the associated Trac
</I>&gt;&gt;&gt;<i> ticket (I already did that in this case) and properly attributing
</I>&gt;&gt;&gt;<i> credit for reviewer points on <A HREF="https://twistedmatrix.com/highscores/.">https://twistedmatrix.com/highscores/.</A>&gt;&gt; 
</I>&gt;&gt;<i> I always forget the format and then I have to search previous commits
</I>&gt;&gt;<i> or wiki.&gt;&gt; 
</I>&gt;&gt;<i> We make reference to the Trac ticket in PR title, Branch Name, PR
</I>&gt;&gt;<i> description (As part of checklist).
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Do we really need to make another reference in the merge commit?
</I>&gt;&gt;<i> For me, it's red tape.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I don't think that we should make things more complicated, just to
</I>&gt;&gt;<i> have a functional <A HREF="https://twistedmatrix.com/highscores/">https://twistedmatrix.com/highscores/</A>
</I>&gt;<i> 
</I>&gt;<i> If we forget every so often, it's not a big deal, but I find it's nice
</I>&gt;<i> to have a generally consistent merge format.  I do really wish that
</I>&gt;<i> Github could do this in the same way that it does for a PR template so
</I>&gt;<i> we didn't have to remember manually.
</I>Ah, sorry. It looks like I've done this a few times. I had wondered why
my points weren't changing.
A template would be nice, if only as a reminder, but I think that I will
always struggle with this if I use the GitHub UI to merge --- no other
project to which I contribute has requirements w.r.t. the merge commit
message, so I am fighting habit. I'll look into scripting it.
As an aside, could you update &quot;&lt;comma_separated_names&gt;&quot; in the merge
commit message example to &quot;&lt;comma_separated_github_usernames&gt;&quot;? I always
have to look at the repository history to see if this is supposed to be
full names or Trac/GitHub handles.
&gt;&gt;&gt;<i> Perhaps we should avoid the &quot;cleared to land&quot; label on PRs from non-
</I>&gt;&gt;&gt;<i> committers? I scan through open PRs for ones which require a
</I>&gt;&gt;&gt;<i> procedural nudge now and again, but I had not looked at this one as
</I>&gt;&gt;&gt;<i> the process appeared to be done with it, and I missed that it was
</I>&gt;&gt;&gt;<i> from a non-committer.&gt;&gt;&gt; 
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Ideally it would be used sparingly, but, the availability of such a
</I>&gt;&gt;&gt;<i> process release-valve allows someone to do a review even if they
</I>&gt;&gt;&gt;<i> only have time to read the code, and not the time to sit around
</I>&gt;&gt;&gt;<i> waiting 40 minutes for some intermittent CI nonsense to shake out.&gt;&gt;&gt; 
</I>&gt;&gt;&gt;<i> Since this doesn't have a <A HREF="https://twisted.reviews/">https://twisted.reviews/</A> -like &quot;core
</I>&gt;&gt;&gt;<i> gameplay loop&quot; that project members regularly visit, perhaps if
</I>&gt;&gt;&gt;<i> you're going to use this label you should always shoot a message to
</I>&gt;&gt;&gt;<i> this list as well, to let other contributors know that they should
</I>&gt;&gt;&gt;<i> take a look if they have a minute?&gt;&gt;&gt; 
</I>&gt;&gt;&gt;<i> On that note, it looks like
</I>&gt;&gt;&gt;<i> <A HREF="https://github.com/twisted/twisted/pull/1010">https://github.com/twisted/twisted/pull/1010</A> has suffered the same
</I>&gt;&gt;&gt;<i> fate?  Any other committers have a minute to land that one? :)&gt;&gt; 
</I>&gt;&gt;<i> <A HREF="https://github.com/twisted/twisted/pull/1010">https://github.com/twisted/twisted/pull/1010</A> was merged now.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Do we really need and up to date branch before a merge?
</I>
The GitHub UI currently requires this for non-admins, though it can be
bypassed with a manual merge, much like the requirement for a green
build. As a new committer I haven't felt comfortable doing that bypass,
so I spend a lot of time merging forward and kicking builds to get a
green check mark. Should I be bothering? Particularly for documentation
changes[1]. I'd rather spend that time on work product than process.
&gt;&gt;<i> I was thinking that with the &quot;clear to land&quot; label, we can have a
</I>&gt;&gt;<i> robot which checks for the PR and once all tests are green, the robot&gt;&gt; will automatically merge based on
</I>&gt;&gt;<i> <A HREF="https://developer.github.com/v3/pulls/#merge-a-pull-request-merge-button">https://developer.github.com/v3/pulls/#merge-a-pull-request-merge-button</A>&gt; 
</I>&gt;<i> This sounds like a great idea, and is very close to what I would do if
</I>&gt;<i> I had time for working on automation :).&gt; 
</I>&gt;<i> Rather than using the &quot;clear to land&quot; label, however, I'd probably do
</I>&gt;<i> this on the basis of a passing review from a project member being
</I>&gt;<i> present, and a passing build.  (The &quot;clear to land&quot; convention
</I>&gt;<i> predates Github native code reviews.)
</I>I think we'd still need a label or other explicit indicator that an
automatic merge should occur, or we won't be able to leave a passing
review which suggests trivial fixes. &quot;Please fix this typo, then merge&quot;
reviews are pretty common.
&gt;&gt;<i> The robot can also auto-update with 'trunk/master' a PR with clear
</I>&gt;&gt;<i> to land.&gt;&gt; 
</I>&gt;&gt;<i> I am happy to work at automation and improving the Twisted PR
</I>&gt;&gt;<i> process.&gt; 
</I>&gt;<i> I know you're not a huge fan of Trac either - it would be a nice touch
</I>&gt;<i> if the robot here could also notice Github reviews and delete the
</I>&gt;<i> 'review' keyword; this would keep our highscores and stats stuff
</I>&gt;<i> working, but eliminate a manual step for reviewers :).
</I>Yes, let's also add/remove remove the &quot;review required&quot; label on GitHub
or it ends up[2] out of sync[3]. :)
Have you seen the Bors approach[4]? Roughly, Bors is a bot which merges
a PR to the mainline on a temporary branch, runs the tests, and then fast-
forwards the mainline if they pass. If we took that approach we'd not
have to manually merge forward all the time.
&gt;&gt;<i> For example, I have this PR
</I>&gt;&gt;<i> <A HREF="https://github.com/twisted/twisted/pull/1011">https://github.com/twisted/twisted/pull/1011</A>&gt;&gt; 
</I>&gt;&gt;<i> It only touches  .circleci/config.yml .... why should we block
</I>&gt;&gt;<i> or wait&gt;&gt; for the merge/review of this PR due to random failures on Buildbot?
</I>&gt;<i> 
</I>&gt;<i> It looks like this is another case of
</I>&gt;<i> twisted.python.test.test_sendmsg.CModuleSendmsgTests.test_shortsend
</I>&gt;<i> messing up our build results.
</I>This failure has been wasting a lot of time over the past two months. I
think that we should disable this test on Travis until we have a proper
fix. It still runs on Buildbot, no? Buggy tests are worse than no
tests, as they let one portion of the project prevent forward progress
on all others.
The rhel7-py27-coverage builder seems to be having issues downloading
packages from PyPI, too. Fortunately it fails fast and the queue is
usually short so it's a quick to kick:
<A HREF="https://buildbot.twistedmatrix.com/builders/rhel7-py2.7-coverage">https://buildbot.twistedmatrix.com/builders/rhel7-py2.7-coverage</A>
---Tom

Links:

  1. <A HREF="https://github.com/twisted/twisted/pull/1037">https://github.com/twisted/twisted/pull/1037</A>
  2. <A HREF="https://github.com/twisted/twisted/pull/1021">https://github.com/twisted/twisted/pull/1021</A>
  3. <A HREF="https://github.com/twisted/twisted/pull/1037">https://github.com/twisted/twisted/pull/1037</A>
  4. <A HREF="https://github.com/graydon/bors">https://github.com/graydon/bors</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20180708/d31737de/attachment-0001.html&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="031966.html">[Twisted-Python] &quot;Cleared to Land&quot;?
</A></li>
	<LI>Next message (by thread): <A HREF="031968.html">[Twisted-Python] &quot;Cleared to Land&quot;?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31967">[ date ]</a>
              <a href="thread.html#31967">[ thread ]</a>
              <a href="subject.html#31967">[ subject ]</a>
              <a href="author.html#31967">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
