<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] &quot;Cleared to Land&quot;?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%22Cleared%20to%20Land%22%3F&In-Reply-To=%3CFB7769AB-9FFE-4F5F-B29C-A0E85F7A3F40%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="031968.html">
   <LINK REL="Next"  HREF="031971.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] &quot;Cleared to Land&quot;?</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%22Cleared%20to%20Land%22%3F&In-Reply-To=%3CFB7769AB-9FFE-4F5F-B29C-A0E85F7A3F40%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] &quot;Cleared to Land&quot;?">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon Jul  9 00:45:38 MDT 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="031968.html">[Twisted-Python] &quot;Cleared to Land&quot;?
</A></li>
        <LI>Next message (by thread): <A HREF="031971.html">[Twisted-Python] &quot;Cleared to Land&quot;?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31969">[ date ]</a>
              <a href="thread.html#31969">[ thread ]</a>
              <a href="subject.html#31969">[ subject ]</a>
              <a href="author.html#31969">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

&gt;<i> On Jul 8, 2018, at 6:21 PM, Tom Most &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twm at freecog.net</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> On Sun, Jul 8, 2018, at 12:06 PM, Glyph wrote:
</I>&gt;&gt;&gt;<i> On Jul 8, 2018, at 7:44 AM, Adi Roiban &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A>&gt;&gt; wrote:
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> On Sat, 7 Jul 2018 at 22:45, Glyph &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt;&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i> On Jul 7, 2018, at 12:36 PM, Tom Most &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twm at freecog.net</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twm at freecog.net</A>&gt;&gt; wrote:
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> [snip]
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Thanks for driving this to completion, Tom!  Much appreciated.
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> For future reference though, when landing stuff on trunk, please use this format exactly:
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://twistedmatrix.com/trac/wiki/ReviewProcess#Authors:Howtomergethechangetotrunk">https://twistedmatrix.com/trac/wiki/ReviewProcess#Authors:Howtomergethechangetotrunk</A> &lt;<A HREF="https://twistedmatrix.com/trac/wiki/ReviewProcess#Authors:Howtomergethechangetotrunk">https://twistedmatrix.com/trac/wiki/ReviewProcess#Authors:Howtomergethechangetotrunk</A>&gt;
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> This helps with both automatically closing the associated Trac ticket (I already did that in this case) and properly attributing credit for reviewer points on <A HREF="https://twistedmatrix.com/highscores/">https://twistedmatrix.com/highscores/</A> &lt;<A HREF="https://twistedmatrix.com/highscores/">https://twistedmatrix.com/highscores/</A>&gt;.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> I always forget the format and then I have to search previous commits or wiki.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> We make reference to the Trac ticket in PR title, Branch Name, PR
</I>&gt;&gt;&gt;<i> description (As part of checklist).
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Do we really need to make another reference in the merge commit?
</I>&gt;&gt;&gt;<i> For me, it's red tape.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> I don't think that we should make things more complicated, just to
</I>&gt;&gt;&gt;<i> have a functional <A HREF="https://twistedmatrix.com/highscores/">https://twistedmatrix.com/highscores/</A> &lt;<A HREF="https://twistedmatrix.com/highscores/">https://twistedmatrix.com/highscores/</A>&gt;
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> If we forget every so often, it's not a big deal, but I find it's nice to have a generally consistent merge format.  I do really wish that Github could do this in the same way that it does for a PR template so we didn't have to remember manually.
</I>&gt;<i> 
</I>&gt;<i> Ah, sorry. It looks like I've done this a few times. I had wondered why my points weren't changing.
</I>&gt;<i> 
</I>&gt;<i> A template would be nice, if only as a reminder, but I think that I will always struggle with this if I use the GitHub UI to merge --- no other project to which I contribute has requirements w.r.t. the merge commit message, so I am fighting habit. I'll look into scripting it.
</I>&gt;<i> 
</I>&gt;<i> As an aside, could you update &quot;&lt;comma_separated_names&gt;&quot; in the merge commit message example to &quot;&lt;comma_separated_github_usernames&gt;&quot;? I always have to look at the repository history to see if this is supposed to be full names or Trac/GitHub handles.
</I>
I've just made you a trac admin, so you should be able to have at it :-).

&gt;&gt;&gt;&gt;<i> Perhaps we should avoid the &quot;cleared to land&quot; label on PRs from non-committers? I scan through open PRs for ones which require a procedural nudge now and again, but I had not looked at this one as the process appeared to be done with it, and I missed that it was from a non-committer.
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Ideally it would be used sparingly, but, the availability of such a process release-valve allows someone to do a review even if they only have time to read the code, and not the time to sit around waiting 40 minutes for some intermittent CI nonsense to shake out.
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Since this doesn't have a <A HREF="https://twisted.reviews/">https://twisted.reviews/</A> &lt;<A HREF="https://twisted.reviews/">https://twisted.reviews/</A>&gt; -like &quot;core gameplay loop&quot; that project members regularly visit, perhaps if you're going to use this label you should always shoot a message to this list as well, to let other contributors know that they should take a look if they have a minute?
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> On that note, it looks like <A HREF="https://github.com/twisted/twisted/pull/1010">https://github.com/twisted/twisted/pull/1010</A> &lt;<A HREF="https://github.com/twisted/twisted/pull/1010">https://github.com/twisted/twisted/pull/1010</A>&gt; has suffered the same fate?  Any other committers have a minute to land that one? :)
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> <A HREF="https://github.com/twisted/twisted/pull/1010">https://github.com/twisted/twisted/pull/1010</A> &lt;<A HREF="https://github.com/twisted/twisted/pull/1010">https://github.com/twisted/twisted/pull/1010</A>&gt; was merged now.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Do we really need and up to date branch before a merge?
</I>&gt;<i> 
</I>&gt;<i> The GitHub UI currently requires this for non-admins, though it can be bypassed with a manual merge, much like the requirement for a green build. As a new committer I haven't felt comfortable doing that bypass, so I spend a lot of time merging forward and kicking builds to get a green check mark. Should I be bothering? Particularly for documentation changes &lt;<A HREF="https://github.com/twisted/twisted/pull/1037">https://github.com/twisted/twisted/pull/1037</A>&gt;. I'd rather spend that time on work product than process.
</I>
On the one hand it saddens me that contributors are having their time wasted by this pointless pacifying of CI machines.  On the other hand, to echo your sentiment of &quot;buggy tests are worse than no tests&quot;, I think that there's no point to having CI at all unless we're paying attention to it, so I would wholeheartedly support the deletion or skipping of any tests that are causing real problems.

&gt;&gt;&gt;<i> I was thinking that with the &quot;clear to land&quot; label, we can have a
</I>&gt;&gt;&gt;<i> robot which checks for the PR and once all tests are green, the robot
</I>&gt;&gt;&gt;<i> will automatically merge based on
</I>&gt;&gt;&gt;<i> <A HREF="https://developer.github.com/v3/pulls/#merge-a-pull-request-merge-button">https://developer.github.com/v3/pulls/#merge-a-pull-request-merge-button</A> &lt;<A HREF="https://developer.github.com/v3/pulls/#merge-a-pull-request-merge-button">https://developer.github.com/v3/pulls/#merge-a-pull-request-merge-button</A>&gt;
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> This sounds like a great idea, and is very close to what I would do if I had time for working on automation :).
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Rather than using the &quot;clear to land&quot; label, however, I'd probably do this on the basis of a passing review from a project member being present, and a passing build.  (The &quot;clear to land&quot; convention predates Github native code reviews.)
</I>&gt;<i> 
</I>&gt;<i> I think we'd still need a label or other explicit indicator that an automatic merge should occur, or we won't be able to leave a passing review which suggests trivial fixes. &quot;Please fix this typo, then merge&quot; reviews are pretty common.
</I>
Hmm.  Fair point there.  Label it is.

&gt;&gt;&gt;<i> The robot can also auto-update with 'trunk/master' a PR with clear to land.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> I am happy to work at automation and improving the Twisted PR process.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I know you're not a huge fan of Trac either - it would be a nice touch if the robot here could also notice Github reviews and delete the 'review' keyword; this would keep our highscores and stats stuff working, but eliminate a manual step for reviewers :).
</I>&gt;<i> 
</I>&gt;<i> Yes, let's also add/remove remove the &quot;review required&quot; label on GitHub or it ends up &lt;<A HREF="https://github.com/twisted/twisted/pull/1021">https://github.com/twisted/twisted/pull/1021</A>&gt; out of sync &lt;<A HREF="https://github.com/twisted/twisted/pull/1037">https://github.com/twisted/twisted/pull/1037</A>&gt;. :)
</I>
&quot;review requested&quot; is pretty close to this state; I don't think this one needs a custom label? :)

&gt;<i> Have you seen the Bors approach &lt;<A HREF="https://github.com/graydon/bors">https://github.com/graydon/bors</A>&gt;? Roughly, Bors is a bot which merges a PR to the mainline on a temporary branch, runs the tests, and then fast-forwards the mainline if they pass. If we took that approach we'd not have to manually merge forward all the time.
</I>
This looks super interesting.  I would definitely like to have a commit queue, so that we don't have to sit around manually waiting on CI, but we don't have to reduce our CI coverage platforms (especially for alternate kernels, which it's really Twisted's job to cope with).

&gt;&gt;&gt;<i> For example, I have this PR <A HREF="https://github.com/twisted/twisted/pull/1011">https://github.com/twisted/twisted/pull/1011</A> &lt;<A HREF="https://github.com/twisted/twisted/pull/1011">https://github.com/twisted/twisted/pull/1011</A>&gt;
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> It only touches  .circleci/config.yml .... why should we block or wait
</I>&gt;&gt;&gt;<i> for the merge/review of this PR due to random failures on Buildbot?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> It looks like this is another case of  twisted.python.test.test_sendmsg.CModuleSendmsgTests.test_shortsend messing up our build results.
</I>&gt;<i> 
</I>&gt;<i> This failure has been wasting a lot of time over the past two months. I think that we should disable this test on Travis until we have a proper fix. It still runs on Buildbot, no? Buggy tests are worse than no tests, as they let one portion of the project prevent forward progress on all others.
</I>&gt;<i> 
</I>&gt;<i> The rhel7-py27-coverage builder seems to be having issues downloading packages from PyPI, too. Fortunately it fails fast and the queue is usually short so it's a quick to kick: <A HREF="https://buildbot.twistedmatrix.com/builders/rhel7-py2.7-coverage">https://buildbot.twistedmatrix.com/builders/rhel7-py2.7-coverage</A> &lt;<A HREF="https://buildbot.twistedmatrix.com/builders/rhel7-py2.7-coverage">https://buildbot.twistedmatrix.com/builders/rhel7-py2.7-coverage</A>&gt;
</I>
Please go ahead and disable this test everywhere.  The test itself must be buggy, if it doesn't work in the Travis environment where presumably sendmsg actually works fine.  (Also, this is a 27-only test and if we wait long enough before fixing any underlying issue we can probably just delete it...)

-g
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20180708/21120dfa/attachment-0001.html&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="031968.html">[Twisted-Python] &quot;Cleared to Land&quot;?
</A></li>
	<LI>Next message (by thread): <A HREF="031971.html">[Twisted-Python] &quot;Cleared to Land&quot;?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31969">[ date ]</a>
              <a href="thread.html#31969">[ thread ]</a>
              <a href="subject.html#31969">[ subject ]</a>
              <a href="author.html#31969">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
