<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Interface.adaptWith and Interface.__adapt__
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Interface.adaptWith%20and%20Interface.__adapt__&In-Reply-To=5.1.0.14.0.20030604172903.024cb5c0%40mail.telecommunity.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004390.html">
   <LINK REL="Next"  HREF="004412.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Interface.adaptWith and Interface.__adapt__</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Interface.adaptWith%20and%20Interface.__adapt__&In-Reply-To=5.1.0.14.0.20030604172903.024cb5c0%40mail.telecommunity.com"
       TITLE="[Twisted-Python] Interface.adaptWith and Interface.__adapt__">glyph at twistedmatrix.com
       </A><BR>
    <I>Thu Jun  5 01:59:44 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="004390.html">[Twisted-Python] Interface.adaptWith and Interface.__adapt__
</A></li>
        <LI>Next message: <A HREF="004412.html">[Twisted-Python] Interface.adaptWith and  Interface.__adapt__
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4394">[ date ]</a>
              <a href="thread.html#4394">[ thread ]</a>
              <a href="subject.html#4394">[ subject ]</a>
              <a href="author.html#4394">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wednesday, June 4, 2003, at 06:10 PM, Phillip J. Eby wrote:

&gt;<i> Anyway...  I noticed that the only code in Twisted currently (that I 
</I>&gt;<i> could find) that actually uses the current __adapt__ setup is the test 
</I>&gt;<i> suite.  Is there any way this might be changeable to something more 
</I>&gt;<i> compatible with PEP 246?
</I>
Thanks for bringing this to my attention.  As I was perusing the 
implementation, I realized that the reason we committed this particular 
incompatibility was being invalidated a scant two lines away :-).  I 
could have sworn it didn't used to have a try:except: block, but I've 
checked in a revised version now.

As I understand it, PEP 246 cannot be implemented without raising 
exceptions in __adapt__.  I want to avoid mandatory exceptions at all 
costs within the components system, because in a system such as 
NewReality, where every other method call goes through an interface of 
some kind, the fact that raising exceptions is more than 6x as 
expensive as calling functions becomes a noticeable cost.

&gt;<i> I mean, if I jump through enough hoops building adapters and 
</I>&gt;<i> monkeypatching, I can probably make it so that this will work 
</I>&gt;<i> transparently, and anybody who uses PyProtocols will then be able to 
</I>&gt;<i> mix Twisted, Zope, and PyProtocols interfaces in their applications.  
</I>&gt;<i> But it's pretty messy, and I'm wondering about the copyright status if 
</I>&gt;<i> I have to copy a lot of code from MetaInterface.__call__ in order to 
</I>&gt;<i> monkeypatch a replacement.  (I'd like to release PyProtocols under the 
</I>&gt;<i> PSF license.)
</I>
PyProtocols looks like an interesting project, and I'd like to support 
such an effort at interoperability.  Monkey-patching MetaInterface is 
almost certainly the wrong thing to do.  Perhaps it would be best if we 
did not call our interface-aware adaptation mechanism &quot;__adapt__&quot;, but 
something like &quot;adaptWithDefault&quot;?

I am not sure exactly how you're doing compatibility, but perhaps then 
you could provide a subclass of Interface that provided an 
adaptWithDefault that called __adapt__ with the proper arguments?



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004390.html">[Twisted-Python] Interface.adaptWith and Interface.__adapt__
</A></li>
	<LI>Next message: <A HREF="004412.html">[Twisted-Python] Interface.adaptWith and  Interface.__adapt__
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4394">[ date ]</a>
              <a href="thread.html#4394">[ thread ]</a>
              <a href="subject.html#4394">[ subject ]</a>
              <a href="author.html#4394">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
