<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] New Guard question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20New%20Guard%20question&In-Reply-To=%3C85F23C61-A553-11D7-B52C-000393C9700E%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="037162.html">
   <LINK REL="Next"  HREF="037133.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] New Guard question</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20New%20Guard%20question&In-Reply-To=%3C85F23C61-A553-11D7-B52C-000393C9700E%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] New Guard question">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon Jun 23 02:20:17 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="037162.html">[Twisted-Python] New Guard question
</A></li>
        <LI>Next message (by thread): <A HREF="037133.html">[Twisted-Python] Simplifying database access in Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37164">[ date ]</a>
              <a href="thread.html#37164">[ thread ]</a>
              <a href="subject.html#37164">[ subject ]</a>
              <a href="author.html#37164">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Monday, June 23, 2003, at 12:02 PM, Jonathan Lange wrote:

&gt;<i> So, I guess this means that for a web application with that allows 
</I>&gt;<i> anonymous
</I>&gt;<i> users to do and see many things on many pages, there'll be many Portal 
</I>&gt;<i> and
</I>&gt;<i> Realm instances? Or is this where the mysterious mind comes into play?
</I>
Assuming you mean a single application, there will be one Portal to 
access the site, one Realm to dish out resources, and then each 
resource will return a tree.  But, of course, &quot;application&quot; is a funny 
word; if you are making a site that integrates lots of different 
pre-existing components there may be multiple Realms, arranged in some 
sort of hierarchy with rules for how and when one dispatches to 
another.  (For example, the top-level Realm, attached to the Portal, 
may specify that a certain child URL maps to another Realm's IResource 
children, and that the user is preauthenticated ... this will probably 
need some infrastructure work.)

&gt;<i> Also, your badidea example didn't really help me. Firstly, I don't use 
</I>&gt;<i> weird
</I>&gt;<i> guard sessions, I just use normal sessions.
</I>
&quot;normal&quot; sessions are kinda broken; you should probably update your 
code to use guarded sessions.  In fact, I sure would like to deprecate 
the old session code (for reasons related to browser eccentricities 
that are out of scope for this discussion) but I will probably never be 
able to because it's so widely used at this point.

&gt;<i> Secondly, much of the if/then logic is wrapped in Views that provide 
</I>&gt;<i> patterns to the templates. Example:
</I>&gt;<i>
</I>&gt;<i> &lt;div view=&quot;authProtected&quot;&gt;
</I>&gt;<i>   &lt;span pattern=&quot;anonymous&quot;&gt;&lt;a href=&quot;login&quot;&gt;Login&lt;/a&gt;&lt;/span&gt;
</I>&gt;<i>   &lt;span pattern=&quot;loggedIn&quot;&gt;&lt;a href=&quot;logout&quot;&gt;Logout&lt;/a&gt;
</I>&gt;<i>     (&lt;a view=&quot;personLink&quot;/&gt;)&lt;/span&gt;
</I>&gt;<i> &lt;/div&gt;
</I>&gt;<i>
</I>&gt;<i> It's hard to see how to do this with guard.
</I>
Your Realm will return a View which wraps a Model.  The anonymous model 
is different from the logged-in one, but the top-level Views will 
likely be of the same class.  You might want to write a generic 
'switch' view that looks something like this:

&lt;div view=&quot;switch&quot; attribute=&quot;hasUser&quot;&gt;
   &lt;span case=&quot;1&quot;&gt;&lt;a href=&quot;logout&quot;&gt;Logout&lt;/a&gt;&lt;/span&gt;
   &lt;span case=&quot;0&quot;&gt;&lt;a href=&quot;login&quot;&gt;Login&lt;/a&gt;&lt;/span&gt;
&lt;/div&gt;

If this is not obvious - the idea is that you specify a submodel (or 
perhaps some other interface which the View can talk to) &quot;hasUser&quot;.  
The 'anonymous' model will say &quot;0&quot; and the logged-in-user model will 
say &quot;1&quot;.  This kind of functionality is also useful to specify 
'template adapters' in your template code, to specify different display 
styles in-line in a list for different model classes.

I've done this in ad-hoc ways once or twice; I should probably check in 
a &quot;real&quot; version to woven at some point.

&gt;<i> This email is probably premature, as I'm still fiddling around with 
</I>&gt;<i> some
</I>&gt;<i> trivial examples trying to get stuff to work. (Examples using 
</I>&gt;<i> Page.wchild_*
</I>&gt;<i> and getDynamicChild methods, rather than resource.putChild)
</I>
Nevertheless, I don't have the time to write coherent documentation for 
this stuff right now, so hopefully these emails are generating fodder 
for someone who can :).



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="037162.html">[Twisted-Python] New Guard question
</A></li>
	<LI>Next message (by thread): <A HREF="037133.html">[Twisted-Python] Simplifying database access in Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37164">[ date ]</a>
              <a href="thread.html#37164">[ thread ]</a>
              <a href="subject.html#37164">[ subject ]</a>
              <a href="author.html#37164">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
