<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] HTTP versions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20HTTP%20versions&In-Reply-To=%3CD69B306C-94B1-11D7-B9B9-000393C92466%40dalkescientific.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="036844.html">
   <LINK REL="Next"  HREF="036849.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] HTTP versions</H1>
    <B>Andrew Dalke</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20HTTP%20versions&In-Reply-To=%3CD69B306C-94B1-11D7-B9B9-000393C92466%40dalkescientific.com%3E"
       TITLE="[Twisted-Python] HTTP versions">dalke at dalkescientific.com
       </A><BR>
    <I>Sun Jun  1 22:22:36 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="036844.html">[Twisted-Python] HTTP versions
</A></li>
        <LI>Next message (by thread): <A HREF="036849.html">[Twisted-Python] HTTP versions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36847">[ date ]</a>
              <a href="thread.html#36847">[ thread ]</a>
              <a href="subject.html#36847">[ subject ]</a>
              <a href="author.html#36847">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Itamar:
&gt;<i> All backwards compatability has to be in the Request class interfaces -
</I>&gt;<i> whatever stuff a end user might be using.
</I>
Okay, much easier.  I wasn't sure if the HTTPChannel was meant to
be derivable.

&gt;&gt;<i> What about using just rfc822.Message?  That's in Python 2.2.
</I>&gt;<i>
</I>&gt;<i> Not good enough - MIME stuff should be stored on disk if its large 
</I>&gt;<i> (i.e.
</I>&gt;<i> file uploads). I did it using cgi.FieldStorage, and it was backwards
</I>&gt;<i> compatible too, but it broke twisted.web.distrib, which *sucked* :(
</I>&gt;<i> distrib needs to be fixed so it gets a stream, and then we can mess 
</I>&gt;<i> with
</I>&gt;<i> Request as much as we want.
</I>
The Message is used only for parsing the headers, so file uploads
aren't relevant.  As it is now, the headers are processed, line by line.
Partial lines are stored in-memory as &quot;__header&quot;, when a full line,
including continuations, is read, it's passed to an in-memory dict,
which is eventually passed to the Request.  There's no disk involvement
at all, and this is all that I plan to change.

My replacement would write those header lines into a cStringIO.StringIO
then use Message to get the headers out of that StringIO.

So I don't know what you mean about storing MIME stuff on disk.

Now, if there are a large number of headers, there might be a problem,
but then again, there's a problem with the current implementation.

BTW, is there a way to limit the amount of data which can be passed
in a header?  I don't like the potential DoS attack possible either
through dumping 1GB of header to the server, or by the hash collision
attack mentioned recently on c.l.py.  One solution is to do as Apache
does and limit the header to N bytes total.

&gt;<i> A lot of this is for historical reasons - Twisted only depending on
</I>&gt;<i> 1.5.2, and then 2.1. 2.2 support is really new.
</I>
Oh, I understand that.  Is there a reason to keep the historical
differences?  I think there should be a migration path to make
Twisted use more of existing Python libraries.

&gt;<i> Request methods and attributes that users are likely to use is what
</I>&gt;<i> counts.
</I>
Understood.  I don't think that interface code will change all
that much, except that I would like a 2-ple version ... ahh! I
can just make a &quot;version&quot; and a &quot;version_tuple&quot;, rather like
what Python does.  Those are just attributes, after all.

					Andrew



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="036844.html">[Twisted-Python] HTTP versions
</A></li>
	<LI>Next message (by thread): <A HREF="036849.html">[Twisted-Python] HTTP versions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36847">[ date ]</a>
              <a href="thread.html#36847">[ thread ]</a>
              <a href="subject.html#36847">[ subject ]</a>
              <a href="author.html#36847">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
