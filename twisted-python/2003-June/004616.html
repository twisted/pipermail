<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Custom webserver
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Custom%20webserver&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004621.html">
   <LINK REL="Next"  HREF="004628.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Custom webserver</H1>
    <B>Vijay Rao</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Custom%20webserver&In-Reply-To="
       TITLE="[Twisted-Python] Custom webserver">vijay at accellion.com
       </A><BR>
    <I>Thu Jun 19 01:57:55 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="004621.html">[Twisted-Python] Bad inconsistency with buildProtocol
</A></li>
        <LI>Next message: <A HREF="004628.html">[Twisted-Python] Custom webserver
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4616">[ date ]</a>
              <a href="thread.html#4616">[ thread ]</a>
              <a href="subject.html#4616">[ subject ]</a>
              <a href="author.html#4616">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 06:34 16/06/2003 -0500, you wrote:

&gt;<i>Message: 9
</I>&gt;<i>Date: Mon, 16 Jun 2003 10:03:52 +0300
</I>&gt;<i>From: Tommi Virtanen &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">tv at twistedmatrix.com</A>&gt;
</I>&gt;<i>To: <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>
</I>&gt;<i>Subject: Re: [Twisted-Python] Custom webserver
</I>&gt;<i>Reply-To: <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>
</I>&gt;<i>
</I>&gt;<i>On Mon, Jun 16, 2003 at 09:57:13AM +0530, Vijay Rao wrote:
</I>&gt;<i> &gt; I am trying to use twisted as a webserver that serves files only for
</I>&gt;<i> &gt; requests from the localhost ie the desktop on which it is running by
</I>&gt;<i> &gt; mapping localhost(127.0.0.1) to a domain pattern ( thru the hosts file on
</I>&gt;<i> &gt; windows ) so that a particular type of URL is served from this webserver.
</I>&gt;<i>
</I>&gt;<i>         Easiest way is to make it bind to 127.0.0.1. There's currently
</I>&gt;<i>         no support in mktap web for this, though there really should
</I>&gt;<i>         be.
</I>&gt;<i>
</I>&gt;<i>--
</I>&gt;:<i>(){ :|:&amp;};:
</I>
Thanks , any pointer as to how to achieve this binding.
Also for refusing any external request I tried this hack and it works :

(from protocols/http.py)

     def lineReceived(self, line):
         if self.__first_line:
             # if this connection is not persistent, drop any data which
             # the client (illegally) sent after the last request.
......
.....
......
             if len(parts) != 3:
                 self.transport.write(&quot;HTTP/1.1 400 Bad Request\r\n\r\n&quot;)
                 self.transport.loseConnection()
                 return
             client = self.transport.getPeer()
             host = self.transport.getHost()
             if client[1] != '127.0.0.1' or host[1] != '127.0.0.1' :
                 self.transport.write(&quot;HTTP/1.1 404 Forbidden\r\n\r\n&quot;)
                 self.transport.loseConnection()
                 return
.......
....

Can this cause any other problem ( One thing I can see is that new channels 
are created for each external request refused in this manner )
And the requesting client browser is also not being able to display the 
result sent.

Regards,
Vijay



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004621.html">[Twisted-Python] Bad inconsistency with buildProtocol
</A></li>
	<LI>Next message: <A HREF="004628.html">[Twisted-Python] Custom webserver
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4616">[ date ]</a>
              <a href="thread.html#4616">[ thread ]</a>
              <a href="subject.html#4616">[ subject ]</a>
              <a href="author.html#4616">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
