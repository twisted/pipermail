<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Hacking imap
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Hacking%20imap&In-Reply-To=%3C20030624203038.GB22074%40meson.dyndns.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="037216.html">
   <LINK REL="Next"  HREF="037258.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Hacking imap</H1>
    <B>Jp Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Hacking%20imap&In-Reply-To=%3C20030624203038.GB22074%40meson.dyndns.org%3E"
       TITLE="[Twisted-Python] Hacking imap">exarkun at intarweb.us
       </A><BR>
    <I>Tue Jun 24 14:30:38 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="037216.html">[Twisted-Python] Hacking imap 
</A></li>
        <LI>Next message (by thread): <A HREF="037258.html">[Twisted-Python] Hacking imap 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37236">[ date ]</a>
              <a href="thread.html#37236">[ thread ]</a>
              <a href="subject.html#37236">[ subject ]</a>
              <a href="author.html#37236">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Jun 24, 2003 at 01:28:41PM +0200, Anders Hammarquist wrote:
&gt;<i> In a message of Tue, 24 Jun 2003 01:23:53 EDT, Jp Calderone writes:
</I>&gt;<i> &gt;On Tue, Jun 24, 2003 at 01:38:32AM +0200, Anders Hammarquist wrote:
</I>&gt;<i> &gt;  Could you elaborate on &quot;properly handle&quot;?  I am currently making changes
</I>&gt;<i> &gt;in this area as well, mainly in the direction of avoiding all the in-memory
</I>&gt;<i> &gt;buffering the code currently does.
</I>&gt;<i> 
</I>&gt;<i> Certainly,
</I>&gt;<i> 
</I>&gt;<i> There are lots of places where literals aren't handled (I think that
</I>&gt;<i> the only place where they are handled is in APPEND, at least from what
</I>&gt;<i> my testing show). Anyplace where the syntax allows a string, a literal
</I>&gt;<i> is allowed.
</I>
  Ahh yes, I believe I blocked out that particular memory :(  Thanks for
tackling it :)

&gt;<i> 
</I>&gt;<i> The idea is to have the command dispatcher parse the arguments for each
</I>&gt;<i> command, and then pass the arguments to the command handling function.
</I>&gt;<i> This way, if the argument is a literal or a string, it can be passed as
</I>&gt;<i> a file object (but there is no need - for example, if a mailbox name
</I>&gt;<i> is given as a literal, there is little reason to give it in a file object).
</I>&gt;<i> 
</I>&gt;<i> So instead of naming the handler functions &lt;state&gt;_&lt;COMMAND&gt;, I'll have
</I>&gt;<i> &lt;state&gt;_&lt;COMMAND&gt; be a tuple containing ( &lt;handler_function&gt;,
</I>&gt;<i> &lt;arg_parser&gt;, &lt;arg_parser&gt;, ...) and then call the handler_function
</I>&gt;<i> with the results of the arg_parser functions.
</I>
  This sounds like a great approach.  If I could make a request (and maybe
you were going to do this anway), it would be nice if the arg_parsers could
work incrementally: this is mostly of use when receiving an actual message,
to avoid buffering it all in memory (or even buffering it on disk and
pushing off parsing it until it is completely received).

  Maybe this means &lt;arg_parser&gt; should be a factory that returns a parser,
so that state can be more easily managed when parsing the full
list-expression returned with from a fetch command.

  Sound reasonable?

  Jp

-- 
<A HREF="http://catandgirl.com/view.cgi?44">http://catandgirl.com/view.cgi?44</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
URL: &lt;/pipermail/twisted-python/attachments/20030624/f361a576/attachment.sig&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="037216.html">[Twisted-Python] Hacking imap 
</A></li>
	<LI>Next message (by thread): <A HREF="037258.html">[Twisted-Python] Hacking imap 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37236">[ date ]</a>
              <a href="thread.html#37236">[ thread ]</a>
              <a href="subject.html#37236">[ subject ]</a>
              <a href="author.html#37236">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
