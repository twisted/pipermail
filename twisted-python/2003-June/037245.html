<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Loading pageproducers dynamically
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Loading%20pageproducers%20dynamically&In-Reply-To=%3C20030625021501.GC11072%40frobozz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="037228.html">
   <LINK REL="Next"  HREF="037233.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Loading pageproducers dynamically</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Loading%20pageproducers%20dynamically&In-Reply-To=%3C20030625021501.GC11072%40frobozz%3E"
       TITLE="[Twisted-Python] Loading pageproducers dynamically">andrew-twisted at puzzling.org
       </A><BR>
    <I>Tue Jun 24 20:15:01 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="037228.html">[Twisted-Python] Loading pageproducers dynamically
</A></li>
        <LI>Next message (by thread): <A HREF="037233.html">[Twisted-Python] Woven newby question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37245">[ date ]</a>
              <a href="thread.html#37245">[ thread ]</a>
              <a href="subject.html#37245">[ subject ]</a>
              <a href="author.html#37245">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Jun 24, 2003 at 07:54:34PM +0200, Thomas Weholt wrote:
&gt;<i> I'm porting a project to Twisted where I loaded what was then called
</I>&gt;<i> pageproducer, similar to subclasses of Resource in Twisted. They were in a
</I>&gt;<i> given folder and located, created an instance of at run time and stored in a
</I>&gt;<i> lookup-structure. The files were organized something like this :
</I>&gt;<i> 
</I>&gt;<i> www/index.py
</I>&gt;<i> www/folder1/hello1.py
</I>&gt;<i> www/folder2/subfolder3/hellotoo.py
</I>&gt;<i> [ ... etc ...]
</I>&gt;<i> 
</I>&gt;<i> www/index.py maps to index.html, www/folder1/hello1.py to
</I>&gt;<i> /folder1/hello.html etc. The main point being that the server didn't know
</I>&gt;<i> what classes to import and create before run time. How can I create someting
</I>&gt;<i> similar to this, using Resource's putChild etc and keeping the things
</I>&gt;<i> discussed lately about keeping python modules out of the webtree ??
</I>
I think you might you might want to set 'isLeaf = 1' on your resource.  This
will stop Twisted Web calling getChild on that resource, even if there are
more path elements left.  Instead, your resource's .render method will be
called immediately, so resource is then free to deal with the rest of the
path however it likes (it can get the remainder of path looking at
request.postpath, if it cares).

twisted.web.twcgi.CGIScript does this, and it sounds like what you want is
similar in some respects to CGI.  It might be a useful reference.

&gt;<i> I want my users to be able to add pages with ease, not having to edit import
</I>&gt;<i> statements in the main modules, put simple doing something like this in a
</I>&gt;<i> module named helloworld.py, located in www/test/helloworld.py :
</I>&gt;<i> 
</I>&gt;<i> class helloworld(Resource):
</I>&gt;<i>     def render(self, request):
</I>&gt;<i>         return 'hello world'
</I>&gt;<i> 
</I>&gt;<i> and pointing your browser to /test/helloword.py should then show &quot;Hello
</I>&gt;<i> world&quot;.
</I>
I'm not sure that having these inherit from twisted.web.resource.Resource
really makes sense; the tree of the filesystem doesn't really offer the same
features as a tree of Resources.  That's just a guess though -- I'm actually
not a Twisted Web expert (I just play one on mailing lists ;).

&gt;<i> Most examples discussed lately has imported all needed modules explicitly at
</I>&gt;<i> start up. My setup needs to be more dynamic.
</I>
I hope I've helped.

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="037228.html">[Twisted-Python] Loading pageproducers dynamically
</A></li>
	<LI>Next message (by thread): <A HREF="037233.html">[Twisted-Python] Woven newby question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37245">[ date ]</a>
              <a href="thread.html#37245">[ thread ]</a>
              <a href="subject.html#37245">[ subject ]</a>
              <a href="author.html#37245">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
