<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Woven-generated html needs newlines and whitespace
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Woven-generated%20html%20needs%20newlines%20and%20whitespace&In-Reply-To=%3CC3784E80-977B-11D7-A93E-000A95864FC4%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="036926.html">
   <LINK REL="Next"  HREF="036935.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Woven-generated html needs newlines and whitespace</H1>
    <B>Donovan Preston</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Woven-generated%20html%20needs%20newlines%20and%20whitespace&In-Reply-To=%3CC3784E80-977B-11D7-A93E-000A95864FC4%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Woven-generated html needs newlines and whitespace">dp at twistedmatrix.com
       </A><BR>
    <I>Thu Jun  5 11:33:04 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="036926.html">[Twisted-Python] Woven-generated html needs newlines and whitespace
</A></li>
        <LI>Next message (by thread): <A HREF="036935.html">[Twisted-Python] Woven-generated html needs newlines and whitespace
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36928">[ date ]</a>
              <a href="thread.html#36928">[ thread ]</a>
              <a href="subject.html#36928">[ subject ]</a>
              <a href="author.html#36928">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thursday, June 5, 2003, at 09:46 AM, Patrick K. O'Brien wrote:

&gt;<i> I'm still learning Woven, but I noticed that the html files generated 
</I>&gt;<i> by the
</I>&gt;<i> example programs are mostly devoid of newlines and other whitespace, 
</I>&gt;<i> making
</I>&gt;<i> the html pretty hard to read.  Is there an easy way to enable 
</I>&gt;<i> newlines?  I
</I>&gt;<i> see hints in microdom, but don't understand it well enough yet.
</I>
Indeed -- the ugly state of woven's output is something that irritates 
me quite a bit. My current solution is to copy and paste the output 
into BBEdit, and use the Formatting command, but that's only an option 
if you are on Mac OS X.

&gt;<i> Here is a specific example - the calendar example listed in the docs:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.twistedmatrix.com/documents/howto/viewindepth#auto4">http://www.twistedmatrix.com/documents/howto/viewindepth#auto4</A>
</I>&gt;<i>
</I>&gt;<i> I typed in that example and ran it.  The html it generated could 
</I>&gt;<i> really use
</I>&gt;<i> some well-placed newlines.  Indentation wouldn't hurt either.  How 
</I>&gt;<i> would I
</I>&gt;<i> modify that example to add newlines and indentation to the html?
</I>
There is a reason the output looks like that, specifically buggy 
browsers. Browsers claim to be whitespace agnostic but appear to format 
certain things, such as tables with images in the cells, differently if 
there is any whitespace in the cell. This was the reason I was told 
woven couldn't output pretty-printed xml; I have not been able to 
reproduce this behavior however. Can someone who has experienced this 
problem (mesozoic, glyph?) please email me an example of the 
problematic HTML?

Anyway, here is a quick fix to the problem:

Edit twisted/web/woven/utils.py

Change this line in doSendPage:

     page = str(d.toxml())

to this:

     page = str(d.toprettyxml())

And if it doesn't cause any problems for you WRT the formatting of your 
pages in the browser, then you should be happy.

I think that I am going to add an option to Page which will allow you 
to turn on and off prettyprinting on a per-page basis. Another thing 
for my todo-in-my-sparetime list :(

dp



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="036926.html">[Twisted-Python] Woven-generated html needs newlines and whitespace
</A></li>
	<LI>Next message (by thread): <A HREF="036935.html">[Twisted-Python] Woven-generated html needs newlines and whitespace
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36928">[ date ]</a>
              <a href="thread.html#36928">[ thread ]</a>
              <a href="subject.html#36928">[ subject ]</a>
              <a href="author.html#36928">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
