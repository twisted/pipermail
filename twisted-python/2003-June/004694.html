<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Flow: better synchronous exceptions [patch]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Flow%3A%20better%20synchronous%20exceptions%20%5Bpatch%5D&In-Reply-To=20030624054239.GB55443%40doublegemini.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004691.html">
   <LINK REL="Next"  HREF="004685.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Flow: better synchronous exceptions [patch]</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Flow%3A%20better%20synchronous%20exceptions%20%5Bpatch%5D&In-Reply-To=20030624054239.GB55443%40doublegemini.com"
       TITLE="[Twisted-Python] Flow: better synchronous exceptions [patch]">glyph at twistedmatrix.com
       </A><BR>
    <I>Tue Jun 24 02:30:22 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="004691.html">[Twisted-Python] Flow: better synchronous exceptions [patch]
</A></li>
        <LI>Next message: <A HREF="004685.html">[Twisted-Python] Re: Python 2.3 logging package and Twisted...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4694">[ date ]</a>
              <a href="thread.html#4694">[ thread ]</a>
              <a href="subject.html#4694">[ subject ]</a>
              <a href="author.html#4694">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tuesday, June 24, 2003, at 12:42 AM, Clark C. Evans wrote:

&gt;<i>   7.  Most importantly (for me), due to the redundancy of flow/flow.py
</I>&gt;<i>       I'd like to ask glyph if a limited form of __init__.py import
</I>&gt;<i>       could be used in the case of a module/module.py mechansim so
</I>&gt;<i>       that the public objects in module.py could be imported into the
</I>&gt;<i>       module itself.    ie, in flow/__init__.py having:
</I>
This is a general problem that needs to be solved within Twisted.  
Packages should be able to specify public interfaces which you can 
import directly, such as

	from twisted.internet import Application
	from twisted.web import Resource
	from twisted.cred import IRealm

These interfaces are generally much smaller than the total of the 
classes in all the modules, and specifying things this way would make 
documentation simpler and allow us to change implementations and 
provide backwards compatibility in a much nicer way.

The problem is that the Python import system does not give us the right 
kind of hooks to provide this without importing things in advance or 
giving a performance hit to objects imported this way (making them 
getattr wrappers), as far as I can tell; while you can patch 
__import__, you can't catch the *first* import mid-way, so if someone 
starts a program with

	from twisted.internet import Application

you could not patch __import__ in twisted/__init__.py because it is not 
called recursively.

I am not opposed to evil in order to make this work, but I am very 
opposed to _fragile_ evil; something as basic as the import system 
should not be prone to surprising behavior and subtle misconfiguration.

So, I am opposed to flow implementing its own ad-hoc name promotion 
until we can come up with a standardizeable way to promote names to the 
package level, but I would very much like to figure out how to promote 
names in a generic way.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004691.html">[Twisted-Python] Flow: better synchronous exceptions [patch]
</A></li>
	<LI>Next message: <A HREF="004685.html">[Twisted-Python] Re: Python 2.3 logging package and Twisted...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4694">[ date ]</a>
              <a href="thread.html#4694">[ thread ]</a>
              <a href="subject.html#4694">[ subject ]</a>
              <a href="author.html#4694">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
