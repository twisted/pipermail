From wthie at thiengineering.ch  Thu Apr  1 03:12:31 2010
From: wthie at thiengineering.ch (Werner Thie)
Date: Thu, 01 Apr 2010 09:12:31 +0200
Subject: [Twisted-Python] Noob alert - Looking for a framework
 for	creating a long polling service
In-Reply-To: <B995CBB9-AED4-49F7-8589-88DBDAE391AD@gmail.com>
References: <o2g39f0ac351003310952s6b6e01e4x117dae4cf62be7b6@mail.gmail.com>	<v2x95bb10691003311326id1255c01ucba54d3c9ef38c51@mail.gmail.com>
	<B995CBB9-AED4-49F7-8589-88DBDAE391AD@gmail.com>
Message-ID: <4BB4475F.1080401@thiengineering.ch>

Hi,

I'm a long term user of twisted with nevow on top mainly using the 
athena part with LivePage and LiveElement for RPC between Python and 
JScript. nevow/athena opens up a whole new world of transparently 
calling from server to browser and vice versa on a permanent connection. 
With a slight change (three lines) a nevow/athena 'permanent connection' 
also survives network outages of up to a minute like the ones 
experienced in mobile 3G networks.

Recently I've combined twisted/nevow with qooxdoo http://www.qooxdoo.org 
allowing injection/removal of widgets including code into a livepage 
thus providing not only a 'real app' but a real desktop user experience 
in a browser.

If you want to have a look at some demos please feel free to hit

http://nqx.thieprojects.ch          minimal nevow/qooxdoo samples
http://telinfo.thieprojects.ch      Swiss telephone book lookup
http://differenzler.thieprojects.ch Minmal Jass cardgame

To see code (use Firebug, JScript is not obfuscated) done starting from 
2006 till recently.

Part of the above mentioned technology was used in a larger card game 
setup for the Swiss National TV providing a multi player game site with 
various games of Jass. Currently around 25k games are played by about 
70k users a day.

http://www.samschtigjass.ch

The 'Einzelspieler-Version' can be played without logging in.

I've also written experimental stuff bridging XMPP and browser with 
nevow/athena, using XMPP/pubsub for real time data exchange, though for 
this I have no public available samples.

This is definitely a plug but after four years of working in the field 
of RIAs it seems to me that nevow/athena is the most advanced of all 
implementations revolving around 'long polling', permanent connections, 
websockets and related technologies. It solves a host of problems which 
you have to tackle when using other technologies.

HTH, Werner


On 31.03.2010 22:58, ssteinerX at gmail.com wrote:
>
> On Mar 31, 2010, at 4:26 PM, Reza Lotun wrote:
>
>> Hi,
>>
>>> I am looking for a framework for doing a long polling service where :
>>>
>>> clients would connect to a soecific 'channel' and wait for a response
>>>
>>> Where a client admin would push a response only to clients connected to the
>>> same channel
>>
>> There is a project built on top of Twisted that does exactly this,
>> called Orbited (http://orbited.org/). It works, and I use it for
>> internal real-time stats web pages. The one caveat I have with it is
>> that it recently appears to be somewhat inactive - though I use it so
>> much I might fork it and continue development ;-)
>
> It seems to have completely stalled just before the big 0.8 refactoring effort.
>
> Have you continued, or do you plan to continue development where it was left off?
>
> They all seem to have gone off to play with node.js instead.
>
>> If you're looking for a scalable, long-polling queue broadcaster *in
>> general*, I highly suggest nginx_http_push - an addon module for the
>> popular C-based asynchronous web server nginx
>> (http://pushmodule.slact.net/).
>
> Very cool, I hadn't seen that before.
>
> S
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From jml at mumak.net  Thu Apr  1 09:11:05 2010
From: jml at mumak.net (Jonathan Lange)
Date: Thu, 1 Apr 2010 14:11:05 +0100
Subject: [Twisted-Python] ~twisted-dev on Launchpad will now receive mail
	about bugs filed on Ubuntu's Twisted
Message-ID: <r2od06a5cd31004010611ke8beadc5qf6ac7bacb729445f@mail.gmail.com>

Hello all,

I've subscribed the Launchpad team https://launchpad.net/~twisted-dev
to receive mail about bugs on the "twisted" source package in Ubuntu.

It will add a small amount of email traffic to anyone who's a member
of that team. However, it will let us know about bugs that Ubuntu
users experience that are due to Twisted.

I'll gladly unsubscribe the team if folk complain loudly enough.

Thanks,
jml


From jasonjwwilliams at gmail.com  Thu Apr  1 21:20:57 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Thu, 1 Apr 2010 19:20:57 -0600
Subject: [Twisted-Python] Inline Callbacks
Message-ID: <k2r3b949f091004011820x8c9468e4x525a33968c1af1cd@mail.gmail.com>

Would it be fair to say that when developing code that utilizes
inlineCallbacks, your function is a generator that returns a deferred
whose callback is the coroutine that's yielding?

-J


From elihusmails at gmail.com  Thu Apr  1 22:38:03 2010
From: elihusmails at gmail.com (Mark)
Date: Thu, 1 Apr 2010 22:38:03 -0400
Subject: [Twisted-Python] session management
In-Reply-To: <20100331213952.2792.778856419.divmod.xquotient.1975@localhost.localdomain>
References: <9f066ee91003301347k16cdd27bo7e8592a6ace38b5@mail.gmail.com>
	<31448.63.107.91.99.1269988929.squirrel@webmail.zoteca.com>
	<9f066ee91003302110r3ed646ffla2821f14991deb55@mail.gmail.com>
	<20100331213952.2792.778856419.divmod.xquotient.1975@localhost.localdomain>
Message-ID: <n2j9f066ee91004011938rf3ccddbbgab16c15fa256bda8@mail.gmail.com>

Thanks for the help, but how do I access the session?  What would be
the method call to put the data into a session for instance?




On Wed, Mar 31, 2010 at 5:39 PM,  <exarkun at twistedmatrix.com> wrote:
> On 04:10 am, elihusmails at gmail.com wrote:
>>On Tue, Mar 30, 2010 at 6:42 PM, Itamar Turner-Trauring
>><itamar at itamarst.org> wrote:
>>>>Greetings,
>>>>
>>>>I am new to this list and twisted. ?I have worked with some systems
>>>>similar to twisted, notably Apache MINA. ?I am trying to find out how
>>>>to set up my server to support sessions for multiple clients. ?Right
>>>>now I am simply developing a telnet-like application to learn twisted
>>>>but cannot figure out how to manage sessions for the remote clients.
>>>
>>>Each Protocol instance stays alive for the lifetime of the connection
>>>it
>>>is matched to (via the transport). So just store attributes on the
>>>Protocol instance.
>>
>>I figured as much that twisted supported the notion of sessions. ?Are
>>there any examples that show me how to access them and
>>add/remove/update attributes in the session?
>
> Protocol instances are normal Python objects. ?You can use normal Python
> attributes on them in the normal way. ?For example:
>
> ? ?from twisted.internet.protocol import Protocol
>
> ? ?class Counter(Protocol):
> ? ? ? ?"""
> ? ? ? ?Keep track of how many times data is delivered over a connection.
> ? ? ? ?"""
> ? ? ? ?def connectionMade(self):
> ? ? ? ? ? ?self.count = 0
>
> ? ? ? ?def dataReceived(self, bytes):
> ? ? ? ? ? ?self.count += 1
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From exarkun at twistedmatrix.com  Thu Apr  1 23:09:10 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 02 Apr 2010 03:09:10 -0000
Subject: [Twisted-Python] session management
In-Reply-To: <n2j9f066ee91004011938rf3ccddbbgab16c15fa256bda8@mail.gmail.com>
References: <9f066ee91003301347k16cdd27bo7e8592a6ace38b5@mail.gmail.com>
	<31448.63.107.91.99.1269988929.squirrel@webmail.zoteca.com>
	<9f066ee91003302110r3ed646ffla2821f14991deb55@mail.gmail.com>
	<20100331213952.2792.778856419.divmod.xquotient.1975@localhost.localdomain>
	<n2j9f066ee91004011938rf3ccddbbgab16c15fa256bda8@mail.gmail.com>
Message-ID: <20100402030910.2779.593073343.divmod.xquotient.10@localhost.localdomain>

On 02:38 am, elihusmails at gmail.com wrote:
>On Wed, Mar 31, 2010 at 5:39 PM,  <exarkun at twistedmatrix.com> wrote:
>>On 04:10 am, elihusmails at gmail.com wrote:
>>>On Tue, Mar 30, 2010 at 6:42 PM, Itamar Turner-Trauring
>>><itamar at itamarst.org> wrote:
>>>>>Greetings,
>>>>>
>>>>>I am new to this list and twisted. ?I have worked with some systems
>>>>>similar to twisted, notably Apache MINA. ?I am trying to find out 
>>>>>how
>>>>>to set up my server to support sessions for multiple clients. 
>>>>>Right
>>>>>now I am simply developing a telnet-like application to learn 
>>>>>twisted
>>>>>but cannot figure out how to manage sessions for the remote 
>>>>>clients.
>>>>
>>>>Each Protocol instance stays alive for the lifetime of the 
>>>>connection
>>>>it
>>>>is matched to (via the transport). So just store attributes on the
>>>>Protocol instance.
>>>
>>>I figured as much that twisted supported the notion of sessions. ?Are
>>>there any examples that show me how to access them and
>>>add/remove/update attributes in the session?
>>
>>Protocol instances are normal Python objects. ?You can use normal 
>>Python
>>attributes on them in the normal way. ?For example:
>>
>>? ?from twisted.internet.protocol import Protocol
>>
>>? ?class Counter(Protocol):
>>? ? ? ?"""
>>? ? ? ?Keep track of how many times data is delivered over a 
>>connection.
>>? ? ? ?"""
>>? ? ? ?def connectionMade(self):
>>? ? ? ? ? ?self.count = 0
>>
>>? ? ? ?def dataReceived(self, bytes):
>>? ? ? ? ? ?self.count += 1
>
>Thanks for the help, but how do I access the session?  What would be
>the method call to put the data into a session for instance?

The protocol instance *is* the session (or, as I would normally say "the 
protocol instance has a one to one relationship with a connection", but 
I think that's what you mean when you say "the session").  You can 
define whichever methods and attributes you want.

It's a regular Python object.  All the regular stuff you know about 
Python objects applies.

Jean-Paul


From radix at twistedmatrix.com  Fri Apr  2 00:33:51 2010
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 1 Apr 2010 23:33:51 -0500
Subject: [Twisted-Python] Inline Callbacks
In-Reply-To: <k2r3b949f091004011820x8c9468e4x525a33968c1af1cd@mail.gmail.com>
References: <k2r3b949f091004011820x8c9468e4x525a33968c1af1cd@mail.gmail.com>
Message-ID: <r2h60ed19d41004012133qf7b58611m7bf9da7d88ca5738@mail.gmail.com>

On Thu, Apr 1, 2010 at 8:20 PM, Jason J. W. Williams
<jasonjwwilliams at gmail.com> wrote:
> Would it be fair to say that when developing code that utilizes
> inlineCallbacks, your function is a generator that returns a deferred
> whose callback is the coroutine that's yielding?

It pays to be very very specific about all the different objects and
interactions going on with generators in Python and especially with
inlineCallbacks to avoid confusion.There are a couple of inaccuracies
in this statement, some which I think are just about poor wording and
some which come from misunderstanding.

In Python, there are generator functions and there are generators.
Calling a generator function returns a generator, which has next() and
send() methods. Generators do not return things, though a generator's
next() or send() methods do (I say this because you mentioned a
"generator that returns a deferred").

Also, there's nothing called a "coroutine" that's related to
inlineCallbacks at all, and the word is fraught with ambiguities in
Python, so it's best to just avoid it entirely.

In inlineCallbacks, nobody but the person writing the
inlineCallbacks-using function knows that there's a generator
involved. The person calling your inlineCallbacks-using function can't
see any generators; they just get a Deferred object which fires when
the generator is exhausted. The interesting part is that
inlineCallbacks is the thing responsible for iterating the generator,
not user-code. It is responsible for calling .send() on the generator
object when previously yielded deferreds have fired. The value of the
Deferred returned will be whatever is passed to returnValue in the
inlineCallbacks-using function.

-- 
Christopher Armstrong
http://radix.twistedmatrix.com/
http://planet-if.com/


From jasonjwwilliams at gmail.com  Fri Apr  2 02:46:57 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Fri, 2 Apr 2010 00:46:57 -0600
Subject: [Twisted-Python] Inline Callbacks
In-Reply-To: <r2h60ed19d41004012133qf7b58611m7bf9da7d88ca5738@mail.gmail.com>
References: <k2r3b949f091004011820x8c9468e4x525a33968c1af1cd@mail.gmail.com>
	<r2h60ed19d41004012133qf7b58611m7bf9da7d88ca5738@mail.gmail.com>
Message-ID: <n2p3b949f091004012346occ284d29t5c7aa54e8d6a331b@mail.gmail.com>

Hi Christopher,

Apologize for the sloppy language. So would this be a better way of putting it?

Assuming a function func_a that has the inlineCallbacks decorator...

If func_a were added as a callback for a deferred (deferred 1), when
func_a was called another deferred would be returned (deferred 2)
which would only fire once func_a had run to the end of the function
and returned.

While func_a is running, every time yield is called, this would
operate similarly to writing a separate callback for the contents of
each of those yield statements and chaining them normally to each
other as callbacks.

That is this:

@defer.inlineCallbacks
def func_a(value):
   num = yield do_something(value)
   num2 = yield do_something_more(num)
   return num2

is equivalent to:

def func_a(value):
    return do_something(value).addCallback(cb_step_1)

def cb_step_1(num):
    return do_something_more(num).addCallback(cb_step_2)

def cb_step_2(num2):
    return num2


Thank you very much for your help in understanding this.  I've always
used a combination of deferreds and callbacks/errbacks to this point.

-J


On Thu, Apr 1, 2010 at 10:33 PM, Christopher Armstrong
<radix at twistedmatrix.com> wrote:
> On Thu, Apr 1, 2010 at 8:20 PM, Jason J. W. Williams
> <jasonjwwilliams at gmail.com> wrote:
>> Would it be fair to say that when developing code that utilizes
>> inlineCallbacks, your function is a generator that returns a deferred
>> whose callback is the coroutine that's yielding?
>
> It pays to be very very specific about all the different objects and
> interactions going on with generators in Python and especially with
> inlineCallbacks to avoid confusion.There are a couple of inaccuracies
> in this statement, some which I think are just about poor wording and
> some which come from misunderstanding.
>
> In Python, there are generator functions and there are generators.
> Calling a generator function returns a generator, which has next() and
> send() methods. Generators do not return things, though a generator's
> next() or send() methods do (I say this because you mentioned a
> "generator that returns a deferred").
>
> Also, there's nothing called a "coroutine" that's related to
> inlineCallbacks at all, and the word is fraught with ambiguities in
> Python, so it's best to just avoid it entirely.
>
> In inlineCallbacks, nobody but the person writing the
> inlineCallbacks-using function knows that there's a generator
> involved. The person calling your inlineCallbacks-using function can't
> see any generators; they just get a Deferred object which fires when
> the generator is exhausted. The interesting part is that
> inlineCallbacks is the thing responsible for iterating the generator,
> not user-code. It is responsible for calling .send() on the generator
> object when previously yielded deferreds have fired. The value of the
> Deferred returned will be whatever is passed to returnValue in the
> inlineCallbacks-using function.
>
> --
> Christopher Armstrong
> http://radix.twistedmatrix.com/
> http://planet-if.com/
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From elihusmails at gmail.com  Fri Apr  2 09:17:31 2010
From: elihusmails at gmail.com (Mark)
Date: Fri, 2 Apr 2010 09:17:31 -0400
Subject: [Twisted-Python] session management
In-Reply-To: <20100402030910.2779.593073343.divmod.xquotient.10@localhost.localdomain>
References: <9f066ee91003301347k16cdd27bo7e8592a6ace38b5@mail.gmail.com>
	<31448.63.107.91.99.1269988929.squirrel@webmail.zoteca.com>
	<9f066ee91003302110r3ed646ffla2821f14991deb55@mail.gmail.com>
	<20100331213952.2792.778856419.divmod.xquotient.1975@localhost.localdomain>
	<n2j9f066ee91004011938rf3ccddbbgab16c15fa256bda8@mail.gmail.com>
	<20100402030910.2779.593073343.divmod.xquotient.10@localhost.localdomain>
Message-ID: <g2h9f066ee91004020617naf3db853i2eb07f456e7cd18@mail.gmail.com>

Thanks.   My confusion is just in the naming of things...



On Thu, Apr 1, 2010 at 11:09 PM,  <exarkun at twistedmatrix.com> wrote:
> On 02:38 am, elihusmails at gmail.com wrote:
>>
>> On Wed, Mar 31, 2010 at 5:39 PM, ?<exarkun at twistedmatrix.com> wrote:
>>>
>>> On 04:10 am, elihusmails at gmail.com wrote:
>>>>
>>>> On Tue, Mar 30, 2010 at 6:42 PM, Itamar Turner-Trauring
>>>> <itamar at itamarst.org> wrote:
>>>>>>
>>>>>> Greetings,
>>>>>>
>>>>>> I am new to this list and twisted. ?I have worked with some systems
>>>>>> similar to twisted, notably Apache MINA. ?I am trying to find out how
>>>>>> to set up my server to support sessions for multiple clients. Right
>>>>>> now I am simply developing a telnet-like application to learn twisted
>>>>>> but cannot figure out how to manage sessions for the remote clients.
>>>>>
>>>>> Each Protocol instance stays alive for the lifetime of the connection
>>>>> it
>>>>> is matched to (via the transport). So just store attributes on the
>>>>> Protocol instance.
>>>>
>>>> I figured as much that twisted supported the notion of sessions. ?Are
>>>> there any examples that show me how to access them and
>>>> add/remove/update attributes in the session?
>>>
>>> Protocol instances are normal Python objects. ?You can use normal Python
>>> attributes on them in the normal way. ?For example:
>>>
>>> ? ?from twisted.internet.protocol import Protocol
>>>
>>> ? ?class Counter(Protocol):
>>> ? ? ? ?"""
>>> ? ? ? ?Keep track of how many times data is delivered over a connection.
>>> ? ? ? ?"""
>>> ? ? ? ?def connectionMade(self):
>>> ? ? ? ? ? ?self.count = 0
>>>
>>> ? ? ? ?def dataReceived(self, bytes):
>>> ? ? ? ? ? ?self.count += 1
>>
>> Thanks for the help, but how do I access the session? ?What would be
>> the method call to put the data into a session for instance?
>
> The protocol instance *is* the session (or, as I would normally say "the
> protocol instance has a one to one relationship with a connection", but I
> think that's what you mean when you say "the session"). ?You can define
> whichever methods and attributes you want.
>
> It's a regular Python object. ?All the regular stuff you know about Python
> objects applies.
>
> Jean-Paul
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


From rlotun at gmail.com  Sat Apr  3 09:03:18 2010
From: rlotun at gmail.com (Reza Lotun)
Date: Sat, 3 Apr 2010 14:03:18 +0100
Subject: [Twisted-Python] Noob alert - Looking for a framework for
	creating a long polling service
In-Reply-To: <B995CBB9-AED4-49F7-8589-88DBDAE391AD@gmail.com>
References: <o2g39f0ac351003310952s6b6e01e4x117dae4cf62be7b6@mail.gmail.com>
	<v2x95bb10691003311326id1255c01ucba54d3c9ef38c51@mail.gmail.com>
	<B995CBB9-AED4-49F7-8589-88DBDAE391AD@gmail.com>
Message-ID: <s2r95bb10691004030603v1ac6900csef26757512aa4397@mail.gmail.com>

Hi Steve,

> Have you continued, or do you plan to continue development where it was left off?

Well, it's something I've only be toying with. I can handle all the
specific Twisted fixes I'd like to make:
  - handling lost connections gracefully
  - proper use of twistd and daemonization
  - massive code cleanups

The only problem is that I'm not that knowledgeable about the
Javascript browser hacks they've employed - their Orbited.js is more
than half "magic" to me (probably due to me not having an opportunity
to work on a large js project). It's something that I'd like to get
into, if someone is willing to take the lead on the javascript side.
It could potentially be as simple as slotting in js.io
(http://github.com/mcarter/js.io), which Orbited.js has apparently
become, and which appears to have been the plan for Orbited 0.8.

> They all seem to have gone off to play with node.js instead.

I don't *really* blame them, considering most of the project's merit
lay in the Javascript realm, and node.js is basically a (less
featurful) version of Twisted for Javascript (of course with the added
bonus of using a heavily JITed and optimized Javascript VM).

> Very cool, I hadn't seen that before.

Yes, very neat. Haven't done much with it, but I think it's a real
winner when you're doing something simple like long-polling/
broadcasting from a queue.

Cheers,
Reza

-- 
Reza Lotun
mobile: +44 (0)7521 310 763
email:  rlotun at gmail.com
work:   reza at tweetdeck.com
twitter: @rlotun


From clemesha at gmail.com  Sat Apr  3 14:37:59 2010
From: clemesha at gmail.com (Alex Clemesha)
Date: Sat, 3 Apr 2010 11:37:59 -0700
Subject: [Twisted-Python] Noob alert - Looking for a framework for
	creating a long polling service
In-Reply-To: <s2r95bb10691004030603v1ac6900csef26757512aa4397@mail.gmail.com>
References: <o2g39f0ac351003310952s6b6e01e4x117dae4cf62be7b6@mail.gmail.com>
	<v2x95bb10691003311326id1255c01ucba54d3c9ef38c51@mail.gmail.com>
	<B995CBB9-AED4-49F7-8589-88DBDAE391AD@gmail.com>
	<s2r95bb10691004030603v1ac6900csef26757512aa4397@mail.gmail.com>
Message-ID: <g2vd272f0691004031137y2bb6135kfc62fa4490fa7dcc@mail.gmail.com>

On Sat, Apr 3, 2010 at 6:03 AM, Reza Lotun <rlotun at gmail.com> wrote:
> Hi Steve,
>
>> Have you continued, or do you plan to continue development where it was left off?
>
> Well, it's something I've only be toying with. I can handle all the
> specific Twisted fixes I'd like to make:
> ?- handling lost connections gracefully
> ?- proper use of twistd and daemonization
> ?- massive code cleanups

I would very much support you continuing development on Orbited.
In fact, I believe I can help, or already have patches for most of the
above issues you mention.  A lot of this is result of my "Hotdot" project,
"Create realtime webapps using Django + Orbited + Twisted":
http://github.com/clemesha/hotdot

Specifically, see here for Orbited and twistd working together:
http://github.com/clemesha/hotdot/blob/master/server.py

and see the below for patches that improve handling lost connections gracefully:
http://gist.github.com/256582

Finally, it would be awesome if you put up your improvements on Github
(just a suggestion :-),
then I can easily fork and starting adding improvements, and you can
pull and we can move this forward.

-Alex


p.s. I haven't found many issues with the frontend JavaScript code, but if you
have specific issues that you could point out, I'd love to try to help.




>
> The only problem is that I'm not that knowledgeable about the
> Javascript browser hacks they've employed - their Orbited.js is more
> than half "magic" to me (probably due to me not having an opportunity
> to work on a large js project). It's something that I'd like to get
> into, if someone is willing to take the lead on the javascript side.
> It could potentially be as simple as slotting in js.io
> (http://github.com/mcarter/js.io), which Orbited.js has apparently
> become, and which appears to have been the plan for Orbited 0.8.
>
>> They all seem to have gone off to play with node.js instead.
>
> I don't *really* blame them, considering most of the project's merit
> lay in the Javascript realm, and node.js is basically a (less
> featurful) version of Twisted for Javascript (of course with the added
> bonus of using a heavily JITed and optimized Javascript VM).
>
>> Very cool, I hadn't seen that before.
>
> Yes, very neat. Haven't done much with it, but I think it's a real
> winner when you're doing something simple like long-polling/
> broadcasting from a queue.
>
> Cheers,
> Reza
>
> --
> Reza Lotun
> mobile: +44 (0)7521 310 763
> email: ?rlotun at gmail.com
> work: ? reza at tweetdeck.com
> twitter: @rlotun
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
Alex Clemesha
clemesha.org


From ssteinerx at gmail.com  Sat Apr  3 15:10:17 2010
From: ssteinerx at gmail.com (ssteinerX@gmail.com)
Date: Sat, 3 Apr 2010 15:10:17 -0400
Subject: [Twisted-Python] Noob alert - Looking for a framework for
	creating a long polling service
In-Reply-To: <g2vd272f0691004031137y2bb6135kfc62fa4490fa7dcc@mail.gmail.com>
References: <o2g39f0ac351003310952s6b6e01e4x117dae4cf62be7b6@mail.gmail.com>
	<v2x95bb10691003311326id1255c01ucba54d3c9ef38c51@mail.gmail.com>
	<B995CBB9-AED4-49F7-8589-88DBDAE391AD@gmail.com>
	<s2r95bb10691004030603v1ac6900csef26757512aa4397@mail.gmail.com>
	<g2vd272f0691004031137y2bb6135kfc62fa4490fa7dcc@mail.gmail.com>
Message-ID: <F8A2DB4D-591C-416E-A4AF-4CCE15AA030B@gmail.com>


On Apr 3, 2010, at 2:37 PM, Alex Clemesha wrote:

> On Sat, Apr 3, 2010 at 6:03 AM, Reza Lotun <rlotun at gmail.com> wrote:
>> Hi Steve,
>> 
>>> Have you continued, or do you plan to continue development where it was left off?
>> 
>> Well, it's something I've only be toying with. I can handle all the
>> specific Twisted fixes I'd like to make:
>>  - handling lost connections gracefully
>>  - proper use of twistd and daemonization
>>  - massive code cleanups
> 
> I would very much support you continuing development on Orbited.
> In fact, I believe I can help, or already have patches for most of the
> above issues you mention.  A lot of this is result of my "Hotdot" project,
> "Create realtime webapps using Django + Orbited + Twisted":
> http://github.com/clemesha/hotdot
> 
> Specifically, see here for Orbited and twistd working together:
> http://github.com/clemesha/hotdot/blob/master/server.py
> 
> and see the below for patches that improve handling lost connections gracefully:
> http://gist.github.com/256582
> 
> Finally, it would be awesome if you put up your improvements on Github
> (just a suggestion :-),
> then I can easily fork and starting adding improvements, and you can
> pull and we can move this forward.

I had worked with your hotdot stuff a while ago, and I think I had even sent you some django csrf patches for Django 1.2 compatibility (it was a while ago...)

Back then, I had started on refactoring the one-big-javascript file in Orbited a few months ago but, at the time, was assured that 0.8 was "just around the corner", so I left it alone.

Well...now I have need and, since Athena seems to be tightly tied to Nevow, cometd is itself, websocket is websocket, so I'm looking again.   Since Orbited seems to have gone into "unmaintained mode", I agree, it may just be time for a fork.

> p.s. I haven't found many issues with the frontend JavaScript code, but if you
> have specific issues that you could point out, I'd love to try to help.

Mostly the problems I had with it were the lack of doc, and the all-in-one 2700 line .js file, and the complete lack of unit tests of any type.

>> The only problem is that I'm not that knowledgeable about the
>> Javascript browser hacks they've employed - their Orbited.js is more
>> than half "magic" to me (probably due to me not having an opportunity
>> to work on a large js project). It's something that I'd like to get
>> into, if someone is willing to take the lead on the javascript side.
>> It could potentially be as simple as slotting in js.io
>> (http://github.com/mcarter/js.io), which Orbited.js has apparently
>> become, and which appears to have been the plan for Orbited 0.8.

The js.io site documentation link says "Sorry, we don't have documentation yet", and the doc directory on github has a powerpoint file and an echo server so I'm not sure that's going to help so much.


>>> They all seem to have gone off to play with node.js instead.
>> 
>> I don't *really* blame them, considering most of the project's merit
>> lay in the Javascript realm, and node.js is basically a (less
>> featurful) version of Twisted for Javascript (of course with the added
>> bonus of using a heavily JITed and optimized Javascript VM).
>> 
>>> Very cool, I hadn't seen that before.
>> 
>> Yes, very neat. Haven't done much with it, but I think it's a real
>> winner when you're doing something simple like long-polling/
>> broadcasting from a queue.

Well, if there's interest on reviving Orbited either as itself, or as a new project with some code from Orbited as well as some of Alex's stuff, I'm in.  

S



From ssteinerx at gmail.com  Sat Apr  3 20:24:20 2010
From: ssteinerx at gmail.com (ssteinerX@gmail.com)
Date: Sat, 3 Apr 2010 20:24:20 -0400
Subject: [Twisted-Python] Noob alert - Looking for a framework for
	creating a long polling service, Forking Orbited
In-Reply-To: <F8A2DB4D-591C-416E-A4AF-4CCE15AA030B@gmail.com>
References: <o2g39f0ac351003310952s6b6e01e4x117dae4cf62be7b6@mail.gmail.com>
	<v2x95bb10691003311326id1255c01ucba54d3c9ef38c51@mail.gmail.com>
	<B995CBB9-AED4-49F7-8589-88DBDAE391AD@gmail.com>
	<s2r95bb10691004030603v1ac6900csef26757512aa4397@mail.gmail.com>
	<g2vd272f0691004031137y2bb6135kfc62fa4490fa7dcc@mail.gmail.com>
	<F8A2DB4D-591C-416E-A4AF-4CCE15AA030B@gmail.com>
Message-ID: <89F8206A-2DE4-405E-9B44-1F398C170D97@gmail.com>


On Apr 3, 2010, at 3:10 PM, ssteinerX at gmail.com wrote:

> 
> On Apr 3, 2010, at 2:37 PM, Alex Clemesha wrote:
> 
>> On Sat, Apr 3, 2010 at 6:03 AM, Reza Lotun <rlotun at gmail.com> wrote:
>>> Hi Steve,
>>> 
>>>> Have you continued, or do you plan to continue development where it was left off?
>>> 
>>> Well, it's something I've only be toying with. I can handle all the
>>> specific Twisted fixes I'd like to make:
>>> - handling lost connections gracefully
>>> - proper use of twistd and daemonization
>>> - massive code cleanups
>> 
>> I would very much support you continuing development on Orbited.
>> In fact, I believe I can help, or already have patches for most of the
>> above issues you mention.  A lot of this is result of my "Hotdot" project,
>> "Create realtime webapps using Django + Orbited + Twisted":
>> http://github.com/clemesha/hotdot

I've cloned orbited to BitBucket to take up a fork of the project.  

	http://bitbucket.org/ssteinerx/orbited-new/overview/

I really need this for a project and since the old Orbited seems to be abandoned, I'm taking it on.

Contributions gladly accepted.  

If you're interested in working on it, I'll be happy to give you write access.

I've sent an e-mail to CarterMichael at gmail.com to see whether he'll give an official blessing to this fork once we've moved it forward a bit.

Thanks,

S



From donal.mcmullan at gmail.com  Sat Apr  3 23:21:27 2010
From: donal.mcmullan at gmail.com (Donal McMullan)
Date: Sun, 4 Apr 2010 15:21:27 +1200
Subject: [Twisted-Python] FUSE
Message-ID: <h2u634095dc1004032021rdc403864v74c236f7487203c1@mail.gmail.com>

I'm interested in doing some FUSE stuff with Twisted, mostly to
prototype some ideas for profiling. Can anyone expand on Glyph's
comment [1]:

8< - - - - - - - - - - - - - - - - - - - - - - - - - - - -
The Python FUSE bindings obscure the issue because, unlike the C
libfuse, they assume that your filesystem I/O is blocking, which
severely limits the performance of python-based filesystems. ?(You
cannot receive more requests for I/O in your filesystem until the
previous one has been completed with the pyfuse bindings, but you can in
C.)
8< - - - - - - - - - - - - - - - - - - - - - - - - - - - -

I guess I'd like to know before I sink too much time into this, if
there's an approach to Fuse/Twisted that would not have this
limitation. This is a bit confused by the fact that there are three
Fuse/Python bindings that I'm aware of: FusePython, FusePy, and S3QL
[2].

http://sourceforge.net/apps/mediawiki/fuse/index.php?title=FusePython
http://code.google.com/p/fusepy/
http://code.google.com/p/s3ql/

If you've already been down this road, it'd be good to hear from you.

Thanks

Donal


[1] Glyph's original mail:
http://twistedmatrix.com/pipermail/twisted-python/2007-July/015784.html

[2] S3QL has its own Python/Fuse bindings, according to this post:
http://bugs.python.org/msg98077
..on this issue:
http://bugs.python.org/issue7736


From exarkun at twistedmatrix.com  Sun Apr  4 00:05:19 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 04 Apr 2010 04:05:19 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1270353919.63.2145716543@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100404/49edf380/attachment-0001.htm 

From exarkun at twistedmatrix.com  Sun Apr  4 08:46:39 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 04 Apr 2010 12:46:39 -0000
Subject: [Twisted-Python] FUSE
In-Reply-To: <h2u634095dc1004032021rdc403864v74c236f7487203c1@mail.gmail.com>
References: <h2u634095dc1004032021rdc403864v74c236f7487203c1@mail.gmail.com>
Message-ID: <20100404124639.2779.1078349121.divmod.xquotient.53@localhost.localdomain>

On 03:21 am, donal.mcmullan at gmail.com wrote:
>I'm interested in doing some FUSE stuff with Twisted, mostly to
>prototype some ideas for profiling. Can anyone expand on Glyph's
>comment [1]:
>
>8< - - - - - - - - - - - - - - - - - - - - - - - - - - - -
>The Python FUSE bindings obscure the issue because, unlike the C
>libfuse, they assume that your filesystem I/O is blocking, which
>severely limits the performance of python-based filesystems. ?(You
>cannot receive more requests for I/O in your filesystem until the
>previous one has been completed with the pyfuse bindings, but you can 
>in
>C.)
>8< - - - - - - - - - - - - - - - - - - - - - - - - - - - -
>
>I guess I'd like to know before I sink too much time into this, if
>there's an approach to Fuse/Twisted that would not have this
>limitation. This is a bit confused by the fact that there are three
>Fuse/Python bindings that I'm aware of: FusePython, FusePy, and S3QL
>[2].
>
>http://sourceforge.net/apps/mediawiki/fuse/index.php?title=FusePython
>http://code.google.com/p/fusepy/
>http://code.google.com/p/s3ql/
>
>If you've already been down this road, it'd be good to hear from you.

So, sitting at the bottom of libfuse is a file descriptor.  The kernel 
asks your process to service some filesystem operation by putting bytes 
into it that your process can read.  Your process services the requests 
by putting bytes into it that the kernel can read.

Each request/response pair is tagged, so there's no requirement that 
requests be responded to in the same order they're received.

A good Twisted-based solution would use the reactor to read and write 
that file descriptor (alongside anything else going on in the process) 
and support Deferreds (or at least asynchronous responses) to allow out- 
of-order responses and concurrent request handling.

I played around with fuse a little bit to implement something like sshfs 
a while ago.  I did _not_ use the approach described above, because it 
was easier to use something from Armin Rigo's sandbox in a thread, 
dispatching request handling into Twisted, to achieve the necessary 
concurrency and so forth.  You can find that code here:

http://twistedmatrix.com/trac/browser/sandbox/exarkun/sshfs.py?rev=26941

It's just something I was messing around with.  I'm sure you'll find 
lots of problems with it (I know of at least one).  It might help with 
part of the general idea, though.  To get rid of the use of threads 
(which is a good idea for a real tool), you just need to port Armin's 
parsing code into a Twisted Protocol class and hook it up to a 
FileDescriptor of some sort that reads and writes the fuse fd.

Jean-Paul


From pahan at xzrq.net  Sun Apr  4 09:38:18 2010
From: pahan at xzrq.net (Pavel Pergamenshchik)
Date: Sun, 4 Apr 2010 14:38:18 +0100
Subject: [Twisted-Python] FUSE
In-Reply-To: <h2u634095dc1004032021rdc403864v74c236f7487203c1@mail.gmail.com>
References: <h2u634095dc1004032021rdc403864v74c236f7487203c1@mail.gmail.com>
Message-ID: <p2h7447a0ac1004040638x73697015r3f31b9876fd97c71@mail.gmail.com>

On Sun, Apr 4, 2010 at 4:21 AM, Donal McMullan <donal.mcmullan at gmail.com> wrote:
> I'm interested in doing some FUSE stuff with Twisted, mostly to
> prototype some ideas for profiling. Can anyone expand on Glyph's
> comment [1]:

I wrote some code for this a while ago. I don't remember anything
about it, but it might be a reasonable place to start. I put it up at
http://xzrq.net/ignite.tar.gz

It requires sendmsg extension from
svn://svn.twistedmatrix.com/svn/Twisted/sandbox/pahan/sendmsg


From aleuser at inwind.it  Sun Apr  4 20:41:32 2010
From: aleuser at inwind.it (aleuser at inwind.it)
Date: Mon, 5 Apr 2010 02:41:32 +0200 (CEST)
Subject: [Twisted-Python] smtp-server: issue with checkers.FilePasswordDB
	and hash
Message-ID: <9839287.287071270428092489.JavaMail.defaultUser@defaultHost>

Hi all,
   I use FilePasswordDB with a small smtp-server (a very small toy), but when 
I use the hash function the authentication doesn't work.

Here few lines of code:
"""
def _hash(name, clearpsw, hashedpsw):
    # a very simple hash function ?
    return md5.md5(clearpsw).hexdigest()
    # return 'aa'

# doesn't work; password file content is correctly "hashed"
smtpusers = checkers.FilePasswordDB('smtppasswords.txt', caseSensitive=True, 
hash=_hash, cache=True)

# work! in the file the passwords are in plain text
#smtpusers = checkers.FilePasswordDB('smtppasswords.txt', caseSensitive=True, 
cache=True)

mailservice = mail.MailService()
mailservice.setQueue(relaymanager.Queue(QUEUE_PATH))
mailservice.smtpPortal.registerChecker(smtpusers)
smtpserver = mailservice.getESMTPFactory()
application = service.Application("Console SMTP Server")
internet.TCPServer(SMTP_PORT, smtpserver).setServiceParent(application)
"""

The error is:
Failure: twisted.cred.error.UnhandledCredentials: No checker for twisted.cred.
credentials.IUsernameHashedPassword

Obviously FilePasswordDB doesn't provide that credential when there is the 
hash function; why smtp connection is hashed and not in plaintext? How can I 
get it works?

I found a similar question, with no answer:
http://twistedmatrix.com/pipermail/twisted-python/2006-November/014395.html


Thanks
Alessandro




From ltaylor.volks at gmail.com  Mon Apr  5 00:01:01 2010
From: ltaylor.volks at gmail.com (Lucas Taylor)
Date: Sun, 04 Apr 2010 21:01:01 -0700
Subject: [Twisted-Python] smtp-server: issue with
 checkers.FilePasswordDB and hash
In-Reply-To: <9839287.287071270428092489.JavaMail.defaultUser@defaultHost>
References: <9839287.287071270428092489.JavaMail.defaultUser@defaultHost>
Message-ID: <4BB9607D.6000400@gmail.com>

On 4/4/10 5:41 PM, aleuser at inwind.it wrote:
> Hi all,
>    I use FilePasswordDB with a small smtp-server (a very small toy), but when 
> I use the hash function the authentication doesn't work.
> 
> Here few lines of code:
> """
> def _hash(name, clearpsw, hashedpsw):
>     # a very simple hash function ?
>     return md5.md5(clearpsw).hexdigest()
>     # return 'aa'
> 
> # doesn't work; password file content is correctly "hashed"
> smtpusers = checkers.FilePasswordDB('smtppasswords.txt', caseSensitive=True, 
> hash=_hash, cache=True)
> 
> # work! in the file the passwords are in plain text
> #smtpusers = checkers.FilePasswordDB('smtppasswords.txt', caseSensitive=True, 
> cache=True)
> 
> mailservice = mail.MailService()
> mailservice.setQueue(relaymanager.Queue(QUEUE_PATH))
> mailservice.smtpPortal.registerChecker(smtpusers)
> smtpserver = mailservice.getESMTPFactory()
> application = service.Application("Console SMTP Server")
> internet.TCPServer(SMTP_PORT, smtpserver).setServiceParent(application)
> """
> 
> The error is:
> Failure: twisted.cred.error.UnhandledCredentials: No checker for twisted.cred.
> credentials.IUsernameHashedPassword
> 
> Obviously FilePasswordDB doesn't provide that credential when there is the 
> hash function; why smtp connection is hashed and not in plaintext? How can I 
> get it works?
> 
> I found a similar question, with no answer:
> http://twistedmatrix.com/pipermail/twisted-python/2006-November/014395.html
> 
> 
> Thanks
> Alessandro
> 

Can't say for sure without a full example, but it looks like you are
providing an instance of credentials.UsernameHashedPassword to
portal.login when you should be providing a credentials.UsernamePassword
instance.

If you provide a hash function to FilePasswordDB, it only accepts
IUsernamePassword credentials. The hash function is for plaintext
passwords that need to be validated against a hashed password file.

If your passwords are already hashed before they are sent to the server
for authentication, then there is no need for a hash function.
FilePasswordDB will accept either IUsernamePassword or
IUsernameHashedPassword credentials.

The source comments make it a bit clearer:
http://twistedmatrix.com/trac/browser/tags/releases/twisted-9.0.0/twisted/cred/checkers.py#L99



From donal.mcmullan at gmail.com  Mon Apr  5 03:54:49 2010
From: donal.mcmullan at gmail.com (Donal McMullan)
Date: Mon, 5 Apr 2010 19:54:49 +1200
Subject: [Twisted-Python] FUSE
In-Reply-To: <p2h7447a0ac1004040638x73697015r3f31b9876fd97c71@mail.gmail.com>
References: <h2u634095dc1004032021rdc403864v74c236f7487203c1@mail.gmail.com>
	<p2h7447a0ac1004040638x73697015r3f31b9876fd97c71@mail.gmail.com>
Message-ID: <q2l634095dc1004050054zf9a7e64fy5232c2fe6e854a67@mail.gmail.com>

Thanks for your answers - great to have some options!

Donal




On 5 April 2010 01:38, Pavel Pergamenshchik <pahan at xzrq.net> wrote:
> On Sun, Apr 4, 2010 at 4:21 AM, Donal McMullan <donal.mcmullan at gmail.com> wrote:
>> I'm interested in doing some FUSE stuff with Twisted, mostly to
>> prototype some ideas for profiling. Can anyone expand on Glyph's
>> comment [1]:
>
> I wrote some code for this a while ago. I don't remember anything
> about it, but it might be a reasonable place to start. I put it up at
> http://xzrq.net/ignite.tar.gz
>
> It requires sendmsg extension from
> svn://svn.twistedmatrix.com/svn/Twisted/sandbox/pahan/sendmsg
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From chris at cusack.net.au  Mon Apr  5 07:39:18 2010
From: chris at cusack.net.au (Chris Cusack)
Date: Mon, 5 Apr 2010 21:39:18 +1000
Subject: [Twisted-Python] data update to multiple clients
Message-ID: <C75176A3-261F-4FE4-8D1E-F2C32AB30D7D@cusack.net.au>

Probably another newbie question but after much effort I am not  
progressing on the following.

I am trying to design a system where I have a microprocessor  
periodically feeding data on a serial connection to a server script. I  
would then like the server script to notify one or more client scripts  
of the changed data across a local network. I have tried a few simple  
tcp server and client script examples which communicate well for a  
single call but do not seem to suit my application which is not client  
event driven. I considered having each client connect to the server  
every ?? seconds to query for new data but there may be a better way.

Can anyone suggest a suitable design approach using twisted? Is there  
any example code available that may be similar.

Chris


From p.mayers at imperial.ac.uk  Mon Apr  5 08:01:17 2010
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Mon, 05 Apr 2010 13:01:17 +0100
Subject: [Twisted-Python] data update to multiple clients
In-Reply-To: <C75176A3-261F-4FE4-8D1E-F2C32AB30D7D@cusack.net.au>
References: <C75176A3-261F-4FE4-8D1E-F2C32AB30D7D@cusack.net.au>
Message-ID: <4BB9D10D.5090909@imperial.ac.uk>

On 04/05/2010 12:39 PM, Chris Cusack wrote:
> Probably another newbie question but after much effort I am not
> progressing on the following.
>
> I am trying to design a system where I have a microprocessor
> periodically feeding data on a serial connection to a server script. I
> would then like the server script to notify one or more client scripts
> of the changed data across a local network. I have tried a few simple
> tcp server and client script examples which communicate well for a
> single call but do not seem to suit my application which is not client
> event driven. I considered having each client connect to the server
> every ?? seconds to query for new data but there may be a better way.

Perhaps I'm misunderstanding, but it's pretty simple. Just have the 
clients connect & stay connected. Keep a list of currently connected 
clients somewhere (see below) and every time you receive data on the 
serial port, write it out to all the clients. For example:

# ack, global variable!
client_list = []

class MyProtocol(Protocol):
   def connectionMade(self):
     client_list.append(self)

   def connectionLost(self, reason):
     if self in client_list:
       client_list.remove(self)

   def notifyClient(self, data):
     # you will probably want some framing here e.g. Netstring, len+data
     self.transport.write(data)

class ServerProto(Protocol):
   def dataReceived(self, data):
     for cli in client_list:
       cli.notifyClient(data)

...or am I misunderstanding you?


From aleuser at inwind.it  Mon Apr  5 09:22:19 2010
From: aleuser at inwind.it (aleuser at inwind.it)
Date: Mon, 5 Apr 2010 15:22:19 +0200 (CEST)
Subject: [Twisted-Python] R: Re: smtp-server: issue with
 checkers.FilePasswordDB and hash
Message-ID: <2762000.301081270473739324.JavaMail.defaultUser@defaultHost>

First of all, thanks for your answer :-)

>Can't say for sure without a full example, but it looks like you are

Here the full source code:

from twisted.mail import mail, relaymanager
from twisted.cred import checkers
from twisted.python import log
from twisted.application import internet
from twisted.application import service
import os, md5

SMTP_PORT = 25
QUEUE_PATH = './users_home/insertionQueue'

if not os.path.exists(QUEUE_PATH):
    os.makedirs(QUEUE_PATH)

def _hash(name, clearpsw, hashedpsw):
    return 'aa'
    return md5.md5(clearpsw).hexdigest()

# doesnt' work# smtpusers = checkers.FilePasswordDB('smtppasswords.txt', 
caseSensitive=True, hash=_hash, cache=True)
smtpusers = checkers.FilePasswordDB('smtppasswords.txt', caseSensitive=True, 
cache=True)

mailservice = mail.MailService()
mailservice.setQueue(relaymanager.Queue(QUEUE_PATH))
mailservice.smtpPortal.registerChecker(smtpusers)
smtpserver = mailservice.getESMTPFactory()
application = service.Application("Console SMTP Server")
internet.TCPServer(SMTP_PORT, smtpserver).setServiceParent(application)



>If you provide a hash function to FilePasswordDB, it only accepts
>IUsernamePassword credentials. The hash function is for plaintext

I read the source code, I'm agree with this point


>If your passwords are already hashed before they are sent to the server
>for authentication, then there is no need for a hash function.
>FilePasswordDB will accept either IUsernamePassword or
>IUsernameHashedPassword credentials.

I want to hash the password on the server; can't I? How I can decide to use a 
simple IUsernamePassword?

however If I don't use the hash function the connection still continue to use 
an IUsernameHashedPassword.
Probably the smtp connection is not made for a plain-text password, isn't it?

Alessandro


From glyph at twistedmatrix.com  Mon Apr  5 12:48:26 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Mon, 5 Apr 2010 12:48:26 -0400
Subject: [Twisted-Python] data update to multiple clients
In-Reply-To: <C75176A3-261F-4FE4-8D1E-F2C32AB30D7D@cusack.net.au>
References: <C75176A3-261F-4FE4-8D1E-F2C32AB30D7D@cusack.net.au>
Message-ID: <67B52862-37D5-4884-9424-92EC3892F9CC@twistedmatrix.com>


On Apr 5, 2010, at 7:39 AM, Chris Cusack wrote:

> Can anyone suggest a suitable design approach using twisted? Is there  
> any example code available that may be similar.

This sounds like it may be a FAQ:

<http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#HowdoImakeinputononeconnectionresultinoutputonanother>

Does that answer your question?


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100405/34b779a9/attachment.htm 

From ltaylor.volks at gmail.com  Tue Apr  6 05:31:36 2010
From: ltaylor.volks at gmail.com (Lucas Taylor)
Date: Tue, 06 Apr 2010 02:31:36 -0700
Subject: [Twisted-Python] R: Re: smtp-server: issue with
 checkers.FilePasswordDB and hash
In-Reply-To: <2762000.301081270473739324.JavaMail.defaultUser@defaultHost>
References: <2762000.301081270473739324.JavaMail.defaultUser@defaultHost>
Message-ID: <4BBAFF78.9020606@gmail.com>

On 4/5/10 6:22 AM, aleuser at inwind.it wrote:
> 
>> If your passwords are already hashed before they are sent to the server
>> for authentication, then there is no need for a hash function.
>> FilePasswordDB will accept either IUsernamePassword or
>> IUsernameHashedPassword credentials.
> 
> I want to hash the password on the server; can't I? How I can decide to use a 
> simple IUsernamePassword?
> 
> however If I don't use the hash function the connection still continue to use 
> an IUsernameHashedPassword.
> Probably the smtp connection is not made for a plain-text password, isn't it?
> 

It sounds to me like you want the server to support PLAIN auth but still
compare against a hashed password file? The ESMTP factory you are using
only provides CRAM-MD5 auth via credentials.

http://twistedmatrix.com/trac/browser/trunk/twisted/mail/protocols.py#L132

CramMD5Credentials implements IUsernameHashedPassword, so it won't work
with a FilePasswordDB checker that has a hash function. This is the
source of your error message.

You can add PLAIN support by adding credentials that provide
IUsernamePassword. The imap4 implementation has one (PLAINCredentials):

...
from twisted.mail import imap4
smtpserver = mailservice.getESMTPFactory()
smtpserver.challengers['PLAIN'] = imap4.PLAINCredentials
application = service.Application("Console SMTP Server")
...

Clients using CRAM-MD5 will still fail with the same error, though. You
could create your own checker which differentiates how it checks based
on the provided credentials interface. You would start by subclassing
FilePasswordDB and override the requestAvatarId method. If the
credentials interface is IUsernameHashedPassword, just skip over the
hash function. Here's an example based on yours:
http://gist.github.com/357396






From superdupont at gmail.com  Tue Apr  6 06:47:48 2010
From: superdupont at gmail.com (Carlos Valiente)
Date: Tue, 6 Apr 2010 11:47:48 +0100
Subject: [Twisted-Python] twisted.protocols.basic.NetstringReceiver: Some
	errors are not visible
Message-ID: <g2he2b218021004060347r7b42d2f6v53f7588be7c6833d@mail.gmail.com>


From exarkun at twistedmatrix.com  Tue Apr  6 07:39:36 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 06 Apr 2010 11:39:36 -0000
Subject: [Twisted-Python] R: Re: smtp-server: issue
	with	checkers.FilePasswordDB and hash
In-Reply-To: <4BBAFF78.9020606@gmail.com>
References: <2762000.301081270473739324.JavaMail.defaultUser@defaultHost>
	<4BBAFF78.9020606@gmail.com>
Message-ID: <20100406113936.2779.1413751759.divmod.xquotient.122@localhost.localdomain>

On 09:31 am, ltaylor.volks at gmail.com wrote:
>[snip]
>Clients using CRAM-MD5 will still fail with the same error, though. You
>could create your own checker which differentiates how it checks based
>on the provided credentials interface.

FilePasswordDB can already check IUsernameHashedPassword credentials as 
long as you construct it without a hash function.

Jean-Paul


From albert.brandl at weiermayer.com  Wed Apr  7 05:51:56 2010
From: albert.brandl at weiermayer.com (Albert Brandl)
Date: Wed, 7 Apr 2010 11:51:56 +0200
Subject: [Twisted-Python]
	twisted.protocols.basic.NetstringReceiver:	Some errors are
	not visible
In-Reply-To: <g2he2b218021004060347r7b42d2f6v53f7588be7c6833d@mail.gmail.com>
References: <g2he2b218021004060347r7b42d2f6v53f7588be7c6833d@mail.gmail.com>
Message-ID: <20100407095156.GA9902@weiermayer.com>

On Tue, Apr 06, 2010 at 11:47:48AM +0100, Carlos Valiente wrote:
> 
> The error message "netstring too long" is shadowed by the except
> block. I'd like to see it in my log files.
> 
> Would it make sense to emit logging messaged for those errors, or is
> there any particular reason why they are silenced?

I don't know if there is a particular reason for silencing the errors.
But most classes in basic.py do not emit any log messages (the only
exception is StatefulStringProtocol).

BTW: There is a ticket about NetstringReceiver - you might want to 
add your request there:

http://twistedmatrix.com/trac/ticket/4378

Best regards,

Albert

--
Albert Brandl
Weiermayer Solutions GmbH
Abteistra?e 12
A-4813 Altm?nster
phone: +43 (0) 720 70 30 14
fax: +43 (0) 7612 20 3 56
web: http://www.weiermayer.com 


From brduffy at gmail.com  Wed Apr  7 16:36:28 2010
From: brduffy at gmail.com (Brian Duffy)
Date: Wed, 7 Apr 2010 16:36:28 -0400
Subject: [Twisted-Python] Network newbie
Message-ID: <k2xda5a17291004071336ja4acffb0yd4dd9d6521c90337@mail.gmail.com>

I have been wondering how I could develop a python application which would
make it easy for users of this application to share small amounts of textual
information over the Internet.

The information is not confidential but I would like to ensure that it is
coming from and generated by the application in question using ssl. I want
it to be easy for users of the application to identify and communicate with
other users of the application.

What type of network am I talking about here? I have plenty of programming
experience, but not much network programming experience. Any advice would be
appreciated.

thanks

Brian Duffy

-- 
Duff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100407/68740336/attachment.htm 

From jasonjwwilliams at gmail.com  Wed Apr  7 16:53:04 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Wed, 7 Apr 2010 14:53:04 -0600
Subject: [Twisted-Python] Network newbie
In-Reply-To: <k2xda5a17291004071336ja4acffb0yd4dd9d6521c90337@mail.gmail.com>
References: <k2xda5a17291004071336ja4acffb0yd4dd9d6521c90337@mail.gmail.com>
Message-ID: <g2s3b949f091004071353s6dcd8b48hb47abf99a6ba6139@mail.gmail.com>

I think you need to define your application functionality a little
more. You could be describing anything from a web app that implements
a pasteboard, to a web service shuffling JSON objects around or
anything in between.

-J

On Wed, Apr 7, 2010 at 2:36 PM, Brian Duffy <brduffy at gmail.com> wrote:
> I have been wondering how I could develop a python application which would
> make it easy for users of this application to share small amounts of textual
> information over the Internet.
> The information is not confidential but I would like to ensure that it is
> coming from and generated by the application in question using ssl. I want
> it to be easy for users of the application to identify and communicate with
> other users of the application.
> What type of network am I talking about here? I have plenty of programming
> experience, but not much network programming experience. Any advice would be
> appreciated.
> thanks
> Brian Duffy
>
> --
> Duff
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


From brduffy at gmail.com  Wed Apr  7 17:31:40 2010
From: brduffy at gmail.com (Brian Duffy)
Date: Wed, 7 Apr 2010 17:31:40 -0400
Subject: [Twisted-Python] Network newbie
In-Reply-To: <g2s3b949f091004071353s6dcd8b48hb47abf99a6ba6139@mail.gmail.com>
References: <k2xda5a17291004071336ja4acffb0yd4dd9d6521c90337@mail.gmail.com>
	<g2s3b949f091004071353s6dcd8b48hb47abf99a6ba6139@mail.gmail.com>
Message-ID: <g2nda5a17291004071431yde280a04y351fc1dad54448c5@mail.gmail.com>

Thanks Jason,

Okay, lets say that two users are using this hypothetical application. Each
user has some files on his/her system that were installed locally (as part
of the installation or from disk or whatever). Lets assume that both users
have the same files for the sake of this discussion. The application stores
some unique identifiers for each of these files. From a high level point of
view I would like the users to be able to send a list of identifiers to
another user of the system over the internet to indicate which documents to
view and in what order. There may also be some additional textual data
involved to represent segues between the files to be viewed.

Being new to network programming I am not sure what the simplest way is to
accomplish the task. The nature of the data being communicated is not
confidential but I would like to be reasonably sure that the data is being
generated and sent from the application and user in question.

How will users identify themselves to others for communication. I would like
a user to be able to tell another user what his "address" is and have that
user be able to enter that address into the application and use it whenever
he wishes to send that particular user a sequence of id's and text to be
parsed by the application.

I suppose the application will be acting as both server and client. Any
thoughts?

Thanks again

Brian




On Wed, Apr 7, 2010 at 4:53 PM, Jason J. W. Williams <
jasonjwwilliams at gmail.com> wrote:

> I think you need to define your application functionality a little
> more. You could be describing anything from a web app that implements
> a pasteboard, to a web service shuffling JSON objects around or
> anything in between.
>
> -J
>
> On Wed, Apr 7, 2010 at 2:36 PM, Brian Duffy <brduffy at gmail.com> wrote:
> > I have been wondering how I could develop a python application which
> would
> > make it easy for users of this application to share small amounts of
> textual
> > information over the Internet.
> > The information is not confidential but I would like to ensure that it is
> > coming from and generated by the application in question using ssl. I
> want
> > it to be easy for users of the application to identify and communicate
> with
> > other users of the application.
> > What type of network am I talking about here? I have plenty of
> programming
> > experience, but not much network programming experience. Any advice would
> be
> > appreciated.
> > thanks
> > Brian Duffy
> >
> > --
> > Duff
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >
> >
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
Duff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100407/71ef5881/attachment.htm 

From jasonjwwilliams at gmail.com  Wed Apr  7 17:46:30 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Wed, 7 Apr 2010 15:46:30 -0600
Subject: [Twisted-Python] Network newbie
In-Reply-To: <g2nda5a17291004071431yde280a04y351fc1dad54448c5@mail.gmail.com>
References: <k2xda5a17291004071336ja4acffb0yd4dd9d6521c90337@mail.gmail.com>
	<g2s3b949f091004071353s6dcd8b48hb47abf99a6ba6139@mail.gmail.com>
	<g2nda5a17291004071431yde280a04y351fc1dad54448c5@mail.gmail.com>
Message-ID: <h2y3b949f091004071446qa9c665f3r16ccba924c849034@mail.gmail.com>

Sounds like a peer-to-peer model and you need to use an SSL factory
for your protocols. The rest...authentication etc is really something
for you to put together.

-J

On Wed, Apr 7, 2010 at 3:31 PM, Brian Duffy <brduffy at gmail.com> wrote:
> Thanks Jason,
> Okay, lets say that two users are using this hypothetical application. Each
> user has some files on his/her system that were installed locally (as part
> of the installation or from disk or whatever). Lets assume that both users
> have the same files for the sake of this discussion. The application stores
> some unique identifiers for each of these files. From a high level point of
> view I would like the users to be able to send a list of identifiers to
> another user of the system over the internet to indicate which documents to
> view and in what order. There may also be some additional textual data
> involved to represent segues between the files to be viewed.
> Being new to network programming I am not sure what the simplest way is to
> accomplish the task. The nature of the data being communicated is not
> confidential but I would like to be reasonably sure that the data is being
> generated and sent from the application and user in question.
> How will users identify themselves to others for communication. I would like
> a user to be able to tell another user what his "address" is and have that
> user be able to enter that address into the application and use it whenever
> he wishes to send that particular user a sequence of id's and text to be
> parsed by the application.
> I suppose the application will be acting as both server and client. Any
> thoughts?
> Thanks again
> Brian
>
>
>
>
> On Wed, Apr 7, 2010 at 4:53 PM, Jason J. W. Williams
> <jasonjwwilliams at gmail.com> wrote:
>>
>> I think you need to define your application functionality a little
>> more. You could be describing anything from a web app that implements
>> a pasteboard, to a web service shuffling JSON objects around or
>> anything in between.
>>
>> -J
>>
>> On Wed, Apr 7, 2010 at 2:36 PM, Brian Duffy <brduffy at gmail.com> wrote:
>> > I have been wondering how I could develop a python application which
>> > would
>> > make it easy for users of this application to share small amounts of
>> > textual
>> > information over the Internet.
>> > The information is not confidential but I would like to ensure that it
>> > is
>> > coming from and generated by the application in question using ssl. I
>> > want
>> > it to be easy for users of the application to identify and communicate
>> > with
>> > other users of the application.
>> > What type of network am I talking about here? I have plenty of
>> > programming
>> > experience, but not much network programming experience. Any advice
>> > would be
>> > appreciated.
>> > thanks
>> > Brian Duffy
>> >
>> > --
>> > Duff
>> >
>> > _______________________________________________
>> > Twisted-Python mailing list
>> > Twisted-Python at twistedmatrix.com
>> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> >
>> >
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
>
> --
> Duff
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


From rlotun at gmail.com  Wed Apr  7 18:35:28 2010
From: rlotun at gmail.com (Reza Lotun)
Date: Wed, 7 Apr 2010 23:35:28 +0100
Subject: [Twisted-Python] Network newbie
In-Reply-To: <g2nda5a17291004071431yde280a04y351fc1dad54448c5@mail.gmail.com>
References: <k2xda5a17291004071336ja4acffb0yd4dd9d6521c90337@mail.gmail.com>
	<g2s3b949f091004071353s6dcd8b48hb47abf99a6ba6139@mail.gmail.com>
	<g2nda5a17291004071431yde280a04y351fc1dad54448c5@mail.gmail.com>
Message-ID: <z2x95bb10691004071535hf1af3ac0g2541e70bd715d59@mail.gmail.com>

Hi Brian,

> I suppose the application will be acting as both server and client. Any
> thoughts?

For the network part you're certainly describing a P2P model. These
applications are essentially text messaging each other various bits of
info. Keep in mind with P2P stuff - it's notoriously hard to be
*really* P2P without having some element of centrality/servers. The
reason is that what seems like simple communication between two
computers on the internet really goes through firewalls and Nats and
cable modems and what not. The internet - or rather the Internet as
its commonly referred to - is really a collection of public hubs
(websites, mail servers, etc.) which users traverse through their
layers of NATs and firewalls to get to. Usually only ports 80 and 443
(HTTP and HTTPS) are open on these NATs and firewalls, hence why you
don't see a proliferation of other random protocols and applications,
besides a handful. Skype or Kazaa are P2P systems that use a hybrid
approach of relaying via central, publicly accessible "supernodes"
which are promoted on the fly.

Anyway, most people take the easy way out and have one or more servers
sitting somewhere that their clients connect to. Not that the P2P
problem isn't fun ;-)

Here's one of many solutions: get one or more publicly available
servers, and stick some XMPP software (twisted.words, Punjab,
ejabberd, whatever). Turn on SSL. Now you have a secure, centralized
communications system.

Reza

-- 
Reza Lotun
mobile: +44 (0)7521 310 763
email:  rlotun at gmail.com
work:   reza at tweetdeck.com
twitter: @rlotun


From glyph at twistedmatrix.com  Thu Apr  8 03:11:07 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 8 Apr 2010 03:11:07 -0400
Subject: [Twisted-Python] Network newbie
In-Reply-To: <z2x95bb10691004071535hf1af3ac0g2541e70bd715d59@mail.gmail.com>
References: <k2xda5a17291004071336ja4acffb0yd4dd9d6521c90337@mail.gmail.com>
	<g2s3b949f091004071353s6dcd8b48hb47abf99a6ba6139@mail.gmail.com>
	<g2nda5a17291004071431yde280a04y351fc1dad54448c5@mail.gmail.com>
	<z2x95bb10691004071535hf1af3ac0g2541e70bd715d59@mail.gmail.com>
Message-ID: <2662DF10-9C37-437F-AF85-5DA76404BB49@twistedmatrix.com>


On Apr 7, 2010, at 6:35 PM, Reza Lotun wrote:

> Here's one of many solutions: get one or more publicly available
> servers, and stick some XMPP software (twisted.words, Punjab,
> ejabberd, whatever). Turn on SSL. Now you have a secure, centralized
> communications system.

Another solution, if you want to go down the "real P2P" route, is to start maintaining Divmod Vertex <http://divmod.org/trac/wiki/DivmodVertex> - it's a pretty good proof of concept, and solves many of the really hard problems (especially NAT traversal), but it will definitely need to be fixed up if you want to deploy it in a real-world application.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100408/5563f55e/attachment.htm 

From alexandre at quessy.net  Thu Apr  8 08:52:01 2010
From: alexandre at quessy.net (Alexandre Quessy)
Date: Thu, 8 Apr 2010 08:52:01 -0400
Subject: [Twisted-Python] Network newbie
In-Reply-To: <2662DF10-9C37-437F-AF85-5DA76404BB49@twistedmatrix.com>
References: <k2xda5a17291004071336ja4acffb0yd4dd9d6521c90337@mail.gmail.com>
	<g2s3b949f091004071353s6dcd8b48hb47abf99a6ba6139@mail.gmail.com>
	<g2nda5a17291004071431yde280a04y351fc1dad54448c5@mail.gmail.com>
	<z2x95bb10691004071535hf1af3ac0g2541e70bd715d59@mail.gmail.com>
	<2662DF10-9C37-437F-AF85-5DA76404BB49@twistedmatrix.com>
Message-ID: <q2j72236ba91004080552wea848748z33a8ae15f553ed93@mail.gmail.com>

Hello Brian,
You can start with one server and one client on each side.
If privacy is not a concern for your application, you don't need to
encrypt the data over SSL.

The easiest to use is a basic LineReceiver and a line sender. Next,
you can use JSON if you want to send more than text.
Look at the examples !

TIP: The sender might tell the other peer on which port its receiver
is listening.

a

2010/4/8 Glyph Lefkowitz <glyph at twistedmatrix.com>:
>
> On Apr 7, 2010, at 6:35 PM, Reza Lotun wrote:
>
> Here's one of many solutions: get one or more publicly available
> servers, and stick some XMPP software (twisted.words, Punjab,
> ejabberd, whatever). Turn on SSL. Now you have a secure, centralized
> communications system.
>
> Another solution, if you want to go down the "real P2P" route, is to start
> maintaining Divmod Vertex?<http://divmod.org/trac/wiki/DivmodVertex> - it's
> a pretty good proof of concept, and solves many of the really hard problems
> (especially NAT traversal), but it will definitely need to be fixed up if
> you want to deploy it in a real-world application.
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



-- 
Alexandre Quessy
http://alexandre.quessy.net/


From general at vultaire.net  Fri Apr  9 04:35:51 2010
From: general at vultaire.net (Paul Goins)
Date: Fri, 09 Apr 2010 17:35:51 +0900
Subject: [Twisted-Python] Seeking advice: Coping with heavy log file loads
Message-ID: <4BBEE6E7.2000905@vultaire.net>

There may not be a clear answer to this problem, and the answer may or
may not be Twisted-specific.  I'm just trying to fish for ideas here.

The server I'm working on suffers from extremely high CPU time spent in
the logging functions.  I'm spending between 30 and 40% of all CPU time
just in twisted.python.log.msg.

Describing the environment:

We use DailyLogFiles for file rotation along with the
PythonLoggingObserver to allow for logLevel support.  (Of course, this
gives us significant overhead from Python's complex logging
architecture; maybe we should drop this...)

On a 1000 request test of this server, we generate 58,274 calls to
t.p.log.msg.  There's room for cleanup, but there's lots of pressure to
keep many of the log calls we have for forensic purposes, so we can only
cut this back so far.

Anyway, does anyone have any ideas for speedups?  Any stories from
experience especially?  Shots in the dark are welcome.  ;-)

-
Paul Goins


From k.bos at zx.nl  Fri Apr  9 05:49:52 2010
From: k.bos at zx.nl (Kees Bos)
Date: Fri, 09 Apr 2010 11:49:52 +0200
Subject: [Twisted-Python] Seeking advice: Coping with heavy log
	file	loads
In-Reply-To: <4BBEE6E7.2000905@vultaire.net>
References: <4BBEE6E7.2000905@vultaire.net>
Message-ID: <1270806592.11608.53.camel@kbDesk.lan>

On Fri, 2010-04-09 at 10:35 +0200, Paul Goins wrote:
> There may not be a clear answer to this problem, and the answer may or
> may not be Twisted-specific.  I'm just trying to fish for ideas here.
> 
> The server I'm working on suffers from extremely high CPU time spent in
> the logging functions.  I'm spending between 30 and 40% of all CPU time
> just in twisted.python.log.msg.
> 
> Describing the environment:
> 
> We use DailyLogFiles for file rotation along with the
> PythonLoggingObserver to allow for logLevel support.  (Of course, this
> gives us significant overhead from Python's complex logging
> architecture; maybe we should drop this...)
> 
> On a 1000 request test of this server, we generate 58,274 calls to
> t.p.log.msg.  There's room for cleanup, but there's lots of pressure to
> keep many of the log calls we have for forensic purposes, so we can only
> cut this back so far.
> 
> Anyway, does anyone have any ideas for speedups?  Any stories from
> experience especially?  Shots in the dark are welcome.  ;-)
> 

A request/log ratio of 1:60 is extreme. I would call that a log
generator ;-)

I think you could try to use a custom light weight log function that
just queues the log messages (FIFO) and bursts them, say every second,
to the log file (e.g. in a thread to use a multicore cpu).




From screwtape at froup.com  Fri Apr  9 06:18:15 2010
From: screwtape at froup.com (Tim Allen)
Date: Fri, 9 Apr 2010 20:18:15 +1000
Subject: [Twisted-Python] Seeking advice: Coping with heavy log file
 loads
In-Reply-To: <4BBEE6E7.2000905@vultaire.net>
References: <4BBEE6E7.2000905@vultaire.net>
Message-ID: <20100409101815.GB15611@boombah.thristian.org>

On Fri, Apr 09, 2010 at 05:35:51PM +0900, Paul Goins wrote:
> We use DailyLogFiles for file rotation along with the
> PythonLoggingObserver to allow for logLevel support.  (Of course, this
> gives us significant overhead from Python's complex logging
> architecture; maybe we should drop this...)

I don't know if this will help you, but why do you need to route
through Python's logging framework for log-level support?

For example, Twisted's SyslogObserver support allows the use of syslog
log levels without involving Python's logging system:

http://twistedmatrix.com/documents/current/api/twisted.python.syslog.SyslogObserver.html

If Python's logging framework doesn't show up in your profile output as
an appreciable percentage of the time spent in Twisted's logging
framework, I guess you might as well leave it alone - but if it is
contributing, it shouldn't be too hard to figure out a way to work
around it.


From manlio_perillo at libero.it  Fri Apr  9 09:05:36 2010
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Fri, 09 Apr 2010 15:05:36 +0200
Subject: [Twisted-Python] mercurial branch
Message-ID: <4BBF2620.2000901@libero.it>

Hi.

Does twisted have a Mercurial (git is also fine) mirror?

Unofficial mirror is ok; I just would like to avoid download entire svn
history with hgsvn.



Thanks  Manlio


From itamar at itamarst.org  Fri Apr  9 09:23:01 2010
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Fri, 09 Apr 2010 09:23:01 -0400
Subject: [Twisted-Python] Seeking advice: Coping with heavy log file
 loads
In-Reply-To: <1270806592.11608.53.camel@kbDesk.lan>
References: <4BBEE6E7.2000905@vultaire.net>
	<1270806592.11608.53.camel@kbDesk.lan>
Message-ID: <1270819381.27208.177.camel@pintsize>

On Fri, 2010-04-09 at 11:49 +0200, Kees Bos wrote:

> I think you could try to use a custom light weight log function that
> just queues the log messages (FIFO) and bursts them, say every second,
> to the log file (e.g. in a thread to use a multicore cpu).

Or:

0. Profile logging system - what exactly is it doing that's using all
that CPU? If you're unlucky, it's just "lots of Python function calls",
but maybe it's fixable.

1. A log function that sends messages (over e.g. a Unix socket) to
another process that does the writing. Python GIL means you don't get
that much benefit from multiple threads.

2. Rewrite log function in C... and then maybe run it in another thread.



From k.bos at zx.nl  Fri Apr  9 09:53:10 2010
From: k.bos at zx.nl (Kees Bos)
Date: Fri, 09 Apr 2010 15:53:10 +0200
Subject: [Twisted-Python] Seeking advice: Coping with heavy log
	file	loads
In-Reply-To: <1270819381.27208.177.camel@pintsize>
References: <4BBEE6E7.2000905@vultaire.net>
	<1270806592.11608.53.camel@kbDesk.lan>
	<1270819381.27208.177.camel@pintsize>
Message-ID: <1270821190.31303.6.camel@kbDesk.lan>

On Fri, 2010-04-09 at 15:23 +0200, Itamar Turner-Trauring wrote:
> On Fri, 2010-04-09 at 11:49 +0200, Kees Bos wrote:
> 
> > I think you could try to use a custom light weight log function that
> > just queues the log messages (FIFO) and bursts them, say every second,
> > to the log file (e.g. in a thread to use a multicore cpu).
> 
> Or:
> 
> 0. Profile logging system - what exactly is it doing that's using all
> that CPU? If you're unlucky, it's just "lots of Python function calls",
> but maybe it's fixable.
> 
> 1. A log function that sends messages (over e.g. a Unix socket) to
> another process that does the writing. Python GIL means you don't get
> that much benefit from multiple threads.
Duh. Of course.

BTW. syslog from the syslog module on linux just opens a unix socket
to /dev/log and could be used to do just this. (e.g. with log level
LOG_LOCAL0 and configuring your syslog to log facility local0 to a
specific file)





From number5 at gmail.com  Fri Apr  9 10:03:02 2010
From: number5 at gmail.com (Bruce Wang)
Date: Sat, 10 Apr 2010 00:03:02 +1000
Subject: [Twisted-Python] mercurial branch
In-Reply-To: <4BBF2620.2000901@libero.it>
References: <4BBF2620.2000901@libero.it>
Message-ID: <x2r8d581cfd1004090703hc883886bh4550e7a944fa1505@mail.gmail.com>

On Fri, Apr 9, 2010 at 11:05 PM, Manlio Perillo <manlio_perillo at libero.it>wrote:

> Hi.
>
> Does twisted have a Mercurial (git is also fine) mirror?
>
> Unofficial mirror is ok; I just would like to avoid download entire svn
> history with hgsvn.
>
>
>
>
There is one at github: http://github.com/powdahound/twisted
but I think it's not official though.

-- 
simple is good
http://brucewang.net
http://twitter.com/number5
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100410/28c6f2ff/attachment.htm 

From jasonjwwilliams at gmail.com  Fri Apr  9 14:57:31 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Fri, 9 Apr 2010 12:57:31 -0600
Subject: [Twisted-Python] Seeking advice: Coping with heavy log file
	loads
In-Reply-To: <4BBEE6E7.2000905@vultaire.net>
References: <4BBEE6E7.2000905@vultaire.net>
Message-ID: <o2l3b949f091004091157teb864287w15b9ce5e46b11b17@mail.gmail.com>

Hi Paul,

Is is sporadic? (the CPU burst) If so, you may be seeing the log
rotation code kicking...and it's probably blocking your app too until
it completes.

I've got a couple patches to fix the blocking issue:

http://twistedmatrix.com/trac/ticket/4372

The patch which eliminates old log rotation will probably get rid of
your CPU problem too.

-J

On Fri, Apr 9, 2010 at 2:35 AM, Paul Goins <general at vultaire.net> wrote:
> There may not be a clear answer to this problem, and the answer may or
> may not be Twisted-specific. ?I'm just trying to fish for ideas here.
>
> The server I'm working on suffers from extremely high CPU time spent in
> the logging functions. ?I'm spending between 30 and 40% of all CPU time
> just in twisted.python.log.msg.
>
> Describing the environment:
>
> We use DailyLogFiles for file rotation along with the
> PythonLoggingObserver to allow for logLevel support. ?(Of course, this
> gives us significant overhead from Python's complex logging
> architecture; maybe we should drop this...)
>
> On a 1000 request test of this server, we generate 58,274 calls to
> t.p.log.msg. ?There's room for cleanup, but there's lots of pressure to
> keep many of the log calls we have for forensic purposes, so we can only
> cut this back so far.
>
> Anyway, does anyone have any ideas for speedups? ?Any stories from
> experience especially? ?Shots in the dark are welcome. ?;-)
>
> -
> Paul Goins
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From dr.marc.byrd at gmail.com  Fri Apr  9 15:11:04 2010
From: dr.marc.byrd at gmail.com (Marc Byrd)
Date: Fri, 9 Apr 2010 12:11:04 -0700
Subject: [Twisted-Python] Seeking advice: Coping with heavy log file
	loads
In-Reply-To: <o2l3b949f091004091157teb864287w15b9ce5e46b11b17@mail.gmail.com>
References: <4BBEE6E7.2000905@vultaire.net>
	<o2l3b949f091004091157teb864287w15b9ce5e46b11b17@mail.gmail.com>
Message-ID: <v2qa33934631004091211y873adc65pde276ed4fa66a0be@mail.gmail.com>

Definitely use syslog.  To see how much logging is costing you without
changing code, you can simply route to /dev/null via syslog.  Btw, w/ local
logging, you may not see it in the cpu usage - more likely in the i/o wait.
 In my experience, logging to a remote syslog-ng server over udp has very
little impact on the app, almost like logging to /dev/null (which in turn is
like not logging at all).

Are you by chance on AWS/EC2 ?  If so, please contact me to discuss possible
design partnership.

m




On Fri, Apr 9, 2010 at 11:57 AM, Jason J. W. Williams <
jasonjwwilliams at gmail.com> wrote:

> Hi Paul,
>
> Is is sporadic? (the CPU burst) If so, you may be seeing the log
> rotation code kicking...and it's probably blocking your app too until
> it completes.
>
> I've got a couple patches to fix the blocking issue:
>
> http://twistedmatrix.com/trac/ticket/4372
>
> The patch which eliminates old log rotation will probably get rid of
> your CPU problem too.
>
> -J
>
> On Fri, Apr 9, 2010 at 2:35 AM, Paul Goins <general at vultaire.net> wrote:
> > There may not be a clear answer to this problem, and the answer may or
> > may not be Twisted-specific.  I'm just trying to fish for ideas here.
> >
> > The server I'm working on suffers from extremely high CPU time spent in
> > the logging functions.  I'm spending between 30 and 40% of all CPU time
> > just in twisted.python.log.msg.
> >
> > Describing the environment:
> >
> > We use DailyLogFiles for file rotation along with the
> > PythonLoggingObserver to allow for logLevel support.  (Of course, this
> > gives us significant overhead from Python's complex logging
> > architecture; maybe we should drop this...)
> >
> > On a 1000 request test of this server, we generate 58,274 calls to
> > t.p.log.msg.  There's room for cleanup, but there's lots of pressure to
> > keep many of the log calls we have for forensic purposes, so we can only
> > cut this back so far.
> >
> > Anyway, does anyone have any ideas for speedups?  Any stories from
> > experience especially?  Shots in the dark are welcome.  ;-)
> >
> > -
> > Paul Goins
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100409/b531e514/attachment.htm 

From general at vultaire.net  Sat Apr 10 05:09:29 2010
From: general at vultaire.net (Paul Goins)
Date: Sat, 10 Apr 2010 18:09:29 +0900
Subject: [Twisted-Python] Seeking advice: Coping with heavy log
	file	loads
In-Reply-To: <v2qa33934631004091211y873adc65pde276ed4fa66a0be@mail.gmail.com>
References: <4BBEE6E7.2000905@vultaire.net>	<o2l3b949f091004091157teb864287w15b9ce5e46b11b17@mail.gmail.com>
	<v2qa33934631004091211y873adc65pde276ed4fa66a0be@mail.gmail.com>
Message-ID: <4BC04049.7090202@vultaire.net>

Just wanted to respond to the input everyone's given.  Thanks a lot; I'm
glad I asked.

I'll probably look into the syslog route.  I thought about it before,
but I wasn't sure how much flexibility it gives.  Given the suggestions
here, I've since looked into it a little more and it seems to be the
smartest route, especially due to the size of the load.

Thanks everyone!

- Paul


From warner at lothar.com  Sat Apr 10 17:07:27 2010
From: warner at lothar.com (Brian Warner)
Date: Sat, 10 Apr 2010 14:07:27 -0700
Subject: [Twisted-Python] Seeking advice: Coping with heavy
	log	file	loads
In-Reply-To: <4BC04049.7090202@vultaire.net>
References: <4BBEE6E7.2000905@vultaire.net>	<o2l3b949f091004091157teb864287w15b9ce5e46b11b17@mail.gmail.com>	<v2qa33934631004091211y873adc65pde276ed4fa66a0be@mail.gmail.com>
	<4BC04049.7090202@vultaire.net>
Message-ID: <4BC0E88F.7060206@lothar.com>

You might find the logging infrastructure in Foolscap interesting:

 http://foolscap.lothar.com/docs/logging.html

The basic idea is to record log events only in memory, in separate
circular buffers for each priority level. When something "weird"
happens, all the events are bundled into an "Incident File", and then
the incident file is written out (either to disk, or to a gatherer
process over a network). Other tools are then used to reassemble the
pieces of the incident into chronological order and point out where the
gaps are.

I haven't done any specific performance measurements, but I've taken a
busy server and stubbed out the logging calls and didn't see a huge
change in throughput rate. The Foolscap approach gets you useful (and
detailed) information when bad things happen, but throws out most of the
other stuff, so it doesn't touch the disk or make system calls very often.

cheers,
 -Brian (author of Foolscap)




From exarkun at twistedmatrix.com  Sun Apr 11 00:05:21 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 11 Apr 2010 04:05:21 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1270958721.64.2104042548@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100411/05dc0901/attachment.htm 

From manlio_perillo at libero.it  Sun Apr 11 15:50:42 2010
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Sun, 11 Apr 2010 21:50:42 +0200
Subject: [Twisted-Python] [ANN] txwsgi 0.1
Message-ID: <4BC22812.7070708@libero.it>

I'm pleased to announce txwsgi, version 0.1.

txwsgi is a fork of twisted.web.wsgi, that, unlike the original
implementation, executes the WSGI application in the main I/O thread.

txwsgi implements the x-wsgiorg.suspend extension (originally proposed
during a discussion on the twisted-web mailing list!), that enables
support to asynchronous WSGI applications that can use Twisted API.

Some examples are available in the doc/examples directory, in the source
distribution.

The project is available on BitBucket:
http://bitbucket.org/mperillo/txwsgi/

More informations are available in the README file.
The x-wsgiorg.suspend extension is specified in doc/wsgiorg.suspend.rst.

Please note that I implemented txwsgi to serve as a reference
implementation.  If someone is interested in using it for non testing
purpose, please let me know since the code needs to be reviewed, some
small issues needs to be fixed and tests must be written.


Regards  Manlio Perillo


From gabriel.rossetti at arimaz.com  Mon Apr 12 08:09:55 2010
From: gabriel.rossetti at arimaz.com (Gabriel Rossetti)
Date: Mon, 12 Apr 2010 14:09:55 +0200
Subject: [Twisted-Python] Question about processes in python
Message-ID: <4BC30D93.7040307@arimaz.com>

Hello everyone,

I'd like to run a python function in a new process, like python 2.6's 
multiprocessing does. I wanted to use ProcessProtocol, but it seems to 
only work for executing executables and interacting with them using 
stdin/stdout/other fds. Is there a way of running a python piece of code 
in a new process?

Thank you,
Gabriel


From rlotun at gmail.com  Mon Apr 12 08:21:45 2010
From: rlotun at gmail.com (Reza Lotun)
Date: Mon, 12 Apr 2010 13:21:45 +0100
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <4BC30D93.7040307@arimaz.com>
References: <4BC30D93.7040307@arimaz.com>
Message-ID: <v2l95bb10691004120521z37734f77xdb216e1e34ad06c2@mail.gmail.com>

Hi,

> I'd like to run a python function in a new process, like python 2.6's
> multiprocessing does. I wanted to use ProcessProtocol, but it seems to
> only work for executing executables and interacting with them using
> stdin/stdout/other fds. Is there a way of running a python piece of code
> in a new process?

Well, the only way to run Python code is to run the Python interpreter
in a process and feed it the python code you want to run (using the -c
option).

Cheers,
Reza


-- 
Reza Lotun
mobile: +44 (0)7521 310 763
email:  rlotun at gmail.com
work:   reza at tweetdeck.com
twitter: @rlotun


From gabriel.rossetti at arimaz.com  Mon Apr 12 08:40:35 2010
From: gabriel.rossetti at arimaz.com (Gabriel Rossetti)
Date: Mon, 12 Apr 2010 14:40:35 +0200
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <v2l95bb10691004120521z37734f77xdb216e1e34ad06c2@mail.gmail.com>
References: <4BC30D93.7040307@arimaz.com>
	<v2l95bb10691004120521z37734f77xdb216e1e34ad06c2@mail.gmail.com>
Message-ID: <4BC314C3.9040104@arimaz.com>

Reza Lotun wrote:
> Hi,
>
>   
>> I'd like to run a python function in a new process, like python 2.6's
>> multiprocessing does. I wanted to use ProcessProtocol, but it seems to
>> only work for executing executables and interacting with them using
>> stdin/stdout/other fds. Is there a way of running a python piece of code
>> in a new process?
>>     
>
> Well, the only way to run Python code is to run the Python interpreter
> in a process and feed it the python code you want to run (using the -c
> option).
>
> Cheers,
> Reza
>
>   
Hi Reza,

yes, I'd thought of that, but I can't get the function's code, I tried 
the inspect module but
it only works of the code is written to disk; I'd rather not have to 
first write the code to disk just to be able to turn it into a string 
and feed it to python -c. Any ideas on how I could do this?

Thanks,
Gabriel


From rlotun at gmail.com  Mon Apr 12 08:57:39 2010
From: rlotun at gmail.com (Reza Lotun)
Date: Mon, 12 Apr 2010 13:57:39 +0100
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <4BC314C3.9040104@arimaz.com>
References: <4BC30D93.7040307@arimaz.com>
	<v2l95bb10691004120521z37734f77xdb216e1e34ad06c2@mail.gmail.com>
	<4BC314C3.9040104@arimaz.com>
Message-ID: <u2p95bb10691004120557vdcc58132vf7b818b4b5269d9b@mail.gmail.com>

> yes, I'd thought of that, but I can't get the function's code, I tried
> the inspect module but
> it only works of the code is written to disk; I'd rather not have to
> first write the code to disk just to be able to turn it into a string
> and feed it to python -c. Any ideas on how I could do this?

You don't have to write it to disk - you can use cStringIO.


-- 
Reza Lotun
mobile: +44 (0)7521 310 763
email:  rlotun at gmail.com
work:   reza at tweetdeck.com
twitter: @rlotun


From alexandre at quessy.net  Mon Apr 12 09:24:53 2010
From: alexandre at quessy.net (Alexandre Quessy)
Date: Mon, 12 Apr 2010 09:24:53 -0400
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <u2p95bb10691004120557vdcc58132vf7b818b4b5269d9b@mail.gmail.com>
References: <4BC30D93.7040307@arimaz.com>
	<v2l95bb10691004120521z37734f77xdb216e1e34ad06c2@mail.gmail.com>
	<4BC314C3.9040104@arimaz.com>
	<u2p95bb10691004120557vdcc58132vf7b818b4b5269d9b@mail.gmail.com>
Message-ID: <l2z72236ba91004120624w810dd649g3db7bd015e2919d8@mail.gmail.com>

Hello,

2010/4/12 Reza Lotun <rlotun at gmail.com>:
>> yes, I'd thought of that, but I can't get the function's code, I tried
>> the inspect module but
>> it only works of the code is written to disk; I'd rather not have to
>> first write the code to disk just to be able to turn it into a string
>> and feed it to python -c. Any ideas on how I could do this?
>
> You don't have to write it to disk - you can use cStringIO.
>

That's interesting. :) You would write string in a string buffer
that's in the memory, and then... how do you pass it to the child
process? You could not get a pointer to the same location in memory,
as far as I know. You would still need a socket, or something like
that. Am I wrong?

alex


>
> --
> Reza Lotun
> mobile: +44 (0)7521 310 763
> email: ?rlotun at gmail.com
> work: ? reza at tweetdeck.com
> twitter: @rlotun
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
Alexandre Quessy
http://alexandre.quessy.net/


From exarkun at twistedmatrix.com  Mon Apr 12 09:40:02 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 12 Apr 2010 13:40:02 -0000
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <l2z72236ba91004120624w810dd649g3db7bd015e2919d8@mail.gmail.com>
References: <4BC30D93.7040307@arimaz.com>
	<v2l95bb10691004120521z37734f77xdb216e1e34ad06c2@mail.gmail.com>
	<4BC314C3.9040104@arimaz.com>
	<u2p95bb10691004120557vdcc58132vf7b818b4b5269d9b@mail.gmail.com>
	<l2z72236ba91004120624w810dd649g3db7bd015e2919d8@mail.gmail.com>
Message-ID: <20100412134002.2779.1976765289.divmod.xquotient.344@localhost.localdomain>

On 01:24 pm, alexandre at quessy.net wrote:
>Hello,
>
>2010/4/12 Reza Lotun <rlotun at gmail.com>:
>>>yes, I'd thought of that, but I can't get the function's code, I 
>>>tried
>>>the inspect module but
>>>it only works of the code is written to disk; I'd rather not have to
>>>first write the code to disk just to be able to turn it into a string
>>>and feed it to python -c. Any ideas on how I could do this?
>>
>>You don't have to write it to disk - you can use cStringIO.
>
>That's interesting. :) You would write string in a string buffer
>that's in the memory, and then... how do you pass it to the child
>process? You could not get a pointer to the same location in memory,
>as far as I know. You would still need a socket, or something like
>that. Am I wrong?

Sticking with "python -c" is probably easiest.

Jean-Paul


From jasonjwwilliams at gmail.com  Mon Apr 12 09:57:49 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Mon, 12 Apr 2010 07:57:49 -0600
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <4BC30D93.7040307@arimaz.com>
References: <4BC30D93.7040307@arimaz.com>
Message-ID: <n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>

Hi Gabriel,

You might want to try Python's multiprocessing code, it works very
well. I've had pretty good luck using it with Twisted inside the
processes too. The multiprocessing library handles the work of setting
up the send and receive file descriptors.

-J

On Mon, Apr 12, 2010 at 6:09 AM, Gabriel Rossetti
<gabriel.rossetti at arimaz.com> wrote:
> Hello everyone,
>
> I'd like to run a python function in a new process, like python 2.6's
> multiprocessing does. I wanted to use ProcessProtocol, but it seems to
> only work for executing executables and interacting with them using
> stdin/stdout/other fds. Is there a way of running a python piece of code
> in a new process?
>
> Thank you,
> Gabriel
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From rlotun at gmail.com  Mon Apr 12 10:12:24 2010
From: rlotun at gmail.com (Reza Lotun)
Date: Mon, 12 Apr 2010 15:12:24 +0100
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <u2p95bb10691004120557vdcc58132vf7b818b4b5269d9b@mail.gmail.com>
References: <4BC30D93.7040307@arimaz.com>
	<v2l95bb10691004120521z37734f77xdb216e1e34ad06c2@mail.gmail.com>
	<4BC314C3.9040104@arimaz.com>
	<u2p95bb10691004120557vdcc58132vf7b818b4b5269d9b@mail.gmail.com>
Message-ID: <j2u95bb10691004120712mbd87b369g78081b2edef40592@mail.gmail.com>

> You don't have to write it to disk - you can use cStringIO.

Sorry, please disregard this - I was thinking about something else.

The way I've done Python process spawning before was to have my code
predefined in a string, and then launched via a ProcessProtocol. You
can do tricks whereby you have your code actually defined in a string,
then you generate your Python source to run tests/etc. on *that*, and
then you send your code-string to python -c when you actually want to
run it in a separate process.

I remember playing around with inspect before, but I gave up at some
point and took the path of least resistance.

Cheers,
Reza

-- 
Reza Lotun
mobile: +44 (0)7521 310 763
email:  rlotun at gmail.com
work:   reza at tweetdeck.com
twitter: @rlotun


From gabriel.rossetti at arimaz.com  Mon Apr 12 10:23:54 2010
From: gabriel.rossetti at arimaz.com (Gabriel Rossetti)
Date: Mon, 12 Apr 2010 16:23:54 +0200
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
Message-ID: <4BC32CFA.5030400@arimaz.com>

Jason J. W. Williams wrote:
> Hi Gabriel,
>
> You might want to try Python's multiprocessing code, it works very
> well. I've had pretty good luck using it with Twisted inside the
> processes too. The multiprocessing library handles the work of setting
> up the send and receive file descriptors.
>
> -J
>   
Hi Jason,

yes, I was going to use that but I read in several threads that this 
didn't work correctly in Twisted

Gabriel
> On Mon, Apr 12, 2010 at 6:09 AM, Gabriel Rossetti
> <gabriel.rossetti at arimaz.com> wrote:
>   
>> Hello everyone,
>>
>> I'd like to run a python function in a new process, like python 2.6's
>> multiprocessing does. I wanted to use ProcessProtocol, but it seems to
>> only work for executing executables and interacting with them using
>> stdin/stdout/other fds. Is there a way of running a python piece of code
>> in a new process?
>>
>> Thank you,
>> Gabriel
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>     
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>   


From dripton at ripton.net  Mon Apr 12 10:45:32 2010
From: dripton at ripton.net (David Ripton)
Date: Mon, 12 Apr 2010 07:45:32 -0700
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <4BC32CFA.5030400@arimaz.com>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
Message-ID: <20100412144532.GA31350@vidar.dreamhost.com>

On 2010.04.12 16:23:54 +0200, Gabriel Rossetti wrote:
> Jason J. W. Williams wrote:
> > You might want to try Python's multiprocessing code, it works very
> > well. I've had pretty good luck using it with Twisted inside the
> > processes too. The multiprocessing library handles the work of setting
> > up the send and receive file descriptors.

> yes, I was going to use that but I read in several threads that this 
> didn't work correctly in Twisted

IMO Jason probably has a lurking bug that he just hasn't noticed so far.

Same thing with using subprocess instead of the Twisted equivalent
inside a Twisted reactor.  IMX it works 99% of the time.  Murphy's Law
says it'll pass cursory testing and then fail in production.

-- 
David Ripton    dripton at ripton.net


From jasonjwwilliams at gmail.com  Mon Apr 12 11:39:21 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Mon, 12 Apr 2010 09:39:21 -0600
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <20100412144532.GA31350@vidar.dreamhost.com>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
	<20100412144532.GA31350@vidar.dreamhost.com>
Message-ID: <u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>

Haven't had any issues yet. Twisted imports occur inside the process
function. The app was originally written as a purely blocking
multiprocessing app and rewritten to use Twisted inside the
sub-processes. It's passed all automated and hand tests without an
issue. Is there a reason importing Twisted inside sub-process should
not work?

-J

On Mon, Apr 12, 2010 at 8:45 AM, David Ripton <dripton at ripton.net> wrote:
> On 2010.04.12 16:23:54 +0200, Gabriel Rossetti wrote:
>> Jason J. W. Williams wrote:
>> > You might want to try Python's multiprocessing code, it works very
>> > well. I've had pretty good luck using it with Twisted inside the
>> > processes too. The multiprocessing library handles the work of setting
>> > up the send and receive file descriptors.
>
>> yes, I was going to use that but I read in several threads that this
>> didn't work correctly in Twisted
>
> IMO Jason probably has a lurking bug that he just hasn't noticed so far.
>
> Same thing with using subprocess instead of the Twisted equivalent
> inside a Twisted reactor. ?IMX it works 99% of the time. ?Murphy's Law
> says it'll pass cursory testing and then fail in production.
>
> --
> David Ripton ? ?dripton at ripton.net
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From p.mayers at imperial.ac.uk  Mon Apr 12 11:44:34 2010
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Mon, 12 Apr 2010 16:44:34 +0100
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <4BC30D93.7040307@arimaz.com>
References: <4BC30D93.7040307@arimaz.com>
Message-ID: <4BC33FE2.40809@imperial.ac.uk>

On 04/12/2010 01:09 PM, Gabriel Rossetti wrote:
> Hello everyone,
>
> I'd like to run a python function in a new process, like python 2.6's
> multiprocessing does. I wanted to use ProcessProtocol, but it seems to
> only work for executing executables and interacting with them using
> stdin/stdout/other fds. Is there a way of running a python piece of code
> in a new process?

I frequently use a model like this:


#!/usr/bin/python

import sys
# and loads of twisted imports

# function to run in a child process
def work():
     while True:
         cmd = sys.stdin.readline()
         if not cmd:
             break
         # do something
         sys.stdout.write('result\n')
         sys.stdout.flush()

class MyProcessProtocol(protocol.ProcessProtocol):
     def __init__(self):
         self.buffer = ''
         self.queue = []

     def outReceived(self, data):
         self.buffer += data
         while '\n' in self.buffer:
             reply, self.buffer = self.buffer.split('\n', 1)
             d,c = self.queue.pop(0)
             d.callback(reply)

         if self.queue:
             self.transport.write('%s\n' % (self.queue[0][1],)

     def cmd(self, c):
         d = defer.Deferred()
         if self.queue:
             # just enqueue it
             self.queue.append((d,c))
         else:
             # hang onto the deferred and also send the cmd
             self.queue.append((d,c))
             self.transport.write(c+'\n')
         return d

def parent():
     proto = MyProcessProtocol()
     reactor.spawnProcess(
         proto,
        sys.executable,
        (sys.executable, os.path.abspath(__file__), 'WORKER')
     )

     # write some commands to the child
     d = proto.send_cmd('something')
     d.addCallback(result).addErrback(failed)

def twisted_main():
     reactor.callWhenRunning(parent)
     reactor.run()

def main():
     args = sys.argv[1:]
     if args and args[0]=='WORKER':
         # we're a child process
         work()
     else:
         twisted_main()

if __name__=='__main__':
     main()


It's pretty simple; you need to be sure that the module does all the 
imports it needs in the child process. You can extend the above model to 
something more complex than simple line-based results, using e.g. JSON 
or python pickle, to handle exceptions, and so forth.

IMHO Twisted REALLY REALLY needs something built-in to do this. I'm 
aware of Ampoule; it didn't work for me when I tried it (which was a 
while ago) and having to define AMP commands to use it was a bit of a 
turn off for me.


From jasonjwwilliams at gmail.com  Mon Apr 12 11:47:21 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Mon, 12 Apr 2010 09:47:21 -0600
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
	<20100412144532.GA31350@vidar.dreamhost.com>
	<u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
Message-ID: <q2w3b949f091004120847l726f949aya919064d033fcc47@mail.gmail.com>

I will say importing your reactor (from twisted.internet import
reactor) must be done inside the sub-process or you won't get what you
want.

-J

On Mon, Apr 12, 2010 at 9:39 AM, Jason J. W. Williams
<jasonjwwilliams at gmail.com> wrote:
> Haven't had any issues yet. Twisted imports occur inside the process
> function. The app was originally written as a purely blocking
> multiprocessing app and rewritten to use Twisted inside the
> sub-processes. It's passed all automated and hand tests without an
> issue. Is there a reason importing Twisted inside sub-process should
> not work?
>
> -J
>
> On Mon, Apr 12, 2010 at 8:45 AM, David Ripton <dripton at ripton.net> wrote:
>> On 2010.04.12 16:23:54 +0200, Gabriel Rossetti wrote:
>>> Jason J. W. Williams wrote:
>>> > You might want to try Python's multiprocessing code, it works very
>>> > well. I've had pretty good luck using it with Twisted inside the
>>> > processes too. The multiprocessing library handles the work of setting
>>> > up the send and receive file descriptors.
>>
>>> yes, I was going to use that but I read in several threads that this
>>> didn't work correctly in Twisted
>>
>> IMO Jason probably has a lurking bug that he just hasn't noticed so far.
>>
>> Same thing with using subprocess instead of the Twisted equivalent
>> inside a Twisted reactor. ?IMX it works 99% of the time. ?Murphy's Law
>> says it'll pass cursory testing and then fail in production.
>>
>> --
>> David Ripton ? ?dripton at ripton.net
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>


From p.mayers at imperial.ac.uk  Mon Apr 12 11:49:54 2010
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Mon, 12 Apr 2010 16:49:54 +0100
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
References: <4BC30D93.7040307@arimaz.com>	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>	<4BC32CFA.5030400@arimaz.com>	<20100412144532.GA31350@vidar.dreamhost.com>
	<u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
Message-ID: <4BC34122.10400@imperial.ac.uk>

On 04/12/2010 04:39 PM, Jason J. W. Williams wrote:
> Haven't had any issues yet. Twisted imports occur inside the process
> function. The app was originally written as a purely blocking
> multiprocessing app and rewritten to use Twisted inside the
> sub-processes. It's passed all automated and hand tests without an
> issue. Is there a reason importing Twisted inside sub-process should
> not work?


When I last looked at it, multiprocessing did awful things like fork'ing 
and not re-execing the interpreter in the child process, which seemed 
like an absolute disaster waiting to happen, for many types of objects 
which the child process inherits. Does it still do that?

I guess what you're doing will work though, In that setup, where the 
multiprocessing code is the absolute first thing you call, you're 
essentially using it as a helper to fork off the child process & setup 
the communication pipes (see the example I just posted for a more 
explicit example).

There's the issue that any multiprocess code which writes to the pipes 
(or whatever) used for sending results will block (and block the 
reactor) of course.


From jasonjwwilliams at gmail.com  Mon Apr 12 12:01:28 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Mon, 12 Apr 2010 10:01:28 -0600
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <4BC34122.10400@imperial.ac.uk>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
	<20100412144532.GA31350@vidar.dreamhost.com>
	<u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
	<4BC34122.10400@imperial.ac.uk>
Message-ID: <l2z3b949f091004120901ld97d326bt7c563d540e379870@mail.gmail.com>

Yeah...our code doesn't actually use the pipes. They get fed over AMQP
(txAMQP). We're essentially using multiprocessing as a sub-proc
supervisor to spin-up "processing" engines that consume the AMQP
queues they're configured with.

-J

On Mon, Apr 12, 2010 at 9:49 AM, Phil Mayers <p.mayers at imperial.ac.uk> wrote:
> On 04/12/2010 04:39 PM, Jason J. W. Williams wrote:
>> Haven't had any issues yet. Twisted imports occur inside the process
>> function. The app was originally written as a purely blocking
>> multiprocessing app and rewritten to use Twisted inside the
>> sub-processes. It's passed all automated and hand tests without an
>> issue. Is there a reason importing Twisted inside sub-process should
>> not work?
>
>
> When I last looked at it, multiprocessing did awful things like fork'ing
> and not re-execing the interpreter in the child process, which seemed
> like an absolute disaster waiting to happen, for many types of objects
> which the child process inherits. Does it still do that?
>
> I guess what you're doing will work though, In that setup, where the
> multiprocessing code is the absolute first thing you call, you're
> essentially using it as a helper to fork off the child process & setup
> the communication pipes (see the example I just posted for a more
> explicit example).
>
> There's the issue that any multiprocess code which writes to the pipes
> (or whatever) used for sending results will block (and block the
> reactor) of course.
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From nenadl at gmail.com  Mon Apr 12 12:03:56 2010
From: nenadl at gmail.com (Nenad Lakinski)
Date: Mon, 12 Apr 2010 09:03:56 -0700
Subject: [Twisted-Python] Twisted Download Page
Message-ID: <w2q58470b231004120903jd06bb0adnd2a1137ee9086dd2@mail.gmail.com>

Hi,

Is the tmrc.mit.edu download location down? Are there any mirrors?

Neno


From dripton at ripton.net  Mon Apr 12 12:06:37 2010
From: dripton at ripton.net (David Ripton)
Date: Mon, 12 Apr 2010 09:06:37 -0700
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
	<20100412144532.GA31350@vidar.dreamhost.com>
	<u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
Message-ID: <20100412160637.GA18548@vidar.dreamhost.com>

On 2010.04.12 09:39:21 -0600, Jason J. W. Williams wrote:
> Haven't had any issues yet. Twisted imports occur inside the process
> function. The app was originally written as a purely blocking
> multiprocessing app and rewritten to use Twisted inside the
> sub-processes. It's passed all automated and hand tests without an
> issue. Is there a reason importing Twisted inside sub-process should
> not work?

Here's JP's canonical answer:

http://stackoverflow.com/questions/1948641/twisted-threading-with-subprocess-popen

I've seen this problem in real code.  We had a PyGTK + Twisted program
that erroneously used subprocess in one place.  2% of the time, it
caused an exception.  98% of the time, it worked fine.  Classic race
condition.  Could be you have a similar bug but it never actually
manifests on your combination of code, OS, and hardware.  Hard to say.

-- 
David Ripton    dripton at ripton.net


From jasonjwwilliams at gmail.com  Mon Apr 12 12:20:31 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Mon, 12 Apr 2010 10:20:31 -0600
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <20100412160637.GA18548@vidar.dreamhost.com>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
	<20100412144532.GA31350@vidar.dreamhost.com>
	<u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
	<20100412160637.GA18548@vidar.dreamhost.com>
Message-ID: <t2h3b949f091004120920w63aa59f1y45dcded2cfcac41b@mail.gmail.com>

The comment about passing installSignalHandlers=False to reactor.run()
is good to know. Are the signal handlers Twisted installs used by
Twisted for anything besides reactor.spawnProcess() or other tasks
related to sub-process management?

-J

On Mon, Apr 12, 2010 at 10:06 AM, David Ripton <dripton at ripton.net> wrote:
> On 2010.04.12 09:39:21 -0600, Jason J. W. Williams wrote:
>> Haven't had any issues yet. Twisted imports occur inside the process
>> function. The app was originally written as a purely blocking
>> multiprocessing app and rewritten to use Twisted inside the
>> sub-processes. It's passed all automated and hand tests without an
>> issue. Is there a reason importing Twisted inside sub-process should
>> not work?
>
> Here's JP's canonical answer:
>
> http://stackoverflow.com/questions/1948641/twisted-threading-with-subprocess-popen
>
> I've seen this problem in real code. ?We had a PyGTK + Twisted program
> that erroneously used subprocess in one place. ?2% of the time, it
> caused an exception. ?98% of the time, it worked fine. ?Classic race
> condition. ?Could be you have a similar bug but it never actually
> manifests on your combination of code, OS, and hardware. ?Hard to say.
>
> --
> David Ripton ? ?dripton at ripton.net
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From glyph at twistedmatrix.com  Mon Apr 12 14:23:31 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Mon, 12 Apr 2010 14:23:31 -0400
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <20100412160637.GA18548@vidar.dreamhost.com>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
	<20100412144532.GA31350@vidar.dreamhost.com>
	<u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
	<20100412160637.GA18548@vidar.dreamhost.com>
Message-ID: <27A9E5F3-E2F6-4B8F-A857-F4C036B58834@twistedmatrix.com>


On Apr 12, 2010, at 12:06 PM, David Ripton wrote:

> On 2010.04.12 09:39:21 -0600, Jason J. W. Williams wrote:
>> Haven't had any issues yet. Twisted imports occur inside the process
>> function. The app was originally written as a purely blocking
>> multiprocessing app and rewritten to use Twisted inside the
>> sub-processes. It's passed all automated and hand tests without an
>> issue. Is there a reason importing Twisted inside sub-process should
>> not work?
> 
> Here's JP's canonical answer:
> 
> http://stackoverflow.com/questions/1948641/twisted-threading-with-subprocess-popen
> 
> I've seen this problem in real code.  We had a PyGTK + Twisted program
> that erroneously used subprocess in one place.  2% of the time, it
> caused an exception.  98% of the time, it worked fine.  Classic race
> condition.  Could be you have a similar bug but it never actually
> manifests on your combination of code, OS, and hardware.  Hard to say.

I've noted this in a comment on the stackoverflow answer, but it bears repeating:

This was a long-standing bug in Twisted which has since been fixed on trunk, although it isn't present in a release: <http://twistedmatrix.com/trac/ticket/733>.  Starting with the next release (Twisted 10.1, we hope), you should be able to do this without getting this particular type of error.

Still, I wouldn't recommend using the subprocess module in a Twisted application, and multiprocessing even less.  'subprocess' uses select(), which means that if you are running processes in a server handling a large number of connections with a reactor that you've selected for that job, you will occasionally notice that '.communicate()' will blow up because your file descriptors are too big to fit into a select() call.  Its handling of EINTR and EAGAIN are less consistent than spawnProcess, you can't independently handle subprocess termination and subprocess-closing-its-output, so certain types of bugs are much tricker to track down... and I'm sure there are other issues, but I haven't had an opportunity to thoroughly audit it.

Multiprocessing has its own subtly *differently* wonky implementation of subprocess spawning (it uses os.fork(), not the subprocess module), it uses pickle to move objects between processes, and it seems to spawn threads internally, which means it depends on correct thread/process (and hey, maybe thread/pickle too) interaction.

Both of these will work reasonably well for small applications; multiprocessing is *great* if you have a simple, straightforward little multithreaded thing that you want to make multiprocess in order to take advantage of multiple cores.  But by the time you've already taken the trouble to learn how to use Twisted, IMHO spawnProcess is a lot more powerful and a lot less trouble than either of these solutions.  Even more so if you use a higher-level abstraction over it, like ampoule: <https://launchpad.net/ampoule>.



From jasonjwwilliams at gmail.com  Mon Apr 12 15:13:28 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Mon, 12 Apr 2010 13:13:28 -0600
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <27A9E5F3-E2F6-4B8F-A857-F4C036B58834@twistedmatrix.com>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
	<20100412144532.GA31350@vidar.dreamhost.com>
	<u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
	<20100412160637.GA18548@vidar.dreamhost.com>
	<27A9E5F3-E2F6-4B8F-A857-F4C036B58834@twistedmatrix.com>
Message-ID: <s2o3b949f091004121213xe72c9e08p47b85d02fee7b468@mail.gmail.com>

That all makes sense to me if you're using it to coordinate between
the processes using multiprocessing's mechanisms (which I assume most
do). We just aren't. Once the processes are spawned they do their own
thing without any knowledge of each other. There something I should be
expecting to bite me in the rear by folding Twisted into this
architecture?

-J

On Mon, Apr 12, 2010 at 12:23 PM, Glyph Lefkowitz
<glyph at twistedmatrix.com> wrote:
>
> On Apr 12, 2010, at 12:06 PM, David Ripton wrote:
>
>> On 2010.04.12 09:39:21 -0600, Jason J. W. Williams wrote:
>>> Haven't had any issues yet. Twisted imports occur inside the process
>>> function. The app was originally written as a purely blocking
>>> multiprocessing app and rewritten to use Twisted inside the
>>> sub-processes. It's passed all automated and hand tests without an
>>> issue. Is there a reason importing Twisted inside sub-process should
>>> not work?
>>
>> Here's JP's canonical answer:
>>
>> http://stackoverflow.com/questions/1948641/twisted-threading-with-subprocess-popen
>>
>> I've seen this problem in real code. ?We had a PyGTK + Twisted program
>> that erroneously used subprocess in one place. ?2% of the time, it
>> caused an exception. ?98% of the time, it worked fine. ?Classic race
>> condition. ?Could be you have a similar bug but it never actually
>> manifests on your combination of code, OS, and hardware. ?Hard to say.
>
> I've noted this in a comment on the stackoverflow answer, but it bears repeating:
>
> This was a long-standing bug in Twisted which has since been fixed on trunk, although it isn't present in a release: <http://twistedmatrix.com/trac/ticket/733>. ?Starting with the next release (Twisted 10.1, we hope), you should be able to do this without getting this particular type of error.
>
> Still, I wouldn't recommend using the subprocess module in a Twisted application, and multiprocessing even less. ?'subprocess' uses select(), which means that if you are running processes in a server handling a large number of connections with a reactor that you've selected for that job, you will occasionally notice that '.communicate()' will blow up because your file descriptors are too big to fit into a select() call. ?Its handling of EINTR and EAGAIN are less consistent than spawnProcess, you can't independently handle subprocess termination and subprocess-closing-its-output, so certain types of bugs are much tricker to track down... and I'm sure there are other issues, but I haven't had an opportunity to thoroughly audit it.
>
> Multiprocessing has its own subtly *differently* wonky implementation of subprocess spawning (it uses os.fork(), not the subprocess module), it uses pickle to move objects between processes, and it seems to spawn threads internally, which means it depends on correct thread/process (and hey, maybe thread/pickle too) interaction.
>
> Both of these will work reasonably well for small applications; multiprocessing is *great* if you have a simple, straightforward little multithreaded thing that you want to make multiprocess in order to take advantage of multiple cores. ?But by the time you've already taken the trouble to learn how to use Twisted, IMHO spawnProcess is a lot more powerful and a lot less trouble than either of these solutions. ?Even more so if you use a higher-level abstraction over it, like ampoule: <https://launchpad.net/ampoule>.
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From micahel at gmail.com  Mon Apr 12 18:47:15 2010
From: micahel at gmail.com (Michael Hudson-Doyle)
Date: Tue, 13 Apr 2010 10:47:15 +1200
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
	<20100412144532.GA31350@vidar.dreamhost.com>
	<u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
Message-ID: <w2taa0dfd861004121547hd6d4a48aief5ae2fd51deed78@mail.gmail.com>

On 13 April 2010 03:39, Jason J. W. Williams <jasonjwwilliams at gmail.com> wrote:
> Haven't had any issues yet. Twisted imports occur inside the process
> function. The app was originally written as a purely blocking
> multiprocessing app and rewritten to use Twisted inside the
> sub-processes. It's passed all automated and hand tests without an
> issue. Is there a reason importing Twisted inside sub-process should
> not work?

If you just use Twisted in the subprocesses, that sounds like it
should be fine to me.

If you want a more twisty solution, there's ampoule:
https://launchpad.net/ampoule

Cheers,
mwh


From sara.byh at gmail.com  Mon Apr 12 23:31:36 2010
From: sara.byh at gmail.com (sara bai)
Date: Tue, 13 Apr 2010 11:31:36 +0800
Subject: [Twisted-Python] twisted.internet.error.CannotListenError: Couldn't
	listen on any:/dev/log: [Errno 98] Address already in use
Message-ID: <j2l1a16f0711004122031y20f5f08foe458b547ade962ac@mail.gmail.com>

hi all :

I have stoped rsyslog service , and the following program is used to listen
on 'dev/log'

after rsyslog stoped   type this command in shell  : $ logger write this
mesg to var/log/syslog

this msg can't write to var/log/syslog  anymore


after run  # python  devlog.py ,but i got an error like this :

* "  twisted.internet.error.CannotListenError: Couldn't listen on
any:/dev/log: [Errno 98] Address already in use " *


# ps aux|grep syslog

there is no syslog process runing

my system is ubuntu9.10    there is no process named syslogd --that's the
very process i want  make it stop


$ ps aux|grep syslog
root      4656  0.0  0.0   1852   548 ?        Ss   11:24   0:00 dd bs=1
if=/proc/kmsg of=/var/run/rsyslog/kmsg
syslog    4658  0.0  0.0  33184  1244 ?        Sl   11:24   0:00 rsyslogd
-c4
1000      4663  0.0  0.0   3040   800 pts/1    R+   11:24   0:00 grep
--color=auto syslog


# service rsyslog stop

$ ps aux|grep syslog

1000      4647  0.0  0.0   3040   800 pts/1    S+   11:24   0:00 grep
--color=auto syslog


this code is supose to makesure  logger still can write log message to
/var/log/syslog  after syslogd stoped



i don't know why  *Address already in use* since the rsyslog service is not
running anymore

I'm I stoped the wrong service ? or  listening on the wrong ** *unix socket
?*



need help   ...



# devlog.py

from twisted.internet.protocol import DatagramProtocol,  Factory
from twisted.internet import reactor


class LogProtocol(DatagramProtocol):
    def  datagramReceived(self,  datagram):
        sys.stdout.write(datagram)

class SysLogFactory(Factory):
    protocol = LogProtocol

logprotocol = LogProtocol()


reactor.listenUNIXDatagram('/dev/log', logprotocol)
reactor.run()
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100413/bbf78a16/attachment-0001.htm 

From itamar at itamarst.org  Mon Apr 12 23:31:38 2010
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Mon, 12 Apr 2010 23:31:38 -0400
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <27A9E5F3-E2F6-4B8F-A857-F4C036B58834@twistedmatrix.com>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
	<20100412144532.GA31350@vidar.dreamhost.com>
	<u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
	<20100412160637.GA18548@vidar.dreamhost.com>
	<27A9E5F3-E2F6-4B8F-A857-F4C036B58834@twistedmatrix.com>
Message-ID: <1271129498.27208.232.camel@pintsize>

On Mon, 2010-04-12 at 14:23 -0400, Glyph Lefkowitz wrote:

> Still, I wouldn't recommend using the subprocess module in a Twisted
> application, and multiprocessing even less.  'subprocess' uses
> select(), which means that if you are running processes in a server
> handling a large number of connections with a reactor that you've
> selected for that job, you will occasionally notice that
> '.communicate()' will blow up because your file descriptors are too
> big to fit into a select() call.

I'm pretty sure Twisted's process.py uses select() in some cases...
possibly on import though, which would be less of an issue, I forget.



From exarkun at twistedmatrix.com  Tue Apr 13 08:21:20 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 13 Apr 2010 12:21:20 -0000
Subject: [Twisted-Python]
	twisted.internet.error.CannotListenError:	Couldn't listen on
	any:/dev/log: [Errno 98] Address already in use
In-Reply-To: <j2l1a16f0711004122031y20f5f08foe458b547ade962ac@mail.gmail.com>
References: <j2l1a16f0711004122031y20f5f08foe458b547ade962ac@mail.gmail.com>
Message-ID: <20100413122120.2779.1748671775.divmod.xquotient.406@localhost.localdomain>

On 03:31 am, sara.byh at gmail.com wrote:
>hi all :
>
>I have stoped rsyslog service , and the following program is used to 
>listen
>on 'dev/log'
>
>after rsyslog stoped   type this command in shell  : $ logger write 
>this
>mesg to var/log/syslog

If a unix socket exists, you can't listen on it.  Delete /dev/log and 
you should be able to listen on it again.

Jean-Paul


From andrew at bemusement.org  Tue Apr 13 09:55:41 2010
From: andrew at bemusement.org (Andrew Bennetts)
Date: Tue, 13 Apr 2010 23:55:41 +1000
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <1271129498.27208.232.camel@pintsize>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
	<20100412144532.GA31350@vidar.dreamhost.com>
	<u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
	<20100412160637.GA18548@vidar.dreamhost.com>
	<27A9E5F3-E2F6-4B8F-A857-F4C036B58834@twistedmatrix.com>
	<1271129498.27208.232.camel@pintsize>
Message-ID: <20100413135541.GL2681@steerpike.home.puzzling.org>

Itamar Turner-Trauring wrote:
> On Mon, 2010-04-12 at 14:23 -0400, Glyph Lefkowitz wrote:
> 
> > Still, I wouldn't recommend using the subprocess module in a Twisted
> > application, and multiprocessing even less.  'subprocess' uses
> > select(), which means that if you are running processes in a server
> > handling a large number of connections with a reactor that you've
> > selected for that job, you will occasionally notice that
> > '.communicate()' will blow up because your file descriptors are too
> > big to fit into a select() call.
> 
> I'm pretty sure Twisted's process.py uses select() in some cases...
> possibly on import though, which would be less of an issue, I forget.

Yeah, I don't think it's much of an issue.

It does do it on import, and then later as a fallback if that
import-time check found ?broken versions of linux? where ?write-only
pipe are detected as readable.?  This is apparently Linux < 2.6.11.

I suppose if someone does find it's an issue for them that it wouldn't
be too hard to fix, although perhaps they'd find it easier to simply
upgrade their OS...

-Andrew.



From sara.byh at gmail.com  Tue Apr 13 22:04:05 2010
From: sara.byh at gmail.com (sara bai)
Date: Wed, 14 Apr 2010 10:04:05 +0800
Subject: [Twisted-Python] If a unix socket exists,
	you can't listen on it. Delete /dev/log
Message-ID: <o2q1a16f0711004131904v3d4f5163x7e9fb2ac79f476b6@mail.gmail.com>

 As you said ,now it works, a new dev/log created each time after i run the
code . thank you very much .
 - Sara

>>Subject: Re: twisted.internet.error.CannotListenError: Couldn't listen on
> any:/dev/log: [Errno 98] Address already in use
>
   >>If a unix socket exists, you can't listen on it.  Delete /dev/log and
you should be able to listen on it again.
   >>Jean-Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100414/5ab7c5f1/attachment.htm 

From tuxattack14 at gmail.com  Wed Apr 14 05:23:46 2010
From: tuxattack14 at gmail.com (Tux Attack)
Date: Wed, 14 Apr 2010 14:53:46 +0530
Subject: [Twisted-Python] Upload large files on twisted server
Message-ID: <w2jbed370f31004140223v12ae440gaef9452357e3adc1@mail.gmail.com>

Hi,

I need some help in uploading large files to twisted server.
I want to upload large files on twisted server using php.But as php has
limit of 24MB, I decided to use ftp functions of php to upload large files.I
am running ftp server written in twisted.When i try to upload a file using
any ftp client then its working fine but when i use a php script for ftp
file upload then it is not working.Initially when i tried to upload file
using same php script but without passive mode , it created a file on server
but the size of file was 0 bytes.When i added a line to switch to passive
mode now it doesn't go beyond a function to switch passive mode and
connection to server gets timed out.Here is my php code



<?php
> $ftp_server='localhost';
> $ftp_user_name='chetan';
> $ftp_user_pass='chetan';
> $file = 'av.jpg';
> $remote_file = 'av.jpg';
>
> $conn_id = ftp_connect($ftp_server, 8002);
>
> $login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);
>
> ftp_pasv($conn_id, true);
>
> if (ftp_put($conn_id, $remote_file, $file, FTP_BINARY)) {
>  echo "successfully uploaded $file\n";
> } else {
>  echo "There was a problem while uploading $file\n";
> }
>
> ftp_close($conn_id);
> ?>
>
>
 Or is there any other way i can upload large files on twisted server ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100414/06ff0a50/attachment.htm 

From petshmidt at googlemail.com  Wed Apr 14 06:35:24 2010
From: petshmidt at googlemail.com (Pet)
Date: Wed, 14 Apr 2010 12:35:24 +0200
Subject: [Twisted-Python] profiling code that runs in threads
Message-ID: <s2ob460e9631004140335z27e5c21cl31e54f4f49057955@mail.gmail.com>

Hello!

I've tried to profile my twisted server with --profile=path
--profiler=cProfile --savestats options for twistd and it show results
only for functions which are in main thread and it is not really
helpful, because "dirty work" is done in threads. Is it possible to
profile functions which runs in other threads?


Thanks!

Pet


From vitaly at synapticvision.com  Wed Apr 14 09:11:17 2010
From: vitaly at synapticvision.com (vitaly at synapticvision.com)
Date: Wed, 14 Apr 2010 09:11:17 -0400
Subject: [Twisted-Python] cron-style scheduler for Twisted
Message-ID: <20100414091117.812978eo3btjpxss@216.129.205.5>

hi,
is there any cron-style scheduler in Twisted?
Could one point me to the docs where it could be found?
Thanks.




From exarkun at twistedmatrix.com  Wed Apr 14 09:25:20 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 14 Apr 2010 13:25:20 -0000
Subject: [Twisted-Python] cron-style scheduler for Twisted
In-Reply-To: <20100414091117.812978eo3btjpxss@216.129.205.5>
References: <20100414091117.812978eo3btjpxss@216.129.205.5>
Message-ID: <20100414132520.2779.1633220664.divmod.xquotient.407@localhost.localdomain>

On 01:11 pm, vitaly at synapticvision.com wrote:
>hi,
>is there any cron-style scheduler in Twisted?
>Could one point me to the docs where it could be found?
>Thanks.

There's <http://code.google.com/p/twistedcronservice/>.

Jean-Paul


From vitaly at synapticvision.com  Wed Apr 14 10:14:25 2010
From: vitaly at synapticvision.com (vitaly at synapticvision.com)
Date: Wed, 14 Apr 2010 10:14:25 -0400
Subject: [Twisted-Python] cron-style scheduler for Twisted
In-Reply-To: <20100414132520.2779.1633220664.divmod.xquotient.407@localhost.localdomain>
References: <20100414091117.812978eo3btjpxss@216.129.205.5>
	<20100414132520.2779.1633220664.divmod.xquotient.407@localhost.localdomain>
Message-ID: <20100414101425.49049g63kyuvcezw@216.129.205.5>

Thank you.

Quoting exarkun at twistedmatrix.com:

> On 01:11 pm, vitaly at synapticvision.com wrote:
>> hi,
>> is there any cron-style scheduler in Twisted?
>> Could one point me to the docs where it could be found?
>> Thanks.
>
> There's <http://code.google.com/p/twistedcronservice/>.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>





From vitaly at synapticvision.com  Wed Apr 14 10:51:40 2010
From: vitaly at synapticvision.com (vitaly at synapticvision.com)
Date: Wed, 14 Apr 2010 10:51:40 -0400
Subject: [Twisted-Python] Twisted usage
Message-ID: <20100414105140.284632tpzt8a6h6o@216.129.205.5>

hi,
is there any examples how to create (using Twisted)
client that creates several TCP requests one after another and handle in
asynch manner TCP responses for previous requests?
Thanks.



From glyph at twistedmatrix.com  Thu Apr 15 02:20:00 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 15 Apr 2010 02:20:00 -0400
Subject: [Twisted-Python] cron-style scheduler for Twisted
In-Reply-To: <20100414132520.2779.1633220664.divmod.xquotient.407@localhost.localdomain>
References: <20100414091117.812978eo3btjpxss@216.129.205.5>
	<20100414132520.2779.1633220664.divmod.xquotient.407@localhost.localdomain>
Message-ID: <177DA5E9-2404-47DA-BBA7-0AFDF3FEE1CC@twistedmatrix.com>


On Apr 14, 2010, at 9:25 AM, exarkun at twistedmatrix.com wrote:

> On 01:11 pm, vitaly at synapticvision.com wrote:
>> hi,
>> is there any cron-style scheduler in Twisted?
>> Could one point me to the docs where it could be found?
>> Thanks.
> 
> There's <http://code.google.com/p/twistedcronservice/>.

This does not appear to be listed on <http://twistedmatrix.com/trac/wiki/ProjectsUsingTwisted>.  Anyone care to add it?  Jason?

From glyph at twistedmatrix.com  Thu Apr 15 02:22:44 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 15 Apr 2010 02:22:44 -0400
Subject: [Twisted-Python] Twisted usage
In-Reply-To: <20100414105140.284632tpzt8a6h6o@216.129.205.5>
References: <20100414105140.284632tpzt8a6h6o@216.129.205.5>
Message-ID: <25EE14AA-7715-438E-A870-72D288C2E5B3@twistedmatrix.com>


On Apr 14, 2010, at 10:51 AM, vitaly at synapticvision.com wrote:

> hi,
> is there any examples how to create (using Twisted)
> client that creates several TCP requests one after another and handle in
> asynch manner TCP responses for previous requests?
> Thanks.

twisted.protocols.amp and twisted.spread.pb both implement this.

In a nutshell: in connectionMade, initialize a dictionary on your protocol object mapping request IDs to Deferreds.  When you issue a request, make a new Deferred and put it into that dictionary.  When you receive a response, pop the Deferred out of that dictionary by looking up the key present in the response, and call its .callback() method.

Is that what you were looking for?

From jasonjwwilliams at gmail.com  Thu Apr 15 02:32:05 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Thu, 15 Apr 2010 00:32:05 -0600
Subject: [Twisted-Python] cron-style scheduler for Twisted
In-Reply-To: <177DA5E9-2404-47DA-BBA7-0AFDF3FEE1CC@twistedmatrix.com>
References: <20100414091117.812978eo3btjpxss@216.129.205.5>
	<20100414132520.2779.1633220664.divmod.xquotient.407@localhost.localdomain>
	<177DA5E9-2404-47DA-BBA7-0AFDF3FEE1CC@twistedmatrix.com>
Message-ID: <i2y3b949f091004142332of249e1cbr498bc51770927e17@mail.gmail.com>

I'll put it up.

-J

On Thu, Apr 15, 2010 at 12:20 AM, Glyph Lefkowitz
<glyph at twistedmatrix.com> wrote:
>
> On Apr 14, 2010, at 9:25 AM, exarkun at twistedmatrix.com wrote:
>
>> On 01:11 pm, vitaly at synapticvision.com wrote:
>>> hi,
>>> is there any cron-style scheduler in Twisted?
>>> Could one point me to the docs where it could be found?
>>> Thanks.
>>
>> There's <http://code.google.com/p/twistedcronservice/>.
>
> This does not appear to be listed on <http://twistedmatrix.com/trac/wiki/ProjectsUsingTwisted>. ?Anyone care to add it? ?Jason?
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From jasonjwwilliams at gmail.com  Thu Apr 15 02:37:22 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Thu, 15 Apr 2010 00:37:22 -0600
Subject: [Twisted-Python] cron-style scheduler for Twisted
In-Reply-To: <177DA5E9-2404-47DA-BBA7-0AFDF3FEE1CC@twistedmatrix.com>
References: <20100414091117.812978eo3btjpxss@216.129.205.5>
	<20100414132520.2779.1633220664.divmod.xquotient.407@localhost.localdomain>
	<177DA5E9-2404-47DA-BBA7-0AFDF3FEE1CC@twistedmatrix.com>
Message-ID: <o2n3b949f091004142337h982d2ebene79564bf511b81ee@mail.gmail.com>

Posted.  http://twistedmatrix.com/trac/wiki/ProjectsUsingTwisted

On Thu, Apr 15, 2010 at 12:20 AM, Glyph Lefkowitz
<glyph at twistedmatrix.com> wrote:
>
> On Apr 14, 2010, at 9:25 AM, exarkun at twistedmatrix.com wrote:
>
>> On 01:11 pm, vitaly at synapticvision.com wrote:
>>> hi,
>>> is there any cron-style scheduler in Twisted?
>>> Could one point me to the docs where it could be found?
>>> Thanks.
>>
>> There's <http://code.google.com/p/twistedcronservice/>.
>
> This does not appear to be listed on <http://twistedmatrix.com/trac/wiki/ProjectsUsingTwisted>. ?Anyone care to add it? ?Jason?
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From glyph at twistedmatrix.com  Thu Apr 15 02:56:02 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 15 Apr 2010 02:56:02 -0400
Subject: [Twisted-Python] cron-style scheduler for Twisted
In-Reply-To: <o2n3b949f091004142337h982d2ebene79564bf511b81ee@mail.gmail.com>
References: <20100414091117.812978eo3btjpxss@216.129.205.5>
	<20100414132520.2779.1633220664.divmod.xquotient.407@localhost.localdomain>
	<177DA5E9-2404-47DA-BBA7-0AFDF3FEE1CC@twistedmatrix.com>
	<o2n3b949f091004142337h982d2ebene79564bf511b81ee@mail.gmail.com>
Message-ID: <2072B897-FCA9-4EAD-B9A1-8B3693B8270E@twistedmatrix.com>


On Apr 15, 2010, at 2:37 AM, Jason J. W. Williams wrote:

> On Thu, Apr 15, 2010 at 12:20 AM, Glyph Lefkowitz
> <glyph at twistedmatrix.com> wrote:
>> 
>> This does not appear to be listed on <http://twistedmatrix.com/trac/wiki/ProjectsUsingTwisted>.  Anyone care to add it?  Jason?
> 
> Posted.  http://twistedmatrix.com/trac/wiki/ProjectsUsingTwisted

Excellent.  Now we just need to bug somebody to change the name to txcronservice :).



From kevin.horn at gmail.com  Thu Apr 15 03:07:44 2010
From: kevin.horn at gmail.com (Kevin Horn)
Date: Thu, 15 Apr 2010 02:07:44 -0500
Subject: [Twisted-Python] cron-style scheduler for Twisted
In-Reply-To: <20100414091117.812978eo3btjpxss@216.129.205.5>
References: <20100414091117.812978eo3btjpxss@216.129.205.5>
Message-ID: <t2v562bcc11004150007ra63570bcm7860dcf58021e1b0@mail.gmail.com>

On Wed, Apr 14, 2010 at 8:11 AM, <vitaly at synapticvision.com> wrote:

> hi,
> is there any cron-style scheduler in Twisted?
> Could one point me to the docs where it could be found?
> Thanks.
>
>
>
I wrote something like this once, I called it txScheduler.  I guess I really
should clean it up and release it.

It's not been heavily tested (and I never got around to writing the unit
tests I had intended to) but it worked for the original use case I had.

If anyone's interested, drop me a line directly and I'll send it to you (MIT
license).

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100415/41ed05bd/attachment.htm 

From jasonjwwilliams at gmail.com  Thu Apr 15 08:59:19 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Thu, 15 Apr 2010 06:59:19 -0600
Subject: [Twisted-Python] cron-style scheduler for Twisted
In-Reply-To: <2072B897-FCA9-4EAD-B9A1-8B3693B8270E@twistedmatrix.com>
References: <20100414091117.812978eo3btjpxss@216.129.205.5>
	<20100414132520.2779.1633220664.divmod.xquotient.407@localhost.localdomain>
	<177DA5E9-2404-47DA-BBA7-0AFDF3FEE1CC@twistedmatrix.com>
	<o2n3b949f091004142337h982d2ebene79564bf511b81ee@mail.gmail.com>
	<2072B897-FCA9-4EAD-B9A1-8B3693B8270E@twistedmatrix.com>
Message-ID: <u2i3b949f091004150559md6d6588re8cc82b39cf13a91@mail.gmail.com>

That would most excellent. :)

On Thu, Apr 15, 2010 at 12:56 AM, Glyph Lefkowitz
<glyph at twistedmatrix.com> wrote:
>
> On Apr 15, 2010, at 2:37 AM, Jason J. W. Williams wrote:
>
>> On Thu, Apr 15, 2010 at 12:20 AM, Glyph Lefkowitz
>> <glyph at twistedmatrix.com> wrote:
>>>
>>> This does not appear to be listed on <http://twistedmatrix.com/trac/wiki/ProjectsUsingTwisted>. ?Anyone care to add it? ?Jason?
>>
>> Posted. ?http://twistedmatrix.com/trac/wiki/ProjectsUsingTwisted
>
> Excellent. ?Now we just need to bug somebody to change the name to txcronservice :).
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From vitaly at synapticvision.com  Thu Apr 15 10:21:07 2010
From: vitaly at synapticvision.com (vitaly at synapticvision.com)
Date: Thu, 15 Apr 2010 10:21:07 -0400
Subject: [Twisted-Python] Twisted usage
In-Reply-To: <25EE14AA-7715-438E-A870-72D288C2E5B3@twistedmatrix.com>
References: <20100414105140.284632tpzt8a6h6o@216.129.205.5>
	<25EE14AA-7715-438E-A870-72D288C2E5B3@twistedmatrix.com>
Message-ID: <20100415102107.413435es3eown3eo@216.129.205.5>


Yes, thank you.

Quoting "Glyph Lefkowitz" <glyph at twistedmatrix.com>:

>
> On Apr 14, 2010, at 10:51 AM, vitaly at synapticvision.com wrote:
>
>> hi,
>> is there any examples how to create (using Twisted)
>> client that creates several TCP requests one after another and handle in
>> asynch manner TCP responses for previous requests?
>> Thanks.
>
> twisted.protocols.amp and twisted.spread.pb both implement this.
>
> In a nutshell: in connectionMade, initialize a dictionary on your  
> protocol object mapping request IDs to Deferreds.  When you issue a  
> request, make a new Deferred and put it into that dictionary.  When  
> you receive a response, pop the Deferred out of that dictionary by  
> looking up the key present in the response, and call its .callback()  
> method.
>
> Is that what you were looking for?
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>




From tuxattack14 at gmail.com  Fri Apr 16 00:24:32 2010
From: tuxattack14 at gmail.com (Tux Attack)
Date: Fri, 16 Apr 2010 09:54:32 +0530
Subject: [Twisted-Python] HTTP POST method in php on twisted server
Message-ID: <u2qbed370f31004152124s78b41e02v94d37126012778f@mail.gmail.com>

Hi,
I am trying to use php script on twisted server using twcgi.I want to make
use of http POST method in that.What I want to do is, suppose I am having
one html page say index.html and from that page I want to redirect to other
php page and pass data to that php page using POST method.But I am not able
to access any POST data in php script.When I debugged through
twcgi.CGIScript.render method, I didn't find any reference to POST data.So
how can i make use of POST data in php ?

Thank You.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100416/9a3063a4/attachment.htm 

From lvh at laurensvh.be  Fri Apr 16 07:58:26 2010
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Fri, 16 Apr 2010 13:58:26 +0200
Subject: [Twisted-Python] Anyone working on a Twisted txRiak?
In-Reply-To: <10496611.511269977368521.JavaMail.rgacote@ip-210.Corp.AppropriateSolutions.com>
References: <10496611.511269977368521.JavaMail.rgacote@ip-210.Corp.AppropriateSolutions.com>
Message-ID: <l2zcedc0c091004160458ub6f5397fh955697e6722fba2e@mail.gmail.com>

Hey Ray,


I'm pretty interested in txRiak. I couldn't find it at
https://launchpad.net/tx. Is the repo up somewhere yet?

Thanks
Laurens
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100416/9271f030/attachment.htm 

From rgacote at appropriatesolutions.com  Fri Apr 16 09:47:17 2010
From: rgacote at appropriatesolutions.com (Ray Cote)
Date: Fri, 16 Apr 2010 09:47:17 -0400 (EDT)
Subject: [Twisted-Python] Anyone working on a Twisted txRiak?
In-Reply-To: <15992138.5541271426241810.JavaMail.rgacote@ip-210.Corp.AppropriateSolutions.com>
Message-ID: <9867948.5561271426244766.JavaMail.rgacote@ip-210.Corp.AppropriateSolutions.com>

Hi Laurens: 

I hope to have a repository up next week. 

We're just finishing up initial implementation. 

The Basho folk helped us address a last failing unit test yesterday so our new txRiak now runs the same set of unit tests as the Basho riak.py file. 

I'll announce on this list when it is available. 
Thanks for your interest. 
(looking forward to other eyes reviewing the code) 

--Ray 

----- Original Message ----- 
From: "Laurens Van Houtven" <lvh at laurensvh.be> 
To: "Ray Cote" <rgacote at appropriatesolutions.com>, "Twisted general discussion" <twisted-python at twistedmatrix.com> 
Sent: Friday, April 16, 2010 7:58:26 AM GMT -05:00 US/Canada Eastern 
Subject: Re: [Twisted-Python] Anyone working on a Twisted txRiak? 

Hey Ray, 




I'm pretty interested in txRiak. I couldn't find it at https://launchpad.net/tx . Is the repo up somewhere yet? 


Thanks 
Laurens 

-- 
Ray Cote, President 
Appropriate Solutions, Inc. 
We Build Software 
603.924.6079 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100416/569a43c4/attachment.htm 

From ivan at ludios.org  Sat Apr 17 21:44:29 2010
From: ivan at ludios.org (Ivan Kozik)
Date: Sat, 17 Apr 2010 18:44:29 -0700
Subject: [Twisted-Python] mercurial branch
In-Reply-To: <4BBF2620.2000901@libero.it>
References: <4BBF2620.2000901@libero.it>
Message-ID: <p2mbadc170e1004171844jf3f5739ezf9166dfbae96a4bb@mail.gmail.com>

On Fri, Apr 9, 2010 at 6:05 AM, Manlio Perillo <manlio_perillo at libero.it> wrote:
> Does twisted have a Mercurial (git is also fine) mirror?
>
> Unofficial mirror is ok; I just would like to avoid download entire svn
> history with hgsvn.

I keep an unofficial git-svn cloned copy here:
http://ludios.net/mirror/

The tarball includes all of the SVN metadata. To update it, you can:
git svn fetch && git checkout trunk

During a `git svn fetch` or another operation, you may see this error:
error: cannot lock ref 'refs/remotes/ctrl+\\-2371+2123-2'

This is due to a bug somewhere in svn or git-svn; to fix it, you can
recursively grep the .git/ directory and manually delete all references
to the branch. Everything seems to work fine after doing this.

In case anyone is curious, git-svn takes about 26 hours to mirror it,
because it restarts at r1 for several branches. I am told this is due
to the use of SVN partial branches.


Ivan


From exarkun at twistedmatrix.com  Sun Apr 18 00:05:42 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 18 Apr 2010 04:05:42 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1271563542.88.803565690@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100418/5e195e9c/attachment.htm 

From thomas at apestaart.org  Sun Apr 18 07:11:58 2010
From: thomas at apestaart.org (Thomas Vander Stichele)
Date: Sun, 18 Apr 2010 13:11:58 +0200
Subject: [Twisted-Python] gtk2reactor: scheduling work in the immediate
 future without throttling gtk
Message-ID: <1271589118.3529.18.camel@level.fluendo.lan>

Hi.  My use case is pretty simple:

 - my UI has a throbber that gets activated while I'm querying a CouchDB
server and populating the UI with results, which can be many.
 - when iterating over the results, I want the UI to keep throbbing,
which means the gtk mainloop needs to be regularly scheduled by
gtk2reactor
 - if I iterate over the results and create a deferred chain and fire
it, the whole update of the UI still gets executed synchronously, not
giving the gtk mainloop time to throb.
 - if I do it with callLater(0, ...), again these calls get executed
ASAP and throttle the main loop

Every other workaround I can think of is ugly (using random.random() as
the argument to callLater to space calls, using a counter to space out
calls, doing callLater from the next call chain, ...)

In reality, all I want is to schedule a call to be processed with lower
priority than the main loop; ie, have the reactor run GTK's mainloop
then process my calls.  This way, I could create a chain of say 10 calls
at a time, and give the mainloop time to run between each block.

Is something like this possible at all ? How do the other reactors
handle this ? Why is priority given to the twisted DelayedCalls ?

Thomas

-- 
in the twist of separation
you excelled at being free
--
GStreamer - bringing multimedia to your desktop
http://gstreamer.freedesktop.org/




From itamar at itamarst.org  Sun Apr 18 09:19:38 2010
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Sun, 18 Apr 2010 13:19:38 +0000
Subject: [Twisted-Python] gtk2reactor: scheduling work in the immediate
 future without throttling gtk
In-Reply-To: <1271589118.3529.18.camel@level.fluendo.lan>
References: <1271589118.3529.18.camel@level.fluendo.lan>
Message-ID: <1271596778.27208.401.camel@pintsize>

On Sun, 2010-04-18 at 13:11 +0200, Thomas Vander Stichele wrote:
>  - if I do it with callLater(0, ...), again these calls get executed
> ASAP and throttle the main loop

If this is actually affecting your UI this may mean the batch size you
are processing in each call is too big. E.g. if it takes 50ms per call,
you're not going to get more than 20FPS if you run one call per
iteration. 

Something like twisted.internet.task.coiterate might help, but you still
need to make sure each chunk (or rather, size of chunk*num parallel
processes) is sufficiently small.



From exarkun at twistedmatrix.com  Sun Apr 18 11:19:06 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 18 Apr 2010 15:19:06 -0000
Subject: [Twisted-Python] mercurial branch
In-Reply-To: <p2mbadc170e1004171844jf3f5739ezf9166dfbae96a4bb@mail.gmail.com>
References: <4BBF2620.2000901@libero.it>
	<p2mbadc170e1004171844jf3f5739ezf9166dfbae96a4bb@mail.gmail.com>
Message-ID: <20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>

On 01:44 am, ivan at ludios.org wrote:
>On Fri, Apr 9, 2010 at 6:05 AM, Manlio Perillo 
><manlio_perillo at libero.it> wrote:
>>Does twisted have a Mercurial (git is also fine) mirror?
>>
>>Unofficial mirror is ok; I just would like to avoid download entire 
>>svn
>>history with hgsvn.
>
>I keep an unofficial git-svn cloned copy here:
>http://ludios.net/mirror/
>
>In case anyone is curious, git-svn takes about 26 hours to mirror it,
>because it restarts at r1 for several branches. I am told this is due
>to the use of SVN partial branches.

It'd be great if everyone who wants git access could share a single 
mirror (perhaps this one), to avoid the additional load on our svn 
server that creating a new mirror creates.

The same applies to other vcs mirrors, too, of course.

Jean-Paul


From exarkun at twistedmatrix.com  Sun Apr 18 11:23:52 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 18 Apr 2010 15:23:52 -0000
Subject: [Twisted-Python] HTTP POST method in php on twisted server
In-Reply-To: <u2qbed370f31004152124s78b41e02v94d37126012778f@mail.gmail.com>
References: <u2qbed370f31004152124s78b41e02v94d37126012778f@mail.gmail.com>
Message-ID: <20100418152352.2682.548240445.divmod.xquotient.11@localhost.localdomain>

On 16 Apr, 04:24 am, tuxattack14 at gmail.com wrote:
>Hi,
>I am trying to use php script on twisted server using twcgi.I want to 
>make
>use of http POST method in that.What I want to do is, suppose I am 
>having
>one html page say index.html and from that page I want to redirect to 
>other
>php page and pass data to that php page using POST method.But I am not 
>able
>to access any POST data in php script.When I debugged through
>twcgi.CGIScript.render method, I didn't find any reference to POST 
>data.So
>how can i make use of POST data in php ?

I don't really understand the question.  You have a lot of stuff going 
on here:

  * HTTP POSTs
  * Redirects
  * CGIScript
  * PHP

Can you try to describe the scenario you're trying to get working step 
by step, carefully separating each of these different pieces?

You may also want to post follow-ups to the twisted-web mailing list 
instead.

Jean-Paul


From ssteinerx at gmail.com  Sun Apr 18 11:42:11 2010
From: ssteinerx at gmail.com (ssteinerX@gmail.com)
Date: Sun, 18 Apr 2010 11:42:11 -0400
Subject: [Twisted-Python] mercurial branch
In-Reply-To: <20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>
References: <4BBF2620.2000901@libero.it>
	<p2mbadc170e1004171844jf3f5739ezf9166dfbae96a4bb@mail.gmail.com>
	<20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>
Message-ID: <CDDE3F4C-DF08-4E6D-A693-8718E4363220@gmail.com>


On Apr 18, 2010, at 11:19 AM, exarkun at twistedmatrix.com wrote:

> On 01:44 am, ivan at ludios.org wrote:
>> On Fri, Apr 9, 2010 at 6:05 AM, Manlio Perillo 
>> <manlio_perillo at libero.it> wrote:
>>> Does twisted have a Mercurial (git is also fine) mirror?
>>> 
>>> Unofficial mirror is ok; I just would like to avoid download entire 
>>> svn
>>> history with hgsvn.
>> 
>> I keep an unofficial git-svn cloned copy here:
>> http://ludios.net/mirror/
>> 
>> In case anyone is curious, git-svn takes about 26 hours to mirror it,
>> because it restarts at r1 for several branches. I am told this is due
>> to the use of SVN partial branches.
> 
> It'd be great if everyone who wants git access could share a single 
> mirror (perhaps this one), to avoid the additional load on our svn 
> server that creating a new mirror creates.
> 
> The same applies to other vcs mirrors, too, of course.

Of course, if you made a "sanctioned" mirror in GitHub & BitBucket & LaunchPad owned by the actual project, then all these others could just fade away under the weight of an "official mirror."

That's not to say you couldn't save a ton of time by forking one of the existing ones, but making "One Repo (of each type) to Rule Them All" would be way helpful..even if it doesn't read as well as the original "One Ring..."

S



From jasonjwwilliams at gmail.com  Sun Apr 18 12:24:46 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Sun, 18 Apr 2010 10:24:46 -0600
Subject: [Twisted-Python] mercurial branch
In-Reply-To: <20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>
References: <4BBF2620.2000901@libero.it>
	<p2mbadc170e1004171844jf3f5739ezf9166dfbae96a4bb@mail.gmail.com>
	<20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>
Message-ID: <1F47BD30-4828-4737-9D7A-E4C4F83E8129@gmail.com>

I use Powdahound mirror at Gihub. I believe it updates daily. Perhaps,  
we could list it on the website to steer Git folks to it.

-J

Sent via iPhone

Is your e-mail Premiere?

On Apr 18, 2010, at 9:19, exarkun at twistedmatrix.com wrote:

> On 01:44 am, ivan at ludios.org wrote:
>> On Fri, Apr 9, 2010 at 6:05 AM, Manlio Perillo
>> <manlio_perillo at libero.it> wrote:
>>> Does twisted have a Mercurial (git is also fine) mirror?
>>>
>>> Unofficial mirror is ok; I just would like to avoid download entire
>>> svn
>>> history with hgsvn.
>>
>> I keep an unofficial git-svn cloned copy here:
>> http://ludios.net/mirror/
>>
>> In case anyone is curious, git-svn takes about 26 hours to mirror it,
>> because it restarts at r1 for several branches. I am told this is due
>> to the use of SVN partial branches.
>
> It'd be great if everyone who wants git access could share a single
> mirror (perhaps this one), to avoid the additional load on our svn
> server that creating a new mirror creates.
>
> The same applies to other vcs mirrors, too, of course.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From jasonjwwilliams at gmail.com  Sun Apr 18 12:31:31 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Sun, 18 Apr 2010 10:31:31 -0600
Subject: [Twisted-Python] mercurial branch
In-Reply-To: <CDDE3F4C-DF08-4E6D-A693-8718E4363220@gmail.com>
References: <4BBF2620.2000901@libero.it>
	<p2mbadc170e1004171844jf3f5739ezf9166dfbae96a4bb@mail.gmail.com>
	<20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>
	<CDDE3F4C-DF08-4E6D-A693-8718E4363220@gmail.com>
Message-ID: <0B8B2109-2BBC-4DB9-A259-F838CE874815@gmail.com>

Granted we're just talking about DVCS mirrors here...but someday it  
would be really great to be able to send pull requests instead of  
patches for code enhancements. ;)

-J

Sent via iPhone

Is your e-mail Premiere?

On Apr 18, 2010, at 9:42, "ssteinerX at gmail.com" <ssteinerx at gmail.com>  
wrote:

>
> On Apr 18, 2010, at 11:19 AM, exarkun at twistedmatrix.com wrote:
>
>> On 01:44 am, ivan at ludios.org wrote:
>>> On Fri, Apr 9, 2010 at 6:05 AM, Manlio Perillo
>>> <manlio_perillo at libero.it> wrote:
>>>> Does twisted have a Mercurial (git is also fine) mirror?
>>>>
>>>> Unofficial mirror is ok; I just would like to avoid download entire
>>>> svn
>>>> history with hgsvn.
>>>
>>> I keep an unofficial git-svn cloned copy here:
>>> http://ludios.net/mirror/
>>>
>>> In case anyone is curious, git-svn takes about 26 hours to mirror  
>>> it,
>>> because it restarts at r1 for several branches. I am told this is  
>>> due
>>> to the use of SVN partial branches.
>>
>> It'd be great if everyone who wants git access could share a single
>> mirror (perhaps this one), to avoid the additional load on our svn
>> server that creating a new mirror creates.
>>
>> The same applies to other vcs mirrors, too, of course.
>
> Of course, if you made a "sanctioned" mirror in GitHub & BitBucket &  
> LaunchPad owned by the actual project, then all these others could  
> just fade away under the weight of an "official mirror."
>
> That's not to say you couldn't save a ton of time by forking one of  
> the existing ones, but making "One Repo (of each type) to Rule Them  
> All" would be way helpful..even if it doesn't read as well as the  
> original "One Ring..."
>
> S
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From tuxattack14 at gmail.com  Mon Apr 19 01:29:11 2010
From: tuxattack14 at gmail.com (Tux Attack)
Date: Mon, 19 Apr 2010 10:59:11 +0530
Subject: [Twisted-Python] HTTP POST method in php on twisted server
In-Reply-To: <20100418152352.2682.548240445.divmod.xquotient.11@localhost.localdomain>
References: <u2qbed370f31004152124s78b41e02v94d37126012778f@mail.gmail.com>
	<20100418152352.2682.548240445.divmod.xquotient.11@localhost.localdomain>
Message-ID: <v2sbed370f31004182229ne6f22117rb9a3be896f5ecbec@mail.gmail.com>

On Sun, Apr 18, 2010 at 8:53 PM, <exarkun at twistedmatrix.com> wrote:

> On 16 Apr, 04:24 am, tuxattack14 at gmail.com wrote:
> >Hi,
> >I am trying to use php script on twisted server using twcgi.I want to
> >make
> >use of http POST method in that.What I want to do is, suppose I am
> >having
> >one html page say index.html and from that page I want to redirect to
> >other
> >php page and pass data to that php page using POST method.But I am not
> >able
> >to access any POST data in php script.When I debugged through
> >twcgi.CGIScript.render method, I didn't find any reference to POST
> >data.So
> >how can i make use of POST data in php ?
>
> I don't really understand the question.  You have a lot of stuff going
> on here:
>
>  * HTTP POSTs
>  * Redirects
>  * CGIScript
>  * PHP
>
> Can you try to describe the scenario you're trying to get working step
> by step, carefully separating each of these different pieces?
>
> You may also want to post follow-ups to the twisted-web mailing list
> instead.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

My aim is to build a server that will support file uploading on server and
uploading is to be done using web browser.So i selected php script for file
upload.
I made a simple html form.

> <html>
> <body>
> <div align="center">
> <br />
> <form enctype="multipart/form-data" action="upload_file.php" method="POST">
>  Please choose a file: <input name="upload_file" type="file" /><br />
>  <input type="submit" value="Upload" />
>  </form> </body>
> </html>
>


Now this file is sent using POST method and then it will redirect to a php
script named upload_file.php.
So to make use of php i used twcgi.PHPScript. When i checked i am not
getting POST data in php code.
Execution calls twcgi.CGIScript.render method internally.When i checked in
this render method, data sent using POST is available in request.args
variable but not sent to php CLI.
Whereas in case of GET method the url is parsed and data sent using GET
method is put in qargs variable and then sent to php CLI.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100419/b4a668a5/attachment.htm 

From manlio_perillo at libero.it  Mon Apr 19 13:23:02 2010
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Mon, 19 Apr 2010 19:23:02 +0200
Subject: [Twisted-Python] mercurial branch
In-Reply-To: <20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>
References: <4BBF2620.2000901@libero.it>	<p2mbadc170e1004171844jf3f5739ezf9166dfbae96a4bb@mail.gmail.com>
	<20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>
Message-ID: <4BCC9176.1000905@libero.it>

exarkun at twistedmatrix.com ha scritto:
> [...]
> It'd be great if everyone who wants git access could share a single 
> mirror (perhaps this one), to avoid the additional load on our svn 
> server that creating a new mirror creates.
> 

Since Twisted has an official(?) Bazaar mirror on Launchpad (that I did
not notice before), maybe it is more easy to mirror this repository,
when converting to a different VCS.


Regards  Manlio


From jathan at gmail.com  Mon Apr 19 19:26:56 2010
From: jathan at gmail.com (jathan.)
Date: Mon, 19 Apr 2010 16:26:56 -0700
Subject: [Twisted-Python] Utilizing Twisted for transport w/ SUDS
Message-ID: <q2r4e0e47491004191626p18bc0b4bmc539fb0e90917279@mail.gmail.com>

Hello-

I have a project that is based on Twisted used to
communicate with network devices and I am adding support for a new
vendor (Citrix NetScaler) whose API is SOAP.  Unfortunately the
support for SOAP in Twisted still relies on SOAPpy, which is badly out
of date. In fact as of this email (I just checked), twisted.web.soap
itself hasn't even been updated in 21 months!

I would like to ask if anyone has any experience they would be willing
to share with utilizing Twisted's superb asynchronous transport
functionality with SUDS.  It seems like plugging in a custom Twisted
transport would be a natural fit in SUDS' Client.options.transport, I'm just
having
a hard time wrapping my head around it.

I did come up with a way to call the SOAP method with SUDS
asynchronously by utilizing twisted.internet.threads.deferToThread(),
but this feels like a hack to me.

Here is an example of what I've done, just to give you an idea:

   # netscaler is a module I wrote using suds to interface with NetScaler
SOAP
   # Source: http://bitbucket.org/jathanism/netscaler-api/src
   import netscaler
   import os, sys
   from twisted.internet import reactor, defer, threads

   # netscaler.API is the class that sets up the suds.client.Client object
   host = 'netscaler.local'
   username = password = 'nsroot'
   wsdl_url = 'file://' + os.path.join(os.getcwd(), 'NSUserAdmin.wsdl')
   api = netscaler.API(host, username=username, password=password,
wsdl_url=wsdl_url)

   results = []
   errors = []

   def handleResult(result):
       print '\tgot result: %s' % (result,)
       results.append(result)

   def handleError(err):
       sys.stderr.write('\tgot failure: %s' % (err,))
       errors.append(err)

   # this converts the api.login() call to a Twisted thread.
   # api.login() is equivalent to:
   # api.service.login(username=self.username, password=self.password)
   deferred = threads.deferToThread(api.login)
   deferred.addCallbacks(handleResult, handleError)

   reactor.run()

This works as expected and defers return of the api.login() call until
it is complete, instead of blocking.  But as I said, it doesn't feel
right.

Thanks in advance for any help, guidance, feedback, criticism,
insults, or total solutions.

jathan.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100419/81ce6ffd/attachment.htm 

From alexandre at quessy.net  Tue Apr 20 02:48:22 2010
From: alexandre at quessy.net (Alexandre Quessy)
Date: Tue, 20 Apr 2010 02:48:22 -0400
Subject: [Twisted-Python] Utilizing Twisted for transport w/ SUDS
In-Reply-To: <q2r4e0e47491004191626p18bc0b4bmc539fb0e90917279@mail.gmail.com>
References: <q2r4e0e47491004191626p18bc0b4bmc539fb0e90917279@mail.gmail.com>
Message-ID: <u2o72236ba91004192348k2a66a9c5vf785ddbbe8caf@mail.gmail.com>

Hi everyone,
Two years ago, I've dropped SUDS to generate and parse the XML by
hand, using xml.dom.minidom.
I don't remember why exactly.
I hope this comment is useful for you. (?!)

:)

Alex

2010/4/19 jathan. <jathan at gmail.com>:
> Hello-
> I have a project that is based on Twisted used to
> communicate with network devices and I am adding support for a new
> vendor (Citrix NetScaler) whose API is SOAP. ?Unfortunately the
> support for SOAP in Twisted still relies on SOAPpy, which is badly out
> of date. In fact as of this email (I just checked), twisted.web.soap
> itself hasn't even been updated in 21 months!
> I would like to ask if anyone has any experience they would be willing
> to share with utilizing Twisted's superb asynchronous transport
> functionality with SUDS. ?It seems like plugging in a custom Twisted
> transport would be a natural fit in SUDS' Client.options.transport, I'm just
> having
> a hard time wrapping my head around it.
> I did come up with a way to call the SOAP method with SUDS
> asynchronously by utilizing twisted.internet.threads.deferToThread(),
> but this feels like a hack to me.
> Here is an example of what I've done, just to give you an idea:
> ?? # netscaler is a module I wrote using suds to interface with NetScaler
> SOAP
> ?? # Source: http://bitbucket.org/jathanism/netscaler-api/src
> ?? import netscaler
> ?? import os, sys
> ?? from twisted.internet import reactor, defer, threads
> ?? # netscaler.API is the class that sets up the suds.client.Client object
> ?? host = 'netscaler.local'
> ?? username = password = 'nsroot'
> ?? wsdl_url = 'file://' + os.path.join(os.getcwd(), 'NSUserAdmin.wsdl')
> ?? api = netscaler.API(host, username=username, password=password,
> wsdl_url=wsdl_url)
> ?? results = []
> ?? errors = []
> ?? def handleResult(result):
> ?? ? ? print '\tgot result: %s' % (result,)
> ?? ? ? results.append(result)
> ?? def handleError(err):
> ?? ? ? sys.stderr.write('\tgot failure: %s' % (err,))
> ?? ? ? errors.append(err)
> ?? # this converts the api.login() call to a Twisted thread.
> ?? # api.login() is equivalent to:
> ?? # api.service.login(username=self.username, password=self.password)
> ?? deferred = threads.deferToThread(api.login)
> ?? deferred.addCallbacks(handleResult, handleError)
> ?? reactor.run()
> This works as expected and defers return of the api.login() call until
> it is complete, instead of blocking. ?But as I said, it doesn't feel
> right.
> Thanks in advance for any help, guidance, feedback, criticism,
> insults, or total solutions.
> jathan.
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



-- 
Alexandre Quessy
http://alexandre.quessy.net/


From landreville at deadtreepages.com  Tue Apr 20 09:34:44 2010
From: landreville at deadtreepages.com (Landreville)
Date: Tue, 20 Apr 2010 09:34:44 -0400
Subject: [Twisted-Python] Utilizing Twisted for transport w/ SUDS
In-Reply-To: <q2r4e0e47491004191626p18bc0b4bmc539fb0e90917279@mail.gmail.com>
References: <q2r4e0e47491004191626p18bc0b4bmc539fb0e90917279@mail.gmail.com>
Message-ID: <k2m9d748c781004200634u14eda62fq5c5dc6d2561858e@mail.gmail.com>

On Mon, Apr 19, 2010 at 7:26 PM, jathan. <jathan at gmail.com> wrote:
> Hello-
> I have a project that is based on Twisted used to
> communicate with network devices and I am adding support for a new
> vendor (Citrix NetScaler) whose API is SOAP. ?Unfortunately the
> support for SOAP in Twisted still relies on SOAPpy, which is badly out
> of date. In fact as of this email (I just checked), twisted.web.soap
> itself hasn't even been updated in 21 months!
> I would like to ask if anyone has any experience they would be willing
> to share with utilizing Twisted's superb asynchronous transport
> functionality with SUDS. ?It seems like plugging in a custom Twisted
> transport would be a natural fit in SUDS' Client.options.transport, I'm just
> having
> a hard time wrapping my head around it.
> I did come up with a way to call the SOAP method with SUDS
> asynchronously by utilizing twisted.internet.threads.deferToThread(),
> but this feels like a hack to me.

I did a similar thing. I wrapped the SUDS client calls into
deferToThread by subclassing suds.Client and adding a method
callMethod which returns a deferred. Here is the code I'm using:
""" Wrapper for suds to create deferred instances. """
from suds.client import Client as SudsClient
from twisted.internet.threads import deferToThread

class Client(SudsClient):

    # method for returning a deferred for the RPC
    def callRemote(self, method, *args, **kwargs):
        def call(m, *a, **kw):
            result = self.service.__getattr__(m)(*a, **kw)
            return result
        d = deferToThread(call, method, *args, **kwargs)
        return d


From exarkun at twistedmatrix.com  Tue Apr 20 09:36:33 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 20 Apr 2010 13:36:33 -0000
Subject: [Twisted-Python] HTTP POST method in php on twisted server
In-Reply-To: <v2sbed370f31004182229ne6f22117rb9a3be896f5ecbec@mail.gmail.com>
References: <u2qbed370f31004152124s78b41e02v94d37126012778f@mail.gmail.com>
	<20100418152352.2682.548240445.divmod.xquotient.11@localhost.localdomain>
	<v2sbed370f31004182229ne6f22117rb9a3be896f5ecbec@mail.gmail.com>
Message-ID: <20100420133633.2843.1836194803.divmod.xquotient.1@localhost.localdomain>

On 19 Apr, 05:29 am, tuxattack14 at gmail.com wrote:
>On Sun, Apr 18, 2010 at 8:53 PM, <exarkun at twistedmatrix.com> wrote:
>>On 16 Apr, 04:24 am, tuxattack14 at gmail.com wrote:
>> >Hi,
>> >I am trying to use php script on twisted server using twcgi.I want to
>> >make
>> >use of http POST method in that.What I want to do is, suppose I am
>> >having
>> >one html page say index.html and from that page I want to redirect to
>> >other
>> >php page and pass data to that php page using POST method.But I am 
>>not
>> >able
>> >to access any POST data in php script.When I debugged through
>> >twcgi.CGIScript.render method, I didn't find any reference to POST
>> >data.So
>> >how can i make use of POST data in php ?
>>
>>I don't really understand the question.  You have a lot of stuff going
>>on here:
>>
>>  * HTTP POSTs
>>  * Redirects
>>  * CGIScript
>>  * PHP
>>
>>Can you try to describe the scenario you're trying to get working step
>>by step, carefully separating each of these different pieces?
>>
>>You may also want to post follow-ups to the twisted-web mailing list
>>instead.
>>
>>Jean-Paul
>>
>>_______________________________________________
>>Twisted-Python mailing list
>>Twisted-Python at twistedmatrix.com
>>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>My aim is to build a server that will support file uploading on server 
>and
>uploading is to be done using web browser.So i selected php script for 
>file
>upload.
>I made a simple html form.
>><html>
>><body>
>><div align="center">
>><br />
>><form enctype="multipart/form-data" action="upload_file.php" 
>>method="POST">
>>  Please choose a file: <input name="upload_file" type="file" /><br />
>>  <input type="submit" value="Upload" />
>>  </form> </body>
>></html>
>
>
>Now this file is sent using POST method and then it will redirect to a 
>php
>script named upload_file.php.
>So to make use of php i used twcgi.PHPScript. When i checked i am not
>getting POST data in php code.
>Execution calls twcgi.CGIScript.render method internally.When i checked 
>in
>this render method, data sent using POST is available in request.args
>variable but not sent to php CLI.
>Whereas in case of GET method the url is parsed and data sent using GET
>method is put in qargs variable and then sent to php CLI.

Can you post a short example (<http://sscce.org/>) that demonstrates 
this?

Jean-Paul


From glyph at twistedmatrix.com  Tue Apr 20 13:17:36 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Tue, 20 Apr 2010 10:17:36 -0700
Subject: [Twisted-Python] mercurial branch
In-Reply-To: <4BCC9176.1000905@libero.it>
References: <4BBF2620.2000901@libero.it>	<p2mbadc170e1004171844jf3f5739ezf9166dfbae96a4bb@mail.gmail.com>
	<20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>
	<4BCC9176.1000905@libero.it>
Message-ID: <839AA5EF-75E4-4614-A93E-93FEF1866AB5@twistedmatrix.com>


On Apr 19, 2010, at 10:23 AM, Manlio Perillo wrote:

> Since Twisted has an official(?) Bazaar mirror on Launchpad (that I did
> not notice before), maybe it is more easy to mirror this repository,
> when converting to a different VCS.

+1.

If possible, I'd very much prefer that we have just the one DVCS mirror instead of one for darcs, one for mercurial, one for git and one for bazaar.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100420/e7fd5b08/attachment.htm 

From jasonjwwilliams at gmail.com  Tue Apr 20 13:42:39 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Tue, 20 Apr 2010 11:42:39 -0600
Subject: [Twisted-Python] mercurial branch
In-Reply-To: <839AA5EF-75E4-4614-A93E-93FEF1866AB5@twistedmatrix.com>
References: <4BBF2620.2000901@libero.it>
	<p2mbadc170e1004171844jf3f5739ezf9166dfbae96a4bb@mail.gmail.com>
	<20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>
	<4BCC9176.1000905@libero.it>
	<839AA5EF-75E4-4614-A93E-93FEF1866AB5@twistedmatrix.com>
Message-ID: <p2n3b949f091004201042g587753cye4af2767c2516ca7@mail.gmail.com>

Just a personal opinion, but I'd rather see an official DVCS in
Mercurial or Git. I'm not a real Mercurial user myself but from a
market share point-of-view, there's more folks using those which would
make for a lower barrier to entry for new people getting involved.
Twisted frequently bucks popularity trends, but I'm not sure this in
one case where it would be beneficial.

-J

On Tue, Apr 20, 2010 at 11:17 AM, Glyph Lefkowitz
<glyph at twistedmatrix.com> wrote:
>
> On Apr 19, 2010, at 10:23 AM, Manlio Perillo wrote:
>
> Since Twisted has an official(?) Bazaar mirror on Launchpad (that I did
> not notice before), maybe it is more easy to mirror this repository,
> when converting to a different VCS.
>
> +1.
> If possible, I'd very much prefer that we have just the one DVCS mirror
> instead of one for darcs, one for mercurial, one for git and one for bazaar.
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


From rlotun at gmail.com  Tue Apr 20 15:27:29 2010
From: rlotun at gmail.com (Reza Lotun)
Date: Tue, 20 Apr 2010 12:27:29 -0700
Subject: [Twisted-Python] mercurial branch
In-Reply-To: <839AA5EF-75E4-4614-A93E-93FEF1866AB5@twistedmatrix.com>
References: <4BBF2620.2000901@libero.it>
	<p2mbadc170e1004171844jf3f5739ezf9166dfbae96a4bb@mail.gmail.com>
	<20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>
	<4BCC9176.1000905@libero.it>
	<839AA5EF-75E4-4614-A93E-93FEF1866AB5@twistedmatrix.com>
Message-ID: <m2p95bb10691004201227i5b6cb3fnb1de374863b4f45a@mail.gmail.com>

Hi All,

> If possible, I'd very much prefer that we have just the one DVCS mirror
> instead of one for darcs, one for mercurial, one for git and one for bazaar.

I'm not a core developer but I thought I'd chime in on this one. In
most cases discussions about version control are really not important
- it's much better just to mandate *some* system, that's hopefully the
best tool for the job, all things considered. I also recognise that
bazaar and launchpad are important parts of the Twisted ecosystem, and
I'm not suggesting Twisted should move away from them at all.

However, when it comes to encouraging code contributions, it's getting
to be more apparent that GitHub is becoming the widely accepted medium
for this. I've been a mercurial man for a while, and would have hoped
bitbucket became a bigger player in this area, but for various reasons
it seems GitHub have "won" (whatever that means). In my daily work -
in the wider field I work in, and in various projects my work and
personal code depend on - more and more GitHub is becoming the primary
home for development of these projects.

Being "forced" into GitHub, I eventually (finally) *got* it - code
contribution is easy, and fun. The "fork, code, issue pull request"
model is fantastic. It's something that can be duplicated elsewhere,
but a process that has been popularized by GitHub. It also has reached
critical mass, and has entered into the minds of most developers I
know as "the" place to put open source and private code on.

For the sake of the encouragement of code contributions, I'd suggest
Twisted establish some sort of official GitHub presence. Twisted has a
great development process, and I realize the Twisted trac site should
be the center of this process. What I also suggest is that someone
(perhaps me, since I'm doing similar things at work), use GitHub's
great API to automate integration with Twisted's trac and Development
Process system. That way, besides setting up a periodic mirror system
off the core svn repo, all development actions could be automated and
unified.

I'm fairly confident that such a system could be implemented - again,
I'd enjoy helping out on this if the core devs think this would be
useful.

Cheers,
Reza

-- 
Reza Lotun
mobile: +44 (0)7521 310 763
email:  rlotun at gmail.com
work:   reza at tweetdeck.com
twitter: @rlotun


From jasonjwwilliams at gmail.com  Tue Apr 20 19:25:17 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Tue, 20 Apr 2010 17:25:17 -0600
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these on
	the frontpage of TM.com?
Message-ID: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>

Hi Guys,

Just been going through the twisted.web series JP put together
(http://jcalderone.livejournal.com/tag/sixty%20seconds)...these are
terrific. Turn the bottom one into serving a "Hello World" Resource
and you've got a much simpler Hello World than the Tornado site (not
to start a war on Tornado...their URL dispatch approach is pretty
nice).

Is there is a reason these aren't linked to on the frontpage of
twistedmatrix.com...preferably with the short hello world above it?
They're much more accessible than the Twisted Web tutorials under
docs.

-J


From exarkun at twistedmatrix.com  Tue Apr 20 20:38:24 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 21 Apr 2010 00:38:24 -0000
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on	the frontpage of TM.com?
In-Reply-To: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
Message-ID: <20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>

On 20 Apr, 11:25 pm, jasonjwwilliams at gmail.com wrote:
>Hi Guys,
>
>Just been going through the twisted.web series JP put together
>(http://jcalderone.livejournal.com/tag/sixty%20seconds)...these are
>terrific. Turn the bottom one into serving a "Hello World" Resource
>and you've got a much simpler Hello World than the Tornado site (not
>to start a war on Tornado...their URL dispatch approach is pretty
>nice).
>
>Is there is a reason these aren't linked to on the frontpage of
>twistedmatrix.com...preferably with the short hello world above it?
>They're much more accessible than the Twisted Web tutorials under
>docs.

They're linked from the Twisted Web documentation page.  They're 
probably not linked from the front page because no one has taken the 
time to redo the website design in a way that allows direct links to 
this kind of specific documentation.

Jean-Paul


From jasonjwwilliams at gmail.com  Tue Apr 20 21:23:32 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Tue, 20 Apr 2010 19:23:32 -0600
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
Message-ID: <7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>

I seem to be missing the link on the page: http://twistedmatrix.com/trac/wiki/Documentation

Sent via iPhone

Is your e-mail Premiere?

On Apr 20, 2010, at 18:38, exarkun at twistedmatrix.com wrote:

> On 20 Apr, 11:25 pm, jasonjwwilliams at gmail.com wrote:
>> Hi Guys,
>>
>> Just been going through the twisted.web series JP put together
>> (http://jcalderone.livejournal.com/tag/sixty%20seconds)...these are
>> terrific. Turn the bottom one into serving a "Hello World" Resource
>> and you've got a much simpler Hello World than the Tornado site (not
>> to start a war on Tornado...their URL dispatch approach is pretty
>> nice).
>>
>> Is there is a reason these aren't linked to on the frontpage of
>> twistedmatrix.com...preferably with the short hello world above it?
>> They're much more accessible than the Twisted Web tutorials under
>> docs.
>
> They're linked from the Twisted Web documentation page.  They're
> probably not linked from the front page because no one has taken the
> time to redo the website design in a way that allows direct links to
> this kind of specific documentation.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From jessica.mckellar at gmail.com  Tue Apr 20 21:30:56 2010
From: jessica.mckellar at gmail.com (Jessica McKellar)
Date: Tue, 20 Apr 2010 21:30:56 -0400
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
Message-ID: <i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>

Hi Jason,

It's under the web howto link on that page:

http://twistedmatrix.com/trac/wiki/Documentation
===>
http://twistedmatrix.com/documents/current/web/howto/
===>
http://twistedmatrix.com/documents/current/web/howto/web-in-60/index.html

-Jessica

On Tue, Apr 20, 2010 at 9:23 PM, Jason J. W. Williams <
jasonjwwilliams at gmail.com> wrote:

> I seem to be missing the link on the page:
> http://twistedmatrix.com/trac/wiki/Documentation
>
> Sent via iPhone
>
> Is your e-mail Premiere?
>
> On Apr 20, 2010, at 18:38, exarkun at twistedmatrix.com wrote:
>
> > On 20 Apr, 11:25 pm, jasonjwwilliams at gmail.com wrote:
> >> Hi Guys,
> >>
> >> Just been going through the twisted.web series JP put together
> >> (http://jcalderone.livejournal.com/tag/sixty%20seconds)...these<http://jcalderone.livejournal.com/tag/sixty%20seconds%29...these>are
> >> terrific. Turn the bottom one into serving a "Hello World" Resource
> >> and you've got a much simpler Hello World than the Tornado site (not
> >> to start a war on Tornado...their URL dispatch approach is pretty
> >> nice).
> >>
> >> Is there is a reason these aren't linked to on the frontpage of
> >> twistedmatrix.com...preferably with the short hello world above it?
> >> They're much more accessible than the Twisted Web tutorials under
> >> docs.
> >
> > They're linked from the Twisted Web documentation page.  They're
> > probably not linked from the front page because no one has taken the
> > time to redo the website design in a way that allows direct links to
> > this kind of specific documentation.
> >
> > Jean-Paul
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100420/de4cc462/attachment.htm 

From jasonjwwilliams at gmail.com  Tue Apr 20 22:06:15 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Tue, 20 Apr 2010 20:06:15 -0600
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
Message-ID: <r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>

That was kind of my point... ;) It's pretty buried.  It's not under
docs directly and it's not under the "read this first!" about web
stuff. And yes I'm volunteering to reorg.

-J

On Tue, Apr 20, 2010 at 7:30 PM, Jessica McKellar
<jessica.mckellar at gmail.com> wrote:
> Hi Jason,
>
> It's under the web howto link on that page:
>
> http://twistedmatrix.com/trac/wiki/Documentation
> ===>
> http://twistedmatrix.com/documents/current/web/howto/
> ===>
> http://twistedmatrix.com/documents/current/web/howto/web-in-60/index.html
>
> -Jessica
>
> On Tue, Apr 20, 2010 at 9:23 PM, Jason J. W. Williams
> <jasonjwwilliams at gmail.com> wrote:
>>
>> I seem to be missing the link on the page:
>> http://twistedmatrix.com/trac/wiki/Documentation
>>
>> Sent via iPhone
>>
>> Is your e-mail Premiere?
>>
>> On Apr 20, 2010, at 18:38, exarkun at twistedmatrix.com wrote:
>>
>> > On 20 Apr, 11:25 pm, jasonjwwilliams at gmail.com wrote:
>> >> Hi Guys,
>> >>
>> >> Just been going through the twisted.web series JP put together
>> >> (http://jcalderone.livejournal.com/tag/sixty%20seconds)...these are
>> >> terrific. Turn the bottom one into serving a "Hello World" Resource
>> >> and you've got a much simpler Hello World than the Tornado site (not
>> >> to start a war on Tornado...their URL dispatch approach is pretty
>> >> nice).
>> >>
>> >> Is there is a reason these aren't linked to on the frontpage of
>> >> twistedmatrix.com...preferably with the short hello world above it?
>> >> They're much more accessible than the Twisted Web tutorials under
>> >> docs.
>> >
>> > They're linked from the Twisted Web documentation page. ?They're
>> > probably not linked from the front page because no one has taken the
>> > time to redo the website design in a way that allows direct links to
>> > this kind of specific documentation.
>> >
>> > Jean-Paul
>> >
>> > _______________________________________________
>> > Twisted-Python mailing list
>> > Twisted-Python at twistedmatrix.com
>> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


From don at delphexonline.com  Wed Apr 21 07:38:09 2010
From: don at delphexonline.com (Don Schoeman)
Date: Wed, 21 Apr 2010 13:38:09 +0200
Subject: [Twisted-Python] twistd and init.d
Message-ID: <4BCEE3A1.10601@delphexonline.com>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100421/9e29fa7b/attachment.htm 

From maarten at treewalker.org  Wed Apr 21 08:07:26 2010
From: maarten at treewalker.org (Maarten ter Huurne)
Date: Wed, 21 Apr 2010 14:07:26 +0200
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BCEE3A1.10601@delphexonline.com>
References: <4BCEE3A1.10601@delphexonline.com>
Message-ID: <201004211407.26441.maarten@treewalker.org>

On Wednesday 21 April 2010, Don Schoeman wrote:

>  This works fine when running /etc/init.d/ghserver start and
> /etc/init.d/ghserver stop. The script also run when I boot since the
> logger actually logs the "GHServer: Starting" text to the
> /var/log/messages file. However, my service actually does not start.

There is no PATH variable set when the script is called at system startup. 
So you'll have to use the full path to twisted.

Bye,
		Maarten


From screwtape at froup.com  Wed Apr 21 08:16:56 2010
From: screwtape at froup.com (Tim Allen)
Date: Wed, 21 Apr 2010 22:16:56 +1000
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BCEE3A1.10601@delphexonline.com>
References: <4BCEE3A1.10601@delphexonline.com>
Message-ID: <20100421121656.GF15611@boombah.thristian.org>

On Wed, Apr 21, 2010 at 01:38:09PM +0200, Don Schoeman wrote:
>    This works fine when running /etc/init.d/ghserver start and
>    /etc/init.d/ghserver stop. The script also run when I boot since the
>    logger actually logs the "GHServer: Starting" text to the
>    /var/log/messages file. However, my service actually does not start. There
>    is no pid to be found anywhere, there are no error logs anywhere, just
>    nothing. I might be doing something wrong here but is there someone who's
>    gone through this process and can provide some samples how they did it?

I haven't written an init-script for twistd myself, I just use the one
auto-generated by tap2rpm. You can compare your script to the template
tap2rpm uses and see if that gives you any clues:

    http://twistedmatrix.com/trac/browser/trunk/twisted/scripts/tap2rpm.py#L17    
It surprises me that you say you can tell that the script runs at boot
because you can see it in /var/log/messages - although most Linux
distros hide the boot-script messages by default, they usually provide
a way to display them for debugging purposes such as these (different
distributions use different actions to trigger boot messages; if you
can't find instructions for your distribution online, you might try
hitting Escape a few times at different parts of the boot sequence).

Finally, in my limited experience of diagnosing scripts that work from
an interactive shell but not at boot time, you might want to look for
code that uses environment variables. $EMPLOYER once had some scripts
that got some particular setting from an environment variable that was
only set by interactive shells - so if you ssh'd to the machine and ran
the code, it'd be fine, but it crashed when run at bootup.

CentOS (and perhaps other Linux distributions) has a tool called
/sbin/service. If you run "/sbin/service ghserver start" rather than
"/etc/init.d/ghserver start", /sbin/service will start the service in
a clean, boot-like environment and you might get more debugging clues
that way.


From burslem2001 at yahoo.com  Wed Apr 21 08:27:29 2010
From: burslem2001 at yahoo.com (gary clark)
Date: Wed, 21 Apr 2010 05:27:29 -0700 (PDT)
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <20100421121656.GF15611@boombah.thristian.org>
Message-ID: <674187.80600.qm@web112503.mail.gq1.yahoo.com>

I have written an init.d script thats starts and stops a twistd. You need to create a .tac file and create a daemon. A wee bit more tricky but you can start twistd fine.

Thanks,
Garyc

--- On Wed, 4/21/10, Tim Allen <screwtape at froup.com> wrote:

> From: Tim Allen <screwtape at froup.com>
> Subject: Re: [Twisted-Python] twistd and init.d
> To: "Twisted general discussion" <twisted-python at twistedmatrix.com>
> Date: Wednesday, April 21, 2010, 7:16 AM
> On Wed, Apr 21, 2010 at 01:38:09PM
> +0200, Don Schoeman wrote:
> >? ? This works fine when running
> /etc/init.d/ghserver start and
> >? ? /etc/init.d/ghserver stop. The script
> also run when I boot since the
> >? ? logger actually logs the "GHServer:
> Starting" text to the
> >? ? /var/log/messages file. However, my
> service actually does not start. There
> >? ? is no pid to be found anywhere, there are
> no error logs anywhere, just
> >? ? nothing. I might be doing something wrong
> here but is there someone who's
> >? ? gone through this process and can provide
> some samples how they did it?
> 
> I haven't written an init-script for twistd myself, I just
> use the one
> auto-generated by tap2rpm. You can compare your script to
> the template
> tap2rpm uses and see if that gives you any clues:
> 
> ? ? http://twistedmatrix.com/trac/browser/trunk/twisted/scripts/tap2rpm.py#L17?
> ? 
> It surprises me that you say you can tell that the script
> runs at boot
> because you can see it in /var/log/messages - although most
> Linux
> distros hide the boot-script messages by default, they
> usually provide
> a way to display them for debugging purposes such as these
> (different
> distributions use different actions to trigger boot
> messages; if you
> can't find instructions for your distribution online, you
> might try
> hitting Escape a few times at different parts of the boot
> sequence).
> 
> Finally, in my limited experience of diagnosing scripts
> that work from
> an interactive shell but not at boot time, you might want
> to look for
> code that uses environment variables. $EMPLOYER once had
> some scripts
> that got some particular setting from an environment
> variable that was
> only set by interactive shells - so if you ssh'd to the
> machine and ran
> the code, it'd be fine, but it crashed when run at bootup.
> 
> CentOS (and perhaps other Linux distributions) has a tool
> called
> /sbin/service. If you run "/sbin/service ghserver start"
> rather than
> "/etc/init.d/ghserver start", /sbin/service will start the
> service in
> a clean, boot-like environment and you might get more
> debugging clues
> that way.
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 



From don at delphexonline.com  Wed Apr 21 08:48:10 2010
From: don at delphexonline.com (Don Schoeman)
Date: Wed, 21 Apr 2010 14:48:10 +0200
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BCEE3A1.10601@delphexonline.com>
References: <4BCEE3A1.10601@delphexonline.com>
Message-ID: <4BCEF40A.1060405@delphexonline.com>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100421/eb897649/attachment.htm 

From don at delphexonline.com  Wed Apr 21 08:54:39 2010
From: don at delphexonline.com (Don Schoeman)
Date: Wed, 21 Apr 2010 14:54:39 +0200
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BCEF40A.1060405@delphexonline.com>
References: <4BCEE3A1.10601@delphexonline.com>
	<4BCEF40A.1060405@delphexonline.com>
Message-ID: <4BCEF58F.2000606@delphexonline.com>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100421/64d6fd92/attachment.htm 

From burslem2001 at yahoo.com  Wed Apr 21 09:15:54 2010
From: burslem2001 at yahoo.com (gary clark)
Date: Wed, 21 Apr 2010 06:15:54 -0700 (PDT)
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BCEF58F.2000606@delphexonline.com>
Message-ID: <924638.49082.qm@web112508.mail.gq1.yahoo.com>


My understanding is the twistd will have a default log twistd.log. 
?
Thanks,
Garyc

--- On Wed, 4/21/10, Don Schoeman <don at delphexonline.com> wrote:


From: Don Schoeman <don at delphexonline.com>
Subject: Re: [Twisted-Python] twistd and init.d
To: "Twisted general discussion" <twisted-python at twistedmatrix.com>
Date: Wednesday, April 21, 2010, 7:54 AM


Sorry, I mean't to say I will use the full path to twistd (i.e. /usr/bin/twistd) and see if that works.

Don Schoeman wrote: 
Thanks for the tips guys,

Maartin, I have a feeling that you may be correct. I'm going to see if I can't set the python path within the script.

Tim, the only reason I can see anything in? /var/logs/messages is because I use the "logger" tool to log those messages directly from the bash shell script. See the script below.

Kind Regards,
Don


Don Schoeman wrote: 
Hi guys,

My application is being executed using twistd as per documentation. All is working fine but I need to have the service start automatically at boot time.

So as a test I've created a script in /etc/init.d/ which looks like this:

#! /bin/sh
### BEGIN INIT INFO
# Provides:????????? ghserver
# Required-Start:??? $local_fs $remote_fs $network $syslog
# Required-Stop:???? $local_fs $remote_fs $network $syslog
# Default-Start:???? 2 3 4 5
# Default-Stop:????? 0 1 6
# Short-Description: Start/stop GHServer server
### END INIT INFO

logger "GHServer: Start script executed"
GH_SERVER_PATH="/home/myname/Python/ghserver"
export PYTHONPATH="$GH_SERVER_PATH:$PYTHONPATH"

case "$1" in
? start)
??? logger "GHServer: Starting"
??? echo "Starting GHServer..."
??? twistd -y "$GH_SERVER_PATH/ghserverapp.py" -l "$GH_SERVER_PATH/ghserver.log" --pidfile "$GH_SERVER_PATH/twistd.pid"
??? ;;
? stop)
??? logger "GHServer: Stopping"
??? echo "Stopping GHServer..."
??? kill `cat $GH_SERVER_PATH/twistd.pid`
??? ;;
? *)
??? logger "GHServer: Invalid usage"
??? echo "Usage: /etc/init.d/ghserver {start|stop}"
??? exit 1
??? ;;
esac

exit 0


This works fine when running /etc/init.d/ghserver start and /etc/init.d/ghserver stop. The script also run when I boot since the logger actually logs the "GHServer: Starting" text to the /var/log/messages file. However, my service actually does not start. There is no pid to be found anywhere, there are no error logs anywhere, just nothing. I might be doing something wrong here but is there someone who's gone through this process and can provide some samples how they did it? Any help will be greatly appreciated.

Kind Regards,
Don



_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
  
_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
  
-----Inline Attachment Follows-----


_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100421/4ebbfca5/attachment-0001.htm 

From don at delphexonline.com  Wed Apr 21 09:37:10 2010
From: don at delphexonline.com (Don Schoeman)
Date: Wed, 21 Apr 2010 15:37:10 +0200
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <924638.49082.qm@web112508.mail.gq1.yahoo.com>
References: <924638.49082.qm@web112508.mail.gq1.yahoo.com>
Message-ID: <4BCEFF86.30802@delphexonline.com>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100421/3b94d819/attachment.htm 

From itamar at itamarst.org  Wed Apr 21 10:12:10 2010
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Wed, 21 Apr 2010 14:12:10 +0000
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BCEFF86.30802@delphexonline.com>
References: <924638.49082.qm@web112508.mail.gq1.yahoo.com>
	<4BCEFF86.30802@delphexonline.com>
Message-ID: <1271859131.27208.419.camel@pintsize>

On Wed, 2010-04-21 at 15:37 +0200, Don Schoeman wrote:
> I still get the same results (or non-results) unfortunately. I have
> tried the following options:
> 
> 1) Tried running twistd by giving the fully qualified
> path: /usr/bin/twistd.
> 2) Tried running the .tac file together with the -g twistd switch
> instead.
> 3) Tried the --syslog switch to see if I can find anything in the
> logs.
> 4) Tried running it without supplying custom log and pid files.

What does running under trace tell you?



From don at delphexonline.com  Wed Apr 21 10:51:12 2010
From: don at delphexonline.com (Don Schoeman)
Date: Wed, 21 Apr 2010 16:51:12 +0200
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <1271859131.27208.419.camel@pintsize>
References: <924638.49082.qm@web112508.mail.gq1.yahoo.com>	<4BCEFF86.30802@delphexonline.com>
	<1271859131.27208.419.camel@pintsize>
Message-ID: <4BCF10E0.6040405@delphexonline.com>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100421/acfdd815/attachment.htm 

From exarkun at twistedmatrix.com  Wed Apr 21 11:24:52 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 21 Apr 2010 15:24:52 -0000
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BCF10E0.6040405@delphexonline.com>
References: <924638.49082.qm@web112508.mail.gq1.yahoo.com>
	<4BCEFF86.30802@delphexonline.com>
	<1271859131.27208.419.camel@pintsize>
	<4BCF10E0.6040405@delphexonline.com>
Message-ID: <20100421152452.2548.1718335940.divmod.xquotient.77@localhost.localdomain>

I think Itamar was suggesting that you use "/bin/bash -x" as your init 
script interpreter and examine that output.

It may also make sense to find someone who knows about writing init 
scripts for your platform and ask them some questions.  It seems like 
this is an issue with the environment around twistd, not with twistd 
itself.

Jean-Paul


From jasonjwwilliams at gmail.com  Wed Apr 21 11:37:53 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Wed, 21 Apr 2010 09:37:53 -0600
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BCEE3A1.10601@delphexonline.com>
References: <4BCEE3A1.10601@delphexonline.com>
Message-ID: <j2q3b949f091004210837q6bcf731ar63f1471348e2adf9@mail.gmail.com>

Hi Don,

Here's the init.d we use for Twisted on Ubuntu. Sets the full path to Twistd:

http://gist.github.com/373978

-J

On Wed, Apr 21, 2010 at 5:38 AM, Don Schoeman <don at delphexonline.com> wrote:
> Hi guys,
>
> My application is being executed using twistd as per documentation. All is
> working fine but I need to have the service start automatically at boot
> time.
>
> So as a test I've created a script in /etc/init.d/ which looks like this:
>
> #! /bin/sh
> ### BEGIN INIT INFO
> # Provides:????????? ghserver
> # Required-Start:??? $local_fs $remote_fs $network $syslog
> # Required-Stop:???? $local_fs $remote_fs $network $syslog
> # Default-Start:???? 2 3 4 5
> # Default-Stop:????? 0 1 6
> # Short-Description: Start/stop GHServer server
> ### END INIT INFO
>
> logger "GHServer: Start script executed"
> GH_SERVER_PATH="/home/myname/Python/ghserver"
> export PYTHONPATH="$GH_SERVER_PATH:$PYTHONPATH"
>
> case "$1" in
> ? start)
> ??? logger "GHServer: Starting"
> ??? echo "Starting GHServer..."
> ??? twistd -y "$GH_SERVER_PATH/ghserverapp.py" -l
> "$GH_SERVER_PATH/ghserver.log" --pidfile "$GH_SERVER_PATH/twistd.pid"
> ??? ;;
> ? stop)
> ??? logger "GHServer: Stopping"
> ??? echo "Stopping GHServer..."
> ??? kill `cat $GH_SERVER_PATH/twistd.pid`
> ??? ;;
> ? *)
> ??? logger "GHServer: Invalid usage"
> ??? echo "Usage: /etc/init.d/ghserver {start|stop}"
> ??? exit 1
> ??? ;;
> esac
>
> exit 0
>
>
> This works fine when running /etc/init.d/ghserver start and
> /etc/init.d/ghserver stop. The script also run when I boot since the logger
> actually logs the "GHServer: Starting" text to the /var/log/messages file.
> However, my service actually does not start. There is no pid to be found
> anywhere, there are no error logs anywhere, just nothing. I might be doing
> something wrong here but is there someone who's gone through this process
> and can provide some samples how they did it? Any help will be greatly
> appreciated.
>
> Kind Regards,
> Don
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


From itamar at itamarst.org  Wed Apr 21 11:44:54 2010
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Wed, 21 Apr 2010 11:44:54 -0400 (EDT)
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <20100421152452.2548.1718335940.divmod.xquotient.77@localhost.localdom
	ain>
References: <924638.49082.qm@web112508.mail.gq1.yahoo.com>
	<4BCEFF86.30802@delphexonline.com>
	<1271859131.27208.419.camel@pintsize>
	<4BCF10E0.6040405@delphexonline.com>
	<20100421152452.2548.1718335940.divmod.xquotient.77@localhost.localdomain>
Message-ID: <36115.63.107.91.99.1271864694.squirrel@webmail.zoteca.com>

> I think Itamar was suggesting that you use "/bin/bash -x" as your init
> script interpreter and examine that output.

Actually, I typoed, and meant /usr/bin/strace, but that's a good idea too :)



From don at delphexonline.com  Wed Apr 21 11:45:42 2010
From: don at delphexonline.com (Don Schoeman)
Date: Wed, 21 Apr 2010 17:45:42 +0200
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <20100421152452.2548.1718335940.divmod.xquotient.77@localhost.localdomain>
References: <924638.49082.qm@web112508.mail.gq1.yahoo.com>	<4BCEFF86.30802@delphexonline.com>	<1271859131.27208.419.camel@pintsize>	<4BCF10E0.6040405@delphexonline.com>
	<20100421152452.2548.1718335940.divmod.xquotient.77@localhost.localdomain>
Message-ID: <4BCF1DA6.9010502@delphexonline.com>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100421/5ea92e1f/attachment.htm 

From don at delphexonline.com  Wed Apr 21 11:46:07 2010
From: don at delphexonline.com (Don Schoeman)
Date: Wed, 21 Apr 2010 17:46:07 +0200
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <j2q3b949f091004210837q6bcf731ar63f1471348e2adf9@mail.gmail.com>
References: <4BCEE3A1.10601@delphexonline.com>
	<j2q3b949f091004210837q6bcf731ar63f1471348e2adf9@mail.gmail.com>
Message-ID: <4BCF1DBF.3040803@delphexonline.com>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100421/25b245d0/attachment-0001.htm 

From don at delphexonline.com  Wed Apr 21 12:16:05 2010
From: don at delphexonline.com (Don Schoeman)
Date: Wed, 21 Apr 2010 18:16:05 +0200
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <j2q3b949f091004210837q6bcf731ar63f1471348e2adf9@mail.gmail.com>
References: <4BCEE3A1.10601@delphexonline.com>
	<j2q3b949f091004210837q6bcf731ar63f1471348e2adf9@mail.gmail.com>
Message-ID: <4BCF24C5.5010204@delphexonline.com>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100421/e1eaced6/attachment.htm 

From burslem2001 at yahoo.com  Wed Apr 21 17:47:29 2010
From: burslem2001 at yahoo.com (gary clark)
Date: Wed, 21 Apr 2010 14:47:29 -0700 (PDT)
Subject: [Twisted-Python] python and twisted and openssl
In-Reply-To: <4BCF1DA6.9010502@delphexonline.com>
Message-ID: <806606.35480.qm@web112511.mail.gq1.yahoo.com>

Hey Guys,

I apologise in advance but this is is not the correct platform.

Essentially I'm porting my server to a new VPS and the platform is enough to cause
me headaches to resurrect my twisted server.

I'm using open-ssl however I'm seeing mismatches:

[root at 1003100U6H1Z pyOpenSSL-0.9]# python 
Python 2.5.2 (r252:60911, Sep 30 2008, 15:41:38) 
[GCC 4.3.2 20080917 (Red Hat 4.3.2-4)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import OpenSSL
Traceback (most recent call last):
? File "<stdin>", line 1, in <module>
? File "/usr/local/lib/python2.5/site-packages/OpenSSL/__init__.py", line 11, in <module>
??? import rand, crypto, SSL, tsafe
ImportError: /usr/local/lib/python2.5/site-packages/OpenSSL/crypto.so: undefined symbol: PyUnicodeUCS2_Decode

What is this PyUnicodeUCS2_Decode? Has anybody else seen this blighter?

Thanks,
Garyc


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100421/3288ebe6/attachment.htm 

From glyph at twistedmatrix.com  Wed Apr 21 20:13:11 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 21 Apr 2010 17:13:11 -0700
Subject: [Twisted-Python] python and twisted and openssl
In-Reply-To: <806606.35480.qm@web112511.mail.gq1.yahoo.com>
References: <806606.35480.qm@web112511.mail.gq1.yahoo.com>
Message-ID: <BA38ED11-E482-4DDD-9810-24AB35C7AC66@twistedmatrix.com>


On Apr 21, 2010, at 2:47 PM, gary clark wrote:

> undefined symbol: PyUnicodeUCS2_Decode

> What is this PyUnicodeUCS2_Decode? Has anybody else seen this blighter?

When you build Python, you either build its Unicode support with support for UCS2 (2-byte, 16-bit code points) or UCS4 (4-byte, 32-bit code points).  Extension modules must be built in the same configuration as the Python interpreter in order to be loaded and dynamically linked correctly, since UCS4 python is missing the UCS2 symbols and vice versa.

It looks like you have a UCS4 python and a UCS2 PyOpenSSL.  You need to re-build PyOpenSSL against the Python installation that you are using, or at least one built with the same options.

This is a pretty common build problem; if you search for mailing list threads about it on python-list or python-dev you should find plenty.

Good luck,

-glyph

From glyph at twistedmatrix.com  Wed Apr 21 20:15:07 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 21 Apr 2010 17:15:07 -0700
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
Message-ID: <6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>


On Apr 20, 2010, at 7:06 PM, Jason J. W. Williams wrote:

> And yes I'm volunteering to reorg.

Wow, you really are a glutton for punishment, aren't you? :)

Go ahead and create an alternate front-page wiki page, and let the list know when it's ready so we can pile on and critique.

I'm sure it wouldn't be too hard to do better than what's there, though.

Looking forward to it,

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100421/fbc2a354/attachment.htm 

From burslem2001 at yahoo.com  Wed Apr 21 20:22:31 2010
From: burslem2001 at yahoo.com (gary clark)
Date: Wed, 21 Apr 2010 17:22:31 -0700 (PDT)
Subject: [Twisted-Python] python and twisted and openssl
In-Reply-To: <BA38ED11-E482-4DDD-9810-24AB35C7AC66@twistedmatrix.com>
Message-ID: <118251.20559.qm@web112502.mail.gq1.yahoo.com>


Much appreciated Glyph. I thought it would be a common problem.
Just didnt know which group to ask.

--- On Wed, 4/21/10, Glyph Lefkowitz <glyph at twistedmatrix.com> wrote:

> From: Glyph Lefkowitz <glyph at twistedmatrix.com>
> Subject: Re: [Twisted-Python] python and twisted and openssl
> To: "Twisted general discussion" <twisted-python at twistedmatrix.com>
> Date: Wednesday, April 21, 2010, 7:13 PM
> 
> On Apr 21, 2010, at 2:47 PM, gary clark wrote:
> 
> > undefined symbol: PyUnicodeUCS2_Decode
> 
> > What is this PyUnicodeUCS2_Decode? Has anybody else
> seen this blighter?
> 
> When you build Python, you either build its Unicode support
> with support for UCS2 (2-byte, 16-bit code points) or UCS4
> (4-byte, 32-bit code points).? Extension modules must
> be built in the same configuration as the Python interpreter
> in order to be loaded and dynamically linked correctly,
> since UCS4 python is missing the UCS2 symbols and vice
> versa.
> 
> It looks like you have a UCS4 python and a UCS2
> PyOpenSSL.? You need to re-build PyOpenSSL against the
> Python installation that you are using, or at least one
> built with the same options.
> 
> This is a pretty common build problem; if you search for
> mailing list threads about it on python-list or python-dev
> you should find plenty.
> 
> Good luck,
> 
> -glyph
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 



From jasonjwwilliams at gmail.com  Wed Apr 21 20:53:04 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Wed, 21 Apr 2010 18:53:04 -0600
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
Message-ID: <o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>

I guess I am. :)

Honestly, we've used Twisted in my org for quite some time and until I
was forced to use it my view of it was colored by my infrequent
beatings by it and the derisive comments of the primary maintainer at
that time.

With the 4 hours I spent actually learning the concepts, Twisted is no
longer a black box...it makes sense. That and I've
optimized/re-factored a bunch of code to work with that theory instead
of against it. Huge benefits.

I'd say the biggest barrier to entry is the documentation. And let's
face it...there's no reason Twisted shouldn't be used by more folks.
It's great...but learning it feels like a frat hazing. That's largely
because reading the docs feels like learning from that comp sci prof
who was smart...but wasn't smart enough to explain the concepts at
your level.

Let's take Tornado for a second...right now I'm building a web API for
our services and I'm in platform selection mode. My experience with
Twisted.web's URL dispatching system made me want to cry. Tornado was
a breeze to use. But here's the problem:

1.) There's no good async libraries for Tornado...so if I want to
integrate with Redis or MySQL or anything, I've got to accept that I'm
going to block when it's not necessary and live with that.
2.) Tornado's performance from the the benchmarks I've read is only
between 15% and 30% better than twisted.web.

2 is not enough to justify 1, because let's face it (and yeah I'm
coming to a point) 1 is going to kill your butt often enough to make 2
not matter.

But because I'm pretty comfortable with Twisted now...it makes more
sense for me to write my own dispatcher that emulates Tornado's than
give up all the rock-hard awesome features and reliability of Twisted.
deferToThread may not be the preferred way of handling a blocking
task...but when you need it, you need it.



...so my point is...Twisted's PR problem is it needs more accessible
docs. They need to be understandable, entertaining...and pretty. It
all starts with that front page...and the web app in 10 lines right
smack dab there.

I'm going to start with the front page...and then I'm going to write
some articles on my blog that are what I wanted when I was learning
Twisted. Hopefully, they'll be of use to someone.

-J

On Wed, Apr 21, 2010 at 6:15 PM, Glyph Lefkowitz
<glyph at twistedmatrix.com> wrote:
>
> On Apr 20, 2010, at 7:06 PM, Jason J. W. Williams wrote:
>
> And yes I'm volunteering to reorg.
>
> Wow, you really are a glutton for punishment, aren't you? :)
> Go ahead and create an alternate front-page wiki page, and let the list know
> when it's ready so we can pile on and critique.
> I'm sure it wouldn't be too hard to do better than what's there, though.
> Looking forward to it,
> -glyph
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


From ssteinerx at gmail.com  Wed Apr 21 21:05:13 2010
From: ssteinerx at gmail.com (ssteinerX@gmail.com)
Date: Wed, 21 Apr 2010 21:05:13 -0400
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
Message-ID: <32A4D2A6-1BF6-4E09-A2B7-570A8DEAA080@gmail.com>


On Apr 21, 2010, at 8:53 PM, Jason J. W. Williams wrote:
> 
> But because I'm pretty comfortable with Twisted now...it makes more
> sense for me to write my own dispatcher that emulates Tornado's than
> give up all the rock-hard awesome

My spam filter almost killed you on that phrase.  I think you mean rock-solid.

> ...so my point is...Twisted's PR problem is it needs more accessible
> docs. They need to be understandable, entertaining...and pretty. It
> all starts with that front page...and the web app in 10 lines right
> smack dab there.
> 
> I'm going to start with the front page...and then I'm going to write
> some articles on my blog that are what I wanted when I was learning
> Twisted. Hopefully, they'll be of use to someone.

Cool.  See exarkun's Twisted in 60 Seconds series; maybe fill in the things that are still not clear after that?

S



From jasonjwwilliams at gmail.com  Wed Apr 21 21:22:35 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Wed, 21 Apr 2010 19:22:35 -0600
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <32A4D2A6-1BF6-4E09-A2B7-570A8DEAA080@gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
	<32A4D2A6-1BF6-4E09-A2B7-570A8DEAA080@gmail.com>
Message-ID: <g2m3b949f091004211822g41810e2bh1f75134f445c38b4@mail.gmail.com>

Naw...I meant what I wrote. ;) exarkun's is great...it's web focused.
I'll post to them to the list and y'all can see if its worthwhile.

-J

On Wed, Apr 21, 2010 at 7:05 PM, ssteinerX at gmail.com
<ssteinerx at gmail.com> wrote:
>
> On Apr 21, 2010, at 8:53 PM, Jason J. W. Williams wrote:
>>
>> But because I'm pretty comfortable with Twisted now...it makes more
>> sense for me to write my own dispatcher that emulates Tornado's than
>> give up all the rock-hard awesome
>
> My spam filter almost killed you on that phrase. ?I think you mean rock-solid.
>
>> ...so my point is...Twisted's PR problem is it needs more accessible
>> docs. They need to be understandable, entertaining...and pretty. It
>> all starts with that front page...and the web app in 10 lines right
>> smack dab there.
>>
>> I'm going to start with the front page...and then I'm going to write
>> some articles on my blog that are what I wanted when I was learning
>> Twisted. Hopefully, they'll be of use to someone.
>
> Cool. ?See exarkun's Twisted in 60 Seconds series; maybe fill in the things that are still not clear after that?
>
> S
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From kevin.horn at gmail.com  Wed Apr 21 21:30:14 2010
From: kevin.horn at gmail.com (Kevin Horn)
Date: Wed, 21 Apr 2010 20:30:14 -0500
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <g2m3b949f091004211822g41810e2bh1f75134f445c38b4@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
	<32A4D2A6-1BF6-4E09-A2B7-570A8DEAA080@gmail.com>
	<g2m3b949f091004211822g41810e2bh1f75134f445c38b4@mail.gmail.com>
Message-ID: <k2r562bcc11004211830uc1496758u60738be30dad9acf@mail.gmail.com>

This blog series is also totally rock-a-licious.

http://krondo.com/blog/?page_id=1327

Kevin Horn

On Wed, Apr 21, 2010 at 8:22 PM, Jason J. W. Williams <
jasonjwwilliams at gmail.com> wrote:

> Naw...I meant what I wrote. ;) exarkun's is great...it's web focused.
> I'll post to them to the list and y'all can see if its worthwhile.
>
> -J
>
> On Wed, Apr 21, 2010 at 7:05 PM, ssteinerX at gmail.com
> <ssteinerx at gmail.com> wrote:
> >
> > On Apr 21, 2010, at 8:53 PM, Jason J. W. Williams wrote:
> >>
> >> But because I'm pretty comfortable with Twisted now...it makes more
> >> sense for me to write my own dispatcher that emulates Tornado's than
> >> give up all the rock-hard awesome
> >
> > My spam filter almost killed you on that phrase.  I think you mean
> rock-solid.
> >
> >> ...so my point is...Twisted's PR problem is it needs more accessible
> >> docs. They need to be understandable, entertaining...and pretty. It
> >> all starts with that front page...and the web app in 10 lines right
> >> smack dab there.
> >>
> >> I'm going to start with the front page...and then I'm going to write
> >> some articles on my blog that are what I wanted when I was learning
> >> Twisted. Hopefully, they'll be of use to someone.
> >
> > Cool.  See exarkun's Twisted in 60 Seconds series; maybe fill in the
> things that are still not clear after that?
> >
> > S
> >
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100421/65fc75b1/attachment.htm 

From kevin.horn at gmail.com  Wed Apr 21 21:32:14 2010
From: kevin.horn at gmail.com (Kevin Horn)
Date: Wed, 21 Apr 2010 20:32:14 -0500
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
Message-ID: <n2l562bcc11004211832j96e0b59dx8118a3bd456febda@mail.gmail.com>

On Wed, Apr 21, 2010 at 7:53 PM, Jason J. W. Williams <
jasonjwwilliams at gmail.com> wrote:

>
> I'd say the biggest barrier to entry is the documentation. And let's
> face it...there's no reason Twisted shouldn't be used by more folks.
> It's great...but learning it feels like a frat hazing. That's largely
> because reading the docs feels like learning from that comp sci prof
> who was smart...but wasn't smart enough to explain the concepts at
> your level.
>

The docs really are about to get a whole lot better.  No really, any minute
now.

The Sphinx conversion is not dead!  I've just been busy...

And once that's done I think it'll be a whole lot easier to write and
maintain things, not to mention read the docs.

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100421/c0ca29d1/attachment.htm 

From jasonjwwilliams at gmail.com  Wed Apr 21 21:32:37 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Wed, 21 Apr 2010 19:32:37 -0600
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <k2r562bcc11004211830uc1496758u60738be30dad9acf@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
	<32A4D2A6-1BF6-4E09-A2B7-570A8DEAA080@gmail.com>
	<g2m3b949f091004211822g41810e2bh1f75134f445c38b4@mail.gmail.com>
	<k2r562bcc11004211830uc1496758u60738be30dad9acf@mail.gmail.com>
Message-ID: <r2m3b949f091004211832l3cc698atd062ce9d321b8860@mail.gmail.com>

That looks pretty darn interesting.

-J

On Wed, Apr 21, 2010 at 7:30 PM, Kevin Horn <kevin.horn at gmail.com> wrote:
> This blog series is also totally rock-a-licious.
>
> http://krondo.com/blog/?page_id=1327
>
> Kevin Horn
>
> On Wed, Apr 21, 2010 at 8:22 PM, Jason J. W. Williams
> <jasonjwwilliams at gmail.com> wrote:
>>
>> Naw...I meant what I wrote. ;) exarkun's is great...it's web focused.
>> I'll post to them to the list and y'all can see if its worthwhile.
>>
>> -J
>>
>> On Wed, Apr 21, 2010 at 7:05 PM, ssteinerX at gmail.com
>> <ssteinerx at gmail.com> wrote:
>> >
>> > On Apr 21, 2010, at 8:53 PM, Jason J. W. Williams wrote:
>> >>
>> >> But because I'm pretty comfortable with Twisted now...it makes more
>> >> sense for me to write my own dispatcher that emulates Tornado's than
>> >> give up all the rock-hard awesome
>> >
>> > My spam filter almost killed you on that phrase. ?I think you mean
>> > rock-solid.
>> >
>> >> ...so my point is...Twisted's PR problem is it needs more accessible
>> >> docs. They need to be understandable, entertaining...and pretty. It
>> >> all starts with that front page...and the web app in 10 lines right
>> >> smack dab there.
>> >>
>> >> I'm going to start with the front page...and then I'm going to write
>> >> some articles on my blog that are what I wanted when I was learning
>> >> Twisted. Hopefully, they'll be of use to someone.
>> >
>> > Cool. ?See exarkun's Twisted in 60 Seconds series; maybe fill in the
>> > things that are still not clear after that?
>> >
>> > S
>> >
>> >
>> > _______________________________________________
>> > Twisted-Python mailing list
>> > Twisted-Python at twistedmatrix.com
>> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> >
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


From celord at gmail.com  Wed Apr 21 22:00:25 2010
From: celord at gmail.com (=?ISO-8859-1?B?Q+lzYXIgR2FyY+1h?=)
Date: Wed, 21 Apr 2010 20:00:25 -0600
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <k2r562bcc11004211830uc1496758u60738be30dad9acf@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
	<32A4D2A6-1BF6-4E09-A2B7-570A8DEAA080@gmail.com>
	<g2m3b949f091004211822g41810e2bh1f75134f445c38b4@mail.gmail.com>
	<k2r562bcc11004211830uc1496758u60738be30dad9acf@mail.gmail.com>
Message-ID: <r2pb302bf881004211900i8cd00162wbee21284cf3170cb@mail.gmail.com>

+1 Yes, it's great!!

2010/4/21 Kevin Horn <kevin.horn at gmail.com>

> This blog series is also totally rock-a-licious.
>
> http://krondo.com/blog/?page_id=1327
>



-- 
http://celord.blogspot.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100421/43d51cfc/attachment.htm 

From anfedorov at gmail.com  Wed Apr 21 22:42:12 2010
From: anfedorov at gmail.com (Andrey Fedorov)
Date: Wed, 21 Apr 2010 22:42:12 -0400
Subject: [Twisted-Python] Getting a synchronous interface to a twisted
	reactor
Message-ID: <y2q7659cab31004211942r3a4a32c4od538f2a2872aaa3d@mail.gmail.com>

I'm trying to write a dead-simple interface for an IRC client library, like
so:

     import simpleirc

    connection = simpleirc.Connect('irc.freenode.net', 6667)
    channel = connection.join('foo')

    find_command = re.compile(r'google ([a-z]+)').findall

    for msg in channel:
        for t in find_command(msg):
            channel.say("http://google.com/search?q=%s" % t)

Working from the example in the
docs<http://twistedmatrix.com/documents/current/core/howto/clients.html#auto5>,
I'm running into trouble with the callbacks (the code is a bit lengthy, so I
pasted it here <https://gist.github.com/e7e13f074a2691de6371>). The problem
is that the call to channel.__next__ needs to be returned when the
callback <IRCClient
instance>.privmsg is called, there doesn't seem to be a clean option of
doing that. I could try to use exceptions or threads, but that seems like
the wrong thing here, is there a simpler (blocking?) way of using a twisted
reactor that would make this possible?

Cheers,
Andrey

On Wed, Apr 21, 2010 at 10:00 PM, C?sar Garc?a <celord at gmail.com> wrote:

> +1 Yes, it's great!!
>
> 2010/4/21 Kevin Horn <kevin.horn at gmail.com>
>
> This blog series is also totally rock-a-licious.
>>
>> http://krondo.com/blog/?page_id=1327
>>
>
>
>
> --
> http://celord.blogspot.com/
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100421/105889a0/attachment-0001.htm 

From exarkun at twistedmatrix.com  Wed Apr 21 22:43:18 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 22 Apr 2010 02:43:18 -0000
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on	the frontpage of TM.com?
In-Reply-To: <o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
Message-ID: <20100422024318.7800.1617599668.divmod.xquotient.8@localhost.localdomain>

On 12:53 am, jasonjwwilliams at gmail.com wrote:
>I guess I am. :)

And thanks for doing so!  I'm really looking forward to the results.
>2.) Tornado's performance from the the benchmarks I've read is only
>between 15% and 30% better than twisted.web.

This is totally a tangent, and I hope no one feels the need to extend 
this part of this thread any further (unless it's with statistics), and 
I know the point wasn't to start a conversation about the relative 
performance of these two web servers, but I still have to comment.  The 
benchmarks I've seen of Tornado's performance are ambiguous at best, 
misleading at worst.  It's not a good idea to draw any conclusions from 
them.

Jean-Paul


From exarkun at twistedmatrix.com  Wed Apr 21 22:46:01 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 22 Apr 2010 02:46:01 -0000
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on	the frontpage of TM.com?
In-Reply-To: <o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
Message-ID: <20100422024601.7800.34139205.divmod.xquotient.10@localhost.localdomain>

On 12:53 am, jasonjwwilliams at gmail.com wrote:
>I guess I am. :)
>
>I'm going to start with the front page...and then I'm going to write
>some articles on my blog that are what I wanted when I was learning
>Twisted. Hopefully, they'll be of use to someone.

If it's of any use, someone started trying to do this, and got at least 
as far as deleting all of the front page content:

  http://twistedmatrix.com/trac/wiki/TestFrontPage

Jean-Paul


From exarkun at twistedmatrix.com  Wed Apr 21 22:48:19 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 22 Apr 2010 02:48:19 -0000
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on	the frontpage of TM.com?
In-Reply-To: <n2l562bcc11004211832j96e0b59dx8118a3bd456febda@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
	<n2l562bcc11004211832j96e0b59dx8118a3bd456febda@mail.gmail.com>
Message-ID: <20100422024819.7800.365627817.divmod.xquotient.15@localhost.localdomain>

On 01:32 am, kevin.horn at gmail.com wrote:
>On Wed, Apr 21, 2010 at 7:53 PM, Jason J. W. Williams <
>jasonjwwilliams at gmail.com> wrote:
>>
>>I'd say the biggest barrier to entry is the documentation. And let's
>>face it...there's no reason Twisted shouldn't be used by more folks.
>>It's great...but learning it feels like a frat hazing. That's largely
>>because reading the docs feels like learning from that comp sci prof
>>who was smart...but wasn't smart enough to explain the concepts at
>>your level.
>
>The docs really are about to get a whole lot better.  No really, any 
>minute
>now.
>
>The Sphinx conversion is not dead!  I've just been busy...
>
>And once that's done I think it'll be a whole lot easier to write and
>maintain things, not to mention read the docs.

So about the conversion, I wonder if we can start to generate the Sphinx 
version of the docs on buildbot sometime soon, and perhaps host them 
alongside the current docs, as the first step in phasing out the current 
version?

How automated is the conversion process now?  Are errors reported such 
that people could start looking at them and fixing the issues?  It seems 
like you've done almost all of the hard work, and the rest is dealing 
with some edge cases in lore or restructured text, and that might be 
more easily spread out amongst more people.

Jean-Paul


From terry at jon.es  Wed Apr 21 22:57:11 2010
From: terry at jon.es (Terry Jones)
Date: Wed, 21 Apr 2010 22:57:11 -0400
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't
	these	on	the frontpage of TM.com?
In-Reply-To: Your message at 02:46:01 on Thursday, 22 April 2010
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
	<20100422024601.7800.34139205.divmod.xquotient.10@localhost.localdomain>
Message-ID: <19407.47879.616071.148684@jon.es>

> If it's of any use, someone started trying to do this, and got at least 
> as far as deleting all of the front page content:
> 
>   http://twistedmatrix.com/trac/wiki/TestFrontPage

Awesome.


From jessica.mckellar at gmail.com  Wed Apr 21 23:03:28 2010
From: jessica.mckellar at gmail.com (Jessica McKellar)
Date: Wed, 21 Apr 2010 23:03:28 -0400
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
Message-ID: <k2gb282a1341004212003l6ec73b3at869b2fe27b5d9324@mail.gmail.com>

Hi Jason,

I was up for revamping the front page until school hit, but in about a month
I'll be back and ready for action and happy to help with this / provide
feedback. You might find this IRC snippet about the front page relevant:

21:27 < jesstess> exarkun: so you're saying "Want an IRC bot? BAM follow
this link. Want a TCP server? BAM follow this link?" for the top 5 things
people try to implement?
21:27 < exarkun> jesstess: something like that, yea
21:28 < jesstess> exarkun: I'd be up for working that up.
21:31 < exarkun> jesstess: It would be awesome if you could work on that.  I
think it will help a lot.
21:32 < exarkun> jesstess: I think it's also important to have the website
direct people quickly and easily to the documentation they need.
21:33 < exarkun> jesstess: There are too many clicks involved now, so they
might not even find a new set of topic-oriented guides.
21:33 < jesstess> exarkun: I'll do it if you give me a list of the top 5
applications people try to write :)
21:33 < exarkun> jesstess: Doing something about that would be another
highly productive task.
21:33 < exarkun> ah, there's the rub.
21:34 < radix> 1. IRC bot that execs python code, 2. caching web proxy
21:34 < radix> 3. XMPP something
21:34 < radix> 4. MMORPG
21:35 < radix> I can't think of a fifth
21:35 < jesstess> does "simple TCP server" really not make the list? That's
why I first used Twisted.
21:35 < thijstriemstra> mimic skype..ish
21:36 < thijstriemstra> chat, streaming, authentication, porn
21:36 < exarkun> jesstess: not sure if it comes in the top five
21:36 < exarkun> probably the top ten though
21:36 < Screwtape> I'd say half the questions in here have something to do
with IRC bots.

-Jessica

On Wed, Apr 21, 2010 at 8:53 PM, Jason J. W. Williams <
jasonjwwilliams at gmail.com> wrote:

> I guess I am. :)
>
> Honestly, we've used Twisted in my org for quite some time and until I
> was forced to use it my view of it was colored by my infrequent
> beatings by it and the derisive comments of the primary maintainer at
> that time.
>
> With the 4 hours I spent actually learning the concepts, Twisted is no
> longer a black box...it makes sense. That and I've
> optimized/re-factored a bunch of code to work with that theory instead
> of against it. Huge benefits.
>
> I'd say the biggest barrier to entry is the documentation. And let's
> face it...there's no reason Twisted shouldn't be used by more folks.
> It's great...but learning it feels like a frat hazing. That's largely
> because reading the docs feels like learning from that comp sci prof
> who was smart...but wasn't smart enough to explain the concepts at
> your level.
>
> Let's take Tornado for a second...right now I'm building a web API for
> our services and I'm in platform selection mode. My experience with
> Twisted.web's URL dispatching system made me want to cry. Tornado was
> a breeze to use. But here's the problem:
>
> 1.) There's no good async libraries for Tornado...so if I want to
> integrate with Redis or MySQL or anything, I've got to accept that I'm
> going to block when it's not necessary and live with that.
> 2.) Tornado's performance from the the benchmarks I've read is only
> between 15% and 30% better than twisted.web.
>
> 2 is not enough to justify 1, because let's face it (and yeah I'm
> coming to a point) 1 is going to kill your butt often enough to make 2
> not matter.
>
> But because I'm pretty comfortable with Twisted now...it makes more
> sense for me to write my own dispatcher that emulates Tornado's than
> give up all the rock-hard awesome features and reliability of Twisted.
> deferToThread may not be the preferred way of handling a blocking
> task...but when you need it, you need it.
>
>
>
> ...so my point is...Twisted's PR problem is it needs more accessible
> docs. They need to be understandable, entertaining...and pretty. It
> all starts with that front page...and the web app in 10 lines right
> smack dab there.
>
> I'm going to start with the front page...and then I'm going to write
> some articles on my blog that are what I wanted when I was learning
> Twisted. Hopefully, they'll be of use to someone.
>
> -J
>
> On Wed, Apr 21, 2010 at 6:15 PM, Glyph Lefkowitz
> <glyph at twistedmatrix.com> wrote:
> >
> > On Apr 20, 2010, at 7:06 PM, Jason J. W. Williams wrote:
> >
> > And yes I'm volunteering to reorg.
> >
> > Wow, you really are a glutton for punishment, aren't you? :)
> > Go ahead and create an alternate front-page wiki page, and let the list
> know
> > when it's ready so we can pile on and critique.
> > I'm sure it wouldn't be too hard to do better than what's there, though.
> > Looking forward to it,
> > -glyph
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >
> >
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100421/a711360c/attachment.htm 

From alexandre at quessy.net  Thu Apr 22 00:40:44 2010
From: alexandre at quessy.net (Alexandre Quessy)
Date: Thu, 22 Apr 2010 00:40:44 -0400
Subject: [Twisted-Python] Getting a synchronous interface to a twisted
	reactor
In-Reply-To: <y2q7659cab31004211942r3a4a32c4od538f2a2872aaa3d@mail.gmail.com>
References: <y2q7659cab31004211942r3a4a32c4od538f2a2872aaa3d@mail.gmail.com>
Message-ID: <n2v72236ba91004212140l8dda479fza9913d8e6aad0735@mail.gmail.com>

Hello Andrey,
May I recommend you to look at Twisted Words? There are plenty of IRC
tools there.

Regards,
Alex


2010/4/21 Andrey Fedorov <anfedorov at gmail.com>:
> I'm trying to write a dead-simple interface for an IRC client library, like
> so:
> ?? ?import simpleirc
> ?? ?connection = simpleirc.Connect('irc.freenode.net', 6667)
> ?? ?channel = connection.join('foo')
> ?? ?find_command = re.compile(r'google ([a-z]+)').findall
> ?? ?for msg in channel:
> ?? ? ? ?for t in find_command(msg):
> ?? ? ? ? ? ?channel.say("http://google.com/search?q=%s" % t)
> Working from the?example in the docs, I'm running into trouble with the
> callbacks (the code is a bit lengthy, so I pasted it?here). The problem is
> that the call to?channel.__next__?needs to be returned when the
> callback?<IRCClient instance>.privmsg?is called, there doesn't seem to be a
> clean option of doing that. I could try to use exceptions or threads, but
> that seems like the wrong thing here, is there a simpler (blocking?) way of
> using a twisted reactor that would make this possible?
> Cheers,
> Andrey
>
> On Wed, Apr 21, 2010 at 10:00 PM, C?sar Garc?a <celord at gmail.com> wrote:
>>
>> +1 Yes, it's great!!
>>
>> 2010/4/21 Kevin Horn <kevin.horn at gmail.com>
>>>
>>> This blog series is also totally rock-a-licious.
>>>
>>> http://krondo.com/blog/?page_id=1327
>>
>>
>> --
>> http://celord.blogspot.com/
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



-- 
Alexandre Quessy
http://alexandre.quessy.net/


From anfedorov at gmail.com  Thu Apr 22 02:06:39 2010
From: anfedorov at gmail.com (Andrey Fedorov)
Date: Thu, 22 Apr 2010 02:06:39 -0400
Subject: [Twisted-Python] Getting a synchronous interface to a twisted
	reactor
In-Reply-To: <n2v72236ba91004212140l8dda479fza9913d8e6aad0735@mail.gmail.com>
References: <y2q7659cab31004211942r3a4a32c4od538f2a2872aaa3d@mail.gmail.com> 
	<n2v72236ba91004212140l8dda479fza9913d8e6aad0735@mail.gmail.com>
Message-ID: <l2o7659cab31004212306l99cfa3ccxe7455a2c17592ea3@mail.gmail.com>

Thanks! The main reason for the question, though, is just curiosity from
playing with and learning the Twisted API, not necessarily getting the
example working :)

A more direct question would have been - is there a Twisted reactor which
provides a blocking call instead of a callback? Is there an accepted "best"
way of wrapping an non-blocking async API with callbacks into a
blocking synchronous one?

- Andrey

On Thu, Apr 22, 2010 at 12:40 AM, Alexandre Quessy <alexandre at quessy.net>wrote:

> Hello Andrey,
> May I recommend you to look at Twisted Words? There are plenty of IRC
> tools there.
>
> Regards,
> Alex
>
>
> 2010/4/21 Andrey Fedorov <anfedorov at gmail.com>:
> > I'm trying to write a dead-simple interface for an IRC client library,
> like
> > so:
> >     import simpleirc
> >     connection = simpleirc.Connect('irc.freenode.net', 6667)
> >     channel = connection.join('foo')
> >     find_command = re.compile(r'google ([a-z]+)').findall
> >     for msg in channel:
> >         for t in find_command(msg):
> >             channel.say("http://google.com/search?q=%s" % t)
> > Working from the example in the docs, I'm running into trouble with the
> > callbacks (the code is a bit lengthy, so I pasted it here). The problem
> is
> > that the call to channel.__next__ needs to be returned when the
> > callback <IRCClient instance>.privmsg is called, there doesn't seem to be
> a
> > clean option of doing that. I could try to use exceptions or threads, but
> > that seems like the wrong thing here, is there a simpler (blocking?) way
> of
> > using a twisted reactor that would make this possible?
> > Cheers,
> > Andrey
> >
> > On Wed, Apr 21, 2010 at 10:00 PM, C?sar Garc?a <celord at gmail.com> wrote:
> >>
> >> +1 Yes, it's great!!
> >>
> >> 2010/4/21 Kevin Horn <kevin.horn at gmail.com>
> >>>
> >>> This blog series is also totally rock-a-licious.
> >>>
> >>> http://krondo.com/blog/?page_id=1327
> >>
> >>
> >> --
> >> http://celord.blogspot.com/
> >>
> >> _______________________________________________
> >> Twisted-Python mailing list
> >> Twisted-Python at twistedmatrix.com
> >> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >>
> >
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >
> >
>
>
>
> --
> Alexandre Quessy
> http://alexandre.quessy.net/
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100422/a19dae1e/attachment-0001.htm 

From konrads.smelkovs at gmail.com  Thu Apr 22 02:49:30 2010
From: konrads.smelkovs at gmail.com (Konrads Smelkovs)
Date: Thu, 22 Apr 2010 09:49:30 +0300
Subject: [Twisted-Python] Getting a synchronous interface to a twisted
	reactor
In-Reply-To: <l2o7659cab31004212306l99cfa3ccxe7455a2c17592ea3@mail.gmail.com>
References: <y2q7659cab31004211942r3a4a32c4od538f2a2872aaa3d@mail.gmail.com> 
	<n2v72236ba91004212140l8dda479fza9913d8e6aad0735@mail.gmail.com> 
	<l2o7659cab31004212306l99cfa3ccxe7455a2c17592ea3@mail.gmail.com>
Message-ID: <u2xd79700b91004212349x58b650ddl32443f3ee92209c0@mail.gmail.com>

You can execute blocking call at any time of your pleasing. It will
predictable block all execution paths. Typical wrapper around blocking calls
is thread. Something like this (from
http://twistedmatrix.com/documents/current/core/howto/threading.html):

d = threads.deferToThread(yourSyncCall)
d.addCallback(...)


--
Konrads Smelkovs
Applied IT sorcery.


On Thu, Apr 22, 2010 at 9:06 AM, Andrey Fedorov <anfedorov at gmail.com> wrote:

> Thanks! The main reason for the question, though, is just curiosity from
> playing with and learning the Twisted API, not necessarily getting the
> example working :)
>
> A more direct question would have been - is there a Twisted reactor which
> provides a blocking call instead of a callback? Is there an accepted "best"
> way of wrapping an non-blocking async API with callbacks into a
> blocking synchronous one?
>
> - Andrey
>
>
> On Thu, Apr 22, 2010 at 12:40 AM, Alexandre Quessy <alexandre at quessy.net>wrote:
>
>> Hello Andrey,
>> May I recommend you to look at Twisted Words? There are plenty of IRC
>> tools there.
>>
>> Regards,
>> Alex
>>
>>
>> 2010/4/21 Andrey Fedorov <anfedorov at gmail.com>:
>> > I'm trying to write a dead-simple interface for an IRC client library,
>> like
>> > so:
>> >     import simpleirc
>> >     connection = simpleirc.Connect('irc.freenode.net', 6667)
>> >     channel = connection.join('foo')
>> >     find_command = re.compile(r'google ([a-z]+)').findall
>> >     for msg in channel:
>> >         for t in find_command(msg):
>> >             channel.say("http://google.com/search?q=%s" % t)
>> > Working from the example in the docs, I'm running into trouble with the
>> > callbacks (the code is a bit lengthy, so I pasted it here). The problem
>> is
>> > that the call to channel.__next__ needs to be returned when the
>> > callback <IRCClient instance>.privmsg is called, there doesn't seem to
>> be a
>> > clean option of doing that. I could try to use exceptions or threads,
>> but
>> > that seems like the wrong thing here, is there a simpler (blocking?) way
>> of
>> > using a twisted reactor that would make this possible?
>> > Cheers,
>> > Andrey
>> >
>> > On Wed, Apr 21, 2010 at 10:00 PM, C?sar Garc?a <celord at gmail.com>
>> wrote:
>> >>
>> >> +1 Yes, it's great!!
>> >>
>> >> 2010/4/21 Kevin Horn <kevin.horn at gmail.com>
>> >>>
>> >>> This blog series is also totally rock-a-licious.
>> >>>
>> >>> http://krondo.com/blog/?page_id=1327
>> >>
>> >>
>> >> --
>> >> http://celord.blogspot.com/
>> >>
>> >> _______________________________________________
>> >> Twisted-Python mailing list
>> >> Twisted-Python at twistedmatrix.com
>> >> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> >>
>> >
>> >
>> > _______________________________________________
>> > Twisted-Python mailing list
>> > Twisted-Python at twistedmatrix.com
>> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> >
>> >
>>
>>
>>
>> --
>> Alexandre Quessy
>> http://alexandre.quessy.net/
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100422/5c8093dc/attachment.htm 

From p.mayers at imperial.ac.uk  Thu Apr 22 03:21:30 2010
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Thu, 22 Apr 2010 08:21:30 +0100
Subject: [Twisted-Python] Getting a synchronous interface to a twisted
 reactor
In-Reply-To: <l2o7659cab31004212306l99cfa3ccxe7455a2c17592ea3@mail.gmail.com>
References: <y2q7659cab31004211942r3a4a32c4od538f2a2872aaa3d@mail.gmail.com>
	<n2v72236ba91004212140l8dda479fza9913d8e6aad0735@mail.gmail.com>
	<l2o7659cab31004212306l99cfa3ccxe7455a2c17592ea3@mail.gmail.com>
Message-ID: <4BCFF8FA.4070708@imperial.ac.uk>

On 04/22/2010 07:06 AM, Andrey Fedorov wrote:
> Thanks! The main reason for the question, though, is just curiosity from
> playing with and learning the Twisted API, not necessarily getting the
> example working :)
>
> A more direct question would have been - is there a Twisted reactor
> which provides a blocking call instead of a callback? Is there an
> accepted "best" way of wrapping an non-blocking async API with callbacks
> into a blocking synchronous one?

If I understand what you're asking you want to call Twisted code in the 
following style:

def function():
   # this code blocks
   result = some_twisted_thing()
   value = process(result)
   final = morecode(value)

Rather than:

def function():
    def = some_twisted_thing()
    def.addCallback(process)
    def.addCallback(morecode)


If that's the case, then the answer is "sort of" but I think you might 
have misunderstood Twisted a bit. The entire point is to have 
non-blocking APIs, not to want a blocking API.

You can't "really" block, because that stops the reactor from running, 
and thus any networking events being handled.

You can emulate it in Python 2.5 with generators & a special decorator:

from twisted.internet import deferred

@deferred.inlineCallbacks
def function():
    result = yield some_twisted_thing()
    value = yield process(result)
    final = yield morecode(value)

I might have misunderstood what you're asking though, in which case I 
apologise, and can you be more specific?


From don at delphexonline.com  Thu Apr 22 10:11:36 2010
From: don at delphexonline.com (Don Schoeman)
Date: Thu, 22 Apr 2010 16:11:36 +0200
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BCF24C5.5010204@delphexonline.com>
References: <4BCEE3A1.10601@delphexonline.com>	<j2q3b949f091004210837q6bcf731ar63f1471348e2adf9@mail.gmail.com>
	<4BCF24C5.5010204@delphexonline.com>
Message-ID: <4BD05918.9050709@delphexonline.com>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100422/1c6db7f6/attachment.htm 

From anfedorov at gmail.com  Thu Apr 22 10:50:29 2010
From: anfedorov at gmail.com (Andrey Fedorov)
Date: Thu, 22 Apr 2010 10:50:29 -0400
Subject: [Twisted-Python] Getting a synchronous interface to a twisted
	reactor
In-Reply-To: <4BCFF8FA.4070708@imperial.ac.uk>
References: <y2q7659cab31004211942r3a4a32c4od538f2a2872aaa3d@mail.gmail.com> 
	<n2v72236ba91004212140l8dda479fza9913d8e6aad0735@mail.gmail.com> 
	<l2o7659cab31004212306l99cfa3ccxe7455a2c17592ea3@mail.gmail.com> 
	<4BCFF8FA.4070708@imperial.ac.uk>
Message-ID: <y2r7659cab31004220750y8d0f0c22p7b202a215be36ef4@mail.gmail.com>

On Thu, Apr 22, 2010 at 3:21 AM, Phil Mayers <p.mayers at imperial.ac.uk>wrote:

> If that's the case, then the answer is "sort of" but I think you might have
> misunderstood Twisted a bit. The entire point is to have non-blocking APIs,
> not to want a blocking API.
>

That sounds like might be the case case. Wwhat I'm looking for, then, is a
way to use the IRCClient protocol outside of Twisted - in a way where I can
use it like:

connection = # something using IRCClient
msg = connection.privmsg() # blocks
assert msg == "andreyf: hello there, lovely IRC users!"


Are there any projects along those lines?

Cheers,
Andrey
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100422/8280e39b/attachment.htm 

From kevin.horn at gmail.com  Thu Apr 22 10:57:51 2010
From: kevin.horn at gmail.com (Kevin Horn)
Date: Thu, 22 Apr 2010 09:57:51 -0500
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <20100422024819.7800.365627817.divmod.xquotient.15@localhost.localdomain>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
	<n2l562bcc11004211832j96e0b59dx8118a3bd456febda@mail.gmail.com>
	<20100422024819.7800.365627817.divmod.xquotient.15@localhost.localdomain>
Message-ID: <j2m562bcc11004220757o6e64652dk7c43c0bd539bbaec@mail.gmail.com>

On Wed, Apr 21, 2010 at 9:48 PM, <exarkun at twistedmatrix.com> wrote:

>
> So about the conversion, I wonder if we can start to generate the Sphinx
> version of the docs on buildbot sometime soon, and perhaps host them
> alongside the current docs, as the first step in phasing out the current
> version?
>

I suppose we could do this, if you think it would help.  Note that the
lore2sphinx
script requires Python 2.6 and I think at least Sphinx 0.6.4 (I'm using
0.6.5).


>
> How automated is the conversion process now?  Are errors reported such
> that people could start looking at them and fixing the issues?  It seems
> like you've done almost all of the hard work, and the rest is dealing
> with some edge cases in lore or restructured text, and that might be
> more easily spread out amongst more people.
>
> Jean-Paul
>
>
I think the automatic conversion process has reached the point of
diminishing returns.
I've got it down to about 13 warnings in the Sphinx build process, though
there are still
some markup errors in the output.  Trying to make the conversion handle
these seems
to just introduce more errors in other places.

In other words I think it's time to create a branch with the Sphinxified
docs and do a manual review.

I've got a basic transition plan sketched out here:
http://twistedsphinx.funsize.net/transition_plan.html

That's just basically an outline of a plan Glyph and I hashed out during the
Twisted sprint at PyCon.

Ideas and criticisms welcome.

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100422/101233e3/attachment-0001.htm 

From kevin.horn at gmail.com  Thu Apr 22 10:59:22 2010
From: kevin.horn at gmail.com (Kevin Horn)
Date: Thu, 22 Apr 2010 09:59:22 -0500
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BD05918.9050709@delphexonline.com>
References: <4BCEE3A1.10601@delphexonline.com>
	<j2q3b949f091004210837q6bcf731ar63f1471348e2adf9@mail.gmail.com>
	<4BCF24C5.5010204@delphexonline.com>
	<4BD05918.9050709@delphexonline.com>
Message-ID: <p2l562bcc11004220759z61393960q20095d971ff0e76a@mail.gmail.com>

Thanks for reporting back to the list, Don.  I'm sure this info will help
someone down the road (maybe even me!)

Kevin Horn

On Thu, Apr 22, 2010 at 9:11 AM, Don Schoeman <don at delphexonline.com> wrote:

>  Hi guys,
>
> I have finally managed to solve this problem. It turns out (as predicted)
> that this is not a twistd problem after all. This particular Ubuntu server
> has an encrypted home directory (enabled through eCryptfs). This means that
> during the boot process the particular home directory from which I tried
> running my tests was not available as even the root user do not have access
> to the home directory until it is de-crypted after the particular user
> actually logs in. This is why the tests ran fine after login but not during
> boot.
>
> For more experienced Linux admins this would have been tracked down within
> minutes but it took me a full day worth of testing before I finally managed
> to track down the problem. To resolve the issue I moved the server to
> /usr/local/lib/python2.6/dist-packages/ghserver and I am now executing it
> from there instead and it starts up during boot just as expected. I am
> extremely relieved!
>
> Thanks all again for your help!
>
> Best Regards,
> Don
>
>
> Don Schoeman wrote:
>
> Hi Jason,
>
> Unfortunately I still have the same problem. However, I now realise that it
> might be a privileges issue of some kind. Being fairly new at linux  this
> may take days to figure out; can you perhaps remember if you enabled your rc
> script using the command update-rc.d? I used it in the following way: sudo
> update-rc.d ghserver defaults
>
> Since this doesn't seem to be a problem related to twisted or twistd
> anymore I will start looking elsewhere for possible solutions.
>
> Thanks for all the help from everyone anyway.
>
> Regards,
> Don
>
>
> Jason J. W. Williams wrote:
>
> Hi Don,
>
> Here's the init.d we use for Twisted on Ubuntu. Sets the full path to Twistd:
> http://gist.github.com/373978
>
> -J
>
> On Wed, Apr 21, 2010 at 5:38 AM, Don Schoeman <don at delphexonline.com> <don at delphexonline.com> wrote:
>
>
>  Hi guys,
>
> My application is being executed using twistd as per documentation. All is
> working fine but I need to have the service start automatically at boot
> time.
>
> So as a test I've created a script in /etc/init.d/ which looks like this:
>
> #! /bin/sh
> ### BEGIN INIT INFO
> # Provides:          ghserver
> # Required-Start:    $local_fs $remote_fs $network $syslog
> # Required-Stop:     $local_fs $remote_fs $network $syslog
> # Default-Start:     2 3 4 5
> # Default-Stop:      0 1 6
> # Short-Description: Start/stop GHServer server
> ### END INIT INFO
>
> logger "GHServer: Start script executed"
> GH_SERVER_PATH="/home/myname/Python/ghserver"
> export PYTHONPATH="$GH_SERVER_PATH:$PYTHONPATH"
>
> case "$1" in
>   start)
>     logger "GHServer: Starting"
>     echo "Starting GHServer..."
>     twistd -y "$GH_SERVER_PATH/ghserverapp.py" -l
> "$GH_SERVER_PATH/ghserver.log" --pidfile "$GH_SERVER_PATH/twistd.pid"
>     ;;
>   stop)
>     logger "GHServer: Stopping"
>     echo "Stopping GHServer..."
>     kill `cat $GH_SERVER_PATH/twistd.pid`
>     ;;
>   *)
>     logger "GHServer: Invalid usage"
>     echo "Usage: /etc/init.d/ghserver {start|stop}"
>     exit 1
>     ;;
> esac
>
> exit 0
>
>
> This works fine when running /etc/init.d/ghserver start and
> /etc/init.d/ghserver stop. The script also run when I boot since the logger
> actually logs the "GHServer: Starting" text to the /var/log/messages file.
> However, my service actually does not start. There is no pid to be found
> anywhere, there are no error logs anywhere, just nothing. I might be doing
> something wrong here but is there someone who's gone through this process
> and can provide some samples how they did it? Any help will be greatly
> appreciated.
>
> Kind Regards,
> Don
>
>
>
> _______________________________________________
> Twisted-Python mailing listTwisted-Python at twistedmatrix.comhttp://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
>      _______________________________________________
> Twisted-Python mailing listTwisted-Python at twistedmatrix.comhttp://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>    ------------------------------
>
> _______________________________________________
> Twisted-Python mailing listTwisted-Python at twistedmatrix.comhttp://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100422/828824bd/attachment.htm 

From kevin.horn at gmail.com  Thu Apr 22 10:59:22 2010
From: kevin.horn at gmail.com (Kevin Horn)
Date: Thu, 22 Apr 2010 09:59:22 -0500
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BD05918.9050709@delphexonline.com>
References: <4BCEE3A1.10601@delphexonline.com>
	<j2q3b949f091004210837q6bcf731ar63f1471348e2adf9@mail.gmail.com>
	<4BCF24C5.5010204@delphexonline.com>
	<4BD05918.9050709@delphexonline.com>
Message-ID: <p2l562bcc11004220759z61393960q20095d971ff0e76a@mail.gmail.com>

Thanks for reporting back to the list, Don.  I'm sure this info will help
someone down the road (maybe even me!)

Kevin Horn

On Thu, Apr 22, 2010 at 9:11 AM, Don Schoeman <don at delphexonline.com> wrote:

>  Hi guys,
>
> I have finally managed to solve this problem. It turns out (as predicted)
> that this is not a twistd problem after all. This particular Ubuntu server
> has an encrypted home directory (enabled through eCryptfs). This means that
> during the boot process the particular home directory from which I tried
> running my tests was not available as even the root user do not have access
> to the home directory until it is de-crypted after the particular user
> actually logs in. This is why the tests ran fine after login but not during
> boot.
>
> For more experienced Linux admins this would have been tracked down within
> minutes but it took me a full day worth of testing before I finally managed
> to track down the problem. To resolve the issue I moved the server to
> /usr/local/lib/python2.6/dist-packages/ghserver and I am now executing it
> from there instead and it starts up during boot just as expected. I am
> extremely relieved!
>
> Thanks all again for your help!
>
> Best Regards,
> Don
>
>
> Don Schoeman wrote:
>
> Hi Jason,
>
> Unfortunately I still have the same problem. However, I now realise that it
> might be a privileges issue of some kind. Being fairly new at linux  this
> may take days to figure out; can you perhaps remember if you enabled your rc
> script using the command update-rc.d? I used it in the following way: sudo
> update-rc.d ghserver defaults
>
> Since this doesn't seem to be a problem related to twisted or twistd
> anymore I will start looking elsewhere for possible solutions.
>
> Thanks for all the help from everyone anyway.
>
> Regards,
> Don
>
>
> Jason J. W. Williams wrote:
>
> Hi Don,
>
> Here's the init.d we use for Twisted on Ubuntu. Sets the full path to Twistd:
> http://gist.github.com/373978
>
> -J
>
> On Wed, Apr 21, 2010 at 5:38 AM, Don Schoeman <don at delphexonline.com> <don at delphexonline.com> wrote:
>
>
>  Hi guys,
>
> My application is being executed using twistd as per documentation. All is
> working fine but I need to have the service start automatically at boot
> time.
>
> So as a test I've created a script in /etc/init.d/ which looks like this:
>
> #! /bin/sh
> ### BEGIN INIT INFO
> # Provides:          ghserver
> # Required-Start:    $local_fs $remote_fs $network $syslog
> # Required-Stop:     $local_fs $remote_fs $network $syslog
> # Default-Start:     2 3 4 5
> # Default-Stop:      0 1 6
> # Short-Description: Start/stop GHServer server
> ### END INIT INFO
>
> logger "GHServer: Start script executed"
> GH_SERVER_PATH="/home/myname/Python/ghserver"
> export PYTHONPATH="$GH_SERVER_PATH:$PYTHONPATH"
>
> case "$1" in
>   start)
>     logger "GHServer: Starting"
>     echo "Starting GHServer..."
>     twistd -y "$GH_SERVER_PATH/ghserverapp.py" -l
> "$GH_SERVER_PATH/ghserver.log" --pidfile "$GH_SERVER_PATH/twistd.pid"
>     ;;
>   stop)
>     logger "GHServer: Stopping"
>     echo "Stopping GHServer..."
>     kill `cat $GH_SERVER_PATH/twistd.pid`
>     ;;
>   *)
>     logger "GHServer: Invalid usage"
>     echo "Usage: /etc/init.d/ghserver {start|stop}"
>     exit 1
>     ;;
> esac
>
> exit 0
>
>
> This works fine when running /etc/init.d/ghserver start and
> /etc/init.d/ghserver stop. The script also run when I boot since the logger
> actually logs the "GHServer: Starting" text to the /var/log/messages file.
> However, my service actually does not start. There is no pid to be found
> anywhere, there are no error logs anywhere, just nothing. I might be doing
> something wrong here but is there someone who's gone through this process
> and can provide some samples how they did it? Any help will be greatly
> appreciated.
>
> Kind Regards,
> Don
>
>
>
> _______________________________________________
> Twisted-Python mailing listTwisted-Python at twistedmatrix.comhttp://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
>      _______________________________________________
> Twisted-Python mailing listTwisted-Python at twistedmatrix.comhttp://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>    ------------------------------
>
> _______________________________________________
> Twisted-Python mailing listTwisted-Python at twistedmatrix.comhttp://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100422/828824bd/attachment-0001.htm 

From p.mayers at imperial.ac.uk  Thu Apr 22 11:00:12 2010
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Thu, 22 Apr 2010 16:00:12 +0100
Subject: [Twisted-Python] Getting a synchronous interface to a twisted
 reactor
In-Reply-To: <y2r7659cab31004220750y8d0f0c22p7b202a215be36ef4@mail.gmail.com>
References: <y2q7659cab31004211942r3a4a32c4od538f2a2872aaa3d@mail.gmail.com>
	<n2v72236ba91004212140l8dda479fza9913d8e6aad0735@mail.gmail.com>
	<l2o7659cab31004212306l99cfa3ccxe7455a2c17592ea3@mail.gmail.com>
	<4BCFF8FA.4070708@imperial.ac.uk>
	<y2r7659cab31004220750y8d0f0c22p7b202a215be36ef4@mail.gmail.com>
Message-ID: <4BD0647C.5030201@imperial.ac.uk>

On 22/04/10 15:50, Andrey Fedorov wrote:
> On Thu, Apr 22, 2010 at 3:21 AM, Phil Mayers <p.mayers at imperial.ac.uk
> <mailto:p.mayers at imperial.ac.uk>> wrote:
>
>     If that's the case, then the answer is "sort of" but I think you
>     might have misunderstood Twisted a bit. The entire point is to
>     have non-blocking APIs, not to want a blocking API.
>
>
> That sounds like might be the case case. Wwhat I'm looking for, then, is
> a way to use the IRCClient protocol outside of Twisted - in a way where
> I can use it like:
>
>     connection = # something using IRCClient
>     msg = connection.privmsg() # blocks
>     assert msg == "andreyf: hello there, lovely IRC users!"
>
>
> Are there any projects along those lines?

Not that I'm aware of. I'm pretty certain the Twisted protocol 
implementations all require the reactor and thus need to be run in an 
async manner.

There are various hacky ways you could accomplish this; the obvious one 
that springs to mind is running the reactor in a thread. There are 
various caveats to doing this, the main one being you can't call any 
Twisted functions outside the reactor thread except "callFromThread" so 
you'd probably want to write some kind of wrapper; and it's a bit 
counter to the whole ethos.

Given you said:

"""The main reason for the question, though, is just curiosity from 
playing with and learning the Twisted API"""

...I would recommend just trying to use the API in the Twisted "way". 
You can use the aforementioned @inlineCallbacks decorator & generator 
syntax if you prefer writing your code that way, as opposed to 
traditional deferred callback chaining.


From anfedorov at gmail.com  Thu Apr 22 11:04:00 2010
From: anfedorov at gmail.com (Andrey Fedorov)
Date: Thu, 22 Apr 2010 11:04:00 -0400
Subject: [Twisted-Python] Getting a synchronous interface to a twisted
	reactor
In-Reply-To: <4BD0647C.5030201@imperial.ac.uk>
References: <y2q7659cab31004211942r3a4a32c4od538f2a2872aaa3d@mail.gmail.com> 
	<n2v72236ba91004212140l8dda479fza9913d8e6aad0735@mail.gmail.com> 
	<l2o7659cab31004212306l99cfa3ccxe7455a2c17592ea3@mail.gmail.com> 
	<4BCFF8FA.4070708@imperial.ac.uk>
	<y2r7659cab31004220750y8d0f0c22p7b202a215be36ef4@mail.gmail.com>
	<4BD0647C.5030201@imperial.ac.uk>
Message-ID: <r2v7659cab31004220803iad72fe0fzf1a632c6f3c045a2@mail.gmail.com>

On Thu, Apr 22, 2010 at 11:00 AM, Phil Mayers <p.mayers at imperial.ac.uk>wrote:

> I would recommend just trying to use the API in the Twisted "way". You can
> use the aforementioned @inlineCallbacks decorator & generator syntax if you
> prefer writing your code that way, as opposed to traditional deferred
> callback chaining.
>

This seems wise :)

Thanks for all the help!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100422/661aba41/attachment.htm 

From exarkun at twistedmatrix.com  Thu Apr 22 12:51:01 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 22 Apr 2010 16:51:01 -0000
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on	the frontpage of TM.com?
In-Reply-To: <j2m562bcc11004220757o6e64652dk7c43c0bd539bbaec@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
	<n2l562bcc11004211832j96e0b59dx8118a3bd456febda@mail.gmail.com>
	<20100422024819.7800.365627817.divmod.xquotient.15@localhost.localdomain>
	<j2m562bcc11004220757o6e64652dk7c43c0bd539bbaec@mail.gmail.com>
Message-ID: <20100422165101.2038.1694870058.divmod.xquotient.3@localhost.localdomain>

On 02:57 pm, kevin.horn at gmail.com wrote:
>On Wed, Apr 21, 2010 at 9:48 PM, <exarkun at twistedmatrix.com> wrote:
>>
>>So about the conversion, I wonder if we can start to generate the 
>>Sphinx
>>version of the docs on buildbot sometime soon, and perhaps host them
>>alongside the current docs, as the first step in phasing out the 
>>current
>>version?
>
>I suppose we could do this, if you think it would help.  Note that the
>lore2sphinx
>script requires Python 2.6 and I think at least Sphinx 0.6.4 (I'm using
>0.6.5).

Shouldn't be a problem.
>
>>
>>How automated is the conversion process now?  Are errors reported such
>>that people could start looking at them and fixing the issues?  It 
>>seems
>>like you've done almost all of the hard work, and the rest is dealing
>>with some edge cases in lore or restructured text, and that might be
>>more easily spread out amongst more people.
>>
>>Jean-Paul
>I think the automatic conversion process has reached the point of
>diminishing returns.
>I've got it down to about 13 warnings in the Sphinx build process, 
>though
>there are still
>some markup errors in the output.  Trying to make the conversion handle
>these seems
>to just introduce more errors in other places.

Would it be easier to fix these by changing the lore sources?

Jean-Paul


From kevin.horn at gmail.com  Thu Apr 22 13:07:05 2010
From: kevin.horn at gmail.com (Kevin Horn)
Date: Thu, 22 Apr 2010 12:07:05 -0500
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <20100422165101.2038.1694870058.divmod.xquotient.3@localhost.localdomain>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
	<n2l562bcc11004211832j96e0b59dx8118a3bd456febda@mail.gmail.com>
	<20100422024819.7800.365627817.divmod.xquotient.15@localhost.localdomain>
	<j2m562bcc11004220757o6e64652dk7c43c0bd539bbaec@mail.gmail.com>
	<20100422165101.2038.1694870058.divmod.xquotient.3@localhost.localdomain>
Message-ID: <v2t562bcc11004221007p168971bdl56455662c6e76d33@mail.gmail.com>

On Thu, Apr 22, 2010 at 11:51 AM, <exarkun at twistedmatrix.com> wrote:

> On 02:57 pm, kevin.horn at gmail.com wrote:
> >On Wed, Apr 21, 2010 at 9:48 PM, <exarkun at twistedmatrix.com> wrote:
> >>
> >>So about the conversion, I wonder if we can start to generate the
> >>Sphinx
> >>version of the docs on buildbot sometime soon, and perhaps host them
> >>alongside the current docs, as the first step in phasing out the
> >>current
> >>version?
> >
> >I suppose we could do this, if you think it would help.  Note that the
> >lore2sphinx
> >script requires Python 2.6 and I think at least Sphinx 0.6.4 (I'm using
> >0.6.5).
>
> Shouldn't be a problem.
> >
> >>
> >>How automated is the conversion process now?  Are errors reported such
> >>that people could start looking at them and fixing the issues?  It
> >>seems
> >>like you've done almost all of the hard work, and the rest is dealing
> >>with some edge cases in lore or restructured text, and that might be
> >>more easily spread out amongst more people.
> >>
> >>Jean-Paul
> >I think the automatic conversion process has reached the point of
> >diminishing returns.
> >I've got it down to about 13 warnings in the Sphinx build process,
> >though
> >there are still
> >some markup errors in the output.  Trying to make the conversion handle
> >these seems
> >to just introduce more errors in other places.
>
> Would it be easier to fix these by changing the lore sources?
>
> Jean-Paul
>
>
>
I seriously doubt it.  In fact I think it would be much more difficult.

Other than the 13 build warnings I mentioned above, almost all of the
rest of the markup errors are things like a missing space character.

Fixing this in the lore sources would require:
1) removing most if not all indentation from all the lore sources
2) making sure every <b>, <i>, <code>, <a> tag (and some others I'm sure)
   have exactly the same spacing before and after them...including tabs,
newlines, etc.
3) revamping lore2sphinx to stop doing all the workarounds it currently does

I think it will be much easier to go through the ReST sources (which IMO
will need to
be done anyway) and add spaces or whatever where needed.

Kevin Horn

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100422/6f56d3db/attachment.htm 

From jasonjwwilliams at gmail.com  Sat Apr 24 13:20:32 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Sat, 24 Apr 2010 10:20:32 -0700
Subject: [Twisted-Python] Very interesting....
Message-ID: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>

same example coded in eventlet, gevent, twisted, tornado, nodejs,
thin+eventmachine http://gist.github.com/376416 (by @greut)
Surprising?


From lvh at laurensvh.be  Sat Apr 24 14:16:39 2010
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Sat, 24 Apr 2010 20:16:39 +0200
Subject: [Twisted-Python] Very interesting....
In-Reply-To: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>
References: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>
Message-ID: <s2ocedc0c091004241116tc56bc50ct154c0ebd8be3ff60@mail.gmail.com>

Not the first time we've seen these kinds of benchmarks. Microbenchmarks
rarely give you interesting information about real world apps. Also: ab
ain't a very good HTTP benchmark.

But hey, data points are data points.

lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100424/a0c6b79f/attachment.htm 

From rgacote at appropriatesolutions.com  Sat Apr 24 17:18:38 2010
From: rgacote at appropriatesolutions.com (Ray Cote)
Date: Sat, 24 Apr 2010 17:18:38 -0400 (EDT)
Subject: [Twisted-Python] txriak module released.
Message-ID: <1541138433.551272144614766.JavaMail.rgacote@Raymond-Cotes-MacBook-Pro.local>

Hello Twisted:

An initial release of txriak has been posted to PyPI:
  <http://pypi.python.org/pypi/txriak/0.1.1>

txriak is a Twisted module for communicating with Basho Technology's Riak data store via the HTTP interface. 
Written in Python, it requires Python 2.5 since it uses the yield version of deferreds.
Initial release was written to match as closely as possible the 0.9 riak.py Python module released by Basho Technologies. 

Hope others find this to be useful. 
Look forward to comments and feedback. 
--R


-- 
Ray Cote, President
Appropriate Solutions, Inc.
We Build Software
603.924.6079


From jasonjwwilliams at gmail.com  Sat Apr 24 21:13:18 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Sat, 24 Apr 2010 19:13:18 -0600
Subject: [Twisted-Python] Very interesting....
In-Reply-To: <s2ocedc0c091004241116tc56bc50ct154c0ebd8be3ff60@mail.gmail.com>
References: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>
	<s2ocedc0c091004241116tc56bc50ct154c0ebd8be3ff60@mail.gmail.com>
Message-ID: <t2l3b949f091004241813r5954d5d4ue2f41f9c58dcedb8@mail.gmail.com>

I didn't notice the benchmarks...good catch. I was more interested in
the conciseness or lack thereof with the various frameworks. Very
surprised that Twisted was nearly as clean and easy to read as the
Eventlet example.

-J

On Sat, Apr 24, 2010 at 12:16 PM, Laurens Van Houtven <lvh at laurensvh.be> wrote:
> Not the first time we've seen these kinds of benchmarks. Microbenchmarks
> rarely give you interesting information about real world apps. Also: ab
> ain't a very good HTTP benchmark.
> But hey, data points are data points.
> lvh
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


From jasonjwwilliams at gmail.com  Sat Apr 24 21:16:12 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Sat, 24 Apr 2010 19:16:12 -0600
Subject: [Twisted-Python] txriak module released.
In-Reply-To: <1541138433.551272144614766.JavaMail.rgacote@Raymond-Cotes-MacBook-Pro.local>
References: <1541138433.551272144614766.JavaMail.rgacote@Raymond-Cotes-MacBook-Pro.local>
Message-ID: <z2p3b949f091004241816yc5904f23s83c067cd8bb30a8e@mail.gmail.com>

Put this up on http://twistedmatrix.com/trac/wiki/ProjectsUsingTwisted  ?

On Sat, Apr 24, 2010 at 3:18 PM, Ray Cote
<rgacote at appropriatesolutions.com> wrote:
> Hello Twisted:
>
> An initial release of txriak has been posted to PyPI:
> ?<http://pypi.python.org/pypi/txriak/0.1.1>
>
> txriak is a Twisted module for communicating with Basho Technology's Riak data store via the HTTP interface.
> Written in Python, it requires Python 2.5 since it uses the yield version of deferreds.
> Initial release was written to match as closely as possible the 0.9 riak.py Python module released by Basho Technologies.
>
> Hope others find this to be useful.
> Look forward to comments and feedback.
> --R
>
>
> --
> Ray Cote, President
> Appropriate Solutions, Inc.
> We Build Software
> 603.924.6079
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From exarkun at twistedmatrix.com  Sat Apr 24 21:25:50 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 25 Apr 2010 01:25:50 -0000
Subject: [Twisted-Python] Very interesting....
In-Reply-To: <t2l3b949f091004241813r5954d5d4ue2f41f9c58dcedb8@mail.gmail.com>
References: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>
	<s2ocedc0c091004241116tc56bc50ct154c0ebd8be3ff60@mail.gmail.com>
	<t2l3b949f091004241813r5954d5d4ue2f41f9c58dcedb8@mail.gmail.com>
Message-ID: <20100425012550.2062.1525462067.divmod.xquotient.8@localhost.localdomain>

On 01:13 am, jasonjwwilliams at gmail.com wrote:
>I didn't notice the benchmarks...good catch. I was more interested in
>the conciseness or lack thereof with the various frameworks. Very
>surprised that Twisted was nearly as clean and easy to read as the
>Eventlet example.

This comparison (in the blog post) makes the same mistake that many such 
comparisons make.  The division of libraries into the arbitrary 
categories of "reactor model" and "coroutine" is artificial.

See corotwine for an example of using Twisted and coroutines.  And see 
txwsgi (announced here a week or two ago by Manlio Perillo) for a 
Twisted-based wsgi container which supports applications that look 
almost identical to the eventlet/gevent wsgi applications used in this 
comparison.

And take a look at how eventlet and gevent are implemented, and you'll 
find something that's essentially the same as a Twisted reactor.

Jean-Paul


From exarkun at twistedmatrix.com  Sun Apr 25 00:05:28 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 25 Apr 2010 04:05:28 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1272168328.99.1941929344@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100425/159971b7/attachment.htm 

From sleeepd at gmail.com  Sun Apr 25 05:24:38 2010
From: sleeepd at gmail.com (sleepd)
Date: Sun, 25 Apr 2010 17:24:38 +0800
Subject: [Twisted-Python] SQLite3 gives error when using adbapi
Message-ID: <x2s4fe037b11004250224lb390f15drf15905905fec22a9@mail.gmail.com>

I am try to use a in-memory sqlite db via adbapi, but sqlite gives
error:" OperationalError: *no such table*: test ".

how can I made it work?

This is my test code:

from twisted.internet import reactor
from twisted.enterprise import adbapi

def create():
    db.runOperation("create table
test(id)").addCallback(result).addErrback(error)

def insert():
    db.runOperation("insert into test(id)
values(1)").addCallback(result).addErrback(error)

def select():
    db.runQuery("""SELECT * FROM
test""").addCallback(result).addErrback(error)

def result(l):
    print l

def error(fail):
    print fail

db = adbapi.ConnectionPool("sqlite3", database=":memory:")
reactor.callLater(0.1, create)
reactor.callLater(1, insert)
reactor.callLater(2, select)
reactor.run()
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100425/b18f5ada/attachment-0001.htm 

From exarkun at twistedmatrix.com  Sun Apr 25 10:16:31 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 25 Apr 2010 14:16:31 -0000
Subject: [Twisted-Python] SQLite3 gives error when using adbapi
In-Reply-To: <x2s4fe037b11004250224lb390f15drf15905905fec22a9@mail.gmail.com>
References: <x2s4fe037b11004250224lb390f15drf15905905fec22a9@mail.gmail.com>
Message-ID: <20100425141631.2083.2094314429.divmod.xquotient.3@localhost.localdomain>

On 09:24 am, sleeepd at gmail.com wrote:
>I am try to use a in-memory sqlite db via adbapi, but sqlite gives
>error:" OperationalError: *no such table*: test ".
>
>how can I made it work?
>
>[snip]
>
>db = adbapi.ConnectionPool("sqlite3", database=":memory:")

It doesn't make sense to use a connection pool for an in-memory SQLite3 
database.  Every time you connect to ":memory:", you get a brand new, 
empty database.

If you want this to work, you need to be able to establish multiple 
connections to the same database.  You could do that by making your own 
DB-API 2.0 module that wraps sqlite3 and always hands back the same 
:memory: connection when its connect function is called.

Jean-Paul


From rgacote at appropriatesolutions.com  Mon Apr 26 10:34:46 2010
From: rgacote at appropriatesolutions.com (Ray Cote)
Date: Mon, 26 Apr 2010 10:34:46 -0400 (EDT)
Subject: [Twisted-Python] txriak module released.
In-Reply-To: <z2p3b949f091004241816yc5904f23s83c067cd8bb30a8e@mail.gmail.com>
Message-ID: <8374227.2761272293211414.JavaMail.rgacote@ip-210.Corp.AppropriateSolutions.com>

Will do. 
--Ray

----- Original Message -----
From: "Jason J. W. Williams" <jasonjwwilliams at gmail.com>
To: "Ray Cote" <rgacote at appropriatesolutions.com>, "Twisted general discussion" <twisted-python at twistedmatrix.com>
Sent: Saturday, April 24, 2010 9:16:12 PM GMT -05:00 US/Canada Eastern
Subject: Re: [Twisted-Python] txriak module released.

Put this up on http://twistedmatrix.com/trac/wiki/ProjectsUsingTwisted  ?

On Sat, Apr 24, 2010 at 3:18 PM, Ray Cote
<rgacote at appropriatesolutions.com> wrote:
> Hello Twisted:
>
> An initial release of txriak has been posted to PyPI:
> ?<http://pypi.python.org/pypi/txriak/0.1.1>
>
> txriak is a Twisted module for communicating with Basho Technology's Riak data store via the HTTP interface.
> Written in Python, it requires Python 2.5 since it uses the yield version of deferreds.
> Initial release was written to match as closely as possible the 0.9 riak.py Python module released by Basho Technologies.
>
> Hope others find this to be useful.
> Look forward to comments and feedback.
> --R
>
>
> --
> Ray Cote, President
> Appropriate Solutions, Inc.
> We Build Software
> 603.924.6079
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

-- 
Ray Cote, President
Appropriate Solutions, Inc.
We Build Software
603.924.6079


From arjan at scherpenisse.net  Mon Apr 26 11:07:25 2010
From: arjan at scherpenisse.net (Arjan Scherpenisse)
Date: Mon, 26 Apr 2010 17:07:25 +0200
Subject: [Twisted-Python] OSC protocol implementation
Message-ID: <4BD5AC2D.8060409@scherpenisse.net>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi list,

some months ago, I created an implementation of the OSC protocol [1] in
twisted, together with Alexandre Quessy.

I've put it to review but so far nobody has responded to it:
http://twistedmatrix.com/trac/ticket/4196

As stated in the ticket we'd like to release and maintain this as part
of twisted but we'd also like to release this soon(ish).

So my question is: what are your opinions about including the OSC
protocol as a standard part of twisted and what will be the expected
time frame for such a thing to happen?

Arjan

[1] http://bitbucket.org/arjan/twisted-osc/overview/

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAkvVrC0ACgkQigE4AbflYerTFACbB96SZZ4Q9euf3aEl9ARoiKnw
K/EAn3Vs5otRXgdwohXLHK/S2xbc4rZD
=27wB
-----END PGP SIGNATURE-----


From manlio_perillo at libero.it  Mon Apr 26 11:37:41 2010
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Mon, 26 Apr 2010 17:37:41 +0200
Subject: [Twisted-Python] Very interesting....
In-Reply-To: <20100425012550.2062.1525462067.divmod.xquotient.8@localhost.localdomain>
References: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>	<s2ocedc0c091004241116tc56bc50ct154c0ebd8be3ff60@mail.gmail.com>	<t2l3b949f091004241813r5954d5d4ue2f41f9c58dcedb8@mail.gmail.com>
	<20100425012550.2062.1525462067.divmod.xquotient.8@localhost.localdomain>
Message-ID: <4BD5B345.1010500@libero.it>

exarkun at twistedmatrix.com ha scritto:
> On 01:13 am, jasonjwwilliams at gmail.com wrote:
>> I didn't notice the benchmarks...good catch. I was more interested in
>> the conciseness or lack thereof with the various frameworks. Very
>> surprised that Twisted was nearly as clean and easy to read as the
>> Eventlet example.
> 
> This comparison (in the blog post) makes the same mistake that many such 
> comparisons make.  The division of libraries into the arbitrary 
> categories of "reactor model" and "coroutine" is artificial.
> 
> [...]
> And take a look at how eventlet and gevent are implemented, and you'll 
> find something that's essentially the same as a Twisted reactor.
> 

The only significative difference, IMHO, is that eventlet and gevent are
able to schedule coroutines directly in the main event loop (since they
have full control over it), while with Twisted and Python applications
embedded in C servers like Nginx, you have to return control to the
"framework" (this what the x-wsgiorg.suspend WSGI extension does).


Manlio


From exarkun at twistedmatrix.com  Mon Apr 26 11:51:34 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 26 Apr 2010 15:51:34 -0000
Subject: [Twisted-Python] Very interesting....
In-Reply-To: <4BD5B345.1010500@libero.it>
References: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>
	<s2ocedc0c091004241116tc56bc50ct154c0ebd8be3ff60@mail.gmail.com>
	<t2l3b949f091004241813r5954d5d4ue2f41f9c58dcedb8@mail.gmail.com>
	<20100425012550.2062.1525462067.divmod.xquotient.8@localhost.localdomain>
	<4BD5B345.1010500@libero.it>
Message-ID: <20100426155134.1984.2077016790.divmod.xquotient.3@localhost.localdomain>

On 03:37 pm, manlio_perillo at libero.it wrote:
>exarkun at twistedmatrix.com ha scritto:
>>On 01:13 am, jasonjwwilliams at gmail.com wrote:
>>>I didn't notice the benchmarks...good catch. I was more interested in
>>>the conciseness or lack thereof with the various frameworks. Very
>>>surprised that Twisted was nearly as clean and easy to read as the
>>>Eventlet example.
>>
>>This comparison (in the blog post) makes the same mistake that many 
>>such
>>comparisons make.  The division of libraries into the arbitrary
>>categories of "reactor model" and "coroutine" is artificial.
>>
>>[...]
>>And take a look at how eventlet and gevent are implemented, and you'll
>>find something that's essentially the same as a Twisted reactor.
>
>The only significative difference, IMHO, is that eventlet and gevent 
>are
>able to schedule coroutines directly in the main event loop (since they
>have full control over it),

What does "schedule coroutines directly in the main event loop" mean?
>while with Twisted and Python applications
>embedded in C servers like Nginx, you have to return control to the
>"framework" (this what the x-wsgiorg.suspend WSGI extension does).

It looks like I misremembered the interface provided by txwsgi.  I 
thought it let you switch to another coroutine directly, rather than 
requiring that you yield an empty string after (the equivalent of) 
setting a flag.  This seems to be more because of WSGI constraints than 
anything else, though.

Jean-Paul


From exarkun at twistedmatrix.com  Mon Apr 26 11:56:17 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 26 Apr 2010 15:56:17 -0000
Subject: [Twisted-Python] OSC protocol implementation
In-Reply-To: <4BD5AC2D.8060409@scherpenisse.net>
References: <4BD5AC2D.8060409@scherpenisse.net>
Message-ID: <20100426155617.1984.402492984.divmod.xquotient.13@localhost.localdomain>

On 03:07 pm, arjan at scherpenisse.net wrote:
>-----BEGIN PGP SIGNED MESSAGE-----
>Hash: SHA1
>
>Hi list,
>
>some months ago, I created an implementation of the OSC protocol [1] in
>twisted, together with Alexandre Quessy.
>
>I've put it to review but so far nobody has responded to it:
>http://twistedmatrix.com/trac/ticket/4196

Hi Arjan,

Just a point of procedure, the ticket is not actually in "review" as the 
Twisted development process understands it.  Tickets with the "review" 
keyword are in review, and receive particular attention.  Other tickets 
easily get lost in the large pile of open tickets.
>As stated in the ticket we'd like to release and maintain this as part
>of twisted but we'd also like to release this soon(ish).
>
>So my question is: what are your opinions about including the OSC
>protocol as a standard part of twisted and what will be the expected
>time frame for such a thing to happen?

This is mainly a question of when someone finds it interesting enough to 
review the code.  Personally, while I remember commenting on that ticket 
a couple months ago, I had to go re-read the wikipedia page to remember 
what OSC is.  Since this is a protocol I've never come across before and 
which I can't think of any immediate applications that are relevant to 
me, it's not likely I'll spontaneously go review the code.  Perhaps 
there is another developer who would be interested in this who will do 
so.  Posting on the list is a good way to try to get attention, as is 
asking in the Freenode #twisted irc channel.  If you can't find someone 
who wants to review it just because they're interested, you might be 
able to trade for a review of another ticket.

Hope this helps,
Jean-Paul


From manlio_perillo at libero.it  Mon Apr 26 12:28:22 2010
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Mon, 26 Apr 2010 18:28:22 +0200
Subject: [Twisted-Python] Very interesting....
In-Reply-To: <20100426155134.1984.2077016790.divmod.xquotient.3@localhost.localdomain>
References: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>	<s2ocedc0c091004241116tc56bc50ct154c0ebd8be3ff60@mail.gmail.com>	<t2l3b949f091004241813r5954d5d4ue2f41f9c58dcedb8@mail.gmail.com>	<20100425012550.2062.1525462067.divmod.xquotient.8@localhost.localdomain>	<4BD5B345.1010500@libero.it>
	<20100426155134.1984.2077016790.divmod.xquotient.3@localhost.localdomain>
Message-ID: <4BD5BF26.4070308@libero.it>

exarkun at twistedmatrix.com ha scritto:
> On 03:37 pm, manlio_perillo at libero.it wrote:
>> exarkun at twistedmatrix.com ha scritto:
>>> On 01:13 am, jasonjwwilliams at gmail.com wrote:
>>>> I didn't notice the benchmarks...good catch. I was more interested in
>>>> the conciseness or lack thereof with the various frameworks. Very
>>>> surprised that Twisted was nearly as clean and easy to read as the
>>>> Eventlet example.
>>> This comparison (in the blog post) makes the same mistake that many 
>>> such
>>> comparisons make.  The division of libraries into the arbitrary
>>> categories of "reactor model" and "coroutine" is artificial.
>>>
>>> [...]
>>> And take a look at how eventlet and gevent are implemented, and you'll
>>> find something that's essentially the same as a Twisted reactor.
>> The only significative difference, IMHO, is that eventlet and gevent 
>> are
>> able to schedule coroutines directly in the main event loop (since they
>> have full control over it),
> 
> What does "schedule coroutines directly in the main event loop" mean?


From itamar at itamarst.org  Mon Apr 26 22:55:38 2010
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Tue, 27 Apr 2010 02:55:38 +0000
Subject: [Twisted-Python] OSC protocol implementation
In-Reply-To: <20100426155617.1984.402492984.divmod.xquotient.13@localhost.localdomain>
References: <4BD5AC2D.8060409@scherpenisse.net>
	<20100426155617.1984.402492984.divmod.xquotient.13@localhost.localdomain>
Message-ID: <1272336938.21360.3.camel@pintsize>

On Mon, 2010-04-26 at 15:56 +0000, exarkun at twistedmatrix.com wrote:

> This is mainly a question of when someone finds it interesting enough to 
> review the code.  Personally, while I remember commenting on that ticket 
> a couple months ago, I had to go re-read the wikipedia page to remember 
> what OSC is.  Since this is a protocol I've never come across before and 
> which I can't think of any immediate applications that are relevant to 
> me, it's not likely I'll spontaneously go review the code.  Perhaps 
> there is another developer who would be interested in this who will do 
> so.  Posting on the list is a good way to try to get attention, as is 
> asking in the Freenode #twisted irc channel.  If you can't find someone 
> who wants to review it just because they're interested, you might be 
> able to trade for a review of another ticket.

As a worst case alternative if time becomes an issue, you can release
this as a standalone project (many Twisted libraries have begun
prefixing package names with tx, e.g. txAMPQ). It can always be merged
later with Twisted if there's an interest (as long as the license
doesn't conflict).



From jeandaniel.browne at gmail.com  Tue Apr 27 09:49:56 2010
From: jeandaniel.browne at gmail.com (Jean Daniel)
Date: Tue, 27 Apr 2010 15:49:56 +0200
Subject: [Twisted-Python] draft of an article on Twisted
In-Reply-To: <g2lb61c19e71004270548l92cd200al68fc3773ea276efa@mail.gmail.com>
References: <t2rb61c19e71004270530td3f58b45ge70af3194c7305d3@mail.gmail.com>
	<g2lb61c19e71004270548l92cd200al68fc3773ea276efa@mail.gmail.com>
Message-ID: <r2vb61c19e71004270649q3fe9c2b4s1831d02fe1c28e61@mail.gmail.com>

Hello,

I have written an introductory article to Twisted, and I would be
delighted to see it published on Linux Weekly News some day.

It is available at: http://jdb.github.com/concurrent.html

Here is the plan in brief:
1. what Twisted is: what "network framework" means,
2. what network concurrency is,
3. why "one socket in one thread" won't get you very far: Twisted is
safer, faster and faster
4. what is the reactor, and how it interfaces with the kernel and the
Twisted Protocols
5. what deferreds are (and how they are actually _not_ directly tied
to the reactor)
6. Finally how to write Twisted code that looks sequential (with recap
on yield and decorators)

What I tried to do:

- write for a developer audience who are not particularly expert in
Python nor kernel internals. Python idioms are explained, and I try to
clear the magic by unfolding the big ideas (this audience actually
maps well my friends and colleagues),

- include short, clear cut code snippets to nail the point,

- short enough to fit in a brain cache but complete and precise enough
so developers come out with an understanding of what is under the
hood,

- make the article "flow", by introducing the plan, connecting
sections, using proper english :/ ,


Any comments welcome, and especially:

- it might be too long and present too many things, maybe I should
split it in parts,

- correctness: I simplified the object model (the article mentions
that the factories are out of scope...), but everything said should
still be correct. Also I sometime take guesses at subject I am not an
expert, with the intent to make a clear message: this is a thin line,

- coherence with the Twisted jargon and existings docs, there may be
terms that I use which should be substituted,

- typos and proper english: I think lwn standards are pretty high for
that matter,

The pdf can't be attached, mailman complains that it is more than 40kB.

The scripts are at http://github.com/jdb/jdb.github.com/tree/sources/concurrent/

The git manip for using your favorite editor on the sources is:
? ?git clone git://github.com/jdb/jdb.github.com.git
? ?git branch --track -b sources origin/sources
? ?vi concurrent.rst

Thanks in advance !


From petshmidt at googlemail.com  Tue Apr 27 10:43:27 2010
From: petshmidt at googlemail.com (Pet)
Date: Tue, 27 Apr 2010 16:43:27 +0200
Subject: [Twisted-Python] multiple versions of twisted on same machine
In-Reply-To: <55BF52F4-C317-4ADA-9754-62E2E96FA8DF@twistedmatrix.com>
References: <b460e9631002110441h3a9b91d4kdb6bab01ddadc2b5@mail.gmail.com> 
	<dfbf29b01002110455p33443380o5cfc81aff8829653@mail.gmail.com> 
	<562bcc11002110841w443dbc4bs3c0b6e1bfc68364a@mail.gmail.com> 
	<20100211170535.26099.2118225748.divmod.xquotient.1087@localhost.localdomain>
	<562bcc11002110954v3ed9a9a4u3c20344fecb583cc@mail.gmail.com> 
	<20100212092736.418241dd@hepzibah>
	<55BF52F4-C317-4ADA-9754-62E2E96FA8DF@twistedmatrix.com>
Message-ID: <i2ub460e9631004270743z265bf70blfce9f52c82873605@mail.gmail.com>

On Sat, Feb 13, 2010 at 6:05 AM, Glyph Lefkowitz
<glyph at twistedmatrix.com> wrote:
> On Feb 11, 2010, at 5:27 PM, Timothy Allen wrote:
>
>> On Thu, 11 Feb 2010 11:54:47 -0600
>> Kevin Horn <kevin.horn at gmail.com> wrote:
>>> Not entirely related to this discussion (though not entirely
>>> unrelated), I think that Twisted's whole release/distribution system
>>> needs to be revamped a little. I've been meaning to talk to radix
>>> about this, but haven't found the time...maybe this will give me the
>>> kick in the pants I needed...
>>
>> Oh ho ho ho ho, boy.
>>
>> As one who has tinkered with Twisted's release/distribution system
>> (unsuccessfully so far - see ticket 1696 and 4138), I'd be very
>> interested to hear what you propose.
>
> On the contrary - I think your progress on 1696 especially has been *very* successful! ?perhaps not quite *complete* yet, though :).
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

Hi,

I can't install Twisted in VirtualEnv. Can someone explain what is
wrong, please? Thanks!


(newtwisted)hostname:/usr/local/development/newtwisted/bin# easy_install Twisted
Searching for Twisted
Reading http://pypi.python.org/simple/Twisted/
Reading http://www.twistedmatrix.com
Reading http://twistedmatrix.com/products/download
Reading http://twistedmatrix.com/projects/core/
Reading http://twistedmatrix.com/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/8.2/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/8.1/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/10.0/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/9.0/
Best match: Twisted 10.0.0
Downloading http://tmrc.mit.edu/mirror/twisted/Twisted/10.0/Twisted-10.0.0.tar.bz2
Processing Twisted-10.0.0.tar.bz2
Running Twisted-10.0.0/setup.py -q bdist_egg --dist-dir
/tmp/easy_install-9n_UrX/Twisted-10.0.0/egg-dist-tmp-dt-vez
twisted/runner/portmap.c:10:20: error: Python.h: No such file or directory
twisted/runner/portmap.c:14: error: expected ?=?, ?,?, ?;?, ?asm? or
?__attribute__? before ?*? token
twisted/runner/portmap.c:31: error: expected ?=?, ?,?, ?;?, ?asm? or
?__attribute__? before ?*? token
twisted/runner/portmap.c:45: error: expected ?=?, ?,?, ?;?, ?asm? or
?__attribute__? before ?PortmapMethods?
twisted/runner/portmap.c: In function ?initportmap?:
twisted/runner/portmap.c:55: warning: implicit declaration of function
?Py_InitModule?
twisted/runner/portmap.c:55: error: ?PortmapMethods? undeclared (first
use in this function)
twisted/runner/portmap.c:55: error: (Each undeclared identifier is
reported only once
twisted/runner/portmap.c:55: error: for each function it appears in.)
error: Setup script exited with error: command 'gcc' failed with exit status 1


From exarkun at twistedmatrix.com  Tue Apr 27 11:28:09 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 27 Apr 2010 15:28:09 -0000
Subject: [Twisted-Python] multiple versions of twisted on same machine
In-Reply-To: <i2ub460e9631004270743z265bf70blfce9f52c82873605@mail.gmail.com>
References: <b460e9631002110441h3a9b91d4kdb6bab01ddadc2b5@mail.gmail.com>
	<dfbf29b01002110455p33443380o5cfc81aff8829653@mail.gmail.com>
	<562bcc11002110841w443dbc4bs3c0b6e1bfc68364a@mail.gmail.com>
	<20100211170535.26099.2118225748.divmod.xquotient.1087@localhost.localdomain>
	<562bcc11002110954v3ed9a9a4u3c20344fecb583cc@mail.gmail.com>
	<20100212092736.418241dd@hepzibah>
	<55BF52F4-C317-4ADA-9754-62E2E96FA8DF@twistedmatrix.com>
	<i2ub460e9631004270743z265bf70blfce9f52c82873605@mail.gmail.com>
Message-ID: <20100427152809.2091.1561493714.divmod.xquotient.31@localhost.localdomain>

On 02:43 pm, petshmidt at googlemail.com wrote:
>
>Hi,
>
>I can't install Twisted in VirtualEnv. Can someone explain what is
>wrong, please? Thanks!
>
>
>(newtwisted)hostname:/usr/local/development/newtwisted/bin# 
>easy_install Twisted
>[snip]
>Running Twisted-10.0.0/setup.py -q bdist_egg --dist-dir
>/tmp/easy_install-9n_UrX/Twisted-10.0.0/egg-dist-tmp-dt-vez
>twisted/runner/portmap.c:10:20: error: Python.h: No such file or 
>directory
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

You need to install the Python development headers.  This is usually in 
a package named "python-dev" or "python-devel" or something like that.

Jean-Paul


From petshmidt at googlemail.com  Tue Apr 27 15:12:04 2010
From: petshmidt at googlemail.com (Pet)
Date: Tue, 27 Apr 2010 21:12:04 +0200
Subject: [Twisted-Python] multiple versions of twisted on same machine
In-Reply-To: <20100427152809.2091.1561493714.divmod.xquotient.31@localhost.localdomain>
References: <b460e9631002110441h3a9b91d4kdb6bab01ddadc2b5@mail.gmail.com> 
	<dfbf29b01002110455p33443380o5cfc81aff8829653@mail.gmail.com> 
	<562bcc11002110841w443dbc4bs3c0b6e1bfc68364a@mail.gmail.com> 
	<20100211170535.26099.2118225748.divmod.xquotient.1087@localhost.localdomain>
	<562bcc11002110954v3ed9a9a4u3c20344fecb583cc@mail.gmail.com> 
	<20100212092736.418241dd@hepzibah>
	<55BF52F4-C317-4ADA-9754-62E2E96FA8DF@twistedmatrix.com> 
	<i2ub460e9631004270743z265bf70blfce9f52c82873605@mail.gmail.com> 
	<20100427152809.2091.1561493714.divmod.xquotient.31@localhost.localdomain>
Message-ID: <w2ib460e9631004271212s8d441973ia16a96c4504fcbee@mail.gmail.com>

On Tue, Apr 27, 2010 at 5:28 PM,  <exarkun at twistedmatrix.com> wrote:
> On 02:43 pm, petshmidt at googlemail.com wrote:
>>
>>Hi,
>>
>>I can't install Twisted in VirtualEnv. Can someone explain what is
>>wrong, please? Thanks!
>>
>>
>>(newtwisted)hostname:/usr/local/development/newtwisted/bin#
>>easy_install Twisted
>>[snip]
>>Running Twisted-10.0.0/setup.py -q bdist_egg --dist-dir
>>/tmp/easy_install-9n_UrX/Twisted-10.0.0/egg-dist-tmp-dt-vez
>>twisted/runner/portmap.c:10:20: error: Python.h: No such file or
>>directory
> ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
>
> You need to install the Python development headers. ?This is usually in
> a package named "python-dev" or "python-devel" or something like that.


thanks, it worked!


>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From drew.smathers at gmail.com  Wed Apr 28 12:22:42 2010
From: drew.smathers at gmail.com (Drew Smathers)
Date: Wed, 28 Apr 2010 12:22:42 -0400
Subject: [Twisted-Python] Very interesting....
In-Reply-To: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>
References: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>
Message-ID: <t2l368574aa1004280922z3f8091d5pe570a1207872b661@mail.gmail.com>

On Sat, Apr 24, 2010 at 1:20 PM, Jason J. W. Williams
<jasonjwwilliams at gmail.com> wrote:
> same example coded in eventlet, gevent, twisted, tornado, nodejs,
> thin+eventmachine http://gist.github.com/376416 (by @greut)
> Surprising?
>

In the related blog post the author describes EvenMachine:  "It looks
like super clean Twisted too me."  Looking at the ruby example in
gist, I'm trying very hard to figure out what's super clean about it.

-Drew


From ssteinerx at gmail.com  Wed Apr 28 12:47:43 2010
From: ssteinerx at gmail.com (ssteinerX@gmail.com)
Date: Wed, 28 Apr 2010 12:47:43 -0400
Subject: [Twisted-Python] Very interesting....
In-Reply-To: <t2l368574aa1004280922z3f8091d5pe570a1207872b661@mail.gmail.com>
References: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>
	<t2l368574aa1004280922z3f8091d5pe570a1207872b661@mail.gmail.com>
Message-ID: <6925C376-3D04-4ADD-A2B8-C22A084F6B4D@gmail.com>


On Apr 28, 2010, at 12:22 PM, Drew Smathers wrote:

> On Sat, Apr 24, 2010 at 1:20 PM, Jason J. W. Williams
> <jasonjwwilliams at gmail.com> wrote:
>> same example coded in eventlet, gevent, twisted, tornado, nodejs,
>> thin+eventmachine http://gist.github.com/376416 (by @greut)
>> Surprising?
>> 
> 
> In the related blog post the author describes EvenMachine:  "It looks
> like super clean Twisted too me."  Looking at the ruby example in
> gist, I'm trying very hard to figure out what's super clean about it.

Using "super clean" and "Ruby" together in the same sentence, in relation to anything more complex than "Hello World", especially on the Twisted list, causes tears in the space-time continuum.  

Please stop before something gets really broken.

Thanks,

S



From dr.marc.byrd at gmail.com  Wed Apr 28 12:57:18 2010
From: dr.marc.byrd at gmail.com (Marc Byrd)
Date: Wed, 28 Apr 2010 09:57:18 -0700
Subject: [Twisted-Python] Very interesting....
In-Reply-To: <6925C376-3D04-4ADD-A2B8-C22A084F6B4D@gmail.com>
References: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>
	<t2l368574aa1004280922z3f8091d5pe570a1207872b661@mail.gmail.com>
	<6925C376-3D04-4ADD-A2B8-C22A084F6B4D@gmail.com>
Message-ID: <p2oa33934631004280957u1c38cec2g3cca4475cfeb46de@mail.gmail.com>

I saw a mention of benchmarks, but no numbers... - would be most interested
in seeing those.

And as for EventMachine - I prefer twisted, but if you gotta be in ruby (as
I do increasingly often), it's great.

cheers,


m


On Wed, Apr 28, 2010 at 9:47 AM, ssteinerX at gmail.com <ssteinerx at gmail.com>wrote:

>
> On Apr 28, 2010, at 12:22 PM, Drew Smathers wrote:
>
> > On Sat, Apr 24, 2010 at 1:20 PM, Jason J. W. Williams
> > <jasonjwwilliams at gmail.com> wrote:
> >> same example coded in eventlet, gevent, twisted, tornado, nodejs,
> >> thin+eventmachine http://gist.github.com/376416 (by @greut)
> >> Surprising?
> >>
> >
> > In the related blog post the author describes EvenMachine:  "It looks
> > like super clean Twisted too me."  Looking at the ruby example in
> > gist, I'm trying very hard to figure out what's super clean about it.
>
> Using "super clean" and "Ruby" together in the same sentence, in relation
> to anything more complex than "Hello World", especially on the Twisted list,
> causes tears in the space-time continuum.
>
> Please stop before something gets really broken.
>
> Thanks,
>
> S
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100428/dbf26e4b/attachment.htm 

From glyph at twistedmatrix.com  Wed Apr 28 18:06:58 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 28 Apr 2010 18:06:58 -0400
Subject: [Twisted-Python] draft of an article on Twisted
In-Reply-To: <r2vb61c19e71004270649q3fe9c2b4s1831d02fe1c28e61@mail.gmail.com>
References: <t2rb61c19e71004270530td3f58b45ge70af3194c7305d3@mail.gmail.com>
	<g2lb61c19e71004270548l92cd200al68fc3773ea276efa@mail.gmail.com>
	<r2vb61c19e71004270649q3fe9c2b4s1831d02fe1c28e61@mail.gmail.com>
Message-ID: <B9EF1252-C878-403E-A44C-A76717DA4FA8@twistedmatrix.com>


On Apr 27, 2010, at 9:49 AM, Jean Daniel wrote:

> Hello,

Hi Jean!

> I have written an introductory article to Twisted, and I would be
> delighted to see it published on Linux Weekly News some day.
> 
> It is available at: http://jdb.github.com/concurrent.html

Wow.  This is an incredible, sprawling article :).

I'm glad you wrote it, and I think it introduces quite a bit of material.

I don't really have time to write up a full editorial review, but definitely the strongest impression I got from reading it was this comment which you already made:

> - it might be too long and present too many things, maybe I should split it in parts,

This is really a series of articles; you should expand on each part, one at a time.  It really seems like you're rushing through it in order to cover a lot of ground.

Someone who is deeply committed to learning about Twisted and is planning to spend quite a while reading it would be well-served by your introduction.  However, most people who come to Twisted are actively trying to get something done, and they don't care about the theory too much until they manage to get some basic stuff working.  So you may want to provide some more pointers to tutorials and other practical getting-started guides.

You also focus a bit too much on performance.  While a Twisted server does provide some performance benefits, it's very hard to conclusively measure that one approach is really "faster" than the other; especially since some Twisted idioms (such as the inlineCallbacks example at the bottom of your article) are just as "slow".

There are lots of benchmarks showing various different performance characteristics of multithreaded vs. multiprocess vs. event-driven code, and with modern optimizations in each of these architectures, which of these is really the fastest changes from year to year.  If you were to take some benchmarks of Twisted vs. code using the 'multiprocessing' module, for example, you might get some surprising results (and ones which would vary wildly depending on which platform you were using and what exact algorithms you used in each example).

If you want to focus on performance, you should include benchmarks and measurements which back up your claims.  Personally, I'd focus more on the safety and comprehensibility discussion.  Even in the realm of performance, the issue isn't that Twisted is really *faster*, per se, it's that the structure of the code is easy to understand and modify, and therefore easier to optimize when you know what your bottlenecks really are.  My favorite example of this is "try to write a failing unit test for a race condition in multithreaded code".  In most Twisted applications, you can force the order of execution in your test so that you can verify the race going one way, then the other, but with threads it's very, very tricky (and sometimes not really feasible, or even possible).


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100428/0c956214/attachment.htm 

From chris at simplistix.co.uk  Thu Apr 29 11:48:55 2010
From: chris at simplistix.co.uk (Chris Withers)
Date: Thu, 29 Apr 2010 16:48:55 +0100
Subject: [Twisted-Python] getting "connection per thread" behaviour
Message-ID: <4BD9AA67.8020902@simplistix.co.uk>

Hi All,

I was asking about this on irc but had to leave in a hurry so thought 
I'd mail here...

So, I have a pool of wsgi threads being run by Twisted's wsgi server 
that want to send stomp messages. The stomp client is Twisted-based 
(http://code.google.com/p/broadwick/source/browse/trunk/broadwick/messaging/twistedstomp.py). 
I want to have as few stomp connections as possible, maxing out at one 
per thread.

Bonus complications:

- each wsgi thread has a logical transaction, that needs to marry up 
with the stomp logical transaction, so I can't just have one stomp 
connection per thread

- I don't know how much overhead there is in creating the stomp 
connection, so I'd like to open as few as possible but keep them open 
and re-use them across wsgi requests.

I found:

http://pypi.python.org/pypi/txconnpool

Anyone know how good that is and if it's useful here?

All help gratefully received!

Chris



From ddwiggins at advpubtech.com  Thu Apr 29 15:02:00 2010
From: ddwiggins at advpubtech.com (Don Dwiggins)
Date: Thu, 29 Apr 2010 12:02:00 -0700
Subject: [Twisted-Python] XMLRPC server: nested handlers?
Message-ID: <hrcl39$i61$1@dough.gmane.org>

I have an XMLRPC server, currently with two subhandlers.  One of them is 
getting quite large (over 120 "xmlrpc_" methods plus helpers), and I'd 
like to break it up into "sub-subhandlers".

http://twistedmatrix.com/documents/current/web/howto/xmlrpc.html#auto2 
says that you can do this "to arbitrary depths".  It's not quite clear 
how to set this up, however.  Before I start experimenting, I thought 
I'd ask if anyone has done this, and can show a bit of code for it.

TIA,
-- 
Don Dwiggins
Advanced Publishing Technology



From jeandaniel.browne at gmail.com  Thu Apr 29 17:13:41 2010
From: jeandaniel.browne at gmail.com (Jean Daniel)
Date: Thu, 29 Apr 2010 23:13:41 +0200
Subject: [Twisted-Python] draft of an article on Twisted
In-Reply-To: <B9EF1252-C878-403E-A44C-A76717DA4FA8@twistedmatrix.com>
References: <t2rb61c19e71004270530td3f58b45ge70af3194c7305d3@mail.gmail.com>
	<g2lb61c19e71004270548l92cd200al68fc3773ea276efa@mail.gmail.com>
	<r2vb61c19e71004270649q3fe9c2b4s1831d02fe1c28e61@mail.gmail.com>
	<B9EF1252-C878-403E-A44C-A76717DA4FA8@twistedmatrix.com>
Message-ID: <i2zb61c19e71004291413k21f16b8fq7f1d558a1d6a684c@mail.gmail.com>

thanks for your feedback, it helps.



On Thu, Apr 29, 2010 at 12:06 AM, Glyph Lefkowitz
<glyph at twistedmatrix.com> wrote:
>
> On Apr 27, 2010, at 9:49 AM, Jean Daniel wrote:
>
> Hello,
>
> Hi Jean!
>
> I have written an introductory article to Twisted, and I would be
> delighted to see it published on Linux Weekly News some day.
>
> It is available at: http://jdb.github.com/concurrent.html
>
> Wow. ?This is an incredible, sprawling article :).
> I'm glad you wrote it, and I think it introduces quite a bit of material.
> I don't really have time to write up a full editorial review, but definitely
> the strongest impression I got from reading it was this comment which you
> already made:
>
> - it might be too long and present too many things, maybe I should?split it
> in parts,
>
> This is really a series of articles; you should expand on each part, one at
> a time. ?It really seems like you're rushing through it in order to cover a
> lot of ground.
>
> Someone who is deeply committed to learning about Twisted and is planning to
> spend quite a while reading it would be well-served by your introduction.
> ?However, most people who come to Twisted are actively trying to get
> something done, and they don't care about the theory too much until they
> manage to get some basic stuff working. ?So you may want to provide some
> more pointers to tutorials and other practical getting-started guides.
> You also focus a bit too much on performance. ?While a Twisted server does
> provide some performance benefits, it's very hard to conclusively measure
> that one approach is really "faster" than the other; especially since some
> Twisted idioms (such as the inlineCallbacks example at the bottom of your
> article) are just as "slow".
> There are lots of benchmarks showing various different performance
> characteristics of multithreaded vs. multiprocess vs. event-driven code, and
> with modern optimizations in each of these architectures, which of these is
> really the fastest changes from year to year. ?If you were to take some
> benchmarks of Twisted vs. code using the 'multiprocessing' module, for
> example, you might get some surprising results (and ones which would vary
> wildly depending on which platform you were using and what exact algorithms
> you used in each example).
> If you want to focus on performance, you should include benchmarks and
> measurements which back up your claims. ?Personally,?I'd focus more on the
> safety and comprehensibility discussion. ?Even in the realm of performance,
> the issue isn't that Twisted is really *faster*, per se, it's that the
> structure of the code is easy to understand and modify, and therefore easier
> to optimize when you know what your bottlenecks really are. ?My favorite
> example of this is "try to write a failing unit test for a race condition in
> multithreaded code". ?In most Twisted applications, you can force the order
> of execution in your test so that you can verify the race going one way,
> then the other, but with threads it's very, very tricky (and sometimes not
> really feasible, or even possible).
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


From gabriel at cttc.upc.edu  Fri Apr 30 06:07:35 2010
From: gabriel at cttc.upc.edu (Gabriel =?ISO-8859-1?Q?Gonz=E1lez?=)
Date: Fri, 30 Apr 2010 12:07:35 +0200
Subject: [Twisted-Python] Detecting idle connection with perspective broker
Message-ID: <1272622055.3109.41.camel@pcmlevi.cttc.org>

Hi there,
I wrote a small server application with PB but now I have some problem
with client disconnection. When I have a idle connection, the logout
method at server never is called (this method let me have a list of
current logged users) and then client appears always connected to
server.

I can see the same issue with the chatserver example from perspective
broker doc with detached method. 

class ChatRealm:
     implements(portal.IRealm)
     def requestAvatar(self, avatarID, mind, *interfaces):
         assert pb.IPerspective in interfaces
         avatar = User(avatarID)
         avatar.server = self.server
         avatar.attached(mind)
         return pb.IPerspective, avatar, lambda
a=avatar:a.detached(mind)

How can I detect that idle connection clients to call detached method?

Thanks!










-- 
Aquest missatge ha estat analitzat per MailScanner
a la cerca de virus i d'altres continguts perillosos,
i es considera que est? net.



From konrads.smelkovs at gmail.com  Fri Apr 30 07:23:18 2010
From: konrads.smelkovs at gmail.com (Konrads Smelkovs)
Date: Fri, 30 Apr 2010 14:23:18 +0300
Subject: [Twisted-Python] Detecting idle connection with perspective
	broker
In-Reply-To: <1272622055.3109.41.camel@pcmlevi.cttc.org>
References: <1272622055.3109.41.camel@pcmlevi.cttc.org>
Message-ID: <u2wd79700b91004300423v8af1384u8e0a22d620919286@mail.gmail.com>

A simple solution could be to implement a ping method with client and have
server ping client once every N seconds. At the same time, fire a delayed
call for N+5 seconds. if delayed call is executed first, drop connection.
--
Konrads Smelkovs
Applied IT sorcery.


2010/4/30 Gabriel Gonz?lez <gabriel at cttc.upc.edu>

> Hi there,
> I wrote a small server application with PB but now I have some problem
> with client disconnection. When I have a idle connection, the logout
> method at server never is called (this method let me have a list of
> current logged users) and then client appears always connected to
> server.
>
> I can see the same issue with the chatserver example from perspective
> broker doc with detached method.
>
> class ChatRealm:
>     implements(portal.IRealm)
>     def requestAvatar(self, avatarID, mind, *interfaces):
>         assert pb.IPerspective in interfaces
>         avatar = User(avatarID)
>         avatar.server = self.server
>         avatar.attached(mind)
>         return pb.IPerspective, avatar, lambda
> a=avatar:a.detached(mind)
>
> How can I detect that idle connection clients to call detached method?
>
> Thanks!
>
>
>
>
>
>
>
>
>
>
> --
> Aquest missatge ha estat analitzat per MailScanner
> a la cerca de virus i d'altres continguts perillosos,
> i es considera que est? net.
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20100430/876b555d/attachment.htm 

From wthie at thiengineering.ch  Thu Apr  1 01:12:31 2010
From: wthie at thiengineering.ch (Werner Thie)
Date: Thu, 01 Apr 2010 09:12:31 +0200
Subject: [Twisted-Python] Noob alert - Looking for a framework
 for	creating a long polling service
In-Reply-To: <B995CBB9-AED4-49F7-8589-88DBDAE391AD@gmail.com>
References: <o2g39f0ac351003310952s6b6e01e4x117dae4cf62be7b6@mail.gmail.com>	<v2x95bb10691003311326id1255c01ucba54d3c9ef38c51@mail.gmail.com>
	<B995CBB9-AED4-49F7-8589-88DBDAE391AD@gmail.com>
Message-ID: <4BB4475F.1080401@thiengineering.ch>

Hi,

I'm a long term user of twisted with nevow on top mainly using the 
athena part with LivePage and LiveElement for RPC between Python and 
JScript. nevow/athena opens up a whole new world of transparently 
calling from server to browser and vice versa on a permanent connection. 
With a slight change (three lines) a nevow/athena 'permanent connection' 
also survives network outages of up to a minute like the ones 
experienced in mobile 3G networks.

Recently I've combined twisted/nevow with qooxdoo http://www.qooxdoo.org 
allowing injection/removal of widgets including code into a livepage 
thus providing not only a 'real app' but a real desktop user experience 
in a browser.

If you want to have a look at some demos please feel free to hit

http://nqx.thieprojects.ch          minimal nevow/qooxdoo samples
http://telinfo.thieprojects.ch      Swiss telephone book lookup
http://differenzler.thieprojects.ch Minmal Jass cardgame

To see code (use Firebug, JScript is not obfuscated) done starting from 
2006 till recently.

Part of the above mentioned technology was used in a larger card game 
setup for the Swiss National TV providing a multi player game site with 
various games of Jass. Currently around 25k games are played by about 
70k users a day.

http://www.samschtigjass.ch

The 'Einzelspieler-Version' can be played without logging in.

I've also written experimental stuff bridging XMPP and browser with 
nevow/athena, using XMPP/pubsub for real time data exchange, though for 
this I have no public available samples.

This is definitely a plug but after four years of working in the field 
of RIAs it seems to me that nevow/athena is the most advanced of all 
implementations revolving around 'long polling', permanent connections, 
websockets and related technologies. It solves a host of problems which 
you have to tackle when using other technologies.

HTH, Werner


On 31.03.2010 22:58, ssteinerX at gmail.com wrote:
>
> On Mar 31, 2010, at 4:26 PM, Reza Lotun wrote:
>
>> Hi,
>>
>>> I am looking for a framework for doing a long polling service where :
>>>
>>> clients would connect to a soecific 'channel' and wait for a response
>>>
>>> Where a client admin would push a response only to clients connected to the
>>> same channel
>>
>> There is a project built on top of Twisted that does exactly this,
>> called Orbited (http://orbited.org/). It works, and I use it for
>> internal real-time stats web pages. The one caveat I have with it is
>> that it recently appears to be somewhat inactive - though I use it so
>> much I might fork it and continue development ;-)
>
> It seems to have completely stalled just before the big 0.8 refactoring effort.
>
> Have you continued, or do you plan to continue development where it was left off?
>
> They all seem to have gone off to play with node.js instead.
>
>> If you're looking for a scalable, long-polling queue broadcaster *in
>> general*, I highly suggest nginx_http_push - an addon module for the
>> popular C-based asynchronous web server nginx
>> (http://pushmodule.slact.net/).
>
> Very cool, I hadn't seen that before.
>
> S
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From jml at mumak.net  Thu Apr  1 07:11:05 2010
From: jml at mumak.net (Jonathan Lange)
Date: Thu, 1 Apr 2010 14:11:05 +0100
Subject: [Twisted-Python] ~twisted-dev on Launchpad will now receive mail
	about bugs filed on Ubuntu's Twisted
Message-ID: <r2od06a5cd31004010611ke8beadc5qf6ac7bacb729445f@mail.gmail.com>

Hello all,

I've subscribed the Launchpad team https://launchpad.net/~twisted-dev
to receive mail about bugs on the "twisted" source package in Ubuntu.

It will add a small amount of email traffic to anyone who's a member
of that team. However, it will let us know about bugs that Ubuntu
users experience that are due to Twisted.

I'll gladly unsubscribe the team if folk complain loudly enough.

Thanks,
jml



From jasonjwwilliams at gmail.com  Thu Apr  1 19:20:57 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Thu, 1 Apr 2010 19:20:57 -0600
Subject: [Twisted-Python] Inline Callbacks
Message-ID: <k2r3b949f091004011820x8c9468e4x525a33968c1af1cd@mail.gmail.com>

Would it be fair to say that when developing code that utilizes
inlineCallbacks, your function is a generator that returns a deferred
whose callback is the coroutine that's yielding?

-J



From elihusmails at gmail.com  Thu Apr  1 20:38:03 2010
From: elihusmails at gmail.com (Mark)
Date: Thu, 1 Apr 2010 22:38:03 -0400
Subject: [Twisted-Python] session management
In-Reply-To: <20100331213952.2792.778856419.divmod.xquotient.1975@localhost.localdomain>
References: <9f066ee91003301347k16cdd27bo7e8592a6ace38b5@mail.gmail.com>
	<31448.63.107.91.99.1269988929.squirrel@webmail.zoteca.com>
	<9f066ee91003302110r3ed646ffla2821f14991deb55@mail.gmail.com>
	<20100331213952.2792.778856419.divmod.xquotient.1975@localhost.localdomain>
Message-ID: <n2j9f066ee91004011938rf3ccddbbgab16c15fa256bda8@mail.gmail.com>

Thanks for the help, but how do I access the session?  What would be
the method call to put the data into a session for instance?




On Wed, Mar 31, 2010 at 5:39 PM,  <exarkun at twistedmatrix.com> wrote:
> On 04:10 am, elihusmails at gmail.com wrote:
>>On Tue, Mar 30, 2010 at 6:42 PM, Itamar Turner-Trauring
>><itamar at itamarst.org> wrote:
>>>>Greetings,
>>>>
>>>>I am new to this list and twisted. I have worked with some systems
>>>>similar to twisted, notably Apache MINA. I am trying to find out how
>>>>to set up my server to support sessions for multiple clients. Right
>>>>now I am simply developing a telnet-like application to learn twisted
>>>>but cannot figure out how to manage sessions for the remote clients.
>>>
>>>Each Protocol instance stays alive for the lifetime of the connection
>>>it
>>>is matched to (via the transport). So just store attributes on the
>>>Protocol instance.
>>
>>I figured as much that twisted supported the notion of sessions. Are
>>there any examples that show me how to access them and
>>add/remove/update attributes in the session?
>
> Protocol instances are normal Python objects. You can use normal Python
> attributes on them in the normal way. For example:
>
>  from twisted.internet.protocol import Protocol
>
>  class Counter(Protocol):
>    """
>    Keep track of how many times data is delivered over a connection.
>    """
>    def connectionMade(self):
>      self.count = 0
>
>    def dataReceived(self, bytes):
>      self.count += 1
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From exarkun at twistedmatrix.com  Thu Apr  1 21:09:10 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 02 Apr 2010 03:09:10 -0000
Subject: [Twisted-Python] session management
In-Reply-To: <n2j9f066ee91004011938rf3ccddbbgab16c15fa256bda8@mail.gmail.com>
References: <9f066ee91003301347k16cdd27bo7e8592a6ace38b5@mail.gmail.com>
	<31448.63.107.91.99.1269988929.squirrel@webmail.zoteca.com>
	<9f066ee91003302110r3ed646ffla2821f14991deb55@mail.gmail.com>
	<20100331213952.2792.778856419.divmod.xquotient.1975@localhost.localdomain>
	<n2j9f066ee91004011938rf3ccddbbgab16c15fa256bda8@mail.gmail.com>
Message-ID: <20100402030910.2779.593073343.divmod.xquotient.10@localhost.localdomain>

On 02:38 am, elihusmails at gmail.com wrote:
>On Wed, Mar 31, 2010 at 5:39 PM,  <exarkun at twistedmatrix.com> wrote:
>>On 04:10 am, elihusmails at gmail.com wrote:
>>>On Tue, Mar 30, 2010 at 6:42 PM, Itamar Turner-Trauring
>>><itamar at itamarst.org> wrote:
>>>>>Greetings,
>>>>>
>>>>>I am new to this list and twisted. I have worked with some systems
>>>>>similar to twisted, notably Apache MINA. I am trying to find out 
>>>>>how
>>>>>to set up my server to support sessions for multiple clients. 
>>>>>Right
>>>>>now I am simply developing a telnet-like application to learn 
>>>>>twisted
>>>>>but cannot figure out how to manage sessions for the remote 
>>>>>clients.
>>>>
>>>>Each Protocol instance stays alive for the lifetime of the 
>>>>connection
>>>>it
>>>>is matched to (via the transport). So just store attributes on the
>>>>Protocol instance.
>>>
>>>I figured as much that twisted supported the notion of sessions. Are
>>>there any examples that show me how to access them and
>>>add/remove/update attributes in the session?
>>
>>Protocol instances are normal Python objects. You can use normal 
>>Python
>>attributes on them in the normal way. For example:
>>
>> from twisted.internet.protocol import Protocol
>>
>> class Counter(Protocol):
>>   """
>>   Keep track of how many times data is delivered over a 
>>connection.
>>   """
>>   def connectionMade(self):
>>     self.count = 0
>>
>>   def dataReceived(self, bytes):
>>     self.count += 1
>
>Thanks for the help, but how do I access the session?  What would be
>the method call to put the data into a session for instance?

The protocol instance *is* the session (or, as I would normally say "the 
protocol instance has a one to one relationship with a connection", but 
I think that's what you mean when you say "the session").  You can 
define whichever methods and attributes you want.

It's a regular Python object.  All the regular stuff you know about 
Python objects applies.

Jean-Paul



From radix at twistedmatrix.com  Thu Apr  1 22:33:51 2010
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 1 Apr 2010 23:33:51 -0500
Subject: [Twisted-Python] Inline Callbacks
In-Reply-To: <k2r3b949f091004011820x8c9468e4x525a33968c1af1cd@mail.gmail.com>
References: <k2r3b949f091004011820x8c9468e4x525a33968c1af1cd@mail.gmail.com>
Message-ID: <r2h60ed19d41004012133qf7b58611m7bf9da7d88ca5738@mail.gmail.com>

On Thu, Apr 1, 2010 at 8:20 PM, Jason J. W. Williams
<jasonjwwilliams at gmail.com> wrote:
> Would it be fair to say that when developing code that utilizes
> inlineCallbacks, your function is a generator that returns a deferred
> whose callback is the coroutine that's yielding?

It pays to be very very specific about all the different objects and
interactions going on with generators in Python and especially with
inlineCallbacks to avoid confusion.There are a couple of inaccuracies
in this statement, some which I think are just about poor wording and
some which come from misunderstanding.

In Python, there are generator functions and there are generators.
Calling a generator function returns a generator, which has next() and
send() methods. Generators do not return things, though a generator's
next() or send() methods do (I say this because you mentioned a
"generator that returns a deferred").

Also, there's nothing called a "coroutine" that's related to
inlineCallbacks at all, and the word is fraught with ambiguities in
Python, so it's best to just avoid it entirely.

In inlineCallbacks, nobody but the person writing the
inlineCallbacks-using function knows that there's a generator
involved. The person calling your inlineCallbacks-using function can't
see any generators; they just get a Deferred object which fires when
the generator is exhausted. The interesting part is that
inlineCallbacks is the thing responsible for iterating the generator,
not user-code. It is responsible for calling .send() on the generator
object when previously yielded deferreds have fired. The value of the
Deferred returned will be whatever is passed to returnValue in the
inlineCallbacks-using function.

-- 
Christopher Armstrong
http://radix.twistedmatrix.com/
http://planet-if.com/



From jasonjwwilliams at gmail.com  Fri Apr  2 00:46:57 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Fri, 2 Apr 2010 00:46:57 -0600
Subject: [Twisted-Python] Inline Callbacks
In-Reply-To: <r2h60ed19d41004012133qf7b58611m7bf9da7d88ca5738@mail.gmail.com>
References: <k2r3b949f091004011820x8c9468e4x525a33968c1af1cd@mail.gmail.com>
	<r2h60ed19d41004012133qf7b58611m7bf9da7d88ca5738@mail.gmail.com>
Message-ID: <n2p3b949f091004012346occ284d29t5c7aa54e8d6a331b@mail.gmail.com>

Hi Christopher,

Apologize for the sloppy language. So would this be a better way of putting it?

Assuming a function func_a that has the inlineCallbacks decorator...

If func_a were added as a callback for a deferred (deferred 1), when
func_a was called another deferred would be returned (deferred 2)
which would only fire once func_a had run to the end of the function
and returned.

While func_a is running, every time yield is called, this would
operate similarly to writing a separate callback for the contents of
each of those yield statements and chaining them normally to each
other as callbacks.

That is this:

@defer.inlineCallbacks
def func_a(value):
   num = yield do_something(value)
   num2 = yield do_something_more(num)
   return num2

is equivalent to:

def func_a(value):
    return do_something(value).addCallback(cb_step_1)

def cb_step_1(num):
    return do_something_more(num).addCallback(cb_step_2)

def cb_step_2(num2):
    return num2


Thank you very much for your help in understanding this.  I've always
used a combination of deferreds and callbacks/errbacks to this point.

-J


On Thu, Apr 1, 2010 at 10:33 PM, Christopher Armstrong
<radix at twistedmatrix.com> wrote:
> On Thu, Apr 1, 2010 at 8:20 PM, Jason J. W. Williams
> <jasonjwwilliams at gmail.com> wrote:
>> Would it be fair to say that when developing code that utilizes
>> inlineCallbacks, your function is a generator that returns a deferred
>> whose callback is the coroutine that's yielding?
>
> It pays to be very very specific about all the different objects and
> interactions going on with generators in Python and especially with
> inlineCallbacks to avoid confusion.There are a couple of inaccuracies
> in this statement, some which I think are just about poor wording and
> some which come from misunderstanding.
>
> In Python, there are generator functions and there are generators.
> Calling a generator function returns a generator, which has next() and
> send() methods. Generators do not return things, though a generator's
> next() or send() methods do (I say this because you mentioned a
> "generator that returns a deferred").
>
> Also, there's nothing called a "coroutine" that's related to
> inlineCallbacks at all, and the word is fraught with ambiguities in
> Python, so it's best to just avoid it entirely.
>
> In inlineCallbacks, nobody but the person writing the
> inlineCallbacks-using function knows that there's a generator
> involved. The person calling your inlineCallbacks-using function can't
> see any generators; they just get a Deferred object which fires when
> the generator is exhausted. The interesting part is that
> inlineCallbacks is the thing responsible for iterating the generator,
> not user-code. It is responsible for calling .send() on the generator
> object when previously yielded deferreds have fired. The value of the
> Deferred returned will be whatever is passed to returnValue in the
> inlineCallbacks-using function.
>
> --
> Christopher Armstrong
> http://radix.twistedmatrix.com/
> http://planet-if.com/
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From elihusmails at gmail.com  Fri Apr  2 07:17:31 2010
From: elihusmails at gmail.com (Mark)
Date: Fri, 2 Apr 2010 09:17:31 -0400
Subject: [Twisted-Python] session management
In-Reply-To: <20100402030910.2779.593073343.divmod.xquotient.10@localhost.localdomain>
References: <9f066ee91003301347k16cdd27bo7e8592a6ace38b5@mail.gmail.com>
	<31448.63.107.91.99.1269988929.squirrel@webmail.zoteca.com>
	<9f066ee91003302110r3ed646ffla2821f14991deb55@mail.gmail.com>
	<20100331213952.2792.778856419.divmod.xquotient.1975@localhost.localdomain>
	<n2j9f066ee91004011938rf3ccddbbgab16c15fa256bda8@mail.gmail.com>
	<20100402030910.2779.593073343.divmod.xquotient.10@localhost.localdomain>
Message-ID: <g2h9f066ee91004020617naf3db853i2eb07f456e7cd18@mail.gmail.com>

Thanks.   My confusion is just in the naming of things...



On Thu, Apr 1, 2010 at 11:09 PM,  <exarkun at twistedmatrix.com> wrote:
> On 02:38 am, elihusmails at gmail.com wrote:
>>
>> On Wed, Mar 31, 2010 at 5:39 PM, <exarkun at twistedmatrix.com> wrote:
>>>
>>> On 04:10 am, elihusmails at gmail.com wrote:
>>>>
>>>> On Tue, Mar 30, 2010 at 6:42 PM, Itamar Turner-Trauring
>>>> <itamar at itamarst.org> wrote:
>>>>>>
>>>>>> Greetings,
>>>>>>
>>>>>> I am new to this list and twisted. I have worked with some systems
>>>>>> similar to twisted, notably Apache MINA. I am trying to find out how
>>>>>> to set up my server to support sessions for multiple clients. Right
>>>>>> now I am simply developing a telnet-like application to learn twisted
>>>>>> but cannot figure out how to manage sessions for the remote clients.
>>>>>
>>>>> Each Protocol instance stays alive for the lifetime of the connection
>>>>> it
>>>>> is matched to (via the transport). So just store attributes on the
>>>>> Protocol instance.
>>>>
>>>> I figured as much that twisted supported the notion of sessions. Are
>>>> there any examples that show me how to access them and
>>>> add/remove/update attributes in the session?
>>>
>>> Protocol instances are normal Python objects. You can use normal Python
>>> attributes on them in the normal way. For example:
>>>
>>>  from twisted.internet.protocol import Protocol
>>>
>>>  class Counter(Protocol):
>>>    """
>>>    Keep track of how many times data is delivered over a connection.
>>>    """
>>>    def connectionMade(self):
>>>      self.count = 0
>>>
>>>    def dataReceived(self, bytes):
>>>      self.count += 1
>>
>> Thanks for the help, but how do I access the session? What would be
>> the method call to put the data into a session for instance?
>
> The protocol instance *is* the session (or, as I would normally say "the
> protocol instance has a one to one relationship with a connection", but I
> think that's what you mean when you say "the session"). You can define
> whichever methods and attributes you want.
>
> It's a regular Python object. All the regular stuff you know about Python
> objects applies.
>
> Jean-Paul
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



From rlotun at gmail.com  Sat Apr  3 07:03:18 2010
From: rlotun at gmail.com (Reza Lotun)
Date: Sat, 3 Apr 2010 14:03:18 +0100
Subject: [Twisted-Python] Noob alert - Looking for a framework for
	creating a long polling service
In-Reply-To: <B995CBB9-AED4-49F7-8589-88DBDAE391AD@gmail.com>
References: <o2g39f0ac351003310952s6b6e01e4x117dae4cf62be7b6@mail.gmail.com>
	<v2x95bb10691003311326id1255c01ucba54d3c9ef38c51@mail.gmail.com>
	<B995CBB9-AED4-49F7-8589-88DBDAE391AD@gmail.com>
Message-ID: <s2r95bb10691004030603v1ac6900csef26757512aa4397@mail.gmail.com>

Hi Steve,

> Have you continued, or do you plan to continue development where it was left off?

Well, it's something I've only be toying with. I can handle all the
specific Twisted fixes I'd like to make:
  - handling lost connections gracefully
  - proper use of twistd and daemonization
  - massive code cleanups

The only problem is that I'm not that knowledgeable about the
Javascript browser hacks they've employed - their Orbited.js is more
than half "magic" to me (probably due to me not having an opportunity
to work on a large js project). It's something that I'd like to get
into, if someone is willing to take the lead on the javascript side.
It could potentially be as simple as slotting in js.io
(http://github.com/mcarter/js.io), which Orbited.js has apparently
become, and which appears to have been the plan for Orbited 0.8.

> They all seem to have gone off to play with node.js instead.

I don't *really* blame them, considering most of the project's merit
lay in the Javascript realm, and node.js is basically a (less
featurful) version of Twisted for Javascript (of course with the added
bonus of using a heavily JITed and optimized Javascript VM).

> Very cool, I hadn't seen that before.

Yes, very neat. Haven't done much with it, but I think it's a real
winner when you're doing something simple like long-polling/
broadcasting from a queue.

Cheers,
Reza

-- 
Reza Lotun
mobile: +44 (0)7521 310 763
email:  rlotun at gmail.com
work:   reza at tweetdeck.com
twitter: @rlotun



From clemesha at gmail.com  Sat Apr  3 12:37:59 2010
From: clemesha at gmail.com (Alex Clemesha)
Date: Sat, 3 Apr 2010 11:37:59 -0700
Subject: [Twisted-Python] Noob alert - Looking for a framework for
	creating a long polling service
In-Reply-To: <s2r95bb10691004030603v1ac6900csef26757512aa4397@mail.gmail.com>
References: <o2g39f0ac351003310952s6b6e01e4x117dae4cf62be7b6@mail.gmail.com>
	<v2x95bb10691003311326id1255c01ucba54d3c9ef38c51@mail.gmail.com>
	<B995CBB9-AED4-49F7-8589-88DBDAE391AD@gmail.com>
	<s2r95bb10691004030603v1ac6900csef26757512aa4397@mail.gmail.com>
Message-ID: <g2vd272f0691004031137y2bb6135kfc62fa4490fa7dcc@mail.gmail.com>

On Sat, Apr 3, 2010 at 6:03 AM, Reza Lotun <rlotun at gmail.com> wrote:
> Hi Steve,
>
>> Have you continued, or do you plan to continue development where it was left off?
>
> Well, it's something I've only be toying with. I can handle all the
> specific Twisted fixes I'd like to make:
> - handling lost connections gracefully
> - proper use of twistd and daemonization
> - massive code cleanups

I would very much support you continuing development on Orbited.
In fact, I believe I can help, or already have patches for most of the
above issues you mention.  A lot of this is result of my "Hotdot" project,
"Create realtime webapps using Django + Orbited + Twisted":
http://github.com/clemesha/hotdot

Specifically, see here for Orbited and twistd working together:
http://github.com/clemesha/hotdot/blob/master/server.py

and see the below for patches that improve handling lost connections gracefully:
http://gist.github.com/256582

Finally, it would be awesome if you put up your improvements on Github
(just a suggestion :-),
then I can easily fork and starting adding improvements, and you can
pull and we can move this forward.

-Alex


p.s. I haven't found many issues with the frontend JavaScript code, but if you
have specific issues that you could point out, I'd love to try to help.




>
> The only problem is that I'm not that knowledgeable about the
> Javascript browser hacks they've employed - their Orbited.js is more
> than half "magic" to me (probably due to me not having an opportunity
> to work on a large js project). It's something that I'd like to get
> into, if someone is willing to take the lead on the javascript side.
> It could potentially be as simple as slotting in js.io
> (http://github.com/mcarter/js.io), which Orbited.js has apparently
> become, and which appears to have been the plan for Orbited 0.8.
>
>> They all seem to have gone off to play with node.js instead.
>
> I don't *really* blame them, considering most of the project's merit
> lay in the Javascript realm, and node.js is basically a (less
> featurful) version of Twisted for Javascript (of course with the added
> bonus of using a heavily JITed and optimized Javascript VM).
>
>> Very cool, I hadn't seen that before.
>
> Yes, very neat. Haven't done much with it, but I think it's a real
> winner when you're doing something simple like long-polling/
> broadcasting from a queue.
>
> Cheers,
> Reza
>
> --
> Reza Lotun
> mobile: +44 (0)7521 310 763
> email: rlotun at gmail.com
> work:  reza at tweetdeck.com
> twitter: @rlotun
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
Alex Clemesha
clemesha.org



From ssteinerx at gmail.com  Sat Apr  3 13:10:17 2010
From: ssteinerx at gmail.com (ssteinerX@gmail.com)
Date: Sat, 3 Apr 2010 15:10:17 -0400
Subject: [Twisted-Python] Noob alert - Looking for a framework for
	creating a long polling service
In-Reply-To: <g2vd272f0691004031137y2bb6135kfc62fa4490fa7dcc@mail.gmail.com>
References: <o2g39f0ac351003310952s6b6e01e4x117dae4cf62be7b6@mail.gmail.com>
	<v2x95bb10691003311326id1255c01ucba54d3c9ef38c51@mail.gmail.com>
	<B995CBB9-AED4-49F7-8589-88DBDAE391AD@gmail.com>
	<s2r95bb10691004030603v1ac6900csef26757512aa4397@mail.gmail.com>
	<g2vd272f0691004031137y2bb6135kfc62fa4490fa7dcc@mail.gmail.com>
Message-ID: <F8A2DB4D-591C-416E-A4AF-4CCE15AA030B@gmail.com>


On Apr 3, 2010, at 2:37 PM, Alex Clemesha wrote:

> On Sat, Apr 3, 2010 at 6:03 AM, Reza Lotun <rlotun at gmail.com> wrote:
>> Hi Steve,
>> 
>>> Have you continued, or do you plan to continue development where it was left off?
>> 
>> Well, it's something I've only be toying with. I can handle all the
>> specific Twisted fixes I'd like to make:
>>  - handling lost connections gracefully
>>  - proper use of twistd and daemonization
>>  - massive code cleanups
> 
> I would very much support you continuing development on Orbited.
> In fact, I believe I can help, or already have patches for most of the
> above issues you mention.  A lot of this is result of my "Hotdot" project,
> "Create realtime webapps using Django + Orbited + Twisted":
> http://github.com/clemesha/hotdot
> 
> Specifically, see here for Orbited and twistd working together:
> http://github.com/clemesha/hotdot/blob/master/server.py
> 
> and see the below for patches that improve handling lost connections gracefully:
> http://gist.github.com/256582
> 
> Finally, it would be awesome if you put up your improvements on Github
> (just a suggestion :-),
> then I can easily fork and starting adding improvements, and you can
> pull and we can move this forward.

I had worked with your hotdot stuff a while ago, and I think I had even sent you some django csrf patches for Django 1.2 compatibility (it was a while ago...)

Back then, I had started on refactoring the one-big-javascript file in Orbited a few months ago but, at the time, was assured that 0.8 was "just around the corner", so I left it alone.

Well...now I have need and, since Athena seems to be tightly tied to Nevow, cometd is itself, websocket is websocket, so I'm looking again.   Since Orbited seems to have gone into "unmaintained mode", I agree, it may just be time for a fork.

> p.s. I haven't found many issues with the frontend JavaScript code, but if you
> have specific issues that you could point out, I'd love to try to help.

Mostly the problems I had with it were the lack of doc, and the all-in-one 2700 line .js file, and the complete lack of unit tests of any type.

>> The only problem is that I'm not that knowledgeable about the
>> Javascript browser hacks they've employed - their Orbited.js is more
>> than half "magic" to me (probably due to me not having an opportunity
>> to work on a large js project). It's something that I'd like to get
>> into, if someone is willing to take the lead on the javascript side.
>> It could potentially be as simple as slotting in js.io
>> (http://github.com/mcarter/js.io), which Orbited.js has apparently
>> become, and which appears to have been the plan for Orbited 0.8.

The js.io site documentation link says "Sorry, we don't have documentation yet", and the doc directory on github has a powerpoint file and an echo server so I'm not sure that's going to help so much.


>>> They all seem to have gone off to play with node.js instead.
>> 
>> I don't *really* blame them, considering most of the project's merit
>> lay in the Javascript realm, and node.js is basically a (less
>> featurful) version of Twisted for Javascript (of course with the added
>> bonus of using a heavily JITed and optimized Javascript VM).
>> 
>>> Very cool, I hadn't seen that before.
>> 
>> Yes, very neat. Haven't done much with it, but I think it's a real
>> winner when you're doing something simple like long-polling/
>> broadcasting from a queue.

Well, if there's interest on reviving Orbited either as itself, or as a new project with some code from Orbited as well as some of Alex's stuff, I'm in.  

S




From ssteinerx at gmail.com  Sat Apr  3 18:24:20 2010
From: ssteinerx at gmail.com (ssteinerX@gmail.com)
Date: Sat, 3 Apr 2010 20:24:20 -0400
Subject: [Twisted-Python] Noob alert - Looking for a framework for
	creating a long polling service, Forking Orbited
In-Reply-To: <F8A2DB4D-591C-416E-A4AF-4CCE15AA030B@gmail.com>
References: <o2g39f0ac351003310952s6b6e01e4x117dae4cf62be7b6@mail.gmail.com>
	<v2x95bb10691003311326id1255c01ucba54d3c9ef38c51@mail.gmail.com>
	<B995CBB9-AED4-49F7-8589-88DBDAE391AD@gmail.com>
	<s2r95bb10691004030603v1ac6900csef26757512aa4397@mail.gmail.com>
	<g2vd272f0691004031137y2bb6135kfc62fa4490fa7dcc@mail.gmail.com>
	<F8A2DB4D-591C-416E-A4AF-4CCE15AA030B@gmail.com>
Message-ID: <89F8206A-2DE4-405E-9B44-1F398C170D97@gmail.com>


On Apr 3, 2010, at 3:10 PM, ssteinerX at gmail.com wrote:

> 
> On Apr 3, 2010, at 2:37 PM, Alex Clemesha wrote:
> 
>> On Sat, Apr 3, 2010 at 6:03 AM, Reza Lotun <rlotun at gmail.com> wrote:
>>> Hi Steve,
>>> 
>>>> Have you continued, or do you plan to continue development where it was left off?
>>> 
>>> Well, it's something I've only be toying with. I can handle all the
>>> specific Twisted fixes I'd like to make:
>>> - handling lost connections gracefully
>>> - proper use of twistd and daemonization
>>> - massive code cleanups
>> 
>> I would very much support you continuing development on Orbited.
>> In fact, I believe I can help, or already have patches for most of the
>> above issues you mention.  A lot of this is result of my "Hotdot" project,
>> "Create realtime webapps using Django + Orbited + Twisted":
>> http://github.com/clemesha/hotdot

I've cloned orbited to BitBucket to take up a fork of the project.  

	http://bitbucket.org/ssteinerx/orbited-new/overview/

I really need this for a project and since the old Orbited seems to be abandoned, I'm taking it on.

Contributions gladly accepted.  

If you're interested in working on it, I'll be happy to give you write access.

I've sent an e-mail to CarterMichael at gmail.com to see whether he'll give an official blessing to this fork once we've moved it forward a bit.

Thanks,

S




From donal.mcmullan at gmail.com  Sat Apr  3 21:21:27 2010
From: donal.mcmullan at gmail.com (Donal McMullan)
Date: Sun, 4 Apr 2010 15:21:27 +1200
Subject: [Twisted-Python] FUSE
Message-ID: <h2u634095dc1004032021rdc403864v74c236f7487203c1@mail.gmail.com>

I'm interested in doing some FUSE stuff with Twisted, mostly to
prototype some ideas for profiling. Can anyone expand on Glyph's
comment [1]:

8< - - - - - - - - - - - - - - - - - - - - - - - - - - - -
The Python FUSE bindings obscure the issue because, unlike the C
libfuse, they assume that your filesystem I/O is blocking, which
severely limits the performance of python-based filesystems. (You
cannot receive more requests for I/O in your filesystem until the
previous one has been completed with the pyfuse bindings, but you can in
C.)
8< - - - - - - - - - - - - - - - - - - - - - - - - - - - -

I guess I'd like to know before I sink too much time into this, if
there's an approach to Fuse/Twisted that would not have this
limitation. This is a bit confused by the fact that there are three
Fuse/Python bindings that I'm aware of: FusePython, FusePy, and S3QL
[2].

http://sourceforge.net/apps/mediawiki/fuse/index.php?title=FusePython
http://code.google.com/p/fusepy/
http://code.google.com/p/s3ql/

If you've already been down this road, it'd be good to hear from you.

Thanks

Donal


[1] Glyph's original mail:
http://twistedmatrix.com/pipermail/twisted-python/2007-July/015784.html

[2] S3QL has its own Python/Fuse bindings, according to this post:
http://bugs.python.org/msg98077
..on this issue:
http://bugs.python.org/issue7736



From exarkun at twistedmatrix.com  Sat Apr  3 22:05:19 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 04 Apr 2010 04:05:19 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1270353919.63.2145716543@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100404/49edf380/attachment.html>

From exarkun at twistedmatrix.com  Sun Apr  4 06:46:39 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 04 Apr 2010 12:46:39 -0000
Subject: [Twisted-Python] FUSE
In-Reply-To: <h2u634095dc1004032021rdc403864v74c236f7487203c1@mail.gmail.com>
References: <h2u634095dc1004032021rdc403864v74c236f7487203c1@mail.gmail.com>
Message-ID: <20100404124639.2779.1078349121.divmod.xquotient.53@localhost.localdomain>

On 03:21 am, donal.mcmullan at gmail.com wrote:
>I'm interested in doing some FUSE stuff with Twisted, mostly to
>prototype some ideas for profiling. Can anyone expand on Glyph's
>comment [1]:
>
>8< - - - - - - - - - - - - - - - - - - - - - - - - - - - -
>The Python FUSE bindings obscure the issue because, unlike the C
>libfuse, they assume that your filesystem I/O is blocking, which
>severely limits the performance of python-based filesystems. (You
>cannot receive more requests for I/O in your filesystem until the
>previous one has been completed with the pyfuse bindings, but you can 
>in
>C.)
>8< - - - - - - - - - - - - - - - - - - - - - - - - - - - -
>
>I guess I'd like to know before I sink too much time into this, if
>there's an approach to Fuse/Twisted that would not have this
>limitation. This is a bit confused by the fact that there are three
>Fuse/Python bindings that I'm aware of: FusePython, FusePy, and S3QL
>[2].
>
>http://sourceforge.net/apps/mediawiki/fuse/index.php?title=FusePython
>http://code.google.com/p/fusepy/
>http://code.google.com/p/s3ql/
>
>If you've already been down this road, it'd be good to hear from you.

So, sitting at the bottom of libfuse is a file descriptor.  The kernel 
asks your process to service some filesystem operation by putting bytes 
into it that your process can read.  Your process services the requests 
by putting bytes into it that the kernel can read.

Each request/response pair is tagged, so there's no requirement that 
requests be responded to in the same order they're received.

A good Twisted-based solution would use the reactor to read and write 
that file descriptor (alongside anything else going on in the process) 
and support Deferreds (or at least asynchronous responses) to allow out- 
of-order responses and concurrent request handling.

I played around with fuse a little bit to implement something like sshfs 
a while ago.  I did _not_ use the approach described above, because it 
was easier to use something from Armin Rigo's sandbox in a thread, 
dispatching request handling into Twisted, to achieve the necessary 
concurrency and so forth.  You can find that code here:

http://twistedmatrix.com/trac/browser/sandbox/exarkun/sshfs.py?rev=26941

It's just something I was messing around with.  I'm sure you'll find 
lots of problems with it (I know of at least one).  It might help with 
part of the general idea, though.  To get rid of the use of threads 
(which is a good idea for a real tool), you just need to port Armin's 
parsing code into a Twisted Protocol class and hook it up to a 
FileDescriptor of some sort that reads and writes the fuse fd.

Jean-Paul



From pahan at xzrq.net  Sun Apr  4 07:38:18 2010
From: pahan at xzrq.net (Pavel Pergamenshchik)
Date: Sun, 4 Apr 2010 14:38:18 +0100
Subject: [Twisted-Python] FUSE
In-Reply-To: <h2u634095dc1004032021rdc403864v74c236f7487203c1@mail.gmail.com>
References: <h2u634095dc1004032021rdc403864v74c236f7487203c1@mail.gmail.com>
Message-ID: <p2h7447a0ac1004040638x73697015r3f31b9876fd97c71@mail.gmail.com>

On Sun, Apr 4, 2010 at 4:21 AM, Donal McMullan <donal.mcmullan at gmail.com> wrote:
> I'm interested in doing some FUSE stuff with Twisted, mostly to
> prototype some ideas for profiling. Can anyone expand on Glyph's
> comment [1]:

I wrote some code for this a while ago. I don't remember anything
about it, but it might be a reasonable place to start. I put it up at
http://xzrq.net/ignite.tar.gz

It requires sendmsg extension from
svn://svn.twistedmatrix.com/svn/Twisted/sandbox/pahan/sendmsg



From aleuser at inwind.it  Sun Apr  4 18:41:32 2010
From: aleuser at inwind.it (aleuser at inwind.it)
Date: Mon, 5 Apr 2010 02:41:32 +0200 (CEST)
Subject: [Twisted-Python] smtp-server: issue with checkers.FilePasswordDB
	and hash
Message-ID: <9839287.287071270428092489.JavaMail.defaultUser@defaultHost>

Hi all,
   I use FilePasswordDB with a small smtp-server (a very small toy), but when 
I use the hash function the authentication doesn't work.

Here few lines of code:
"""
def _hash(name, clearpsw, hashedpsw):
    # a very simple hash function ?
    return md5.md5(clearpsw).hexdigest()
    # return 'aa'

# doesn't work; password file content is correctly "hashed"
smtpusers = checkers.FilePasswordDB('smtppasswords.txt', caseSensitive=True, 
hash=_hash, cache=True)

# work! in the file the passwords are in plain text
#smtpusers = checkers.FilePasswordDB('smtppasswords.txt', caseSensitive=True, 
cache=True)

mailservice = mail.MailService()
mailservice.setQueue(relaymanager.Queue(QUEUE_PATH))
mailservice.smtpPortal.registerChecker(smtpusers)
smtpserver = mailservice.getESMTPFactory()
application = service.Application("Console SMTP Server")
internet.TCPServer(SMTP_PORT, smtpserver).setServiceParent(application)
"""

The error is:
Failure: twisted.cred.error.UnhandledCredentials: No checker for twisted.cred.
credentials.IUsernameHashedPassword

Obviously FilePasswordDB doesn't provide that credential when there is the 
hash function; why smtp connection is hashed and not in plaintext? How can I 
get it works?

I found a similar question, with no answer:
http://twistedmatrix.com/pipermail/twisted-python/2006-November/014395.html


Thanks
Alessandro





From ltaylor.volks at gmail.com  Sun Apr  4 22:01:01 2010
From: ltaylor.volks at gmail.com (Lucas Taylor)
Date: Sun, 04 Apr 2010 21:01:01 -0700
Subject: [Twisted-Python] smtp-server: issue with
 checkers.FilePasswordDB and hash
In-Reply-To: <9839287.287071270428092489.JavaMail.defaultUser@defaultHost>
References: <9839287.287071270428092489.JavaMail.defaultUser@defaultHost>
Message-ID: <4BB9607D.6000400@gmail.com>

On 4/4/10 5:41 PM, aleuser at inwind.it wrote:
> Hi all,
>    I use FilePasswordDB with a small smtp-server (a very small toy), but when 
> I use the hash function the authentication doesn't work.
> 
> Here few lines of code:
> """
> def _hash(name, clearpsw, hashedpsw):
>     # a very simple hash function ?
>     return md5.md5(clearpsw).hexdigest()
>     # return 'aa'
> 
> # doesn't work; password file content is correctly "hashed"
> smtpusers = checkers.FilePasswordDB('smtppasswords.txt', caseSensitive=True, 
> hash=_hash, cache=True)
> 
> # work! in the file the passwords are in plain text
> #smtpusers = checkers.FilePasswordDB('smtppasswords.txt', caseSensitive=True, 
> cache=True)
> 
> mailservice = mail.MailService()
> mailservice.setQueue(relaymanager.Queue(QUEUE_PATH))
> mailservice.smtpPortal.registerChecker(smtpusers)
> smtpserver = mailservice.getESMTPFactory()
> application = service.Application("Console SMTP Server")
> internet.TCPServer(SMTP_PORT, smtpserver).setServiceParent(application)
> """
> 
> The error is:
> Failure: twisted.cred.error.UnhandledCredentials: No checker for twisted.cred.
> credentials.IUsernameHashedPassword
> 
> Obviously FilePasswordDB doesn't provide that credential when there is the 
> hash function; why smtp connection is hashed and not in plaintext? How can I 
> get it works?
> 
> I found a similar question, with no answer:
> http://twistedmatrix.com/pipermail/twisted-python/2006-November/014395.html
> 
> 
> Thanks
> Alessandro
> 

Can't say for sure without a full example, but it looks like you are
providing an instance of credentials.UsernameHashedPassword to
portal.login when you should be providing a credentials.UsernamePassword
instance.

If you provide a hash function to FilePasswordDB, it only accepts
IUsernamePassword credentials. The hash function is for plaintext
passwords that need to be validated against a hashed password file.

If your passwords are already hashed before they are sent to the server
for authentication, then there is no need for a hash function.
FilePasswordDB will accept either IUsernamePassword or
IUsernameHashedPassword credentials.

The source comments make it a bit clearer:
http://twistedmatrix.com/trac/browser/tags/releases/twisted-9.0.0/twisted/cred/checkers.py#L99




From donal.mcmullan at gmail.com  Mon Apr  5 01:54:49 2010
From: donal.mcmullan at gmail.com (Donal McMullan)
Date: Mon, 5 Apr 2010 19:54:49 +1200
Subject: [Twisted-Python] FUSE
In-Reply-To: <p2h7447a0ac1004040638x73697015r3f31b9876fd97c71@mail.gmail.com>
References: <h2u634095dc1004032021rdc403864v74c236f7487203c1@mail.gmail.com>
	<p2h7447a0ac1004040638x73697015r3f31b9876fd97c71@mail.gmail.com>
Message-ID: <q2l634095dc1004050054zf9a7e64fy5232c2fe6e854a67@mail.gmail.com>

Thanks for your answers - great to have some options!

Donal




On 5 April 2010 01:38, Pavel Pergamenshchik <pahan at xzrq.net> wrote:
> On Sun, Apr 4, 2010 at 4:21 AM, Donal McMullan <donal.mcmullan at gmail.com> wrote:
>> I'm interested in doing some FUSE stuff with Twisted, mostly to
>> prototype some ideas for profiling. Can anyone expand on Glyph's
>> comment [1]:
>
> I wrote some code for this a while ago. I don't remember anything
> about it, but it might be a reasonable place to start. I put it up at
> http://xzrq.net/ignite.tar.gz
>
> It requires sendmsg extension from
> svn://svn.twistedmatrix.com/svn/Twisted/sandbox/pahan/sendmsg
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From chris at cusack.net.au  Mon Apr  5 05:39:18 2010
From: chris at cusack.net.au (Chris Cusack)
Date: Mon, 5 Apr 2010 21:39:18 +1000
Subject: [Twisted-Python] data update to multiple clients
Message-ID: <C75176A3-261F-4FE4-8D1E-F2C32AB30D7D@cusack.net.au>

Probably another newbie question but after much effort I am not  
progressing on the following.

I am trying to design a system where I have a microprocessor  
periodically feeding data on a serial connection to a server script. I  
would then like the server script to notify one or more client scripts  
of the changed data across a local network. I have tried a few simple  
tcp server and client script examples which communicate well for a  
single call but do not seem to suit my application which is not client  
event driven. I considered having each client connect to the server  
every ?? seconds to query for new data but there may be a better way.

Can anyone suggest a suitable design approach using twisted? Is there  
any example code available that may be similar.

Chris



From p.mayers at imperial.ac.uk  Mon Apr  5 06:01:17 2010
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Mon, 05 Apr 2010 13:01:17 +0100
Subject: [Twisted-Python] data update to multiple clients
In-Reply-To: <C75176A3-261F-4FE4-8D1E-F2C32AB30D7D@cusack.net.au>
References: <C75176A3-261F-4FE4-8D1E-F2C32AB30D7D@cusack.net.au>
Message-ID: <4BB9D10D.5090909@imperial.ac.uk>

On 04/05/2010 12:39 PM, Chris Cusack wrote:
> Probably another newbie question but after much effort I am not
> progressing on the following.
>
> I am trying to design a system where I have a microprocessor
> periodically feeding data on a serial connection to a server script. I
> would then like the server script to notify one or more client scripts
> of the changed data across a local network. I have tried a few simple
> tcp server and client script examples which communicate well for a
> single call but do not seem to suit my application which is not client
> event driven. I considered having each client connect to the server
> every ?? seconds to query for new data but there may be a better way.

Perhaps I'm misunderstanding, but it's pretty simple. Just have the 
clients connect & stay connected. Keep a list of currently connected 
clients somewhere (see below) and every time you receive data on the 
serial port, write it out to all the clients. For example:

# ack, global variable!
client_list = []

class MyProtocol(Protocol):
   def connectionMade(self):
     client_list.append(self)

   def connectionLost(self, reason):
     if self in client_list:
       client_list.remove(self)

   def notifyClient(self, data):
     # you will probably want some framing here e.g. Netstring, len+data
     self.transport.write(data)

class ServerProto(Protocol):
   def dataReceived(self, data):
     for cli in client_list:
       cli.notifyClient(data)

...or am I misunderstanding you?



From aleuser at inwind.it  Mon Apr  5 07:22:19 2010
From: aleuser at inwind.it (aleuser at inwind.it)
Date: Mon, 5 Apr 2010 15:22:19 +0200 (CEST)
Subject: [Twisted-Python] R: Re: smtp-server: issue with
 checkers.FilePasswordDB and hash
Message-ID: <2762000.301081270473739324.JavaMail.defaultUser@defaultHost>

First of all, thanks for your answer :-)

>Can't say for sure without a full example, but it looks like you are

Here the full source code:

from twisted.mail import mail, relaymanager
from twisted.cred import checkers
from twisted.python import log
from twisted.application import internet
from twisted.application import service
import os, md5

SMTP_PORT = 25
QUEUE_PATH = './users_home/insertionQueue'

if not os.path.exists(QUEUE_PATH):
    os.makedirs(QUEUE_PATH)

def _hash(name, clearpsw, hashedpsw):
    return 'aa'
    return md5.md5(clearpsw).hexdigest()

# doesnt' work# smtpusers = checkers.FilePasswordDB('smtppasswords.txt', 
caseSensitive=True, hash=_hash, cache=True)
smtpusers = checkers.FilePasswordDB('smtppasswords.txt', caseSensitive=True, 
cache=True)

mailservice = mail.MailService()
mailservice.setQueue(relaymanager.Queue(QUEUE_PATH))
mailservice.smtpPortal.registerChecker(smtpusers)
smtpserver = mailservice.getESMTPFactory()
application = service.Application("Console SMTP Server")
internet.TCPServer(SMTP_PORT, smtpserver).setServiceParent(application)



>If you provide a hash function to FilePasswordDB, it only accepts
>IUsernamePassword credentials. The hash function is for plaintext

I read the source code, I'm agree with this point


>If your passwords are already hashed before they are sent to the server
>for authentication, then there is no need for a hash function.
>FilePasswordDB will accept either IUsernamePassword or
>IUsernameHashedPassword credentials.

I want to hash the password on the server; can't I? How I can decide to use a 
simple IUsernamePassword?

however If I don't use the hash function the connection still continue to use 
an IUsernameHashedPassword.
Probably the smtp connection is not made for a plain-text password, isn't it?

Alessandro



From glyph at twistedmatrix.com  Mon Apr  5 10:48:26 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Mon, 5 Apr 2010 12:48:26 -0400
Subject: [Twisted-Python] data update to multiple clients
In-Reply-To: <C75176A3-261F-4FE4-8D1E-F2C32AB30D7D@cusack.net.au>
References: <C75176A3-261F-4FE4-8D1E-F2C32AB30D7D@cusack.net.au>
Message-ID: <67B52862-37D5-4884-9424-92EC3892F9CC@twistedmatrix.com>


On Apr 5, 2010, at 7:39 AM, Chris Cusack wrote:

> Can anyone suggest a suitable design approach using twisted? Is there  
> any example code available that may be similar.

This sounds like it may be a FAQ:

<http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#HowdoImakeinputononeconnectionresultinoutputonanother>

Does that answer your question?


-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100405/34b779a9/attachment-0001.html>

From ltaylor.volks at gmail.com  Tue Apr  6 03:31:36 2010
From: ltaylor.volks at gmail.com (Lucas Taylor)
Date: Tue, 06 Apr 2010 02:31:36 -0700
Subject: [Twisted-Python] R: Re: smtp-server: issue with
 checkers.FilePasswordDB and hash
In-Reply-To: <2762000.301081270473739324.JavaMail.defaultUser@defaultHost>
References: <2762000.301081270473739324.JavaMail.defaultUser@defaultHost>
Message-ID: <4BBAFF78.9020606@gmail.com>

On 4/5/10 6:22 AM, aleuser at inwind.it wrote:
> 
>> If your passwords are already hashed before they are sent to the server
>> for authentication, then there is no need for a hash function.
>> FilePasswordDB will accept either IUsernamePassword or
>> IUsernameHashedPassword credentials.
> 
> I want to hash the password on the server; can't I? How I can decide to use a 
> simple IUsernamePassword?
> 
> however If I don't use the hash function the connection still continue to use 
> an IUsernameHashedPassword.
> Probably the smtp connection is not made for a plain-text password, isn't it?
> 

It sounds to me like you want the server to support PLAIN auth but still
compare against a hashed password file? The ESMTP factory you are using
only provides CRAM-MD5 auth via credentials.

http://twistedmatrix.com/trac/browser/trunk/twisted/mail/protocols.py#L132

CramMD5Credentials implements IUsernameHashedPassword, so it won't work
with a FilePasswordDB checker that has a hash function. This is the
source of your error message.

You can add PLAIN support by adding credentials that provide
IUsernamePassword. The imap4 implementation has one (PLAINCredentials):

...
from twisted.mail import imap4
smtpserver = mailservice.getESMTPFactory()
smtpserver.challengers['PLAIN'] = imap4.PLAINCredentials
application = service.Application("Console SMTP Server")
...

Clients using CRAM-MD5 will still fail with the same error, though. You
could create your own checker which differentiates how it checks based
on the provided credentials interface. You would start by subclassing
FilePasswordDB and override the requestAvatarId method. If the
credentials interface is IUsernameHashedPassword, just skip over the
hash function. Here's an example based on yours:
http://gist.github.com/357396







From superdupont at gmail.com  Tue Apr  6 04:47:48 2010
From: superdupont at gmail.com (Carlos Valiente)
Date: Tue, 6 Apr 2010 11:47:48 +0100
Subject: [Twisted-Python] twisted.protocols.basic.NetstringReceiver: Some
	errors are not visible
Message-ID: <g2he2b218021004060347r7b42d2f6v53f7588be7c6833d@mail.gmail.com>

>From twisted/protocols/basic.py:

    class NetstringReceiver(protocol.Protocol):

        def doLength(self):
            ...
            raise NetstringParseError, "netstring too long"
            ...

        def dataReceived(self, data):
            ...
            try:
                ...
                self.doLength()
                ...
            except NetstringParseError:
                self.transport.loseConnection()
                self.brokenPeer = 1

The error message "netstring too long" is shadowed by the except
block. I'd like to see it in my log files.

Would it make sense to emit logging messaged for those errors, or is
there any particular reason why they are silenced?

Cheers,

Carlos



From exarkun at twistedmatrix.com  Tue Apr  6 05:39:36 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 06 Apr 2010 11:39:36 -0000
Subject: [Twisted-Python] R: Re: smtp-server: issue
	with	checkers.FilePasswordDB and hash
In-Reply-To: <4BBAFF78.9020606@gmail.com>
References: <2762000.301081270473739324.JavaMail.defaultUser@defaultHost>
	<4BBAFF78.9020606@gmail.com>
Message-ID: <20100406113936.2779.1413751759.divmod.xquotient.122@localhost.localdomain>

On 09:31 am, ltaylor.volks at gmail.com wrote:
>[snip]
>Clients using CRAM-MD5 will still fail with the same error, though. You
>could create your own checker which differentiates how it checks based
>on the provided credentials interface.

FilePasswordDB can already check IUsernameHashedPassword credentials as 
long as you construct it without a hash function.

Jean-Paul



From albert.brandl at weiermayer.com  Wed Apr  7 03:51:56 2010
From: albert.brandl at weiermayer.com (Albert Brandl)
Date: Wed, 7 Apr 2010 11:51:56 +0200
Subject: [Twisted-Python]
	twisted.protocols.basic.NetstringReceiver:	Some errors are
	not visible
In-Reply-To: <g2he2b218021004060347r7b42d2f6v53f7588be7c6833d@mail.gmail.com>
References: <g2he2b218021004060347r7b42d2f6v53f7588be7c6833d@mail.gmail.com>
Message-ID: <20100407095156.GA9902@weiermayer.com>

On Tue, Apr 06, 2010 at 11:47:48AM +0100, Carlos Valiente wrote:
> 
> The error message "netstring too long" is shadowed by the except
> block. I'd like to see it in my log files.
> 
> Would it make sense to emit logging messaged for those errors, or is
> there any particular reason why they are silenced?

I don't know if there is a particular reason for silencing the errors.
But most classes in basic.py do not emit any log messages (the only
exception is StatefulStringProtocol).

BTW: There is a ticket about NetstringReceiver - you might want to 
add your request there:

http://twistedmatrix.com/trac/ticket/4378

Best regards,

Albert

--
Albert Brandl
Weiermayer Solutions GmbH
Abteistrae 12
A-4813 Altmnster
phone: +43 (0) 720 70 30 14
fax: +43 (0) 7612 20 3 56
web: http://www.weiermayer.com 



From brduffy at gmail.com  Wed Apr  7 14:36:28 2010
From: brduffy at gmail.com (Brian Duffy)
Date: Wed, 7 Apr 2010 16:36:28 -0400
Subject: [Twisted-Python] Network newbie
Message-ID: <k2xda5a17291004071336ja4acffb0yd4dd9d6521c90337@mail.gmail.com>

I have been wondering how I could develop a python application which would
make it easy for users of this application to share small amounts of textual
information over the Internet.

The information is not confidential but I would like to ensure that it is
coming from and generated by the application in question using ssl. I want
it to be easy for users of the application to identify and communicate with
other users of the application.

What type of network am I talking about here? I have plenty of programming
experience, but not much network programming experience. Any advice would be
appreciated.

thanks

Brian Duffy

-- 
Duff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100407/68740336/attachment.html>

From jasonjwwilliams at gmail.com  Wed Apr  7 14:53:04 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Wed, 7 Apr 2010 14:53:04 -0600
Subject: [Twisted-Python] Network newbie
In-Reply-To: <k2xda5a17291004071336ja4acffb0yd4dd9d6521c90337@mail.gmail.com>
References: <k2xda5a17291004071336ja4acffb0yd4dd9d6521c90337@mail.gmail.com>
Message-ID: <g2s3b949f091004071353s6dcd8b48hb47abf99a6ba6139@mail.gmail.com>

I think you need to define your application functionality a little
more. You could be describing anything from a web app that implements
a pasteboard, to a web service shuffling JSON objects around or
anything in between.

-J

On Wed, Apr 7, 2010 at 2:36 PM, Brian Duffy <brduffy at gmail.com> wrote:
> I have been wondering how I could develop a python application which would
> make it easy for users of this application to share small amounts of textual
> information over the Internet.
> The information is not confidential but I would like to ensure that it is
> coming from and generated by the application in question using ssl. I want
> it to be easy for users of the application to identify and communicate with
> other users of the application.
> What type of network am I talking about here? I have plenty of programming
> experience, but not much network programming experience. Any advice would be
> appreciated.
> thanks
> Brian Duffy
>
> --
> Duff
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



From brduffy at gmail.com  Wed Apr  7 15:31:40 2010
From: brduffy at gmail.com (Brian Duffy)
Date: Wed, 7 Apr 2010 17:31:40 -0400
Subject: [Twisted-Python] Network newbie
In-Reply-To: <g2s3b949f091004071353s6dcd8b48hb47abf99a6ba6139@mail.gmail.com>
References: <k2xda5a17291004071336ja4acffb0yd4dd9d6521c90337@mail.gmail.com>
	<g2s3b949f091004071353s6dcd8b48hb47abf99a6ba6139@mail.gmail.com>
Message-ID: <g2nda5a17291004071431yde280a04y351fc1dad54448c5@mail.gmail.com>

Thanks Jason,

Okay, lets say that two users are using this hypothetical application. Each
user has some files on his/her system that were installed locally (as part
of the installation or from disk or whatever). Lets assume that both users
have the same files for the sake of this discussion. The application stores
some unique identifiers for each of these files. From a high level point of
view I would like the users to be able to send a list of identifiers to
another user of the system over the internet to indicate which documents to
view and in what order. There may also be some additional textual data
involved to represent segues between the files to be viewed.

Being new to network programming I am not sure what the simplest way is to
accomplish the task. The nature of the data being communicated is not
confidential but I would like to be reasonably sure that the data is being
generated and sent from the application and user in question.

How will users identify themselves to others for communication. I would like
a user to be able to tell another user what his "address" is and have that
user be able to enter that address into the application and use it whenever
he wishes to send that particular user a sequence of id's and text to be
parsed by the application.

I suppose the application will be acting as both server and client. Any
thoughts?

Thanks again

Brian




On Wed, Apr 7, 2010 at 4:53 PM, Jason J. W. Williams <
jasonjwwilliams at gmail.com> wrote:

> I think you need to define your application functionality a little
> more. You could be describing anything from a web app that implements
> a pasteboard, to a web service shuffling JSON objects around or
> anything in between.
>
> -J
>
> On Wed, Apr 7, 2010 at 2:36 PM, Brian Duffy <brduffy at gmail.com> wrote:
> > I have been wondering how I could develop a python application which
> would
> > make it easy for users of this application to share small amounts of
> textual
> > information over the Internet.
> > The information is not confidential but I would like to ensure that it is
> > coming from and generated by the application in question using ssl. I
> want
> > it to be easy for users of the application to identify and communicate
> with
> > other users of the application.
> > What type of network am I talking about here? I have plenty of
> programming
> > experience, but not much network programming experience. Any advice would
> be
> > appreciated.
> > thanks
> > Brian Duffy
> >
> > --
> > Duff
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >
> >
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
Duff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100407/71ef5881/attachment.html>

From jasonjwwilliams at gmail.com  Wed Apr  7 15:46:30 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Wed, 7 Apr 2010 15:46:30 -0600
Subject: [Twisted-Python] Network newbie
In-Reply-To: <g2nda5a17291004071431yde280a04y351fc1dad54448c5@mail.gmail.com>
References: <k2xda5a17291004071336ja4acffb0yd4dd9d6521c90337@mail.gmail.com>
	<g2s3b949f091004071353s6dcd8b48hb47abf99a6ba6139@mail.gmail.com>
	<g2nda5a17291004071431yde280a04y351fc1dad54448c5@mail.gmail.com>
Message-ID: <h2y3b949f091004071446qa9c665f3r16ccba924c849034@mail.gmail.com>

Sounds like a peer-to-peer model and you need to use an SSL factory
for your protocols. The rest...authentication etc is really something
for you to put together.

-J

On Wed, Apr 7, 2010 at 3:31 PM, Brian Duffy <brduffy at gmail.com> wrote:
> Thanks Jason,
> Okay, lets say that two users are using this hypothetical application. Each
> user has some files on his/her system that were installed locally (as part
> of the installation or from disk or whatever). Lets assume that both users
> have the same files for the sake of this discussion. The application stores
> some unique identifiers for each of these files. From a high level point of
> view I would like the users to be able to send a list of identifiers to
> another user of the system over the internet to indicate which documents to
> view and in what order. There may also be some additional textual data
> involved to represent segues between the files to be viewed.
> Being new to network programming I am not sure what the simplest way is to
> accomplish the task. The nature of the data being communicated is not
> confidential but I would like to be reasonably sure that the data is being
> generated and sent from the application and user in question.
> How will users identify themselves to others for communication. I would like
> a user to be able to tell another user what his "address" is and have that
> user be able to enter that address into the application and use it whenever
> he wishes to send that particular user a sequence of id's and text to be
> parsed by the application.
> I suppose the application will be acting as both server and client. Any
> thoughts?
> Thanks again
> Brian
>
>
>
>
> On Wed, Apr 7, 2010 at 4:53 PM, Jason J. W. Williams
> <jasonjwwilliams at gmail.com> wrote:
>>
>> I think you need to define your application functionality a little
>> more. You could be describing anything from a web app that implements
>> a pasteboard, to a web service shuffling JSON objects around or
>> anything in between.
>>
>> -J
>>
>> On Wed, Apr 7, 2010 at 2:36 PM, Brian Duffy <brduffy at gmail.com> wrote:
>> > I have been wondering how I could develop a python application which
>> > would
>> > make it easy for users of this application to share small amounts of
>> > textual
>> > information over the Internet.
>> > The information is not confidential but I would like to ensure that it
>> > is
>> > coming from and generated by the application in question using ssl. I
>> > want
>> > it to be easy for users of the application to identify and communicate
>> > with
>> > other users of the application.
>> > What type of network am I talking about here? I have plenty of
>> > programming
>> > experience, but not much network programming experience. Any advice
>> > would be
>> > appreciated.
>> > thanks
>> > Brian Duffy
>> >
>> > --
>> > Duff
>> >
>> > _______________________________________________
>> > Twisted-Python mailing list
>> > Twisted-Python at twistedmatrix.com
>> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> >
>> >
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
>
> --
> Duff
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



From rlotun at gmail.com  Wed Apr  7 16:35:28 2010
From: rlotun at gmail.com (Reza Lotun)
Date: Wed, 7 Apr 2010 23:35:28 +0100
Subject: [Twisted-Python] Network newbie
In-Reply-To: <g2nda5a17291004071431yde280a04y351fc1dad54448c5@mail.gmail.com>
References: <k2xda5a17291004071336ja4acffb0yd4dd9d6521c90337@mail.gmail.com>
	<g2s3b949f091004071353s6dcd8b48hb47abf99a6ba6139@mail.gmail.com>
	<g2nda5a17291004071431yde280a04y351fc1dad54448c5@mail.gmail.com>
Message-ID: <z2x95bb10691004071535hf1af3ac0g2541e70bd715d59@mail.gmail.com>

Hi Brian,

> I suppose the application will be acting as both server and client. Any
> thoughts?

For the network part you're certainly describing a P2P model. These
applications are essentially text messaging each other various bits of
info. Keep in mind with P2P stuff - it's notoriously hard to be
*really* P2P without having some element of centrality/servers. The
reason is that what seems like simple communication between two
computers on the internet really goes through firewalls and Nats and
cable modems and what not. The internet - or rather the Internet as
its commonly referred to - is really a collection of public hubs
(websites, mail servers, etc.) which users traverse through their
layers of NATs and firewalls to get to. Usually only ports 80 and 443
(HTTP and HTTPS) are open on these NATs and firewalls, hence why you
don't see a proliferation of other random protocols and applications,
besides a handful. Skype or Kazaa are P2P systems that use a hybrid
approach of relaying via central, publicly accessible "supernodes"
which are promoted on the fly.

Anyway, most people take the easy way out and have one or more servers
sitting somewhere that their clients connect to. Not that the P2P
problem isn't fun ;-)

Here's one of many solutions: get one or more publicly available
servers, and stick some XMPP software (twisted.words, Punjab,
ejabberd, whatever). Turn on SSL. Now you have a secure, centralized
communications system.

Reza

-- 
Reza Lotun
mobile: +44 (0)7521 310 763
email:  rlotun at gmail.com
work:   reza at tweetdeck.com
twitter: @rlotun



From glyph at twistedmatrix.com  Thu Apr  8 01:11:07 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 8 Apr 2010 03:11:07 -0400
Subject: [Twisted-Python] Network newbie
In-Reply-To: <z2x95bb10691004071535hf1af3ac0g2541e70bd715d59@mail.gmail.com>
References: <k2xda5a17291004071336ja4acffb0yd4dd9d6521c90337@mail.gmail.com>
	<g2s3b949f091004071353s6dcd8b48hb47abf99a6ba6139@mail.gmail.com>
	<g2nda5a17291004071431yde280a04y351fc1dad54448c5@mail.gmail.com>
	<z2x95bb10691004071535hf1af3ac0g2541e70bd715d59@mail.gmail.com>
Message-ID: <2662DF10-9C37-437F-AF85-5DA76404BB49@twistedmatrix.com>


On Apr 7, 2010, at 6:35 PM, Reza Lotun wrote:

> Here's one of many solutions: get one or more publicly available
> servers, and stick some XMPP software (twisted.words, Punjab,
> ejabberd, whatever). Turn on SSL. Now you have a secure, centralized
> communications system.

Another solution, if you want to go down the "real P2P" route, is to start maintaining Divmod Vertex <http://divmod.org/trac/wiki/DivmodVertex> - it's a pretty good proof of concept, and solves many of the really hard problems (especially NAT traversal), but it will definitely need to be fixed up if you want to deploy it in a real-world application.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100408/5563f55e/attachment.html>

From alexandre at quessy.net  Thu Apr  8 06:52:01 2010
From: alexandre at quessy.net (Alexandre Quessy)
Date: Thu, 8 Apr 2010 08:52:01 -0400
Subject: [Twisted-Python] Network newbie
In-Reply-To: <2662DF10-9C37-437F-AF85-5DA76404BB49@twistedmatrix.com>
References: <k2xda5a17291004071336ja4acffb0yd4dd9d6521c90337@mail.gmail.com>
	<g2s3b949f091004071353s6dcd8b48hb47abf99a6ba6139@mail.gmail.com>
	<g2nda5a17291004071431yde280a04y351fc1dad54448c5@mail.gmail.com>
	<z2x95bb10691004071535hf1af3ac0g2541e70bd715d59@mail.gmail.com>
	<2662DF10-9C37-437F-AF85-5DA76404BB49@twistedmatrix.com>
Message-ID: <q2j72236ba91004080552wea848748z33a8ae15f553ed93@mail.gmail.com>

Hello Brian,
You can start with one server and one client on each side.
If privacy is not a concern for your application, you don't need to
encrypt the data over SSL.

The easiest to use is a basic LineReceiver and a line sender. Next,
you can use JSON if you want to send more than text.
Look at the examples !

TIP: The sender might tell the other peer on which port its receiver
is listening.

a

2010/4/8 Glyph Lefkowitz <glyph at twistedmatrix.com>:
>
> On Apr 7, 2010, at 6:35 PM, Reza Lotun wrote:
>
> Here's one of many solutions: get one or more publicly available
> servers, and stick some XMPP software (twisted.words, Punjab,
> ejabberd, whatever). Turn on SSL. Now you have a secure, centralized
> communications system.
>
> Another solution, if you want to go down the "real P2P" route, is to start
> maintaining Divmod Vertex<http://divmod.org/trac/wiki/DivmodVertex> - it's
> a pretty good proof of concept, and solves many of the really hard problems
> (especially NAT traversal), but it will definitely need to be fixed up if
> you want to deploy it in a real-world application.
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



-- 
Alexandre Quessy
http://alexandre.quessy.net/



From general at vultaire.net  Fri Apr  9 02:35:51 2010
From: general at vultaire.net (Paul Goins)
Date: Fri, 09 Apr 2010 17:35:51 +0900
Subject: [Twisted-Python] Seeking advice: Coping with heavy log file loads
Message-ID: <4BBEE6E7.2000905@vultaire.net>

There may not be a clear answer to this problem, and the answer may or
may not be Twisted-specific.  I'm just trying to fish for ideas here.

The server I'm working on suffers from extremely high CPU time spent in
the logging functions.  I'm spending between 30 and 40% of all CPU time
just in twisted.python.log.msg.

Describing the environment:

We use DailyLogFiles for file rotation along with the
PythonLoggingObserver to allow for logLevel support.  (Of course, this
gives us significant overhead from Python's complex logging
architecture; maybe we should drop this...)

On a 1000 request test of this server, we generate 58,274 calls to
t.p.log.msg.  There's room for cleanup, but there's lots of pressure to
keep many of the log calls we have for forensic purposes, so we can only
cut this back so far.

Anyway, does anyone have any ideas for speedups?  Any stories from
experience especially?  Shots in the dark are welcome.  ;-)

-
Paul Goins



From k.bos at zx.nl  Fri Apr  9 03:49:52 2010
From: k.bos at zx.nl (Kees Bos)
Date: Fri, 09 Apr 2010 11:49:52 +0200
Subject: [Twisted-Python] Seeking advice: Coping with heavy log
	file	loads
In-Reply-To: <4BBEE6E7.2000905@vultaire.net>
References: <4BBEE6E7.2000905@vultaire.net>
Message-ID: <1270806592.11608.53.camel@kbDesk.lan>

On Fri, 2010-04-09 at 10:35 +0200, Paul Goins wrote:
> There may not be a clear answer to this problem, and the answer may or
> may not be Twisted-specific.  I'm just trying to fish for ideas here.
> 
> The server I'm working on suffers from extremely high CPU time spent in
> the logging functions.  I'm spending between 30 and 40% of all CPU time
> just in twisted.python.log.msg.
> 
> Describing the environment:
> 
> We use DailyLogFiles for file rotation along with the
> PythonLoggingObserver to allow for logLevel support.  (Of course, this
> gives us significant overhead from Python's complex logging
> architecture; maybe we should drop this...)
> 
> On a 1000 request test of this server, we generate 58,274 calls to
> t.p.log.msg.  There's room for cleanup, but there's lots of pressure to
> keep many of the log calls we have for forensic purposes, so we can only
> cut this back so far.
> 
> Anyway, does anyone have any ideas for speedups?  Any stories from
> experience especially?  Shots in the dark are welcome.  ;-)
> 

A request/log ratio of 1:60 is extreme. I would call that a log
generator ;-)

I think you could try to use a custom light weight log function that
just queues the log messages (FIFO) and bursts them, say every second,
to the log file (e.g. in a thread to use a multicore cpu).





From screwtape at froup.com  Fri Apr  9 04:18:15 2010
From: screwtape at froup.com (Tim Allen)
Date: Fri, 9 Apr 2010 20:18:15 +1000
Subject: [Twisted-Python] Seeking advice: Coping with heavy log file
 loads
In-Reply-To: <4BBEE6E7.2000905@vultaire.net>
References: <4BBEE6E7.2000905@vultaire.net>
Message-ID: <20100409101815.GB15611@boombah.thristian.org>

On Fri, Apr 09, 2010 at 05:35:51PM +0900, Paul Goins wrote:
> We use DailyLogFiles for file rotation along with the
> PythonLoggingObserver to allow for logLevel support.  (Of course, this
> gives us significant overhead from Python's complex logging
> architecture; maybe we should drop this...)

I don't know if this will help you, but why do you need to route
through Python's logging framework for log-level support?

For example, Twisted's SyslogObserver support allows the use of syslog
log levels without involving Python's logging system:

http://twistedmatrix.com/documents/current/api/twisted.python.syslog.SyslogObserver.html

If Python's logging framework doesn't show up in your profile output as
an appreciable percentage of the time spent in Twisted's logging
framework, I guess you might as well leave it alone - but if it is
contributing, it shouldn't be too hard to figure out a way to work
around it.



From manlio_perillo at libero.it  Fri Apr  9 07:05:36 2010
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Fri, 09 Apr 2010 15:05:36 +0200
Subject: [Twisted-Python] mercurial branch
Message-ID: <4BBF2620.2000901@libero.it>

Hi.

Does twisted have a Mercurial (git is also fine) mirror?

Unofficial mirror is ok; I just would like to avoid download entire svn
history with hgsvn.



Thanks  Manlio



From itamar at itamarst.org  Fri Apr  9 07:23:01 2010
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Fri, 09 Apr 2010 09:23:01 -0400
Subject: [Twisted-Python] Seeking advice: Coping with heavy log file
 loads
In-Reply-To: <1270806592.11608.53.camel@kbDesk.lan>
References: <4BBEE6E7.2000905@vultaire.net>
	<1270806592.11608.53.camel@kbDesk.lan>
Message-ID: <1270819381.27208.177.camel@pintsize>

On Fri, 2010-04-09 at 11:49 +0200, Kees Bos wrote:

> I think you could try to use a custom light weight log function that
> just queues the log messages (FIFO) and bursts them, say every second,
> to the log file (e.g. in a thread to use a multicore cpu).

Or:

0. Profile logging system - what exactly is it doing that's using all
that CPU? If you're unlucky, it's just "lots of Python function calls",
but maybe it's fixable.

1. A log function that sends messages (over e.g. a Unix socket) to
another process that does the writing. Python GIL means you don't get
that much benefit from multiple threads.

2. Rewrite log function in C... and then maybe run it in another thread.




From k.bos at zx.nl  Fri Apr  9 07:53:10 2010
From: k.bos at zx.nl (Kees Bos)
Date: Fri, 09 Apr 2010 15:53:10 +0200
Subject: [Twisted-Python] Seeking advice: Coping with heavy log
	file	loads
In-Reply-To: <1270819381.27208.177.camel@pintsize>
References: <4BBEE6E7.2000905@vultaire.net>
	<1270806592.11608.53.camel@kbDesk.lan>
	<1270819381.27208.177.camel@pintsize>
Message-ID: <1270821190.31303.6.camel@kbDesk.lan>

On Fri, 2010-04-09 at 15:23 +0200, Itamar Turner-Trauring wrote:
> On Fri, 2010-04-09 at 11:49 +0200, Kees Bos wrote:
> 
> > I think you could try to use a custom light weight log function that
> > just queues the log messages (FIFO) and bursts them, say every second,
> > to the log file (e.g. in a thread to use a multicore cpu).
> 
> Or:
> 
> 0. Profile logging system - what exactly is it doing that's using all
> that CPU? If you're unlucky, it's just "lots of Python function calls",
> but maybe it's fixable.
> 
> 1. A log function that sends messages (over e.g. a Unix socket) to
> another process that does the writing. Python GIL means you don't get
> that much benefit from multiple threads.
Duh. Of course.

BTW. syslog from the syslog module on linux just opens a unix socket
to /dev/log and could be used to do just this. (e.g. with log level
LOG_LOCAL0 and configuring your syslog to log facility local0 to a
specific file)






From number5 at gmail.com  Fri Apr  9 08:03:02 2010
From: number5 at gmail.com (Bruce Wang)
Date: Sat, 10 Apr 2010 00:03:02 +1000
Subject: [Twisted-Python] mercurial branch
In-Reply-To: <4BBF2620.2000901@libero.it>
References: <4BBF2620.2000901@libero.it>
Message-ID: <x2r8d581cfd1004090703hc883886bh4550e7a944fa1505@mail.gmail.com>

On Fri, Apr 9, 2010 at 11:05 PM, Manlio Perillo <manlio_perillo at libero.it>wrote:

> Hi.
>
> Does twisted have a Mercurial (git is also fine) mirror?
>
> Unofficial mirror is ok; I just would like to avoid download entire svn
> history with hgsvn.
>
>
>
>
There is one at github: http://github.com/powdahound/twisted
but I think it's not official though.

-- 
simple is good
http://brucewang.net
http://twitter.com/number5
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100410/28c6f2ff/attachment-0001.html>

From jasonjwwilliams at gmail.com  Fri Apr  9 12:57:31 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Fri, 9 Apr 2010 12:57:31 -0600
Subject: [Twisted-Python] Seeking advice: Coping with heavy log file
	loads
In-Reply-To: <4BBEE6E7.2000905@vultaire.net>
References: <4BBEE6E7.2000905@vultaire.net>
Message-ID: <o2l3b949f091004091157teb864287w15b9ce5e46b11b17@mail.gmail.com>

Hi Paul,

Is is sporadic? (the CPU burst) If so, you may be seeing the log
rotation code kicking...and it's probably blocking your app too until
it completes.

I've got a couple patches to fix the blocking issue:

http://twistedmatrix.com/trac/ticket/4372

The patch which eliminates old log rotation will probably get rid of
your CPU problem too.

-J

On Fri, Apr 9, 2010 at 2:35 AM, Paul Goins <general at vultaire.net> wrote:
> There may not be a clear answer to this problem, and the answer may or
> may not be Twisted-specific. I'm just trying to fish for ideas here.
>
> The server I'm working on suffers from extremely high CPU time spent in
> the logging functions. I'm spending between 30 and 40% of all CPU time
> just in twisted.python.log.msg.
>
> Describing the environment:
>
> We use DailyLogFiles for file rotation along with the
> PythonLoggingObserver to allow for logLevel support. (Of course, this
> gives us significant overhead from Python's complex logging
> architecture; maybe we should drop this...)
>
> On a 1000 request test of this server, we generate 58,274 calls to
> t.p.log.msg. There's room for cleanup, but there's lots of pressure to
> keep many of the log calls we have for forensic purposes, so we can only
> cut this back so far.
>
> Anyway, does anyone have any ideas for speedups? Any stories from
> experience especially? Shots in the dark are welcome. ;-)
>
> -
> Paul Goins
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From dr.marc.byrd at gmail.com  Fri Apr  9 13:11:04 2010
From: dr.marc.byrd at gmail.com (Marc Byrd)
Date: Fri, 9 Apr 2010 12:11:04 -0700
Subject: [Twisted-Python] Seeking advice: Coping with heavy log file
	loads
In-Reply-To: <o2l3b949f091004091157teb864287w15b9ce5e46b11b17@mail.gmail.com>
References: <4BBEE6E7.2000905@vultaire.net>
	<o2l3b949f091004091157teb864287w15b9ce5e46b11b17@mail.gmail.com>
Message-ID: <v2qa33934631004091211y873adc65pde276ed4fa66a0be@mail.gmail.com>

Definitely use syslog.  To see how much logging is costing you without
changing code, you can simply route to /dev/null via syslog.  Btw, w/ local
logging, you may not see it in the cpu usage - more likely in the i/o wait.
 In my experience, logging to a remote syslog-ng server over udp has very
little impact on the app, almost like logging to /dev/null (which in turn is
like not logging at all).

Are you by chance on AWS/EC2 ?  If so, please contact me to discuss possible
design partnership.

m




On Fri, Apr 9, 2010 at 11:57 AM, Jason J. W. Williams <
jasonjwwilliams at gmail.com> wrote:

> Hi Paul,
>
> Is is sporadic? (the CPU burst) If so, you may be seeing the log
> rotation code kicking...and it's probably blocking your app too until
> it completes.
>
> I've got a couple patches to fix the blocking issue:
>
> http://twistedmatrix.com/trac/ticket/4372
>
> The patch which eliminates old log rotation will probably get rid of
> your CPU problem too.
>
> -J
>
> On Fri, Apr 9, 2010 at 2:35 AM, Paul Goins <general at vultaire.net> wrote:
> > There may not be a clear answer to this problem, and the answer may or
> > may not be Twisted-specific.  I'm just trying to fish for ideas here.
> >
> > The server I'm working on suffers from extremely high CPU time spent in
> > the logging functions.  I'm spending between 30 and 40% of all CPU time
> > just in twisted.python.log.msg.
> >
> > Describing the environment:
> >
> > We use DailyLogFiles for file rotation along with the
> > PythonLoggingObserver to allow for logLevel support.  (Of course, this
> > gives us significant overhead from Python's complex logging
> > architecture; maybe we should drop this...)
> >
> > On a 1000 request test of this server, we generate 58,274 calls to
> > t.p.log.msg.  There's room for cleanup, but there's lots of pressure to
> > keep many of the log calls we have for forensic purposes, so we can only
> > cut this back so far.
> >
> > Anyway, does anyone have any ideas for speedups?  Any stories from
> > experience especially?  Shots in the dark are welcome.  ;-)
> >
> > -
> > Paul Goins
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100409/b531e514/attachment-0001.html>

From general at vultaire.net  Sat Apr 10 03:09:29 2010
From: general at vultaire.net (Paul Goins)
Date: Sat, 10 Apr 2010 18:09:29 +0900
Subject: [Twisted-Python] Seeking advice: Coping with heavy log
	file	loads
In-Reply-To: <v2qa33934631004091211y873adc65pde276ed4fa66a0be@mail.gmail.com>
References: <4BBEE6E7.2000905@vultaire.net>	<o2l3b949f091004091157teb864287w15b9ce5e46b11b17@mail.gmail.com>
	<v2qa33934631004091211y873adc65pde276ed4fa66a0be@mail.gmail.com>
Message-ID: <4BC04049.7090202@vultaire.net>

Just wanted to respond to the input everyone's given.  Thanks a lot; I'm
glad I asked.

I'll probably look into the syslog route.  I thought about it before,
but I wasn't sure how much flexibility it gives.  Given the suggestions
here, I've since looked into it a little more and it seems to be the
smartest route, especially due to the size of the load.

Thanks everyone!

- Paul



From warner at lothar.com  Sat Apr 10 15:07:27 2010
From: warner at lothar.com (Brian Warner)
Date: Sat, 10 Apr 2010 14:07:27 -0700
Subject: [Twisted-Python] Seeking advice: Coping with heavy
	log	file	loads
In-Reply-To: <4BC04049.7090202@vultaire.net>
References: <4BBEE6E7.2000905@vultaire.net>	<o2l3b949f091004091157teb864287w15b9ce5e46b11b17@mail.gmail.com>	<v2qa33934631004091211y873adc65pde276ed4fa66a0be@mail.gmail.com>
	<4BC04049.7090202@vultaire.net>
Message-ID: <4BC0E88F.7060206@lothar.com>

You might find the logging infrastructure in Foolscap interesting:

 http://foolscap.lothar.com/docs/logging.html

The basic idea is to record log events only in memory, in separate
circular buffers for each priority level. When something "weird"
happens, all the events are bundled into an "Incident File", and then
the incident file is written out (either to disk, or to a gatherer
process over a network). Other tools are then used to reassemble the
pieces of the incident into chronological order and point out where the
gaps are.

I haven't done any specific performance measurements, but I've taken a
busy server and stubbed out the logging calls and didn't see a huge
change in throughput rate. The Foolscap approach gets you useful (and
detailed) information when bad things happen, but throws out most of the
other stuff, so it doesn't touch the disk or make system calls very often.

cheers,
 -Brian (author of Foolscap)





From exarkun at twistedmatrix.com  Sat Apr 10 22:05:21 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 11 Apr 2010 04:05:21 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1270958721.64.2104042548@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100411/05dc0901/attachment-0001.html>

From manlio_perillo at libero.it  Sun Apr 11 13:50:42 2010
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Sun, 11 Apr 2010 21:50:42 +0200
Subject: [Twisted-Python] [ANN] txwsgi 0.1
Message-ID: <4BC22812.7070708@libero.it>

I'm pleased to announce txwsgi, version 0.1.

txwsgi is a fork of twisted.web.wsgi, that, unlike the original
implementation, executes the WSGI application in the main I/O thread.

txwsgi implements the x-wsgiorg.suspend extension (originally proposed
during a discussion on the twisted-web mailing list!), that enables
support to asynchronous WSGI applications that can use Twisted API.

Some examples are available in the doc/examples directory, in the source
distribution.

The project is available on BitBucket:
http://bitbucket.org/mperillo/txwsgi/

More informations are available in the README file.
The x-wsgiorg.suspend extension is specified in doc/wsgiorg.suspend.rst.

Please note that I implemented txwsgi to serve as a reference
implementation.  If someone is interested in using it for non testing
purpose, please let me know since the code needs to be reviewed, some
small issues needs to be fixed and tests must be written.


Regards  Manlio Perillo



From gabriel.rossetti at arimaz.com  Mon Apr 12 06:09:55 2010
From: gabriel.rossetti at arimaz.com (Gabriel Rossetti)
Date: Mon, 12 Apr 2010 14:09:55 +0200
Subject: [Twisted-Python] Question about processes in python
Message-ID: <4BC30D93.7040307@arimaz.com>

Hello everyone,

I'd like to run a python function in a new process, like python 2.6's 
multiprocessing does. I wanted to use ProcessProtocol, but it seems to 
only work for executing executables and interacting with them using 
stdin/stdout/other fds. Is there a way of running a python piece of code 
in a new process?

Thank you,
Gabriel



From rlotun at gmail.com  Mon Apr 12 06:21:45 2010
From: rlotun at gmail.com (Reza Lotun)
Date: Mon, 12 Apr 2010 13:21:45 +0100
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <4BC30D93.7040307@arimaz.com>
References: <4BC30D93.7040307@arimaz.com>
Message-ID: <v2l95bb10691004120521z37734f77xdb216e1e34ad06c2@mail.gmail.com>

Hi,

> I'd like to run a python function in a new process, like python 2.6's
> multiprocessing does. I wanted to use ProcessProtocol, but it seems to
> only work for executing executables and interacting with them using
> stdin/stdout/other fds. Is there a way of running a python piece of code
> in a new process?

Well, the only way to run Python code is to run the Python interpreter
in a process and feed it the python code you want to run (using the -c
option).

Cheers,
Reza


-- 
Reza Lotun
mobile: +44 (0)7521 310 763
email:  rlotun at gmail.com
work:   reza at tweetdeck.com
twitter: @rlotun



From gabriel.rossetti at arimaz.com  Mon Apr 12 06:40:35 2010
From: gabriel.rossetti at arimaz.com (Gabriel Rossetti)
Date: Mon, 12 Apr 2010 14:40:35 +0200
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <v2l95bb10691004120521z37734f77xdb216e1e34ad06c2@mail.gmail.com>
References: <4BC30D93.7040307@arimaz.com>
	<v2l95bb10691004120521z37734f77xdb216e1e34ad06c2@mail.gmail.com>
Message-ID: <4BC314C3.9040104@arimaz.com>

Reza Lotun wrote:
> Hi,
>
>   
>> I'd like to run a python function in a new process, like python 2.6's
>> multiprocessing does. I wanted to use ProcessProtocol, but it seems to
>> only work for executing executables and interacting with them using
>> stdin/stdout/other fds. Is there a way of running a python piece of code
>> in a new process?
>>     
>
> Well, the only way to run Python code is to run the Python interpreter
> in a process and feed it the python code you want to run (using the -c
> option).
>
> Cheers,
> Reza
>
>   
Hi Reza,

yes, I'd thought of that, but I can't get the function's code, I tried 
the inspect module but
it only works of the code is written to disk; I'd rather not have to 
first write the code to disk just to be able to turn it into a string 
and feed it to python -c. Any ideas on how I could do this?

Thanks,
Gabriel



From rlotun at gmail.com  Mon Apr 12 06:57:39 2010
From: rlotun at gmail.com (Reza Lotun)
Date: Mon, 12 Apr 2010 13:57:39 +0100
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <4BC314C3.9040104@arimaz.com>
References: <4BC30D93.7040307@arimaz.com>
	<v2l95bb10691004120521z37734f77xdb216e1e34ad06c2@mail.gmail.com>
	<4BC314C3.9040104@arimaz.com>
Message-ID: <u2p95bb10691004120557vdcc58132vf7b818b4b5269d9b@mail.gmail.com>

> yes, I'd thought of that, but I can't get the function's code, I tried
> the inspect module but
> it only works of the code is written to disk; I'd rather not have to
> first write the code to disk just to be able to turn it into a string
> and feed it to python -c. Any ideas on how I could do this?

You don't have to write it to disk - you can use cStringIO.


-- 
Reza Lotun
mobile: +44 (0)7521 310 763
email:  rlotun at gmail.com
work:   reza at tweetdeck.com
twitter: @rlotun



From alexandre at quessy.net  Mon Apr 12 07:24:53 2010
From: alexandre at quessy.net (Alexandre Quessy)
Date: Mon, 12 Apr 2010 09:24:53 -0400
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <u2p95bb10691004120557vdcc58132vf7b818b4b5269d9b@mail.gmail.com>
References: <4BC30D93.7040307@arimaz.com>
	<v2l95bb10691004120521z37734f77xdb216e1e34ad06c2@mail.gmail.com>
	<4BC314C3.9040104@arimaz.com>
	<u2p95bb10691004120557vdcc58132vf7b818b4b5269d9b@mail.gmail.com>
Message-ID: <l2z72236ba91004120624w810dd649g3db7bd015e2919d8@mail.gmail.com>

Hello,

2010/4/12 Reza Lotun <rlotun at gmail.com>:
>> yes, I'd thought of that, but I can't get the function's code, I tried
>> the inspect module but
>> it only works of the code is written to disk; I'd rather not have to
>> first write the code to disk just to be able to turn it into a string
>> and feed it to python -c. Any ideas on how I could do this?
>
> You don't have to write it to disk - you can use cStringIO.
>

That's interesting. :) You would write string in a string buffer
that's in the memory, and then... how do you pass it to the child
process? You could not get a pointer to the same location in memory,
as far as I know. You would still need a socket, or something like
that. Am I wrong?

alex


>
> --
> Reza Lotun
> mobile: +44 (0)7521 310 763
> email: rlotun at gmail.com
> work:  reza at tweetdeck.com
> twitter: @rlotun
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
Alexandre Quessy
http://alexandre.quessy.net/



From exarkun at twistedmatrix.com  Mon Apr 12 07:40:02 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 12 Apr 2010 13:40:02 -0000
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <l2z72236ba91004120624w810dd649g3db7bd015e2919d8@mail.gmail.com>
References: <4BC30D93.7040307@arimaz.com>
	<v2l95bb10691004120521z37734f77xdb216e1e34ad06c2@mail.gmail.com>
	<4BC314C3.9040104@arimaz.com>
	<u2p95bb10691004120557vdcc58132vf7b818b4b5269d9b@mail.gmail.com>
	<l2z72236ba91004120624w810dd649g3db7bd015e2919d8@mail.gmail.com>
Message-ID: <20100412134002.2779.1976765289.divmod.xquotient.344@localhost.localdomain>

On 01:24 pm, alexandre at quessy.net wrote:
>Hello,
>
>2010/4/12 Reza Lotun <rlotun at gmail.com>:
>>>yes, I'd thought of that, but I can't get the function's code, I 
>>>tried
>>>the inspect module but
>>>it only works of the code is written to disk; I'd rather not have to
>>>first write the code to disk just to be able to turn it into a string
>>>and feed it to python -c. Any ideas on how I could do this?
>>
>>You don't have to write it to disk - you can use cStringIO.
>
>That's interesting. :) You would write string in a string buffer
>that's in the memory, and then... how do you pass it to the child
>process? You could not get a pointer to the same location in memory,
>as far as I know. You would still need a socket, or something like
>that. Am I wrong?

Sticking with "python -c" is probably easiest.

Jean-Paul



From jasonjwwilliams at gmail.com  Mon Apr 12 07:57:49 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Mon, 12 Apr 2010 07:57:49 -0600
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <4BC30D93.7040307@arimaz.com>
References: <4BC30D93.7040307@arimaz.com>
Message-ID: <n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>

Hi Gabriel,

You might want to try Python's multiprocessing code, it works very
well. I've had pretty good luck using it with Twisted inside the
processes too. The multiprocessing library handles the work of setting
up the send and receive file descriptors.

-J

On Mon, Apr 12, 2010 at 6:09 AM, Gabriel Rossetti
<gabriel.rossetti at arimaz.com> wrote:
> Hello everyone,
>
> I'd like to run a python function in a new process, like python 2.6's
> multiprocessing does. I wanted to use ProcessProtocol, but it seems to
> only work for executing executables and interacting with them using
> stdin/stdout/other fds. Is there a way of running a python piece of code
> in a new process?
>
> Thank you,
> Gabriel
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From rlotun at gmail.com  Mon Apr 12 08:12:24 2010
From: rlotun at gmail.com (Reza Lotun)
Date: Mon, 12 Apr 2010 15:12:24 +0100
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <u2p95bb10691004120557vdcc58132vf7b818b4b5269d9b@mail.gmail.com>
References: <4BC30D93.7040307@arimaz.com>
	<v2l95bb10691004120521z37734f77xdb216e1e34ad06c2@mail.gmail.com>
	<4BC314C3.9040104@arimaz.com>
	<u2p95bb10691004120557vdcc58132vf7b818b4b5269d9b@mail.gmail.com>
Message-ID: <j2u95bb10691004120712mbd87b369g78081b2edef40592@mail.gmail.com>

> You don't have to write it to disk - you can use cStringIO.

Sorry, please disregard this - I was thinking about something else.

The way I've done Python process spawning before was to have my code
predefined in a string, and then launched via a ProcessProtocol. You
can do tricks whereby you have your code actually defined in a string,
then you generate your Python source to run tests/etc. on *that*, and
then you send your code-string to python -c when you actually want to
run it in a separate process.

I remember playing around with inspect before, but I gave up at some
point and took the path of least resistance.

Cheers,
Reza

-- 
Reza Lotun
mobile: +44 (0)7521 310 763
email:  rlotun at gmail.com
work:   reza at tweetdeck.com
twitter: @rlotun



From gabriel.rossetti at arimaz.com  Mon Apr 12 08:23:54 2010
From: gabriel.rossetti at arimaz.com (Gabriel Rossetti)
Date: Mon, 12 Apr 2010 16:23:54 +0200
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
Message-ID: <4BC32CFA.5030400@arimaz.com>

Jason J. W. Williams wrote:
> Hi Gabriel,
>
> You might want to try Python's multiprocessing code, it works very
> well. I've had pretty good luck using it with Twisted inside the
> processes too. The multiprocessing library handles the work of setting
> up the send and receive file descriptors.
>
> -J
>   
Hi Jason,

yes, I was going to use that but I read in several threads that this 
didn't work correctly in Twisted

Gabriel
> On Mon, Apr 12, 2010 at 6:09 AM, Gabriel Rossetti
> <gabriel.rossetti at arimaz.com> wrote:
>   
>> Hello everyone,
>>
>> I'd like to run a python function in a new process, like python 2.6's
>> multiprocessing does. I wanted to use ProcessProtocol, but it seems to
>> only work for executing executables and interacting with them using
>> stdin/stdout/other fds. Is there a way of running a python piece of code
>> in a new process?
>>
>> Thank you,
>> Gabriel
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>     
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>   



From dripton at ripton.net  Mon Apr 12 08:45:32 2010
From: dripton at ripton.net (David Ripton)
Date: Mon, 12 Apr 2010 07:45:32 -0700
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <4BC32CFA.5030400@arimaz.com>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
Message-ID: <20100412144532.GA31350@vidar.dreamhost.com>

On 2010.04.12 16:23:54 +0200, Gabriel Rossetti wrote:
> Jason J. W. Williams wrote:
> > You might want to try Python's multiprocessing code, it works very
> > well. I've had pretty good luck using it with Twisted inside the
> > processes too. The multiprocessing library handles the work of setting
> > up the send and receive file descriptors.

> yes, I was going to use that but I read in several threads that this 
> didn't work correctly in Twisted

IMO Jason probably has a lurking bug that he just hasn't noticed so far.

Same thing with using subprocess instead of the Twisted equivalent
inside a Twisted reactor.  IMX it works 99% of the time.  Murphy's Law
says it'll pass cursory testing and then fail in production.

-- 
David Ripton    dripton at ripton.net



From jasonjwwilliams at gmail.com  Mon Apr 12 09:39:21 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Mon, 12 Apr 2010 09:39:21 -0600
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <20100412144532.GA31350@vidar.dreamhost.com>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
	<20100412144532.GA31350@vidar.dreamhost.com>
Message-ID: <u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>

Haven't had any issues yet. Twisted imports occur inside the process
function. The app was originally written as a purely blocking
multiprocessing app and rewritten to use Twisted inside the
sub-processes. It's passed all automated and hand tests without an
issue. Is there a reason importing Twisted inside sub-process should
not work?

-J

On Mon, Apr 12, 2010 at 8:45 AM, David Ripton <dripton at ripton.net> wrote:
> On 2010.04.12 16:23:54 +0200, Gabriel Rossetti wrote:
>> Jason J. W. Williams wrote:
>> > You might want to try Python's multiprocessing code, it works very
>> > well. I've had pretty good luck using it with Twisted inside the
>> > processes too. The multiprocessing library handles the work of setting
>> > up the send and receive file descriptors.
>
>> yes, I was going to use that but I read in several threads that this
>> didn't work correctly in Twisted
>
> IMO Jason probably has a lurking bug that he just hasn't noticed so far.
>
> Same thing with using subprocess instead of the Twisted equivalent
> inside a Twisted reactor. IMX it works 99% of the time. Murphy's Law
> says it'll pass cursory testing and then fail in production.
>
> --
> David Ripton  dripton at ripton.net
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From p.mayers at imperial.ac.uk  Mon Apr 12 09:44:34 2010
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Mon, 12 Apr 2010 16:44:34 +0100
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <4BC30D93.7040307@arimaz.com>
References: <4BC30D93.7040307@arimaz.com>
Message-ID: <4BC33FE2.40809@imperial.ac.uk>

On 04/12/2010 01:09 PM, Gabriel Rossetti wrote:
> Hello everyone,
>
> I'd like to run a python function in a new process, like python 2.6's
> multiprocessing does. I wanted to use ProcessProtocol, but it seems to
> only work for executing executables and interacting with them using
> stdin/stdout/other fds. Is there a way of running a python piece of code
> in a new process?

I frequently use a model like this:


#!/usr/bin/python

import sys
# and loads of twisted imports

# function to run in a child process
def work():
     while True:
         cmd = sys.stdin.readline()
         if not cmd:
             break
         # do something
         sys.stdout.write('result\n')
         sys.stdout.flush()

class MyProcessProtocol(protocol.ProcessProtocol):
     def __init__(self):
         self.buffer = ''
         self.queue = []

     def outReceived(self, data):
         self.buffer += data
         while '\n' in self.buffer:
             reply, self.buffer = self.buffer.split('\n', 1)
             d,c = self.queue.pop(0)
             d.callback(reply)

         if self.queue:
             self.transport.write('%s\n' % (self.queue[0][1],)

     def cmd(self, c):
         d = defer.Deferred()
         if self.queue:
             # just enqueue it
             self.queue.append((d,c))
         else:
             # hang onto the deferred and also send the cmd
             self.queue.append((d,c))
             self.transport.write(c+'\n')
         return d

def parent():
     proto = MyProcessProtocol()
     reactor.spawnProcess(
         proto,
        sys.executable,
        (sys.executable, os.path.abspath(__file__), 'WORKER')
     )

     # write some commands to the child
     d = proto.send_cmd('something')
     d.addCallback(result).addErrback(failed)

def twisted_main():
     reactor.callWhenRunning(parent)
     reactor.run()

def main():
     args = sys.argv[1:]
     if args and args[0]=='WORKER':
         # we're a child process
         work()
     else:
         twisted_main()

if __name__=='__main__':
     main()


It's pretty simple; you need to be sure that the module does all the 
imports it needs in the child process. You can extend the above model to 
something more complex than simple line-based results, using e.g. JSON 
or python pickle, to handle exceptions, and so forth.

IMHO Twisted REALLY REALLY needs something built-in to do this. I'm 
aware of Ampoule; it didn't work for me when I tried it (which was a 
while ago) and having to define AMP commands to use it was a bit of a 
turn off for me.



From jasonjwwilliams at gmail.com  Mon Apr 12 09:47:21 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Mon, 12 Apr 2010 09:47:21 -0600
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
	<20100412144532.GA31350@vidar.dreamhost.com>
	<u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
Message-ID: <q2w3b949f091004120847l726f949aya919064d033fcc47@mail.gmail.com>

I will say importing your reactor (from twisted.internet import
reactor) must be done inside the sub-process or you won't get what you
want.

-J

On Mon, Apr 12, 2010 at 9:39 AM, Jason J. W. Williams
<jasonjwwilliams at gmail.com> wrote:
> Haven't had any issues yet. Twisted imports occur inside the process
> function. The app was originally written as a purely blocking
> multiprocessing app and rewritten to use Twisted inside the
> sub-processes. It's passed all automated and hand tests without an
> issue. Is there a reason importing Twisted inside sub-process should
> not work?
>
> -J
>
> On Mon, Apr 12, 2010 at 8:45 AM, David Ripton <dripton at ripton.net> wrote:
>> On 2010.04.12 16:23:54 +0200, Gabriel Rossetti wrote:
>>> Jason J. W. Williams wrote:
>>> > You might want to try Python's multiprocessing code, it works very
>>> > well. I've had pretty good luck using it with Twisted inside the
>>> > processes too. The multiprocessing library handles the work of setting
>>> > up the send and receive file descriptors.
>>
>>> yes, I was going to use that but I read in several threads that this
>>> didn't work correctly in Twisted
>>
>> IMO Jason probably has a lurking bug that he just hasn't noticed so far.
>>
>> Same thing with using subprocess instead of the Twisted equivalent
>> inside a Twisted reactor. IMX it works 99% of the time. Murphy's Law
>> says it'll pass cursory testing and then fail in production.
>>
>> --
>> David Ripton  dripton at ripton.net
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>



From p.mayers at imperial.ac.uk  Mon Apr 12 09:49:54 2010
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Mon, 12 Apr 2010 16:49:54 +0100
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
References: <4BC30D93.7040307@arimaz.com>	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>	<4BC32CFA.5030400@arimaz.com>	<20100412144532.GA31350@vidar.dreamhost.com>
	<u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
Message-ID: <4BC34122.10400@imperial.ac.uk>

On 04/12/2010 04:39 PM, Jason J. W. Williams wrote:
> Haven't had any issues yet. Twisted imports occur inside the process
> function. The app was originally written as a purely blocking
> multiprocessing app and rewritten to use Twisted inside the
> sub-processes. It's passed all automated and hand tests without an
> issue. Is there a reason importing Twisted inside sub-process should
> not work?


When I last looked at it, multiprocessing did awful things like fork'ing 
and not re-execing the interpreter in the child process, which seemed 
like an absolute disaster waiting to happen, for many types of objects 
which the child process inherits. Does it still do that?

I guess what you're doing will work though, In that setup, where the 
multiprocessing code is the absolute first thing you call, you're 
essentially using it as a helper to fork off the child process & setup 
the communication pipes (see the example I just posted for a more 
explicit example).

There's the issue that any multiprocess code which writes to the pipes 
(or whatever) used for sending results will block (and block the 
reactor) of course.



From jasonjwwilliams at gmail.com  Mon Apr 12 10:01:28 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Mon, 12 Apr 2010 10:01:28 -0600
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <4BC34122.10400@imperial.ac.uk>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
	<20100412144532.GA31350@vidar.dreamhost.com>
	<u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
	<4BC34122.10400@imperial.ac.uk>
Message-ID: <l2z3b949f091004120901ld97d326bt7c563d540e379870@mail.gmail.com>

Yeah...our code doesn't actually use the pipes. They get fed over AMQP
(txAMQP). We're essentially using multiprocessing as a sub-proc
supervisor to spin-up "processing" engines that consume the AMQP
queues they're configured with.

-J

On Mon, Apr 12, 2010 at 9:49 AM, Phil Mayers <p.mayers at imperial.ac.uk> wrote:
> On 04/12/2010 04:39 PM, Jason J. W. Williams wrote:
>> Haven't had any issues yet. Twisted imports occur inside the process
>> function. The app was originally written as a purely blocking
>> multiprocessing app and rewritten to use Twisted inside the
>> sub-processes. It's passed all automated and hand tests without an
>> issue. Is there a reason importing Twisted inside sub-process should
>> not work?
>
>
> When I last looked at it, multiprocessing did awful things like fork'ing
> and not re-execing the interpreter in the child process, which seemed
> like an absolute disaster waiting to happen, for many types of objects
> which the child process inherits. Does it still do that?
>
> I guess what you're doing will work though, In that setup, where the
> multiprocessing code is the absolute first thing you call, you're
> essentially using it as a helper to fork off the child process & setup
> the communication pipes (see the example I just posted for a more
> explicit example).
>
> There's the issue that any multiprocess code which writes to the pipes
> (or whatever) used for sending results will block (and block the
> reactor) of course.
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From nenadl at gmail.com  Mon Apr 12 10:03:56 2010
From: nenadl at gmail.com (Nenad Lakinski)
Date: Mon, 12 Apr 2010 09:03:56 -0700
Subject: [Twisted-Python] Twisted Download Page
Message-ID: <w2q58470b231004120903jd06bb0adnd2a1137ee9086dd2@mail.gmail.com>

Hi,

Is the tmrc.mit.edu download location down? Are there any mirrors?

Neno



From dripton at ripton.net  Mon Apr 12 10:06:37 2010
From: dripton at ripton.net (David Ripton)
Date: Mon, 12 Apr 2010 09:06:37 -0700
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
	<20100412144532.GA31350@vidar.dreamhost.com>
	<u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
Message-ID: <20100412160637.GA18548@vidar.dreamhost.com>

On 2010.04.12 09:39:21 -0600, Jason J. W. Williams wrote:
> Haven't had any issues yet. Twisted imports occur inside the process
> function. The app was originally written as a purely blocking
> multiprocessing app and rewritten to use Twisted inside the
> sub-processes. It's passed all automated and hand tests without an
> issue. Is there a reason importing Twisted inside sub-process should
> not work?

Here's JP's canonical answer:

http://stackoverflow.com/questions/1948641/twisted-threading-with-subprocess-popen

I've seen this problem in real code.  We had a PyGTK + Twisted program
that erroneously used subprocess in one place.  2% of the time, it
caused an exception.  98% of the time, it worked fine.  Classic race
condition.  Could be you have a similar bug but it never actually
manifests on your combination of code, OS, and hardware.  Hard to say.

-- 
David Ripton    dripton at ripton.net



From jasonjwwilliams at gmail.com  Mon Apr 12 10:20:31 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Mon, 12 Apr 2010 10:20:31 -0600
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <20100412160637.GA18548@vidar.dreamhost.com>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
	<20100412144532.GA31350@vidar.dreamhost.com>
	<u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
	<20100412160637.GA18548@vidar.dreamhost.com>
Message-ID: <t2h3b949f091004120920w63aa59f1y45dcded2cfcac41b@mail.gmail.com>

The comment about passing installSignalHandlers=False to reactor.run()
is good to know. Are the signal handlers Twisted installs used by
Twisted for anything besides reactor.spawnProcess() or other tasks
related to sub-process management?

-J

On Mon, Apr 12, 2010 at 10:06 AM, David Ripton <dripton at ripton.net> wrote:
> On 2010.04.12 09:39:21 -0600, Jason J. W. Williams wrote:
>> Haven't had any issues yet. Twisted imports occur inside the process
>> function. The app was originally written as a purely blocking
>> multiprocessing app and rewritten to use Twisted inside the
>> sub-processes. It's passed all automated and hand tests without an
>> issue. Is there a reason importing Twisted inside sub-process should
>> not work?
>
> Here's JP's canonical answer:
>
> http://stackoverflow.com/questions/1948641/twisted-threading-with-subprocess-popen
>
> I've seen this problem in real code. We had a PyGTK + Twisted program
> that erroneously used subprocess in one place. 2% of the time, it
> caused an exception. 98% of the time, it worked fine. Classic race
> condition. Could be you have a similar bug but it never actually
> manifests on your combination of code, OS, and hardware. Hard to say.
>
> --
> David Ripton  dripton at ripton.net
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From glyph at twistedmatrix.com  Mon Apr 12 12:23:31 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Mon, 12 Apr 2010 14:23:31 -0400
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <20100412160637.GA18548@vidar.dreamhost.com>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
	<20100412144532.GA31350@vidar.dreamhost.com>
	<u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
	<20100412160637.GA18548@vidar.dreamhost.com>
Message-ID: <27A9E5F3-E2F6-4B8F-A857-F4C036B58834@twistedmatrix.com>


On Apr 12, 2010, at 12:06 PM, David Ripton wrote:

> On 2010.04.12 09:39:21 -0600, Jason J. W. Williams wrote:
>> Haven't had any issues yet. Twisted imports occur inside the process
>> function. The app was originally written as a purely blocking
>> multiprocessing app and rewritten to use Twisted inside the
>> sub-processes. It's passed all automated and hand tests without an
>> issue. Is there a reason importing Twisted inside sub-process should
>> not work?
> 
> Here's JP's canonical answer:
> 
> http://stackoverflow.com/questions/1948641/twisted-threading-with-subprocess-popen
> 
> I've seen this problem in real code.  We had a PyGTK + Twisted program
> that erroneously used subprocess in one place.  2% of the time, it
> caused an exception.  98% of the time, it worked fine.  Classic race
> condition.  Could be you have a similar bug but it never actually
> manifests on your combination of code, OS, and hardware.  Hard to say.

I've noted this in a comment on the stackoverflow answer, but it bears repeating:

This was a long-standing bug in Twisted which has since been fixed on trunk, although it isn't present in a release: <http://twistedmatrix.com/trac/ticket/733>.  Starting with the next release (Twisted 10.1, we hope), you should be able to do this without getting this particular type of error.

Still, I wouldn't recommend using the subprocess module in a Twisted application, and multiprocessing even less.  'subprocess' uses select(), which means that if you are running processes in a server handling a large number of connections with a reactor that you've selected for that job, you will occasionally notice that '.communicate()' will blow up because your file descriptors are too big to fit into a select() call.  Its handling of EINTR and EAGAIN are less consistent than spawnProcess, you can't independently handle subprocess termination and subprocess-closing-its-output, so certain types of bugs are much tricker to track down... and I'm sure there are other issues, but I haven't had an opportunity to thoroughly audit it.

Multiprocessing has its own subtly *differently* wonky implementation of subprocess spawning (it uses os.fork(), not the subprocess module), it uses pickle to move objects between processes, and it seems to spawn threads internally, which means it depends on correct thread/process (and hey, maybe thread/pickle too) interaction.

Both of these will work reasonably well for small applications; multiprocessing is *great* if you have a simple, straightforward little multithreaded thing that you want to make multiprocess in order to take advantage of multiple cores.  But by the time you've already taken the trouble to learn how to use Twisted, IMHO spawnProcess is a lot more powerful and a lot less trouble than either of these solutions.  Even more so if you use a higher-level abstraction over it, like ampoule: <https://launchpad.net/ampoule>.




From jasonjwwilliams at gmail.com  Mon Apr 12 13:13:28 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Mon, 12 Apr 2010 13:13:28 -0600
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <27A9E5F3-E2F6-4B8F-A857-F4C036B58834@twistedmatrix.com>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
	<20100412144532.GA31350@vidar.dreamhost.com>
	<u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
	<20100412160637.GA18548@vidar.dreamhost.com>
	<27A9E5F3-E2F6-4B8F-A857-F4C036B58834@twistedmatrix.com>
Message-ID: <s2o3b949f091004121213xe72c9e08p47b85d02fee7b468@mail.gmail.com>

That all makes sense to me if you're using it to coordinate between
the processes using multiprocessing's mechanisms (which I assume most
do). We just aren't. Once the processes are spawned they do their own
thing without any knowledge of each other. There something I should be
expecting to bite me in the rear by folding Twisted into this
architecture?

-J

On Mon, Apr 12, 2010 at 12:23 PM, Glyph Lefkowitz
<glyph at twistedmatrix.com> wrote:
>
> On Apr 12, 2010, at 12:06 PM, David Ripton wrote:
>
>> On 2010.04.12 09:39:21 -0600, Jason J. W. Williams wrote:
>>> Haven't had any issues yet. Twisted imports occur inside the process
>>> function. The app was originally written as a purely blocking
>>> multiprocessing app and rewritten to use Twisted inside the
>>> sub-processes. It's passed all automated and hand tests without an
>>> issue. Is there a reason importing Twisted inside sub-process should
>>> not work?
>>
>> Here's JP's canonical answer:
>>
>> http://stackoverflow.com/questions/1948641/twisted-threading-with-subprocess-popen
>>
>> I've seen this problem in real code. We had a PyGTK + Twisted program
>> that erroneously used subprocess in one place. 2% of the time, it
>> caused an exception. 98% of the time, it worked fine. Classic race
>> condition. Could be you have a similar bug but it never actually
>> manifests on your combination of code, OS, and hardware. Hard to say.
>
> I've noted this in a comment on the stackoverflow answer, but it bears repeating:
>
> This was a long-standing bug in Twisted which has since been fixed on trunk, although it isn't present in a release: <http://twistedmatrix.com/trac/ticket/733>. Starting with the next release (Twisted 10.1, we hope), you should be able to do this without getting this particular type of error.
>
> Still, I wouldn't recommend using the subprocess module in a Twisted application, and multiprocessing even less. 'subprocess' uses select(), which means that if you are running processes in a server handling a large number of connections with a reactor that you've selected for that job, you will occasionally notice that '.communicate()' will blow up because your file descriptors are too big to fit into a select() call. Its handling of EINTR and EAGAIN are less consistent than spawnProcess, you can't independently handle subprocess termination and subprocess-closing-its-output, so certain types of bugs are much tricker to track down... and I'm sure there are other issues, but I haven't had an opportunity to thoroughly audit it.
>
> Multiprocessing has its own subtly *differently* wonky implementation of subprocess spawning (it uses os.fork(), not the subprocess module), it uses pickle to move objects between processes, and it seems to spawn threads internally, which means it depends on correct thread/process (and hey, maybe thread/pickle too) interaction.
>
> Both of these will work reasonably well for small applications; multiprocessing is *great* if you have a simple, straightforward little multithreaded thing that you want to make multiprocess in order to take advantage of multiple cores. But by the time you've already taken the trouble to learn how to use Twisted, IMHO spawnProcess is a lot more powerful and a lot less trouble than either of these solutions. Even more so if you use a higher-level abstraction over it, like ampoule: <https://launchpad.net/ampoule>.
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From micahel at gmail.com  Mon Apr 12 16:47:15 2010
From: micahel at gmail.com (Michael Hudson-Doyle)
Date: Tue, 13 Apr 2010 10:47:15 +1200
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
	<20100412144532.GA31350@vidar.dreamhost.com>
	<u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
Message-ID: <w2taa0dfd861004121547hd6d4a48aief5ae2fd51deed78@mail.gmail.com>

On 13 April 2010 03:39, Jason J. W. Williams <jasonjwwilliams at gmail.com> wrote:
> Haven't had any issues yet. Twisted imports occur inside the process
> function. The app was originally written as a purely blocking
> multiprocessing app and rewritten to use Twisted inside the
> sub-processes. It's passed all automated and hand tests without an
> issue. Is there a reason importing Twisted inside sub-process should
> not work?

If you just use Twisted in the subprocesses, that sounds like it
should be fine to me.

If you want a more twisty solution, there's ampoule:
https://launchpad.net/ampoule

Cheers,
mwh



From sara.byh at gmail.com  Mon Apr 12 21:31:36 2010
From: sara.byh at gmail.com (sara bai)
Date: Tue, 13 Apr 2010 11:31:36 +0800
Subject: [Twisted-Python] twisted.internet.error.CannotListenError: Couldn't
	listen on any:/dev/log: [Errno 98] Address already in use
Message-ID: <j2l1a16f0711004122031y20f5f08foe458b547ade962ac@mail.gmail.com>

hi all :

I have stoped rsyslog service , and the following program is used to listen
on 'dev/log'

after rsyslog stoped   type this command in shell  : $ logger write this
mesg to var/log/syslog

this msg can't write to var/log/syslog  anymore


after run  # python  devlog.py ,but i got an error like this :

* "  twisted.internet.error.CannotListenError: Couldn't listen on
any:/dev/log: [Errno 98] Address already in use " *


# ps aux|grep syslog

there is no syslog process runing

my system is ubuntu9.10    there is no process named syslogd --that's the
very process i want  make it stop


$ ps aux|grep syslog
root      4656  0.0  0.0   1852   548 ?        Ss   11:24   0:00 dd bs=1
if=/proc/kmsg of=/var/run/rsyslog/kmsg
syslog    4658  0.0  0.0  33184  1244 ?        Sl   11:24   0:00 rsyslogd
-c4
1000      4663  0.0  0.0   3040   800 pts/1    R+   11:24   0:00 grep
--color=auto syslog


# service rsyslog stop

$ ps aux|grep syslog

1000      4647  0.0  0.0   3040   800 pts/1    S+   11:24   0:00 grep
--color=auto syslog


this code is supose to makesure  logger still can write log message to
/var/log/syslog  after syslogd stoped



i don't know why  *Address already in use* since the rsyslog service is not
running anymore

I'm I stoped the wrong service ? or  listening on the wrong ** *unix socket
?*



need help   ...



# devlog.py

from twisted.internet.protocol import DatagramProtocol,  Factory
from twisted.internet import reactor


class LogProtocol(DatagramProtocol):
    def  datagramReceived(self,  datagram):
        sys.stdout.write(datagram)

class SysLogFactory(Factory):
    protocol = LogProtocol

logprotocol = LogProtocol()


reactor.listenUNIXDatagram('/dev/log', logprotocol)
reactor.run()
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100413/bbf78a16/attachment.html>

From itamar at itamarst.org  Mon Apr 12 21:31:38 2010
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Mon, 12 Apr 2010 23:31:38 -0400
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <27A9E5F3-E2F6-4B8F-A857-F4C036B58834@twistedmatrix.com>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
	<20100412144532.GA31350@vidar.dreamhost.com>
	<u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
	<20100412160637.GA18548@vidar.dreamhost.com>
	<27A9E5F3-E2F6-4B8F-A857-F4C036B58834@twistedmatrix.com>
Message-ID: <1271129498.27208.232.camel@pintsize>

On Mon, 2010-04-12 at 14:23 -0400, Glyph Lefkowitz wrote:

> Still, I wouldn't recommend using the subprocess module in a Twisted
> application, and multiprocessing even less.  'subprocess' uses
> select(), which means that if you are running processes in a server
> handling a large number of connections with a reactor that you've
> selected for that job, you will occasionally notice that
> '.communicate()' will blow up because your file descriptors are too
> big to fit into a select() call.

I'm pretty sure Twisted's process.py uses select() in some cases...
possibly on import though, which would be less of an issue, I forget.




From exarkun at twistedmatrix.com  Tue Apr 13 06:21:20 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 13 Apr 2010 12:21:20 -0000
Subject: [Twisted-Python]
	twisted.internet.error.CannotListenError:	Couldn't listen on
	any:/dev/log: [Errno 98] Address already in use
In-Reply-To: <j2l1a16f0711004122031y20f5f08foe458b547ade962ac@mail.gmail.com>
References: <j2l1a16f0711004122031y20f5f08foe458b547ade962ac@mail.gmail.com>
Message-ID: <20100413122120.2779.1748671775.divmod.xquotient.406@localhost.localdomain>

On 03:31 am, sara.byh at gmail.com wrote:
>hi all :
>
>I have stoped rsyslog service , and the following program is used to 
>listen
>on 'dev/log'
>
>after rsyslog stoped   type this command in shell  : $ logger write 
>this
>mesg to var/log/syslog

If a unix socket exists, you can't listen on it.  Delete /dev/log and 
you should be able to listen on it again.

Jean-Paul



From andrew at bemusement.org  Tue Apr 13 07:55:41 2010
From: andrew at bemusement.org (Andrew Bennetts)
Date: Tue, 13 Apr 2010 23:55:41 +1000
Subject: [Twisted-Python] Question about processes in python
In-Reply-To: <1271129498.27208.232.camel@pintsize>
References: <4BC30D93.7040307@arimaz.com>
	<n2h3b949f091004120657zb6e205c2i9a765eef7e361427@mail.gmail.com>
	<4BC32CFA.5030400@arimaz.com>
	<20100412144532.GA31350@vidar.dreamhost.com>
	<u2j3b949f091004120839u7430535fpd8462cdb183de458@mail.gmail.com>
	<20100412160637.GA18548@vidar.dreamhost.com>
	<27A9E5F3-E2F6-4B8F-A857-F4C036B58834@twistedmatrix.com>
	<1271129498.27208.232.camel@pintsize>
Message-ID: <20100413135541.GL2681@steerpike.home.puzzling.org>

Itamar Turner-Trauring wrote:
> On Mon, 2010-04-12 at 14:23 -0400, Glyph Lefkowitz wrote:
> 
> > Still, I wouldn't recommend using the subprocess module in a Twisted
> > application, and multiprocessing even less.  'subprocess' uses
> > select(), which means that if you are running processes in a server
> > handling a large number of connections with a reactor that you've
> > selected for that job, you will occasionally notice that
> > '.communicate()' will blow up because your file descriptors are too
> > big to fit into a select() call.
> 
> I'm pretty sure Twisted's process.py uses select() in some cases...
> possibly on import though, which would be less of an issue, I forget.

Yeah, I don't think it's much of an issue.

It does do it on import, and then later as a fallback if that
import-time check found broken versions of linux where write-only
pipe are detected as readable.  This is apparently Linux < 2.6.11.

I suppose if someone does find it's an issue for them that it wouldn't
be too hard to fix, although perhaps they'd find it easier to simply
upgrade their OS...

-Andrew.




From sara.byh at gmail.com  Tue Apr 13 20:04:05 2010
From: sara.byh at gmail.com (sara bai)
Date: Wed, 14 Apr 2010 10:04:05 +0800
Subject: [Twisted-Python] If a unix socket exists,
	you can't listen on it. Delete /dev/log
Message-ID: <o2q1a16f0711004131904v3d4f5163x7e9fb2ac79f476b6@mail.gmail.com>

 As you said ,now it works, a new dev/log created each time after i run the
code . thank you very much .
 - Sara

>>Subject: Re: twisted.internet.error.CannotListenError: Couldn't listen on
> any:/dev/log: [Errno 98] Address already in use
>
   >>If a unix socket exists, you can't listen on it.  Delete /dev/log and
you should be able to listen on it again.
   >>Jean-Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100414/5ab7c5f1/attachment.html>

From tuxattack14 at gmail.com  Wed Apr 14 03:23:46 2010
From: tuxattack14 at gmail.com (Tux Attack)
Date: Wed, 14 Apr 2010 14:53:46 +0530
Subject: [Twisted-Python] Upload large files on twisted server
Message-ID: <w2jbed370f31004140223v12ae440gaef9452357e3adc1@mail.gmail.com>

Hi,

I need some help in uploading large files to twisted server.
I want to upload large files on twisted server using php.But as php has
limit of 24MB, I decided to use ftp functions of php to upload large files.I
am running ftp server written in twisted.When i try to upload a file using
any ftp client then its working fine but when i use a php script for ftp
file upload then it is not working.Initially when i tried to upload file
using same php script but without passive mode , it created a file on server
but the size of file was 0 bytes.When i added a line to switch to passive
mode now it doesn't go beyond a function to switch passive mode and
connection to server gets timed out.Here is my php code



<?php
> $ftp_server='localhost';
> $ftp_user_name='chetan';
> $ftp_user_pass='chetan';
> $file = 'av.jpg';
> $remote_file = 'av.jpg';
>
> $conn_id = ftp_connect($ftp_server, 8002);
>
> $login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);
>
> ftp_pasv($conn_id, true);
>
> if (ftp_put($conn_id, $remote_file, $file, FTP_BINARY)) {
>  echo "successfully uploaded $file\n";
> } else {
>  echo "There was a problem while uploading $file\n";
> }
>
> ftp_close($conn_id);
> ?>
>
>
 Or is there any other way i can upload large files on twisted server ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100414/06ff0a50/attachment.html>

From petshmidt at googlemail.com  Wed Apr 14 04:35:24 2010
From: petshmidt at googlemail.com (Pet)
Date: Wed, 14 Apr 2010 12:35:24 +0200
Subject: [Twisted-Python] profiling code that runs in threads
Message-ID: <s2ob460e9631004140335z27e5c21cl31e54f4f49057955@mail.gmail.com>

Hello!

I've tried to profile my twisted server with --profile=path
--profiler=cProfile --savestats options for twistd and it show results
only for functions which are in main thread and it is not really
helpful, because "dirty work" is done in threads. Is it possible to
profile functions which runs in other threads?


Thanks!

Pet



From vitaly at synapticvision.com  Wed Apr 14 07:11:17 2010
From: vitaly at synapticvision.com (vitaly at synapticvision.com)
Date: Wed, 14 Apr 2010 09:11:17 -0400
Subject: [Twisted-Python] cron-style scheduler for Twisted
Message-ID: <20100414091117.812978eo3btjpxss@216.129.205.5>

hi,
is there any cron-style scheduler in Twisted?
Could one point me to the docs where it could be found?
Thanks.





From exarkun at twistedmatrix.com  Wed Apr 14 07:25:20 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 14 Apr 2010 13:25:20 -0000
Subject: [Twisted-Python] cron-style scheduler for Twisted
In-Reply-To: <20100414091117.812978eo3btjpxss@216.129.205.5>
References: <20100414091117.812978eo3btjpxss@216.129.205.5>
Message-ID: <20100414132520.2779.1633220664.divmod.xquotient.407@localhost.localdomain>

On 01:11 pm, vitaly at synapticvision.com wrote:
>hi,
>is there any cron-style scheduler in Twisted?
>Could one point me to the docs where it could be found?
>Thanks.

There's <http://code.google.com/p/twistedcronservice/>.

Jean-Paul



From vitaly at synapticvision.com  Wed Apr 14 08:14:25 2010
From: vitaly at synapticvision.com (vitaly at synapticvision.com)
Date: Wed, 14 Apr 2010 10:14:25 -0400
Subject: [Twisted-Python] cron-style scheduler for Twisted
In-Reply-To: <20100414132520.2779.1633220664.divmod.xquotient.407@localhost.localdomain>
References: <20100414091117.812978eo3btjpxss@216.129.205.5>
	<20100414132520.2779.1633220664.divmod.xquotient.407@localhost.localdomain>
Message-ID: <20100414101425.49049g63kyuvcezw@216.129.205.5>

Thank you.

Quoting exarkun at twistedmatrix.com:

> On 01:11 pm, vitaly at synapticvision.com wrote:
>> hi,
>> is there any cron-style scheduler in Twisted?
>> Could one point me to the docs where it could be found?
>> Thanks.
>
> There's <http://code.google.com/p/twistedcronservice/>.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>






From vitaly at synapticvision.com  Wed Apr 14 08:51:40 2010
From: vitaly at synapticvision.com (vitaly at synapticvision.com)
Date: Wed, 14 Apr 2010 10:51:40 -0400
Subject: [Twisted-Python] Twisted usage
Message-ID: <20100414105140.284632tpzt8a6h6o@216.129.205.5>

hi,
is there any examples how to create (using Twisted)
client that creates several TCP requests one after another and handle in
asynch manner TCP responses for previous requests?
Thanks.




From glyph at twistedmatrix.com  Thu Apr 15 00:20:00 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 15 Apr 2010 02:20:00 -0400
Subject: [Twisted-Python] cron-style scheduler for Twisted
In-Reply-To: <20100414132520.2779.1633220664.divmod.xquotient.407@localhost.localdomain>
References: <20100414091117.812978eo3btjpxss@216.129.205.5>
	<20100414132520.2779.1633220664.divmod.xquotient.407@localhost.localdomain>
Message-ID: <177DA5E9-2404-47DA-BBA7-0AFDF3FEE1CC@twistedmatrix.com>


On Apr 14, 2010, at 9:25 AM, exarkun at twistedmatrix.com wrote:

> On 01:11 pm, vitaly at synapticvision.com wrote:
>> hi,
>> is there any cron-style scheduler in Twisted?
>> Could one point me to the docs where it could be found?
>> Thanks.
> 
> There's <http://code.google.com/p/twistedcronservice/>.

This does not appear to be listed on <http://twistedmatrix.com/trac/wiki/ProjectsUsingTwisted>.  Anyone care to add it?  Jason?


From glyph at twistedmatrix.com  Thu Apr 15 00:22:44 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 15 Apr 2010 02:22:44 -0400
Subject: [Twisted-Python] Twisted usage
In-Reply-To: <20100414105140.284632tpzt8a6h6o@216.129.205.5>
References: <20100414105140.284632tpzt8a6h6o@216.129.205.5>
Message-ID: <25EE14AA-7715-438E-A870-72D288C2E5B3@twistedmatrix.com>


On Apr 14, 2010, at 10:51 AM, vitaly at synapticvision.com wrote:

> hi,
> is there any examples how to create (using Twisted)
> client that creates several TCP requests one after another and handle in
> asynch manner TCP responses for previous requests?
> Thanks.

twisted.protocols.amp and twisted.spread.pb both implement this.

In a nutshell: in connectionMade, initialize a dictionary on your protocol object mapping request IDs to Deferreds.  When you issue a request, make a new Deferred and put it into that dictionary.  When you receive a response, pop the Deferred out of that dictionary by looking up the key present in the response, and call its .callback() method.

Is that what you were looking for?


From jasonjwwilliams at gmail.com  Thu Apr 15 00:32:05 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Thu, 15 Apr 2010 00:32:05 -0600
Subject: [Twisted-Python] cron-style scheduler for Twisted
In-Reply-To: <177DA5E9-2404-47DA-BBA7-0AFDF3FEE1CC@twistedmatrix.com>
References: <20100414091117.812978eo3btjpxss@216.129.205.5>
	<20100414132520.2779.1633220664.divmod.xquotient.407@localhost.localdomain>
	<177DA5E9-2404-47DA-BBA7-0AFDF3FEE1CC@twistedmatrix.com>
Message-ID: <i2y3b949f091004142332of249e1cbr498bc51770927e17@mail.gmail.com>

I'll put it up.

-J

On Thu, Apr 15, 2010 at 12:20 AM, Glyph Lefkowitz
<glyph at twistedmatrix.com> wrote:
>
> On Apr 14, 2010, at 9:25 AM, exarkun at twistedmatrix.com wrote:
>
>> On 01:11 pm, vitaly at synapticvision.com wrote:
>>> hi,
>>> is there any cron-style scheduler in Twisted?
>>> Could one point me to the docs where it could be found?
>>> Thanks.
>>
>> There's <http://code.google.com/p/twistedcronservice/>.
>
> This does not appear to be listed on <http://twistedmatrix.com/trac/wiki/ProjectsUsingTwisted>. Anyone care to add it? Jason?
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From jasonjwwilliams at gmail.com  Thu Apr 15 00:37:22 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Thu, 15 Apr 2010 00:37:22 -0600
Subject: [Twisted-Python] cron-style scheduler for Twisted
In-Reply-To: <177DA5E9-2404-47DA-BBA7-0AFDF3FEE1CC@twistedmatrix.com>
References: <20100414091117.812978eo3btjpxss@216.129.205.5>
	<20100414132520.2779.1633220664.divmod.xquotient.407@localhost.localdomain>
	<177DA5E9-2404-47DA-BBA7-0AFDF3FEE1CC@twistedmatrix.com>
Message-ID: <o2n3b949f091004142337h982d2ebene79564bf511b81ee@mail.gmail.com>

Posted.  http://twistedmatrix.com/trac/wiki/ProjectsUsingTwisted

On Thu, Apr 15, 2010 at 12:20 AM, Glyph Lefkowitz
<glyph at twistedmatrix.com> wrote:
>
> On Apr 14, 2010, at 9:25 AM, exarkun at twistedmatrix.com wrote:
>
>> On 01:11 pm, vitaly at synapticvision.com wrote:
>>> hi,
>>> is there any cron-style scheduler in Twisted?
>>> Could one point me to the docs where it could be found?
>>> Thanks.
>>
>> There's <http://code.google.com/p/twistedcronservice/>.
>
> This does not appear to be listed on <http://twistedmatrix.com/trac/wiki/ProjectsUsingTwisted>. Anyone care to add it? Jason?
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From glyph at twistedmatrix.com  Thu Apr 15 00:56:02 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 15 Apr 2010 02:56:02 -0400
Subject: [Twisted-Python] cron-style scheduler for Twisted
In-Reply-To: <o2n3b949f091004142337h982d2ebene79564bf511b81ee@mail.gmail.com>
References: <20100414091117.812978eo3btjpxss@216.129.205.5>
	<20100414132520.2779.1633220664.divmod.xquotient.407@localhost.localdomain>
	<177DA5E9-2404-47DA-BBA7-0AFDF3FEE1CC@twistedmatrix.com>
	<o2n3b949f091004142337h982d2ebene79564bf511b81ee@mail.gmail.com>
Message-ID: <2072B897-FCA9-4EAD-B9A1-8B3693B8270E@twistedmatrix.com>


On Apr 15, 2010, at 2:37 AM, Jason J. W. Williams wrote:

> On Thu, Apr 15, 2010 at 12:20 AM, Glyph Lefkowitz
> <glyph at twistedmatrix.com> wrote:
>> 
>> This does not appear to be listed on <http://twistedmatrix.com/trac/wiki/ProjectsUsingTwisted>.  Anyone care to add it?  Jason?
> 
> Posted.  http://twistedmatrix.com/trac/wiki/ProjectsUsingTwisted

Excellent.  Now we just need to bug somebody to change the name to txcronservice :).




From kevin.horn at gmail.com  Thu Apr 15 01:07:44 2010
From: kevin.horn at gmail.com (Kevin Horn)
Date: Thu, 15 Apr 2010 02:07:44 -0500
Subject: [Twisted-Python] cron-style scheduler for Twisted
In-Reply-To: <20100414091117.812978eo3btjpxss@216.129.205.5>
References: <20100414091117.812978eo3btjpxss@216.129.205.5>
Message-ID: <t2v562bcc11004150007ra63570bcm7860dcf58021e1b0@mail.gmail.com>

On Wed, Apr 14, 2010 at 8:11 AM, <vitaly at synapticvision.com> wrote:

> hi,
> is there any cron-style scheduler in Twisted?
> Could one point me to the docs where it could be found?
> Thanks.
>
>
>
I wrote something like this once, I called it txScheduler.  I guess I really
should clean it up and release it.

It's not been heavily tested (and I never got around to writing the unit
tests I had intended to) but it worked for the original use case I had.

If anyone's interested, drop me a line directly and I'll send it to you (MIT
license).

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100415/41ed05bd/attachment-0001.html>

From jasonjwwilliams at gmail.com  Thu Apr 15 06:59:19 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Thu, 15 Apr 2010 06:59:19 -0600
Subject: [Twisted-Python] cron-style scheduler for Twisted
In-Reply-To: <2072B897-FCA9-4EAD-B9A1-8B3693B8270E@twistedmatrix.com>
References: <20100414091117.812978eo3btjpxss@216.129.205.5>
	<20100414132520.2779.1633220664.divmod.xquotient.407@localhost.localdomain>
	<177DA5E9-2404-47DA-BBA7-0AFDF3FEE1CC@twistedmatrix.com>
	<o2n3b949f091004142337h982d2ebene79564bf511b81ee@mail.gmail.com>
	<2072B897-FCA9-4EAD-B9A1-8B3693B8270E@twistedmatrix.com>
Message-ID: <u2i3b949f091004150559md6d6588re8cc82b39cf13a91@mail.gmail.com>

That would most excellent. :)

On Thu, Apr 15, 2010 at 12:56 AM, Glyph Lefkowitz
<glyph at twistedmatrix.com> wrote:
>
> On Apr 15, 2010, at 2:37 AM, Jason J. W. Williams wrote:
>
>> On Thu, Apr 15, 2010 at 12:20 AM, Glyph Lefkowitz
>> <glyph at twistedmatrix.com> wrote:
>>>
>>> This does not appear to be listed on <http://twistedmatrix.com/trac/wiki/ProjectsUsingTwisted>. Anyone care to add it? Jason?
>>
>> Posted. http://twistedmatrix.com/trac/wiki/ProjectsUsingTwisted
>
> Excellent. Now we just need to bug somebody to change the name to txcronservice :).
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From vitaly at synapticvision.com  Thu Apr 15 08:21:07 2010
From: vitaly at synapticvision.com (vitaly at synapticvision.com)
Date: Thu, 15 Apr 2010 10:21:07 -0400
Subject: [Twisted-Python] Twisted usage
In-Reply-To: <25EE14AA-7715-438E-A870-72D288C2E5B3@twistedmatrix.com>
References: <20100414105140.284632tpzt8a6h6o@216.129.205.5>
	<25EE14AA-7715-438E-A870-72D288C2E5B3@twistedmatrix.com>
Message-ID: <20100415102107.413435es3eown3eo@216.129.205.5>


Yes, thank you.

Quoting "Glyph Lefkowitz" <glyph at twistedmatrix.com>:

>
> On Apr 14, 2010, at 10:51 AM, vitaly at synapticvision.com wrote:
>
>> hi,
>> is there any examples how to create (using Twisted)
>> client that creates several TCP requests one after another and handle in
>> asynch manner TCP responses for previous requests?
>> Thanks.
>
> twisted.protocols.amp and twisted.spread.pb both implement this.
>
> In a nutshell: in connectionMade, initialize a dictionary on your  
> protocol object mapping request IDs to Deferreds.  When you issue a  
> request, make a new Deferred and put it into that dictionary.  When  
> you receive a response, pop the Deferred out of that dictionary by  
> looking up the key present in the response, and call its .callback()  
> method.
>
> Is that what you were looking for?
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>





From tuxattack14 at gmail.com  Thu Apr 15 22:24:32 2010
From: tuxattack14 at gmail.com (Tux Attack)
Date: Fri, 16 Apr 2010 09:54:32 +0530
Subject: [Twisted-Python] HTTP POST method in php on twisted server
Message-ID: <u2qbed370f31004152124s78b41e02v94d37126012778f@mail.gmail.com>

Hi,
I am trying to use php script on twisted server using twcgi.I want to make
use of http POST method in that.What I want to do is, suppose I am having
one html page say index.html and from that page I want to redirect to other
php page and pass data to that php page using POST method.But I am not able
to access any POST data in php script.When I debugged through
twcgi.CGIScript.render method, I didn't find any reference to POST data.So
how can i make use of POST data in php ?

Thank You.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100416/9a3063a4/attachment-0001.html>

From lvh at laurensvh.be  Fri Apr 16 05:58:26 2010
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Fri, 16 Apr 2010 13:58:26 +0200
Subject: [Twisted-Python] Anyone working on a Twisted txRiak?
In-Reply-To: <10496611.511269977368521.JavaMail.rgacote@ip-210.Corp.AppropriateSolutions.com>
References: <10496611.511269977368521.JavaMail.rgacote@ip-210.Corp.AppropriateSolutions.com>
Message-ID: <l2zcedc0c091004160458ub6f5397fh955697e6722fba2e@mail.gmail.com>

Hey Ray,


I'm pretty interested in txRiak. I couldn't find it at
https://launchpad.net/tx. Is the repo up somewhere yet?

Thanks
Laurens
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100416/9271f030/attachment.html>

From rgacote at appropriatesolutions.com  Fri Apr 16 07:47:17 2010
From: rgacote at appropriatesolutions.com (Ray Cote)
Date: Fri, 16 Apr 2010 09:47:17 -0400 (EDT)
Subject: [Twisted-Python] Anyone working on a Twisted txRiak?
In-Reply-To: <15992138.5541271426241810.JavaMail.rgacote@ip-210.Corp.AppropriateSolutions.com>
Message-ID: <9867948.5561271426244766.JavaMail.rgacote@ip-210.Corp.AppropriateSolutions.com>

Hi Laurens: 

I hope to have a repository up next week. 

We're just finishing up initial implementation. 

The Basho folk helped us address a last failing unit test yesterday so our new txRiak now runs the same set of unit tests as the Basho riak.py file. 

I'll announce on this list when it is available. 
Thanks for your interest. 
(looking forward to other eyes reviewing the code) 

--Ray 

----- Original Message ----- 
From: "Laurens Van Houtven" <lvh at laurensvh.be> 
To: "Ray Cote" <rgacote at appropriatesolutions.com>, "Twisted general discussion" <twisted-python at twistedmatrix.com> 
Sent: Friday, April 16, 2010 7:58:26 AM GMT -05:00 US/Canada Eastern 
Subject: Re: [Twisted-Python] Anyone working on a Twisted txRiak? 

Hey Ray, 




I'm pretty interested in txRiak. I couldn't find it at https://launchpad.net/tx . Is the repo up somewhere yet? 


Thanks 
Laurens 

-- 
Ray Cote, President 
Appropriate Solutions, Inc. 
We Build Software 
603.924.6079 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100416/569a43c4/attachment.html>

From ivan at ludios.org  Sat Apr 17 19:44:29 2010
From: ivan at ludios.org (Ivan Kozik)
Date: Sat, 17 Apr 2010 18:44:29 -0700
Subject: [Twisted-Python] mercurial branch
In-Reply-To: <4BBF2620.2000901@libero.it>
References: <4BBF2620.2000901@libero.it>
Message-ID: <p2mbadc170e1004171844jf3f5739ezf9166dfbae96a4bb@mail.gmail.com>

On Fri, Apr 9, 2010 at 6:05 AM, Manlio Perillo <manlio_perillo at libero.it> wrote:
> Does twisted have a Mercurial (git is also fine) mirror?
>
> Unofficial mirror is ok; I just would like to avoid download entire svn
> history with hgsvn.

I keep an unofficial git-svn cloned copy here:
http://ludios.net/mirror/

The tarball includes all of the SVN metadata. To update it, you can:
git svn fetch && git checkout trunk

During a `git svn fetch` or another operation, you may see this error:
error: cannot lock ref 'refs/remotes/ctrl+\\-2371+2123-2'

This is due to a bug somewhere in svn or git-svn; to fix it, you can
recursively grep the .git/ directory and manually delete all references
to the branch. Everything seems to work fine after doing this.

In case anyone is curious, git-svn takes about 26 hours to mirror it,
because it restarts at r1 for several branches. I am told this is due
to the use of SVN partial branches.


Ivan



From exarkun at twistedmatrix.com  Sat Apr 17 22:05:42 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 18 Apr 2010 04:05:42 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1271563542.88.803565690@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100418/5e195e9c/attachment-0001.html>

From thomas at apestaart.org  Sun Apr 18 05:11:58 2010
From: thomas at apestaart.org (Thomas Vander Stichele)
Date: Sun, 18 Apr 2010 13:11:58 +0200
Subject: [Twisted-Python] gtk2reactor: scheduling work in the immediate
 future without throttling gtk
Message-ID: <1271589118.3529.18.camel@level.fluendo.lan>

Hi.  My use case is pretty simple:

 - my UI has a throbber that gets activated while I'm querying a CouchDB
server and populating the UI with results, which can be many.
 - when iterating over the results, I want the UI to keep throbbing,
which means the gtk mainloop needs to be regularly scheduled by
gtk2reactor
 - if I iterate over the results and create a deferred chain and fire
it, the whole update of the UI still gets executed synchronously, not
giving the gtk mainloop time to throb.
 - if I do it with callLater(0, ...), again these calls get executed
ASAP and throttle the main loop

Every other workaround I can think of is ugly (using random.random() as
the argument to callLater to space calls, using a counter to space out
calls, doing callLater from the next call chain, ...)

In reality, all I want is to schedule a call to be processed with lower
priority than the main loop; ie, have the reactor run GTK's mainloop
then process my calls.  This way, I could create a chain of say 10 calls
at a time, and give the mainloop time to run between each block.

Is something like this possible at all ? How do the other reactors
handle this ? Why is priority given to the twisted DelayedCalls ?

Thomas

-- 
in the twist of separation
you excelled at being free
--
GStreamer - bringing multimedia to your desktop
http://gstreamer.freedesktop.org/





From itamar at itamarst.org  Sun Apr 18 07:19:38 2010
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Sun, 18 Apr 2010 13:19:38 +0000
Subject: [Twisted-Python] gtk2reactor: scheduling work in the immediate
 future without throttling gtk
In-Reply-To: <1271589118.3529.18.camel@level.fluendo.lan>
References: <1271589118.3529.18.camel@level.fluendo.lan>
Message-ID: <1271596778.27208.401.camel@pintsize>

On Sun, 2010-04-18 at 13:11 +0200, Thomas Vander Stichele wrote:
>  - if I do it with callLater(0, ...), again these calls get executed
> ASAP and throttle the main loop

If this is actually affecting your UI this may mean the batch size you
are processing in each call is too big. E.g. if it takes 50ms per call,
you're not going to get more than 20FPS if you run one call per
iteration. 

Something like twisted.internet.task.coiterate might help, but you still
need to make sure each chunk (or rather, size of chunk*num parallel
processes) is sufficiently small.




From exarkun at twistedmatrix.com  Sun Apr 18 09:19:06 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 18 Apr 2010 15:19:06 -0000
Subject: [Twisted-Python] mercurial branch
In-Reply-To: <p2mbadc170e1004171844jf3f5739ezf9166dfbae96a4bb@mail.gmail.com>
References: <4BBF2620.2000901@libero.it>
	<p2mbadc170e1004171844jf3f5739ezf9166dfbae96a4bb@mail.gmail.com>
Message-ID: <20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>

On 01:44 am, ivan at ludios.org wrote:
>On Fri, Apr 9, 2010 at 6:05 AM, Manlio Perillo 
><manlio_perillo at libero.it> wrote:
>>Does twisted have a Mercurial (git is also fine) mirror?
>>
>>Unofficial mirror is ok; I just would like to avoid download entire 
>>svn
>>history with hgsvn.
>
>I keep an unofficial git-svn cloned copy here:
>http://ludios.net/mirror/
>
>In case anyone is curious, git-svn takes about 26 hours to mirror it,
>because it restarts at r1 for several branches. I am told this is due
>to the use of SVN partial branches.

It'd be great if everyone who wants git access could share a single 
mirror (perhaps this one), to avoid the additional load on our svn 
server that creating a new mirror creates.

The same applies to other vcs mirrors, too, of course.

Jean-Paul



From exarkun at twistedmatrix.com  Sun Apr 18 09:23:52 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 18 Apr 2010 15:23:52 -0000
Subject: [Twisted-Python] HTTP POST method in php on twisted server
In-Reply-To: <u2qbed370f31004152124s78b41e02v94d37126012778f@mail.gmail.com>
References: <u2qbed370f31004152124s78b41e02v94d37126012778f@mail.gmail.com>
Message-ID: <20100418152352.2682.548240445.divmod.xquotient.11@localhost.localdomain>

On 16 Apr, 04:24 am, tuxattack14 at gmail.com wrote:
>Hi,
>I am trying to use php script on twisted server using twcgi.I want to 
>make
>use of http POST method in that.What I want to do is, suppose I am 
>having
>one html page say index.html and from that page I want to redirect to 
>other
>php page and pass data to that php page using POST method.But I am not 
>able
>to access any POST data in php script.When I debugged through
>twcgi.CGIScript.render method, I didn't find any reference to POST 
>data.So
>how can i make use of POST data in php ?

I don't really understand the question.  You have a lot of stuff going 
on here:

  * HTTP POSTs
  * Redirects
  * CGIScript
  * PHP

Can you try to describe the scenario you're trying to get working step 
by step, carefully separating each of these different pieces?

You may also want to post follow-ups to the twisted-web mailing list 
instead.

Jean-Paul



From ssteinerx at gmail.com  Sun Apr 18 09:42:11 2010
From: ssteinerx at gmail.com (ssteinerX@gmail.com)
Date: Sun, 18 Apr 2010 11:42:11 -0400
Subject: [Twisted-Python] mercurial branch
In-Reply-To: <20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>
References: <4BBF2620.2000901@libero.it>
	<p2mbadc170e1004171844jf3f5739ezf9166dfbae96a4bb@mail.gmail.com>
	<20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>
Message-ID: <CDDE3F4C-DF08-4E6D-A693-8718E4363220@gmail.com>


On Apr 18, 2010, at 11:19 AM, exarkun at twistedmatrix.com wrote:

> On 01:44 am, ivan at ludios.org wrote:
>> On Fri, Apr 9, 2010 at 6:05 AM, Manlio Perillo 
>> <manlio_perillo at libero.it> wrote:
>>> Does twisted have a Mercurial (git is also fine) mirror?
>>> 
>>> Unofficial mirror is ok; I just would like to avoid download entire 
>>> svn
>>> history with hgsvn.
>> 
>> I keep an unofficial git-svn cloned copy here:
>> http://ludios.net/mirror/
>> 
>> In case anyone is curious, git-svn takes about 26 hours to mirror it,
>> because it restarts at r1 for several branches. I am told this is due
>> to the use of SVN partial branches.
> 
> It'd be great if everyone who wants git access could share a single 
> mirror (perhaps this one), to avoid the additional load on our svn 
> server that creating a new mirror creates.
> 
> The same applies to other vcs mirrors, too, of course.

Of course, if you made a "sanctioned" mirror in GitHub & BitBucket & LaunchPad owned by the actual project, then all these others could just fade away under the weight of an "official mirror."

That's not to say you couldn't save a ton of time by forking one of the existing ones, but making "One Repo (of each type) to Rule Them All" would be way helpful..even if it doesn't read as well as the original "One Ring..."

S




From jasonjwwilliams at gmail.com  Sun Apr 18 10:24:46 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Sun, 18 Apr 2010 10:24:46 -0600
Subject: [Twisted-Python] mercurial branch
In-Reply-To: <20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>
References: <4BBF2620.2000901@libero.it>
	<p2mbadc170e1004171844jf3f5739ezf9166dfbae96a4bb@mail.gmail.com>
	<20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>
Message-ID: <1F47BD30-4828-4737-9D7A-E4C4F83E8129@gmail.com>

I use Powdahound mirror at Gihub. I believe it updates daily. Perhaps,  
we could list it on the website to steer Git folks to it.

-J

Sent via iPhone

Is your e-mail Premiere?

On Apr 18, 2010, at 9:19, exarkun at twistedmatrix.com wrote:

> On 01:44 am, ivan at ludios.org wrote:
>> On Fri, Apr 9, 2010 at 6:05 AM, Manlio Perillo
>> <manlio_perillo at libero.it> wrote:
>>> Does twisted have a Mercurial (git is also fine) mirror?
>>>
>>> Unofficial mirror is ok; I just would like to avoid download entire
>>> svn
>>> history with hgsvn.
>>
>> I keep an unofficial git-svn cloned copy here:
>> http://ludios.net/mirror/
>>
>> In case anyone is curious, git-svn takes about 26 hours to mirror it,
>> because it restarts at r1 for several branches. I am told this is due
>> to the use of SVN partial branches.
>
> It'd be great if everyone who wants git access could share a single
> mirror (perhaps this one), to avoid the additional load on our svn
> server that creating a new mirror creates.
>
> The same applies to other vcs mirrors, too, of course.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From jasonjwwilliams at gmail.com  Sun Apr 18 10:31:31 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Sun, 18 Apr 2010 10:31:31 -0600
Subject: [Twisted-Python] mercurial branch
In-Reply-To: <CDDE3F4C-DF08-4E6D-A693-8718E4363220@gmail.com>
References: <4BBF2620.2000901@libero.it>
	<p2mbadc170e1004171844jf3f5739ezf9166dfbae96a4bb@mail.gmail.com>
	<20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>
	<CDDE3F4C-DF08-4E6D-A693-8718E4363220@gmail.com>
Message-ID: <0B8B2109-2BBC-4DB9-A259-F838CE874815@gmail.com>

Granted we're just talking about DVCS mirrors here...but someday it  
would be really great to be able to send pull requests instead of  
patches for code enhancements. ;)

-J

Sent via iPhone

Is your e-mail Premiere?

On Apr 18, 2010, at 9:42, "ssteinerX at gmail.com" <ssteinerx at gmail.com>  
wrote:

>
> On Apr 18, 2010, at 11:19 AM, exarkun at twistedmatrix.com wrote:
>
>> On 01:44 am, ivan at ludios.org wrote:
>>> On Fri, Apr 9, 2010 at 6:05 AM, Manlio Perillo
>>> <manlio_perillo at libero.it> wrote:
>>>> Does twisted have a Mercurial (git is also fine) mirror?
>>>>
>>>> Unofficial mirror is ok; I just would like to avoid download entire
>>>> svn
>>>> history with hgsvn.
>>>
>>> I keep an unofficial git-svn cloned copy here:
>>> http://ludios.net/mirror/
>>>
>>> In case anyone is curious, git-svn takes about 26 hours to mirror  
>>> it,
>>> because it restarts at r1 for several branches. I am told this is  
>>> due
>>> to the use of SVN partial branches.
>>
>> It'd be great if everyone who wants git access could share a single
>> mirror (perhaps this one), to avoid the additional load on our svn
>> server that creating a new mirror creates.
>>
>> The same applies to other vcs mirrors, too, of course.
>
> Of course, if you made a "sanctioned" mirror in GitHub & BitBucket &  
> LaunchPad owned by the actual project, then all these others could  
> just fade away under the weight of an "official mirror."
>
> That's not to say you couldn't save a ton of time by forking one of  
> the existing ones, but making "One Repo (of each type) to Rule Them  
> All" would be way helpful..even if it doesn't read as well as the  
> original "One Ring..."
>
> S
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From tuxattack14 at gmail.com  Sun Apr 18 23:29:11 2010
From: tuxattack14 at gmail.com (Tux Attack)
Date: Mon, 19 Apr 2010 10:59:11 +0530
Subject: [Twisted-Python] HTTP POST method in php on twisted server
In-Reply-To: <20100418152352.2682.548240445.divmod.xquotient.11@localhost.localdomain>
References: <u2qbed370f31004152124s78b41e02v94d37126012778f@mail.gmail.com>
	<20100418152352.2682.548240445.divmod.xquotient.11@localhost.localdomain>
Message-ID: <v2sbed370f31004182229ne6f22117rb9a3be896f5ecbec@mail.gmail.com>

On Sun, Apr 18, 2010 at 8:53 PM, <exarkun at twistedmatrix.com> wrote:

> On 16 Apr, 04:24 am, tuxattack14 at gmail.com wrote:
> >Hi,
> >I am trying to use php script on twisted server using twcgi.I want to
> >make
> >use of http POST method in that.What I want to do is, suppose I am
> >having
> >one html page say index.html and from that page I want to redirect to
> >other
> >php page and pass data to that php page using POST method.But I am not
> >able
> >to access any POST data in php script.When I debugged through
> >twcgi.CGIScript.render method, I didn't find any reference to POST
> >data.So
> >how can i make use of POST data in php ?
>
> I don't really understand the question.  You have a lot of stuff going
> on here:
>
>  * HTTP POSTs
>  * Redirects
>  * CGIScript
>  * PHP
>
> Can you try to describe the scenario you're trying to get working step
> by step, carefully separating each of these different pieces?
>
> You may also want to post follow-ups to the twisted-web mailing list
> instead.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

My aim is to build a server that will support file uploading on server and
uploading is to be done using web browser.So i selected php script for file
upload.
I made a simple html form.

> <html>
> <body>
> <div align="center">
> <br />
> <form enctype="multipart/form-data" action="upload_file.php" method="POST">
>  Please choose a file: <input name="upload_file" type="file" /><br />
>  <input type="submit" value="Upload" />
>  </form> </body>
> </html>
>


Now this file is sent using POST method and then it will redirect to a php
script named upload_file.php.
So to make use of php i used twcgi.PHPScript. When i checked i am not
getting POST data in php code.
Execution calls twcgi.CGIScript.render method internally.When i checked in
this render method, data sent using POST is available in request.args
variable but not sent to php CLI.
Whereas in case of GET method the url is parsed and data sent using GET
method is put in qargs variable and then sent to php CLI.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100419/b4a668a5/attachment-0001.html>

From manlio_perillo at libero.it  Mon Apr 19 11:23:02 2010
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Mon, 19 Apr 2010 19:23:02 +0200
Subject: [Twisted-Python] mercurial branch
In-Reply-To: <20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>
References: <4BBF2620.2000901@libero.it>	<p2mbadc170e1004171844jf3f5739ezf9166dfbae96a4bb@mail.gmail.com>
	<20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>
Message-ID: <4BCC9176.1000905@libero.it>

exarkun at twistedmatrix.com ha scritto:
> [...]
> It'd be great if everyone who wants git access could share a single 
> mirror (perhaps this one), to avoid the additional load on our svn 
> server that creating a new mirror creates.
> 

Since Twisted has an official(?) Bazaar mirror on Launchpad (that I did
not notice before), maybe it is more easy to mirror this repository,
when converting to a different VCS.


Regards  Manlio



From jathan at gmail.com  Mon Apr 19 17:26:56 2010
From: jathan at gmail.com (jathan.)
Date: Mon, 19 Apr 2010 16:26:56 -0700
Subject: [Twisted-Python] Utilizing Twisted for transport w/ SUDS
Message-ID: <q2r4e0e47491004191626p18bc0b4bmc539fb0e90917279@mail.gmail.com>

Hello-

I have a project that is based on Twisted used to
communicate with network devices and I am adding support for a new
vendor (Citrix NetScaler) whose API is SOAP.  Unfortunately the
support for SOAP in Twisted still relies on SOAPpy, which is badly out
of date. In fact as of this email (I just checked), twisted.web.soap
itself hasn't even been updated in 21 months!

I would like to ask if anyone has any experience they would be willing
to share with utilizing Twisted's superb asynchronous transport
functionality with SUDS.  It seems like plugging in a custom Twisted
transport would be a natural fit in SUDS' Client.options.transport, I'm just
having
a hard time wrapping my head around it.

I did come up with a way to call the SOAP method with SUDS
asynchronously by utilizing twisted.internet.threads.deferToThread(),
but this feels like a hack to me.

Here is an example of what I've done, just to give you an idea:

   # netscaler is a module I wrote using suds to interface with NetScaler
SOAP
   # Source: http://bitbucket.org/jathanism/netscaler-api/src
   import netscaler
   import os, sys
   from twisted.internet import reactor, defer, threads

   # netscaler.API is the class that sets up the suds.client.Client object
   host = 'netscaler.local'
   username = password = 'nsroot'
   wsdl_url = 'file://' + os.path.join(os.getcwd(), 'NSUserAdmin.wsdl')
   api = netscaler.API(host, username=username, password=password,
wsdl_url=wsdl_url)

   results = []
   errors = []

   def handleResult(result):
       print '\tgot result: %s' % (result,)
       results.append(result)

   def handleError(err):
       sys.stderr.write('\tgot failure: %s' % (err,))
       errors.append(err)

   # this converts the api.login() call to a Twisted thread.
   # api.login() is equivalent to:
   # api.service.login(username=self.username, password=self.password)
   deferred = threads.deferToThread(api.login)
   deferred.addCallbacks(handleResult, handleError)

   reactor.run()

This works as expected and defers return of the api.login() call until
it is complete, instead of blocking.  But as I said, it doesn't feel
right.

Thanks in advance for any help, guidance, feedback, criticism,
insults, or total solutions.

jathan.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100419/81ce6ffd/attachment-0001.html>

From alexandre at quessy.net  Tue Apr 20 00:48:22 2010
From: alexandre at quessy.net (Alexandre Quessy)
Date: Tue, 20 Apr 2010 02:48:22 -0400
Subject: [Twisted-Python] Utilizing Twisted for transport w/ SUDS
In-Reply-To: <q2r4e0e47491004191626p18bc0b4bmc539fb0e90917279@mail.gmail.com>
References: <q2r4e0e47491004191626p18bc0b4bmc539fb0e90917279@mail.gmail.com>
Message-ID: <u2o72236ba91004192348k2a66a9c5vf785ddbbe8caf@mail.gmail.com>

Hi everyone,
Two years ago, I've dropped SUDS to generate and parse the XML by
hand, using xml.dom.minidom.
I don't remember why exactly.
I hope this comment is useful for you. (?!)

:)

Alex

2010/4/19 jathan. <jathan at gmail.com>:
> Hello-
> I have a project that is based on Twisted used to
> communicate with network devices and I am adding support for a new
> vendor (Citrix NetScaler) whose API is SOAP. Unfortunately the
> support for SOAP in Twisted still relies on SOAPpy, which is badly out
> of date. In fact as of this email (I just checked), twisted.web.soap
> itself hasn't even been updated in 21 months!
> I would like to ask if anyone has any experience they would be willing
> to share with utilizing Twisted's superb asynchronous transport
> functionality with SUDS. It seems like plugging in a custom Twisted
> transport would be a natural fit in SUDS' Client.options.transport, I'm just
> having
> a hard time wrapping my head around it.
> I did come up with a way to call the SOAP method with SUDS
> asynchronously by utilizing twisted.internet.threads.deferToThread(),
> but this feels like a hack to me.
> Here is an example of what I've done, just to give you an idea:
>  # netscaler is a module I wrote using suds to interface with NetScaler
> SOAP
>  # Source: http://bitbucket.org/jathanism/netscaler-api/src
>  import netscaler
>  import os, sys
>  from twisted.internet import reactor, defer, threads
>  # netscaler.API is the class that sets up the suds.client.Client object
>  host = 'netscaler.local'
>  username = password = 'nsroot'
>  wsdl_url = 'file://' + os.path.join(os.getcwd(), 'NSUserAdmin.wsdl')
>  api = netscaler.API(host, username=username, password=password,
> wsdl_url=wsdl_url)
>  results = []
>  errors = []
>  def handleResult(result):
>    print '\tgot result: %s' % (result,)
>    results.append(result)
>  def handleError(err):
>    sys.stderr.write('\tgot failure: %s' % (err,))
>    errors.append(err)
>  # this converts the api.login() call to a Twisted thread.
>  # api.login() is equivalent to:
>  # api.service.login(username=self.username, password=self.password)
>  deferred = threads.deferToThread(api.login)
>  deferred.addCallbacks(handleResult, handleError)
>  reactor.run()
> This works as expected and defers return of the api.login() call until
> it is complete, instead of blocking. But as I said, it doesn't feel
> right.
> Thanks in advance for any help, guidance, feedback, criticism,
> insults, or total solutions.
> jathan.
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



-- 
Alexandre Quessy
http://alexandre.quessy.net/



From landreville at deadtreepages.com  Tue Apr 20 07:34:44 2010
From: landreville at deadtreepages.com (Landreville)
Date: Tue, 20 Apr 2010 09:34:44 -0400
Subject: [Twisted-Python] Utilizing Twisted for transport w/ SUDS
In-Reply-To: <q2r4e0e47491004191626p18bc0b4bmc539fb0e90917279@mail.gmail.com>
References: <q2r4e0e47491004191626p18bc0b4bmc539fb0e90917279@mail.gmail.com>
Message-ID: <k2m9d748c781004200634u14eda62fq5c5dc6d2561858e@mail.gmail.com>

On Mon, Apr 19, 2010 at 7:26 PM, jathan. <jathan at gmail.com> wrote:
> Hello-
> I have a project that is based on Twisted used to
> communicate with network devices and I am adding support for a new
> vendor (Citrix NetScaler) whose API is SOAP. Unfortunately the
> support for SOAP in Twisted still relies on SOAPpy, which is badly out
> of date. In fact as of this email (I just checked), twisted.web.soap
> itself hasn't even been updated in 21 months!
> I would like to ask if anyone has any experience they would be willing
> to share with utilizing Twisted's superb asynchronous transport
> functionality with SUDS. It seems like plugging in a custom Twisted
> transport would be a natural fit in SUDS' Client.options.transport, I'm just
> having
> a hard time wrapping my head around it.
> I did come up with a way to call the SOAP method with SUDS
> asynchronously by utilizing twisted.internet.threads.deferToThread(),
> but this feels like a hack to me.

I did a similar thing. I wrapped the SUDS client calls into
deferToThread by subclassing suds.Client and adding a method
callMethod which returns a deferred. Here is the code I'm using:
""" Wrapper for suds to create deferred instances. """
from suds.client import Client as SudsClient
from twisted.internet.threads import deferToThread

class Client(SudsClient):

    # method for returning a deferred for the RPC
    def callRemote(self, method, *args, **kwargs):
        def call(m, *a, **kw):
            result = self.service.__getattr__(m)(*a, **kw)
            return result
        d = deferToThread(call, method, *args, **kwargs)
        return d



From exarkun at twistedmatrix.com  Tue Apr 20 07:36:33 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 20 Apr 2010 13:36:33 -0000
Subject: [Twisted-Python] HTTP POST method in php on twisted server
In-Reply-To: <v2sbed370f31004182229ne6f22117rb9a3be896f5ecbec@mail.gmail.com>
References: <u2qbed370f31004152124s78b41e02v94d37126012778f@mail.gmail.com>
	<20100418152352.2682.548240445.divmod.xquotient.11@localhost.localdomain>
	<v2sbed370f31004182229ne6f22117rb9a3be896f5ecbec@mail.gmail.com>
Message-ID: <20100420133633.2843.1836194803.divmod.xquotient.1@localhost.localdomain>

On 19 Apr, 05:29 am, tuxattack14 at gmail.com wrote:
>On Sun, Apr 18, 2010 at 8:53 PM, <exarkun at twistedmatrix.com> wrote:
>>On 16 Apr, 04:24 am, tuxattack14 at gmail.com wrote:
>> >Hi,
>> >I am trying to use php script on twisted server using twcgi.I want to
>> >make
>> >use of http POST method in that.What I want to do is, suppose I am
>> >having
>> >one html page say index.html and from that page I want to redirect to
>> >other
>> >php page and pass data to that php page using POST method.But I am 
>>not
>> >able
>> >to access any POST data in php script.When I debugged through
>> >twcgi.CGIScript.render method, I didn't find any reference to POST
>> >data.So
>> >how can i make use of POST data in php ?
>>
>>I don't really understand the question.  You have a lot of stuff going
>>on here:
>>
>>  * HTTP POSTs
>>  * Redirects
>>  * CGIScript
>>  * PHP
>>
>>Can you try to describe the scenario you're trying to get working step
>>by step, carefully separating each of these different pieces?
>>
>>You may also want to post follow-ups to the twisted-web mailing list
>>instead.
>>
>>Jean-Paul
>>
>>_______________________________________________
>>Twisted-Python mailing list
>>Twisted-Python at twistedmatrix.com
>>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>My aim is to build a server that will support file uploading on server 
>and
>uploading is to be done using web browser.So i selected php script for 
>file
>upload.
>I made a simple html form.
>><html>
>><body>
>><div align="center">
>><br />
>><form enctype="multipart/form-data" action="upload_file.php" 
>>method="POST">
>>  Please choose a file: <input name="upload_file" type="file" /><br />
>>  <input type="submit" value="Upload" />
>>  </form> </body>
>></html>
>
>
>Now this file is sent using POST method and then it will redirect to a 
>php
>script named upload_file.php.
>So to make use of php i used twcgi.PHPScript. When i checked i am not
>getting POST data in php code.
>Execution calls twcgi.CGIScript.render method internally.When i checked 
>in
>this render method, data sent using POST is available in request.args
>variable but not sent to php CLI.
>Whereas in case of GET method the url is parsed and data sent using GET
>method is put in qargs variable and then sent to php CLI.

Can you post a short example (<http://sscce.org/>) that demonstrates 
this?

Jean-Paul



From glyph at twistedmatrix.com  Tue Apr 20 11:17:36 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Tue, 20 Apr 2010 10:17:36 -0700
Subject: [Twisted-Python] mercurial branch
In-Reply-To: <4BCC9176.1000905@libero.it>
References: <4BBF2620.2000901@libero.it>	<p2mbadc170e1004171844jf3f5739ezf9166dfbae96a4bb@mail.gmail.com>
	<20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>
	<4BCC9176.1000905@libero.it>
Message-ID: <839AA5EF-75E4-4614-A93E-93FEF1866AB5@twistedmatrix.com>


On Apr 19, 2010, at 10:23 AM, Manlio Perillo wrote:

> Since Twisted has an official(?) Bazaar mirror on Launchpad (that I did
> not notice before), maybe it is more easy to mirror this repository,
> when converting to a different VCS.

+1.

If possible, I'd very much prefer that we have just the one DVCS mirror instead of one for darcs, one for mercurial, one for git and one for bazaar.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100420/e7fd5b08/attachment.html>

From jasonjwwilliams at gmail.com  Tue Apr 20 11:42:39 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Tue, 20 Apr 2010 11:42:39 -0600
Subject: [Twisted-Python] mercurial branch
In-Reply-To: <839AA5EF-75E4-4614-A93E-93FEF1866AB5@twistedmatrix.com>
References: <4BBF2620.2000901@libero.it>
	<p2mbadc170e1004171844jf3f5739ezf9166dfbae96a4bb@mail.gmail.com>
	<20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>
	<4BCC9176.1000905@libero.it>
	<839AA5EF-75E4-4614-A93E-93FEF1866AB5@twistedmatrix.com>
Message-ID: <p2n3b949f091004201042g587753cye4af2767c2516ca7@mail.gmail.com>

Just a personal opinion, but I'd rather see an official DVCS in
Mercurial or Git. I'm not a real Mercurial user myself but from a
market share point-of-view, there's more folks using those which would
make for a lower barrier to entry for new people getting involved.
Twisted frequently bucks popularity trends, but I'm not sure this in
one case where it would be beneficial.

-J

On Tue, Apr 20, 2010 at 11:17 AM, Glyph Lefkowitz
<glyph at twistedmatrix.com> wrote:
>
> On Apr 19, 2010, at 10:23 AM, Manlio Perillo wrote:
>
> Since Twisted has an official(?) Bazaar mirror on Launchpad (that I did
> not notice before), maybe it is more easy to mirror this repository,
> when converting to a different VCS.
>
> +1.
> If possible, I'd very much prefer that we have just the one DVCS mirror
> instead of one for darcs, one for mercurial, one for git and one for bazaar.
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



From rlotun at gmail.com  Tue Apr 20 13:27:29 2010
From: rlotun at gmail.com (Reza Lotun)
Date: Tue, 20 Apr 2010 12:27:29 -0700
Subject: [Twisted-Python] mercurial branch
In-Reply-To: <839AA5EF-75E4-4614-A93E-93FEF1866AB5@twistedmatrix.com>
References: <4BBF2620.2000901@libero.it>
	<p2mbadc170e1004171844jf3f5739ezf9166dfbae96a4bb@mail.gmail.com>
	<20100418151906.2682.1055775059.divmod.xquotient.7@localhost.localdomain>
	<4BCC9176.1000905@libero.it>
	<839AA5EF-75E4-4614-A93E-93FEF1866AB5@twistedmatrix.com>
Message-ID: <m2p95bb10691004201227i5b6cb3fnb1de374863b4f45a@mail.gmail.com>

Hi All,

> If possible, I'd very much prefer that we have just the one DVCS mirror
> instead of one for darcs, one for mercurial, one for git and one for bazaar.

I'm not a core developer but I thought I'd chime in on this one. In
most cases discussions about version control are really not important
- it's much better just to mandate *some* system, that's hopefully the
best tool for the job, all things considered. I also recognise that
bazaar and launchpad are important parts of the Twisted ecosystem, and
I'm not suggesting Twisted should move away from them at all.

However, when it comes to encouraging code contributions, it's getting
to be more apparent that GitHub is becoming the widely accepted medium
for this. I've been a mercurial man for a while, and would have hoped
bitbucket became a bigger player in this area, but for various reasons
it seems GitHub have "won" (whatever that means). In my daily work -
in the wider field I work in, and in various projects my work and
personal code depend on - more and more GitHub is becoming the primary
home for development of these projects.

Being "forced" into GitHub, I eventually (finally) *got* it - code
contribution is easy, and fun. The "fork, code, issue pull request"
model is fantastic. It's something that can be duplicated elsewhere,
but a process that has been popularized by GitHub. It also has reached
critical mass, and has entered into the minds of most developers I
know as "the" place to put open source and private code on.

For the sake of the encouragement of code contributions, I'd suggest
Twisted establish some sort of official GitHub presence. Twisted has a
great development process, and I realize the Twisted trac site should
be the center of this process. What I also suggest is that someone
(perhaps me, since I'm doing similar things at work), use GitHub's
great API to automate integration with Twisted's trac and Development
Process system. That way, besides setting up a periodic mirror system
off the core svn repo, all development actions could be automated and
unified.

I'm fairly confident that such a system could be implemented - again,
I'd enjoy helping out on this if the core devs think this would be
useful.

Cheers,
Reza

-- 
Reza Lotun
mobile: +44 (0)7521 310 763
email:  rlotun at gmail.com
work:   reza at tweetdeck.com
twitter: @rlotun



From jasonjwwilliams at gmail.com  Tue Apr 20 17:25:17 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Tue, 20 Apr 2010 17:25:17 -0600
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these on
	the frontpage of TM.com?
Message-ID: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>

Hi Guys,

Just been going through the twisted.web series JP put together
(http://jcalderone.livejournal.com/tag/sixty%20seconds)...these are
terrific. Turn the bottom one into serving a "Hello World" Resource
and you've got a much simpler Hello World than the Tornado site (not
to start a war on Tornado...their URL dispatch approach is pretty
nice).

Is there is a reason these aren't linked to on the frontpage of
twistedmatrix.com...preferably with the short hello world above it?
They're much more accessible than the Twisted Web tutorials under
docs.

-J



From exarkun at twistedmatrix.com  Tue Apr 20 18:38:24 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 21 Apr 2010 00:38:24 -0000
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on	the frontpage of TM.com?
In-Reply-To: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
Message-ID: <20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>

On 20 Apr, 11:25 pm, jasonjwwilliams at gmail.com wrote:
>Hi Guys,
>
>Just been going through the twisted.web series JP put together
>(http://jcalderone.livejournal.com/tag/sixty%20seconds)...these are
>terrific. Turn the bottom one into serving a "Hello World" Resource
>and you've got a much simpler Hello World than the Tornado site (not
>to start a war on Tornado...their URL dispatch approach is pretty
>nice).
>
>Is there is a reason these aren't linked to on the frontpage of
>twistedmatrix.com...preferably with the short hello world above it?
>They're much more accessible than the Twisted Web tutorials under
>docs.

They're linked from the Twisted Web documentation page.  They're 
probably not linked from the front page because no one has taken the 
time to redo the website design in a way that allows direct links to 
this kind of specific documentation.

Jean-Paul



From jasonjwwilliams at gmail.com  Tue Apr 20 19:23:32 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Tue, 20 Apr 2010 19:23:32 -0600
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
Message-ID: <7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>

I seem to be missing the link on the page: http://twistedmatrix.com/trac/wiki/Documentation

Sent via iPhone

Is your e-mail Premiere?

On Apr 20, 2010, at 18:38, exarkun at twistedmatrix.com wrote:

> On 20 Apr, 11:25 pm, jasonjwwilliams at gmail.com wrote:
>> Hi Guys,
>>
>> Just been going through the twisted.web series JP put together
>> (http://jcalderone.livejournal.com/tag/sixty%20seconds)...these are
>> terrific. Turn the bottom one into serving a "Hello World" Resource
>> and you've got a much simpler Hello World than the Tornado site (not
>> to start a war on Tornado...their URL dispatch approach is pretty
>> nice).
>>
>> Is there is a reason these aren't linked to on the frontpage of
>> twistedmatrix.com...preferably with the short hello world above it?
>> They're much more accessible than the Twisted Web tutorials under
>> docs.
>
> They're linked from the Twisted Web documentation page.  They're
> probably not linked from the front page because no one has taken the
> time to redo the website design in a way that allows direct links to
> this kind of specific documentation.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From jessica.mckellar at gmail.com  Tue Apr 20 19:30:56 2010
From: jessica.mckellar at gmail.com (Jessica McKellar)
Date: Tue, 20 Apr 2010 21:30:56 -0400
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
Message-ID: <i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>

Hi Jason,

It's under the web howto link on that page:

http://twistedmatrix.com/trac/wiki/Documentation
===>
http://twistedmatrix.com/documents/current/web/howto/
===>
http://twistedmatrix.com/documents/current/web/howto/web-in-60/index.html

-Jessica

On Tue, Apr 20, 2010 at 9:23 PM, Jason J. W. Williams <
jasonjwwilliams at gmail.com> wrote:

> I seem to be missing the link on the page:
> http://twistedmatrix.com/trac/wiki/Documentation
>
> Sent via iPhone
>
> Is your e-mail Premiere?
>
> On Apr 20, 2010, at 18:38, exarkun at twistedmatrix.com wrote:
>
> > On 20 Apr, 11:25 pm, jasonjwwilliams at gmail.com wrote:
> >> Hi Guys,
> >>
> >> Just been going through the twisted.web series JP put together
> >> (http://jcalderone.livejournal.com/tag/sixty%20seconds)...these<http://jcalderone.livejournal.com/tag/sixty%20seconds%29...these>are
> >> terrific. Turn the bottom one into serving a "Hello World" Resource
> >> and you've got a much simpler Hello World than the Tornado site (not
> >> to start a war on Tornado...their URL dispatch approach is pretty
> >> nice).
> >>
> >> Is there is a reason these aren't linked to on the frontpage of
> >> twistedmatrix.com...preferably with the short hello world above it?
> >> They're much more accessible than the Twisted Web tutorials under
> >> docs.
> >
> > They're linked from the Twisted Web documentation page.  They're
> > probably not linked from the front page because no one has taken the
> > time to redo the website design in a way that allows direct links to
> > this kind of specific documentation.
> >
> > Jean-Paul
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100420/de4cc462/attachment.html>

From jasonjwwilliams at gmail.com  Tue Apr 20 20:06:15 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Tue, 20 Apr 2010 20:06:15 -0600
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
Message-ID: <r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>

That was kind of my point... ;) It's pretty buried.  It's not under
docs directly and it's not under the "read this first!" about web
stuff. And yes I'm volunteering to reorg.

-J

On Tue, Apr 20, 2010 at 7:30 PM, Jessica McKellar
<jessica.mckellar at gmail.com> wrote:
> Hi Jason,
>
> It's under the web howto link on that page:
>
> http://twistedmatrix.com/trac/wiki/Documentation
> ===>
> http://twistedmatrix.com/documents/current/web/howto/
> ===>
> http://twistedmatrix.com/documents/current/web/howto/web-in-60/index.html
>
> -Jessica
>
> On Tue, Apr 20, 2010 at 9:23 PM, Jason J. W. Williams
> <jasonjwwilliams at gmail.com> wrote:
>>
>> I seem to be missing the link on the page:
>> http://twistedmatrix.com/trac/wiki/Documentation
>>
>> Sent via iPhone
>>
>> Is your e-mail Premiere?
>>
>> On Apr 20, 2010, at 18:38, exarkun at twistedmatrix.com wrote:
>>
>> > On 20 Apr, 11:25 pm, jasonjwwilliams at gmail.com wrote:
>> >> Hi Guys,
>> >>
>> >> Just been going through the twisted.web series JP put together
>> >> (http://jcalderone.livejournal.com/tag/sixty%20seconds)...these are
>> >> terrific. Turn the bottom one into serving a "Hello World" Resource
>> >> and you've got a much simpler Hello World than the Tornado site (not
>> >> to start a war on Tornado...their URL dispatch approach is pretty
>> >> nice).
>> >>
>> >> Is there is a reason these aren't linked to on the frontpage of
>> >> twistedmatrix.com...preferably with the short hello world above it?
>> >> They're much more accessible than the Twisted Web tutorials under
>> >> docs.
>> >
>> > They're linked from the Twisted Web documentation page. They're
>> > probably not linked from the front page because no one has taken the
>> > time to redo the website design in a way that allows direct links to
>> > this kind of specific documentation.
>> >
>> > Jean-Paul
>> >
>> > _______________________________________________
>> > Twisted-Python mailing list
>> > Twisted-Python at twistedmatrix.com
>> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



From don at delphexonline.com  Wed Apr 21 05:38:09 2010
From: don at delphexonline.com (Don Schoeman)
Date: Wed, 21 Apr 2010 13:38:09 +0200
Subject: [Twisted-Python] twistd and init.d
Message-ID: <4BCEE3A1.10601@delphexonline.com>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100421/9e29fa7b/attachment.html>

From maarten at treewalker.org  Wed Apr 21 06:07:26 2010
From: maarten at treewalker.org (Maarten ter Huurne)
Date: Wed, 21 Apr 2010 14:07:26 +0200
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BCEE3A1.10601@delphexonline.com>
References: <4BCEE3A1.10601@delphexonline.com>
Message-ID: <201004211407.26441.maarten@treewalker.org>

On Wednesday 21 April 2010, Don Schoeman wrote:

>  This works fine when running /etc/init.d/ghserver start and
> /etc/init.d/ghserver stop. The script also run when I boot since the
> logger actually logs the "GHServer: Starting" text to the
> /var/log/messages file. However, my service actually does not start.

There is no PATH variable set when the script is called at system startup. 
So you'll have to use the full path to twisted.

Bye,
		Maarten



From screwtape at froup.com  Wed Apr 21 06:16:56 2010
From: screwtape at froup.com (Tim Allen)
Date: Wed, 21 Apr 2010 22:16:56 +1000
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BCEE3A1.10601@delphexonline.com>
References: <4BCEE3A1.10601@delphexonline.com>
Message-ID: <20100421121656.GF15611@boombah.thristian.org>

On Wed, Apr 21, 2010 at 01:38:09PM +0200, Don Schoeman wrote:
>    This works fine when running /etc/init.d/ghserver start and
>    /etc/init.d/ghserver stop. The script also run when I boot since the
>    logger actually logs the "GHServer: Starting" text to the
>    /var/log/messages file. However, my service actually does not start. There
>    is no pid to be found anywhere, there are no error logs anywhere, just
>    nothing. I might be doing something wrong here but is there someone who's
>    gone through this process and can provide some samples how they did it?

I haven't written an init-script for twistd myself, I just use the one
auto-generated by tap2rpm. You can compare your script to the template
tap2rpm uses and see if that gives you any clues:

    http://twistedmatrix.com/trac/browser/trunk/twisted/scripts/tap2rpm.py#L17    
It surprises me that you say you can tell that the script runs at boot
because you can see it in /var/log/messages - although most Linux
distros hide the boot-script messages by default, they usually provide
a way to display them for debugging purposes such as these (different
distributions use different actions to trigger boot messages; if you
can't find instructions for your distribution online, you might try
hitting Escape a few times at different parts of the boot sequence).

Finally, in my limited experience of diagnosing scripts that work from
an interactive shell but not at boot time, you might want to look for
code that uses environment variables. $EMPLOYER once had some scripts
that got some particular setting from an environment variable that was
only set by interactive shells - so if you ssh'd to the machine and ran
the code, it'd be fine, but it crashed when run at bootup.

CentOS (and perhaps other Linux distributions) has a tool called
/sbin/service. If you run "/sbin/service ghserver start" rather than
"/etc/init.d/ghserver start", /sbin/service will start the service in
a clean, boot-like environment and you might get more debugging clues
that way.



From burslem2001 at yahoo.com  Wed Apr 21 06:27:29 2010
From: burslem2001 at yahoo.com (gary clark)
Date: Wed, 21 Apr 2010 05:27:29 -0700 (PDT)
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <20100421121656.GF15611@boombah.thristian.org>
Message-ID: <674187.80600.qm@web112503.mail.gq1.yahoo.com>

I have written an init.d script thats starts and stops a twistd. You need to create a .tac file and create a daemon. A wee bit more tricky but you can start twistd fine.

Thanks,
Garyc

--- On Wed, 4/21/10, Tim Allen <screwtape at froup.com> wrote:

> From: Tim Allen <screwtape at froup.com>
> Subject: Re: [Twisted-Python] twistd and init.d
> To: "Twisted general discussion" <twisted-python at twistedmatrix.com>
> Date: Wednesday, April 21, 2010, 7:16 AM
> On Wed, Apr 21, 2010 at 01:38:09PM
> +0200, Don Schoeman wrote:
> >  This works fine when running
> /etc/init.d/ghserver start and
> >  /etc/init.d/ghserver stop. The script
> also run when I boot since the
> >  logger actually logs the "GHServer:
> Starting" text to the
> >  /var/log/messages file. However, my
> service actually does not start. There
> >  is no pid to be found anywhere, there are
> no error logs anywhere, just
> >  nothing. I might be doing something wrong
> here but is there someone who's
> >  gone through this process and can provide
> some samples how they did it?
> 
> I haven't written an init-script for twistd myself, I just
> use the one
> auto-generated by tap2rpm. You can compare your script to
> the template
> tap2rpm uses and see if that gives you any clues:
> 
>   http://twistedmatrix.com/trac/browser/trunk/twisted/scripts/tap2rpm.py#L17
>  
> It surprises me that you say you can tell that the script
> runs at boot
> because you can see it in /var/log/messages - although most
> Linux
> distros hide the boot-script messages by default, they
> usually provide
> a way to display them for debugging purposes such as these
> (different
> distributions use different actions to trigger boot
> messages; if you
> can't find instructions for your distribution online, you
> might try
> hitting Escape a few times at different parts of the boot
> sequence).
> 
> Finally, in my limited experience of diagnosing scripts
> that work from
> an interactive shell but not at boot time, you might want
> to look for
> code that uses environment variables. $EMPLOYER once had
> some scripts
> that got some particular setting from an environment
> variable that was
> only set by interactive shells - so if you ssh'd to the
> machine and ran
> the code, it'd be fine, but it crashed when run at bootup.
> 
> CentOS (and perhaps other Linux distributions) has a tool
> called
> /sbin/service. If you run "/sbin/service ghserver start"
> rather than
> "/etc/init.d/ghserver start", /sbin/service will start the
> service in
> a clean, boot-like environment and you might get more
> debugging clues
> that way.
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 




From don at delphexonline.com  Wed Apr 21 06:48:10 2010
From: don at delphexonline.com (Don Schoeman)
Date: Wed, 21 Apr 2010 14:48:10 +0200
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BCEE3A1.10601@delphexonline.com>
References: <4BCEE3A1.10601@delphexonline.com>
Message-ID: <4BCEF40A.1060405@delphexonline.com>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100421/eb897649/attachment.html>

From don at delphexonline.com  Wed Apr 21 06:54:39 2010
From: don at delphexonline.com (Don Schoeman)
Date: Wed, 21 Apr 2010 14:54:39 +0200
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BCEF40A.1060405@delphexonline.com>
References: <4BCEE3A1.10601@delphexonline.com>
	<4BCEF40A.1060405@delphexonline.com>
Message-ID: <4BCEF58F.2000606@delphexonline.com>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100421/64d6fd92/attachment.html>

From burslem2001 at yahoo.com  Wed Apr 21 07:15:54 2010
From: burslem2001 at yahoo.com (gary clark)
Date: Wed, 21 Apr 2010 06:15:54 -0700 (PDT)
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BCEF58F.2000606@delphexonline.com>
Message-ID: <924638.49082.qm@web112508.mail.gq1.yahoo.com>


My understanding is the twistd will have a default log twistd.log. 

Thanks,
Garyc

--- On Wed, 4/21/10, Don Schoeman <don at delphexonline.com> wrote:


From: Don Schoeman <don at delphexonline.com>
Subject: Re: [Twisted-Python] twistd and init.d
To: "Twisted general discussion" <twisted-python at twistedmatrix.com>
Date: Wednesday, April 21, 2010, 7:54 AM


Sorry, I mean't to say I will use the full path to twistd (i.e. /usr/bin/twistd) and see if that works.

Don Schoeman wrote: 
Thanks for the tips guys,

Maartin, I have a feeling that you may be correct. I'm going to see if I can't set the python path within the script.

Tim, the only reason I can see anything in /var/logs/messages is because I use the "logger" tool to log those messages directly from the bash shell script. See the script below.

Kind Regards,
Don


Don Schoeman wrote: 
Hi guys,

My application is being executed using twistd as per documentation. All is working fine but I need to have the service start automatically at boot time.

So as a test I've created a script in /etc/init.d/ which looks like this:

#! /bin/sh
### BEGIN INIT INFO
# Provides: ghserver
# Required-Start: $local_fs $remote_fs $network $syslog
# Required-Stop: $local_fs $remote_fs $network $syslog
# Default-Start: 2 3 4 5
# Default-Stop: 0 1 6
# Short-Description: Start/stop GHServer server
### END INIT INFO

logger "GHServer: Start script executed"
GH_SERVER_PATH="/home/myname/Python/ghserver"
export PYTHONPATH="$GH_SERVER_PATH:$PYTHONPATH"

case "$1" in
 start)
 logger "GHServer: Starting"
 echo "Starting GHServer..."
 twistd -y "$GH_SERVER_PATH/ghserverapp.py" -l "$GH_SERVER_PATH/ghserver.log" --pidfile "$GH_SERVER_PATH/twistd.pid"
 ;;
 stop)
 logger "GHServer: Stopping"
 echo "Stopping GHServer..."
 kill `cat $GH_SERVER_PATH/twistd.pid`
 ;;
 *)
 logger "GHServer: Invalid usage"
 echo "Usage: /etc/init.d/ghserver {start|stop}"
 exit 1
 ;;
esac

exit 0


This works fine when running /etc/init.d/ghserver start and /etc/init.d/ghserver stop. The script also run when I boot since the logger actually logs the "GHServer: Starting" text to the /var/log/messages file. However, my service actually does not start. There is no pid to be found anywhere, there are no error logs anywhere, just nothing. I might be doing something wrong here but is there someone who's gone through this process and can provide some samples how they did it? Any help will be greatly appreciated.

Kind Regards,
Don



_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
  
_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
  
-----Inline Attachment Follows-----


_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100421/4ebbfca5/attachment.html>

From don at delphexonline.com  Wed Apr 21 07:37:10 2010
From: don at delphexonline.com (Don Schoeman)
Date: Wed, 21 Apr 2010 15:37:10 +0200
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <924638.49082.qm@web112508.mail.gq1.yahoo.com>
References: <924638.49082.qm@web112508.mail.gq1.yahoo.com>
Message-ID: <4BCEFF86.30802@delphexonline.com>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100421/3b94d819/attachment.html>

From itamar at itamarst.org  Wed Apr 21 08:12:10 2010
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Wed, 21 Apr 2010 14:12:10 +0000
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BCEFF86.30802@delphexonline.com>
References: <924638.49082.qm@web112508.mail.gq1.yahoo.com>
	<4BCEFF86.30802@delphexonline.com>
Message-ID: <1271859131.27208.419.camel@pintsize>

On Wed, 2010-04-21 at 15:37 +0200, Don Schoeman wrote:
> I still get the same results (or non-results) unfortunately. I have
> tried the following options:
> 
> 1) Tried running twistd by giving the fully qualified
> path: /usr/bin/twistd.
> 2) Tried running the .tac file together with the -g twistd switch
> instead.
> 3) Tried the --syslog switch to see if I can find anything in the
> logs.
> 4) Tried running it without supplying custom log and pid files.

What does running under trace tell you?




From don at delphexonline.com  Wed Apr 21 08:51:12 2010
From: don at delphexonline.com (Don Schoeman)
Date: Wed, 21 Apr 2010 16:51:12 +0200
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <1271859131.27208.419.camel@pintsize>
References: <924638.49082.qm@web112508.mail.gq1.yahoo.com>	<4BCEFF86.30802@delphexonline.com>
	<1271859131.27208.419.camel@pintsize>
Message-ID: <4BCF10E0.6040405@delphexonline.com>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100421/acfdd815/attachment.html>

From exarkun at twistedmatrix.com  Wed Apr 21 09:24:52 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 21 Apr 2010 15:24:52 -0000
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BCF10E0.6040405@delphexonline.com>
References: <924638.49082.qm@web112508.mail.gq1.yahoo.com>
	<4BCEFF86.30802@delphexonline.com>
	<1271859131.27208.419.camel@pintsize>
	<4BCF10E0.6040405@delphexonline.com>
Message-ID: <20100421152452.2548.1718335940.divmod.xquotient.77@localhost.localdomain>

I think Itamar was suggesting that you use "/bin/bash -x" as your init 
script interpreter and examine that output.

It may also make sense to find someone who knows about writing init 
scripts for your platform and ask them some questions.  It seems like 
this is an issue with the environment around twistd, not with twistd 
itself.

Jean-Paul



From jasonjwwilliams at gmail.com  Wed Apr 21 09:37:53 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Wed, 21 Apr 2010 09:37:53 -0600
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BCEE3A1.10601@delphexonline.com>
References: <4BCEE3A1.10601@delphexonline.com>
Message-ID: <j2q3b949f091004210837q6bcf731ar63f1471348e2adf9@mail.gmail.com>

Hi Don,

Here's the init.d we use for Twisted on Ubuntu. Sets the full path to Twistd:

http://gist.github.com/373978

-J

On Wed, Apr 21, 2010 at 5:38 AM, Don Schoeman <don at delphexonline.com> wrote:
> Hi guys,
>
> My application is being executed using twistd as per documentation. All is
> working fine but I need to have the service start automatically at boot
> time.
>
> So as a test I've created a script in /etc/init.d/ which looks like this:
>
> #! /bin/sh
> ### BEGIN INIT INFO
> # Provides: ghserver
> # Required-Start: $local_fs $remote_fs $network $syslog
> # Required-Stop: $local_fs $remote_fs $network $syslog
> # Default-Start: 2 3 4 5
> # Default-Stop: 0 1 6
> # Short-Description: Start/stop GHServer server
> ### END INIT INFO
>
> logger "GHServer: Start script executed"
> GH_SERVER_PATH="/home/myname/Python/ghserver"
> export PYTHONPATH="$GH_SERVER_PATH:$PYTHONPATH"
>
> case "$1" in
>  start)
>  logger "GHServer: Starting"
>  echo "Starting GHServer..."
>  twistd -y "$GH_SERVER_PATH/ghserverapp.py" -l
> "$GH_SERVER_PATH/ghserver.log" --pidfile "$GH_SERVER_PATH/twistd.pid"
>  ;;
>  stop)
>  logger "GHServer: Stopping"
>  echo "Stopping GHServer..."
>  kill `cat $GH_SERVER_PATH/twistd.pid`
>  ;;
>  *)
>  logger "GHServer: Invalid usage"
>  echo "Usage: /etc/init.d/ghserver {start|stop}"
>  exit 1
>  ;;
> esac
>
> exit 0
>
>
> This works fine when running /etc/init.d/ghserver start and
> /etc/init.d/ghserver stop. The script also run when I boot since the logger
> actually logs the "GHServer: Starting" text to the /var/log/messages file.
> However, my service actually does not start. There is no pid to be found
> anywhere, there are no error logs anywhere, just nothing. I might be doing
> something wrong here but is there someone who's gone through this process
> and can provide some samples how they did it? Any help will be greatly
> appreciated.
>
> Kind Regards,
> Don
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



From itamar at itamarst.org  Wed Apr 21 09:44:54 2010
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Wed, 21 Apr 2010 11:44:54 -0400 (EDT)
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <20100421152452.2548.1718335940.divmod.xquotient.77@localhost.localdom
	ain>
References: <924638.49082.qm@web112508.mail.gq1.yahoo.com>
	<4BCEFF86.30802@delphexonline.com>
	<1271859131.27208.419.camel@pintsize>
	<4BCF10E0.6040405@delphexonline.com>
	<20100421152452.2548.1718335940.divmod.xquotient.77@localhost.localdomain>
Message-ID: <36115.63.107.91.99.1271864694.squirrel@webmail.zoteca.com>

> I think Itamar was suggesting that you use "/bin/bash -x" as your init
> script interpreter and examine that output.

Actually, I typoed, and meant /usr/bin/strace, but that's a good idea too :)




From don at delphexonline.com  Wed Apr 21 09:45:42 2010
From: don at delphexonline.com (Don Schoeman)
Date: Wed, 21 Apr 2010 17:45:42 +0200
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <20100421152452.2548.1718335940.divmod.xquotient.77@localhost.localdomain>
References: <924638.49082.qm@web112508.mail.gq1.yahoo.com>	<4BCEFF86.30802@delphexonline.com>	<1271859131.27208.419.camel@pintsize>	<4BCF10E0.6040405@delphexonline.com>
	<20100421152452.2548.1718335940.divmod.xquotient.77@localhost.localdomain>
Message-ID: <4BCF1DA6.9010502@delphexonline.com>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100421/5ea92e1f/attachment.html>

From don at delphexonline.com  Wed Apr 21 09:46:07 2010
From: don at delphexonline.com (Don Schoeman)
Date: Wed, 21 Apr 2010 17:46:07 +0200
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <j2q3b949f091004210837q6bcf731ar63f1471348e2adf9@mail.gmail.com>
References: <4BCEE3A1.10601@delphexonline.com>
	<j2q3b949f091004210837q6bcf731ar63f1471348e2adf9@mail.gmail.com>
Message-ID: <4BCF1DBF.3040803@delphexonline.com>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100421/25b245d0/attachment.html>

From don at delphexonline.com  Wed Apr 21 10:16:05 2010
From: don at delphexonline.com (Don Schoeman)
Date: Wed, 21 Apr 2010 18:16:05 +0200
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <j2q3b949f091004210837q6bcf731ar63f1471348e2adf9@mail.gmail.com>
References: <4BCEE3A1.10601@delphexonline.com>
	<j2q3b949f091004210837q6bcf731ar63f1471348e2adf9@mail.gmail.com>
Message-ID: <4BCF24C5.5010204@delphexonline.com>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100421/e1eaced6/attachment.html>

From burslem2001 at yahoo.com  Wed Apr 21 15:47:29 2010
From: burslem2001 at yahoo.com (gary clark)
Date: Wed, 21 Apr 2010 14:47:29 -0700 (PDT)
Subject: [Twisted-Python] python and twisted and openssl
In-Reply-To: <4BCF1DA6.9010502@delphexonline.com>
Message-ID: <806606.35480.qm@web112511.mail.gq1.yahoo.com>

Hey Guys,

I apologise in advance but this is is not the correct platform.

Essentially I'm porting my server to a new VPS and the platform is enough to cause
me headaches to resurrect my twisted server.

I'm using open-ssl however I'm seeing mismatches:

[root at 1003100U6H1Z pyOpenSSL-0.9]# python 
Python 2.5.2 (r252:60911, Sep 30 2008, 15:41:38) 
[GCC 4.3.2 20080917 (Red Hat 4.3.2-4)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import OpenSSL
Traceback (most recent call last):
 File "<stdin>", line 1, in <module>
 File "/usr/local/lib/python2.5/site-packages/OpenSSL/__init__.py", line 11, in <module>
 import rand, crypto, SSL, tsafe
ImportError: /usr/local/lib/python2.5/site-packages/OpenSSL/crypto.so: undefined symbol: PyUnicodeUCS2_Decode

What is this PyUnicodeUCS2_Decode? Has anybody else seen this blighter?

Thanks,
Garyc


-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100421/3288ebe6/attachment.html>

From glyph at twistedmatrix.com  Wed Apr 21 18:13:11 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 21 Apr 2010 17:13:11 -0700
Subject: [Twisted-Python] python and twisted and openssl
In-Reply-To: <806606.35480.qm@web112511.mail.gq1.yahoo.com>
References: <806606.35480.qm@web112511.mail.gq1.yahoo.com>
Message-ID: <BA38ED11-E482-4DDD-9810-24AB35C7AC66@twistedmatrix.com>


On Apr 21, 2010, at 2:47 PM, gary clark wrote:

> undefined symbol: PyUnicodeUCS2_Decode

> What is this PyUnicodeUCS2_Decode? Has anybody else seen this blighter?

When you build Python, you either build its Unicode support with support for UCS2 (2-byte, 16-bit code points) or UCS4 (4-byte, 32-bit code points).  Extension modules must be built in the same configuration as the Python interpreter in order to be loaded and dynamically linked correctly, since UCS4 python is missing the UCS2 symbols and vice versa.

It looks like you have a UCS4 python and a UCS2 PyOpenSSL.  You need to re-build PyOpenSSL against the Python installation that you are using, or at least one built with the same options.

This is a pretty common build problem; if you search for mailing list threads about it on python-list or python-dev you should find plenty.

Good luck,

-glyph


From glyph at twistedmatrix.com  Wed Apr 21 18:15:07 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 21 Apr 2010 17:15:07 -0700
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
Message-ID: <6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>


On Apr 20, 2010, at 7:06 PM, Jason J. W. Williams wrote:

> And yes I'm volunteering to reorg.

Wow, you really are a glutton for punishment, aren't you? :)

Go ahead and create an alternate front-page wiki page, and let the list know when it's ready so we can pile on and critique.

I'm sure it wouldn't be too hard to do better than what's there, though.

Looking forward to it,

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100421/fbc2a354/attachment.html>

From burslem2001 at yahoo.com  Wed Apr 21 18:22:31 2010
From: burslem2001 at yahoo.com (gary clark)
Date: Wed, 21 Apr 2010 17:22:31 -0700 (PDT)
Subject: [Twisted-Python] python and twisted and openssl
In-Reply-To: <BA38ED11-E482-4DDD-9810-24AB35C7AC66@twistedmatrix.com>
Message-ID: <118251.20559.qm@web112502.mail.gq1.yahoo.com>


Much appreciated Glyph. I thought it would be a common problem.
Just didnt know which group to ask.

--- On Wed, 4/21/10, Glyph Lefkowitz <glyph at twistedmatrix.com> wrote:

> From: Glyph Lefkowitz <glyph at twistedmatrix.com>
> Subject: Re: [Twisted-Python] python and twisted and openssl
> To: "Twisted general discussion" <twisted-python at twistedmatrix.com>
> Date: Wednesday, April 21, 2010, 7:13 PM
> 
> On Apr 21, 2010, at 2:47 PM, gary clark wrote:
> 
> > undefined symbol: PyUnicodeUCS2_Decode
> 
> > What is this PyUnicodeUCS2_Decode? Has anybody else
> seen this blighter?
> 
> When you build Python, you either build its Unicode support
> with support for UCS2 (2-byte, 16-bit code points) or UCS4
> (4-byte, 32-bit code points). Extension modules must
> be built in the same configuration as the Python interpreter
> in order to be loaded and dynamically linked correctly,
> since UCS4 python is missing the UCS2 symbols and vice
> versa.
> 
> It looks like you have a UCS4 python and a UCS2
> PyOpenSSL. You need to re-build PyOpenSSL against the
> Python installation that you are using, or at least one
> built with the same options.
> 
> This is a pretty common build problem; if you search for
> mailing list threads about it on python-list or python-dev
> you should find plenty.
> 
> Good luck,
> 
> -glyph
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 




From jasonjwwilliams at gmail.com  Wed Apr 21 18:53:04 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Wed, 21 Apr 2010 18:53:04 -0600
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
Message-ID: <o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>

I guess I am. :)

Honestly, we've used Twisted in my org for quite some time and until I
was forced to use it my view of it was colored by my infrequent
beatings by it and the derisive comments of the primary maintainer at
that time.

With the 4 hours I spent actually learning the concepts, Twisted is no
longer a black box...it makes sense. That and I've
optimized/re-factored a bunch of code to work with that theory instead
of against it. Huge benefits.

I'd say the biggest barrier to entry is the documentation. And let's
face it...there's no reason Twisted shouldn't be used by more folks.
It's great...but learning it feels like a frat hazing. That's largely
because reading the docs feels like learning from that comp sci prof
who was smart...but wasn't smart enough to explain the concepts at
your level.

Let's take Tornado for a second...right now I'm building a web API for
our services and I'm in platform selection mode. My experience with
Twisted.web's URL dispatching system made me want to cry. Tornado was
a breeze to use. But here's the problem:

1.) There's no good async libraries for Tornado...so if I want to
integrate with Redis or MySQL or anything, I've got to accept that I'm
going to block when it's not necessary and live with that.
2.) Tornado's performance from the the benchmarks I've read is only
between 15% and 30% better than twisted.web.

2 is not enough to justify 1, because let's face it (and yeah I'm
coming to a point) 1 is going to kill your butt often enough to make 2
not matter.

But because I'm pretty comfortable with Twisted now...it makes more
sense for me to write my own dispatcher that emulates Tornado's than
give up all the rock-hard awesome features and reliability of Twisted.
deferToThread may not be the preferred way of handling a blocking
task...but when you need it, you need it.



...so my point is...Twisted's PR problem is it needs more accessible
docs. They need to be understandable, entertaining...and pretty. It
all starts with that front page...and the web app in 10 lines right
smack dab there.

I'm going to start with the front page...and then I'm going to write
some articles on my blog that are what I wanted when I was learning
Twisted. Hopefully, they'll be of use to someone.

-J

On Wed, Apr 21, 2010 at 6:15 PM, Glyph Lefkowitz
<glyph at twistedmatrix.com> wrote:
>
> On Apr 20, 2010, at 7:06 PM, Jason J. W. Williams wrote:
>
> And yes I'm volunteering to reorg.
>
> Wow, you really are a glutton for punishment, aren't you? :)
> Go ahead and create an alternate front-page wiki page, and let the list know
> when it's ready so we can pile on and critique.
> I'm sure it wouldn't be too hard to do better than what's there, though.
> Looking forward to it,
> -glyph
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



From ssteinerx at gmail.com  Wed Apr 21 19:05:13 2010
From: ssteinerx at gmail.com (ssteinerX@gmail.com)
Date: Wed, 21 Apr 2010 21:05:13 -0400
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
Message-ID: <32A4D2A6-1BF6-4E09-A2B7-570A8DEAA080@gmail.com>


On Apr 21, 2010, at 8:53 PM, Jason J. W. Williams wrote:
> 
> But because I'm pretty comfortable with Twisted now...it makes more
> sense for me to write my own dispatcher that emulates Tornado's than
> give up all the rock-hard awesome

My spam filter almost killed you on that phrase.  I think you mean rock-solid.

> ...so my point is...Twisted's PR problem is it needs more accessible
> docs. They need to be understandable, entertaining...and pretty. It
> all starts with that front page...and the web app in 10 lines right
> smack dab there.
> 
> I'm going to start with the front page...and then I'm going to write
> some articles on my blog that are what I wanted when I was learning
> Twisted. Hopefully, they'll be of use to someone.

Cool.  See exarkun's Twisted in 60 Seconds series; maybe fill in the things that are still not clear after that?

S




From jasonjwwilliams at gmail.com  Wed Apr 21 19:22:35 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Wed, 21 Apr 2010 19:22:35 -0600
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <32A4D2A6-1BF6-4E09-A2B7-570A8DEAA080@gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
	<32A4D2A6-1BF6-4E09-A2B7-570A8DEAA080@gmail.com>
Message-ID: <g2m3b949f091004211822g41810e2bh1f75134f445c38b4@mail.gmail.com>

Naw...I meant what I wrote. ;) exarkun's is great...it's web focused.
I'll post to them to the list and y'all can see if its worthwhile.

-J

On Wed, Apr 21, 2010 at 7:05 PM, ssteinerX at gmail.com
<ssteinerx at gmail.com> wrote:
>
> On Apr 21, 2010, at 8:53 PM, Jason J. W. Williams wrote:
>>
>> But because I'm pretty comfortable with Twisted now...it makes more
>> sense for me to write my own dispatcher that emulates Tornado's than
>> give up all the rock-hard awesome
>
> My spam filter almost killed you on that phrase. I think you mean rock-solid.
>
>> ...so my point is...Twisted's PR problem is it needs more accessible
>> docs. They need to be understandable, entertaining...and pretty. It
>> all starts with that front page...and the web app in 10 lines right
>> smack dab there.
>>
>> I'm going to start with the front page...and then I'm going to write
>> some articles on my blog that are what I wanted when I was learning
>> Twisted. Hopefully, they'll be of use to someone.
>
> Cool. See exarkun's Twisted in 60 Seconds series; maybe fill in the things that are still not clear after that?
>
> S
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From kevin.horn at gmail.com  Wed Apr 21 19:30:14 2010
From: kevin.horn at gmail.com (Kevin Horn)
Date: Wed, 21 Apr 2010 20:30:14 -0500
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <g2m3b949f091004211822g41810e2bh1f75134f445c38b4@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
	<32A4D2A6-1BF6-4E09-A2B7-570A8DEAA080@gmail.com>
	<g2m3b949f091004211822g41810e2bh1f75134f445c38b4@mail.gmail.com>
Message-ID: <k2r562bcc11004211830uc1496758u60738be30dad9acf@mail.gmail.com>

This blog series is also totally rock-a-licious.

http://krondo.com/blog/?page_id=1327

Kevin Horn

On Wed, Apr 21, 2010 at 8:22 PM, Jason J. W. Williams <
jasonjwwilliams at gmail.com> wrote:

> Naw...I meant what I wrote. ;) exarkun's is great...it's web focused.
> I'll post to them to the list and y'all can see if its worthwhile.
>
> -J
>
> On Wed, Apr 21, 2010 at 7:05 PM, ssteinerX at gmail.com
> <ssteinerx at gmail.com> wrote:
> >
> > On Apr 21, 2010, at 8:53 PM, Jason J. W. Williams wrote:
> >>
> >> But because I'm pretty comfortable with Twisted now...it makes more
> >> sense for me to write my own dispatcher that emulates Tornado's than
> >> give up all the rock-hard awesome
> >
> > My spam filter almost killed you on that phrase.  I think you mean
> rock-solid.
> >
> >> ...so my point is...Twisted's PR problem is it needs more accessible
> >> docs. They need to be understandable, entertaining...and pretty. It
> >> all starts with that front page...and the web app in 10 lines right
> >> smack dab there.
> >>
> >> I'm going to start with the front page...and then I'm going to write
> >> some articles on my blog that are what I wanted when I was learning
> >> Twisted. Hopefully, they'll be of use to someone.
> >
> > Cool.  See exarkun's Twisted in 60 Seconds series; maybe fill in the
> things that are still not clear after that?
> >
> > S
> >
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100421/65fc75b1/attachment.html>

From kevin.horn at gmail.com  Wed Apr 21 19:32:14 2010
From: kevin.horn at gmail.com (Kevin Horn)
Date: Wed, 21 Apr 2010 20:32:14 -0500
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
Message-ID: <n2l562bcc11004211832j96e0b59dx8118a3bd456febda@mail.gmail.com>

On Wed, Apr 21, 2010 at 7:53 PM, Jason J. W. Williams <
jasonjwwilliams at gmail.com> wrote:

>
> I'd say the biggest barrier to entry is the documentation. And let's
> face it...there's no reason Twisted shouldn't be used by more folks.
> It's great...but learning it feels like a frat hazing. That's largely
> because reading the docs feels like learning from that comp sci prof
> who was smart...but wasn't smart enough to explain the concepts at
> your level.
>

The docs really are about to get a whole lot better.  No really, any minute
now.

The Sphinx conversion is not dead!  I've just been busy...

And once that's done I think it'll be a whole lot easier to write and
maintain things, not to mention read the docs.

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100421/c0ca29d1/attachment.html>

From jasonjwwilliams at gmail.com  Wed Apr 21 19:32:37 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Wed, 21 Apr 2010 19:32:37 -0600
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <k2r562bcc11004211830uc1496758u60738be30dad9acf@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
	<32A4D2A6-1BF6-4E09-A2B7-570A8DEAA080@gmail.com>
	<g2m3b949f091004211822g41810e2bh1f75134f445c38b4@mail.gmail.com>
	<k2r562bcc11004211830uc1496758u60738be30dad9acf@mail.gmail.com>
Message-ID: <r2m3b949f091004211832l3cc698atd062ce9d321b8860@mail.gmail.com>

That looks pretty darn interesting.

-J

On Wed, Apr 21, 2010 at 7:30 PM, Kevin Horn <kevin.horn at gmail.com> wrote:
> This blog series is also totally rock-a-licious.
>
> http://krondo.com/blog/?page_id=1327
>
> Kevin Horn
>
> On Wed, Apr 21, 2010 at 8:22 PM, Jason J. W. Williams
> <jasonjwwilliams at gmail.com> wrote:
>>
>> Naw...I meant what I wrote. ;) exarkun's is great...it's web focused.
>> I'll post to them to the list and y'all can see if its worthwhile.
>>
>> -J
>>
>> On Wed, Apr 21, 2010 at 7:05 PM, ssteinerX at gmail.com
>> <ssteinerx at gmail.com> wrote:
>> >
>> > On Apr 21, 2010, at 8:53 PM, Jason J. W. Williams wrote:
>> >>
>> >> But because I'm pretty comfortable with Twisted now...it makes more
>> >> sense for me to write my own dispatcher that emulates Tornado's than
>> >> give up all the rock-hard awesome
>> >
>> > My spam filter almost killed you on that phrase. I think you mean
>> > rock-solid.
>> >
>> >> ...so my point is...Twisted's PR problem is it needs more accessible
>> >> docs. They need to be understandable, entertaining...and pretty. It
>> >> all starts with that front page...and the web app in 10 lines right
>> >> smack dab there.
>> >>
>> >> I'm going to start with the front page...and then I'm going to write
>> >> some articles on my blog that are what I wanted when I was learning
>> >> Twisted. Hopefully, they'll be of use to someone.
>> >
>> > Cool. See exarkun's Twisted in 60 Seconds series; maybe fill in the
>> > things that are still not clear after that?
>> >
>> > S
>> >
>> >
>> > _______________________________________________
>> > Twisted-Python mailing list
>> > Twisted-Python at twistedmatrix.com
>> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> >
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



From celord at gmail.com  Wed Apr 21 20:00:25 2010
From: celord at gmail.com (=?ISO-8859-1?B?Q+lzYXIgR2FyY+1h?=)
Date: Wed, 21 Apr 2010 20:00:25 -0600
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <k2r562bcc11004211830uc1496758u60738be30dad9acf@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
	<32A4D2A6-1BF6-4E09-A2B7-570A8DEAA080@gmail.com>
	<g2m3b949f091004211822g41810e2bh1f75134f445c38b4@mail.gmail.com>
	<k2r562bcc11004211830uc1496758u60738be30dad9acf@mail.gmail.com>
Message-ID: <r2pb302bf881004211900i8cd00162wbee21284cf3170cb@mail.gmail.com>

+1 Yes, it's great!!

2010/4/21 Kevin Horn <kevin.horn at gmail.com>

> This blog series is also totally rock-a-licious.
>
> http://krondo.com/blog/?page_id=1327
>



-- 
http://celord.blogspot.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100421/43d51cfc/attachment.html>

From anfedorov at gmail.com  Wed Apr 21 20:42:12 2010
From: anfedorov at gmail.com (Andrey Fedorov)
Date: Wed, 21 Apr 2010 22:42:12 -0400
Subject: [Twisted-Python] Getting a synchronous interface to a twisted
	reactor
Message-ID: <y2q7659cab31004211942r3a4a32c4od538f2a2872aaa3d@mail.gmail.com>

I'm trying to write a dead-simple interface for an IRC client library, like
so:

     import simpleirc

    connection = simpleirc.Connect('irc.freenode.net', 6667)
    channel = connection.join('foo')

    find_command = re.compile(r'google ([a-z]+)').findall

    for msg in channel:
        for t in find_command(msg):
            channel.say("http://google.com/search?q=%s" % t)

Working from the example in the
docs<http://twistedmatrix.com/documents/current/core/howto/clients.html#auto5>,
I'm running into trouble with the callbacks (the code is a bit lengthy, so I
pasted it here <https://gist.github.com/e7e13f074a2691de6371>). The problem
is that the call to channel.__next__ needs to be returned when the
callback <IRCClient
instance>.privmsg is called, there doesn't seem to be a clean option of
doing that. I could try to use exceptions or threads, but that seems like
the wrong thing here, is there a simpler (blocking?) way of using a twisted
reactor that would make this possible?

Cheers,
Andrey

On Wed, Apr 21, 2010 at 10:00 PM, Csar Garca <celord at gmail.com> wrote:

> +1 Yes, it's great!!
>
> 2010/4/21 Kevin Horn <kevin.horn at gmail.com>
>
> This blog series is also totally rock-a-licious.
>>
>> http://krondo.com/blog/?page_id=1327
>>
>
>
>
> --
> http://celord.blogspot.com/
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100421/105889a0/attachment.html>

From exarkun at twistedmatrix.com  Wed Apr 21 20:43:18 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 22 Apr 2010 02:43:18 -0000
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on	the frontpage of TM.com?
In-Reply-To: <o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
Message-ID: <20100422024318.7800.1617599668.divmod.xquotient.8@localhost.localdomain>

On 12:53 am, jasonjwwilliams at gmail.com wrote:
>I guess I am. :)

And thanks for doing so!  I'm really looking forward to the results.
>2.) Tornado's performance from the the benchmarks I've read is only
>between 15% and 30% better than twisted.web.

This is totally a tangent, and I hope no one feels the need to extend 
this part of this thread any further (unless it's with statistics), and 
I know the point wasn't to start a conversation about the relative 
performance of these two web servers, but I still have to comment.  The 
benchmarks I've seen of Tornado's performance are ambiguous at best, 
misleading at worst.  It's not a good idea to draw any conclusions from 
them.

Jean-Paul



From exarkun at twistedmatrix.com  Wed Apr 21 20:46:01 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 22 Apr 2010 02:46:01 -0000
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on	the frontpage of TM.com?
In-Reply-To: <o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
Message-ID: <20100422024601.7800.34139205.divmod.xquotient.10@localhost.localdomain>

On 12:53 am, jasonjwwilliams at gmail.com wrote:
>I guess I am. :)
>
>I'm going to start with the front page...and then I'm going to write
>some articles on my blog that are what I wanted when I was learning
>Twisted. Hopefully, they'll be of use to someone.

If it's of any use, someone started trying to do this, and got at least 
as far as deleting all of the front page content:

  http://twistedmatrix.com/trac/wiki/TestFrontPage

Jean-Paul



From exarkun at twistedmatrix.com  Wed Apr 21 20:48:19 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 22 Apr 2010 02:48:19 -0000
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on	the frontpage of TM.com?
In-Reply-To: <n2l562bcc11004211832j96e0b59dx8118a3bd456febda@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
	<n2l562bcc11004211832j96e0b59dx8118a3bd456febda@mail.gmail.com>
Message-ID: <20100422024819.7800.365627817.divmod.xquotient.15@localhost.localdomain>

On 01:32 am, kevin.horn at gmail.com wrote:
>On Wed, Apr 21, 2010 at 7:53 PM, Jason J. W. Williams <
>jasonjwwilliams at gmail.com> wrote:
>>
>>I'd say the biggest barrier to entry is the documentation. And let's
>>face it...there's no reason Twisted shouldn't be used by more folks.
>>It's great...but learning it feels like a frat hazing. That's largely
>>because reading the docs feels like learning from that comp sci prof
>>who was smart...but wasn't smart enough to explain the concepts at
>>your level.
>
>The docs really are about to get a whole lot better.  No really, any 
>minute
>now.
>
>The Sphinx conversion is not dead!  I've just been busy...
>
>And once that's done I think it'll be a whole lot easier to write and
>maintain things, not to mention read the docs.

So about the conversion, I wonder if we can start to generate the Sphinx 
version of the docs on buildbot sometime soon, and perhaps host them 
alongside the current docs, as the first step in phasing out the current 
version?

How automated is the conversion process now?  Are errors reported such 
that people could start looking at them and fixing the issues?  It seems 
like you've done almost all of the hard work, and the rest is dealing 
with some edge cases in lore or restructured text, and that might be 
more easily spread out amongst more people.

Jean-Paul



From terry at jon.es  Wed Apr 21 20:57:11 2010
From: terry at jon.es (Terry Jones)
Date: Wed, 21 Apr 2010 22:57:11 -0400
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't
	these	on	the frontpage of TM.com?
In-Reply-To: Your message at 02:46:01 on Thursday, 22 April 2010
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
	<20100422024601.7800.34139205.divmod.xquotient.10@localhost.localdomain>
Message-ID: <19407.47879.616071.148684@jon.es>

> If it's of any use, someone started trying to do this, and got at least 
> as far as deleting all of the front page content:
> 
>   http://twistedmatrix.com/trac/wiki/TestFrontPage

Awesome.



From jessica.mckellar at gmail.com  Wed Apr 21 21:03:28 2010
From: jessica.mckellar at gmail.com (Jessica McKellar)
Date: Wed, 21 Apr 2010 23:03:28 -0400
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
Message-ID: <k2gb282a1341004212003l6ec73b3at869b2fe27b5d9324@mail.gmail.com>

Hi Jason,

I was up for revamping the front page until school hit, but in about a month
I'll be back and ready for action and happy to help with this / provide
feedback. You might find this IRC snippet about the front page relevant:

21:27 < jesstess> exarkun: so you're saying "Want an IRC bot? BAM follow
this link. Want a TCP server? BAM follow this link?" for the top 5 things
people try to implement?
21:27 < exarkun> jesstess: something like that, yea
21:28 < jesstess> exarkun: I'd be up for working that up.
21:31 < exarkun> jesstess: It would be awesome if you could work on that.  I
think it will help a lot.
21:32 < exarkun> jesstess: I think it's also important to have the website
direct people quickly and easily to the documentation they need.
21:33 < exarkun> jesstess: There are too many clicks involved now, so they
might not even find a new set of topic-oriented guides.
21:33 < jesstess> exarkun: I'll do it if you give me a list of the top 5
applications people try to write :)
21:33 < exarkun> jesstess: Doing something about that would be another
highly productive task.
21:33 < exarkun> ah, there's the rub.
21:34 < radix> 1. IRC bot that execs python code, 2. caching web proxy
21:34 < radix> 3. XMPP something
21:34 < radix> 4. MMORPG
21:35 < radix> I can't think of a fifth
21:35 < jesstess> does "simple TCP server" really not make the list? That's
why I first used Twisted.
21:35 < thijstriemstra> mimic skype..ish
21:36 < thijstriemstra> chat, streaming, authentication, porn
21:36 < exarkun> jesstess: not sure if it comes in the top five
21:36 < exarkun> probably the top ten though
21:36 < Screwtape> I'd say half the questions in here have something to do
with IRC bots.

-Jessica

On Wed, Apr 21, 2010 at 8:53 PM, Jason J. W. Williams <
jasonjwwilliams at gmail.com> wrote:

> I guess I am. :)
>
> Honestly, we've used Twisted in my org for quite some time and until I
> was forced to use it my view of it was colored by my infrequent
> beatings by it and the derisive comments of the primary maintainer at
> that time.
>
> With the 4 hours I spent actually learning the concepts, Twisted is no
> longer a black box...it makes sense. That and I've
> optimized/re-factored a bunch of code to work with that theory instead
> of against it. Huge benefits.
>
> I'd say the biggest barrier to entry is the documentation. And let's
> face it...there's no reason Twisted shouldn't be used by more folks.
> It's great...but learning it feels like a frat hazing. That's largely
> because reading the docs feels like learning from that comp sci prof
> who was smart...but wasn't smart enough to explain the concepts at
> your level.
>
> Let's take Tornado for a second...right now I'm building a web API for
> our services and I'm in platform selection mode. My experience with
> Twisted.web's URL dispatching system made me want to cry. Tornado was
> a breeze to use. But here's the problem:
>
> 1.) There's no good async libraries for Tornado...so if I want to
> integrate with Redis or MySQL or anything, I've got to accept that I'm
> going to block when it's not necessary and live with that.
> 2.) Tornado's performance from the the benchmarks I've read is only
> between 15% and 30% better than twisted.web.
>
> 2 is not enough to justify 1, because let's face it (and yeah I'm
> coming to a point) 1 is going to kill your butt often enough to make 2
> not matter.
>
> But because I'm pretty comfortable with Twisted now...it makes more
> sense for me to write my own dispatcher that emulates Tornado's than
> give up all the rock-hard awesome features and reliability of Twisted.
> deferToThread may not be the preferred way of handling a blocking
> task...but when you need it, you need it.
>
>
>
> ...so my point is...Twisted's PR problem is it needs more accessible
> docs. They need to be understandable, entertaining...and pretty. It
> all starts with that front page...and the web app in 10 lines right
> smack dab there.
>
> I'm going to start with the front page...and then I'm going to write
> some articles on my blog that are what I wanted when I was learning
> Twisted. Hopefully, they'll be of use to someone.
>
> -J
>
> On Wed, Apr 21, 2010 at 6:15 PM, Glyph Lefkowitz
> <glyph at twistedmatrix.com> wrote:
> >
> > On Apr 20, 2010, at 7:06 PM, Jason J. W. Williams wrote:
> >
> > And yes I'm volunteering to reorg.
> >
> > Wow, you really are a glutton for punishment, aren't you? :)
> > Go ahead and create an alternate front-page wiki page, and let the list
> know
> > when it's ready so we can pile on and critique.
> > I'm sure it wouldn't be too hard to do better than what's there, though.
> > Looking forward to it,
> > -glyph
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >
> >
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100421/a711360c/attachment.html>

From alexandre at quessy.net  Wed Apr 21 22:40:44 2010
From: alexandre at quessy.net (Alexandre Quessy)
Date: Thu, 22 Apr 2010 00:40:44 -0400
Subject: [Twisted-Python] Getting a synchronous interface to a twisted
	reactor
In-Reply-To: <y2q7659cab31004211942r3a4a32c4od538f2a2872aaa3d@mail.gmail.com>
References: <y2q7659cab31004211942r3a4a32c4od538f2a2872aaa3d@mail.gmail.com>
Message-ID: <n2v72236ba91004212140l8dda479fza9913d8e6aad0735@mail.gmail.com>

Hello Andrey,
May I recommend you to look at Twisted Words? There are plenty of IRC
tools there.

Regards,
Alex


2010/4/21 Andrey Fedorov <anfedorov at gmail.com>:
> I'm trying to write a dead-simple interface for an IRC client library, like
> so:
>  import simpleirc
>  connection = simpleirc.Connect('irc.freenode.net', 6667)
>  channel = connection.join('foo')
>  find_command = re.compile(r'google ([a-z]+)').findall
>  for msg in channel:
>    for t in find_command(msg):
>      channel.say("http://google.com/search?q=%s" % t)
> Working from theexample in the docs, I'm running into trouble with the
> callbacks (the code is a bit lengthy, so I pasted ithere). The problem is
> that the call tochannel.__next__needs to be returned when the
> callback<IRCClient instance>.privmsgis called, there doesn't seem to be a
> clean option of doing that. I could try to use exceptions or threads, but
> that seems like the wrong thing here, is there a simpler (blocking?) way of
> using a twisted reactor that would make this possible?
> Cheers,
> Andrey
>
> On Wed, Apr 21, 2010 at 10:00 PM, Csar Garca <celord at gmail.com> wrote:
>>
>> +1 Yes, it's great!!
>>
>> 2010/4/21 Kevin Horn <kevin.horn at gmail.com>
>>>
>>> This blog series is also totally rock-a-licious.
>>>
>>> http://krondo.com/blog/?page_id=1327
>>
>>
>> --
>> http://celord.blogspot.com/
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



-- 
Alexandre Quessy
http://alexandre.quessy.net/



From anfedorov at gmail.com  Thu Apr 22 00:06:39 2010
From: anfedorov at gmail.com (Andrey Fedorov)
Date: Thu, 22 Apr 2010 02:06:39 -0400
Subject: [Twisted-Python] Getting a synchronous interface to a twisted
	reactor
In-Reply-To: <n2v72236ba91004212140l8dda479fza9913d8e6aad0735@mail.gmail.com>
References: <y2q7659cab31004211942r3a4a32c4od538f2a2872aaa3d@mail.gmail.com> 
	<n2v72236ba91004212140l8dda479fza9913d8e6aad0735@mail.gmail.com>
Message-ID: <l2o7659cab31004212306l99cfa3ccxe7455a2c17592ea3@mail.gmail.com>

Thanks! The main reason for the question, though, is just curiosity from
playing with and learning the Twisted API, not necessarily getting the
example working :)

A more direct question would have been - is there a Twisted reactor which
provides a blocking call instead of a callback? Is there an accepted "best"
way of wrapping an non-blocking async API with callbacks into a
blocking synchronous one?

- Andrey

On Thu, Apr 22, 2010 at 12:40 AM, Alexandre Quessy <alexandre at quessy.net>wrote:

> Hello Andrey,
> May I recommend you to look at Twisted Words? There are plenty of IRC
> tools there.
>
> Regards,
> Alex
>
>
> 2010/4/21 Andrey Fedorov <anfedorov at gmail.com>:
> > I'm trying to write a dead-simple interface for an IRC client library,
> like
> > so:
> >     import simpleirc
> >     connection = simpleirc.Connect('irc.freenode.net', 6667)
> >     channel = connection.join('foo')
> >     find_command = re.compile(r'google ([a-z]+)').findall
> >     for msg in channel:
> >         for t in find_command(msg):
> >             channel.say("http://google.com/search?q=%s" % t)
> > Working from the example in the docs, I'm running into trouble with the
> > callbacks (the code is a bit lengthy, so I pasted it here). The problem
> is
> > that the call to channel.__next__ needs to be returned when the
> > callback <IRCClient instance>.privmsg is called, there doesn't seem to be
> a
> > clean option of doing that. I could try to use exceptions or threads, but
> > that seems like the wrong thing here, is there a simpler (blocking?) way
> of
> > using a twisted reactor that would make this possible?
> > Cheers,
> > Andrey
> >
> > On Wed, Apr 21, 2010 at 10:00 PM, Csar Garca <celord at gmail.com> wrote:
> >>
> >> +1 Yes, it's great!!
> >>
> >> 2010/4/21 Kevin Horn <kevin.horn at gmail.com>
> >>>
> >>> This blog series is also totally rock-a-licious.
> >>>
> >>> http://krondo.com/blog/?page_id=1327
> >>
> >>
> >> --
> >> http://celord.blogspot.com/
> >>
> >> _______________________________________________
> >> Twisted-Python mailing list
> >> Twisted-Python at twistedmatrix.com
> >> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >>
> >
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >
> >
>
>
>
> --
> Alexandre Quessy
> http://alexandre.quessy.net/
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100422/a19dae1e/attachment.html>

From konrads.smelkovs at gmail.com  Thu Apr 22 00:49:30 2010
From: konrads.smelkovs at gmail.com (Konrads Smelkovs)
Date: Thu, 22 Apr 2010 09:49:30 +0300
Subject: [Twisted-Python] Getting a synchronous interface to a twisted
	reactor
In-Reply-To: <l2o7659cab31004212306l99cfa3ccxe7455a2c17592ea3@mail.gmail.com>
References: <y2q7659cab31004211942r3a4a32c4od538f2a2872aaa3d@mail.gmail.com> 
	<n2v72236ba91004212140l8dda479fza9913d8e6aad0735@mail.gmail.com> 
	<l2o7659cab31004212306l99cfa3ccxe7455a2c17592ea3@mail.gmail.com>
Message-ID: <u2xd79700b91004212349x58b650ddl32443f3ee92209c0@mail.gmail.com>

You can execute blocking call at any time of your pleasing. It will
predictable block all execution paths. Typical wrapper around blocking calls
is thread. Something like this (from
http://twistedmatrix.com/documents/current/core/howto/threading.html):

d = threads.deferToThread(yourSyncCall)
d.addCallback(...)


--
Konrads Smelkovs
Applied IT sorcery.


On Thu, Apr 22, 2010 at 9:06 AM, Andrey Fedorov <anfedorov at gmail.com> wrote:

> Thanks! The main reason for the question, though, is just curiosity from
> playing with and learning the Twisted API, not necessarily getting the
> example working :)
>
> A more direct question would have been - is there a Twisted reactor which
> provides a blocking call instead of a callback? Is there an accepted "best"
> way of wrapping an non-blocking async API with callbacks into a
> blocking synchronous one?
>
> - Andrey
>
>
> On Thu, Apr 22, 2010 at 12:40 AM, Alexandre Quessy <alexandre at quessy.net>wrote:
>
>> Hello Andrey,
>> May I recommend you to look at Twisted Words? There are plenty of IRC
>> tools there.
>>
>> Regards,
>> Alex
>>
>>
>> 2010/4/21 Andrey Fedorov <anfedorov at gmail.com>:
>> > I'm trying to write a dead-simple interface for an IRC client library,
>> like
>> > so:
>> >     import simpleirc
>> >     connection = simpleirc.Connect('irc.freenode.net', 6667)
>> >     channel = connection.join('foo')
>> >     find_command = re.compile(r'google ([a-z]+)').findall
>> >     for msg in channel:
>> >         for t in find_command(msg):
>> >             channel.say("http://google.com/search?q=%s" % t)
>> > Working from the example in the docs, I'm running into trouble with the
>> > callbacks (the code is a bit lengthy, so I pasted it here). The problem
>> is
>> > that the call to channel.__next__ needs to be returned when the
>> > callback <IRCClient instance>.privmsg is called, there doesn't seem to
>> be a
>> > clean option of doing that. I could try to use exceptions or threads,
>> but
>> > that seems like the wrong thing here, is there a simpler (blocking?) way
>> of
>> > using a twisted reactor that would make this possible?
>> > Cheers,
>> > Andrey
>> >
>> > On Wed, Apr 21, 2010 at 10:00 PM, Csar Garca <celord at gmail.com>
>> wrote:
>> >>
>> >> +1 Yes, it's great!!
>> >>
>> >> 2010/4/21 Kevin Horn <kevin.horn at gmail.com>
>> >>>
>> >>> This blog series is also totally rock-a-licious.
>> >>>
>> >>> http://krondo.com/blog/?page_id=1327
>> >>
>> >>
>> >> --
>> >> http://celord.blogspot.com/
>> >>
>> >> _______________________________________________
>> >> Twisted-Python mailing list
>> >> Twisted-Python at twistedmatrix.com
>> >> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> >>
>> >
>> >
>> > _______________________________________________
>> > Twisted-Python mailing list
>> > Twisted-Python at twistedmatrix.com
>> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> >
>> >
>>
>>
>>
>> --
>> Alexandre Quessy
>> http://alexandre.quessy.net/
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100422/5c8093dc/attachment.html>

From p.mayers at imperial.ac.uk  Thu Apr 22 01:21:30 2010
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Thu, 22 Apr 2010 08:21:30 +0100
Subject: [Twisted-Python] Getting a synchronous interface to a twisted
 reactor
In-Reply-To: <l2o7659cab31004212306l99cfa3ccxe7455a2c17592ea3@mail.gmail.com>
References: <y2q7659cab31004211942r3a4a32c4od538f2a2872aaa3d@mail.gmail.com>
	<n2v72236ba91004212140l8dda479fza9913d8e6aad0735@mail.gmail.com>
	<l2o7659cab31004212306l99cfa3ccxe7455a2c17592ea3@mail.gmail.com>
Message-ID: <4BCFF8FA.4070708@imperial.ac.uk>

On 04/22/2010 07:06 AM, Andrey Fedorov wrote:
> Thanks! The main reason for the question, though, is just curiosity from
> playing with and learning the Twisted API, not necessarily getting the
> example working :)
>
> A more direct question would have been - is there a Twisted reactor
> which provides a blocking call instead of a callback? Is there an
> accepted "best" way of wrapping an non-blocking async API with callbacks
> into a blocking synchronous one?

If I understand what you're asking you want to call Twisted code in the 
following style:

def function():
   # this code blocks
   result = some_twisted_thing()
   value = process(result)
   final = morecode(value)

Rather than:

def function():
    def = some_twisted_thing()
    def.addCallback(process)
    def.addCallback(morecode)


If that's the case, then the answer is "sort of" but I think you might 
have misunderstood Twisted a bit. The entire point is to have 
non-blocking APIs, not to want a blocking API.

You can't "really" block, because that stops the reactor from running, 
and thus any networking events being handled.

You can emulate it in Python 2.5 with generators & a special decorator:

from twisted.internet import deferred

@deferred.inlineCallbacks
def function():
    result = yield some_twisted_thing()
    value = yield process(result)
    final = yield morecode(value)

I might have misunderstood what you're asking though, in which case I 
apologise, and can you be more specific?



From don at delphexonline.com  Thu Apr 22 08:11:36 2010
From: don at delphexonline.com (Don Schoeman)
Date: Thu, 22 Apr 2010 16:11:36 +0200
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BCF24C5.5010204@delphexonline.com>
References: <4BCEE3A1.10601@delphexonline.com>	<j2q3b949f091004210837q6bcf731ar63f1471348e2adf9@mail.gmail.com>
	<4BCF24C5.5010204@delphexonline.com>
Message-ID: <4BD05918.9050709@delphexonline.com>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100422/1c6db7f6/attachment.html>

From anfedorov at gmail.com  Thu Apr 22 08:50:29 2010
From: anfedorov at gmail.com (Andrey Fedorov)
Date: Thu, 22 Apr 2010 10:50:29 -0400
Subject: [Twisted-Python] Getting a synchronous interface to a twisted
	reactor
In-Reply-To: <4BCFF8FA.4070708@imperial.ac.uk>
References: <y2q7659cab31004211942r3a4a32c4od538f2a2872aaa3d@mail.gmail.com> 
	<n2v72236ba91004212140l8dda479fza9913d8e6aad0735@mail.gmail.com> 
	<l2o7659cab31004212306l99cfa3ccxe7455a2c17592ea3@mail.gmail.com> 
	<4BCFF8FA.4070708@imperial.ac.uk>
Message-ID: <y2r7659cab31004220750y8d0f0c22p7b202a215be36ef4@mail.gmail.com>

On Thu, Apr 22, 2010 at 3:21 AM, Phil Mayers <p.mayers at imperial.ac.uk>wrote:

> If that's the case, then the answer is "sort of" but I think you might have
> misunderstood Twisted a bit. The entire point is to have non-blocking APIs,
> not to want a blocking API.
>

That sounds like might be the case case. Wwhat I'm looking for, then, is a
way to use the IRCClient protocol outside of Twisted - in a way where I can
use it like:

connection = # something using IRCClient
msg = connection.privmsg() # blocks
assert msg == "andreyf: hello there, lovely IRC users!"


Are there any projects along those lines?

Cheers,
Andrey
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100422/8280e39b/attachment.html>

From kevin.horn at gmail.com  Thu Apr 22 08:57:51 2010
From: kevin.horn at gmail.com (Kevin Horn)
Date: Thu, 22 Apr 2010 09:57:51 -0500
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <20100422024819.7800.365627817.divmod.xquotient.15@localhost.localdomain>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
	<n2l562bcc11004211832j96e0b59dx8118a3bd456febda@mail.gmail.com>
	<20100422024819.7800.365627817.divmod.xquotient.15@localhost.localdomain>
Message-ID: <j2m562bcc11004220757o6e64652dk7c43c0bd539bbaec@mail.gmail.com>

On Wed, Apr 21, 2010 at 9:48 PM, <exarkun at twistedmatrix.com> wrote:

>
> So about the conversion, I wonder if we can start to generate the Sphinx
> version of the docs on buildbot sometime soon, and perhaps host them
> alongside the current docs, as the first step in phasing out the current
> version?
>

I suppose we could do this, if you think it would help.  Note that the
lore2sphinx
script requires Python 2.6 and I think at least Sphinx 0.6.4 (I'm using
0.6.5).


>
> How automated is the conversion process now?  Are errors reported such
> that people could start looking at them and fixing the issues?  It seems
> like you've done almost all of the hard work, and the rest is dealing
> with some edge cases in lore or restructured text, and that might be
> more easily spread out amongst more people.
>
> Jean-Paul
>
>
I think the automatic conversion process has reached the point of
diminishing returns.
I've got it down to about 13 warnings in the Sphinx build process, though
there are still
some markup errors in the output.  Trying to make the conversion handle
these seems
to just introduce more errors in other places.

In other words I think it's time to create a branch with the Sphinxified
docs and do a manual review.

I've got a basic transition plan sketched out here:
http://twistedsphinx.funsize.net/transition_plan.html

That's just basically an outline of a plan Glyph and I hashed out during the
Twisted sprint at PyCon.

Ideas and criticisms welcome.

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100422/101233e3/attachment.html>

From kevin.horn at gmail.com  Thu Apr 22 08:59:22 2010
From: kevin.horn at gmail.com (Kevin Horn)
Date: Thu, 22 Apr 2010 09:59:22 -0500
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BD05918.9050709@delphexonline.com>
References: <4BCEE3A1.10601@delphexonline.com>
	<j2q3b949f091004210837q6bcf731ar63f1471348e2adf9@mail.gmail.com>
	<4BCF24C5.5010204@delphexonline.com>
	<4BD05918.9050709@delphexonline.com>
Message-ID: <p2l562bcc11004220759z61393960q20095d971ff0e76a@mail.gmail.com>

Thanks for reporting back to the list, Don.  I'm sure this info will help
someone down the road (maybe even me!)

Kevin Horn

On Thu, Apr 22, 2010 at 9:11 AM, Don Schoeman <don at delphexonline.com> wrote:

>  Hi guys,
>
> I have finally managed to solve this problem. It turns out (as predicted)
> that this is not a twistd problem after all. This particular Ubuntu server
> has an encrypted home directory (enabled through eCryptfs). This means that
> during the boot process the particular home directory from which I tried
> running my tests was not available as even the root user do not have access
> to the home directory until it is de-crypted after the particular user
> actually logs in. This is why the tests ran fine after login but not during
> boot.
>
> For more experienced Linux admins this would have been tracked down within
> minutes but it took me a full day worth of testing before I finally managed
> to track down the problem. To resolve the issue I moved the server to
> /usr/local/lib/python2.6/dist-packages/ghserver and I am now executing it
> from there instead and it starts up during boot just as expected. I am
> extremely relieved!
>
> Thanks all again for your help!
>
> Best Regards,
> Don
>
>
> Don Schoeman wrote:
>
> Hi Jason,
>
> Unfortunately I still have the same problem. However, I now realise that it
> might be a privileges issue of some kind. Being fairly new at linux  this
> may take days to figure out; can you perhaps remember if you enabled your rc
> script using the command update-rc.d? I used it in the following way: sudo
> update-rc.d ghserver defaults
>
> Since this doesn't seem to be a problem related to twisted or twistd
> anymore I will start looking elsewhere for possible solutions.
>
> Thanks for all the help from everyone anyway.
>
> Regards,
> Don
>
>
> Jason J. W. Williams wrote:
>
> Hi Don,
>
> Here's the init.d we use for Twisted on Ubuntu. Sets the full path to Twistd:
> http://gist.github.com/373978
>
> -J
>
> On Wed, Apr 21, 2010 at 5:38 AM, Don Schoeman <don at delphexonline.com> <don at delphexonline.com> wrote:
>
>
>  Hi guys,
>
> My application is being executed using twistd as per documentation. All is
> working fine but I need to have the service start automatically at boot
> time.
>
> So as a test I've created a script in /etc/init.d/ which looks like this:
>
> #! /bin/sh
> ### BEGIN INIT INFO
> # Provides:          ghserver
> # Required-Start:    $local_fs $remote_fs $network $syslog
> # Required-Stop:     $local_fs $remote_fs $network $syslog
> # Default-Start:     2 3 4 5
> # Default-Stop:      0 1 6
> # Short-Description: Start/stop GHServer server
> ### END INIT INFO
>
> logger "GHServer: Start script executed"
> GH_SERVER_PATH="/home/myname/Python/ghserver"
> export PYTHONPATH="$GH_SERVER_PATH:$PYTHONPATH"
>
> case "$1" in
>   start)
>     logger "GHServer: Starting"
>     echo "Starting GHServer..."
>     twistd -y "$GH_SERVER_PATH/ghserverapp.py" -l
> "$GH_SERVER_PATH/ghserver.log" --pidfile "$GH_SERVER_PATH/twistd.pid"
>     ;;
>   stop)
>     logger "GHServer: Stopping"
>     echo "Stopping GHServer..."
>     kill `cat $GH_SERVER_PATH/twistd.pid`
>     ;;
>   *)
>     logger "GHServer: Invalid usage"
>     echo "Usage: /etc/init.d/ghserver {start|stop}"
>     exit 1
>     ;;
> esac
>
> exit 0
>
>
> This works fine when running /etc/init.d/ghserver start and
> /etc/init.d/ghserver stop. The script also run when I boot since the logger
> actually logs the "GHServer: Starting" text to the /var/log/messages file.
> However, my service actually does not start. There is no pid to be found
> anywhere, there are no error logs anywhere, just nothing. I might be doing
> something wrong here but is there someone who's gone through this process
> and can provide some samples how they did it? Any help will be greatly
> appreciated.
>
> Kind Regards,
> Don
>
>
>
> _______________________________________________
> Twisted-Python mailing listTwisted-Python at twistedmatrix.comhttp://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
>      _______________________________________________
> Twisted-Python mailing listTwisted-Python at twistedmatrix.comhttp://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>    ------------------------------
>
> _______________________________________________
> Twisted-Python mailing listTwisted-Python at twistedmatrix.comhttp://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100422/828824bd/attachment.html>

From kevin.horn at gmail.com  Thu Apr 22 08:59:22 2010
From: kevin.horn at gmail.com (Kevin Horn)
Date: Thu, 22 Apr 2010 09:59:22 -0500
Subject: [Twisted-Python] twistd and init.d
In-Reply-To: <4BD05918.9050709@delphexonline.com>
References: <4BCEE3A1.10601@delphexonline.com>
	<j2q3b949f091004210837q6bcf731ar63f1471348e2adf9@mail.gmail.com>
	<4BCF24C5.5010204@delphexonline.com>
	<4BD05918.9050709@delphexonline.com>
Message-ID: <p2l562bcc11004220759z61393960q20095d971ff0e76a@mail.gmail.com>

Thanks for reporting back to the list, Don.  I'm sure this info will help
someone down the road (maybe even me!)

Kevin Horn

On Thu, Apr 22, 2010 at 9:11 AM, Don Schoeman <don at delphexonline.com> wrote:

>  Hi guys,
>
> I have finally managed to solve this problem. It turns out (as predicted)
> that this is not a twistd problem after all. This particular Ubuntu server
> has an encrypted home directory (enabled through eCryptfs). This means that
> during the boot process the particular home directory from which I tried
> running my tests was not available as even the root user do not have access
> to the home directory until it is de-crypted after the particular user
> actually logs in. This is why the tests ran fine after login but not during
> boot.
>
> For more experienced Linux admins this would have been tracked down within
> minutes but it took me a full day worth of testing before I finally managed
> to track down the problem. To resolve the issue I moved the server to
> /usr/local/lib/python2.6/dist-packages/ghserver and I am now executing it
> from there instead and it starts up during boot just as expected. I am
> extremely relieved!
>
> Thanks all again for your help!
>
> Best Regards,
> Don
>
>
> Don Schoeman wrote:
>
> Hi Jason,
>
> Unfortunately I still have the same problem. However, I now realise that it
> might be a privileges issue of some kind. Being fairly new at linux  this
> may take days to figure out; can you perhaps remember if you enabled your rc
> script using the command update-rc.d? I used it in the following way: sudo
> update-rc.d ghserver defaults
>
> Since this doesn't seem to be a problem related to twisted or twistd
> anymore I will start looking elsewhere for possible solutions.
>
> Thanks for all the help from everyone anyway.
>
> Regards,
> Don
>
>
> Jason J. W. Williams wrote:
>
> Hi Don,
>
> Here's the init.d we use for Twisted on Ubuntu. Sets the full path to Twistd:
> http://gist.github.com/373978
>
> -J
>
> On Wed, Apr 21, 2010 at 5:38 AM, Don Schoeman <don at delphexonline.com> <don at delphexonline.com> wrote:
>
>
>  Hi guys,
>
> My application is being executed using twistd as per documentation. All is
> working fine but I need to have the service start automatically at boot
> time.
>
> So as a test I've created a script in /etc/init.d/ which looks like this:
>
> #! /bin/sh
> ### BEGIN INIT INFO
> # Provides:          ghserver
> # Required-Start:    $local_fs $remote_fs $network $syslog
> # Required-Stop:     $local_fs $remote_fs $network $syslog
> # Default-Start:     2 3 4 5
> # Default-Stop:      0 1 6
> # Short-Description: Start/stop GHServer server
> ### END INIT INFO
>
> logger "GHServer: Start script executed"
> GH_SERVER_PATH="/home/myname/Python/ghserver"
> export PYTHONPATH="$GH_SERVER_PATH:$PYTHONPATH"
>
> case "$1" in
>   start)
>     logger "GHServer: Starting"
>     echo "Starting GHServer..."
>     twistd -y "$GH_SERVER_PATH/ghserverapp.py" -l
> "$GH_SERVER_PATH/ghserver.log" --pidfile "$GH_SERVER_PATH/twistd.pid"
>     ;;
>   stop)
>     logger "GHServer: Stopping"
>     echo "Stopping GHServer..."
>     kill `cat $GH_SERVER_PATH/twistd.pid`
>     ;;
>   *)
>     logger "GHServer: Invalid usage"
>     echo "Usage: /etc/init.d/ghserver {start|stop}"
>     exit 1
>     ;;
> esac
>
> exit 0
>
>
> This works fine when running /etc/init.d/ghserver start and
> /etc/init.d/ghserver stop. The script also run when I boot since the logger
> actually logs the "GHServer: Starting" text to the /var/log/messages file.
> However, my service actually does not start. There is no pid to be found
> anywhere, there are no error logs anywhere, just nothing. I might be doing
> something wrong here but is there someone who's gone through this process
> and can provide some samples how they did it? Any help will be greatly
> appreciated.
>
> Kind Regards,
> Don
>
>
>
> _______________________________________________
> Twisted-Python mailing listTwisted-Python at twistedmatrix.comhttp://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
>      _______________________________________________
> Twisted-Python mailing listTwisted-Python at twistedmatrix.comhttp://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>    ------------------------------
>
> _______________________________________________
> Twisted-Python mailing listTwisted-Python at twistedmatrix.comhttp://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100422/828824bd/attachment-0001.html>

From p.mayers at imperial.ac.uk  Thu Apr 22 09:00:12 2010
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Thu, 22 Apr 2010 16:00:12 +0100
Subject: [Twisted-Python] Getting a synchronous interface to a twisted
 reactor
In-Reply-To: <y2r7659cab31004220750y8d0f0c22p7b202a215be36ef4@mail.gmail.com>
References: <y2q7659cab31004211942r3a4a32c4od538f2a2872aaa3d@mail.gmail.com>
	<n2v72236ba91004212140l8dda479fza9913d8e6aad0735@mail.gmail.com>
	<l2o7659cab31004212306l99cfa3ccxe7455a2c17592ea3@mail.gmail.com>
	<4BCFF8FA.4070708@imperial.ac.uk>
	<y2r7659cab31004220750y8d0f0c22p7b202a215be36ef4@mail.gmail.com>
Message-ID: <4BD0647C.5030201@imperial.ac.uk>

On 22/04/10 15:50, Andrey Fedorov wrote:
> On Thu, Apr 22, 2010 at 3:21 AM, Phil Mayers <p.mayers at imperial.ac.uk
> <mailto:p.mayers at imperial.ac.uk>> wrote:
>
>     If that's the case, then the answer is "sort of" but I think you
>     might have misunderstood Twisted a bit. The entire point is to
>     have non-blocking APIs, not to want a blocking API.
>
>
> That sounds like might be the case case. Wwhat I'm looking for, then, is
> a way to use the IRCClient protocol outside of Twisted - in a way where
> I can use it like:
>
>     connection = # something using IRCClient
>     msg = connection.privmsg() # blocks
>     assert msg == "andreyf: hello there, lovely IRC users!"
>
>
> Are there any projects along those lines?

Not that I'm aware of. I'm pretty certain the Twisted protocol 
implementations all require the reactor and thus need to be run in an 
async manner.

There are various hacky ways you could accomplish this; the obvious one 
that springs to mind is running the reactor in a thread. There are 
various caveats to doing this, the main one being you can't call any 
Twisted functions outside the reactor thread except "callFromThread" so 
you'd probably want to write some kind of wrapper; and it's a bit 
counter to the whole ethos.

Given you said:

"""The main reason for the question, though, is just curiosity from 
playing with and learning the Twisted API"""

...I would recommend just trying to use the API in the Twisted "way". 
You can use the aforementioned @inlineCallbacks decorator & generator 
syntax if you prefer writing your code that way, as opposed to 
traditional deferred callback chaining.



From anfedorov at gmail.com  Thu Apr 22 09:04:00 2010
From: anfedorov at gmail.com (Andrey Fedorov)
Date: Thu, 22 Apr 2010 11:04:00 -0400
Subject: [Twisted-Python] Getting a synchronous interface to a twisted
	reactor
In-Reply-To: <4BD0647C.5030201@imperial.ac.uk>
References: <y2q7659cab31004211942r3a4a32c4od538f2a2872aaa3d@mail.gmail.com> 
	<n2v72236ba91004212140l8dda479fza9913d8e6aad0735@mail.gmail.com> 
	<l2o7659cab31004212306l99cfa3ccxe7455a2c17592ea3@mail.gmail.com> 
	<4BCFF8FA.4070708@imperial.ac.uk>
	<y2r7659cab31004220750y8d0f0c22p7b202a215be36ef4@mail.gmail.com>
	<4BD0647C.5030201@imperial.ac.uk>
Message-ID: <r2v7659cab31004220803iad72fe0fzf1a632c6f3c045a2@mail.gmail.com>

On Thu, Apr 22, 2010 at 11:00 AM, Phil Mayers <p.mayers at imperial.ac.uk>wrote:

> I would recommend just trying to use the API in the Twisted "way". You can
> use the aforementioned @inlineCallbacks decorator & generator syntax if you
> prefer writing your code that way, as opposed to traditional deferred
> callback chaining.
>

This seems wise :)

Thanks for all the help!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100422/661aba41/attachment-0001.html>

From exarkun at twistedmatrix.com  Thu Apr 22 10:51:01 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 22 Apr 2010 16:51:01 -0000
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on	the frontpage of TM.com?
In-Reply-To: <j2m562bcc11004220757o6e64652dk7c43c0bd539bbaec@mail.gmail.com>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<20100421003824.2843.3022840.divmod.xquotient.18@localhost.localdomain>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
	<n2l562bcc11004211832j96e0b59dx8118a3bd456febda@mail.gmail.com>
	<20100422024819.7800.365627817.divmod.xquotient.15@localhost.localdomain>
	<j2m562bcc11004220757o6e64652dk7c43c0bd539bbaec@mail.gmail.com>
Message-ID: <20100422165101.2038.1694870058.divmod.xquotient.3@localhost.localdomain>

On 02:57 pm, kevin.horn at gmail.com wrote:
>On Wed, Apr 21, 2010 at 9:48 PM, <exarkun at twistedmatrix.com> wrote:
>>
>>So about the conversion, I wonder if we can start to generate the 
>>Sphinx
>>version of the docs on buildbot sometime soon, and perhaps host them
>>alongside the current docs, as the first step in phasing out the 
>>current
>>version?
>
>I suppose we could do this, if you think it would help.  Note that the
>lore2sphinx
>script requires Python 2.6 and I think at least Sphinx 0.6.4 (I'm using
>0.6.5).

Shouldn't be a problem.
>
>>
>>How automated is the conversion process now?  Are errors reported such
>>that people could start looking at them and fixing the issues?  It 
>>seems
>>like you've done almost all of the hard work, and the rest is dealing
>>with some edge cases in lore or restructured text, and that might be
>>more easily spread out amongst more people.
>>
>>Jean-Paul
>I think the automatic conversion process has reached the point of
>diminishing returns.
>I've got it down to about 13 warnings in the Sphinx build process, 
>though
>there are still
>some markup errors in the output.  Trying to make the conversion handle
>these seems
>to just introduce more errors in other places.

Would it be easier to fix these by changing the lore sources?

Jean-Paul



From kevin.horn at gmail.com  Thu Apr 22 11:07:05 2010
From: kevin.horn at gmail.com (Kevin Horn)
Date: Thu, 22 Apr 2010 12:07:05 -0500
Subject: [Twisted-Python] twisted.web in 60 seconds...why aren't these
	on the frontpage of TM.com?
In-Reply-To: <20100422165101.2038.1694870058.divmod.xquotient.3@localhost.localdomain>
References: <j2n3b949f091004201625k1187c9b0k71b6ccb0e01f62c5@mail.gmail.com>
	<7E86D657-DA1F-4108-9034-D64BACC43658@gmail.com>
	<i2xb282a1341004201830n336f874cxeecbe84ce501143@mail.gmail.com>
	<r2u3b949f091004201906v360eebcai7731d4d1e776712@mail.gmail.com>
	<6EC68BBF-7937-46CE-B2E3-CDBFFD9640CF@twistedmatrix.com>
	<o2r3b949f091004211753m9ae18972g876319c108bc9f05@mail.gmail.com>
	<n2l562bcc11004211832j96e0b59dx8118a3bd456febda@mail.gmail.com>
	<20100422024819.7800.365627817.divmod.xquotient.15@localhost.localdomain>
	<j2m562bcc11004220757o6e64652dk7c43c0bd539bbaec@mail.gmail.com>
	<20100422165101.2038.1694870058.divmod.xquotient.3@localhost.localdomain>
Message-ID: <v2t562bcc11004221007p168971bdl56455662c6e76d33@mail.gmail.com>

On Thu, Apr 22, 2010 at 11:51 AM, <exarkun at twistedmatrix.com> wrote:

> On 02:57 pm, kevin.horn at gmail.com wrote:
> >On Wed, Apr 21, 2010 at 9:48 PM, <exarkun at twistedmatrix.com> wrote:
> >>
> >>So about the conversion, I wonder if we can start to generate the
> >>Sphinx
> >>version of the docs on buildbot sometime soon, and perhaps host them
> >>alongside the current docs, as the first step in phasing out the
> >>current
> >>version?
> >
> >I suppose we could do this, if you think it would help.  Note that the
> >lore2sphinx
> >script requires Python 2.6 and I think at least Sphinx 0.6.4 (I'm using
> >0.6.5).
>
> Shouldn't be a problem.
> >
> >>
> >>How automated is the conversion process now?  Are errors reported such
> >>that people could start looking at them and fixing the issues?  It
> >>seems
> >>like you've done almost all of the hard work, and the rest is dealing
> >>with some edge cases in lore or restructured text, and that might be
> >>more easily spread out amongst more people.
> >>
> >>Jean-Paul
> >I think the automatic conversion process has reached the point of
> >diminishing returns.
> >I've got it down to about 13 warnings in the Sphinx build process,
> >though
> >there are still
> >some markup errors in the output.  Trying to make the conversion handle
> >these seems
> >to just introduce more errors in other places.
>
> Would it be easier to fix these by changing the lore sources?
>
> Jean-Paul
>
>
>
I seriously doubt it.  In fact I think it would be much more difficult.

Other than the 13 build warnings I mentioned above, almost all of the
rest of the markup errors are things like a missing space character.

Fixing this in the lore sources would require:
1) removing most if not all indentation from all the lore sources
2) making sure every <b>, <i>, <code>, <a> tag (and some others I'm sure)
   have exactly the same spacing before and after them...including tabs,
newlines, etc.
3) revamping lore2sphinx to stop doing all the workarounds it currently does

I think it will be much easier to go through the ReST sources (which IMO
will need to
be done anyway) and add spaces or whatever where needed.

Kevin Horn

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100422/6f56d3db/attachment-0001.html>

From jasonjwwilliams at gmail.com  Sat Apr 24 11:20:32 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Sat, 24 Apr 2010 10:20:32 -0700
Subject: [Twisted-Python] Very interesting....
Message-ID: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>

same example coded in eventlet, gevent, twisted, tornado, nodejs,
thin+eventmachine http://gist.github.com/376416 (by @greut)
Surprising



From lvh at laurensvh.be  Sat Apr 24 12:16:39 2010
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Sat, 24 Apr 2010 20:16:39 +0200
Subject: [Twisted-Python] Very interesting....
In-Reply-To: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>
References: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>
Message-ID: <s2ocedc0c091004241116tc56bc50ct154c0ebd8be3ff60@mail.gmail.com>

Not the first time we've seen these kinds of benchmarks. Microbenchmarks
rarely give you interesting information about real world apps. Also: ab
ain't a very good HTTP benchmark.

But hey, data points are data points.

lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100424/a0c6b79f/attachment.html>

From rgacote at appropriatesolutions.com  Sat Apr 24 15:18:38 2010
From: rgacote at appropriatesolutions.com (Ray Cote)
Date: Sat, 24 Apr 2010 17:18:38 -0400 (EDT)
Subject: [Twisted-Python] txriak module released.
Message-ID: <1541138433.551272144614766.JavaMail.rgacote@Raymond-Cotes-MacBook-Pro.local>

Hello Twisted:

An initial release of txriak has been posted to PyPI:
  <http://pypi.python.org/pypi/txriak/0.1.1>

txriak is a Twisted module for communicating with Basho Technology's Riak data store via the HTTP interface. 
Written in Python, it requires Python 2.5 since it uses the yield version of deferreds.
Initial release was written to match as closely as possible the 0.9 riak.py Python module released by Basho Technologies. 

Hope others find this to be useful. 
Look forward to comments and feedback. 
--R


-- 
Ray Cote, President
Appropriate Solutions, Inc.
We Build Software
603.924.6079



From jasonjwwilliams at gmail.com  Sat Apr 24 19:13:18 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Sat, 24 Apr 2010 19:13:18 -0600
Subject: [Twisted-Python] Very interesting....
In-Reply-To: <s2ocedc0c091004241116tc56bc50ct154c0ebd8be3ff60@mail.gmail.com>
References: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>
	<s2ocedc0c091004241116tc56bc50ct154c0ebd8be3ff60@mail.gmail.com>
Message-ID: <t2l3b949f091004241813r5954d5d4ue2f41f9c58dcedb8@mail.gmail.com>

I didn't notice the benchmarks...good catch. I was more interested in
the conciseness or lack thereof with the various frameworks. Very
surprised that Twisted was nearly as clean and easy to read as the
Eventlet example.

-J

On Sat, Apr 24, 2010 at 12:16 PM, Laurens Van Houtven <lvh at laurensvh.be> wrote:
> Not the first time we've seen these kinds of benchmarks. Microbenchmarks
> rarely give you interesting information about real world apps. Also: ab
> ain't a very good HTTP benchmark.
> But hey, data points are data points.
> lvh
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



From jasonjwwilliams at gmail.com  Sat Apr 24 19:16:12 2010
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Sat, 24 Apr 2010 19:16:12 -0600
Subject: [Twisted-Python] txriak module released.
In-Reply-To: <1541138433.551272144614766.JavaMail.rgacote@Raymond-Cotes-MacBook-Pro.local>
References: <1541138433.551272144614766.JavaMail.rgacote@Raymond-Cotes-MacBook-Pro.local>
Message-ID: <z2p3b949f091004241816yc5904f23s83c067cd8bb30a8e@mail.gmail.com>

Put this up on http://twistedmatrix.com/trac/wiki/ProjectsUsingTwisted  ?

On Sat, Apr 24, 2010 at 3:18 PM, Ray Cote
<rgacote at appropriatesolutions.com> wrote:
> Hello Twisted:
>
> An initial release of txriak has been posted to PyPI:
> <http://pypi.python.org/pypi/txriak/0.1.1>
>
> txriak is a Twisted module for communicating with Basho Technology's Riak data store via the HTTP interface.
> Written in Python, it requires Python 2.5 since it uses the yield version of deferreds.
> Initial release was written to match as closely as possible the 0.9 riak.py Python module released by Basho Technologies.
>
> Hope others find this to be useful.
> Look forward to comments and feedback.
> --R
>
>
> --
> Ray Cote, President
> Appropriate Solutions, Inc.
> We Build Software
> 603.924.6079
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From exarkun at twistedmatrix.com  Sat Apr 24 19:25:50 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 25 Apr 2010 01:25:50 -0000
Subject: [Twisted-Python] Very interesting....
In-Reply-To: <t2l3b949f091004241813r5954d5d4ue2f41f9c58dcedb8@mail.gmail.com>
References: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>
	<s2ocedc0c091004241116tc56bc50ct154c0ebd8be3ff60@mail.gmail.com>
	<t2l3b949f091004241813r5954d5d4ue2f41f9c58dcedb8@mail.gmail.com>
Message-ID: <20100425012550.2062.1525462067.divmod.xquotient.8@localhost.localdomain>

On 01:13 am, jasonjwwilliams at gmail.com wrote:
>I didn't notice the benchmarks...good catch. I was more interested in
>the conciseness or lack thereof with the various frameworks. Very
>surprised that Twisted was nearly as clean and easy to read as the
>Eventlet example.

This comparison (in the blog post) makes the same mistake that many such 
comparisons make.  The division of libraries into the arbitrary 
categories of "reactor model" and "coroutine" is artificial.

See corotwine for an example of using Twisted and coroutines.  And see 
txwsgi (announced here a week or two ago by Manlio Perillo) for a 
Twisted-based wsgi container which supports applications that look 
almost identical to the eventlet/gevent wsgi applications used in this 
comparison.

And take a look at how eventlet and gevent are implemented, and you'll 
find something that's essentially the same as a Twisted reactor.

Jean-Paul



From exarkun at twistedmatrix.com  Sat Apr 24 22:05:28 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 25 Apr 2010 04:05:28 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1272168328.99.1941929344@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100425/159971b7/attachment.html>

From sleeepd at gmail.com  Sun Apr 25 03:24:38 2010
From: sleeepd at gmail.com (sleepd)
Date: Sun, 25 Apr 2010 17:24:38 +0800
Subject: [Twisted-Python] SQLite3 gives error when using adbapi
Message-ID: <x2s4fe037b11004250224lb390f15drf15905905fec22a9@mail.gmail.com>

I am try to use a in-memory sqlite db via adbapi, but sqlite gives
error:" OperationalError: *no such table*: test ".

how can I made it work?

This is my test code:

from twisted.internet import reactor
from twisted.enterprise import adbapi

def create():
    db.runOperation("create table
test(id)").addCallback(result).addErrback(error)

def insert():
    db.runOperation("insert into test(id)
values(1)").addCallback(result).addErrback(error)

def select():
    db.runQuery("""SELECT * FROM
test""").addCallback(result).addErrback(error)

def result(l):
    print l

def error(fail):
    print fail

db = adbapi.ConnectionPool("sqlite3", database=":memory:")
reactor.callLater(0.1, create)
reactor.callLater(1, insert)
reactor.callLater(2, select)
reactor.run()
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100425/b18f5ada/attachment.html>

From exarkun at twistedmatrix.com  Sun Apr 25 08:16:31 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 25 Apr 2010 14:16:31 -0000
Subject: [Twisted-Python] SQLite3 gives error when using adbapi
In-Reply-To: <x2s4fe037b11004250224lb390f15drf15905905fec22a9@mail.gmail.com>
References: <x2s4fe037b11004250224lb390f15drf15905905fec22a9@mail.gmail.com>
Message-ID: <20100425141631.2083.2094314429.divmod.xquotient.3@localhost.localdomain>

On 09:24 am, sleeepd at gmail.com wrote:
>I am try to use a in-memory sqlite db via adbapi, but sqlite gives
>error:" OperationalError: *no such table*: test ".
>
>how can I made it work?
>
>[snip]
>
>db = adbapi.ConnectionPool("sqlite3", database=":memory:")

It doesn't make sense to use a connection pool for an in-memory SQLite3 
database.  Every time you connect to ":memory:", you get a brand new, 
empty database.

If you want this to work, you need to be able to establish multiple 
connections to the same database.  You could do that by making your own 
DB-API 2.0 module that wraps sqlite3 and always hands back the same 
:memory: connection when its connect function is called.

Jean-Paul



From rgacote at appropriatesolutions.com  Mon Apr 26 08:34:46 2010
From: rgacote at appropriatesolutions.com (Ray Cote)
Date: Mon, 26 Apr 2010 10:34:46 -0400 (EDT)
Subject: [Twisted-Python] txriak module released.
In-Reply-To: <z2p3b949f091004241816yc5904f23s83c067cd8bb30a8e@mail.gmail.com>
Message-ID: <8374227.2761272293211414.JavaMail.rgacote@ip-210.Corp.AppropriateSolutions.com>

Will do. 
--Ray

----- Original Message -----
From: "Jason J. W. Williams" <jasonjwwilliams at gmail.com>
To: "Ray Cote" <rgacote at appropriatesolutions.com>, "Twisted general discussion" <twisted-python at twistedmatrix.com>
Sent: Saturday, April 24, 2010 9:16:12 PM GMT -05:00 US/Canada Eastern
Subject: Re: [Twisted-Python] txriak module released.

Put this up on http://twistedmatrix.com/trac/wiki/ProjectsUsingTwisted  ?

On Sat, Apr 24, 2010 at 3:18 PM, Ray Cote
<rgacote at appropriatesolutions.com> wrote:
> Hello Twisted:
>
> An initial release of txriak has been posted to PyPI:
> <http://pypi.python.org/pypi/txriak/0.1.1>
>
> txriak is a Twisted module for communicating with Basho Technology's Riak data store via the HTTP interface.
> Written in Python, it requires Python 2.5 since it uses the yield version of deferreds.
> Initial release was written to match as closely as possible the 0.9 riak.py Python module released by Basho Technologies.
>
> Hope others find this to be useful.
> Look forward to comments and feedback.
> --R
>
>
> --
> Ray Cote, President
> Appropriate Solutions, Inc.
> We Build Software
> 603.924.6079
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

-- 
Ray Cote, President
Appropriate Solutions, Inc.
We Build Software
603.924.6079



From arjan at scherpenisse.net  Mon Apr 26 09:07:25 2010
From: arjan at scherpenisse.net (Arjan Scherpenisse)
Date: Mon, 26 Apr 2010 17:07:25 +0200
Subject: [Twisted-Python] OSC protocol implementation
Message-ID: <4BD5AC2D.8060409@scherpenisse.net>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi list,

some months ago, I created an implementation of the OSC protocol [1] in
twisted, together with Alexandre Quessy.

I've put it to review but so far nobody has responded to it:
http://twistedmatrix.com/trac/ticket/4196

As stated in the ticket we'd like to release and maintain this as part
of twisted but we'd also like to release this soon(ish).

So my question is: what are your opinions about including the OSC
protocol as a standard part of twisted and what will be the expected
time frame for such a thing to happen?

Arjan

[1] http://bitbucket.org/arjan/twisted-osc/overview/

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAkvVrC0ACgkQigE4AbflYerTFACbB96SZZ4Q9euf3aEl9ARoiKnw
K/EAn3Vs5otRXgdwohXLHK/S2xbc4rZD
=27wB
-----END PGP SIGNATURE-----



From manlio_perillo at libero.it  Mon Apr 26 09:37:41 2010
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Mon, 26 Apr 2010 17:37:41 +0200
Subject: [Twisted-Python] Very interesting....
In-Reply-To: <20100425012550.2062.1525462067.divmod.xquotient.8@localhost.localdomain>
References: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>	<s2ocedc0c091004241116tc56bc50ct154c0ebd8be3ff60@mail.gmail.com>	<t2l3b949f091004241813r5954d5d4ue2f41f9c58dcedb8@mail.gmail.com>
	<20100425012550.2062.1525462067.divmod.xquotient.8@localhost.localdomain>
Message-ID: <4BD5B345.1010500@libero.it>

exarkun at twistedmatrix.com ha scritto:
> On 01:13 am, jasonjwwilliams at gmail.com wrote:
>> I didn't notice the benchmarks...good catch. I was more interested in
>> the conciseness or lack thereof with the various frameworks. Very
>> surprised that Twisted was nearly as clean and easy to read as the
>> Eventlet example.
> 
> This comparison (in the blog post) makes the same mistake that many such 
> comparisons make.  The division of libraries into the arbitrary 
> categories of "reactor model" and "coroutine" is artificial.
> 
> [...]
> And take a look at how eventlet and gevent are implemented, and you'll 
> find something that's essentially the same as a Twisted reactor.
> 

The only significative difference, IMHO, is that eventlet and gevent are
able to schedule coroutines directly in the main event loop (since they
have full control over it), while with Twisted and Python applications
embedded in C servers like Nginx, you have to return control to the
"framework" (this what the x-wsgiorg.suspend WSGI extension does).


Manlio



From exarkun at twistedmatrix.com  Mon Apr 26 09:51:34 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 26 Apr 2010 15:51:34 -0000
Subject: [Twisted-Python] Very interesting....
In-Reply-To: <4BD5B345.1010500@libero.it>
References: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>
	<s2ocedc0c091004241116tc56bc50ct154c0ebd8be3ff60@mail.gmail.com>
	<t2l3b949f091004241813r5954d5d4ue2f41f9c58dcedb8@mail.gmail.com>
	<20100425012550.2062.1525462067.divmod.xquotient.8@localhost.localdomain>
	<4BD5B345.1010500@libero.it>
Message-ID: <20100426155134.1984.2077016790.divmod.xquotient.3@localhost.localdomain>

On 03:37 pm, manlio_perillo at libero.it wrote:
>exarkun at twistedmatrix.com ha scritto:
>>On 01:13 am, jasonjwwilliams at gmail.com wrote:
>>>I didn't notice the benchmarks...good catch. I was more interested in
>>>the conciseness or lack thereof with the various frameworks. Very
>>>surprised that Twisted was nearly as clean and easy to read as the
>>>Eventlet example.
>>
>>This comparison (in the blog post) makes the same mistake that many 
>>such
>>comparisons make.  The division of libraries into the arbitrary
>>categories of "reactor model" and "coroutine" is artificial.
>>
>>[...]
>>And take a look at how eventlet and gevent are implemented, and you'll
>>find something that's essentially the same as a Twisted reactor.
>
>The only significative difference, IMHO, is that eventlet and gevent 
>are
>able to schedule coroutines directly in the main event loop (since they
>have full control over it),

What does "schedule coroutines directly in the main event loop" mean?
>while with Twisted and Python applications
>embedded in C servers like Nginx, you have to return control to the
>"framework" (this what the x-wsgiorg.suspend WSGI extension does).

It looks like I misremembered the interface provided by txwsgi.  I 
thought it let you switch to another coroutine directly, rather than 
requiring that you yield an empty string after (the equivalent of) 
setting a flag.  This seems to be more because of WSGI constraints than 
anything else, though.

Jean-Paul



From exarkun at twistedmatrix.com  Mon Apr 26 09:56:17 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 26 Apr 2010 15:56:17 -0000
Subject: [Twisted-Python] OSC protocol implementation
In-Reply-To: <4BD5AC2D.8060409@scherpenisse.net>
References: <4BD5AC2D.8060409@scherpenisse.net>
Message-ID: <20100426155617.1984.402492984.divmod.xquotient.13@localhost.localdomain>

On 03:07 pm, arjan at scherpenisse.net wrote:
>-----BEGIN PGP SIGNED MESSAGE-----
>Hash: SHA1
>
>Hi list,
>
>some months ago, I created an implementation of the OSC protocol [1] in
>twisted, together with Alexandre Quessy.
>
>I've put it to review but so far nobody has responded to it:
>http://twistedmatrix.com/trac/ticket/4196

Hi Arjan,

Just a point of procedure, the ticket is not actually in "review" as the 
Twisted development process understands it.  Tickets with the "review" 
keyword are in review, and receive particular attention.  Other tickets 
easily get lost in the large pile of open tickets.
>As stated in the ticket we'd like to release and maintain this as part
>of twisted but we'd also like to release this soon(ish).
>
>So my question is: what are your opinions about including the OSC
>protocol as a standard part of twisted and what will be the expected
>time frame for such a thing to happen?

This is mainly a question of when someone finds it interesting enough to 
review the code.  Personally, while I remember commenting on that ticket 
a couple months ago, I had to go re-read the wikipedia page to remember 
what OSC is.  Since this is a protocol I've never come across before and 
which I can't think of any immediate applications that are relevant to 
me, it's not likely I'll spontaneously go review the code.  Perhaps 
there is another developer who would be interested in this who will do 
so.  Posting on the list is a good way to try to get attention, as is 
asking in the Freenode #twisted irc channel.  If you can't find someone 
who wants to review it just because they're interested, you might be 
able to trade for a review of another ticket.

Hope this helps,
Jean-Paul



From manlio_perillo at libero.it  Mon Apr 26 10:28:22 2010
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Mon, 26 Apr 2010 18:28:22 +0200
Subject: [Twisted-Python] Very interesting....
In-Reply-To: <20100426155134.1984.2077016790.divmod.xquotient.3@localhost.localdomain>
References: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>	<s2ocedc0c091004241116tc56bc50ct154c0ebd8be3ff60@mail.gmail.com>	<t2l3b949f091004241813r5954d5d4ue2f41f9c58dcedb8@mail.gmail.com>	<20100425012550.2062.1525462067.divmod.xquotient.8@localhost.localdomain>	<4BD5B345.1010500@libero.it>
	<20100426155134.1984.2077016790.divmod.xquotient.3@localhost.localdomain>
Message-ID: <4BD5BF26.4070308@libero.it>

exarkun at twistedmatrix.com ha scritto:
> On 03:37 pm, manlio_perillo at libero.it wrote:
>> exarkun at twistedmatrix.com ha scritto:
>>> On 01:13 am, jasonjwwilliams at gmail.com wrote:
>>>> I didn't notice the benchmarks...good catch. I was more interested in
>>>> the conciseness or lack thereof with the various frameworks. Very
>>>> surprised that Twisted was nearly as clean and easy to read as the
>>>> Eventlet example.
>>> This comparison (in the blog post) makes the same mistake that many 
>>> such
>>> comparisons make.  The division of libraries into the arbitrary
>>> categories of "reactor model" and "coroutine" is artificial.
>>>
>>> [...]
>>> And take a look at how eventlet and gevent are implemented, and you'll
>>> find something that's essentially the same as a Twisted reactor.
>> The only significative difference, IMHO, is that eventlet and gevent 
>> are
>> able to schedule coroutines directly in the main event loop (since they
>> have full control over it),
> 
> What does "schedule coroutines directly in the main event loop" mean?

>From the gevent intro.rst:

Unlike other network libraries and similar to eventlet, gevent starts
the event loop implicitly in a dedicated greenlet. There's no
``reactor`` that you must ``run()`` or ``dispatch()`` function to call.
When a function from gevent API wants to block, it obtains the
:class:`Hub` - a greenlet that runs the event loop - and switches to it.
If there's no :class:`Hub` instance yet, one is created on the fly.

Not sure if you can say that "coroutines are scheduled directly in the
main loop".


>> while with Twisted and Python applications
>> embedded in C servers like Nginx, you have to return control to the
>> "framework" (this what the x-wsgiorg.suspend WSGI extension does).
> 
> It looks like I misremembered the interface provided by txwsgi.  I 
> thought it let you switch to another coroutine directly, 

No, since this would not be possible with a WSGI implementation embedded
in Nginx.

You *need* to return control to the event loop (process cycle in Nginx).

> rather than 
> requiring that you yield an empty string after (the equivalent of) 
> setting a flag.  This seems to be more because of WSGI constraints than 
> anything else, though.
> 

Regards  Manlio



From itamar at itamarst.org  Mon Apr 26 20:55:38 2010
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Tue, 27 Apr 2010 02:55:38 +0000
Subject: [Twisted-Python] OSC protocol implementation
In-Reply-To: <20100426155617.1984.402492984.divmod.xquotient.13@localhost.localdomain>
References: <4BD5AC2D.8060409@scherpenisse.net>
	<20100426155617.1984.402492984.divmod.xquotient.13@localhost.localdomain>
Message-ID: <1272336938.21360.3.camel@pintsize>

On Mon, 2010-04-26 at 15:56 +0000, exarkun at twistedmatrix.com wrote:

> This is mainly a question of when someone finds it interesting enough to 
> review the code.  Personally, while I remember commenting on that ticket 
> a couple months ago, I had to go re-read the wikipedia page to remember 
> what OSC is.  Since this is a protocol I've never come across before and 
> which I can't think of any immediate applications that are relevant to 
> me, it's not likely I'll spontaneously go review the code.  Perhaps 
> there is another developer who would be interested in this who will do 
> so.  Posting on the list is a good way to try to get attention, as is 
> asking in the Freenode #twisted irc channel.  If you can't find someone 
> who wants to review it just because they're interested, you might be 
> able to trade for a review of another ticket.

As a worst case alternative if time becomes an issue, you can release
this as a standalone project (many Twisted libraries have begun
prefixing package names with tx, e.g. txAMPQ). It can always be merged
later with Twisted if there's an interest (as long as the license
doesn't conflict).




From jeandaniel.browne at gmail.com  Tue Apr 27 07:49:56 2010
From: jeandaniel.browne at gmail.com (Jean Daniel)
Date: Tue, 27 Apr 2010 15:49:56 +0200
Subject: [Twisted-Python] draft of an article on Twisted
In-Reply-To: <g2lb61c19e71004270548l92cd200al68fc3773ea276efa@mail.gmail.com>
References: <t2rb61c19e71004270530td3f58b45ge70af3194c7305d3@mail.gmail.com>
	<g2lb61c19e71004270548l92cd200al68fc3773ea276efa@mail.gmail.com>
Message-ID: <r2vb61c19e71004270649q3fe9c2b4s1831d02fe1c28e61@mail.gmail.com>

Hello,

I have written an introductory article to Twisted, and I would be
delighted to see it published on Linux Weekly News some day.

It is available at: http://jdb.github.com/concurrent.html

Here is the plan in brief:
1. what Twisted is: what "network framework" means,
2. what network concurrency is,
3. why "one socket in one thread" won't get you very far: Twisted is
safer, faster and faster
4. what is the reactor, and how it interfaces with the kernel and the
Twisted Protocols
5. what deferreds are (and how they are actually _not_ directly tied
to the reactor)
6. Finally how to write Twisted code that looks sequential (with recap
on yield and decorators)

What I tried to do:

- write for a developer audience who are not particularly expert in
Python nor kernel internals. Python idioms are explained, and I try to
clear the magic by unfolding the big ideas (this audience actually
maps well my friends and colleagues),

- include short, clear cut code snippets to nail the point,

- short enough to fit in a brain cache but complete and precise enough
so developers come out with an understanding of what is under the
hood,

- make the article "flow", by introducing the plan, connecting
sections, using proper english :/ ,


Any comments welcome, and especially:

- it might be too long and present too many things, maybe I should
split it in parts,

- correctness: I simplified the object model (the article mentions
that the factories are out of scope...), but everything said should
still be correct. Also I sometime take guesses at subject I am not an
expert, with the intent to make a clear message: this is a thin line,

- coherence with the Twisted jargon and existings docs, there may be
terms that I use which should be substituted,

- typos and proper english: I think lwn standards are pretty high for
that matter,

The pdf can't be attached, mailman complains that it is more than 40kB.

The scripts are at http://github.com/jdb/jdb.github.com/tree/sources/concurrent/

The git manip for using your favorite editor on the sources is:
 git clone git://github.com/jdb/jdb.github.com.git
 git branch --track -b sources origin/sources
 vi concurrent.rst

Thanks in advance !



From petshmidt at googlemail.com  Tue Apr 27 08:43:27 2010
From: petshmidt at googlemail.com (Pet)
Date: Tue, 27 Apr 2010 16:43:27 +0200
Subject: [Twisted-Python] multiple versions of twisted on same machine
In-Reply-To: <55BF52F4-C317-4ADA-9754-62E2E96FA8DF@twistedmatrix.com>
References: <b460e9631002110441h3a9b91d4kdb6bab01ddadc2b5@mail.gmail.com> 
	<dfbf29b01002110455p33443380o5cfc81aff8829653@mail.gmail.com> 
	<562bcc11002110841w443dbc4bs3c0b6e1bfc68364a@mail.gmail.com> 
	<20100211170535.26099.2118225748.divmod.xquotient.1087@localhost.localdomain>
	<562bcc11002110954v3ed9a9a4u3c20344fecb583cc@mail.gmail.com> 
	<20100212092736.418241dd@hepzibah>
	<55BF52F4-C317-4ADA-9754-62E2E96FA8DF@twistedmatrix.com>
Message-ID: <i2ub460e9631004270743z265bf70blfce9f52c82873605@mail.gmail.com>

On Sat, Feb 13, 2010 at 6:05 AM, Glyph Lefkowitz
<glyph at twistedmatrix.com> wrote:
> On Feb 11, 2010, at 5:27 PM, Timothy Allen wrote:
>
>> On Thu, 11 Feb 2010 11:54:47 -0600
>> Kevin Horn <kevin.horn at gmail.com> wrote:
>>> Not entirely related to this discussion (though not entirely
>>> unrelated), I think that Twisted's whole release/distribution system
>>> needs to be revamped a little. I've been meaning to talk to radix
>>> about this, but haven't found the time...maybe this will give me the
>>> kick in the pants I needed...
>>
>> Oh ho ho ho ho, boy.
>>
>> As one who has tinkered with Twisted's release/distribution system
>> (unsuccessfully so far - see ticket 1696 and 4138), I'd be very
>> interested to hear what you propose.
>
> On the contrary - I think your progress on 1696 especially has been *very* successful! perhaps not quite *complete* yet, though :).
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

Hi,

I can't install Twisted in VirtualEnv. Can someone explain what is
wrong, please? Thanks!


(newtwisted)hostname:/usr/local/development/newtwisted/bin# easy_install Twisted
Searching for Twisted
Reading http://pypi.python.org/simple/Twisted/
Reading http://www.twistedmatrix.com
Reading http://twistedmatrix.com/products/download
Reading http://twistedmatrix.com/projects/core/
Reading http://twistedmatrix.com/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/8.2/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/8.1/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/10.0/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/9.0/
Best match: Twisted 10.0.0
Downloading http://tmrc.mit.edu/mirror/twisted/Twisted/10.0/Twisted-10.0.0.tar.bz2
Processing Twisted-10.0.0.tar.bz2
Running Twisted-10.0.0/setup.py -q bdist_egg --dist-dir
/tmp/easy_install-9n_UrX/Twisted-10.0.0/egg-dist-tmp-dt-vez
twisted/runner/portmap.c:10:20: error: Python.h: No such file or directory
twisted/runner/portmap.c:14: error: expected =, ,, ;, asm or
__attribute__ before * token
twisted/runner/portmap.c:31: error: expected =, ,, ;, asm or
__attribute__ before * token
twisted/runner/portmap.c:45: error: expected =, ,, ;, asm or
__attribute__ before PortmapMethods
twisted/runner/portmap.c: In function initportmap:
twisted/runner/portmap.c:55: warning: implicit declaration of function
Py_InitModule
twisted/runner/portmap.c:55: error: PortmapMethods undeclared (first
use in this function)
twisted/runner/portmap.c:55: error: (Each undeclared identifier is
reported only once
twisted/runner/portmap.c:55: error: for each function it appears in.)
error: Setup script exited with error: command 'gcc' failed with exit status 1



From exarkun at twistedmatrix.com  Tue Apr 27 09:28:09 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 27 Apr 2010 15:28:09 -0000
Subject: [Twisted-Python] multiple versions of twisted on same machine
In-Reply-To: <i2ub460e9631004270743z265bf70blfce9f52c82873605@mail.gmail.com>
References: <b460e9631002110441h3a9b91d4kdb6bab01ddadc2b5@mail.gmail.com>
	<dfbf29b01002110455p33443380o5cfc81aff8829653@mail.gmail.com>
	<562bcc11002110841w443dbc4bs3c0b6e1bfc68364a@mail.gmail.com>
	<20100211170535.26099.2118225748.divmod.xquotient.1087@localhost.localdomain>
	<562bcc11002110954v3ed9a9a4u3c20344fecb583cc@mail.gmail.com>
	<20100212092736.418241dd@hepzibah>
	<55BF52F4-C317-4ADA-9754-62E2E96FA8DF@twistedmatrix.com>
	<i2ub460e9631004270743z265bf70blfce9f52c82873605@mail.gmail.com>
Message-ID: <20100427152809.2091.1561493714.divmod.xquotient.31@localhost.localdomain>

On 02:43 pm, petshmidt at googlemail.com wrote:
>
>Hi,
>
>I can't install Twisted in VirtualEnv. Can someone explain what is
>wrong, please? Thanks!
>
>
>(newtwisted)hostname:/usr/local/development/newtwisted/bin# 
>easy_install Twisted
>[snip]
>Running Twisted-10.0.0/setup.py -q bdist_egg --dist-dir
>/tmp/easy_install-9n_UrX/Twisted-10.0.0/egg-dist-tmp-dt-vez
>twisted/runner/portmap.c:10:20: error: Python.h: No such file or 
>directory
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

You need to install the Python development headers.  This is usually in 
a package named "python-dev" or "python-devel" or something like that.

Jean-Paul



From petshmidt at googlemail.com  Tue Apr 27 13:12:04 2010
From: petshmidt at googlemail.com (Pet)
Date: Tue, 27 Apr 2010 21:12:04 +0200
Subject: [Twisted-Python] multiple versions of twisted on same machine
In-Reply-To: <20100427152809.2091.1561493714.divmod.xquotient.31@localhost.localdomain>
References: <b460e9631002110441h3a9b91d4kdb6bab01ddadc2b5@mail.gmail.com> 
	<dfbf29b01002110455p33443380o5cfc81aff8829653@mail.gmail.com> 
	<562bcc11002110841w443dbc4bs3c0b6e1bfc68364a@mail.gmail.com> 
	<20100211170535.26099.2118225748.divmod.xquotient.1087@localhost.localdomain>
	<562bcc11002110954v3ed9a9a4u3c20344fecb583cc@mail.gmail.com> 
	<20100212092736.418241dd@hepzibah>
	<55BF52F4-C317-4ADA-9754-62E2E96FA8DF@twistedmatrix.com> 
	<i2ub460e9631004270743z265bf70blfce9f52c82873605@mail.gmail.com> 
	<20100427152809.2091.1561493714.divmod.xquotient.31@localhost.localdomain>
Message-ID: <w2ib460e9631004271212s8d441973ia16a96c4504fcbee@mail.gmail.com>

On Tue, Apr 27, 2010 at 5:28 PM,  <exarkun at twistedmatrix.com> wrote:
> On 02:43 pm, petshmidt at googlemail.com wrote:
>>
>>Hi,
>>
>>I can't install Twisted in VirtualEnv. Can someone explain what is
>>wrong, please? Thanks!
>>
>>
>>(newtwisted)hostname:/usr/local/development/newtwisted/bin#
>>easy_install Twisted
>>[snip]
>>Running Twisted-10.0.0/setup.py -q bdist_egg --dist-dir
>>/tmp/easy_install-9n_UrX/Twisted-10.0.0/egg-dist-tmp-dt-vez
>>twisted/runner/portmap.c:10:20: error: Python.h: No such file or
>>directory
> ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
>
> You need to install the Python development headers. This is usually in
> a package named "python-dev" or "python-devel" or something like that.


thanks, it worked!


>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From drew.smathers at gmail.com  Wed Apr 28 10:22:42 2010
From: drew.smathers at gmail.com (Drew Smathers)
Date: Wed, 28 Apr 2010 12:22:42 -0400
Subject: [Twisted-Python] Very interesting....
In-Reply-To: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>
References: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>
Message-ID: <t2l368574aa1004280922z3f8091d5pe570a1207872b661@mail.gmail.com>

On Sat, Apr 24, 2010 at 1:20 PM, Jason J. W. Williams
<jasonjwwilliams at gmail.com> wrote:
> same example coded in eventlet, gevent, twisted, tornado, nodejs,
> thin+eventmachine http://gist.github.com/376416 (by @greut)
> Surprising
>

In the related blog post the author describes EvenMachine:  "It looks
like super clean Twisted too me."  Looking at the ruby example in
gist, I'm trying very hard to figure out what's super clean about it.

-Drew



From ssteinerx at gmail.com  Wed Apr 28 10:47:43 2010
From: ssteinerx at gmail.com (ssteinerX@gmail.com)
Date: Wed, 28 Apr 2010 12:47:43 -0400
Subject: [Twisted-Python] Very interesting....
In-Reply-To: <t2l368574aa1004280922z3f8091d5pe570a1207872b661@mail.gmail.com>
References: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>
	<t2l368574aa1004280922z3f8091d5pe570a1207872b661@mail.gmail.com>
Message-ID: <6925C376-3D04-4ADD-A2B8-C22A084F6B4D@gmail.com>


On Apr 28, 2010, at 12:22 PM, Drew Smathers wrote:

> On Sat, Apr 24, 2010 at 1:20 PM, Jason J. W. Williams
> <jasonjwwilliams at gmail.com> wrote:
>> same example coded in eventlet, gevent, twisted, tornado, nodejs,
>> thin+eventmachine http://gist.github.com/376416 (by @greut)
>> Surprising
>> 
> 
> In the related blog post the author describes EvenMachine:  "It looks
> like super clean Twisted too me."  Looking at the ruby example in
> gist, I'm trying very hard to figure out what's super clean about it.

Using "super clean" and "Ruby" together in the same sentence, in relation to anything more complex than "Hello World", especially on the Twisted list, causes tears in the space-time continuum.  

Please stop before something gets really broken.

Thanks,

S




From dr.marc.byrd at gmail.com  Wed Apr 28 10:57:18 2010
From: dr.marc.byrd at gmail.com (Marc Byrd)
Date: Wed, 28 Apr 2010 09:57:18 -0700
Subject: [Twisted-Python] Very interesting....
In-Reply-To: <6925C376-3D04-4ADD-A2B8-C22A084F6B4D@gmail.com>
References: <t2s3b949f091004241020yc82023dbw74c7bfe157ee3fc3@mail.gmail.com>
	<t2l368574aa1004280922z3f8091d5pe570a1207872b661@mail.gmail.com>
	<6925C376-3D04-4ADD-A2B8-C22A084F6B4D@gmail.com>
Message-ID: <p2oa33934631004280957u1c38cec2g3cca4475cfeb46de@mail.gmail.com>

I saw a mention of benchmarks, but no numbers... - would be most interested
in seeing those.

And as for EventMachine - I prefer twisted, but if you gotta be in ruby (as
I do increasingly often), it's great.

cheers,


m


On Wed, Apr 28, 2010 at 9:47 AM, ssteinerX at gmail.com <ssteinerx at gmail.com>wrote:

>
> On Apr 28, 2010, at 12:22 PM, Drew Smathers wrote:
>
> > On Sat, Apr 24, 2010 at 1:20 PM, Jason J. W. Williams
> > <jasonjwwilliams at gmail.com> wrote:
> >> same example coded in eventlet, gevent, twisted, tornado, nodejs,
> >> thin+eventmachine http://gist.github.com/376416 (by @greut)
> >> Surprising
> >>
> >
> > In the related blog post the author describes EvenMachine:  "It looks
> > like super clean Twisted too me."  Looking at the ruby example in
> > gist, I'm trying very hard to figure out what's super clean about it.
>
> Using "super clean" and "Ruby" together in the same sentence, in relation
> to anything more complex than "Hello World", especially on the Twisted list,
> causes tears in the space-time continuum.
>
> Please stop before something gets really broken.
>
> Thanks,
>
> S
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100428/dbf26e4b/attachment-0001.html>

From glyph at twistedmatrix.com  Wed Apr 28 16:06:58 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 28 Apr 2010 18:06:58 -0400
Subject: [Twisted-Python] draft of an article on Twisted
In-Reply-To: <r2vb61c19e71004270649q3fe9c2b4s1831d02fe1c28e61@mail.gmail.com>
References: <t2rb61c19e71004270530td3f58b45ge70af3194c7305d3@mail.gmail.com>
	<g2lb61c19e71004270548l92cd200al68fc3773ea276efa@mail.gmail.com>
	<r2vb61c19e71004270649q3fe9c2b4s1831d02fe1c28e61@mail.gmail.com>
Message-ID: <B9EF1252-C878-403E-A44C-A76717DA4FA8@twistedmatrix.com>


On Apr 27, 2010, at 9:49 AM, Jean Daniel wrote:

> Hello,

Hi Jean!

> I have written an introductory article to Twisted, and I would be
> delighted to see it published on Linux Weekly News some day.
> 
> It is available at: http://jdb.github.com/concurrent.html

Wow.  This is an incredible, sprawling article :).

I'm glad you wrote it, and I think it introduces quite a bit of material.

I don't really have time to write up a full editorial review, but definitely the strongest impression I got from reading it was this comment which you already made:

> - it might be too long and present too many things, maybe I should split it in parts,

This is really a series of articles; you should expand on each part, one at a time.  It really seems like you're rushing through it in order to cover a lot of ground.

Someone who is deeply committed to learning about Twisted and is planning to spend quite a while reading it would be well-served by your introduction.  However, most people who come to Twisted are actively trying to get something done, and they don't care about the theory too much until they manage to get some basic stuff working.  So you may want to provide some more pointers to tutorials and other practical getting-started guides.

You also focus a bit too much on performance.  While a Twisted server does provide some performance benefits, it's very hard to conclusively measure that one approach is really "faster" than the other; especially since some Twisted idioms (such as the inlineCallbacks example at the bottom of your article) are just as "slow".

There are lots of benchmarks showing various different performance characteristics of multithreaded vs. multiprocess vs. event-driven code, and with modern optimizations in each of these architectures, which of these is really the fastest changes from year to year.  If you were to take some benchmarks of Twisted vs. code using the 'multiprocessing' module, for example, you might get some surprising results (and ones which would vary wildly depending on which platform you were using and what exact algorithms you used in each example).

If you want to focus on performance, you should include benchmarks and measurements which back up your claims.  Personally, I'd focus more on the safety and comprehensibility discussion.  Even in the realm of performance, the issue isn't that Twisted is really *faster*, per se, it's that the structure of the code is easy to understand and modify, and therefore easier to optimize when you know what your bottlenecks really are.  My favorite example of this is "try to write a failing unit test for a race condition in multithreaded code".  In most Twisted applications, you can force the order of execution in your test so that you can verify the race going one way, then the other, but with threads it's very, very tricky (and sometimes not really feasible, or even possible).


-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100428/0c956214/attachment.html>

From chris at simplistix.co.uk  Thu Apr 29 09:48:55 2010
From: chris at simplistix.co.uk (Chris Withers)
Date: Thu, 29 Apr 2010 16:48:55 +0100
Subject: [Twisted-Python] getting "connection per thread" behaviour
Message-ID: <4BD9AA67.8020902@simplistix.co.uk>

Hi All,

I was asking about this on irc but had to leave in a hurry so thought 
I'd mail here...

So, I have a pool of wsgi threads being run by Twisted's wsgi server 
that want to send stomp messages. The stomp client is Twisted-based 
(http://code.google.com/p/broadwick/source/browse/trunk/broadwick/messaging/twistedstomp.py). 
I want to have as few stomp connections as possible, maxing out at one 
per thread.

Bonus complications:

- each wsgi thread has a logical transaction, that needs to marry up 
with the stomp logical transaction, so I can't just have one stomp 
connection per thread

- I don't know how much overhead there is in creating the stomp 
connection, so I'd like to open as few as possible but keep them open 
and re-use them across wsgi requests.

I found:

http://pypi.python.org/pypi/txconnpool

Anyone know how good that is and if it's useful here?

All help gratefully received!

Chris




From ddwiggins at advpubtech.com  Thu Apr 29 13:02:00 2010
From: ddwiggins at advpubtech.com (Don Dwiggins)
Date: Thu, 29 Apr 2010 12:02:00 -0700
Subject: [Twisted-Python] XMLRPC server: nested handlers?
Message-ID: <hrcl39$i61$1@dough.gmane.org>

I have an XMLRPC server, currently with two subhandlers.  One of them is 
getting quite large (over 120 "xmlrpc_" methods plus helpers), and I'd 
like to break it up into "sub-subhandlers".

http://twistedmatrix.com/documents/current/web/howto/xmlrpc.html#auto2 
says that you can do this "to arbitrary depths".  It's not quite clear 
how to set this up, however.  Before I start experimenting, I thought 
I'd ask if anyone has done this, and can show a bit of code for it.

TIA,
-- 
Don Dwiggins
Advanced Publishing Technology




From jeandaniel.browne at gmail.com  Thu Apr 29 15:13:41 2010
From: jeandaniel.browne at gmail.com (Jean Daniel)
Date: Thu, 29 Apr 2010 23:13:41 +0200
Subject: [Twisted-Python] draft of an article on Twisted
In-Reply-To: <B9EF1252-C878-403E-A44C-A76717DA4FA8@twistedmatrix.com>
References: <t2rb61c19e71004270530td3f58b45ge70af3194c7305d3@mail.gmail.com>
	<g2lb61c19e71004270548l92cd200al68fc3773ea276efa@mail.gmail.com>
	<r2vb61c19e71004270649q3fe9c2b4s1831d02fe1c28e61@mail.gmail.com>
	<B9EF1252-C878-403E-A44C-A76717DA4FA8@twistedmatrix.com>
Message-ID: <i2zb61c19e71004291413k21f16b8fq7f1d558a1d6a684c@mail.gmail.com>

thanks for your feedback, it helps.



On Thu, Apr 29, 2010 at 12:06 AM, Glyph Lefkowitz
<glyph at twistedmatrix.com> wrote:
>
> On Apr 27, 2010, at 9:49 AM, Jean Daniel wrote:
>
> Hello,
>
> Hi Jean!
>
> I have written an introductory article to Twisted, and I would be
> delighted to see it published on Linux Weekly News some day.
>
> It is available at: http://jdb.github.com/concurrent.html
>
> Wow. This is an incredible, sprawling article :).
> I'm glad you wrote it, and I think it introduces quite a bit of material.
> I don't really have time to write up a full editorial review, but definitely
> the strongest impression I got from reading it was this comment which you
> already made:
>
> - it might be too long and present too many things, maybe I shouldsplit it
> in parts,
>
> This is really a series of articles; you should expand on each part, one at
> a time. It really seems like you're rushing through it in order to cover a
> lot of ground.
>
> Someone who is deeply committed to learning about Twisted and is planning to
> spend quite a while reading it would be well-served by your introduction.
> However, most people who come to Twisted are actively trying to get
> something done, and they don't care about the theory too much until they
> manage to get some basic stuff working. So you may want to provide some
> more pointers to tutorials and other practical getting-started guides.
> You also focus a bit too much on performance. While a Twisted server does
> provide some performance benefits, it's very hard to conclusively measure
> that one approach is really "faster" than the other; especially since some
> Twisted idioms (such as the inlineCallbacks example at the bottom of your
> article) are just as "slow".
> There are lots of benchmarks showing various different performance
> characteristics of multithreaded vs. multiprocess vs. event-driven code, and
> with modern optimizations in each of these architectures, which of these is
> really the fastest changes from year to year. If you were to take some
> benchmarks of Twisted vs. code using the 'multiprocessing' module, for
> example, you might get some surprising results (and ones which would vary
> wildly depending on which platform you were using and what exact algorithms
> you used in each example).
> If you want to focus on performance, you should include benchmarks and
> measurements which back up your claims. Personally,I'd focus more on the
> safety and comprehensibility discussion. Even in the realm of performance,
> the issue isn't that Twisted is really *faster*, per se, it's that the
> structure of the code is easy to understand and modify, and therefore easier
> to optimize when you know what your bottlenecks really are. My favorite
> example of this is "try to write a failing unit test for a race condition in
> multithreaded code". In most Twisted applications, you can force the order
> of execution in your test so that you can verify the race going one way,
> then the other, but with threads it's very, very tricky (and sometimes not
> really feasible, or even possible).
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



From gabriel at cttc.upc.edu  Fri Apr 30 04:07:35 2010
From: gabriel at cttc.upc.edu (Gabriel =?ISO-8859-1?Q?Gonz=E1lez?=)
Date: Fri, 30 Apr 2010 12:07:35 +0200
Subject: [Twisted-Python] Detecting idle connection with perspective broker
Message-ID: <1272622055.3109.41.camel@pcmlevi.cttc.org>

Hi there,
I wrote a small server application with PB but now I have some problem
with client disconnection. When I have a idle connection, the logout
method at server never is called (this method let me have a list of
current logged users) and then client appears always connected to
server.

I can see the same issue with the chatserver example from perspective
broker doc with detached method. 

class ChatRealm:
     implements(portal.IRealm)
     def requestAvatar(self, avatarID, mind, *interfaces):
         assert pb.IPerspective in interfaces
         avatar = User(avatarID)
         avatar.server = self.server
         avatar.attached(mind)
         return pb.IPerspective, avatar, lambda
a=avatar:a.detached(mind)

How can I detect that idle connection clients to call detached method?

Thanks!










-- 
Aquest missatge ha estat analitzat per MailScanner
a la cerca de virus i d'altres continguts perillosos,
i es considera que est net.




From konrads.smelkovs at gmail.com  Fri Apr 30 05:23:18 2010
From: konrads.smelkovs at gmail.com (Konrads Smelkovs)
Date: Fri, 30 Apr 2010 14:23:18 +0300
Subject: [Twisted-Python] Detecting idle connection with perspective
	broker
In-Reply-To: <1272622055.3109.41.camel@pcmlevi.cttc.org>
References: <1272622055.3109.41.camel@pcmlevi.cttc.org>
Message-ID: <u2wd79700b91004300423v8af1384u8e0a22d620919286@mail.gmail.com>

A simple solution could be to implement a ping method with client and have
server ping client once every N seconds. At the same time, fire a delayed
call for N+5 seconds. if delayed call is executed first, drop connection.
--
Konrads Smelkovs
Applied IT sorcery.


2010/4/30 Gabriel Gonzlez <gabriel at cttc.upc.edu>

> Hi there,
> I wrote a small server application with PB but now I have some problem
> with client disconnection. When I have a idle connection, the logout
> method at server never is called (this method let me have a list of
> current logged users) and then client appears always connected to
> server.
>
> I can see the same issue with the chatserver example from perspective
> broker doc with detached method.
>
> class ChatRealm:
>     implements(portal.IRealm)
>     def requestAvatar(self, avatarID, mind, *interfaces):
>         assert pb.IPerspective in interfaces
>         avatar = User(avatarID)
>         avatar.server = self.server
>         avatar.attached(mind)
>         return pb.IPerspective, avatar, lambda
> a=avatar:a.detached(mind)
>
> How can I detect that idle connection clients to call detached method?
>
> Thanks!
>
>
>
>
>
>
>
>
>
>
> --
> Aquest missatge ha estat analitzat per MailScanner
> a la cerca de virus i d'altres continguts perillosos,
> i es considera que est net.
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20100430/876b555d/attachment.html>

