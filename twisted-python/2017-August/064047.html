<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Is there a nice way to write transport-agnostic protocols and servers/clients?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Is%20there%20a%20nice%20way%20to%20write%0A%20transport-agnostic%20protocols%20and%20servers/clients%3F&In-Reply-To=%3CCAKF%3D%2Bdi2V%3Dovvc_%3DpXpULEaJgZskFQbJUwGN7iwczNQtEJGeRQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="064046.html">
   <LINK REL="Next"  HREF="064050.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Is there a nice way to write transport-agnostic protocols and servers/clients?</H1>
    <B>Kevin Conway</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Is%20there%20a%20nice%20way%20to%20write%0A%20transport-agnostic%20protocols%20and%20servers/clients%3F&In-Reply-To=%3CCAKF%3D%2Bdi2V%3Dovvc_%3DpXpULEaJgZskFQbJUwGN7iwczNQtEJGeRQ%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Is there a nice way to write transport-agnostic protocols and servers/clients?">kevinjacobconway at gmail.com
       </A><BR>
    <I>Wed Aug 16 23:35:33 MDT 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="064046.html">[Twisted-Python] Is there a nice way to write transport-agnostic protocols and servers/clients?
</A></li>
        <LI>Next message (by thread): <A HREF="064050.html">[Twisted-Python] Is there a nice way to write transport-agnostic protocols and servers/clients?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64047">[ date ]</a>
              <a href="thread.html#64047">[ thread ]</a>
              <a href="subject.html#64047">[ subject ]</a>
              <a href="author.html#64047">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> There is no datagram endpoints API as yet, though (see #4471), only
</I>stream endpoints.

I've read through the ticket. What I still don't understand is the
significance of this of this? Other than some irrelevant callbacks, what
prevents anyone from using the existing UDP endpoint? It's not clear from
this thread why the specific transport abstraction is critically
important to the data protocol.

If you are building a Protocol then you use the 'dataReceived' callback to
parse the data. Can someone elaborate on why it matters if the bytes get
here via a datagram or TCP stream?

&gt;<i> But it doesn't provide a uniform abstraction over both stream-based and
</I>datagram-based transports.

Again, why does this matter? If you run a service with multiple listening
transports, why does it matter which one is active? What differs in the way
you interpret the bytes received?

On Wed, Aug 16, 2017 at 9:03 PM Kevin Conway &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">kevinjacobconway at gmail.com</A>&gt;
wrote:

&gt;<i> &gt; There is no datagram endpoints API as yet, though (see #4471), only
</I>&gt;<i> stream endpoints.
</I>&gt;<i>
</I>&gt;<i> I'm not sure I understand the distinction. Endpoints supports UDP which is
</I>&gt;<i> a datagram based transport. From a Protocol perspective, you only care
</I>&gt;<i> about which bytes are received. If you have a framing concept I'm your data
</I>&gt;<i> format then it should be handled there.
</I>&gt;<i>
</I>&gt;<i> What am I not understanding about this particular use case?
</I>&gt;<i>
</I>&gt;<i> On Wed, Aug 16, 2017, 16:25 Jean-Paul Calderone &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On Wed, Aug 16, 2017 at 9:59 AM, Tristan Seligmann &lt;
</I>&gt;&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mithrandi at mithrandi.net</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Wed, 16 Aug 2017 at 15:28 Kevin Conway &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">kevinjacobconway at gmail.com</A>&gt;
</I>&gt;&gt;&gt;<i> wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Maybe I misunderstand the issue, but I believe the Endpoints API solves
</I>&gt;&gt;&gt;&gt;<i> for this.
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://twistedmatrix.com/documents/16.4.1/core/howto/endpoints.html">https://twistedmatrix.com/documents/16.4.1/core/howto/endpoints.html</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> This abstracts the transport and allows you to focus on only
</I>&gt;&gt;&gt;&gt;<i> interpreting the bytes transmitted over that transport by defining a
</I>&gt;&gt;&gt;&gt;<i> Protocol and a Factory that plug into strports. This should allow you to
</I>&gt;&gt;&gt;&gt;<i> have the business logic defined in only one location while
</I>&gt;&gt;&gt;&gt;<i> listening/requesting over different transports.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> There is no datagram endpoints API as yet, though (see #4471), only
</I>&gt;&gt;&gt;<i> stream endpoints.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> Also, when there are datagram endpoints, they won't be compatible with
</I>&gt;&gt;<i> stream endpoints.  Endpoints don't abstract the transport, they abstract
</I>&gt;&gt;<i> *creating* the transport.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Twisted provides a uniform abstraction over stream-based transports like
</I>&gt;&gt;<i> TCP and gives you *ITransport* to implement an *IProtocol* against.  It
</I>&gt;&gt;<i> also provides a uniform abstraction over datagram-based transports like UDP
</I>&gt;&gt;<i> and gives you *IUDPTransport* (oops; should have been
</I>&gt;&gt;<i> *IDatagramTransport* and some other things about it should probably be
</I>&gt;&gt;<i> changed too) to implement a *DatagramProtocol* (oops; no interface for
</I>&gt;&gt;<i> this one, just subclass: see, this should change) against.  But it doesn't
</I>&gt;&gt;<i> provide a uniform abstraction over both stream-based and datagram-based
</I>&gt;&gt;<i> transports.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Implementing such a thing may be possible and even a good idea but no one
</I>&gt;&gt;<i> has yet done it for Twisted (as far as I know).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Jean-Paul
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Twisted-Python mailing list
</I>&gt;&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20170817/5e3a6da4/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="064046.html">[Twisted-Python] Is there a nice way to write transport-agnostic protocols and servers/clients?
</A></li>
	<LI>Next message (by thread): <A HREF="064050.html">[Twisted-Python] Is there a nice way to write transport-agnostic protocols and servers/clients?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64047">[ date ]</a>
              <a href="thread.html#64047">[ thread ]</a>
              <a href="subject.html#64047">[ subject ]</a>
              <a href="author.html#64047">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
