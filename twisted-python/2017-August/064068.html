<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] SSLContext not valid for TLS Server
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20SSLContext%20not%20valid%20for%20TLS%20Server&In-Reply-To=%3CB9B0B5CD-CB50-45C0-8EEA-4A488CFBD542%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="064067.html">
   <LINK REL="Next"  HREF="064069.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] SSLContext not valid for TLS Server</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20SSLContext%20not%20valid%20for%20TLS%20Server&In-Reply-To=%3CB9B0B5CD-CB50-45C0-8EEA-4A488CFBD542%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] SSLContext not valid for TLS Server">glyph at twistedmatrix.com
       </A><BR>
    <I>Tue Aug 22 22:21:56 MDT 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="064067.html">[Twisted-Python] SSLContext not valid for TLS Server
</A></li>
        <LI>Next message (by thread): <A HREF="064069.html">[Twisted-Python] SSLContext not valid for TLS Server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64068">[ date ]</a>
              <a href="thread.html#64068">[ thread ]</a>
              <a href="subject.html#64068">[ subject ]</a>
              <a href="author.html#64068">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On Aug 22, 2017, at 9:16 AM, Thomas Hartwich &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">ceeborraa at gmx.de</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Yes, you're right for sure. As an alternative I tried to instantiate an object from twisted.internet._sslverify.OpenSSLCertificateOptions (as it is used by PrivateCertificate e.g.):
</I>&gt;<i> 
</I>&gt;<i> co = OpenSSLCertificateOptions(privateKey=pkey,certificate=cert_obj)
</I>
Please note that importing names with &quot;._&quot; in them is relying on private API :).  The public alias for this is `twisted.internet.ssl.CertificateOptions` <A HREF="https://twistedmatrix.com/documents/17.5.0/api/twisted.internet.ssl.CertificateOptions.html">https://twistedmatrix.com/documents/17.5.0/api/twisted.internet.ssl.CertificateOptions.html</A> &lt;<A HREF="https://twistedmatrix.com/documents/17.5.0/api/twisted.internet.ssl.CertificateOptions.html">https://twistedmatrix.com/documents/17.5.0/api/twisted.internet.ssl.CertificateOptions.html</A>&gt;
&gt;<i> Despite it provides a SSL-context, it does not work similarly to the options() method I tried before from PrivateCertificate().
</I>&gt;<i> 
</I>&gt;<i> Can you tell me how I can make use of IOpenSSLServerConnectionCreator to create a valid SSL-Context for the TLS server in my case?
</I>
You should probably just use CertificateOptions - I still would like to understand why it doesn't work ;-).

<A HREF="https://twistedmatrix.com/documents/17.5.0/api/twisted.internet.interfaces.IOpenSSLServerConnectionCreator.html">https://twistedmatrix.com/documents/17.5.0/api/twisted.internet.interfaces.IOpenSSLServerConnectionCreator.html</A> &lt;<A HREF="https://twistedmatrix.com/documents/17.5.0/api/twisted.internet.interfaces.IOpenSSLServerConnectionCreator.html">https://twistedmatrix.com/documents/17.5.0/api/twisted.internet.interfaces.IOpenSSLServerConnectionCreator.html</A>&gt; is documented here; this is just the interface you should implement (rather than subclassing ContextFactory and implementing getContext) if you want to do something totally custom with the OpenSSL API rather than Twisted's API; I'd still rather understand why Twisted's API, i.e. CertificateOptions, doesn't work for you.

-glyph

&gt;<i> Thank you!
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Gesendet: Sonntag, 20. August 2017 um 22:36 Uhr
</I>&gt;<i> Von: Glyph &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt;
</I>&gt;<i> An: &quot;Twisted general discussion&quot; &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>&gt;
</I>&gt;<i> Betreff: Re: [Twisted-Python] SSLContext not valid for TLS Server
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> On Aug 20, 2017, at 9:30 AM, Thomas Hartwich &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">ceeborraa at gmx.de</A>[mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">ceeborraa at gmx.de</A>]&gt; wrote: 
</I>&gt;<i>  Ok, I finally got a solution for my problem. As I know, the TLS server was working with DefaultOpenSSLContextFactory but this only takes file paths to private key/certificate, I created my own SSL-Context file.
</I>&gt;<i> 
</I>&gt;<i> For anybody who has the same problem: 
</I>&gt;<i> Please note that this solution will prevent the use of TLS 1.3 when it is available, among other problems.
</I>&gt;<i>  
</I>&gt;<i> DefaultOpenSSLContextFactory should be deprecated (I hope someone has the time to do it soon), as is the 'getContext' interface that you're using (you should be using <A HREF="https://twistedmatrix.com/documents/17.5.0/api/twisted.internet.interfaces.IOpenSSLServerConnectionCreator.html[https://twistedmatrix.com/documents/17.5.0/api/twisted.internet.interfaces.IOpenSSLServerConnectionCreator.html">https://twistedmatrix.com/documents/17.5.0/api/twisted.internet.interfaces.IOpenSSLServerConnectionCreator.html[https://twistedmatrix.com/documents/17.5.0/api/twisted.internet.interfaces.IOpenSSLServerConnectionCreator.html</A>] ) so it would be really good to understand what part of the non-deprecated TLS stack is broken for you.
</I>&gt;<i>  
</I>&gt;<i> -glyph_______________________________________________ Twisted-Python mailing list <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python[https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python[https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>]
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20170822/3bc8db85/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="064067.html">[Twisted-Python] SSLContext not valid for TLS Server
</A></li>
	<LI>Next message (by thread): <A HREF="064069.html">[Twisted-Python] SSLContext not valid for TLS Server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64068">[ date ]</a>
              <a href="thread.html#64068">[ thread ]</a>
              <a href="subject.html#64068">[ subject ]</a>
              <a href="author.html#64068">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
