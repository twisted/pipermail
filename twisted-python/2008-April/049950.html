<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] shared list in factory, mutexes?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20shared%20list%20in%20factory%2C%20mutexes%3F&In-Reply-To=%3C48045DED.3000201%40evotex.ch%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="049944.html">
   <LINK REL="Next"  HREF="049951.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] shared list in factory, mutexes?</H1>
    <B>Gabriel Rossetti</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20shared%20list%20in%20factory%2C%20mutexes%3F&In-Reply-To=%3C48045DED.3000201%40evotex.ch%3E"
       TITLE="[Twisted-Python] shared list in factory, mutexes?">mailing_lists at evotex.ch
       </A><BR>
    <I>Tue Apr 15 01:49:01 MDT 2008</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="049944.html">[Twisted-Python] shared list in factory, mutexes?
</A></li>
        <LI>Next message (by thread): <A HREF="049951.html">[Twisted-Python] shared list in factory, mutexes?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49950">[ date ]</a>
              <a href="thread.html#49950">[ thread ]</a>
              <a href="subject.html#49950">[ subject ]</a>
              <a href="author.html#49950">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Itamar Shtull-Trauring wrote:
&gt;<i> On Mon, 2008-04-14 at 12:35 +0200, Gabriel Rossetti wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> I'm wondering if maybe I'm misunderstanding something here, when several 
</I>&gt;&gt;<i> messages arrive, what happens, are they processed in parallel, are they 
</I>&gt;&gt;<i> put in a queue and processes sequentially? 
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Sequentially. Twisted does not expose use of threads to user-level
</I>&gt;<i> APIs... and Twisted APIs are not thread-safe, other than
</I>&gt;<i> reactor.callFromThread.
</I>&gt;<i>
</I>&gt;<i>   
</I>&gt;&gt;<i> If I receive a message, do 
</I>&gt;&gt;<i> some heavy processing/io/potentially blocking code in a thread using 
</I>&gt;&gt;<i> twisted's threading module, and before it's done, I get another 
</I>&gt;&gt;<i> connection + message that needs the same thing to be done, what
</I>&gt;&gt;<i> happens? 
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> reactor.callInThread (and therefore deferToThread) are built on top of a
</I>&gt;<i> thread-safe Queue. Just make sure your scheduled tasks are not calling
</I>&gt;<i> back into Twisted but are rather self-contained units of work.
</I>&gt;<i>
</I>&gt;<i>   
</I>Ok, but if connection1 comes, it does some processing by using a thread 
or a process (with twisted's functions) and connection2 comes, will 
connection2 wait for connection1 to finish, or will connection1 be put 
on the side while it waits for the thread and connection 2 is taken. 
Also, what event makes the next connection be

 think what I don't get is that with thread network code, each thread is 
an individual self-contained unit that does whatever processing it needs 
to do however long it may need to take, and the OS takes care of 
scheduling each thread, but with twisted, the main thread executes each 
connection one by one sequentially and thus if one of them needs to to 
some lengthy processing, it will block all other connections from being 
processed, so you have to use threads to keep it from blocking, but 
somehow the active connection should become inactive while the 
processing thread does it's work, so that another connection can be 
processed in the meantime. Is that how it works? So twisted's event loop 
(reactor) does the same work as the OS's scheduler?

Thanks


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="049944.html">[Twisted-Python] shared list in factory, mutexes?
</A></li>
	<LI>Next message (by thread): <A HREF="049951.html">[Twisted-Python] shared list in factory, mutexes?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49950">[ date ]</a>
              <a href="thread.html#49950">[ thread ]</a>
              <a href="subject.html#49950">[ subject ]</a>
              <a href="author.html#49950">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
