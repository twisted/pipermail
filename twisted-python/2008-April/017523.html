<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] &quot;glue&quot; problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20%22glue%22%20problem&In-Reply-To=20080419172445.2ebdc86f.dr.pythoniac%40googlemail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017522.html">
   <LINK REL="Next"  HREF="017524.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] &quot;glue&quot; problem</H1>
    <B>Maarten ter Huurne</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20%22glue%22%20problem&In-Reply-To=20080419172445.2ebdc86f.dr.pythoniac%40googlemail.com"
       TITLE="[Twisted-Python] &quot;glue&quot; problem">maarten at treewalker.org
       </A><BR>
    <I>Sat Apr 19 11:59:28 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017522.html">[Twisted-Python] &quot;glue&quot; problem
</A></li>
        <LI>Next message: <A HREF="017524.html">[Twisted-Python] &quot;glue&quot; problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17523">[ date ]</a>
              <a href="thread.html#17523">[ thread ]</a>
              <a href="subject.html#17523">[ subject ]</a>
              <a href="author.html#17523">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Saturday 19 April 2008, Dr Pythoniac wrote:

&gt;<i> How do I run once-per-application stuff ?
</I>&gt;<i>
</I>&gt;<i> Assume, I want to put sth into the static.Registry or  I want to read in
</I>&gt;<i> some application data from a file, so that every resource can use it.
</I>&gt;<i>
</I>&gt;<i> My main problem can be split in two:
</I>&gt;<i>
</I>&gt;<i> - where do it do it (using twistd) ?
</I>
For our webapp, we load lots of data, so I made a &quot;startup in progress&quot; page 
which both does the loading and serves a page that shows how much is loaded 
so far. The loading itself is done by loading small chunks of data and then 
returning control back to the reactor, so it can actually serve the 
progress page. When loading is done, the progress page resource is replaced 
by the root page of the webapp.

If you only want to load a small amount of data, maybe subclass Application? 
I haven't tried this though.

Our webapp loads from a Python file (using &quot;twistd -y&quot;), so that first 
Python file could also load data. If I recall correctly, that initial file 
is run as the same user that started twistd (root, in our case), while the 
started application runs as the user selected from the twistd --uid 
and --gid options. So it is safer to do as little as possible at this stage 
of startup.

Bye,
		Maarten
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 194 bytes
Desc: This is a digitally signed message part.
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20080419/14895fcc/attachment.pgp">http://twistedmatrix.com/pipermail/twisted-python/attachments/20080419/14895fcc/attachment.pgp</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017522.html">[Twisted-Python] &quot;glue&quot; problem
</A></li>
	<LI>Next message: <A HREF="017524.html">[Twisted-Python] &quot;glue&quot; problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17523">[ date ]</a>
              <a href="thread.html#17523">[ thread ]</a>
              <a href="subject.html#17523">[ subject ]</a>
              <a href="author.html#17523">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
