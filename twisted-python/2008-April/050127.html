<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Exit code using twistd
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Exit%20code%20using%20twistd&In-Reply-To=%3C394cf6840804290456ta1b4711n7fda62b5fd897ed5%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="050126.html">
   <LINK REL="Next"  HREF="050129.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Exit code using twistd</H1>
    <B>Miguel Filho</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Exit%20code%20using%20twistd&In-Reply-To=%3C394cf6840804290456ta1b4711n7fda62b5fd897ed5%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Exit code using twistd">miguel.filho at gmail.com
       </A><BR>
    <I>Tue Apr 29 05:56:04 MDT 2008</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="050126.html">[Twisted-Python] cannot get simple example to run
</A></li>
        <LI>Next message (by thread): <A HREF="050129.html">[Twisted-Python] Exit code using twistd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50127">[ date ]</a>
              <a href="thread.html#50127">[ thread ]</a>
              <a href="subject.html#50127">[ subject ]</a>
              <a href="author.html#50127">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello list,

I'm calling my program using twistd, like this:
# twistd -y /usr/lib/python2.4/site-packages/apolicy/server.py -q
--logfile /var/log/twistd.log --pidfile=/var/run/twistd.pid

All right, no problem. But my program makes some tests while starting
the service, like loading configuration files, etc.
If there is any exception twistd keeps running, so I tried calling
reactor.stop(), but I get an RuntimeError saying that it is not
possible to stop the reactor because it is not running. So I tried
calling sys.exit(1). twistd exits, but the code I'm passing is not
returned by twistd, witch returns 0. This messes with my init scripts,
so if my user calls 'service mydaemon start' the system will print an
'OK', but twistd will not be running in case of any errors.

How can I proceed to avoid this behavior?

Regards,

Miguel


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="050126.html">[Twisted-Python] cannot get simple example to run
</A></li>
	<LI>Next message (by thread): <A HREF="050129.html">[Twisted-Python] Exit code using twistd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50127">[ date ]</a>
              <a href="thread.html#50127">[ thread ]</a>
              <a href="subject.html#50127">[ subject ]</a>
              <a href="author.html#50127">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
