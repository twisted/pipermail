<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Performance issues of twisted.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Performance%20issues%20of%20twisted.&In-Reply-To=37d49ed40804131013g9df5e65sb703baa04a41dd35%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017433.html">
   <LINK REL="Next"  HREF="017432.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Performance issues of twisted.</H1>
    <B>Maarten ter Huurne</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Performance%20issues%20of%20twisted.&In-Reply-To=37d49ed40804131013g9df5e65sb703baa04a41dd35%40mail.gmail.com"
       TITLE="[Twisted-Python] Performance issues of twisted.">maarten at treewalker.org
       </A><BR>
    <I>Sun Apr 13 15:34:01 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017433.html">[Twisted-Python] Performance issues of twisted.
</A></li>
        <LI>Next message: <A HREF="017432.html">[Twisted-Python] Performance issues of twisted.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17431">[ date ]</a>
              <a href="thread.html#17431">[ thread ]</a>
              <a href="subject.html#17431">[ subject ]</a>
              <a href="author.html#17431">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sunday 13 April 2008, Andy Fundinger wrote:

&gt;<i> &gt; 5. Garbage collection might make the server halt for a moment
</I>&gt;<i>
</I>&gt;<i> I think this should be less than the latency of a publicly routed IP
</I>&gt;<i> network, anyone have figures for gc and twisted?
</I>
There are two types of garbage collection in Python:
- reference counting
- mark and sweep

The reference counting is always active and does most of the collection. 
However, it cannot collect objects that are unreachable but have cyclic 
references between them, so the mark and sweep runs once in a while to 
reclaim those.

The mark and sweep has several levels: it will frequently check whether 
recently created objects are still reachable; less frequently it will check 
reachability of all objects.

The reference counting overhead is spread very evenly over time, so there is 
no latency problem there.

The mark and sweep operation locks the entire Python interpreter. The time 
it takes depends on the number of objects allocated. I did some 
measurements once, but unfortunately I haven't kept the numbers. However, 
it went up very quickly and by the time you have a couple of GB of data you 
can expect hickups of multiple seconds. It should be easy to reproduce 
this: just read the documentation of the &quot;gc&quot; module and write a small 
benchmark program that allocates lots of objects and then forces the most 
thorough level of mark and sweep.

What I did for our web app is disable the mark and sweep algorithm 
(gc.disable()) and break reference cycles in our code.

Bye,
		Maarten
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 194 bytes
Desc: This is a digitally signed message part.
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20080413/5a59076d/attachment.pgp">http://twistedmatrix.com/pipermail/twisted-python/attachments/20080413/5a59076d/attachment.pgp</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017433.html">[Twisted-Python] Performance issues of twisted.
</A></li>
	<LI>Next message: <A HREF="017432.html">[Twisted-Python] Performance issues of twisted.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17431">[ date ]</a>
              <a href="thread.html#17431">[ thread ]</a>
              <a href="subject.html#17431">[ subject ]</a>
              <a href="author.html#17431">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
