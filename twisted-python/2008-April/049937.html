<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Performance issues of twisted.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Performance%20issues%20of%20twisted.&In-Reply-To=%3C37d49ed40804131013g9df5e65sb703baa04a41dd35%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="049936.html">
   <LINK REL="Next"  HREF="049938.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Performance issues of twisted.</H1>
    <B>Andy Fundinger</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Performance%20issues%20of%20twisted.&In-Reply-To=%3C37d49ed40804131013g9df5e65sb703baa04a41dd35%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Performance issues of twisted.">Andy at NewWorldElectric.com
       </A><BR>
    <I>Sun Apr 13 11:13:45 MDT 2008</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="049936.html">[Twisted-Python] Performance issues of twisted.
</A></li>
        <LI>Next message (by thread): <A HREF="049938.html">[Twisted-Python] Performance issues of twisted.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49937">[ date ]</a>
              <a href="thread.html#49937">[ thread ]</a>
              <a href="subject.html#49937">[ subject ]</a>
              <a href="author.html#49937">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm not sure about books, but the questions seemed fun.  I'm curious how my
answers measure up to the rest of the list here.

2008/4/13 Peter Cai &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">newptcai at gmail.com</A>&gt;:

&gt;<i> Hi all!
</I>&gt;<i>
</I>&gt;<i> I am preparing to write a server application (you may think of it as an
</I>&gt;<i> online game server) with twisted, but I am worrying about it's performance
</I>&gt;<i> and how to do it correctly.
</I>&gt;<i>
</I>&gt;<i> For example..
</I>&gt;<i>
</I>&gt;<i> 1. UDP or TCP，which should I choose to gain higher performance?
</I>&gt;<i>
</I>If you want the data to get there even if it's late use TCP, if late data is
not useful to you or needs to be handled some special way use UDP which will
simply lose packets if they happen to not go through.  It is possible but
rather unlikely that you can implement a strategy for retrying failures
better than TCP unless you relax the constraint of eventually getting the
data through.

2. Should I catch data in memory instead of write it to db immediately?
&gt;<i>
</I> I wouldn't for local mysql databases.  For a more distributed setup you
might consider memcached.

3. Could I make it run on cluster if cache data in memory ―― I think it
&gt;<i> might be quit hard to exchange data between instances of the server if I
</I>&gt;<i> cache data in memory.
</I>&gt;<i>
</I>that's exactly what memcached will take care of for you.


&gt;<i> 4. How to make hot backup?
</I>&gt;<i>
</I>for maximum performance use a replicated pair of database servers and take
the spare offline for backups.  You could also bring the spare up only to
capture the backup, though it will slow down the primary as it plays
catchup.


&gt;<i> 5. Garbage collection might make the server halt for a moment
</I>&gt;<i>
</I>I think this should be less than the latency of a publicly routed IP
network, anyone have figures for gc and twisted?

6. What is happening in a computer when an IP package received?
&gt;<i>
</I>What do you mean?  What specifically do you need to know?

7. Could I get some inspiration from how people write web server?
&gt;<i>
</I>this one I can suggest a book for, the twisted book
<A HREF="http://www.oreilly.com/catalog/twistedadn/">http://www.oreilly.com/catalog/twistedadn/</A> , or if you're considering
something other than twisted any reasonably thick python book will have an
example web server.


&gt;<i> 8. If i use an separate physical server to deploy the database, could I
</I>&gt;<i> gain some performance improvement?  Or the cost of communication between the
</I>&gt;<i> db and the server could hurt the total performance?
</I>&gt;<i>
</I>could go either way.  With the effects of Python's GIL I'd expect a
multi-core server with database and game server on one box would be fine
until you hit a scaling limit and your server is eating a whole core.  At
that point you need to develop a distributed application model and probably
use multiple servers.  If you hit that before you're running 200 users
recheck your business model, if you hit it before 20 users recheck your
architecture.

Andy Fundinger

-- 
Blog: <A HREF="http://channel3b.wordpress.com">http://channel3b.wordpress.com</A>
Second Life Name: Ciemaar Flintoff

I am a sig Virus. Please put me in your sig so that I can continue to
replicate.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20080413/47ea59c9/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="049936.html">[Twisted-Python] Performance issues of twisted.
</A></li>
	<LI>Next message (by thread): <A HREF="049938.html">[Twisted-Python] Performance issues of twisted.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49937">[ date ]</a>
              <a href="thread.html#49937">[ thread ]</a>
              <a href="subject.html#49937">[ subject ]</a>
              <a href="author.html#49937">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
