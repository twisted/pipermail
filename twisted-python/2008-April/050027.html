<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] feeding-worker-loop problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20feeding-worker-loop%20problem&In-Reply-To=%3C4809D226.20903%40web.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="050045.html">
   <LINK REL="Next"  HREF="050028.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] feeding-worker-loop problem</H1>
    <B>Patrick Scharrenberg</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20feeding-worker-loop%20problem&In-Reply-To=%3C4809D226.20903%40web.de%3E"
       TITLE="[Twisted-Python] feeding-worker-loop problem">pittipatti at web.de
       </A><BR>
    <I>Sat Apr 19 05:06:14 MDT 2008</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="050045.html">[Twisted-Python] Re: Howto: use Trial to unit test an XML-RPC server
</A></li>
        <LI>Next message (by thread): <A HREF="050028.html">[Twisted-Python] feeding-worker-loop problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50027">[ date ]</a>
              <a href="thread.html#50027">[ thread ]</a>
              <a href="subject.html#50027">[ subject ]</a>
              <a href="author.html#50027">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi!

I've been thinking for some time now about the following problem, but
can't find a solution.

I have a queue with a fluctuant number of tasks. This queue might be
empty at some time but might also become such full, that all workers
have work to do and we have to wait until one becomes free again.

I'd like to have a number of workers which process these tasks from the
queue.

What I've got:
- the worker, which returns a deferred for further processing
- a worker-pool class, which hands out the workers with an attached
callback to re-queue them to the &quot;available-pool&quot;

My problem:
- the connection between the queue and the worker-pool and integrating
this into the main reactor-loop

My first thought was a twisted.internet.task.LoopingCall, trying to get
a worker and on success giving it a task, but that's not very
asynchronous, isn't it? Especially no when the queue is empty.

I've no clue how to implement this.

I've read something about producer-consumer in twisted, but the
documentation here is very rare and I think it's not what I'm looking for.


Can someone please give me a hint, if twisted offers some techniques to
implement this, or point me in the right direction?


Thanks
Patrick


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="050045.html">[Twisted-Python] Re: Howto: use Trial to unit test an XML-RPC server
</A></li>
	<LI>Next message (by thread): <A HREF="050028.html">[Twisted-Python] feeding-worker-loop problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50027">[ date ]</a>
              <a href="thread.html#50027">[ thread ]</a>
              <a href="subject.html#50027">[ subject ]</a>
              <a href="author.html#50027">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
