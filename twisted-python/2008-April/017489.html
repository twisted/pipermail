<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] My memory leak, diagnosed
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20My%20memory%20leak%2C%20diagnosed&In-Reply-To=76FBA9D6-6663-41C1-9CBF-65E24520C4B3%40madebykite.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017481.html">
   <LINK REL="Next"  HREF="017484.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] My memory leak, diagnosed</H1>
    <B>glyph at divmod.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20My%20memory%20leak%2C%20diagnosed&In-Reply-To=76FBA9D6-6663-41C1-9CBF-65E24520C4B3%40madebykite.com"
       TITLE="[Twisted-Python] My memory leak, diagnosed">glyph at divmod.com
       </A><BR>
    <I>Thu Apr 17 10:13:06 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017481.html">[Twisted-Python] My memory leak, diagnosed
</A></li>
        <LI>Next message: <A HREF="017484.html">[Twisted-Python] Twisted Advice
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17489">[ date ]</a>
              <a href="thread.html#17489">[ thread ]</a>
              <a href="subject.html#17489">[ subject ]</a>
              <a href="author.html#17489">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 08:58 am, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">matt at madebykite.com</A> wrote:
&gt;<i>I just wanted to put your minds at rest regarding what I though might 
</I>&gt;<i>have been a problem with the epoll reactor. As always, inferring 
</I>&gt;<i>anything from a production machine is not desirable and it seems that 
</I>&gt;<i>my assumptions about epoll were based on coincidence.
</I>
Thanks for the thorough diagnosis and detailed ticket!  And I'm glad to 
hear the issue is not with epoll, I'd like our users to be able to rest 
easy when upgrading to a &quot;good&quot; reactor :).  While twisted.web.proxy 
should really work well, I'm a bit less concerned to hear that it might 
have some issues.  Especially if you're planning on fixing them.

Looking at the ticket, though, it appears that web.proxy might be okay 
too, and the memory growth is just the process reaching its natural 
equilibrium, or the source is somewhere else?
&gt;<i>Unfortunately, my workaround involved rewriting my proxy code without 
</I>&gt;<i>using twistd.web. I'll happily contribute a patch back to the 
</I>&gt;<i>t.w.proxy code in time but for the moment it doesn't support 
</I>&gt;<i>persistent connections (I wanted to keep it simple). I also feel that 
</I>&gt;<i>t.w.proxy would be better served by making use of a reciprocal 
</I>&gt;<i>IProducer / IConsumer arrangement between the ProxyServer protocol  and 
</I>&gt;<i>the ProxyClient protocol which is something that my workaround  does 
</I>&gt;<i>not implement.
</I>
Not implementing IProducer/IConsumer will, ironically, lead to more 
memory consumption in the long term, since the producer will overload 
the consumer's buffer if the consumer's not fast enough.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017481.html">[Twisted-Python] My memory leak, diagnosed
</A></li>
	<LI>Next message: <A HREF="017484.html">[Twisted-Python] Twisted Advice
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17489">[ date ]</a>
              <a href="thread.html#17489">[ thread ]</a>
              <a href="subject.html#17489">[ subject ]</a>
              <a href="author.html#17489">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
