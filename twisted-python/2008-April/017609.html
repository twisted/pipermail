<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Aplication process uid/gid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Aplication%20process%20uid/gid&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017604.html">
   <LINK REL="Next"  HREF="017610.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Aplication process uid/gid</H1>
    <B>Miguel Filho</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Aplication%20process%20uid/gid&In-Reply-To="
       TITLE="[Twisted-Python] Aplication process uid/gid">miguel.filho at gmail.com
       </A><BR>
    <I>Mon Apr 28 08:38:00 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017604.html">[Twisted-Python] Fwd: Athena onbeforeunload ?
</A></li>
        <LI>Next message: <A HREF="017610.html">[Twisted-Python] Aplication process uid/gid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17609">[ date ]</a>
              <a href="thread.html#17609">[ thread ]</a>
              <a href="subject.html#17609">[ subject ]</a>
              <a href="author.html#17609">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello list,

The code:
===============================
import pwd
from apolicy.config import config
...
from twisted.protocols import basic
from twisted.internet import reactor, protocol, task
from twisted.application import internet, service
...
user = pwd.getpwnam(config.get(&quot;main&quot;,&quot;user&quot;))
application = service.Application('apolicy', uid=user[2], gid=user[3])
serviceCollection = service.IServiceCollection(application)

address, port = config.get(&quot;main&quot;, &quot;listen&quot;).split(&quot;:&quot;)

internet.TCPServer(int(port), ACLPolicyDaemonFactory(),
interface=address).setServiceParent(serviceCollection)
===============================

I'm using twistd to start my daemon, the process starts normally and
the owner is the user nobody.

# ps uaxf | grep nobody
nobody   29052  0.1  0.6  13140  6440 ?        S    09:11   0:01
/usr/bin/python /usr/bin/twistd -y
/usr/lib/python2.4/site-packages/apolicy/server.py -q --logfile
/var/log/twistd.log --pidfile=/var/run/twistd.pid

My class ACLPolicyDaemonFactory() tries to write a file to test if the
path given to my application is writable and has no problems, but the
file is created as root. What is the point where the process is
already running as nobody?

Regards,

Miguel


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017604.html">[Twisted-Python] Fwd: Athena onbeforeunload ?
</A></li>
	<LI>Next message: <A HREF="017610.html">[Twisted-Python] Aplication process uid/gid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17609">[ date ]</a>
              <a href="thread.html#17609">[ thread ]</a>
              <a href="subject.html#17609">[ subject ]</a>
              <a href="author.html#17609">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
