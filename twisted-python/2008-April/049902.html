<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] how to depend (in a setuptools sense) upon Twisted?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20how%20to%20depend%20%28in%20a%20setuptools%20sense%29%20upon%20Twisted%3F&In-Reply-To=%3C20080410125724.5d3bdd43%40fluxx.allmydata.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="049906.html">
   <LINK REL="Next"  HREF="049903.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] how to depend (in a setuptools sense) upon Twisted?</H1>
    <B>Brian Warner</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20how%20to%20depend%20%28in%20a%20setuptools%20sense%29%20upon%20Twisted%3F&In-Reply-To=%3C20080410125724.5d3bdd43%40fluxx.allmydata.com%3E"
       TITLE="[Twisted-Python] how to depend (in a setuptools sense) upon Twisted?">warner at lothar.com
       </A><BR>
    <I>Thu Apr 10 13:57:24 MDT 2008</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="049906.html">[Twisted-Python] Problems with trial in 8.0.1
</A></li>
        <LI>Next message (by thread): <A HREF="049903.html">[Twisted-Python] how to depend (in a setuptools sense) upon	Twisted?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49902">[ date ]</a>
              <a href="thread.html#49902">[ thread ]</a>
              <a href="subject.html#49902">[ subject ]</a>
              <a href="author.html#49902">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We've hit a problem in the Tahoe packaging scheme: we kind of want to use the
setuptools install_requires= feature to declare that Tahoe depends upon
Twisted (as well as other things). This allows someone to type &quot;easy_install
allmydata-tahoe&quot; and get everything built for them. It also allows our build
process to download and build anything that the user doesn't already have on
their system, making the build process much easier.

The trouble that we've run into is that various flavors of linux have made
different decisions about which setuptools &quot;distribution&quot; names to use. (Note
that these &quot;distribution names&quot; are the name= arguments to setup(), as
opposed to the python package names like or module names. Distribution names
tend to map to debian package names.)

<A HREF="http://allmydata.org/trac/tahoe/ticket/378">http://allmydata.org/trac/tahoe/ticket/378</A> has more details, but basically
Ubuntu is shipping .egg_info data that declares that the &quot;Twisted&quot;
distribution is installed, whereas debian sid is shipping data that says
&quot;Twisted-Core&quot; is installed. Since the setuptools dependency syntax is not
rich enough to provide alternatives, the Tahoe setup.py is forced to choose
between depending upon &quot;Twisted&quot; or upon &quot;Twisted-Core&quot;.

The drawback for choosing the opposite of the target platform is that users
on that platform will find their tahoe builds downloading and building the
whole Twisted-8.0.1 tarball, despite having a perfectly functional
twisted-2.5.0 installation already present. This is annoying.

We haven't figured out a good resolution to this problem yet. The best answer
I can think of would be to change the tahoe setup.py script to change the
dependencies that it declares based upon what is currently installed. This
would be a bit wonky but might avoid spurious download+builds. Another answer
might be for the debian 'python-twisted' metapackage (which depends upon
python-twisted-core, python-twisted-web, etc) to provide an .egg-info that
claims to represent the 'Twisted' distribution, but I can imagine problems
with that. Another possibility would be for the Ubuntu python-twisted-core
package to install two .egg-info files, the one for 'Twisted' that they're
already doing, and another for 'Twisted-Core'.. if that were the case, we
could have Tahoe depend upon 'Twisted-Core ' and 'Twisted-Web' and be done
with it.

So, no answers, but we're bringing up the issue in case anyone else has run
into a similar problem, or has some bright ideas on the subject.

cheers,
 -Brian


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="049906.html">[Twisted-Python] Problems with trial in 8.0.1
</A></li>
	<LI>Next message (by thread): <A HREF="049903.html">[Twisted-Python] how to depend (in a setuptools sense) upon	Twisted?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49902">[ date ]</a>
              <a href="thread.html#49902">[ thread ]</a>
              <a href="subject.html#49902">[ subject ]</a>
              <a href="author.html#49902">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
