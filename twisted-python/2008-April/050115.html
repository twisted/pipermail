<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] [RFC] Deprecation Policy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%5BRFC%5D%20Deprecation%20Policy&In-Reply-To=%3Cd06a5cd30804280036v2a7af29esf7ca18b0e54752f6%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="050114.html">
   <LINK REL="Next"  HREF="050116.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] [RFC] Deprecation Policy</H1>
    <B>Jonathan Lange</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%5BRFC%5D%20Deprecation%20Policy&In-Reply-To=%3Cd06a5cd30804280036v2a7af29esf7ca18b0e54752f6%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] [RFC] Deprecation Policy">jml at mumak.net
       </A><BR>
    <I>Mon Apr 28 01:36:00 MDT 2008</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="050114.html">[Twisted-Python] [RFC] Deprecation Policy
</A></li>
        <LI>Next message (by thread): <A HREF="050116.html">[Twisted-Python] [RFC] Deprecation Policy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50115">[ date ]</a>
              <a href="thread.html#50115">[ thread ]</a>
              <a href="subject.html#50115">[ subject ]</a>
              <a href="author.html#50115">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Apr 28, 2008 at 4:50 PM,  &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at divmod.com</A>&gt; wrote:
&gt;<i> On 18 Apr, 05:06 am, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jml at mumak.net</A> wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Hello everyone,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Now that the release is out[1], I'd like to start work on fixing #1216
</I>&gt;<i> &gt; -- official deprecation policy.
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>  Sorry for the delay.  Due to a miscommunication, I thought that Chris would
</I>&gt;<i> be the one writing up our meeting notes and announcing this. After I
</I>&gt;<i> realized I was the one who was supposed to be doing it, I wanted to write up
</I>&gt;<i> something official-sounding on the wiki first, but of course, there's never
</I>&gt;<i> enough time.  So here's a rough cut at the policy that we (the current &quot;TSF
</I>&gt;<i> board&quot;, such as it is: chris, me, JP, and itamar) agreed on at the sprint in
</I>&gt;<i> Cambridge.
</I>&gt;<i>
</I>&gt;<i>  Thanks, Jonathan, for motivating this; we've needed a clear statement for a
</I>&gt;<i> long time.  Someone (and this will probably be me) needs to make a complete
</I>&gt;<i> and unambiguous index of official Twisted policy and put it together
</I>&gt;<i> somewhere, probably on the wiki, at least at first.
</I>&gt;<i>
</I>
I'm glad I could help and I'm glad that this is being worked on.

Although I'm happy to leave the decision in your hands, there are a
couple of things I'd like to comment on (disagree with).

Also, I'd be happy to start the work of collating policy.

&gt;<i>
</I>&gt;<i> &gt; - Is it time-based or release-based?
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>  Both.  There will be a minimum amount of time and a minimum number of
</I>&gt;<i> releases before a deprecated feature may be removed.
</I>&gt;<i>
</I>
I dislike this. I think that deprecations should be release-based and
that we should commit to time-based releases. I think this is simpler
for users and for developers.

This complaint would be largely solved by automation.

&gt;<i> &gt; - How long for?
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>  Every deprecation must last for a minimum of 2 releases and a minimum of
</I>&gt;<i> one year.  Of course, anyone who wants to keep maintaining deprecated APIs
</I>&gt;<i> for longer than that may do so.
</I>&gt;<i>
</I>
Presumably the timer starts at a release and only increments at a release?

So, for example:

T - 1 month: deprecate feature in trunk
T: Release N
T + 7 months: Release N+1
T + 14 months: Release N+2, feature removed.

Is this understanding correct?

(The fact that I need to ask is largely why I don't like &quot;both time &amp;
release based&quot;.)

&gt;<i>  I know this is somewhat longer than you've suggested, but at the meeting we
</I>&gt;<i> ran down a laundry list of real-world usages of Twisted and pretty much
</I>&gt;<i> nobody upgrades Twisted more than once per year.
</I>
I think the data on this is skewed, since there was about a 1.4 year
gap between the last 2 releases of Twisted. If we released each month,
I can imagine this would change.

Nevertheless, I'm content with this sort of time frame for now, as
long as the support for it is well automated.

&gt;<i>  The idea behind using PendingDeprecationWarning is that *users* of a piece
</I>&gt;<i> of software which depends on Twisted should, in principle, be able to
</I>&gt;<i> upgrade Twisted by one version without seeing any error output.
</I>
I think that this is a nice feature, but not worth breaking our backs
over. (It might be really easy to do though).

&gt;<i> However,
</I>&gt;<i> *maintainers* of that software should immediately see all the warnings when
</I>&gt;<i> they test with a new release.  Trial should change to show all
</I>&gt;<i> PendingDeprecationWarnings by default.  However, this might be impractical
</I>&gt;<i> due to other uses of PendingDeprecationWarning - if that is the case,
</I>&gt;<i> Twisted should include its own warning class.  It may be helpful to do that
</I>&gt;<i> in order to include the additional metadata required for an automated
</I>&gt;<i> deprecation workflow, however.  The desired deprecation workflow is:
</I>&gt;<i>
</I>&gt;<i>   * Twisted developer deprecates functionality, by adding a
</I>&gt;<i> warnings.warn(TwistedDeprecationWarning(some useful metadata)) to the code.
</I>&gt;<i>
</I>
I disagree very strongly on this detail. The deprecation API should be
higher level than that.

Specifically, even we implement it with the warnings system, I don't
think we should litter that decision all over our code base.

&gt;<i>  An obvious remaining piece of work to implement this final policy is to
</I>&gt;<i> define some temporary manual things that we can do until such a tool is
</I>&gt;<i> implemented, and implement the tool itself as soon as possible.  I don't
</I>&gt;<i> believe any tickets have yet been filed for this, and *that* I am leaving in
</I>&gt;<i> our venerable release manager's court, since this is all a part of the
</I>&gt;<i> release process except for the fairly minor change to trial.
</I>&gt;<i>
</I>
I think this is wasted effort. Let's just build the damn tool.

&gt;<i> &gt; - Which code is subject to this policy?
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>  All Python code released in Twisted, with the exceptions of private modules
</I>&gt;<i> and test modules.
</I>&gt;<i>
</I>
What about code currently marked as deprecated?

&gt;<i>  There's obviously some work to do here to make this policy easy and
</I>&gt;<i> convenient to follow.  This needs to be edited, CompatibilityPolicy updated,
</I>&gt;<i> and prominently linked.  We need someone to write up at least two different
</I>&gt;<i> summaries: one for maintainers of projects using Twisted (&quot;What kind of
</I>&gt;<i> compatibility should I expect from Twisted releases?&quot;) one for Twisted
</I>&gt;<i> contributors (&quot;How do I add a deprecation?  When can I remove it?&quot;) and
</I>&gt;<i> maybe one for users and one for packagers, too.  We need some tools to help
</I>&gt;<i> us update deprecations.  We need trial to change so that developers are
</I>&gt;<i> notified earlier than their users.
</I>&gt;<i>
</I>&gt;<i>  Do I hear any volunteers...? :)
</I>&gt;<i>
</I>
Me. I wouldn't have raised the issue if I wasn't willing.

jml


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="050114.html">[Twisted-Python] [RFC] Deprecation Policy
</A></li>
	<LI>Next message (by thread): <A HREF="050116.html">[Twisted-Python] [RFC] Deprecation Policy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50115">[ date ]</a>
              <a href="thread.html#50115">[ thread ]</a>
              <a href="subject.html#50115">[ subject ]</a>
              <a href="author.html#50115">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
