<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Question on push/pull producers inter-workings, 	was : &quot;Is there a simple Producer/Consumer example or tutorial?&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Question%20on%20push/pull%20producers%20inter-workings%2C%20%0A%09was%20%3A%20%22Is%20there%20a%20simple%20Producer/Consumer%20example%20or%20tutorial%3F%22&In-Reply-To=20080419133355.6859.1386718943.divmod.quotient.32196%40ohm">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017521.html">
   <LINK REL="Next"  HREF="017532.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Question on push/pull producers inter-workings, 	was : &quot;Is there a simple Producer/Consumer example or tutorial?&quot;</H1>
    <B>Gabriel Rossetti</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Question%20on%20push/pull%20producers%20inter-workings%2C%20%0A%09was%20%3A%20%22Is%20there%20a%20simple%20Producer/Consumer%20example%20or%20tutorial%3F%22&In-Reply-To=20080419133355.6859.1386718943.divmod.quotient.32196%40ohm"
       TITLE="[Twisted-Python] Question on push/pull producers inter-workings, 	was : &quot;Is there a simple Producer/Consumer example or tutorial?&quot;">mailing_lists at evotex.ch
       </A><BR>
    <I>Mon Apr 21 03:52:56 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017521.html">[Twisted-Python] Question on push/pull producers inter-workings, 	was : &quot;Is there a simple Producer/Consumer example or tutorial?&quot;
</A></li>
        <LI>Next message: <A HREF="017532.html">[Twisted-Python] Question on push/pull producers inter-workings, 	was : &quot;Is there a simple Producer/Consumer example or tutorial?&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17530">[ date ]</a>
              <a href="thread.html#17530">[ thread ]</a>
              <a href="subject.html#17530">[ subject ]</a>
              <a href="author.html#17530">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jean-Paul Calderone wrote:
&gt;<i> On Fri, 18 Apr 2008 09:57:35 +0200, Gabriel Rossetti 
</I>&gt;<i> &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mailing_lists at evotex.ch</A>&gt; wrote:
</I>&gt;&gt;<i> Hello everyone,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I am re-posting these questions with a different title, since they 
</I>&gt;&gt;<i> have ventured away from the original question
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have a question though, I was looking at the way all this works by 
</I>&gt;&gt;<i> using a debugger, and I noticed that in twisted.internet.abstract.py 
</I>&gt;&gt;<i> in registerProducer() there is the following :
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> if not streaming:
</I>&gt;&gt;<i>   producer.resumeProducing()
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Why is this done only for the pull producer? Shouldn't it also be 
</I>&gt;&gt;<i> called for the push producer since to have the data sent one has to 
</I>&gt;&gt;<i> call either self.transport.write() or resumeProducing() anyways? If 
</I>&gt;&gt;<i> you look at :
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://itamarst.org/writings/OSCON03/twisted_internet-112.html">http://itamarst.org/writings/OSCON03/twisted_internet-112.html</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> it does :
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> transport.registerProducer(self, 1)
</I>&gt;&gt;<i>       self.produce()
</I>&gt;<i>
</I>&gt;<i> So, this is a streaming producer.  It starts producing right away without
</I>&gt;<i> having resumeProducing called on it.
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> thus starting the writing process and in the pull producer :
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://itamarst.org/writings/OSCON03/twisted_internet-111.html">http://itamarst.org/writings/OSCON03/twisted_internet-111.html</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> it doesn't need to start the writing process explicitly since it's 
</I>&gt;&gt;<i> started when the producer is registered.
</I>&gt;<i>
</I>&gt;<i> This is a non-streaming producer.  It doesn't do anything until something
</I>&gt;<i> calls resumeProducing on it.
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Oh, and also, since from what I see in the code the only difference 
</I>&gt;&gt;<i> with a push and pull producer is that the push producer is paused if 
</I>&gt;&gt;<i> the data being written/sent is very large (to let the reactor breath 
</I>&gt;&gt;<i> and process other things), if it isn't larger than the buffer it 
</I>&gt;&gt;<i> behaves like a pull producer, correct? If so, then why have both? Am 
</I>&gt;&gt;<i> I mixed up again?
</I>&gt;<i>
</I>&gt;<i> As you say, they behave differently when there is a large amount of data.
</I>&gt;<i> However, this is more about the source of the data than where it ends up.
</I>&gt;<i> For example, if you have a large string and you want to producer it to a
</I>&gt;<i> transport, you probably want a pull producer, because there's no events
</I>&gt;<i> which will signal that you can send some more of the string *except* for
</I>&gt;<i> the reactor deciding that it is ready for some more.  
</I>What exactly do you mean by :

&quot;there's no events which will signal that you can send some more of the 
string *except* for
the reactor deciding that it is ready for some more&quot;?

When I looked at Twisted's code, the difference that I saw was that if a 
push producer is used, and if the data to be sent is bigger than a 
certain length, it calls producer.pauseProducing()

&gt;<i> So that's how you
</I>&gt;<i> should decide which of these you want to write - if the consumer is the
</I>&gt;<i> only event source involved, as in the large string case, then you want a
</I>&gt;<i> pull producer (streaming = False); 
</I>How can the consumer be an event source? The producer is the one sending 
the data, maybe I don't get what you mean by &quot;event source&quot;.
&gt;<i> if the producer itself is event-driven
</I>&gt;<i> in its ability to provide data, then you want a push producer.
</I>&gt;<i>
</I>&gt;<i> Jean-Paul
</I>I thought the push producer worked like this : if the data is too big, 
send part of it and pause the rest, let the reactor breath some, and 
repeat. I thought the pull producer was basically like if no producer 
was used, one has to take care of any data splitting and send small 
parts when the consumer is ready. Is this not correct?

Gabriel


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017521.html">[Twisted-Python] Question on push/pull producers inter-workings, 	was : &quot;Is there a simple Producer/Consumer example or tutorial?&quot;
</A></li>
	<LI>Next message: <A HREF="017532.html">[Twisted-Python] Question on push/pull producers inter-workings, 	was : &quot;Is there a simple Producer/Consumer example or tutorial?&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17530">[ date ]</a>
              <a href="thread.html#17530">[ thread ]</a>
              <a href="subject.html#17530">[ subject ]</a>
              <a href="author.html#17530">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
