<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: Other ways to integrate foreign event loops?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%3A%20Other%20ways%20to%20integrate%20foreign%20event%20loops%3F&In-Reply-To=%3C1207270905.6244.79.camel%40ghtmyth.hq.tarbox.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="049829.html">
   <LINK REL="Next"  HREF="017267.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: Other ways to integrate foreign event loops?</H1>
    <B>Glenn H Tarbox, PhD</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%3A%20Other%20ways%20to%20integrate%20foreign%20event%20loops%3F&In-Reply-To=%3C1207270905.6244.79.camel%40ghtmyth.hq.tarbox.org%3E"
       TITLE="[Twisted-Python] Re: Other ways to integrate foreign event loops?">glenn at tarbox.org
       </A><BR>
    <I>Thu Apr  3 19:01:45 MDT 2008</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="049829.html">[Twisted-Python] Re: Other ways to integrate foreign event loops?
</A></li>
        <LI>Next message (by thread): <A HREF="017267.html">[Twisted-Python] win32 reactors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49830">[ date ]</a>
              <a href="thread.html#49830">[ thread ]</a>
              <a href="subject.html#49830">[ subject ]</a>
              <a href="author.html#49830">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The Qt reactor, <A HREF="http://code.tarbox.org/qtreactor,">http://code.tarbox.org/qtreactor,</A> inverts the
&quot;ownership&quot; of the callback loop as well.  However, Qt provides well
behaved callbacks for timers as well as socket activity so the reactor
behaves properly.  

The qt reactor design allows for the conventional reactor.run() at the
end of the script as well as a call to reactor.runReturn() which starts
up the reactor, nails up the timers and socket IO but returns to the
calling application.  Hence, you can startup twisted sometime after your
gui app is running.  Obviously, you need to &quot;behave&quot; properly and make
sure that any user code doesn't hang onto the thread but this is
required for proper gui handling code anyway...

Twisted's current wx reactor uses another thread due to difficulties
experienced with an earlier version of wx not behaving well.  There are
complexities WRT integrating those threads which lie at the heart of the
testing failures for the current wx reactor.  It might be easy to fix...

However, I've been thinking about taking the qtreactor approach and (re)
trying to fix the wx reactor by first evaluating whether wx is &quot;better
behaved&quot;.  If it isn't, perhaps its straightforward to fix wx (???)

Thing is, once you get the logic down... and (I think) its all correct
in the qtreactor, it should be straightforward to use the wx calls to
get servicing for timing and socket IO.

-glenn


On Thu, 2008-04-03 at 17:35 -0500, Jean-Paul Calderone wrote:
&gt;<i> On Thu, 03 Apr 2008 15:35:36 -0400, David Bolen &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">db3l.net at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; [snip]
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;In our case, with wxPython based applications, things worked great
</I>&gt;<i> &gt;just having wxPython handle a timer that triggered reactor iterations.
</I>&gt;<i> &gt;It involved:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;* During initialization, start reactor with reactor.startRunning()
</I>&gt;<i> &gt;* At some periodic frequency, run reactor.iterate(0)
</I>&gt;<i> &gt;* During termination, set up a reactor.callLater for reactor.stop, and
</I>&gt;<i> &gt;  then call reactor.mainLoop().  This was the cleanest way we found to
</I>&gt;<i> &gt;  permit all reactor finalization (events, final I/O, etc...).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Note that the first point violates the IReactorCore interface
</I>&gt;<i> 
</I>&gt;<i> Let me emphasize this.  The above relies on implementation details and may
</I>&gt;<i> be broken by any subsequent release (assuming it works now, which I won't
</I>&gt;<i> comment on).
</I>&gt;<i> 
</I>&gt;<i> Jean-Paul
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>-- 
Glenn H. Tarbox, PhD    | Don’t worry about people stealing your ideas. If your ideas
206-494-0819            | are any good, you’ll have to ram them down people’s throats
<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glenn at tarbox.org</A> (gtalk) + ghtdak on aim/freenode     | ^ Howard Aiken, IBM engineer




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="049829.html">[Twisted-Python] Re: Other ways to integrate foreign event loops?
</A></li>
	<LI>Next message (by thread): <A HREF="017267.html">[Twisted-Python] win32 reactors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49830">[ date ]</a>
              <a href="thread.html#49830">[ thread ]</a>
              <a href="subject.html#49830">[ subject ]</a>
              <a href="author.html#49830">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
