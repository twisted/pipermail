<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] failures, errbacks and exception handling
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20failures%2C%20errbacks%20and%20exception%20handling&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017382.html">
   <LINK REL="Next"  HREF="017376.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] failures, errbacks and exception handling</H1>
    <B>Atilla</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20failures%2C%20errbacks%20and%20exception%20handling&In-Reply-To="
       TITLE="[Twisted-Python] failures, errbacks and exception handling">theatilla at gmail.com
       </A><BR>
    <I>Tue Apr  8 14:40:17 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017382.html">[Twisted-Python] Problem with unittesting HTTP POST resource
</A></li>
        <LI>Next message: <A HREF="017376.html">[Twisted-Python] failures, errbacks and exception handling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17375">[ date ]</a>
              <a href="thread.html#17375">[ thread ]</a>
              <a href="subject.html#17375">[ subject ]</a>
              <a href="author.html#17375">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Im a little confused when it comes to handling some errors in twisted.
More specifically - when it comes to processing failures that are
raised in adbapi.

Now - when runInteraction succeeds, all is ok and things are commited,
that's nice and clean. When it raises an error, I can do two things -
either wrap my calls inside the callable passes to runInteraction in
Try:Except, or attach an errback.

I'm not exactly sure which one to take. I only need to catch specific
exceptions - Mysql OperationalError (timeouts and such, in case I want
to retry). Everything else is critical and should log &amp; abort.

The way I understood it, I should attach an errback where I call
trap() on the passed Failure. So I'd do like

handleError(falure):
  error = failure.trap(OperationalError)
  if error:
    log.err(error)

myCall.addErrback(handleError)

As far as I get it, if the error is different (say, syntax one) it'll
be propagated. However afteri add the trap call() nothing else gets
past that handleError, no Unhandled Errors are logged, and my error
object contains nothing. I wonder what am I missing here.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017382.html">[Twisted-Python] Problem with unittesting HTTP POST resource
</A></li>
	<LI>Next message: <A HREF="017376.html">[Twisted-Python] failures, errbacks and exception handling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17375">[ date ]</a>
              <a href="thread.html#17375">[ thread ]</a>
              <a href="subject.html#17375">[ subject ]</a>
              <a href="author.html#17375">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
