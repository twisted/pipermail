<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] woven-bug: multiple nodes using the same model
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20woven-bug%3A%20multiple%20nodes%20using%20the%20same%20model&In-Reply-To=%3C20021009143243.GA21447%40soniq.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="034390.html">
   <LINK REL="Next"  HREF="034377.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] woven-bug: multiple nodes using the same model</H1>
    <B>Paul Boehm</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20woven-bug%3A%20multiple%20nodes%20using%20the%20same%20model&In-Reply-To=%3C20021009143243.GA21447%40soniq.net%3E"
       TITLE="[Twisted-Python] woven-bug: multiple nodes using the same model">typo at soniq.net
       </A><BR>
    <I>Wed Oct  9 08:32:43 MDT 2002</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="034390.html">[Twisted-Python] web.static &amp; woven.widgets patches
</A></li>
        <LI>Next message (by thread): <A HREF="034377.html">[Twisted-Python] woven-bug: multiple nodes using the same model
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34376">[ date ]</a>
              <a href="thread.html#34376">[ thread ]</a>
              <a href="subject.html#34376">[ subject ]</a>
              <a href="author.html#34376">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>when a controller and a widget have the same model, this leads to
lots of weird inconsistencies.

i use this template:

        &lt;form action=&quot;&quot; name=&quot;addserver&quot; model=&quot;listall&quot; controller=&quot;addserver&quot;&gt;
            Host:
            &lt;input type=&quot;text&quot; name=&quot;host&quot; /&gt;
            Port:
            &lt;input type=&quot;text&quot; name=&quot;port&quot; /&gt;
            &lt;input type=&quot;submit&quot; value=&quot;Add&quot; /&gt;
        &lt;/form&gt;

        &lt;form action=&quot;&quot;&gt;
            &lt;span class=&quot;heading&quot;&gt;All Servers:&lt;/span&gt;
            &lt;ul model=&quot;listall&quot; view=&quot;List&quot;&gt;
                &lt;li id=&quot;emptyList&quot;&gt;No Servers defined&lt;/li&gt;
                &lt;li id=&quot;listItem&quot;&gt;
                    &lt;span view=&quot;Text&quot; model=&quot;0&quot; /&gt;
                    &lt;span view=&quot;Text&quot; model=&quot;1&quot; /&gt;
                    &lt;span view=&quot;CheckBox&quot; model=&quot;2&quot; value=&quot;1&quot; /&gt;
                    &lt;span view=&quot;CheckBox&quot; model=&quot;3&quot; value=&quot;1&quot; /&gt;
                &lt;/li&gt;
            &lt;/ul&gt;
            &lt;input type=&quot;submit&quot; /&gt;
        &lt;/form&gt;

This results in two calls to widgets.List.generateDOM, which produces
inconsistencies. 

I'm not sure which code is at fault, but List at least produces a wrong 
_submodel_prefix. Because of this i modified List to reset the Attribute
on every call:

#            domhelpers.superAppendAttribute(newNode, '_submodel_prefix',
#                                            submodel)
            domhelpers.superSetAttribute(newNode, '_submodel_prefix',
                                            submodel)
            domhelpers.superAppendAttribute(newNode, '_submodel_prefix',
                                            str(itemNum))

This fixes the wrong _submodel_prefix, but the List view still lags behind
one added element per submit. after a normal reload all the data is displayed
correctly.

Also all listitems get displayed with the same value every time after
submitting.

when i reload with a failing Handler.check, i get the right values, though.

i'm trying to debug this right now, but some help from someone with a
better understanding of woven's internals would be really helpful.

  paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="034390.html">[Twisted-Python] web.static &amp; woven.widgets patches
</A></li>
	<LI>Next message (by thread): <A HREF="034377.html">[Twisted-Python] woven-bug: multiple nodes using the same model
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34376">[ date ]</a>
              <a href="thread.html#34376">[ thread ]</a>
              <a href="subject.html#34376">[ subject ]</a>
              <a href="author.html#34376">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
