<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Some comments on twisted.news
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Some%20comments%20on%20twisted.news&In-Reply-To=%3Cn2m-g.y98qpdnu.fsf%40morpheus.demon.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="034571.html">
   <LINK REL="Next"  HREF="034572.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Some comments on twisted.news</H1>
    <B>Paul Moore</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Some%20comments%20on%20twisted.news&In-Reply-To=%3Cn2m-g.y98qpdnu.fsf%40morpheus.demon.co.uk%3E"
       TITLE="[Twisted-Python] Some comments on twisted.news">lists at morpheus.demon.co.uk
       </A><BR>
    <I>Tue Oct 22 11:49:09 MDT 2002</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="034571.html">[Twisted-Python] Lampadas, the LDP document management system
</A></li>
        <LI>Next message (by thread): <A HREF="034572.html">[Twisted-Python] Some comments on twisted.news
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34569">[ date ]</a>
              <a href="thread.html#34569">[ thread ]</a>
              <a href="subject.html#34569">[ subject ]</a>
              <a href="author.html#34569">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I just set up a basic demo new server using twisted. Some initial comments:

1. It took me almost no time to put together a basic dummy NNTP
   server. Just create the backend, put a mktap driver in, and it's
   working.

2. There seems to be a problem with the server class. It translates
   \r\n.. to \r\n. in the data the backend supplies - this should be
   the other way round (it should be *doubling* the dots, so that they
   don't look like the end of data marker to the client).

3. It would be nice if the server handled the translation to CRLF, so
   that backends could return data with lines separated by \n, and the
   server class would convert that to \r\n. After all, \n is the
   &quot;normal&quot; end of line character internal to Python code, and \r\n is
   a feature of the NNTP protocol, so the protocol driver should be
   responsible for the conversion (IMHO). Of course, this is a
   behaviour change, which could break existing backends, so maybe
   it's not practical to make this change.

4. The implementation of STAT requests the article from the
   backend. This could be inefficient if getting the message ID is
   cheap, but getting the full article is expensive for a particular
   backend (it will be for me). In my partly-implemented NNTP server
   written in &quot;raw&quot; Python (before I found Twisted) I had a backend
   method getArticle(..., head=1, body=1) which was used to implement
   all of HEAD, BODY, ARTICLE and STAT, just by setting different
   values for the head and body parameters (so the backend could check
   for the case where neither was required, and act accordingly).

(2) is obviously fairly trivial. I think I could implement (3) and
(4), if it would be useful. I could submit a patch, which would alter
the server code and the 2 existing backends (I couldn't test the
database backend, as I don't have a database to test with, but I could
test the pickle-based code). Would this be helpful? Are there likely
to be 3rd party nntp backends which would be broken by such a change?

Paul.

-- 
This signature intentionally left blank


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="034571.html">[Twisted-Python] Lampadas, the LDP document management system
</A></li>
	<LI>Next message (by thread): <A HREF="034572.html">[Twisted-Python] Some comments on twisted.news
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34569">[ date ]</a>
              <a href="thread.html#34569">[ thread ]</a>
              <a href="subject.html#34569">[ subject ]</a>
              <a href="author.html#34569">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
