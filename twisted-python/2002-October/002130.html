<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] mktap web --index patch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20mktap%20web%20--index%20patch&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002128.html">
   <LINK REL="Next"  HREF="002131.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] mktap web --index patch</H1>
    <B>Mike Snitzer</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20mktap%20web%20--index%20patch&In-Reply-To="
       TITLE="[Twisted-Python] mktap web --index patch">mike.twisted at snitzer.net
       </A><BR>
    <I>Sun Oct 27 13:49:55 EST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="002128.html">[Twisted-Python] twisted/debian howto not avail?
</A></li>
        <LI>Next message: <A HREF="002131.html">[Twisted-Python] mktap web --index patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2130">[ date ]</a>
              <a href="thread.html#2130">[ thread ]</a>
              <a href="subject.html#2130">[ subject ]</a>
              <a href="author.html#2130">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>All,

It would appear that a twisted web server can't be easily configured
(via mktap web --index) to use both index.html _and_ index.php (or any
other combination) as directory indexes.

mktap2.1 web --help
...
  -i, --index=            Add the name of a file used to check for directory
                          indexes. [default: index, index.html]

SO.. I tried:
1) mktap2.1 web --path ~/public_html/ --index index.php 
and my php indexed directories work; but index.html indexed dirs do not

2) mktap2.1 web --path ~/public_html/ --index index.html,index.php
and get the mktap web usage

I've got to believe what I'm looking to do is something others would want
to be able to configure too.  However, the relevant twisted/tap/web.py
code will only allow the user to add a single directory index; pretty
strange limitation... 

Here's a patch to enable a user to specify multiple directory indexes to
the web server via mktap (i.e. like #2 above):

--- Twisted.orig/twisted/tap/web.py     Wed Oct 23 07:56:52 2002
+++ Twisted/twisted/tap/web.py  Sun Oct 27 13:35:34 2002
@@ -54,10 +54,11 @@
         self.opts['root'] = None
 
     def opt_index(self, indexName):
-        &quot;&quot;&quot;Add the name of a file used to check for directory indexes.
+        &quot;&quot;&quot;Add the name of a file(s) used to check for directory indexes.
         [default: index, index.html]
         &quot;&quot;&quot;
-        self.opts['indexes'].append(indexName)
+        for index in string.split(indexName,','):
+            self.opts['indexes'].append(index)
 
     opt_i = opt_index






</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002128.html">[Twisted-Python] twisted/debian howto not avail?
</A></li>
	<LI>Next message: <A HREF="002131.html">[Twisted-Python] mktap web --index patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2130">[ date ]</a>
              <a href="thread.html#2130">[ thread ]</a>
              <a href="subject.html#2130">[ subject ]</a>
              <a href="author.html#2130">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
