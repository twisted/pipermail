<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] addWriter
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20addWriter&In-Reply-To=%3C09328AED5429D311A3000008C7911B1011253705%40exanpmb1.arinc.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="034650.html">
   <LINK REL="Next"  HREF="034651.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] addWriter</H1>
    <B>Scherbina, Alexander (ASCHERBI)</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20addWriter&In-Reply-To=%3C09328AED5429D311A3000008C7911B1011253705%40exanpmb1.arinc.com%3E"
       TITLE="[Twisted-Python] addWriter">ASCHERBI at arinc.com
       </A><BR>
    <I>Tue Oct 29 17:00:27 MST 2002</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="034650.html">[Twisted-Python] crasher
</A></li>
        <LI>Next message (by thread): <A HREF="034651.html">[Twisted-Python] addWriter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2141">[ date ]</a>
              <a href="thread.html#2141">[ thread ]</a>
              <a href="subject.html#2141">[ subject ]</a>
              <a href="author.html#2141">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Everyone!

I have a server that queues messages for clients.  The Queue object has a
callback from the ConnectionFactory, which deals with output formatting and
holds the Protocol object.  As soon as a client connects, the
ConnectionFactory peeks in the Queue for messages to be sent.  And if there
are any, it will send and dequeue and peek again until the Queue is
exhausted.   Once it's exhausted, the ConnectionFactory will be called
(using the callback) by the Queue when the next message is enqueued by the
Deliver module.

So far, this mechanism works well.  But one of its flaws is the partial
write situation.  If output buffer overflow occurred, I would like to
continue doing other things and get called back by the Reactor when the
socket is writable again.  Moreover, I would like to break the direct
association between the Queue and the ConnectionFactory.  

Instead, I would like to tie them through some kind of a notification
strategy (like in ACE), where my ConnectionFactory would be notifed by the
Reactor when the socket is writable, then the ConnectionFactory could peek,
send, dequeue and wait for the next notification.

I thought, addWriter/doWrite is what I need to use.  When I used them, my
ConnectionFactory's doWrite was never called after a client connected.

Is addWriter/doWrite approach correct?  Or am I going in a totally wrong
direction?  Please, help, if you can.

Thank you,
Alex Scherbina


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="034650.html">[Twisted-Python] crasher
</A></li>
	<LI>Next message (by thread): <A HREF="034651.html">[Twisted-Python] addWriter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2141">[ date ]</a>
              <a href="thread.html#2141">[ thread ]</a>
              <a href="subject.html#2141">[ subject ]</a>
              <a href="author.html#2141">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
