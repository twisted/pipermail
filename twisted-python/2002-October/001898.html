<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted.persisted.journal: a prevayler-inspired persistence system
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted.persisted.journal%3A%20a%20prevayler-inspired%20persistence%20system&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001897.html">
   <LINK REL="Next"  HREF="001901.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted.persisted.journal: a prevayler-inspired persistence system</H1>
    <B>Itamar Shtull-Trauring</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted.persisted.journal%3A%20a%20prevayler-inspired%20persistence%20system&In-Reply-To="
       TITLE="[Twisted-Python] twisted.persisted.journal: a prevayler-inspired persistence system">twisted at itamarst.org
       </A><BR>
    <I>Sat Oct 12 22:17:21 EDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="001897.html">[Twisted-Python] traceback?
</A></li>
        <LI>Next message: <A HREF="001901.html">[Twisted-Python] twisted.persisted.journal: a prevayler-inspired persistence system
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1898">[ date ]</a>
              <a href="thread.html#1898">[ thread ]</a>
              <a href="subject.html#1898">[ subject ]</a>
              <a href="author.html#1898">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've just checked in Journal, a persistence system inspired by Prevayler (<A HREF="http://www.prevayler.org">http://www.prevayler.org</A> for details). The idea is basically that all interactions with the system are done via serializable commands objects, which are logged *before* they execute. This allows us to keep down number of transactions in the system since in the worst case, the system can be restored by running the logged commands.

Additional benefits include being able to rerun sessions for testing performances, changing the internal data model is easy (just delete snapshot of system state and rerun all commands against new codebase), and so on.

This is an alternative to the immutable database model of keeping old versions of data - instead, we keep a log of all state changing commands (or even queries - useful for cases when you need to keep track of every read to the system).

The main difference from prevayler is flexibility - while I do support the &quot;everything in memory&quot; model, I also have code for using RDBMS for storage as well, using twisted.enterprise.row. In the future journal will support logging commands to a RDBMS as well, allowing you to easily gather statistics about everything that has ever been done to your system. The RDBMS code is untested.

Plugging the code into any persistence mechanism for snapshotting purposes should be possible, e.g. you could use ZODB as well. However some will be more suited than others - t.e.row is pretty good since it doesn't require a transaction for each command executed.

Example of using the system (with memory snapshotting and pickle based log):
<A HREF="http://www.twistedmatrix.com/users/jh.twistd/viewcvs/cgi/viewcvs.cgi/twisted/test/test_journal.py?rev=1.1&amp;content-type=text/vnd.viewcvs-markup&amp;cvsroot=Twisted">http://www.twistedmatrix.com/users/jh.twistd/viewcvs/cgi/viewcvs.cgi/twisted/test/test_journal.py?rev=1.1&amp;content-type=text/vnd.viewcvs-markup&amp;cvsroot=Twisted</A>

-- 
Itamar Shtull-Trauring    <A HREF="http://itamarst.org/">http://itamarst.org/</A>
Available for Python, Twisted, Zope and Java consulting


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001897.html">[Twisted-Python] traceback?
</A></li>
	<LI>Next message: <A HREF="001901.html">[Twisted-Python] twisted.persisted.journal: a prevayler-inspired persistence system
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1898">[ date ]</a>
              <a href="thread.html#1898">[ thread ]</a>
              <a href="subject.html#1898">[ subject ]</a>
              <a href="author.html#1898">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
