<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] enterprise.row and two-way relationships
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20enterprise.row%20and%20two-way%20relationships&In-Reply-To=HOEEKPCOKELHCNIJNMAGEEHDCHAA.sean%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002027.html">
   <LINK REL="Next"  HREF="002029.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] enterprise.row and two-way relationships</H1>
    <B>Justin Ryan</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20enterprise.row%20and%20two-way%20relationships&In-Reply-To=HOEEKPCOKELHCNIJNMAGEEHDCHAA.sean%40twistedmatrix.com"
       TITLE="[Twisted-Python] enterprise.row and two-way relationships">justin at gnubian.org
       </A><BR>
    <I>Sun Oct 20 17:31:51 EDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="002027.html">[Twisted-Python] enterprise.row and two-way relationships
</A></li>
        <LI>Next message: <A HREF="002029.html">[Twisted-Python] enterprise.row and two-way relationships
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2028">[ date ]</a>
              <a href="thread.html#2028">[ thread ]</a>
              <a href="subject.html#2028">[ subject ]</a>
              <a href="author.html#2028">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 2002-10-20 at 16:32, Sean Riley wrote:
&gt;<i> well, i can think of two ways - but neither are particularly good.
</I>
I was afraid of this :)

&gt;<i> You could create RowObject classes for each of the three tables - account,
</I>&gt;<i> contact, and rel  - and define foreign keys with the &quot;rowForeignKey&quot;
</I>&gt;<i> attributes between the tables.
</I>&gt;<i> 
</I>&gt;<i> Then use loadObjectsFrom to load objects from the rel table, and have those
</I>&gt;<i> &quot;relRow&quot; objects auto-load their children - which would be the rows from the
</I>&gt;<i> contacts table... This is not terribly efficient as it doesn't take
</I>&gt;<i> advantage of sql joins or set operations at all, but it should work.
</I>
this had occurred to me but I hoped there would be a better way..
 
&gt;<i> For the second way, create a view on the rel and contacts tables:
</I>&gt;<i> 
</I>&gt;<i> create view account_contacts as
</I>&gt;<i> select rel.account_id, contact.contact_id, contact.name
</I>&gt;<i> from contact, rel
</I>&gt;<i> where rel.contact_id = contact.contact_id;
</I>&gt;<i> 
</I>&gt;<i> and create a rowObjectClass for the view. This would allow the rows to be
</I>&gt;<i> loaded, but updates and inserts could be a problem. Some databases cant do
</I>&gt;<i> updates or inserts to views... Others require rules or triggers to do it.
</I>&gt;<i> 
</I>
hrm.. do you know if postgres can?  I spose i could find out fairly
easily :)

seems this would still require two queries in order to grab the account
name as well as the contact info, but is still more efficient than
making account and contact children of rel..

&gt;<i> Dealing with many-to-many relationships like this is really outside of the
</I>&gt;<i> immediate scope of the current row code. Its a pretty common problem though,
</I>&gt;<i> so it is a logical place for the next extensions.  I'm not yet sure how to
</I>&gt;<i> make a good interface for this. I am reluctant to introduce more rowClass
</I>&gt;<i> attributes without some better validation or generation scheme - it is
</I>&gt;<i> already tedious and error-prone enough to type in all the columns, types and
</I>&gt;<i> relationships.
</I>&gt;<i> 
</I>&gt;<i> An SQL parser may be one way. If there was some way to generate
</I>&gt;<i> rowObjectClasses for queries dynamically, with functionality similar to the
</I>&gt;<i> way cursors work, that would be a generally useful solution....
</I>&gt;<i> 
</I>&gt;<i> Any thoughts on extending the Row API are welcome :)
</I>
I may just poke around in the code and see what idears I can come up
with :)

Thanks!
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20021020/b375b01d/attachment.pgp">http://twistedmatrix.com/pipermail/twisted-python/attachments/20021020/b375b01d/attachment.pgp</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002027.html">[Twisted-Python] enterprise.row and two-way relationships
</A></li>
	<LI>Next message: <A HREF="002029.html">[Twisted-Python] enterprise.row and two-way relationships
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2028">[ date ]</a>
              <a href="thread.html#2028">[ thread ]</a>
              <a href="subject.html#2028">[ subject ]</a>
              <a href="author.html#2028">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
