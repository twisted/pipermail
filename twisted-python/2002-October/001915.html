<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] First impressions of Windows downlod
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20First%20impressions%20of%20Windows%20downlod&In-Reply-To=20021013.162312.111208639.glyph%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001914.html">
   <LINK REL="Next"  HREF="001917.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] First impressions of Windows downlod</H1>
    <B>Andy Robinson</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20First%20impressions%20of%20Windows%20downlod&In-Reply-To=20021013.162312.111208639.glyph%40twistedmatrix.com"
       TITLE="[Twisted-Python] First impressions of Windows downlod">andy at reportlab.com
       </A><BR>
    <I>Sun Oct 13 18:57:40 EDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="001914.html">[Twisted-Python] First impressions of Windows downlod
</A></li>
        <LI>Next message: <A HREF="001917.html">[Twisted-Python] First impressions of Windows downlod
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1915">[ date ]</a>
              <a href="thread.html#1915">[ thread ]</a>
              <a href="subject.html#1915">[ subject ]</a>
              <a href="author.html#1915">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'll try to help with any windows issues I can...ReportLab
are starting to face exactly the same things with packaging
up our commercial products, except we have not really braved
distutils yet. I can see from your setup script that you
have :-)  Nobody on the SIG ever answered any of my questions
so I guess I can learn from you here too...

&gt;<i> I don't understand Microsoft's &quot;DOS Shell&quot; scripting language too
</I>&gt;<i> well, but I
</I>&gt;<i> think &quot;execute&quot; means something misleading in this context,
</I>&gt;<i> i.e. &quot;double-click&quot;.  Since most of the Twisted main scripts
</I>&gt;<i> don't have a GUI,
</I>&gt;<i> when you &quot;run&quot; them in the explorer, a black DOS box comes up and
</I>&gt;<i> disappears.
</I>
Windows uses file extensions rather than marking scripts
executable, and things like &quot;#!/usr/bin/env python&quot; mean
nothing to it.

You can either type the command line in a DOS box, or double-click
it. If you double-click and a traceback occurs, you won't get to
read it.  It's pretty much understood that for things like web servers,
scripting languages and databases one has to use the DOS prompt
and there will be a bunch of commands to administer the server,
just like on Unix.  The DOS shell in Windows 2000 is very pleasant,
readline-ish, with auto-completion and a host of commands, and any Python
programmer will certainly be used to it.

&gt;<i> Is there some way to make it so that these commands are accessible via the
</I>&gt;<i> user's %PATH% at a DOS prompt, regardless of distutils?  The only
</I>&gt;<i> technique I've found involves Cygwin and that was pretty nasty.
</I>
Python is not on the path by default (but see 2 below). As I see it
you've got 3-4 choices on such scripts.
1. If the file has no extension, like your current scripts, you can
still execute it by doing
    python myscript
(assuming Python is on the path).  But it's not intuitive what to
do with a file that lacks an extension.

2. If the file ends in .py, then Windows knows it's a python script
as the .py extension was 'associated' with python.exe when Python
was installed.  You can then run by using its name:

C:\Python22\Lib\site-packages\twisted\scripts&gt;mktap.py web --path
c:\\code\\www_reportlab_com
Saving web application to web.tap...
Saved.

Just like Unix - well, nearly.

3. If a file ends in .bat you can execute it and it's assumed to
have Windows' fairly poor batch language.  There is a horrible
hack to hide Python scripts in batch files, but it's REALLY
horrible.  You could also make a batch file call a Python script,
but it's unusual and pointless since you need the Python script
anyway.

4. If you're devilishly cunning you can make 'stub EXEs', using
a partial binary, and they can be assembled on Unix.  Our commercial
download has a 'bin' directory containing a tiny 'rml2pdf.exe' which
just imports and runs the content of rlextra/rml2pdf/rml2pdf.py(c).

The real problem, of course, is what distutils does now.  I don't
know if it has a post-install hook.  If it does, then you could
do
  if sys.platform == 'win32':
      for filename in os.listdir('bin'):
          os.rename(filename, filename + '.py')

If not, I wonder if you can do that when making the package?
This would instantly make sure that they were executable
and also obviously recognizable.

&gt;<i>
</I>&gt;<i> FWIW I don't think it's possible to do run any post-installation
</I>&gt;<i> code on win32
</I>&gt;<i> with distutils.  I haven't looked in depth for a while, but I
</I>&gt;<i> haven't heard
</I>&gt;<i> news of this being fixed, either.
</I>Doh, there goes that idea then.

&gt;<i> Yes.  I'm glad you see the utility in doing this.  I also
</I>&gt;<i> strongly agree with
</I>&gt;<i> you that the Twisted experience needs to be positive within the
</I>&gt;<i> first fifteen
</I>&gt;<i> minutes of the download, and it bothers me that the Windows
</I>&gt;<i> installer is not in
</I>&gt;<i> very good shape.  (Have you tried the debian install though?
</I>&gt;<i> It's smooooth
</I>&gt;<i> ^_^)
</I>
Unfortunately my various attempts to install Linux have all
failed horribly, usually with graphics drivers and after a lot more
than 15 minutes :-).  I still use Windows on my desktop.  We use
FreeBSD on our servers and Solaris at most customer sites, but only
'as servers'. My Linux knowledge is bound to be worse that yours of
Windows :-)

&gt;<i> Well, if your testers are sysadmins they tend to be irritated by the
</I>&gt;<i> installation problems a lot more often.  Trouble is that sysadmins rarely
</I>&gt;<i> install server frameworks on their own...
</I>
I have two &quot;junior programmers&quot; who will probably be ideal.
John knows Python, Dragan knows Java and a little Python, but they
(like me) are new to networking.  John is also our docco expert.
I suggest holding off until we &quot;think it's sorted&quot; and using
them for first impressions on the install process and examples.
You can only use each tester once for this kind of thing.

The other one, Robin becker, will no doubt ignore all docco, read the
source and maybe even any binaries, then discover something nasty
lurking in your innermost Windows event loops ;-)


Thanks,

Andy








</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001914.html">[Twisted-Python] First impressions of Windows downlod
</A></li>
	<LI>Next message: <A HREF="001917.html">[Twisted-Python] First impressions of Windows downlod
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1915">[ date ]</a>
              <a href="thread.html#1915">[ thread ]</a>
              <a href="subject.html#1915">[ subject ]</a>
              <a href="author.html#1915">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
