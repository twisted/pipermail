<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] irc server run by twisted and (probably) django
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20irc%20server%20run%20by%20twisted%20and%20%28probably%29%20django&In-Reply-To=%3C9bb390e70810172230x104a2cf7ufd13536d1f7bd9a6%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="051052.html">
   <LINK REL="Next"  HREF="051091.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] irc server run by twisted and (probably) django</H1>
    <B>Rob Hoadley</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20irc%20server%20run%20by%20twisted%20and%20%28probably%29%20django&In-Reply-To=%3C9bb390e70810172230x104a2cf7ufd13536d1f7bd9a6%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] irc server run by twisted and (probably) django">hoadley at gmail.com
       </A><BR>
    <I>Fri Oct 17 23:30:27 MDT 2008</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="051052.html">[Twisted-Python] irc server run by twisted and (probably) django
</A></li>
        <LI>Next message (by thread): <A HREF="051091.html">[Twisted-Python] irc server run by twisted and (probably) django
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51055">[ date ]</a>
              <a href="thread.html#51055">[ thread ]</a>
              <a href="subject.html#51055">[ subject ]</a>
              <a href="author.html#51055">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've done a similar type project but with a mailserver built using
twisted.mail. I used django.contrib.admin to help manage the db for
the mailserver config. From the mailservers, I was able to get by with
5 min Looping Calls to the database to build the required config data
and just cached the data until the next successful db call .  While
not entirely applicable to your problem,  I wanted to bring it up
because of the slightly different choice I made on how to gather data
out of the database. As the previous poster mentioned, I didn't want
to mess around with concurrency and decided that my mailservers (2 of
them now) would not care about each other and just get their config
data out of the database.

Where I also differ is I couldn't afford a sql query per each
connections MAIL FROM or RCPT TO. So I had to make it slightly more
flexible while still meeting the requirement of a database stored
config.  I basically choose a delayed Pull approach.  One upshot is I
coded the sql calls so that the config data survives a database
failure and just keeps working with it's previous data grab.  I also
coded a twisted.web service administration page that allows for a
manual reload of the data on the individual server if an emergency
came up and I absolutely needed the config to change.  It's a
different flavor you can use if you know your data is fairly static
and the number of people changing the data is low.

Now back to your problem... I've also used the spread toolkit before
(no not the twisted.spread.. and yes... OSS name collision). If I were
writing such an app, and thought I'd be using a number of servers for
the service; I'd consider using spread to keep things the same on all
servers and for anything else I needed quickly.  You'd still want a
database, you just aren't always using sql to pull data that you need.
 You are using the spread bus and your IRC twisted app (more likely a
service within your twisted app) is just listening for the data that
you deem high priority.   Commonly referred to as a Push approach.
<A HREF="http://www.spread.org">http://www.spread.org</A>

Someone out there has done some work with spread and twisted.  I don't
know how well the code works. As for django, it'd be pretty easy to
send a spread message.
<A HREF="http://anarkystic.com/devdev/spreader-intro">http://anarkystic.com/devdev/spreader-intro</A>

Hope you get some ideas.

-rob

On Thu, Oct 16, 2008 at 1:56 PM, Phil Christensen &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">phil at bubblehouse.org</A>&gt; wrote:
&gt;<i> On Oct 16, 2008, at 4:26 PM, Manuel Meyer wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> But I don't know how to inform IRCServer about changes in the site/db.
</I>&gt;&gt;<i> Maybe by adding another network protocol to the twisted application, where
</I>&gt;&gt;<i> django's signals could leave a note?
</I>&gt;<i>
</I>&gt;<i> I may be missing something, but if you keep all your data in the DB, there's
</I>&gt;<i> no need to notify the irc server of changes to the DB.
</I>&gt;<i>
</I>&gt;<i> The only time you'll need this user information (it seems) is while
</I>&gt;<i> responding to /join and /list requests. Just read the DB at that time.
</I>&gt;<i>
</I>&gt;<i> What's nice about this is the DB takes care of most if not all of your
</I>&gt;<i> synchronization requirements, so you have far fewer concurrency issues to
</I>&gt;<i> think about than if you were broadcasting changes from the web app to the
</I>&gt;<i> irc server.
</I>&gt;<i>
</I>&gt;<i> -phil
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="051052.html">[Twisted-Python] irc server run by twisted and (probably) django
</A></li>
	<LI>Next message (by thread): <A HREF="051091.html">[Twisted-Python] irc server run by twisted and (probably) django
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51055">[ date ]</a>
              <a href="thread.html#51055">[ thread ]</a>
              <a href="subject.html#51055">[ subject ]</a>
              <a href="author.html#51055">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
