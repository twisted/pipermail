<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] alternative to tac
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20alternative%20to%20tac&In-Reply-To=%3CA1E5E4FE-161A-4589-BD69-AC541D2B337A%40bubblehouse.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="050994.html">
   <LINK REL="Next"  HREF="050996.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] alternative to tac</H1>
    <B>Phil Christensen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20alternative%20to%20tac&In-Reply-To=%3CA1E5E4FE-161A-4589-BD69-AC541D2B337A%40bubblehouse.org%3E"
       TITLE="[Twisted-Python] alternative to tac">phil at bubblehouse.org
       </A><BR>
    <I>Tue Oct  7 09:16:13 MDT 2008</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="050994.html">[Twisted-Python] alternative to tac
</A></li>
        <LI>Next message (by thread): <A HREF="050996.html">[Twisted-Python] Buildbot history
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50995">[ date ]</a>
              <a href="thread.html#50995">[ thread ]</a>
              <a href="subject.html#50995">[ subject ]</a>
              <a href="author.html#50995">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Oct 7, 2008, at 5:18 AM, Werner Thie wrote:
&gt;<i> Vasil Vangelovski wrote:
</I>&gt;&gt;<i> Which is the simplest way to put a service under and application to
</I>&gt;&gt;<i> listen on a port and behave similarly to the way it behaves when run
</I>&gt;&gt;<i> with twistd -noy script.tac but directly from a standard python
</I>&gt;&gt;<i> module? Lets assume I don't have access to the tac command and want  
</I>&gt;&gt;<i> to
</I>&gt;&gt;<i> emulate the behaveour.
</I>&gt;<i>
</I>&gt;<i> Hi Vasil
</I>&gt;<i>
</I>&gt;<i> I use something along the code below whoch serves dual purpose, use  
</I>&gt;<i> it with twistd -noy xxx.tac and also python xxx.tac.
</I>
[snip]

&gt;<i> def main():
</I>&gt;<i>  log.startLogging(sys.stdout)
</I>&gt;<i>  reactor.listenTCP(7999, site) #start only the web svc when debugging
</I>&gt;<i>  reactor.run()
</I>&gt;<i> ##  print gc.get_objects()
</I>&gt;<i>
</I>&gt;<i> if __name__ == '__main__':
</I>&gt;<i>  main()
</I>
[snip]

I don't think this really emulates twistd's behavior very well. twistd  
does roughly one trillion other things during startup that won't  
happen here.

Maybe you don't need any of this stuff, but I'll add my two cents  
about how I've dealt with this, which is to use twistd plugins, and  
call twistd's script functions directly:

from twisted.scripts import twistd

config = twistd.ServerOptions()
args = ['--pidfile', 'mytwistd.pid', '-l', 'mytwistd.log', 'myplugin']
config.parseOptions(args)
twistd.runApp(config)

This lets me easily specify configuration details, but should be  
reasonably forward-compatible. Also, I can keep all my code inside a  
package, and as long as it's in the system path, my plugin will be  
available to twistd.

There was some talk ages ago about making twistd a little more  
developer-friendly (so that you could more easily pick and choose the  
parts of it you wanted to use) but I don't remember the details, or if  
any progress was made.

-phil


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="050994.html">[Twisted-Python] alternative to tac
</A></li>
	<LI>Next message (by thread): <A HREF="050996.html">[Twisted-Python] Buildbot history
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50995">[ date ]</a>
              <a href="thread.html#50995">[ thread ]</a>
              <a href="subject.html#50995">[ subject ]</a>
              <a href="author.html#50995">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
