<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] callLater -- only when idle
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20callLater%20--%20only%20when%20idle&In-Reply-To=%3C20081030225237.29191.978512341.divmod.quotient.47082%40ohm%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="051095.html">
   <LINK REL="Next"  HREF="051098.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] callLater -- only when idle</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20callLater%20--%20only%20when%20idle&In-Reply-To=%3C20081030225237.29191.978512341.divmod.quotient.47082%40ohm%3E"
       TITLE="[Twisted-Python] callLater -- only when idle">exarkun at divmod.com
       </A><BR>
    <I>Thu Oct 30 16:52:37 MDT 2008</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="051095.html">[Twisted-Python] callLater -- only when idle
</A></li>
        <LI>Next message (by thread): <A HREF="051098.html">[Twisted-Python] Event notification and general RPC in Twisted...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51096">[ date ]</a>
              <a href="thread.html#51096">[ thread ]</a>
              <a href="subject.html#51096">[ subject ]</a>
              <a href="author.html#51096">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 30 Oct 2008 23:45:00 +0100, Peter Jacobi &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">pjacobi.de at googlemail.com</A>&gt; wrote:
&gt;<i>I'd like to schedule a delayed call for being done after n seconds of
</I>&gt;<i>idling, i.e. n seconds after the last event was dispatched.
</I>&gt;<i>
</I>&gt;<i>I assume this can be done by resetting  the delayed call from every
</I>&gt;<i>event handler, but this seems to be a silly solution.
</I>&gt;<i>
</I>&gt;<i>Any suggestions for a better solution?
</I>&gt;<i>
</I>
This doesn't work very well.  There are events that are purely internal
to reactor implementations.  There's no guarantee that these won't happen
at least every N seconds, preventing your code from every running.  There
are events that are internal to protocol implementations or other higher
level APIs - for example, many protocols implement idle timeouts, so
they are sources of additional timing events which you can't directly
observe; as an optimization, the Twisted Web server uses a timing event
that fires once a second to manage the timestamp string is needs to write
to the request log.

You really need to specify the set of event sources inclusively, not
globally.  Fortunately this doesn't mean you need to add code to every
event handler you have.  You can wrap each event handler in a general
purpose object which resets your timer and then forwards the event to
the original handler.  Just wrap the handlers which should reset your
countdown and all the other stuff that's going on won't get in your way.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="051095.html">[Twisted-Python] callLater -- only when idle
</A></li>
	<LI>Next message (by thread): <A HREF="051098.html">[Twisted-Python] Event notification and general RPC in Twisted...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51096">[ date ]</a>
              <a href="thread.html#51096">[ thread ]</a>
              <a href="subject.html#51096">[ subject ]</a>
              <a href="author.html#51096">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
