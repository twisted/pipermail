<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] CONNECTION_LOST not an integer (docstring error?)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20CONNECTION_LOST%20not%20an%20integer%20%28docstring%20error%3F%29&In-Reply-To=20081001180412.29191.1979321832.divmod.quotient.32732%40ohm">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018460.html">
   <LINK REL="Next"  HREF="018465.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] CONNECTION_LOST not an integer (docstring error?)</H1>
    <B>Michael McNeil Forbes</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20CONNECTION_LOST%20not%20an%20integer%20%28docstring%20error%3F%29&In-Reply-To=20081001180412.29191.1979321832.divmod.quotient.32732%40ohm"
       TITLE="[Twisted-Python] CONNECTION_LOST not an integer (docstring error?)">mforbes at physics.ubc.ca
       </A><BR>
    <I>Wed Oct  1 17:24:05 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="018460.html">[Twisted-Python] CONNECTION_LOST not an integer (docstring error?)
</A></li>
        <LI>Next message: <A HREF="018465.html">[Twisted-Python] CONNECTION_LOST not an integer (docstring error?)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18464">[ date ]</a>
              <a href="thread.html#18464">[ thread ]</a>
              <a href="subject.html#18464">[ subject ]</a>
              <a href="author.html#18464">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Oct 1, 2008, at 12:04 PM, Jean-Paul Calderone wrote:

&gt;<i> On Wed, 1 Oct 2008 12:00:29 -0600, Michael McNeil Forbes  
</I>&gt;<i> &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mforbes at physics.ubc.ca</A>&gt; wrote:
</I>&gt;&gt;<i> Several places in the documentation refer to the method  
</I>&gt;&gt;<i> writeSomeData () returning a negative integer if the connection is  
</I>&gt;&gt;<i> lost.  (In  particular /api/  
</I>&gt;&gt;<i> twisted.internet.abstract.FileDescriptor.html#writeSomeData.)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> However, twisted.internet.main.CONNECTION_LOST is often returned   
</I>&gt;&gt;<i> which is not an integer.
</I>...
&gt;<i> Hardly anyone actually needs `writeSomeData`.  It's mostly an  
</I>&gt;<i> implementation
</I>&gt;<i> detail of a certain group of reactors.
</I>
I have opened a ticket.  A question then that is sure to expose my  
ignorance of twisted...

Why does writeSomeData not simply raise CONNECTION_LOST as an  
exception?  Checking return values is quite un-pythonic.  Is there a  
deep reason for this?

Michael.

P.S. I came across this because I was trying to use twisted running  
in a thread to write data resulting from a long computation that I  
have not yet turned into a producer.  The more conventional &quot;write&quot;  
method was failing if the socket backed up, and provided no simple  
way of determining if data was being dropped.  My solution was to  
used writeSomeData, and then have the computation decide to throw out  
some of the data if it is being produced too rapidly, but I need to  
know how much has been sent so I can decide what to throw away...



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018460.html">[Twisted-Python] CONNECTION_LOST not an integer (docstring error?)
</A></li>
	<LI>Next message: <A HREF="018465.html">[Twisted-Python] CONNECTION_LOST not an integer (docstring error?)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18464">[ date ]</a>
              <a href="thread.html#18464">[ thread ]</a>
              <a href="subject.html#18464">[ subject ]</a>
              <a href="author.html#18464">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
