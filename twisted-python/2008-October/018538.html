<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] problem with Twisted and Processing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20problem%20with%20Twisted%20and%20Processing&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018537.html">
   <LINK REL="Next"  HREF="018539.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] problem with Twisted and Processing</H1>
    <B>davy zhang</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20problem%20with%20Twisted%20and%20Processing&In-Reply-To="
       TITLE="[Twisted-Python] problem with Twisted and Processing">davyzhang at gmail.com
       </A><BR>
    <I>Thu Oct 16 09:21:35 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="018537.html">[Twisted-Python] Status of twisted-pair and python-eunuchs.
</A></li>
        <LI>Next message: <A HREF="018539.html">[Twisted-Python] problem with Twisted and Processing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18538">[ date ]</a>
              <a href="thread.html#18538">[ thread ]</a>
              <a href="subject.html#18538">[ subject ]</a>
              <a href="author.html#18538">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I used Processing package for python 2.5 which became an official
package of python 2.6 named multipleprocess. 'Cause the twisted for
python 2.6 is not ready, I'm still using python 2.5 on windows
Here's the problem the code below is pretty simple and works fine
until I tried to get access of the first element in the list, I can
even print the whole list, but i just can not get the elements inside.
I guess there's something get conflicted in these two packages, anyone
knows why?

To reproduce the error, run the code below with twisted and processing
package and python 2.5, open a telnet client to open the localhost
9999,send the message ,hit carriage return.

thanks a lot for any hints


from twisted.protocols import basic
from twisted.internet import reactor
import time

from processing import Process,Manager

def sender(list):
    while 1:
        if len(list) &gt; 0:
            print list[0]
        time.sleep(1)



class MyChat(basic.LineReceiver):
    def connectionMade(self):
        print &quot;Got new client!&quot;
        self.factory.clients.append(self)

    def connectionLost(self, reason):
        print &quot;Lost a client!&quot;
        self.factory.clients.remove(self)

    def lineReceived(self, line):
        print &quot;received&quot;, repr(line)
        for c in self.factory.clients:
            c.message(line)
        d = {'client':self,'msg':line}
        msgList.append(d)

    def message(self, message):
        self.transport.write(message + '\n')


from twisted.internet import protocol
from twisted.application import service, internet

if __name__  == '__main__':
    factory = protocol.ServerFactory()
    factory.protocol = MyChat
    factory.clients = []
    reactor.listenTCP(9999,factory)

    manager = Manager()
    msgList = manager.list()

    p = Process(target=sender,args=(msgList,))
    p.start()
    reactor.run()


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018537.html">[Twisted-Python] Status of twisted-pair and python-eunuchs.
</A></li>
	<LI>Next message: <A HREF="018539.html">[Twisted-Python] problem with Twisted and Processing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18538">[ date ]</a>
              <a href="thread.html#18538">[ thread ]</a>
              <a href="subject.html#18538">[ subject ]</a>
              <a href="author.html#18538">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
