<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] SURVEY: Have you submitted a patch to Twisted	and it never got in?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20SURVEY%3A%20Have%20you%20submitted%20a%20patch%20to%20Twisted%0A%09and%20it%20never%20got%20in%3F&In-Reply-To=%3C7D0D0DE4-6084-413C-B535-2DECDC2961B8%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="056715.html">
   <LINK REL="Next"  HREF="056730.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] SURVEY: Have you submitted a patch to Twisted	and it never got in?</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20SURVEY%3A%20Have%20you%20submitted%20a%20patch%20to%20Twisted%0A%09and%20it%20never%20got%20in%3F&In-Reply-To=%3C7D0D0DE4-6084-413C-B535-2DECDC2961B8%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] SURVEY: Have you submitted a patch to Twisted	and it never got in?">glyph at twistedmatrix.com
       </A><BR>
    <I>Fri Jul  1 21:09:57 MDT 2011</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="056715.html">[Twisted-Python] SURVEY: Have you submitted a patch to	Twisted	and it never got in?
</A></li>
        <LI>Next message (by thread): <A HREF="056730.html">[Twisted-Python] SURVEY: Have you submitted a patch to Twisted and	it never got in?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56717">[ date ]</a>
              <a href="thread.html#56717">[ thread ]</a>
              <a href="subject.html#56717">[ subject ]</a>
              <a href="author.html#56717">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jul 1, 2011, at 9:06 PM, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A> wrote:

&gt;<i> On 1 Jul, 11:27 pm, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A> wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On Jul 1, 2011, at 6:57 PM, David Ripton wrote:
</I>&gt;&gt;&gt;<i> Working with patches because you don't have svn commit rights is 
</I>&gt;&gt;&gt;<i> annoying, but this annoyance is a relatively minor fixed cost.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> It's still important for us to reduce this cost; even if it's not the 
</I>&gt;&gt;<i> bottleneck, we have to optimize first where we can optimize :).
</I>&gt;&gt;&gt;<i> The real issue, for controversial features, is achieving consensus, 
</I>&gt;&gt;&gt;<i> and then getting your feature in before consensus is lost.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Yes, absolutely.  And there's are some important guidelines for 
</I>&gt;&gt;<i> reviewers that can be inferred from this:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Try to stick to coding-standard stuff as much as possible, especially 
</I>&gt;&gt;<i> if there's been a previous review.  Don't bring up &quot;I think it would be 
</I>&gt;&gt;<i> better if...&quot; things, except to say &quot;file an additional ticket&quot;.
</I>&gt;<i> 
</I>&gt;<i> We've disagreed about this in the past, so I don't think you'll be 
</I>&gt;<i> surprised if I say that I don't think this is a good idea. :)
</I>&gt;<i> 
</I>&gt;<i> If an earlier review misses *functional* issues with a change, then they 
</I>&gt;<i> need to be brought up.
</I>
I don't think I disagree, actually.  It's just a different emphasis.  Issues certainly need to be brought up.  I shouldn't have said otherwise.  They just need to be clearly separated into blocking/not-blocking.

&gt;<i> Scope creep should be avoided at *all* stages of the process, but an 
</I>&gt;<i> incomplete first review doesn't exempt a change from the development 
</I>&gt;<i> requirements (and I don't think you think it should, even though it 
</I>&gt;<i> sounds like you're saying it here :).
</I>
You're right, on a subsequent reading, that's what it sounds like I was saying.  And I'm definitely not saying that; the review requirements are the same on every review.

&gt;&gt;<i> If there's a previous review, as much as possible, stick to the points 
</I>&gt;&gt;<i> brought up in the previous review.  Make sure they're addressed, and 
</I>&gt;&gt;<i> try not to add a pile of conflicting stylistic suggestions.
</I>&gt;<i> 
</I>&gt;<i> Stylistic issues should all be known in advance (read the coding 
</I>&gt;<i> standard, etc) and brought up in the first review (because the first 
</I>&gt;<i> reviewer should know them too).  Stylistic issues that aren't covered by 
</I>&gt;<i> the coding standard definitely shouldn't be sprung in a subsequent 
</I>&gt;<i> review (or the reviewer should address them himself or herself) - or 
</I>&gt;<i> even a first review, really.
</I>&gt;<i> 
</I>&gt;<i> This is a separate case from pointing out *functional* issues that the 
</I>&gt;<i> first review missed.
</I>
The word &quot;functional&quot; is pretty broad, so let me be more specific.

Any change which is part of the coding standard or the review policy needs to be mentioned.  100% test coverage is a requirement.  Docstrings for public and private are a requirement.  No matter how many reviewers have missed these things, they need to be brought up and no feature which is missing them may land.  I think we are all pretty clear about that.

Beyond that there's an infinite spectrum of diversity of possible review comments, and I can't speak to all of them.  For example, maybe a change causes the performance characteristics of an existing, but un-benchmarked, change to regress.  Maybe the API is designed in such a way that it will be difficult or impossible to scale.  Perhaps something is treated as blocking where it should return a Deferred.  I can't say for sure whether one of these issues would or wouldn't be a blocker without a lot of context about that specific change.

But I think there's a general category of feedback that can be classified as &quot;this is OK, but I can think of a way to do it better&quot;.  In this case, a change might meet all the formal requirements, have a reasonable API that works, and not raise compatibility issues, but the reviewer has an epiphany while reading it and realizes it might be simpler/faster/more flexible to do something else.

The reviewer should always feel free to communicate such an insight, of course, but I think that reviewers should all have a strong bias towards separating this out and making it optional - and making it clear that it's optional.  The best should not be the enemy of the better; if it's an improvement, and it works today, we should usually integrate it.  In many cases it's much better to defer the improvements until later and get the reasonable API in sooner.  I think this is true even if the improved version will have a totally different API, because it's possible nobody will have a chance to do the improvements for years.

Again, this is one that I know I'm guilty of, but I'd like to think that in recent reviews I've been really clear about the optionalness of my ideas :).

The purpose of the review process, as I see it, is not to produce the best possible implementation of everything always.  It's to produce an implementation that meets a certain quality standard and does not cause regressions (either in functionality or test coverage, although hopefully one day also in performance too).  I think there are cases where we have ended up with no implementation rather than an adequate but not awesome implementation because there have been too many competing ideas for how to do it &quot;even better&quot; rather than how to make it meet the required standard.

All that being said, I spent a long time looking at &lt;<A HREF="http://twistedmatrix.com/trac/report/16">http://twistedmatrix.com/trac/report/16</A>&gt;, and I can't find any tickets where comments like this are the only reason for blocking a ticket that's been through many round-trips; they all still have compliance issues.  The larger problem is cursory early reviews where the patch is obviously bad, and later reviews that get more detailed once it starts to shape up.  Apparently the more serious issue is that we just need to be more thorough earlier in the process.  (Although another way to look at that data is that we weren't terribly thorough 3 years ago, since old tickets necessarily have old initial reviews.)

&gt;&gt;<i> When you do a review, try to be as thorough as possible.  Don't ever do 
</I>&gt;&gt;<i> a review that says &quot;update @since markers&quot; or &quot;2 blank lines between 
</I>&gt;&gt;<i> methods&quot; and nothing else; at least, you need to say &quot;... and then it 
</I>&gt;&gt;<i> will be ready to merge&quot;.  Remember that when you take it out of review, 
</I>&gt;&gt;<i> no other reviewer is going to look at it until the author fixes it and 
</I>&gt;&gt;<i> resubmits it, which may be quite a while.  If you feel like adding some 
</I>&gt;&gt;<i> partial commentary to help the next full reviewer, just add a comment, 
</I>&gt;&gt;<i> don't remove the review keyword.
</I>&gt;<i> 
</I>&gt;<i> This is very important, since it should reduce the instances in which a 
</I>&gt;<i> later review does have to introduce a new point.  I don't think anyone 
</I>&gt;<i> benefits from forgoing resolving functional issues that are detected 
</I>&gt;<i> after the first review but before the change actually lands.
</I>
If you're a new reviewer (or even if you're an old one who hasn't gotten much practice), it might be worthwhile to put a review comment on the ticket but ask a more experienced reviewer for a meta-review before getting rid of the 'review' keyword.  A meta-review is usually a lot easier than a review, so it should be easier to get one by just showing up in #twisted and asking; hopefully we won't need an elaborate meta-review tracker.

I hope this suggestion will make someone who has thus far been hesitant to do a review contemplate doing one with this set of training wheels.

&gt;&gt;<i> Be explicit about what happens next, even if it's going to be 
</I>&gt;&gt;<i> redundant.  Always say &quot;... and it will need another review&quot; or &quot;... 
</I>&gt;&gt;<i> and then merge&quot;.  Try not to voice a vague dissatisfaction with the 
</I>&gt;&gt;<i> architecture of something without an explicit suggestion about (A) what 
</I>&gt;&gt;<i> should be done, and (B) whether it needs to be done before the feature 
</I>&gt;&gt;<i> can be merged.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> For contributors, one suggestion: make implementation details private 
</I>&gt;&gt;<i> as much as possible, so that the reviewer will have to consider the 
</I>&gt;&gt;<i> aesthetics of the implementation details less.  The smaller the public 
</I>&gt;&gt;<i> API of the contribution, the easier it is to avoid bikeshedding around 
</I>&gt;&gt;<i> method names and class placement :).
</I>&gt;<i> 
</I>&gt;<i> There are plenty of issues on the contribution-accepting side which I 
</I>&gt;<i> don't want to minimize, but I think there's another thing contributors 
</I>&gt;<i> can do to help the overall process.  If a review results in more work 
</I>&gt;<i> than you're interested in doing, say so.  Make it clear that you're no 
</I>&gt;<i> longer taking responsibility for the ticket.  Then there's some chance 
</I>&gt;<i> that another contributor might take it the rest of the way (without 
</I>&gt;<i> waiting 5 years before deciding the original contributor has lost 
</I>&gt;<i> interest).
</I>
+1

&gt;&gt;<i> None of this would have helped in particular on the IPv6 stuff, but 
</I>&gt;&gt;<i> given that that affected an extremely core API, and had a ton of fiddly 
</I>&gt;&gt;<i> little details, I'm not sure much could have helped on that one...
</I>&gt;<i> 
</I>&gt;<i> Sooooooo fiddly aarrrrghhghhhhh.
</I>&gt;<i> 
</I>&gt;&gt;<i> I know I've broken these rules myself on occasion, and I'd like to 
</I>&gt;&gt;<i> encourage other reviewers to call me out on it when they notice it :).
</I>&gt;<i> 
</I>&gt;<i> This raises another point, which is that the mailing list isn't a 
</I>&gt;<i> terribly useful place for these points to end up.  If anything is 
</I>&gt;<i> actually expected to change, then the need to update the review 
</I>&gt;<i> documentation (such as it is) and probably also get serious about meta- 
</I>&gt;<i> reviews.
</I>
I do hope someone will volunteer to update the wiki as a result, and if not, I hope I remember to.  But the discussion has given me a couple of ideas I wouldn't have had otherwise; the meta-review comment above is a new(ish) idea.

Of course, the most useful place for this to end up would be as a tweet!  (Is everybody following @twistedmatrix yet?)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20110701/78376971/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="056715.html">[Twisted-Python] SURVEY: Have you submitted a patch to	Twisted	and it never got in?
</A></li>
	<LI>Next message (by thread): <A HREF="056730.html">[Twisted-Python] SURVEY: Have you submitted a patch to Twisted and	it never got in?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56717">[ date ]</a>
              <a href="thread.html#56717">[ thread ]</a>
              <a href="subject.html#56717">[ subject ]</a>
              <a href="author.html#56717">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
