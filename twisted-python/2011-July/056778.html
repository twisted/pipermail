<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted bzr mirror (Was: Twisted Project	Jobs	Volunteer)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20bzr%20mirror%20%28Was%3A%20Twisted%20Project%0A%09Jobs%09Volunteer%29&In-Reply-To=%3C20110708162006.3761.1897240428.divmod.xquotient.138%40localhost.localdomain%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="056776.html">
   <LINK REL="Next"  HREF="056780.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted bzr mirror (Was: Twisted Project	Jobs	Volunteer)</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20bzr%20mirror%20%28Was%3A%20Twisted%20Project%0A%09Jobs%09Volunteer%29&In-Reply-To=%3C20110708162006.3761.1897240428.divmod.xquotient.138%40localhost.localdomain%3E"
       TITLE="[Twisted-Python] Twisted bzr mirror (Was: Twisted Project	Jobs	Volunteer)">exarkun at twistedmatrix.com
       </A><BR>
    <I>Fri Jul  8 10:20:06 MDT 2011</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="056776.html">[Twisted-Python] Twisted bzr mirror (Was: Twisted Project Jobs Volunteer)
</A></li>
        <LI>Next message (by thread): <A HREF="056780.html">[Twisted-Python] Twisted bzr mirror (Was: Twisted Project Jobs Volunteer)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56778">[ date ]</a>
              <a href="thread.html#56778">[ thread ]</a>
              <a href="subject.html#56778">[ subject ]</a>
              <a href="author.html#56778">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 7 Jul, 04:25 pm, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A> wrote:
&gt;<i>Hi,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>LP BZR Mirror status
</I>&gt;<i>--------------------
</I>&gt;<i>
</I>&gt;<i>Martin Pool enabled trunk import directly from SVN repo and the branch
</I>&gt;<i>is available here:
</I>&gt;<i><A HREF="https://code.launchpad.net/~vcs-imports/twisted/trunk">https://code.launchpad.net/~vcs-imports/twisted/trunk</A>
</I>&gt;<i>
</I>&gt;<i>The mirror is refreshed about every 5 to 6 hours.
</I>&gt;<i>Only trunk is available.
</I>
Cool.
&gt;<i>
</I>&gt;<i>Own BZR Mirror
</I>&gt;<i>--------------
</I>&gt;<i>
</I>&gt;<i>I have hacked a quick and dirty script for pulling / creating / 
</I>&gt;<i>deleting
</I>&gt;<i>all Twisted svn branches.
</I>&gt;<i>
</I>&gt;<i>The code is here: <A HREF="http://pastebin.ubuntu.com/639582/">http://pastebin.ubuntu.com/639582/</A>
</I>&gt;<i>
</I>&gt;<i>Synchronizing all branches takes about 41 minutes on an Intel Xeon 2.8G
</I>&gt;<i>CPU. It does not uses to much memory since each branch is pulled using 
</I>&gt;<i>a
</I>&gt;<i>different bzr pull process.
</I>&gt;<i>
</I>&gt;<i>Pulling a single branch takes about 15 seconds, so maybe we the SVN 
</I>&gt;<i>repo
</I>&gt;<i>can have some commit hooks to execute 'bzr pull' in the right branch.
</I>
I think getting the right hook set up to update just the right branch is 
what we want to focus on.  Presently svn and bzr are hosted on the same 
machine, which perhaps we can continue since this should bring the 
overhead of mirroring down.  There is even a little code in lp:twisted- 
trac-integration for determining which branch a changeset is on (at 
least for the branch creation changeset) which might help.
&gt;<i>
</I>&gt;<i>Please let me know what do you think should be the next action for
</I>&gt;<i>resolving the bzr mirror issues?
</I>
Do you think you can put together something to run from an svn post- 
commit hook to update just the single corresponding bzr branch?

Meanwhile I can try your synchronization code to see if it has better 
results than the current bzr svn-import based approach.

Thanks,
Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="056776.html">[Twisted-Python] Twisted bzr mirror (Was: Twisted Project Jobs Volunteer)
</A></li>
	<LI>Next message (by thread): <A HREF="056780.html">[Twisted-Python] Twisted bzr mirror (Was: Twisted Project Jobs Volunteer)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56778">[ date ]</a>
              <a href="thread.html#56778">[ thread ]</a>
              <a href="subject.html#56778">[ subject ]</a>
              <a href="author.html#56778">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
