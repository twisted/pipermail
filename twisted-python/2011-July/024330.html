<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] XMLRPC, how to prevent stdout on post and get?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20XMLRPC%2C%20how%20to%20prevent%20stdout%20on%20post%20and%20get%3F&In-Reply-To=j04k35%24uoa%241%40dough.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024329.html">
   <LINK REL="Next"  HREF="024322.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] XMLRPC, how to prevent stdout on post and get?</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20XMLRPC%2C%20how%20to%20prevent%20stdout%20on%20post%20and%20get%3F&In-Reply-To=j04k35%24uoa%241%40dough.gmane.org"
       TITLE="[Twisted-Python] XMLRPC, how to prevent stdout on post and get?">exarkun at twistedmatrix.com
       </A><BR>
    <I>Tue Jul 19 21:39:04 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="024329.html">[Twisted-Python] XMLRPC, how to prevent stdout on post and get?
</A></li>
        <LI>Next message: <A HREF="024322.html">[Twisted-Python] New TLS Code *Could* Cause Problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24330">[ date ]</a>
              <a href="thread.html#24330">[ thread ]</a>
              <a href="subject.html#24330">[ subject ]</a>
              <a href="author.html#24330">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 19 Jul, 06:57 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">happybrowndog at hotmail.com</A> wrote:
&gt;<i>On 7/19/2011 11:11 AM, Paul Thomas wrote:
</I>&gt;&gt;<i>As a quick fix,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>class QuietSite(server.Site):
</I>&gt;&gt;<i>      &quot;&quot;&quot;Like a Site but quieter&quot;&quot;&quot;
</I>&gt;&gt;<i>      def log(self, request):
</I>&gt;&gt;<i>          pass
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Then use QuietSite instead of server.Site
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>p.
</I>&gt;&gt;<i>On 19 Jul 2011, at 08:37, hbd666 wrote:
</I>&gt;&gt;&gt;<i>I have a simple xmlrpc server written using Twisted.  Every time I 
</I>&gt;&gt;&gt;<i>get a
</I>&gt;&gt;&gt;<i>request to it, stdout spits out something like the following:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>2011-07-19 00:33:39-0700 [HTTPChannel,332,127.0.0.1] 127.0.0.1 - -
</I>&gt;&gt;&gt;<i>[19/Jul/2011:07:33:38 +0000] &quot;POST / HTTP/1.0&quot; 200 128 &quot;-&quot;
</I>&gt;&gt;&gt;<i>&quot;xmlrpclib.py/1.0.1 (by www.pythonware.com)&quot;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>How do I prevent this from happening?  I also do not want this going 
</I>&gt;&gt;&gt;<i>to
</I>&gt;&gt;&gt;<i>a log file either.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Thanks anybody for your help!
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>_______________________________________________
</I>&gt;&gt;&gt;<i>Twisted-Python mailing list
</I>&gt;&gt;&gt;<i><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;&gt;&gt;<i><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>&gt;<i>Thanks, that worked for my application.
</I>&gt;<i>Though I still do see a need to modify the API as suggested earlier,
</I>&gt;<i>because it would be more specific to the XMLRPC, and just in case there
</I>&gt;<i>is more than one protocol for a server site for an application -
</I>&gt;<i>wouldn't want to kill logging for all protocols.
</I>
Hmmm.  Site is a factory for HTTP.  XML-RPC runs over HTTP.  There isn't 
really a different protocol here.  It sounds more like you want to 
disable logging for certain request URLs, perhaps.  You can do that by 
writing a suitable log method, eg:

    class SiteWithoutXMLRPCLogging(Site):
        def log(self, request):
            if request.uri.startswith('/RPC2') and request.method == 
'POST':
                return
            return Site.log(self, request)


It might be nicer if the response was also available, though 
(particularly since the request isn't logged until the response is 
generated).  Then you could avoid encoding the &quot;/RPC2&quot; string (which 
often isn't actually used) and do something like an isinstance(resource, 
XMLRPC).

Jean-Paul

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024329.html">[Twisted-Python] XMLRPC, how to prevent stdout on post and get?
</A></li>
	<LI>Next message: <A HREF="024322.html">[Twisted-Python] New TLS Code *Could* Cause Problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24330">[ date ]</a>
              <a href="thread.html#24330">[ thread ]</a>
              <a href="subject.html#24330">[ subject ]</a>
              <a href="author.html#24330">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
