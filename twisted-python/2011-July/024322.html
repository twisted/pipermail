<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] New TLS Code *Could* Cause Problems
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20New%20TLS%20Code%20%2ACould%2A%20Cause%20Problems&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024330.html">
   <LINK REL="Next"  HREF="024323.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] New TLS Code *Could* Cause Problems</H1>
    <B>Reza Lotun</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20New%20TLS%20Code%20%2ACould%2A%20Cause%20Problems&In-Reply-To="
       TITLE="[Twisted-Python] New TLS Code *Could* Cause Problems">rlotun at gmail.com
       </A><BR>
    <I>Tue Jul 19 05:51:27 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="024330.html">[Twisted-Python] XMLRPC, how to prevent stdout on post and get?
</A></li>
        <LI>Next message: <A HREF="024323.html">[Twisted-Python] New TLS Code *Could* Cause Problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24322">[ date ]</a>
              <a href="thread.html#24322">[ thread ]</a>
              <a href="subject.html#24322">[ subject ]</a>
              <a href="author.html#24322">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

I just wanted to fire a note about our experiences testing Twisted trunk
(after _newtls.py landed) on some servers in our cluster, on PyOpenSSL
0.12.

In our application (a twisted.web REST api endpoint), we make a lot of https
calls to a SimpleDB Amazon AWS endpoint (sdb.amazonaws.com). At some point
after a deployed test on some of our machines, we started getting our
internel DNS requests to the sdb endpoint throttled (resulting in failures
in most of our requests). Since every call to SimpleDB was made to the sdb
endpoint, each call would be resolved, bombarding amazon's dns servers with
requests. After diving in, I learned all Twisted connect* calls go through
socket.gethostbyname, which apparently does not do any DNS caching (much to
my surprise) unless something like nscd or a local caching nameserver is
running (we ended up using BIND).

Now, since we never ran a local caching nameserver before I wondered what
changed. Could it have been that using the _newtls code (with PyOpenSSL
0.12) removed some element of DNS caching that OpenSSL was performing behind
the scene? Is this possible? If so, then I just wanted to make sure everyone
was aware that if you make a lot of DNS calls in a Twisted server running
this code, you too could experience problems if you're not running a local
caching nameserver.

Thanks,
Reza

-- 
Reza Lotun
mobile: +44 (0)7521 310 763
email:  <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">rlotun at gmail.com</A>
work:   <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">rlotun at twitter.com</A>
@rlotun
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20110719/c30a0c52/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20110719/c30a0c52/attachment.htm</A> 
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024330.html">[Twisted-Python] XMLRPC, how to prevent stdout on post and get?
</A></li>
	<LI>Next message: <A HREF="024323.html">[Twisted-Python] New TLS Code *Could* Cause Problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24322">[ date ]</a>
              <a href="thread.html#24322">[ thread ]</a>
              <a href="subject.html#24322">[ subject ]</a>
              <a href="author.html#24322">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
