<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Async file I/O with Linux &amp; Twisted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Async%20file%20I/O%20with%20Linux%20%26%20Twisted&In-Reply-To=28012bc60712200123k54b9bdfch3d776cd708537472%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016491.html">
   <LINK REL="Next"  HREF="016495.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Async file I/O with Linux &amp; Twisted</H1>
    <B>Micha&#322; Pasternak</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Async%20file%20I/O%20with%20Linux%20%26%20Twisted&In-Reply-To=28012bc60712200123k54b9bdfch3d776cd708537472%40mail.gmail.com"
       TITLE="[Twisted-Python] Async file I/O with Linux &amp; Twisted">michal.dtz at gmail.com
       </A><BR>
    <I>Thu Dec 20 13:16:59 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="016491.html">[Twisted-Python] Async file I/O with Linux &amp; Twisted
</A></li>
        <LI>Next message: <A HREF="016495.html">[Twisted-Python] Async file I/O with Linux &amp; Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16494">[ date ]</a>
              <a href="thread.html#16494">[ thread ]</a>
              <a href="subject.html#16494">[ subject ]</a>
              <a href="author.html#16494">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 20 Dec 2007 09:23:43 +0000
&quot;Arnar Birgisson&quot; &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">arnarbi at gmail.com</A>&gt; wrote:

&gt;<i> Hi there,
</I>&gt;<i> 
</I>&gt;<i> May I ask why you chose libaio over, for example, libevent?
</I>
libevent is to C as Twisted is to Python. Both run on many
OS/platforms, but neither give you asynchronous file read/write;
read(2) on a file descriptor (not socket) will be always blocking.
At least this is what I understood after quick glance at libevent
source - all it does in buffer.c:evbuffer_read on non-win32 OS is
calling read(2).

libaio, instead, gives you async filesystem read/write access. Reading
a few hundred megabytes of data won't block Twisted reactor, which is
good.

Even better news is that since sending that e-mail yesterday I've found
out how to integrate Linux async I/O with epoll notification, so the
implementation I'm working on now will be even better. Pity it's
Linux-only, but well... to be portable, it should be POSIX aio really,
but I can't give you any guarantees about POSIX aio performance on
Linux. I can try working on other OSs later, if there will be enough
ppl interested.

Of course it would be cool to have Python libevent bindings - and even
cooler it would be to have a portable libevent reactor in C - but would
that really remove some of the limitations that Twisted has still to
deal with? You'd still have to hack portable AIO implementation into
libevent to have async file read/writes then ... :)

Take care,
-- 
m


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016491.html">[Twisted-Python] Async file I/O with Linux &amp; Twisted
</A></li>
	<LI>Next message: <A HREF="016495.html">[Twisted-Python] Async file I/O with Linux &amp; Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16494">[ date ]</a>
              <a href="thread.html#16494">[ thread ]</a>
              <a href="subject.html#16494">[ subject ]</a>
              <a href="author.html#16494">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
