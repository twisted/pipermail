<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] wx and twisted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20wx%20and%20twisted&In-Reply-To=20071203134755.8162.1671441083.divmod.quotient.42585%40ohm">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016410.html">
   <LINK REL="Next"  HREF="016412.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] wx and twisted</H1>
    <B>Phil Christensen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20wx%20and%20twisted&In-Reply-To=20071203134755.8162.1671441083.divmod.quotient.42585%40ohm"
       TITLE="[Twisted-Python] wx and twisted">phil at bubblehouse.org
       </A><BR>
    <I>Mon Dec  3 11:41:33 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="016410.html">[Twisted-Python] wx and twisted
</A></li>
        <LI>Next message: <A HREF="016412.html">[Twisted-Python] wx and twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16411">[ date ]</a>
              <a href="thread.html#16411">[ thread ]</a>
              <a href="subject.html#16411">[ subject ]</a>
              <a href="author.html#16411">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Dec 3, 2007, at 8:47 AM, Jean-Paul Calderone wrote:

&gt;<i> On Mon, 03 Dec 2007 14:33:44 +0100, Michele Petrazzo - Unipex srl &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">michele.petrazzo at unipex.it</A> 
</I>&gt;<i> &gt; wrote:
</I>&gt;&gt;<i>
</I>[snip traceback]
&gt;&gt;<i> exceptions.ValueError: file descriptor cannot be a negative integer  
</I>&gt;&gt;<i> (-1)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> and on shutdown:
</I>&gt;&gt;<i>
</I>[snip traceback]
&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> How debug it?
</I>&gt;<i>
</I>&gt;<i> Start looking at what has changed in wx since the previous working  
</I>&gt;<i> version,
</I>&gt;<i> or start looking at which calls are resulting in invalid file  
</I>&gt;<i> descriptors.
</I>&gt;<i>
</I>&gt;<i> Or you could try to get the Twisted unit tests to run with  
</I>&gt;<i> wxreactor, and
</I>&gt;<i> then work on making them pass.
</I>
I'm pretty sure that this is truly impossible with the current  
wxreactor, and possibly any reactor that is based on TSR. I found this  
out while trying to implement a corefoundation reactor using wxreactor  
as a reference.

My actual experience with wxWidgets is limited, but as far as I can  
tell, the same issue exists. Tests won't run because wxreactor.stop()  
will never stop the toolkit's main loop by itself, and anything that  
makes the loop end will also terminate the process.


I posted some comments on:
	<A HREF="http://twistedmatrix.com/trac/ticket/1833">http://twistedmatrix.com/trac/ticket/1833</A>

&quot;there are architectural choices in TSR that prevent most of its use- 
cases from being fully tested. The biggest problem is that TSR allows  
the native toolkit's event loop to dictate when the reactor will stop.
This has the most obvious implications when dealing with Trial. Trial  
assumes that reactor.run() will return after another thread calls  
reactor.crash(). This can't be done in Cocoa (so far as I can tell),  
because anything I've found that will make  
PyObjCTools.AppHelper.runEventLoop() stop will terminate the entire  
process.

This seems to also be the issue for t.i.wxreactor.&quot;



-phil




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016410.html">[Twisted-Python] wx and twisted
</A></li>
	<LI>Next message: <A HREF="016412.html">[Twisted-Python] wx and twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16411">[ date ]</a>
              <a href="thread.html#16411">[ thread ]</a>
              <a href="subject.html#16411">[ subject ]</a>
              <a href="author.html#16411">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
