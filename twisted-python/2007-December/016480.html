<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Server/Client bi-directional data-transfer -	need a solution
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Server/Client%20bi-directional%20data-transfer%20-%0A%09need%20a%20solution&In-Reply-To=200712121120.27558.maarten%40treewalker.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016440.html">
   <LINK REL="Next"  HREF="016482.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Server/Client bi-directional data-transfer -	need a solution</H1>
    <B>Sajit Rao</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Server/Client%20bi-directional%20data-transfer%20-%0A%09need%20a%20solution&In-Reply-To=200712121120.27558.maarten%40treewalker.org"
       TITLE="[Twisted-Python] Server/Client bi-directional data-transfer -	need a solution">sajitrao at gmail.com
       </A><BR>
    <I>Tue Dec 18 12:18:48 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="016440.html">[Twisted-Python] Server/Client bi-directional data-transfer -	need a solution
</A></li>
        <LI>Next message: <A HREF="016482.html">[Twisted-Python] Server/Client bi-directional data-transfer -	need a solution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16480">[ date ]</a>
              <a href="thread.html#16480">[ thread ]</a>
              <a href="subject.html#16480">[ subject ]</a>
              <a href="author.html#16480">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for your reply, Maarten.

I'm still chewing over it. In answer to your questions:

I will be sending short strings between client and server (bi-directionally)
most of the time (&gt; 100 times a day) and ocassionaly files (each of size 5
MB or less and &gt; 10 but &lt;100 times a day).

I wouldn't mind sending strings or files along the same channel - but I
don't know how to do that

While I like the brevity of python and realize that Twisted deffereds are
the heart of the async model,  I'm hampered by the scant documentation and
code fragments.

Could someone point me to how to send raw strings or binary files over the
same channel and have the other side interpret the data correctly?

Thanks,

Sajit

On Dec 12, 2007 5:20 AM, Maarten ter Huurne &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">maarten at treewalker.org</A>&gt; wrote:

&gt;<i> On Wednesday 12 December 2007, Sajit Rao wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; *The Goal:*
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;    - I'm trying to write a simple server/client app where the client can
</I>&gt;<i> &gt;    send the server either a small string like &quot;hello&quot; OR a small file
</I>&gt;<i> &gt; (txt, pdf, ppt,.. let's say &lt; 5MB ).
</I>&gt;<i> &gt;    - The server needs to figure out if the data it received is a simple
</I>&gt;<i> &gt;    string or a file and symmetrically may decide to send back to the
</I>&gt;<i> &gt; client a simple string or a small file.
</I>&gt;<i> &gt;    - As a bonus, It's highly desirable that the transfer be secure - but
</I>&gt;<i> &gt;    it's ok for the first version if it isn't
</I>&gt;<i>
</I>&gt;<i> Would an HTTP POST suffice? You could easily test it using a web browser
</I>&gt;<i> or
</I>&gt;<i> a program like wget and adding a secure channel is done by switching from
</I>&gt;<i> HTTP to HTTPS later.
</I>&gt;<i>
</I>&gt;<i> If your application works like an instant messenger, consider using
</I>&gt;<i> Twisted
</I>&gt;<i> Words, for example with the XMPP (Jabber) protocol.
</I>&gt;<i>
</I>&gt;<i> Does the client/server connection have to be able to pass a firewall or
</I>&gt;<i> proxy? In that case HTTP or something that can be run over HTTP would be a
</I>&gt;<i> big advantage.
</I>&gt;<i>
</I>&gt;<i> &gt; *Questions:*
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; What's the cleanest way to accomplish this? I've been looking at the
</I>&gt;<i> &gt; single Howto/Example that exists for *twisted.conch* but still can't
</I>&gt;<i> &gt; understand several things. In particular
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;    1. Should I create two separate channels between server and client -
</I>&gt;<i> &gt;    one for simple strings and one for files so that the client or server
</I>&gt;<i> &gt; knows the type of data on that channel?
</I>&gt;<i>
</I>&gt;<i> That depends on what protocol you want to use over the channel(s). If the
</I>&gt;<i> protocol can send series of text strings and binaries over the same
</I>&gt;<i> channel
</I>&gt;<i> then you need only one. But if having separate channels helps in
</I>&gt;<i> simplifying the protocol, then that might be better.
</I>&gt;<i>
</I>&gt;<i> One design decision to make is whether to keep the channel(s) open the
</I>&gt;<i> whole
</I>&gt;<i> time or open them when there is new data and then close them when the
</I>&gt;<i> transfer is done. Or maybe keep the text string channel open all the time
</I>&gt;<i> and open a file transfer channel on demand.
</I>&gt;<i>
</I>&gt;<i> What kind of performance characteristics do you need? Does latency on the
</I>&gt;<i> text strings matter? Are you going to transfer 10 files a day or 10000?
</I>&gt;<i>
</I>&gt;<i> &gt;    2. Should the files be mime-encoded at one end and mime-decoded at
</I>&gt;<i> the
</I>&gt;<i> &gt;    other so that file-type is automatically handled?
</I>&gt;<i>
</I>&gt;<i> MIME encoding gives you a way to send the file name and type and it can be
</I>&gt;<i> used over a text stream. However, the encoding of the data itself is not
</I>&gt;<i> really needed if your channel is 8-bit clear and everything except e-mail
</I>&gt;<i> is 8-bit clear nowadays (I think). For small files the overhead is
</I>&gt;<i> neglible
</I>&gt;<i> though.
</I>&gt;<i>
</I>&gt;<i> &gt;    3. I've read that there is a python package called paramiko that
</I>&gt;<i> &gt;    implements ssh2 transfer - how does this compare with twisted.conch?
</I>&gt;<i>
</I>&gt;<i> I don't know. One thing you could look at is which main loop you want to
</I>&gt;<i> use. If you want to use Twisted's reactor, conch would better integrate
</I>&gt;<i> with that of course. But if you want to use a GUI toolkit not supported by
</I>&gt;<i> Twisted, it would take some effort to merge the main loops, so then
</I>&gt;<i> running
</I>&gt;<i> paramiko in a thread might be easier.
</I>&gt;<i>
</I>&gt;<i> Another thing to look at is the license: paramiko is LGPL, which places
</I>&gt;<i> more
</I>&gt;<i> restrictions on its use than Twisted's MIT license. Depending on your
</I>&gt;<i> situation that may or may not be important.
</I>&gt;<i>
</I>&gt;<i> Bye,
</I>&gt;<i>                Maarten
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20071218/49733973/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20071218/49733973/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016440.html">[Twisted-Python] Server/Client bi-directional data-transfer -	need a solution
</A></li>
	<LI>Next message: <A HREF="016482.html">[Twisted-Python] Server/Client bi-directional data-transfer -	need a solution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16480">[ date ]</a>
              <a href="thread.html#16480">[ thread ]</a>
              <a href="subject.html#16480">[ subject ]</a>
              <a href="author.html#16480">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
