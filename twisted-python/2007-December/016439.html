<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] MultiService puzzler
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20MultiService%20puzzler&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016482.html">
   <LINK REL="Next"  HREF="016444.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] MultiService puzzler</H1>
    <B>Don Smith</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20MultiService%20puzzler&In-Reply-To="
       TITLE="[Twisted-Python] MultiService puzzler">donwsmith at gmail.com
       </A><BR>
    <I>Wed Dec 12 00:08:30 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="016482.html">[Twisted-Python] Server/Client bi-directional data-transfer -	need a solution
</A></li>
        <LI>Next message: <A HREF="016444.html">[Twisted-Python] MultiService puzzler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16439">[ date ]</a>
              <a href="thread.html#16439">[ thread ]</a>
              <a href="subject.html#16439">[ subject ]</a>
              <a href="author.html#16439">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I'm trying to build an app using MultiService. I need to have 2 services,
one that listens for UDP datagrams and another that can send those datagrams
to an ActiveMQ server via a Stomp client.

I can set up the two services just fine, but I'm stuck with how to call the
MQ service send method from the UDPServer instance.

Some code to illustrate:



class GetUDP(DatagramProtocol):

    def datagramReceived(self, datagram, address):
        print datagram,address
        #Send datagram to the queue server
        # I don't know how to access the send method for the Stomp client
service!



testq = internet.TCPClient(APPVARIABLES['queue_server'],
int(APPVARIABLES['queue_port']), connections.StompClientFactory
(username='',password='',queue='/queue/test'))
testq.setName('Testq')
testq.setServiceParent(MQService)


#create a UDP listener
#TODO: this should be driven by the config file
#reactor.listenUDP(42000, GetUDP())
internet.UDPServer(42000,GetUDP()).setServiceParent(MQService)
# Create an application as normal
application = service.Application(&quot;MQExample&quot;)

# Connect our MultiService to the application, just like a normal service.
MQService.setServiceParent(application)


Note: this is won't run exactly as is, but should give an idea of my
problem. I've setup the ActiveMQ Stomp client as 'testq'. I've setup the
UDPServer service to listen for UDP packets. I can get the UDP packets and
print them, but I can't figure out how to hand them to my Stomp client's
send() method. This is possible, right?

Thanks,

Don
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20071211/7ffb9910/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20071211/7ffb9910/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016482.html">[Twisted-Python] Server/Client bi-directional data-transfer -	need a solution
</A></li>
	<LI>Next message: <A HREF="016444.html">[Twisted-Python] MultiService puzzler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16439">[ date ]</a>
              <a href="thread.html#16439">[ thread ]</a>
              <a href="subject.html#16439">[ subject ]</a>
              <a href="author.html#16439">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
