<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: Twisted-Python Digest, Vol 45, Issue 20
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%3A%20Twisted-Python%20Digest%2C%20Vol%2045%2C%20Issue%2020&In-Reply-To=%3C318F79422ADC5041A93343721F84474D8B0656%40exchange.mypublisher.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="048973.html">
   <LINK REL="Next"  HREF="048978.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: Twisted-Python Digest, Vol 45, Issue 20</H1>
    <B>Doug Farrell</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%3A%20Twisted-Python%20Digest%2C%20Vol%2045%2C%20Issue%2020&In-Reply-To=%3C318F79422ADC5041A93343721F84474D8B0656%40exchange.mypublisher.local%3E"
       TITLE="[Twisted-Python] Re: Twisted-Python Digest, Vol 45, Issue 20">dfarrell at mypublisher.com
       </A><BR>
    <I>Mon Dec 17 08:39:16 MST 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="048973.html">[Twisted-Python] Re: Twisted-Python Digest, Vol 45, Issue 20
</A></li>
        <LI>Next message (by thread): <A HREF="048978.html">[Twisted-Python] Re: Twisted-Python Digest, Vol 45, Issue 20
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48974">[ date ]</a>
              <a href="thread.html#48974">[ thread ]</a>
              <a href="subject.html#48974">[ subject ]</a>
              <a href="author.html#48974">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ed,

I've been coding for awhile, but am fairly new to actually using
Twisted. I'm very interested the work you are doing because of a project
I'm thinking of at work. It's not nearly as complicated as your project,
and though we have a number of Linux servers at our disposal, they
aren't clustered at all. We manufacture photobooks, and I'd like to make
our manufacturing workflow more &quot;real time&quot; than it is. What I was
thinking of was building a Twisted backbone for the system and
allocating long term processing elements of the workflow to other
&quot;nodes&quot; using Pyro or PP (the python parallel processing module) tied to
DeferToThread objects. But your solution looks interesting and I'm going
to read more of the link you provide. Any suggestions you might have,
places you could point me for guidance would be greatly appreaciated.

Thanks for the link you provided,
Doug Farrell

-----Original Message-----
From: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-bounces at twistedmatrix.com</A>
[mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-bounces at twistedmatrix.com</A>] On Behalf Of Ed
Suominen
Sent: Monday, December 17, 2007 10:16 AM
To: Twisted general discussion
Subject: Re: [Twisted-Python] Re: Twisted-Python Digest, Vol 45, Issue
20

Yes, it sounds like your time investigating this was well spent.
Asynchronous programming is a whole new way of thinking. And after
programming with Twisted for several years now, I really can't think any
other way; blocking for results just seems backwards somehow.

In case anyone's interested, my own work with CPU-intensive processing
involves Monte Carlo analysis and Bayesian inference of statistical
models. I'm currently performing probabilistic random walks in 6+
dimensional parameter spaces using a cluster of PCs and processor cores.
All of the nodes are managed via my AsynCluster package,
<A HREF="http://foss.eepatents.com/AsynCluster,">http://foss.eepatents.com/AsynCluster,</A> which is built on AsynQueue and
of course Twisted itself. The main script instantiates a job client that
directs the AsynCluster server to dispatch hundreds of jobs at a time to
the cluster, the deferred results of which are processed with a single
&quot;defer.gatherResults&quot; call for each of thousands of iterations in a
&quot;defer.deferredGenerator&quot; loop.

Some of the nodes are significantly faster than others. That's fine,
because the dispatch queue just feeds more job calls to the faster
nodes. Right now each run of a million or so model evaluations is taking
about an hour apiece on 5-6 nodes. My new 3+ GHz quad-core PC is nearly
done, so things are about to ramp up some more...

By the way, if Twisted Matrix Laboratories wants to use the above as a
success story, they are welcome to do so. Twisted is a triumph of
computer science and the foundation of my current work.

Best regards,
Ed Suominen
<A HREF="http://foss.eepatents.com">http://foss.eepatents.com</A>


Josef Novak wrote:
&gt;<i> Thank you for all the feedback, it was quite useful.  I'm still quite
</I>&gt;<i> new to twisted, threads and quite the novice programmer, as my
</I>questions
&gt;<i> indicate; this project has been quite enlightening. As a solution I
</I>&gt;<i> decided that passing off the compute intensive operations in a proper
</I>&gt;<i> callback to another (set of) machine(s), which is dedicated to these
</I>&gt;<i> jobs was a more viable longterm solution than this start-stop madness
</I>I
&gt;<i> initially came up with.  However, attempting it initially resulted in
</I>a
&gt;<i> great opportunity for me to learn a bit about threads and processes,
</I>so
&gt;<i> it wasn't necessarily a waste of time.
</I>&gt;<i> Thanks again!
</I>&gt;<i> -joe
</I>&gt;<i> 
</I>&gt;<i> 2007/12/17, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-request at twistedmatrix.com</A>
</I>&gt;<i> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-request at twistedmatrix.com</A>&gt; &lt;
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-request at twistedmatrix.com</A>
</I>&gt;<i> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-request at twistedmatrix.com</A>&gt;&gt;:
</I>&gt;<i> 
</I>&gt;<i>     Send Twisted-Python mailing list submissions to
</I>&gt;<i>             <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>&gt;
</I>&gt;<i> 
</I>&gt;<i>     To subscribe or unsubscribe via the World Wide Web, visit
</I>&gt;<i>             
</I>&gt;<i>     <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>     or, via email, send a message with subject or body 'help' to
</I>&gt;<i>             <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-request at twistedmatrix.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-request at twistedmatrix.com</A>&gt;
</I>&gt;<i> 
</I>&gt;<i>     You can reach the person managing the list at
</I>&gt;<i>             <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-owner at twistedmatrix.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-owner at twistedmatrix.com</A>&gt;
</I>&gt;<i> 
</I>&gt;<i>     When replying, please edit your Subject line so it is more
</I>specific
&gt;<i>     than &quot;Re: Contents of Twisted-Python digest...&quot;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     Today's Topics:
</I>&gt;<i> 
</I>&gt;<i>        1. Re: Re: Twisted-Python Digest, Vol 45, Issue 18
</I>&gt;<i>     (<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at divmod.com</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at divmod.com</A>&gt;)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>
</I>----------------------------------------------------------------------
&gt;<i> 
</I>&gt;<i>     Message: 1
</I>&gt;<i>     Date: Sun, 16 Dec 2007 10:13:08 -0000
</I>&gt;<i>     From: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at divmod.com</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at divmod.com</A>&gt;
</I>&gt;<i>     Subject: Re: [Twisted-Python] Re: Twisted-Python Digest, Vol 45,
</I>Issue
&gt;<i>             18
</I>&gt;<i>     To: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>&gt;
</I>&gt;<i>     Message-ID:
</I>&gt;<i>             &lt;
</I>&gt;<i>
</I><A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">20071216101308.21558.555241615.divmod.xquotient.2970 at joule.divmod.com</A>
&gt;<i>
</I>&lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">20071216101308.21558.555241615.divmod.xquotient.2970 at joule.divmo</A>
d.com&gt;&gt;
&gt;<i> 
</I>&gt;<i>     Content-Type: text/plain; charset=&quot;utf-8&quot;; format=&quot;flowed&quot;
</I>&gt;<i> 
</I>&gt;<i>     On 10:04 am, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">josef.robert.novak at gmail.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">josef.robert.novak at gmail.com</A>&gt; wrote:
</I>&gt;<i>     &gt;Ok I see this will definitely not work as we are talking about
</I>threads
&gt;<i>     &gt;and
</I>&gt;<i>     &gt;not processes so os.kill is of no use to me.  I guess there is no
</I>way
&gt;<i>     &gt;to
</I>&gt;<i>     &gt;track these new threads and stop/pause/restart them based on some
</I>&gt;<i>     other
</I>&gt;<i>     &gt;decision logic?  Would have been nice if there were though...
</I>-joe
&gt;<i> 
</I>&gt;<i>     If you really think about it (and I mean really think about it,
</I>computer
&gt;<i>     science-y stuff, understanding what sharing state in threads
</I>really
&gt;<i>     means, how the Python interpreter happens to work now, considering
</I>all
&gt;<i>     the ways it could work) the idea of stopping and restarting
</I>threads is
&gt;<i>     inherently broken.  You might be able to make it work, by
</I>accident, for
&gt;<i>     a few simple cases, but there would be no reasonable way to
</I>guarantee
&gt;<i>     safety except for forcing the explicit use of channels to
</I>communicate
&gt;<i>     between threads.  If you're doing that, though, you're effectively
</I>&gt;<i>     using
</I>&gt;<i>     processes. SIGSTOP and friends work just fine on them :).
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     ------------------------------
</I>&gt;<i> 
</I>&gt;<i>     _______________________________________________
</I>&gt;<i>     Twisted-Python mailing list
</I>&gt;<i>     <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>&gt;
</I>&gt;<i>     <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     End of Twisted-Python Digest, Vol 45, Issue 20
</I>&gt;<i>     **********************************************
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>
</I>------------------------------------------------------------------------
&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>
_______________________________________________
Twisted-Python mailing list
<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="048973.html">[Twisted-Python] Re: Twisted-Python Digest, Vol 45, Issue 20
</A></li>
	<LI>Next message (by thread): <A HREF="048978.html">[Twisted-Python] Re: Twisted-Python Digest, Vol 45, Issue 20
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48974">[ date ]</a>
              <a href="thread.html#48974">[ thread ]</a>
              <a href="subject.html#48974">[ subject ]</a>
              <a href="author.html#48974">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
