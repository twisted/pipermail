<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Please help: having problems with the simplest	Twisted Server/Client Demo Example from the Tutorial
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Please%20help%3A%20having%20problems%20with%20the%20simplest%0A%09Twisted%20Server/Client%20Demo%20Example%20from%20the%20Tutorial&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016452.html">
   <LINK REL="Next"  HREF="016426.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Please help: having problems with the simplest	Twisted Server/Client Demo Example from the Tutorial</H1>
    <B>Sajit Rao</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Please%20help%3A%20having%20problems%20with%20the%20simplest%0A%09Twisted%20Server/Client%20Demo%20Example%20from%20the%20Tutorial&In-Reply-To="
       TITLE="[Twisted-Python] Please help: having problems with the simplest	Twisted Server/Client Demo Example from the Tutorial">sajitrao at gmail.com
       </A><BR>
    <I>Sat Dec  8 20:10:25 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="016452.html">[Twisted-Python] Re: Conch/insults -- using HistoricRecvLine
</A></li>
        <LI>Next message: <A HREF="016426.html">[Twisted-Python] Please help: having problems with the	simplest Twisted Server/Client Demo Example from the Tutorial
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16425">[ date ]</a>
              <a href="thread.html#16425">[ thread ]</a>
              <a href="subject.html#16425">[ subject ]</a>
              <a href="author.html#16425">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello all,

I've been trying the most basic (only a few lines) server/client code
example in the Twisted docs and can't get even that to work (code included
below). It's very frustrating, because I did get a simple server/client
example working without using Twisted. Any help will be greatly appreciated.


The problem is that the client never connects with the server. it prints
&quot;Started to Connect&quot; and hangs, then times out with an error. I'm trying
this on my laptop running WinXP - I first start the server program (from the
command line python prompt) and then the client program in another window on
the same machine. Please let me know what I'm doing wrong.

Server Code:

from twisted.internet.protocol import Factory, Protocol
from twisted.internet import reactor

class QOTD(Protocol):
         def connectionMade(self):
              self.transport.write(&quot;An apple a day keeps the doctor
away\r\n&quot;)
              self.transport.loseConnection()

factory = Factory()
factory.protocol = QOTD

reactor.listenTCP(8007, factory)
reactor.run()

Client Code:

from twisted.internet.protocol import Protocol, ClientFactory
from sys import stdout

class Echo(Protocol):
         def dataReceived(self, data):
              stdout.write(data)

class EchoClientFactory(ClientFactory):
         def startedConnecting(self, connector):
               print 'Started to connect.'

         def buildProtocol(self, addr):
              print 'Connected.'
              return Echo()

         def clientConnectionLost(self, connector, reason):
              print 'Lost connection. Reason:', reason

         def clientConnectionFailed(self, connector, reason):
              print 'Connection failed. Reason:', reason

from twisted.internet import reactor
reactor.connectTCP('localhost', 8007, EchoClientFactory())
reactor.run()


Result

Python 2.5.1 (r251:54863, Apr 18 2007, 08:51:08) [MSC v.1310 32 bit (Intel)]
on
win32
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt;<i> import QOTDServer
</I>
..then I start the client in a separate window...

Python 2.5.1 (r251:54863, Apr 18 2007, 08:51:08) [MSC v.1310 32 bit (Intel)]
on
win32
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt;<i> import EchoClient
</I>Started to connect.
Connection failed. Reason: [Failure instance: Traceback (failure with no
frames)
:<i> &lt;class 'twisted.internet.error.TimeoutError'&gt;: User timeout caused
</I>connection
failure.
][/b]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20071208/64a0ca7b/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20071208/64a0ca7b/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016452.html">[Twisted-Python] Re: Conch/insults -- using HistoricRecvLine
</A></li>
	<LI>Next message: <A HREF="016426.html">[Twisted-Python] Please help: having problems with the	simplest Twisted Server/Client Demo Example from the Tutorial
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16425">[ date ]</a>
              <a href="thread.html#16425">[ thread ]</a>
              <a href="subject.html#16425">[ subject ]</a>
              <a href="author.html#16425">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
