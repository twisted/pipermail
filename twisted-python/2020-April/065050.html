<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twistedchecker now uses pylint &gt;= 2.4.4, can we use type annotations in Twisted now?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twistedchecker%20now%20uses%20pylint%20%3E%3D%202.4.4%2C%0A%20can%20we%20use%20type%20annotations%20in%20Twisted%20now%3F&In-Reply-To=%3C4F554B45-897C-4209-845C-48721584EE0E%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="065049.html">
   <LINK REL="Next"  HREF="065051.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twistedchecker now uses pylint &gt;= 2.4.4, can we use type annotations in Twisted now?</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twistedchecker%20now%20uses%20pylint%20%3E%3D%202.4.4%2C%0A%20can%20we%20use%20type%20annotations%20in%20Twisted%20now%3F&In-Reply-To=%3C4F554B45-897C-4209-845C-48721584EE0E%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] twistedchecker now uses pylint &gt;= 2.4.4, can we use type annotations in Twisted now?">glyph at twistedmatrix.com
       </A><BR>
    <I>Wed Apr 22 01:27:28 MDT 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="065049.html">[Twisted-Python] twistedchecker now uses pylint &gt;= 2.4.4, can we use type annotations in Twisted now?
</A></li>
        <LI>Next message (by thread): <A HREF="065051.html">[Twisted-Python] Returning a response for an HTTP query that requires upstream IO.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65050">[ date ]</a>
              <a href="thread.html#65050">[ thread ]</a>
              <a href="subject.html#65050">[ subject ]</a>
              <a href="author.html#65050">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

&gt;<i> On Apr 21, 2020, at 8:57 PM, Craig Rodrigues &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">rodrigc at crodrigues.org</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> Last week I did some work and updated twistedchecker
</I>&gt;<i> so that it uses pylint &gt;= 2.4.4.  Before that, it was using a really old version
</I>&gt;<i> of pylint.
</I>&gt;<i> 
</I>&gt;<i> twistedchecker is run over the Twisted code as part of CI, and reports
</I>&gt;<i> various style issues.  Now that twistedchecker is using a newer pylint,
</I>&gt;<i> it should be compatible with newer Python language features.
</I>&gt;<i> 
</I>&gt;<i> Now that Twisted supports Python 3.5+ (with Python 2.7 support being dropped),
</I>&gt;<i> is it OK to start using newer features of the Python language in the Twisted codebase
</I>&gt;<i> such as type hints ( <A HREF="https://docs.python.org/3/library/typing.html">https://docs.python.org/3/library/typing.html</A> &lt;<A HREF="https://docs.python.org/3/library/typing.html">https://docs.python.org/3/library/typing.html</A>&gt; )?
</I>&gt;<i> 
</I>&gt;<i> I don't have experience with that feature, but it looks like it could be useful,
</I>&gt;<i> when combined with a tool like mypy.  Does anyone else have opinions on
</I>&gt;<i> type hints and mypy?
</I>
We use them at work, and on some other Twisted projects (Klein) and they're absolutely awesome.  Even with type comments, mypy is a huge upgrade to how one writes and maintains Python; with annotations, it's a major upgrade to the language.

The first step here, however, is to set up the CI infrastructure (tox, etc) to run mypy so that we can ensure that as we start writing type hints, we don't accidentally get any of them wrong and back ourselves into any corners.  Mypy can catch a surprising number of bugs with just the implicit type-checking it does on values that come from the standard library.  In fact, if we do `mypy src/twisted` right now, and exclude the things that would be fixed by adding in <A HREF="https://github.com/Shoobx/mypy-zope">https://github.com/Shoobx/mypy-zope</A> &lt;<A HREF="https://github.com/Shoobx/mypy-zope">https://github.com/Shoobx/mypy-zope</A>&gt; (&quot;method must have at least one argument&quot; zope.interface definition errors) and fixing up some simple type hints (has no attribute &quot;skip&quot;) we still have almost a thousand type errors that we should figure out a way to start correcting or systematically skipping if they're false positives.  I guarantee you there's at least one real bug in there though.

As you know, I tend to be pretty cautious about sweeping changes to the code that might make it harder to maintain on older versions - type hints are an exception where I think it's absolutely worthwhile to go All In early on.  But CI infrastructure for this stuff is a must-have and it might be tricky to get set up initially.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20200422/cd842e96/attachment.htm&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="065049.html">[Twisted-Python] twistedchecker now uses pylint &gt;= 2.4.4, can we use type annotations in Twisted now?
</A></li>
	<LI>Next message (by thread): <A HREF="065051.html">[Twisted-Python] Returning a response for an HTTP query that requires upstream IO.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65050">[ date ]</a>
              <a href="thread.html#65050">[ thread ]</a>
              <a href="subject.html#65050">[ subject ]</a>
              <a href="author.html#65050">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
