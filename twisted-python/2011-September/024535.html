<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Protection against flooding
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Protection%20against%20flooding&In-Reply-To=4E788C4E.7040206%40delphexonline.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024530.html">
   <LINK REL="Next"  HREF="024542.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Protection against flooding</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Protection%20against%20flooding&In-Reply-To=4E788C4E.7040206%40delphexonline.com"
       TITLE="[Twisted-Python] Protection against flooding">glyph at twistedmatrix.com
       </A><BR>
    <I>Tue Sep 20 13:29:29 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="024530.html">[Twisted-Python] Protection against flooding
</A></li>
        <LI>Next message: <A HREF="024542.html">[Twisted-Python] trivial typo in core doc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24535">[ date ]</a>
              <a href="thread.html#24535">[ thread ]</a>
              <a href="subject.html#24535">[ subject ]</a>
              <a href="author.html#24535">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Sep 20, 2011, at 8:51 AM, Don Schoeman wrote:

&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> Before I start digging in the Twisted code, I'd just like to bump this off you in case the solution is obvious...
</I>&gt;<i> 
</I>&gt;<i> I have a lot of clients having permanent connections to my TCP server. These clients are devices that will buffer data if it can't connect to the server. I can see a possible problem in the future if/when for whatever reason there is downtime on my server or the network and all these devices start connecting and transmitting their buffered data once the server is back up, potentially causing server flooding.
</I>&gt;<i> 
</I>&gt;<i> What would be a good area to start looking into preventing something like this from happening? My first thoughts are to simply limit an X number of new connections per minute (or per X seconds) and to simply immediately drop new connections if it exceeds that limit. (I'd probably implement this on Protocol level). Over time the connections should theoretically normalise as the buffered data on the devices are also limited.
</I>&gt;<i> 
</I>&gt;<i> Of course it would be better to not allow the connections from being established in the first place if the limits are exceeded (will be great for DDOS protection), but I have a feeling that might be difficult to achieve.
</I>&gt;<i> 
</I>&gt;<i> Any thoughts/tips or even links to examples?
</I>
My suggestion would be &quot;try it and see what happens&quot;.  You may be surprised to find that your Twisted app deals with the load just fine.  I've seen several applications for which this is the case.

If there really is an issue, a running system will give you a _lot_ more information about what the issue might be than a guess in advance :).

You may rest assured, however, that Twisted has all the APIs you will need to use to shed load, if that is in fact necessary; you can call stopListening() on the Port object that is currently accepting your connections, you can call stopReading() which will take it out of the reactor (but allow the listen queue to continue backing up); you can call pauseProducing() on any connection that is feeding you too much data.

Does this answer your question?


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20110920/642cf524/attachment-0001.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20110920/642cf524/attachment-0001.htm</A> 
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024530.html">[Twisted-Python] Protection against flooding
</A></li>
	<LI>Next message: <A HREF="024542.html">[Twisted-Python] trivial typo in core doc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24535">[ date ]</a>
              <a href="thread.html#24535">[ thread ]</a>
              <a href="subject.html#24535">[ subject ]</a>
              <a href="author.html#24535">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
