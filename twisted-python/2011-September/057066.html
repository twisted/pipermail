<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Bug in Finger Tutorial?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Bug%20in%20Finger%20Tutorial%3F&In-Reply-To=%3CCAG4NAK5sHvGcUzdiE%2BWytBnhYC3pPBBuJ4hFLc%3DLAd-F1LOULA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="057065.html">
   <LINK REL="Next"  HREF="057067.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Bug in Finger Tutorial?</H1>
    <B>David Kao</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Bug%20in%20Finger%20Tutorial%3F&In-Reply-To=%3CCAG4NAK5sHvGcUzdiE%2BWytBnhYC3pPBBuJ4hFLc%3DLAd-F1LOULA%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Bug in Finger Tutorial?">a.libran at gmail.com
       </A><BR>
    <I>Thu Sep 29 15:44:51 MDT 2011</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="057065.html">[Twisted-Python] Bug in Finger Tutorial?
</A></li>
        <LI>Next message (by thread): <A HREF="057067.html">[Twisted-Python] Bug in Finger Tutorial?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57066">[ date ]</a>
              <a href="thread.html#57066">[ thread ]</a>
              <a href="subject.html#57066">[ subject ]</a>
              <a href="author.html#57066">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'll take care of the first question.

&gt;<i>From The Evolution of Finger: making a finger library,
</I>
h = internet.TCPServer(79, IFingerFactory(f))

notice IFingerFactory? If you read the earlier parts of the tutorial,
you'll see stuff like components.registerAdapter. It's just magic to
create a FingerFactoryFromService, giving its constructor f, the
&quot;Finger Service&quot;. What happens here is that &quot;f&quot;, the Finger Service,
is different from the service.Service within the Twisted Framework.
You might as well call &quot;f&quot;, the Finger Service, &quot;Finger Shared Data&quot;.

What really happens here is

h is the service that has parent s, MultiService. s is then returned
and started by the application.

h contains a factory that gets run.

The factory knows &quot;f&quot;, the Finger Service, which has nothing to do
with twisted's mechanism. It's more of a demo for the component based
framework. f is a way to share data and methods and states across
multiple factories.

I am also very new to twisted, so I **hope** this understanding of
mine is correct ...

I strongly recommend you read through the entire tutorial. They build
very incrementally, so most of the time the code is repeated so you
can just skim through it if you had started from the beginning.

David Kao



On Fri, Sep 30, 2011 at 5:28 AM, Dorian Raymer &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">deldotdr at gmail.com</A>&gt; wrote:
&gt;<i> Hello,
</I>&gt;<i> I am confused about how the FingerService gets started in the
</I>&gt;<i> finger/finger.py makeService function. It is never assigned a service parent
</I>&gt;<i> and it can't service getUser requests if its startService method isn't
</I>&gt;<i> called; you get an AttributeError: &quot;no attribute 'users'&quot; the way it works
</I>&gt;<i> now. Is this a bug?
</I>&gt;<i> The most sensible thing, in this case, seems to be setting the FingerService
</I>&gt;<i> parent to be the MultiService container that all of the interent services
</I>&gt;<i> are added to in the makeService function. Is that correct?
</I>&gt;<i> I'm wondering if their are any other strategies people use for starting
</I>&gt;<i> non-internet services.
</I>&gt;<i> For instance, if instead of reading a file to get to my user db, I might
</I>&gt;<i> want to start a redis client and read from redis to service a getUser call.
</I>&gt;<i> But that means I'd want to make sure the startService call succeeded (the
</I>&gt;<i> redis connection was made) before one of the internet services tries to use
</I>&gt;<i> the FingerService (a timing problem that doesn't exist when just reading a
</I>&gt;<i> file)...or something. Maybe I'm really just wondering how the twisted
</I>&gt;<i> application framework handles exceptions that occur for startService calls.
</I>&gt;<i> Maybe I need something else to handle that kind of thing?
</I>&gt;<i> I'm also wondering if it's ever a good idea to make a extension
</I>&gt;<i> of ServerFactory (that adapts a Service) that calls Service.startService
</I>&gt;<i> when Factory.startServer is called (and Service.stopService when
</I>&gt;<i> Factory.stopFactory is called)?
</I>&gt;<i> And I'm looking for more use cases/projects (beyond the finger tutorial)
</I>&gt;<i> that really showcase the twisted application framework. Any references would
</I>&gt;<i> be appreciated!
</I>&gt;<i> Thanks!
</I>&gt;<i> -Dorian
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="057065.html">[Twisted-Python] Bug in Finger Tutorial?
</A></li>
	<LI>Next message (by thread): <A HREF="057067.html">[Twisted-Python] Bug in Finger Tutorial?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57066">[ date ]</a>
              <a href="thread.html#57066">[ thread ]</a>
              <a href="subject.html#57066">[ subject ]</a>
              <a href="author.html#57066">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
