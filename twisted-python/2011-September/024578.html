<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How do I know the server from reactor.listenTCP already started listening?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20How%20do%20I%20know%20the%20server%20from%0A%20reactor.listenTCP%20already%20started%20listening%3F&In-Reply-To=CAG4NAK5YfQ7oH1DRie6bXt75ouGtTWM7GCsu-M_VhEVZJ%2BbMRQ%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024577.html">
   <LINK REL="Next"  HREF="024580.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How do I know the server from reactor.listenTCP already started listening?</H1>
    <B>Pantelis Theodosiou</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20How%20do%20I%20know%20the%20server%20from%0A%20reactor.listenTCP%20already%20started%20listening%3F&In-Reply-To=CAG4NAK5YfQ7oH1DRie6bXt75ouGtTWM7GCsu-M_VhEVZJ%2BbMRQ%40mail.gmail.com"
       TITLE="[Twisted-Python] How do I know the server from reactor.listenTCP already started listening?">ypercube at gmail.com
       </A><BR>
    <I>Tue Sep 27 07:08:52 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="024577.html">[Twisted-Python] How do I know the server from reactor.listenTCP already started listening?
</A></li>
        <LI>Next message: <A HREF="024580.html">[Twisted-Python] How do I know the server from	reactor.listenTCP	already started listening?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24578">[ date ]</a>
              <a href="thread.html#24578">[ thread ]</a>
              <a href="subject.html#24578">[ subject ]</a>
              <a href="author.html#24578">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Sep 27, 2011 at 1:55 PM, David Kao &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">a.libran at gmail.com</A>&gt; wrote:

&gt;<i> My bad for not being clear, but actually, the client program is a
</I>&gt;<i> separate binary that I plan to spawn as a subprocess, which should
</I>&gt;<i> connect to the server.
</I>&gt;<i>
</I>&gt;<i> Basically, the answer I am getting now is that I am never sure when
</I>&gt;<i> the server starts listening on a port. I need to take it on faith that
</I>&gt;<i> within 1 sec of running twistd the port is being listened. Or perhaps
</I>&gt;<i> check it using netstat or something from the outside ... ugly.
</I>&gt;<i>
</I>
So, you want to be sure that the server is listening before trying to
connect from an independent client? Why?
Shouldn't this client just try to connect and act accordingly if there is no
server listening?

It's as if you want to be sure that <A HREF="http://www.google.com/">http://www.google.com/</A> is up and will
answer you.
Why not just type <A HREF="http://www.google.com/">http://www.google.com/</A>  in a browser?


&gt;<i>
</I>&gt;<i> I have gone through almost the entire tutorial. I am looking for the
</I>&gt;<i> **source code** for internet.TCPServer
</I>&gt;<i>
</I>&gt;<i> David Kao
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tue, Sep 27, 2011 at 5:53 PM, Enrique Samson Jr. &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">enriquejr at gmail.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; On Tue, Sep 27, 2011 at 5:28 PM, David Kao &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">a.libran at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I have an existing program that connects to a TCP port to serve data. I
</I>&gt;<i> &gt;&gt; need to
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; 1) start a TCPServer
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; 2) start my program and tell it which port to connect to
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; In case you already did, you might want to take a deeper look again at
</I>&gt;<i> the
</I>&gt;<i> &gt; Twisted Core Documentation. The Writing a TCP Server section answers your
</I>&gt;<i> &gt; question #1, Writing a TCP Client section answers your question #2.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Actually, I want to do all this in twistd. And now I am looking at
</I>&gt;<i> &gt;&gt; something like this which is even a bigger headache
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; internet.TCPServer( 4321, serverFactory
</I>&gt;<i> &gt;&gt; ),setServiceParent(serviceCollection)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Of course you can do all these in twisted. But in this context, it
</I>&gt;<i> doesn't
</I>&gt;<i> &gt; make sense to run both in the same twisted application.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I revise my question.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Can I rely on reactor.listenTCP being called right after
</I>&gt;<i> &gt;&gt; serverFactory.startFactory is called?
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I hope listenTCP isn't queued as a reactor &quot;task&quot; after
</I>&gt;<i> &gt;&gt; serverFactory.startFactory. If it's done all in one uninterrupted
</I>&gt;<i> &gt;&gt; thread execution, then I can just queue &quot;start_the_other_program&quot;
</I>&gt;<i> &gt;&gt; inside startFactory via a reactor.callLater. Correct?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The reverse is what is guaranteed: serverFactory.startFactory will be
</I>&gt;<i> called
</I>&gt;<i> &gt; when you do reactor.listenTCP.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Enrique, thanks for the link. I think I saw that too. I traced it
</I>&gt;<i> &gt;&gt; since reactor.listenTCP returns a port, and so on and so forth.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; However, I have not been able to find code for internet.TCPServer. I
</I>&gt;<i> &gt;&gt; would like to be able to trace the code top down. Can someone help?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; You can find it here.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Thanks!
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; David Kao
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --Enrique
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Twisted-Python mailing list
</I>&gt;<i> &gt; <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> &gt; <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20110927/12e40882/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20110927/12e40882/attachment.htm</A> 
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024577.html">[Twisted-Python] How do I know the server from reactor.listenTCP already started listening?
</A></li>
	<LI>Next message: <A HREF="024580.html">[Twisted-Python] How do I know the server from	reactor.listenTCP	already started listening?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24578">[ date ]</a>
              <a href="thread.html#24578">[ thread ]</a>
              <a href="subject.html#24578">[ subject ]</a>
              <a href="author.html#24578">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
