<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Interfaces and adapters
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Interfaces%20and%20adapters&In-Reply-To=%3C20050826140910.77a9ce97.jk%40ospaz.ru%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="043740.html">
   <LINK REL="Next"  HREF="043748.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Interfaces and adapters</H1>
    <B>en.karpachov at ospaz.ru</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Interfaces%20and%20adapters&In-Reply-To=%3C20050826140910.77a9ce97.jk%40ospaz.ru%3E"
       TITLE="[Twisted-Python] Interfaces and adapters">en.karpachov at ospaz.ru
       </A><BR>
    <I>Fri Aug 26 04:09:10 MDT 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="043740.html">[Twisted-Python] Interfaces and adapters
</A></li>
        <LI>Next message (by thread): <A HREF="043748.html">[Twisted-Python] Interfaces and adapters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43743">[ date ]</a>
              <a href="thread.html#43743">[ thread ]</a>
              <a href="subject.html#43743">[ subject ]</a>
              <a href="author.html#43743">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 26 Aug 2005 18:40:07 +1000
Andrew Bennetts wrote:

&gt;<i> On Fri, Aug 26, 2005 at 12:00:39PM +0400, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">en.karpachov at ospaz.ru</A> wrote:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; If I, say, adapt WovenContext to ISession, I get a session object which
</I>&gt;<i> &gt; does not implement the ISession interface itself. Absurdly.
</I>&gt;<i> 
</I>&gt;<i> Yep.  But that's a trivially fixable bug in that adapter.  And this is
</I>
Should it be considered as a bug then?

&gt;<i> exactly why raising an exception would be bad -- it will break code that
</I>&gt;<i> otherwise works fine.  Even though such code is arguably buggy, Twisted
</I>
One could say that the code in question is already broken. At least, the
exception would point to the programmer that they forgot to declare what
interfaces are implemented by the adapter.

&gt;<i> tries reasonably hard not to break backwards compatibility without warning.
</I>&gt;<i> We couldn't raise CannotAdapt here without first giving DeprecationWarnings
</I>&gt;<i> for at least one release.
</I>
Well, if raising CannotAdapt is not appropriate, then probably some
decorator to AdapterFactory could help? Something like (pseudocode):

def affirm(adapterFactory, interface):

     def safe_factory(orig):
          adapter = adapterFactory(orig)
          if not interface.providedBy(adapter):
               warn(&quot;Failed to adapt&quot;)
               adapter = MakeTheObjectToProvide(adapter, interface)
          return adapter

     return safe_factory

adapterFactory = affirm(adapterFactory, interface)

-- 
jk


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="043740.html">[Twisted-Python] Interfaces and adapters
</A></li>
	<LI>Next message (by thread): <A HREF="043748.html">[Twisted-Python] Interfaces and adapters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43743">[ date ]</a>
              <a href="thread.html#43743">[ thread ]</a>
              <a href="subject.html#43743">[ subject ]</a>
              <a href="author.html#43743">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
