<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] simple spawnProcess
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20simple%20spawnProcess&In-Reply-To=3E7F9D21F31D094DB7721553EA2CD1B5E72813%40NTXBOIMBX15.micron.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011099.html">
   <LINK REL="Next"  HREF="011103.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] simple spawnProcess</H1>
    <B>Jp Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20simple%20spawnProcess&In-Reply-To=3E7F9D21F31D094DB7721553EA2CD1B5E72813%40NTXBOIMBX15.micron.com"
       TITLE="[Twisted-Python] simple spawnProcess">exarkun at divmod.com
       </A><BR>
    <I>Wed Aug 10 02:04:14 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011099.html">[Twisted-Python] simple spawnProcess
</A></li>
        <LI>Next message: <A HREF="011103.html">[Twisted-Python] [Twisted - Python] Telnet client &amp; keeping	connection alive
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11101">[ date ]</a>
              <a href="thread.html#11101">[ thread ]</a>
              <a href="subject.html#11101">[ subject ]</a>
              <a href="author.html#11101">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 9 Aug 2005 16:34:17 -0600, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jmbenski at micron.com</A> wrote:
&gt;<i>I'm new to twisted, Python, and network programming in general, so this question has probably been answered many times.  Although after searching for a few days I haven't seen it.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>I'm trying to set up a simple process that accepts data through stdin and prints the response to stdout.  It is a continuously running process that will keep waiting for more input on stdin and will continue writing to stdout until a shutdown command is sent to it.  I started the reactor in a separate thread so that my main thread doesn't block while waiting for a response and I can send commands to the spawned process.
</I>&gt;<i>
</I>
Why are you using threads at all?  Twisted's process support presents an asynchronous API, like most other things Twisted does.  You don't need threads here.  Their presence is what is breaking your program.  You cannot call reactor.run() from one thread and /any/ other Twisted API (unless explicitly marked as an exception) from a different thread.  In particular, reactor.spawnProcess() and transport.write() in the code you included are being called from the wrong thread.

Jp


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011099.html">[Twisted-Python] simple spawnProcess
</A></li>
	<LI>Next message: <A HREF="011103.html">[Twisted-Python] [Twisted - Python] Telnet client &amp; keeping	connection alive
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11101">[ date ]</a>
              <a href="thread.html#11101">[ thread ]</a>
              <a href="subject.html#11101">[ subject ]</a>
              <a href="author.html#11101">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
