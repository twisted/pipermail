<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Ftp client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Ftp%20client&In-Reply-To=%3C42F0DA6E.8090804%40unipex.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="043580.html">
   <LINK REL="Next"  HREF="043583.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Ftp client</H1>
    <B>Michele Petrazzo</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Ftp%20client&In-Reply-To=%3C42F0DA6E.8090804%40unipex.it%3E"
       TITLE="[Twisted-Python] Ftp client">michele.petrazzo at unipex.it
       </A><BR>
    <I>Wed Aug  3 08:53:34 MDT 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="043580.html">[Twisted-Python] Ftp client
</A></li>
        <LI>Next message (by thread): <A HREF="043583.html">[Twisted-Python] Ftp client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43582">[ date ]</a>
              <a href="thread.html#43582">[ thread ]</a>
              <a href="subject.html#43582">[ subject ]</a>
              <a href="author.html#43582">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Andrew Bennetts wrote:

&gt;&gt;<i>Is it possible to &quot;translate&quot; my very short and simple code to twisted 
</I>&gt;&gt;<i>ftpclint?
</I>&gt;<i> 
</I>&gt;<i> Probably.  If you need to send non-standard commands, you can do that with
</I>&gt;<i> ftpclient.queueStringCommand(&quot;BLAH blah blah&quot;).
</I>&gt;<i> 
</I>&gt;<i> 
</I>
&lt;-cut-&gt;

&gt;<i> 
</I>&gt;<i> The right way is to re-use the existing FTPClient logic as much as possible,
</I>&gt;<i> rather than reimplementing it.
</I>&gt;<i> 
</I>&gt;<i> What specific problems are you having with twisted.protocols.ftp.FTPClient?
</I>&gt;<i> 
</I>
I change the ftpclient example with this code:

def run():
  # Create the client
  creator = ClientCreator(reactor, FTPClient, user, passwd, 0)
  creator.connectTCP('192.168.1.1', 4559).addCallback(connectionMade)
  reactor.run()

def connectionMade(ftpClient):
  # Get the current working directory
  ftpClient.pwd().addCallbacks(success, fail)


One problem is that if the user has no password, I receive an error [1] 
(if I try to connect with a simple ftp client, when I connect to the 
server, if it see that I have no password, it connect me without 
password request), however if the user _has_ password, the client 
connect correctly.

Second:
if the user _has_ password, so I can connect, I want to send &quot;LIST 
status&quot; command, if I use:

ftpClient.queueStringCommand(&quot;LIST&quot;).addCallbacks(success, fail)

I receive [2], and if I use:

fileList = FTPFileListProtocol()
d = ftpClient.list(' status ', fileList)
d.addCallbacks(showFiles, fail, callbackArgs=(fileList,))

I receive [3]



Returned data:

[1]
Failed.  Error was:
[Failure instance: Traceback (failure with no frames): 
twisted.protocols.ftp.ConnectionLost: ('FTP connection lost', 
&lt;twisted.python.failure.Failure twisted.protocols.ftp.CommandFailed&gt;)


[2]
Success!  Got response:
---
257 &quot;/&quot; is the current directory.
---

Failed.  Error was:
[Failure instance: Traceback (failure with no frames): 
twisted.protocols.ftp.CommandFailed: ['425 Cannot build data connection: 
Connection refused.']


[3]

Success!  Got response:
---
257 &quot;/&quot; is the current directory.
---
Failed.  Error was:
[Failure instance: Traceback (failure with no frames): &lt;type 'tuple'&gt;: 
(&lt;twisted.python.failure.Failure &lt;type 'tuple'&gt;&gt;, 0)
]


&gt;<i> -Andrew.
</I>&gt;<i> 
</I>
Thanks,
Michele


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="043580.html">[Twisted-Python] Ftp client
</A></li>
	<LI>Next message (by thread): <A HREF="043583.html">[Twisted-Python] Ftp client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43582">[ date ]</a>
              <a href="thread.html#43582">[ thread ]</a>
              <a href="subject.html#43582">[ subject ]</a>
              <a href="author.html#43582">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
