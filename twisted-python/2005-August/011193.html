<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twistd and SqlObject
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twistd%20and%20SqlObject&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011257.html">
   <LINK REL="Next"  HREF="011194.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twistd and SqlObject</H1>
    <B>Graham Stratton</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twistd%20and%20SqlObject&In-Reply-To="
       TITLE="[Twisted-Python] twistd and SqlObject">gns24 at sphinx.mythic-beasts.com
       </A><BR>
    <I>Tue Aug 23 08:17:40 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011257.html">[Twisted-Python] Re: [Twisted-commits] r13641 - No,	consigning copyright means it is _not_ (C) you.	Let's keep this file	simple, please.
</A></li>
        <LI>Next message: <A HREF="011194.html">[Twisted-Python] twistd and SqlObject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11193">[ date ]</a>
              <a href="thread.html#11193">[ thread ]</a>
              <a href="subject.html#11193">[ subject ]</a>
              <a href="author.html#11193">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm sure the answer to this question should be obvious, but I can't find
it.

I've written a twisted server which recieves a request, looks up the
requested data in its cache, and returns the data.  It accesses its
database via SQLObject - the database is small, so I don't care that it
blocks.  Twisted has certainly made this very simple.

I now want to run that same process using twistd (-noy), but SqlObject
gives the error
Failed to load application: 'NoneType' object has no attribute
'tableExists'

on the last line of the listing below, which works fine when run normally.

I guess I'm being very naive about the way in which twistd works, but I
can't find any comprehensive documentation saying what it does.

Thanks for any pointers,

Graham



import _mysql_exceptions
from elementtree.ElementTree import Element, SubElement, ElementTree,
parse
from twisted.internet import reactor
from twisted.web import server
from twisted.web.resource import Resource
from twisted.web.client import getPage
from cStringIO import StringIO
import sqlobject
import datetime
now = datetime.datetime.now

cacheDurationDays = 90
__connection__ = sqlobject.MySQLConnection(host='localhost',
db='DomainInfoCache',
                                           user='root', passwd='chubchub')

class CachedDomain(sqlobject.SQLObject):
    &quot;&quot;&quot;The table that the data is cached in&quot;&quot;&quot;
    domain = sqlobject.StringCol(length=80)
    alexa3monthtraffic = sqlobject.FloatCol()
    lastUpdate = sqlobject.DateTimeCol()
    domainIndex = sqlobject.DatabaseIndex({'column':domain, 'length':8})

CachedDomain.createTable(ifNotExists=True)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011257.html">[Twisted-Python] Re: [Twisted-commits] r13641 - No,	consigning copyright means it is _not_ (C) you.	Let's keep this file	simple, please.
</A></li>
	<LI>Next message: <A HREF="011194.html">[Twisted-Python] twistd and SqlObject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11193">[ date ]</a>
              <a href="thread.html#11193">[ thread ]</a>
              <a href="subject.html#11193">[ subject ]</a>
              <a href="author.html#11193">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
