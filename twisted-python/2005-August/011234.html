<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Interfaces and adapters
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Interfaces%20and%20adapters&In-Reply-To=8524B0C8-0455-4BB6-85C0-1C8EBAC8FD02%40redivi.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011230.html">
   <LINK REL="Next"  HREF="011231.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Interfaces and adapters</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Interfaces%20and%20adapters&In-Reply-To=8524B0C8-0455-4BB6-85C0-1C8EBAC8FD02%40redivi.com"
       TITLE="[Twisted-Python] Interfaces and adapters">andrew-twisted at puzzling.org
       </A><BR>
    <I>Fri Aug 26 04:47:36 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011230.html">[Twisted-Python] Interfaces and adapters
</A></li>
        <LI>Next message: <A HREF="011231.html">[Twisted-Python] Interfaces and adapters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11234">[ date ]</a>
              <a href="thread.html#11234">[ thread ]</a>
              <a href="subject.html#11234">[ subject ]</a>
              <a href="author.html#11234">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Aug 26, 2005 at 12:54:47AM -0700, Bob Ippolito wrote:
&gt;<i> 
</I>&gt;<i> On Aug 25, 2005, at 11:30 PM, Andrew Bennetts wrote:
</I>[...]
&gt;<i> &gt;
</I>&gt;<i> &gt;That's a pretty reasonable expectation.  I think emitting a warning  if
</I>&gt;<i> &gt;this doesn't hold would be a sane thing to do, and it wouldn't break any
</I>&gt;<i> &gt;code.
</I>&gt;<i> 
</I>&gt;<i> It would certainly slow it down, though.  I think this is a  
</I>&gt;<i> &quot;consenting adults&quot; kind of scenario.  If someone registers an  
</I>&gt;<i> adapter, they probably didn't do it by accident!
</I>
Right.  The bug the OP has here isn't that the adapter shouldn't have been
registered, but that the adapter fails to properly declare what interfaces
it provides, so that the result of IBar(IFoo(x)) will fail even though x -&gt;
IFoo and IFoo -&gt; IBar adapters are registered.

The performance question is important... benchmarks of any changes here
would be a good idea.

A weaker solution would be to only check at registration time, but that's
uglier, because it only works for adapters that are classes, and that don't
have creative __new__ methods.  That's almost certainly 99% of adapters, but
ugly and incomplete solutions make me nervous.

Anyway, the underlying zope.interface machinery allows this -- and includes
doctest documentation that relies on this (it registers *ints* as adapters,
iirc!).  I'm inclined to agree with your &quot;consenting adults&quot; approach, but I
don't feel strongly either way.

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011230.html">[Twisted-Python] Interfaces and adapters
</A></li>
	<LI>Next message: <A HREF="011231.html">[Twisted-Python] Interfaces and adapters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11234">[ date ]</a>
              <a href="thread.html#11234">[ thread ]</a>
              <a href="subject.html#11234">[ subject ]</a>
              <a href="author.html#11234">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
