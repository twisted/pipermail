<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Ftp client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Ftp%20client&In-Reply-To=%3C20050803152148.GD30038%40trogdor.home.puzzling.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="043582.html">
   <LINK REL="Next"  HREF="043584.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Ftp client</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Ftp%20client&In-Reply-To=%3C20050803152148.GD30038%40trogdor.home.puzzling.org%3E"
       TITLE="[Twisted-Python] Ftp client">andrew-twisted at puzzling.org
       </A><BR>
    <I>Wed Aug  3 09:21:48 MDT 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="043582.html">[Twisted-Python] Ftp client
</A></li>
        <LI>Next message (by thread): <A HREF="043584.html">[Twisted-Python] Ftp client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43583">[ date ]</a>
              <a href="thread.html#43583">[ thread ]</a>
              <a href="subject.html#43583">[ subject ]</a>
              <a href="author.html#43583">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Aug 03, 2005 at 04:53:34PM +0200, Michele Petrazzo wrote:
&gt;<i> Andrew Bennetts wrote:
</I>[...]
&gt;<i> &gt;
</I>&gt;<i> &gt;What specific problems are you having with twisted.protocols.ftp.FTPClient?
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> I change the ftpclient example with this code:
</I>&gt;<i> 
</I>&gt;<i> def run():
</I>&gt;<i>  # Create the client
</I>&gt;<i>  creator = ClientCreator(reactor, FTPClient, user, passwd, 0)
</I>&gt;<i>  creator.connectTCP('192.168.1.1', 4559).addCallback(connectionMade)
</I>&gt;<i>  reactor.run()
</I>&gt;<i> 
</I>&gt;<i> def connectionMade(ftpClient):
</I>&gt;<i>  # Get the current working directory
</I>&gt;<i>  ftpClient.pwd().addCallbacks(success, fail)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> One problem is that if the user has no password, I receive an error [1] 
</I>&gt;<i> (if I try to connect with a simple ftp client, when I connect to the 
</I>&gt;<i> server, if it see that I have no password, it connect me without 
</I>&gt;<i> password request), however if the user _has_ password, the client 
</I>&gt;<i> connect correctly.
</I>
Before connecting, can you add:

    FTPClient.debug = True

Then we can see a full transcript of what's going on.

&gt;<i> Second:
</I>&gt;<i> if the user _has_ password, so I can connect, I want to send &quot;LIST 
</I>&gt;<i> status&quot; command, if I use:
</I>&gt;<i> 
</I>&gt;<i> ftpClient.queueStringCommand(&quot;LIST&quot;).addCallbacks(success, fail)
</I>&gt;<i> 
</I>&gt;<i> I receive [2], and if I use:
</I>
Right.  LIST requires a data connection to be established, and directly
issuing a LIST without arranging for a PASV or PORT command and associated
connection will fail.

&gt;<i> fileList = FTPFileListProtocol()
</I>&gt;<i> d = ftpClient.list(' status ', fileList)
</I>&gt;<i> d.addCallbacks(showFiles, fail, callbackArgs=(fileList,))
</I>&gt;<i> 
</I>&gt;<i> I receive [3]
</I>
Can you retry this with latest Twisted from SVN?  There's a bug in error
reporting and DeferredLists here that's been fixed in SVN that will make
this much clearer.

I don't understand why you're passing ' status ' instead of just 'status',
though.

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="043582.html">[Twisted-Python] Ftp client
</A></li>
	<LI>Next message (by thread): <A HREF="043584.html">[Twisted-Python] Ftp client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43583">[ date ]</a>
              <a href="thread.html#43583">[ thread ]</a>
              <a href="subject.html#43583">[ subject ]</a>
              <a href="author.html#43583">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
