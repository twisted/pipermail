<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Interfaces and adapters
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Interfaces%20and%20adapters&In-Reply-To=%3C20050827130921.024a1e33.jk%40ospaz.ru%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="043748.html">
   <LINK REL="Next"  HREF="043751.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Interfaces and adapters</H1>
    <B>en.karpachov at ospaz.ru</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Interfaces%20and%20adapters&In-Reply-To=%3C20050827130921.024a1e33.jk%40ospaz.ru%3E"
       TITLE="[Twisted-Python] Interfaces and adapters">en.karpachov at ospaz.ru
       </A><BR>
    <I>Sat Aug 27 03:09:21 MDT 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="043748.html">[Twisted-Python] Interfaces and adapters
</A></li>
        <LI>Next message (by thread): <A HREF="043751.html">[Twisted-Python] Interfaces and adapters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43750">[ date ]</a>
              <a href="thread.html#43750">[ thread ]</a>
              <a href="subject.html#43750">[ subject ]</a>
              <a href="author.html#43750">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 26 Aug 2005 23:22:38 -0400
<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at divmod.com</A> wrote:

&gt;<i> Adaptation is slow enough as it is.  Enforcing this convention would be a fairly substantial cost for something which is already multiplying the cost of what would normally be a function call by tens or hundreds.
</I>&gt;<i> 
</I>&gt;<i> Not enforcing it is also in the spirit of Python's &quot;language for consenting adults&quot;.  If your object really doesn't implement the interface, the unit tests will catch it, right? ;-)
</I>
For an object I own, yes, that's right. For someone else's objects, I'm not
sure how to deal with them.

The question is, if the object doesn't declare itself provides the
interface it adapts to, should this be considered as a bug? If so, then we
have it with twisted.web.server.Session and nevow.guard.GuardSession (and
probably the same situation with twisted.web2).

There is another problem with it. The twisted.web.server.Session cannot
declare itself implementing nevow.inevow.ISession as it doesn't know
anything about nevow; but nevow registers it as default adapter from
WovenContext to inevow.ISession. So we have a situation:

    session = inevow.ISession(ctx)
    assert inevow.ISession.providedBy(sess) # oops! it is not

What use in the adaptation above then? It's not really an adapter to the
interface we need but just some arbitrary function call, not related to
interfaces at all, incidentally looking like an adapter.

Probably, a decorator to the adapterFactory could help; even if all got a
bit slower, we'll get more correct behaviour. Anyway, is it that slower?
I've heard the nevow as well as Python are not about speed, but about
building robust applications.

-- 
jk


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="043748.html">[Twisted-Python] Interfaces and adapters
</A></li>
	<LI>Next message (by thread): <A HREF="043751.html">[Twisted-Python] Interfaces and adapters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43750">[ date ]</a>
              <a href="thread.html#43750">[ thread ]</a>
              <a href="subject.html#43750">[ subject ]</a>
              <a href="author.html#43750">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
