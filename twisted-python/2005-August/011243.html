<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Interfaces and adapters
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Interfaces%20and%20adapters&In-Reply-To=20050827130921.024a1e33.jk%40ospaz.ru">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011242.html">
   <LINK REL="Next"  HREF="011244.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Interfaces and adapters</H1>
    <B>Valentino Volonghi aka Dialtone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Interfaces%20and%20adapters&In-Reply-To=20050827130921.024a1e33.jk%40ospaz.ru"
       TITLE="[Twisted-Python] Interfaces and adapters">dialtone at divmod.com
       </A><BR>
    <I>Sat Aug 27 07:47:58 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011242.html">[Twisted-Python] Interfaces and adapters
</A></li>
        <LI>Next message: <A HREF="011244.html">[Twisted-Python] Interfaces and adapters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11243">[ date ]</a>
              <a href="thread.html#11243">[ thread ]</a>
              <a href="subject.html#11243">[ subject ]</a>
              <a href="author.html#11243">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">en.karpachov at ospaz.ru</A> wrote:

&gt;<i>The question is, if the object doesn't declare itself provides the
</I>&gt;<i>interface it adapts to, should this be considered as a bug? If so, then we
</I>&gt;<i>have it with twisted.web.server.Session and nevow.guard.GuardSession (and
</I>&gt;<i>probably the same situation with twisted.web2).
</I>&gt;<i>  
</I>&gt;<i>
</I>twisted.web2 is yet to come and also nevow working on it although
there's a branch in nevow
that works with it right now. So everything is in flux and yet to be
decided.

&gt;<i>There is another problem with it. The twisted.web.server.Session cannot
</I>&gt;<i>declare itself implementing nevow.inevow.ISession as it doesn't know
</I>&gt;<i>anything about nevow; but nevow registers it as default adapter from
</I>&gt;<i>WovenContext to inevow.ISession. So we have a situation:
</I>&gt;<i>
</I>&gt;<i>    session = inevow.ISession(ctx)
</I>&gt;<i>    assert inevow.ISession.providedBy(sess) # oops! it is no
</I>&gt;<i>
</I>&gt;<i>What use in the adaptation above then? It's not really an adapter to the
</I>&gt;<i>interface we need but just some arbitrary function call, not related to
</I>&gt;<i>interfaces at all, incidentally looking like an adapter.
</I>&gt;<i>  
</I>&gt;<i>
</I>Woah, wait a bit :)
If you want to really use sessions in nevow you have to use guard, if
you use guard the session
object will be GuardSession that knows about nevow and can implement
inevow.ISession.
Currently GuardSession doesn't implement inevow.ISession but will in a
sec when I commit the fix.

If you don't use guard you are really getting a server.Session object
from twisted.web returned by
nevow.appserver.sessionFactory that calls NevowRequest.getSession()
which will return the GuardSession
if you are using guard or the other one if not (as I already said). Oh,
server.Session does suck.

&gt;<i>Probably, a decorator to the adapterFactory could help; even if all got a
</I>&gt;<i>bit slower, we'll get more correct behaviour. Anyway, is it that slower?
</I>&gt;<i>I've heard the nevow as well as Python are not about speed, but about
</I>&gt;<i>building robust applications.
</I>&gt;<i>  
</I>&gt;<i>
</I>True, but doing more than what is really needed doesn't do good anyway.
Losing speed for free is not something
you really wish.

-- 
Valentino Volonghi aka Dialtone
Now Running MacOSX 10.4.1
Blog: <A HREF="http://vvolonghi.blogspot.com">http://vvolonghi.blogspot.com</A>
<A HREF="http://weever.berlios.de">http://weever.berlios.de</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011242.html">[Twisted-Python] Interfaces and adapters
</A></li>
	<LI>Next message: <A HREF="011244.html">[Twisted-Python] Interfaces and adapters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11243">[ date ]</a>
              <a href="thread.html#11243">[ thread ]</a>
              <a href="subject.html#11243">[ subject ]</a>
              <a href="author.html#11243">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
