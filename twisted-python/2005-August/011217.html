<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How to &quot;monitor&quot; parallel executions of Deferreds
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20How%20to%20%22monitor%22%20parallel%20executions%20of%20Deferreds&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011224.html">
   <LINK REL="Next"  HREF="011221.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How to &quot;monitor&quot; parallel executions of Deferreds</H1>
    <B>Pedro Sanchez</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20How%20to%20%22monitor%22%20parallel%20executions%20of%20Deferreds&In-Reply-To="
       TITLE="[Twisted-Python] How to &quot;monitor&quot; parallel executions of Deferreds">psanchez at nortel.com
       </A><BR>
    <I>Thu Aug 25 10:10:50 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011224.html">[Twisted-Python] How to forcibly disconnect PB client?
</A></li>
        <LI>Next message: <A HREF="011221.html">[Twisted-Python] How to &quot;monitor&quot; parallel executions of Deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11217">[ date ]</a>
              <a href="thread.html#11217">[ thread ]</a>
              <a href="subject.html#11217">[ subject ]</a>
              <a href="author.html#11217">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I need to implement a function (say, myfunc) that fires several
independent Deferreds (using deferToThread), and that returns a deferred
itself. A client of this function (say, client) is expected to do
something like this:

def client():
    def done(success)
        if success:
           print 'd1 and d2 are done'

    d = myfunc()
    d.addCallback(done)
    ...


myfuct() above does something like this:

def myfunc():
    def checkFunc1(success):
    ...

    def checkFunc2(success):
    ...

    d = defer.Deferred()
    d1 = deferToThread(func1).addCallback(checkFunc1)
    d2 = deferToThread(func2).addCallback(checkFunc2)
    d.addCallback(????)

    return d

Clearly d, d1, and d2 in the above are disconnected. And I don't want to
serialize d1 and d2 which would be a way to connect them all.

The problem is I don't know how d should be defined. The idea is that
the 'done' function in the client function is only called when both
threads d1 and d2 are done.

Can you give me any suggestions on how to implement myfunc()?

Thank you,

-- 
Pedro





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011224.html">[Twisted-Python] How to forcibly disconnect PB client?
</A></li>
	<LI>Next message: <A HREF="011221.html">[Twisted-Python] How to &quot;monitor&quot; parallel executions of Deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11217">[ date ]</a>
              <a href="thread.html#11217">[ thread ]</a>
              <a href="subject.html#11217">[ subject ]</a>
              <a href="author.html#11217">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
