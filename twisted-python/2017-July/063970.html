<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] buildbot/osx10.10-py2.7 and required builders for	merge
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20buildbot/osx10.10-py2.7%20and%20required%20builders%0A%20for%09merge&In-Reply-To=%3C7E7FE9D6-4309-49F4-BD9F-A9C7855AEC40%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="063966.html">
   <LINK REL="Next"  HREF="031504.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] buildbot/osx10.10-py2.7 and required builders for	merge</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20buildbot/osx10.10-py2.7%20and%20required%20builders%0A%20for%09merge&In-Reply-To=%3C7E7FE9D6-4309-49F4-BD9F-A9C7855AEC40%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] buildbot/osx10.10-py2.7 and required builders for	merge">glyph at twistedmatrix.com
       </A><BR>
    <I>Wed Jul  5 20:54:52 MDT 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="063966.html">[Twisted-Python] buildbot/osx10.10-py2.7 and required builders for merge
</A></li>
        <LI>Next message (by thread): <A HREF="031504.html">[Twisted-Python] WebSockets and QUIC for Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63970">[ date ]</a>
              <a href="thread.html#63970">[ thread ]</a>
              <a href="subject.html#63970">[ subject ]</a>
              <a href="author.html#63970">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On Jul 5, 2017, at 2:29 AM, Adi Roiban &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I did not had to much time to follow twisted-infra activity lately,
</I>&gt;<i> sorry if the following question is obvious for all the others.
</I>&gt;<i> 
</I>&gt;<i> Why the OSX build was removed from Travis and forced on buildbot?
</I>
As Craig said: it was slow.

Of course, the entire CI process is slow, so just a little more slowness would not have been a reason.  It wasn't just slow, it was catastrophically slow: sometimes blocking builds for entire days at a time.

Not only was it an order of magnitude out from all other build slowness, it would also block other travis builds from completing promptly.

And finally, the frequent outages on Travis's infrastructure meant that not only was it slow, not only was it interfering with other resources, but it was also tremendously unpredictable: so sometimes it would be only a few minutes, sometimes 72 hours. Intermittent reinforcement is a form of psychological torture, so this was really the icing on this terrible cake.

&gt;<i> I think that for contributor without write access to the main repo,
</I>&gt;<i> this is a big handicap as they can't get a good coverage report ...
</I>&gt;<i> and merging such branches needs extra work as you need to create a new
</I>&gt;<i> branch, push it wait for results...(maybe create a new PR)... etc
</I>
Yep, it's really annoying and I very much wish we could turn it back on.  What it comes down to is: would it be more useful for the contributors to get their Linux / Py2 / Py3 build results immediately automatically, or their macOS build results after 15 hours automatically?

But, loading <A HREF="https://www.traviscistatus.com">https://www.traviscistatus.com</A> &lt;<A HREF="https://www.traviscistatus.com/">https://www.traviscistatus.com/</A>&gt; today, I see yet another effective outage on the OS X infra:



The frequency of outages that merit a formal incident report does seem to have gone down, but &quot;you can't do a build for the entire working day because the infrastructure is regularly jammed up&quot; is a level of availability that is more like a continuous outage :).

&gt;<i> Is the list of builders marked in GitHub as &quot;required&quot; the official
</I>&gt;<i> list of tests which need to be green in order to merge?
</I>
Technically speaking all builders should pass.  Particularly, patch coverage in principle ought to be enforced.

However:

In some cases (such as trivial python 3 syntax transformations) there are patches which should be able to skip the coverage check, so it isn't enforced.  It would be better if these were all covered, but sometimes it makes more sense to get a module importing on py3 so that we can address coverage issues more easily.
Also, codecov itself is unreliable enough that making this mandatory would make us spend more time investigating issues with codecov than developing twisted.  (And other options, such as coveralls, seem to just be worse.)
Given the large number of builders in our fleet, it's likely that at least one will still fail with some intermittent issue that's irrelevant to the patch.  Until we have less activity on <A HREF="https://twistedmatrix.com/trac/ticket/8879">https://twistedmatrix.com/trac/ticket/8879</A> &lt;<A HREF="https://twistedmatrix.com/trac/ticket/8879">https://twistedmatrix.com/trac/ticket/8879</A>&gt;, making these mechanically mandatory would still do more harm than good.  Howeverâ€¦ we have been making a lot of progress, and we certainly see a lot fewer intermittent failures than we used to!

&gt;<i> I am reading this page, but is not clear which tests need to be green:
</I>&gt;<i> <A HREF="https://twistedmatrix.com/trac/wiki/ReviewProcess#Authors:Howtomergethechangetotrunk">https://twistedmatrix.com/trac/wiki/ReviewProcess#Authors:Howtomergethechangetotrunk</A> &lt;<A HREF="https://twistedmatrix.com/trac/wiki/ReviewProcess#Authors:Howtomergethechangetotrunk">https://twistedmatrix.com/trac/wiki/ReviewProcess#Authors:Howtomergethechangetotrunk</A>&gt;
</I>
Yeah, the documentation on this is a lot spottier than it should be.  Please feel free to propose some changes to that text based on this.  Thanks for raising this issue!

-g

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20170705/4295f524/attachment-0002.html&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PastedGraphic-1.png
Type: image/png
Size: 30815 bytes
Desc: not available
URL: &lt;/pipermail/twisted-python/attachments/20170705/4295f524/attachment-0002.png&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="063966.html">[Twisted-Python] buildbot/osx10.10-py2.7 and required builders for merge
</A></li>
	<LI>Next message (by thread): <A HREF="031504.html">[Twisted-Python] WebSockets and QUIC for Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63970">[ date ]</a>
              <a href="thread.html#63970">[ thread ]</a>
              <a href="subject.html#63970">[ subject ]</a>
              <a href="author.html#63970">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
