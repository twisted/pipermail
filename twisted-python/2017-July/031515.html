<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] KeyError in SSHConnection.ssh_CHANNEL_OPEN_CONFIRMATION
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20KeyError%20in%0A%20SSHConnection.ssh_CHANNEL_OPEN_CONFIRMATION&In-Reply-To=%3CE4FE59E1-69AD-41A0-9A34-3F6D90EBC3A3%40mcroberts.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="031514.html">
   <LINK REL="Next"  HREF="031516.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] KeyError in SSHConnection.ssh_CHANNEL_OPEN_CONFIRMATION</H1>
    <B>Stephen McRoberts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20KeyError%20in%0A%20SSHConnection.ssh_CHANNEL_OPEN_CONFIRMATION&In-Reply-To=%3CE4FE59E1-69AD-41A0-9A34-3F6D90EBC3A3%40mcroberts.org%3E"
       TITLE="[Twisted-Python] KeyError in SSHConnection.ssh_CHANNEL_OPEN_CONFIRMATION">steveo at mcroberts.org
       </A><BR>
    <I>Thu Jul  6 09:19:05 MDT 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="031514.html">[Twisted-Python] KeyError in	SSHConnection.ssh_CHANNEL_OPEN_CONFIRMATION
</A></li>
        <LI>Next message (by thread): <A HREF="031516.html">[Twisted-Python] KeyError in	SSHConnection.ssh_CHANNEL_OPEN_CONFIRMATION
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31515">[ date ]</a>
              <a href="thread.html#31515">[ thread ]</a>
              <a href="subject.html#31515">[ subject ]</a>
              <a href="author.html#31515">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It already helps to know this isn't normal behavior.
My code is self-contained in a single file and I can add a main for testing.
However it's far from minimal. The problem doesn't occur right away - only after several channels have been opened/closed with a persistent connection.
I'll continue to work and try to minimally pin it down but as you know it's difficult with asynchronous operations on several hosts.
It can run 100's of channels on multiple hosts without a problem or the problem can occur in the first five minutes.
For now, I just add a canceller method on downstream deferreds and try again.

Steve

&gt;<i> On Jul 6, 2017, at 5:14 AM, Adi Roiban &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> On 5 July 2017 at 23:00, Stephen McRoberts &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">steveo at mcroberts.org</A>&gt; wrote:
</I>&gt;&gt;<i> I'm looking for suggestions why the channel key would be missing after it was just opened.
</I>&gt;&gt;<i> I use persistent connections with a timeout but the timer is reset every call so it stays open.
</I>&gt;<i> 
</I>&gt;<i> [snip]
</I>&gt;<i> 
</I>&gt;<i> As suggested by Glyph.
</I>&gt;<i> Please provide a complete minimal example which can be used to
</I>&gt;<i> reproduce this behaviour.
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://sscce.org/">http://sscce.org/</A>
</I>&gt;<i> 
</I>&gt;<i> I am happy to help with any SSH related bugs.
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Adi Roiban
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="031514.html">[Twisted-Python] KeyError in	SSHConnection.ssh_CHANNEL_OPEN_CONFIRMATION
</A></li>
	<LI>Next message (by thread): <A HREF="031516.html">[Twisted-Python] KeyError in	SSHConnection.ssh_CHANNEL_OPEN_CONFIRMATION
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31515">[ date ]</a>
              <a href="thread.html#31515">[ thread ]</a>
              <a href="subject.html#31515">[ subject ]</a>
              <a href="author.html#31515">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
