<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] CI FYI
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20CI%20FYI&In-Reply-To=%3C9AE042DC-E6E9-43C7-8358-F391F61DBFF4%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="063404.html">
   <LINK REL="Next"  HREF="030951.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] CI FYI</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20CI%20FYI&In-Reply-To=%3C9AE042DC-E6E9-43C7-8358-F391F61DBFF4%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] CI FYI">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon Dec 12 16:38:38 MST 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="063404.html">[Twisted-Python] trac deployment (was: memory leaks)
</A></li>
        <LI>Next message (by thread): <A HREF="030951.html">[Twisted-Python] buildbot certificate expiration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30950">[ date ]</a>
              <a href="thread.html#30950">[ thread ]</a>
              <a href="subject.html#30950">[ subject ]</a>
              <a href="author.html#30950">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Twisted maintainers,

I realized today that not not everyone is aware of this quirk in our build infrastructure, and since it's a required step, y'all should probably know about it.

Any PR that we merge should run not just on public CI (travis, appveyor, codecov) but also our own Buildbot infrastructure.  Many of our supported platforms, particularly desktop Windows and OS X, do not have good support from multi-tenant CI vendors.  This has always been true, but recently it became mechanically necessary because the OS X status from buildbot became a required status, which means that it appears in the &quot;waiting&quot; state even if no build has actually been started.  No twisted PR will have a successful build unless some TM Labs member has done the following.

Since our buildbots do not have adequate security to run totally untrusted code, only project members may submit builds to them.  The way a project member submits such a build is they cause a ref to exist in the official Twisted repo's namespace.

So, a necessary step in the code review process is to scan the diff to ensure that it's not malicious, and to then ensure that a branch exists in the <A HREF="https://github.com/twisted/twisted/">https://github.com/twisted/twisted/</A> &lt;<A HREF="https://github.com/twisted/twisted/">https://github.com/twisted/twisted/</A>&gt; namespace pointing at the exact commit that you want buildbot builds to run tests for.  (Don't worry: the buildbots are not fully secured, but neither do they contain particularly sensitive data.  If you screw this check up, the main potentially bad consequence is to availability of the build fleet, not compromise of PyPI releases or anything like that.  That said, if you screw up the security check in the full review and it lands on master, then some really bad stuff can happen...)

The way to express this intent to Git is something like:

$ git fetch origin &quot;refs/pull/${PR_NUMBER}/head&quot;
$ git push origin FETCH_HEAD:&quot;${TICKET_NUMBER}-branchname&quot;

I don't know of a way to do it through the github web UI but perhaps someone more knowledgeable could chime in.

Thanks,

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20161212/f19a5d90/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20161212/f19a5d90/attachment.html</A>&gt;
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="063404.html">[Twisted-Python] trac deployment (was: memory leaks)
</A></li>
	<LI>Next message (by thread): <A HREF="030951.html">[Twisted-Python] buildbot certificate expiration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30950">[ date ]</a>
              <a href="thread.html#30950">[ thread ]</a>
              <a href="subject.html#30950">[ subject ]</a>
              <a href="author.html#30950">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
