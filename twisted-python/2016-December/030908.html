<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Spurious commit/ticket links
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Spurious%20commit/ticket%20links&In-Reply-To=%3C5C81318C-EFE6-47EF-9208-4098D485FA42%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030907.html">
   <LINK REL="Next"  HREF="030912.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Spurious commit/ticket links</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Spurious%20commit/ticket%20links&In-Reply-To=%3C5C81318C-EFE6-47EF-9208-4098D485FA42%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Spurious commit/ticket links">glyph at twistedmatrix.com
       </A><BR>
    <I>Thu Dec  1 13:33:43 MST 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="030907.html">[Twisted-Python] Spurious commit/ticket links
</A></li>
        <LI>Next message: <A HREF="030912.html">[Twisted-Python] Spurious commit/ticket links
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30908">[ date ]</a>
              <a href="thread.html#30908">[ thread ]</a>
              <a href="subject.html#30908">[ subject ]</a>
              <a href="author.html#30908">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On Dec 1, 2016, at 12:13 PM, Jean-Paul Calderone &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> On Thu, Dec 1, 2016 at 2:14 PM, Glyph Lefkowitz &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A> &lt;mailto:<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt;&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> On Dec 1, 2016, at 10:51 AM, Jean-Paul Calderone &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A> &lt;mailto:<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt;&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> In the last couple days I've noticed that there are a bunch of spurious changes being made to tickets in the issue tracker.  These come from commit messages that reference a GitHub PR that happens to match a ticket number in trac.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> For example, <A HREF="https://twistedmatrix.com/trac/ticket/600#comment:11">https://twistedmatrix.com/trac/ticket/600#comment:11</A> &lt;<A HREF="https://twistedmatrix.com/trac/ticket/600#comment:11">https://twistedmatrix.com/trac/ticket/600#comment:11</A>&gt;
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I guess this doesn't really hurt anything ... except it's dumping a constant low level of garbage into the issue tracker and generating some annoying emails (that end up having nothing to do with what the subject suggests).
</I>&gt;<i> 
</I>&gt;<i> This is, unfortunately, going to keep happening more frequently as the PR numbers get higher and the corresponding Trac tickets get less sparse.
</I>&gt;<i> 
</I>&gt;<i> The way I'd like to address it is to change the format of our commit message to namespace Trac tickets differently; instead of just &quot;#&quot;, using a URL, like &quot;Fixes <A HREF="https://tm.tl/1234">https://tm.tl/1234</A> &lt;<A HREF="https://tm.tl/1234">https://tm.tl/1234</A>&gt;&quot;.  I wouldn't even mind if we just had to use the Trac wiki syntax for this, i.e. &quot;Fixes [ticket:1234]&quot; as long as we could turn off the &quot;#&quot; syntax which Github also uses.
</I>&gt;<i> 
</I>&gt;<i> However, this involves surgery within Trac's code, and for me personally, the work required to find the relevant regexes and modify them is worse than continuing to deal with the annoyance.  However, I would very much appreciate it if someone else would take this on :-).
</I>&gt;<i> 
</I>&gt;<i> Where's the source for Twisted's trac deployment?
</I>
<A HREF="https://github.com/twisted-infra/twisted-trac-source">https://github.com/twisted-infra/twisted-trac-source</A>
<A HREF="https://github.com/twisted-infra/twisted-trac-plugins">https://github.com/twisted-infra/twisted-trac-plugins</A>
<A HREF="https://github.com/twisted-infra/braid/tree/master/services/trac">https://github.com/twisted-infra/braid/tree/master/services/trac</A>

&gt;<i> Is it actually possible to deploy modifications?
</I>
There's probably still an undocumented setup step or two that we've missed - but after following &lt;<A HREF="https://github.com/twisted-infra/braid/blob/master/README.md">https://github.com/twisted-infra/braid/blob/master/README.md</A>&gt; 'fab config.production trac.upgrade' ought to do the trick.  Allegedly it's even possible to set up a test development environment as per &lt;<A HREF="https://github.com/twisted-infra/braid/blob/master/README.md#vagrant">https://github.com/twisted-infra/braid/blob/master/README.md#vagrant</A>&gt; :-).

I haven't made any major changes since all these docs were added so I'm just following them from the beginning for the first time myself now. but certainly the prod-deploy process has worked fine for me many times on various services.

&gt;<i> I'll take a look, if so.
</I>
Please be vocal about any roadblocks you hit.  The ops situation has improved a ton since the last time you looked, but (accordingly) it's also changed almost completely.

Good luck - and hopefully you'll need a lot less of it than previously ;-).

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20161201/7ac6d7ba/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20161201/7ac6d7ba/attachment.html</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030907.html">[Twisted-Python] Spurious commit/ticket links
</A></li>
	<LI>Next message: <A HREF="030912.html">[Twisted-Python] Spurious commit/ticket links
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30908">[ date ]</a>
              <a href="thread.html#30908">[ thread ]</a>
              <a href="subject.html#30908">[ subject ]</a>
              <a href="author.html#30908">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
