<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] conch problem with ecdsa-sha2-nistp256 host	key?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20conch%20problem%20with%20ecdsa-sha2-nistp256%20host%0A%09key%3F&In-Reply-To=%3CCAG%3DrPVdQvVB8ke7_aSeFi%2BxhTNoBKgm%3DRrqA%2BUjtTSJo4gDUbA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="063435.html">
   <LINK REL="Next"  HREF="063390.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] conch problem with ecdsa-sha2-nistp256 host	key?</H1>
    <B>Craig Rodrigues</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20conch%20problem%20with%20ecdsa-sha2-nistp256%20host%0A%09key%3F&In-Reply-To=%3CCAG%3DrPVdQvVB8ke7_aSeFi%2BxhTNoBKgm%3DRrqA%2BUjtTSJo4gDUbA%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] conch problem with ecdsa-sha2-nistp256 host	key?">rodrigc at crodrigues.org
       </A><BR>
    <I>Sat Dec  3 17:21:56 MST 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="063435.html">[Twisted-Python] conch problem with ecdsa-sha2-nistp256 host	key?
</A></li>
        <LI>Next message (by thread): <A HREF="063390.html">[Twisted-Python] conch problem with ecdsa-sha2-nistp256 host	key?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63389">[ date ]</a>
              <a href="thread.html#63389">[ thread ]</a>
              <a href="subject.html#63389">[ subject ]</a>
              <a href="author.html#63389">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Dec 1, 2016 at 7:01 PM, Mark Williams &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">markrwilliams at gmail.com</A>&gt;
wrote:

&gt;<i>
</I>&gt;<i> I bet the key negotiated by conch is not an ECDSA key but rather an
</I>&gt;<i> RSA key.  If this is all the case, then I think you've found a key
</I>&gt;<i> that LibreSSL supports but your client's libssl (which conch calls
</I>&gt;<i> into via cryptography) does not.  What version of libssl do you have?
</I>&gt;<i>
</I>

Yes, you are right.  I did some debugging and found that
in ssh_KEX_DH_GEX_REPLY()
<A HREF="https://github.com/twisted/twisted/blob/trunk/src/twisted/conch/ssh/transport.py#L1596">https://github.com/twisted/twisted/blob/trunk/src/twisted/conch/ssh/transport.py#L1596</A>
only an RSA key is negotiated, even if an EC key is in the known_hosts file.

I thought that with all the EC fixes committed to the tree that this was
all working,
but it looks like there is still some stuff missing.  This might fill in
the gaps:

<A HREF="https://github.com/twisted/twisted/pull/432">https://github.com/twisted/twisted/pull/432</A>

--
Craig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20161203/2b6bb82c/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="063435.html">[Twisted-Python] conch problem with ecdsa-sha2-nistp256 host	key?
</A></li>
	<LI>Next message (by thread): <A HREF="063390.html">[Twisted-Python] conch problem with ecdsa-sha2-nistp256 host	key?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63389">[ date ]</a>
              <a href="thread.html#63389">[ thread ]</a>
              <a href="subject.html#63389">[ subject ]</a>
              <a href="author.html#63389">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
