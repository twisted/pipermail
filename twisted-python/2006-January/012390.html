<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Deferred Groups?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Deferred%20Groups%3F&In-Reply-To=139eed6a6d819d1383153b3f1d55598c%40gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012404.html">
   <LINK REL="Next"  HREF="012394.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Deferred Groups?</H1>
    <B>Moof</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Deferred%20Groups%3F&In-Reply-To=139eed6a6d819d1383153b3f1d55598c%40gmail.com"
       TITLE="[Twisted-Python] Deferred Groups?">moof at metamoof.net
       </A><BR>
    <I>Sat Jan 21 09:01:03 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="012404.html">[Twisted-Python] Deferred Groups?
</A></li>
        <LI>Next message: <A HREF="012394.html">[Twisted-Python] Deferred Groups?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12390">[ date ]</a>
              <a href="thread.html#12390">[ thread ]</a>
              <a href="subject.html#12390">[ subject ]</a>
              <a href="author.html#12390">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/21/06, Duncan McGreggor &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">duncan.mcgreggor at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> I have a question about an approach I used... I'm worried that I've
</I>&gt;<i> over-worked it and have over-looked a more elegant and standard
</I>&gt;<i> solution.
</I>&gt;<i>
</I>&gt;<i> I have the need to fire off network connections in groups. Deferreds
</I>&gt;<i> added to a DeferredList don't fit the bill (because there's no control
</I>&gt;<i> over all the deferreds in the list). As an example, if you wanted to
</I>&gt;<i> make a whole batch of concurrent connections, but didn't want to incur
</I>&gt;<i> the overhead of firing off more than 20 simultaneous connections, you'd
</I>&gt;<i> split your destination hosts up into groups of 20. As a group was
</I>&gt;<i> completed, a callback could fire off the next group, etc.
</I>&gt;<i>
</I>&gt;<i> What's more, I didn't want to put this kind of control in a factory or
</I>&gt;<i> a protocol. In my mind, that didn't seem the proper place for it...
</I>

This is one approach. It has the characteristic that if one site in your
group is considerably slower than the others, you will wait till all the
sites in your group are finished before firing off the next group. This may
or may not be  good thing for your particular app.

An alternative is to create a &quot;pool&quot; of connections that will consume from a
queue of potential connections. you feed your list into a DeferredQueue, and
create as many concurrent connection handlers as you want, that will all
consume from that same queue. this has the characteristic that as long as
you keep the queue full you are constantly running 20 connections. This may
or may nto be an advantage in the case of your application.

Or if you want to use the built-in twisted magic, take a look at
twisted.protocols.policies.ThrottlingFactory and other similar things int he
same package see if one can be adapted to your use.

Keep in mind that twisted is not *actually* concurrent, so you may not need
to throttle your connections that much, you might be able to let the reactor
handle the connection load itself.

Actually, given that the reactor handles a thread pool size, is there an
equivalent &quot;connection pool size&quot; that can be manipulated from inside the
programme? Does such a concept have any use or meaning?

Moof - not a reactor expert, as you can see.

Moof
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20060121/0a08c428/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20060121/0a08c428/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012404.html">[Twisted-Python] Deferred Groups?
</A></li>
	<LI>Next message: <A HREF="012394.html">[Twisted-Python] Deferred Groups?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12390">[ date ]</a>
              <a href="thread.html#12390">[ thread ]</a>
              <a href="subject.html#12390">[ subject ]</a>
              <a href="author.html#12390">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
