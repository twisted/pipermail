<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> making sqlalchemy work with twisted (was	Re:[Twisted-Python]SQLAbstraction Layer_
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20making%20sqlalchemy%20work%20with%20twisted%20%28was%0A%09Re%3A%5BTwisted-Python%5DSQLAbstraction%20Layer_&In-Reply-To=%3C1aea01c61cff%2415483610%246402a8c0%40dcore%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="044887.html">
   <LINK REL="Next"  HREF="044866.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>making sqlalchemy work with twisted (was	Re:[Twisted-Python]SQLAbstraction Layer_</H1>
    <B>Paul G</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20making%20sqlalchemy%20work%20with%20twisted%20%28was%0A%09Re%3A%5BTwisted-Python%5DSQLAbstraction%20Layer_&In-Reply-To=%3C1aea01c61cff%2415483610%246402a8c0%40dcore%3E"
       TITLE="making sqlalchemy work with twisted (was	Re:[Twisted-Python]SQLAbstraction Layer_">paul-lists at perforge.com
       </A><BR>
    <I>Thu Jan 19 06:48:49 MST 2006</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="044887.html">making sqlalchemy work with twisted (was	Re:[Twisted-Python]SQLAbstraction Layer_
</A></li>
        <LI>Next message (by thread): <A HREF="044866.html">[Twisted-Python] SQL Abstraction Layer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44890">[ date ]</a>
              <a href="thread.html#44890">[ thread ]</a>
              <a href="subject.html#44890">[ subject ]</a>
              <a href="author.html#44890">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
----- Original Message ----- 
From: &quot;Michael Sparks&quot; &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Michaels at rd.bbc.co.uk</A>&gt;
To: &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>&gt;
Cc: &quot;Paul G&quot; &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">paul-lists at perforge.com</A>&gt;
Sent: Thursday, January 19, 2006 8:01 AM
Subject: Re: making sqlalchemy work with twisted (was 
Re:[Twisted-Python]SQLAbstraction Layer_


&gt;<i> On Thursday 19 Jan 2006 03:55, Paul G wrote:
</I>&gt;&gt;<i> ----- Original Message -----
</I>&gt;&gt;<i> From: &quot;Jean-Paul Calderone&quot; &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at divmod.com</A>&gt;
</I>&gt;&gt;<i> &gt; On Wed, 18 Jan 2006 21:15:28 -0500, Paul G &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">paul-lists at perforge.com</A>&gt;
</I>&gt;&gt;<i> &gt;&gt;&lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at divmod.com</A>&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;new: attribute access -&gt; sqlalchemy accessor -&gt; sqlalchemy 
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;sqlengine -&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;async call into dbapi with deferToThread-&gt; control returned to
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;reactor -&gt; another coop thread gets control
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;... async dbapi result handler -&gt;  return to sqlengine -&gt; return to
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;accessor -&gt; return attribute
</I>&gt;<i> ...
</I>&gt;&gt;<i> &gt;&gt;&gt;Unfortunately, this cannot be implemented in CPython without going
</I>&gt;&gt;<i> &gt;&gt;&gt;to extreme lengths.
</I>&gt;<i> ...
</I>&gt;&gt;<i> &gt; Extreme lengths are extension modules that move
</I>&gt;&gt;<i> &gt; pieces of the C call stack around.  See Stackless Python and the &gt;
</I>&gt;&gt;<i> &gt; greenlets module.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> yeah, i've looked at those in the past. are you saying they are the only
</I>&gt;&gt;<i> way to do this and generators won't work?
</I>&gt;<i>
</I>&gt;<i> Generators are really only single layer, unless you start manually 
</I>&gt;<i> chaining
</I>&gt;<i> them which requires changing all the other bits of code.
</I>
i'm familiar with what generators are/do ;) my question was really meant to 
ask: have you already tried/thought in detail about something similar with 
generators and found that it can be done, can't be done or can't be done 
cleanly enough to make any sense.

&gt;<i> You want to suspend
</I>&gt;<i> execution deeper in the call stack which means you'd need Greenlets or
</I>&gt;<i> Stackless (or *really* sod about nastily with threads...).
</I>
well, the problem with generators is that there's no way to yield several 
frames up/down (depending on your arch ;) the stack. so you're talking 
trampolines and possibly nasty stack growth if you have to recurse too much 
before you can unwind etc. i've started hacking this up, but it's giving me 
a headache.

&gt;<i> At that point
</I>&gt;<i> you're into whether you think that's a good idea or not.
</I>&gt;<i>
</I>&gt;<i> I don't know other people's feelings on the matter, but to me it just 
</I>&gt;<i> feels
</I>&gt;<i> wrong in a system that has clear handoff generally speaking to have some
</I>&gt;<i> very hidden handoff as well. At minimum it implies an understanding burden
</I>&gt;<i> on the maintainer. At worst you now have the potential to *really* screw
</I>&gt;<i> things up.
</I>
i'm not arguing for this to be done in twisted, merely seeing if it makes 
sense to do locally.

-p 



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="044887.html">making sqlalchemy work with twisted (was	Re:[Twisted-Python]SQLAbstraction Layer_
</A></li>
	<LI>Next message (by thread): <A HREF="044866.html">[Twisted-Python] SQL Abstraction Layer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44890">[ date ]</a>
              <a href="thread.html#44890">[ thread ]</a>
              <a href="subject.html#44890">[ subject ]</a>
              <a href="author.html#44890">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
