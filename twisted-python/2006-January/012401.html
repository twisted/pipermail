<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: [Twisted-web] CPUShare-Twisted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20%5BTwisted-web%5D%20CPUShare-Twisted&In-Reply-To=20060122045544.2697.96381428.divmod.quotient.702%40ohm">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012400.html">
   <LINK REL="Next"  HREF="012409.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: [Twisted-web] CPUShare-Twisted</H1>
    <B>Andrea Arcangeli</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20%5BTwisted-web%5D%20CPUShare-Twisted&In-Reply-To=20060122045544.2697.96381428.divmod.quotient.702%40ohm"
       TITLE="[Twisted-Python] Re: [Twisted-web] CPUShare-Twisted">andrea at cpushare.com
       </A><BR>
    <I>Sun Jan 22 01:52:18 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="012400.html">[Twisted-Python] Re: [Twisted-web] CPUShare-Twisted
</A></li>
        <LI>Next message: <A HREF="012409.html">[Twisted-Python] Re: [Twisted-web] CPUShare-Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12401">[ date ]</a>
              <a href="thread.html#12401">[ thread ]</a>
              <a href="subject.html#12401">[ subject ]</a>
              <a href="author.html#12401">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, Jan 21, 2006 at 11:55:44PM -0500, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at divmod.com</A> wrote:
&gt;<i> If you've pending patches that have not been applied, would you please 
</I>&gt;<i> consider instead to agitate for those patches on the mailing lists, and add 
</I>
These are the very old ones (ignore the web2 part that is recent).

<A HREF="http://www.cpushare.com/hg/Twisted/?cs=400da64bd5a6">http://www.cpushare.com/hg/Twisted/?cs=400da64bd5a6</A>

IIRC you said that disconnecting isn't present in all protocols, not sure if
you added disconnecting to all protocols. There was a discussion to add
more names, but I didn't see any fix going into SVN trunk. I need it in
tcp and these fixes are good enough for my usage (call it dirty fix but
it works for me). The other is a fundamental feature I need from the
proxy, it's backwards compatible so it doesn't add up any risk but I
never received feedback on it. Without it, it's impossible to safely
stack one server on top of the other without losing the client info.

I'm in discussion how to add it to web2 with headers instead of path
mangling.

&gt;<i> information to them in the tracker?  Discussing an abandoned patch can cast 
</I>&gt;<i> some light where it is needed.  Putting it into the CPUShare fork rather 
</I>
I agree, but I always needed the fix since day zero. I had to maintain
it for so long. The fact I'm exporting the tree in a public way can't make
things worse as far as SVN integration is concerned. If something it can
make things better, since with a public tree there may be more interest
from your part in reducing the diff to nothing ;).

&gt;<i> than the bugtracker virtually guarantees that no core Twisted developer 
</I>&gt;<i> will ever look at it.  Not that you can't do both - I just want to make it 
</I>&gt;<i> clear that we're going to keep working off the bugtracker and SVN, not off 
</I>&gt;<i> of random mercurial (or git or bzr or monotone - not to pick on hg) 
</I>&gt;<i> repositories run by users.
</I>
Sure I understand that.

&gt;<i> Also, Andrea, would you mind making sure that your codebase is visually 
</I>&gt;<i> distinct from Twisted in some way that is identifiable when it is run?  My 
</I>&gt;<i> main concern here is that if CPUShare-Twisted is to become popular, it 
</I>&gt;<i> seems likely that users might confuse it with the actual Twisted.  Since 
</I>&gt;<i> you have loudly declared your animosity towards filing bugs, I assume 
</I>&gt;<i> CPUShare-Twisted will not have its own bugtracker, and since you are 
</I>&gt;<i> opposed to test-driven development, [..]
</I>
My developmnt is generally test-driven. I'm only opposed to unit-test
mandatory development to fix bugs or add new features. Writing unit-test
isn't the only way to test code. It's nice to have a unit test, even a
simple one, but it shouldn't be mandatory.

&gt;<i> [..] I am sure that it will be full of bugs. 
</I>
Time will tell. Since you made your prediction I'll make mine. I'm sure
axiom is wasted time in its current API (at least as far as twisted is
concerned).

I don't see how you can advertize axiom saying &quot;We do plan to add some
later, and perhaps also support other databases in the future.&quot;. Sure
you can add it, but if you do it, the whole axiom api will fall apart
unless you want to make synchronous queries over the network. The only
two deferreds you have are during startup and in the testsuite, just
grep for the word Deferred. Making synchronous sql queries in the
twisted async model is unacceptable for anything serious.  Infact even
sqllite queries are obviously unacceptable once the db grows beyond the
size of the cache (and for sure you can't scale the queries over
different servers to have more ram-cache when using sqllite).

Ironically axiom current api would have a chance to work well with
threads, with twisted single threaded async model not.

There are good python storage packages to use with twisted and threads
(heck there is even pgasync if you're religious about not using
threads, why do you think people like me, Valentino and the pgasync
author care about using non-blocking solutions while doing queries to
the db?). I can't imagine why you insist on making your inferior
solution with a design that can't work well with twisted.

I'm feeling guilty for risking hitting the harddisk for a few msec when
people clicks on the mailing list archives, and infact I keep two
webservers exactly to avoid hurting the scalability of the ssl one.

&gt;<i> I would prefer it if we could avoid asking the Twisted team to deal with 
</I>&gt;<i> those bugs as well as actual bugs in Twisted, when users discover the only 
</I>&gt;<i> Twisted bugtracker is on twistedmatrix.com.
</I>
Sure.

&gt;<i> The best option would be to avoid using the same module name, but I 
</I>&gt;<i> understand that tracking trunk would be made more difficult with a diff 
</I>&gt;<i> that touched every import.  Perhaps instead you could change the version 
</I>&gt;<i> from SVN-Trunk to 'HG-CPUShare', so that the CPUShare-ness of the code is 
</I>
Ok, I'll make this change right away. I already did that for the web2 side.

&gt;<i> visible at the beginning of any logs, and change the names of the command 
</I>&gt;<i> line tools to e.g. cpushare-twistd and cpushare-mktap?  This would save 
</I>&gt;<i> time since developers could reject bugs immediately upon seeing one of 
</I>&gt;<i> those commands or the telltale log message rather than having to identify 
</I>&gt;<i> that the line numbers are all wrong before doing so.
</I>
This is a very fair requirement (changing the version is trivial).
However I don't see much point in changing the commands if the module
name is the same. Either I change both, or none. I mean, changing
cpushare-twistd won't prevent a python app importing the reactor to get
mine instead of the official one, so you would still risk to get bogus
bugreports unless I rename both. I think I can rename the module later
if some people uses it, right now I've no idea if people will use it, or
if I'll remain the only user (clearly as long as I'm the only user I
don't need to rename the module ;).


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012400.html">[Twisted-Python] Re: [Twisted-web] CPUShare-Twisted
</A></li>
	<LI>Next message: <A HREF="012409.html">[Twisted-Python] Re: [Twisted-web] CPUShare-Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12401">[ date ]</a>
              <a href="thread.html#12401">[ thread ]</a>
              <a href="subject.html#12401">[ subject ]</a>
              <a href="author.html#12401">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
