<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Triggering callbacks on raw file descriptors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Triggering%20callbacks%20on%20raw%20file%20descriptors&In-Reply-To=577F2EE5-13F4-4E02-BF87-E5282E404EEB%40scu.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012326.html">
   <LINK REL="Next"  HREF="012309.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Triggering callbacks on raw file descriptors</H1>
    <B>James Y Knight</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Triggering%20callbacks%20on%20raw%20file%20descriptors&In-Reply-To=577F2EE5-13F4-4E02-BF87-E5282E404EEB%40scu.edu"
       TITLE="[Twisted-Python] Triggering callbacks on raw file descriptors">foom at fuhm.net
       </A><BR>
    <I>Mon Jan  9 12:24:47 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="012326.html">[Twisted-Python] Triggering callbacks on raw file descriptors
</A></li>
        <LI>Next message: <A HREF="012309.html">[Twisted-Python] Up to date Debian packages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12327">[ date ]</a>
              <a href="thread.html#12327">[ thread ]</a>
              <a href="subject.html#12327">[ subject ]</a>
              <a href="author.html#12327">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jan 9, 2006, at 11:51 AM, Brian Granger wrote:
&gt;<i> Adding connectionLost to the IFileDescriptor interface does solve  
</I>&gt;<i> the problem.  But the situation is more complicated than that - and  
</I>&gt;<i> that makes me a little hesitant to just have connectionLost in  
</I>&gt;<i> IFileDescriptor as you have done.  Here is why:
</I>&gt;<i>
</I>&gt;<i> The IReactorFDSet interface, specifies that any class that  
</I>&gt;<i> implements the IReadDescriptor can be used as a reader.  But,  
</I>&gt;<i> currently, the reactor's, which supposedly IReactorFDSet implements  
</I>&gt;<i> also call the following on the readers:
</I>&gt;<i>
</I>&gt;<i> logPrefix -- part of twisted.python.log.Logger which FileDescriptor  
</I>&gt;<i> (the class) inherits from
</I>&gt;<i> connectionLost -- now part of IFileDescriptor
</I>&gt;<i>
</I>&gt;<i> Thus is looks like readers are actually required to also be a  
</I>&gt;<i> subclass of the Logger class (the FileDescriptor class, which is  
</I>&gt;<i> used for Port does this).  The problem seems to be with the  
</I>&gt;<i> IReactorFDSset interface which doesn't actually specify acccurately  
</I>&gt;<i> which interfaces (and subclasses) the  readers/writers must  
</I>&gt;<i> implement.  Is there a ILogger interface as well?
</I>&gt;<i>
</I>&gt;<i> Also, this makes me worry that developers have been asusming that  
</I>&gt;<i> readers are actually a subclass of FileDescriptor.  Is that the case?
</I>
This is most likely true and unfortunate. Thanks for helping to track  
down these issues. What we really need is some test coverage of the  
reactor being used with alternative IFileDescriptors that only  
implement the minimal advertised interfaces.

&gt;<i> I am not that experienced with this part of twisted, so I am not  
</I>&gt;<i> sure what is the best solution.
</I>
The right solution is to fix this part of the spec. I do think that  
connectionLost is a fundemental part of the interface. However, I do  
not think logPrefix ought to be. That should be fixed to be optional.

James


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012326.html">[Twisted-Python] Triggering callbacks on raw file descriptors
</A></li>
	<LI>Next message: <A HREF="012309.html">[Twisted-Python] Up to date Debian packages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12327">[ date ]</a>
              <a href="thread.html#12327">[ thread ]</a>
              <a href="subject.html#12327">[ subject ]</a>
              <a href="author.html#12327">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
