<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] problem with numpy and twisted xmlrpc
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20problem%20with%20numpy%20and%20twisted%20xmlrpc&In-Reply-To=%3CCAKN9TDJVEAMU9Z-kWnRB-AyV2XRDDCEwidW4kJd5bH2yw7brjA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="028276.html">
   <LINK REL="Next"  HREF="060743.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] problem with numpy and twisted xmlrpc</H1>
    <B>Daniel Sank</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20problem%20with%20numpy%20and%20twisted%20xmlrpc&In-Reply-To=%3CCAKN9TDJVEAMU9Z-kWnRB-AyV2XRDDCEwidW4kJd5bH2yw7brjA%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] problem with numpy and twisted xmlrpc">sank.daniel at gmail.com
       </A><BR>
    <I>Wed Apr 30 12:13:18 MDT 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="028276.html">[Twisted-Python] problem with numpy and twisted xmlrpc
</A></li>
        <LI>Next message (by thread): <A HREF="060743.html">[Twisted-Python] problem with numpy and twisted xmlrpc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60739">[ date ]</a>
              <a href="thread.html#60739">[ thread ]</a>
              <a href="subject.html#60739">[ subject ]</a>
              <a href="author.html#60739">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Nicola,

I don't know whether this makes sense in the context of xmlrpc, but perhaps
you can use numpy's tostring and fromstring functions. If you do this you
have to also send the datatype so that fromstring knows how to unpack
(that's the part where I'm not sure if this strategy is xmlrpc-ish).

-Daniel



On Wed, Apr 30, 2014 at 10:48 AM, Nicola Cesca &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">nicola.cesca at mail.com</A>&gt;wrote:

&gt;<i>  Hi all,
</I>&gt;<i> I'm newbie. I got a lot of problem using xmlrpc and numpy
</I>&gt;<i>
</I>&gt;<i>  I'm using numpy to to some staff and then serve the results via a
</I>&gt;<i> twisted/XMLRPC server. If the result is a numpy float 64, I get an
</I>&gt;<i> exception cause probably twisted can't handle this type. Infact is I
</I>&gt;<i> downgrade the result to float32 with x=float(x), everything is ok. This is
</I>&gt;<i> not so good cause if I forget this workaroud somewhere, it's a pain. Have
</I>&gt;<i> you any better solution?
</I>&gt;<i>
</I>&gt;<i> server:
</I>&gt;<i>
</I>&gt;<i> from twisted.web import xmlrpc, serverimport numpy as np
</I>&gt;<i> class MioServer(xmlrpc.XMLRPC):
</I>&gt;<i>     &quot;&quot;&quot;
</I>&gt;<i>     An example object to be published.
</I>&gt;<i>     &quot;&quot;&quot;
</I>&gt;<i>
</I>&gt;<i>     def xmlrpc_test_np(self):
</I>&gt;<i>         return np.sqrt(2)
</I>&gt;<i> if __name__ == '__main__':
</I>&gt;<i>     from twisted.internet import reactor
</I>&gt;<i>     r = MioServer()
</I>&gt;<i>     reactor.listenTCP(7080, server.Site(r))
</I>&gt;<i>     reactor.run()
</I>&gt;<i>
</I>&gt;<i> client:
</I>&gt;<i>
</I>&gt;<i> import xmlrpclib
</I>&gt;<i> if __name__=='__main__':
</I>&gt;<i>     x=xmlrpclib.ServerProxy('<A HREF="http://localhost:7080/">http://localhost:7080/</A>')
</I>&gt;<i>     print x.test_np()
</I>&gt;<i>
</I>&gt;<i> Exception:
</I>&gt;<i>
</I>&gt;<i> Traceback (most recent call last):
</I>&gt;<i>   File &quot;C:\Users\Stone\.eclipse\org.eclipse.platform_4.3.0_1709980481_win32_win32_x86\plugins\org.python.pydev_2.8.2.2013090511\pysrc\pydevd.py&quot;, line 1446, in &lt;module&gt;
</I>&gt;<i>     debugger.run(setup['file'], None, None)
</I>&gt;<i>   File &quot;C:\Users\Stone\.eclipse\org.eclipse.platform_4.3.0_1709980481_win32_win32_x86\plugins\org.python.pydev_2.8.2.2013090511\pysrc\pydevd.py&quot;, line 1092, in run
</I>&gt;<i>     pydev_imports.execfile(file, globals, locals) #execute the script
</I>&gt;<i>   File &quot;C:\Users\Stone\Documents\FastDose\src\Beagle\Prove e test\xmlrpc_client.py&quot;, line 28, in &lt;module&gt;
</I>&gt;<i>     print x.test_np()
</I>&gt;<i>   File &quot;C:\Python27\lib\xmlrpclib.py&quot;, line 1224, in __call__
</I>&gt;<i>     return self.__send(self.__name, args)
</I>&gt;<i>   File &quot;C:\Python27\lib\xmlrpclib.py&quot;, line 1578, in __request
</I>&gt;<i>     verbose=self.__verbose
</I>&gt;<i>   File &quot;C:\Python27\lib\xmlrpclib.py&quot;, line 1264, in request
</I>&gt;<i>     return self.single_request(host, handler, request_body, verbose)
</I>&gt;<i>   File &quot;C:\Python27\lib\xmlrpclib.py&quot;, line 1297, in single_request
</I>&gt;<i>     return self.parse_response(response)
</I>&gt;<i>   File &quot;C:\Python27\lib\xmlrpclib.py&quot;, line 1473, in parse_response
</I>&gt;<i>     return u.close()
</I>&gt;<i>   File &quot;C:\Python27\lib\xmlrpclib.py&quot;, line 793, in close
</I>&gt;<i>     raise Fault(**self._stack[0])
</I>&gt;<i> xmlrpclib.Fault: &lt;Fault 8002: &quot;Can't serialize output: cannot marshal &lt;type 'numpy.float64'&gt; objects&quot;&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
Daniel Sank
Department of Physics
Broida Hall
University of California
Santa Barbara, CA 93117
(805)893-3899
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20140430/7c833b88/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="028276.html">[Twisted-Python] problem with numpy and twisted xmlrpc
</A></li>
	<LI>Next message (by thread): <A HREF="060743.html">[Twisted-Python] problem with numpy and twisted xmlrpc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60739">[ date ]</a>
              <a href="thread.html#60739">[ thread ]</a>
              <a href="subject.html#60739">[ subject ]</a>
              <a href="author.html#60739">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
