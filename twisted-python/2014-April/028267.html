<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] adding endpoint plugins
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20adding%20endpoint%20plugins&In-Reply-To=%3CCAFN1edq3opwu37tSmad-aYG7K_AwTjik-HmzA_YejtAd1LHBrw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="028265.html">
   <LINK REL="Next"  HREF="060729.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] adding endpoint plugins</H1>
    <B>David Stainton</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20adding%20endpoint%20plugins&In-Reply-To=%3CCAFN1edq3opwu37tSmad-aYG7K_AwTjik-HmzA_YejtAd1LHBrw%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] adding endpoint plugins">dstainton415 at gmail.com
       </A><BR>
    <I>Wed Apr 30 07:42:30 MDT 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="028265.html">[Twisted-Python] Some comments regarding #5190 - ``RFC 6125 (&quot;Service Identity&quot;) implementation´´
</A></li>
        <LI>Next message (by thread): <A HREF="060729.html">[Twisted-Python] adding endpoint plugins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28267">[ date ]</a>
              <a href="thread.html#28267">[ thread ]</a>
              <a href="subject.html#28267">[ subject ]</a>
              <a href="author.html#28267">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Greetings,

I wrote a simple IStreamClientEndpointStringParser for using the
SOCKS5ClientEndpoint with Tor:
<A HREF="https://gist.github.com/david415/26a4ed59078d2e27376f">https://gist.github.com/david415/26a4ed59078d2e27376f</A>

I modified a txsocksx code example for testing the new endpoint descriptor:
<A HREF="https://gist.github.com/david415/7c6040117319cc3b0230">https://gist.github.com/david415/7c6040117319cc3b0230</A>

...but I am not sure how to &quot;register&quot; it such that calls to
clientFromString can return this endpoint when the descriptor prefix
matches.

This doc:
<A HREF="https://twistedmatrix.com/documents/13.2.0/api/twisted.internet.interfaces.IStreamClientEndpointStringParser.html">https://twistedmatrix.com/documents/13.2.0/api/twisted.internet.interfaces.IStreamClientEndpointStringParser.html</A>
mentions placing the plugin in the twisted.plugins package... however this doc:
<A HREF="http://twistedsphinx.funsize.net/projects/core/howto/plugin.html">http://twistedsphinx.funsize.net/projects/core/howto/plugin.html</A>
suggests that I can also set the PYTHONPATH to a directory:

&quot;&quot;&quot;if a directory which has been added to sys.path (typically by
adding it to the PYTHONPATH environment variable) contains a directory
named twisted/plugins/ , each .py file in that directory will be
loaded as a source of plugins.&quot;&quot;&quot;

I'm using twisted 13.2.0 in a virtualenv... and I've tried setting
PYTHONPATH to a &quot;twisted/plugins&quot; directory no avail. I must be doing
something wrong here but after scouring the docs and twisted source
code... I'm just not sure.

This effort is part of solving for Tahoe-LAFS trac ticket 517:
&quot;make tahoe Tor- and I2P-friendly&quot;
<A HREF="https://tahoe-lafs.org/trac/tahoe-lafs/ticket/517">https://tahoe-lafs.org/trac/tahoe-lafs/ticket/517</A>

Thanks to Glyph and JP's help I was able to write a foolscap client
side patch to use twisted endpoints. See foolscap trac ticket 203:
<A HREF="http://foolscap.lothar.com/trac/ticket/203#comment:36">http://foolscap.lothar.com/trac/ticket/203#comment:36</A>

str4d has already written the foolscap server side endpoint patch...
Therefore it seems to me the next steps are to create parsers for
endpoints we are interested in supporting... and get Tahoe-LAFS to
register them so that serverFromString and clientFromString will
return the expected endpoint objects.

Cheers!

David

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="028265.html">[Twisted-Python] Some comments regarding #5190 - ``RFC 6125 (&quot;Service Identity&quot;) implementation´´
</A></li>
	<LI>Next message (by thread): <A HREF="060729.html">[Twisted-Python] adding endpoint plugins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28267">[ date ]</a>
              <a href="thread.html#28267">[ thread ]</a>
              <a href="subject.html#28267">[ subject ]</a>
              <a href="author.html#28267">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
