<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Using twisted.conch.recvline
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Using%20twisted.conch.recvline&In-Reply-To=429CDCAE.6020609%40fettig.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010637.html">
   <LINK REL="Next"  HREF="010626.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Using twisted.conch.recvline</H1>
    <B>Jp Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Using%20twisted.conch.recvline&In-Reply-To=429CDCAE.6020609%40fettig.net"
       TITLE="[Twisted-Python] Using twisted.conch.recvline">exarkun at divmod.com
       </A><BR>
    <I>Wed Jun  1 17:24:07 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010637.html">[Twisted-Python] PyPgSQL not locking in adbapi
</A></li>
        <LI>Next message: <A HREF="010626.html">[Twisted-Python] Using twisted.conch.recvline
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10618">[ date ]</a>
              <a href="thread.html#10618">[ thread ]</a>
              <a href="subject.html#10618">[ subject ]</a>
              <a href="author.html#10618">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 31 May 2005 17:52:46 -0400, Abe Fettig &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">abe at fettig.net</A>&gt; wrote:
&gt;<i>Hello all,
</I>&gt;<i>
</I>&gt;<i>I'm trying to figure out how to hook up the necessary classes in
</I>&gt;<i>twisted.conch.recvline to add line-editing and history to a simple ssh
</I>&gt;<i>app. It was easy to modify
</I>&gt;<i><A HREF="http://twistedmatrix.com/projects/conch/documentation/examples/sshsimpleserver.py">http://twistedmatrix.com/projects/conch/documentation/examples/sshsimpleserver.py</A>
</I>&gt;<i>to use a custom protocol (a simple command-line interface that sends web
</I>&gt;<i>services requests to a JotSpot wiki), but I can't figure out how
</I>&gt;<i>recvline is meant to be used. Could someone (Jp?) show me how you'd go
</I>&gt;<i>about bolting recvline onto sshsimpleserver?
</I>&gt;<i>
</I>
In summary, you need:

  1) A Realm which produces avatars implementing IConchUser
  2) An avatar which also implements or is adaptable to ISession
  3) A session which constructs a twisted.conch.insults.insults.ServerProtocol in openShell, and connects it to a transport
  4) A protocol class which subclasses one of the recvline protocol classes, passed as the first argument to ServerProtocol

If you hook all these pieces up right, the protocol class you give to ServerProtocol should end up receiving application-level data from your ssh server, and its terminal attribute will be hooked up to send bytes back.

Note that this API may not be stable.

There's an example of all this smeared across doc/conch/examples/demo_recvline.py and twisted/conch/manhole_ssh.py.


The API presented by manhole_ssh.py is definitely not stable.

Jp


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010637.html">[Twisted-Python] PyPgSQL not locking in adbapi
</A></li>
	<LI>Next message: <A HREF="010626.html">[Twisted-Python] Using twisted.conch.recvline
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10618">[ date ]</a>
              <a href="thread.html#10618">[ thread ]</a>
              <a href="subject.html#10618">[ subject ]</a>
              <a href="author.html#10618">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
