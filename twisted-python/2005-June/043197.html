<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Using lineReceived with HTTP requests
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Using%20lineReceived%20with%20HTTP%20requests&In-Reply-To=%3C20050611073817.19497.qmail%40web54102.mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="043196.html">
   <LINK REL="Next"  HREF="043198.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Using lineReceived with HTTP requests</H1>
    <B>Andrea Soong</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Using%20lineReceived%20with%20HTTP%20requests&In-Reply-To=%3C20050611073817.19497.qmail%40web54102.mail.yahoo.com%3E"
       TITLE="[Twisted-Python] Using lineReceived with HTTP requests">girloncrack at yahoo.com
       </A><BR>
    <I>Sat Jun 11 01:38:17 MDT 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="043196.html">[Twisted-Python] Using lineReceived with HTTP requests
</A></li>
        <LI>Next message (by thread): <A HREF="043198.html">[Twisted-Python] Using lineReceived with HTTP requests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43197">[ date ]</a>
              <a href="thread.html#43197">[ thread ]</a>
              <a href="subject.html#43197">[ subject ]</a>
              <a href="author.html#43197">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
This seems like it has something to do with my problem, although it doesn't offer any clues as to a solution:

&quot;Unfortunately, handling arbitrary data chunks is a hard way to code a server. This is why twisted has many classes sitting in submodules of the twisted.protocols package which give higher level interface to the data. For line oriented protocols, LineReceiver translates the low-level dataReceived events into lineReceived events. However, the first naive implementation of LineReceiver proved to be too simple. Protocols like HTTP/1.1 or Freenet have packets which begin with header lines that include length information, and then byte streams. LineReceiver was rewritten to have a simple interface for switching at the protocol layer between line-oriented parts and byte-stream parts. &quot;
(from <A HREF="http://www.python10.org/p10-papers/09/index.htm">http://www.python10.org/p10-papers/09/index.htm</A>)

Andrea Soong &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">girloncrack at yahoo.com</A>&gt; wrote:Hi all,
 
First off, I'd like to say thanks to Ken Whitesell for giving me some much needed help.
 
Here's my problem:  I am using an HTTPClient instance to connect to a webpage, and am trying to retrieve its contents and display to the screen line by line, using the lineReceived method.  This is all being done in an .rpy file.  For some reason, I am only receiving the header information:
---------------------------------------------
[start line received]
       HTTP/1.0 200 OK
[end line received]
[start line received]
       Cache-Control: private
[end line received]
[start line received]
       Content-Type: text/html
[end line received]
[start line received]
       Set-Cookie: PREF=ID=aacd1eed2e435ca5:TM=1118474192:LM=1118474192:S=QyMnwhj46cXbhy_1; expires=Sun, 17-Jan-2038 19:14:07 GMT; path=/; domain=.google.com
[end line received]
[start line received]
       Server: GWS/2.1
[end line received]
[start line received]
       Date: Sat, 11 Jun 2005 07:16:32 GMT
[end line received]
[start line received]
       Connection: Close
[end line received]
[start line received]
       
[end line received]
---------------------------------------------
 
Does anyone know if there is some incompatibility in using lineReceived with the format of a webpage (i.e. maybe they are missing the standard EOL delimiters)?  dataReceived works fine and outputs the whole webpage at once.  
 
Also, I am using handleRequestEnd to detect the end of the transmission and call request.finish(),  but it does not seem to be getting called at all - the browser just keeps waiting for more data.  I've put a simple request.write(&quot;handleRequestEnd called&quot;) call on the first line of the method and it does not get written to the screen.  I can't find any explanation for how to use most of the methods in the HTTPClient class in the API - is there a better way to do this (i.e. one that works!) ?
 
 
Thanks,
Andrea



---------------------------------
Discover Yahoo!
Have fun online with music videos, cool games, IM &amp; more. Check it out!_______________________________________________
Twisted-Python mailing list
<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>


		
---------------------------------
Do you Yahoo!?
 Yahoo! Mail - Find what you need with new enhanced search. Learn more.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20050611/34235645/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="043196.html">[Twisted-Python] Using lineReceived with HTTP requests
</A></li>
	<LI>Next message (by thread): <A HREF="043198.html">[Twisted-Python] Using lineReceived with HTTP requests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43197">[ date ]</a>
              <a href="thread.html#43197">[ thread ]</a>
              <a href="subject.html#43197">[ subject ]</a>
              <a href="author.html#43197">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
