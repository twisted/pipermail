<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Asynchronous File I/O
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Asynchronous%20File%20I/O&In-Reply-To=%3C20050621164239.5047.1520969969.divmod.quotient.6689%40ohm%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="043313.html">
   <LINK REL="Next"  HREF="043315.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Asynchronous File I/O</H1>
    <B>Jp Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Asynchronous%20File%20I/O&In-Reply-To=%3C20050621164239.5047.1520969969.divmod.quotient.6689%40ohm%3E"
       TITLE="[Twisted-Python] Asynchronous File I/O">exarkun at divmod.com
       </A><BR>
    <I>Tue Jun 21 10:42:39 MDT 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="043313.html">[Twisted-Python] Asynchronous File I/O
</A></li>
        <LI>Next message (by thread): <A HREF="043315.html">[Twisted-Python] defers, reactor,	idiomatic/proper usage -- new user questions.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43314">[ date ]</a>
              <a href="thread.html#43314">[ thread ]</a>
              <a href="subject.html#43314">[ subject ]</a>
              <a href="author.html#43314">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 21 Jun 2005 19:16:20 +0300, Mustafa Sakalsiz &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mustafa at liqia.com</A>&gt; wrote:
&gt;<i>Is there a way to read and writes files asynchronously using twisted.
</I>&gt;<i>
</I>&gt;<i>The files may be of regular files or devices (/dev/*).
</I>&gt;<i>
</I>
Twisted doesn't wrap or otherwise expose any platform specific asynchronous disk or device file IO routines.

Twisted's KQueue and IOCP support could be extended to provide this feature on BSD and Win32 (and AIO could probably be used to implement the same API on Linux), if there is some compelling use case for this.

Most applications get along fine using blocking disk IO, since it generally doesn't block for very long.  For cases where wrapping a real asynchronous IO layer is too much work but doing blocking disk IO is too detrimental, simply sending IO operations to a thread may be a suitable solution.  For example, twisted.internet.threads.deferToThread(fileObj.read, size) returns a Deferred that fires with at most size bytes from fileObj.  If you go this route, you must be careful to serialize operations on individual file objects, of course.

For device files, inotify.py in the Twisted sandbox has some code that might be useful (OTOH, perhaps it is just overengineered).  See its connectCharacterDevice() function.

Jp


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="043313.html">[Twisted-Python] Asynchronous File I/O
</A></li>
	<LI>Next message (by thread): <A HREF="043315.html">[Twisted-Python] defers, reactor,	idiomatic/proper usage -- new user questions.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43314">[ date ]</a>
              <a href="thread.html#43314">[ thread ]</a>
              <a href="subject.html#43314">[ subject ]</a>
              <a href="author.html#43314">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
