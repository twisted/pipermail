<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Conch SSH help?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Conch%20SSH%20help%3F&In-Reply-To=42B1FC6A.6060201%40liveworld.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010769.html">
   <LINK REL="Next"  HREF="010757.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Conch SSH help?</H1>
    <B>Paul Swartz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Conch%20SSH%20help%3F&In-Reply-To=42B1FC6A.6060201%40liveworld.com"
       TITLE="[Twisted-Python] Conch SSH help?">z3p at twistedmatrix.com
       </A><BR>
    <I>Fri Jun 17 13:43:38 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010769.html">[Twisted-Python] Conch SSH help?
</A></li>
        <LI>Next message: <A HREF="010757.html">[Twisted-Python] Logging to multiple files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10778">[ date ]</a>
              <a href="thread.html#10778">[ thread ]</a>
              <a href="subject.html#10778">[ subject ]</a>
              <a href="author.html#10778">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 2005-06-16 at 15:25 -0700, Nick Arnett wrote:
&gt;<i> I'm getting stuck trying to do something I imagined would be easy in 
</I>&gt;<i> Conch.  I want to log into a server, ls a directory, then grep inside a 
</I>&gt;<i> certain file in each of the directories found by the ls command.
</I>&gt;<i> 
</I>&gt;<i> I've had no trouble logging in and running ls, then capturing its 
</I>&gt;<i> output.  But then I'm stuck.  I can't figure out where to put the loop 
</I>&gt;<i> through the directories.  I can see how to do one in a new channel, but 
</I>&gt;<i> I sure can't see how to run the series of them and capture their 
</I>&gt;<i> output.  I want to end up with a data structure that has the directory 
</I>&gt;<i> name and the results of the grep as a list: [(dir, grep_results),...].
</I>
It sounds like you want something like DeferredList.

&gt;<i> I've tried calling my &quot;grep&quot; channel object repeatedly and that sort of 
</I>&gt;<i> works, but only does the first seven or eight and fails.  I've tried 
</I>&gt;<i> putting the loop in the channelOpen method of the &quot;grep&quot; channel and 
</I>&gt;<i> that never gets any results.  I tried building a series of callbacks in 
</I>&gt;<i> there and running it, but that doesn't work, either.
</I>
What fails?  Does the channel fail to open?  Does it return the wrong
results?

&gt;<i> What I also find confusing is that I run the command with sendRequest, 
</I>&gt;<i> but the results come back in the dataReceived method -- how does it know 
</I>&gt;<i> which command's results it is receiving?
</I>
sendRequest tells the server what command to run.  The server runs that
command, and connects stdout/stdin to the SSH connection.  dataReceived
is then called with the data from stdout.

If you can get the code even into one file, that would be helpful.  It's
hard to know quite what's going on without seeing what you're doing.

-p
-- 
       Paul Swartz
(o_    <A HREF="http://z3p.livejournal.com/">http://z3p.livejournal.com/</A>  _o)
//\    <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">z3p at twistedmatrix.com</A>        /\\
V_/_   AIM: z3penguin              _\_V-&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20050617/5c689b98/attachment.pgp">http://twistedmatrix.com/pipermail/twisted-python/attachments/20050617/5c689b98/attachment.pgp</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010769.html">[Twisted-Python] Conch SSH help?
</A></li>
	<LI>Next message: <A HREF="010757.html">[Twisted-Python] Logging to multiple files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10778">[ date ]</a>
              <a href="thread.html#10778">[ thread ]</a>
              <a href="subject.html#10778">[ subject ]</a>
              <a href="author.html#10778">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
