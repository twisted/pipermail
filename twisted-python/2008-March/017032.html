<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Help with BananaError
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Help%20with%20BananaError&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017035.html">
   <LINK REL="Next"  HREF="017034.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Help with BananaError</H1>
    <B>Iago Toral</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Help%20with%20BananaError&In-Reply-To="
       TITLE="[Twisted-Python] Help with BananaError">itoral at igalia.com
       </A><BR>
    <I>Thu Mar 13 14:24:49 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017035.html">[Twisted-Python] twisted names - how to add answers to a message	and send replies
</A></li>
        <LI>Next message: <A HREF="017034.html">[Twisted-Python] Help with BananaError
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17032">[ date ]</a>
              <a href="thread.html#17032">[ thread ]</a>
              <a href="subject.html#17032">[ subject ]</a>
              <a href="author.html#17032">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I'm working on the gnome build brigade (<A HREF="http://build.gnome.org/">http://build.gnome.org/</A>) using
Buildbot, which is a continuous integration tool based on Twisted.

I have several Twisted services (buildbot masters) running behind a
firewall (say ports 8001, 8002, mand 8003) and only one opened port for
external connections (say 9000). 

I'm writting a small Twisted tool to allow me to use these services
which port is not open directly for external connections through that
opened port to other external Twisted clients (buildbot slaves):

+----------------+                 
|<i>server-1:8001&lt;-&gt;|                 
</I>|<i>server-2:8002&lt;-&gt;|&lt;-&gt;:9000&lt;---&gt;Internet&lt;--&gt;clients
</I>|<i>server-3:8003&lt;-&gt;|                 
</I>+----------------+                 

This tool has two parts, the client side (Mux) wraps the application
protocol by adding a header that identifies the client and also the
server it wants to connect. The server side (Demux) listens on the
opened port (9000) for incomming messages, extracts the client header
with information identifying the client and uses that information to
properly redirect the wrapped message to the appropriate internal port.

This tool works mostly ok, except that after some minutes working
properly redirecting several dozens of messages correctly, the Demux
breaks (on reception of a normal incoming message) with the following
error message:

exception:
  File &quot;/home/master/devel/lib/python/twisted/spread/banana.py&quot;, line
176, in
dataReceived                                                      
    raise BananaError(&quot;Security precaution: List too long.&quot;)    

The messages do not exceed the maximum size defined in banana.py,
actually these messages are rather small, usually less than 1KB.

Does anyone know what that error message means and when it happens? What
might an application be doing wrong for that to happen?

Attached is the code of this tool, both the Mux and the Demux, it is a
very small file (~100 lines of code). Also, take into account that this
was written as a protoype and it is my first TWisted program so it might
be very badly designed.

Thanks in advance for any feedback you can give!!

Iago
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tunnel.py
Type: text/x-python
Size: 4021 bytes
Desc: not available
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20080313/612ceb77/attachment.py">http://twistedmatrix.com/pipermail/twisted-python/attachments/20080313/612ceb77/attachment.py</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017035.html">[Twisted-Python] twisted names - how to add answers to a message	and send replies
</A></li>
	<LI>Next message: <A HREF="017034.html">[Twisted-Python] Help with BananaError
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17032">[ date ]</a>
              <a href="thread.html#17032">[ thread ]</a>
              <a href="subject.html#17032">[ subject ]</a>
              <a href="author.html#17032">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
