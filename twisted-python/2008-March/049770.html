<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Other ways to integrate foreign event loops?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Other%20ways%20to%20integrate%20foreign%20event%20loops%3F&In-Reply-To=%3C96c9d6a80803311545s1bb003daya57e2bbbe9ab667d%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="049768.html">
   <LINK REL="Next"  HREF="049772.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Other ways to integrate foreign event loops?</H1>
    <B>Nathan</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Other%20ways%20to%20integrate%20foreign%20event%20loops%3F&In-Reply-To=%3C96c9d6a80803311545s1bb003daya57e2bbbe9ab667d%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Other ways to integrate foreign event loops?">nathan.stocks at gmail.com
       </A><BR>
    <I>Mon Mar 31 16:45:04 MDT 2008</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="049768.html">[Twisted-Python] Correct way to handle errors of connectTCP
</A></li>
        <LI>Next message (by thread): <A HREF="049772.html">[Twisted-Python] Other ways to integrate foreign event loops?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49770">[ date ]</a>
              <a href="thread.html#49770">[ thread ]</a>
              <a href="subject.html#49770">[ subject ]</a>
              <a href="author.html#49770">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Is there a way to do the opposite of task.coiterate?  I'm using pyglet
for my UI, which was working great until I upgraded from pyglet 1.0 to
1.1.  Now for some reason, the pyglet performance tanked.  Since I'm
only using twisted to send AMP messages very rarely (on the order of
one every few seconds), it seems like I could try to work around the
problem by giving pyglet back control of the main loop and
occasionally giving twisted some time to breath (occasionally like
every 50ms or something).  Can that be done?

Here's what I'm doing _now_ that technically works, but pyglet 1.1 is
really choking on:

&gt;<i> class MyWindow(pyglet.window.Window):
</I>&gt;<i>  def run(self):
</I>&gt;<i>     while not self.has_exit:
</I>&gt;<i>        do_some_stuff_like_dispatching_updating_and_drawing()
</I>&gt;<i>        yield 1
</I>&gt;<i>
</I>&gt;<i> my_window = MyWindow()
</I>&gt;<i> task.coiterate(my_window.run())
</I>&gt;<i> reactor.run()
</I>
By the way, the preferred method for the runloop on pyglet 1.1 is to
use a builtin one like so:

&gt;<i> window = pyglet.window.Window()
</I>&gt;<i>
</I>&gt;<i> @window.event
</I>&gt;<i> def on_draw():
</I>&gt;<i>    window.clear()
</I>&gt;<i>    do_drawing_stuff()
</I>&gt;<i>
</I>&gt;<i> pyglet.app.run()
</I>
So if twisted can stand giving up it's run loop, I could periodically
call it from that &quot;on_draw()&quot; method.

~ Nathan


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="049768.html">[Twisted-Python] Correct way to handle errors of connectTCP
</A></li>
	<LI>Next message (by thread): <A HREF="049772.html">[Twisted-Python] Other ways to integrate foreign event loops?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49770">[ date ]</a>
              <a href="thread.html#49770">[ thread ]</a>
              <a href="subject.html#49770">[ subject ]</a>
              <a href="author.html#49770">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
