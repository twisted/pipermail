<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Serial port communication
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Serial%20port%20communication&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017186.html">
   <LINK REL="Next"  HREF="017188.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Serial port communication</H1>
    <B>Daniel Marfil</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Serial%20port%20communication&In-Reply-To="
       TITLE="[Twisted-Python] Serial port communication">dmarfil at citic.es
       </A><BR>
    <I>Tue Mar 25 07:45:25 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017186.html">[Twisted-Python] Foolscap-0.2.5 released
</A></li>
        <LI>Next message: <A HREF="017188.html">[Twisted-Python] Serial port communication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17187">[ date ]</a>
              <a href="thread.html#17187">[ thread ]</a>
              <a href="subject.html#17187">[ subject ]</a>
              <a href="author.html#17187">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, I'm trying to send some commands to a modem connected to the serial 
port, in a sequential way.
I can send the first command to the modem but I must wait for the whole 
response before sending the next command. I haven't got much experience 
with Twisted so I'm not sure about the best protocol I can use for this.
At this moment I'm trying with SerialPort (from 
twisted.internet.serialport) as my factory, and LineReceiver (from 
twisted.protocols.basic) as its protocol.
I can write to the serial port with the SerialPort's method 
writeSomeData and it works fine, but the modem returns the response byte 
to byte, so the dataReceived method (in the LineReceiver protocol) is 
launched with every byte received, so I have to store the bytes in a 
string so I can find the end of the response and then I can see the 
whole response.
So I can get the whole response from the modem, but in that moment I 
don't know how to tell the factory that it can send another 
writeSomeData (remember that it must be done in a sequential way).
So the question is: how can I tell the factory that it can run another 
writeSomeData once I got the right response from the modem?

I know that the main problem is my inexperience with Twisted, so I'm 
sure there's a better way to implement this. Maybe a more appropiate 
protocol?

Any clue will be very welcome ;-)

Thanks in advance,

Daniel Marfil


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017186.html">[Twisted-Python] Foolscap-0.2.5 released
</A></li>
	<LI>Next message: <A HREF="017188.html">[Twisted-Python] Serial port communication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17187">[ date ]</a>
              <a href="thread.html#17187">[ thread ]</a>
              <a href="subject.html#17187">[ subject ]</a>
              <a href="author.html#17187">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
