<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] pyactivemq interfering with Twisted?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20pyactivemq%20interfering%20with%20Twisted%3F&In-Reply-To=87ca9d700803181849ya42f392r11068948bf95141c%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017066.html">
   <LINK REL="Next"  HREF="017069.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] pyactivemq interfering with Twisted?</H1>
    <B>Valentino Volonghi</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20pyactivemq%20interfering%20with%20Twisted%3F&In-Reply-To=87ca9d700803181849ya42f392r11068948bf95141c%40mail.gmail.com"
       TITLE="[Twisted-Python] pyactivemq interfering with Twisted?">dialtone at gmail.com
       </A><BR>
    <I>Tue Mar 18 23:35:42 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017066.html">[Twisted-Python] pyactivemq interfering with Twisted?
</A></li>
        <LI>Next message: <A HREF="017069.html">[Twisted-Python] pyactivemq interfering with Twisted?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17067">[ date ]</a>
              <a href="thread.html#17067">[ thread ]</a>
              <a href="subject.html#17067">[ subject ]</a>
              <a href="author.html#17067">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Mar 19, 2008 at 2:49 AM, Brian Baquiran &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">brianbaquiran at gmail.com</A>&gt; wrote:
&gt;<i> The API does not block when using an async message listener as I'm doing.
</I>&gt;<i> Here's some example pyactivemq code that shows how an asynchronous message
</I>&gt;<i> listener is registered:
</I>&gt;<i>  <A HREF="http://pyactivemq.googlecode.com/svn/trunk/src/examples/asynclistener.py">http://pyactivemq.googlecode.com/svn/trunk/src/examples/asynclistener.py</A>
</I>
This API actually blocks.

Just by looking at:
   conn = f.createConnection()

Which means that you can create a connection and immediately get the result.
This is blocking by any relevant definition of blocking.

Judging by the API the only difference between sync and async seems to
be related
to the type of producer involved. A Push producer is generally
considered async and
a pull producer is sync.

Looking further in the API of ActiveMQ-CPP, even though I'm not too
good with C++,
I can easily spot lines like the following:

Response* response = transport-&gt;request( &amp;cmd );

which to me appears as totally synchronous and thus blocking,
a non blocking API would have been more like:

transport-&gt;request(&amp;cmd, &amp;onMessage);

The transport itself is implemented in the following way:

        // Start the polling thread.
        thread = new Thread( this );
        thread-&gt;start();

and its run method contains:

    try{

        while( !closed ){

            // Read the next command from the input stream.
            Command* command = reader-&gt;readCommand();

            // Notify the listener.
            fire( command );
        }

    }

Considering all of this you should probably use this from deferToThread.

-- 
Valentino Volonghi aka Dialtone
Now running MacOS X 10.5
Home Page: <A HREF="http://www.twisted.it">http://www.twisted.it</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017066.html">[Twisted-Python] pyactivemq interfering with Twisted?
</A></li>
	<LI>Next message: <A HREF="017069.html">[Twisted-Python] pyactivemq interfering with Twisted?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17067">[ date ]</a>
              <a href="thread.html#17067">[ thread ]</a>
              <a href="subject.html#17067">[ subject ]</a>
              <a href="author.html#17067">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
