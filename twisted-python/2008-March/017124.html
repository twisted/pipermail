<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: writing back to the connection is	blocking	my code
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20writing%20back%20to%20the%20connection%20is%09blocking%0A%09my%20code&In-Reply-To=20080321142516.ves96zu0d4csk4gg%40wasabox.wasabout.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017121.html">
   <LINK REL="Next"  HREF="017126.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: writing back to the connection is	blocking	my code</H1>
    <B>coder_gus</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20writing%20back%20to%20the%20connection%20is%09blocking%0A%09my%20code&In-Reply-To=20080321142516.ves96zu0d4csk4gg%40wasabox.wasabout.net"
       TITLE="[Twisted-Python] Re: writing back to the connection is	blocking	my code">coder_gus at lavabit.com
       </A><BR>
    <I>Fri Mar 21 10:07:36 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017121.html">[Twisted-Python] Re: writing back to the connection is	blocking my code
</A></li>
        <LI>Next message: <A HREF="017126.html">[Twisted-Python] Re: writing back to the connection is	blocking my code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17124">[ date ]</a>
              <a href="thread.html#17124">[ thread ]</a>
              <a href="subject.html#17124">[ subject ]</a>
              <a href="author.html#17124">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, thanks for answering and clarifying this - until now you where the 
only one that told me there no way of sending data if there is no event 
on the server. So what I am trying to achieve, I have asked a couple of 
weeks ago too about this matter (actually about the architecure): I want 
to write an application server that receives data from clients (client 
app written in delphi), data is in xml format (I want to write it using 
a bare-bone protocol and not an xml-rpc server). The data the client 
sends are some requests for some specific data hold in a database. So, 
the client makes a request, request that is hold in a synchronized queue 
together with an instance of the client's connection. A coordinator 
takes the data from that queue and gives it to some xml threads to parse 
it and the same coordinator take the parsed data from the xml threads 
and give some workers to do the bussiness work. This workers place the 
result in a queue from where the coordinator takes care of sending it 
back to the clients. I will be using sqlalchemy for database communication.
I know the architecture is pretty weird from the twisted perspective, 
but when the dev-manager wants to do it that way, what can you do? So 
that is the thing I want to achieve and from this started my question; 
when the workers finish their work, they have the result, place it in a 
queue and from there I have to send it to the clients asap, without 
waiting the server for events.

Not sure if I made myself clear as I am not a native-English speaker.

Thanks for you patience. :)

Thomas Herv&#233; wrote:
&gt;<i> Quoting coder_gus &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">coder_gus at lavabit.com</A>&gt;:
</I>&gt;<i>
</I>&gt;&gt;<i> Agreed, I was talking about transport.tcpKeepAlive(). The thing I am
</I>&gt;&gt;<i> asking (and call me stupid, but I am trying to figure it out for days
</I>&gt;&gt;<i> now and no one seems to answer my question or is it me too stupid that
</I>&gt;&gt;<i> can see the answer in front of my eyes) is how do I send data to
</I>&gt;&gt;<i> clients that are connected to the twisted server waiting for data to be
</I>&gt;&gt;<i> processed, without sending to the server any data or causing any event
</I>&gt;&gt;<i> to the server?
</I>&gt;<i>
</I>&gt;<i> This is where you are confused I think. There is no way to send data 
</I>&gt;<i> to clients if you don't have *any* events on the server. Because how 
</I>&gt;<i> would you now to send data if you don't have something telling you to 
</I>&gt;<i> do so? You should have a time event, or a network event from another 
</I>&gt;<i> client, or a GUI input, or whatever.
</I>&gt;<i>
</I>&gt;&gt;<i> In the link you guys showed me it's true that the data
</I>&gt;&gt;<i> gets back to the clients, but only when the server receives other data,
</I>&gt;&gt;<i> that is in the dataReceived method. How can I send it back to them
</I>&gt;&gt;<i> (having a reference to each client's protocol class) without receiving
</I>&gt;&gt;<i> data, client connecting etc. ?
</I>&gt;<i>
</I>&gt;<i> It's not totally clear to understand what you're trying to achieve, so 
</I>&gt;<i> maybe you want to explain more clearly your problem. I suspect you 
</I>&gt;<i> want to use reactor.callLater, to generate a time event.
</I>&gt;<i>
</I>&gt;<i>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017121.html">[Twisted-Python] Re: writing back to the connection is	blocking my code
</A></li>
	<LI>Next message: <A HREF="017126.html">[Twisted-Python] Re: writing back to the connection is	blocking my code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17124">[ date ]</a>
              <a href="thread.html#17124">[ thread ]</a>
              <a href="subject.html#17124">[ subject ]</a>
              <a href="author.html#17124">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
