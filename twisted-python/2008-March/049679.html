<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] symlink support in filepath.FilePath
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20symlink%20support%20in%20filepath.FilePath&In-Reply-To=%3C20080324173707.6859.1585951735.divmod.quotient.22439%40ohm%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="049671.html">
   <LINK REL="Next"  HREF="049680.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] symlink support in filepath.FilePath</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20symlink%20support%20in%20filepath.FilePath&In-Reply-To=%3C20080324173707.6859.1585951735.divmod.quotient.22439%40ohm%3E"
       TITLE="[Twisted-Python] symlink support in filepath.FilePath">exarkun at divmod.com
       </A><BR>
    <I>Mon Mar 24 11:37:07 MDT 2008</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="049671.html">[Twisted-Python] symlink support in filepath.FilePath
</A></li>
        <LI>Next message (by thread): <A HREF="049680.html">[Twisted-Python] symlink support in filepath.FilePath
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49679">[ date ]</a>
              <a href="thread.html#49679">[ thread ]</a>
              <a href="subject.html#49679">[ subject ]</a>
              <a href="author.html#49679">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 24 Mar 2008 09:34:00 -0500, Ying Li &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">cyli at alum.mit.edu</A>&gt; wrote:
&gt;<i>I've been trying to put a few patches into twisted.python.filepath lately to 
</I>&gt;<i>support symlinks.  This is because I'm trying to implement a conch SFTP 
</I>&gt;<i>server using FilePath.
</I>
Hooray!  Thanks for working on FilePath. :)

&gt;<i>
</I>&gt;<i>I know FilePath is supposed to be cross-platform, so I am wondering how to 
</I>&gt;<i>go about it.
</I>
Hmm.  I guess FilePath _is_ supposed to be cross-platform.  Maybe it would
be useful to list the other things it is supposed to be:

  * easier to use than os.path.*
  * more efficient in naive usage (hence `restat´)
  * sufficiently self-contained so that things like ZipPath are possible
  * safe against common security-related mistakes (hence `child´)

Whether or not it succeeds at any of these goals is probably an open
question, and work could probably be done to improve it in all these
areas, _and_ the approach taken to accomplish some of these goals may
be questionable.

&gt;<i>  For instance, it would be really easy to add a flag to restat 
</I>&gt;<i>that specifies whether to use os.stat o os.lstat.
</I>
It sounds like this change would increase the (already slightly too high)
level of weirdness in FilePath stat caching.  On the other hand, I'm not
really sure how link handling should sensibly be done in FilePath at all.

&gt;<i>
</I>&gt;<i>But how should I handle the getAccessTime/etc. functions?  Should I add a 
</I>&gt;<i>FilePath.symlink() function (that creates a symlink to said FilePath)?
</I>
`FilePath.symlink´ (or maybe better, something like `FilePath.linkTo´)
seems like a good addition to the API.  `get*Time´ is a bit trickier.  An
option might be to expose an `lstat´ method and let applications worry
about getting the necessary information out of that when they know they
care about the link, not its target.

&gt;<i>
</I>&gt;<i>Should I just implement my own subclass of FilePath that handles symlinks 
</I>&gt;<i>and not try to change FilePath?
</I>
It'd be great to have anything that's generally useful incorporated into
Twisted.  It might make sense to have a FilePath subclass for a while to
see what is an isn't useful for your SFTP server - or you might be happy
enough to briefly have a local copy of Twisted with your modifications
and only submit them once you're happy with them.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="049671.html">[Twisted-Python] symlink support in filepath.FilePath
</A></li>
	<LI>Next message (by thread): <A HREF="049680.html">[Twisted-Python] symlink support in filepath.FilePath
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49679">[ date ]</a>
              <a href="thread.html#49679">[ thread ]</a>
              <a href="subject.html#49679">[ subject ]</a>
              <a href="author.html#49679">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
