<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] pb.setFactoryForClass()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20pb.setFactoryForClass%28%29&In-Reply-To=%3CHOEEKPCOKELHCNIJNMAGIENOCFAA.sean%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] pb.setFactoryForClass()</H1>
    <B>Sean Riley</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20pb.setFactoryForClass%28%29&In-Reply-To=%3CHOEEKPCOKELHCNIJNMAGIENOCFAA.sean%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] pb.setFactoryForClass()">sean at twistedmatrix.com
       </A><BR>
    <I>Sat Jun 15 12:24:59 MDT 2002</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33728">[ date ]</a>
              <a href="thread.html#33728">[ thread ]</a>
              <a href="subject.html#33728">[ subject ]</a>
              <a href="author.html#33728">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>proposal for new functionality in pb:

In addition to the existing pb.setCopierForClass() I'd like a
pb.setFactoryForClass() which would take a factory method instead of a class
as its argument.

This would allow serialized objects to be re-constructed on the other end of
network connections by a factory instead of just be creating a new class.

I have a use case where objects are created locally on both the client and
server and these objects need to be passed as arguments to remote method
calls. The best way to do it seems to be to send a unique ID over the wire
and have a factory method transform the ID into the correct object on the
other side.

A trivial example:

class Thing(pb.Copyable)
  allIDs = {}

  def __init__(self, id):
    self.id = id
    Thing.allIDs[id] = self

  def getStateToJellyFor(self, perspective):
    return {&quot;id&quot;:self.id}

def thingFactory(state):
  return Thing.allIDs.get(state[&quot;id&quot;],None)

pb.setFactoryToCopyFor(&quot;Thing&quot;, thingFactory)


Things could then be send over the network as very small objects (just IDs)
as long as both side have already loaded all the &quot;Things&quot; from local
storage.

----
&quot;If it's not running programs or fusing atoms, it's just bending space.&quot;,
Ken Macleod
&quot;That's it, I'm outta here.&quot;, Homer Simpson's Brain
Sean Riley
<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">sean at ninjaneering.com</A>



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33728">[ date ]</a>
              <a href="thread.html#33728">[ thread ]</a>
              <a href="subject.html#33728">[ subject ]</a>
              <a href="author.html#33728">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
