<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] no 'headers' in server.Request instance problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20no%20%27headers%27%20in%20server.Request%20instance%20problem&In-Reply-To=%3C15623.46354.482223.481792%40erdos.totient.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="033712.html">
   <LINK REL="Next"  HREF="033720.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] no 'headers' in server.Request instance problem</H1>
    <B>Jon Dyte</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20no%20%27headers%27%20in%20server.Request%20instance%20problem&In-Reply-To=%3C15623.46354.482223.481792%40erdos.totient.com%3E"
       TITLE="[Twisted-Python] no 'headers' in server.Request instance problem">jon at totient.demon.co.uk
       </A><BR>
    <I>Wed Jun 12 14:54:42 MDT 2002</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="033712.html">[Twisted-Python] idea for file transfers over PB
</A></li>
        <LI>Next message (by thread): <A HREF="033720.html">[Twisted-Python] no 'headers' in server.Request instance problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33717">[ date ]</a>
              <a href="thread.html#33717">[ thread ]</a>
              <a href="subject.html#33717">[ subject ]</a>
              <a href="author.html#33717">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
with mozilla build
Mozilla/5.0 (X11; U; Linux i686; en-US; rv:0.9.8) Gecko/20020206,build 2002020615

sending a request to a quixote/twisted server (actually a modified
Andrew Kuchling Example), I get the following error

Installing SelectReactor, since unspecified.
__main__.QuixoteFactory starting on 8098
Traceback (most recent call last):
  File &quot;/sw/release/python/lib/python2.2/site-packages/twisted/internet/default.py&quot;, line 347, in doSelect
    why = getattr(selectable, method)()
  File &quot;/sw/release/python/lib/python2.2/site-packages/twisted/internet/tcp.py&quot;, line 93, in doRead
    return self.protocol.dataReceived(data)
  File &quot;/sw/release/python/lib/python2.2/site-packages/twisted/protocols/basic.py&quot;, line 161, in dataReceived
    self.lineReceived(line)
  File &quot;/sw/release/python/lib/python2.2/site-packages/twisted/protocols/http.py&quot;, line 684, in lineReceived
    self.allHeadersReceived()
  File &quot;/sw/release/python/lib/python2.2/site-packages/twisted/protocols/http.py&quot;, line 733, in allHeadersReceived
    self.persistent = self.checkPersistence(req, self.__version)
  File &quot;/sw/release/python/lib/python2.2/site-packages/twisted/protocols/http.py&quot;, line 759, in checkPersistence
    request.setHeader('connection', 'close')
  File &quot;/sw/release/python/lib/python2.2/site-packages/twisted/protocols/http.py&quot;, line 561, in setHeader
    self.headers[string.lower(k)] = v
exceptions.AttributeError: QuixoteTWRequest instance has no attribute
'headers'


The object QuixoteTWRequest is defined 

class QuixoteTWRequest (server.Request):
      ......

it looks to me like on some execution path thru http.py (dataReceived,
lineReceived) etc etc the headers slot of the server.Request object
doesnt get set. which would appear to mean requestReceived has not
been called as this sets self.headers to an empty dict at least.

The headers sent by the browser are :-
Host: localhost:9999

User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:0.9.8) Gecko/20020206

Accept: text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,video/x-mng,image/png,image/jpeg,image/gif;q=0.2,text/css,*/*;q=0.1

Accept-Language: en-us

Accept-Encoding: gzip, deflate, compress;q=0.9

Accept-Charset: ISO-8859-1, utf-8;q=0.66, *;q=0.66

Connection: close


localhost.localdomain - - [12/Jun/2002 21:40:50] &quot;GET / HTTP/1.1&quot; 200 -	       

I'm pretty new to Twisted, so I might be missing something here, but
the script works with lynx and netscape 4.76.


Jon
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="033712.html">[Twisted-Python] idea for file transfers over PB
</A></li>
	<LI>Next message (by thread): <A HREF="033720.html">[Twisted-Python] no 'headers' in server.Request instance problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33717">[ date ]</a>
              <a href="thread.html#33717">[ thread ]</a>
              <a href="subject.html#33717">[ subject ]</a>
              <a href="author.html#33717">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
