<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Unable to write to &quot;stuck&quot; TCP client	connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Unable%20to%20write%20to%20%22stuck%22%20TCP%20client%0A%09connections&In-Reply-To=%3C15AFC525-125C-4DE1-871D-AC5366377A0F%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="059041.html">
   <LINK REL="Next"  HREF="059045.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Unable to write to &quot;stuck&quot; TCP client	connections</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Unable%20to%20write%20to%20%22stuck%22%20TCP%20client%0A%09connections&In-Reply-To=%3C15AFC525-125C-4DE1-871D-AC5366377A0F%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Unable to write to &quot;stuck&quot; TCP client	connections">glyph at twistedmatrix.com
       </A><BR>
    <I>Tue Feb 26 00:36:59 MST 2013</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="059041.html">[Twisted-Python] Unable to write to &quot;stuck&quot; TCP client	connections
</A></li>
        <LI>Next message (by thread): <A HREF="059045.html">[Twisted-Python] Simple http server to serve php
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59042">[ date ]</a>
              <a href="thread.html#59042">[ thread ]</a>
              <a href="subject.html#59042">[ subject ]</a>
              <a href="author.html#59042">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Feb 25, 2013, at 10:24 PM, Wenxiang Wu &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">wenxiang at zopim.com</A>&gt; wrote:

&gt;<i> From what I can tell, there isn't a specific pattern that. But from this small sample size, users that run into this problem are those with higher levels of usage, i.e. connections with more traffic.
</I>&gt;<i> 
</I>&gt;<i> Also, this *seems* to affect users in the same LAN more. The 2 groups of affected users I worked closely with regarding this issue were both connected to the same WiFi router.
</I>
So, it sounds like it's happening with connections that are (A) faster and (B) shipping around more traffic.  Smells like a possible race condition - and maybe not in Twisted.  Is it possible for you to test with any other OS / kernel variations, to see if it behaves differently on other Linux versions, ideally some with changes to epoll?

I don't know epoll quite well enough to read the strace and tell what's going on.  If those are the only calls being traced... there's no gettimeofday or send or recv calls?  That suggests it's just thrashing, but if your workaround works, other stuff must be going on.  Hmm.  I guess I don't have a clear enough picture for any useful conjecture yet :).  Can you open a bug, and attach a more complete strace, assuming that the one with just the epoll calls was filtered?

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20130225/3b05c0ba/attachment-0001.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="059041.html">[Twisted-Python] Unable to write to &quot;stuck&quot; TCP client	connections
</A></li>
	<LI>Next message (by thread): <A HREF="059045.html">[Twisted-Python] Simple http server to serve php
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59042">[ date ]</a>
              <a href="thread.html#59042">[ thread ]</a>
              <a href="subject.html#59042">[ subject ]</a>
              <a href="author.html#59042">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
