<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Building a TCP server, having issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Building%20a%20TCP%20server%2C%20having%20issues&In-Reply-To=%3CCB37BBD7-8438-4E1B-A266-923438FD0A74%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="059019.html">
   <LINK REL="Next"  HREF="059021.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Building a TCP server, having issues</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Building%20a%20TCP%20server%2C%20having%20issues&In-Reply-To=%3CCB37BBD7-8438-4E1B-A266-923438FD0A74%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Building a TCP server, having issues">glyph at twistedmatrix.com
       </A><BR>
    <I>Sat Feb 16 15:53:41 MST 2013</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="059019.html">[Twisted-Python] Building a TCP server, having issues
</A></li>
        <LI>Next message (by thread): <A HREF="059021.html">[Twisted-Python] Building a TCP server, having issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59020">[ date ]</a>
              <a href="thread.html#59020">[ thread ]</a>
              <a href="subject.html#59020">[ subject ]</a>
              <a href="author.html#59020">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Feb 16, 2013, at 1:09 PM, Adam Heller &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">sk82712 at gmail.com</A>&gt; wrote:

&gt;<i> Guys,
</I>&gt;<i> I'll try to be as exact as I can be with my question, but it may end up being pretty broad. (I'm also relatively new to python, please go easy on my code although suggestions are of course welcome.)
</I>
The main suggestion is &quot;you can't parse TCP like this&quot; :).  You'll have this problem: &lt;<A HREF="http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#Whyisprotocol.dataReceivedcalledwithonlypartofthedataIcalledtransport.writewith">http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#Whyisprotocol.dataReceivedcalledwithonlypartofthedataIcalledtransport.writewith</A>&gt;

&gt;<i> The issue I'm running into:
</I>&gt;<i> When a user connects to the TCP server, they are displayed a welcome menu of things they can do. I'm simply catching the 'data' in an if statement to determine which menu item was picked.  The problem is that some of the menu items require further input.  I've had to use a series of bools to determine if a certain menu option was previously picked that will then directly send the data into the function / class.  Is there an easier way to go about this? My current method seems a bit backwards and over complicated.  I'm thinking I missed something in the documentation.
</I>
&gt;<i> Anyway, here's the code: <A HREF="https://infotomb.com/q4293">https://infotomb.com/q4293</A> // Pass: twisted
</I>
You should really attach the code itself to the email, so that future readers of the archive have some idea what you're talking about.  Pastebins in general are not great, since the code will expire before your archived message does, and pastebins with passwords (!?) are even worse.

&gt;<i> (it was part of a challenge, so to speak, don't take too much out of context)
</I>&gt;<i> 
</I>&gt;<i> You can see I had trouble with next() and dh().  I'm now trying to move this TCP 'framework' over to another project (the above was already submitted), and I'm still running into the same issues.
</I>
You should try separating out your concerns a bit.  The protocol should just parse the bytes into something meaningful, then call methods on some other, higher-level object that isn't just manipulating strings.

The &quot;other, higher-level object&quot; in your case might be a state machine of some kind, or you might just have an object representing the mode that you're currently in and switch that out for different modes.

This isn't an issue with Twisted though; Twisted just calls some methods on your objects in order to tell you what happened; what happens next is up to you.  So it's a general program architecture issue.

This is very general advice, obviously, because I'm not sure what you are specifically asking, nor what your program is really intended to do.  What kind of client is talking to this system?  Did you invent the protocol yourself, or did it come from somewhere else?  What is 'dh()' even trying to accomplish?  Etc, etc.


-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20130216/ff09b772/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="059019.html">[Twisted-Python] Building a TCP server, having issues
</A></li>
	<LI>Next message (by thread): <A HREF="059021.html">[Twisted-Python] Building a TCP server, having issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59020">[ date ]</a>
              <a href="thread.html#59020">[ thread ]</a>
              <a href="subject.html#59020">[ subject ]</a>
              <a href="author.html#59020">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
