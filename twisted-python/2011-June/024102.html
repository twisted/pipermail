<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Real-world but self-contained example?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Real-world%20but%20self-contained%20example%3F&In-Reply-To=20110618112401.GA4630%40localhost">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024097.html">
   <LINK REL="Next"  HREF="024093.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Real-world but self-contained example?</H1>
    <B>Orestis Markou</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Real-world%20but%20self-contained%20example%3F&In-Reply-To=20110618112401.GA4630%40localhost"
       TITLE="[Twisted-Python] Real-world but self-contained example?">orestis at orestis.gr
       </A><BR>
    <I>Sat Jun 18 16:35:41 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="024097.html">[Twisted-Python] Real-world but self-contained example?
</A></li>
        <LI>Next message: <A HREF="024093.html">[Twisted-Python] Building API documentation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24102">[ date ]</a>
              <a href="thread.html#24102">[ thread ]</a>
              <a href="subject.html#24102">[ subject ]</a>
              <a href="author.html#24102">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks, the first error slipped through. The even more curious problem is why should that ever happen - getHostByName returns &quot;None&quot; for the address there, when it should errback. It looks like there might be an issue with twisted.names, but I've learned to blame my code at first, esp for things I'm not sure I understand clearly.


On 18 Jun 2011, at 14:24, Jonathan Ballet wrote:

&gt;<i> [disclaimer: I'm a twisted newbie :) ]
</I>&gt;<i> 
</I>&gt;<i> On Sat, Jun 18, 2011 at 09:56:51AM +0300, Orestis Markou wrote:
</I>&gt;&gt;<i> a) someone looking at the code and pointing out possible bugs or ways it could be improved or
</I>&gt;<i> 
</I>&gt;<i> I also reproduce the problem, so I tried to shutdown the HTTP GET first
</I>&gt;<i> to see what was going on, and I noticed two errors while running the code:
</I>&gt;<i> 
</I>&gt;<i> 1) got_dns_error() is either called with a Twisted failure object (if
</I>&gt;<i>   the query fails) or with a Python exception if the address can't be
</I>&gt;<i>   resolved in _lookupName(), and the latter one doesn't have the
</I>&gt;<i>   getErrorMessage() method.
</I>&gt;<i> 
</I>&gt;<i>   I added a quick isinstance() call and now DNS resolving continues
</I>&gt;<i>   until all the names pool has been emptied.
</I>&gt;<i> 
</I>&gt;<i> 2) However, at the end of the DNS lookups, I got the following error
</I>&gt;<i> 
</I>&gt;<i> 2011-06-18 20:15:26+0900 [DNSProtocol,client] Unhandled Error
</I>&gt;<i>    Traceback (most recent call last):
</I>&gt;<i>      File &quot;monitor7.py&quot;, line 126, in &lt;module&gt;
</I>&gt;<i>        reactor.run()
</I>&gt;<i>      File &quot;/twisted/internet/base.py&quot;, line 1169, in run
</I>&gt;<i>        self.mainLoop()
</I>&gt;<i>      File &quot;/twisted/internet/base.py&quot;, line 1181, in mainLoop
</I>&gt;<i>        self.doIteration(t)
</I>&gt;<i>      File &quot;/twisted/internet/pollreactor.py&quot;, line 167, in doPoll
</I>&gt;<i>        log.callWithLogger(selectable, _drdw, selectable, fd, event)
</I>&gt;<i>    --- &lt;exception caught here&gt; ---
</I>&gt;<i>      File &quot;/twisted/python/log.py&quot;, line 84, in callWithLogger
</I>&gt;<i>        return callWithContext({&quot;system&quot;: lp}, func, *args, **kw)
</I>&gt;<i>      File &quot;/twisted/python/log.py&quot;, line 69, in callWithContext
</I>&gt;<i>        return context.call({ILogContext: newCtx}, func, *args, **kw)
</I>&gt;<i>      File &quot;/twisted/python/context.py&quot;, line 118, in callWithContext
</I>&gt;<i>        return self.currentContext().callWithContext(ctx, func, *args, **kw)
</I>&gt;<i>      File &quot;/twisted/python/context.py&quot;, line 81, in callWithContext
</I>&gt;<i>        return func(*args,**kw)
</I>&gt;<i>      File &quot;/twisted/internet/posixbase.py&quot;, line 587, in _doReadOrWrite
</I>&gt;<i>        self._disconnectSelectable(selectable, why, inRead)
</I>&gt;<i>      File &quot;/twisted/internet/posixbase.py&quot;, line 257, in _disconnectSelectable
</I>&gt;<i>        selectable.readConnectionLost(f)
</I>&gt;<i>      File &quot;/twisted/internet/tcp.py&quot;, line 221, in readConnectionLost
</I>&gt;<i>        self.connectionLost(reason)
</I>&gt;<i>      File &quot;/twisted/internet/tcp.py&quot;, line 386, in connectionLost
</I>&gt;<i>        Connection.connectionLost(self, reason)
</I>&gt;<i>      File &quot;/twisted/internet/tcp.py&quot;, line 232, in connectionLost
</I>&gt;<i>        protocol.connectionLost(reason)
</I>&gt;<i>      File &quot;/twisted/names/dns.py&quot;, line 1863, in connectionLost
</I>&gt;<i>        self.controller.connectionLost(self)
</I>&gt;<i>    exceptions.AttributeError: Resolver instance has no attribute 'connectionLost'
</I>&gt;<i> 
</I>&gt;<i>  and I have no idea what's going on here. In this case, the
</I>&gt;<i>  DeferredList callback never got called.
</I>&gt;<i> 
</I>&gt;<i> My 2 cents,
</I>&gt;<i> 
</I>&gt;<i> Jonathan
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024097.html">[Twisted-Python] Real-world but self-contained example?
</A></li>
	<LI>Next message: <A HREF="024093.html">[Twisted-Python] Building API documentation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24102">[ date ]</a>
              <a href="thread.html#24102">[ thread ]</a>
              <a href="subject.html#24102">[ subject ]</a>
              <a href="author.html#24102">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
