<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How to safely stop a chain of deferreds
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20to%20safely%20stop%20a%20chain%20of%20deferreds&In-Reply-To=%3C49496A32-46D2-4398-85ED-A1E95C477AAB%40orestis.gr%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="056640.html">
   <LINK REL="Next"  HREF="056644.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How to safely stop a chain of deferreds</H1>
    <B>Orestis Markou</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20to%20safely%20stop%20a%20chain%20of%20deferreds&In-Reply-To=%3C49496A32-46D2-4398-85ED-A1E95C477AAB%40orestis.gr%3E"
       TITLE="[Twisted-Python] How to safely stop a chain of deferreds">orestis at orestis.gr
       </A><BR>
    <I>Tue Jun 28 11:50:21 MDT 2011</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="056640.html">[Twisted-Python] How to safely stop a chain of deferreds
</A></li>
        <LI>Next message (by thread): <A HREF="056644.html">[Twisted-Python] How to safely stop a chain of deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56641">[ date ]</a>
              <a href="thread.html#56641">[ thread ]</a>
              <a href="subject.html#56641">[ subject ]</a>
              <a href="author.html#56641">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 28 Jun 2011, at 20:37, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A> wrote:

&gt;<i> On 01:30 pm, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">tomw at ubilix.com</A> wrote:
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> in a GUI application I'm using quite a comprehensive chain of deferreds
</I>&gt;&gt;<i> and I'm running the mainloop from the glib2reactor. At a certain point
</I>&gt;&gt;<i> of my application I need to terminate the entire chain of deferreds to
</I>&gt;&gt;<i> make sure that no more data is loaded and processed. Stopping the
</I>&gt;&gt;<i> reactor does not work as the entire GUI would terminate, too. I tried 
</I>&gt;&gt;<i> to
</I>&gt;&gt;<i> cancel the first deferred, hoping that the cancel event will be
</I>&gt;&gt;<i> forwarded to the next deferred in the chain or at least invoke an
</I>&gt;&gt;<i> errback, but for some reason it does not work and the deferreds seem to
</I>&gt;&gt;<i> run forever. Any ideas on how to solve this issue?
</I>&gt;<i> 
</I>&gt;<i> What would you do if you had this non-Deferred using code:
</I>&gt;<i> 
</I>&gt;<i>    x = a()
</I>&gt;<i>    y = b(x)
</I>&gt;<i>    z = c(y)
</I>&gt;<i> 
</I>&gt;<i> and you decided in b that you need to terminate your data loading and 
</I>&gt;<i> processing?
</I>
Pretty much what everyone is insinuating is that:

a) By your description it is not obvious what the application is doing, so a better description will be more helpful
b) You are using incorrect terms, making even harder to give advice
c) Callback chains don't have any built-in support for any kind of cancelling/stopping.
d) Deferreds have a cancel method but it's up to the creator of the Deferred to provide any meaning to it

Now, if you have a loop loading data and passing it to a chain of callbacks, and you'd need to stop mid-processing, the way I'd do that is to have a 'isStopped' boolean variable that can be set to True to initiate the stopping procedure. You will then stop loading any data and finish processing existing data. However, this is little more than a guess based upon my very vague understanding of the problem you are trying to describe.

Orestis



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="056640.html">[Twisted-Python] How to safely stop a chain of deferreds
</A></li>
	<LI>Next message (by thread): <A HREF="056644.html">[Twisted-Python] How to safely stop a chain of deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56641">[ date ]</a>
              <a href="thread.html#56641">[ thread ]</a>
              <a href="subject.html#56641">[ subject ]</a>
              <a href="author.html#56641">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
