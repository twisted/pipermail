<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] The Real Error (tm) [was Re: how to write a safe catch-all]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20The%20Real%20Error%20%28tm%29%20%5Bwas%20Re%3A%20how%20to%20write%20a%0A%20safe%20catch-all%5D&In-Reply-To=%3C4CA4A451.6020509%40imperial.ac.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="055453.html">
   <LINK REL="Next"  HREF="055455.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] The Real Error (tm) [was Re: how to write a safe catch-all]</H1>
    <B>Phil Mayers</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20The%20Real%20Error%20%28tm%29%20%5Bwas%20Re%3A%20how%20to%20write%20a%0A%20safe%20catch-all%5D&In-Reply-To=%3C4CA4A451.6020509%40imperial.ac.uk%3E"
       TITLE="[Twisted-Python] The Real Error (tm) [was Re: how to write a safe catch-all]">p.mayers at imperial.ac.uk
       </A><BR>
    <I>Thu Sep 30 08:53:05 MDT 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="055453.html">[Twisted-Python] The Real Error (tm) [was Re: how to write a	safe	catch-all]
</A></li>
        <LI>Next message (by thread): <A HREF="055455.html">[Twisted-Python] The Real Error (tm) [was Re: how to write a safe catch-all]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55454">[ date ]</a>
              <a href="thread.html#55454">[ thread ]</a>
              <a href="subject.html#55454">[ subject ]</a>
              <a href="author.html#55454">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 30/09/10 15:35, Chris Withers wrote:
&gt;<i> On 30/09/2010 15:23, Phil Mayers wrote:
</I>&gt;&gt;&gt;<i> def loop():
</I>&gt;&gt;&gt;<i> d = maybeDeferred(doStuff)
</I>&gt;&gt;&gt;<i> d.addErrback(partial(log.err,_why='Unhandled scheduled exception'))
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> So, how come my log.err doesn't get used for the AttributeError on
</I>&gt;&gt;&gt;<i> connector?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If you mean in your most recent &quot;test_looping.py&quot; example, it still uses
</I>&gt;&gt;<i> reactor.callLater. The call stack has gone away by the time the call is
</I>&gt;&gt;<i> made, so the exception just propagates up to the top level, where it's
</I>&gt;&gt;<i> logged.
</I>&gt;<i>
</I>&gt;<i> So, I appear to be back to the case where I can either gracefully handle
</I>&gt;<i> the exception *or* gracefully handle the errback, but not both?
</I>

It should be possible if using Twisted APIs correctly to reliably 
capture errors.

If it is not, that is a Twisted bug (or possibly API limitation)

However, your &quot;test_looping.py&quot; is not using the API correctly; the 
reactor.callLater throws away the call stack, so the error has nowhere 
to go.

Since you're not using reactor.callLater in your real code, the example 
is not valid. Hopefully I'm being more clear here!

&gt;<i>
</I>&gt;&gt;<i> I honestly think a more complete example showing the real Twisted API
</I>&gt;&gt;<i> that's causing you unhandled errors would help here.
</I>&gt;<i>
</I>&gt;<i> Unfortunately, you neither want to see, nor am I allowed to publish to a
</I>&gt;<i> mailing list, that several hundred lines of proprietary code I'd need to
</I>&gt;<i> post...
</I>
I suspected as much.

I don't think I can help I'm afraid; maybe other more experience people 
can spot the error from the tracebacks. Sorry I couldn't be more useful.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="055453.html">[Twisted-Python] The Real Error (tm) [was Re: how to write a	safe	catch-all]
</A></li>
	<LI>Next message (by thread): <A HREF="055455.html">[Twisted-Python] The Real Error (tm) [was Re: how to write a safe catch-all]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55454">[ date ]</a>
              <a href="thread.html#55454">[ thread ]</a>
              <a href="subject.html#55454">[ subject ]</a>
              <a href="author.html#55454">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
