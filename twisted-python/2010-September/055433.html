<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] reactor.stop if no any clients
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20reactor.stop%20if%20no%20any%20clients&In-Reply-To=%3CAANLkTimVFRE26tRSWRbJJsfedJmsC48KtPcxAzeTRm2C%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="055431.html">
   <LINK REL="Next"  HREF="055439.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] reactor.stop if no any clients</H1>
    <B>Jonathan Lange</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20reactor.stop%20if%20no%20any%20clients&In-Reply-To=%3CAANLkTimVFRE26tRSWRbJJsfedJmsC48KtPcxAzeTRm2C%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] reactor.stop if no any clients">jml at mumak.net
       </A><BR>
    <I>Wed Sep 29 11:52:10 MDT 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="055431.html">[Twisted-Python] reactor.stop if no any clients
</A></li>
        <LI>Next message (by thread): <A HREF="055439.html">[Twisted-Python] Small practice application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55433">[ date ]</a>
              <a href="thread.html#55433">[ thread ]</a>
              <a href="subject.html#55433">[ subject ]</a>
              <a href="author.html#55433">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Sep 29, 2010 at 6:40 PM, ruslan usifov &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">ruslan.usifov at gmail.com</A>&gt; wrote:
&gt;<i> If we stop listening, how can i wait while all client connection (which was
</I>&gt;<i> accepted before stopListening) processed and then call reactor.stop?
</I>&gt;<i>
</I>
In your factory, keep a count of the number of clients you have and
whether stopListening has been called. In your protocol's
connectionLost() method, decrease that count by one and check to see
if it's zero. If it's zero, and stopListening has been called, call
reactor.stop().

jml


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="055431.html">[Twisted-Python] reactor.stop if no any clients
</A></li>
	<LI>Next message (by thread): <A HREF="055439.html">[Twisted-Python] Small practice application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55433">[ date ]</a>
              <a href="thread.html#55433">[ thread ]</a>
              <a href="subject.html#55433">[ subject ]</a>
              <a href="author.html#55433">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
