<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Selectable SerialPort Windows/Linux
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Selectable%20SerialPort%20Windows/Linux&In-Reply-To=%3C20100914134603.2058.1682580987.divmod.xquotient.525%40localhost.localdomain%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="055360.html">
   <LINK REL="Next"  HREF="055362.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Selectable SerialPort Windows/Linux</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Selectable%20SerialPort%20Windows/Linux&In-Reply-To=%3C20100914134603.2058.1682580987.divmod.xquotient.525%40localhost.localdomain%3E"
       TITLE="[Twisted-Python] Selectable SerialPort Windows/Linux">exarkun at twistedmatrix.com
       </A><BR>
    <I>Tue Sep 14 07:46:03 MDT 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="055360.html">[Twisted-Python] Selectable SerialPort Windows/Linux
</A></li>
        <LI>Next message (by thread): <A HREF="055362.html">[Twisted-Python] Selectable SerialPort Windows/Linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55361">[ date ]</a>
              <a href="thread.html#55361">[ thread ]</a>
              <a href="subject.html#55361">[ subject ]</a>
              <a href="author.html#55361">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01:32 pm, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mhubig at imko.de</A> wrote:
&gt;<i>On Tue, Sep 14, 2010 at 2:08 PM, &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt; wrote:
</I>&gt;&gt;<i>See the serialport examples on the website.  A couple are linked from
</I>&gt;&gt;<i><A HREF="http://twistedmatrix.com/documents/current/core/examples/.">http://twistedmatrix.com/documents/current/core/examples/.</A>
</I>&gt;<i>
</I>&gt;<i>The examples I found are mouse.py and gpsfix.py and there only 
</I>&gt;<i>listening on
</I>&gt;<i>the serial line. It seems that with twisted I have some sort of a 
</I>&gt;<i>thread
</I>&gt;<i>running
</I>&gt;<i>which will trigger some methods (e.g. dataRecieved) as it reads 
</I>&gt;<i>something
</I>&gt;<i>from the serial line. How could I send data then?
</I>
Call the method for sending data.  Generally, the protocol's transport's 
write method.  Serial ports are not special in this regard, it's how 
almost all protocol implementations in Twisted work.  See some of the 
other documentation (for example the client or server howtos linked from 
&lt;<A HREF="http://twistedmatrix.com/documents/current/core/howto/">http://twistedmatrix.com/documents/current/core/howto/</A>&gt;) for more 
details on this.
&gt;<i>
</I>&gt;&gt;<i>You do indeed want a Protocol subclass.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Ok I see, and the Protocol subclass provides the dataReceived method!?
</I>
Typically.
&gt;<i>
</I>&gt;&gt;<i>The code from your &quot;self.read(7)&quot; line to the end of that loop will
</I>&gt;&gt;<i>probably
</I>&gt;<i>
</I>&gt;<i>end up in a dataReceived method - but note that you'll have to do some
</I>&gt;<i>
</I>&gt;<i>buffering, as you can't be assured that dataReceived will get called 
</I>&gt;<i>with
</I>&gt;&gt;<i>exactly
</I>&gt;<i>
</I>&gt;<i>the number of bytes you want at a time, so you may have to collect data 
</I>&gt;<i>from
</I>&gt;&gt;<i>multiple dataReceived calls (likewise you may get more than you want 
</I>&gt;&gt;<i>at
</I>&gt;&gt;<i>once, and need to split it up).
</I>&gt;<i>
</I>&gt;<i>Hmm ok so I have to design dataReceived() to buffer the received data 
</I>&gt;<i>until
</I>&gt;<i>it get's
</I>&gt;<i>the whole answer packet and than let it call e.g. packetRecieved() to
</I>&gt;<i>process the
</I>&gt;<i>packet ... I'm mot sure if this asynchronous approach is what I need,
</I>&gt;<i>because the
</I>&gt;<i>protocol I'm implementing is strict Master-Slave.
</I>
I'm not sure I understand this.  What is a &quot;Master-Slave&quot; protocol?  Why 
would someone not benefit from a Twisted-based implementation of such a 
protocol?

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="055360.html">[Twisted-Python] Selectable SerialPort Windows/Linux
</A></li>
	<LI>Next message (by thread): <A HREF="055362.html">[Twisted-Python] Selectable SerialPort Windows/Linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55361">[ date ]</a>
              <a href="thread.html#55361">[ thread ]</a>
              <a href="subject.html#55361">[ subject ]</a>
              <a href="author.html#55361">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
