<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] how to write a safe catch-all
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20how%20to%20write%20a%20safe%20catch-all&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022932.html">
   <LINK REL="Next"  HREF="022934.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] how to write a safe catch-all</H1>
    <B>Chris Withers</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20how%20to%20write%20a%20safe%20catch-all&In-Reply-To="
       TITLE="[Twisted-Python] how to write a safe catch-all">chris at simplistix.co.uk
       </A><BR>
    <I>Tue Sep 28 09:48:02 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="022932.html">[Twisted-Python] getProcessOutput - Can it be made to return 'output' instead of differed
</A></li>
        <LI>Next message: <A HREF="022934.html">[Twisted-Python] how to write a safe catch-all
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22933">[ date ]</a>
              <a href="thread.html#22933">[ thread ]</a>
              <a href="subject.html#22933">[ subject ]</a>
              <a href="author.html#22933">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

The attached .py file demonstrates a problem I'm having with a little 
scheduler I need to maintain.

The loop() function is supposed to be a &quot;catch all and report&quot; error 
handler. However, when the async code initiated by doStuff throws the 
AttributeError, what actually gets logged is:

2010-09-28 14:41:15,706 ERROR   : log         (14757|7f691ba676e0): 
Unhandled Error
Traceback (most recent call last):
   File &quot;test_looping.py&quot;, line 41, in &lt;module&gt;
     reactor.run()
   File &quot;Twisted-8.2.0-py2.5-linux-x86_64.egg/twisted/internet/base.py&quot;, 
line 1128, in run
     self.mainLoop()
   File &quot;Twisted-8.2.0-py2.5-linux-x86_64.egg/twisted/internet/base.py&quot;, 
line 1137, in mainLoop
     self.runUntilCurrent()
--- &lt;exception caught here&gt; ---
   File &quot;Twisted-8.2.0-py2.5-linux-x86_64.egg/twisted/internet/base.py&quot;, 
line 757, in runUntilCurrent
     call.func(*call.args, **call.kw)
   File &quot;test_looping.py&quot;, line 24, in __call__
     del self.connector
exceptions.AttributeError: Break instance has no attribute 'connector'

2010-09-28 14:41:15,707 ERROR   : log         (14757|7f691ba676e0): 
Unhandled scheduled exception
Traceback (most recent call last):
   File &quot;test_looping.py&quot;, line 41, in &lt;module&gt;
     reactor.run()
   File &quot;Twisted-8.2.0-py2.5-linux-x86_64.egg/twisted/internet/base.py&quot;, 
line 1128, in run
     self.mainLoop()
   File &quot;Twisted-8.2.0-py2.5-linux-x86_64.egg/twisted/internet/base.py&quot;, 
line 1137, in mainLoop
     self.runUntilCurrent()
--- &lt;exception caught here&gt; ---
   File &quot;test_looping.py&quot;, line 35, in loop
     yield doStuff()
exceptions.GeneratorExit:

But, more crucially, the looping call then appears to stop.
What can I do to get the exception logged and then everything handled 
sanely such that the looping call can continue and my lopp function will 
keep getting called once every second rather than stopping?

cheers,

Chris
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: test_looping.py
Url: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20100928/650d8b7a/attachment.txt">http://twistedmatrix.com/pipermail/twisted-python/attachments/20100928/650d8b7a/attachment.txt</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022932.html">[Twisted-Python] getProcessOutput - Can it be made to return 'output' instead of differed
</A></li>
	<LI>Next message: <A HREF="022934.html">[Twisted-Python] how to write a safe catch-all
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22933">[ date ]</a>
              <a href="thread.html#22933">[ thread ]</a>
              <a href="subject.html#22933">[ subject ]</a>
              <a href="author.html#22933">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
