<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Handling too many open file descriptors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Handling%20too%20many%20open%20file%20descriptors&In-Reply-To=%3CAANLkTi%3DguZJ65X-sVbt1sr--dADh3x2DeWfUDpRJ6%2Bv%3D%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="055419.html">
   <LINK REL="Next"  HREF="055421.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Handling too many open file descriptors</H1>
    <B>Landreville</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Handling%20too%20many%20open%20file%20descriptors&In-Reply-To=%3CAANLkTi%3DguZJ65X-sVbt1sr--dADh3x2DeWfUDpRJ6%2Bv%3D%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Handling too many open file descriptors">landreville at deadtreepages.com
       </A><BR>
    <I>Mon Sep 27 09:52:49 MDT 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="055419.html">[Twisted-Python] Handling too many open file descriptors
</A></li>
        <LI>Next message (by thread): <A HREF="055421.html">[Twisted-Python] Unable to start twistd service on Ubuntu 10.04	when using pseudo terminal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55420">[ date ]</a>
              <a href="thread.html#55420">[ thread ]</a>
              <a href="subject.html#55420">[ subject ]</a>
              <a href="author.html#55420">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Sep 27, 2010 at 10:53 AM,  &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt; wrote:
&gt;<i> On 02:45 pm, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">landreville at deadtreepages.com</A> wrote:
</I>&gt;&gt;<i>I'm running an application that makes about 1300 snmp connections
</I>&gt;&gt;<i>every minute; I'm using utils.getProcessOutput with snmpget because
</I>&gt;&gt;<i>pysnmp throws an error when I try to run it. Now of course I get the
</I>&gt;&gt;<i>Too many open files error, but is the best way to handle this
</I>&gt;&gt;<i>increasing the limit on Linux or by implementing some sort of queue so
</I>&gt;&gt;<i>that there are only x number of the snmpget processes at a time? Is
</I>&gt;&gt;<i>there such a queue feature in twisted?
</I>&gt;<i>
</I>&gt;<i> It doesn't seem likely to me that it's useful to have a thousand smtpget
</I>&gt;<i> processes running at once.  But who knows, maybe it is.  To actually
</I>&gt;<i> know, you'll have to decide what your requirements are (how many do you
</I>&gt;<i> actually have to run in parallel to get the throughput you need?  how
</I>&gt;<i> hard are you willing to thrash the machine you're running on?) and then
</I>&gt;<i> measure various approaches and configurations.
</I>&gt;<i>
</I>&gt;<i> If you decide you want to limit the number of snmpget processes you
</I>&gt;<i> launch, then you might find twisted.internet.defer.DeferredSemaphore
</I>&gt;<i> useful (and since the API docs for it are messed up, make sure you find
</I>&gt;<i> the &quot;run&quot; method, not just the &quot;acquire&quot; and &quot;release&quot; methods).
</I>&gt;<i>
</I>&gt;<i> Jean-Paul
</I>&gt;<i>
</I>
I've got to get two values (but both can be grabbed at the same time
with snmpget) from each of the interfaces (and inserted into database)
every minute. The machine is dedicated to this, so its cool with the
processing. The only thing is finding out how much parallelism I need
to get each one every minute. Technically I don't need any  parallel
processing right now as I can grab them serially in just under a
minute (bash script) but there will be more interfaces added
periodically so I need to get the fetch time down a little bit.

I'm already playing with deferred semaphore which is neat, but I
haven't looked at the stats for the fetching yet (whether it succeeds
in grabbing the value every minute)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="055419.html">[Twisted-Python] Handling too many open file descriptors
</A></li>
	<LI>Next message (by thread): <A HREF="055421.html">[Twisted-Python] Unable to start twistd service on Ubuntu 10.04	when using pseudo terminal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55420">[ date ]</a>
              <a href="thread.html#55420">[ thread ]</a>
              <a href="subject.html#55420">[ subject ]</a>
              <a href="author.html#55420">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
