<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twistedchecker now uses pylint &gt;= 2.4.4, can we use type annotations in Twisted now?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twistedchecker%20now%20uses%20pylint%20%3E%3D%202.4.4%2C%0A%20can%20we%20use%20type%20annotations%20in%20Twisted%20now%3F&In-Reply-To=%3CCAG%3DrPVdkYv2PfG%2Bk6nea6Wer4-LbTp10tBcbXGaA7q7NcZ9Q0Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="065059.html">
   <LINK REL="Next"  HREF="065062.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twistedchecker now uses pylint &gt;= 2.4.4, can we use type annotations in Twisted now?</H1>
    <B>Craig Rodrigues</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twistedchecker%20now%20uses%20pylint%20%3E%3D%202.4.4%2C%0A%20can%20we%20use%20type%20annotations%20in%20Twisted%20now%3F&In-Reply-To=%3CCAG%3DrPVdkYv2PfG%2Bk6nea6Wer4-LbTp10tBcbXGaA7q7NcZ9Q0Q%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] twistedchecker now uses pylint &gt;= 2.4.4, can we use type annotations in Twisted now?">rodrigc at crodrigues.org
       </A><BR>
    <I>Thu May  7 14:56:35 MDT 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="065059.html">[Twisted-Python] Twisted-Python Digest, Vol 194, Issue 3
</A></li>
        <LI>Next message (by thread): <A HREF="065062.html">[Twisted-Python] twistedchecker now uses pylint &gt;= 2.4.4, can we use type annotations in Twisted now?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65061">[ date ]</a>
              <a href="thread.html#65061">[ thread ]</a>
              <a href="subject.html#65061">[ subject ]</a>
              <a href="author.html#65061">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Apr 22, 2020 at 12:28 AM Glyph &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Apr 21, 2020, at 8:57 PM, Craig Rodrigues &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">rodrigc at crodrigues.org</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i>
</I>&gt;<i> Does anyone else have opinions on
</I>&gt;<i> type hints and mypy?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> We use them at work, and on some other Twisted projects (Klein) and
</I>&gt;<i> they're absolutely awesome.  Even with type comments, mypy is a huge
</I>&gt;<i> upgrade to how one writes and maintains Python; with annotations, it's a
</I>&gt;<i> major upgrade to the language.
</I>&gt;<i>
</I>&gt;<i> The first step here, however, is to set up the CI infrastructure (tox,
</I>&gt;<i> etc) to run mypy so that we can ensure that as we start writing type hints,
</I>&gt;<i> we don't accidentally get any of them wrong and back ourselves into any
</I>&gt;<i> corners.  Mypy can catch a surprising number of bugs with just the implicit
</I>&gt;<i> type-checking it does on values that come from the standard library.  In
</I>&gt;<i> fact, if we do `mypy src/twisted` right now, and exclude the things that
</I>&gt;<i> would be fixed by adding in <A HREF="https://github.com/Shoobx/mypy-zope">https://github.com/Shoobx/mypy-zope</A> (&quot;method
</I>&gt;<i> must have at least one argument&quot; zope.interface definition errors) and
</I>&gt;<i> fixing up some simple type hints (has no attribute &quot;skip&quot;) we still have
</I>&gt;<i> almost a thousand type errors that we should figure out a way to start
</I>&gt;<i> correcting or systematically skipping if they're false positives.  I
</I>&gt;<i> guarantee you there's at least one real bug in there though.
</I>&gt;<i>
</I>&gt;<i> As you know, I tend to be pretty cautious about sweeping changes to the
</I>&gt;<i> code that might make it harder to maintain on older versions - type hints
</I>&gt;<i> are an exception where I think it's absolutely worthwhile to go All In
</I>&gt;<i> early on.  But CI infrastructure for this stuff is a must-have and it might
</I>&gt;<i> be tricky to get set up initially.
</I>&gt;<i>
</I>


Earlier this week, I merged to trunk a new tox rule for running mypy with
mypy-zope.  You can use it by
running the following command in the top-level Twisted directory:

*tox -e  mypy*

mypy reports a lot of errors, but I think we can take several passes
through the Twisted codebase to clean those up.

Once we clean up the errors, we can integrate the tox rule with Travis or
Azure CI or CircleCI (whatever works best).

I submitted a few PR's to start cleaning up these errors:

   - <A HREF="https://github.com/twisted/twisted/pull/1264">https://github.com/twisted/twisted/pull/1264</A>  (has no attribute &quot;skip&quot;)
   - <A HREF="https://github.com/twisted/twisted/pull/1261">https://github.com/twisted/twisted/pull/1261</A> (Too few arguments to
   &quot;makeTestCaseClasses&quot;)

--
Craig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20200507/49c3a30a/attachment.htm&gt;
</PRE>





























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="065059.html">[Twisted-Python] Twisted-Python Digest, Vol 194, Issue 3
</A></li>
	<LI>Next message (by thread): <A HREF="065062.html">[Twisted-Python] twistedchecker now uses pylint &gt;= 2.4.4, can we use type annotations in Twisted now?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65061">[ date ]</a>
              <a href="thread.html#65061">[ thread ]</a>
              <a href="subject.html#65061">[ subject ]</a>
              <a href="author.html#65061">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
