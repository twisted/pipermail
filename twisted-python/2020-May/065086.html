<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] unified filesystem API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20unified%20filesystem%20API&In-Reply-To=%3C81A72C8C-E7FC-4155-96E1-D98FD738DE94%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="065085.html">
   <LINK REL="Next"  HREF="065087.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] unified filesystem API</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20unified%20filesystem%20API&In-Reply-To=%3C81A72C8C-E7FC-4155-96E1-D98FD738DE94%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] unified filesystem API">glyph at twistedmatrix.com
       </A><BR>
    <I>Sat May 16 00:42:33 MDT 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="065085.html">[Twisted-Python] unified filesystem API
</A></li>
        <LI>Next message (by thread): <A HREF="065087.html">[Twisted-Python] unified filesystem API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65086">[ date ]</a>
              <a href="thread.html#65086">[ thread ]</a>
              <a href="subject.html#65086">[ subject ]</a>
              <a href="author.html#65086">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

&gt;<i> On May 15, 2020, at 11:30 PM, Chris Withers &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">chris at withers.org</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> On 16/05/2020 06:55, Glyph wrote:
</I>&gt;&gt;<i> This does point out one of my secret hopes for SMB: that a file server's maintainers will care enough about file throughput that we'll finally get a centralized, official way of doing async file I/O that we can share with SFTP, FTP, and HTTP :).
</I>&gt;<i> 
</I>&gt;<i> I got excited by the title, but this all seems to be able giving non-filesystems a file-system like API.
</I>
What are you referring to as non-filesystems?

&gt;<i> If I've missed something, please let me know, but I couldn't find an async interface for writing to actual file systems.
</I>
In Twisted? There isn't one, really, which is exactly the issue.  There are various operating system interfaces for this but none of them are great.

&gt;<i> It feels like Twisted has just punted on them as &quot;fast enough&quot; to not need async interfaces, but that can really not be the case for networked filesystems (NFS, GPFS, etc) where the blocking time for reading or writing can be seconds (or minutes if it's having a bad day!).
</I>
Indeed, I'm well aware!  That's what I'm talking about.  It's not quite worth the energy to do it just for your average HTTP server, but it sure would be nice if we did have it, since it works so much better in the edge cases you enumerated.  (Or even against a spinning rust platter under significant load.)

&gt;<i> What's the Twisted solution for these kinds of things? Defer all file IO into a thread?
</I>
That is the only really portable solution, but there are sometimes platform-specific ones which can do better in some circumstances.  However, if we had a unified API for accessing the filesystem that presented a non-blocking interface without *talking* about threads, we'd be able to take user code written against that API and instead make it do something smarter than just using a thread - or even just use an intelligent number of threads (one per platter, for example, which you can figure out by looking at various files in /etc, on some platforms, sometimes).

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20200515/fbf146d9/attachment.htm&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="065085.html">[Twisted-Python] unified filesystem API
</A></li>
	<LI>Next message (by thread): <A HREF="065087.html">[Twisted-Python] unified filesystem API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65086">[ date ]</a>
              <a href="thread.html#65086">[ thread ]</a>
              <a href="subject.html#65086">[ subject ]</a>
              <a href="author.html#65086">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
