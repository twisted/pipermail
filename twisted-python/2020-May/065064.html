<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] SMB server component for twisted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20SMB%20server%20component%20for%20twisted&In-Reply-To=%3C3A155BEB-DCAA-4684-97F1-2ECD008DC7B2%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="065063.html">
   <LINK REL="Next"  HREF="065077.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] SMB server component for twisted</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20SMB%20server%20component%20for%20twisted&In-Reply-To=%3C3A155BEB-DCAA-4684-97F1-2ECD008DC7B2%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] SMB server component for twisted">glyph at twistedmatrix.com
       </A><BR>
    <I>Sat May  9 04:11:34 MDT 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="065063.html">[Twisted-Python] SMB server component for twisted
</A></li>
        <LI>Next message (by thread): <A HREF="065077.html">[Twisted-Python] SMB server component for twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65064">[ date ]</a>
              <a href="thread.html#65064">[ thread ]</a>
              <a href="subject.html#65064">[ subject ]</a>
              <a href="author.html#65064">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

&gt;<i> On May 8, 2020, at 12:39 AM, Ian Haywood &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">ian at haywood.id.au</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> On 7/05/2020 5:48 pm, Glyph wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> If you want to include it in Twisted itself, your best bet is to actually develop it /within/ twisted, as a series of small contributions, rather than as one gigantic one-shot one.  Contributions over, say, 400 lines, take exponentially longer to review.
</I>&gt;<i> 
</I>&gt;<i> Sounds great, I'll prepare a GitHub PR. Unfortunately the first one will be ~2000 lines just to login and connect to a share, but after that each new packet-type will be small.
</I>&gt;<i> 
</I>&gt;<i> Regarding unit-tests, I've found the best way to test the server is to use reactor.spawnProcess to launch the Samba command-line client, but that requires smbclient be available to run tests.
</I>
You can feel free to edit the CI configuration to ensure that smbclient is installed in some of the environments to be sure it's tested.  (And these kinds of little details are good reasons to do this develop-in-Twisted strategy; easier to deal with the gnarly configuration issues early than to try to debug them once you have a big pile of code.)

However, tests like this are whole-system integration tests. While they're great, they also tend to be slow and flaky, particularly if you don't have other forms of testing.  You might want finer-grained unit tests, particularly to deal with error scenarios or boundary conditions which might be hard to provoke with a real client doing real I/O.  Were you thinking of writing an SMB client as well?  One way to write these finer-grained tests is to have the client and the server talk to each other.

It's been a long while since we had a major new subsystem.  I'm excited to see this stuff come in!

One minor note: you may want to do the initial development in an underscore-prefixed package, like twisted._fileserver or somesuch, so that we can separate out the discussion of &quot;public API design&quot; from the issues of code quality / test coverage / etc.

-glyph
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="065063.html">[Twisted-Python] SMB server component for twisted
</A></li>
	<LI>Next message (by thread): <A HREF="065077.html">[Twisted-Python] SMB server component for twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65064">[ date ]</a>
              <a href="thread.html#65064">[ thread ]</a>
              <a href="subject.html#65064">[ subject ]</a>
              <a href="author.html#65064">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
