<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] connecting with a FlashXML socket
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20connecting%20with%20a%20FlashXML%20socket&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009883.html">
   <LINK REL="Next"  HREF="009887.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] connecting with a FlashXML socket</H1>
    <B>Eric T</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20connecting%20with%20a%20FlashXML%20socket&In-Reply-To="
       TITLE="[Twisted-Python] connecting with a FlashXML socket">continuum83 at yahoo.com
       </A><BR>
    <I>Wed Mar 16 11:23:36 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="009883.html">[Twisted-Python] How to accept connections faster
</A></li>
        <LI>Next message: <A HREF="009887.html">[Twisted-Python] connecting with a FlashXML socket
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9885">[ date ]</a>
              <a href="thread.html#9885">[ thread ]</a>
              <a href="subject.html#9885">[ subject ]</a>
              <a href="author.html#9885">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hey All,

my friend and i are attempting to use twisted as a
socket server to be able to accept connections from a
flash client.

here is the simple connection code on the serverside:

from twisted.protocols import basic

class TestApp(basic.LineReceiver):
    def connectionMade(self):
        print &quot;new client\n&quot;
        self.factory.clients.append(self)
        self.message(&quot;test&quot;)
        self.sendLine(&quot;another test&quot;);

    def connectionLost(self):
        print &quot;lost client\n&quot;
        self.factory.clients.remove(self)

    def lineReceived(self,line):
        print &quot;recieved:&quot;, repr(line)
        for c in self.factory.clients:
            c.message(line)

    def message(self,msg):
        self.transport.write(msg + '\n')
        print msg + '\n'

this is basically the same as an example we were using
to help us get the code going. but when we run the
server, and then go to the client... the client
connects fine, but we cannt send/recieve any messages.

we tried setting the self.delimiter = &quot;\0&quot; since that
is a requirement for flashXML, but it still wouldnt
send/recieve.

the socket code on the flash-side is relative to the
following:
mySocket = new XMLSocket();

mySocket.onConnect = function(success)
{
	if (success)
		msgArea.htmlText += &quot;;&lt;b&gt;Server connection
established!&lt;/b&gt;&quot;
	else
		msgArea.htmlText += &quot;&lt;b&gt;Server connection
failed!&lt;/b&gt;&quot;
}

mySocket.onClose = function()
{
	msgArea.htmlText += &quot;&lt;b&gt;Server connection lost&lt;/b&gt;&quot;
}

XMLSocket.prototype.onData = function(msg)
{
	trace(&quot;MSG: &quot; + msg)
	msgArea.htmlText += msg
}

mySocket.connect(&quot;localhost&quot;, 9999)

function sendMsg()
{
mySocket.send(inputMsg.htmlText + &quot;\n&quot;)
	}
}



		
__________________________________ 
Do you Yahoo!? 
Yahoo! Small Business - Try our new resources site!
<A HREF="http://smallbusiness.yahoo.com/resources/">http://smallbusiness.yahoo.com/resources/</A> 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009883.html">[Twisted-Python] How to accept connections faster
</A></li>
	<LI>Next message: <A HREF="009887.html">[Twisted-Python] connecting with a FlashXML socket
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9885">[ date ]</a>
              <a href="thread.html#9885">[ thread ]</a>
              <a href="subject.html#9885">[ subject ]</a>
              <a href="author.html#9885">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
