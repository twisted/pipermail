<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Synchronous Wrapper for Deferreds
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Synchronous%20Wrapper%20for%20Deferreds&In-Reply-To=%3C20050319074834.13806.1948239396.divmod.quotient.11315%40ohm%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="042434.html">
   <LINK REL="Next"  HREF="042436.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Synchronous Wrapper for Deferreds</H1>
    <B>glyph at divmod.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Synchronous%20Wrapper%20for%20Deferreds&In-Reply-To=%3C20050319074834.13806.1948239396.divmod.quotient.11315%40ohm%3E"
       TITLE="[Twisted-Python] Synchronous Wrapper for Deferreds">glyph at divmod.com
       </A><BR>
    <I>Sat Mar 19 00:48:34 MST 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="042434.html">[Twisted-Python] Synchronous Wrapper for Deferreds
</A></li>
        <LI>Next message (by thread): <A HREF="042436.html">[Twisted-Python] Synchronous Wrapper for Deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42435">[ date ]</a>
              <a href="thread.html#42435">[ thread ]</a>
              <a href="subject.html#42435">[ subject ]</a>
              <a href="author.html#42435">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 18 Mar 2005 23:13:22 -0600, Ken Kinder &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">ken at kenkinder.com</A>&gt; wrote:
&gt;<i>A day or two ago, I inquired on IRC about making calls from an existing 
</I>&gt;<i> synchronous script. The script is not related to any Twisted activity, 
</I>&gt;<i> so minimal intervention was sort of a goal. Obviously this doesn't work 
</I>&gt;<i> on non-transient objects such as Perspective Broker ones, but here's 
</I>&gt;<i> what I came up with... (See attached) Obviously there is some cleaning 
</I>&gt;<i> up to do, but it demonstrates the idea.
</I>
I would suggest starting (using os.popen or suchlike) a separate python script which uses Twisted to generate the output that you require to standard output.

&gt;<i> I have three questions: (1) I know this isn't the ideal way to use 
</I>&gt;<i> Twisted, but is there anything inherently problematic about my solution 
</I>&gt;<i> for one-off calls to Twisted.
</I>
It's possible, insofar as the unit tests already do it.

It's extremely undesireable, because only one piece of synchronous code can be &quot;driving&quot; at a time.  Once you decide you'd want to integrate synchronous twisted-using code A with synchronous twisted-using code B, you're screwed. By contrast, any number of asynchronous pieces of code can be used in the same program.

&gt;<i> (2) I understand there are problems with 
</I>&gt;<i> running the same reactor twice. What are those problems and is there a 
</I>&gt;<i> recommended work around?
</I>
The problems boil down to this: the behavior is more or less undefined.  The recommended workaround is to fix about 30 or 40 extremely subtle bugs in various implementations of the reactor, define a sane behavior, and write unit tests to make sure that it is scrupulously followed by all implementations.  Sorry :).

The good news is that these bugs are almost entirely in the realm of service startup and shutdown.  If you're not using any Service objects, you're likely to run into relatively few problems.

&gt;<i> (3) Are there any ideas on making a synchronous 
</I>&gt;<i> version of a Perspective Broker client to integrate into existing 
</I>&gt;<i> synchronous applications more easily?
</I>
Unfortunately PB is inherently both asynchronous and symmetrical and either side can submit method calls to any available object at any time.  A synchronous frontend would make this impossible, and would produce some very confusing race-conditions in relatively normal PB code.

You might be able to specify a subset of PB as a strict request/response protocol with no reentrancy, but why bother?  If you're doing synchronous scripting I imagine it would be easier to add an XMLRPC frontend (which works fine in a synchronous context) to your Twisted server than to connect over PB and have these kind of integration headaches.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="042434.html">[Twisted-Python] Synchronous Wrapper for Deferreds
</A></li>
	<LI>Next message (by thread): <A HREF="042436.html">[Twisted-Python] Synchronous Wrapper for Deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42435">[ date ]</a>
              <a href="thread.html#42435">[ thread ]</a>
              <a href="subject.html#42435">[ subject ]</a>
              <a href="author.html#42435">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
