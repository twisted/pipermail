<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] newbie: scheduling/queuing tasks with xmlrpc
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20newbie%3A%20scheduling/queuing%20tasks%20with%20xmlrpc&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009939.html">
   <LINK REL="Next"  HREF="009908.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] newbie: scheduling/queuing tasks with xmlrpc</H1>
    <B>Jp Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20newbie%3A%20scheduling/queuing%20tasks%20with%20xmlrpc&In-Reply-To="
       TITLE="[Twisted-Python] newbie: scheduling/queuing tasks with xmlrpc">exarkun at divmod.com
       </A><BR>
    <I>Thu Mar 17 13:17:15 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="009939.html">[Twisted-Python] HTTP File Posting and Retrieving
</A></li>
        <LI>Next message: <A HREF="009908.html">[Twisted-Python] newbie: scheduling/queuing tasks with xmlrpc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9907">[ date ]</a>
              <a href="thread.html#9907">[ thread ]</a>
              <a href="subject.html#9907">[ subject ]</a>
              <a href="author.html#9907">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 17 Mar 2005 10:29:09 -0700, Dustin Lee &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">qhfgva at gmail.com</A>&gt; wrote:
&gt;<i>So I've got a simple prototype of what I'm trying to achieve with my
</I>&gt;<i> &quot;queued tasks&quot; xmlrpc server.
</I>&gt;<i> 
</I>&gt;<i> I'd appreciate any comments, suggestions.  So far it seems to work
</I>&gt;<i> exactly I wanted but I have a feeling I'm abusing the intended use of
</I>&gt;<i> deferreds.  And that by polling I'm deviating from the twisted
</I>&gt;<i> workflow model.  But you have to start somewhere.
</I>
  Yes, much abuse is present in this code.  A couple grievous wrongs:

    Deferreds (and almost all other Twisted APIs) are not thread-safe.  You cannot invoke their methods in a thread other than that of the reactor.

    The called and paused Deferred attributes are not really public.  You should avoid using them if at all possible (and it almost always is).  Likewise, the pause() and unpause() methods are more for the convenience of Deferred's implementation and you should never need to call them.

  Attached is a modified version.  It has a problem with shutdown, which I imagine is related to not properly closing the reactor's threadpool.  Maybe someone else can suggest the correct way to deal with that.

  Jp
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xmlrpc_queued_tasks_server.py
Type: application/x-python
Size: 2816 bytes
Desc: not available
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20050317/f057c3ed/attachment.bin">http://twistedmatrix.com/pipermail/twisted-python/attachments/20050317/f057c3ed/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009939.html">[Twisted-Python] HTTP File Posting and Retrieving
</A></li>
	<LI>Next message: <A HREF="009908.html">[Twisted-Python] newbie: scheduling/queuing tasks with xmlrpc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9907">[ date ]</a>
              <a href="thread.html#9907">[ thread ]</a>
              <a href="subject.html#9907">[ subject ]</a>
              <a href="author.html#9907">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
