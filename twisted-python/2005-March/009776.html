<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] POSTing http requests
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20POSTing%20http%20requests&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009775.html">
   <LINK REL="Next"  HREF="009778.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] POSTing http requests</H1>
    <B>Lenny G Arbage</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20POSTing%20http%20requests&In-Reply-To="
       TITLE="[Twisted-Python] POSTing http requests">alengarbage at yahoo.com
       </A><BR>
    <I>Fri Mar 11 00:32:11 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="009775.html">[Twisted-Python] POSTing http requests
</A></li>
        <LI>Next message: <A HREF="009778.html">[Twisted-Python] App design / Twisted Logging?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9776">[ date ]</a>
              <a href="thread.html#9776">[ thread ]</a>
              <a href="subject.html#9776">[ subject ]</a>
              <a href="author.html#9776">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
  I just realized that this is a bit more involved
than I at first expected.  It would be nice to be able
to send the upload request without holding all of
postdata in memory, and getPage(), even when I get
past the below problem (which can be done by calling
something like encode_multipart_formdata() as defined
at
<A HREF="http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/146306">http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/146306</A>),
doesn't seem to allow for that.

  Fabian Seisen's urllib2_file at
<A HREF="http://fabien.seisen.org/python/urllib2_multipart.html,">http://fabien.seisen.org/python/urllib2_multipart.html,</A>
 does work without requiring the upload to sit in
memory all at once, but it doesn't appear to be
asynchronous and it doesn't appear to work with Python
2.4 right now, either.

  Is there some way I can make this work with
HTTPClientFactory?  If not, what should I be looking
at?  In the case of large file uploads, wouldn't it be
advisable to send the headers/seperators first, then
do a chunk by chunk read of the file and send these
chunks one at a time (but in quick succession).  To do
that, it seems like a write() method is necessary --
is that in the IConsumer interface?

  Thanks for any guidance you can give me -- as you
can tell I'm new to twisted.

    Thanks
    Lenny G.


--- Lenny G Arbage &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">alengarbage at yahoo.com</A>&gt; wrote:
&gt;<i> How do I correctly set up the payload for a POST
</I>&gt;<i> file
</I>&gt;<i> upload?  I see that I can add a &quot;method='POST'&quot; and
</I>&gt;<i> &quot;postdata=something&quot; to getPage(), but it's that
</I>&gt;<i> 'something' that I'm stuck on.  I'm wondering if
</I>&gt;<i> there
</I>&gt;<i> isn't a convenience method for putting the right
</I>&gt;<i> stuff
</I>&gt;<i> in the HTTP header (Content-Type: multipart...&quot;) and
</I>&gt;<i> in the body (-----seperator, etc).
</I>&gt;<i> 
</I>&gt;<i> I haven't been able to find an answer in the mailing
</I>&gt;<i> list for the above (and google doesn't seem to know,
</I>&gt;<i> either), but I'm sure there's a really simple way to
</I>&gt;<i> do it.
</I>

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
<A HREF="http://mail.yahoo.com">http://mail.yahoo.com</A> 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009775.html">[Twisted-Python] POSTing http requests
</A></li>
	<LI>Next message: <A HREF="009778.html">[Twisted-Python] App design / Twisted Logging?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9776">[ date ]</a>
              <a href="thread.html#9776">[ thread ]</a>
              <a href="subject.html#9776">[ subject ]</a>
              <a href="author.html#9776">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
