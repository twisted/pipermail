<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: Twisted and the Posh Module
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20Twisted%20and%20the%20Posh%20Module&In-Reply-To=E1DAu4W-00021V-02%40pyramid.twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009824.html">
   <LINK REL="Next"  HREF="009827.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: Twisted and the Posh Module</H1>
    <B>Ed Suominen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20Twisted%20and%20the%20Posh%20Module&In-Reply-To=E1DAu4W-00021V-02%40pyramid.twistedmatrix.com"
       TITLE="[Twisted-Python] Re: Twisted and the Posh Module">general at eepatents.com
       </A><BR>
    <I>Mon Mar 14 13:59:51 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="009824.html">[Twisted-Python] twisted.web.server and memory
</A></li>
        <LI>Next message: <A HREF="009827.html">[Twisted-Python] Re: Twisted and the Posh Module
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9826">[ date ]</a>
              <a href="thread.html#9826">[ thread ]</a>
              <a href="subject.html#9826">[ subject ]</a>
              <a href="author.html#9826">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Monday 14 March 2005 10:13 am, 
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-request at twistedmatrix.com</A> wrote:
&gt;<i> Has anyone tried playing with Twisted and the posh module? I need to
</I>&gt;<i> do some CPU-intensive stuff inside the reactor, which unfortunately
</I>&gt;<i> holds on to the GIL. I was thinking of just making a deferToPosh()
</I>&gt;<i> type of method in the spirit of deferToThread(), but forking on each
</I>&gt;<i> operation would be pretty expensive. Which brings up the question of
</I>&gt;<i> having process pools.
</I>&gt;<i>
</I>&gt;<i> Has anyone done anything like this? I don't really need any
</I>&gt;<i> interaction between the worker processes and Twisted, so in theory I
</I>&gt;<i> could spawn off some worker processes early and just communicate
</I>&gt;<i> queues of tasks to complete, independent of Twisted and the reactor.
</I>
I think having some sort of process pool mangagement in Twisted is a 
great idea, especially with multi-core CPUs emerging on the scene. I 
have access to a dual-core Pentium Prescott CPU and it would be great 
to have that available to keep both cores humming on a certain 
CPU-intensive project I'm considering.

However, I'm not sure the best way to go about it would be with the posh 
module, pypar (see <A HREF="http://datamining.anu.edu.au/~ole/pypar/">http://datamining.anu.edu.au/~ole/pypar/</A>), or just 
using Perspective Broker as an underlying message-passing mechanism 
with UNIX sockets and/or TCP. One thought might be to have a single 
master process start up and act as a PB server and process pool 
manager. Subsidiary processes could then make authenticated PB 
connections to the server to &quot;volunteer&quot; for work in the process pool. 

Note that pypar lets you easily find out how many CPUs you have under 
kernel control, with pypar.size(). Thus, the main process could start 
the process pool by spawning a subsidiary &quot;volunteer&quot; process for each 
CPU core present.

---
Ed Suominen
Registered Patent Agent
Open-Source Software Author (yes, both...)
Web Site: <A HREF="http://www.eepatents.com">http://www.eepatents.com</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009824.html">[Twisted-Python] twisted.web.server and memory
</A></li>
	<LI>Next message: <A HREF="009827.html">[Twisted-Python] Re: Twisted and the Posh Module
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9826">[ date ]</a>
              <a href="thread.html#9826">[ thread ]</a>
              <a href="subject.html#9826">[ subject ]</a>
              <a href="author.html#9826">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
