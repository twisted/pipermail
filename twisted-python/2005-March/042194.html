<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] PB Error (printing exceptions in deferreds)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20PB%20Error%20%28printing%20exceptions%20in%20deferreds%29&In-Reply-To=%3C42288F84.709%40liqia.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="042190.html">
   <LINK REL="Next"  HREF="042196.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] PB Error (printing exceptions in deferreds)</H1>
    <B>Mustafa Sakalsiz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20PB%20Error%20%28printing%20exceptions%20in%20deferreds%29&In-Reply-To=%3C42288F84.709%40liqia.com%3E"
       TITLE="[Twisted-Python] PB Error (printing exceptions in deferreds)">mustafa at liqia.com
       </A><BR>
    <I>Fri Mar  4 09:40:36 MST 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="042190.html">[Twisted-Python] Twisted, Threading, Extension Modules and th	e GIL
</A></li>
        <LI>Next message (by thread): <A HREF="042196.html">[Twisted-Python] Anyone have any code or links to code related to	using ZeroConf / Rendezous with Twisted?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42194">[ date ]</a>
              <a href="thread.html#42194">[ thread ]</a>
              <a href="subject.html#42194">[ subject ]</a>
              <a href="author.html#42194">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I am trying to develop an application with twisted and using Pb. I have 
a trouble that I couldn't fix. I tried googling to find an solution, but 
didn't find an exact answer.

The problem is &quot;I don't want exceptions be printed in server side&quot;. The 
solution already exists in Pb, if I raise an exception derived from 
pb.Error in a (view, execute, ...) method. However, if I raise the same 
exception in a deferred or callback function, the exception is printed. 
Here is an example,

server.py : Works as I expect
server2.py : Prints the exceptions, which I don't want
client.py : Catches the exception in both ways

Is there a solution which works in any way to avoid printing for 
specific exceptions.

Best regards,
Musti

============== server.py (works well)============
#! /usr/bin/python

from twisted.spread import pb
from twisted.internet import reactor

class MyError(pb.Error):
    pass

class One(pb.Root):
    def remote_broken(self):
        msg = &quot;fall down go boom&quot;
        raise MyError(msg)

def main():
    reactor.listenTCP(8800, pb.PBServerFactory(One()))
    reactor.run()

if __name__ == '__main__':
    main()
=======================================

=========== server2.py (prints exceptions)============
#! /usr/bin/python

from twisted.spread import pb
from twisted.internet import reactor
from twisted.internet import defer

class MyError(pb.Error):
    pass

class One(pb.Root):

    def badFoo(self, result):
        msg = &quot;fall down go boom&quot;
        raise MyError(msg)

    def remote_broken(self):
       d = defer.Deferred()
       d.addCallback(self.badFoo)
       d.callback(0)
       return d
   
def main():
    reactor.listenTCP(8800, pb.PBServerFactory(One()))
    reactor.run()

if __name__ == '__main__':
    main()
==========================================

=== client.py (works same for both server and server2)=======
#! /usr/bin/python

from twisted.spread import pb
from twisted.internet import reactor

def main():
    factory = pb.PBClientFactory()
    reactor.connectTCP(&quot;localhost&quot;, 8800, factory)
    d = factory.getRootObject()
    d.addCallbacks(got_obj)
    reactor.run()

def got_obj(obj):
    # change &quot;broken&quot; into &quot;broken2&quot; to demonstrate an unhandled exception
    d2 = obj.callRemote(&quot;broken&quot;)
    d2.addCallback(working)
    d2.addErrback(broken)

def working():
    print &quot;erm, it wasn't *supposed* to work..&quot;

def broken(reason):
    print &quot;got remote Exception&quot;
    print &quot; .type =&quot;, reason.type
    reactor.stop()

main()
=============================================


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="042190.html">[Twisted-Python] Twisted, Threading, Extension Modules and th	e GIL
</A></li>
	<LI>Next message (by thread): <A HREF="042196.html">[Twisted-Python] Anyone have any code or links to code related to	using ZeroConf / Rendezous with Twisted?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42194">[ date ]</a>
              <a href="thread.html#42194">[ thread ]</a>
              <a href="subject.html#42194">[ subject ]</a>
              <a href="author.html#42194">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
