<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: [Twisted-commits] r13295 - WSGI input/error	streams, pausing when write buffer is full, and file wrapper.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20%5BTwisted-commits%5D%20r13295%20-%20WSGI%20input/error%0A%09streams%2C%20pausing%20when%20write%20buffer%20is%20full%2C%20and%20file%20wrapper.&In-Reply-To=E1DDsDD-0008Js-00%40wolfwood">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009938.html">
   <LINK REL="Next"  HREF="009941.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: [Twisted-commits] r13295 - WSGI input/error	streams, pausing when write buffer is full, and file wrapper.</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20%5BTwisted-commits%5D%20r13295%20-%20WSGI%20input/error%0A%09streams%2C%20pausing%20when%20write%20buffer%20is%20full%2C%20and%20file%20wrapper.&In-Reply-To=E1DDsDD-0008Js-00%40wolfwood"
       TITLE="[Twisted-Python] Re: [Twisted-commits] r13295 - WSGI input/error	streams, pausing when write buffer is full, and file wrapper.">andrew-twisted at puzzling.org
       </A><BR>
    <I>Tue Mar 22 20:09:51 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="009938.html">[Twisted-Python] multi-threading in twisted
</A></li>
        <LI>Next message: <A HREF="009941.html">[Twisted-Python] Note for 2.0 package maintainers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9940">[ date ]</a>
              <a href="thread.html#9940">[ thread ]</a>
              <a href="subject.html#9940">[ subject ]</a>
              <a href="author.html#9940">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Mar 22, 2005 at 03:50:59PM -0700, James Knight wrote:
[...]
&gt;<i> +    
</I>&gt;<i> +def callInReactor(__f, *__a, **__kw):
</I>&gt;<i> +    from twisted.internet import reactor
</I>&gt;<i> +    queue = Queue.Queue()
</I>&gt;<i> +    reactor.callFromThread(__callFromThread, queue, __f, __a, __kw)
</I>&gt;<i> +    result = queue.get()
</I>&gt;<i> +    if isinstance(result, failure.Failure):
</I>&gt;<i> +        result.raiseException()
</I>&gt;<i> +    return result
</I>&gt;<i> +
</I>&gt;<i> +def __callFromThread(queue, f, a, kw):
</I>&gt;<i> +    result = defer.maybeDeferred(f, *a, **kw)
</I>&gt;<i> +    result.addBoth(queue.put)
</I>
I recall posting example code to do a similar job to the mailing list
recently, and also someone on the list (or irc channel?) asking how to do
this (make the thread that does callFromThread block on the result).

This should probably be turned into a proper API.

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009938.html">[Twisted-Python] multi-threading in twisted
</A></li>
	<LI>Next message: <A HREF="009941.html">[Twisted-Python] Note for 2.0 package maintainers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9940">[ date ]</a>
              <a href="thread.html#9940">[ thread ]</a>
              <a href="subject.html#9940">[ subject ]</a>
              <a href="author.html#9940">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
