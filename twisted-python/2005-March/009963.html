<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Looking for a simple file event driven loop	using	Twisted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Looking%20for%20a%20simple%20file%20event%20driven%20loop%0A%09using%09Twisted&In-Reply-To=4244AF59.6060802%40kenkinder.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009962.html">
   <LINK REL="Next"  HREF="009964.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Looking for a simple file event driven loop	using	Twisted</H1>
    <B>Jp Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Looking%20for%20a%20simple%20file%20event%20driven%20loop%0A%09using%09Twisted&In-Reply-To=4244AF59.6060802%40kenkinder.com"
       TITLE="[Twisted-Python] Looking for a simple file event driven loop	using	Twisted">exarkun at divmod.com
       </A><BR>
    <I>Fri Mar 25 23:28:58 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="009962.html">[Twisted-Python] Looking for a simple file event driven loop	using	Twisted
</A></li>
        <LI>Next message: <A HREF="009964.html">[Twisted-Python] Looking for a simple file event driven loop	using Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9963">[ date ]</a>
              <a href="thread.html#9963">[ thread ]</a>
              <a href="subject.html#9963">[ subject ]</a>
              <a href="author.html#9963">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 25 Mar 2005 18:39:53 -0600, Ken Kinder &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">ken at kenkinder.com</A>&gt; wrote:
&gt;<i>It seems to me you probably will either check periodically in the 
</I>&gt;<i> reactor, like this:
</I>&gt;<i> 
</I>&gt;<i>     def checkFile():
</I>&gt;<i>         x = os.stat(file)
</I>&gt;<i>         ...
</I>&gt;<i>         reactor.callLater(.5, checkFile)
</I>&gt;<i> 
</I>&gt;<i>     reactor.callWhenRunning(checkFile)
</I>&gt;<i> 
</I>&gt;<i> Or just start another thread like this:
</I>&gt;<i> 
</I>&gt;<i>     def wakeUp():
</I>&gt;<i>         (action to take when file changes)
</I>&gt;<i> 
</I>&gt;<i>     def checker():
</I>&gt;<i>         while 1:
</I>&gt;<i>             (code that waits for file to change)
</I>&gt;<i>             reactor.callFromThread(wakeUp)
</I>&gt;<i> 
</I>&gt;<i>     reactor.callInThread(checker)
</I>
  The threaded version ties up an entire work thread from the pool for the lifetime of the application.  Unless you only want to watch one or two files, this is probably not ideal.  There's no real reason to use a thread for this at all.  Polling from the main loop is a perfectly reasonable solution (and Twisted can deal with polling at much greater frequency than twice a second, if necessary).  

  Additionally, there are actual event notification systems for this: dnotify and inotify on Linux, for example.  Twisted doesn't support these directly (although it might support inotify soon), but integrating them and other things like them is not extremely difficult.

  Jp


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009962.html">[Twisted-Python] Looking for a simple file event driven loop	using	Twisted
</A></li>
	<LI>Next message: <A HREF="009964.html">[Twisted-Python] Looking for a simple file event driven loop	using Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9963">[ date ]</a>
              <a href="thread.html#9963">[ thread ]</a>
              <a href="subject.html#9963">[ subject ]</a>
              <a href="author.html#9963">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
