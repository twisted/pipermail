From glyph at twistedmatrix.com  Sat Oct  3 00:35:36 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 2 Oct 2020 23:35:36 -0700
Subject: [Twisted-Python] Mailgun Email Service Replacement Proposal
Message-ID: <8668EB3A-3C1A-46B0-A31F-F84C1CE81255@twistedmatrix.com>

Hello Twistors,

As many of you know, Twisted's email infrastructure for the past few years has been generously provided by Mailgun.  This was a huge upgrade to our sender reputation over running our own Exim instance at the time, and I'm tremendously grateful for all the effort it's saved the project.

However, Mailgun has never been a super close fit for what we actually want as a project (see for example https://github.com/glyph/mg2dsn <https://github.com/glyph/mg2dsn> which papers over some of the differences between what they provide and what we actually want), and over the years there have been several hiccups in service as Mailgun tweaks its pricing and their plan-upgrade machinery doesn't know what to do with our discounted account.

Right now, I'm dealing with a minor issue where our "plan" (which, again, Mailgun has generously given us for free) no longer includes the ability to process incoming email... so, for example, this email is only reaching you because the pre-existing inbound routes are grandfathered in, and continue to work (whew!); however, I can no longer add new @twistedmatrix.com email addresses nor change the configuration of existing ones.

Now, for this particular issue I've opened a ticket with Mailgun and hopefully they'll be kind enough to extend their support to us yet again, but in the longer term, it feels like we might want to go back to hosting our own thing; ideally a thing that allows us to dogfood Twisted and maybe learn interesting things about our SMTP support.

What we need is not trivial, but it's also not too complicated.  Critically we do not need to host a full-featured mail storage service, as we only do forwarding to and from other services.  So what we need is a thing that can:

listen on TLS ports with a certificate
generate an RSA key for DKIM
spit out something we can plug into our twisted.names configuration instead of this - https://github.com/twisted-infra/braid/blob/1df63c5d8b44e079487be2f0bf099108a77872e5/services/t-names/zones/twistedmatrix.com#L58-L63 <https://github.com/twisted-infra/braid/blob/1df63c5d8b44e079487be2f0bf099108a77872e5/services/t-names/zones/twistedmatrix.com#L58-L63>
distinguish between inbound-forwarded and outbound-sent email
authenticate users to send for particular addresses (i.e. set "From" and "Sender" headers, and confirm consistency with MAIL FROM & auth, reject if anything doesn't match; with a caveat for messages forwarded via mailman); sign these outbound messages with https://pypi.org/project/dkimpy/ <https://pypi.org/project/dkimpy/>
forward inbound messages which have DMARC alignment
maybe run spambayes and junk stuff that's obviously spammy before forwarding if we want to get fancy
DKIM sign messages on their way through
take over port 25, somehow talk to mailman (either via talking to Debian's Exim on some alternate port or by running mailman's receipt scripts itself).

Basically, a signing / authenticating MX relay.

Anyone interested in attempting to write such a thing with Twisted? :)

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201002/ec86c826/attachment.htm>

From rodrigc at crodrigues.org  Sat Oct  3 17:15:02 2020
From: rodrigc at crodrigues.org (Craig Rodrigues)
Date: Sat, 3 Oct 2020 16:15:02 -0700
Subject: [Twisted-Python] Request for new Twisted release?
In-Reply-To: <68FFD1F6-1F25-4FD0-B5A8-9F17133D55E2@twistedmatrix.com>
References: <CAG=rPVdTO2SUOL+2rYvvYPPbnyz_FqATmvn0-85Qi4ahbnRpBw@mail.gmail.com>
 <68FFD1F6-1F25-4FD0-B5A8-9F17133D55E2@twistedmatrix.com>
Message-ID: <CAG=rPVenx_heoir+6cQ=4=+u52T0K=H9Ysyyn4LbSjPWGPHLQg@mail.gmail.com>

On Wed, Sep 23, 2020 at 10:11 AM Glyph <glyph at twistedmatrix.com> wrote:

>
>
> On Sep 22, 2020, at 3:42 PM, Craig Rodrigues <rodrigc at crodrigues.org>
> wrote:
>
> Amber,
>
> Can we have a new Twisted release within the next two months, say in
> Nov./Dec. timeframe, or
> sooner if you'd like?
>
>
> Given that Amber hasn't been super responsive lately, and that I firmly
> believe it should be possible to take breaks from open source (particularly
> amidst the, you know, global collapse of civilization and stuff), I will
> take the opportunity point out yet again that
> http://twisted.readthedocs.org/en/latest/core/development/policy/release-process.html documents
> the release process and any sufficiently-motivated volunteer (with at least
> a *bit* of history & trust within the community) can step forward and
> receive all the permissions necessary to do all of these steps.
>
> I will personally volunteer to fill in the permissions gaps for any
> interested parties, although I don't have much bandwidth for the release
> itself.
>
> Amber, if you want to do it, go ahead and get started, I'm just saying we
> don't need to put this on your shoulders :).
>
>
I haven't heard any response from Amber, so I assume that Amber is busy
(and I hope is OK during all the pandemic).

If it is OK with Glyph and Amber, I can focus on pushing out the next
Twisted release, and hopefully get help from Adi.

I'm working now with Adi to automate more of the release actions via GitHub
Actions, and have gotten pretty far,
such as being able to build wheels of Twisted on GitHub Actions for Linux,
MacOS, and Windows.

--
Craig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201003/5fe27474/attachment.htm>

From glyph at twistedmatrix.com  Sat Oct  3 18:14:09 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Sat, 3 Oct 2020 17:14:09 -0700
Subject: [Twisted-Python] Request for new Twisted release?
In-Reply-To: <CAG=rPVenx_heoir+6cQ=4=+u52T0K=H9Ysyyn4LbSjPWGPHLQg@mail.gmail.com>
References: <CAG=rPVdTO2SUOL+2rYvvYPPbnyz_FqATmvn0-85Qi4ahbnRpBw@mail.gmail.com>
 <68FFD1F6-1F25-4FD0-B5A8-9F17133D55E2@twistedmatrix.com>
 <CAG=rPVenx_heoir+6cQ=4=+u52T0K=H9Ysyyn4LbSjPWGPHLQg@mail.gmail.com>
Message-ID: <A008EA83-D0CB-4D01-BF6B-34EE443BE5DF@twistedmatrix.com>



> On Oct 3, 2020, at 4:15 PM, Craig Rodrigues <rodrigc at crodrigues.org> wrote:
> 
> 
> 
> On Wed, Sep 23, 2020 at 10:11 AM Glyph <glyph at twistedmatrix.com <mailto:glyph at twistedmatrix.com>> wrote:
> 
> 
>> On Sep 22, 2020, at 3:42 PM, Craig Rodrigues <rodrigc at crodrigues.org <mailto:rodrigc at crodrigues.org>> wrote:
>> 
>> Amber,
>> 
>> Can we have a new Twisted release within the next two months, say in Nov./Dec. timeframe, or
>> sooner if you'd like?
> 
> Given that Amber hasn't been super responsive lately, and that I firmly believe it should be possible to take breaks from open source (particularly amidst the, you know, global collapse of civilization and stuff), I will take the opportunity point out yet again that http://twisted.readthedocs.org/en/latest/core/development/policy/release-process.html <http://twisted.readthedocs.org/en/latest/core/development/policy/release-process.html> documents the release process and any sufficiently-motivated volunteer (with at least a bit of history & trust within the community) can step forward and receive all the permissions necessary to do all of these steps.
> 
> I will personally volunteer to fill in the permissions gaps for any interested parties, although I don't have much bandwidth for the release itself.
> 
> Amber, if you want to do it, go ahead and get started, I'm just saying we don't need to put this on your shoulders :).
> 
> 
> I haven't heard any response from Amber, so I assume that Amber is busy (and I hope is OK during all the pandemic).

I have heard from Amber occasionally and I believe she's healthy and safe, but if she wants to share more than that it's her own business :).  (Are any of us really "OK"?)

> If it is OK with Glyph and Amber, I can focus on pushing out the next Twisted release, and hopefully get help from Adi.

Absolutely OK with me.  More than OK.  Please do this!  I can't wait until we have the level of automation you've been working on for anybody to cut the release.  I take it this means you'll officially be the release manager for 20.10.0?

Let me know if you need any more permission bits to make progress.

> I'm working now with Adi to automate more of the release actions via GitHub Actions, and have gotten pretty far,
> such as being able to build wheels of Twisted on GitHub Actions for Linux, MacOS, and Windows.

This is fantastic news!  I really appreciate all the effort you're putting in to simplify and streamline the CI situation.

-g

> --
> Craig
> 
>  
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201003/f18851e6/attachment.htm>

From adi at roiban.ro  Sat Oct  3 19:03:20 2020
From: adi at roiban.ro (Adi Roiban)
Date: Sun, 4 Oct 2020 02:03:20 +0100
Subject: [Twisted-Python] Request for new Twisted release?
In-Reply-To: <A008EA83-D0CB-4D01-BF6B-34EE443BE5DF@twistedmatrix.com>
References: <CAG=rPVdTO2SUOL+2rYvvYPPbnyz_FqATmvn0-85Qi4ahbnRpBw@mail.gmail.com>
 <68FFD1F6-1F25-4FD0-B5A8-9F17133D55E2@twistedmatrix.com>
 <CAG=rPVenx_heoir+6cQ=4=+u52T0K=H9Ysyyn4LbSjPWGPHLQg@mail.gmail.com>
 <A008EA83-D0CB-4D01-BF6B-34EE443BE5DF@twistedmatrix.com>
Message-ID: <CAFycZ9fr1Uk3CLXLfA3BtuFjpwOEg=jmODT1dZ3xfpGJuVy0fg@mail.gmail.com>

On Sun, 4 Oct 2020 at 01:14, Glyph <glyph at twistedmatrix.com> wrote:

>
>
> On Oct 3, 2020, at 4:15 PM, Craig Rodrigues <rodrigc at crodrigues.org>
> wrote:
>
>
>
> On Wed, Sep 23, 2020 at 10:11 AM Glyph <glyph at twistedmatrix.com> wrote:
>
>>
>>
>> On Sep 22, 2020, at 3:42 PM, Craig Rodrigues <rodrigc at crodrigues.org>
>> wrote:
>>
>> Amber,
>>
>> Can we have a new Twisted release within the next two months, say in
>> Nov./Dec. timeframe, or
>> sooner if you'd like?
>>
>>
>> Given that Amber hasn't been super responsive lately, and that I firmly
>> believe it should be possible to take breaks from open source (particularly
>> amidst the, you know, global collapse of civilization and stuff), I will
>> take the opportunity point out yet again that
>> http://twisted.readthedocs.org/en/latest/core/development/policy/release-process.html documents
>> the release process and any sufficiently-motivated volunteer (with at least
>> a *bit* of history & trust within the community) can step forward and
>> receive all the permissions necessary to do all of these steps.
>>
>> I will personally volunteer to fill in the permissions gaps for any
>> interested parties, although I don't have much bandwidth for the release
>> itself.
>>
>> Amber, if you want to do it, go ahead and get started, I'm just saying we
>> don't need to put this on your shoulders :).
>>
>>
> I haven't heard any response from Amber, so I assume that Amber is busy
> (and I hope is OK during all the pandemic).
>
>
> I have heard from Amber occasionally and I believe she's healthy and safe,
> but if she wants to share more than that it's her own business :).  (Are
> *any* of us really "OK"?)
>
> If it is OK with Glyph and Amber, I can focus on pushing out the next
> Twisted release, and hopefully get help from Adi.
>
>
> Absolutely OK with me.  More than OK.  Please do this!  I can't wait until
> we have the level of automation you've been working on for *anybody* to
> cut the release.  I take it this means you'll officially be the release
> manager for 20.10.0?
>
> Let me know if you need any more permission bits to make progress.
>
> I'm working now with Adi to automate more of the release actions via
> GitHub Actions, and have gotten pretty far,
> such as being able to build wheels of Twisted on GitHub Actions for Linux,
> MacOS, and Windows.
>
>
> This is fantastic news!  I really appreciate all the effort you're putting
> in to simplify and streamline the CI situation.
>
>
>
I have a proof of concept PR - https://github.com/twisted/twisted/pull/1422

Read the Docs version of Twisted containing the full documentation -
narrative + API.

You can check it here - https://twisted--1422.org.readthedocs.build/en/1422/

With API link in the main page and at
https://twisted--1422.org.readthedocs.build/en/1422/api/index.html

-------

I would say that for the first weeks after the release, we can have the
documentation only on Read The Docs with the read the docs theme...
but it can be confusing if we don't also update
https://twistedmatrix.com/documents/current/ docs.

Later we can enable the Twisted own theme.. if we want.

I think that many seach indexes are using
https://twistedmatrix.com/documents/current/api/twisted.html

So after the release we should decide if we  should mirror the docs from
Read The docs to the Twisted own VM... or create a reverse proxy, or create
a redirection.

--------------

All this Read the Docs hosting is implemented as it doesn't require any
extra permissions and is already integrated with the VCS.

We can automatically build the docs via GitHub actions, but the problem is
how we get them to the Twisted main server.
Allowing GitHub actions to push random stuff can be a security issue... and
implementing a restrictive SFTP server ono the Twisted main server requires
extra work.

-- 
Adi Roiban
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201004/67076f77/attachment-0001.htm>

From glyph at twistedmatrix.com  Sat Oct  3 22:46:19 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Sat, 3 Oct 2020 21:46:19 -0700
Subject: [Twisted-Python] Mailgun Email Service Replacement Proposal
In-Reply-To: <8668EB3A-3C1A-46B0-A31F-F84C1CE81255@twistedmatrix.com>
References: <8668EB3A-3C1A-46B0-A31F-F84C1CE81255@twistedmatrix.com>
Message-ID: <1BB8A98C-DC47-49D1-812B-875F844740CC@twistedmatrix.com>



> On Oct 2, 2020, at 11:35 PM, Glyph <glyph at twistedmatrix.com> wrote:
> 
> Right now, I'm dealing with a minor issue where our "plan" (which, again, Mailgun has generously given us for free) no longer includes the ability to process incoming email... so, for example, this email is only reaching you because the pre-existing inbound routes are grandfathered in, and continue to work (whew!); however, I can no longer add new @twistedmatrix.com email addresses nor change the configuration of existing ones.
> 
> Now, for this particular issue I've opened a ticket with Mailgun and hopefully they'll be kind enough to extend their support to us yet again, but in the longer term, it feels like we might want to go back to hosting our own thing; ideally a thing that allows us to dogfood Twisted and maybe learn interesting things about our SMTP support.

Update: the severity on this issue is back down to "low", as Mailgun's excellent support has re-enabled our inbound email processing for the forseeable future.  Thanks Mailgun!

Even so, though, I think it would be helpful to build a thing like what I described to dogfood our email code in a more realistic environment once again.

-g



From trac at twistedmatrix.com  Sun Oct  4 00:05:18 2020
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 04 Oct 2020 06:05:18 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1601791518.27.2595972493415289004@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201004/a983f8cc/attachment.htm>

From ian at haywood.id.au  Sun Oct  4 00:53:16 2020
From: ian at haywood.id.au (Ian Haywood)
Date: Sun, 4 Oct 2020 17:53:16 +1100
Subject: [Twisted-Python] Mailgun Email Service Replacement Proposal
In-Reply-To: <8668EB3A-3C1A-46B0-A31F-F84C1CE81255@twistedmatrix.com>
References: <8668EB3A-3C1A-46B0-A31F-F84C1CE81255@twistedmatrix.com>
Message-ID: <8705126b-f42c-6645-bec5-9d4369980e0e@haywood.id.au>


On 3/10/2020 4:35 pm, Glyph wrote:
> Basically, a signing / authenticating MX relay.
>
> Anyone interested in attempting to write such a thing with Twisted? :)


I'm happy to it for  "fee": review of my SMB patches

Ian


From rodrigc at crodrigues.org  Sun Oct  4 12:15:30 2020
From: rodrigc at crodrigues.org (Craig Rodrigues)
Date: Sun, 4 Oct 2020 11:15:30 -0700
Subject: [Twisted-Python] Request for new Twisted release?
In-Reply-To: <A008EA83-D0CB-4D01-BF6B-34EE443BE5DF@twistedmatrix.com>
References: <CAG=rPVdTO2SUOL+2rYvvYPPbnyz_FqATmvn0-85Qi4ahbnRpBw@mail.gmail.com>
 <68FFD1F6-1F25-4FD0-B5A8-9F17133D55E2@twistedmatrix.com>
 <CAG=rPVenx_heoir+6cQ=4=+u52T0K=H9Ysyyn4LbSjPWGPHLQg@mail.gmail.com>
 <A008EA83-D0CB-4D01-BF6B-34EE443BE5DF@twistedmatrix.com>
Message-ID: <CAG=rPVfFzdh-u4vdWCqOHXhCaSZ+tCkOBc5GrC5TgO914VvimQ@mail.gmail.com>

On Sat, Oct 3, 2020 at 5:14 PM Glyph <glyph at twistedmatrix.com> wrote:

>
>
>
> Absolutely OK with me.  More than OK.  Please do this!  I can't wait until
> we have the level of automation you've been working on for *anybody* to
> cut the release.  I take it this means you'll officially be the release
> manager for 20.10.0?
>
> Let me know if you need any more permission bits to make progress.
>


If it is OK with Amber and you, then yes, I can officially be the release
manager for the next Twisted release,
which will be 20.10.0.

I need help with the following:

*Incremental*
I'd like to get these patches into Incremental and deploy a new Incremental
release:

   - https://github.com/twisted/incremental/pull/60 , Make the output of
   Incremental compatible with black
   - https://github.com/twisted/incremental/pull/62 , Make dev, rc, post
   releases compatible with PEP440


*PyPI*

I used this GitHub Action to push to PyPI:

      uses: pypa/gh-action-pypi-publish at v1.4.1
      with:
        user: __token__
        password: ${{ secrets.pypi_password }}
        verbose: true

I can confirm that this GitHub Action works, and it tries to push to PyPI:

https://github.com/twisted/twisted/runs/1204812301?check_suite_focus=true

It failed because the token does not exist.

*What I need*

   1. a GitHub Secret named pypi_password , which contains a token which
   will allow me to upload to PyPI
   2. a GitHub Secret named test_pypi_password, which contains a token
   which will allow me to upload to test.pypi.org


Thanks.

--
Craig


--
Craig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201004/58fc13aa/attachment.htm>

From trac at twistedmatrix.com  Sun Oct 11 00:05:17 2020
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 11 Oct 2020 06:05:17 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1602396317.17.3577201100749324897@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201011/e87c1628/attachment.htm>

From adi at roiban.ro  Mon Oct 12 04:30:51 2020
From: adi at roiban.ro (Adi Roiban)
Date: Mon, 12 Oct 2020 11:30:51 +0100
Subject: [Twisted-Python] Re-run Azure tests
Message-ID: <CAFycZ9dVOOCa9qrTvM26GP=X80GwfQ-_m=YD_JC-4scfhFW+jw@mail.gmail.com>

Hi,

There was a discussion over IRC about re-running failed Azure tests.

I was confused, as if I go to the Azure build page, I don't see any re-run
job option.

Maarten told me that the re-run link is on the GitHub page, and not on
Azure.

See the screenshot below.

I hope this helps :)

Cheers

[image: image.png]


-- 
Adi Roiban
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201012/db3c46fa/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 69541 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20201012/db3c46fa/attachment-0001.png>

From rodrigc at crodrigues.org  Mon Oct 12 10:31:05 2020
From: rodrigc at crodrigues.org (Craig Rodrigues)
Date: Mon, 12 Oct 2020 09:31:05 -0700
Subject: [Twisted-Python] Request for new Twisted release?
In-Reply-To: <CAG=rPVfFzdh-u4vdWCqOHXhCaSZ+tCkOBc5GrC5TgO914VvimQ@mail.gmail.com>
References: <CAG=rPVdTO2SUOL+2rYvvYPPbnyz_FqATmvn0-85Qi4ahbnRpBw@mail.gmail.com>
 <68FFD1F6-1F25-4FD0-B5A8-9F17133D55E2@twistedmatrix.com>
 <CAG=rPVenx_heoir+6cQ=4=+u52T0K=H9Ysyyn4LbSjPWGPHLQg@mail.gmail.com>
 <A008EA83-D0CB-4D01-BF6B-34EE443BE5DF@twistedmatrix.com>
 <CAG=rPVfFzdh-u4vdWCqOHXhCaSZ+tCkOBc5GrC5TgO914VvimQ@mail.gmail.com>
Message-ID: <CAG=rPVffZiNhPDNZJM3w24ooHoA8vj8rOeNX2j7WjOgxW7cqxw@mail.gmail.com>

On Sunday, October 4, 2020, Craig Rodrigues <rodrigc at crodrigues.org> wrote:

> On Sat, Oct 3, 2020 at 5:14 PM Glyph <glyph at twistedmatrix.com> wrote:
>
>>
>>
>>
>> Absolutely OK with me.  More than OK.  Please do this!  I can't wait
>> until we have the level of automation you've been working on for
>> *anybody* to cut the release.  I take it this means you'll officially be
>> the release manager for 20.10.0?
>>
>> Let me know if you need any more permission bits to make progress.
>>
>
>
> If it is OK with Amber and you, then yes, I can officially be the release
> manager for the next Twisted release,
> which will be 20.10.0.
>
> I need help with the following:
>
> *Incremental*
> I'd like to get these patches into Incremental and deploy a new
> Incremental release:
>
>    - https://github.com/twisted/incremental/pull/60 , Make the output of
>    Incremental compatible with black
>    - https://github.com/twisted/incremental/pull/62 , Make dev, rc, post
>    releases compatible with PEP440
>
>
> *PyPI*
>
> I used this GitHub Action to push to PyPI:
>
>       uses: pypa/gh-action-pypi-publish at v1.4.1
>       with:
>         user: __token__
>         password: ${{ secrets.pypi_password }}
>         verbose: true
>
> I can confirm that this GitHub Action works, and it tries to push to PyPI:
>
> https://github.com/twisted/twisted/runs/1204812301?check_suite_focus=true
>
> It failed because the token does not exist.
>
> *What I need*
>
>    1. a GitHub Secret named pypi_password , which contains a token which
>    will allow me to upload to PyPI
>    2. a GitHub Secret named test_pypi_password, which contains a token
>    which will allow me to upload to test.pypi.org
>
>
> Thanks.
>




Glyph/Amber,

Can you help with this?

1.  Need to merge changes to github.com/twisted/incremental and push out a
new version.
2.  Need to generate a token at https://pypi.org/project/Twisted to permit
uploads
3.  Need to store token from 2. as a GitHub Secret named pypi_password in
github.com/twisted/twisted

I don’t have permissions to do these things.

—
Craig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201012/793b1e9e/attachment.htm>

From adi at roiban.ro  Mon Oct 12 12:12:03 2020
From: adi at roiban.ro (Adi Roiban)
Date: Mon, 12 Oct 2020 19:12:03 +0100
Subject: [Twisted-Python] Re-run Azure tests
In-Reply-To: <CAFycZ9dVOOCa9qrTvM26GP=X80GwfQ-_m=YD_JC-4scfhFW+jw@mail.gmail.com>
References: <CAFycZ9dVOOCa9qrTvM26GP=X80GwfQ-_m=YD_JC-4scfhFW+jw@mail.gmail.com>
Message-ID: <CAFycZ9dLZ-HC12fs8fxqH4VgSXiWARPg5wZy5s62tqPrECXxag@mail.gmail.com>

On Mon, 12 Oct 2020 at 11:30, Adi Roiban <adi at roiban.ro> wrote:

> Hi,
>
> There was a discussion over IRC about re-running failed Azure tests.
>
> I was confused, as if I go to the Azure build page, I don't see any re-run
> job option.
>
> Maarten told me that the re-run link is on the GitHub page, and not on
> Azure.
>
> See the screenshot below.
>
> I hope this helps :)
>
> Cheers
>
>
It looks like the re-run feature is broken.

I guess that we need to move all the tests that require re-run to GitHub
Actions.

Tests that don't require a re-run (documentation build or linters) can be
kept or moved to Azure to continue having many parallel builds.

-- 
Adi Roiban
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201012/00eca070/attachment.htm>

From wsanchez at wsanchez.net  Mon Oct 12 12:36:10 2020
From: wsanchez at wsanchez.net (=?utf-8?Q?Wilfredo_S=C3=A1nchez_Vega?=)
Date: Mon, 12 Oct 2020 11:36:10 -0700
Subject: [Twisted-Python] Request for new Twisted release?
In-Reply-To: <38e2f8bea7f7e8bfaa827f7986c41288@fstab.net>
References: <CAG=rPVdTO2SUOL+2rYvvYPPbnyz_FqATmvn0-85Qi4ahbnRpBw@mail.gmail.com>
 <68FFD1F6-1F25-4FD0-B5A8-9F17133D55E2@twistedmatrix.com>
 <CAFycZ9fEFJed-7=youyMfO2jQZmrtHLmKuK=xUq3XrtKNdCAmg@mail.gmail.com>
 <CAG=rPVeAd+4Ae99w5gGem-Ro0hAw9dws4NL0AapPKgf0jmA4cg@mail.gmail.com>
 <5C81EF38-BB7E-465F-A585-1FF069753536@twistedmatrix.com>
 <38e2f8bea7f7e8bfaa827f7986c41288@fstab.net>
Message-ID: <DF0DFB11-186D-4680-BC68-F0F47A11B63D@wsanchez.net>

On Sep 28, 2020, at 11:35 AM, Kyle Altendorf <sda at fstab.net> wrote:
> 
> I guess this one is top-posting...  Anyways, I would personally default away from CI-provider-specific solutions.  It seems like a command line tool ought to suffice? 

  Certainly, it should first be possible to ship a release from the command line.  Then a CI solution is a mere convenience.

  I started doing this for Klein: https://github.com/twisted/klein/blob/master/release.py <https://github.com/twisted/klein/blob/master/release.py>

  (Not claiming this is the way to do it, just FYI.)

  Craig: this does have to work around non-black output from incremental: https://github.com/twisted/klein/blob/master/release.py#L86

	-wsv

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201012/972c8bc0/attachment.htm>

From rodrigc at crodrigues.org  Mon Oct 12 13:29:57 2020
From: rodrigc at crodrigues.org (Craig Rodrigues)
Date: Mon, 12 Oct 2020 12:29:57 -0700
Subject: [Twisted-Python] Re-run Azure tests
In-Reply-To: <CAFycZ9dLZ-HC12fs8fxqH4VgSXiWARPg5wZy5s62tqPrECXxag@mail.gmail.com>
References: <CAFycZ9dVOOCa9qrTvM26GP=X80GwfQ-_m=YD_JC-4scfhFW+jw@mail.gmail.com>
 <CAFycZ9dLZ-HC12fs8fxqH4VgSXiWARPg5wZy5s62tqPrECXxag@mail.gmail.com>
Message-ID: <CAG=rPVd6aZ4EjKFrLDjs_4P7Do9FJkVqxWbZLVtPENkJzAO6jQ@mail.gmail.com>

On Mon, Oct 12, 2020 at 11:12 AM Adi Roiban <adi at roiban.ro> wrote:

>
>> It looks like the re-run feature is broken.
>
>

No, the re-run feature in Azure is not broken.  I've managed to do it
several times successfully.
There might be some issue with your account access, but I don't know enough
about Azure
to know what your account problem might be.

In terms of moving all Azure jobs to GitHub Actions, that is certainly
something we can investigate in future,
but I don't think there is a rush to do that right away.

I have managed to successfully move all CircleCI jobs and Travis jobs to
GitHub Actions, and so far it is working
and holding up.
--
Craig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201012/35ef395a/attachment.htm>

From rodrigc at crodrigues.org  Mon Oct 12 13:53:48 2020
From: rodrigc at crodrigues.org (Craig Rodrigues)
Date: Mon, 12 Oct 2020 12:53:48 -0700
Subject: [Twisted-Python] Request for new Twisted release?
In-Reply-To: <DF0DFB11-186D-4680-BC68-F0F47A11B63D@wsanchez.net>
References: <CAG=rPVdTO2SUOL+2rYvvYPPbnyz_FqATmvn0-85Qi4ahbnRpBw@mail.gmail.com>
 <68FFD1F6-1F25-4FD0-B5A8-9F17133D55E2@twistedmatrix.com>
 <CAFycZ9fEFJed-7=youyMfO2jQZmrtHLmKuK=xUq3XrtKNdCAmg@mail.gmail.com>
 <CAG=rPVeAd+4Ae99w5gGem-Ro0hAw9dws4NL0AapPKgf0jmA4cg@mail.gmail.com>
 <5C81EF38-BB7E-465F-A585-1FF069753536@twistedmatrix.com>
 <38e2f8bea7f7e8bfaa827f7986c41288@fstab.net>
 <DF0DFB11-186D-4680-BC68-F0F47A11B63D@wsanchez.net>
Message-ID: <CAG=rPVeHUSDnNma3XMha353LqkKSbLctf6ShAXQio5z6DCVuNg@mail.gmail.com>

On Mon, Oct 12, 2020 at 11:36 AM Wilfredo Sánchez Vega <
wsanchez at wsanchez.net> wrote:

>
>   Craig: this does have to work around non-black output from incremental:
> https://github.com/twisted/klein/blob/master/release.py#L86
>
>
I don't need this klein workaround at the moment.  I can confirm that my
patches to incremental produce output
that is black-compatible, when I run my patched version of incremental in
the Twisted tree.
 I am going to move forward with merging my changes to incremental and
pushing out a new
incremental release.

--
Craig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201012/8272c44c/attachment.htm>

From wsanchez at wsanchez.net  Mon Oct 12 15:30:11 2020
From: wsanchez at wsanchez.net (=?utf-8?Q?Wilfredo_S=C3=A1nchez_Vega?=)
Date: Mon, 12 Oct 2020 14:30:11 -0700
Subject: [Twisted-Python] Re-run Azure tests
In-Reply-To: <CAG=rPVd6aZ4EjKFrLDjs_4P7Do9FJkVqxWbZLVtPENkJzAO6jQ@mail.gmail.com>
References: <CAFycZ9dVOOCa9qrTvM26GP=X80GwfQ-_m=YD_JC-4scfhFW+jw@mail.gmail.com>
 <CAFycZ9dLZ-HC12fs8fxqH4VgSXiWARPg5wZy5s62tqPrECXxag@mail.gmail.com>
 <CAG=rPVd6aZ4EjKFrLDjs_4P7Do9FJkVqxWbZLVtPENkJzAO6jQ@mail.gmail.com>
Message-ID: <801DA9F7-3E84-4195-B9DC-BF5FF6A0F74B@wsanchez.net>

On Oct 12, 2020, at 12:29 PM, Craig Rodrigues <rodrigc at crodrigues.org> wrote:
> 
> No, the re-run feature in Azure is not broken.  I've managed to do it several times successfully.

  Hrm.  I’ve tried pushing that button many times and nothing happens.  So, while it’s great that it works for you, if it doesn’t work for other core developers, I think it’s fair to call it broken.

	-wsv

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201012/f465af03/attachment-0001.htm>

From glyph at twistedmatrix.com  Mon Oct 12 22:48:41 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 12 Oct 2020 21:48:41 -0700
Subject: [Twisted-Python] Re-run Azure tests
In-Reply-To: <CAFycZ9dVOOCa9qrTvM26GP=X80GwfQ-_m=YD_JC-4scfhFW+jw@mail.gmail.com>
References: <CAFycZ9dVOOCa9qrTvM26GP=X80GwfQ-_m=YD_JC-4scfhFW+jw@mail.gmail.com>
Message-ID: <D4E80A5D-78CE-4FF3-AC77-12CD8CC7BAE7@twistedmatrix.com>

There is a way to get to it on Azure if you're logged in and have some set of permissions and MS federated auth is having a good day, but since several folks have complained that the in-Github UI is also unreliable, maybe some folk would be interested to see where the button should be on the UI for the build:




Note that the user avatar icon in the top right indicates that I'm logged in via github which is an important point; plus, you might have to be a committer to see this.

-g

> On Oct 12, 2020, at 3:30 AM, Adi Roiban <adi at roiban.ro <mailto:adi at roiban.ro>> wrote:
> 
> Hi,
> 
> There was a discussion over IRC about re-running failed Azure tests.
> 
> I was confused, as if I go to the Azure build page, I don't see any re-run job option.
> 
> Maarten told me that the re-run link is on the GitHub page, and not on Azure.
> 
> See the screenshot below.
> 
> I hope this helps :)
> 
> Cheers
> 
> <image.png>
> 
> 
> -- 
> Adi Roiban
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com <mailto:Twisted-Python at twistedmatrix.com>
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201012/b135ecfc/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: pngout.png
Type: image/png
Size: 166362 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20201012/b135ecfc/attachment-0001.png>

From adi at roiban.ro  Tue Oct 13 17:26:51 2020
From: adi at roiban.ro (Adi Roiban)
Date: Wed, 14 Oct 2020 00:26:51 +0100
Subject: [Twisted-Python] Re-run Azure tests
In-Reply-To: <D4E80A5D-78CE-4FF3-AC77-12CD8CC7BAE7@twistedmatrix.com>
References: <CAFycZ9dVOOCa9qrTvM26GP=X80GwfQ-_m=YD_JC-4scfhFW+jw@mail.gmail.com>
 <D4E80A5D-78CE-4FF3-AC77-12CD8CC7BAE7@twistedmatrix.com>
Message-ID: <CAFycZ9dF45nVZe=Fz6KtUYdVoN-cLM1i=b9gHxMC648NG35cGQ@mail.gmail.com>

On Tue, 13 Oct 2020 at 19:16, Glyph <glyph at twistedmatrix.com> wrote:

> There is a way to get to it on Azure if you're logged in and have some set
> of permissions and MS federated auth is having a good day, but since
> several folks have complained that the in-Github UI is also unreliable,
> maybe some folk would be interested to see where the button should be on
> the UI for the build:
>
>
>
> Note that the user avatar icon in the top right indicates that I'm logged
> in *via github* which is an important point; plus, you might have to be a
> committer to see this.
>
>
>
Thanks. So you need to be logged with github account and not your normal
Azure/Devops account.
I guess most of us are connected to Azure using the Azure AD account.

I was not expecting to see "Login via Github" on the MS login page.

After the Github login, the github re-run works. It automatically re-runs
all the failed tests...not only a single job.

Regards


> On Oct 12, 2020, at 3:30 AM, Adi Roiban <adi at roiban.ro> wrote:
>
> Hi,
>
> There was a discussion over IRC about re-running failed Azure tests.
>
> I was confused, as if I go to the Azure build page, I don't see any re-run
> job option.
>
> Maarten told me that the re-run link is on the GitHub page, and not on
> Azure.
>
> See the screenshot below.
>
> I hope this helps :)
>
> Cheers
>
> <image.png>
>
>
> --
> Adi Roiban
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


-- 
Adi Roiban
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201014/841a66b0/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: pngout.png
Type: image/png
Size: 166362 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20201014/841a66b0/attachment-0001.png>

From glyph at twistedmatrix.com  Tue Oct 13 22:40:45 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 13 Oct 2020 21:40:45 -0700
Subject: [Twisted-Python] Re-run Azure tests
In-Reply-To: <CAFycZ9dF45nVZe=Fz6KtUYdVoN-cLM1i=b9gHxMC648NG35cGQ@mail.gmail.com>
References: <CAFycZ9dVOOCa9qrTvM26GP=X80GwfQ-_m=YD_JC-4scfhFW+jw@mail.gmail.com>
 <D4E80A5D-78CE-4FF3-AC77-12CD8CC7BAE7@twistedmatrix.com>
 <CAFycZ9dF45nVZe=Fz6KtUYdVoN-cLM1i=b9gHxMC648NG35cGQ@mail.gmail.com>
Message-ID: <290EE2A0-9813-4A1A-8711-59D5B2842F31@twistedmatrix.com>



> On Oct 13, 2020, at 4:26 PM, Adi Roiban <adi at roiban.ro> wrote:
> 
> Thanks. So you need to be logged with github account and not your normal Azure/Devops account.
> I guess most of us are connected to Azure using the Azure AD account.
> 
> I was not expecting to see "Login via Github" on the MS login page.
> 
> After the Github login, the github re-run works. It automatically re-runs all the failed tests...not only a single job.

After reading this I tried for like 20 minutes to try and figure out what microsoft is doing when I "log in"; it seems it's figured out my azure account is my github account, I could have sworn I had 2 but now I only have 1.

Not sure how one gets into this situation though, and the fact that large parts of the MS / live.com <http://live.com/> auth stack are just broken (right now the logout button doesn't work at all, I have to delete all my cookies) makes this tricky to debug.  So I'm giving up now :).

-g
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201013/27783650/attachment.htm>

From trac at twistedmatrix.com  Sun Oct 18 00:05:17 2020
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 18 Oct 2020 06:05:17 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1603001117.38.7253721663148076586@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201018/cfdbfc9c/attachment.htm>

From wsanchez at wsanchez.net  Sun Oct 18 22:47:18 2020
From: wsanchez at wsanchez.net (=?utf-8?Q?Wilfredo_S=C3=A1nchez_Vega?=)
Date: Sun, 18 Oct 2020 21:47:18 -0700
Subject: [Twisted-Python] Re-run Azure tests
In-Reply-To: <290EE2A0-9813-4A1A-8711-59D5B2842F31@twistedmatrix.com>
References: <290EE2A0-9813-4A1A-8711-59D5B2842F31@twistedmatrix.com>
Message-ID: <631D808F-504D-497F-954E-3B8C616D729D@wsanchez.net>

 Yeah, log in with GH has never worked for me. Always results in what claims to be a transient error. 

  -wsv

> On Oct 13, 2020, at 9:40 PM, Glyph <glyph at twistedmatrix.com> wrote:
> 
> ﻿
> 
>> On Oct 13, 2020, at 4:26 PM, Adi Roiban <adi at roiban.ro> wrote:
>> 
>> Thanks. So you need to be logged with github account and not your normal Azure/Devops account.
>> I guess most of us are connected to Azure using the Azure AD account.
>> 
>> I was not expecting to see "Login via Github" on the MS login page.
>> 
>> After the Github login, the github re-run works. It automatically re-runs all the failed tests...not only a single job.
> 
> After reading this I tried for like 20 minutes to try and figure out what microsoft is doing when I "log in"; it seems it's figured out my azure account is my github account, I could have sworn I had 2 but now I only have 1.
> 
> Not sure how one gets into this situation though, and the fact that large parts of the MS / live.com auth stack are just broken (right now the logout button doesn't work at all, I have to delete all my cookies) makes this tricky to debug.  So I'm giving up now :).
> 
> -g
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201018/9a095ff2/attachment.htm>

From glyph at twistedmatrix.com  Mon Oct 19 11:18:22 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 19 Oct 2020 10:18:22 -0700
Subject: [Twisted-Python] revert / rework of "AMPv2" change?
Message-ID: <BE3583A2-6E4E-4550-AE6D-ACD4A12CF900@twistedmatrix.com>

I just glanced at https://github.com/twisted/twisted/pull/1417 <https://github.com/twisted/twisted/pull/1417> after it was merged and noticed a few problems:

- It exposes a new top-level name rather than setting the protocol version as a parameter
- The NEWS files are malformed which is going to lead to some confusing duplication in the changelog
- AMPv2 itself does not appear to be "standardized" - the page at https://amp-protocol.net/conversations_v2.html <https://amp-protocol.net/conversations_v2.html> appears to be a preliminary suggestion for how long values might be handled rather than something broadly implemented; for one thing, I'd never heard of it before and for another the site itself doesn't link the document. This would be fine as a first draft, but I think it needs to be given some more revisions, given that (for example) there are a number of backwards-compatible ways to do this.
- The layering is wrong because it puts the protocol-parsing into a leaf class in the hierarchy, when the parsing logic was deliberately isolated to a lower level to facilitate different framing mechanisms.
- As JP pointed out, the tests have a potential bug where they can leak errors between cases.

I don't normally like to revert folks' work once it's been reviewed and accepted, particularly when there's no process violation (broken CI, lack of code coverage etc), but I'm particularly concerned about lending Twisted's imprimatur to this protocol extension as a whole new version without much more context on who is implementing it and what other options were considered, particularly when I personally (nominally the inventor of AMP) don't like the direction it has taken :).

What do other folks think?  Anyone else have more of a finger on the pulse of where the "v2" conversation has been happening?

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201019/eec32344/attachment.htm>

From adi at roiban.ro  Tue Oct 20 02:57:16 2020
From: adi at roiban.ro (Adi Roiban)
Date: Tue, 20 Oct 2020 09:57:16 +0100
Subject: [Twisted-Python] revert / rework of "AMPv2" change?
In-Reply-To: <BE3583A2-6E4E-4550-AE6D-ACD4A12CF900@twistedmatrix.com>
References: <BE3583A2-6E4E-4550-AE6D-ACD4A12CF900@twistedmatrix.com>
Message-ID: <CAFycZ9crqs1dJqMgqEs1b3XnsbKib1U+2cRuR5iavBeNM-K6Ug@mail.gmail.com>

On Mon, 19 Oct 2020 at 18:18, Glyph <glyph at twistedmatrix.com> wrote:

> I just glanced at https://github.com/twisted/twisted/pull/1417 after it
> was merged and noticed a few problems:
>
> - It exposes a new top-level name rather than setting the protocol version
> as a parameter
> - The NEWS files are malformed which is going to lead to some confusing
> duplication in the changelog
> - AMPv2 itself does not appear to be "standardized" - the page at
> https://amp-protocol.net/conversations_v2.html appears to be a
> preliminary suggestion for how long values might be handled rather than
> something broadly implemented; for one thing, I'd never heard of it before
> and for another the site itself doesn't link the document. This would be
> fine as a first draft, but I think it needs to be given some more
> revisions, given that (for example) there are a number of
> backwards-compatible ways to do this.
> - The layering is wrong because it puts the protocol-parsing into a leaf
> class in the hierarchy, when the parsing logic was deliberately isolated to
> a lower level to facilitate different framing mechanisms.
> - As JP pointed out, the tests have a potential bug where they can leak
> errors between cases.
>
> I don't normally like to revert folks' work once it's been reviewed and
> accepted, particularly when there's no process violation (broken CI, lack
> of code coverage etc), but I'm particularly concerned about lending
> Twisted's imprimatur to this protocol extension as a whole new version
> without much more context on who is implementing it and what other options
> were considered, particularly when I personally (nominally the inventor of
> AMP) don't like the direction it has taken :).
>
> What do other folks think?  Anyone else have more of a finger on the pulse
> of where the "v2" conversation has been happening?
>
>
Just my 2 cents

I think that whether this should be reverted or reworked should be between
the person raising this issue (Glyph) and the author of the PR (Jonathan).

I see that Jonathan has responded to the feedback inside the merged PR.I
hope it can be reworked.

Since AMP v2 is not standardized maybe is ok to have it as a separate
experimental top level name.

I have never used AMP ...I tried to use it via ampoule but ended up using
the stdlib process pool as I was not able see any performance difference.

Since `amp` is used by `trial -j`  we need to keep it inside twisted.

But since AMP v2 is experimental, I think that is best to have it as a
separate txamp2 project.
In this way, the twisted AMP v2 project can follow its own rules.
Once AMP v2 is "mature" it can be moved to core twisted

So my take is to revert it and move it to twisted/txamp2.

----

BTW this is also my suggestion for the PR trying to introduce support for
SMB.... have twisted SMB implementation in a separate project.

-- 
Adi Roiban
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201020/088b9d1f/attachment.htm>

From joe at x2a.org  Wed Oct 21 11:34:18 2020
From: joe at x2a.org (Jonathan Bastien-Filiatrault)
Date: Wed, 21 Oct 2020 13:34:18 -0400
Subject: [Twisted-Python] revert / rework of "AMPv2" change?
In-Reply-To: <CAFycZ9crqs1dJqMgqEs1b3XnsbKib1U+2cRuR5iavBeNM-K6Ug@mail.gmail.com>
References: <BE3583A2-6E4E-4550-AE6D-ACD4A12CF900@twistedmatrix.com>
 <CAFycZ9crqs1dJqMgqEs1b3XnsbKib1U+2cRuR5iavBeNM-K6Ug@mail.gmail.com>
Message-ID: <f698ca11-1de1-b024-8ae4-e31ca7710c67@x2a.org>

On 2020-10-20 04 h 57, adi at roiban.ro (Adi Roiban) wrote:
> Just my 2 cents
> I think that whether this should be reverted or reworked should be between
> the person raising this issue (Glyph) and the author of the PR (Jonathan).
Glyph has asked me to submit the type annotation work on AMP, I will do
this. I also plan on resubmitting a reworked patch that addresses the
issues that glyph raised.
>
> I see that Jonathan has responded to the feedback inside the merged PR.I
> hope it can be reworked.
>
> Since AMP v2 is not standardized maybe is ok to have it as a separate
> experimental top level name.
>
> I have never used AMP ...I tried to use it via ampoule but ended up using
> the stdlib process pool as I was not able see any performance difference.
>
> Since `amp` is used by `trial -j`  we need to keep it inside twisted.
>
> But since AMP v2 is experimental, I think that is best to have it as a
> separate txamp2 project.
> In this way, the twisted AMP v2 project can follow its own rules.
> Once AMP v2 is "mature" it can be moved to core twisted
>
> So my take is to revert it and move it to twisted/txamp2.


I have no issue with changing the name or if this patch lives as a
project besides twisted. I might even rework it into something more
forward-compatible as suggested by glyph. I think netstrings are a
decent option as it would make long value handling easier since values
would always be contiguous without "continuation markers" interspersed.
The main thing I dislike about netstrings are the variable-length ASCII
numbers, but that is not a big complexity. Could the next AMP version
use values framed using 32 bit or 64 bit integers ?


Transmitting long-ish values is a real use case and whatever extension
we do must retain the dead-simple, easy to implement nature of the
current AMP protocol. I now realise that I somewhat hijacked the
"streaming values" bug (2529). IMHO, streaming should be handled at the
application level, but I digress.

>
> ----
>
> BTW this is also my suggestion for the PR trying to introduce support for
> SMB.... have twisted SMB implementation in a separate project.
>
All the best,

Jonathan


From sda at fstab.net  Wed Oct 21 13:11:21 2020
From: sda at fstab.net (Kyle Altendorf)
Date: Wed, 21 Oct 2020 15:11:21 -0400
Subject: [Twisted-Python] towncrier review policies and etiquette (and maybe
 releases too)
Message-ID: <39c514999a1a5a235882971a9743bd03@fstab.net>

Where does towncrier stand on review policies and etiquette?  I 
generally don't like to just jump into new projects and start reviewing 
and merging but I don't see other activity on that front nor do I see 
any guidance on how it should be done.  If I know how to proceed 
properly then I might dedicate some review time to it.

Cheers,
-kyle


From twm at freecog.net  Wed Oct 21 14:59:17 2020
From: twm at freecog.net (Tom Most)
Date: Wed, 21 Oct 2020 13:59:17 -0700
Subject: [Twisted-Python] 
 =?utf-8?q?towncrier_review_policies_and_etiquet?=
 =?utf-8?q?te_=28and_maybe_releases_too=29?=
In-Reply-To: <39c514999a1a5a235882971a9743bd03@fstab.net>
References: <39c514999a1a5a235882971a9743bd03@fstab.net>
Message-ID: <3b6d7e73-44ca-4d71-9fb3-672a5f09f0e7@www.fastmail.com>

I think that it's fine to fall back to the twisted/twisted policies[1] for any project in the Twisted GitHub organization. The workflow won't apply directly --- no Trac, etc. --- but the core "someone must review all changes" and "test all the things" principles are relevant. That's how I treat Treq.

---Tom

[1]: https://twistedmatrix.com/trac/wiki/ContributingToTwistedLabs

On Wed, Oct 21, 2020, at 12:11 PM, Kyle Altendorf wrote:
> Where does towncrier stand on review policies and etiquette?  I 
> generally don't like to just jump into new projects and start reviewing 
> and merging but I don't see other activity on that front nor do I see 
> any guidance on how it should be done.  If I know how to proceed 
> properly then I might dedicate some review time to it.
> 
> Cheers,
> -kyle


From glyph at twistedmatrix.com  Wed Oct 21 23:15:35 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 21 Oct 2020 22:15:35 -0700
Subject: [Twisted-Python] towncrier review policies and etiquette (and
 maybe releases too)
In-Reply-To: <3b6d7e73-44ca-4d71-9fb3-672a5f09f0e7@www.fastmail.com>
References: <39c514999a1a5a235882971a9743bd03@fstab.net>
 <3b6d7e73-44ca-4d71-9fb3-672a5f09f0e7@www.fastmail.com>
Message-ID: <95F0FA86-7E7A-4052-93E2-106E8C52FDD4@twistedmatrix.com>

I'd love to update these policy documents to have something explicitly org-wide, but until somebody has the time to go through and do that properly, this is generally a good assumption to have.

> On Oct 21, 2020, at 1:59 PM, Tom Most <twm at freecog.net> wrote:
> 
> I think that it's fine to fall back to the twisted/twisted policies[1] for any project in the Twisted GitHub organization. The workflow won't apply directly --- no Trac, etc. --- but the core "someone must review all changes" and "test all the things" principles are relevant. That's how I treat Treq.
> 
> ---Tom
> 
> [1]: https://twistedmatrix.com/trac/wiki/ContributingToTwistedLabs
> 
> On Wed, Oct 21, 2020, at 12:11 PM, Kyle Altendorf wrote:
>> Where does towncrier stand on review policies and etiquette?  I 
>> generally don't like to just jump into new projects and start reviewing 
>> and merging but I don't see other activity on that front nor do I see 
>> any guidance on how it should be done.  If I know how to proceed 
>> properly then I might dedicate some review time to it.
>> 
>> Cheers,
>> -kyle
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From adi at roiban.ro  Sat Oct 24 06:21:03 2020
From: adi at roiban.ro (Adi Roiban)
Date: Sat, 24 Oct 2020 13:21:03 +0100
Subject: [Twisted-Python] Re-run Azure tests
In-Reply-To: <631D808F-504D-497F-954E-3B8C616D729D@wsanchez.net>
References: <290EE2A0-9813-4A1A-8711-59D5B2842F31@twistedmatrix.com>
 <631D808F-504D-497F-954E-3B8C616D729D@wsanchez.net>
Message-ID: <CAFycZ9cG9H_GHc=SOrwJ6Tfijjf3817E7J8ZwTu5cP6nVEWvLQ@mail.gmail.com>

Hi,



On Mon, 19 Oct 2020 at 05:47, Wilfredo Sánchez Vega <wsanchez at wsanchez.net>
wrote:

>  Yeah, log in with GH has never worked for me. Always results in what
> claims to be a transient error.
>
>
They worked for me and I like them more than buildbot logs :)

Maybe we can try something to reduce the load for logs.
For example the run report into a file to contain only the failed + todo.
Use a separate step to show the content...have that step fail on errors.
When you click on a build, it should get you to the short summary.

Cheers

>   -wsv
>
> On Oct 13, 2020, at 9:40 PM, Glyph <glyph at twistedmatrix.com> wrote:
>
> ﻿
>
> On Oct 13, 2020, at 4:26 PM, Adi Roiban <adi at roiban.ro> wrote:
>
> Thanks. So you need to be logged with github account and not your normal
> Azure/Devops account.
> I guess most of us are connected to Azure using the Azure AD account.
>
> I was not expecting to see "Login via Github" on the MS login page.
>
> After the Github login, the github re-run works. It automatically re-runs
> all the failed tests...not only a single job.
>
>
> After reading this I tried for like 20 minutes to try and figure out what
> microsoft is doing when I "log in"; it seems it's figured out my azure
> account *is* my github account, I could have sworn I had 2 but now I only
> have 1.
>
> Not sure how one gets into this situation though, and the fact that large
> parts of the MS / live.com auth stack are just broken (right now the
> logout button doesn't work at all, I have to delete all my cookies) makes
> this tricky to debug.  So I'm giving up now :).
>
> -g
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


-- 
Adi Roiban
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201024/33828901/attachment.htm>

From glyph at twistedmatrix.com  Sat Oct 24 12:50:00 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Sat, 24 Oct 2020 11:50:00 -0700
Subject: [Twisted-Python] Re-run Azure tests
In-Reply-To: <CAFycZ9cG9H_GHc=SOrwJ6Tfijjf3817E7J8ZwTu5cP6nVEWvLQ@mail.gmail.com>
References: <290EE2A0-9813-4A1A-8711-59D5B2842F31@twistedmatrix.com>
 <631D808F-504D-497F-954E-3B8C616D729D@wsanchez.net>
 <CAFycZ9cG9H_GHc=SOrwJ6Tfijjf3817E7J8ZwTu5cP6nVEWvLQ@mail.gmail.com>
Message-ID: <43DA2569-66F3-4919-B498-91D144C1AFBE@twistedmatrix.com>

Also, since this is a common failure mode, the way to fix your login is to clear all cookies for:

microsoft.com <http://microsoft.com/>
live.com <http://live.com/>
microsoftonline.com <http://microsoftonline.com/>
s-microsoft.com <http://s-microsoft.com/>
skype.com <http://skype.com/>
visualstudio.com <http://visualstudio.com/>
bing.com <http://bing.com/>
azure.com <http://azure.com/>

(and any subdomains thereof, particularly login.live.com <http://login.live.com/> and account.microsoft.com <http://account.microsoft.com/>)

I have to do this about once a month these days, which is progress; I used to have to do it on every login.  After doing so (making sure no windows are open to a Microsoft property such as Azure Pipelines as I'm doing so) I can reliably get in.

To be clear this is not a joke about Microsoft's login process or the confusing mess of domains they use; this is literally what I have to do to get my login to work.

You probably *don't* need to clear them for Github since GH's own login is not broken in the same horrible way that MS's is.  At least, I haven't had to.

Happy logins, all,

-glyph

> On Oct 24, 2020, at 5:21 AM, Adi Roiban <adi at roiban.ro> wrote:
> 
> Hi,
> 
> 
> 
> On Mon, 19 Oct 2020 at 05:47, Wilfredo Sánchez Vega <wsanchez at wsanchez.net <mailto:wsanchez at wsanchez.net>> wrote:
>  Yeah, log in with GH has never worked for me. Always results in what claims to be a transient error. 
> 
> 
> They worked for me and I like them more than buildbot logs :)
> 
> Maybe we can try something to reduce the load for logs.
> For example the run report into a file to contain only the failed + todo.
> Use a separate step to show the content...have that step fail on errors.
> When you click on a build, it should get you to the short summary. 
>  
> Cheers
>   -wsv
> 
>> On Oct 13, 2020, at 9:40 PM, Glyph <glyph at twistedmatrix.com <mailto:glyph at twistedmatrix.com>> wrote:
>> 
>> ﻿
>> 
>>> On Oct 13, 2020, at 4:26 PM, Adi Roiban <adi at roiban.ro <mailto:adi at roiban.ro>> wrote:
>>> 
>>> Thanks. So you need to be logged with github account and not your normal Azure/Devops account.
>>> I guess most of us are connected to Azure using the Azure AD account.
>>> 
>>> I was not expecting to see "Login via Github" on the MS login page.
>>> 
>>> After the Github login, the github re-run works. It automatically re-runs all the failed tests...not only a single job.
>> 
>> After reading this I tried for like 20 minutes to try and figure out what microsoft is doing when I "log in"; it seems it's figured out my azure account is my github account, I could have sworn I had 2 but now I only have 1.
>> 
>> Not sure how one gets into this situation though, and the fact that large parts of the MS / live.com <http://live.com/> auth stack are just broken (right now the logout button doesn't work at all, I have to delete all my cookies) makes this tricky to debug.  So I'm giving up now :).
>> 
>> -g
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com <mailto:Twisted-Python at twistedmatrix.com>
>> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python <https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com <mailto:Twisted-Python at twistedmatrix.com>
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python <https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python>
> 
> 
> -- 
> Adi Roiban
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201024/b3772ad8/attachment.htm>

From trac at twistedmatrix.com  Sun Oct 25 00:05:17 2020
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 25 Oct 2020 06:05:17 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1603605917.42.8584720134170391528@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201025/7ac44781/attachment-0001.htm>

