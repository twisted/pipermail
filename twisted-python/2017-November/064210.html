<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Accepting/merging patches for unsupported platforms without CI
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Accepting/merging%20patches%20for%20unsupported%0A%20platforms%20without%20CI&In-Reply-To=%3CCAEeXt4O%2B7VTfv-hXVf1LGgPmj5%3DvnQK1K6RcyfRcvFkbdCTMyQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="064208.html">
   <LINK REL="Next"  HREF="064213.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Accepting/merging patches for unsupported platforms without CI</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Accepting/merging%20patches%20for%20unsupported%0A%20platforms%20without%20CI&In-Reply-To=%3CCAEeXt4O%2B7VTfv-hXVf1LGgPmj5%3DvnQK1K6RcyfRcvFkbdCTMyQ%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Accepting/merging patches for unsupported platforms without CI">exarkun at twistedmatrix.com
       </A><BR>
    <I>Sun Nov 26 17:48:29 MST 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="064208.html">[Twisted-Python] Accepting/merging patches for	unsupported	platforms without CI
</A></li>
        <LI>Next message (by thread): <A HREF="064213.html">[Twisted-Python] Accepting/merging patches for unsupported platforms without CI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64210">[ date ]</a>
              <a href="thread.html#64210">[ thread ]</a>
              <a href="subject.html#64210">[ subject ]</a>
              <a href="author.html#64210">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Nov 26, 2017 at 5:30 PM, Glyph &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Quite often—as I believe is the case for the patch you’re referring to
</I>&gt;<i> here—patches are adjusting behaviors which would be difficult to cleanly
</I>&gt;<i> integration-test on the platform in question anyway, and the appropriate
</I>&gt;<i> thing to do is to make some mock match the observed behavior of the
</I>&gt;<i> platform in question.
</I>

Just because there's enough misunderstanding about how to do this kind of
thing and the words that describe it, I wanted to point out that this isn't
really a &quot;mock&quot; - and it's certainly not something you would do with a
library with &quot;mock&quot; in its name.

For those who don't know (not Glyph), a mock is an object that somehow
records an exact sequence of operations (like &quot;my foo method was called
with bar&quot; or &quot;my baz attribute was accessed&quot;).  These tend to result in
very fragile tests because they operate at such a specific level.  Quite
often entirely legitimate implementation changes invalidate the
expectations of some mock and force corresponding test suite maintenance.

A better approach is to make sure the platform-specific interface being
tested has been reduced to its smallest possible scope and then create a
verified fake which implements that interface.  The verification is
performed by a test suite which can run against both implementations (the
fake and the real - with the real version only being tested in the
necessary environment).  All other related tests can use the verified fake
instead of the real implementation and will run on all platforms.

Jean-Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20171126/e850ad27/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="064208.html">[Twisted-Python] Accepting/merging patches for	unsupported	platforms without CI
</A></li>
	<LI>Next message (by thread): <A HREF="064213.html">[Twisted-Python] Accepting/merging patches for unsupported platforms without CI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64210">[ date ]</a>
              <a href="thread.html#64210">[ thread ]</a>
              <a href="subject.html#64210">[ subject ]</a>
              <a href="author.html#64210">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
