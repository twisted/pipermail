<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Accepting/merging patches for unsupported platforms without CI
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Accepting/merging%20patches%20for%20unsupported%0A%20platforms%20without%20CI&In-Reply-To=%3C8D36AC6B-9B59-473A-8595-594577CBAAA6%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="031750.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Accepting/merging patches for unsupported platforms without CI</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Accepting/merging%20patches%20for%20unsupported%0A%20platforms%20without%20CI&In-Reply-To=%3C8D36AC6B-9B59-473A-8595-594577CBAAA6%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Accepting/merging patches for unsupported platforms without CI">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon Nov 27 21:07:19 MST 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="031750.html">[Twisted-Python] Accepting/merging patches for unsupported platforms without CI
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31751">[ date ]</a>
              <a href="thread.html#31751">[ thread ]</a>
              <a href="subject.html#31751">[ subject ]</a>
              <a href="author.html#31751">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

&gt;<i> On Nov 27, 2017, at 6:45 AM, Adi Roiban &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> On 26 November 2017 at 22:30, Glyph &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> On Nov 26, 2017, at 10:23 AM, Adi Roiban &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> What is the procedure for accepting patches for platforms for which we
</I>&gt;&gt;&gt;<i> don't have a continuous testing system ?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> This is a follow up of the review from
</I>&gt;&gt;&gt;<i> <A HREF="https://twistedmatrix.com/trac/ticket/9323">https://twistedmatrix.com/trac/ticket/9323</A>
</I>&gt;<i> [snip]
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> To support a platform—i.e. to promise we will not break it in the future—we  have to have a builder capable of running Twisted on that platform.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> To accept a patch though, the important thing is to have test coverage. If the change in question is a platform-specific feature that there’s no way to test in a different environment, we would indeed need to block on the availability of a builder.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Quite often—as I believe is the case for the patch you’re referring to here—patches are adjusting behaviors which would be difficult to cleanly integration-test on the platform in question anyway, and the appropriate thing to do is to make some mock match the observed behavior of the platform in question.  In this case it would be nice if the reviewer could verify this, but if the patch submitter’s description of observed behavior is clear, and their test mock implements it correctly, I would say that we can give them the benefit of the doubt and accept such patches even if the reviewer doesn’t have such a platform available.  Assuming all the changed lines are covered adequately for our supported platforms’ behavior as well, of course, and we aren’t risking breaking them.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> How do you feel about this answer?
</I>&gt;<i> 
</I>&gt;<i> Thanks for your comment and I think that I know what a reviewer should
</I>&gt;<i> do for  <A HREF="https://twistedmatrix.com/trac/ticket/9323">https://twistedmatrix.com/trac/ticket/9323</A>
</I>&gt;<i> From the ticket description, we already have a test which fails on
</I>&gt;<i> Cygwin and the PR does not add any new tests.
</I>&gt;<i> So the options are:
</I>&gt;<i> 
</I>&gt;<i> A. Get a builder for cygwin and use the existing tests.
</I>&gt;<i> B. Write new unit/integration tests with a fake Cygwin system.
</I>&gt;<i> 
</I>&gt;<i> -----
</I>&gt;<i> 
</I>&gt;<i> I understand the high-level process, but I have questions regarding the details.
</I>&gt;<i> 
</I>&gt;<i> How can a reviewer (which does not have experience and access to an
</I>&gt;<i> unsupported platform) verify whether the fake/surrogate implementation
</I>&gt;<i> is correct?
</I>
At some level, I think it is OK to take the submitter's word for it.  The important thing about the code review is not like, courtroom-style adversarial disbelief, but rather, the idea that it is super easy to make mistakes while writing programs.  If the submitter clearly describes the same behavior in tests, in their implementation, in their ticket description and in their NEWS fragment, and the reviewer can verify that they're all consistent, then I don't think they need to be able to personally reproduce the behavior if it's on an obscure platform.

Ideally, as Jean-Paul suggests, the submitter would provide a verified fake &lt;<A HREF="https://thoughtstreams.io/glyph/test-patterns/5952/">https://thoughtstreams.io/glyph/test-patterns/5952/</A>&gt; implementation.  In practice they may just provide a well-documented fake, since verifying the real implementation may be impossible programmatically, or impractically difficult.  (However, a genuine mock, or a dummy, is definitely insufficient for testing.)

&gt;<i> That is without putting significant effort and reading the details
</I>&gt;<i> about the unsupported platform, and in this process becoming an expert
</I>&gt;<i> in that platform?
</I>
In this case, the subtle difference in pipe-handling behavior, which is shared at least in part with other platforms, should not require becoming a total expert in Cygwin's runtime.  If it does, we may in fact need to wait for a reviewer to come along who already has this expertise.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20171127/38fee221/attachment.html&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="031750.html">[Twisted-Python] Accepting/merging patches for unsupported platforms without CI
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31751">[ date ]</a>
              <a href="thread.html#31751">[ thread ]</a>
              <a href="subject.html#31751">[ subject ]</a>
              <a href="author.html#31751">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
