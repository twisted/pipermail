<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] multiple connectTCP bindaddress problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20multiple%20connectTCP%20bindaddress%20problem&In-Reply-To=%3C1099619156.418adb54e2c6c%40postoffice.tpg.com.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="041496.html">
   <LINK REL="Next"  HREF="041484.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] multiple connectTCP bindaddress problem</H1>
    <B>Chris Laws</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20multiple%20connectTCP%20bindaddress%20problem&In-Reply-To=%3C1099619156.418adb54e2c6c%40postoffice.tpg.com.au%3E"
       TITLE="[Twisted-Python] multiple connectTCP bindaddress problem">claws at tpg.com.au
       </A><BR>
    <I>Thu Nov  4 18:45:56 MST 2004</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="041496.html">[Twisted-Python] Server with several outgoing connections
</A></li>
        <LI>Next message (by thread): <A HREF="041484.html">[Twisted-Python] multiple connectTCP bindaddress problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41483">[ date ]</a>
              <a href="thread.html#41483">[ thread ]</a>
              <a href="subject.html#41483">[ subject ]</a>
              <a href="author.html#41483">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm in the process of building a twisted application which will be used to automate control
of processes running on remote machines. 
The basic architecture is a client to many server configuration.
1. many (~30), twisted based, network server applications running on different machines,
2. a client side, twisted based, application which will be used to control and monitor the servers.


This is a small component of a large project and as part of the project we have defined
port ranges which applications can use so as not to interfere with other project applications.
Therefore I need to remain within a certain port range.

The client application uses a twisted client factory to establish the conection handlers.
The machines I am running on have multiple interfaces so I am using the 'bindaddress'
argument in the reactor.connecTCP method to force the client side connection estalishment
to originate from a certain IP:port. I am calling connecTCP for each instance of a server which
I need to conect with. I pass in a different server address each time but leave the 'bindaddress'
the same.

My understanding is that this should create a valid TCP connection to each different server
IP:port address, all originating from the same client IP:Port. Maybe there is a fundamental flaw
in my understanding of TCP but I think I can have multiple remote addresses connected to the
same local IP:port address.

Anyway this seems to be where my problem exists because when I define the same 'bindaddress'
IP:Port tuple to each connectTCP call, I only seem to be able to connect to one remote server
from the client application.

To put this into more context I set up two servers, the first on 127.0.0.1:35000, the second on
192.168.1.2:36000. (The reason I'm not putting both connections on the same IP is that internal 
to the application I am tracking connections using the IP as the key in a dict, therefore I need
unique IP strings). Then I setup the client bindaddress to use say 127.0.0.1:37000. (This problem
does not seem to be related to the use of the 127... loopback address as I get the same result
when I set the client to use the externally visable 192... address).

If I don't specify the 'bindaddress' argument (Ie let the OS define the port etc) I can connect to
multiple servers. However this means I don't conform to my port range usage requirements.
I'm sure I'm missing something simple here.

Any helpful ideas would be greatly appreciated.

chris


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="041496.html">[Twisted-Python] Server with several outgoing connections
</A></li>
	<LI>Next message (by thread): <A HREF="041484.html">[Twisted-Python] multiple connectTCP bindaddress problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41483">[ date ]</a>
              <a href="thread.html#41483">[ thread ]</a>
              <a href="subject.html#41483">[ subject ]</a>
              <a href="author.html#41483">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
