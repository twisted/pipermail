<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] PyMedia &amp; Tk - based mp3 sound recorder
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20PyMedia%20%26%20Tk%20-%20based%20mp3%20sound%20recorder&In-Reply-To=%3Ccofd1i%24k30%241%40sea.gmane.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="041641.html">
   <LINK REL="Next"  HREF="041645.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] PyMedia &amp; Tk - based mp3 sound recorder</H1>
    <B>Petri Savolainen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20PyMedia%20%26%20Tk%20-%20based%20mp3%20sound%20recorder&In-Reply-To=%3Ccofd1i%24k30%241%40sea.gmane.org%3E"
       TITLE="[Twisted-Python] PyMedia &amp; Tk - based mp3 sound recorder">petri.savolainen at iki.fi
       </A><BR>
    <I>Mon Nov 29 07:55:42 MST 2004</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="041641.html">[Twisted-Python] Multiple delimiters in linereceiver
</A></li>
        <LI>Next message (by thread): <A HREF="041645.html">[Twisted-Python] PyMedia &amp; Tk - based mp3 sound recorder
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41644">[ date ]</a>
              <a href="thread.html#41644">[ thread ]</a>
              <a href="subject.html#41644">[ subject ]</a>
              <a href="author.html#41644">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've tried to write a simple sound recorder for python. Basically, it 
just reads sound from mic or line in, and encodes it to mp3 on the fly. 
See <A HREF="http://pymedia.org/tut/src/voice_recorder.py.html">http://pymedia.org/tut/src/voice_recorder.py.html</A> for a simple 
example I've taken the pymedia recorder code from. Works nicely - but no 
GUI etc. of course.

I've added a very simple Tk-base GUI using twisted, using 
task.LoopingCall to drive the recorder loop that reads chunks data from 
sound device and encodes them.

The problem is that the sound is now garbled - it sounds as if the loop 
is not fast enough or it's dropping some sound data. Apart from twisted 
and Tk integration, the code should be essentially the same as the 
original example that works fine.

I''ve tried with different task looping frequencies and even added Psyco 
optiomization to the code, and all this has made but tiny difference 
-and my PC is an AMD 2400+ with plenty of memory so I would think speed 
is not the issue here; the encoding preferences are mono, 22050Hz and 
64kbit/s.

The source code (about 120 lines in all) is attached - any advice or 
improvement suggestions would be greatly appreciated.

Thanks,

  Petri
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: recorderGUI.py
URL: &lt;/pipermail/twisted-python/attachments/20041129/9900ba62/attachment.ksh&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="041641.html">[Twisted-Python] Multiple delimiters in linereceiver
</A></li>
	<LI>Next message (by thread): <A HREF="041645.html">[Twisted-Python] PyMedia &amp; Tk - based mp3 sound recorder
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41644">[ date ]</a>
              <a href="thread.html#41644">[ thread ]</a>
              <a href="subject.html#41644">[ subject ]</a>
              <a href="author.html#41644">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
