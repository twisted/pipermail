<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Reactors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Reactors&In-Reply-To=09F44A85-3940-11D9-AAFD-000A9567635C%40redivi.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009089.html">
   <LINK REL="Next"  HREF="009094.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Reactors</H1>
    <B>James Y Knight</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Reactors&In-Reply-To=09F44A85-3940-11D9-AAFD-000A9567635C%40redivi.com"
       TITLE="[Twisted-Python] Reactors">foom at fuhm.net
       </A><BR>
    <I>Thu Nov 18 14:55:42 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="009089.html">[Twisted-Python] Reactors
</A></li>
        <LI>Next message: <A HREF="009094.html">[Twisted-Python] Reactors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9093">[ date ]</a>
              <a href="thread.html#9093">[ thread ]</a>
              <a href="subject.html#9093">[ subject ]</a>
              <a href="author.html#9093">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Nov 18, 2004, at 3:58 AM, Bob Ippolito wrote:
&gt;<i> The problem is that the classes that use file descriptors make certain 
</I>&gt;<i> assumptions that are only true for the default (and probably poll) 
</I>&gt;<i> reactors.  Particularly, from memory, they don't have to tell the 
</I>&gt;<i> reactor when they want to lose connection, and they do something very 
</I>&gt;<i> crazy in order to determine when a TCP connection is established.  In 
</I>&gt;<i> the case of cfreactor, a wrapper object needs to live on top of the 
</I>&gt;<i> sockets so that the reactor will wake up on activity, and without 
</I>&gt;<i> proper notifications these objects can't be disposed of.
</I>
Okay, I'm still unsure why this is necessary. Right now, the reactors 
just get told when it should send notifications for a socket being 
readable or writable. When a socket is closed, the reactor is told 
stopReading/stopWriting. For all other reactors, that causes all 
reactorstate associated with the socket to be disposed of. They just 
know the user no longer wants to see notifications, for whatever 
reason. That the reason is the socket closed doesn't matter. Why does 
the CF reactor have to care? And, if it _really does_, would it not be 
good enough to use a weakref to the Selectable with a callback?

QTReactor seems to have a similar architecture, with objects that live 
on top of sockets, but it doesn't have the same crazy hacks. Of course, 
since it's also failing tests, I don't know if it's necessarily a good 
thing to point at. ;)

James



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009089.html">[Twisted-Python] Reactors
</A></li>
	<LI>Next message: <A HREF="009094.html">[Twisted-Python] Reactors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9093">[ date ]</a>
              <a href="thread.html#9093">[ thread ]</a>
              <a href="subject.html#9093">[ subject ]</a>
              <a href="author.html#9093">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
