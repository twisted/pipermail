<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] internet/tcp.py problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20internet/tcp.py%20problem&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001277.html">
   <LINK REL="Next"  HREF="001281.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] internet/tcp.py problem</H1>
    <B>Manuel Estrada Sainz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20internet/tcp.py%20problem&In-Reply-To="
       TITLE="[Twisted-Python] internet/tcp.py problem">ranty-bulk at ranty.ddts.net
       </A><BR>
    <I>Sat Jul  6 21:03:36 EDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="001277.html">[Twisted-Python] FTPClient problem on connection failed
</A></li>
        <LI>Next message: <A HREF="001281.html">[Twisted-Python] internet/tcp.py problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1278">[ date ]</a>
              <a href="thread.html#1278">[ thread ]</a>
              <a href="subject.html#1278">[ subject ]</a>
              <a href="author.html#1278">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> Hello,

 I am in vacation, and should not be hacking on anything, but some how I
 keep having trouble with twisted :)

 tcp.Client calls self.failIfNotConnected in two ways, via
 reactor.callLater with a timeout and in resolveAddress when it can't
 resolve the address.

 The problem is, that when resolveAddress can't resolve the address, it
 calls self.failIfNotConnected and later when the timeout is reached and
 self.failIfNotConnected called again, the socket is still not
 connected, so my connectionFailed method gets called twice which I
 don't think is right.

 I see two fixes for this:

  - Keep the return value of callLater and cancel it on
    self.failIfNotConnected.
  - Use some flag variable so self.failIfNotConnected knows that it
    already called connectionFailed and it doesn't do it again on the
    timeout.

 Thanks

 	ranty
-- 
--- Manuel Estrada Sainz &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">ranty at debian.org</A>&gt;
                         &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">ranty at bigfoot.com</A>&gt;
			 &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">ranty at users.sourceforge.net</A>&gt;
------------------------ &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">manuel.estrada at hispalinux.es</A>&gt; -------------------
God grant us the serenity to accept the things we cannot change, courage to
change the things we can, and wisdom to know the difference.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001277.html">[Twisted-Python] FTPClient problem on connection failed
</A></li>
	<LI>Next message: <A HREF="001281.html">[Twisted-Python] internet/tcp.py problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1278">[ date ]</a>
              <a href="thread.html#1278">[ thread ]</a>
              <a href="subject.html#1278">[ subject ]</a>
              <a href="author.html#1278">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
