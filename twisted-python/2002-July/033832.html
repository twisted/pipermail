<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] DeferredList and errback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20DeferredList%20and%20errback&In-Reply-To=%3C20020713165549.GA2542%40frobozz.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="033831.html">
   <LINK REL="Next"  HREF="033833.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] DeferredList and errback</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20DeferredList%20and%20errback&In-Reply-To=%3C20020713165549.GA2542%40frobozz.local%3E"
       TITLE="[Twisted-Python] DeferredList and errback">andrew-twisted at puzzling.org
       </A><BR>
    <I>Sat Jul 13 10:55:49 MDT 2002</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="033831.html">[Twisted-Python] Adding Mime types using coil
</A></li>
        <LI>Next message (by thread): <A HREF="033833.html">[Twisted-Python] DeferredList and errback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33832">[ date ]</a>
              <a href="thread.html#33832">[ thread ]</a>
              <a href="subject.html#33832">[ subject ]</a>
              <a href="author.html#33832">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>DeferredList is handy, but it isn't quite what I need for FTPClient.

Here's my use-case:  A file is deemed to be downloaded by FTPClient when
both the 226 transfer complete message is received on the control
connection, *and* the data connection is closed.

DeferredList takes care of this nicely, so long as it works.  In the case
where the control connection immediately returns an error (e.g. file not
found), one errback will be called and the other Deferred will never be
called either way, effectively hanging the client.  (I've got a testcase for
this, but I haven't checked it in yet because having FTP tests passing is a
novelty that I don't want to take away from people ;)

So ideally I want DeferredList (or something like DeferredList) to wait for
all callbacks, as it currently does, but fire its errback as soon as any of
its Deferreds fires an errback.  Later errbacks and callbacks would be
ignored.

I realise I'm probably too late to get this into 0.19.0, but I'm wondering
what the right way to provide this is:
  - new class in defer.py (what would it be called?),
  - change the behaviour of DeferredList to do what I want, or
  - add a flag to the current DeferredList so it can do either behaviour?

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="033831.html">[Twisted-Python] Adding Mime types using coil
</A></li>
	<LI>Next message (by thread): <A HREF="033833.html">[Twisted-Python] DeferredList and errback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33832">[ date ]</a>
              <a href="thread.html#33832">[ thread ]</a>
              <a href="subject.html#33832">[ subject ]</a>
              <a href="author.html#33832">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
