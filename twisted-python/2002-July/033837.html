<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] DeferredList and errback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20DeferredList%20and%20errback&In-Reply-To=%3C20020714044118.GB651%40frobozz.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="033833.html">
   <LINK REL="Next"  HREF="033838.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] DeferredList and errback</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20DeferredList%20and%20errback&In-Reply-To=%3C20020714044118.GB651%40frobozz.local%3E"
       TITLE="[Twisted-Python] DeferredList and errback">andrew-twisted at puzzling.org
       </A><BR>
    <I>Sat Jul 13 22:41:18 MDT 2002</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="033833.html">[Twisted-Python] DeferredList and errback
</A></li>
        <LI>Next message (by thread): <A HREF="033838.html">[Twisted-Python] DeferredList and errback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33837">[ date ]</a>
              <a href="thread.html#33837">[ thread ]</a>
              <a href="subject.html#33837">[ subject ]</a>
              <a href="author.html#33837">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, Jul 13, 2002 at 08:18:38PM -0500, Glyph Lefkowitz wrote:
&gt;<i> 
</I>&gt;<i> On Sun, 14 Jul 2002 02:55:49 +1000, Andrew Bennetts &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">andrew-twisted at puzzling.org</A>&gt; wrote:
</I>&gt;<i> &gt; DeferredList takes care of this nicely, so long as it works.
</I>&gt;<i> 
</I>&gt;<i> Rather than adding a whole new class to defer.py, maybe you could make the
</I>&gt;<i> other deferred's errback get called by the first one?
</I>
That's what I'm currently attempting to do, and it's messy.  You really want
to make sure that adding the errback to call the other Deferred's errbacks
doesn't interfere in the normal chain of processing for that errback, so you
need to muck around with gunk like &quot;lambda e: otherDeferred.errback(e) or
e&quot;.  Worse than that, with 3 or more Deferreds ordering becomes hell... if
you have Deferreds A, B and C, then A should call B &amp; C, B should call A &amp;
C, and C should call A &amp; B.  I don't know of a clean way to arrange that.

Plus, it's what I'm currently trying to do, and it doesn't work.  Doubtless
this is a bug in how I'm doing it, but that's just another argument for
having a class to do it for me.

&gt;<i> &gt; I realise I'm probably too late to get this into 0.19.0, but I'm wondering
</I>&gt;<i> &gt; what the right way to provide this is:
</I>&gt;<i> &gt;   - new class in defer.py (what would it be called?),
</I>&gt;<i> 
</I>&gt;<i> &quot;DeferOneOrMany&quot;, maybe?  Tough thing to name.  This is probably the right
</I>&gt;<i> approach, though; consider that there are cases where one error might be all
</I>&gt;<i> you need, or one success.  In those cases you don't want to get a list as your
</I>&gt;<i> callback, you just want to get the one value.
</I>
Well, I *definitely* want all callbacks, or just one errback.  I can imagine
that only one either could be useful too, though.  Taking this approach,
suddenly we have two new classes to name, both similar and yet and different
to DeferredList: all callbacks or one errback, and one callback or one
errback, vs. the current all callbacks and all errbacks.

&gt;<i> &gt;   - change the behaviour of DeferredList to do what I want, or
</I>&gt;<i> 
</I>&gt;<i> Definitely not!!  There are plenty of cases where you need _all_ the operations
</I>&gt;<i> to complete regardless of their status of completion.
</I>
Ok.  I wasn't sure if this aspect of its functionality was in use, though I
guessed it probably was.

&gt;<i> &gt;   - add a flag to the current DeferredList so it can do either behaviour?
</I>&gt;<i> 
</I>&gt;<i> As I said above, the behavior is really different; the types of the signatures
</I>&gt;<i> for your callbacks will be different.  That says &quot;different class&quot; to me.
</I>
I'm not so sure.

Would it be so bad to be able to do this:
    dl = DeferredList([d1, d2, ...], fireOnOneCallback=1, fireOnOneErrback=1)

This way we can get all four variations for free, without having to think of
distinct and non-confusing names for them.  Of course, &quot;fireOnOneCallback&quot;
is a pretty ugly name for a keyword argument.

This approach, despite the way it can change the signature of callback
and/or errback, seems more general to me.  Or is the way you envisage that
&quot;DeferOneOrMany&quot; would behave?

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="033833.html">[Twisted-Python] DeferredList and errback
</A></li>
	<LI>Next message (by thread): <A HREF="033838.html">[Twisted-Python] DeferredList and errback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33837">[ date ]</a>
              <a href="thread.html#33837">[ thread ]</a>
              <a href="subject.html#33837">[ subject ]</a>
              <a href="author.html#33837">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
