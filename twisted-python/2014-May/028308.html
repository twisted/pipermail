<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Some comments regarding #5190 - ``RFC 6125 (&quot;Service Identity&quot;) implementation&#180;&#180;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%0A%20%3D%3Fiso-8859-1%3Fq%3FSome_comments_regarding_%3D235190_-%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3F_%3D60%3D60RFC_6125_%3D28%3D22Service_Identity%3D22%3D29_implementatio%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Fn%3DB4%3DB4%3F%3D&In-Reply-To=%3C08612AA3-93F1-4ACA-A4F4-CCE1F5BF1CD2%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028307.html">
   <LINK REL="Next"  HREF="028291.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Some comments regarding #5190 - ``RFC 6125 (&quot;Service Identity&quot;) implementation&#180;&#180;</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%0A%20%3D%3Fiso-8859-1%3Fq%3FSome_comments_regarding_%3D235190_-%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3F_%3D60%3D60RFC_6125_%3D28%3D22Service_Identity%3D22%3D29_implementatio%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Fn%3DB4%3DB4%3F%3D&In-Reply-To=%3C08612AA3-93F1-4ACA-A4F4-CCE1F5BF1CD2%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Some comments regarding #5190 - ``RFC 6125 (&quot;Service Identity&quot;) implementation&#180;&#180;">glyph at twistedmatrix.com
       </A><BR>
    <I>Sat May  3 13:49:15 MDT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="028307.html">[Twisted-Python] Some comments regarding #5190 - ``RFC 6125 (&quot;Service Identity&quot;) implementation&#180;&#180;
</A></li>
        <LI>Next message: <A HREF="028291.html">[Twisted-Python] read the docs versions (was Re: adding endpoint	plugins)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28308">[ date ]</a>
              <a href="thread.html#28308">[ thread ]</a>
              <a href="subject.html#28308">[ subject ]</a>
              <a href="author.html#28308">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On May 3, 2014, at 5:20 AM, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A> wrote:

&gt;<i> On 1 May, 07:23 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A> wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On Apr 30, 2014, at 5:21 AM, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A> wrote:
</I>&gt;&gt;&gt;<i> I've just noticed that the changeset for #5190 included some untested code.  Specifically, there are no tests for the code which detects missing dependencies and emits warnings about them.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> My bad.  Well, technically hawkowl's bad; hawkowl is a committer and did the review and therefore has all the criminal liability in this case, but as the author who wrote the code I bear some responsibility, at least in some abstract, hypothetical sense ;-).
</I>&gt;<i> 
</I>&gt;<i> My hope is that by drawing attention to examples of this kind of mistake will help us avoid making the mistake in the future.  Considering what my email prompted you to write, I think it may work. :)
</I>
Mission accomplished, I guess :-).  Please continue doing so.  I wish that every commit to trunk would prompt a thread on this list, really.  Despite the epically ridiculous amount of email I get, this list is still a bit too low-traffic for my taste.

&gt;&gt;<i> Thanks for working on the fix; it looks like the relevant ticket is &lt;<A HREF="https://twistedmatrix.com/trac/ticket/7097">https://twistedmatrix.com/trac/ticket/7097</A>&gt;.  I'll try to review that as soon as it's ready; let me know.
</I>&gt;<i> 
</I>&gt;<i> No problem.  I probably should have started my previous email with thanks to you and hawkowl for working on that feature.  It is *really* good to have service identity checking support in Twisted.
</I>
Thanks for saying so.

&gt;&gt;<i> The problem with code like this is that, in some configurations, it is in fact reported as covered by coverage.py.  It requires manual examination to get the intersection of a diff and a coverage report, and even when you do, we still have too many places where it's &quot;okay&quot; to skip coverage.
</I>&gt;<i> 
</I>&gt;<i> This is true - but I'm not sure the code in this case is particularly special.  It's nearly always possible to write code and tests such that coverage.py says your code is covered but without actually having any meaningful test coverage of the implementation.  After all, coverage.py only knows that a line ran or didn't.
</I>&gt;<i> 
</I>&gt;<i> The problem of platform- or environment-specific code requiring multiple branches which can never always all run is an extra challenge but I think a widely applicable solution is to not do that.  To add to your comments below, if there is platform- or environment-specific code then parameterize it on the environment and write tests for all of the cases.
</I>
I think what really makes this an extra challenge is that we (well, all Python programmers, really) have a smattering of different idioms for cases like this and we don't have a succinct way of expressing the optional dependency both in the import, the implementation, and the tests.

&gt;&gt;<i> So until someone has a month to spend on an all-singing all-dancing combined ratcheting coverage report for all the builders and a fantastic visualization for its output which highlights every possible coverage issue, here are some specific suggestions which might avoid some parts of this class of error:
</I>&gt;<i> 
</I>&gt;<i> I don't think we even have a plan for a tool that will report whether a change introduces code that isn't *really* tested (contrast &quot;tested&quot; with &quot;executed&quot;).
</I>
Indeed not.  So we need some ideas in the meanwhile :-).

&gt;<i> I think this may be an area where we do actually need to rely on people doing a good job. Perhaps to counter balance that we need to eliminate more of the other crap involved in the development process?  For example, if reviewers never had to spend any time thinking about whether the whitespace in a change was correct, they would have that much more brain power to apply to assessing the quality of the test suite.
</I>
Speaking of thanking people for things, we should also thank richard wall, david reid, you, and hawkowl for maintenance of twistedchecker.  It's a lot better than it was :).

&gt;<i> Thanks!  These are great suggestions.  Can we record them in a way that lets all Twisted contributors learn from this case (instead of only the people reading this thread) - but without adding to the already unreasonably large quantity of text new contributors are ostensibly already responsible for reading?
</I>
Those sound like diametrically opposed ideas :-).

&gt;<i> How's the unified Contributing-to-Twisted documentation effort coming?
</I>
Yeah, how is that coming?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20140503/f3abe6a0/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20140503/f3abe6a0/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028307.html">[Twisted-Python] Some comments regarding #5190 - ``RFC 6125 (&quot;Service Identity&quot;) implementation&#180;&#180;
</A></li>
	<LI>Next message: <A HREF="028291.html">[Twisted-Python] read the docs versions (was Re: adding endpoint	plugins)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28308">[ date ]</a>
              <a href="thread.html#28308">[ thread ]</a>
              <a href="subject.html#28308">[ subject ]</a>
              <a href="author.html#28308">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
