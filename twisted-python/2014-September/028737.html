<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Python3: should paths be bytes or str?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Python3%3A%20should%20paths%20be%20bytes%20or%20str%3F&In-Reply-To=%3C1726686.JYd9teDfKp%40i5%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028735.html">
   <LINK REL="Next"  HREF="028738.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Python3: should paths be bytes or str?</H1>
    <B>Wolfgang Rohdewald</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Python3%3A%20should%20paths%20be%20bytes%20or%20str%3F&In-Reply-To=%3C1726686.JYd9teDfKp%40i5%3E"
       TITLE="[Twisted-Python] Python3: should paths be bytes or str?">wolfgang.kde at rohdewald.de
       </A><BR>
    <I>Mon Sep  8 03:20:05 MDT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="028735.html">[Twisted-Python] Python3: should paths be bytes or str?
</A></li>
        <LI>Next message: <A HREF="028738.html">[Twisted-Python] Python3: should paths be bytes or str?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28737">[ date ]</a>
              <a href="thread.html#28737">[ thread ]</a>
              <a href="subject.html#28737">[ subject ]</a>
              <a href="author.html#28737">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Am Montag, 8. September 2014, 02:14:10 schrieb <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>:
&gt;<i> On 01:26 am, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">wolfgang.kde at rohdewald.de</A> wrote:
</I>&gt;<i> &gt;The porting guide says
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;No byte paths in sys.path.
</I>&gt;<i> 
</I>&gt;<i> What porting guide is that?
</I>
<A HREF="https://twistedmatrix.com/trac/wiki/Plan/Python3">https://twistedmatrix.com/trac/wiki/Plan/Python3</A>

see the reviewer check list

&gt;<i> it's also not clear it's possible for Twisted to try to make any other 
</I>&gt;<i> choice (at some point Twisted has to interoperate with the path-related 
</I>&gt;<i> APIs in Python itself - `sys.path`, for example).
</I>
Am Montag, 8. September 2014, 02:14:10 schrieb <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>:
&gt;<i> If paths are being represented using unicode somewhere and you want to 
</I>&gt;<i> use them with FilePath then you have to encode them (or you have to add 
</I>&gt;<i> unicode path support to FilePath and let FilePath encode them).
</I>
I always thought module names must be ascii-only but now found PEP3131

So we should do the same for twisted.python.modules as in those other places
grepped below.
And add that assert isinstance(path, bytes) for PY3 in FilePath.

And maybe this should go into the above check list? I have no edit rights
in the Wiki.

BUT &#8211; I will stop trying to port python/modules.py, the usage of the 
same strings for both module names and file paths is too much interwoven,
I do not want to touch that.

My feeling is that file names should all be unicode, converting them only
where needed. But then I am not an expert about this.

Next problem - PEP3131. See separate mail.

grep -r __file__  | grep encode
web/test/test_webclient.py:serverPEM = FilePath(test.__file__.encode(&quot;utf-8&quot;)).sibling(b'server.pem')
test/ssl_helpers.py:certPath = nativeString(FilePath(__file__.encode(&quot;utf-8&quot;)
test/test_setup.py:if not FilePath(twisted.__file__.encode('utf-8')).sibling(b'topfiles').child(b'setup.py').exists():
python/test/test_deprecate.py:        self.assertEqual(FilePath(module.__file__.encode(&quot;utf-8&quot;)),
internet/test/test_gireactor.py:        path = FilePath(__file__.encode(&quot;utf-8&quot;)).sibling(


-- 
Wolfgang

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028735.html">[Twisted-Python] Python3: should paths be bytes or str?
</A></li>
	<LI>Next message: <A HREF="028738.html">[Twisted-Python] Python3: should paths be bytes or str?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28737">[ date ]</a>
              <a href="thread.html#28737">[ thread ]</a>
              <a href="subject.html#28737">[ subject ]</a>
              <a href="author.html#28737">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
