<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] INCOMPATIBLE CHANGE: twisted.python.threadpool
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20INCOMPATIBLE%20CHANGE%3A%20twisted.python.threadpool&In-Reply-To=%3C02CD8913-6E7C-4D53-B3DE-91A8AED4B460%40weasyl.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="061261.html">
   <LINK REL="Next"  HREF="061265.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] INCOMPATIBLE CHANGE: twisted.python.threadpool</H1>
    <B>weykent</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20INCOMPATIBLE%20CHANGE%3A%20twisted.python.threadpool&In-Reply-To=%3C02CD8913-6E7C-4D53-B3DE-91A8AED4B460%40weasyl.com%3E"
       TITLE="[Twisted-Python] INCOMPATIBLE CHANGE: twisted.python.threadpool">weykent at weasyl.com
       </A><BR>
    <I>Fri Sep 26 02:12:53 MDT 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="061261.html">[Twisted-Python] INCOMPATIBLE CHANGE: twisted.python.threadpool
</A></li>
        <LI>Next message (by thread): <A HREF="061265.html">[Twisted-Python] INCOMPATIBLE CHANGE: twisted.python.threadpool
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61264">[ date ]</a>
              <a href="thread.html#61264">[ thread ]</a>
              <a href="subject.html#61264">[ subject ]</a>
              <a href="author.html#61264">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sep 26, 2014, at 12:43 AM, Glyph &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; wrote:

&gt;<i> How about this: would you mind if ThreadPool were modified to still populate these attributes for monitoring and debugging purposes, but completely stopped honoring any destructive operations on them?  In the case of &quot;pool.q&quot;, there is no single Queue responsible for the whole pool, so I would like to make &quot;put&quot;, &quot;get&quot;, and &quot;join&quot; actually raise exceptions; in the case of &quot;waiters&quot; and &quot;working&quot; I guess I could fish out some actual Thread objects, that just involves a little bit of sad abstraction violation internal to the twisted.threads.Team implementation.
</I>
Having objects with only nondestructive methods would be fine for me. I don’t even care about getting Thread objects out, and I certainly hope nobody else cares about getting Thread objects out either.

&gt;<i> My inclination would be to expand the thread pool to accommodate these usages, but still deprecate these attributes in the next version; but add a better &quot;statistics&quot; method that returned an object with &quot;active&quot;, &quot;pending&quot;, and &quot;idle&quot; attributes (all integers).
</I>
This sounds fantastic. I’ll graph whatever the statistics method emits, so feel free to include other useful or interesting metrics as well. (Though, I’m not sure what else there is that’s easy to keep track of and useful.)

&gt;<i> So would that work for you?
</I>
Yes, absolutely. 

&gt;<i> Touching private (underscore-prefixed) implementation details is explicitly not supported - if you did it that way, you're on your own :-).  And, as the end-user in this discussion, you win the argument by default.  (You can see how I feel about supporting users here: &lt;<A HREF="https://twitter.com/mjg59/status/514670470260465664">https://twitter.com/mjg59/status/514670470260465664</A>&gt;)  Plus, if we're going to work on the thread-pool and have newer, better interfaces, WSGIResource's implementation is likely to change.
</I>
I haven’t touched private implementation details of WSGIResource, nor was I planning to. I’ve already had some code (in another project) break across versions of twisted because of that, and I don’t want it to happen again.

&gt;<i> Thanks a bunch for helping us improve Twisted,
</I>
Thank you for taking the time to write up your original post and this reply!
~weykent



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="061261.html">[Twisted-Python] INCOMPATIBLE CHANGE: twisted.python.threadpool
</A></li>
	<LI>Next message (by thread): <A HREF="061265.html">[Twisted-Python] INCOMPATIBLE CHANGE: twisted.python.threadpool
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61264">[ date ]</a>
              <a href="thread.html#61264">[ thread ]</a>
              <a href="subject.html#61264">[ subject ]</a>
              <a href="author.html#61264">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
