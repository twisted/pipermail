<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] On testing things wrapping other things
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20On%20testing%20things%20wrapping%20other%20things&In-Reply-To=%3CC602CE5C-1D08-4D30-AAB5-0A0FB4414CB4%40weasyl.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028780.html">
   <LINK REL="Next"  HREF="028782.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] On testing things wrapping other things</H1>
    <B>weykent</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20On%20testing%20things%20wrapping%20other%20things&In-Reply-To=%3CC602CE5C-1D08-4D30-AAB5-0A0FB4414CB4%40weasyl.com%3E"
       TITLE="[Twisted-Python] On testing things wrapping other things">weykent at weasyl.com
       </A><BR>
    <I>Sun Sep 21 11:52:12 MDT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="028780.html">[Twisted-Python] On testing things wrapping other things
</A></li>
        <LI>Next message: <A HREF="028782.html">[Twisted-Python] On testing things wrapping other things
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28781">[ date ]</a>
              <a href="thread.html#28781">[ thread ]</a>
              <a href="subject.html#28781">[ subject ]</a>
              <a href="author.html#28781">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sep 21, 2014, at 10:36 AM, Glyph &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; wrote:

&gt;<i> If anything I'd say that the problem with this code is that it's not a public, documented interface. The clients of this library might want to test it as well :).
</I>
Ah! You are referring to both _wrap and _issueRequest here, right? That makes sense, and it&#8217;s easy to make those documented public interfaces.

&gt;<i> If you're going to check the bytes in a StringTransport, that means you need an implementation of the other end of the protocol as well.  If you're just asserting about the exact bytes, then that's really brittle and will break in response to lots of incidental changes.
</I>&gt;<i> 
</I>&gt;<i> You can use this as a part of a higher-level testing strategy, like so:
</I>&gt;<i> 
</I>&gt;<i> &lt;<A HREF="https://github.com/rackerlabs/mimic/blob/master/mimic/test/helpers.py">https://github.com/rackerlabs/mimic/blob/master/mimic/test/helpers.py</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> but in this case the unit test code doesn't see the response to its requests until it's been parsed into a sensible data structure, and assertions are about that.
</I>
Okay, this makes sense. Of course, Twisted doesn&#8217;t come with an implementation of a memcache server, and I&#8217;d rather not implement one myself for the purpose of testing. I think I&#8217;ll stick with my latest approach, then.

Would you employ the same approach for testing non-wrappers as well? That is, if you were testing the client implementation of some wire protocol, would you still write parsers for the server implementation of the protocol to make assertions about the sent bytes? As far as I can tell, this is not what, say, the existing memcache protocol tests do.


</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028780.html">[Twisted-Python] On testing things wrapping other things
</A></li>
	<LI>Next message: <A HREF="028782.html">[Twisted-Python] On testing things wrapping other things
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28781">[ date ]</a>
              <a href="thread.html#28781">[ thread ]</a>
              <a href="subject.html#28781">[ subject ]</a>
              <a href="author.html#28781">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
