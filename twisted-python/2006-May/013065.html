<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] No-op TimerService on Windows?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20No-op%20TimerService%20on%20Windows%3F&In-Reply-To=e012d6b50605040839q2ffb9d22sa05d22268e8f304e%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013063.html">
   <LINK REL="Next"  HREF="013066.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] No-op TimerService on Windows?</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20No-op%20TimerService%20on%20Windows%3F&In-Reply-To=e012d6b50605040839q2ffb9d22sa05d22268e8f304e%40mail.gmail.com"
       TITLE="[Twisted-Python] No-op TimerService on Windows?">andrew-twisted at puzzling.org
       </A><BR>
    <I>Thu May  4 21:51:47 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="013063.html">[Twisted-Python] No-op TimerService on Windows?
</A></li>
        <LI>Next message: <A HREF="013066.html">[Twisted-Python] protocol factory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13065">[ date ]</a>
              <a href="thread.html#13065">[ thread ]</a>
              <a href="subject.html#13065">[ subject ]</a>
              <a href="author.html#13065">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, May 04, 2006 at 05:39:22PM +0200, Eric Faurot wrote:
&gt;<i> On 5/4/06, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at divmod.com</A> &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at divmod.com</A>&gt; wrote:
</I>&gt;<i> 
</I>[...]
&gt;<i> &gt;
</I>&gt;<i> &gt;There should be a comment or something to this effect, but:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;On Windows, the &quot;signal&quot; handling that Control-c triggers doesn't actually 
</I>&gt;<i> &gt;interrupt select().  That timer is there to keep the timeout low so that 
</I>&gt;<i> &gt;the server responds in a timely fashion when the user hits Control-c on 
</I>&gt;<i> &gt;the console, even if nothing else is happening.
</I>&gt;<i> 
</I>&gt;<i> Ok, but as far as I can see, it is redundant with way select is
</I>&gt;<i> wrapped on win32 (in selectreactor). BTW, I am not windows-savvy, but
</I>&gt;<i> are the arguments to select (r,w,w) really correct? not (r,w,e)?
</I>
You're right, this does seem to take care of that problem.  I'm not sure what
benefit the extra code to do this in twistw adds.

As far as (r,w,w) goes, yes, it is correct -- again, there ought to be a comment
about this.  select on windows is subtly incompatible with select on POSIX, and
uses the third fd set to check for connection failures and the like, whereas on
POSIX this is just signalled on the first or second fd set.  I forget the
precise details, but luckily Itamar has recorded them here: 

    <A HREF="http://itamarst.org/writings/win32sockets.html">http://itamarst.org/writings/win32sockets.html</A>

So our win32select wrapper passes the write list as the exception list too, then
returns (r, w + e, []) -- so the wrapper behaves more like POSIX, as the
SelectReactor expects.

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013063.html">[Twisted-Python] No-op TimerService on Windows?
</A></li>
	<LI>Next message: <A HREF="013066.html">[Twisted-Python] protocol factory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13065">[ date ]</a>
              <a href="thread.html#13065">[ thread ]</a>
              <a href="subject.html#13065">[ subject ]</a>
              <a href="author.html#13065">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
