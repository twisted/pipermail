<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] deferToThread - supported alternative to the	(deprecated) setTimeout method
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20deferToThread%20-%20supported%20alternative%20to%20the%0A%09%28deprecated%29%20setTimeout%20method&In-Reply-To=bms672p6vgja66fon36m1i44cc7pfif1nq%404ax.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013221.html">
   <LINK REL="Next"  HREF="013223.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] deferToThread - supported alternative to the	(deprecated) setTimeout method</H1>
    <B>L. Daniel Burr</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20deferToThread%20-%20supported%20alternative%20to%20the%0A%09%28deprecated%29%20setTimeout%20method&In-Reply-To=bms672p6vgja66fon36m1i44cc7pfif1nq%404ax.com"
       TITLE="[Twisted-Python] deferToThread - supported alternative to the	(deprecated) setTimeout method">ldanielburr at mac.com
       </A><BR>
    <I>Tue May 23 18:39:43 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="013221.html">[Twisted-Python] deferToThread - supported alternative to the	(deprecated) setTimeout method
</A></li>
        <LI>Next message: <A HREF="013223.html">[Twisted-Python] deferToThread - supported alternative to the	(deprecated) setTimeout method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13222">[ date ]</a>
              <a href="thread.html#13222">[ thread ]</a>
              <a href="subject.html#13222">[ subject ]</a>
              <a href="author.html#13222">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Paul,

On Tue, 23 May 2006 15:49:23 -0500, Paul Moore &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">pf_moore at yahoo.co.uk</A>&gt;  
wrote:

&gt;<i> I have a program where I think that what I want to use is
</I>&gt;<i> deferToThread and setTimeout. However, the setTimeout method is marked
</I>&gt;<i> as deprecated - but I can't find a good supported alternative. Can
</I>&gt;<i> anyone help?
</I>&gt;<i>
</I>
I don't know for a certainty that I can help, but I'll try :)

&gt;<i> The situation I have is:
</I>&gt;<i>
</I>&gt;<i> I need to do a large-ish number (50-100) of blocking calls in
</I>&gt;<i> parallel, and collect the results or any errors. In itself, this seems
</I>&gt;<i> like a suitable use for deferToThread (defer each call, and collect
</I>&gt;<i> the results in the deferred callback/errback).
</I>&gt;<i>
</I>
Agreed, this seems to be a perfectly reasonable use-case for deferToThread.

&gt;<i> The problem is that in rare cases, the blocking call can block
</I>&gt;<i> indefinitely. In this case, I need to make the call time out. However,
</I>&gt;<i> the underlying API offers no way to time out the call, so I have to do
</I>&gt;<i> this externally.
</I>&gt;<i>
</I>
Alas, when dealing with APIs that do not allow for timeouts, there is very  
little that twisted can do to help.  The use of setTimeout has been  
debated to death, and no magic bullet solution is in sight.  That said,  
please read the following discussion thread to see what your options are,  
and perhaps one of them will be acceptable for your particular situation.   
These discussions cover your issue in reasonable depth.

<A HREF="http://twistedmatrix.com/pipermail/twisted-python/2004-April/007531.html">http://twistedmatrix.com/pipermail/twisted-python/2004-April/007531.html</A>

<A HREF="http://twistedmatrix.com/trac/ticket/178">http://twistedmatrix.com/trac/ticket/178</A>

<A HREF="http://twistedmatrix.com/pipermail/twisted-python/2005-March/009716.html">http://twistedmatrix.com/pipermail/twisted-python/2005-March/009716.html</A>

Basically, the best you can do in your circumstances is use  
reactor.callLater to invoke some function/method that will take action  
appropriate to your situation, be that cancelling the Deferred, killing  
the thread, etc.

Hope this helps,

L. Daniel Burr


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013221.html">[Twisted-Python] deferToThread - supported alternative to the	(deprecated) setTimeout method
</A></li>
	<LI>Next message: <A HREF="013223.html">[Twisted-Python] deferToThread - supported alternative to the	(deprecated) setTimeout method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13222">[ date ]</a>
              <a href="thread.html#13222">[ thread ]</a>
              <a href="subject.html#13222">[ subject ]</a>
              <a href="author.html#13222">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
