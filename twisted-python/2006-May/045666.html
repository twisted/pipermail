<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Hilarious dream-logic (was Re: [Twisted-Python] [patch] (etc)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20Hilarious%20dream-logic%20%28was%20Re%3A%20%5BTwisted-Python%5D%20%5Bpatch%5D%20%28etc%29&In-Reply-To=%3C20060518213454.28682.834611068.divmod.quotient.2411%40ohm%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="045665.html">
   <LINK REL="Next"  HREF="045667.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Hilarious dream-logic (was Re: [Twisted-Python] [patch] (etc)</H1>
    <B>glyph at divmod.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20Hilarious%20dream-logic%20%28was%20Re%3A%20%5BTwisted-Python%5D%20%5Bpatch%5D%20%28etc%29&In-Reply-To=%3C20060518213454.28682.834611068.divmod.quotient.2411%40ohm%3E"
       TITLE="Hilarious dream-logic (was Re: [Twisted-Python] [patch] (etc)">glyph at divmod.com
       </A><BR>
    <I>Thu May 18 15:34:54 MDT 2006</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="045665.html">Hilarious dream-logic (was Re: [Twisted-Python] [patch] (etc)
</A></li>
        <LI>Next message (by thread): <A HREF="045667.html">[Twisted-Python] Re: callFromThread [was Hilarious dream-logic]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45666">[ date ]</a>
              <a href="thread.html#45666">[ thread ]</a>
              <a href="subject.html#45666">[ subject ]</a>
              <a href="author.html#45666">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On Thu, 18 May 2006 21:25:07 +0200, Andrea Arcangeli &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">andrea at cpushare.com</A>&gt; wrote:
&gt;&gt;<i> Andrea don't understand the purpose of that code (he's effectively reading
</I>&gt;&gt;<i> it backwards) and disabling it will make the situation with processes and
</I>&gt;&gt;<i> threads worse, not better.  Please don't apply this patch (or any of his
</I>&gt;&gt;<i> patches) to your own copies of Twisted.
</I>&gt;<i>
</I>&gt;<i>I didn't want to answer but I think I should to confirm that for this
</I>&gt;<i>single patch (2/4 posted to python-twisted) they're right: I misread the
</I>&gt;<i>code because defertothread(callback) means defer the callback to the
</I>&gt;<i>thread, but callfromthred _doesn't_ mean to call the callback from the
</I>&gt;<i>thread. callfromthread means to call the callback from the main event
</I>&gt;<i>loop instead, great API naming I would say.
</I>
I understand that English isn't your first language, and I don't blame you for that, but you can find the documentation for these APIs here:

<A HREF="http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IReactorThreads.html">http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IReactorThreads.html</A>

and I think the descriptions are easy enough to understand.

The API logic is this: If you have a function and you are running in the reactor, but you want to CALL that function IN a THREAD, you use callInThread.

If you are running in a thread already, and you want to CALL a function that uses Twisted APIs (such as the reactor) FROM that THREAD, you use callFromThread.

Perhaps &quot;invokeArgumentInThreadpool&quot; or &quot;dispatchCallableToReactorForThreadSafety&quot; would have been better names, but I already wear out my keyboards fast enough.

&gt;<i>But for all other patches I posted, they should be applied to
</I>&gt;<i>everybody's own twisted copy. Including the &quot;no it isn't&quot;, since the bug
</I>&gt;<i>exists and needs fixing or I get exceptions.
</I>
Since you've already demonstrated that you don't bother to read the documentation, write tests, or even understand the difficulties that may or may not exist before you submit a patch and apply it to your branch, I don't doubt that tracebacks happen, but I doubt that they're the problem you have identified.

The reason we require unit tests is the same reason scientists require *reproducible* experiments.  If you don't submit a test that can easily produce the traceback you saw, how else would we know that some local misconfiguration on your system wasn't causing it.

&gt;<i>If trac would have posted me updates via email ...
</I>
o/` If I only had a brain o/` da dee da dee da da dum o/`

Trac isn't perfect, but despite some minor complaints everyone else is managing to use it.  Like Twisted, Trac is written in Python, and if you want it to send you email, you can submit plugins and suggest that we use them.  Also, you can learn how to click on a bookmark, or even update an RSS feed.  Here's a single convenient page you can poll for all your tickets - including those that have been closed - and it does have an &quot;RSS&quot; button at the bottom so you can monitor changes:

    <A HREF="http://twistedmatrix.com/trac/query?reporter=andrea">http://twistedmatrix.com/trac/query?reporter=andrea</A>

&gt;<i>Overall using twisted for my project was a mistake.
</I>
And yet, and yet, and yet...

&gt;<i>One major core
</I>&gt;<i>design problem it has is that it can't pass POLLERR|POLLHUP|POLLNVAL to
</I>&gt;<i>the poll syscall unless POLLIN/POLLOUT are set too.
</I>
This is definitely a bug.  I wouldn't term it a &quot;major core design problem&quot;, since I think it can be affected even without changing any external APIs.  Oddly enough, you submitted a bug in the tracker about it, which could have been found either with trac's search field or the above query.  In fact it's also the first hit for &quot;POLLHUP POLLNVAL twisted&quot; on google.  However, since both Trac and Google are far too much work for busy, important men like yourself, I've included a link here:

    <A HREF="http://twistedmatrix.com/trac/ticket/1662">http://twistedmatrix.com/trac/ticket/1662</A>

A response has been posted within the last month, with a comment indicating that it will be fixed.

&gt;<i>This means that if I throttle the I/O I can't notice anymore when a disconnect happens.
</I>
The last paragraph of the ticket's description begins:

&quot;Currently I don't strictly need this&quot;

I doubt that we'd necessarily do anything that was important to you in particular, but *even you* have said that this isn't really that important.  It is hypocrisy of the worst order to bring it up in this discussion as a critical, severe problem that indicates the failure of the whole community.

&gt;<i>But the severe core design issues it has would be fixable and they are a
</I>&gt;<i>minor problem compared to the behaviour of some elements of the
</I>&gt;<i>community that exists around it. I don't need to enter the details
</I>&gt;<i>myself, if doc/fun/Twisted.Quotes isn't enough, quoting emails like
</I>&gt;<i>these is more than enough:
</I>
&quot;I know you are but what am I!?!?&quot;

You're the one who won't follow simple rules of politeness like &quot;use the tracker&quot; or &quot;write unit tests if you require your patches be applied&quot;.

You're the one who throws around baseless insults and lies about other peoples' code.  Your factual errors about Nevow during the period when you were abandoning it were too numerous to even taxonomize -- when have I ever said anything nasty about CPUShare?

Even considering these abuses, we still haven't rejected your access to our resources, including our mailing list and our bugtracker.  In fact, as evidenced above, effort and thought is going into fixing issues that you've reported!

And yet, because somebody once told a fart joke on an IRC channel, you *still* have the gall to say that our &quot;behavior&quot;, as a whole community, is too difficult for anyone to deal with.  Since explicit is better than implicit, why don't I just say this right out: you are a humorless, self-important, obnoxious jerk.  You need to seriously consider your own behavior before you start insulting others.

&gt;<i>Specifically I never said unittest are a waste of time
</I>
Ahem.  From <A HREF="http://twistedmatrix.com/pipermail/twisted-web/2006-January/002389.html">http://twistedmatrix.com/pipermail/twisted-web/2006-January/002389.html</A>

&quot;&quot;&quot;
&gt;<i>So I'm going to fork twisted into a private twisted-CPUShare branch for
</I>&gt;<i>my own server use where I won't have to waste time to fix bugs
</I>&quot;&quot;&quot;

At least as I understood it, &quot;waste time&quot; == &quot;write unittests&quot; in that context, since the whole point of this fork is that you didn't want to write tests to get bug-fixes applied.  You are correct that you didn't ever write, word for word, &quot;unit tests are a waste of time&quot; but numerous other things you said implied it.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="045665.html">Hilarious dream-logic (was Re: [Twisted-Python] [patch] (etc)
</A></li>
	<LI>Next message (by thread): <A HREF="045667.html">[Twisted-Python] Re: callFromThread [was Hilarious dream-logic]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45666">[ date ]</a>
              <a href="thread.html#45666">[ thread ]</a>
              <a href="subject.html#45666">[ subject ]</a>
              <a href="author.html#45666">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
