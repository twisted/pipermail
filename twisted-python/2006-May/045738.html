<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] XML-RPC server
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20XML-RPC%20server&In-Reply-To=%3Cop.s95wf8ll3oj628%40l-daniel-burrs-powerbook-g4-17.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="045737.html">
   <LINK REL="Next"  HREF="045741.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] XML-RPC server</H1>
    <B>L. Daniel Burr</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20XML-RPC%20server&In-Reply-To=%3Cop.s95wf8ll3oj628%40l-daniel-burrs-powerbook-g4-17.local%3E"
       TITLE="[Twisted-Python] XML-RPC server">ldanielburr at mac.com
       </A><BR>
    <I>Fri May 26 08:13:10 MDT 2006</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="045737.html">[Twisted-Python] XML-RPC server
</A></li>
        <LI>Next message (by thread): <A HREF="045741.html">[Twisted-Python] Twisted 2.4.0 released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45738">[ date ]</a>
              <a href="thread.html#45738">[ thread ]</a>
              <a href="subject.html#45738">[ subject ]</a>
              <a href="author.html#45738">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Kelly,

On Fri, 26 May 2006 07:36:53 -0500, Kelly Vincent &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">kpvincent at yahoo.com</A>&gt;  
wrote:

&gt;<i> I am quite new to Twisted and I'm having some trouble
</I>&gt;<i> getting my XML-RPC server to do exactly what I want.
</I>&gt;<i>
</I>
First off, welcome aboard!  Now, on to your problem/question...

&gt;<i> We have a relatively simple goal: create an XML-RPC
</I>&gt;<i> server that will accept a request for a score, call a
</I>&gt;<i> function that computes that score, and then return the
</I>&gt;<i> score. The two catches are that 1. the client is
</I>&gt;<i> actually a .NET web server rather than a Twisted
</I>&gt;<i> client, and 2. we could have thousands of requests
</I>&gt;<i> come in relatively simultaneously (though more likely
</I>&gt;<i> not greater than a few hundred), likely with lots of
</I>&gt;<i> downtime between these periods of high activity. We
</I>&gt;<i> are planning to create a look-up table to deal with
</I>&gt;<i> some of the more common calculations, but I still need
</I>&gt;<i> to be able to run the other calculations
</I>&gt;<i> non-sequentially. I know that using a Deferred object
</I>&gt;<i> is the normal solution, but I'm not entirely sure if
</I>&gt;<i> it could work here without threads. I read somewhere
</I>&gt;<i> that when the function call is not from another
</I>&gt;<i> Twisted application, it's not possible to use the
</I>&gt;<i> Deferred object. Is this actually the case? Or would
</I>&gt;<i> it work in my situation since all of the &quot;deferring&quot;
</I>&gt;<i> would be occurring within the server itself? My
</I>&gt;<i> current solution involves using threads and a Deferred
</I>&gt;<i> object. Is this the best way to do this? Can it be
</I>&gt;<i> done without threads? If so, how and is that a better
</I>&gt;<i> solution than the one with threads?
</I>
This kind of situation is pretty common, and finding the best solution  
will require you to do some benchmarking.  Firstly, benchmark your  
calculation: How much time does it take to return a result?  If the  
calculation is fairly swift (milliseconds), then don't worry about  
Deferreds at all; just perform the calculation and return the result.  If  
the calculation takes longer (seconds, minutes, whatever), then you can  
either use deferToThread, as you are currently, or you break your  
calculation up into steps, and use reactor.callLater to schedule execution  
incrementally.

That said, run a simple load-testing tool, such as apache's &quot;ab&quot;, or  
&quot;httperf&quot;, and see what kind of requests-per-second numbers you get for  
both approaches.

Hope this helps,

L. Daniel Burr


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="045737.html">[Twisted-Python] XML-RPC server
</A></li>
	<LI>Next message (by thread): <A HREF="045741.html">[Twisted-Python] Twisted 2.4.0 released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45738">[ date ]</a>
              <a href="thread.html#45738">[ thread ]</a>
              <a href="subject.html#45738">[ subject ]</a>
              <a href="author.html#45738">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
