<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Send many large files with PB
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Send%20many%20large%20files%20with%20PB&In-Reply-To=20060516.234112.131383979.warner%40lothar.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013119.html">
   <LINK REL="Next"  HREF="013121.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Send many large files with PB</H1>
    <B>Justin Mazzola Paluska</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Send%20many%20large%20files%20with%20PB&In-Reply-To=20060516.234112.131383979.warner%40lothar.com"
       TITLE="[Twisted-Python] Send many large files with PB">jmp at MIT.EDU
       </A><BR>
    <I>Wed May 17 09:17:37 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="013119.html">[Twisted-Python] Send many large files with PB
</A></li>
        <LI>Next message: <A HREF="013121.html">[Twisted-Python] sAsync: SQLAlchemy Made Asynchronous
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13125">[ date ]</a>
              <a href="thread.html#13125">[ thread ]</a>
              <a href="subject.html#13125">[ subject ]</a>
              <a href="author.html#13125">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, May 16, 2006 at 11:41:12PM -0700, Brian Warner wrote:
&gt;<i> Justin Mazzola Paluska &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jmp at MIT.EDU</A>&gt; writes:
</I>&gt;<i> 
</I>&gt;<i> &gt; - Should I send the files from SRC to DEST one-by-one?
</I>&gt;<i> 
</I>&gt;<i> That's how I would do it. If you're talking about gigabyte-sized files, the
</I>&gt;<i> protocol overhead will be pretty minimal compared to the data being
</I>&gt;<i> transferred. You've got a couple of objects to keep track of for each file
</I>&gt;<i> being sent, but on the other hand it will be a lot easier to keep track of
</I>&gt;<i> how much progress you've made (and keep the user informed) that way.
</I>
OK.  I could also possibly stream multiple files at once with this
method, which is an added bonus.

&gt;<i> &gt; - Finally, should I be doing something completely different?
</I>&gt;<i> &gt;   Normally, outside of my application, I'd just use rsync, scp, or
</I>&gt;<i> &gt;   some such.
</I>&gt;<i> 
</I>&gt;<i> I'd certainly investigate this method if the most of the files you are
</I>&gt;<i> sending are already in place on the far end. The bandwidth savings are worth
</I>&gt;<i> the extra setup hassle.
</I>
For this particular job, none of the files are initially in place on
the remote end, so rsync itself won't be a big win.

&gt;<i> Is there a way to get rsync to speak to stdout/stdin instead of using a TCP
</I>&gt;<i> socket? If so, you could spawnProcess('rsync') and proxy it to the far end
</I>&gt;<i> over PB as with 'tar' above. Or, you could have your PB-connection-wielding
</I>&gt;<i> process listen on a local TCP socket, then tell rsync to talk directly to
</I>&gt;<i> that port, then do a socket-level proxy over PB to the far system.
</I>
For future reference, I think there are ways of hacking this (these
statements are conjectures, I haven't actually tried them):

- on the side pushing data, use --rsh= some script that just takes the
  output of rsync and pushes it to stdout.

- on the side receiving the data, use --server to read from stdin.

&gt;<i> Also remember that scp (or rsync-over-ssh or tar|ssh, etc) will be doing
</I>&gt;<i> better authentication than PB, since PB is all in cleartext. Many
</I>&gt;<i> applications don't require confidentiality, but before you switch from ssh to
</I>&gt;<i> straight PB you should be aware of what exactly you're giving up.
</I>
Our PB connections go over SSL and we have a custom auth module, so
piping everything over PB wouldn't be a big loss.

&gt;<i> &lt;shameless plug&gt;
</I>&gt;<i> But, if you use NewPB, you get the strong authentication and confidentiality
</I>&gt;<i> of ssh with all of the juicy RemoteReference model you've come to know and
</I>&gt;<i> love from PB, check out NewPB[1] today.
</I>&gt;<i> &lt;/shameless plug&gt;.
</I>
I've been reading about NewPB and it might be exactly what we'll need
for the next revision of our application.  We're just too close to
pushing out this version to switch to a new RPC method for the core of
the program.

Thanks,
	--Justin


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013119.html">[Twisted-Python] Send many large files with PB
</A></li>
	<LI>Next message: <A HREF="013121.html">[Twisted-Python] sAsync: SQLAlchemy Made Asynchronous
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13125">[ date ]</a>
              <a href="thread.html#13125">[ thread ]</a>
              <a href="subject.html#13125">[ subject ]</a>
              <a href="author.html#13125">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
