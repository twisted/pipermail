<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Direct access to main server class
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Direct%20access%20to%20main%20server%20class&In-Reply-To=%3C17651.36967.975011.190920%40terry.jones.tc%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="046413.html">
   <LINK REL="Next"  HREF="046415.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Direct access to main server class</H1>
    <B>Terry Jones</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Direct%20access%20to%20main%20server%20class&In-Reply-To=%3C17651.36967.975011.190920%40terry.jones.tc%3E"
       TITLE="[Twisted-Python] Direct access to main server class">terry at jon.es
       </A><BR>
    <I>Mon Aug 28 18:55:03 MDT 2006</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="046413.html">[Twisted-Python] Direct access to main server class
</A></li>
        <LI>Next message (by thread): <A HREF="046415.html">[Twisted-Python] Direct access to main server class
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46414">[ date ]</a>
              <a href="thread.html#46414">[ thread ]</a>
              <a href="subject.html#46414">[ subject ]</a>
              <a href="author.html#46414">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Andrew

&gt;&gt;&gt;&gt;&gt;<i> &quot;Andrew&quot; == Andrew Bennetts &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">andrew-twisted at puzzling.org</A>&gt; writes:
</I>Andrew&gt; I'm guessing a significant proportion of your code you want to
Andrew&gt; test, probably the majority of it, has nothing directly to do with
Andrew&gt; authentication or permissions.  Also, *unit* tests (as opposed to
Andrew&gt; functional tests or integration tests or end-to-end tests or
Andrew&gt; whatever other terms you prefer to use) test one thing at a time,
Andrew&gt; so tests for this code shouldn't also be testing authentication.
Andrew&gt; If *every* test has to authenticate, then you're just wasting
Andrew&gt; effort: the tests run slower, there's more junk to step over in a
Andrew&gt; debugger, and you gain no extra testing value by testing the exact
Andrew&gt; same thing in 50 (or 500...) different tests.

That's why I'd use a setUp method: to log in to the server and store the
result for use in the unit tests.

Andrew&gt; No, it's quite common, and sensible, for tests to go directly to
Andrew&gt; the units (i.e.  objects and methods) they want to test, so that
Andrew&gt; they test precisely what they should test.

Right, I can do that (and do do that in the to-be-converted code). I
suppose I'll just make myself an authenticated user object and then call
into internal methods.

It does make me wonder though, still. What if you're writing a Twisted app
that you intend to license for commercial companies to run on their
intranets: You install the Python source and presumably the unit test code
gets run at some point, and maybe remains on the server. Then you're
showing the world how to access the innards of your service without going
through the approved authentication. Same comments apply to simply putting
the code online and letting people see how to get in to any instance they
can get local (user) access to. What can be done to prevent this? The most
obvious thing seems to be to verify the uid of the process trying to create
an authenticated user, and have both your unit tests and twistd run under
this uid.  If you don't do something about this, a normal user on the
system can simply import your module, create an instance, and start making
method calls (possibly unsuccessfully, due to file system permissions on
databases, etc). Maybe they wont get far, but it's an issue: especially if
the system has been built to allow this, and the unit tests show precisely
how to pull it off.

Thanks again,
Terry


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="046413.html">[Twisted-Python] Direct access to main server class
</A></li>
	<LI>Next message (by thread): <A HREF="046415.html">[Twisted-Python] Direct access to main server class
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46414">[ date ]</a>
              <a href="thread.html#46414">[ thread ]</a>
              <a href="subject.html#46414">[ subject ]</a>
              <a href="author.html#46414">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
