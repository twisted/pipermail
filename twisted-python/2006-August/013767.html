<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Restarting a reactor listener
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Restarting%20a%20reactor%20listener&In-Reply-To=d9d9edd40608021612k2b1400a2x5054f546c738821f%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013766.html">
   <LINK REL="Next"  HREF="013762.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Restarting a reactor listener</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Restarting%20a%20reactor%20listener&In-Reply-To=d9d9edd40608021612k2b1400a2x5054f546c738821f%40mail.gmail.com"
       TITLE="[Twisted-Python] Restarting a reactor listener">exarkun at divmod.com
       </A><BR>
    <I>Wed Aug  2 20:23:14 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="013766.html">[Twisted-Python] Restarting a reactor listener
</A></li>
        <LI>Next message: <A HREF="013762.html">[Twisted-Python] Twisted website
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13767">[ date ]</a>
              <a href="thread.html#13767">[ thread ]</a>
              <a href="subject.html#13767">[ subject ]</a>
              <a href="author.html#13767">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 2 Aug 2006 16:12:49 -0700, Travis Vachon &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">tvachon at gmail.com</A>&gt; wrote:
&gt;<i>Hi Ian
</I>&gt;<i>
</I>&gt;<i>I ran into this just recently, but am not entirely certain I found the best
</I>&gt;<i>solution. I needed to be able to switch the port the reactor was listening
</I>&gt;<i>on without restarting the reactor. Here's how I did it:
</I>&gt;<i>
</I>&gt;<i>     def startListener(self, port, interface=&quot;127.0.0.1&quot;):
</I>&gt;<i>
</I>&gt;<i>        self.iListeningPort = reactor.listenTCP(
</I>&gt;<i>            port,
</I>&gt;<i>            self.factory,
</I>&gt;<i>            interface=interface
</I>&gt;<i>            )
</I>&gt;<i>    def restartListener(self, port, interface=&quot;127.0.0.1&quot;):
</I>&gt;<i>
</I>&gt;<i>        self.iListeningPort.stopListening()
</I>&gt;<i>        self.startListener(port, interface)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>I'm not sure if doing this will have any unintended side-effects, but so far
</I>&gt;<i>it seems to have done the trick. If someone else on the list could confirm
</I>&gt;<i>this does what I think it does (and what Ian is looking for) that would be
</I>&gt;<i>great.
</I>&gt;<i>
</I>&gt;<i>Best,
</I>&gt;<i>
</I>&gt;<i>Travis
</I>&gt;<i>
</I>
This is pretty much exactly correct.  The only thing which *might* be an
issue is that stopListening is not guaranteed to succeed immediately.  *If*
you are relying on the old port number to be available immediately after
restartListener returns, you might be surprised.  You can address this by
returning the Deferred which is returned by stopListening from restartListener
so that the caller will receive notification when the old port number becomes
free.

In practice, and for the typical use cases, this probably won't often be a
problem.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013766.html">[Twisted-Python] Restarting a reactor listener
</A></li>
	<LI>Next message: <A HREF="013762.html">[Twisted-Python] Twisted website
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13767">[ date ]</a>
              <a href="thread.html#13767">[ thread ]</a>
              <a href="subject.html#13767">[ subject ]</a>
              <a href="author.html#13767">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
