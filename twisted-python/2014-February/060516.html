<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] serializing inline callbacks
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20serializing%20inline%20callbacks&In-Reply-To=%3CCAJtE5vQNBnouYZ%3DK2LU2nkGOvCFRE%2BT0dvZqcuH10oehd_tbqg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="060514.html">
   <LINK REL="Next"  HREF="060518.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] serializing inline callbacks</H1>
    <B>Dustin J. Mitchell</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20serializing%20inline%20callbacks&In-Reply-To=%3CCAJtE5vQNBnouYZ%3DK2LU2nkGOvCFRE%2BT0dvZqcuH10oehd_tbqg%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] serializing inline callbacks">dustin at v.igoro.us
       </A><BR>
    <I>Tue Feb 18 12:03:27 MST 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="060514.html">[Twisted-Python] serializing inline callbacks
</A></li>
        <LI>Next message (by thread): <A HREF="060518.html">[Twisted-Python] serializing inline callbacks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60516">[ date ]</a>
              <a href="thread.html#60516">[ thread ]</a>
              <a href="subject.html#60516">[ subject ]</a>
              <a href="author.html#60516">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm suggesting that there are lots more problems with your code than
the one you have identified.  Any method which is decorated with
@defer.inlineCallbacks will return a Deferred, and you need to handle
every Deferred somehow.  Generally (although not always, as lvh has
said) you do that by yielding it.

Your code should be

----
    def render_GET(self, request):
        ...
        d = self.A()
        d.addErrback(request.processingFailed)
        return NOT_DONE_YET

    @inlineCallbacks
    def A(self):
        ...
        tmp = yield subprocess(args)
        ...
        yield self.B()

    @inlineCallbacks
    def B(self):
        ...
        tmp = yield subprocess(args)
        ...
        yield self.C()

    def C(self):
        ...
        x = yield self.D(...)
        y = yield self.D(...)
        z = yield self.D(...)
        ...
        yield self.E()

    @inlineCallbacks
    def D(self):
        ...
        tmp = yield subprocess(args)
        ...
        returnValue(tmp)


    @inlineCallbacks
    def E(self):
        ...
        tmp = yield subprocess(args)
        ...
        request.write(...)
        request.finished()

----

Here you see that all of the Deferreds are handled, either by yielding
them or, in the case of the Deferred from A, by adding an errback that
will conveniently format an HTML error response.

Dustin


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="060514.html">[Twisted-Python] serializing inline callbacks
</A></li>
	<LI>Next message (by thread): <A HREF="060518.html">[Twisted-Python] serializing inline callbacks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60516">[ date ]</a>
              <a href="thread.html#60516">[ thread ]</a>
              <a href="subject.html#60516">[ subject ]</a>
              <a href="author.html#60516">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
