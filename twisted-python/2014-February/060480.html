<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Sending feedback on SSH authentication failures
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Sending%20feedback%20on%20SSH%20authentication%20failures&In-Reply-To=%3CCAMwy1tzEc5ne89Y4pRO0b0Vqyp71tEgBt57SdfEJxFgT%2BGZbBw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="028014.html">
   <LINK REL="Next"  HREF="028015.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Sending feedback on SSH authentication failures</H1>
    <B>Tom van Neerijnen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Sending%20feedback%20on%20SSH%20authentication%20failures&In-Reply-To=%3CCAMwy1tzEc5ne89Y4pRO0b0Vqyp71tEgBt57SdfEJxFgT%2BGZbBw%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Sending feedback on SSH authentication failures">twisted at tomvn.com
       </A><BR>
    <I>Thu Feb  6 17:24:00 MST 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="028014.html">[Twisted-Python] Sending feedback on SSH authentication failures
</A></li>
        <LI>Next message (by thread): <A HREF="028015.html">[Twisted-Python] Process without fork() exec()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60480">[ date ]</a>
              <a href="thread.html#60480">[ thread ]</a>
              <a href="subject.html#60480">[ subject ]</a>
              <a href="author.html#60480">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>SSH (and by association conch) sends feedback to users but unless you ssh
-v you won't see much of it. Sending text feedback without using the
standard auth methods might require you to move your two factor auth into
your protocol but this doesn't feel like a good idea to me. I'm relatively
new to conch and my use case is quite different to yours so if I'm wrong
and there is a way to do this I hope someone else jumps in to correct me.

I did a quick test with
<A HREF="http://twistedmatrix.com/documents/current/api/twisted.conch.checkers.SSHProtocolChecker.htmlas">http://twistedmatrix.com/documents/current/api/twisted.conch.checkers.SSHProtocolChecker.htmlas</A>
my portals checker and that lets me require both password (something
you
know) and key (something you have).
My test doesn't handle &quot;ticking&quot; already used auth methods off the list of
authentications that can continue but I don't think it would be too hard to
get that working.
I see the following in my ssh client connection when connecting to my
server. As I said I don't tick off used methods which is why you see
&quot;Authentications that can continue: password,publickey&quot; instead of just
password.

$ ssh -v -p 5022 <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">user at localhost</A>
OpenSSH_6.2p2 Ubuntu-6ubuntu0.1, OpenSSL 1.0.1e 11 Feb 2013
debug1: Reading configuration data /home/tom/.ssh/config
....
debug1: Remote protocol version 2.0, remote software version Twisted
....
debug1: Authentications that can continue: password,publickey
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /home/tom/.ssh/id_rsa
debug1: Server accepts key: pkalg ssh-rsa blen 279
Authenticated with partial success.
debug1: Authentications that can continue: password,publickey
....
debug1: Next authentication method: password
<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">user at localhost</A>'s password:
debug1: Authentication succeeded (password).
Authenticated to localhost ([127.0.0.1]:5022).
debug1: channel 0: new [client-session]
debug1: Entering interactive session.
debug1: Sending environment.
debug1: Sending env LANG = en_GB.UTF-8

Hope that helps.


On Wed, Feb 5, 2014 at 12:03 AM, David Timothy Strauss &lt;
<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">david at davidstrauss.net</A>&gt; wrote:

&gt;<i> Is there a straightforward way to send text feedback to users when
</I>&gt;<i> their authentication fails? At Pantheon, we use a custom
</I>&gt;<i> implementation of IRealm. I'm hoping there's a way to send or return
</I>&gt;<i> the output from there.
</I>&gt;<i>
</I>&gt;<i> We particularly need this because users will have various two-factor
</I>&gt;<i> authentication modes configured, and a simple pass/fail for
</I>&gt;<i> authentication will leave many scratching their heads.
</I>&gt;<i>
</I>&gt;<i> I don't see any examples of such output on the relevant documentation page
</I>&gt;<i> [1].
</I>&gt;<i>
</I>&gt;<i> [1] <A HREF="https://twistedmatrix.com/documents/current/core/howto/cred.html">https://twistedmatrix.com/documents/current/core/howto/cred.html</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20140207/82f160f4/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="028014.html">[Twisted-Python] Sending feedback on SSH authentication failures
</A></li>
	<LI>Next message (by thread): <A HREF="028015.html">[Twisted-Python] Process without fork() exec()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60480">[ date ]</a>
              <a href="thread.html#60480">[ thread ]</a>
              <a href="subject.html#60480">[ subject ]</a>
              <a href="author.html#60480">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
