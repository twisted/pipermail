<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Guidance on Proxy-type Application
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Guidance%20on%20Proxy-type%20Application&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019685.html">
   <LINK REL="Next"  HREF="019698.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Guidance on Proxy-type Application</H1>
    <B>Aaron Bush</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Guidance%20on%20Proxy-type%20Application&In-Reply-To="
       TITLE="[Twisted-Python] Guidance on Proxy-type Application">asb.bush at gmail.com
       </A><BR>
    <I>Wed May 27 21:23:27 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019685.html">[Twisted-Python] Twisted protocol as Django data source
</A></li>
        <LI>Next message: <A HREF="019698.html">[Twisted-Python] Guidance on Proxy-type Application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19689">[ date ]</a>
              <a href="thread.html#19689">[ thread ]</a>
              <a href="subject.html#19689">[ subject ]</a>
              <a href="author.html#19689">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have just started to look at the Twisted framework and would like to put
it to use for a new project I am working on.  Not being very familiar with
the framework and fairly new to Python in general I would like to ask a
design/architecture question.  (I have written similar applications in C but
would prefer to start this in the right direction and not write Python like
C.)

The application has the following model:

Many clients connect to the Application and prefer to leave the connection
open.  They will send messages across this connection.  They will expect to
get a message back at some point later, they do not wait for a response
(async).  The clients are already coded (legacy) and just need to send their
proprietary protocol to the new Application (written using Twisted).

The Twisted application will take the data from the clients and do some
transformation on it then send the message on to another server (3rd
party).  This connection to &quot;another&quot; server must be a single connection,
not one connection per client.  This connection should also be persistent
and not opened/closed for each client message sent.  Ideally if the 3rd
party server is down then I would also not accept client connections as the
messages are time sensitive and should not be stored and forwarded.  At some
point the 3rd part will send a message back and the Application will route
it back to the original source.  Basically request/reply pattern.

I have been reading through the archives and the twisted docs and have also
looked over the Hex-dump port-forwarding recipe but not found anything that
explains how to use twisted for this model.  Hex-dump is close but
opens/closes the connection to the server on each client connection.

I am thinking that there will be two Factories [and two protocols: 1) for
clients and 2) for 3rd party].  I am not sure how to best establish both the
listening factory and the client to 3rd party factory.  Once they are
established what is the preferred way in Twisted to pass a message from one
protocol to another?

Any pointers or sample code that you can offer is greatly appreciated.  I
would really like to cook this in Twisted and not go back to the C way.

Thanks,
-ab
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20090527/50fd798d/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20090527/50fd798d/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019685.html">[Twisted-Python] Twisted protocol as Django data source
</A></li>
	<LI>Next message: <A HREF="019698.html">[Twisted-Python] Guidance on Proxy-type Application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19689">[ date ]</a>
              <a href="thread.html#19689">[ thread ]</a>
              <a href="subject.html#19689">[ subject ]</a>
              <a href="author.html#19689">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
