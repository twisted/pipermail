<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] help using deferred
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20help%20using%20deferred&In-Reply-To=9cce290a0905111049j693150deye98c0129a977f070%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019603.html">
   <LINK REL="Next"  HREF="019639.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] help using deferred</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20help%20using%20deferred&In-Reply-To=9cce290a0905111049j693150deye98c0129a977f070%40mail.gmail.com"
       TITLE="[Twisted-Python] help using deferred">exarkun at divmod.com
       </A><BR>
    <I>Mon May 11 14:01:21 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019603.html">[Twisted-Python] help using deferred
</A></li>
        <LI>Next message: <A HREF="019639.html">[Twisted-Python] help using deferred
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19604">[ date ]</a>
              <a href="thread.html#19604">[ thread ]</a>
              <a href="subject.html#19604">[ subject ]</a>
              <a href="author.html#19604">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 11 May 2009 19:49:19 +0200, Luigi Conte &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">luigiandcosolutions at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> [snip]
</I>&gt;<i>in my script I have to use connect method and then I have to do some
</I>&gt;<i>operations first of calling the start method
</I>&gt;<i>1) start connection
</I>&gt;<i>
</I>&gt;<i>    def startConnection(self):
</I>&gt;<i>        d = my_api.connect(self.ctrl_ip, self.ctrl_port, self.user,
</I>&gt;<i>self.pwd)
</I>&gt;<i>        d.addCallback(self.postConnection)
</I>
Since you omitted the definition of postConnection, I have no way to know
what this does.

&gt;<i>        d.addErrback(twisted.python.log.err)
</I>
Regardless, this is the wrong place to insert this errback.  You should read
the Deferred documentation to learn what consequence it will have on your
program's flow.

<A HREF="http://twistedmatrix.com/projects/core/documentation/howto/defer.html">http://twistedmatrix.com/projects/core/documentation/howto/defer.html</A> is
probably a good place to start.

&gt;<i>        print &quot;Connection added&quot;
</I>&gt;<i>        return d
</I>&gt;<i>2) operation before starting a virtual machine:
</I>&gt;<i>def newVMCfg(self, new_vms_cfg):
</I>&gt;<i>       #...
</I>&gt;<i>       #some operations
</I>&gt;<i>       #if condition valid I try to start the virtual machine
</I>&gt;<i>                        # is this the correct way to pass args to the start
</I>&gt;<i>method?
</I>&gt;<i>                        d = self.d.addCallback(self.startVM,(new_vm,
</I>&gt;<i>self.lnms[i])
</I>&gt;<i>                        print &quot;started vm %s&quot;%new_vm
</I>&gt;<i>        return d
</I>&gt;<i>
</I>&gt;<i>in the main process I call them as:
</I>&gt;<i>d = startConnection()
</I>&gt;<i>d.addCallback(newVMCfg, arg)
</I>&gt;<i>
</I>&gt;<i>Is it correct? Because the process stops at the first method called: I see
</I>&gt;<i>only &quot;connection added&quot;.
</I>
That should indicate to you that something is going wrong after that print
statement is reached.  So examine what your program tries to do after that
point.  You may want to use a debugger.  You may want to try writing some
unit tests.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019603.html">[Twisted-Python] help using deferred
</A></li>
	<LI>Next message: <A HREF="019639.html">[Twisted-Python] help using deferred
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19604">[ date ]</a>
              <a href="thread.html#19604">[ thread ]</a>
              <a href="subject.html#19604">[ subject ]</a>
              <a href="author.html#19604">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
