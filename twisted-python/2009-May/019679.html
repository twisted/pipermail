<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Reactor callback from the wrong thread
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Reactor%20callback%20from%20the%20wrong%20thread&In-Reply-To=24e981170905270608p25f6057fl2ad2b7f71cc2fac6%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019677.html">
   <LINK REL="Next"  HREF="019691.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Reactor callback from the wrong thread</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Reactor%20callback%20from%20the%20wrong%20thread&In-Reply-To=24e981170905270608p25f6057fl2ad2b7f71cc2fac6%40mail.gmail.com"
       TITLE="[Twisted-Python] Reactor callback from the wrong thread">exarkun at divmod.com
       </A><BR>
    <I>Wed May 27 11:43:22 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019677.html">[Twisted-Python] Reactor callback from the wrong thread
</A></li>
        <LI>Next message: <A HREF="019691.html">[Twisted-Python] Reactor callback from the wrong thread
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19679">[ date ]</a>
              <a href="thread.html#19679">[ thread ]</a>
              <a href="subject.html#19679">[ subject ]</a>
              <a href="author.html#19679">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 27 May 2009 15:08:49 +0200, Lars Ivar Igesund &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">larsivi at gmail.com</A>&gt; wrote:
&gt;<i>Hi!
</I>&gt;<i>
</I>&gt;<i>I have an issue where the reactor calls the callback from a different
</I>&gt;<i>thread than the one the reactor is running in.
</I>
Generally speaking, the only callbacks the reactor invokes are protocol
methods (like dataReceived and connectionLost) and timed events (things
you pass to reactor.callLater).  It always calls these in the thread it
is running in.  What callbacks are you seeing be invoked in the &quot;wrong&quot;
thread?

&gt;<i> [snip]
</I>&gt;<i>
</I>&gt;<i>What can cause this and how may I debug it? AFAIK, PyFit does not use
</I>&gt;<i>twisted or threading at all, and we only have two simple background
</I>&gt;<i>threads our selves in addition to the one running the trap deamon.
</I>
The most likely explanation is that your code (perhaps by way of PyFit,
I'm not sure -- I've never used PyFit) is calling a Twisted API from a
thread other than the reactor thread.  So, examine all the places you
call Twisted APIs (including APIs in twistedsnmp which may call Twisted
APIs) and make sure they're only run in the reactor thread.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019677.html">[Twisted-Python] Reactor callback from the wrong thread
</A></li>
	<LI>Next message: <A HREF="019691.html">[Twisted-Python] Reactor callback from the wrong thread
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19679">[ date ]</a>
              <a href="thread.html#19679">[ thread ]</a>
              <a href="subject.html#19679">[ subject ]</a>
              <a href="author.html#19679">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
