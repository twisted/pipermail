<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted protocol as Django data source
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20protocol%20as%20Django%20data%20source&In-Reply-To=%3C200905281543.47655.esteve%40sindominio.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="052201.html">
   <LINK REL="Next"  HREF="052216.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted protocol as Django data source</H1>
    <B>Esteve Fernandez</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20protocol%20as%20Django%20data%20source&In-Reply-To=%3C200905281543.47655.esteve%40sindominio.net%3E"
       TITLE="[Twisted-Python] Twisted protocol as Django data source">esteve at sindominio.net
       </A><BR>
    <I>Thu May 28 07:43:47 MDT 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="052201.html">[Twisted-Python] Twisted protocol as Django data source
</A></li>
        <LI>Next message (by thread): <A HREF="052216.html">[Twisted-Python] Twisted protocol as Django data source
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52205">[ date ]</a>
              <a href="thread.html#52205">[ thread ]</a>
              <a href="subject.html#52205">[ subject ]</a>
              <a href="author.html#52205">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wednesday 27 May 2009 21:48:25 Alex Clemesha wrote:
&gt;<i> I wrote up some thoughts on this here:
</I>&gt;<i> <A HREF="http://clemesha.org/blog/2009/apr/23/Django-on-Twisted-using-latest-twisted">http://clemesha.org/blog/2009/apr/23/Django-on-Twisted-using-latest-twisted</A>
</I>&gt;<i>-web-wsgi/
</I>&gt;<i>
</I>&gt;<i> basically it comes down to running Django off the very latest WSGI
</I>&gt;<i> code (in the trunk still)
</I>&gt;<i> found in twisted.web, which I've found to work very well.
</I>&gt;<i>
</I>&gt;<i> Also see here:
</I>&gt;<i> <A HREF="http://blog.dreid.org/2009/03/twisted-django-it-wont-burn-down-your.html">http://blog.dreid.org/2009/03/twisted-django-it-wont-burn-down-your.html</A>
</I>
Having Django running on top of Twisted.web doesn't make Django a normal 
Twisted application. You'll have to use reactor.callFromThread in a lot of 
places to maintain thread-safety, since most of the Twisted code isn't.

Like JP has pointed out, a solution based around RPC is a viable option. It's 
pretty straightforward, safe and performant.

My take (which uses Thrift for RPC, could have imagined that? :-)):

- define a Thrift spec file that describes a service with the methods that 
your Django application will issue (like queryResults(), readData(), etc.)

- generate code using the Thrift compiler for both blocking and non-blocking 
Python:
$ thrift --gen py (for regular Python)
$ thrift --gen py:twisted (for Twisted)

beware that both commands will dump code to a directory called gen-py, which 
gets overwritten each time

- create a normal Twisted application which speaks your protocol on one end 
and Thrift on the other. Use whatever transport you like, if you want to make 
it ultra fast use unix sockets and a tmpfs filesystem (e.g. /tmp in most 
Linux distributions)

- connect from your Django application to the Twisted Thrift service and issue 
whichever calls you defined in the first step

I have some code sitting around that does this (for txAMQP, in my case), I'll 
try to upload it somewhere.

Cheers.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="052201.html">[Twisted-Python] Twisted protocol as Django data source
</A></li>
	<LI>Next message (by thread): <A HREF="052216.html">[Twisted-Python] Twisted protocol as Django data source
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52205">[ date ]</a>
              <a href="thread.html#52205">[ thread ]</a>
              <a href="subject.html#52205">[ subject ]</a>
              <a href="author.html#52205">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
