<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] reactor.stop() and deferToThead
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20reactor.stop%28%29%20and%20deferToThead&In-Reply-To=%3C232f319b0905290522y7983b5f5h8fb95e6794c43b16%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="052231.html">
   <LINK REL="Next"  HREF="052224.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] reactor.stop() and deferToThead</H1>
    <B>Thomas Jakobsen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20reactor.stop%28%29%20and%20deferToThead&In-Reply-To=%3C232f319b0905290522y7983b5f5h8fb95e6794c43b16%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] reactor.stop() and deferToThead">thomas.jakobsen at alexandra.dk
       </A><BR>
    <I>Fri May 29 06:22:43 MDT 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="052231.html">[Twisted-Python] ESMTP extension
</A></li>
        <LI>Next message (by thread): <A HREF="052224.html">[Twisted-Python] reactor.stop() and deferToThead
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52223">[ date ]</a>
              <a href="thread.html#52223">[ thread ]</a>
              <a href="subject.html#52223">[ subject ]</a>
              <a href="author.html#52223">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

It seems that things being deferredToThread continue to run even
though reactor.stop() is called.

Output from the example below is:

stuff1 finished; stopping reactor
stuff2 finished

Is there a way to abort the remaining execution of stuff2 in this
case? It would be handy if, say, some exception happens in in stuff1
that causes the execution of the remaining stuff2 to be meaningless.

Kind regards,
Thomas

---------------------------------------------

from twisted.internet.threads import deferToThread
from twisted.internet import reactor

def stuff1():
    time.sleep(2)
    print &quot;stuff1 finished; stopping reactor&quot;
    reactor.stop()

def stuff2():
    time.sleep(4)
    print &quot;stuff2 finished&quot;

d1 = deferToThread(stuff1)
d2 = deferToThread(stuff2)

reactor.run()


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="052231.html">[Twisted-Python] ESMTP extension
</A></li>
	<LI>Next message (by thread): <A HREF="052224.html">[Twisted-Python] reactor.stop() and deferToThead
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52223">[ date ]</a>
              <a href="thread.html#52223">[ thread ]</a>
              <a href="subject.html#52223">[ subject ]</a>
              <a href="author.html#52223">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
