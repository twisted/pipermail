<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted protocol as Django data source
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20protocol%20as%20Django%20data%20source&In-Reply-To=20090527194003.21531.615734528.divmod.quotient.26364%40henry.divmod.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019684.html">
   <LINK REL="Next"  HREF="019686.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted protocol as Django data source</H1>
    <B>glyph at divmod.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20protocol%20as%20Django%20data%20source&In-Reply-To=20090527194003.21531.615734528.divmod.quotient.26364%40henry.divmod.com"
       TITLE="[Twisted-Python] Twisted protocol as Django data source">glyph at divmod.com
       </A><BR>
    <I>Wed May 27 16:16:23 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019684.html">[Twisted-Python] Twisted protocol as Django data source
</A></li>
        <LI>Next message: <A HREF="019686.html">[Twisted-Python] Twisted protocol as Django data source
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19687">[ date ]</a>
              <a href="thread.html#19687">[ thread ]</a>
              <a href="subject.html#19687">[ subject ]</a>
              <a href="author.html#19687">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 07:40 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at divmod.com</A> wrote:
&gt;<i>On Wed, 27 May 2009 14:39:45 -0400, Dan &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">charnedn at muohio.edu</A>&gt; wrote:
</I>&gt;&gt;<i>Hi all,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>I have an application written in Twisted which multiplexes data from a
</I>&gt;&gt;<i>variety of pieces of specialized hardware, and I'd like to make the
</I>&gt;&gt;<i>live stream of this information viewable through a webpage.
</I>&gt;&gt;<i>Unfortunately, on our server, port 80 is already taken by an Apache +
</I>&gt;&gt;<i>mod_python + Django stack with which we host a number of webpages.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>[snip]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>The options I've thought of include using Twisted's builtin web server
</I>&gt;&gt;<i>a nonstandard port, mod_proxy, or writing a Django app which just
</I>&gt;&gt;<i>polls a database repeatedly and altering my Twisted app so it
</I>&gt;&gt;<i>repeatedly does an UPDATE. All of these solutions feel hacky to me, so
</I>&gt;&gt;<i>I'd like to ask you, the list, how you'd go about doing this.
</I>
Polling a database repeatedly and updating it &quot;repeatedly&quot; to 
synchronize data sounds pretty gross.  But then, if your Django 
application is rendering static web-pages and not updating them with 
some COMET technique, you can simply populate the database from Twisted 
when stuff changes and query it normally when the page is rendered - 
that doesn't seem bad to me.

If your Django application *is* using COMET to keep the page updated in 
real time, then you should look into Orbited - which, as it so happens, 
uses Twisted, so you can put it into your Twisted process.

Personally, I don't like using databases as a point of integration. 
Inevitably your Django app or your Twisted app will want to enforce 
constraints on the data and model things about the relationships between 
rows beyond what one can glean by inspecting the SQL schema.  Once the 
responsibility for managing the data's integrity has moved into 
middleware, you should be talking to the middleware and let that 
middleware manage your database.  Given that your Twisted process is the 
thing doing the UPDATEs here, I'd treat Twisted as the middleware, and 
agree with exarkun's recommendation:
&gt;<i>Another option is to have Django talk to a Twisted process via some RPC
</I>&gt;<i>mechanism that won't require you to use Twisted in the Apache process.
</I>&gt;<i>For example, XML-RPC.
</I>
In this vein, there is also a blocking-friendly implementation of the 
AMP protocol with no Twisted dependency:  <A HREF="https://launchpad.net/ampy">https://launchpad.net/ampy</A> - 
but it's maintained outside of Twisted and I wouldn't vouch for its 
quality.  On the other hand I wouldn't vouch for the quality of any XML- 
RPC client either ;-).

You can use whatever protocol you want for exchanging information 
between these two systems.  The important thing is really to make it a 
narrow, clearly-specified channel of communication.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019684.html">[Twisted-Python] Twisted protocol as Django data source
</A></li>
	<LI>Next message: <A HREF="019686.html">[Twisted-Python] Twisted protocol as Django data source
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19687">[ date ]</a>
              <a href="thread.html#19687">[ thread ]</a>
              <a href="subject.html#19687">[ subject ]</a>
              <a href="author.html#19687">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
