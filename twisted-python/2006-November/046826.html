<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Understanding Deferreds/callback further
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Understanding%20Deferreds/callback%20further&In-Reply-To=%3C7.0.0.16.0.20061108211730.01c36720%40spinwardstars.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="046828.html">
   <LINK REL="Next"  HREF="046799.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Understanding Deferreds/callback further</H1>
    <B>Samuel Reynolds</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Understanding%20Deferreds/callback%20further&In-Reply-To=%3C7.0.0.16.0.20061108211730.01c36720%40spinwardstars.com%3E"
       TITLE="[Twisted-Python] Understanding Deferreds/callback further">sam at spinwardstars.com
       </A><BR>
    <I>Wed Nov  8 21:42:15 MST 2006</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="046828.html">[Twisted-Python] Understanding Deferreds/callback further
</A></li>
        <LI>Next message (by thread): <A HREF="046799.html">[Twisted-Python] manhole questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46826">[ date ]</a>
              <a href="thread.html#46826">[ thread ]</a>
              <a href="subject.html#46826">[ subject ]</a>
              <a href="author.html#46826">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i>Ok.  The thing I am trying to design/code is a job distribution 
</I>&gt;<i>system, for a distributed computation model.  There is a server 
</I>&gt;<i>which interacts with the job database (which is just a bsddb).  The 
</I>&gt;<i>server accepts connections from clients and distributes jobs to 
</I>&gt;<i>them.  The server also accepts connections from a 2nd type of 
</I>&gt;<i>client, which submits jobs to the server.
</I>
Sounds like a distributed task queue.

Users/user processes submit tasks to the master queue
manager (the &quot;server&quot;) via a defined interface (HTTP post,
SOAP, XML-RPC, PB, or ???). The master queue manager
adds the requested tasks to the master job queue.

A secondary queue manager on each &quot;client&quot; machine
(the &quot;monitor&quot;) requests tasks from the master queue
when its local queue drops below a defined threshold
number of jobs (or drops to zero). When the local queue
is empty, the secondary queue manager periodically
requests tasks from the master. It adds any tasks
received to its local queue.

For each received task, the secondary queue manager
starts a worker task, immediately receiving a deferred.
It registers success and error callbacks on the deferred.

When it gets the success or error callback from a worker,
the secondary queue manager records the result and reports
it to the master queue controller (the &quot;server&quot;). When it
has successfully reported to the master, it deletes the
task from the local queue.

Additional wrinkles: (1) Intertask dependencies may require
that some tasks be performed sequentially, on the same
slave machine, or both. (2) Some tasks may be more important
than others, and so must be processed (or at least started)
first. (3) Task cancellation at the master may require
that the master be able to send asynchronous task-cancel
instructions to the slaves.

&gt;<i>The workers of course have to submit their results back to the 
</I>&gt;<i>server, but in the system I envisioned the monitor takes care of 
</I>&gt;<i>that by continuously polling the status of the workers.
</I>
If the worker returns a deferred, the monitor doesn't
need to poll; it'll get a callback when the worker
completes (or fails).

HTH.

- Sam 




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="046828.html">[Twisted-Python] Understanding Deferreds/callback further
</A></li>
	<LI>Next message (by thread): <A HREF="046799.html">[Twisted-Python] manhole questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46826">[ date ]</a>
              <a href="thread.html#46826">[ thread ]</a>
              <a href="subject.html#46826">[ subject ]</a>
              <a href="author.html#46826">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
