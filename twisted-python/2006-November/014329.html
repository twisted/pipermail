<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] SMTP server
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20SMTP%20server&In-Reply-To=45544D0B.2000503%40int.gl3">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014327.html">
   <LINK REL="Next"  HREF="014323.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] SMTP server</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20SMTP%20server&In-Reply-To=45544D0B.2000503%40int.gl3"
       TITLE="[Twisted-Python] SMTP server">exarkun at divmod.com
       </A><BR>
    <I>Fri Nov 10 08:29:11 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="014327.html">[Twisted-Python] SMTP server
</A></li>
        <LI>Next message: <A HREF="014323.html">[Twisted-Python] Installation of Twisted (Sumo) failing in web,	words (I think)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14329">[ date ]</a>
              <a href="thread.html#14329">[ thread ]</a>
              <a href="subject.html#14329">[ subject ]</a>
              <a href="author.html#14329">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 10 Nov 2006 10:57:31 +0100, Jan Bakuwel &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jan.bakuwel at int.greenpeace.org</A>&gt; wrote:
&gt;<i>Hi Jean-Paul,
</I>&gt;&gt;<i> The situation is not ideal, but I think if you use
</I>&gt;&gt;<i> IMessageDeliveryFactory
</I>&gt;&gt;<i> instead of IMessageDelivery you'll be able to accomplish your goal.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> With IMessageDeliveryFactory, you can create a new IMessageDelivery
</I>&gt;&gt;<i> provider
</I>&gt;&gt;<i> for each SMTP transaction.  validateTo is still called multiple times on
</I>&gt;&gt;<i> your IMessageDelivery provider, but because a new one is created for each
</I>&gt;&gt;<i> transaction, you should be able to avoid making multiple deliveries to
</I>&gt;&gt;<i> your
</I>&gt;&gt;<i> real backend.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> (As I wrote that I realized it was not a very clear explanation at
</I>&gt;&gt;<i> all, but
</I>&gt;&gt;<i> I cannot think of another way to put it without actually implementing
</I>&gt;&gt;<i> something).
</I>&gt;<i>Are you suggesting that I would implement my own version of
</I>&gt;<i>IMessageDelivery to include the abstract method I'm wishing for? Just
</I>&gt;<i>trying to understand what you're suggesting... :-)
</I>
You should implement IMessageDelivery and your implementation should keep
internal state which tracks which users the message should be delivered to.
This state should be transferred to the IMessage provider which validateTo
returns.  When IMessage.messageDone is called, you should use that state to
deliver the message once and only once to the intended recipients.

IMessage.messageDone is the notification you want, as long as you are using
a different IMessageDelivery for each message, which is what implementing
IMessageDeliveryFactory lets you do.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014327.html">[Twisted-Python] SMTP server
</A></li>
	<LI>Next message: <A HREF="014323.html">[Twisted-Python] Installation of Twisted (Sumo) failing in web,	words (I think)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14329">[ date ]</a>
              <a href="thread.html#14329">[ thread ]</a>
              <a href="subject.html#14329">[ subject ]</a>
              <a href="author.html#14329">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
