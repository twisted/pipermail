<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Keeping a list of connected PB clients
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Keeping%20a%20list%20of%20connected%20PB%20clients&In-Reply-To=20061120144156.20948.1088322348.divmod.quotient.35832%40ohm">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014385.html">
   <LINK REL="Next"  HREF="014386.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Keeping a list of connected PB clients</H1>
    <B>Phil Christensen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Keeping%20a%20list%20of%20connected%20PB%20clients&In-Reply-To=20061120144156.20948.1088322348.divmod.quotient.35832%40ohm"
       TITLE="[Twisted-Python] Keeping a list of connected PB clients">phil at bubblehouse.org
       </A><BR>
    <I>Mon Nov 20 15:26:40 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="014385.html">[Twisted-Python] Keeping a list of connected PB clients
</A></li>
        <LI>Next message: <A HREF="014386.html">[Twisted-Python] Testing protocols without connection?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14387">[ date ]</a>
              <a href="thread.html#14387">[ thread ]</a>
              <a href="subject.html#14387">[ subject ]</a>
              <a href="author.html#14387">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Nov 20, 2006, at 9:41 AM, Jean-Paul Calderone wrote:
&gt;<i> On Mon, 20 Nov 2006 09:19:43 -0500, Phil Christensen  
</I>&gt;<i> &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">phil at bubblehouse.org</A>&gt; wrote:
</I>&gt;&gt;<i> Yeah, in my experience the server *always* detects the connection   
</I>&gt;&gt;<i> loss and calls logout.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Incidentally, this was with a standard reactor on a UNIXish  
</I>&gt;&gt;<i> system;  I'm relatively sure this works this way on all platforms.
</I>&gt;<i>
</I>&gt;<i> If there is traffic over a connection, a disconnect will always be  
</I>&gt;<i> noticed eventually (it might take a few minutes, though).
</I>&gt;<i>
</I>&gt;<i> If a connection is idle, a disconnect can go unnoticed for a long  
</I>&gt;<i> time.  This
</I>&gt;<i> is just as much a problem with the cred &quot;logout&quot; method as using
</I>&gt;<i> clientConnectionLost (since one relies on the other, of course).
</I>&gt;<i>
</I>&gt;<i> You can address this by using TCP keepalive or an application-level  
</I>&gt;<i> ping/pong
</I>&gt;<i> message every few minutes, to make sure there is traffic on the  
</I>&gt;<i> connection.
</I>&gt;<i>
</I>&gt;<i> Of course your application may always keep the connection busy, so  
</I>&gt;<i> you may
</I>&gt;<i> not need to worry about this at all.
</I>
Yeah, just  another anecdote w.r.t. JP's point here...

While I found that the server was quick to notice disconnects, my  
client -- which is more of a passive participant, primarily receiving  
messages from the server -- would not notice the server disappearing  
until another outgoing message was sent (or attempted to be sent).

I found implementing a noop keepalive took care of that.

JP, could you elaborate on your comment about idle connections? Is  
the PB server supposed to disconnect idle connections after some  
period of time? If so, I'd definitely like to make sure this doesn't  
happen just because someone isn't paying attention to a client in the  
background.

Thanks,

-phil


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014385.html">[Twisted-Python] Keeping a list of connected PB clients
</A></li>
	<LI>Next message: <A HREF="014386.html">[Twisted-Python] Testing protocols without connection?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14387">[ date ]</a>
              <a href="thread.html#14387">[ thread ]</a>
              <a href="subject.html#14387">[ subject ]</a>
              <a href="author.html#14387">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
