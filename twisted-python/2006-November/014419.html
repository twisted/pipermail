<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] trac's reliability
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20trac%27s%20reliability&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014417.html">
   <LINK REL="Next"  HREF="014420.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] trac's reliability</H1>
    <B>exarkun at divmod.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20trac%27s%20reliability&In-Reply-To="
       TITLE="[Twisted-Python] trac's reliability">exarkun at divmod.com
       </A><BR>
    <I>Mon Nov 27 10:07:32 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="014417.html">[Twisted-Python] SQLAlchemy integration
</A></li>
        <LI>Next message: <A HREF="014420.html">[Twisted-Python] trac's reliability
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14419">[ date ]</a>
              <a href="thread.html#14419">[ thread ]</a>
              <a href="subject.html#14419">[ subject ]</a>
              <a href="author.html#14419">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 12:31 am, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jml at mumak.net</A> wrote:
&gt;<i>Hello,
</I>&gt;<i>
</I>&gt;<i>The reliability of our trac instance is ludicrous.  It is becoming
</I>&gt;<i>extremely difficult to do any work on Twisted, particularly during the
</I>&gt;<i>hours when America is asleep.
</I>&gt;<i>
</I>&gt;<i>I'm very grateful for Jp's tireless efforts in making trac work as
</I>&gt;<i>much as it has.  I have some idea of how busy he is, and can imagine
</I>&gt;<i>how frustrating the task must be.  However, we can't continue running
</I>&gt;<i>our issue tracker like this.
</I>&gt;<i>
</I>&gt;<i>First question is, what is causing the outages? People on #twisted
</I>&gt;<i>have commented that they haven't seen similar behaviour on their own
</I>&gt;<i>tracs. The outages are so frequent that this is becoming an FAQ.
</I>
There are several problems:

  Segfaults in the svn bindings - in correspondence with the trac team, I have been told (almost in so many words) that bdb-backed svn repositories are unsupported and we should switch to fsfs.

  Segfaults in the SQLite bindings - likewise, in correspondence with the trac team, I have more or less been told that SQLite is not a supported database engine and that we should switch to PostgreSQL.

  Deadlocks in... who knows where.

&gt;<i>
</I>&gt;<i>The second question is, how can I help trac to work better? Would it
</I>&gt;<i>help to throw more hardware at the problem? Should we switch to
</I>&gt;<i>another tracker? (blech) Are there open tickets on trac itself that I
</I>&gt;<i>could submit patches for?
</I>
It might be possible to resolve the above mentioned problems.

If we convert the repository to fsfs, we might find the segfaults from the svn bindings disappear (of course, we might not - I think we can all recognize the quality of this sort of bug stomping).  In addition to the actual task of converting, involved in this would be some level of investigation into the level of stability of the fsfs backend available in the version of debian used on wolfwood, an effort to package or have packaged a newer version, or an upgrade of wolfwood (however, since even edgy lacks svn 1.4, this probably isn't a useful endeavour).  This may also involve recompiling several packages on pyramid to add fsfs support or remove bdb support.

If we convert the trac database to use PostgreSQL, the SQLite segfaults will hopefully go away. ;)  This involves setting up a PostgreSQL server which we can use for trac (one is running on pyramid now, for the benefit of buildbot, beyond that, what state it is in is not clear to me).  There is a tool available from edgewall which is supposed to be capable of moving data from a SQLite database to a PostgreSQL database.  The various scripts and utilities which we have (eg, the weekly bug summary) may also need to be adjusted (I forget to what extent they are tied to SQLite).  Then, as an ongoing task, someone will need to maintain the PostgreSQL server.

As for the random deadlocks which occur... I see no realistic course of action which is likely to resolve these.  Perhaps, if the above changes are enacted, we will be lucky they will just go away by themselves.  That seems to be the attitude of the trac developers, anyway.

&gt;<i>
</I>&gt;<i>Finally, assuming Twisted's trac isn't going to get much better any
</I>&gt;<i>time soon, I would greatly appreciate being given the permissions and
</I>&gt;<i>training to restore trac. I think it would also be a good idea to
</I>&gt;<i>share the responsibility with someone in a European timezone.
</I>
Before I left last week I set up a cron job to take care of this.  When I returned it was still doing its job, so the level of availability seen over the past week or so may be the highest we can expect until we do something else fundamental to fix the issue.  However, the SSH key you gave me long ago is still in place and you should still have access to restart the server (just connecting should do it).

Personally, I am in favor of switching away from trac, as I have been since
shortly before we adopted it. ;)  The only open question is when the replacement will be ready.

Jean-Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20061127/12e9e154/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20061127/12e9e154/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014417.html">[Twisted-Python] SQLAlchemy integration
</A></li>
	<LI>Next message: <A HREF="014420.html">[Twisted-Python] trac's reliability
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14419">[ date ]</a>
              <a href="thread.html#14419">[ thread ]</a>
              <a href="subject.html#14419">[ subject ]</a>
              <a href="author.html#14419">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
