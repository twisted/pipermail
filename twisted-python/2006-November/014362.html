<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Strange blocking in twisted + quickfix service
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Strange%20blocking%20in%20twisted%20%2B%20quickfix%20service&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014376.html">
   <LINK REL="Next"  HREF="014363.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Strange blocking in twisted + quickfix service</H1>
    <B>Robert Parrott</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Strange%20blocking%20in%20twisted%20%2B%20quickfix%20service&In-Reply-To="
       TITLE="[Twisted-Python] Strange blocking in twisted + quickfix service">robparrott at gmail.com
       </A><BR>
    <I>Wed Nov 15 14:27:29 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="014376.html">[Twisted-Python] Trial Test Runner
</A></li>
        <LI>Next message: <A HREF="014363.html">[Twisted-Python] Strange blocking in twisted + quickfix service
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14362">[ date ]</a>
              <a href="thread.html#14362">[ thread ]</a>
              <a href="subject.html#14362">[ subject ]</a>
              <a href="author.html#14362">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Folks,

I'm trying to wrap the quickfix engine (www.quickfix.org) with a
twisted service, in order to create a standalone daemon that will
respond to RPC-like commands (such as &quot;start&quot;, &quot;stop&quot;, &quot;request
quote&quot;, etc.) However, I'm finding some odd blocking issues that I
need to resolve.

Basically, the twisted service works fine until I start the quickfix
engine (which runs, I believe in a separate thread). Beforehand, calls
to the twisted protocol class I've created invoke methods in the
service, and things don't block. When the quickfix engine is started,
it runs fine, but the main thread, in which the twisted &quot;wrapper&quot;
application runs, seems to block in funny ways.

As an example of this behavior, a connection to the LineReceiver
protocol class I've subclassed will start to execute, but hangs
exactly 12 minutes before proceeding. I.e. the time between telnetting
to the port on which the server is listening and entering a command,
and the time when the logs record that the &quot;lineReceived&quot; method of
the LineReceiver class is invoked, is 12 minutes.

As far as I can tell, everything is running in the same thread except
for the quickfix engine class, so I'm not sure what the hanging
behavior is due to. My understanding is that the twisted.python.log
module, which I'm using to log, is non-blobking, and so shouldn't be
causing this behavior.

Does anyone have any ideas into what might be causing the hang, and
approaches to diagnosing the cause?

Thanks so much,

rob


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014376.html">[Twisted-Python] Trial Test Runner
</A></li>
	<LI>Next message: <A HREF="014363.html">[Twisted-Python] Strange blocking in twisted + quickfix service
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14362">[ date ]</a>
              <a href="thread.html#14362">[ thread ]</a>
              <a href="subject.html#14362">[ subject ]</a>
              <a href="author.html#14362">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
