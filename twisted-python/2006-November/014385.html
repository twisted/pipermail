<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Keeping a list of connected PB clients
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Keeping%20a%20list%20of%20connected%20PB%20clients&In-Reply-To=BEF7A646-B295-4025-9578-224583018AFA%40bubblehouse.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014384.html">
   <LINK REL="Next"  HREF="014387.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Keeping a list of connected PB clients</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Keeping%20a%20list%20of%20connected%20PB%20clients&In-Reply-To=BEF7A646-B295-4025-9578-224583018AFA%40bubblehouse.org"
       TITLE="[Twisted-Python] Keeping a list of connected PB clients">exarkun at divmod.com
       </A><BR>
    <I>Mon Nov 20 09:41:56 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="014384.html">[Twisted-Python] Keeping a list of connected PB clients
</A></li>
        <LI>Next message: <A HREF="014387.html">[Twisted-Python] Keeping a list of connected PB clients
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14385">[ date ]</a>
              <a href="thread.html#14385">[ thread ]</a>
              <a href="subject.html#14385">[ subject ]</a>
              <a href="author.html#14385">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 20 Nov 2006 09:19:43 -0500, Phil Christensen &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">phil at bubblehouse.org</A>&gt; wrote:
&gt;<i>On Nov 19, 2006, at 9:13 PM, Yi Qiang wrote:
</I>&gt;&gt;<i>On 11/19/06, Phil Christensen &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">phil at bubblehouse.org</A>&gt; wrote: On Nov  19, 
</I>&gt;&gt;<i>2006, at 7:00 PM, Yi Qiang wrote:
</I>&gt;&gt;<i> &gt; There does not seem to be a corresponding clientConnectionLost
</I>&gt;&gt;<i> &gt; method for the Factory class.  Any suggestions would be appreciated.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>My approach to this was to put any post-connection cleanup in the
</I>&gt;&gt;<i>Avatar's &quot;logout&quot; method.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Will that method be called regardless of how the client disconnects  from 
</I>&gt;&gt;<i>the server?
</I>&gt;<i>
</I>&gt;<i>Yeah, in my experience the server *always* detects the connection  loss and 
</I>&gt;<i>calls logout.
</I>&gt;<i>
</I>&gt;<i>Incidentally, this was with a standard reactor on a UNIXish system;  I'm 
</I>&gt;<i>relatively sure this works this way on all platforms.
</I>
If there is traffic over a connection, a disconnect will always be noticed eventually (it might take a few minutes, though).

If a connection is idle, a disconnect can go unnoticed for a long time.  This
is just as much a problem with the cred &quot;logout&quot; method as using
clientConnectionLost (since one relies on the other, of course).

You can address this by using TCP keepalive or an application-level ping/pong
message every few minutes, to make sure there is traffic on the connection.

Of course your application may always keep the connection busy, so you may
not need to worry about this at all.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014384.html">[Twisted-Python] Keeping a list of connected PB clients
</A></li>
	<LI>Next message: <A HREF="014387.html">[Twisted-Python] Keeping a list of connected PB clients
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14385">[ date ]</a>
              <a href="thread.html#14385">[ thread ]</a>
              <a href="subject.html#14385">[ subject ]</a>
              <a href="author.html#14385">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
