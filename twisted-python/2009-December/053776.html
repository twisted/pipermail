<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] order of remote requests
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20order%20of%20remote%20requests&In-Reply-To=%3C4B3BDD3F.2050006%40lothar.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="053768.html">
   <LINK REL="Next"  HREF="053764.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] order of remote requests</H1>
    <B>Brian Warner</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20order%20of%20remote%20requests&In-Reply-To=%3C4B3BDD3F.2050006%40lothar.com%3E"
       TITLE="[Twisted-Python] order of remote requests">warner at lothar.com
       </A><BR>
    <I>Wed Dec 30 16:07:43 MST 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="053768.html">[Twisted-Python] order of remote requests
</A></li>
        <LI>Next message (by thread): <A HREF="053764.html">[Twisted-Python] twisted version of openid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53776">[ date ]</a>
              <a href="thread.html#53776">[ thread ]</a>
              <a href="subject.html#53776">[ subject ]</a>
              <a href="author.html#53776">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Andrew Bennetts wrote:

&gt;<i> So it is impossible for the internet to route the messages such that B
</I>&gt;<i> will arrive before A.
</I>&gt;<i> 
</I>&gt;<i> Neither PB nor TCP guarantee anything about when the recipient
</I>&gt;<i> “processes” those messages though, just that they will arrive in the
</I>&gt;<i> order they were sent.  For example consider if A and B arrive very close
</I>&gt;<i> together (in the same millisecond, say) and the client processes them by
</I>&gt;<i> dispatching to a thread pool,
</I>
To expand on what Andrew said: Foolscap (which is descended from PB and
has very similar semantics) makes the following guarantee:

 within any given client/server pair,
 if the client invokes callRemote(A) before invoking callRemote(B)
 then the server will invoke remote_A() before invoking remote_B()

Your server's remote_A() method might return a Deferred, and not fire it
for an arbitrary period of time, whereas it might return an immediate
value from remote_B(). In this case, the client will see the responses
come back in a different order. Your server might also choose to delay
processing of one message for whatever reason (like by dispatching to a
threadpool, or dispatching a request to a third server in order to
service the request), but will be visible in the implementation of
remote_A(). The only promise made by Foolscap and PB is that your
remote_* methods will be invoked in the same order as the sender called
callRemote(*).

(in the future, Foolscap might offer some options to use multiple
connections and send messages over multiple parallel paths, or to
interleave message calls on a single connection, or to switch to UDP or
something, which might weaken this guarantee, but the default will
remain FIFO ordering)

Also note that there are no ordering guarantees between messages sent to
different machines (and therefore over different connections), of course.


cheers,
 -Brian

Foolscap: <A HREF="http://foolscap.lothar.com/trac">http://foolscap.lothar.com/trac</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="053768.html">[Twisted-Python] order of remote requests
</A></li>
	<LI>Next message (by thread): <A HREF="053764.html">[Twisted-Python] twisted version of openid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53776">[ date ]</a>
              <a href="thread.html#53776">[ thread ]</a>
              <a href="subject.html#53776">[ subject ]</a>
              <a href="author.html#53776">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
