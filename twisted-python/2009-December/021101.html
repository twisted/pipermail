<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] AbstractDatagramProtocol implementation question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20AbstractDatagramProtocol%20implementation%20question&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021100.html">
   <LINK REL="Next"  HREF="021105.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] AbstractDatagramProtocol implementation question</H1>
    <B>Olivier Parisy</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20AbstractDatagramProtocol%20implementation%20question&In-Reply-To="
       TITLE="[Twisted-Python] AbstractDatagramProtocol implementation question">olivier.parisy at free.fr
       </A><BR>
    <I>Thu Dec  3 18:33:56 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="021100.html">[Twisted-Python] Help installing twisted rev 27662, OSX10.6,	Python 2.6.4
</A></li>
        <LI>Next message: <A HREF="021105.html">[Twisted-Python] AbstractDatagramProtocol implementation	question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21101">[ date ]</a>
              <a href="thread.html#21101">[ thread ]</a>
              <a href="subject.html#21101">[ subject ]</a>
              <a href="author.html#21101">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am studying the implementation of twisted UDP-related classes, and I 
do not understand the point of the &quot;numPorts&quot; attribute of 
AbstractDatagramProtocol.

It is clearly designed to avoid multiple calls to startProtocol() from 
doStart(), but I fail in imagining a scenario where this may happen 
since, as the comment states, doStart() should only be called by 
makeConnection(), which has an explicit &quot;assert self.transport == None&quot; 
guard which, indeed, prevents multiple calls.

So why bother to count calls?

Moreover, makeConnection() could be called multiple times on the same 
DatagramProtocol instance if it was &quot;bound&quot; to multiple ports (multiple 
calls to listenUDP), which can be an interesting scenario but is 
prevented by :
- the above assertion,
- the fact that AbstractDatagramProtocol.transport is not a collection, 
so only the last Port would be available anyway.

Is my reasoning wrong or incomplete? If not, couldn't we simplify 
AbstractDatagramProtocol implementation by removing numPorts?

Two other small remarks regarding documentation / understandability :
- The note &quot;This does not actually implement IListeningPort&quot; on udp.Port 
lead me to think that IReactorUDP.listenUDP should not be declared as 
returning an object implementing IListeningPort in the first place 
(confused me!).
- I had to read the code to understand that a &quot;transport&quot; and a &quot;port&quot; 
are exactly the same thing in the UDP implementation. The tutorial and 
the documentation were not clear about this point, so I did not make the 
link between the &quot;self.transport&quot; available in DatagramProtocol and the 
value returned by listenUDP (confused me!).

Regards,
Olivier.


</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021100.html">[Twisted-Python] Help installing twisted rev 27662, OSX10.6,	Python 2.6.4
</A></li>
	<LI>Next message: <A HREF="021105.html">[Twisted-Python] AbstractDatagramProtocol implementation	question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21101">[ date ]</a>
              <a href="thread.html#21101">[ thread ]</a>
              <a href="subject.html#21101">[ subject ]</a>
              <a href="author.html#21101">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
