<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] zope.interface
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20zope.interface&In-Reply-To=%3C53CE1BAB-B3F3-4DAC-96CA-4A25264BA15A%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="053694.html">
   <LINK REL="Next"  HREF="053702.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] zope.interface</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20zope.interface&In-Reply-To=%3C53CE1BAB-B3F3-4DAC-96CA-4A25264BA15A%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] zope.interface">glyph at twistedmatrix.com
       </A><BR>
    <I>Tue Dec 15 12:26:59 MST 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="053694.html">[Twisted-Python] zope.interface
</A></li>
        <LI>Next message (by thread): <A HREF="053702.html">[Twisted-Python] zope.interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53695">[ date ]</a>
              <a href="thread.html#53695">[ thread ]</a>
              <a href="subject.html#53695">[ subject ]</a>
              <a href="author.html#53695">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Dec 15, 2009, at 1:11 PM, Jared Gisin wrote:

&gt;<i> I completely fail to see why zope.interface is even needed. It's not Pythonic at all and it contributes to unnecessary code bloat.
</I>
Oh gosh!  You're absolutely right!  I never noticed it before!  I just got out my Pythonic-o-meter and measured Zope Interface!  Apparently it is only 0.44 vRossums!  (For those you familiar only with the SI units, a vRossum is equivalent to one Microtim per cubic meter-second).  We should totally delete all the interfaces in Twisted!

Wait, oops.  I mean, did you even read &lt;<A HREF="http://glyph.twistedmatrix.com/2009/02/explaining-why-interfaces-are-great.html">http://glyph.twistedmatrix.com/2009/02/explaining-why-interfaces-are-great.html</A>&gt;?  There are lots of reasons to have interfaces.

&gt;<i> What's wrong with writing subclasses?
</I>
Lots of things in Twisted are subclasses.  twisted.internet.protocol.Protocol provides a helpful utility base-class for implementing twisted.internet.interfaces.IProtocol.  If you use them for what they're good for, there's nothing wrong with them.

But, as I said in my article, interfaces and classes are for different things.

As a very simple example of what's wrong with subclassing, there are times when having extra superclasses breaks things.  For example: let's say that you want to have an IProtocol implementation that uses __slots__ and doesn't have a __dict__.  Or, you want to do the equivalent thing in C to write a super-optimized IProtocol implementation.

If your documentation says &quot;this parameter must be a Protocol&quot;, then you're stuck.  There's no way to enforce that or provide friendly debugging error messages when you *don't* provide a Protocol; you just have to invoke the appropriate methods and hope it works.  If you do actually subclass Protocol in your application, in the best case you get a class which accidentally inherits a __dict__, and in the worst case you get a base class layout conflict error and you can't even import your module.  There are also lots of ways that metaclasses can conflict, inheritance hierarchies can become awkward and confusing, etc.  This is even worse if the base class you want happens to do some unwanted work in its constructor.

Another use for interfaces is testing.  For example, you can use interfaces to write tests to make sure that your code is up-to-date with the most recent specifications.  Let's say that we have an interface, IFoo, that has a method, 'bar'.  We want to add a method, 'baz', to it.  Now, applications may be claiming to implement IFoo already, so we need to be careful when we invoke 'bar' as it may not be present, but the savvy implementor could use 'verifyObject' to make sure that their MyFoo class properly implemented all the required methods, and IFoo.

There are some things you can kinda-sorta do with metaclasses or introspection to provide similar functionality, but they're highly susceptible to implementation details shifting around.  Metaclasses, in particular, tend to exacerbate the problems I mentioned above with inheritance conflicts and features like __slots__.

Yet another use for interfaces is adaptation.  This is very useful in integration systems like twisted.cred.  The interface object serves as a concise encapsulation of what the calling code wants to get out of cred, and realm implementations can return whatever.

&gt;<i> I've never had a case where that wasn't sufficient.
</I>
Your limited experience isn't necessarily a good argument for what Twisted should or shouldn't do.  There are many people for whom the 'urllib' or 'socket' modules have always been sufficient, but that doesn't mean we're going to give up and go home either.

If you still don't think my reasoning is adequate, you should spend a few years contributing lots of really useful patches to Twisted, then bring this up again.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="053694.html">[Twisted-Python] zope.interface
</A></li>
	<LI>Next message (by thread): <A HREF="053702.html">[Twisted-Python] zope.interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53695">[ date ]</a>
              <a href="thread.html#53695">[ thread ]</a>
              <a href="subject.html#53695">[ subject ]</a>
              <a href="author.html#53695">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
