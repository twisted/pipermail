<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] HTML shoudl not be baked into twisted.web	HTTP	implementation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20HTML%20shoudl%20not%20be%20baked%20into%20twisted.web%0A%09HTTP%09implementation&In-Reply-To=%3C19232.8128.416925.106975%40jon.es%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="053641.html">
   <LINK REL="Next"  HREF="053647.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] HTML shoudl not be baked into twisted.web	HTTP	implementation</H1>
    <B>Terry Jones</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20HTML%20shoudl%20not%20be%20baked%20into%20twisted.web%0A%09HTTP%09implementation&In-Reply-To=%3C19232.8128.416925.106975%40jon.es%3E"
       TITLE="[Twisted-Python] HTML shoudl not be baked into twisted.web	HTTP	implementation">terry at jon.es
       </A><BR>
    <I>Wed Dec  9 15:08:00 MST 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="053641.html">[Twisted-Python] HTML shoudl not be baked into twisted.web HTTP	implementation
</A></li>
        <LI>Next message (by thread): <A HREF="053647.html">[Twisted-Python] HTML shoudl not be baked into twisted.web	HTTPimplementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53644">[ date ]</a>
              <a href="thread.html#53644">[ thread ]</a>
              <a href="subject.html#53644">[ subject ]</a>
              <a href="author.html#53644">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;&gt;&gt;&gt;&gt;<i> &quot;James&quot; == James Y Knight &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">foom at fuhm.net</A>&gt; writes:
</I>James&gt; Essentially every web server on the internet responds with HTML to
James&gt; error conditions, so you should probably modify your client.

But there are plenty of clients that can't or don't want to or shouldn't
have to handle HTML.

James&gt; As I said, I'm all for customizability, but returning HTML bodies
James&gt; for error pages is unambiguously the correct default.

I agree.

This is, I think, a good example of where respecting the Accept header
makes sense. If no Accept header is sent, it's the same as sending */*, in
which case t.web could do as it currently does and send text/html. But if
there is an Accept header you can pass it and the range of response types
you have to a library like <A HREF="http://code.google.com/p/mimeparse/">http://code.google.com/p/mimeparse/</A> and it will
tell you what to send back. Although making an XML and a JSON response
available just in case feels a bit arbitrary, it's no more arbitrary than
an HTML response that was designed to look good to a human with a browser.
They reply contents just need to be documented.

We got this complaint with FluidDB (using t.web), and you also see it
floated in public from time to time - I saw someone complaining on Twitter
about it just the other day.

Another way to mitigate this, at least in the context of errors is to put
more information into returned headers. We added an X-FluidDB-Error-Class
and X-FluidDB-Request-Id that don't require anyone to dig through a body in
some perhaps unpredictable or unhandled format. In simple cases you can
then just omit a payload and a Content-Type altogether.

Terry


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="053641.html">[Twisted-Python] HTML shoudl not be baked into twisted.web HTTP	implementation
</A></li>
	<LI>Next message (by thread): <A HREF="053647.html">[Twisted-Python] HTML shoudl not be baked into twisted.web	HTTPimplementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53644">[ date ]</a>
              <a href="thread.html#53644">[ thread ]</a>
              <a href="subject.html#53644">[ subject ]</a>
              <a href="author.html#53644">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
