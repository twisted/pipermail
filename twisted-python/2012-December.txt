From exarkun at twistedmatrix.com  Sun Dec  2 00:05:23 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 02 Dec 2012 05:05:23 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1354424723.32.1613974279@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121202/26e51939/attachment.htm 

From rutt.4 at osu.edu  Wed Dec  5 22:36:51 2012
From: rutt.4 at osu.edu (Benjamin Rutt)
Date: Wed, 5 Dec 2012 22:36:51 -0500
Subject: [Twisted-Python] inlineCallbacks loses custom exception type?
Message-ID: <CAMWA1_p4ajP5JTSdB_JxSU1vn8RGzW0BL4325R90WOWm3uiK5Q@mail.gmail.com>

Hi,

I am hitting an issue with inlineCallbacks-decorated functions.  It seems
that from within an inlineCallbacks-decorated func, if you yield on another
deferred-returning func, and that deferred-returning func returns a
deferred which will errback with a Failure wrapping a user defined
exception type, then the user defined exception gets repackaged as a common
Exception by the time you are in the inlineCallbacks-decorated function.
It seems to be related to the fact that inside an inlineCallbacks-decorated
func, if you yield on a func, and that func returns a deferred which errs
back, twisted will convert the errback into a synchronous exception that it
raises for you.  That?s all a bit wordy, so maybe some code will help
clarify:

$ cat inlinecallbacks-loses-exception-types.py
#!/usr/bin/env python

import sys, traceback
from twisted.internet         import defer, reactor

class MyException(Exception):
  pass

def go2():
    "An ordinary deferred-returning function that will return a deferred
which is ready to errback()"
    try:
        raise MyException('xyz')
    except Exception as e:
        return defer.fail() # errs back with current exception context

    return defer.succeed(1) # unreachable code

@defer.inlineCallbacks
def go_inlinecb():
    try:
        x = yield go2()
        print 'no exception raised'
    except MyException as e:
        print 'got my custom exception'
        traceback.print_exc()
    except Exception as e:
        print 'got a garden variety exception'
        traceback.print_exc()

def go_noinlinecb():
    d = go2()
    def cb(data):
        print 'got data in cb: %s' % (data)
    def eb(failure):
        try:
            failure.raiseException()
        except MyException as e:
            print 'got my custom exception'
            traceback.print_exc()
        except Exception as e:
            print 'got a garden variety exception'
            traceback.print_exc()
    d.addCallbacks(cb, eb)

if sys.argv[1] == 'inline':
    reactor.callWhenRunning(go_inlinecb)
elif sys.argv[1] == 'noinline':
    reactor.callWhenRunning(go_noinlinecb)
reactor.callLater(2, reactor.stop)
reactor.run()

$ ./inlinecallbacks-loses-exception-types.py inline
got a garden variety exception
Traceback (most recent call last):
  File "./inlinecallbacks-loses-exception-types.py", line 21, in go_inlinecb
    x = yield go2()
Exception: xyz

$ ./inlinecallbacks-loses-exception-types.py noinline
got my custom exception
Traceback (most recent call last):
  File "./inlinecallbacks-loses-exception-types.py", line 36, in eb
    failure.raiseException()
  File
"/sw/external/twisted-py27-11.0.0/lib/python/twisted/python/failure.py",
line 338, in raiseException
    raise self.type, self.value, self.tb
MyException: xyz

So as you can see, it seems that if you use inlineCallbacks, you cannot
?except MyException? and catch your own custom exceptions.  Somehow a
generic Exception is constructed.  Is there any workaround or is this a
known issue?

Thanks,

-- 
Benjamin Rutt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121205/8fa4c263/attachment.htm 

From tom.prince at ualberta.net  Wed Dec  5 23:00:31 2012
From: tom.prince at ualberta.net (Tom Prince)
Date: Wed, 05 Dec 2012 21:00:31 -0700
Subject: [Twisted-Python] inlineCallbacks loses custom exception type?
In-Reply-To: <CAMWA1_p4ajP5JTSdB_JxSU1vn8RGzW0BL4325R90WOWm3uiK5Q@mail.gmail.com>
References: <CAMWA1_p4ajP5JTSdB_JxSU1vn8RGzW0BL4325R90WOWm3uiK5Q@mail.gmail.com>
Message-ID: <877govakyo.fsf@hermes.hocat.ca>

Using the slightly simplified code (nothing uses the reactor, so do
stuff synchronosuly):

import sys, traceback
from twisted.internet import defer
 
class MyException(Exception):
  pass
 
def go2():
    "An ordinary deferred-returning function that will return a deferred which is ready to errback()"
    try:
        raise MyException('xyz')
    except Exception:
        return defer.fail() # errs back with current exception context
 
    return defer.succeed(1) # unreachable code
 
@defer.inlineCallbacks
def go_inlinecb():
    try:
        yield go2()
        print 'no exception raised'
    except MyException:
        print 'got my custom exception'
        traceback.print_exc()
    except Exception:
        print 'got a garden variety exception'
        traceback.print_exc()
 
def go_noinlinecb():
    d = go2()
    def cb(data):
        print 'got data in cb: %s' % (data)
    def eb(failure):
        try:
            failure.raiseException()
        except MyException:
            print 'got my custom exception'
            traceback.print_exc()
        except Exception:
            print 'got a garden variety exception'
            traceback.print_exc()
    d.addCallbacks(cb, eb)
 
if sys.argv[1] == 'inline':
    go_inlinecb()
elif sys.argv[1] == 'noinline':
    go_noinlinecb()


I get the follwing results:

% python test.py noinline
got my custom exception
Traceback (most recent call last):
  File "test.py", line 36, in eb
    failure.raiseException()
  File "/usr/lib64/python2.7/site-packages/twisted/python/failure.py", line 370, in raiseException
    raise self.type, self.value, self.tb
MyException: xyz

% python test.py inline  
got my custom exception
Traceback (most recent call last):
  File "test.py", line 21, in go_inlinecb
    yield go2()
MyException: xyz


This is with
% python --version
Python 2.7.3
% python -c 'import twisted; print twisted.__version__'
12.2.0

  Tom



From rodrigc at crodrigues.org  Thu Dec  6 04:25:34 2012
From: rodrigc at crodrigues.org (Craig Rodrigues)
Date: Thu, 6 Dec 2012 01:25:34 -0800
Subject: [Twisted-Python] Download instructions for twisted and
 ActiveState Python
In-Reply-To: <E10AEED1-CD54-4CA4-A2AF-577F8EE62A70@twistedmatrix.com>
References: <CAG=rPVcAObwspoMpg8T7P-TVgyeFsepx7XZ6VeXpjJ881mc4_g@mail.gmail.com>
	<E10AEED1-CD54-4CA4-A2AF-577F8EE62A70@twistedmatrix.com>
Message-ID: <CAG=rPVdnvmw1qqGES0HJ0dRqHyhE5=1c3AjoveEhJrG+HkKuhw@mail.gmail.com>

Hi,

Sure, I can add this to the wiki.  My trac id is rodrigc.

--
Craig Rodrigues
rodrigc at crodrigues.org



On Thu, Nov 29, 2012 at 12:45 PM, Glyph <glyph at twistedmatrix.com> wrote:

>
> On Nov 29, 2012, at 3:08 PM, Craig Rodrigues <rodrigc at crodrigues.org>
> wrote:
>
> Hi,
>
> At some of the Twisted Sprints in San Francisco,
> I found that on my Windows laptop, it was
> easy to set things up Twisted quickly by using the
> ActiveState Python package manager (pypm).
>
> I wrote some notes for doing this at:
> http://home.comcast.net/~rodrigc/python/twisted_install.html
>
> Rather than keep that info on my own web page, I thought
> it would be nice to contribute the information back to the Twisted wiki.
> This would not be the official way of installing Twisted on
> Windows, but would be some helpful information for
> an alternative way to install things on Windows.
>
> Since I do not have wiki edit permissions, I made a patch
> to http://twistedmatrix.com/trac/wiki/Downloads .
> If someone could help get this info on the wiki that would
> be great.
>
>
> Thanks for doing this; but, we mostly have wiki edit permissions just to
> keep out the spammers.  If you'd like to edit the wiki, just ask!  (with
> your trac username).
>
> -g
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
Craig Rodrigues
rodrigc at crodrigues.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121206/83a5200c/attachment.htm 

From glyph at twistedmatrix.com  Thu Dec  6 15:53:32 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 6 Dec 2012 12:53:32 -0800
Subject: [Twisted-Python] Download instructions for twisted and
	ActiveState Python
In-Reply-To: <CAG=rPVdnvmw1qqGES0HJ0dRqHyhE5=1c3AjoveEhJrG+HkKuhw@mail.gmail.com>
References: <CAG=rPVcAObwspoMpg8T7P-TVgyeFsepx7XZ6VeXpjJ881mc4_g@mail.gmail.com>
	<E10AEED1-CD54-4CA4-A2AF-577F8EE62A70@twistedmatrix.com>
	<CAG=rPVdnvmw1qqGES0HJ0dRqHyhE5=1c3AjoveEhJrG+HkKuhw@mail.gmail.com>
Message-ID: <B072FBD8-0978-4182-945D-A43D2CCC9627@twistedmatrix.com>


On Dec 6, 2012, at 1:25 AM, Craig Rodrigues <rodrigc at crodrigues.org> wrote:

> On Thu, Nov 29, 2012 at 12:45 PM, Glyph <glyph at twistedmatrix.com> wrote:
> 
> On Nov 29, 2012, at 3:08 PM, Craig Rodrigues <rodrigc at crodrigues.org> wrote:
> 
>> Hi,
>> 
>> At some of the Twisted Sprints in San Francisco,
>> I found that on my Windows laptop, it was
>> easy to set things up Twisted quickly by using the
>> ActiveState Python package manager (pypm).
>> 
>> I wrote some notes for doing this at:
>> http://home.comcast.net/~rodrigc/python/twisted_install.html
>> 
>> Rather than keep that info on my own web page, I thought
>> it would be nice to contribute the information back to the Twisted wiki.
>> This would not be the official way of installing Twisted on
>> Windows, but would be some helpful information for
>> an alternative way to install things on Windows.
>> 
>> Since I do not have wiki edit permissions, I made a patch
>> to http://twistedmatrix.com/trac/wiki/Downloads .
>> If someone could help get this info on the wiki that would
>> be great.
> 
> Thanks for doing this; but, we mostly have wiki edit permissions just to keep out the spammers.  If you'd like to edit the wiki, just ask!  (with your trac username).
> 
> Sure, I can add this to the wiki.  My trac id is rodrigc.


Congratulations, you are now a trac editor.

(In the future, please post in-line rather than at the top; it makes archived messages easier to read on their own.)

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121206/8d9bfa0e/attachment.htm 

From exarkun at twistedmatrix.com  Fri Dec  7 10:00:52 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 07 Dec 2012 15:00:52 -0000
Subject: [Twisted-Python] inlineCallbacks loses custom exception type?
In-Reply-To: <CAMWA1_p4ajP5JTSdB_JxSU1vn8RGzW0BL4325R90WOWm3uiK5Q@mail.gmail.com>
References: <CAMWA1_p4ajP5JTSdB_JxSU1vn8RGzW0BL4325R90WOWm3uiK5Q@mail.gmail.com>
Message-ID: <20121207150052.4119.778504989.divmod.xquotient.3@localhost6.localdomain6>

On 6 Dec, 03:36 am, rutt.4 at osu.edu wrote:
>
>$ ./inlinecallbacks-loses-exception-types.py inline
>got a garden variety exception
>Traceback (most recent call last):
>  File "./inlinecallbacks-loses-exception-types.py", line 21, in 
>go_inlinecb
>    x = yield go2()
>Exception: xyz

I'm unable to reproduce this error behavior using Twisted trunk at HEAD on 
Ubuntu 12.04.

Jean-Paul


From rutt.4 at osu.edu  Fri Dec  7 21:03:07 2012
From: rutt.4 at osu.edu (Benjamin Rutt)
Date: Fri, 7 Dec 2012 21:03:07 -0500
Subject: [Twisted-Python] inlineCallbacks loses custom exception type?
In-Reply-To: <20121207150052.4119.778504989.divmod.xquotient.3@localhost6.localdomain6>
References: <CAMWA1_p4ajP5JTSdB_JxSU1vn8RGzW0BL4325R90WOWm3uiK5Q@mail.gmail.com>
	<20121207150052.4119.778504989.divmod.xquotient.3@localhost6.localdomain6>
Message-ID: <CAMWA1_qvOjQzPJLbKzPufSifAMuGhabdHUmt_cy9xa3ysL3dRQ@mail.gmail.com>

That's a useful data point, thanks.  I usually don't use unreleased
revisions of twisted, but I'll try the latest release for starters and see
what the result is.  Forgot to mention before, I am on python 2.7.1 and
twisted 11.0.0, so there's a chance this is fixed in a later release from
what I am running.

On Fri, Dec 7, 2012 at 10:00 AM, <exarkun at twistedmatrix.com> wrote:

> On 6 Dec, 03:36 am, rutt.4 at osu.edu wrote:
> >
> >$ ./inlinecallbacks-loses-exception-types.py inline
> >got a garden variety exception
> >Traceback (most recent call last):
> >  File "./inlinecallbacks-loses-exception-types.py", line 21, in
> >go_inlinecb
> >    x = yield go2()
> >Exception: xyz
>
> I'm unable to reproduce this error behavior using Twisted trunk at HEAD on
> Ubuntu 12.04.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
>


-- 
Benjamin Rutt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121207/b9595e01/attachment.htm 

From miha.valencic at gmail.com  Sat Dec  8 19:17:50 2012
From: miha.valencic at gmail.com (Miha Valencic)
Date: Sun, 9 Dec 2012 01:17:50 +0100
Subject: [Twisted-Python] Limiting the number of connections
Message-ID: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>

Hi!

I have developed a simple twisted tcp server which does ldap lookups
as a result of user input. I would like to limit the number of
connections each listener (I have 4, each on its own port)  accepts. I
guess people usually want to accept as many connections as possible,
but I would like to limit them.


From exarkun at twistedmatrix.com  Sun Dec  9 00:05:23 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 09 Dec 2012 05:05:23 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1355029523.35.53415949@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121209/9137dd65/attachment.htm 

From adi at roiban.ro  Sun Dec  9 04:44:11 2012
From: adi at roiban.ro (Adi Roiban)
Date: Sun, 9 Dec 2012 11:44:11 +0200
Subject: [Twisted-Python] Limiting the number of connections
In-Reply-To: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>
References: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>
Message-ID: <CAFycZ9cguG7dBDV7rk0t5TygB_F2L=de81_TzhR6bo95_aPeyQ@mail.gmail.com>

Hi,

On 9 December 2012 02:17, Miha Valencic <miha.valencic at gmail.com> wrote:
> Hi!
>
> I have developed a simple twisted tcp server which does ldap lookups
> as a result of user input. I would like to limit the number of
> connections each listener (I have 4, each on its own port)  accepts. I
> guess people usually want to accept as many connections as possible,
> but I would like to limit them.
>
> From what I've read (a single post from 2009):
> "As you observed, doing this on the server accepts and then
> immediately closes the connection. There is no way to not accept the
> connection. This is a limitation of the underlying platform APIs."
>
> Is this still the case? We can't limit the number of accepted connections?
>
Just to summarize:

* twisted.protocols.policies.LimitTotalConnectionsFactory is not what
you want since the server is still listening on the port?
LimitTotalConnectionsFactory is only returning a different protocol to
handle the overflow.... closing the new connection is a way to handle
the overflow.

* After a number of connections the server should stop listening on
the port... and then tor re-start listening after the connections are
closed?

Cheers,

-- 
Adi Roiban


From miha.valencic at gmail.com  Sun Dec  9 05:31:07 2012
From: miha.valencic at gmail.com (Miha Valencic)
Date: Sun, 9 Dec 2012 11:31:07 +0100
Subject: [Twisted-Python] Limiting the number of connections
In-Reply-To: <CAFycZ9cguG7dBDV7rk0t5TygB_F2L=de81_TzhR6bo95_aPeyQ@mail.gmail.com>
References: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>
	<CAFycZ9cguG7dBDV7rk0t5TygB_F2L=de81_TzhR6bo95_aPeyQ@mail.gmail.com>
Message-ID: <CA+_DGnQ-XsFwxCmiEvr48+52umDBYzkGb9+Vw-MeAkhRN-FcSA@mail.gmail.com>

Hi Adi!

Let me say upfront, that I'm not seeing any problems as of now. I am
asking this question out of engineering curiosity mostly and to know
whta to do if the problem would arose.

On Sun, Dec 9, 2012 at 10:44 AM, Adi Roiban <adi at roiban.ro> wrote:
> Hi,
> Just to summarize:
>
> * twisted.protocols.policies.LimitTotalConnectionsFactory is not what
> you want since the server is still listening on the port?
> LimitTotalConnectionsFactory is only returning a different protocol to
> handle the overflow.... closing the new connection is a way to handle
> the overflow.

I've never heard of LimitTotalConnectionsFactory before. This
particular mode of operation is desirable, since the client is
connected and disconnected. I was aiming more towards a usual approach
within webservers, where they have a certain amount of tcp workers,
and size of the waiting queue. That way the client does not get
disconnected, but waits a little and then gets a result. You know how
to webserver sometimes times out...

But, really, thinking about it, this factory is the right after all.
Akin to "http 550 service unavailable" when the service is not able to
respond to requests. If I understand the description correctly,
defining custom protocol that write "unavailable" and closes
connection, setting this protocol as a overflowProtocol would have the
exact behaviour I am after.

> * After a number of connections the server should stop listening on
> the port... and then tor re-start listening after the connections are
> closed?

No, the server shouldn't accept() the socket after n connections are
opened(). But see previous paragraph.

Regards, Miha.


From itamar at itamarst.org  Sun Dec  9 07:57:16 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Sun, 09 Dec 2012 07:57:16 -0500
Subject: [Twisted-Python] Limiting the number of connections
In-Reply-To: <CA+_DGnQ-XsFwxCmiEvr48+52umDBYzkGb9+Vw-MeAkhRN-FcSA@mail.gmail.com>
References: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>
	<CAFycZ9cguG7dBDV7rk0t5TygB_F2L=de81_TzhR6bo95_aPeyQ@mail.gmail.com>
	<CA+_DGnQ-XsFwxCmiEvr48+52umDBYzkGb9+Vw-MeAkhRN-FcSA@mail.gmail.com>
Message-ID: <50C48AAC.4020505@itamarst.org>

On 12/09/2012 05:31 AM, Miha Valencic wrote:
> No, the server shouldn't accept() the socket after n connections are
> opened(). But see previous paragraph.

You can stop accept()ing by calling stopReading() on the returned port 
object:

port = reactor.listenTCP(....)
port.stopReading()

And start again by calling startReading().

However:
  - When you are accept()ing, it will accept() a few at a time.
  - Even if you stop accept()ing, the OS will still do TCP handshakes, 
approximately up to a limit determined by one of the arguments passed to 
listenTCP.
  - After hitting the limit, clients will get connection refused, IIRC.

In general it's better to do a protocol-level solution, as Adi Roiban 
suggested.


From adi at roiban.ro  Sun Dec  9 08:04:28 2012
From: adi at roiban.ro (Adi Roiban)
Date: Sun, 9 Dec 2012 15:04:28 +0200
Subject: [Twisted-Python] Limiting the number of connections
In-Reply-To: <CA+_DGnQ-XsFwxCmiEvr48+52umDBYzkGb9+Vw-MeAkhRN-FcSA@mail.gmail.com>
References: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>
	<CAFycZ9cguG7dBDV7rk0t5TygB_F2L=de81_TzhR6bo95_aPeyQ@mail.gmail.com>
	<CA+_DGnQ-XsFwxCmiEvr48+52umDBYzkGb9+Vw-MeAkhRN-FcSA@mail.gmail.com>
Message-ID: <CAFycZ9c5o=7VArbo=5nqRTqc--jLtJY-xnt7efuS6riUawB0LA@mail.gmail.com>

On 9 December 2012 12:31, Miha Valencic <miha.valencic at gmail.com> wrote:
> Hi Adi!
>
> Let me say upfront, that I'm not seeing any problems as of now. I am
> asking this question out of engineering curiosity mostly and to know
> whta to do if the problem would arose.
>
> On Sun, Dec 9, 2012 at 10:44 AM, Adi Roiban <adi at roiban.ro> wrote:
>> Hi,
>> Just to summarize:
>>
>> * twisted.protocols.policies.LimitTotalConnectionsFactory is not what
>> you want since the server is still listening on the port?
>> LimitTotalConnectionsFactory is only returning a different protocol to
>> handle the overflow.... closing the new connection is a way to handle
>> the overflow.
>
> I've never heard of LimitTotalConnectionsFactory before. This
> particular mode of operation is desirable, since the client is
> connected and disconnected. I was aiming more towards a usual approach
> within webservers, where they have a certain amount of tcp workers,
> and size of the waiting queue. That way the client does not get
> disconnected, but waits a little and then gets a result. You know how
> to webserver sometimes times out...
>
> But, really, thinking about it, this factory is the right after all.
> Akin to "http 550 service unavailable" when the service is not able to
> respond to requests. If I understand the description correctly,
> defining custom protocol that write "unavailable" and closes
> connection, setting this protocol as a overflowProtocol would have the
> exact behaviour I am after.

Yes. You can implement a simple HTTP protocol which always returns 503
or some other code.

>> * After a number of connections the server should stop listening on
>> the port... and then tor re-start listening after the connections are
>> closed?
>
> No, the server shouldn't accept() the socket after n connections are
> opened(). But see previous paragraph.

I think that we are talking about different "accepts", but
LimitTotalConnectionsFactory should do your job.

Cheers
-- 
Adi Roiban


From miha.valencic at gmail.com  Sun Dec  9 08:07:27 2012
From: miha.valencic at gmail.com (Miha Valencic)
Date: Sun, 9 Dec 2012 14:07:27 +0100
Subject: [Twisted-Python] Limiting the number of connections
In-Reply-To: <50C48AAC.4020505@itamarst.org>
References: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>
	<CAFycZ9cguG7dBDV7rk0t5TygB_F2L=de81_TzhR6bo95_aPeyQ@mail.gmail.com>
	<CA+_DGnQ-XsFwxCmiEvr48+52umDBYzkGb9+Vw-MeAkhRN-FcSA@mail.gmail.com>
	<50C48AAC.4020505@itamarst.org>
Message-ID: <CA+_DGnSUZ37PGwwLyBveKYhNDkEDyHYeYvAQXcXOeWde=9px0g@mail.gmail.com>

Itamar, I agree. After reading Adi Roiban's proposed solution I think
it is the correct way to handle such scenarios.

Regards,
 Miha.

On Sun, Dec 9, 2012 at 1:57 PM, Itamar Turner-Trauring
<itamar at itamarst.org> wrote:
> On 12/09/2012 05:31 AM, Miha Valencic wrote:
>> No, the server shouldn't accept() the socket after n connections are
>> opened(). But see previous paragraph.
>
> You can stop accept()ing by calling stopReading() on the returned port
> object:
>
> port = reactor.listenTCP(....)
> port.stopReading()
>
> And start again by calling startReading().
>
> However:
>   - When you are accept()ing, it will accept() a few at a time.
>   - Even if you stop accept()ing, the OS will still do TCP handshakes,
> approximately up to a limit determined by one of the arguments passed to
> listenTCP.
>   - After hitting the limit, clients will get connection refused, IIRC.
>
> In general it's better to do a protocol-level solution, as Adi Roiban
> suggested.
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From adi at roiban.ro  Sun Dec  9 08:14:54 2012
From: adi at roiban.ro (Adi Roiban)
Date: Sun, 9 Dec 2012 15:14:54 +0200
Subject: [Twisted-Python] Limiting the number of connections
In-Reply-To: <50C48AAC.4020505@itamarst.org>
References: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>
	<CAFycZ9cguG7dBDV7rk0t5TygB_F2L=de81_TzhR6bo95_aPeyQ@mail.gmail.com>
	<CA+_DGnQ-XsFwxCmiEvr48+52umDBYzkGb9+Vw-MeAkhRN-FcSA@mail.gmail.com>
	<50C48AAC.4020505@itamarst.org>
Message-ID: <CAFycZ9eYw6=xncVNVdgyFxrQecQMJk-TDzn9ARWCvTU5bbcgyg@mail.gmail.com>

On 9 December 2012 14:57, Itamar Turner-Trauring <itamar at itamarst.org> wrote:
> On 12/09/2012 05:31 AM, Miha Valencic wrote:
>> No, the server shouldn't accept() the socket after n connections are
>> opened(). But see previous paragraph.
>
> You can stop accept()ing by calling stopReading() on the returned port
> object:
>
> port = reactor.listenTCP(....)
> port.stopReading()
>
> And start again by calling startReading().
[snip]

Many thanks for you explanation.

Checking the documentation I can read that reactor.listenTCP returns
an IListeningPort [1]
Checking IListeningPort I can read that it has no stopReading() ,
startReading() methods [2]

Can you please advise how and when to use startReading vs startListening ?

Many thanks!

[1] http://twistedmatrix.com/documents/12.2.0/api/twisted.internet.interfaces.IReactorTCP.html#listenTCP
[2] http://twistedmatrix.com/documents/12.2.0/api/twisted.internet.interfaces.IListeningPort.html

-- 
Adi Roiban


From itamar at itamarst.org  Sun Dec  9 08:23:29 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Sun, 09 Dec 2012 08:23:29 -0500
Subject: [Twisted-Python] Limiting the number of connections
In-Reply-To: <CAFycZ9eYw6=xncVNVdgyFxrQecQMJk-TDzn9ARWCvTU5bbcgyg@mail.gmail.com>
References: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>
	<CAFycZ9cguG7dBDV7rk0t5TygB_F2L=de81_TzhR6bo95_aPeyQ@mail.gmail.com>
	<CA+_DGnQ-XsFwxCmiEvr48+52umDBYzkGb9+Vw-MeAkhRN-FcSA@mail.gmail.com>
	<50C48AAC.4020505@itamarst.org>
	<CAFycZ9eYw6=xncVNVdgyFxrQecQMJk-TDzn9ARWCvTU5bbcgyg@mail.gmail.com>
Message-ID: <50C490D1.9020909@itamarst.org>

On 12/09/2012 08:14 AM, Adi Roiban wrote:
> Many thanks for you explanation.
>
> Checking the documentation I can read that reactor.listenTCP returns
> an IListeningPort [1]
> Checking IListeningPort I can read that it has no stopReading() ,
> startReading() methods [2]
>
> Can you please advise how and when to use startReading vs startListening ?
A port object is also typically a IReadWriteFileDescriptor or whatever 
the interface is, though perhaps not on IOCP, or some other hypothetical 
future reactor. startListening() does the opposite of stopListening(), 
it's completely different than stop/startReading - the former pair are 
permanent 'open or close the socket', vs. the latter 'unregister socket 
from event loop temporarily'.

In any case, as I said, doing stopReading() on a TCP port is not 
particularly useful, much better to handle it in factory and protocol level.


From adi at roiban.ro  Sun Dec  9 08:25:07 2012
From: adi at roiban.ro (Adi Roiban)
Date: Sun, 9 Dec 2012 15:25:07 +0200
Subject: [Twisted-Python] Limiting the number of connections
In-Reply-To: <CAFycZ9eYw6=xncVNVdgyFxrQecQMJk-TDzn9ARWCvTU5bbcgyg@mail.gmail.com>
References: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>
	<CAFycZ9cguG7dBDV7rk0t5TygB_F2L=de81_TzhR6bo95_aPeyQ@mail.gmail.com>
	<CA+_DGnQ-XsFwxCmiEvr48+52umDBYzkGb9+Vw-MeAkhRN-FcSA@mail.gmail.com>
	<50C48AAC.4020505@itamarst.org>
	<CAFycZ9eYw6=xncVNVdgyFxrQecQMJk-TDzn9ARWCvTU5bbcgyg@mail.gmail.com>
Message-ID: <CAFycZ9dLi2zMe_JybPcpt6RwEgimKtP7xj1esr3j=UqOYL4=ow@mail.gmail.com>

On 9 December 2012 15:14, Adi Roiban <adi at roiban.ro> wrote:
> On 9 December 2012 14:57, Itamar Turner-Trauring <itamar at itamarst.org> wrote:
>> On 12/09/2012 05:31 AM, Miha Valencic wrote:
>>> No, the server shouldn't accept() the socket after n connections are
>>> opened(). But see previous paragraph.
>>
>> You can stop accept()ing by calling stopReading() on the returned port
>> object:
>>
>> port = reactor.listenTCP(....)
>> port.stopReading()
>>
>> And start again by calling startReading().
> [snip]
>
> Many thanks for you explanation.
>
> Checking the documentation I can read that reactor.listenTCP returns
> an IListeningPort [1]
> Checking IListeningPort I can read that it has no stopReading() ,
> startReading() methods [2]
>
> Can you please advise how and when to use startReading vs startListening ?

I would like to rephrase my previous question:

I understood that stopListening() is closing the listening socket,
while stopReading does not closed the listening socket, but rather
stops from handling new connection using the attached factory ... and
new connections are queued in the backlog.

What interfaces defines startReading/stopReading for a TCP Port?

Thanks!

-- 
Adi Roiban


From adi at roiban.ro  Sun Dec  9 08:31:08 2012
From: adi at roiban.ro (Adi Roiban)
Date: Sun, 9 Dec 2012 15:31:08 +0200
Subject: [Twisted-Python] Limiting the number of connections
In-Reply-To: <50C490D1.9020909@itamarst.org>
References: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>
	<CAFycZ9cguG7dBDV7rk0t5TygB_F2L=de81_TzhR6bo95_aPeyQ@mail.gmail.com>
	<CA+_DGnQ-XsFwxCmiEvr48+52umDBYzkGb9+Vw-MeAkhRN-FcSA@mail.gmail.com>
	<50C48AAC.4020505@itamarst.org>
	<CAFycZ9eYw6=xncVNVdgyFxrQecQMJk-TDzn9ARWCvTU5bbcgyg@mail.gmail.com>
	<50C490D1.9020909@itamarst.org>
Message-ID: <CAFycZ9cTGc=s-iA4qknqF1=ihesa5Y3WHZadr=rfPGtT7Sgq7g@mail.gmail.com>

On 9 December 2012 15:23, Itamar Turner-Trauring <itamar at itamarst.org> wrote:
> On 12/09/2012 08:14 AM, Adi Roiban wrote:
>> Many thanks for you explanation.
>>
>> Checking the documentation I can read that reactor.listenTCP returns
>> an IListeningPort [1]
>> Checking IListeningPort I can read that it has no stopReading() ,
>> startReading() methods [2]
>>
>> Can you please advise how and when to use startReading vs startListening ?
> A port object is also typically a IReadWriteFileDescriptor or whatever
> the interface is, though perhaps not on IOCP, or some other hypothetical
> future reactor. startListening() does the opposite of stopListening(),
> it's completely different than stop/startReading - the former pair are
> permanent 'open or close the socket', vs. the latter 'unregister socket
> from event loop temporarily'.
>
> In any case, as I said, doing stopReading() on a TCP port is not
> particularly useful, much better to handle it in factory and protocol level.

Many thanks! That answered my question.

-- 
Adi Roiban


From meejah at meejah.ca  Sun Dec  9 15:08:06 2012
From: meejah at meejah.ca (meejah at meejah.ca)
Date: Sun, 09 Dec 2012 13:08:06 -0700
Subject: [Twisted-Python] twisted logo use?
Message-ID: <E1ThnAU-0003zE-S3@panthalassa.cg.shawcable.net>

A non-text attachment was scrubbed...
Name: txtorcon-logo-truncated-150px.png
Type: image/png
Size: 16327 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20121209/f1c6af0c/attachment.png 

From glyph at twistedmatrix.com  Mon Dec 10 19:04:01 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 10 Dec 2012 16:04:01 -0800
Subject: [Twisted-Python] twisted logo use?
In-Reply-To: <E1ThnAU-0003zE-S3@panthalassa.cg.shawcable.net>
References: <E1ThnAU-0003zE-S3@panthalassa.cg.shawcable.net>
Message-ID: <8F6AFFB9-3A7E-4A38-8EAE-5C7EE186E7CC@twistedmatrix.com>

On Dec 9, 2012, at 12:08 PM, meejah at meejah.ca wrote:

> Is this an acceptable (ab)use of the twisted logo? I can't find
> anything obvious on twistedmatrix.com about this sort of thing.

Hi Meejah,

Thanks for asking.  Speaking (officially) on behalf of the project leadership committee, we approve of this usage.

And thanks for using Twisted :).

You're absolutely right that we need to have a page on twistedmatrix.com explaining trademark policy, and probably we should set up a dedicated email alias.  We'll do this in our collective copious free time, you should see an announcement on this list when it's ready.

-glyph

From msc at contact.de  Wed Dec 12 08:22:50 2012
From: msc at contact.de (Michael Schlenker)
Date: Wed, 12 Dec 2012 14:22:50 +0100
Subject: [Twisted-Python] How to get the Python socket object for an TLS
	connection?
Message-ID: <50C8852A.8000605@contact.de>

Hi,

i use twisted for some volume streaming over fat pipes (10 GE) and need
to tweak the rcv and send buffer sizes when streaming via
socket.setsockopt(). Otherwise Twisted spends lots of time calling the
producer with tiny blocksizes and writing those tiny buffers to the tiny
OS buffer. Speedup for streaming was around 40x when using a large
buffer instead of default block and buffer sizes, so this is really needed.

I'm using Twisted 12.2.

It works fine when using reactor.listenTCP(), but fails when using
reactor.listenSSL() because transport.getHandle() does not return a
socket object in that case (i get some SSL.Connection object instead).

I already saw the TLSMemoryBIOProtocol, so there should be some way to
get at the real socket object. Do i just need to skip the listenSSL()
step and use the steps outlined in
http://twistedmatrix.com/documents/12.2.0/api/twisted.protocols.tls.html ?

import os
import socket
from twisted.internet import reactor
from twisted.web import server, http, resource
from twisted.internet.ssl import DefaultOpenSSLContextFactory

port = 2000
bufsize = 4*1024*1024

class HTTPChannel(http.HTTPChannel):
  def connectionMade(self):
      sock = self.transport.getHandle()
      # this fails, but works when using listenTCP()
      sock.setsockopt(socket.SOL_SOCKET, socket.SO_RCVBUF, bufsize)

def main():
    keyfile = os.path.join('certs', 'server-key.pem')
    certfile = os.path.join('certs', 'server.pem')
    ctx = DefaultOpenSSLContextFactory(keyfile, certfile)
    site = server.Site(resource.NoResource())
    site.protocol = HTTPChannel
    reactor.listenSSL(port, site, ctx)
    reactor.run()

Michael

-- 
Michael Schlenker
Software Architect

CONTACT Software GmbH           Tel.:   +49 (421) 20153-80
Wiener Stra?e 1-3               Fax:    +49 (421) 20153-41
28359 Bremen
http://www.contact.de/          E-Mail: msc at contact.de

Sitz der Gesellschaft: Bremen
Gesch?ftsf?hrer: Karl Heinz Zachries, Ralf Holtgrefe
Eingetragen im Handelsregister des Amtsgerichts Bremen unter HRB 13215


From msc at contact.de  Wed Dec 12 08:56:50 2012
From: msc at contact.de (Michael Schlenker)
Date: Wed, 12 Dec 2012 14:56:50 +0100
Subject: [Twisted-Python] How to get the Python socket object for an TLS
 connection?
In-Reply-To: <50C8852A.8000605@contact.de>
References: <50C8852A.8000605@contact.de>
Message-ID: <50C88D22.8080900@contact.de>

Hi,

answering my own post at least a bit...

It seems the issue is that TLSMemoryBIOProtocol shadows the getHandle()
method from the original TCPTransport, if i rename it to getHandle2() in
TLSMemoryBIOProtocol all works fine (but obviously other stuff will break).

Looks like Ticket #5182 is only fixed 95% of the way if one needs to
access getHandle() of the underlying TCPTransport.

Are there any easy workarounds to get the socket handle anyway?

Michael


Am 12.12.2012 14:22, schrieb Michael Schlenker:
> Hi,
> 
> i use twisted for some volume streaming over fat pipes (10 GE) and need
> to tweak the rcv and send buffer sizes when streaming via
> socket.setsockopt(). Otherwise Twisted spends lots of time calling the
> producer with tiny blocksizes and writing those tiny buffers to the tiny
> OS buffer. Speedup for streaming was around 40x when using a large
> buffer instead of default block and buffer sizes, so this is really needed.
> 
> I'm using Twisted 12.2.
> 
> It works fine when using reactor.listenTCP(), but fails when using
> reactor.listenSSL() because transport.getHandle() does not return a
> socket object in that case (i get some SSL.Connection object instead).
> 
> I already saw the TLSMemoryBIOProtocol, so there should be some way to
> get at the real socket object. Do i just need to skip the listenSSL()
> step and use the steps outlined in
> http://twistedmatrix.com/documents/12.2.0/api/twisted.protocols.tls.html ?
> 
> import os
> import socket
> from twisted.internet import reactor
> from twisted.web import server, http, resource
> from twisted.internet.ssl import DefaultOpenSSLContextFactory
> 
> port = 2000
> bufsize = 4*1024*1024
> 
> class HTTPChannel(http.HTTPChannel):
>   def connectionMade(self):
>       sock = self.transport.getHandle()
>       # this fails, but works when using listenTCP()
>       sock.setsockopt(socket.SOL_SOCKET, socket.SO_RCVBUF, bufsize)
> 
> def main():
>     keyfile = os.path.join('certs', 'server-key.pem')
>     certfile = os.path.join('certs', 'server.pem')
>     ctx = DefaultOpenSSLContextFactory(keyfile, certfile)
>     site = server.Site(resource.NoResource())
>     site.protocol = HTTPChannel
>     reactor.listenSSL(port, site, ctx)
>     reactor.run()
> 
> Michael
> 


-- 
Michael Schlenker
Software Architect

CONTACT Software GmbH           Tel.:   +49 (421) 20153-80
Wiener Stra?e 1-3               Fax:    +49 (421) 20153-41
28359 Bremen
http://www.contact.de/          E-Mail: msc at contact.de

Sitz der Gesellschaft: Bremen
Gesch?ftsf?hrer: Karl Heinz Zachries, Ralf Holtgrefe
Eingetragen im Handelsregister des Amtsgerichts Bremen unter HRB 13215


From itamar at futurefoundries.com  Wed Dec 12 09:11:42 2012
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Wed, 12 Dec 2012 09:11:42 -0500
Subject: [Twisted-Python] How to get the Python socket object for an TLS
	connection?
In-Reply-To: <50C8852A.8000605@contact.de>
References: <50C8852A.8000605@contact.de>
Message-ID: <CAOp9P3o+LEaBWOTYZVPCbOQp6o7aJNv7QkftfZUvCOGPMZfvwQ@mail.gmail.com>

On Wed, Dec 12, 2012 at 8:22 AM, Michael Schlenker <msc at contact.de> wrote:

> Hi,
>
> i use twisted for some volume streaming over fat pipes (10 GE) and need
> to tweak the rcv and send buffer sizes when streaming via
> socket.setsockopt(). Otherwise Twisted spends lots of time calling the
> producer with tiny blocksizes and writing those tiny buffers to the tiny
> OS buffer. Speedup for streaming was around 40x when using a large
> buffer instead of default block and buffer sizes, so this is really needed.
>
> I'm using Twisted 12.2.
>
> It works fine when using reactor.listenTCP(), but fails when using
> reactor.listenSSL() because transport.getHandle() does not return a
> socket object in that case (i get some SSL.Connection object instead).
>

Probably the thing to do is listenTCP() rather than listenSSL(), and then:

class YourProtocol(BaseProtocol):
    def connectionMade(self):
        self.transport.getHandle().setsockopt(...)
        self.transport.startTLS(contextFactory)
        BaseProtocol.connectionMade(self)

Ideally, of course, Twisted would have an API for changing the
producer/consumer buffer sizes and corresponding OS buffers.

-- 
Itamar Turner-Trauring, Future Foundries LLC
http://futurefoundries.com/ ? Twisted consulting, training and support.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121212/88db6eb0/attachment.htm 

From akaradag at NETAS.com.tr  Wed Dec 12 09:52:49 2012
From: akaradag at NETAS.com.tr (Anil  KARADAG)
Date: Wed, 12 Dec 2012 16:52:49 +0200
Subject: [Twisted-Python] how to change default reactor of twisted.internet?
Message-ID: <AFE3D52FC015A5408CD28098BD0439C6B752A3@netasmx.netas.lab.nortel.com>

Hi all,

 

 

I have a question about reactor of "twisted.internet" module. I found
below;

 

 

The default reactor is "select";

 

[root at karadag internet]# pwd

/usr/lib/python2.6/site-packages/Twisted-10.0.0-py2.6-linux-x86_64.egg/t
wisted/internet

[root at karadag internet]# cat reactor.py

# Copyright (c) 2001-2008 Twisted Matrix Laboratories.

# See LICENSE for details.

 

"""

The reactor is the Twisted event loop within Twisted, the loop which
drives

applications using Twisted. The reactor provides APIs for networking,

threading, dispatching events, and more.

 

The default reactor is based on C{select(2)} and will be installed if
this

module is imported without another reactor being explicitly installed.

Regardless of which reactor is installed, importing this module is the
correct

way to get a reference to it.

 

New application code should prefer to pass and accept the reactor as a

parameter where it is needed, rather than relying on being able to
import this

module to get a reference.  This simplifies unit testing and may make it
easier

to one day support multiple reactors (as a performance enhancement),
though

this is not currently possible.

 

@see: L{IReactorCore<twisted.internet.interfaces.IReactorCore>}

@see: L{IReactorTime<twisted.internet.interfaces.IReactorTime>}

@see: L{IReactorProcess<twisted.internet.interfaces.IReactorProcess>}

@see: L{IReactorTCP<twisted.internet.interfaces.IReactorTCP>}

@see: L{IReactorSSL<twisted.internet.interfaces.IReactorSSL>}

@see: L{IReactorUDP<twisted.internet.interfaces.IReactorUDP>}

@see:
L{IReactorMulticast<twisted.internet.interfaces.IReactorMulticast>}

@see: L{IReactorUNIX<twisted.internet.interfaces.IReactorUNIX>}

@see:
L{IReactorUNIXDatagram<twisted.internet.interfaces.IReactorUNIXDatagram>
}

@see: L{IReactorFDSet<twisted.internet.interfaces.IReactorFDSet>}

@see: L{IReactorThreads<twisted.internet.interfaces.IReactorThreads>}

@see:
L{IReactorArbitrary<twisted.internet.interfaces.IReactorArbitrary>}

@see:
L{IReactorPluggableResolver<twisted.internet.interfaces.IReactorPluggabl
eResolver>}

"""

 

import sys

del sys.modules['twisted.internet.reactor']

from twisted.internet import selectreactor

selectreactor.install()

 

 

---------------------------------------------------------------

 

 

[root at karadag internet]# twistd --help

Usage: twistd [options]

Options:

...

 

  -r, --reactor=         Which reactor to use (see --help-reactors for a
list of

                         possibilities)

      --help             Display this help and exit.

 

twistd reads a twisted.application.service.Application out of a file and
runs

it.

Commands:

    ftp                          An FTP server.

    telnet                       A simple, telnet-based remote debugging

                                 service.

    socks                        A SOCKSv4 proxy service.

    manhole-old                  An interactive remote debugger service.

    portforward                  A simple port-forwarder.

    web                          A general-purpose web server which can
serve

                                 from a filesystem or application
resource.

    inetd                        An inetd(8) replacement.

    news                         A news server.

    wokkel-component-server      An XMPP Component Server

    xmpp-router                  An XMPP Router server

    words                        A modern words server

    toc                          An AIM TOC service.

    dns                          A domain name server.

    mail                         An email service

    manhole                      An interactive remote debugger service

                                 accessible via telnet and ssh and
providing

                                 syntax coloring and basic line editing

                                 functionality.

    conch                        A Conch SSH service.

 

 

thanks

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121212/5ce111e8/attachment-0001.htm 

From itamar at itamarst.org  Wed Dec 12 10:06:33 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Wed, 12 Dec 2012 10:06:33 -0500
Subject: [Twisted-Python] how to change default reactor of
	twisted.internet?
In-Reply-To: <AFE3D52FC015A5408CD28098BD0439C6B752A3@netasmx.netas.lab.nortel.com>
References: <AFE3D52FC015A5408CD28098BD0439C6B752A3@netasmx.netas.lab.nortel.com>
Message-ID: <50C89D79.1040403@itamarst.org>

On 12/12/2012 09:52 AM, Anil KARADAG wrote:
>
> Hi all,
>
> I have a question about reactor of ?twisted.internet? module. I found 
> below;
>
> The default reactor is ?select?;
>
>
In newer versions of Twisted the default is not select, it may be poll 
or epoll depending on platform.

You are probably asking "how do I set the reactor", this is covered in 
http://twistedmatrix.com/documents/current/core/howto/choosing-reactor.html 
- if that is not your question you might want to explain a bit better 
what you need to know.


From stephen at thorne.id.au  Wed Dec 12 10:08:43 2012
From: stephen at thorne.id.au (Stephen Thorne)
Date: Wed, 12 Dec 2012 15:08:43 +0000
Subject: [Twisted-Python] how to change default reactor of
	twisted.internet?
In-Reply-To: <AFE3D52FC015A5408CD28098BD0439C6B752A3@netasmx.netas.lab.nortel.com>
References: <AFE3D52FC015A5408CD28098BD0439C6B752A3@netasmx.netas.lab.nortel.com>
Message-ID: <CAFPU7=tb3rnAhxgAfCG3Bv2Er63-4p5W6B4BstXDqY+mwwTGzA@mail.gmail.com>

What is your question?


On Wed, Dec 12, 2012 at 2:52 PM, Anil KARADAG <akaradag at netas.com.tr> wrote:

> Hi all,****
>
> ** **
>
> ** **
>
> I have a question about reactor of ?twisted.internet? module. I found
> below;****
>
> ** **
>
> ** **
>
> The default reactor is ?select?;****
>
> ** **
>
> [root at karadag internet]# pwd****
>
> *
> /usr/lib/python2.6/site-packages/Twisted-10.0.0-py2.6-linux-x86_64.egg/twisted/internet
> *
>
> *[root at karadag internet]# cat reactor.py*
>
> # Copyright (c) 2001-2008 Twisted Matrix Laboratories.****
>
> # See LICENSE for details.****
>
> ** **
>
> """****
>
> The reactor is the Twisted event loop within Twisted, the loop which drives
> ****
>
> applications using Twisted. The reactor provides APIs for networking,****
>
> threading, dispatching events, and more.****
>
> ** **
>
> The default reactor is based on C{select(2)} and will be installed if this
> ****
>
> module is imported without another reactor being explicitly installed.****
>
> Regardless of which reactor is installed, importing this module is the
> correct****
>
> way to get a reference to it.****
>
> ** **
>
> New application code should prefer to pass and accept the reactor as a****
>
> parameter where it is needed, rather than relying on being able to import
> this****
>
> module to get a reference.  This simplifies unit testing and may make it
> easier****
>
> to one day support multiple reactors (as a performance enhancement), though
> ****
>
> this is not currently possible.****
>
> ** **
>
> @see: L{IReactorCore<twisted.internet.interfaces.IReactorCore>}****
>
> @see: L{IReactorTime<twisted.internet.interfaces.IReactorTime>}****
>
> @see: L{IReactorProcess<twisted.internet.interfaces.IReactorProcess>}****
>
> @see: L{IReactorTCP<twisted.internet.interfaces.IReactorTCP>}****
>
> @see: L{IReactorSSL<twisted.internet.interfaces.IReactorSSL>}****
>
> @see: L{IReactorUDP<twisted.internet.interfaces.IReactorUDP>}****
>
> @see: L{IReactorMulticast<twisted.internet.interfaces.IReactorMulticast>}*
> ***
>
> @see: L{IReactorUNIX<twisted.internet.interfaces.IReactorUNIX>}****
>
> @see:
> L{IReactorUNIXDatagram<twisted.internet.interfaces.IReactorUNIXDatagram>}*
> ***
>
> @see: L{IReactorFDSet<twisted.internet.interfaces.IReactorFDSet>}****
>
> @see: L{IReactorThreads<twisted.internet.interfaces.IReactorThreads>}****
>
> @see: L{IReactorArbitrary<twisted.internet.interfaces.IReactorArbitrary>}*
> ***
>
> @see:
> L{IReactorPluggableResolver<twisted.internet.interfaces.IReactorPluggableResolver>}
> ****
>
> """****
>
> ** **
>
> *import sys*
>
> *del sys.modules['twisted.internet.reactor']*
>
> *from twisted.internet import selectreactor*
>
> *selectreactor.install()*
>
> ** **
>
> ** **
>
> ---------------------------------------------------------------****
>
> ** **
>
> ** **
>
> [root at karadag internet]# twistd --help****
>
> Usage: twistd [options]****
>
> Options:****
>
> ?****
>
> ** **
>
> *  -r, --reactor=         Which reactor to use (see --help-reactors for a
> list of*
>
> *                         possibilities)*
>
>       --help             Display this help and exit.****
>
> ** **
>
> twistd reads a twisted.application.service.Application out of a file and
> runs****
>
> it.****
>
> Commands:****
>
>     ftp                          An FTP server.****
>
>     telnet                       A simple, telnet-based remote debugging**
> **
>
>                                  service.****
>
>     socks                        A SOCKSv4 proxy service.****
>
>     manhole-old                  An interactive remote debugger service.**
> **
>
>     portforward                  A simple port-forwarder.****
>
>     web                          A general-purpose web server which can
> serve****
>
>                                  from a filesystem or application resource.
> ****
>
>     inetd                        An inetd(8) replacement.****
>
>     news                         A news server.****
>
>     wokkel-component-server      An XMPP Component Server****
>
>     xmpp-router                  An XMPP Router server****
>
>     words                        A modern words server****
>
>     toc                          An AIM TOC service.****
>
>     dns                          A domain name server.****
>
>     mail                         An email service****
>
>     manhole                      An interactive remote debugger service***
> *
>
>                                  accessible via telnet and ssh and
> providing****
>
>                                  syntax coloring and basic line editing***
> *
>
>                                  functionality.****
>
>     conch                        A Conch SSH service.****
>
> ** **
>
> ** **
>
> thanks****
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121212/912e1477/attachment.htm 

From _ at lvh.cc  Wed Dec 12 10:10:02 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Wed, 12 Dec 2012 16:10:02 +0100
Subject: [Twisted-Python] how to change default reactor of
	twisted.internet?
In-Reply-To: <AFE3D52FC015A5408CD28098BD0439C6B752A3@netasmx.netas.lab.nortel.com>
References: <AFE3D52FC015A5408CD28098BD0439C6B752A3@netasmx.netas.lab.nortel.com>
Message-ID: <CAE_Hg6Zc1b95M980+k2f8ZJaAT2TFOUyWuCN5cXLtzxLWTL8=A@mail.gmail.com>

You should update your twisted install; it'll pick a better default then
"select" on most platforms.

For installing other reactors, see individual reactor's documentation, e.g:

https://twistedmatrix.com/documents/current/api/twisted.internet.cfreactor.html

(because individual reactors may require special magic)


On Wed, Dec 12, 2012 at 3:52 PM, Anil KARADAG <akaradag at netas.com.tr> wrote:

> Hi all,****
>
> ** **
>
> ** **
>
> I have a question about reactor of ?twisted.internet? module. I found
> below;****
>
> ** **
>
> ** **
>
> The default reactor is ?select?;****
>
> ** **
>
> [root at karadag internet]# pwd****
>
> *
> /usr/lib/python2.6/site-packages/Twisted-10.0.0-py2.6-linux-x86_64.egg/twisted/internet
> *
>
> *[root at karadag internet]# cat reactor.py*
>
> # Copyright (c) 2001-2008 Twisted Matrix Laboratories.****
>
> # See LICENSE for details.****
>
> ** **
>
> """****
>
> The reactor is the Twisted event loop within Twisted, the loop which drives
> ****
>
> applications using Twisted. The reactor provides APIs for networking,****
>
> threading, dispatching events, and more.****
>
> ** **
>
> The default reactor is based on C{select(2)} and will be installed if this
> ****
>
> module is imported without another reactor being explicitly installed.****
>
> Regardless of which reactor is installed, importing this module is the
> correct****
>
> way to get a reference to it.****
>
> ** **
>
> New application code should prefer to pass and accept the reactor as a****
>
> parameter where it is needed, rather than relying on being able to import
> this****
>
> module to get a reference.  This simplifies unit testing and may make it
> easier****
>
> to one day support multiple reactors (as a performance enhancement), though
> ****
>
> this is not currently possible.****
>
> ** **
>
> @see: L{IReactorCore<twisted.internet.interfaces.IReactorCore>}****
>
> @see: L{IReactorTime<twisted.internet.interfaces.IReactorTime>}****
>
> @see: L{IReactorProcess<twisted.internet.interfaces.IReactorProcess>}****
>
> @see: L{IReactorTCP<twisted.internet.interfaces.IReactorTCP>}****
>
> @see: L{IReactorSSL<twisted.internet.interfaces.IReactorSSL>}****
>
> @see: L{IReactorUDP<twisted.internet.interfaces.IReactorUDP>}****
>
> @see: L{IReactorMulticast<twisted.internet.interfaces.IReactorMulticast>}*
> ***
>
> @see: L{IReactorUNIX<twisted.internet.interfaces.IReactorUNIX>}****
>
> @see:
> L{IReactorUNIXDatagram<twisted.internet.interfaces.IReactorUNIXDatagram>}*
> ***
>
> @see: L{IReactorFDSet<twisted.internet.interfaces.IReactorFDSet>}****
>
> @see: L{IReactorThreads<twisted.internet.interfaces.IReactorThreads>}****
>
> @see: L{IReactorArbitrary<twisted.internet.interfaces.IReactorArbitrary>}*
> ***
>
> @see:
> L{IReactorPluggableResolver<twisted.internet.interfaces.IReactorPluggableResolver>}
> ****
>
> """****
>
> ** **
>
> *import sys*
>
> *del sys.modules['twisted.internet.reactor']*
>
> *from twisted.internet import selectreactor*
>
> *selectreactor.install()*
>
> ** **
>
> ** **
>
> ---------------------------------------------------------------****
>
> ** **
>
> ** **
>
> [root at karadag internet]# twistd --help****
>
> Usage: twistd [options]****
>
> Options:****
>
> ?****
>
> ** **
>
> *  -r, --reactor=         Which reactor to use (see --help-reactors for a
> list of*
>
> *                         possibilities)*
>
>       --help             Display this help and exit.****
>
> ** **
>
> twistd reads a twisted.application.service.Application out of a file and
> runs****
>
> it.****
>
> Commands:****
>
>     ftp                          An FTP server.****
>
>     telnet                       A simple, telnet-based remote debugging**
> **
>
>                                  service.****
>
>     socks                        A SOCKSv4 proxy service.****
>
>     manhole-old                  An interactive remote debugger service.**
> **
>
>     portforward                  A simple port-forwarder.****
>
>     web                          A general-purpose web server which can
> serve****
>
>                                  from a filesystem or application resource.
> ****
>
>     inetd                        An inetd(8) replacement.****
>
>     news                         A news server.****
>
>     wokkel-component-server      An XMPP Component Server****
>
>     xmpp-router                  An XMPP Router server****
>
>     words                        A modern words server****
>
>     toc                          An AIM TOC service.****
>
>     dns                          A domain name server.****
>
>     mail                         An email service****
>
>     manhole                      An interactive remote debugger service***
> *
>
>                                  accessible via telnet and ssh and
> providing****
>
>                                  syntax coloring and basic line editing***
> *
>
>                                  functionality.****
>
>     conch                        A Conch SSH service.****
>
> ** **
>
> ** **
>
> thanks****
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121212/b213bc31/attachment-0001.htm 

From therve at free.fr  Fri Dec 14 09:06:46 2012
From: therve at free.fr (=?ISO-8859-1?Q?Thomas_Herv=E9?=)
Date: Fri, 14 Dec 2012 15:06:46 +0100
Subject: [Twisted-Python] First pre-release of Twisted 12.3.0
Message-ID: <50CB3276.5090808@free.fr>

Hello everyone,

Yes, you're reading well. For the first time ever (since 2008), we're
actually pushing not 2, not 3, but 4 releases in a calendar year! Just
to be able to use the fancy 12.3 version number.

But, apart from this nice label, this release also closes 158 tickets,
among them:

 * Support for local parallel testing in trial

 * A new "react" function to easily run a single asynchronous function
in a script with the reactor.

 * Partial support for Python 3.3.

Note that only Python 2.7 is supported on Windows now. We also require
zope.interface 3.6.0 or newer.

You can find the tarballs of the pre-release here:
    http://twistedmatrix.com/~therve/12.3.0pre1/

For more information, see the NEWS file.

Please download the tarballs and test them!

-- 
Thomas


From kevin.horn at gmail.com  Fri Dec 14 09:25:48 2012
From: kevin.horn at gmail.com (Kevin Horn)
Date: Fri, 14 Dec 2012 08:25:48 -0600
Subject: [Twisted-Python] First pre-release of Twisted 12.3.0
In-Reply-To: <50CB3276.5090808@free.fr>
References: <50CB3276.5090808@free.fr>
Message-ID: <CA+U=zK2f5-oQe2pjQCfiN1j2Nb2n+CEyGr1Cu_x5F1eAOeUh=A@mail.gmail.com>

<happydance/>


On Fri, Dec 14, 2012 at 8:06 AM, Thomas Herv? <therve at free.fr> wrote:

> Hello everyone,
>
> Yes, you're reading well. For the first time ever (since 2008), we're
> actually pushing not 2, not 3, but 4 releases in a calendar year! Just
> to be able to use the fancy 12.3 version number.
>
> But, apart from this nice label, this release also closes 158 tickets,
> among them:
>
>  * Support for local parallel testing in trial
>
>  * A new "react" function to easily run a single asynchronous function
> in a script with the reactor.
>
>  * Partial support for Python 3.3.
>
> Note that only Python 2.7 is supported on Windows now. We also require
> zope.interface 3.6.0 or newer.
>
> You can find the tarballs of the pre-release here:
>     http://twistedmatrix.com/~therve/12.3.0pre1/
>
> For more information, see the NEWS file.
>
> Please download the tarballs and test them!
>
> --
> Thomas
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
--
Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121214/fd319424/attachment.htm 

From teratorn at gmail.com  Fri Dec 14 12:11:56 2012
From: teratorn at gmail.com (Eric P. Mangold)
Date: Fri, 14 Dec 2012 11:11:56 -0600
Subject: [Twisted-Python] First pre-release of Twisted 12.3.0
In-Reply-To: <50CB3276.5090808@free.fr>
References: <50CB3276.5090808@free.fr>
Message-ID: <CAMCvQ9swqAhnBcHOLH8ULPr8qR6vvNY2E1kLwY7rDTx53mAVjA@mail.gmail.com>

Awesome work, Thomas.

I have an issue with this pre-release on OpenBSD. setup.py aborts trying to
compile sendmsg.c

This is a known bug that has a patch, and is presently awaiting a review.
http://twistedmatrix.com/trac/ticket/5907

I would like to request a new pre-release with this fix once it has been
reviewed and merged. (someone? pretty please?)

Cheers,
-E

On Fri, Dec 14, 2012 at 8:06 AM, Thomas Herv? <therve at free.fr> wrote:

> Hello everyone,
>
> Yes, you're reading well. For the first time ever (since 2008), we're
> actually pushing not 2, not 3, but 4 releases in a calendar year! Just
> to be able to use the fancy 12.3 version number.
>
> But, apart from this nice label, this release also closes 158 tickets,
> among them:
>
>  * Support for local parallel testing in trial
>
>  * A new "react" function to easily run a single asynchronous function
> in a script with the reactor.
>
>  * Partial support for Python 3.3.
>
> Note that only Python 2.7 is supported on Windows now. We also require
> zope.interface 3.6.0 or newer.
>
> You can find the tarballs of the pre-release here:
>     http://twistedmatrix.com/~therve/12.3.0pre1/
>
> For more information, see the NEWS file.
>
> Please download the tarballs and test them!
>
> --
> Thomas
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121214/a7b3b7db/attachment.htm 

From glyph at twistedmatrix.com  Fri Dec 14 17:04:40 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 14 Dec 2012 14:04:40 -0800
Subject: [Twisted-Python] First pre-release of Twisted 12.3.0
In-Reply-To: <CAMCvQ9swqAhnBcHOLH8ULPr8qR6vvNY2E1kLwY7rDTx53mAVjA@mail.gmail.com>
References: <50CB3276.5090808@free.fr>
	<CAMCvQ9swqAhnBcHOLH8ULPr8qR6vvNY2E1kLwY7rDTx53mAVjA@mail.gmail.com>
Message-ID: <A6A786CC-3E21-49EA-AFDB-077C513E5EA9@twistedmatrix.com>


On Dec 14, 2012, at 9:11 AM, Eric P. Mangold <teratorn at gmail.com> wrote:

> Awesome work, Thomas.
> 
> I have an issue with this pre-release on OpenBSD. setup.py aborts trying to compile sendmsg.c
> 
> This is a known bug that has a patch, and is presently awaiting a review.
> http://twistedmatrix.com/trac/ticket/5907
> 
> I would like to request a new pre-release with this fix once it has been reviewed and merged. (someone? pretty please?)
> 
> Cheers,
> -E
> 

Hi Eric,

We generally don't issue new pre-releases for issues that are not regressions.  Thomas is the release manager in this case so it is his call, but it would be nice to get the 12.* releases all out within 2012 :).  I think it'd be a lot better to focus on this for 13.0, and try to push for 13.0 to be released sooner rather than 12.3 to be released later.

Not only is this ticket not a regression, and is OpenBSD not a supported platform for Twisted, but it looks like we don't even have an un-supported builder for that platform, so other developers would have a hard time reviewing the ticket without setting up their own personal virtualization infrastructure.  In the meanwhile you might want to consider provisioning and contributing an OpenBSD buildbot, so we can start the process of transitioning it from unsupported to supported.

As far as getting your ticket reviewed, The best way to get your tickets reviewed is to do code reviews for other people, so that when a reviewer with some free time comes around, you'll be first in the queue.  Unfortunately it looks like your ticket is dead last at the moment, so clearing out any other reviews would be extra helpful in its case!

	<http://twistedmatrix.com/trac/report/15>

Since clearing the _whole_ queue is probably an impossible amount of effort, personally I'd be happy to offer you the same deal that Martin van L?wis pioneered on the Python core mailing list: if you do five code reviews, I'll review a ticket of your choice, virtualization infrastructure hassles notwithstanding :).

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121214/ef530470/attachment.htm 

From itamar at itamarst.org  Fri Dec 14 18:32:28 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Fri, 14 Dec 2012 18:32:28 -0500
Subject: [Twisted-Python] First pre-release of Twisted 12.3.0
In-Reply-To: <A6A786CC-3E21-49EA-AFDB-077C513E5EA9@twistedmatrix.com>
References: <50CB3276.5090808@free.fr>
	<CAMCvQ9swqAhnBcHOLH8ULPr8qR6vvNY2E1kLwY7rDTx53mAVjA@mail.gmail.com>
	<A6A786CC-3E21-49EA-AFDB-077C513E5EA9@twistedmatrix.com>
Message-ID: <50CBB70C.4060508@itamarst.org>

On 12/14/2012 05:04 PM, Glyph wrote:
> Not only is this ticket not a regression, and is OpenBSD not a 
> supported platform for Twisted, but it looks like we don't even have 
> an /un-/supported builder for that platform, so other developers would 
> have a hard time reviewing the ticket without setting up their own 
> personal virtualization infrastructure.  In the meanwhile you might 
> want to consider provisioning and contributing an OpenBSD buildbot, so 
> we can start the process of transitioning it from unsupported to 
> supported.
>
We have access to the Snakebite farm now, which I'm pretty sure would 
allow us to setup an OpenBSD builder.


From eric at teratorn.org  Fri Dec 14 19:31:55 2012
From: eric at teratorn.org (Eric P. Mangold)
Date: Fri, 14 Dec 2012 19:31:55 -0500
Subject: [Twisted-Python] First pre-release of Twisted 12.3.0
In-Reply-To: <A6A786CC-3E21-49EA-AFDB-077C513E5EA9@twistedmatrix.com>
References: <50CB3276.5090808@free.fr>
	<CAMCvQ9swqAhnBcHOLH8ULPr8qR6vvNY2E1kLwY7rDTx53mAVjA@mail.gmail.com>
	<A6A786CC-3E21-49EA-AFDB-077C513E5EA9@twistedmatrix.com>
Message-ID: <20121215003155.GN2279@ragnarok.teratorn.org>

On Fri, Dec 14, 2012 at 02:04:40PM -0800, Glyph wrote:
> 
> On Dec 14, 2012, at 9:11 AM, Eric P. Mangold <teratorn at gmail.com> wrote:
> 
> > Awesome work, Thomas.
> > 
> > I have an issue with this pre-release on OpenBSD. setup.py aborts trying to compile sendmsg.c
> > 
> > This is a known bug that has a patch, and is presently awaiting a review.
> > http://twistedmatrix.com/trac/ticket/5907
> > 
> > I would like to request a new pre-release with this fix once it has been reviewed and merged. (someone? pretty please?)
> > 
> > Cheers,
> > -E
> > 
> 
> Hi Eric,
> 
> We generally don't issue new pre-releases for issues that are not regressions.  Thomas is the release manager in this case so it is his call, but it would be nice to get the 12.* releases all out within 2012 :).  I think it'd be a lot better to focus on this for 13.0, and try to push for 13.0 to be released sooner rather than 12.3 to be released later.
> 
> Not only is this ticket not a regression, and is OpenBSD not a supported platform for Twisted, but it looks like we don't even have an un-supported builder for that platform, so other developers would have a hard time reviewing the ticket without setting up their own personal virtualization infrastructure.  In the meanwhile you might want to consider provisioning and contributing an OpenBSD buildbot, so we can start the process of transitioning it from unsupported to supported.

Hi Glyph,

Technically, it's only NOT a regression BECAUSE OpenBSD is not a supported platform (yet). It's clearly a regression of functionality, because releases of Twisted prior to sendmsg.c did not have any issue building on OpenBSD (afaik). But I agree with the definition of regression being constrained to behaviors on supported platforms only...
 
OTOH - the bug is trivial, and the fix is also trivial, and has been verified by two people (the original patch author, and myself). Yes it still needs to pass review, but *possibly* this will not delay the release much... as long as it's out by Christmas, that is soon enough, right? =)

In my mind, it's fairly embarrassing that our setup.py is borked on the 2nd most popular BSD, and so I would still like to ask Thomas if he wouldn't mind trying to fit this in. But as you say - it is his call :)

> As far as getting your ticket reviewed, The best way to get your tickets reviewed is to do code reviews for other people, so that when a reviewer with some free time comes around, you'll be first in the queue.  Unfortunately it looks like your ticket is dead last at the moment, so clearing out any other reviews would be extra helpful in its case!
> 
> 	<http://twistedmatrix.com/trac/report/15>
> 
> Since clearing the _whole_ queue is probably an impossible amount of effort, personally I'd be happy to offer you the same deal that Martin van L?wis pioneered on the Python core mailing list: if you do five code reviews, I'll review a ticket of your choice, virtualization infrastructure hassles notwithstanding :).

It's a fair deal - but with things as they are, I barely have time to do even the small bits of work that I do. When it comes to reviews, I'm afraid I'll probably always be a beggar :/

Oh, and uh technically, since I have not changed the original author's patch (hence, I am not the original author of the code) I can perform the review on this patch myself? I believe I have done this before, and unless there is some objection, I guess I can go ahead and do that...

Oh and yes - I AM going to see about getting some OpenBSD buildslaves, whether via Snakebite farm, or some other route.

Cheers,
-E


From glyph at twistedmatrix.com  Fri Dec 14 19:24:17 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 14 Dec 2012 16:24:17 -0800
Subject: [Twisted-Python] First pre-release of Twisted 12.3.0
In-Reply-To: <50CBB70C.4060508@itamarst.org>
References: <50CB3276.5090808@free.fr>
	<CAMCvQ9swqAhnBcHOLH8ULPr8qR6vvNY2E1kLwY7rDTx53mAVjA@mail.gmail.com>
	<A6A786CC-3E21-49EA-AFDB-077C513E5EA9@twistedmatrix.com>
	<50CBB70C.4060508@itamarst.org>
Message-ID: <939DF39F-8A0D-4DE1-8992-5AC4F248D4C8@twistedmatrix.com>


On Dec 14, 2012, at 3:32 PM, Itamar Turner-Trauring <itamar at itamarst.org> wrote:

> We have access to the Snakebite farm now, which I'm pretty sure would 
> allow us to setup an OpenBSD builder.

Cool.  And by "cool", I mean, I'm still not going to do it :).  Would it be possible to get someone interested - such as Eric - the appropriate snakebite credentials so they can do it?

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121214/13dbfcde/attachment-0001.htm 

From itamar at itamarst.org  Fri Dec 14 19:45:41 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Fri, 14 Dec 2012 19:45:41 -0500
Subject: [Twisted-Python] First pre-release of Twisted 12.3.0
In-Reply-To: <20121215003155.GN2279@ragnarok.teratorn.org>
References: <50CB3276.5090808@free.fr>
	<CAMCvQ9swqAhnBcHOLH8ULPr8qR6vvNY2E1kLwY7rDTx53mAVjA@mail.gmail.com>
	<A6A786CC-3E21-49EA-AFDB-077C513E5EA9@twistedmatrix.com>
	<20121215003155.GN2279@ragnarok.teratorn.org>
Message-ID: <50CBC835.1040206@itamarst.org>

On 12/14/2012 07:31 PM, Eric P. Mangold wrote:
> Oh, and uh technically, since I have not changed the original author's patch (hence, I am not the original author of the code) I can perform the review on this patch myself? I believe I have done this before, and unless there is some objection, I guess I can go ahead and do that...
>
I've definitely gotten a patch or two in where the verification was done 
manually by a reviewer due to obscureness of the platform and lack of 
current buildslave (*cough*python-gi*cough*). So I'd say yes. But having 
a build machine is *much* better.


From glyph at twistedmatrix.com  Fri Dec 14 19:58:27 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 14 Dec 2012 16:58:27 -0800
Subject: [Twisted-Python] First pre-release of Twisted 12.3.0
In-Reply-To: <20121215003155.GN2279@ragnarok.teratorn.org>
References: <50CB3276.5090808@free.fr>
	<CAMCvQ9swqAhnBcHOLH8ULPr8qR6vvNY2E1kLwY7rDTx53mAVjA@mail.gmail.com>
	<A6A786CC-3E21-49EA-AFDB-077C513E5EA9@twistedmatrix.com>
	<20121215003155.GN2279@ragnarok.teratorn.org>
Message-ID: <980CCB41-CA7B-4B2B-A653-F06CBD99CB55@twistedmatrix.com>


On Dec 14, 2012, at 4:31 PM, "Eric P. Mangold" <eric at teratorn.org> wrote:

> On Fri, Dec 14, 2012 at 02:04:40PM -0800, Glyph wrote:
>> 
>> On Dec 14, 2012, at 9:11 AM, Eric P. Mangold <teratorn at gmail.com> wrote:
>> 
>>> Awesome work, Thomas.
>>> 
>>> I have an issue with this pre-release on OpenBSD. setup.py aborts trying to compile sendmsg.c
>>> 
>>> This is a known bug that has a patch, and is presently awaiting a review.
>>> http://twistedmatrix.com/trac/ticket/5907
>>> 
>>> I would like to request a new pre-release with this fix once it has been reviewed and merged. (someone? pretty please?)
>>> 
>>> Cheers,
>>> -E
>>> 
>> 
>> Hi Eric,
>> 
>> We generally don't issue new pre-releases for issues that are not regressions.  Thomas is the release manager in this case so it is his call, but it would be nice to get the 12.* releases all out within 2012 :).  I think it'd be a lot better to focus on this for 13.0, and try to push for 13.0 to be released sooner rather than 12.3 to be released later.
>> 
>> Not only is this ticket not a regression, and is OpenBSD not a supported platform for Twisted, but it looks like we don't even have an un-supported builder for that platform, so other developers would have a hard time reviewing the ticket without setting up their own personal virtualization infrastructure.  In the meanwhile you might want to consider provisioning and contributing an OpenBSD buildbot, so we can start the process of transitioning it from unsupported to supported.
> 
> Hi Glyph,
> 
> Technically, it's only NOT a regression BECAUSE OpenBSD is not a supported platform (yet). It's clearly a regression of functionality, because releases of Twisted prior to sendmsg.c did not have any issue building on OpenBSD (afaik). But I agree with the definition of regression being constrained to behaviors on supported platforms only...
> 
> OTOH - the bug is trivial, and the fix is also trivial, and has been verified by two people (the original patch author, and myself). Yes it still needs to pass review, but *possibly* this will not delay the release much... as long as it's out by Christmas, that is soon enough, right? =)

Well, okay, but you'll have to convince Thomas, not me ;).

> In my mind, it's fairly embarrassing that our setup.py is borked on the 2nd most popular BSD, and so I would still like to ask Thomas if he wouldn't mind trying to fit this in. But as you say - it is his call :)

Personally I'm not embarrassed.  In fact I think it's great!  If people rely on Twisted to work on their platform, they need to be motivated to contribute the resources to keep that platform working - and that's both in terms of buildbots and in terms of review time.  I would prefer, in fact, that "your platform is not necessarily going to work right" failures be more loud and immediate.

Also - the time to get stuff into a release is at the start of its cycle, not the end.  Even if this particular change does get in, I'm glad we've had this discussion to remind everyone of that fact.

>> As far as getting your ticket reviewed, The best way to get your tickets reviewed is to do code reviews for other people, so that when a reviewer with some free time comes around, you'll be first in the queue.  Unfortunately it looks like your ticket is dead last at the moment, so clearing out any other reviews would be extra helpful in its case!
>> 
>> 	<http://twistedmatrix.com/trac/report/15>
>> 
>> Since clearing the _whole_ queue is probably an impossible amount of effort, personally I'd be happy to offer you the same deal that Martin van L?wis pioneered on the Python core mailing list: if you do five code reviews, I'll review a ticket of your choice, virtualization infrastructure hassles notwithstanding :).
> 
> It's a fair deal - but with things as they are, I barely have time to do even the small bits of work that I do. When it comes to reviews, I'm afraid I'll probably always be a beggar :/

Doing one review a week is a pretty small commitment (speaking here as the pot).

> Oh, and uh technically, since I have not changed the original author's patch (hence, I am not the original author of the code) I can perform the review on this patch myself? I believe I have done this before, and unless there is some objection, I guess I can go ahead and do that...

Yes, you can do the review.  Don't half-ass it though :-).

You should work on this soon regardless of whether it gets into 12.3 or 13.0 though.  It seems like the current release is the most important when stuff like this happens, but time marches inexorably forward, and someday soon 12.3 will be old news, and you'll wish you got it in time for 13.0 instead.

> Oh and yes - I AM going to see about getting some OpenBSD buildslaves, whether via Snakebite farm, or some other route.

Great.

-g

From exarkun at twistedmatrix.com  Sun Dec 16 00:05:24 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 16 Dec 2012 05:05:24 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1355634324.66.181057440@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121216/935a47c8/attachment.htm 

From therve at free.fr  Thu Dec 20 09:58:00 2012
From: therve at free.fr (=?ISO-8859-1?Q?Thomas_Herv=E9?=)
Date: Thu, 20 Dec 2012 15:58:00 +0100
Subject: [Twisted-Python] Second pre-release of Twisted 12.3.0
Message-ID: <50D32778.8080502@free.fr>

Hi twisteders,

As it turns out, making a 4th release in 2012 wasn't going to be easy!
Thanks to the testing of David Reid, we found and fixed an issue with
pip which was making installation difficult when zope.interface was
missing. And we got another fix with the help of Eric Mangold, fixing
the compilation on OpenBSD.

The tarballs of the second pre-release can be found here:
	http://twistedmatrix.com/~therve/12.3.0pre2/

Thank you for testing it again!

-- 
Thomas


From _ at lvh.cc  Thu Dec 20 12:23:35 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Thu, 20 Dec 2012 18:23:35 +0100
Subject: [Twisted-Python] Second pre-release of Twisted 12.3.0
In-Reply-To: <50D32778.8080502@free.fr>
References: <50D32778.8080502@free.fr>
Message-ID: <CAE_Hg6byd+kQDiz_PNofr5tf8NN2eqEv=tB_SYobwqpZ+aE3Vg@mail.gmail.com>

I just noticed that I forgot to say this on the previous pre-release, but
this counts for both:

All tests green on my end :)


On Thu, Dec 20, 2012 at 3:58 PM, Thomas Herv? <therve at free.fr> wrote:

> Hi twisteders,
>
> As it turns out, making a 4th release in 2012 wasn't going to be easy!
> Thanks to the testing of David Reid, we found and fixed an issue with
> pip which was making installation difficult when zope.interface was
> missing. And we got another fix with the help of Eric Mangold, fixing
> the compilation on OpenBSD.
>
> The tarballs of the second pre-release can be found here:
>         http://twistedmatrix.com/~therve/12.3.0pre2/
>
> Thank you for testing it again!
>
> --
> Thomas
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121220/21b9935f/attachment.htm 

From duncan.mcgreggor at gmail.com  Thu Dec 20 12:55:16 2012
From: duncan.mcgreggor at gmail.com (Duncan McGreggor)
Date: Thu, 20 Dec 2012 09:55:16 -0800
Subject: [Twisted-Python] Second pre-release of Twisted 12.3.0
In-Reply-To: <50D32778.8080502@free.fr>
References: <50D32778.8080502@free.fr>
Message-ID: <CAFJQhU6q5FYnxjpodKGzTNpWVi-rBCpx5PTJ7j7R8KXDMdtBWw@mail.gmail.com>

On Thu, Dec 20, 2012 at 6:58 AM, Thomas Herv? <therve at free.fr> wrote:

> Hi twisteders,
>
> As it turns out, making a 4th release in 2012 wasn't going to be easy!
> Thanks to the testing of David Reid, we found and fixed an issue with
> pip which was making installation difficult when zope.interface was
> missing. And we got another fix with the help of Eric Mangold, fixing
> the compilation on OpenBSD.
>
> The tarballs of the second pre-release can be found here:
>         http://twistedmatrix.com/~therve/12.3.0pre2/
>
> Thank you for testing it again!
>

Nicely done, Thomas!

d
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121220/41745ccd/attachment.htm 

From poalman at gmail.com  Fri Dec 21 11:12:38 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Fri, 21 Dec 2012 16:12:38 +0000
Subject: [Twisted-Python] TaskStopped error, unsure of the cause and solution
Message-ID: <CACgdh2hFm80KFzDBY7sCS5XveZNX8dovo1XGt3Jt_WrJFQ7tJA@mail.gmail.com>

Hey,

I'm getting the following error in my logs (lots and lots), but only
after the server has been running for some time, I'm not sure what the
cause is or what I can do to remedy it.

This is what I see in the logs:

2012-12-20 17:07:17+0000 [HTTP11ClientProtocol,client] Unhandled Error
        Traceback (most recent call last):
        Failure: twisted.web._newclient.RequestTransmissionFailed:
[<twisted.python.failure.Failure <class
'twisted.internet.error.ConnectionDone'>>]

2012-12-20 17:07:17+0000 [HTTP11ClientProtocol,client] Unexpected
exception from twisted.web.client.FileBodyProducer.stopProducing
        Traceback (most recent call last):
          File "/usr/local/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/internet/endpoints.py",
line 99, in connectionLost
            return self._wrappedProtocol.connectionLost(reason)
          File "/usr/local/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/web/_newclient.py",
line 859, in dispatcher
            return func(*args, **kwargs)
          File "/usr/local/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/web/_newclient.py",
line 1458, in _connectionLost_TRANSMITTING
            self._currentRequest.stopWriting()
          File "/usr/local/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/web/_newclient.py",
line 760, in stopWriting
            _callAppFunction(self.bodyProducer.stopProducing)
        --- <exception caught here> ---
          File "/usr/local/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/web/_newclient.py",
line 191, in _callAppFunction
            function()
          File "/usr/local/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/web/client.py",
line 760, in stopProducing
            self._task.stop()
          File "/usr/local/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/internet/task.py",
line 459, in stop
            self._checkFinish()
          File "/usr/local/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/internet/task.py",
line 469, in _checkFinish
            raise self._completionState
        twisted.internet.task.TaskStopped:

Just loads of those, they always seem to come through in pairs (the
first twisted.internet.error.ConnectionDone, and then the
twisted.internet.task.TaskStopped as above)

I'm just doing PUT requests with twisted.web.client.Agent and using a
twisted.web.client.FileBodyProducer to provide the content.

I'm doing the PUT while I still have the request from a render_GET, so
I thought maybe it's caused if the user disconnects while I'm doing
the PUT? The idea is I redirect them to the file I PUT with
request.redirect, which seems to work fine (until I get this error and
it doesn't)

The reason I do a PUT and redirect, instead of just writing back to
the request is that I check if the file is in a cache first, I then
only PUT if it's not there- then redirect afterwards.

Any clues or ideas of what is happening would be hugely helpful

thanks!!

Paul


From exarkun at twistedmatrix.com  Fri Dec 21 13:08:22 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 21 Dec 2012 18:08:22 -0000
Subject: [Twisted-Python] TaskStopped error,
 unsure of the cause and solution
In-Reply-To: <CACgdh2hFm80KFzDBY7sCS5XveZNX8dovo1XGt3Jt_WrJFQ7tJA@mail.gmail.com>
References: <CACgdh2hFm80KFzDBY7sCS5XveZNX8dovo1XGt3Jt_WrJFQ7tJA@mail.gmail.com>
Message-ID: <20121221180822.6389.1626477491.divmod.xquotient.354@localhost6.localdomain6>

On 04:12 pm, poalman at gmail.com wrote:
>Hey,
>
>I'm getting the following error in my logs (lots and lots), but only
>after the server has been running for some time, I'm not sure what the
>cause is or what I can do to remedy it.

This seems like a bug in `Agent`, perhaps related to `stopProducing` 
being called more than once.  It would be great if you could produce a 
minimal example to include with a bug report in the issue tracker.  An 
example that reproduces the problem will also make it easier to see 
where the bug is in your code, if it happens to be there rather than in 
Twisted.

Jean-Paul
>This is what I see in the logs:
>
>2012-12-20 17:07:17+0000 [HTTP11ClientProtocol,client] Unhandled Error
>        Traceback (most recent call last):
>        Failure: twisted.web._newclient.RequestTransmissionFailed:
>[<twisted.python.failure.Failure <class
>'twisted.internet.error.ConnectionDone'>>]
>
>2012-12-20 17:07:17+0000 [HTTP11ClientProtocol,client] Unexpected
>exception from twisted.web.client.FileBodyProducer.stopProducing
>        Traceback (most recent call last):
>          File "/usr/local/lib/python2.7/site- 
>packages/Twisted-12.2.0-py2.7-linux- 
>x86_64.egg/twisted/internet/endpoints.py",
>line 99, in connectionLost
>            return self._wrappedProtocol.connectionLost(reason)
>          File "/usr/local/lib/python2.7/site- 
>packages/Twisted-12.2.0-py2.7-linux- 
>x86_64.egg/twisted/web/_newclient.py",
>line 859, in dispatcher
>            return func(*args, **kwargs)
>          File "/usr/local/lib/python2.7/site- 
>packages/Twisted-12.2.0-py2.7-linux- 
>x86_64.egg/twisted/web/_newclient.py",
>line 1458, in _connectionLost_TRANSMITTING
>            self._currentRequest.stopWriting()
>          File "/usr/local/lib/python2.7/site- 
>packages/Twisted-12.2.0-py2.7-linux- 
>x86_64.egg/twisted/web/_newclient.py",
>line 760, in stopWriting
>            _callAppFunction(self.bodyProducer.stopProducing)
>        --- <exception caught here> ---
>          File "/usr/local/lib/python2.7/site- 
>packages/Twisted-12.2.0-py2.7-linux- 
>x86_64.egg/twisted/web/_newclient.py",
>line 191, in _callAppFunction
>            function()
>          File "/usr/local/lib/python2.7/site- 
>packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/web/client.py",
>line 760, in stopProducing
>            self._task.stop()
>          File "/usr/local/lib/python2.7/site- 
>packages/Twisted-12.2.0-py2.7-linux- 
>x86_64.egg/twisted/internet/task.py",
>line 459, in stop
>            self._checkFinish()
>          File "/usr/local/lib/python2.7/site- 
>packages/Twisted-12.2.0-py2.7-linux- 
>x86_64.egg/twisted/internet/task.py",
>line 469, in _checkFinish
>            raise self._completionState
>        twisted.internet.task.TaskStopped:
>
>Just loads of those, they always seem to come through in pairs (the
>first twisted.internet.error.ConnectionDone, and then the
>twisted.internet.task.TaskStopped as above)
>
>I'm just doing PUT requests with twisted.web.client.Agent and using a
>twisted.web.client.FileBodyProducer to provide the content.
>
>I'm doing the PUT while I still have the request from a render_GET, so
>I thought maybe it's caused if the user disconnects while I'm doing
>the PUT? The idea is I redirect them to the file I PUT with
>request.redirect, which seems to work fine (until I get this error and
>it doesn't)
>
>The reason I do a PUT and redirect, instead of just writing back to
>the request is that I check if the file is in a cache first, I then
>only PUT if it's not there- then redirect afterwards.
>
>Any clues or ideas of what is happening would be hugely helpful
>
>thanks!!
>
>Paul
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From exarkun at twistedmatrix.com  Sun Dec 23 00:05:23 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 23 Dec 2012 05:05:23 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1356239123.17.1432149713@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121223/680e3e9a/attachment.htm 

From therve at free.fr  Wed Dec 26 08:21:22 2012
From: therve at free.fr (=?ISO-8859-1?Q?Thomas_Herv=E9?=)
Date: Wed, 26 Dec 2012 14:21:22 +0100
Subject: [Twisted-Python] Twisted 12.3.0 released
Message-ID: <50DAF9D2.3030702@free.fr>

On behalf of Twisted Matrix Laboratories, I am pleased to announce, in
extremis, the release of Twisted 12.3.

161 tickets are closed by this release, with the following highlights:

 * Support for local parallel testing in trial

 * A new "react" function to easily run a single asynchronous function
in a script with the reactor.

 * Partial support for Python 3.3.

Note that only Python 2.7 is supported on Windows now. We also require
zope.interface 3.6.0 or newer.


For more information, see the NEWS file here:

 http://twistedmatrix.com/Releases/Twisted/12.3/NEWS.txt


Download it now from:

 http://pypi.python.org/packages/source/T/Twisted/Twisted-12.3.0.tar.bz2 or

 http://pypi.python.org/packages/2.7/T/Twisted/Twisted-12.3.0.win32-py2.7.msi


Thanks to the supporters of Twisted via the Software Freedom Conservancy
and to the many contributors for this release.

-- 
Thomas


From _ at lvh.cc  Wed Dec 26 14:08:06 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Wed, 26 Dec 2012 20:08:06 +0100
Subject: [Twisted-Python] Twisted 12.3.0 released
In-Reply-To: <50DAF9D2.3030702@free.fr>
References: <50DAF9D2.3030702@free.fr>
Message-ID: <CAE_Hg6afLV76gtEx+R9Q=45ZLZePG05bAA7W1GQ67teE_PRE9g@mail.gmail.com>

Yay! Thanks for an awesome Christmas present Thomas :)


On Wed, Dec 26, 2012 at 2:21 PM, Thomas Herv? <therve at free.fr> wrote:

> On behalf of Twisted Matrix Laboratories, I am pleased to announce, in
> extremis, the release of Twisted 12.3.
>
> 161 tickets are closed by this release, with the following highlights:
>
>  * Support for local parallel testing in trial
>
>  * A new "react" function to easily run a single asynchronous function
> in a script with the reactor.
>
>  * Partial support for Python 3.3.
>
> Note that only Python 2.7 is supported on Windows now. We also require
> zope.interface 3.6.0 or newer.
>
>
> For more information, see the NEWS file here:
>
>  http://twistedmatrix.com/Releases/Twisted/12.3/NEWS.txt
>
>
> Download it now from:
>
>  http://pypi.python.org/packages/source/T/Twisted/Twisted-12.3.0.tar.bz2or
>
>
> http://pypi.python.org/packages/2.7/T/Twisted/Twisted-12.3.0.win32-py2.7.msi
>
>
> Thanks to the supporters of Twisted via the Software Freedom Conservancy
> and to the many contributors for this release.
>
> --
> Thomas
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121226/058f8491/attachment.htm 

From kevin.horn at gmail.com  Wed Dec 26 14:27:49 2012
From: kevin.horn at gmail.com (Kevin Horn)
Date: Wed, 26 Dec 2012 13:27:49 -0600
Subject: [Twisted-Python] Twisted 12.3.0 released
In-Reply-To: <50DAF9D2.3030702@free.fr>
References: <50DAF9D2.3030702@free.fr>
Message-ID: <CA+U=zK0YkuKDjcijOpHs_yU1-eD9vMAkpgSTAW+Zo0eNdOWahw@mail.gmail.com>

Hurrah!  Well done!


On Wed, Dec 26, 2012 at 7:21 AM, Thomas Herv? <therve at free.fr> wrote:

> On behalf of Twisted Matrix Laboratories, I am pleased to announce, in
> extremis, the release of Twisted 12.3.
>
> 161 tickets are closed by this release, with the following highlights:
>
>  * Support for local parallel testing in trial
>
>  * A new "react" function to easily run a single asynchronous function
> in a script with the reactor.
>
>  * Partial support for Python 3.3.
>
> Note that only Python 2.7 is supported on Windows now. We also require
> zope.interface 3.6.0 or newer.
>
>
> For more information, see the NEWS file here:
>
>  http://twistedmatrix.com/Releases/Twisted/12.3/NEWS.txt
>
>
> Download it now from:
>
>  http://pypi.python.org/packages/source/T/Twisted/Twisted-12.3.0.tar.bz2or
>
>
> http://pypi.python.org/packages/2.7/T/Twisted/Twisted-12.3.0.win32-py2.7.msi
>
>
> Thanks to the supporters of Twisted via the Software Freedom Conservancy
> and to the many contributors for this release.
>
> --
> Thomas
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
--
Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121226/271bba57/attachment.htm 

From _ at lvh.cc  Wed Dec 26 16:43:30 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Wed, 26 Dec 2012 22:43:30 +0100
Subject: [Twisted-Python] Appropriate exception for AMP types receiving
	garbage?
Message-ID: <CAE_Hg6bK5XEKf3c++KvfCriSnhrFFk0Nc1MWL1wRtBD=sSuzFQ@mail.gmail.com>

Hi,


I'm writing a custom AMP type. I noticed that when writing the unit test
for garbage input, I didn't really know what exception to check for.

I couldn't find any place where this was formally defined, so I checked for
implementation behavior. Boolean explicitly raises TypeError. Integer
raises ValueError, but that appears to only be an implementation detail of
int.

It could also be that it doesn't matter at all, but it does seem a little
strange that Integer and Boolean raise different exceptions when fed
garbage...

-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121226/35966a15/attachment.htm 

From glyph at twistedmatrix.com  Thu Dec 27 01:40:05 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 26 Dec 2012 22:40:05 -0800
Subject: [Twisted-Python] Twisted 12.3.0 released
In-Reply-To: <50DAF9D2.3030702@free.fr>
References: <50DAF9D2.3030702@free.fr>
Message-ID: <409EE4CA-88EE-4BB1-985C-9C732351AF78@twistedmatrix.com>

On Dec 26, 2012, at 5:21 AM, Thomas Herv? <therve at free.fr> wrote:

> On behalf of Twisted Matrix Laboratories, I am pleased to announce, in
> extremis, the release of Twisted 12.3.

Thanks for managing another great release, Thomas!!

> 161 tickets are closed by this release, with the following highlights:
> 
> * Support for local parallel testing in trial

This doesn't make the feature sound quite as exciting as it is :).  For those of you who didn't know this was coming - as of Twisted 12.3.0, you can run 'trial -j 16 ...' if you have 16 cores and finally make use of all those idle cores during Twisted-based development.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121226/3efc578b/attachment.htm 

From glyph at twistedmatrix.com  Thu Dec 27 02:02:24 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 26 Dec 2012 23:02:24 -0800
Subject: [Twisted-Python] Appropriate exception for AMP types receiving
	garbage?
In-Reply-To: <CAE_Hg6bK5XEKf3c++KvfCriSnhrFFk0Nc1MWL1wRtBD=sSuzFQ@mail.gmail.com>
References: <CAE_Hg6bK5XEKf3c++KvfCriSnhrFFk0Nc1MWL1wRtBD=sSuzFQ@mail.gmail.com>
Message-ID: <5B523109-A533-4820-8D32-2BC0D155CACC@twistedmatrix.com>

On Dec 26, 2012, at 1:43 PM, Laurens Van Houtven <_ at lvh.cc> wrote:

> I'm writing a custom AMP type. I noticed that when writing the unit test for garbage input, I didn't really know what exception to check for.
> 
> I couldn't find any place where this was formally defined, so I checked for implementation behavior. Boolean explicitly raises TypeError. Integer raises ValueError, but that appears to only be an implementation detail of int.
> 
> It could also be that it doesn't matter at all, but it does seem a little strange that Integer and Boolean raise different exceptions when fed garbage...

Hey Laurens,

This is basically a feature request :).  There's no particular defined error type for argument parse errors in AMP.  It's not a bad feature though.  The exception also doesn't go anywhere useful - the only contract is basically that it'll bubble up and break the connection if you get some bad data.  A more sophisticated and trappable / trackable way to propagate this sort of error would be useful.

(I would personally consider it a compatible change if the behavior of the error cases changed here, on the grounds that anything that uncontrollably logs a traceback in response to network input is a gross spec violation of a sort.  Maybe we should add an explicit exemption for that case.)

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121226/c3328b8e/attachment-0001.htm 

From poalman at gmail.com  Thu Dec 27 09:49:26 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Thu, 27 Dec 2012 14:49:26 +0000
Subject: [Twisted-Python] TaskStopped error,
	unsure of the cause and solution
In-Reply-To: <20121221180822.6389.1626477491.divmod.xquotient.354@localhost6.localdomain6>
References: <CACgdh2hFm80KFzDBY7sCS5XveZNX8dovo1XGt3Jt_WrJFQ7tJA@mail.gmail.com>
	<20121221180822.6389.1626477491.divmod.xquotient.354@localhost6.localdomain6>
Message-ID: <CACgdh2gQy9Gp9qbqwMC6CV4J1Ti2F+=+c36cVtnrO0nceV9uWA@mail.gmail.com>

On 21 December 2012 18:08,  <exarkun at twistedmatrix.com> wrote:
> On 04:12 pm, poalman at gmail.com wrote:
>>Hey,
>>
>>I'm getting the following error in my logs (lots and lots), but only
>>after the server has been running for some time, I'm not sure what the
>>cause is or what I can do to remedy it.
>
> This seems like a bug in `Agent`, perhaps related to `stopProducing`
> being called more than once.  It would be great if you could produce a
> minimal example to include with a bug report in the issue tracker.  An
> example that reproduces the problem will also make it easier to see
> where the bug is in your code, if it happens to be there rather than in
> Twisted.

I'll try my best! The problem is I don't seem to see this at all for
10k+ requests ish then I guess something must trigger it as it will
start happening a lot, so it may be difficult to reproduce.

>
> Jean-Paul
>>This is what I see in the logs:
>>
>>2012-12-20 17:07:17+0000 [HTTP11ClientProtocol,client] Unhandled Error
>>        Traceback (most recent call last):
>>        Failure: twisted.web._newclient.RequestTransmissionFailed:
>>[<twisted.python.failure.Failure <class
>>'twisted.internet.error.ConnectionDone'>>]
>>
>>2012-12-20 17:07:17+0000 [HTTP11ClientProtocol,client] Unexpected
>>exception from twisted.web.client.FileBodyProducer.stopProducing
>>        Traceback (most recent call last):
>>          File "/usr/local/lib/python2.7/site-
>>packages/Twisted-12.2.0-py2.7-linux-
>>x86_64.egg/twisted/internet/endpoints.py",
>>line 99, in connectionLost
>>            return self._wrappedProtocol.connectionLost(reason)
>>          File "/usr/local/lib/python2.7/site-
>>packages/Twisted-12.2.0-py2.7-linux-
>>x86_64.egg/twisted/web/_newclient.py",
>>line 859, in dispatcher
>>            return func(*args, **kwargs)
>>          File "/usr/local/lib/python2.7/site-
>>packages/Twisted-12.2.0-py2.7-linux-
>>x86_64.egg/twisted/web/_newclient.py",
>>line 1458, in _connectionLost_TRANSMITTING
>>            self._currentRequest.stopWriting()
>>          File "/usr/local/lib/python2.7/site-
>>packages/Twisted-12.2.0-py2.7-linux-
>>x86_64.egg/twisted/web/_newclient.py",
>>line 760, in stopWriting
>>            _callAppFunction(self.bodyProducer.stopProducing)
>>        --- <exception caught here> ---
>>          File "/usr/local/lib/python2.7/site-
>>packages/Twisted-12.2.0-py2.7-linux-
>>x86_64.egg/twisted/web/_newclient.py",
>>line 191, in _callAppFunction
>>            function()
>>          File "/usr/local/lib/python2.7/site-
>>packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/web/client.py",
>>line 760, in stopProducing
>>            self._task.stop()
>>          File "/usr/local/lib/python2.7/site-
>>packages/Twisted-12.2.0-py2.7-linux-
>>x86_64.egg/twisted/internet/task.py",
>>line 459, in stop
>>            self._checkFinish()
>>          File "/usr/local/lib/python2.7/site-
>>packages/Twisted-12.2.0-py2.7-linux-
>>x86_64.egg/twisted/internet/task.py",
>>line 469, in _checkFinish
>>            raise self._completionState
>>        twisted.internet.task.TaskStopped:
>>
>>Just loads of those, they always seem to come through in pairs (the
>>first twisted.internet.error.ConnectionDone, and then the
>>twisted.internet.task.TaskStopped as above)
>>
>>I'm just doing PUT requests with twisted.web.client.Agent and using a
>>twisted.web.client.FileBodyProducer to provide the content.
>>
>>I'm doing the PUT while I still have the request from a render_GET, so
>>I thought maybe it's caused if the user disconnects while I'm doing
>>the PUT? The idea is I redirect them to the file I PUT with
>>request.redirect, which seems to work fine (until I get this error and
>>it doesn't)
>>
>>The reason I do a PUT and redirect, instead of just writing back to
>>the request is that I check if the file is in a cache first, I then
>>only PUT if it's not there- then redirect afterwards.
>>
>>Any clues or ideas of what is happening would be hugely helpful
>>
>>thanks!!
>>
>>Paul
>>
>>_______________________________________________
>>Twisted-Python mailing list
>>Twisted-Python at twistedmatrix.com
>>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From corpmasters at gmail.com  Thu Dec 27 12:33:09 2012
From: corpmasters at gmail.com (Master Corp)
Date: Thu, 27 Dec 2012 19:33:09 +0200
Subject: [Twisted-Python] Need help using FTPClient
Message-ID: <CANtgJyHV32YBxnBBFxoN_KF3yKbe=X_ohWtJZ2MhxsexVvd9tg@mail.gmail.com>

Hi. I am new to Twisted. I am using this code:

 http://twistedmatrix.com/documents/current/core/examples/ftpclient.py<http://twistedmatrix.com/documents/current/core/examples/ftpclient.py>

Can this example be used to connect to an FTP through a SOCKS4/5 proxy? Can
somebody provide an example of how it should be done?

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121227/d9ffb7da/attachment.htm 

From jasonjwwilliams at gmail.com  Thu Dec 27 14:23:58 2012
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Thu, 27 Dec 2012 12:23:58 -0700
Subject: [Twisted-Python] Weird SSL/TLS issue
Message-ID: <CAHZAEpfCeMVTit22RHN99G=1W0yMuJYoRHnf6xyg0fEKP1EDWw@mail.gmail.com>

We have an application that uses Twisted Web to listen for an API call and
when it receives it, the app then connects over SMTP to the specified mail
server IP and validates whether the indicated user exists. The app has been
running without issue or modification for close to 2 years (uses Twisted
10.2.0). Then suddenly last night it started being unable to find the
starttls() method on the Connection object when negotiating with any mail
server:

https://gist.github.com/4391179

We were able to replicate the problem consistently, and determine it was
not a network issue. The weird part is that simply restarting the
application cleared the issue and TLS SMTP connections were able to be made
again. Since the Twisted modules were loaded at startup, I'm a little
confused on how it suddenly decided  the TLS methods were missing until we
restarted.

Any ideas are greatly appreciated.

-J
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121227/f5e893f2/attachment.htm 

From itamar at futurefoundries.com  Thu Dec 27 22:11:46 2012
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Thu, 27 Dec 2012 22:11:46 -0500
Subject: [Twisted-Python] Weird SSL/TLS issue
In-Reply-To: <CAHZAEpfCeMVTit22RHN99G=1W0yMuJYoRHnf6xyg0fEKP1EDWw@mail.gmail.com>
References: <CAHZAEpfCeMVTit22RHN99G=1W0yMuJYoRHnf6xyg0fEKP1EDWw@mail.gmail.com>
Message-ID: <CAOp9P3q_nU7nq5p=yURoYWKnajg4v=TPEwAqT788DvFxsZb5Vw@mail.gmail.com>

On Thu, Dec 27, 2012 at 2:23 PM, Jason J. W. Williams <
jasonjwwilliams at gmail.com> wrote:

> We have an application that uses Twisted Web to listen for an API call and
> when it receives it, the app then connects over SMTP to the specified mail
> server IP and validates whether the indicated user exists. The app has been
> running without issue or modification for close to 2 years (uses Twisted
> 10.2.0). Then suddenly last night it started being unable to find the
> starttls() method on the Connection object when negotiating with any mail
> server:
>
> https://gist.github.com/4391179
>
> We were able to replicate the problem consistently, and determine it was
> not a network issue. The weird part is that simply restarting the
> application cleared the issue and TLS SMTP connections were able to be made
> again. Since the Twisted modules were loaded at startup, I'm a little
> confused on how it suddenly decided  the TLS methods were missing until we
> restarted.
>


Do you have any code that runs reload(), or twisted.python.rebuild, or
maybe did that manually in a Manhole session? Given how tcp.py is written
that's the only thing I can think of, at least.

Or maybe it's cosmic rays (got ECC RAM?)/hardware problems/memory
corruption. I've seen some utterly impossible Python tracebacks that had to
have been something like these catchalls, which isn't very satisfying an
answer.


-- 
Itamar Turner-Trauring, Future Foundries LLC
http://futurefoundries.com/ ? Twisted consulting, training and support.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121227/32c88c72/attachment.htm 

From glyph at twistedmatrix.com  Thu Dec 27 23:48:53 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 27 Dec 2012 20:48:53 -0800
Subject: [Twisted-Python] Need help using FTPClient
In-Reply-To: <CANtgJyHV32YBxnBBFxoN_KF3yKbe=X_ohWtJZ2MhxsexVvd9tg@mail.gmail.com>
References: <CANtgJyHV32YBxnBBFxoN_KF3yKbe=X_ohWtJZ2MhxsexVvd9tg@mail.gmail.com>
Message-ID: <CED11AA4-9786-4348-B2B2-DB7A7D7030B1@twistedmatrix.com>


On Dec 27, 2012, at 9:33 AM, Master Corp <corpmasters at gmail.com> wrote:

> Hi. I am new to Twisted. I am using this code:
> 
>  http://twistedmatrix.com/documents/current/core/examples/ftpclient.py
> 
> Can this example be used to connect to an FTP through a SOCKS4/5 proxy? Can somebody provide an example of how it should be done?
> 

Is there any reason you want to use Twisted to do your SOCKS proxying?  Programs like 'socksify' typically do what you need in a general way that does not require any awareness from your application.  (Twisted does have a SOCKS implementation, but it's rarely worth the trouble to plug it in.)

-glyph


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121227/910635b0/attachment.htm 

From corpmasters at gmail.com  Fri Dec 28 04:00:12 2012
From: corpmasters at gmail.com (Master Corp)
Date: Fri, 28 Dec 2012 11:00:12 +0200
Subject: [Twisted-Python] Need help using FTPClient
In-Reply-To: <CED11AA4-9786-4348-B2B2-DB7A7D7030B1@twistedmatrix.com>
References: <CANtgJyHV32YBxnBBFxoN_KF3yKbe=X_ohWtJZ2MhxsexVvd9tg@mail.gmail.com>
	<CED11AA4-9786-4348-B2B2-DB7A7D7030B1@twistedmatrix.com>
Message-ID: <CANtgJyE29cJC+yTPWqQt=HdL27N-8iYn6WUL3qdEWXrt8fTybA@mail.gmail.com>

I want to make a script that does some simple ftp tasks (using socks) on a
list of severs. I thought twisted is a good choice.

2012/12/28 Glyph <glyph at twistedmatrix.com>

>
> On Dec 27, 2012, at 9:33 AM, Master Corp <corpmasters at gmail.com> wrote:
>
> Hi. I am new to Twisted. I am using this code:
>
>  http://twistedmatrix.com/documents/current/core/examples/ftpclient.py<http://twistedmatrix.com/documents/current/core/examples/ftpclient.py>
>
> Can this example be used to connect to an FTP through a SOCKS4/5 proxy?
> Can somebody provide an example of how it should be done?
>
>
> Is there any reason you want to use Twisted to do your SOCKS proxying?
>  Programs like 'socksify' typically do what you need in a general way that
> does not require any awareness from your application.  (Twisted does have a
> SOCKS implementation, but it's rarely worth the trouble to plug it in.)
>
> -glyph
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121228/f962a9e5/attachment.htm 

From _ at lvh.cc  Fri Dec 28 05:46:25 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Fri, 28 Dec 2012 11:46:25 +0100
Subject: [Twisted-Python] Need help using FTPClient
In-Reply-To: <CANtgJyE29cJC+yTPWqQt=HdL27N-8iYn6WUL3qdEWXrt8fTybA@mail.gmail.com>
References: <CANtgJyHV32YBxnBBFxoN_KF3yKbe=X_ohWtJZ2MhxsexVvd9tg@mail.gmail.com>
	<CED11AA4-9786-4348-B2B2-DB7A7D7030B1@twistedmatrix.com>
	<CANtgJyE29cJC+yTPWqQt=HdL27N-8iYn6WUL3qdEWXrt8fTybA@mail.gmail.com>
Message-ID: <CAE_Hg6ZHY2TvK4k+E67N1nQavcnuHnYEo1hkQuV9ceBFDuC_7g@mail.gmail.com>

Well, sure; if you want your program to do the SOCKSing, Twisted has an
implementation for that, so you *can*; Glyph is just suggesting that it may
be easier to use Twisted only for the FTP-y bits, and rely on other
software (such as socksify) to handle the SOCKS parts :)

So, to rephrase the question: is there a reason you're not using an
external app to do the SOCKS parts?


On Fri, Dec 28, 2012 at 10:00 AM, Master Corp <corpmasters at gmail.com> wrote:

> I want to make a script that does some simple ftp tasks (using socks) on a
> list of severs. I thought twisted is a good choice.
>
> 2012/12/28 Glyph <glyph at twistedmatrix.com>
>
>>
>> On Dec 27, 2012, at 9:33 AM, Master Corp <corpmasters at gmail.com> wrote:
>>
>> Hi. I am new to Twisted. I am using this code:
>>
>>  http://twistedmatrix.com/documents/current/core/examples/ftpclient.py<http://twistedmatrix.com/documents/current/core/examples/ftpclient.py>
>>
>> Can this example be used to connect to an FTP through a SOCKS4/5 proxy?
>> Can somebody provide an example of how it should be done?
>>
>>
>> Is there any reason you want to use Twisted to do your SOCKS proxying?
>>  Programs like 'socksify' typically do what you need in a general way that
>> does not require any awareness from your application.  (Twisted does have a
>> SOCKS implementation, but it's rarely worth the trouble to plug it in.)
>>
>> -glyph
>>
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121228/c5ae29ff/attachment-0001.htm 

From corpmasters at gmail.com  Fri Dec 28 09:24:30 2012
From: corpmasters at gmail.com (Master Corp)
Date: Fri, 28 Dec 2012 16:24:30 +0200
Subject: [Twisted-Python] Need help using FTPClient
In-Reply-To: <CAE_Hg6ZHY2TvK4k+E67N1nQavcnuHnYEo1hkQuV9ceBFDuC_7g@mail.gmail.com>
References: <CANtgJyHV32YBxnBBFxoN_KF3yKbe=X_ohWtJZ2MhxsexVvd9tg@mail.gmail.com>
	<CED11AA4-9786-4348-B2B2-DB7A7D7030B1@twistedmatrix.com>
	<CANtgJyE29cJC+yTPWqQt=HdL27N-8iYn6WUL3qdEWXrt8fTybA@mail.gmail.com>
	<CAE_Hg6ZHY2TvK4k+E67N1nQavcnuHnYEo1hkQuV9ceBFDuC_7g@mail.gmail.com>
Message-ID: <CANtgJyE10SC_ySKZKXmKzaYADtwzV-ZePhGOp_d4F+HVXSYVCw@mail.gmail.com>

I want to store those proxies in a database and check their status
ocasionaly

2012/12/28 Laurens Van Houtven <_ at lvh.cc>

> Well, sure; if you want your program to do the SOCKSing, Twisted has an
> implementation for that, so you *can*; Glyph is just suggesting that it may
> be easier to use Twisted only for the FTP-y bits, and rely on other
> software (such as socksify) to handle the SOCKS parts :)
>
> So, to rephrase the question: is there a reason you're not using an
> external app to do the SOCKS parts?
>
>
> On Fri, Dec 28, 2012 at 10:00 AM, Master Corp <corpmasters at gmail.com>wrote:
>
>> I want to make a script that does some simple ftp tasks (using socks) on
>> a list of severs. I thought twisted is a good choice.
>>
>> 2012/12/28 Glyph <glyph at twistedmatrix.com>
>>
>>>
>>> On Dec 27, 2012, at 9:33 AM, Master Corp <corpmasters at gmail.com> wrote:
>>>
>>> Hi. I am new to Twisted. I am using this code:
>>>
>>>  http://twistedmatrix.com/documents/current/core/examples/ftpclient.py<http://twistedmatrix.com/documents/current/core/examples/ftpclient.py>
>>>
>>> Can this example be used to connect to an FTP through a SOCKS4/5 proxy?
>>> Can somebody provide an example of how it should be done?
>>>
>>>
>>> Is there any reason you want to use Twisted to do your SOCKS proxying?
>>>  Programs like 'socksify' typically do what you need in a general way that
>>> does not require any awareness from your application.  (Twisted does have a
>>> SOCKS implementation, but it's rarely worth the trouble to plug it in.)
>>>
>>> -glyph
>>>
>>>
>>>
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>
>>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>
>
> --
> cheers
> lvh
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121228/e958aaf7/attachment.htm 

From itamar at futurefoundries.com  Fri Dec 28 11:07:38 2012
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Fri, 28 Dec 2012 11:07:38 -0500
Subject: [Twisted-Python] Need help using FTPClient
In-Reply-To: <CED11AA4-9786-4348-B2B2-DB7A7D7030B1@twistedmatrix.com>
References: <CANtgJyHV32YBxnBBFxoN_KF3yKbe=X_ohWtJZ2MhxsexVvd9tg@mail.gmail.com>
	<CED11AA4-9786-4348-B2B2-DB7A7D7030B1@twistedmatrix.com>
Message-ID: <CAOp9P3qipU1mZujSixO3TC=64yiShG9MzXJN6d_dNRex9f7_eg@mail.gmail.com>

On Thu, Dec 27, 2012 at 11:48 PM, Glyph <glyph at twistedmatrix.com> wrote:

>
>
> Is there any reason you want to use Twisted to do your SOCKS proxying?
>  Programs like 'socksify' typically do what you need in a general way that
> does not require any awareness from your application.  (Twisted does have a
> SOCKS implementation, but it's rarely worth the trouble to plug it in.)
>

Twisted does not have a SOCKS client, actually, only a server AFAIK.

IIRC there's a 3rd party client library, but on github so therefore
impossible to find.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121228/d2a80493/attachment.htm 

From corpmasters at gmail.com  Fri Dec 28 12:21:22 2012
From: corpmasters at gmail.com (Master Corp)
Date: Fri, 28 Dec 2012 19:21:22 +0200
Subject: [Twisted-Python] Need help using FTPClient
In-Reply-To: <CAOp9P3qipU1mZujSixO3TC=64yiShG9MzXJN6d_dNRex9f7_eg@mail.gmail.com>
References: <CANtgJyHV32YBxnBBFxoN_KF3yKbe=X_ohWtJZ2MhxsexVvd9tg@mail.gmail.com>
	<CED11AA4-9786-4348-B2B2-DB7A7D7030B1@twistedmatrix.com>
	<CAOp9P3qipU1mZujSixO3TC=64yiShG9MzXJN6d_dNRex9f7_eg@mail.gmail.com>
Message-ID: <CANtgJyGtd8bQQeJXkwHKU0tSwbsNRyuppZTZkQK1XYCbRmjDEw@mail.gmail.com>

OK, thank you for your help

2012/12/28 Itamar Turner-Trauring <itamar at futurefoundries.com>

>
>
> On Thu, Dec 27, 2012 at 11:48 PM, Glyph <glyph at twistedmatrix.com> wrote:
>
>>
>>
>> Is there any reason you want to use Twisted to do your SOCKS proxying?
>>  Programs like 'socksify' typically do what you need in a general way that
>> does not require any awareness from your application.  (Twisted does have a
>> SOCKS implementation, but it's rarely worth the trouble to plug it in.)
>>
>
> Twisted does not have a SOCKS client, actually, only a server AFAIK.
>
> IIRC there's a 3rd party client library, but on github so therefore
> impossible to find.
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121228/22fd2c1e/attachment.htm 

From aniketpanse at gmail.com  Sat Dec 29 15:21:41 2012
From: aniketpanse at gmail.com (Aniket Panse)
Date: Sun, 30 Dec 2012 01:51:41 +0530
Subject: [Twisted-Python] I am new :-)
Message-ID: <CAJscYz0OtVwWouX9cKL0cfE8A0QRO76MOBoOusTpiX23w+ZPhA@mail.gmail.com>

Hello,

I just wanted to introduce myself and get some help. I am familiar with
Python, but I've never worked on any real project before. I wish to
contribute to Twisted, and was looking for some pointers to understanding
this complex code.

Thanks!
--Aniket
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121230/fed3c8ab/attachment.htm 

From exarkun at twistedmatrix.com  Sun Dec 30 00:05:28 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 30 Dec 2012 05:05:28 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1356843928.66.345065437@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121230/d5d8d421/attachment.htm 

From glyph at twistedmatrix.com  Sun Dec 30 01:31:44 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Sat, 29 Dec 2012 22:31:44 -0800
Subject: [Twisted-Python] I am new :-)
In-Reply-To: <CAJscYz0OtVwWouX9cKL0cfE8A0QRO76MOBoOusTpiX23w+ZPhA@mail.gmail.com>
References: <CAJscYz0OtVwWouX9cKL0cfE8A0QRO76MOBoOusTpiX23w+ZPhA@mail.gmail.com>
Message-ID: <50F76C43-06A3-4862-8C2E-721559D015D4@twistedmatrix.com>


On Dec 29, 2012, at 12:21 PM, Aniket Panse <aniketpanse at gmail.com> wrote:

> Hello,
> 
> I just wanted to introduce myself and get some help. I am familiar with Python, but I've never worked on any real project before. I wish to contribute to Twisted, and was looking for some pointers to understanding this complex code. 
> 
> Thanks!
> --Aniket

Hi Aniket!

Welcome to Twisted, I hope that you have a good time here.  We're always happy to hear from a new contributor.

Have you familiarized yourself with the basics of Twisted itself yet?  Before contributing it's useful to have a general idea of what Twisted is, what kinds of things it does, and a high level idea of how it works.

Here are some links to get you started:

    <https://twistedmatrix.com/documents/current/core/howto/servers.html>
    <https://twistedmatrix.com/documents/current/core/howto/tutorial/index.html>
    <http://krondo.com/?page_id=1327>

Good luck!

-glyph



From beatouze at gmail.com  Sun Dec 30 02:38:44 2012
From: beatouze at gmail.com (Lupce Kotev)
Date: Sun, 30 Dec 2012 08:38:44 +0100
Subject: [Twisted-Python] I am new :-)
In-Reply-To: <50F76C43-06A3-4862-8C2E-721559D015D4@twistedmatrix.com>
References: <CAJscYz0OtVwWouX9cKL0cfE8A0QRO76MOBoOusTpiX23w+ZPhA@mail.gmail.com>
	<50F76C43-06A3-4862-8C2E-721559D015D4@twistedmatrix.com>
Message-ID: <CAHr=iADFqk8MaP7Vmsr91wo6s-upBNrATSzsp5Ma2f+4cN8-zw@mail.gmail.com>

Hello Twisted community!

On topic of Aniket's question, I would like to ask what would be a fun
project to do in Twisted that will help me learn Twisted? I have made an
IRC bot till now, but I want to do something else.

Any ideas and tips on how should I do the specific idea would be
appreciated.

Thanks
- Bubo.


On Sun, Dec 30, 2012 at 7:31 AM, Glyph <glyph at twistedmatrix.com> wrote:

>
> On Dec 29, 2012, at 12:21 PM, Aniket Panse <aniketpanse at gmail.com> wrote:
>
> > Hello,
> >
> > I just wanted to introduce myself and get some help. I am familiar with
> Python, but I've never worked on any real project before. I wish to
> contribute to Twisted, and was looking for some pointers to understanding
> this complex code.
> >
> > Thanks!
> > --Aniket
>
> Hi Aniket!
>
> Welcome to Twisted, I hope that you have a good time here.  We're always
> happy to hear from a new contributor.
>
> Have you familiarized yourself with the basics of Twisted itself yet?
>  Before contributing it's useful to have a general idea of what Twisted is,
> what kinds of things it does, and a high level idea of how it works.
>
> Here are some links to get you started:
>
>     <https://twistedmatrix.com/documents/current/core/howto/servers.html>
>     <
> https://twistedmatrix.com/documents/current/core/howto/tutorial/index.html
> >
>     <http://krondo.com/?page_id=1327>
>
> Good luck!
>
> -glyph
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121230/d508fc93/attachment.htm 

From f at rtfs.org  Sun Dec 30 08:09:31 2012
From: f at rtfs.org (Fabian Sturm)
Date: Sun, 30 Dec 2012 14:09:31 +0100
Subject: [Twisted-Python] Using telnet or linereceiver protocol over ssh
Message-ID: <1356872971.4376.8.camel@krypton>

Hello,

I implemented a twisted ssh server using SSHFactory and successfully
registered the sftp factory.

I now also wanted to add a simple telnet like protocol where I can send
commands to the server and execute some actions based on that.
For that I hooked the LineReceive to the openShell command. It works and
I can ssh into the server, but I don't get the typed characters echoed
back. This unfortunately makes it unusable.

What I could do is to implement a standard Protocol and send the
received data back whenever I get a dataReceived call. And for a DEL
character I would have to send a BCKSPC, BLANK, BACKSPC sequence and
track the current line myself. This works but it sounds like too much to
do!

Is there a better way for something like that?

Sincerely,
Fabian



From glyph at twistedmatrix.com  Mon Dec 31 03:54:33 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 31 Dec 2012 00:54:33 -0800
Subject: [Twisted-Python] Using telnet or linereceiver protocol over ssh
In-Reply-To: <1356872971.4376.8.camel@krypton>
References: <1356872971.4376.8.camel@krypton>
Message-ID: <0F338E23-CE9C-4CC8-9ED5-784545605996@twistedmatrix.com>

On Dec 30, 2012, at 5:09 AM, Fabian Sturm <f at rtfs.org> wrote:

> Hello,

Hi Fabian,

> I implemented a twisted ssh server using SSHFactory and successfully
> registered the sftp factory.

Great, you're pretty far along then :).

> I now also wanted to add a simple telnet like protocol where I can send
> commands to the server and execute some actions based on that.
> For that I hooked the LineReceive to the openShell command. It works and
> I can ssh into the server, but I don't get the typed characters echoed
> back. This unfortunately makes it unusable.
> 
> What I could do is to implement a standard Protocol and send the
> received data back whenever I get a dataReceived call. And for a DEL
> character I would have to send a BCKSPC, BLANK, BACKSPC sequence and
> track the current line myself. This works but it sounds like too much to
> do!
> 
> Is there a better way for something like that?

Have you looked at HistoricRecvLine <https://twistedmatrix.com/documents/current/api/twisted.conch.recvline.HistoricRecvLine.html>?

It's not the easiest class to use, but it should do basically what you need, with various line-editing niceties.

This is also an area that could really benefit from some more maintenance, both in the code and the documentation; writing a command-line interface to Twisted should be a lot easier and more obvious.  So if you'd like to contribute to Twisted this is a good place to start :).

-glyph



From jessica.mckellar at gmail.com  Mon Dec 31 11:24:06 2012
From: jessica.mckellar at gmail.com (Jessica McKellar)
Date: Mon, 31 Dec 2012 11:24:06 -0500
Subject: [Twisted-Python] I am new :-)
In-Reply-To: <CAHr=iADFqk8MaP7Vmsr91wo6s-upBNrATSzsp5Ma2f+4cN8-zw@mail.gmail.com>
References: <CAJscYz0OtVwWouX9cKL0cfE8A0QRO76MOBoOusTpiX23w+ZPhA@mail.gmail.com>
	<50F76C43-06A3-4862-8C2E-721559D015D4@twistedmatrix.com>
	<CAHr=iADFqk8MaP7Vmsr91wo6s-upBNrATSzsp5Ma2f+4cN8-zw@mail.gmail.com>
Message-ID: <CAKDZRciyyWNbRyZxYg_-7JNMDt9V=QqDjxBa0MgTCPv7=u1ZQg@mail.gmail.com>

Hi Lupce,

> On topic of Aniket's question, I would like to ask what would be a fun
> project to do in Twisted that will help me learn Twisted? I have made an IRC
> bot till now, but I want to do something else.

Here are a couple of ideas:

1. Go through https://twistedmatrix.com/documents/current/web/howto/web-in-60/index.html
and then build a website that serves dynamic content using Twisted
Web.

2. Write a Twisted Mail client that does something interesting with
your GMail mail. For example, I've written an IMAP4 client that runs
out of cron and a) auto-archives and b) forwards a subset of my
e-mails to a chat service I use.

3. Go through http://as.ynchrono.us/2011/03/twisted-conch-in-60-seconds.html
(find the full series at http://as.ynchrono.us/search/label/ssh) and
then write a Twisted Conch SSH client.

4. Write a BitTorrent client using Twisted. There are some examples
online if you get stuck.

5. Contribute to Twisted! Start with
https://twistedmatrix.com/trac/wiki/ContributingToTwistedLabs, join us
in #twisted-dev on Freenode, and have a look at our bite-sized
tickets: https://bit.ly/easy-twisted-tickets.

If you are new to open source contribution, have a look at
https://twistedmatrix.com/trac/wiki/GoogleSOC#GettingStartedwithTwistedDevelopment,
which will walk you through the tools and workflow we use to develop
Twisted.

Regards,
-Jessica


From exarkun at twistedmatrix.com  Sat Dec  1 22:05:23 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 02 Dec 2012 05:05:23 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1354424723.32.1613974279@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121202/26e51939/attachment-0001.html>

From rutt.4 at osu.edu  Wed Dec  5 20:36:51 2012
From: rutt.4 at osu.edu (Benjamin Rutt)
Date: Wed, 5 Dec 2012 22:36:51 -0500
Subject: [Twisted-Python] inlineCallbacks loses custom exception type?
Message-ID: <CAMWA1_p4ajP5JTSdB_JxSU1vn8RGzW0BL4325R90WOWm3uiK5Q@mail.gmail.com>

Hi,

I am hitting an issue with inlineCallbacks-decorated functions.  It seems
that from within an inlineCallbacks-decorated func, if you yield on another
deferred-returning func, and that deferred-returning func returns a
deferred which will errback with a Failure wrapping a user defined
exception type, then the user defined exception gets repackaged as a common
Exception by the time you are in the inlineCallbacks-decorated function.
It seems to be related to the fact that inside an inlineCallbacks-decorated
func, if you yield on a func, and that func returns a deferred which errs
back, twisted will convert the errback into a synchronous exception that it
raises for you.  That’s all a bit wordy, so maybe some code will help
clarify:

$ cat inlinecallbacks-loses-exception-types.py
#!/usr/bin/env python

import sys, traceback
from twisted.internet         import defer, reactor

class MyException(Exception):
  pass

def go2():
    "An ordinary deferred-returning function that will return a deferred
which is ready to errback()"
    try:
        raise MyException('xyz')
    except Exception as e:
        return defer.fail() # errs back with current exception context

    return defer.succeed(1) # unreachable code

@defer.inlineCallbacks
def go_inlinecb():
    try:
        x = yield go2()
        print 'no exception raised'
    except MyException as e:
        print 'got my custom exception'
        traceback.print_exc()
    except Exception as e:
        print 'got a garden variety exception'
        traceback.print_exc()

def go_noinlinecb():
    d = go2()
    def cb(data):
        print 'got data in cb: %s' % (data)
    def eb(failure):
        try:
            failure.raiseException()
        except MyException as e:
            print 'got my custom exception'
            traceback.print_exc()
        except Exception as e:
            print 'got a garden variety exception'
            traceback.print_exc()
    d.addCallbacks(cb, eb)

if sys.argv[1] == 'inline':
    reactor.callWhenRunning(go_inlinecb)
elif sys.argv[1] == 'noinline':
    reactor.callWhenRunning(go_noinlinecb)
reactor.callLater(2, reactor.stop)
reactor.run()

$ ./inlinecallbacks-loses-exception-types.py inline
got a garden variety exception
Traceback (most recent call last):
  File "./inlinecallbacks-loses-exception-types.py", line 21, in go_inlinecb
    x = yield go2()
Exception: xyz

$ ./inlinecallbacks-loses-exception-types.py noinline
got my custom exception
Traceback (most recent call last):
  File "./inlinecallbacks-loses-exception-types.py", line 36, in eb
    failure.raiseException()
  File
"/sw/external/twisted-py27-11.0.0/lib/python/twisted/python/failure.py",
line 338, in raiseException
    raise self.type, self.value, self.tb
MyException: xyz

So as you can see, it seems that if you use inlineCallbacks, you cannot
‘except MyException’ and catch your own custom exceptions.  Somehow a
generic Exception is constructed.  Is there any workaround or is this a
known issue?

Thanks,

-- 
Benjamin Rutt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121205/8fa4c263/attachment-0001.html>

From tom.prince at ualberta.net  Wed Dec  5 21:00:31 2012
From: tom.prince at ualberta.net (Tom Prince)
Date: Wed, 05 Dec 2012 21:00:31 -0700
Subject: [Twisted-Python] inlineCallbacks loses custom exception type?
In-Reply-To: <CAMWA1_p4ajP5JTSdB_JxSU1vn8RGzW0BL4325R90WOWm3uiK5Q@mail.gmail.com>
References: <CAMWA1_p4ajP5JTSdB_JxSU1vn8RGzW0BL4325R90WOWm3uiK5Q@mail.gmail.com>
Message-ID: <877govakyo.fsf@hermes.hocat.ca>

Using the slightly simplified code (nothing uses the reactor, so do
stuff synchronosuly):

import sys, traceback
from twisted.internet import defer
 
class MyException(Exception):
  pass
 
def go2():
    "An ordinary deferred-returning function that will return a deferred which is ready to errback()"
    try:
        raise MyException('xyz')
    except Exception:
        return defer.fail() # errs back with current exception context
 
    return defer.succeed(1) # unreachable code
 
@defer.inlineCallbacks
def go_inlinecb():
    try:
        yield go2()
        print 'no exception raised'
    except MyException:
        print 'got my custom exception'
        traceback.print_exc()
    except Exception:
        print 'got a garden variety exception'
        traceback.print_exc()
 
def go_noinlinecb():
    d = go2()
    def cb(data):
        print 'got data in cb: %s' % (data)
    def eb(failure):
        try:
            failure.raiseException()
        except MyException:
            print 'got my custom exception'
            traceback.print_exc()
        except Exception:
            print 'got a garden variety exception'
            traceback.print_exc()
    d.addCallbacks(cb, eb)
 
if sys.argv[1] == 'inline':
    go_inlinecb()
elif sys.argv[1] == 'noinline':
    go_noinlinecb()


I get the follwing results:

% python test.py noinline
got my custom exception
Traceback (most recent call last):
  File "test.py", line 36, in eb
    failure.raiseException()
  File "/usr/lib64/python2.7/site-packages/twisted/python/failure.py", line 370, in raiseException
    raise self.type, self.value, self.tb
MyException: xyz

% python test.py inline  
got my custom exception
Traceback (most recent call last):
  File "test.py", line 21, in go_inlinecb
    yield go2()
MyException: xyz


This is with
% python --version
Python 2.7.3
% python -c 'import twisted; print twisted.__version__'
12.2.0

  Tom




From rodrigc at crodrigues.org  Thu Dec  6 02:25:34 2012
From: rodrigc at crodrigues.org (Craig Rodrigues)
Date: Thu, 6 Dec 2012 01:25:34 -0800
Subject: [Twisted-Python] Download instructions for twisted and
 ActiveState Python
In-Reply-To: <E10AEED1-CD54-4CA4-A2AF-577F8EE62A70@twistedmatrix.com>
References: <CAG=rPVcAObwspoMpg8T7P-TVgyeFsepx7XZ6VeXpjJ881mc4_g@mail.gmail.com>
	<E10AEED1-CD54-4CA4-A2AF-577F8EE62A70@twistedmatrix.com>
Message-ID: <CAG=rPVdnvmw1qqGES0HJ0dRqHyhE5=1c3AjoveEhJrG+HkKuhw@mail.gmail.com>

Hi,

Sure, I can add this to the wiki.  My trac id is rodrigc.

--
Craig Rodrigues
rodrigc at crodrigues.org



On Thu, Nov 29, 2012 at 12:45 PM, Glyph <glyph at twistedmatrix.com> wrote:

>
> On Nov 29, 2012, at 3:08 PM, Craig Rodrigues <rodrigc at crodrigues.org>
> wrote:
>
> Hi,
>
> At some of the Twisted Sprints in San Francisco,
> I found that on my Windows laptop, it was
> easy to set things up Twisted quickly by using the
> ActiveState Python package manager (pypm).
>
> I wrote some notes for doing this at:
> http://home.comcast.net/~rodrigc/python/twisted_install.html
>
> Rather than keep that info on my own web page, I thought
> it would be nice to contribute the information back to the Twisted wiki.
> This would not be the official way of installing Twisted on
> Windows, but would be some helpful information for
> an alternative way to install things on Windows.
>
> Since I do not have wiki edit permissions, I made a patch
> to http://twistedmatrix.com/trac/wiki/Downloads .
> If someone could help get this info on the wiki that would
> be great.
>
>
> Thanks for doing this; but, we mostly have wiki edit permissions just to
> keep out the spammers.  If you'd like to edit the wiki, just ask!  (with
> your trac username).
>
> -g
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
Craig Rodrigues
rodrigc at crodrigues.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121206/83a5200c/attachment.html>

From glyph at twistedmatrix.com  Thu Dec  6 13:53:32 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 6 Dec 2012 12:53:32 -0800
Subject: [Twisted-Python] Download instructions for twisted and
	ActiveState Python
In-Reply-To: <CAG=rPVdnvmw1qqGES0HJ0dRqHyhE5=1c3AjoveEhJrG+HkKuhw@mail.gmail.com>
References: <CAG=rPVcAObwspoMpg8T7P-TVgyeFsepx7XZ6VeXpjJ881mc4_g@mail.gmail.com>
	<E10AEED1-CD54-4CA4-A2AF-577F8EE62A70@twistedmatrix.com>
	<CAG=rPVdnvmw1qqGES0HJ0dRqHyhE5=1c3AjoveEhJrG+HkKuhw@mail.gmail.com>
Message-ID: <B072FBD8-0978-4182-945D-A43D2CCC9627@twistedmatrix.com>


On Dec 6, 2012, at 1:25 AM, Craig Rodrigues <rodrigc at crodrigues.org> wrote:

> On Thu, Nov 29, 2012 at 12:45 PM, Glyph <glyph at twistedmatrix.com> wrote:
> 
> On Nov 29, 2012, at 3:08 PM, Craig Rodrigues <rodrigc at crodrigues.org> wrote:
> 
>> Hi,
>> 
>> At some of the Twisted Sprints in San Francisco,
>> I found that on my Windows laptop, it was
>> easy to set things up Twisted quickly by using the
>> ActiveState Python package manager (pypm).
>> 
>> I wrote some notes for doing this at:
>> http://home.comcast.net/~rodrigc/python/twisted_install.html
>> 
>> Rather than keep that info on my own web page, I thought
>> it would be nice to contribute the information back to the Twisted wiki.
>> This would not be the official way of installing Twisted on
>> Windows, but would be some helpful information for
>> an alternative way to install things on Windows.
>> 
>> Since I do not have wiki edit permissions, I made a patch
>> to http://twistedmatrix.com/trac/wiki/Downloads .
>> If someone could help get this info on the wiki that would
>> be great.
> 
> Thanks for doing this; but, we mostly have wiki edit permissions just to keep out the spammers.  If you'd like to edit the wiki, just ask!  (with your trac username).
> 
> Sure, I can add this to the wiki.  My trac id is rodrigc.


Congratulations, you are now a trac editor.

(In the future, please post in-line rather than at the top; it makes archived messages easier to read on their own.)

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121206/8d9bfa0e/attachment-0001.html>

From exarkun at twistedmatrix.com  Fri Dec  7 08:00:52 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 07 Dec 2012 15:00:52 -0000
Subject: [Twisted-Python] inlineCallbacks loses custom exception type?
In-Reply-To: <CAMWA1_p4ajP5JTSdB_JxSU1vn8RGzW0BL4325R90WOWm3uiK5Q@mail.gmail.com>
References: <CAMWA1_p4ajP5JTSdB_JxSU1vn8RGzW0BL4325R90WOWm3uiK5Q@mail.gmail.com>
Message-ID: <20121207150052.4119.778504989.divmod.xquotient.3@localhost6.localdomain6>

On 6 Dec, 03:36 am, rutt.4 at osu.edu wrote:
>
>$ ./inlinecallbacks-loses-exception-types.py inline
>got a garden variety exception
>Traceback (most recent call last):
>  File "./inlinecallbacks-loses-exception-types.py", line 21, in 
>go_inlinecb
>    x = yield go2()
>Exception: xyz

I'm unable to reproduce this error behavior using Twisted trunk at HEAD on 
Ubuntu 12.04.

Jean-Paul



From rutt.4 at osu.edu  Fri Dec  7 19:03:07 2012
From: rutt.4 at osu.edu (Benjamin Rutt)
Date: Fri, 7 Dec 2012 21:03:07 -0500
Subject: [Twisted-Python] inlineCallbacks loses custom exception type?
In-Reply-To: <20121207150052.4119.778504989.divmod.xquotient.3@localhost6.localdomain6>
References: <CAMWA1_p4ajP5JTSdB_JxSU1vn8RGzW0BL4325R90WOWm3uiK5Q@mail.gmail.com>
	<20121207150052.4119.778504989.divmod.xquotient.3@localhost6.localdomain6>
Message-ID: <CAMWA1_qvOjQzPJLbKzPufSifAMuGhabdHUmt_cy9xa3ysL3dRQ@mail.gmail.com>

That's a useful data point, thanks.  I usually don't use unreleased
revisions of twisted, but I'll try the latest release for starters and see
what the result is.  Forgot to mention before, I am on python 2.7.1 and
twisted 11.0.0, so there's a chance this is fixed in a later release from
what I am running.

On Fri, Dec 7, 2012 at 10:00 AM, <exarkun at twistedmatrix.com> wrote:

> On 6 Dec, 03:36 am, rutt.4 at osu.edu wrote:
> >
> >$ ./inlinecallbacks-loses-exception-types.py inline
> >got a garden variety exception
> >Traceback (most recent call last):
> >  File "./inlinecallbacks-loses-exception-types.py", line 21, in
> >go_inlinecb
> >    x = yield go2()
> >Exception: xyz
>
> I'm unable to reproduce this error behavior using Twisted trunk at HEAD on
> Ubuntu 12.04.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
>


-- 
Benjamin Rutt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121207/b9595e01/attachment-0001.html>

From miha.valencic at gmail.com  Sat Dec  8 17:17:50 2012
From: miha.valencic at gmail.com (Miha Valencic)
Date: Sun, 9 Dec 2012 01:17:50 +0100
Subject: [Twisted-Python] Limiting the number of connections
Message-ID: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>

Hi!

I have developed a simple twisted tcp server which does ldap lookups
as a result of user input. I would like to limit the number of
connections each listener (I have 4, each on its own port)  accepts. I
guess people usually want to accept as many connections as possible,
but I would like to limit them.

>From what I've read (a single post from 2009):
"As you observed, doing this on the server accepts and then
immediately closes the connection. There is no way to not accept the
connection. This is a limitation of the underlying platform APIs."

Is this still the case? We can't limit the number of accepted connections?

Regards,
 Miha.



From exarkun at twistedmatrix.com  Sat Dec  8 22:05:23 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 09 Dec 2012 05:05:23 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1355029523.35.53415949@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121209/9137dd65/attachment.html>

From adi at roiban.ro  Sun Dec  9 02:44:11 2012
From: adi at roiban.ro (Adi Roiban)
Date: Sun, 9 Dec 2012 11:44:11 +0200
Subject: [Twisted-Python] Limiting the number of connections
In-Reply-To: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>
References: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>
Message-ID: <CAFycZ9cguG7dBDV7rk0t5TygB_F2L=de81_TzhR6bo95_aPeyQ@mail.gmail.com>

Hi,

On 9 December 2012 02:17, Miha Valencic <miha.valencic at gmail.com> wrote:
> Hi!
>
> I have developed a simple twisted tcp server which does ldap lookups
> as a result of user input. I would like to limit the number of
> connections each listener (I have 4, each on its own port)  accepts. I
> guess people usually want to accept as many connections as possible,
> but I would like to limit them.
>
> From what I've read (a single post from 2009):
> "As you observed, doing this on the server accepts and then
> immediately closes the connection. There is no way to not accept the
> connection. This is a limitation of the underlying platform APIs."
>
> Is this still the case? We can't limit the number of accepted connections?
>
Just to summarize:

* twisted.protocols.policies.LimitTotalConnectionsFactory is not what
you want since the server is still listening on the port?
LimitTotalConnectionsFactory is only returning a different protocol to
handle the overflow.... closing the new connection is a way to handle
the overflow.

* After a number of connections the server should stop listening on
the port... and then tor re-start listening after the connections are
closed?

Cheers,

-- 
Adi Roiban



From miha.valencic at gmail.com  Sun Dec  9 03:31:07 2012
From: miha.valencic at gmail.com (Miha Valencic)
Date: Sun, 9 Dec 2012 11:31:07 +0100
Subject: [Twisted-Python] Limiting the number of connections
In-Reply-To: <CAFycZ9cguG7dBDV7rk0t5TygB_F2L=de81_TzhR6bo95_aPeyQ@mail.gmail.com>
References: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>
	<CAFycZ9cguG7dBDV7rk0t5TygB_F2L=de81_TzhR6bo95_aPeyQ@mail.gmail.com>
Message-ID: <CA+_DGnQ-XsFwxCmiEvr48+52umDBYzkGb9+Vw-MeAkhRN-FcSA@mail.gmail.com>

Hi Adi!

Let me say upfront, that I'm not seeing any problems as of now. I am
asking this question out of engineering curiosity mostly and to know
whta to do if the problem would arose.

On Sun, Dec 9, 2012 at 10:44 AM, Adi Roiban <adi at roiban.ro> wrote:
> Hi,
> Just to summarize:
>
> * twisted.protocols.policies.LimitTotalConnectionsFactory is not what
> you want since the server is still listening on the port?
> LimitTotalConnectionsFactory is only returning a different protocol to
> handle the overflow.... closing the new connection is a way to handle
> the overflow.

I've never heard of LimitTotalConnectionsFactory before. This
particular mode of operation is desirable, since the client is
connected and disconnected. I was aiming more towards a usual approach
within webservers, where they have a certain amount of tcp workers,
and size of the waiting queue. That way the client does not get
disconnected, but waits a little and then gets a result. You know how
to webserver sometimes times out...

But, really, thinking about it, this factory is the right after all.
Akin to "http 550 service unavailable" when the service is not able to
respond to requests. If I understand the description correctly,
defining custom protocol that write "unavailable" and closes
connection, setting this protocol as a overflowProtocol would have the
exact behaviour I am after.

> * After a number of connections the server should stop listening on
> the port... and then tor re-start listening after the connections are
> closed?

No, the server shouldn't accept() the socket after n connections are
opened(). But see previous paragraph.

Regards, Miha.



From itamar at itamarst.org  Sun Dec  9 05:57:16 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Sun, 09 Dec 2012 07:57:16 -0500
Subject: [Twisted-Python] Limiting the number of connections
In-Reply-To: <CA+_DGnQ-XsFwxCmiEvr48+52umDBYzkGb9+Vw-MeAkhRN-FcSA@mail.gmail.com>
References: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>
	<CAFycZ9cguG7dBDV7rk0t5TygB_F2L=de81_TzhR6bo95_aPeyQ@mail.gmail.com>
	<CA+_DGnQ-XsFwxCmiEvr48+52umDBYzkGb9+Vw-MeAkhRN-FcSA@mail.gmail.com>
Message-ID: <50C48AAC.4020505@itamarst.org>

On 12/09/2012 05:31 AM, Miha Valencic wrote:
> No, the server shouldn't accept() the socket after n connections are
> opened(). But see previous paragraph.

You can stop accept()ing by calling stopReading() on the returned port 
object:

port = reactor.listenTCP(....)
port.stopReading()

And start again by calling startReading().

However:
  - When you are accept()ing, it will accept() a few at a time.
  - Even if you stop accept()ing, the OS will still do TCP handshakes, 
approximately up to a limit determined by one of the arguments passed to 
listenTCP.
  - After hitting the limit, clients will get connection refused, IIRC.

In general it's better to do a protocol-level solution, as Adi Roiban 
suggested.



From adi at roiban.ro  Sun Dec  9 06:04:28 2012
From: adi at roiban.ro (Adi Roiban)
Date: Sun, 9 Dec 2012 15:04:28 +0200
Subject: [Twisted-Python] Limiting the number of connections
In-Reply-To: <CA+_DGnQ-XsFwxCmiEvr48+52umDBYzkGb9+Vw-MeAkhRN-FcSA@mail.gmail.com>
References: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>
	<CAFycZ9cguG7dBDV7rk0t5TygB_F2L=de81_TzhR6bo95_aPeyQ@mail.gmail.com>
	<CA+_DGnQ-XsFwxCmiEvr48+52umDBYzkGb9+Vw-MeAkhRN-FcSA@mail.gmail.com>
Message-ID: <CAFycZ9c5o=7VArbo=5nqRTqc--jLtJY-xnt7efuS6riUawB0LA@mail.gmail.com>

On 9 December 2012 12:31, Miha Valencic <miha.valencic at gmail.com> wrote:
> Hi Adi!
>
> Let me say upfront, that I'm not seeing any problems as of now. I am
> asking this question out of engineering curiosity mostly and to know
> whta to do if the problem would arose.
>
> On Sun, Dec 9, 2012 at 10:44 AM, Adi Roiban <adi at roiban.ro> wrote:
>> Hi,
>> Just to summarize:
>>
>> * twisted.protocols.policies.LimitTotalConnectionsFactory is not what
>> you want since the server is still listening on the port?
>> LimitTotalConnectionsFactory is only returning a different protocol to
>> handle the overflow.... closing the new connection is a way to handle
>> the overflow.
>
> I've never heard of LimitTotalConnectionsFactory before. This
> particular mode of operation is desirable, since the client is
> connected and disconnected. I was aiming more towards a usual approach
> within webservers, where they have a certain amount of tcp workers,
> and size of the waiting queue. That way the client does not get
> disconnected, but waits a little and then gets a result. You know how
> to webserver sometimes times out...
>
> But, really, thinking about it, this factory is the right after all.
> Akin to "http 550 service unavailable" when the service is not able to
> respond to requests. If I understand the description correctly,
> defining custom protocol that write "unavailable" and closes
> connection, setting this protocol as a overflowProtocol would have the
> exact behaviour I am after.

Yes. You can implement a simple HTTP protocol which always returns 503
or some other code.

>> * After a number of connections the server should stop listening on
>> the port... and then tor re-start listening after the connections are
>> closed?
>
> No, the server shouldn't accept() the socket after n connections are
> opened(). But see previous paragraph.

I think that we are talking about different "accepts", but
LimitTotalConnectionsFactory should do your job.

Cheers
-- 
Adi Roiban



From miha.valencic at gmail.com  Sun Dec  9 06:07:27 2012
From: miha.valencic at gmail.com (Miha Valencic)
Date: Sun, 9 Dec 2012 14:07:27 +0100
Subject: [Twisted-Python] Limiting the number of connections
In-Reply-To: <50C48AAC.4020505@itamarst.org>
References: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>
	<CAFycZ9cguG7dBDV7rk0t5TygB_F2L=de81_TzhR6bo95_aPeyQ@mail.gmail.com>
	<CA+_DGnQ-XsFwxCmiEvr48+52umDBYzkGb9+Vw-MeAkhRN-FcSA@mail.gmail.com>
	<50C48AAC.4020505@itamarst.org>
Message-ID: <CA+_DGnSUZ37PGwwLyBveKYhNDkEDyHYeYvAQXcXOeWde=9px0g@mail.gmail.com>

Itamar, I agree. After reading Adi Roiban's proposed solution I think
it is the correct way to handle such scenarios.

Regards,
 Miha.

On Sun, Dec 9, 2012 at 1:57 PM, Itamar Turner-Trauring
<itamar at itamarst.org> wrote:
> On 12/09/2012 05:31 AM, Miha Valencic wrote:
>> No, the server shouldn't accept() the socket after n connections are
>> opened(). But see previous paragraph.
>
> You can stop accept()ing by calling stopReading() on the returned port
> object:
>
> port = reactor.listenTCP(....)
> port.stopReading()
>
> And start again by calling startReading().
>
> However:
>   - When you are accept()ing, it will accept() a few at a time.
>   - Even if you stop accept()ing, the OS will still do TCP handshakes,
> approximately up to a limit determined by one of the arguments passed to
> listenTCP.
>   - After hitting the limit, clients will get connection refused, IIRC.
>
> In general it's better to do a protocol-level solution, as Adi Roiban
> suggested.
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From adi at roiban.ro  Sun Dec  9 06:14:54 2012
From: adi at roiban.ro (Adi Roiban)
Date: Sun, 9 Dec 2012 15:14:54 +0200
Subject: [Twisted-Python] Limiting the number of connections
In-Reply-To: <50C48AAC.4020505@itamarst.org>
References: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>
	<CAFycZ9cguG7dBDV7rk0t5TygB_F2L=de81_TzhR6bo95_aPeyQ@mail.gmail.com>
	<CA+_DGnQ-XsFwxCmiEvr48+52umDBYzkGb9+Vw-MeAkhRN-FcSA@mail.gmail.com>
	<50C48AAC.4020505@itamarst.org>
Message-ID: <CAFycZ9eYw6=xncVNVdgyFxrQecQMJk-TDzn9ARWCvTU5bbcgyg@mail.gmail.com>

On 9 December 2012 14:57, Itamar Turner-Trauring <itamar at itamarst.org> wrote:
> On 12/09/2012 05:31 AM, Miha Valencic wrote:
>> No, the server shouldn't accept() the socket after n connections are
>> opened(). But see previous paragraph.
>
> You can stop accept()ing by calling stopReading() on the returned port
> object:
>
> port = reactor.listenTCP(....)
> port.stopReading()
>
> And start again by calling startReading().
[snip]

Many thanks for you explanation.

Checking the documentation I can read that reactor.listenTCP returns
an IListeningPort [1]
Checking IListeningPort I can read that it has no stopReading() ,
startReading() methods [2]

Can you please advise how and when to use startReading vs startListening ?

Many thanks!

[1] http://twistedmatrix.com/documents/12.2.0/api/twisted.internet.interfaces.IReactorTCP.html#listenTCP
[2] http://twistedmatrix.com/documents/12.2.0/api/twisted.internet.interfaces.IListeningPort.html

-- 
Adi Roiban



From itamar at itamarst.org  Sun Dec  9 06:23:29 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Sun, 09 Dec 2012 08:23:29 -0500
Subject: [Twisted-Python] Limiting the number of connections
In-Reply-To: <CAFycZ9eYw6=xncVNVdgyFxrQecQMJk-TDzn9ARWCvTU5bbcgyg@mail.gmail.com>
References: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>
	<CAFycZ9cguG7dBDV7rk0t5TygB_F2L=de81_TzhR6bo95_aPeyQ@mail.gmail.com>
	<CA+_DGnQ-XsFwxCmiEvr48+52umDBYzkGb9+Vw-MeAkhRN-FcSA@mail.gmail.com>
	<50C48AAC.4020505@itamarst.org>
	<CAFycZ9eYw6=xncVNVdgyFxrQecQMJk-TDzn9ARWCvTU5bbcgyg@mail.gmail.com>
Message-ID: <50C490D1.9020909@itamarst.org>

On 12/09/2012 08:14 AM, Adi Roiban wrote:
> Many thanks for you explanation.
>
> Checking the documentation I can read that reactor.listenTCP returns
> an IListeningPort [1]
> Checking IListeningPort I can read that it has no stopReading() ,
> startReading() methods [2]
>
> Can you please advise how and when to use startReading vs startListening ?
A port object is also typically a IReadWriteFileDescriptor or whatever 
the interface is, though perhaps not on IOCP, or some other hypothetical 
future reactor. startListening() does the opposite of stopListening(), 
it's completely different than stop/startReading - the former pair are 
permanent 'open or close the socket', vs. the latter 'unregister socket 
from event loop temporarily'.

In any case, as I said, doing stopReading() on a TCP port is not 
particularly useful, much better to handle it in factory and protocol level.



From adi at roiban.ro  Sun Dec  9 06:25:07 2012
From: adi at roiban.ro (Adi Roiban)
Date: Sun, 9 Dec 2012 15:25:07 +0200
Subject: [Twisted-Python] Limiting the number of connections
In-Reply-To: <CAFycZ9eYw6=xncVNVdgyFxrQecQMJk-TDzn9ARWCvTU5bbcgyg@mail.gmail.com>
References: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>
	<CAFycZ9cguG7dBDV7rk0t5TygB_F2L=de81_TzhR6bo95_aPeyQ@mail.gmail.com>
	<CA+_DGnQ-XsFwxCmiEvr48+52umDBYzkGb9+Vw-MeAkhRN-FcSA@mail.gmail.com>
	<50C48AAC.4020505@itamarst.org>
	<CAFycZ9eYw6=xncVNVdgyFxrQecQMJk-TDzn9ARWCvTU5bbcgyg@mail.gmail.com>
Message-ID: <CAFycZ9dLi2zMe_JybPcpt6RwEgimKtP7xj1esr3j=UqOYL4=ow@mail.gmail.com>

On 9 December 2012 15:14, Adi Roiban <adi at roiban.ro> wrote:
> On 9 December 2012 14:57, Itamar Turner-Trauring <itamar at itamarst.org> wrote:
>> On 12/09/2012 05:31 AM, Miha Valencic wrote:
>>> No, the server shouldn't accept() the socket after n connections are
>>> opened(). But see previous paragraph.
>>
>> You can stop accept()ing by calling stopReading() on the returned port
>> object:
>>
>> port = reactor.listenTCP(....)
>> port.stopReading()
>>
>> And start again by calling startReading().
> [snip]
>
> Many thanks for you explanation.
>
> Checking the documentation I can read that reactor.listenTCP returns
> an IListeningPort [1]
> Checking IListeningPort I can read that it has no stopReading() ,
> startReading() methods [2]
>
> Can you please advise how and when to use startReading vs startListening ?

I would like to rephrase my previous question:

I understood that stopListening() is closing the listening socket,
while stopReading does not closed the listening socket, but rather
stops from handling new connection using the attached factory ... and
new connections are queued in the backlog.

What interfaces defines startReading/stopReading for a TCP Port?

Thanks!

-- 
Adi Roiban



From adi at roiban.ro  Sun Dec  9 06:31:08 2012
From: adi at roiban.ro (Adi Roiban)
Date: Sun, 9 Dec 2012 15:31:08 +0200
Subject: [Twisted-Python] Limiting the number of connections
In-Reply-To: <50C490D1.9020909@itamarst.org>
References: <CA+_DGnS8_pwoBtXWdbhFB_Z6gQS0P48K7iQcOusuuVP9ZXxJhA@mail.gmail.com>
	<CAFycZ9cguG7dBDV7rk0t5TygB_F2L=de81_TzhR6bo95_aPeyQ@mail.gmail.com>
	<CA+_DGnQ-XsFwxCmiEvr48+52umDBYzkGb9+Vw-MeAkhRN-FcSA@mail.gmail.com>
	<50C48AAC.4020505@itamarst.org>
	<CAFycZ9eYw6=xncVNVdgyFxrQecQMJk-TDzn9ARWCvTU5bbcgyg@mail.gmail.com>
	<50C490D1.9020909@itamarst.org>
Message-ID: <CAFycZ9cTGc=s-iA4qknqF1=ihesa5Y3WHZadr=rfPGtT7Sgq7g@mail.gmail.com>

On 9 December 2012 15:23, Itamar Turner-Trauring <itamar at itamarst.org> wrote:
> On 12/09/2012 08:14 AM, Adi Roiban wrote:
>> Many thanks for you explanation.
>>
>> Checking the documentation I can read that reactor.listenTCP returns
>> an IListeningPort [1]
>> Checking IListeningPort I can read that it has no stopReading() ,
>> startReading() methods [2]
>>
>> Can you please advise how and when to use startReading vs startListening ?
> A port object is also typically a IReadWriteFileDescriptor or whatever
> the interface is, though perhaps not on IOCP, or some other hypothetical
> future reactor. startListening() does the opposite of stopListening(),
> it's completely different than stop/startReading - the former pair are
> permanent 'open or close the socket', vs. the latter 'unregister socket
> from event loop temporarily'.
>
> In any case, as I said, doing stopReading() on a TCP port is not
> particularly useful, much better to handle it in factory and protocol level.

Many thanks! That answered my question.

-- 
Adi Roiban



From meejah at meejah.ca  Sun Dec  9 13:08:06 2012
From: meejah at meejah.ca (meejah at meejah.ca)
Date: Sun, 09 Dec 2012 13:08:06 -0700
Subject: [Twisted-Python] twisted logo use?
Message-ID: <E1ThnAU-0003zE-S3@panthalassa.cg.shawcable.net>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


Is this an acceptable (ab)use of the twisted logo? I can't find
anything obvious on twistedmatrix.com about this sort of thing.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: txtorcon-logo-truncated-150px.png
Type: image/png
Size: 16327 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20121209/f1c6af0c/attachment-0002.png>
-------------- next part --------------

More information about txtorcon is at https://txtorcon.readthedocs.org

thanks,
meejah
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)
Comment: Processed by Mailcrypt 3.5.8 <http://mailcrypt.sourceforge.net/>

iQEcBAEBAgAGBQJQxO+XAAoJEMJgKAMSgGmnRzcH/1Pmo9OwQ4OTDGmTHvPARqER
2FH4noSwgULpNclIB58QEKlkbfCA1yFpZwMUj2dKtnGEz8kxwl1R3TPnjisSRs1f
5qXIaGg1uKAlCW0re2/xzp9GQCDzX3HfUkw7/GVs4nkASJOMAauUA2YMFd3+J430
oxPQUrmVHDnsw4pKMgRtWCv3gpySrBbNMvis0cc2CjNWpDtfSZX/+wtOjDN3oTII
OBWp8yG/hR21TdBrmwJ7RLqFN3Cnpqyu8PATkyKMdyGLlXHf1jhaswJ/8OY15iAN
rj5iZQPndMfgeVcj0TjGmJtqfOdtd+2ooFkPkr1Ge6zHo7irmvbNnYcJeNaB+7c=
=G/88
-----END PGP SIGNATURE-----

From glyph at twistedmatrix.com  Mon Dec 10 17:04:01 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 10 Dec 2012 16:04:01 -0800
Subject: [Twisted-Python] twisted logo use?
In-Reply-To: <E1ThnAU-0003zE-S3@panthalassa.cg.shawcable.net>
References: <E1ThnAU-0003zE-S3@panthalassa.cg.shawcable.net>
Message-ID: <8F6AFFB9-3A7E-4A38-8EAE-5C7EE186E7CC@twistedmatrix.com>

On Dec 9, 2012, at 12:08 PM, meejah at meejah.ca wrote:

> Is this an acceptable (ab)use of the twisted logo? I can't find
> anything obvious on twistedmatrix.com about this sort of thing.

Hi Meejah,

Thanks for asking.  Speaking (officially) on behalf of the project leadership committee, we approve of this usage.

And thanks for using Twisted :).

You're absolutely right that we need to have a page on twistedmatrix.com explaining trademark policy, and probably we should set up a dedicated email alias.  We'll do this in our collective copious free time, you should see an announcement on this list when it's ready.

-glyph


From msc at contact.de  Wed Dec 12 06:22:50 2012
From: msc at contact.de (Michael Schlenker)
Date: Wed, 12 Dec 2012 14:22:50 +0100
Subject: [Twisted-Python] How to get the Python socket object for an TLS
	connection?
Message-ID: <50C8852A.8000605@contact.de>

Hi,

i use twisted for some volume streaming over fat pipes (10 GE) and need
to tweak the rcv and send buffer sizes when streaming via
socket.setsockopt(). Otherwise Twisted spends lots of time calling the
producer with tiny blocksizes and writing those tiny buffers to the tiny
OS buffer. Speedup for streaming was around 40x when using a large
buffer instead of default block and buffer sizes, so this is really needed.

I'm using Twisted 12.2.

It works fine when using reactor.listenTCP(), but fails when using
reactor.listenSSL() because transport.getHandle() does not return a
socket object in that case (i get some SSL.Connection object instead).

I already saw the TLSMemoryBIOProtocol, so there should be some way to
get at the real socket object. Do i just need to skip the listenSSL()
step and use the steps outlined in
http://twistedmatrix.com/documents/12.2.0/api/twisted.protocols.tls.html ?

import os
import socket
from twisted.internet import reactor
from twisted.web import server, http, resource
from twisted.internet.ssl import DefaultOpenSSLContextFactory

port = 2000
bufsize = 4*1024*1024

class HTTPChannel(http.HTTPChannel):
  def connectionMade(self):
      sock = self.transport.getHandle()
      # this fails, but works when using listenTCP()
      sock.setsockopt(socket.SOL_SOCKET, socket.SO_RCVBUF, bufsize)

def main():
    keyfile = os.path.join('certs', 'server-key.pem')
    certfile = os.path.join('certs', 'server.pem')
    ctx = DefaultOpenSSLContextFactory(keyfile, certfile)
    site = server.Site(resource.NoResource())
    site.protocol = HTTPChannel
    reactor.listenSSL(port, site, ctx)
    reactor.run()

Michael

-- 
Michael Schlenker
Software Architect

CONTACT Software GmbH           Tel.:   +49 (421) 20153-80
Wiener Straße 1-3               Fax:    +49 (421) 20153-41
28359 Bremen
http://www.contact.de/          E-Mail: msc at contact.de

Sitz der Gesellschaft: Bremen
Geschäftsführer: Karl Heinz Zachries, Ralf Holtgrefe
Eingetragen im Handelsregister des Amtsgerichts Bremen unter HRB 13215



From msc at contact.de  Wed Dec 12 06:56:50 2012
From: msc at contact.de (Michael Schlenker)
Date: Wed, 12 Dec 2012 14:56:50 +0100
Subject: [Twisted-Python] How to get the Python socket object for an TLS
 connection?
In-Reply-To: <50C8852A.8000605@contact.de>
References: <50C8852A.8000605@contact.de>
Message-ID: <50C88D22.8080900@contact.de>

Hi,

answering my own post at least a bit...

It seems the issue is that TLSMemoryBIOProtocol shadows the getHandle()
method from the original TCPTransport, if i rename it to getHandle2() in
TLSMemoryBIOProtocol all works fine (but obviously other stuff will break).

Looks like Ticket #5182 is only fixed 95% of the way if one needs to
access getHandle() of the underlying TCPTransport.

Are there any easy workarounds to get the socket handle anyway?

Michael


Am 12.12.2012 14:22, schrieb Michael Schlenker:
> Hi,
> 
> i use twisted for some volume streaming over fat pipes (10 GE) and need
> to tweak the rcv and send buffer sizes when streaming via
> socket.setsockopt(). Otherwise Twisted spends lots of time calling the
> producer with tiny blocksizes and writing those tiny buffers to the tiny
> OS buffer. Speedup for streaming was around 40x when using a large
> buffer instead of default block and buffer sizes, so this is really needed.
> 
> I'm using Twisted 12.2.
> 
> It works fine when using reactor.listenTCP(), but fails when using
> reactor.listenSSL() because transport.getHandle() does not return a
> socket object in that case (i get some SSL.Connection object instead).
> 
> I already saw the TLSMemoryBIOProtocol, so there should be some way to
> get at the real socket object. Do i just need to skip the listenSSL()
> step and use the steps outlined in
> http://twistedmatrix.com/documents/12.2.0/api/twisted.protocols.tls.html ?
> 
> import os
> import socket
> from twisted.internet import reactor
> from twisted.web import server, http, resource
> from twisted.internet.ssl import DefaultOpenSSLContextFactory
> 
> port = 2000
> bufsize = 4*1024*1024
> 
> class HTTPChannel(http.HTTPChannel):
>   def connectionMade(self):
>       sock = self.transport.getHandle()
>       # this fails, but works when using listenTCP()
>       sock.setsockopt(socket.SOL_SOCKET, socket.SO_RCVBUF, bufsize)
> 
> def main():
>     keyfile = os.path.join('certs', 'server-key.pem')
>     certfile = os.path.join('certs', 'server.pem')
>     ctx = DefaultOpenSSLContextFactory(keyfile, certfile)
>     site = server.Site(resource.NoResource())
>     site.protocol = HTTPChannel
>     reactor.listenSSL(port, site, ctx)
>     reactor.run()
> 
> Michael
> 


-- 
Michael Schlenker
Software Architect

CONTACT Software GmbH           Tel.:   +49 (421) 20153-80
Wiener Straße 1-3               Fax:    +49 (421) 20153-41
28359 Bremen
http://www.contact.de/          E-Mail: msc at contact.de

Sitz der Gesellschaft: Bremen
Geschäftsführer: Karl Heinz Zachries, Ralf Holtgrefe
Eingetragen im Handelsregister des Amtsgerichts Bremen unter HRB 13215



From itamar at futurefoundries.com  Wed Dec 12 07:11:42 2012
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Wed, 12 Dec 2012 09:11:42 -0500
Subject: [Twisted-Python] How to get the Python socket object for an TLS
	connection?
In-Reply-To: <50C8852A.8000605@contact.de>
References: <50C8852A.8000605@contact.de>
Message-ID: <CAOp9P3o+LEaBWOTYZVPCbOQp6o7aJNv7QkftfZUvCOGPMZfvwQ@mail.gmail.com>

On Wed, Dec 12, 2012 at 8:22 AM, Michael Schlenker <msc at contact.de> wrote:

> Hi,
>
> i use twisted for some volume streaming over fat pipes (10 GE) and need
> to tweak the rcv and send buffer sizes when streaming via
> socket.setsockopt(). Otherwise Twisted spends lots of time calling the
> producer with tiny blocksizes and writing those tiny buffers to the tiny
> OS buffer. Speedup for streaming was around 40x when using a large
> buffer instead of default block and buffer sizes, so this is really needed.
>
> I'm using Twisted 12.2.
>
> It works fine when using reactor.listenTCP(), but fails when using
> reactor.listenSSL() because transport.getHandle() does not return a
> socket object in that case (i get some SSL.Connection object instead).
>

Probably the thing to do is listenTCP() rather than listenSSL(), and then:

class YourProtocol(BaseProtocol):
    def connectionMade(self):
        self.transport.getHandle().setsockopt(...)
        self.transport.startTLS(contextFactory)
        BaseProtocol.connectionMade(self)

Ideally, of course, Twisted would have an API for changing the
producer/consumer buffer sizes and corresponding OS buffers.

-- 
Itamar Turner-Trauring, Future Foundries LLC
http://futurefoundries.com/ — Twisted consulting, training and support.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121212/88db6eb0/attachment.html>

From akaradag at NETAS.com.tr  Wed Dec 12 07:52:49 2012
From: akaradag at NETAS.com.tr (Anil  KARADAG)
Date: Wed, 12 Dec 2012 16:52:49 +0200
Subject: [Twisted-Python] how to change default reactor of twisted.internet?
Message-ID: <AFE3D52FC015A5408CD28098BD0439C6B752A3@netasmx.netas.lab.nortel.com>

Hi all,

 

 

I have a question about reactor of "twisted.internet" module. I found
below;

 

 

The default reactor is "select";

 

[root at karadag internet]# pwd

/usr/lib/python2.6/site-packages/Twisted-10.0.0-py2.6-linux-x86_64.egg/t
wisted/internet

[root at karadag internet]# cat reactor.py

# Copyright (c) 2001-2008 Twisted Matrix Laboratories.

# See LICENSE for details.

 

"""

The reactor is the Twisted event loop within Twisted, the loop which
drives

applications using Twisted. The reactor provides APIs for networking,

threading, dispatching events, and more.

 

The default reactor is based on C{select(2)} and will be installed if
this

module is imported without another reactor being explicitly installed.

Regardless of which reactor is installed, importing this module is the
correct

way to get a reference to it.

 

New application code should prefer to pass and accept the reactor as a

parameter where it is needed, rather than relying on being able to
import this

module to get a reference.  This simplifies unit testing and may make it
easier

to one day support multiple reactors (as a performance enhancement),
though

this is not currently possible.

 

@see: L{IReactorCore<twisted.internet.interfaces.IReactorCore>}

@see: L{IReactorTime<twisted.internet.interfaces.IReactorTime>}

@see: L{IReactorProcess<twisted.internet.interfaces.IReactorProcess>}

@see: L{IReactorTCP<twisted.internet.interfaces.IReactorTCP>}

@see: L{IReactorSSL<twisted.internet.interfaces.IReactorSSL>}

@see: L{IReactorUDP<twisted.internet.interfaces.IReactorUDP>}

@see:
L{IReactorMulticast<twisted.internet.interfaces.IReactorMulticast>}

@see: L{IReactorUNIX<twisted.internet.interfaces.IReactorUNIX>}

@see:
L{IReactorUNIXDatagram<twisted.internet.interfaces.IReactorUNIXDatagram>
}

@see: L{IReactorFDSet<twisted.internet.interfaces.IReactorFDSet>}

@see: L{IReactorThreads<twisted.internet.interfaces.IReactorThreads>}

@see:
L{IReactorArbitrary<twisted.internet.interfaces.IReactorArbitrary>}

@see:
L{IReactorPluggableResolver<twisted.internet.interfaces.IReactorPluggabl
eResolver>}

"""

 

import sys

del sys.modules['twisted.internet.reactor']

from twisted.internet import selectreactor

selectreactor.install()

 

 

---------------------------------------------------------------

 

 

[root at karadag internet]# twistd --help

Usage: twistd [options]

Options:

...

 

  -r, --reactor=         Which reactor to use (see --help-reactors for a
list of

                         possibilities)

      --help             Display this help and exit.

 

twistd reads a twisted.application.service.Application out of a file and
runs

it.

Commands:

    ftp                          An FTP server.

    telnet                       A simple, telnet-based remote debugging

                                 service.

    socks                        A SOCKSv4 proxy service.

    manhole-old                  An interactive remote debugger service.

    portforward                  A simple port-forwarder.

    web                          A general-purpose web server which can
serve

                                 from a filesystem or application
resource.

    inetd                        An inetd(8) replacement.

    news                         A news server.

    wokkel-component-server      An XMPP Component Server

    xmpp-router                  An XMPP Router server

    words                        A modern words server

    toc                          An AIM TOC service.

    dns                          A domain name server.

    mail                         An email service

    manhole                      An interactive remote debugger service

                                 accessible via telnet and ssh and
providing

                                 syntax coloring and basic line editing

                                 functionality.

    conch                        A Conch SSH service.

 

 

thanks

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121212/5ce111e8/attachment.html>

From itamar at itamarst.org  Wed Dec 12 08:06:33 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Wed, 12 Dec 2012 10:06:33 -0500
Subject: [Twisted-Python] how to change default reactor of
	twisted.internet?
In-Reply-To: <AFE3D52FC015A5408CD28098BD0439C6B752A3@netasmx.netas.lab.nortel.com>
References: <AFE3D52FC015A5408CD28098BD0439C6B752A3@netasmx.netas.lab.nortel.com>
Message-ID: <50C89D79.1040403@itamarst.org>

On 12/12/2012 09:52 AM, Anil KARADAG wrote:
>
> Hi all,
>
> I have a question about reactor of “twisted.internet” module. I found 
> below;
>
> The default reactor is “select”;
>
>
In newer versions of Twisted the default is not select, it may be poll 
or epoll depending on platform.

You are probably asking "how do I set the reactor", this is covered in 
http://twistedmatrix.com/documents/current/core/howto/choosing-reactor.html 
- if that is not your question you might want to explain a bit better 
what you need to know.



From stephen at thorne.id.au  Wed Dec 12 08:08:43 2012
From: stephen at thorne.id.au (Stephen Thorne)
Date: Wed, 12 Dec 2012 15:08:43 +0000
Subject: [Twisted-Python] how to change default reactor of
	twisted.internet?
In-Reply-To: <AFE3D52FC015A5408CD28098BD0439C6B752A3@netasmx.netas.lab.nortel.com>
References: <AFE3D52FC015A5408CD28098BD0439C6B752A3@netasmx.netas.lab.nortel.com>
Message-ID: <CAFPU7=tb3rnAhxgAfCG3Bv2Er63-4p5W6B4BstXDqY+mwwTGzA@mail.gmail.com>

What is your question?


On Wed, Dec 12, 2012 at 2:52 PM, Anil KARADAG <akaradag at netas.com.tr> wrote:

> Hi all,****
>
> ** **
>
> ** **
>
> I have a question about reactor of “twisted.internet” module. I found
> below;****
>
> ** **
>
> ** **
>
> The default reactor is “select”;****
>
> ** **
>
> [root at karadag internet]# pwd****
>
> *
> /usr/lib/python2.6/site-packages/Twisted-10.0.0-py2.6-linux-x86_64.egg/twisted/internet
> *
>
> *[root at karadag internet]# cat reactor.py*
>
> # Copyright (c) 2001-2008 Twisted Matrix Laboratories.****
>
> # See LICENSE for details.****
>
> ** **
>
> """****
>
> The reactor is the Twisted event loop within Twisted, the loop which drives
> ****
>
> applications using Twisted. The reactor provides APIs for networking,****
>
> threading, dispatching events, and more.****
>
> ** **
>
> The default reactor is based on C{select(2)} and will be installed if this
> ****
>
> module is imported without another reactor being explicitly installed.****
>
> Regardless of which reactor is installed, importing this module is the
> correct****
>
> way to get a reference to it.****
>
> ** **
>
> New application code should prefer to pass and accept the reactor as a****
>
> parameter where it is needed, rather than relying on being able to import
> this****
>
> module to get a reference.  This simplifies unit testing and may make it
> easier****
>
> to one day support multiple reactors (as a performance enhancement), though
> ****
>
> this is not currently possible.****
>
> ** **
>
> @see: L{IReactorCore<twisted.internet.interfaces.IReactorCore>}****
>
> @see: L{IReactorTime<twisted.internet.interfaces.IReactorTime>}****
>
> @see: L{IReactorProcess<twisted.internet.interfaces.IReactorProcess>}****
>
> @see: L{IReactorTCP<twisted.internet.interfaces.IReactorTCP>}****
>
> @see: L{IReactorSSL<twisted.internet.interfaces.IReactorSSL>}****
>
> @see: L{IReactorUDP<twisted.internet.interfaces.IReactorUDP>}****
>
> @see: L{IReactorMulticast<twisted.internet.interfaces.IReactorMulticast>}*
> ***
>
> @see: L{IReactorUNIX<twisted.internet.interfaces.IReactorUNIX>}****
>
> @see:
> L{IReactorUNIXDatagram<twisted.internet.interfaces.IReactorUNIXDatagram>}*
> ***
>
> @see: L{IReactorFDSet<twisted.internet.interfaces.IReactorFDSet>}****
>
> @see: L{IReactorThreads<twisted.internet.interfaces.IReactorThreads>}****
>
> @see: L{IReactorArbitrary<twisted.internet.interfaces.IReactorArbitrary>}*
> ***
>
> @see:
> L{IReactorPluggableResolver<twisted.internet.interfaces.IReactorPluggableResolver>}
> ****
>
> """****
>
> ** **
>
> *import sys*
>
> *del sys.modules['twisted.internet.reactor']*
>
> *from twisted.internet import selectreactor*
>
> *selectreactor.install()*
>
> ** **
>
> ** **
>
> ---------------------------------------------------------------****
>
> ** **
>
> ** **
>
> [root at karadag internet]# twistd --help****
>
> Usage: twistd [options]****
>
> Options:****
>
> …****
>
> ** **
>
> *  -r, --reactor=         Which reactor to use (see --help-reactors for a
> list of*
>
> *                         possibilities)*
>
>       --help             Display this help and exit.****
>
> ** **
>
> twistd reads a twisted.application.service.Application out of a file and
> runs****
>
> it.****
>
> Commands:****
>
>     ftp                          An FTP server.****
>
>     telnet                       A simple, telnet-based remote debugging**
> **
>
>                                  service.****
>
>     socks                        A SOCKSv4 proxy service.****
>
>     manhole-old                  An interactive remote debugger service.**
> **
>
>     portforward                  A simple port-forwarder.****
>
>     web                          A general-purpose web server which can
> serve****
>
>                                  from a filesystem or application resource.
> ****
>
>     inetd                        An inetd(8) replacement.****
>
>     news                         A news server.****
>
>     wokkel-component-server      An XMPP Component Server****
>
>     xmpp-router                  An XMPP Router server****
>
>     words                        A modern words server****
>
>     toc                          An AIM TOC service.****
>
>     dns                          A domain name server.****
>
>     mail                         An email service****
>
>     manhole                      An interactive remote debugger service***
> *
>
>                                  accessible via telnet and ssh and
> providing****
>
>                                  syntax coloring and basic line editing***
> *
>
>                                  functionality.****
>
>     conch                        A Conch SSH service.****
>
> ** **
>
> ** **
>
> thanks****
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121212/912e1477/attachment.html>

From _ at lvh.cc  Wed Dec 12 08:10:02 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Wed, 12 Dec 2012 16:10:02 +0100
Subject: [Twisted-Python] how to change default reactor of
	twisted.internet?
In-Reply-To: <AFE3D52FC015A5408CD28098BD0439C6B752A3@netasmx.netas.lab.nortel.com>
References: <AFE3D52FC015A5408CD28098BD0439C6B752A3@netasmx.netas.lab.nortel.com>
Message-ID: <CAE_Hg6Zc1b95M980+k2f8ZJaAT2TFOUyWuCN5cXLtzxLWTL8=A@mail.gmail.com>

You should update your twisted install; it'll pick a better default then
"select" on most platforms.

For installing other reactors, see individual reactor's documentation, e.g:

https://twistedmatrix.com/documents/current/api/twisted.internet.cfreactor.html

(because individual reactors may require special magic)


On Wed, Dec 12, 2012 at 3:52 PM, Anil KARADAG <akaradag at netas.com.tr> wrote:

> Hi all,****
>
> ** **
>
> ** **
>
> I have a question about reactor of “twisted.internet” module. I found
> below;****
>
> ** **
>
> ** **
>
> The default reactor is “select”;****
>
> ** **
>
> [root at karadag internet]# pwd****
>
> *
> /usr/lib/python2.6/site-packages/Twisted-10.0.0-py2.6-linux-x86_64.egg/twisted/internet
> *
>
> *[root at karadag internet]# cat reactor.py*
>
> # Copyright (c) 2001-2008 Twisted Matrix Laboratories.****
>
> # See LICENSE for details.****
>
> ** **
>
> """****
>
> The reactor is the Twisted event loop within Twisted, the loop which drives
> ****
>
> applications using Twisted. The reactor provides APIs for networking,****
>
> threading, dispatching events, and more.****
>
> ** **
>
> The default reactor is based on C{select(2)} and will be installed if this
> ****
>
> module is imported without another reactor being explicitly installed.****
>
> Regardless of which reactor is installed, importing this module is the
> correct****
>
> way to get a reference to it.****
>
> ** **
>
> New application code should prefer to pass and accept the reactor as a****
>
> parameter where it is needed, rather than relying on being able to import
> this****
>
> module to get a reference.  This simplifies unit testing and may make it
> easier****
>
> to one day support multiple reactors (as a performance enhancement), though
> ****
>
> this is not currently possible.****
>
> ** **
>
> @see: L{IReactorCore<twisted.internet.interfaces.IReactorCore>}****
>
> @see: L{IReactorTime<twisted.internet.interfaces.IReactorTime>}****
>
> @see: L{IReactorProcess<twisted.internet.interfaces.IReactorProcess>}****
>
> @see: L{IReactorTCP<twisted.internet.interfaces.IReactorTCP>}****
>
> @see: L{IReactorSSL<twisted.internet.interfaces.IReactorSSL>}****
>
> @see: L{IReactorUDP<twisted.internet.interfaces.IReactorUDP>}****
>
> @see: L{IReactorMulticast<twisted.internet.interfaces.IReactorMulticast>}*
> ***
>
> @see: L{IReactorUNIX<twisted.internet.interfaces.IReactorUNIX>}****
>
> @see:
> L{IReactorUNIXDatagram<twisted.internet.interfaces.IReactorUNIXDatagram>}*
> ***
>
> @see: L{IReactorFDSet<twisted.internet.interfaces.IReactorFDSet>}****
>
> @see: L{IReactorThreads<twisted.internet.interfaces.IReactorThreads>}****
>
> @see: L{IReactorArbitrary<twisted.internet.interfaces.IReactorArbitrary>}*
> ***
>
> @see:
> L{IReactorPluggableResolver<twisted.internet.interfaces.IReactorPluggableResolver>}
> ****
>
> """****
>
> ** **
>
> *import sys*
>
> *del sys.modules['twisted.internet.reactor']*
>
> *from twisted.internet import selectreactor*
>
> *selectreactor.install()*
>
> ** **
>
> ** **
>
> ---------------------------------------------------------------****
>
> ** **
>
> ** **
>
> [root at karadag internet]# twistd --help****
>
> Usage: twistd [options]****
>
> Options:****
>
> …****
>
> ** **
>
> *  -r, --reactor=         Which reactor to use (see --help-reactors for a
> list of*
>
> *                         possibilities)*
>
>       --help             Display this help and exit.****
>
> ** **
>
> twistd reads a twisted.application.service.Application out of a file and
> runs****
>
> it.****
>
> Commands:****
>
>     ftp                          An FTP server.****
>
>     telnet                       A simple, telnet-based remote debugging**
> **
>
>                                  service.****
>
>     socks                        A SOCKSv4 proxy service.****
>
>     manhole-old                  An interactive remote debugger service.**
> **
>
>     portforward                  A simple port-forwarder.****
>
>     web                          A general-purpose web server which can
> serve****
>
>                                  from a filesystem or application resource.
> ****
>
>     inetd                        An inetd(8) replacement.****
>
>     news                         A news server.****
>
>     wokkel-component-server      An XMPP Component Server****
>
>     xmpp-router                  An XMPP Router server****
>
>     words                        A modern words server****
>
>     toc                          An AIM TOC service.****
>
>     dns                          A domain name server.****
>
>     mail                         An email service****
>
>     manhole                      An interactive remote debugger service***
> *
>
>                                  accessible via telnet and ssh and
> providing****
>
>                                  syntax coloring and basic line editing***
> *
>
>                                  functionality.****
>
>     conch                        A Conch SSH service.****
>
> ** **
>
> ** **
>
> thanks****
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121212/b213bc31/attachment.html>

From therve at free.fr  Fri Dec 14 07:06:46 2012
From: therve at free.fr (=?ISO-8859-1?Q?Thomas_Herv=E9?=)
Date: Fri, 14 Dec 2012 15:06:46 +0100
Subject: [Twisted-Python] First pre-release of Twisted 12.3.0
Message-ID: <50CB3276.5090808@free.fr>

Hello everyone,

Yes, you're reading well. For the first time ever (since 2008), we're
actually pushing not 2, not 3, but 4 releases in a calendar year! Just
to be able to use the fancy 12.3 version number.

But, apart from this nice label, this release also closes 158 tickets,
among them:

 * Support for local parallel testing in trial

 * A new "react" function to easily run a single asynchronous function
in a script with the reactor.

 * Partial support for Python 3.3.

Note that only Python 2.7 is supported on Windows now. We also require
zope.interface 3.6.0 or newer.

You can find the tarballs of the pre-release here:
    http://twistedmatrix.com/~therve/12.3.0pre1/

For more information, see the NEWS file.

Please download the tarballs and test them!

-- 
Thomas



From kevin.horn at gmail.com  Fri Dec 14 07:25:48 2012
From: kevin.horn at gmail.com (Kevin Horn)
Date: Fri, 14 Dec 2012 08:25:48 -0600
Subject: [Twisted-Python] First pre-release of Twisted 12.3.0
In-Reply-To: <50CB3276.5090808@free.fr>
References: <50CB3276.5090808@free.fr>
Message-ID: <CA+U=zK2f5-oQe2pjQCfiN1j2Nb2n+CEyGr1Cu_x5F1eAOeUh=A@mail.gmail.com>

<happydance/>


On Fri, Dec 14, 2012 at 8:06 AM, Thomas Hervé <therve at free.fr> wrote:

> Hello everyone,
>
> Yes, you're reading well. For the first time ever (since 2008), we're
> actually pushing not 2, not 3, but 4 releases in a calendar year! Just
> to be able to use the fancy 12.3 version number.
>
> But, apart from this nice label, this release also closes 158 tickets,
> among them:
>
>  * Support for local parallel testing in trial
>
>  * A new "react" function to easily run a single asynchronous function
> in a script with the reactor.
>
>  * Partial support for Python 3.3.
>
> Note that only Python 2.7 is supported on Windows now. We also require
> zope.interface 3.6.0 or newer.
>
> You can find the tarballs of the pre-release here:
>     http://twistedmatrix.com/~therve/12.3.0pre1/
>
> For more information, see the NEWS file.
>
> Please download the tarballs and test them!
>
> --
> Thomas
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
--
Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121214/fd319424/attachment-0001.html>

From teratorn at gmail.com  Fri Dec 14 10:11:56 2012
From: teratorn at gmail.com (Eric P. Mangold)
Date: Fri, 14 Dec 2012 11:11:56 -0600
Subject: [Twisted-Python] First pre-release of Twisted 12.3.0
In-Reply-To: <50CB3276.5090808@free.fr>
References: <50CB3276.5090808@free.fr>
Message-ID: <CAMCvQ9swqAhnBcHOLH8ULPr8qR6vvNY2E1kLwY7rDTx53mAVjA@mail.gmail.com>

Awesome work, Thomas.

I have an issue with this pre-release on OpenBSD. setup.py aborts trying to
compile sendmsg.c

This is a known bug that has a patch, and is presently awaiting a review.
http://twistedmatrix.com/trac/ticket/5907

I would like to request a new pre-release with this fix once it has been
reviewed and merged. (someone? pretty please?)

Cheers,
-E

On Fri, Dec 14, 2012 at 8:06 AM, Thomas Hervé <therve at free.fr> wrote:

> Hello everyone,
>
> Yes, you're reading well. For the first time ever (since 2008), we're
> actually pushing not 2, not 3, but 4 releases in a calendar year! Just
> to be able to use the fancy 12.3 version number.
>
> But, apart from this nice label, this release also closes 158 tickets,
> among them:
>
>  * Support for local parallel testing in trial
>
>  * A new "react" function to easily run a single asynchronous function
> in a script with the reactor.
>
>  * Partial support for Python 3.3.
>
> Note that only Python 2.7 is supported on Windows now. We also require
> zope.interface 3.6.0 or newer.
>
> You can find the tarballs of the pre-release here:
>     http://twistedmatrix.com/~therve/12.3.0pre1/
>
> For more information, see the NEWS file.
>
> Please download the tarballs and test them!
>
> --
> Thomas
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121214/a7b3b7db/attachment.html>

From glyph at twistedmatrix.com  Fri Dec 14 15:04:40 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 14 Dec 2012 14:04:40 -0800
Subject: [Twisted-Python] First pre-release of Twisted 12.3.0
In-Reply-To: <CAMCvQ9swqAhnBcHOLH8ULPr8qR6vvNY2E1kLwY7rDTx53mAVjA@mail.gmail.com>
References: <50CB3276.5090808@free.fr>
	<CAMCvQ9swqAhnBcHOLH8ULPr8qR6vvNY2E1kLwY7rDTx53mAVjA@mail.gmail.com>
Message-ID: <A6A786CC-3E21-49EA-AFDB-077C513E5EA9@twistedmatrix.com>


On Dec 14, 2012, at 9:11 AM, Eric P. Mangold <teratorn at gmail.com> wrote:

> Awesome work, Thomas.
> 
> I have an issue with this pre-release on OpenBSD. setup.py aborts trying to compile sendmsg.c
> 
> This is a known bug that has a patch, and is presently awaiting a review.
> http://twistedmatrix.com/trac/ticket/5907
> 
> I would like to request a new pre-release with this fix once it has been reviewed and merged. (someone? pretty please?)
> 
> Cheers,
> -E
> 

Hi Eric,

We generally don't issue new pre-releases for issues that are not regressions.  Thomas is the release manager in this case so it is his call, but it would be nice to get the 12.* releases all out within 2012 :).  I think it'd be a lot better to focus on this for 13.0, and try to push for 13.0 to be released sooner rather than 12.3 to be released later.

Not only is this ticket not a regression, and is OpenBSD not a supported platform for Twisted, but it looks like we don't even have an un-supported builder for that platform, so other developers would have a hard time reviewing the ticket without setting up their own personal virtualization infrastructure.  In the meanwhile you might want to consider provisioning and contributing an OpenBSD buildbot, so we can start the process of transitioning it from unsupported to supported.

As far as getting your ticket reviewed, The best way to get your tickets reviewed is to do code reviews for other people, so that when a reviewer with some free time comes around, you'll be first in the queue.  Unfortunately it looks like your ticket is dead last at the moment, so clearing out any other reviews would be extra helpful in its case!

	<http://twistedmatrix.com/trac/report/15>

Since clearing the _whole_ queue is probably an impossible amount of effort, personally I'd be happy to offer you the same deal that Martin van Löwis pioneered on the Python core mailing list: if you do five code reviews, I'll review a ticket of your choice, virtualization infrastructure hassles notwithstanding :).

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121214/ef530470/attachment.html>

From itamar at itamarst.org  Fri Dec 14 16:32:28 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Fri, 14 Dec 2012 18:32:28 -0500
Subject: [Twisted-Python] First pre-release of Twisted 12.3.0
In-Reply-To: <A6A786CC-3E21-49EA-AFDB-077C513E5EA9@twistedmatrix.com>
References: <50CB3276.5090808@free.fr>
	<CAMCvQ9swqAhnBcHOLH8ULPr8qR6vvNY2E1kLwY7rDTx53mAVjA@mail.gmail.com>
	<A6A786CC-3E21-49EA-AFDB-077C513E5EA9@twistedmatrix.com>
Message-ID: <50CBB70C.4060508@itamarst.org>

On 12/14/2012 05:04 PM, Glyph wrote:
> Not only is this ticket not a regression, and is OpenBSD not a 
> supported platform for Twisted, but it looks like we don't even have 
> an /un-/supported builder for that platform, so other developers would 
> have a hard time reviewing the ticket without setting up their own 
> personal virtualization infrastructure.  In the meanwhile you might 
> want to consider provisioning and contributing an OpenBSD buildbot, so 
> we can start the process of transitioning it from unsupported to 
> supported.
>
We have access to the Snakebite farm now, which I'm pretty sure would 
allow us to setup an OpenBSD builder.



From eric at teratorn.org  Fri Dec 14 17:31:55 2012
From: eric at teratorn.org (Eric P. Mangold)
Date: Fri, 14 Dec 2012 19:31:55 -0500
Subject: [Twisted-Python] First pre-release of Twisted 12.3.0
In-Reply-To: <A6A786CC-3E21-49EA-AFDB-077C513E5EA9@twistedmatrix.com>
References: <50CB3276.5090808@free.fr>
	<CAMCvQ9swqAhnBcHOLH8ULPr8qR6vvNY2E1kLwY7rDTx53mAVjA@mail.gmail.com>
	<A6A786CC-3E21-49EA-AFDB-077C513E5EA9@twistedmatrix.com>
Message-ID: <20121215003155.GN2279@ragnarok.teratorn.org>

On Fri, Dec 14, 2012 at 02:04:40PM -0800, Glyph wrote:
> 
> On Dec 14, 2012, at 9:11 AM, Eric P. Mangold <teratorn at gmail.com> wrote:
> 
> > Awesome work, Thomas.
> > 
> > I have an issue with this pre-release on OpenBSD. setup.py aborts trying to compile sendmsg.c
> > 
> > This is a known bug that has a patch, and is presently awaiting a review.
> > http://twistedmatrix.com/trac/ticket/5907
> > 
> > I would like to request a new pre-release with this fix once it has been reviewed and merged. (someone? pretty please?)
> > 
> > Cheers,
> > -E
> > 
> 
> Hi Eric,
> 
> We generally don't issue new pre-releases for issues that are not regressions.  Thomas is the release manager in this case so it is his call, but it would be nice to get the 12.* releases all out within 2012 :).  I think it'd be a lot better to focus on this for 13.0, and try to push for 13.0 to be released sooner rather than 12.3 to be released later.
> 
> Not only is this ticket not a regression, and is OpenBSD not a supported platform for Twisted, but it looks like we don't even have an un-supported builder for that platform, so other developers would have a hard time reviewing the ticket without setting up their own personal virtualization infrastructure.  In the meanwhile you might want to consider provisioning and contributing an OpenBSD buildbot, so we can start the process of transitioning it from unsupported to supported.

Hi Glyph,

Technically, it's only NOT a regression BECAUSE OpenBSD is not a supported platform (yet). It's clearly a regression of functionality, because releases of Twisted prior to sendmsg.c did not have any issue building on OpenBSD (afaik). But I agree with the definition of regression being constrained to behaviors on supported platforms only...
 
OTOH - the bug is trivial, and the fix is also trivial, and has been verified by two people (the original patch author, and myself). Yes it still needs to pass review, but *possibly* this will not delay the release much... as long as it's out by Christmas, that is soon enough, right? =)

In my mind, it's fairly embarrassing that our setup.py is borked on the 2nd most popular BSD, and so I would still like to ask Thomas if he wouldn't mind trying to fit this in. But as you say - it is his call :)

> As far as getting your ticket reviewed, The best way to get your tickets reviewed is to do code reviews for other people, so that when a reviewer with some free time comes around, you'll be first in the queue.  Unfortunately it looks like your ticket is dead last at the moment, so clearing out any other reviews would be extra helpful in its case!
> 
> 	<http://twistedmatrix.com/trac/report/15>
> 
> Since clearing the _whole_ queue is probably an impossible amount of effort, personally I'd be happy to offer you the same deal that Martin van L?wis pioneered on the Python core mailing list: if you do five code reviews, I'll review a ticket of your choice, virtualization infrastructure hassles notwithstanding :).

It's a fair deal - but with things as they are, I barely have time to do even the small bits of work that I do. When it comes to reviews, I'm afraid I'll probably always be a beggar :/

Oh, and uh technically, since I have not changed the original author's patch (hence, I am not the original author of the code) I can perform the review on this patch myself? I believe I have done this before, and unless there is some objection, I guess I can go ahead and do that...

Oh and yes - I AM going to see about getting some OpenBSD buildslaves, whether via Snakebite farm, or some other route.

Cheers,
-E



From glyph at twistedmatrix.com  Fri Dec 14 17:24:17 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 14 Dec 2012 16:24:17 -0800
Subject: [Twisted-Python] First pre-release of Twisted 12.3.0
In-Reply-To: <50CBB70C.4060508@itamarst.org>
References: <50CB3276.5090808@free.fr>
	<CAMCvQ9swqAhnBcHOLH8ULPr8qR6vvNY2E1kLwY7rDTx53mAVjA@mail.gmail.com>
	<A6A786CC-3E21-49EA-AFDB-077C513E5EA9@twistedmatrix.com>
	<50CBB70C.4060508@itamarst.org>
Message-ID: <939DF39F-8A0D-4DE1-8992-5AC4F248D4C8@twistedmatrix.com>


On Dec 14, 2012, at 3:32 PM, Itamar Turner-Trauring <itamar at itamarst.org> wrote:

> We have access to the Snakebite farm now, which I'm pretty sure would 
> allow us to setup an OpenBSD builder.

Cool.  And by "cool", I mean, I'm still not going to do it :).  Would it be possible to get someone interested - such as Eric - the appropriate snakebite credentials so they can do it?

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121214/13dbfcde/attachment.html>

From itamar at itamarst.org  Fri Dec 14 17:45:41 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Fri, 14 Dec 2012 19:45:41 -0500
Subject: [Twisted-Python] First pre-release of Twisted 12.3.0
In-Reply-To: <20121215003155.GN2279@ragnarok.teratorn.org>
References: <50CB3276.5090808@free.fr>
	<CAMCvQ9swqAhnBcHOLH8ULPr8qR6vvNY2E1kLwY7rDTx53mAVjA@mail.gmail.com>
	<A6A786CC-3E21-49EA-AFDB-077C513E5EA9@twistedmatrix.com>
	<20121215003155.GN2279@ragnarok.teratorn.org>
Message-ID: <50CBC835.1040206@itamarst.org>

On 12/14/2012 07:31 PM, Eric P. Mangold wrote:
> Oh, and uh technically, since I have not changed the original author's patch (hence, I am not the original author of the code) I can perform the review on this patch myself? I believe I have done this before, and unless there is some objection, I guess I can go ahead and do that...
>
I've definitely gotten a patch or two in where the verification was done 
manually by a reviewer due to obscureness of the platform and lack of 
current buildslave (*cough*python-gi*cough*). So I'd say yes. But having 
a build machine is *much* better.



From glyph at twistedmatrix.com  Fri Dec 14 17:58:27 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 14 Dec 2012 16:58:27 -0800
Subject: [Twisted-Python] First pre-release of Twisted 12.3.0
In-Reply-To: <20121215003155.GN2279@ragnarok.teratorn.org>
References: <50CB3276.5090808@free.fr>
	<CAMCvQ9swqAhnBcHOLH8ULPr8qR6vvNY2E1kLwY7rDTx53mAVjA@mail.gmail.com>
	<A6A786CC-3E21-49EA-AFDB-077C513E5EA9@twistedmatrix.com>
	<20121215003155.GN2279@ragnarok.teratorn.org>
Message-ID: <980CCB41-CA7B-4B2B-A653-F06CBD99CB55@twistedmatrix.com>


On Dec 14, 2012, at 4:31 PM, "Eric P. Mangold" <eric at teratorn.org> wrote:

> On Fri, Dec 14, 2012 at 02:04:40PM -0800, Glyph wrote:
>> 
>> On Dec 14, 2012, at 9:11 AM, Eric P. Mangold <teratorn at gmail.com> wrote:
>> 
>>> Awesome work, Thomas.
>>> 
>>> I have an issue with this pre-release on OpenBSD. setup.py aborts trying to compile sendmsg.c
>>> 
>>> This is a known bug that has a patch, and is presently awaiting a review.
>>> http://twistedmatrix.com/trac/ticket/5907
>>> 
>>> I would like to request a new pre-release with this fix once it has been reviewed and merged. (someone? pretty please?)
>>> 
>>> Cheers,
>>> -E
>>> 
>> 
>> Hi Eric,
>> 
>> We generally don't issue new pre-releases for issues that are not regressions.  Thomas is the release manager in this case so it is his call, but it would be nice to get the 12.* releases all out within 2012 :).  I think it'd be a lot better to focus on this for 13.0, and try to push for 13.0 to be released sooner rather than 12.3 to be released later.
>> 
>> Not only is this ticket not a regression, and is OpenBSD not a supported platform for Twisted, but it looks like we don't even have an un-supported builder for that platform, so other developers would have a hard time reviewing the ticket without setting up their own personal virtualization infrastructure.  In the meanwhile you might want to consider provisioning and contributing an OpenBSD buildbot, so we can start the process of transitioning it from unsupported to supported.
> 
> Hi Glyph,
> 
> Technically, it's only NOT a regression BECAUSE OpenBSD is not a supported platform (yet). It's clearly a regression of functionality, because releases of Twisted prior to sendmsg.c did not have any issue building on OpenBSD (afaik). But I agree with the definition of regression being constrained to behaviors on supported platforms only...
> 
> OTOH - the bug is trivial, and the fix is also trivial, and has been verified by two people (the original patch author, and myself). Yes it still needs to pass review, but *possibly* this will not delay the release much... as long as it's out by Christmas, that is soon enough, right? =)

Well, okay, but you'll have to convince Thomas, not me ;).

> In my mind, it's fairly embarrassing that our setup.py is borked on the 2nd most popular BSD, and so I would still like to ask Thomas if he wouldn't mind trying to fit this in. But as you say - it is his call :)

Personally I'm not embarrassed.  In fact I think it's great!  If people rely on Twisted to work on their platform, they need to be motivated to contribute the resources to keep that platform working - and that's both in terms of buildbots and in terms of review time.  I would prefer, in fact, that "your platform is not necessarily going to work right" failures be more loud and immediate.

Also - the time to get stuff into a release is at the start of its cycle, not the end.  Even if this particular change does get in, I'm glad we've had this discussion to remind everyone of that fact.

>> As far as getting your ticket reviewed, The best way to get your tickets reviewed is to do code reviews for other people, so that when a reviewer with some free time comes around, you'll be first in the queue.  Unfortunately it looks like your ticket is dead last at the moment, so clearing out any other reviews would be extra helpful in its case!
>> 
>> 	<http://twistedmatrix.com/trac/report/15>
>> 
>> Since clearing the _whole_ queue is probably an impossible amount of effort, personally I'd be happy to offer you the same deal that Martin van L?wis pioneered on the Python core mailing list: if you do five code reviews, I'll review a ticket of your choice, virtualization infrastructure hassles notwithstanding :).
> 
> It's a fair deal - but with things as they are, I barely have time to do even the small bits of work that I do. When it comes to reviews, I'm afraid I'll probably always be a beggar :/

Doing one review a week is a pretty small commitment (speaking here as the pot).

> Oh, and uh technically, since I have not changed the original author's patch (hence, I am not the original author of the code) I can perform the review on this patch myself? I believe I have done this before, and unless there is some objection, I guess I can go ahead and do that...

Yes, you can do the review.  Don't half-ass it though :-).

You should work on this soon regardless of whether it gets into 12.3 or 13.0 though.  It seems like the current release is the most important when stuff like this happens, but time marches inexorably forward, and someday soon 12.3 will be old news, and you'll wish you got it in time for 13.0 instead.

> Oh and yes - I AM going to see about getting some OpenBSD buildslaves, whether via Snakebite farm, or some other route.

Great.

-g


From exarkun at twistedmatrix.com  Sat Dec 15 22:05:24 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 16 Dec 2012 05:05:24 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1355634324.66.181057440@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121216/935a47c8/attachment-0001.html>

From therve at free.fr  Thu Dec 20 07:58:00 2012
From: therve at free.fr (=?ISO-8859-1?Q?Thomas_Herv=E9?=)
Date: Thu, 20 Dec 2012 15:58:00 +0100
Subject: [Twisted-Python] Second pre-release of Twisted 12.3.0
Message-ID: <50D32778.8080502@free.fr>

Hi twisteders,

As it turns out, making a 4th release in 2012 wasn't going to be easy!
Thanks to the testing of David Reid, we found and fixed an issue with
pip which was making installation difficult when zope.interface was
missing. And we got another fix with the help of Eric Mangold, fixing
the compilation on OpenBSD.

The tarballs of the second pre-release can be found here:
	http://twistedmatrix.com/~therve/12.3.0pre2/

Thank you for testing it again!

-- 
Thomas



From _ at lvh.cc  Thu Dec 20 10:23:35 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Thu, 20 Dec 2012 18:23:35 +0100
Subject: [Twisted-Python] Second pre-release of Twisted 12.3.0
In-Reply-To: <50D32778.8080502@free.fr>
References: <50D32778.8080502@free.fr>
Message-ID: <CAE_Hg6byd+kQDiz_PNofr5tf8NN2eqEv=tB_SYobwqpZ+aE3Vg@mail.gmail.com>

I just noticed that I forgot to say this on the previous pre-release, but
this counts for both:

All tests green on my end :)


On Thu, Dec 20, 2012 at 3:58 PM, Thomas Hervé <therve at free.fr> wrote:

> Hi twisteders,
>
> As it turns out, making a 4th release in 2012 wasn't going to be easy!
> Thanks to the testing of David Reid, we found and fixed an issue with
> pip which was making installation difficult when zope.interface was
> missing. And we got another fix with the help of Eric Mangold, fixing
> the compilation on OpenBSD.
>
> The tarballs of the second pre-release can be found here:
>         http://twistedmatrix.com/~therve/12.3.0pre2/
>
> Thank you for testing it again!
>
> --
> Thomas
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121220/21b9935f/attachment-0001.html>

From duncan.mcgreggor at gmail.com  Thu Dec 20 10:55:16 2012
From: duncan.mcgreggor at gmail.com (Duncan McGreggor)
Date: Thu, 20 Dec 2012 09:55:16 -0800
Subject: [Twisted-Python] Second pre-release of Twisted 12.3.0
In-Reply-To: <50D32778.8080502@free.fr>
References: <50D32778.8080502@free.fr>
Message-ID: <CAFJQhU6q5FYnxjpodKGzTNpWVi-rBCpx5PTJ7j7R8KXDMdtBWw@mail.gmail.com>

On Thu, Dec 20, 2012 at 6:58 AM, Thomas Hervé <therve at free.fr> wrote:

> Hi twisteders,
>
> As it turns out, making a 4th release in 2012 wasn't going to be easy!
> Thanks to the testing of David Reid, we found and fixed an issue with
> pip which was making installation difficult when zope.interface was
> missing. And we got another fix with the help of Eric Mangold, fixing
> the compilation on OpenBSD.
>
> The tarballs of the second pre-release can be found here:
>         http://twistedmatrix.com/~therve/12.3.0pre2/
>
> Thank you for testing it again!
>

Nicely done, Thomas!

d
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121220/41745ccd/attachment.html>

From poalman at gmail.com  Fri Dec 21 09:12:38 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Fri, 21 Dec 2012 16:12:38 +0000
Subject: [Twisted-Python] TaskStopped error, unsure of the cause and solution
Message-ID: <CACgdh2hFm80KFzDBY7sCS5XveZNX8dovo1XGt3Jt_WrJFQ7tJA@mail.gmail.com>

Hey,

I'm getting the following error in my logs (lots and lots), but only
after the server has been running for some time, I'm not sure what the
cause is or what I can do to remedy it.

This is what I see in the logs:

2012-12-20 17:07:17+0000 [HTTP11ClientProtocol,client] Unhandled Error
        Traceback (most recent call last):
        Failure: twisted.web._newclient.RequestTransmissionFailed:
[<twisted.python.failure.Failure <class
'twisted.internet.error.ConnectionDone'>>]

2012-12-20 17:07:17+0000 [HTTP11ClientProtocol,client] Unexpected
exception from twisted.web.client.FileBodyProducer.stopProducing
        Traceback (most recent call last):
          File "/usr/local/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/internet/endpoints.py",
line 99, in connectionLost
            return self._wrappedProtocol.connectionLost(reason)
          File "/usr/local/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/web/_newclient.py",
line 859, in dispatcher
            return func(*args, **kwargs)
          File "/usr/local/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/web/_newclient.py",
line 1458, in _connectionLost_TRANSMITTING
            self._currentRequest.stopWriting()
          File "/usr/local/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/web/_newclient.py",
line 760, in stopWriting
            _callAppFunction(self.bodyProducer.stopProducing)
        --- <exception caught here> ---
          File "/usr/local/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/web/_newclient.py",
line 191, in _callAppFunction
            function()
          File "/usr/local/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/web/client.py",
line 760, in stopProducing
            self._task.stop()
          File "/usr/local/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/internet/task.py",
line 459, in stop
            self._checkFinish()
          File "/usr/local/lib/python2.7/site-packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/internet/task.py",
line 469, in _checkFinish
            raise self._completionState
        twisted.internet.task.TaskStopped:

Just loads of those, they always seem to come through in pairs (the
first twisted.internet.error.ConnectionDone, and then the
twisted.internet.task.TaskStopped as above)

I'm just doing PUT requests with twisted.web.client.Agent and using a
twisted.web.client.FileBodyProducer to provide the content.

I'm doing the PUT while I still have the request from a render_GET, so
I thought maybe it's caused if the user disconnects while I'm doing
the PUT? The idea is I redirect them to the file I PUT with
request.redirect, which seems to work fine (until I get this error and
it doesn't)

The reason I do a PUT and redirect, instead of just writing back to
the request is that I check if the file is in a cache first, I then
only PUT if it's not there- then redirect afterwards.

Any clues or ideas of what is happening would be hugely helpful

thanks!!

Paul



From exarkun at twistedmatrix.com  Fri Dec 21 11:08:22 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 21 Dec 2012 18:08:22 -0000
Subject: [Twisted-Python] TaskStopped error,
 unsure of the cause and solution
In-Reply-To: <CACgdh2hFm80KFzDBY7sCS5XveZNX8dovo1XGt3Jt_WrJFQ7tJA@mail.gmail.com>
References: <CACgdh2hFm80KFzDBY7sCS5XveZNX8dovo1XGt3Jt_WrJFQ7tJA@mail.gmail.com>
Message-ID: <20121221180822.6389.1626477491.divmod.xquotient.354@localhost6.localdomain6>

On 04:12 pm, poalman at gmail.com wrote:
>Hey,
>
>I'm getting the following error in my logs (lots and lots), but only
>after the server has been running for some time, I'm not sure what the
>cause is or what I can do to remedy it.

This seems like a bug in `Agent`, perhaps related to `stopProducing` 
being called more than once.  It would be great if you could produce a 
minimal example to include with a bug report in the issue tracker.  An 
example that reproduces the problem will also make it easier to see 
where the bug is in your code, if it happens to be there rather than in 
Twisted.

Jean-Paul
>This is what I see in the logs:
>
>2012-12-20 17:07:17+0000 [HTTP11ClientProtocol,client] Unhandled Error
>        Traceback (most recent call last):
>        Failure: twisted.web._newclient.RequestTransmissionFailed:
>[<twisted.python.failure.Failure <class
>'twisted.internet.error.ConnectionDone'>>]
>
>2012-12-20 17:07:17+0000 [HTTP11ClientProtocol,client] Unexpected
>exception from twisted.web.client.FileBodyProducer.stopProducing
>        Traceback (most recent call last):
>          File "/usr/local/lib/python2.7/site- 
>packages/Twisted-12.2.0-py2.7-linux- 
>x86_64.egg/twisted/internet/endpoints.py",
>line 99, in connectionLost
>            return self._wrappedProtocol.connectionLost(reason)
>          File "/usr/local/lib/python2.7/site- 
>packages/Twisted-12.2.0-py2.7-linux- 
>x86_64.egg/twisted/web/_newclient.py",
>line 859, in dispatcher
>            return func(*args, **kwargs)
>          File "/usr/local/lib/python2.7/site- 
>packages/Twisted-12.2.0-py2.7-linux- 
>x86_64.egg/twisted/web/_newclient.py",
>line 1458, in _connectionLost_TRANSMITTING
>            self._currentRequest.stopWriting()
>          File "/usr/local/lib/python2.7/site- 
>packages/Twisted-12.2.0-py2.7-linux- 
>x86_64.egg/twisted/web/_newclient.py",
>line 760, in stopWriting
>            _callAppFunction(self.bodyProducer.stopProducing)
>        --- <exception caught here> ---
>          File "/usr/local/lib/python2.7/site- 
>packages/Twisted-12.2.0-py2.7-linux- 
>x86_64.egg/twisted/web/_newclient.py",
>line 191, in _callAppFunction
>            function()
>          File "/usr/local/lib/python2.7/site- 
>packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/web/client.py",
>line 760, in stopProducing
>            self._task.stop()
>          File "/usr/local/lib/python2.7/site- 
>packages/Twisted-12.2.0-py2.7-linux- 
>x86_64.egg/twisted/internet/task.py",
>line 459, in stop
>            self._checkFinish()
>          File "/usr/local/lib/python2.7/site- 
>packages/Twisted-12.2.0-py2.7-linux- 
>x86_64.egg/twisted/internet/task.py",
>line 469, in _checkFinish
>            raise self._completionState
>        twisted.internet.task.TaskStopped:
>
>Just loads of those, they always seem to come through in pairs (the
>first twisted.internet.error.ConnectionDone, and then the
>twisted.internet.task.TaskStopped as above)
>
>I'm just doing PUT requests with twisted.web.client.Agent and using a
>twisted.web.client.FileBodyProducer to provide the content.
>
>I'm doing the PUT while I still have the request from a render_GET, so
>I thought maybe it's caused if the user disconnects while I'm doing
>the PUT? The idea is I redirect them to the file I PUT with
>request.redirect, which seems to work fine (until I get this error and
>it doesn't)
>
>The reason I do a PUT and redirect, instead of just writing back to
>the request is that I check if the file is in a cache first, I then
>only PUT if it's not there- then redirect afterwards.
>
>Any clues or ideas of what is happening would be hugely helpful
>
>thanks!!
>
>Paul
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From exarkun at twistedmatrix.com  Sat Dec 22 22:05:23 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 23 Dec 2012 05:05:23 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1356239123.17.1432149713@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121223/680e3e9a/attachment-0001.html>

From therve at free.fr  Wed Dec 26 06:21:22 2012
From: therve at free.fr (=?ISO-8859-1?Q?Thomas_Herv=E9?=)
Date: Wed, 26 Dec 2012 14:21:22 +0100
Subject: [Twisted-Python] Twisted 12.3.0 released
Message-ID: <50DAF9D2.3030702@free.fr>

On behalf of Twisted Matrix Laboratories, I am pleased to announce, in
extremis, the release of Twisted 12.3.

161 tickets are closed by this release, with the following highlights:

 * Support for local parallel testing in trial

 * A new "react" function to easily run a single asynchronous function
in a script with the reactor.

 * Partial support for Python 3.3.

Note that only Python 2.7 is supported on Windows now. We also require
zope.interface 3.6.0 or newer.


For more information, see the NEWS file here:

 http://twistedmatrix.com/Releases/Twisted/12.3/NEWS.txt


Download it now from:

 http://pypi.python.org/packages/source/T/Twisted/Twisted-12.3.0.tar.bz2 or

 http://pypi.python.org/packages/2.7/T/Twisted/Twisted-12.3.0.win32-py2.7.msi


Thanks to the supporters of Twisted via the Software Freedom Conservancy
and to the many contributors for this release.

-- 
Thomas



From _ at lvh.cc  Wed Dec 26 12:08:06 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Wed, 26 Dec 2012 20:08:06 +0100
Subject: [Twisted-Python] Twisted 12.3.0 released
In-Reply-To: <50DAF9D2.3030702@free.fr>
References: <50DAF9D2.3030702@free.fr>
Message-ID: <CAE_Hg6afLV76gtEx+R9Q=45ZLZePG05bAA7W1GQ67teE_PRE9g@mail.gmail.com>

Yay! Thanks for an awesome Christmas present Thomas :)


On Wed, Dec 26, 2012 at 2:21 PM, Thomas Hervé <therve at free.fr> wrote:

> On behalf of Twisted Matrix Laboratories, I am pleased to announce, in
> extremis, the release of Twisted 12.3.
>
> 161 tickets are closed by this release, with the following highlights:
>
>  * Support for local parallel testing in trial
>
>  * A new "react" function to easily run a single asynchronous function
> in a script with the reactor.
>
>  * Partial support for Python 3.3.
>
> Note that only Python 2.7 is supported on Windows now. We also require
> zope.interface 3.6.0 or newer.
>
>
> For more information, see the NEWS file here:
>
>  http://twistedmatrix.com/Releases/Twisted/12.3/NEWS.txt
>
>
> Download it now from:
>
>  http://pypi.python.org/packages/source/T/Twisted/Twisted-12.3.0.tar.bz2or
>
>
> http://pypi.python.org/packages/2.7/T/Twisted/Twisted-12.3.0.win32-py2.7.msi
>
>
> Thanks to the supporters of Twisted via the Software Freedom Conservancy
> and to the many contributors for this release.
>
> --
> Thomas
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121226/058f8491/attachment.html>

From kevin.horn at gmail.com  Wed Dec 26 12:27:49 2012
From: kevin.horn at gmail.com (Kevin Horn)
Date: Wed, 26 Dec 2012 13:27:49 -0600
Subject: [Twisted-Python] Twisted 12.3.0 released
In-Reply-To: <50DAF9D2.3030702@free.fr>
References: <50DAF9D2.3030702@free.fr>
Message-ID: <CA+U=zK0YkuKDjcijOpHs_yU1-eD9vMAkpgSTAW+Zo0eNdOWahw@mail.gmail.com>

Hurrah!  Well done!


On Wed, Dec 26, 2012 at 7:21 AM, Thomas Hervé <therve at free.fr> wrote:

> On behalf of Twisted Matrix Laboratories, I am pleased to announce, in
> extremis, the release of Twisted 12.3.
>
> 161 tickets are closed by this release, with the following highlights:
>
>  * Support for local parallel testing in trial
>
>  * A new "react" function to easily run a single asynchronous function
> in a script with the reactor.
>
>  * Partial support for Python 3.3.
>
> Note that only Python 2.7 is supported on Windows now. We also require
> zope.interface 3.6.0 or newer.
>
>
> For more information, see the NEWS file here:
>
>  http://twistedmatrix.com/Releases/Twisted/12.3/NEWS.txt
>
>
> Download it now from:
>
>  http://pypi.python.org/packages/source/T/Twisted/Twisted-12.3.0.tar.bz2or
>
>
> http://pypi.python.org/packages/2.7/T/Twisted/Twisted-12.3.0.win32-py2.7.msi
>
>
> Thanks to the supporters of Twisted via the Software Freedom Conservancy
> and to the many contributors for this release.
>
> --
> Thomas
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
--
Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121226/271bba57/attachment.html>

From _ at lvh.cc  Wed Dec 26 14:43:30 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Wed, 26 Dec 2012 22:43:30 +0100
Subject: [Twisted-Python] Appropriate exception for AMP types receiving
	garbage?
Message-ID: <CAE_Hg6bK5XEKf3c++KvfCriSnhrFFk0Nc1MWL1wRtBD=sSuzFQ@mail.gmail.com>

Hi,


I'm writing a custom AMP type. I noticed that when writing the unit test
for garbage input, I didn't really know what exception to check for.

I couldn't find any place where this was formally defined, so I checked for
implementation behavior. Boolean explicitly raises TypeError. Integer
raises ValueError, but that appears to only be an implementation detail of
int.

It could also be that it doesn't matter at all, but it does seem a little
strange that Integer and Boolean raise different exceptions when fed
garbage...

-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121226/35966a15/attachment.html>

From glyph at twistedmatrix.com  Wed Dec 26 23:40:05 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 26 Dec 2012 22:40:05 -0800
Subject: [Twisted-Python] Twisted 12.3.0 released
In-Reply-To: <50DAF9D2.3030702@free.fr>
References: <50DAF9D2.3030702@free.fr>
Message-ID: <409EE4CA-88EE-4BB1-985C-9C732351AF78@twistedmatrix.com>

On Dec 26, 2012, at 5:21 AM, Thomas Hervé <therve at free.fr> wrote:

> On behalf of Twisted Matrix Laboratories, I am pleased to announce, in
> extremis, the release of Twisted 12.3.

Thanks for managing another great release, Thomas!!

> 161 tickets are closed by this release, with the following highlights:
> 
> * Support for local parallel testing in trial

This doesn't make the feature sound quite as exciting as it is :).  For those of you who didn't know this was coming - as of Twisted 12.3.0, you can run 'trial -j 16 ...' if you have 16 cores and finally make use of all those idle cores during Twisted-based development.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121226/3efc578b/attachment.html>

From glyph at twistedmatrix.com  Thu Dec 27 00:02:24 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 26 Dec 2012 23:02:24 -0800
Subject: [Twisted-Python] Appropriate exception for AMP types receiving
	garbage?
In-Reply-To: <CAE_Hg6bK5XEKf3c++KvfCriSnhrFFk0Nc1MWL1wRtBD=sSuzFQ@mail.gmail.com>
References: <CAE_Hg6bK5XEKf3c++KvfCriSnhrFFk0Nc1MWL1wRtBD=sSuzFQ@mail.gmail.com>
Message-ID: <5B523109-A533-4820-8D32-2BC0D155CACC@twistedmatrix.com>

On Dec 26, 2012, at 1:43 PM, Laurens Van Houtven <_ at lvh.cc> wrote:

> I'm writing a custom AMP type. I noticed that when writing the unit test for garbage input, I didn't really know what exception to check for.
> 
> I couldn't find any place where this was formally defined, so I checked for implementation behavior. Boolean explicitly raises TypeError. Integer raises ValueError, but that appears to only be an implementation detail of int.
> 
> It could also be that it doesn't matter at all, but it does seem a little strange that Integer and Boolean raise different exceptions when fed garbage...

Hey Laurens,

This is basically a feature request :).  There's no particular defined error type for argument parse errors in AMP.  It's not a bad feature though.  The exception also doesn't go anywhere useful - the only contract is basically that it'll bubble up and break the connection if you get some bad data.  A more sophisticated and trappable / trackable way to propagate this sort of error would be useful.

(I would personally consider it a compatible change if the behavior of the error cases changed here, on the grounds that anything that uncontrollably logs a traceback in response to network input is a gross spec violation of a sort.  Maybe we should add an explicit exemption for that case.)

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121226/c3328b8e/attachment.html>

From poalman at gmail.com  Thu Dec 27 07:49:26 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Thu, 27 Dec 2012 14:49:26 +0000
Subject: [Twisted-Python] TaskStopped error,
	unsure of the cause and solution
In-Reply-To: <20121221180822.6389.1626477491.divmod.xquotient.354@localhost6.localdomain6>
References: <CACgdh2hFm80KFzDBY7sCS5XveZNX8dovo1XGt3Jt_WrJFQ7tJA@mail.gmail.com>
	<20121221180822.6389.1626477491.divmod.xquotient.354@localhost6.localdomain6>
Message-ID: <CACgdh2gQy9Gp9qbqwMC6CV4J1Ti2F+=+c36cVtnrO0nceV9uWA@mail.gmail.com>

On 21 December 2012 18:08,  <exarkun at twistedmatrix.com> wrote:
> On 04:12 pm, poalman at gmail.com wrote:
>>Hey,
>>
>>I'm getting the following error in my logs (lots and lots), but only
>>after the server has been running for some time, I'm not sure what the
>>cause is or what I can do to remedy it.
>
> This seems like a bug in `Agent`, perhaps related to `stopProducing`
> being called more than once.  It would be great if you could produce a
> minimal example to include with a bug report in the issue tracker.  An
> example that reproduces the problem will also make it easier to see
> where the bug is in your code, if it happens to be there rather than in
> Twisted.

I'll try my best! The problem is I don't seem to see this at all for
10k+ requests ish then I guess something must trigger it as it will
start happening a lot, so it may be difficult to reproduce.

>
> Jean-Paul
>>This is what I see in the logs:
>>
>>2012-12-20 17:07:17+0000 [HTTP11ClientProtocol,client] Unhandled Error
>>        Traceback (most recent call last):
>>        Failure: twisted.web._newclient.RequestTransmissionFailed:
>>[<twisted.python.failure.Failure <class
>>'twisted.internet.error.ConnectionDone'>>]
>>
>>2012-12-20 17:07:17+0000 [HTTP11ClientProtocol,client] Unexpected
>>exception from twisted.web.client.FileBodyProducer.stopProducing
>>        Traceback (most recent call last):
>>          File "/usr/local/lib/python2.7/site-
>>packages/Twisted-12.2.0-py2.7-linux-
>>x86_64.egg/twisted/internet/endpoints.py",
>>line 99, in connectionLost
>>            return self._wrappedProtocol.connectionLost(reason)
>>          File "/usr/local/lib/python2.7/site-
>>packages/Twisted-12.2.0-py2.7-linux-
>>x86_64.egg/twisted/web/_newclient.py",
>>line 859, in dispatcher
>>            return func(*args, **kwargs)
>>          File "/usr/local/lib/python2.7/site-
>>packages/Twisted-12.2.0-py2.7-linux-
>>x86_64.egg/twisted/web/_newclient.py",
>>line 1458, in _connectionLost_TRANSMITTING
>>            self._currentRequest.stopWriting()
>>          File "/usr/local/lib/python2.7/site-
>>packages/Twisted-12.2.0-py2.7-linux-
>>x86_64.egg/twisted/web/_newclient.py",
>>line 760, in stopWriting
>>            _callAppFunction(self.bodyProducer.stopProducing)
>>        --- <exception caught here> ---
>>          File "/usr/local/lib/python2.7/site-
>>packages/Twisted-12.2.0-py2.7-linux-
>>x86_64.egg/twisted/web/_newclient.py",
>>line 191, in _callAppFunction
>>            function()
>>          File "/usr/local/lib/python2.7/site-
>>packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/web/client.py",
>>line 760, in stopProducing
>>            self._task.stop()
>>          File "/usr/local/lib/python2.7/site-
>>packages/Twisted-12.2.0-py2.7-linux-
>>x86_64.egg/twisted/internet/task.py",
>>line 459, in stop
>>            self._checkFinish()
>>          File "/usr/local/lib/python2.7/site-
>>packages/Twisted-12.2.0-py2.7-linux-
>>x86_64.egg/twisted/internet/task.py",
>>line 469, in _checkFinish
>>            raise self._completionState
>>        twisted.internet.task.TaskStopped:
>>
>>Just loads of those, they always seem to come through in pairs (the
>>first twisted.internet.error.ConnectionDone, and then the
>>twisted.internet.task.TaskStopped as above)
>>
>>I'm just doing PUT requests with twisted.web.client.Agent and using a
>>twisted.web.client.FileBodyProducer to provide the content.
>>
>>I'm doing the PUT while I still have the request from a render_GET, so
>>I thought maybe it's caused if the user disconnects while I'm doing
>>the PUT? The idea is I redirect them to the file I PUT with
>>request.redirect, which seems to work fine (until I get this error and
>>it doesn't)
>>
>>The reason I do a PUT and redirect, instead of just writing back to
>>the request is that I check if the file is in a cache first, I then
>>only PUT if it's not there- then redirect afterwards.
>>
>>Any clues or ideas of what is happening would be hugely helpful
>>
>>thanks!!
>>
>>Paul
>>
>>_______________________________________________
>>Twisted-Python mailing list
>>Twisted-Python at twistedmatrix.com
>>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From corpmasters at gmail.com  Thu Dec 27 10:33:09 2012
From: corpmasters at gmail.com (Master Corp)
Date: Thu, 27 Dec 2012 19:33:09 +0200
Subject: [Twisted-Python] Need help using FTPClient
Message-ID: <CANtgJyHV32YBxnBBFxoN_KF3yKbe=X_ohWtJZ2MhxsexVvd9tg@mail.gmail.com>

Hi. I am new to Twisted. I am using this code:

 http://twistedmatrix.com/documents/current/core/examples/ftpclient.py<http://twistedmatrix.com/documents/current/core/examples/ftpclient.py>

Can this example be used to connect to an FTP through a SOCKS4/5 proxy? Can
somebody provide an example of how it should be done?

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121227/d9ffb7da/attachment.html>

From jasonjwwilliams at gmail.com  Thu Dec 27 12:23:58 2012
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Thu, 27 Dec 2012 12:23:58 -0700
Subject: [Twisted-Python] Weird SSL/TLS issue
Message-ID: <CAHZAEpfCeMVTit22RHN99G=1W0yMuJYoRHnf6xyg0fEKP1EDWw@mail.gmail.com>

We have an application that uses Twisted Web to listen for an API call and
when it receives it, the app then connects over SMTP to the specified mail
server IP and validates whether the indicated user exists. The app has been
running without issue or modification for close to 2 years (uses Twisted
10.2.0). Then suddenly last night it started being unable to find the
starttls() method on the Connection object when negotiating with any mail
server:

https://gist.github.com/4391179

We were able to replicate the problem consistently, and determine it was
not a network issue. The weird part is that simply restarting the
application cleared the issue and TLS SMTP connections were able to be made
again. Since the Twisted modules were loaded at startup, I'm a little
confused on how it suddenly decided  the TLS methods were missing until we
restarted.

Any ideas are greatly appreciated.

-J
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121227/f5e893f2/attachment.html>

From itamar at futurefoundries.com  Thu Dec 27 20:11:46 2012
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Thu, 27 Dec 2012 22:11:46 -0500
Subject: [Twisted-Python] Weird SSL/TLS issue
In-Reply-To: <CAHZAEpfCeMVTit22RHN99G=1W0yMuJYoRHnf6xyg0fEKP1EDWw@mail.gmail.com>
References: <CAHZAEpfCeMVTit22RHN99G=1W0yMuJYoRHnf6xyg0fEKP1EDWw@mail.gmail.com>
Message-ID: <CAOp9P3q_nU7nq5p=yURoYWKnajg4v=TPEwAqT788DvFxsZb5Vw@mail.gmail.com>

On Thu, Dec 27, 2012 at 2:23 PM, Jason J. W. Williams <
jasonjwwilliams at gmail.com> wrote:

> We have an application that uses Twisted Web to listen for an API call and
> when it receives it, the app then connects over SMTP to the specified mail
> server IP and validates whether the indicated user exists. The app has been
> running without issue or modification for close to 2 years (uses Twisted
> 10.2.0). Then suddenly last night it started being unable to find the
> starttls() method on the Connection object when negotiating with any mail
> server:
>
> https://gist.github.com/4391179
>
> We were able to replicate the problem consistently, and determine it was
> not a network issue. The weird part is that simply restarting the
> application cleared the issue and TLS SMTP connections were able to be made
> again. Since the Twisted modules were loaded at startup, I'm a little
> confused on how it suddenly decided  the TLS methods were missing until we
> restarted.
>


Do you have any code that runs reload(), or twisted.python.rebuild, or
maybe did that manually in a Manhole session? Given how tcp.py is written
that's the only thing I can think of, at least.

Or maybe it's cosmic rays (got ECC RAM?)/hardware problems/memory
corruption. I've seen some utterly impossible Python tracebacks that had to
have been something like these catchalls, which isn't very satisfying an
answer.


-- 
Itamar Turner-Trauring, Future Foundries LLC
http://futurefoundries.com/ — Twisted consulting, training and support.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121227/32c88c72/attachment.html>

From glyph at twistedmatrix.com  Thu Dec 27 21:48:53 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 27 Dec 2012 20:48:53 -0800
Subject: [Twisted-Python] Need help using FTPClient
In-Reply-To: <CANtgJyHV32YBxnBBFxoN_KF3yKbe=X_ohWtJZ2MhxsexVvd9tg@mail.gmail.com>
References: <CANtgJyHV32YBxnBBFxoN_KF3yKbe=X_ohWtJZ2MhxsexVvd9tg@mail.gmail.com>
Message-ID: <CED11AA4-9786-4348-B2B2-DB7A7D7030B1@twistedmatrix.com>


On Dec 27, 2012, at 9:33 AM, Master Corp <corpmasters at gmail.com> wrote:

> Hi. I am new to Twisted. I am using this code:
> 
>  http://twistedmatrix.com/documents/current/core/examples/ftpclient.py
> 
> Can this example be used to connect to an FTP through a SOCKS4/5 proxy? Can somebody provide an example of how it should be done?
> 

Is there any reason you want to use Twisted to do your SOCKS proxying?  Programs like 'socksify' typically do what you need in a general way that does not require any awareness from your application.  (Twisted does have a SOCKS implementation, but it's rarely worth the trouble to plug it in.)

-glyph


-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121227/910635b0/attachment.html>

From corpmasters at gmail.com  Fri Dec 28 02:00:12 2012
From: corpmasters at gmail.com (Master Corp)
Date: Fri, 28 Dec 2012 11:00:12 +0200
Subject: [Twisted-Python] Need help using FTPClient
In-Reply-To: <CED11AA4-9786-4348-B2B2-DB7A7D7030B1@twistedmatrix.com>
References: <CANtgJyHV32YBxnBBFxoN_KF3yKbe=X_ohWtJZ2MhxsexVvd9tg@mail.gmail.com>
	<CED11AA4-9786-4348-B2B2-DB7A7D7030B1@twistedmatrix.com>
Message-ID: <CANtgJyE29cJC+yTPWqQt=HdL27N-8iYn6WUL3qdEWXrt8fTybA@mail.gmail.com>

I want to make a script that does some simple ftp tasks (using socks) on a
list of severs. I thought twisted is a good choice.

2012/12/28 Glyph <glyph at twistedmatrix.com>

>
> On Dec 27, 2012, at 9:33 AM, Master Corp <corpmasters at gmail.com> wrote:
>
> Hi. I am new to Twisted. I am using this code:
>
>  http://twistedmatrix.com/documents/current/core/examples/ftpclient.py<http://twistedmatrix.com/documents/current/core/examples/ftpclient.py>
>
> Can this example be used to connect to an FTP through a SOCKS4/5 proxy?
> Can somebody provide an example of how it should be done?
>
>
> Is there any reason you want to use Twisted to do your SOCKS proxying?
>  Programs like 'socksify' typically do what you need in a general way that
> does not require any awareness from your application.  (Twisted does have a
> SOCKS implementation, but it's rarely worth the trouble to plug it in.)
>
> -glyph
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121228/f962a9e5/attachment.html>

From _ at lvh.cc  Fri Dec 28 03:46:25 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Fri, 28 Dec 2012 11:46:25 +0100
Subject: [Twisted-Python] Need help using FTPClient
In-Reply-To: <CANtgJyE29cJC+yTPWqQt=HdL27N-8iYn6WUL3qdEWXrt8fTybA@mail.gmail.com>
References: <CANtgJyHV32YBxnBBFxoN_KF3yKbe=X_ohWtJZ2MhxsexVvd9tg@mail.gmail.com>
	<CED11AA4-9786-4348-B2B2-DB7A7D7030B1@twistedmatrix.com>
	<CANtgJyE29cJC+yTPWqQt=HdL27N-8iYn6WUL3qdEWXrt8fTybA@mail.gmail.com>
Message-ID: <CAE_Hg6ZHY2TvK4k+E67N1nQavcnuHnYEo1hkQuV9ceBFDuC_7g@mail.gmail.com>

Well, sure; if you want your program to do the SOCKSing, Twisted has an
implementation for that, so you *can*; Glyph is just suggesting that it may
be easier to use Twisted only for the FTP-y bits, and rely on other
software (such as socksify) to handle the SOCKS parts :)

So, to rephrase the question: is there a reason you're not using an
external app to do the SOCKS parts?


On Fri, Dec 28, 2012 at 10:00 AM, Master Corp <corpmasters at gmail.com> wrote:

> I want to make a script that does some simple ftp tasks (using socks) on a
> list of severs. I thought twisted is a good choice.
>
> 2012/12/28 Glyph <glyph at twistedmatrix.com>
>
>>
>> On Dec 27, 2012, at 9:33 AM, Master Corp <corpmasters at gmail.com> wrote:
>>
>> Hi. I am new to Twisted. I am using this code:
>>
>>  http://twistedmatrix.com/documents/current/core/examples/ftpclient.py<http://twistedmatrix.com/documents/current/core/examples/ftpclient.py>
>>
>> Can this example be used to connect to an FTP through a SOCKS4/5 proxy?
>> Can somebody provide an example of how it should be done?
>>
>>
>> Is there any reason you want to use Twisted to do your SOCKS proxying?
>>  Programs like 'socksify' typically do what you need in a general way that
>> does not require any awareness from your application.  (Twisted does have a
>> SOCKS implementation, but it's rarely worth the trouble to plug it in.)
>>
>> -glyph
>>
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121228/c5ae29ff/attachment.html>

From corpmasters at gmail.com  Fri Dec 28 07:24:30 2012
From: corpmasters at gmail.com (Master Corp)
Date: Fri, 28 Dec 2012 16:24:30 +0200
Subject: [Twisted-Python] Need help using FTPClient
In-Reply-To: <CAE_Hg6ZHY2TvK4k+E67N1nQavcnuHnYEo1hkQuV9ceBFDuC_7g@mail.gmail.com>
References: <CANtgJyHV32YBxnBBFxoN_KF3yKbe=X_ohWtJZ2MhxsexVvd9tg@mail.gmail.com>
	<CED11AA4-9786-4348-B2B2-DB7A7D7030B1@twistedmatrix.com>
	<CANtgJyE29cJC+yTPWqQt=HdL27N-8iYn6WUL3qdEWXrt8fTybA@mail.gmail.com>
	<CAE_Hg6ZHY2TvK4k+E67N1nQavcnuHnYEo1hkQuV9ceBFDuC_7g@mail.gmail.com>
Message-ID: <CANtgJyE10SC_ySKZKXmKzaYADtwzV-ZePhGOp_d4F+HVXSYVCw@mail.gmail.com>

I want to store those proxies in a database and check their status
ocasionaly

2012/12/28 Laurens Van Houtven <_ at lvh.cc>

> Well, sure; if you want your program to do the SOCKSing, Twisted has an
> implementation for that, so you *can*; Glyph is just suggesting that it may
> be easier to use Twisted only for the FTP-y bits, and rely on other
> software (such as socksify) to handle the SOCKS parts :)
>
> So, to rephrase the question: is there a reason you're not using an
> external app to do the SOCKS parts?
>
>
> On Fri, Dec 28, 2012 at 10:00 AM, Master Corp <corpmasters at gmail.com>wrote:
>
>> I want to make a script that does some simple ftp tasks (using socks) on
>> a list of severs. I thought twisted is a good choice.
>>
>> 2012/12/28 Glyph <glyph at twistedmatrix.com>
>>
>>>
>>> On Dec 27, 2012, at 9:33 AM, Master Corp <corpmasters at gmail.com> wrote:
>>>
>>> Hi. I am new to Twisted. I am using this code:
>>>
>>>  http://twistedmatrix.com/documents/current/core/examples/ftpclient.py<http://twistedmatrix.com/documents/current/core/examples/ftpclient.py>
>>>
>>> Can this example be used to connect to an FTP through a SOCKS4/5 proxy?
>>> Can somebody provide an example of how it should be done?
>>>
>>>
>>> Is there any reason you want to use Twisted to do your SOCKS proxying?
>>>  Programs like 'socksify' typically do what you need in a general way that
>>> does not require any awareness from your application.  (Twisted does have a
>>> SOCKS implementation, but it's rarely worth the trouble to plug it in.)
>>>
>>> -glyph
>>>
>>>
>>>
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>
>>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>
>
> --
> cheers
> lvh
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121228/e958aaf7/attachment.html>

From itamar at futurefoundries.com  Fri Dec 28 09:07:38 2012
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Fri, 28 Dec 2012 11:07:38 -0500
Subject: [Twisted-Python] Need help using FTPClient
In-Reply-To: <CED11AA4-9786-4348-B2B2-DB7A7D7030B1@twistedmatrix.com>
References: <CANtgJyHV32YBxnBBFxoN_KF3yKbe=X_ohWtJZ2MhxsexVvd9tg@mail.gmail.com>
	<CED11AA4-9786-4348-B2B2-DB7A7D7030B1@twistedmatrix.com>
Message-ID: <CAOp9P3qipU1mZujSixO3TC=64yiShG9MzXJN6d_dNRex9f7_eg@mail.gmail.com>

On Thu, Dec 27, 2012 at 11:48 PM, Glyph <glyph at twistedmatrix.com> wrote:

>
>
> Is there any reason you want to use Twisted to do your SOCKS proxying?
>  Programs like 'socksify' typically do what you need in a general way that
> does not require any awareness from your application.  (Twisted does have a
> SOCKS implementation, but it's rarely worth the trouble to plug it in.)
>

Twisted does not have a SOCKS client, actually, only a server AFAIK.

IIRC there's a 3rd party client library, but on github so therefore
impossible to find.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121228/d2a80493/attachment.html>

From corpmasters at gmail.com  Fri Dec 28 10:21:22 2012
From: corpmasters at gmail.com (Master Corp)
Date: Fri, 28 Dec 2012 19:21:22 +0200
Subject: [Twisted-Python] Need help using FTPClient
In-Reply-To: <CAOp9P3qipU1mZujSixO3TC=64yiShG9MzXJN6d_dNRex9f7_eg@mail.gmail.com>
References: <CANtgJyHV32YBxnBBFxoN_KF3yKbe=X_ohWtJZ2MhxsexVvd9tg@mail.gmail.com>
	<CED11AA4-9786-4348-B2B2-DB7A7D7030B1@twistedmatrix.com>
	<CAOp9P3qipU1mZujSixO3TC=64yiShG9MzXJN6d_dNRex9f7_eg@mail.gmail.com>
Message-ID: <CANtgJyGtd8bQQeJXkwHKU0tSwbsNRyuppZTZkQK1XYCbRmjDEw@mail.gmail.com>

OK, thank you for your help

2012/12/28 Itamar Turner-Trauring <itamar at futurefoundries.com>

>
>
> On Thu, Dec 27, 2012 at 11:48 PM, Glyph <glyph at twistedmatrix.com> wrote:
>
>>
>>
>> Is there any reason you want to use Twisted to do your SOCKS proxying?
>>  Programs like 'socksify' typically do what you need in a general way that
>> does not require any awareness from your application.  (Twisted does have a
>> SOCKS implementation, but it's rarely worth the trouble to plug it in.)
>>
>
> Twisted does not have a SOCKS client, actually, only a server AFAIK.
>
> IIRC there's a 3rd party client library, but on github so therefore
> impossible to find.
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121228/22fd2c1e/attachment-0001.html>

From aniketpanse at gmail.com  Sat Dec 29 13:21:41 2012
From: aniketpanse at gmail.com (Aniket Panse)
Date: Sun, 30 Dec 2012 01:51:41 +0530
Subject: [Twisted-Python] I am new :-)
Message-ID: <CAJscYz0OtVwWouX9cKL0cfE8A0QRO76MOBoOusTpiX23w+ZPhA@mail.gmail.com>

Hello,

I just wanted to introduce myself and get some help. I am familiar with
Python, but I've never worked on any real project before. I wish to
contribute to Twisted, and was looking for some pointers to understanding
this complex code.

Thanks!
--Aniket
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121230/fed3c8ab/attachment-0001.html>

From exarkun at twistedmatrix.com  Sat Dec 29 22:05:28 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 30 Dec 2012 05:05:28 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1356843928.66.345065437@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121230/d5d8d421/attachment.html>

From glyph at twistedmatrix.com  Sat Dec 29 23:31:44 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Sat, 29 Dec 2012 22:31:44 -0800
Subject: [Twisted-Python] I am new :-)
In-Reply-To: <CAJscYz0OtVwWouX9cKL0cfE8A0QRO76MOBoOusTpiX23w+ZPhA@mail.gmail.com>
References: <CAJscYz0OtVwWouX9cKL0cfE8A0QRO76MOBoOusTpiX23w+ZPhA@mail.gmail.com>
Message-ID: <50F76C43-06A3-4862-8C2E-721559D015D4@twistedmatrix.com>


On Dec 29, 2012, at 12:21 PM, Aniket Panse <aniketpanse at gmail.com> wrote:

> Hello,
> 
> I just wanted to introduce myself and get some help. I am familiar with Python, but I've never worked on any real project before. I wish to contribute to Twisted, and was looking for some pointers to understanding this complex code. 
> 
> Thanks!
> --Aniket

Hi Aniket!

Welcome to Twisted, I hope that you have a good time here.  We're always happy to hear from a new contributor.

Have you familiarized yourself with the basics of Twisted itself yet?  Before contributing it's useful to have a general idea of what Twisted is, what kinds of things it does, and a high level idea of how it works.

Here are some links to get you started:

    <https://twistedmatrix.com/documents/current/core/howto/servers.html>
    <https://twistedmatrix.com/documents/current/core/howto/tutorial/index.html>
    <http://krondo.com/?page_id=1327>

Good luck!

-glyph




From beatouze at gmail.com  Sun Dec 30 00:38:44 2012
From: beatouze at gmail.com (Lupce Kotev)
Date: Sun, 30 Dec 2012 08:38:44 +0100
Subject: [Twisted-Python] I am new :-)
In-Reply-To: <50F76C43-06A3-4862-8C2E-721559D015D4@twistedmatrix.com>
References: <CAJscYz0OtVwWouX9cKL0cfE8A0QRO76MOBoOusTpiX23w+ZPhA@mail.gmail.com>
	<50F76C43-06A3-4862-8C2E-721559D015D4@twistedmatrix.com>
Message-ID: <CAHr=iADFqk8MaP7Vmsr91wo6s-upBNrATSzsp5Ma2f+4cN8-zw@mail.gmail.com>

Hello Twisted community!

On topic of Aniket's question, I would like to ask what would be a fun
project to do in Twisted that will help me learn Twisted? I have made an
IRC bot till now, but I want to do something else.

Any ideas and tips on how should I do the specific idea would be
appreciated.

Thanks
- Bubo.


On Sun, Dec 30, 2012 at 7:31 AM, Glyph <glyph at twistedmatrix.com> wrote:

>
> On Dec 29, 2012, at 12:21 PM, Aniket Panse <aniketpanse at gmail.com> wrote:
>
> > Hello,
> >
> > I just wanted to introduce myself and get some help. I am familiar with
> Python, but I've never worked on any real project before. I wish to
> contribute to Twisted, and was looking for some pointers to understanding
> this complex code.
> >
> > Thanks!
> > --Aniket
>
> Hi Aniket!
>
> Welcome to Twisted, I hope that you have a good time here.  We're always
> happy to hear from a new contributor.
>
> Have you familiarized yourself with the basics of Twisted itself yet?
>  Before contributing it's useful to have a general idea of what Twisted is,
> what kinds of things it does, and a high level idea of how it works.
>
> Here are some links to get you started:
>
>     <https://twistedmatrix.com/documents/current/core/howto/servers.html>
>     <
> https://twistedmatrix.com/documents/current/core/howto/tutorial/index.html
> >
>     <http://krondo.com/?page_id=1327>
>
> Good luck!
>
> -glyph
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121230/d508fc93/attachment.html>

From f at rtfs.org  Sun Dec 30 06:09:31 2012
From: f at rtfs.org (Fabian Sturm)
Date: Sun, 30 Dec 2012 14:09:31 +0100
Subject: [Twisted-Python] Using telnet or linereceiver protocol over ssh
Message-ID: <1356872971.4376.8.camel@krypton>

Hello,

I implemented a twisted ssh server using SSHFactory and successfully
registered the sftp factory.

I now also wanted to add a simple telnet like protocol where I can send
commands to the server and execute some actions based on that.
For that I hooked the LineReceive to the openShell command. It works and
I can ssh into the server, but I don't get the typed characters echoed
back. This unfortunately makes it unusable.

What I could do is to implement a standard Protocol and send the
received data back whenever I get a dataReceived call. And for a DEL
character I would have to send a BCKSPC, BLANK, BACKSPC sequence and
track the current line myself. This works but it sounds like too much to
do!

Is there a better way for something like that?

Sincerely,
Fabian




From glyph at twistedmatrix.com  Mon Dec 31 01:54:33 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 31 Dec 2012 00:54:33 -0800
Subject: [Twisted-Python] Using telnet or linereceiver protocol over ssh
In-Reply-To: <1356872971.4376.8.camel@krypton>
References: <1356872971.4376.8.camel@krypton>
Message-ID: <0F338E23-CE9C-4CC8-9ED5-784545605996@twistedmatrix.com>

On Dec 30, 2012, at 5:09 AM, Fabian Sturm <f at rtfs.org> wrote:

> Hello,

Hi Fabian,

> I implemented a twisted ssh server using SSHFactory and successfully
> registered the sftp factory.

Great, you're pretty far along then :).

> I now also wanted to add a simple telnet like protocol where I can send
> commands to the server and execute some actions based on that.
> For that I hooked the LineReceive to the openShell command. It works and
> I can ssh into the server, but I don't get the typed characters echoed
> back. This unfortunately makes it unusable.
> 
> What I could do is to implement a standard Protocol and send the
> received data back whenever I get a dataReceived call. And for a DEL
> character I would have to send a BCKSPC, BLANK, BACKSPC sequence and
> track the current line myself. This works but it sounds like too much to
> do!
> 
> Is there a better way for something like that?

Have you looked at HistoricRecvLine <https://twistedmatrix.com/documents/current/api/twisted.conch.recvline.HistoricRecvLine.html>?

It's not the easiest class to use, but it should do basically what you need, with various line-editing niceties.

This is also an area that could really benefit from some more maintenance, both in the code and the documentation; writing a command-line interface to Twisted should be a lot easier and more obvious.  So if you'd like to contribute to Twisted this is a good place to start :).

-glyph




From jessica.mckellar at gmail.com  Mon Dec 31 09:24:06 2012
From: jessica.mckellar at gmail.com (Jessica McKellar)
Date: Mon, 31 Dec 2012 11:24:06 -0500
Subject: [Twisted-Python] I am new :-)
In-Reply-To: <CAHr=iADFqk8MaP7Vmsr91wo6s-upBNrATSzsp5Ma2f+4cN8-zw@mail.gmail.com>
References: <CAJscYz0OtVwWouX9cKL0cfE8A0QRO76MOBoOusTpiX23w+ZPhA@mail.gmail.com>
	<50F76C43-06A3-4862-8C2E-721559D015D4@twistedmatrix.com>
	<CAHr=iADFqk8MaP7Vmsr91wo6s-upBNrATSzsp5Ma2f+4cN8-zw@mail.gmail.com>
Message-ID: <CAKDZRciyyWNbRyZxYg_-7JNMDt9V=QqDjxBa0MgTCPv7=u1ZQg@mail.gmail.com>

Hi Lupce,

> On topic of Aniket's question, I would like to ask what would be a fun
> project to do in Twisted that will help me learn Twisted? I have made an IRC
> bot till now, but I want to do something else.

Here are a couple of ideas:

1. Go through https://twistedmatrix.com/documents/current/web/howto/web-in-60/index.html
and then build a website that serves dynamic content using Twisted
Web.

2. Write a Twisted Mail client that does something interesting with
your GMail mail. For example, I've written an IMAP4 client that runs
out of cron and a) auto-archives and b) forwards a subset of my
e-mails to a chat service I use.

3. Go through http://as.ynchrono.us/2011/03/twisted-conch-in-60-seconds.html
(find the full series at http://as.ynchrono.us/search/label/ssh) and
then write a Twisted Conch SSH client.

4. Write a BitTorrent client using Twisted. There are some examples
online if you get stuck.

5. Contribute to Twisted! Start with
https://twistedmatrix.com/trac/wiki/ContributingToTwistedLabs, join us
in #twisted-dev on Freenode, and have a look at our bite-sized
tickets: https://bit.ly/easy-twisted-tickets.

If you are new to open source contribution, have a look at
https://twistedmatrix.com/trac/wiki/GoogleSOC#GettingStartedwithTwistedDevelopment,
which will walk you through the tools and workflow we use to develop
Twisted.

Regards,
-Jessica



