<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Pass error (exception) message to XMLRPC client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Pass%20error%20%28exception%29%20message%20to%20XMLRPC%20client&In-Reply-To=4270A60D.5040902%40smartology.nl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010246.html">
   <LINK REL="Next"  HREF="010250.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Pass error (exception) message to XMLRPC client</H1>
    <B>Jp Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Pass%20error%20%28exception%29%20message%20to%20XMLRPC%20client&In-Reply-To=4270A60D.5040902%40smartology.nl"
       TITLE="[Twisted-Python] Pass error (exception) message to XMLRPC client">exarkun at divmod.com
       </A><BR>
    <I>Thu Apr 28 10:15:29 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010246.html">[Twisted-Python] Pass error (exception) message to XMLRPC client
</A></li>
        <LI>Next message: <A HREF="010250.html">[Twisted-Python] Pass error (exception) message to XMLRPC client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10248">[ date ]</a>
              <a href="thread.html#10248">[ thread ]</a>
              <a href="subject.html#10248">[ subject ]</a>
              <a href="author.html#10248">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 28 Apr 2005 10:59:57 +0200, Remy Cool &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mailinglists at smartology.nl</A>&gt; wrote:
&gt;<i>Brett Viren wrote:
</I>&gt;&gt;<i>Remy C Cool &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">remy.cool at smartology.nl</A>&gt; writes:
</I>&gt;&gt;&gt;<i>Hello,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>I've searched on the (Twisted) website and mailinglists, but failed to
</I>&gt;&gt;&gt;<i>find the answer to my question.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Is is possible to pass the original exception code/message to the
</I>&gt;&gt;&gt;<i>XMLRPC client? When an exception occurs, the client get's a general
</I>&gt;&gt;&gt;<i>'error occured' message and I would like to be able to let the client
</I>&gt;&gt;&gt;<i>know what went wrong. How can I accomplish this with Twisted?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>It isn't really an exception but I use the idiom of returning an
</I>&gt;&gt;<i>(int,string) tuple:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   (err,error_message)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>If err != 0, it's interpreted as an error code.  A successful return
</I>&gt;&gt;<i>is (0,&quot;&quot;).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>I don't happen to do it, but I suppose you could then raise an
</I>&gt;&gt;<i>exception on the client size by hand when non-zero is returned.
</I>&gt;<i>
</I>&gt;<i>That's one way to process exceptions, but that's not what I want. You
</I>&gt;<i>will need to catch all exceptions yourself and send back a tupple as you
</I>&gt;<i>described above. XMLRPC support exception handling, and I would like to
</I>&gt;<i>  use that mechanism rather then coding my own solution.
</I>&gt;<i>
</I>&gt;<i>If an exception occurs in the backend (XMLRPC server) the client
</I>&gt;<i>receives an XMLRPC error (created by Twisted?). My question was and is,
</I>&gt;<i>if it is possible to send the 'real' exception message to the client in
</I>&gt;<i>place of the general message it now receives.
</I>&gt;<i>
</I>
  The behavior of that Fault is defined the _ebRender method of  twisted.web.client.xmlrpc.XMLRPC.  Presently it is defined as:

    def _ebRender(self, failure):
        if isinstance(failure.value, Fault):
            return failure.value
        log.err(failure)
        return Fault(self.FAILURE, &quot;error&quot;)

  Which logs complete error information on the server and sends minimal information to the client.  If you override this method, you can cause more information to be sent to the client.  It probably avoids doing this currently in case the string version of the failure contains sensitive information.

  Note that _ebRender is private and so may change at any time.  You should be prepared to deal with this, or override the render() method itself and set up your own errback, or contribute a patch that adds a public API for handling all unexpected errors in code invoked from an XMLRPC resource.

  Jp


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010246.html">[Twisted-Python] Pass error (exception) message to XMLRPC client
</A></li>
	<LI>Next message: <A HREF="010250.html">[Twisted-Python] Pass error (exception) message to XMLRPC client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10248">[ date ]</a>
              <a href="thread.html#10248">[ thread ]</a>
              <a href="subject.html#10248">[ subject ]</a>
              <a href="author.html#10248">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
