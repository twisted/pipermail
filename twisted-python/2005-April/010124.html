<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Raise soap faults
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Raise%20soap%20faults&In-Reply-To=425FEE27.8080502%40indiana.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010123.html">
   <LINK REL="Next"  HREF="010136.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Raise soap faults</H1>
    <B>Eric Mangold</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Raise%20soap%20faults&In-Reply-To=425FEE27.8080502%40indiana.edu"
       TITLE="[Twisted-Python] Raise soap faults">teratorn at twistedmatrix.com
       </A><BR>
    <I>Fri Apr 15 13:39:48 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010123.html">[Twisted-Python] Re: Raise soap faults
</A></li>
        <LI>Next message: <A HREF="010136.html">[Twisted-Python] A small patch for defer.py
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10124">[ date ]</a>
              <a href="thread.html#10124">[ thread ]</a>
              <a href="subject.html#10124">[ subject ]</a>
              <a href="author.html#10124">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 15 Apr 2005 11:39:03 -0500, Charles Moad &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">cmoad at indiana.edu</A>&gt; wrote:

&gt;<i> 	I have a soap server that I am trying to make handle errors correctly.
</I>&gt;<i>  When there is an error I just return a SOAPpy.faultType instance.  The
</I>&gt;<i> client should correspondlingly raise a python exception when it gets
</I>&gt;<i> this.  Unfortunately it looks like twisted is returning the faultType
</I>&gt;<i> instance as a valid response.  Here is the returned SOAP:
</I>
Yeah, I think that is right.

I believe you are supposed to raise an exception from your soap_* methods  
if you want a real SOAP fault to be returned. You may simply raise your  
faultType instance, or a faultType instance will be created automatically.

Though on the client side it still won't raise an exception, but you will  
hopefully get your faultType instance. You may check for it explicitly and  
raise it, if you like.

This behavior is probably wrong, and should be modified to be more in line  
with our other RPC implementations and SOAPpy itself. It would also be  
nice for Twisted to assert that the user isn't returning faultType  
instances from their soap_* methods, and if they are to advise them of the  
correct procedure.

Would you please open a bug on the tracker and assign it to me?  
<A HREF="http://twistedmatrix.com/bugs/">http://twistedmatrix.com/bugs/</A>

Itamar, you're listed as the soap.py maintainer.. does this sound about  
right to you?

-Eric

&gt;<i>
</I>&gt;<i> *** Incoming SOAP ******************************************************
</I>&gt;<i> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
</I>&gt;<i> &lt;SOAP-ENV:Envelope
</I>&gt;<i> SOAP-ENV:encodingStyle=&quot;<A HREF="http://schemas.xmlsoap.org/soap/encoding/&quot;">http://schemas.xmlsoap.org/soap/encoding/&quot;</A>
</I>&gt;<i> xmlns:SOAP-ENC=&quot;<A HREF="http://schemas.xmlsoap.org/soap/encoding/&quot;">http://schemas.xmlsoap.org/soap/encoding/&quot;</A>
</I>&gt;<i> xmlns:SOAP-ENV=&quot;<A HREF="http://schemas.xmlsoap.org/soap/envelope/&quot;">http://schemas.xmlsoap.org/soap/envelope/&quot;</A>&gt;
</I>&gt;<i> &lt;SOAP-ENV:Body&gt;
</I>&gt;<i> &lt;pdbChainFileCompressedResponse SOAP-ENC:root=&quot;1&quot;&gt;
</I>&gt;<i> &lt;SOAP-ENV:Fault SOAP-ENC:root=&quot;1&quot;&gt;
</I>&gt;<i> &lt;faultcode&gt;ArgumentError&lt;/faultcode&gt;
</I>&gt;<i> &lt;faultstring&gt;Invalid PDB Code&lt;/faultstring&gt;
</I>&gt;<i> &lt;/SOAP-ENV:Fault&gt;
</I>&gt;<i> &lt;/pdbChainFileCompressedResponse&gt;
</I>&gt;<i> &lt;/SOAP-ENV:Body&gt;
</I>&gt;<i> &lt;/SOAP-ENV:Envelope&gt;
</I>&gt;<i> ************************************************************************
</I>&gt;<i>
</I>&gt;<i> and the python result literally is:
</I>&gt;<i>
</I>&gt;<i> &lt;SOAPpy.Types.structType Fault at -1213565780&gt;: {'faultcode':
</I>&gt;<i> 'ArgumentError', 'faultstring': 'Invalid PDB Code'}
</I>&gt;<i>
</I>&gt;<i> So the soappy client is treating this as a valid return value, and not
</I>&gt;<i> raising an exception like it should.
</I>&gt;<i>
</I>&gt;<i> Any ideas?
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> 	Charlie
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010123.html">[Twisted-Python] Re: Raise soap faults
</A></li>
	<LI>Next message: <A HREF="010136.html">[Twisted-Python] A small patch for defer.py
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10124">[ date ]</a>
              <a href="thread.html#10124">[ thread ]</a>
              <a href="subject.html#10124">[ subject ]</a>
              <a href="author.html#10124">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
