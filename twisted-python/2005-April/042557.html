<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] DeferredList and errbacks
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20DeferredList%20and%20errbacks&In-Reply-To=%3C20050406000212.GE7030%40frobozz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="042556.html">
   <LINK REL="Next"  HREF="042686.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] DeferredList and errbacks</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20DeferredList%20and%20errbacks&In-Reply-To=%3C20050406000212.GE7030%40frobozz%3E"
       TITLE="[Twisted-Python] DeferredList and errbacks">andrew-twisted at puzzling.org
       </A><BR>
    <I>Tue Apr  5 18:02:12 MDT 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="042556.html">[Twisted-Python] DeferredList and errbacks
</A></li>
        <LI>Next message (by thread): <A HREF="042686.html">[Twisted-Python] Re: DeferredList and errbacks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42557">[ date ]</a>
              <a href="thread.html#42557">[ thread ]</a>
              <a href="subject.html#42557">[ subject ]</a>
              <a href="author.html#42557">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Apr 05, 2005 at 04:13:36PM -0700, Lenny G Arbage wrote:
&gt;<i> 
</I>&gt;<i>   I just noticed [what appears to me to be] a
</I>&gt;<i> contradiction in the twisted documentation.  The
</I>&gt;<i> &quot;Using Deferreds&quot; howto [1] says, &quot;A standard
</I>&gt;<i> DeferredList will never call errback,&quot; while the
</I>&gt;<i> &quot;Twisted FAQ&quot; [2] states, &quot;Always add errbacks!&quot; in
</I>&gt;<i> response to the question, &quot;My Deferred or DeferredList
</I>&gt;<i> never fires, so my program just mysteriously hangs!
</I>&gt;<i> What's wrong?&quot;
</I>&gt;<i> 
</I>&gt;<i>   So, which is it?
</I>&gt;<i> 
</I>&gt;<i>   I suppose what this is getting at is that each
</I>&gt;<i> deferred in a DeferredList should have an errback
</I>&gt;<i> attached separately, but this isn't super-clear to me.
</I>&gt;<i> Is this the right way to interpret the above
</I>&gt;<i> statements?
</I>
By default, DeferredList waits for all its Deferreds to fire (with a result
or an error), and returns a big list of results of the form: 
   [(success_bool, value), (success_bool, value), ...]

Where 'success_bool' is True if the corresponding Deferred succeeded (i.e.
fired a callback), and False if it failed (i.e. fired an errback).  'value'
will be a result or a Failure instance accordingly.  So a standard
DeferredList will never call errback, because it includes errors in the
result passed to its callback.

Error handling in this case could be handled by the user of the
DeferredList, because it would have access to any underlying failures via
the callback.  But you're correct, the original deferreds would still need
errbacks attached -- or pass consumeErrors=True to DeferredList, and it will
do this for you.

And of course, the situation is a bit different again if you pass
fireOnOneErrback=True...

You're right that the docs are a bit confusing here.  Please file a bug
about it at <A HREF="http://twistedmatrix.com/bugs.">http://twistedmatrix.com/bugs.</A>  The &quot;Other Behaviours&quot; section
of <A HREF="http://twistedmatrix.com/documents/current/howto/defer">http://twistedmatrix.com/documents/current/howto/defer</A> tries to address
this, but perhaps we could do better.

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="042556.html">[Twisted-Python] DeferredList and errbacks
</A></li>
	<LI>Next message (by thread): <A HREF="042686.html">[Twisted-Python] Re: DeferredList and errbacks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42557">[ date ]</a>
              <a href="thread.html#42557">[ thread ]</a>
              <a href="subject.html#42557">[ subject ]</a>
              <a href="author.html#42557">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
