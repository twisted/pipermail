<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] any progress for Ticket #6346, #6378?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20any%20progress%20for%20Ticket%20%236346%2C%20%236378%3F&In-Reply-To=%3C038701ce5c15%247777eda0%246667c8e0%24%40com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026987.html">
   <LINK REL="Next"  HREF="026991.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] any progress for Ticket #6346, #6378?</H1>
    <B>Alec Matusis</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20any%20progress%20for%20Ticket%20%236346%2C%20%236378%3F&In-Reply-To=%3C038701ce5c15%247777eda0%246667c8e0%24%40com%3E"
       TITLE="[Twisted-Python] any progress for Ticket #6346, #6378?">matusis at yahoo.com
       </A><BR>
    <I>Tue May 28 20:37:30 MDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026987.html">[Twisted-Python] New registrations to this mailing list broken?
</A></li>
        <LI>Next message: <A HREF="026991.html">[Twisted-Python] any progress for Ticket #6346, #6378?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26990">[ date ]</a>
              <a href="thread.html#26990">[ thread ]</a>
              <a href="subject.html#26990">[ subject ]</a>
              <a href="author.html#26990">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Gelin,

&gt;<i> As I know there are two epoll implementations in twisted, one that from
</I>twisted itself and another one comes from standard library since py 2.6.

I was slightly incorrect in my email: the combination where it happens
infrequently is actually Twisted 10.2 with python 2.7.3 (not Twisted 10.1 as
I wrote).
How can I check whether twisted is using Python&#146;s epoll or its own in this
combination? And how can I switch between epoll implementations in my app?

Alec

From: Gelin Yan [mailto:<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">dynamicgl at gmail.com</A>] 
Sent: Tuesday, May 28, 2013 6:42 PM
To: Alec Matusis
Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?


On Wed, May 29, 2013 at 8:31 AM, Alec Matusis &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">matusis at yahoo.com</A>&gt; wrote:
&gt;<i> &#160; By reading these comments, It looks like recent version of twisted
</I>&gt;<i>may
</I>&gt;<i>suffer from this problem. So what version of twisted should &#160;I use? Do
</I>&gt;<i>I
</I>&gt;<i>need to keep using 10.1?
</I>This problem is very frequent on Linux with Python 2.7 / Twisted 12
combination (we had to quickly roll back- cannot operate with that combo).

It never happened with Python 2.6 / Twisted 10 (as in years).

It happens very infrequently with Python 2.7 / Twisted 10.1 (as 1x in weeks)

Right now I have a server in this state on Python 2.7 / Twisted 10.1. It
refuses 30% of new connections, spewing this error:

2013-05-28 17:28:25-0700 [twisted.internet.protocol.ServerFactory] Unhandled
Error
&#160; &#160; &#160; &#160; Traceback (most recent call last):
&#160; &#160; &#160; &#160; &#160; File
&quot;/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/python/log.py&quot;, line 69, in callWithContext
&#160; &#160; &#160; &#160; &#160; &#160; return context.call({ILogContext: newCtx}, func, *args, **kw)
&#160; &#160; &#160; &#160; &#160; File
&quot;/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/python/context.py&quot;, line 59, in callWithContext
&#160; &#160; &#160; &#160; &#160; &#160; return self.currentContext().callWithContext(ctx, func, *args,
**kw)
&#160; &#160; &#160; &#160; &#160; File
&quot;/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/python/context.py&quot;, line 37, in callWithContext
&#160; &#160; &#160; &#160; &#160; &#160; return func(*args,**kw)
&#160; &#160; &#160; &#160; &#160; File
&quot;/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/epollreactor.py&quot;, line 217, in
_doReadOrWrite
&#160; &#160; &#160; &#160; &#160; &#160; why = selectable.doRead()
&#160; &#160; &#160; &#160; --- &lt;exception caught here&gt; ---
&#160; &#160; &#160; &#160; &#160; File
&quot;/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/tcp.py&quot;, line 938, in doRead
&#160; &#160; &#160; &#160; &#160; &#160; transport = self.transport(skt, protocol, addr, self, s,
self.reactor)
&#160; &#160; &#160; &#160; &#160; File
&quot;/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/tcp.py&quot;, line 752, in __init__
&#160; &#160; &#160; &#160; &#160; &#160; self.startReading()
&#160; &#160; &#160; &#160; &#160; File
&quot;/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/abstract.py&quot;, line 365, in
startReading
&#160; &#160; &#160; &#160; &#160; &#160; self.reactor.addReader(self)
&#160; &#160; &#160; &#160; &#160; File
&quot;/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/epollreactor.py&quot;, line 100, in
addReader
&#160; &#160; &#160; &#160; &#160; &#160; self._add(reader, self._reads, self._writes, self._selectables,
_epoll.IN, _epoll.OUT)
&#160; &#160; &#160; &#160; &#160; File
&quot;/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/epollreactor.py&quot;, line 88, in _add
&#160; &#160; &#160; &#160; &#160; &#160; self._poller._control(cmd, fd, flags)
&#160; &#160; &#160; &#160; &#160; File &quot;_epoll.pyx&quot;, line 125, in _epoll.epoll._control

&#160; &#160; &#160; &#160; exceptions.IOError: [Errno 2] No such file or directory


If I restart the server, it will be stable for a couple of weeks, until some
event triggers this problem again. We hope that this problem is fixed before
we are really forced to migrate to newer Python, otherwise there's no real
upgrade path for us using Twisted.

From: <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-bounces at twistedmatrix.com</A>
[mailto:<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-bounces at twistedmatrix.com</A>] On Behalf Of Gelin Yan
Sent: Saturday, May 25, 2013 7:51 AM
To: Twisted general discussion
Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?



On Sat, May 25, 2013 at 3:22 AM, &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt; wrote:
On 04:21 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">dynamicgl at gmail.com</A> wrote:
&gt;<i>Hi All
</I>
Hi Gelin,

I don't have anything extra to add about the status of those two tickets
(I think you meant #6373 rather than #6378, by the way) - which is
exactly why I'm replying.

Twisted development doesn't take place in secret. &#160;The issue tracker
should always reflect the latest state of the development process. &#160;If
an issue has had no comments and a branch no commits for a couple
months, then it's almost certainly because no one has worked on the
issue for a couple months.

So you generally don't need to ask if there has been any progress,
because progress will always be reflected in ticket history or in
version control.
&gt;<i> &#160; &#160;I am quite concerned about these two tickets due to recently I may
</I>&gt;<i>port
</I>&gt;<i>one of my systems to Ubuntu.
</I>Perhaps you can help out with the tickets, then! &#160;As hopefully you've
noticed, one of them is currently up for review. &#160;This means a developer
believes a fix for the problem has been created and is just waiting for
someone else to look it over and agree that it should be applied to
trunk. &#160;If this happens, then the fix will be available in the next
release of Twisted, 13.1.0, which will probably happen in just a few
weeks.

For more details about how the review process works, please take a look
at this wiki page:

&#160; &#160; <A HREF="http://twistedmatrix.com/trac/wiki/ReviewProcess">http://twistedmatrix.com/trac/wiki/ReviewProcess</A>

Jean-Paul
&gt;<i> &#160; By reading these comments, It looks like recent version of twisted
</I>&gt;<i>may
</I>&gt;<i>suffer from this problem. So what version of twisted should &#160;I use? Do
</I>&gt;<i>I
</I>&gt;<i>need to keep using 10.1?
</I>&gt;<i>
</I>&gt;<i> &#160;I always use the latest version on windows.
</I>&gt;<i>
</I>&gt;<i>Regards
</I>&gt;<i>
</I>&gt;<i>gelin yan
</I>_______________________________________________
Twisted-Python mailing list
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>


Hi exarkun

&#160; &#160; I noticed &quot;review&quot; tag has been removed for a while so does it imply
this ticket is still pending?&#160;

&#160; &#160;I am not quite familiar how epoll works on linux so my help probably can
be neglected. I event can't sure how to reproduce this bug.

&#160; &#160;By the way, Is it possible to use the &quot;old&quot; epoll implementation instead
of the built in epoll from python with the latest version? It looks like
this old one works quite well. &#160;Thanks

Regards

gelin yan&#160;


Hi Alec

&#160; &#160;Thanks for your info. As I know there are two epoll implementations in
twisted, one that from twisted itself and another one comes from standard
library since py 2.6. If I was correct, since 10.2, twisted has been used
the standard epoll if applicable. I am curious which one did you use? Have
you tried py 2.7 &amp; epoll from twisted itself?

Regards

gelin yan


</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026987.html">[Twisted-Python] New registrations to this mailing list broken?
</A></li>
	<LI>Next message: <A HREF="026991.html">[Twisted-Python] any progress for Ticket #6346, #6378?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26990">[ date ]</a>
              <a href="thread.html#26990">[ thread ]</a>
              <a href="subject.html#26990">[ subject ]</a>
              <a href="author.html#26990">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
