<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted webserver performance issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20webserver%20performance%20issues&In-Reply-To=%3C20091108030755.3229.1533062650.divmod.xquotient.355%40localhost.localdomain%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="053400.html">
   <LINK REL="Next"  HREF="053402.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted webserver performance issues</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20webserver%20performance%20issues&In-Reply-To=%3C20091108030755.3229.1533062650.divmod.xquotient.355%40localhost.localdomain%3E"
       TITLE="[Twisted-Python] Twisted webserver performance issues">exarkun at twistedmatrix.com
       </A><BR>
    <I>Sat Nov  7 20:07:55 MST 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="053400.html">[Twisted-Python] Twisted webserver performance issues
</A></li>
        <LI>Next message (by thread): <A HREF="053402.html">[Twisted-Python] Twisted webserver performance issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53401">[ date ]</a>
              <a href="thread.html#53401">[ thread ]</a>
              <a href="subject.html#53401">[ subject ]</a>
              <a href="author.html#53401">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 02:55 am, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">leyssw at ihug.co.nz</A> wrote:
&gt;<i>Thanks for the link info.
</I>&gt;<i>
</I>&gt;<i>I literally just set up Varnish for the first time on my web host, so I 
</I>&gt;<i>am no pro. However, varnish uses a c like scripting language that can 
</I>&gt;<i>run regexps on the incoming urls and apply rules to them.
</I>&gt;<i>
</I>&gt;<i>What this means is that we can (as a starting point) choose caching 
</I>&gt;<i>times for each of those high traffic urls in the varnish script without 
</I>&gt;<i>touching trac. In the script, we match the front page (with a regexp) 
</I>&gt;<i>and add a max- cache time to 86400, cache it, etc.
</I>&gt;<i>
</I>&gt;<i>See <A HREF="http://www.catalystframework.org/calendar/2008/14">http://www.catalystframework.org/calendar/2008/14</A>
</I>&gt;<i>for a great varnish tutorial
</I>&gt;<i>
</I>&gt;<i>By doing that for each of the urls you listed (bar the timeline, which 
</I>&gt;<i>should be cached for 1 hour or perhaps 30 minutes instead) we will 
</I>&gt;<i>seriously lighten the load on the database and the webserver, even if 
</I>&gt;<i>varnish runs on the same machine (as a start).
</I>&gt;<i>
</I>&gt;<i>Every other url (which doesn't have caching set) we could just cache 
</I>&gt;<i>for 30 minutes (perhaps even a day), but only for anon users (no 
</I>&gt;<i>cookies set in browser)
</I>
Where this gets hard is that the front page looks different depending on 
whether the person requesting it is anonymous or authenticated.  If 
they're anonymous, various links are not presented.  If they're 
authenticated, they get the extra links and their username is part of 
the page.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="053400.html">[Twisted-Python] Twisted webserver performance issues
</A></li>
	<LI>Next message (by thread): <A HREF="053402.html">[Twisted-Python] Twisted webserver performance issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53401">[ date ]</a>
              <a href="thread.html#53401">[ thread ]</a>
              <a href="subject.html#53401">[ subject ]</a>
              <a href="author.html#53401">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
