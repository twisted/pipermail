<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Proposal (almost) to switch from Lore to Sphinx
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Proposal%20%28almost%29%20to%20switch%20from%20Lore%20to%20Sphinx&In-Reply-To=%3C562bcc10911111637y3b414c47w5df0a0142355228d%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="053450.html">
   <LINK REL="Next"  HREF="053452.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Proposal (almost) to switch from Lore to Sphinx</H1>
    <B>Kevin Horn</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Proposal%20%28almost%29%20to%20switch%20from%20Lore%20to%20Sphinx&In-Reply-To=%3C562bcc10911111637y3b414c47w5df0a0142355228d%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Proposal (almost) to switch from Lore to Sphinx">kevin.horn at gmail.com
       </A><BR>
    <I>Wed Nov 11 17:37:01 MST 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="053450.html">[Twisted-Python] Proposal (almost) to switch from Lore to Sphinx
</A></li>
        <LI>Next message (by thread): <A HREF="053452.html">[Twisted-Python] Proposal (almost) to switch from Lore to Sphinx
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53451">[ date ]</a>
              <a href="thread.html#53451">[ thread ]</a>
              <a href="subject.html#53451">[ subject ]</a>
              <a href="author.html#53451">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Nov 11, 2009 at 5:56 PM, Glyph Lefkowitz &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt;wrote:

&gt;<i>
</I>&gt;<i> On Nov 11, 2009, at 5:52 PM, Kevin Horn wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Please let me know what you think.
</I>&gt;<i>
</I>&gt;<i> Initial reaction: awesome!
</I>&gt;<i>
</I>&gt;<i>
</I>Well, that's encouraging. :)


&gt;<i> I don't really care about the documentation format or tools, I'm just
</I>&gt;<i> thrilled that someone is willing to step forward and maintain them in _any_
</I>&gt;<i> form.
</I>&gt;<i>
</I>&gt;<i> Secondary reaction: automated testing of code and examples is great.
</I>&gt;<i>  Necessary, even, especially for a new tool.  But doctests are not so much a
</I>&gt;<i> testing plan as a disease that comes to infest your code.
</I>&gt;<i>
</I>&gt;<i> (You are free to disagree with me about the utility or quality of doctest
</I>&gt;<i> as a tool, but doing so on this mailing list is counterproductive, as my
</I>&gt;<i> mind is pretty well made up.  Despite the fact that I have fond feelings
</I>&gt;<i> towards lore's design, this is the *only* point I'd veto a migration over.)
</I>&gt;<i>
</I>
I never use doctests in my own projects...but the functionality comes with
Sphinx (as a &quot;built-in extension&quot;...which such a fantastic oxymoron it makes
me smile).

There's lot's of other work being done in the Sphinx testing arena, though,
notably:

Sphinxtest:
<A HREF="http://groups.google.com/group/sphinx-dev/browse_thread/thread/fd9fc42648fc306c#">http://groups.google.com/group/sphinx-dev/browse_thread/thread/fd9fc42648fc306c#</A>
Manuel: <A HREF="http://packages.python.org/manuel/">http://packages.python.org/manuel/</A>

and something-I-read-about-the-other-day-but-can't-find-now.


&gt;<i> Automated tests for documentation should look roughly like this:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://divmod.org/trac/browser/trunk/Nevow/nevow/test/test_howtolistings.py?rev=17299">http://divmod.org/trac/browser/trunk/Nevow/nevow/test/test_howtolistings.py?rev=17299</A>
</I>&gt;<i>
</I>&gt;<i> but the stuff that does &quot;sys.modules.clear()&quot; and so on should be a lot
</I>&gt;<i> further away from the actual test cases.
</I>&gt;<i>
</I>&gt;<i> The only thing that is necessary for testing like that to work is the
</I>&gt;<i> ability to reference an external .py file as a code listing.  This is also a
</I>&gt;<i> good thing because then users can just run the Python files straight in the
</I>&gt;<i> examples directory, rather than copying some stuff from a web browser into a
</I>&gt;<i> text editor, mucking around with path variables for a while, trying to make
</I>&gt;<i> sure they got the indentation right etc.
</I>&gt;<i>
</I>&gt;<i> Can sphinx do that out of the box?
</I>&gt;<i>
</I>
Yes.  The &quot;literalinclude&quot; directive pulls in an external file and sticks it
in a literal block (the ReST equivalent of a &lt;pre&gt; tag).  So you could use
whatever testing framework you wanted and just reference those files.


&gt;<i>
</I>&gt;<i> Tertiary reaction, since I had to go to divmod.org to dig up that example:
</I>&gt;<i> a migration plan should include the Divmod projects, especially Nevow, since
</I>&gt;<i> a lot of people use that.  But, if there's an automated tool that can handle
</I>&gt;<i> the Twisted conversion, there really shouldn't be any additional effort to
</I>&gt;<i> just run it over the Divmod codebase and just check in the result.  The only
</I>&gt;<i> real work will be in adjusting the buildbot.  This is really just an
</I>&gt;<i> argument for an automated, repeatable conversion process rather than manual
</I>&gt;<i> editing.
</I>&gt;<i>
</I>&gt;<i>
</I>Hmmm...I hadn't considered the Divmod stuff, but you're right.

I think the automated conversion plan is the way to go...up to a point.  As
I laid out in the proposal, I think at some point, the Sphinx docs (and the
automated conversion process) will become &quot;good enough&quot;, and then edits
should be done manually to the ReST/Sphinx source files, rather than the
Lore files.  Otherwise you just end up with another tool to maintain
forever.  And in my opinion, Twisted needs to get away from having it's own
collection of self-maintained tools as much as possible. :)

I have some basic code for the conversion process, but it's in a VERY
preliminary state, and needs a fair bit of work.  There's still several tags
it doesn't handle at all (including tables, which _might_ be a real beast),
and it needs to be refactored some.  I mostly wrote it as a proof-of-concept
for myself to prove (to myself) that automated conversion was feasible.
 That said, it _will_ generate a buildable Sphinx project (though it's
currently VERY ugly, and generates warning in the hundreds).

If there's interest, I can put up what I can generate to this point, though
it's awfully early days yet.


Also:
Were my claims/assumption about Lore pretty much correct?  Did I miss
anything?

Kevin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20091111/887bc52c/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="053450.html">[Twisted-Python] Proposal (almost) to switch from Lore to Sphinx
</A></li>
	<LI>Next message (by thread): <A HREF="053452.html">[Twisted-Python] Proposal (almost) to switch from Lore to Sphinx
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53451">[ date ]</a>
              <a href="thread.html#53451">[ thread ]</a>
              <a href="subject.html#53451">[ subject ]</a>
              <a href="author.html#53451">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
