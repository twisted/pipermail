<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted webserver performance issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20webserver%20performance%20issues&In-Reply-To=7137DDF4-402F-4967-B0B4-E7FAB8267A28%40fuhm.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020926.html">
   <LINK REL="Next"  HREF="020909.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted webserver performance issues</H1>
    <B>Maarten ter Huurne</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20webserver%20performance%20issues&In-Reply-To=7137DDF4-402F-4967-B0B4-E7FAB8267A28%40fuhm.net"
       TITLE="[Twisted-Python] Twisted webserver performance issues">maarten at treewalker.org
       </A><BR>
    <I>Sun Nov  8 09:54:29 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020926.html">[Twisted-Python] Twisted webserver performance issues
</A></li>
        <LI>Next message: <A HREF="020909.html">[Twisted-Python] Twisted webserver performance issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20906">[ date ]</a>
              <a href="thread.html#20906">[ thread ]</a>
              <a href="subject.html#20906">[ subject ]</a>
              <a href="author.html#20906">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sunday 08 November 2009, James Y Knight wrote:

&gt;<i> When I last looked into the performance issues, I found that sometimes
</I>&gt;<i> trac appears to block for long periods of time without releasing the
</I>&gt;<i> GIL. That seems to be the core of the performance issues, currently.
</I>&gt;<i> When it's responding normally, it's perfectly snappy. But, sometimes,
</I>&gt;<i> it blocks for 10sec at a time.
</I>
How much memory does Trac use? Python garbage collection works in 
generations, which leads to recently allocated objects to be checked for 
garbage more often than older objects.

<A HREF="http://docs.python.org/library/gc.html">http://docs.python.org/library/gc.html</A>

When collecting the oldest generation (2), we saw the Python VM freeze for 
several minutes. This was on a process that had several GB of allocated 
memory though. There was enough RAM to contain all data, but it's still 
possible the OS (Linux) swapped out pages there were not used for a long 
time to get more memory for caching.

We decided to work around the issue by disabling mark-and-sweep collection 
and relying on reference counting only. We had to add some code to forcably 
break reference cycles, but this was only needed for a small number cases.

Bye,
		Maarten

</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020926.html">[Twisted-Python] Twisted webserver performance issues
</A></li>
	<LI>Next message: <A HREF="020909.html">[Twisted-Python] Twisted webserver performance issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20906">[ date ]</a>
              <a href="thread.html#20906">[ thread ]</a>
              <a href="subject.html#20906">[ subject ]</a>
              <a href="author.html#20906">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
