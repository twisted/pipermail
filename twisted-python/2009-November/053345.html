<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Need replacement for subprocess.call within a pyAMF method - any suggestions?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Need%20replacement%20for%20subprocess.call%20within%20a%0A%20pyAMF%20method%20-%20any%20suggestions%3F&In-Reply-To=%3CC71602FE.5CB7%25rroberts%40adobe.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="053344.html">
   <LINK REL="Next"  HREF="053346.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Need replacement for subprocess.call within a pyAMF method - any suggestions?</H1>
    <B>Read Roberts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Need%20replacement%20for%20subprocess.call%20within%20a%0A%20pyAMF%20method%20-%20any%20suggestions%3F&In-Reply-To=%3CC71602FE.5CB7%25rroberts%40adobe.com%3E"
       TITLE="[Twisted-Python] Need replacement for subprocess.call within a pyAMF method - any suggestions?">rroberts at adobe.com
       </A><BR>
    <I>Tue Nov  3 16:55:42 MST 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="053344.html">[Twisted-Python] twisted.internet.error.ProcessTerminated,	exit code 1?
</A></li>
        <LI>Next message (by thread): <A HREF="053346.html">[Twisted-Python] Need replacement for subprocess.call within	a	pyAMF method - any suggestions?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53345">[ date ]</a>
              <a href="thread.html#53345">[ thread ]</a>
              <a href="subject.html#53345">[ subject ]</a>
              <a href="author.html#53345">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am trying to use the twisted reactor as a basis for a Python server for a
Flex app, using pyAMF.  My problem is that one  of the server methods
requires me to run a series of command-line tools to complete parsing data
from a file into an XML object, with lots of Python processing on the
results of one command-line tool to provide the input to the next one. I
have been using  subprocess.call  to invoke the command-line tools, but
these intermittently - and frequently -  fail with an error &quot;IOError: [Errno
4] Interrupted system call&quot;.

I do know that this was supposed to be fixed in twisted for Python 2.6, but
it doesn't seem to be. I have python 2.6.3 under Mac OSX 10.5.8, and twisted
8.2.0. Is there a work-around for this problem, or a better way to do this
with twisted? I do know that I can make a command-line call with
reactor.callLater, and that I can return a deferred from my server method,
but I don't see how to easily accomplish the chain of calls that I need,
short of breaking up my serverMethod1 into the several sequential parts, and
calling each from the result handler of the previous one. I'd rather not go
that route, as the logic of which command-line call gets made when is
actually quite complicated.

What I have now looks like (enormously simplified):
class MyPythonServer:

    def serverMethod1(self, dummyPost, inputFilePath):
        # Open inputFilePath, do stuff, save results to file2
        subprocess.call([&quot;command1&quot;, &quot;file2&quot;, &quot;file3&quot;])
        # Open file3, do stuff to the data, save results to file4
        subprocess.call([&quot;command2&quot;, &quot;file4&quot;, &quot;file5&quot;])
        # Open file5, convert data to a large string containing XML.
        return xmlString
 
- Read Roberts



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="053344.html">[Twisted-Python] twisted.internet.error.ProcessTerminated,	exit code 1?
</A></li>
	<LI>Next message (by thread): <A HREF="053346.html">[Twisted-Python] Need replacement for subprocess.call within	a	pyAMF method - any suggestions?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53345">[ date ]</a>
              <a href="thread.html#53345">[ thread ]</a>
              <a href="subject.html#53345">[ subject ]</a>
              <a href="author.html#53345">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
