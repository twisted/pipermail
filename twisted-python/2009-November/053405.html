<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted webserver performance issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20webserver%20performance%20issues&In-Reply-To=%3C4AF6648E.8000406%40ihug.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="053412.html">
   <LINK REL="Next"  HREF="053407.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted webserver performance issues</H1>
    <B>Tom Leys</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20webserver%20performance%20issues&In-Reply-To=%3C4AF6648E.8000406%40ihug.co.nz%3E"
       TITLE="[Twisted-Python] Twisted webserver performance issues">leyssw at ihug.co.nz
       </A><BR>
    <I>Sat Nov  7 23:26:22 MST 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="053412.html">[Twisted-Python] Twisted webserver performance issues
</A></li>
        <LI>Next message (by thread): <A HREF="053407.html">[Twisted-Python] Twisted webserver performance issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53405">[ date ]</a>
              <a href="thread.html#53405">[ thread ]</a>
              <a href="subject.html#53405">[ subject ]</a>
              <a href="author.html#53405">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Neither of the below issues will be a problem

Jean-Paul
Logged in users have a cookie set (I imagine). by default Varnish will not present cached results to users with a cookie, nor will it cache their results for others to see. So the 10% of hits (totally my guess) that are for authenticated users will not be cached. However, some more static assets could be cached regardless of cookies if we so desire.

James:
Varnish has an option to serve an old result out of cache if the server is being non-responsive, it is a feature they call &quot;Grace&quot;

-Tom



Where this gets hard is that the front page looks different depending on 
whether the person requesting it is anonymous or authenticated.  If 
they're anonymous, various links are not presented.  If they're 
authenticated, they get the extra links and their username is part of 
the page.

Jean-Paul

------------------------------


When I last looked into the performance issues, I found that sometimes  
trac appears to block for long periods of time without releasing the  
GIL. That seems to be the core of the performance issues, currently.  
When it's responding normally, it's perfectly snappy. But, sometimes,  
it blocks for 10sec at a time.

My next attempt to improve performance was going to be to run trac in  
subprocesses instead of threads. That would hopefully substantially  
fix the delay problem.

James



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="053412.html">[Twisted-Python] Twisted webserver performance issues
</A></li>
	<LI>Next message (by thread): <A HREF="053407.html">[Twisted-Python] Twisted webserver performance issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53405">[ date ]</a>
              <a href="thread.html#53405">[ thread ]</a>
              <a href="subject.html#53405">[ subject ]</a>
              <a href="author.html#53405">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
