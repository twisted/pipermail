<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Proposal (almost) to switch from Lore to Sphinx
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Proposal%20%28almost%29%20to%20switch%20from%20Lore%20to%20Sphinx&In-Reply-To=%3C562bcc10911170951s171a401h615e70c04f1d8fd4%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="053512.html">
   <LINK REL="Next"  HREF="053528.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Proposal (almost) to switch from Lore to Sphinx</H1>
    <B>Kevin Horn</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Proposal%20%28almost%29%20to%20switch%20from%20Lore%20to%20Sphinx&In-Reply-To=%3C562bcc10911170951s171a401h615e70c04f1d8fd4%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Proposal (almost) to switch from Lore to Sphinx">kevin.horn at gmail.com
       </A><BR>
    <I>Tue Nov 17 10:51:36 MST 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="053512.html">[Twisted-Python] Proposal (almost) to switch from Lore to Sphinx
</A></li>
        <LI>Next message (by thread): <A HREF="053528.html">[Twisted-Python] Proposal (almost) to switch from Lore to Sphinx
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53523">[ date ]</a>
              <a href="thread.html#53523">[ thread ]</a>
              <a href="subject.html#53523">[ subject ]</a>
              <a href="author.html#53523">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Nov 17, 2009 at 2:13 AM, Glyph Lefkowitz &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt;wrote:

&gt;<i>
</I>&gt;<i> On Nov 16, 2009, at 5:37 PM, Kevin Horn wrote:
</I>&gt;<i>
</I>&gt;<i> On Mon, Nov 16, 2009 at 3:11 PM, &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On 06:09 pm, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">kevin.horn at gmail.com</A> wrote:
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;er, sorry, forgot to post the link...
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;here it is:
</I>&gt;&gt;<i> &gt;<A HREF="http://twistedsphinx.funsize.net/">http://twistedsphinx.funsize.net/</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks.  It's good to be able to see (at least an early draft of) what
</I>&gt;&gt;<i> the outcome of this proposal will be.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm glad the reactions have been good so far, but I want to be a wet
</I>&gt;&gt;<i> blanket for a moment and suggest that we try to avoid being influenced
</I>&gt;&gt;<i> excessively by the &quot;new look&quot; effect.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Wet blanket away!  Every project needs a good &quot;devil's advocate&quot;.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Well!  If it's time for criticism I've got some ;-).
</I>&gt;<i>
</I>&gt;<i> I'd really like to see the stylesheets on this site adjusted to look as
</I>&gt;<i> much as possible like the current Twisted style.  Use the verbatim
</I>&gt;<i> stylesheets from twistedmatrix.com as much as possible.  I realize you'll
</I>&gt;<i> have to have some custom elements, but it should be possible to at least
</I>&gt;<i> avoid creating any new images and to stitch together the existing styles
</I>&gt;<i> rather than make new ones wholesale.
</I>&gt;<i>
</I>&gt;<i> If we ever have the resources to do a site redesign again (and I hope we
</I>&gt;<i> do, it would be nice to get a fresh look every few years) I want to be able
</I>&gt;<i> to re-style the _entire_ site.
</I>&gt;<i>
</I>&gt;<i> We could do this with the Lore documentation too, but if we're going to
</I>&gt;<i> make the investment I'd rather it be on something easier to maintain, as
</I>&gt;<i> your conversion project promises to be.  I also suspect that it would be a
</I>&gt;<i> lot easier to style the output from sphinx, as it is explicitly designed to
</I>&gt;<i> be themable, and has actually been modified to have multiple, radically
</I>&gt;<i> different stylesheets already.  Actually integrating this with the L&amp;F of
</I>&gt;<i> the rest of the Twisted site would go a long way towards demonstrating
</I>&gt;<i> Sphinx's superiority in this area :).
</I>&gt;<i>
</I>
The current look is the &quot;sphinxdoc&quot; theme, that comes with Sphinx.  My
intention is to create a new one for the Twisted docs that will be very
similar to the Twisted site.  I haven't really even started on this yet,
though.


&gt;<i> On the &quot;things to do&quot; side, while the mere presence of this page is itself
</I>&gt;<i> unintentionally hilarious - &lt;
</I>&gt;<i> <A HREF="http://twistedsphinx.funsize.net/projects/lore/howto/lore.html">http://twistedsphinx.funsize.net/projects/lore/howto/lore.html</A>&gt; - and it
</I>&gt;<i> will likely be removed from the final output, it does contain a good
</I>&gt;<i> enumeration of all the things that need to be converted in one place.  I
</I>&gt;<i> suspect that if you made all those UNHANDLED_TAG output warts go away, we'd
</I>&gt;<i> be most of the way towards converting all of the documentation.
</I>&gt;<i>
</I>
Heh, that is pretty funny.  If you'll notice though, almost all the
UNHANDLED_TAG stuff (on that page anyway) is related to the table on that
page.  I haven't even touched tables yet.  I don't think they'll be too
difficult, as long as there aren't any nested tables (there aren't in the
Twisted docs...I haven't looked at the Divmod stuff yet).  Since I think
there's only 2 tables in the Twisted docs, there kind of low on the priority
list.

FYI, those UNHANDLED_TAG messages are intentionally ugly, to make it easier
to find things that haven't been handled yet.

As far as what still needs to be done on conversion, this falls into a
couple of main areas:

- handling unhandled tags
- fixing some whitespace handling issues (notice that nested lists are
totally borked at the moment)
- going back through the &quot;Using Lore&quot; document, making sure all the various
tags are being handled correctly, and fixing any     problems
- building a &quot;twisteddocs&quot; theme

After this stuff is done, then the real grunt-work begins...fixing the bits
manually that can't be easily converted.  So far, I think this only really
involves 3 pages of Lore XHTML, but I'm sure I'll find other problems. :)

&gt;<i> The next &quot;tier&quot; of advantages (again IMO) also have nothing to do with the
</I>&gt;<i> output, those advantages being:
</I>&gt;<i>
</I>&gt;<i> - a more approachable document format (in the sense that I think there are
</I>&gt;<i> probably more people familiar with the Sphinx dialect of RestructuredText
</I>&gt;<i> than are familiar with Lore's subset of XHTML...and the number of Sphinx
</I>&gt;<i> users is growing)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Actually, I think that this particular often-touted advantage is a wash.
</I>&gt;<i>  The &quot;approachableness&quot; of ReST is questionable, especially once you get
</I>&gt;<i> into the weird corner cases where the syntax just completely falls apart and
</I>&gt;<i> turns into an incomprehensible line-noise jumble.  I mean, the syntax for
</I>&gt;<i> tables reads like a joke about how trying to make the plain-text input look
</I>&gt;<i> like the output is a bad idea: &lt;
</I>&gt;<i> <A HREF="http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#tables">http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#tables</A>&gt;.
</I>&gt;<i>  Consider trying to re-flow the contents of a table cell after adding text
</I>&gt;<i> to it, for example.  Plus, a _lot_ of people know HTML -- still many more
</I>&gt;<i> than know ReST, I would argue -- and lore adds relatively little to HTML.
</I>&gt;<i>
</I>
I'm not sure I agree here.  While it's true that lots of people know HTML,
I'm not sure that that helps more than it hurts.  First of all, XHTML is
subtly different from HTML, but more importantly, everyone  who &quot;knows&quot; HTML
doesn't know it to the same level, and has different opinions about what
different elements should be used for.  The &quot;Using Lore&quot; page spells things
out pretty clearly, but even some of those clear rules aren't followed very
well in the actual Twisted docs.  I think because people &quot;know&quot; HTML, they
just use what they know instead of paying close attention to the actual Lore
rules.  (going way out on the opinion limb here, though)

I guess my point is that I think it takes about the same amount of effort to
really learn the Lore subset of XHTML as it does to learn Sphinx's dialect
of RestructuredText.  And more people know Sphinx-RestructuredText to the
level practically usable for documentation (from using it on other
projects).  There's arguments either way I guess.

On a personal level, having written docs in other XML/XHTML dialects and in
Sphinx/ReST, I know I can write them way faster and with much less thought
to format in ReST.  And, IMO, those corner cases are very much in the
corner.  They don't come up very often, at least for me.

There's no defending ReST tables though.  You're totally right there.  Yuck.


&gt;<i> However, the motivation for choosing HTML was that &quot;any day now&quot; there
</I>&gt;<i> would be a good, commonly used, GUI editor for HTML documents and we could
</I>&gt;<i> easily annotate the output of one of those with the extra metadata that lore
</I>&gt;<i> wanted.  That hasn't happened.  What *has* happened is that despite the
</I>&gt;<i> difficulty involved in parsing and emitting ReST as compared to something
</I>&gt;<i> fairly regular like HTML or XML, tools like these have been emerging:
</I>&gt;<i>
</I>&gt;<i>     <A HREF="http://kib2.free.fr/reSTinPeace/">http://kib2.free.fr/reSTinPeace/</A>
</I>&gt;<i>     <A HREF="http://blog.enthought.com/?p=127">http://blog.enthought.com/?p=127</A>
</I>&gt;<i>
</I>&gt;<i> which let users edit ReST documents in a sort-of-wsyiwyg way, so you get
</I>&gt;<i> immediate feedback when you put a &quot;|&quot; or a &quot;`&quot; in some obscure spot that
</I>&gt;<i> makes your entire document disappear, rather than trying to hunt it down
</I>&gt;<i> after an hour of writing.  Plus, docutils provides a document model for ReST
</I>&gt;<i> so you can transform it programmatically and ignore its syntactic
</I>&gt;<i> peculiarities.
</I>&gt;<i>
</I>
I think the underlying reason this has happened is that ReST is less
flexible than HTML, and therefore less ambiguous.  I couldn't tell you why I
think that, though.  Just a feeling.


&gt;<i> Which all comes down to the fact that I'm mainly just restating this point
</I>&gt;<i> as the primary advantage:
</I>&gt;<i>
</I>&gt;<i> - a much larger user base, and clear extension API, which allows us to take
</I>&gt;<i> advantage of existing extensions, etc.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The active user community means that not only is somebody else mantaining
</I>&gt;<i> the basics, lots of other people are working on *tools* that we can use for
</I>&gt;<i> more intense usage.  I am personally looking forward to using some of those
</I>&gt;<i> GUI tools for actually editing the documentation; it's a much more
</I>&gt;<i> streamlined workflow than running the 'lore' commandline and reloading in a
</I>&gt;<i> browser.
</I>&gt;<i>
</I>
Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20091117/5a4e7e14/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="053512.html">[Twisted-Python] Proposal (almost) to switch from Lore to Sphinx
</A></li>
	<LI>Next message (by thread): <A HREF="053528.html">[Twisted-Python] Proposal (almost) to switch from Lore to Sphinx
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53523">[ date ]</a>
              <a href="thread.html#53523">[ thread ]</a>
              <a href="subject.html#53523">[ subject ]</a>
              <a href="author.html#53523">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
