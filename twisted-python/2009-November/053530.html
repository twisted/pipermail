<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] pb, viewable,	avatars: The example chatserver is buggy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20pb%2C%20viewable%2C%0A%09avatars%3A%20The%20example%20chatserver%20is%20buggy&In-Reply-To=%3C200911180112.51332.wolfgang%40rohdewald.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="053534.html">
   <LINK REL="Next"  HREF="053533.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] pb, viewable,	avatars: The example chatserver is buggy</H1>
    <B>Wolfgang Rohdewald</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20pb%2C%20viewable%2C%0A%09avatars%3A%20The%20example%20chatserver%20is%20buggy&In-Reply-To=%3C200911180112.51332.wolfgang%40rohdewald.de%3E"
       TITLE="[Twisted-Python] pb, viewable,	avatars: The example chatserver is buggy">wolfgang at rohdewald.de
       </A><BR>
    <I>Tue Nov 17 17:12:51 MST 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="053534.html">[Twisted-Python] server push data to client
</A></li>
        <LI>Next message (by thread): <A HREF="053533.html">[Twisted-Python] A non-blocking socket operation could not be	completed immediately
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53530">[ date ]</a>
              <a href="thread.html#53530">[ thread ]</a>
              <a href="subject.html#53530">[ subject ]</a>
              <a href="author.html#53530">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I tried this example:
<A HREF="http://twistedmatrix.com/projects/core/documentation/howto/pb-cred.html#auto18">http://twistedmatrix.com/projects/core/documentation/howto/pb-cred.html#auto18</A>

(scripts chatserver.py and chatclient.py)

but they do not work with python 2.6.4 (twisted 8.2.0).

Before the client can do much, the server function
User.detached is called resulting in an exception later
when User.send is called but self.remote is None.

I can fix this by changing chatclient.py:

def connected(self, perspective):
   self.perspective = perspective  
   ... and continue as in the original script

it seems that otherwise the perspective is destroyed
too early.

also the documentation should perhaps mention that the
client can only connect to the server once because the
server code does not remove a user from her group when
she detaches.

Is there any more complete example anywhere with better
error handling?

-- 
Wolfgang


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="053534.html">[Twisted-Python] server push data to client
</A></li>
	<LI>Next message (by thread): <A HREF="053533.html">[Twisted-Python] A non-blocking socket operation could not be	completed immediately
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53530">[ date ]</a>
              <a href="thread.html#53530">[ thread ]</a>
              <a href="subject.html#53530">[ subject ]</a>
              <a href="author.html#53530">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
