<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Deferred SOAP methods
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Deferred%20SOAP%20methods&In-Reply-To=%3C20091113152525.3229.1468585330.divmod.xquotient.707%40localhost.localdomain%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="053471.html">
   <LINK REL="Next"  HREF="053474.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Deferred SOAP methods</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Deferred%20SOAP%20methods&In-Reply-To=%3C20091113152525.3229.1468585330.divmod.xquotient.707%40localhost.localdomain%3E"
       TITLE="[Twisted-Python] Deferred SOAP methods">exarkun at twistedmatrix.com
       </A><BR>
    <I>Fri Nov 13 08:25:25 MST 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="053471.html">[Twisted-Python] Deferred SOAP methods
</A></li>
        <LI>Next message (by thread): <A HREF="053474.html">[Twisted-Python] Deferred SOAP methods
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53473">[ date ]</a>
              <a href="thread.html#53473">[ thread ]</a>
              <a href="subject.html#53473">[ subject ]</a>
              <a href="author.html#53473">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 02:52 pm, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">landreville at deadtreepages.com</A> wrote:
&gt;<i>I am making a SOAP server and all (or at least the vast majority) will 
</I>&gt;<i>be
</I>&gt;<i>returning a deferred. The whole SOAP method is encapsulated in a 
</I>&gt;<i>deferred in
</I>&gt;<i>most of my cases (I havent implemented this part yet.) Then I got the 
</I>&gt;<i>idea
</I>&gt;<i>that twisted.web.soap could just wrap my SOAP method (retrieved with
</I>&gt;<i>lookupFunction) in a deferred and return that deferred right away.
</I>&gt;<i>
</I>&gt;<i>For instance I would change twisted.web.soap.render  where it says d =
</I>&gt;<i>defer.maybeDeferred to  d = threads.deferToThread
</I>
It sounds like you're conflating Deferreds and threads a little bit.

The reason Twisted doesn't use deferToThread on any method it calls by 
default is that threads are a really bummer.  You have to worry about 
thread safety, you generally lose repeatability and determinism, your 
unit tests become a lot harder to write, if it's still possible to write 
them at all.  Then there are the performance considerations.  There are 
many kinds of code that CPython threads don't make any faster (and many 
kinds which it makes slower).

On the other hand, sometimes you really do want to do your work in a 
thread.  That's why deferToThread exists, after all - to make your life 
a little bit simpler when those cases do arise. :)

What is it that you're going to be doing in these SOAP methods?

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="053471.html">[Twisted-Python] Deferred SOAP methods
</A></li>
	<LI>Next message (by thread): <A HREF="053474.html">[Twisted-Python] Deferred SOAP methods
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53473">[ date ]</a>
              <a href="thread.html#53473">[ thread ]</a>
              <a href="subject.html#53473">[ subject ]</a>
              <a href="author.html#53473">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
