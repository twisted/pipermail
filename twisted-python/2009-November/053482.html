<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] synchronous/asynchronous api: possible	interface
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20synchronous/asynchronous%20api%3A%20possible%0A%09interface&In-Reply-To=%3C4AFDB118.1020903%40ihug.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="053484.html">
   <LINK REL="Next"  HREF="053471.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] synchronous/asynchronous api: possible	interface</H1>
    <B>Tom Leys</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20synchronous/asynchronous%20api%3A%20possible%0A%09interface&In-Reply-To=%3C4AFDB118.1020903%40ihug.co.nz%3E"
       TITLE="[Twisted-Python] synchronous/asynchronous api: possible	interface">leyssw at ihug.co.nz
       </A><BR>
    <I>Fri Nov 13 12:18:48 MST 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="053484.html">[Twisted-Python] synchronous/asynchronous api:	possible	interface
</A></li>
        <LI>Next message (by thread): <A HREF="053471.html">[Twisted-Python] Deferred SOAP methods
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53482">[ date ]</a>
              <a href="thread.html#53482">[ thread ]</a>
              <a href="subject.html#53482">[ subject ]</a>
              <a href="author.html#53482">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Doug.

I think that a decorator is a fairly nice idea, however you will 
probably run into the following issue:
<A HREF="http://twistedmatrix.com/trac/ticket/2066">http://twistedmatrix.com/trac/ticket/2066</A>

Once a reactor has been started and stopped, starting the reactor again 
will crash your program. You will need to come up with a way to get 
around this problem if you plan to call your database code more than 
once without restarting the python process.

-Tom

------------------------------

Message: 9
Date: Fri, 13 Nov 2009 09:32:25 -0500
From: Doug Farrell &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">doug.farrell at gmail.com</A>&gt;
Subject: [Twisted-Python] synchronous/asynchronous api: possible
	interface
To: Twisted general discussion &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>&gt;
Message-ID:
	&lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">80c54aa0911130632l63cad82aq54a93cff139c8b02 at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

I'd like to get some comments on the code below (including, &quot;don't be
a bonehead!&quot; &lt;g&gt;). I'm trying to write a API library for database
access that can be used by both synchronous (non-twisted, no reactor)
code and asynchronous (twisted, with reactor) code where the methods
of the library can called in either environment. What I'd like is the
method to return the results of the call (database query results) when
in synchronous mode, and a deferred that is a result of the database
call in asynchronous mode.

What I've done below is create a decorator class called CallerMode
that is used to decorate a function/method that normally returns a
deferred. If the CallerMode class is in synchronous mode it starts a
reactor to get the default callbacks to get called, which gets the
results or exceptions, and stops the reactor.

Am I being a dunce doing this kind of thing? Any suggestions,
comments, etc. are welcome.

Thanks!




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="053484.html">[Twisted-Python] synchronous/asynchronous api:	possible	interface
</A></li>
	<LI>Next message (by thread): <A HREF="053471.html">[Twisted-Python] Deferred SOAP methods
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53482">[ date ]</a>
              <a href="thread.html#53482">[ thread ]</a>
              <a href="subject.html#53482">[ subject ]</a>
              <a href="author.html#53482">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
