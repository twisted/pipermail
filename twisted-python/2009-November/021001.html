<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Proposal (almost) to switch from Lore to Sphinx
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Proposal%20%28almost%29%20to%20switch%20from%20Lore%20to%20Sphinx&In-Reply-To=20091116211156.27565.1285414471.divmod.xquotient.227%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021000.html">
   <LINK REL="Next"  HREF="021009.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Proposal (almost) to switch from Lore to Sphinx</H1>
    <B>Kevin Horn</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Proposal%20%28almost%29%20to%20switch%20from%20Lore%20to%20Sphinx&In-Reply-To=20091116211156.27565.1285414471.divmod.xquotient.227%40localhost.localdomain"
       TITLE="[Twisted-Python] Proposal (almost) to switch from Lore to Sphinx">kevin.horn at gmail.com
       </A><BR>
    <I>Mon Nov 16 17:37:20 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="021000.html">[Twisted-Python] Proposal (almost) to switch from Lore to Sphinx
</A></li>
        <LI>Next message: <A HREF="021009.html">[Twisted-Python] Proposal (almost) to switch from Lore to Sphinx
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21001">[ date ]</a>
              <a href="thread.html#21001">[ thread ]</a>
              <a href="subject.html#21001">[ subject ]</a>
              <a href="author.html#21001">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Nov 16, 2009 at 3:11 PM, &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt; wrote:

&gt;<i> On 06:09 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">kevin.horn at gmail.com</A> wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;er, sorry, forgot to post the link...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;here it is:
</I>&gt;<i> &gt;<A HREF="http://twistedsphinx.funsize.net/">http://twistedsphinx.funsize.net/</A>
</I>&gt;<i>
</I>&gt;<i> Thanks.  It's good to be able to see (at least an early draft of) what
</I>&gt;<i> the outcome of this proposal will be.
</I>&gt;<i>
</I>&gt;<i> I'm glad the reactions have been good so far, but I want to be a wet
</I>&gt;<i> blanket for a moment and suggest that we try to avoid being influenced
</I>&gt;<i> excessively by the &quot;new look&quot; effect.
</I>

Wet blanket away!  Every project needs a good &quot;devil's advocate&quot;.


&gt;<i> It would be easy to give the
</I>&gt;<i> existing documentation a face lift without switching systems entirely -
</I>&gt;<i> it's just a matter of editing the template and/or the css.  What are the
</I>&gt;<i> other benefits of the Sphinx output, in particular, the ones which it
</I>&gt;<i> would be difficult to achieve with Lore?
</I>&gt;<i>
</I>
Well, IMO, the absolute #1 benefit of using Sphinx over Lore is simply not
having to maintain Lore, which has nothing at all to do with the actual
output.  The next &quot;tier&quot; of advantages (again IMO) also have nothing to do
with the output, those advantages being:

- a more approachable document format (in the sense that I think there are
probably more people familiar with the Sphinx dialect of RestructuredText
than are familiar with Lore's subset of XHTML...and the number of Sphinx
users is growing)
- a much larger user base, and clear extension API, which allows us to take
advantage of existing extensions, etc.

Now having said that, switching to Sphinx *output* does have some advantages
(though by themselves they might not be compelling enough to switch).

- better navigation (prev &amp; next links, table of contents)
- JS-based full text search
- CHTML output (very nice for those of us who use Win32...though I realize
we're a minority here in the Twisted world)
- Direct PDF output (somewhat immature and provided by a 3rd party
extension, but mature enough that someone has actually &quot;typeset&quot; a printed
version of the Python Tutorial with it)

You're absolutely right that just giving the docs a &quot;facelift&quot; wouldn't
require nearly so much effort, but I don't think it would buy us as much
with regard to the ultimate maintainability of the documentation.

I'll start with one possibility - the index.  Am I right in thinking
&gt;<i> this is automatically generated?  This is something Lore isn't currently
</I>&gt;<i> capable of (there's a branch which addresses this, but I suspect it is
</I>&gt;<i> far too much of a mess to ever merge, so we can ignore it).  Going along
</I>&gt;<i> with this, how much control do we have over how the index is generated?
</I>&gt;<i> Some of what shows up here probably doesn't merit being displayed as
</I>&gt;<i> prominently as this - for example, the historical documents are mostly
</I>&gt;<i> of, well, historical interesting.  What options do we have for changing
</I>&gt;<i> how these are presented?
</I>&gt;<i>
</I>&gt;<i> Jean-Paul
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hmmm...this depends on what you mean by &quot;index&quot;. :)
</I>
There are (at least) 3 meanings of index as it relates to Sphinx.

- general index - currently empty
- module index - currently empty and, in fact, missing
- search index - auto-generated and used for the JS-based full text search
feature

However from you comments above I think you probably meant what Sphinx calls
the &quot;table of contents&quot; (which shows up in the index.html, contents.html,
etc.).  Not trying to nitpick here, just trying to be clear.  If I'm
incorrect in assuming that's what you meant, then you can ignore the
following and correct me, and we'll go from there.

In the meantime, I'll assume we're talking about the table of contents
(TOC).

RestructuredText (in a plain vanilla docutils install) does not have any way
of connecting documents together other than hyperlinks.  Sphinx defines a
&quot;toctree&quot; directive to get around this limitation.  This is a directive that
goes into your Sphinx source documents that looks something like this:

|<i> ..toctree:
</I>|<i>
</I>|<i>    projects/conch/index
</I>|<i>    projects/core/index
</I>|<i>    ..etc
</I>
Typically these would be created manually in your Sphinx source, but in this
instance I am creating them using my conversion script which generates ReST
source from Lore source.

At Sphinx build-time, Sphinx expects every ReST source file to show up
someplace in one of these toctree directives, and will generate warnings if
a file doesn't. Sphinx gathers up the connections defined by these toctree
directives throughout the project into  a tree-shaped data structure and
uses this to generate the handy navigation links (prev &amp; next), and also to
display all or part of the tree as a series of hyperlinks in a table of
contents format.  The depth of the tree displayed (or even displaying it at
all) is easily configurable.  Right now I'm showing quite a lot, because it
makes it easier to test my toctree-generating code, and it makes browsing my
output a bit simpler.  There's no reason we'd need to do this in the final
product.

Of course, if you mean the &quot;index&quot; index, then the answer is entirely
different :)

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20091116/31b49b4c/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20091116/31b49b4c/attachment.htm</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021000.html">[Twisted-Python] Proposal (almost) to switch from Lore to Sphinx
</A></li>
	<LI>Next message: <A HREF="021009.html">[Twisted-Python] Proposal (almost) to switch from Lore to Sphinx
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21001">[ date ]</a>
              <a href="thread.html#21001">[ thread ]</a>
              <a href="subject.html#21001">[ subject ]</a>
              <a href="author.html#21001">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
