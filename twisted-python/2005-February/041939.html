<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Persistence in browsers?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Persistence%20in%20browsers%3F&In-Reply-To=%3C000501c50b26%24d1c79d30%240a01a8c0%40mobile%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="041938.html">
   <LINK REL="Next"  HREF="041940.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Persistence in browsers?</H1>
    <B>Tibi Dondera</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Persistence%20in%20browsers%3F&In-Reply-To=%3C000501c50b26%24d1c79d30%240a01a8c0%40mobile%3E"
       TITLE="[Twisted-Python] Persistence in browsers?">incoming at pronet-romania.com
       </A><BR>
    <I>Fri Feb  4 19:02:58 MST 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="041938.html">[Twisted-Python] RE: Twisted-Python Re: How do I get at the	Application object (us ing twistd)
</A></li>
        <LI>Next message (by thread): <A HREF="041940.html">[Twisted-Python] Persistence in browsers?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41939">[ date ]</a>
              <a href="thread.html#41939">[ thread ]</a>
              <a href="subject.html#41939">[ subject ]</a>
              <a href="author.html#41939">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,
 
I'm not sure if this is the right list, or maybe twisted-web is more
appropriate.
 
Also, I might ask a question which has already been answered many times,
but I was unable to find references.
 
Short version:
I have 10.000 - 100.000 web browsers that are connected to my site, and
I need to inform them __real-time__ (a max of 3-5 seconds delay) of an
event that happened on the server. Is twisted the right way to go, given
the fact that it promises asynchronous event handling ?
 
Long version:
I have an information flux on a web page, that must change, as stated
before, on some specific event that happens on a server.
I have thought of two ways of doing this:
1. The &quot;ask every 5 seconds approach&quot;
Pretty obvious, the browser connects every 5 seconds and requests the
page again. However, for 10.000 clients, the server soon dies, and the 5
seconds limit is still not respected (because times of response get
incredibly long when apache is submerged in requests).
 
2. The &quot;ask and wait for answer approach&quot;
The basic idea is the following:
- the browser connects to the web page
- there is a javascript snippet in the page that reconnects in the
background (using the javascript HTTPRequest object) to a special script
on the server.
- the server keeps the connection open (by sending spaces, literally,
once every 10-15 seconds - and sleeping in between, not to put too much
stress on the server either). When an event happens, the server sends
all the needed data to the client, that redisplays it (through
javascript).
Of course, there is the problem with apache and it's 5 minutes script
running limit (I have implemented this in PHP), but the javascript code
is pretty smart to handle this, and when a connection fails, it
reconnects and all goes well.
 
This was a little better than the first approach, at least in the
response times, that are now consistent with the requirements. However,
a new problem arrises: apache cannot handle a very large number of open
connections at the same time (every web browser has at least an open
connection, in this case). After my calculations (it's pretty hard to
compute exactly, as I know of no javascript-enabled crawler that I can
programmatically use), the server will be completely trashed at around
300 connections.
 
The problem gets even more complicated with today's browsers: they have
a limitation of 2 concurent connections to the same site (don't know if
you noticed, but you cannot download 3 files concurently from the same
site). And the HTTPRequest connections count toward this limit. So if a
client uses two of my information fluxes, he will be unable to visit the
site at the same time.
Don't know if twisted solves this last problem. If not, I'll try to find
a work around (messing around with the DNS seems like a good idea at
this point in time).
 
The question is if twisted can solve my problem of informing all my
clients of the event (the event will not happen concurently for all the
clients, so there is no problem with server load; however, all the
clients will be listening concurently for their specific event)
 
Thanks for any answer, or for any direction/pointers you can give me. I
might be totally wrong in my approach, so I'm really open to all
suggestions (except buying lots of servers to make this work, of
course).
 
Tiberiu DONDERA
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20050205/258fe898/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="041938.html">[Twisted-Python] RE: Twisted-Python Re: How do I get at the	Application object (us ing twistd)
</A></li>
	<LI>Next message (by thread): <A HREF="041940.html">[Twisted-Python] Persistence in browsers?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41939">[ date ]</a>
              <a href="thread.html#41939">[ thread ]</a>
              <a href="subject.html#41939">[ subject ]</a>
              <a href="author.html#41939">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
