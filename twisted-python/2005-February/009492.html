<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: wxPython
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20wxPython&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009491.html">
   <LINK REL="Next"  HREF="009513.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: wxPython</H1>
    <B>David Bolen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20wxPython&In-Reply-To="
       TITLE="[Twisted-Python] Re: wxPython">db3l at fitlinxx.com
       </A><BR>
    <I>Tue Feb  8 18:14:31 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="009491.html">[Twisted-Python] wxPython
</A></li>
        <LI>Next message: <A HREF="009513.html">[Twisted-Python] Re: wxPython
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9492">[ date ]</a>
              <a href="thread.html#9492">[ thread ]</a>
              <a href="subject.html#9492">[ subject ]</a>
              <a href="author.html#9492">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Neal Nelson &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">nealie at kobudo.homeunix.net</A>&gt; writes:

&gt;<i> I can't seem to get wxPython to work with Twisted 1.3. I started
</I>&gt;<i> developing a system some time ago but I've only just got back to it
</I>&gt;<i> and the user interface no longer works, which is a bit of a problem.
</I>&gt;<i> 
</I>&gt;<i> Should wx work or is this broken in Twisted?
</I>
There are different ways to couple the Twisted and wxPython event
loops, with varying benefits and constraints.  Generally speaking you
need to decide which loop is the master and then handle updating the
other loop from within the main loop.  The wx reactor is an example of
Twisted owning the main loop with periodic updates to the wxPython
message loop.

But at least in my case, the cookbook example of letting wxPython own
the primary loop, and using a periodic timer to crank the Twisted
reactor has worked well.  The biggest negative to this approach (as
has been pointed out in prior threads on the subject) is the lower
granularity, and higher latency, of servicing network operations,
unless you really crank down the timer event and that can drive CPU
up.  But in my case, typically the networking operations are in
support of the GUI rather than the other way around, so our
performance hasn't been affected to any significant degree (and we run
with a 150ms timer).

So, for example, here's a stripped down application class from one of
our applications (using wxPython 2.4 class names):


class MyApp(wx.wxApp):

    def OnInit(self):
        # Twisted Reactor code
        reactor.startRunning(installSignalHandlers=0)
        wx.EVT_TIMER(self, 999999, self.OnTimer)
        self.timer = wx.wxTimer(self, 999999)
        self.timer.Start(150, False)

        # Create appropriate frame
        # ...

        return True
    
    def OnExit(self):
        self.timer.Stop()

        # Stopping the reactor may require multiple stages (separated by
        # a callLater), so the main loop needs to be running when the stop is
        # being executed.
        reactor.callLater(0, reactor.stop)
        reactor.mainLoop()

    def OnTimer(self, event):
        reactor.runUntilCurrent()
        reactor.doIteration(0)


We've used this with Twisted 1.1.0 through 1.3.0, although I haven't
tried the current 2.0 work.


-- David



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009491.html">[Twisted-Python] wxPython
</A></li>
	<LI>Next message: <A HREF="009513.html">[Twisted-Python] Re: wxPython
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9492">[ date ]</a>
              <a href="thread.html#9492">[ thread ]</a>
              <a href="subject.html#9492">[ subject ]</a>
              <a href="author.html#9492">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
