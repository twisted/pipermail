<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: async code structure question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%3A%20async%20code%20structure%20question&In-Reply-To=%3C1f060c4c050210150871e4a7a3%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="042038.html">
   <LINK REL="Next"  HREF="042035.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: async code structure question</H1>
    <B>snacktime</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%3A%20async%20code%20structure%20question&In-Reply-To=%3C1f060c4c050210150871e4a7a3%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Re: async code structure question">snacktime at gmail.com
       </A><BR>
    <I>Thu Feb 10 16:08:44 MST 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="042038.html">[Twisted-Python] Re: async code structure question
</A></li>
        <LI>Next message (by thread): <A HREF="042035.html">[Twisted-Python] async code structure question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42040">[ date ]</a>
              <a href="thread.html#42040">[ thread ]</a>
              <a href="subject.html#42040">[ subject ]</a>
              <a href="author.html#42040">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 10 Feb 2005 14:41:32 -0800 (PST), David Bolen &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">db3l at fitlinxx.com</A>&gt; wrote:
&gt;<i> Mary Gardiner &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mary-twisted at puzzling.org</A>&gt; writes:
</I>&gt;<i> 
</I>&gt;<i> &gt; Somehow authorize needs to have the deferred accessible. There's no
</I>&gt;<i> &gt; magical Deferred way of doing this, you do it the way that you'd make
</I>&gt;<i> &gt; any other piece of data accessible to a method: pass it to the method,
</I>&gt;<i> &gt; or having it accessible as self.d would be the standard ways.
</I>&gt;<i> 
</I>&gt;<i> Alternatively, the authorization class/code can just make its own
</I>&gt;<i> deferred (either directly or by performing a deferred operation) and
</I>&gt;<i> returns it to its caller.  The caller of authorize then sees it as a
</I>&gt;<i> deferable operation (returning a deferred) onto which it can hang any
</I>&gt;<i> callbacks, which which might be as simple as chaining to the initial
</I>&gt;<i> deferred.
</I>&gt;<i> 
</I>&gt;<i> If there's an intermediate layer (such as the ProcessTransaction class
</I>&gt;<i> in the example), it can just return the authorize deferred as its own
</I>&gt;<i> result without doing anything to it (unless it does in fact want to do
</I>&gt;<i> some post processing to authorizes result) up the chain.
</I>&gt;<i> 
</I>&gt;<i> snacktime, in your sample, this could avoid your use of callLater in
</I>&gt;<i> OT, since you could just call c.Do(data) and use the deferred that it
</I>&gt;<i> returned to hang your self.PrintData callback on.  Within your
</I>&gt;<i> ProcessTransaction and Vital classes, your &quot;response&quot; object would be
</I>&gt;<i> the deferred being passed up from the authentication layer, possibly
</I>&gt;<i> after some callback processing (although your example code didn't show
</I>&gt;<i> those objects manipulating response in any way).
</I>&gt;<i> 
</I>&gt;<i> If you think about this from the bottom up, your authentication
</I>&gt;<i> operations become the ones which are promising an eventual answer (and
</I>&gt;<i> on which all the rest of the processing rests) by returning a
</I>&gt;<i> deferred, either by generating one locally or already being layered on
</I>&gt;<i> a deferrable operation, via the network, a deferToThread blocking
</I>&gt;<i> call, a adbapi call, etc...
</I>&gt;<i> 
</I>&gt;<i> In turn, the other layers that sit above that deferrable operation
</I>&gt;<i> simply make use of that low level Deferred object on which they hang
</I>&gt;<i> whatever processing they need.
</I>
I thought about this approach, but I kind of like the idea of having
the deferred that fires off PrintData at the very top and pass the
deferred around in the request object for the request.  That way I can
trigger a message back to the client from anywhere.

Chris


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="042038.html">[Twisted-Python] Re: async code structure question
</A></li>
	<LI>Next message (by thread): <A HREF="042035.html">[Twisted-Python] async code structure question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42040">[ date ]</a>
              <a href="thread.html#42040">[ thread ]</a>
              <a href="subject.html#42040">[ subject ]</a>
              <a href="author.html#42040">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
