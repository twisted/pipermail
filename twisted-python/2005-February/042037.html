<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: async code structure question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%3A%20async%20code%20structure%20question&In-Reply-To=%3Cur7jovy1z.fsf%40fitlinxx.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="042032.html">
   <LINK REL="Next"  HREF="042038.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: async code structure question</H1>
    <B>David Bolen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%3A%20async%20code%20structure%20question&In-Reply-To=%3Cur7jovy1z.fsf%40fitlinxx.com%3E"
       TITLE="[Twisted-Python] Re: async code structure question">db3l at fitlinxx.com
       </A><BR>
    <I>Thu Feb 10 15:40:24 MST 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="042032.html">[Twisted-Python] async code structure question
</A></li>
        <LI>Next message (by thread): <A HREF="042038.html">[Twisted-Python] Re: async code structure question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42037">[ date ]</a>
              <a href="thread.html#42037">[ thread ]</a>
              <a href="subject.html#42037">[ subject ]</a>
              <a href="author.html#42037">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mary Gardiner &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mary-twisted at puzzling.org</A>&gt; writes:

&gt;<i> Somehow authorize needs to have the deferred accessible. There's no
</I>&gt;<i> magical Deferred way of doing this, you do it the way that you'd make
</I>&gt;<i> any other piece of data accessible to a method: pass it to the method,
</I>&gt;<i> or having it accessible as self.d would be the standard ways.
</I>
Alternatively, the authorization class/code can just make its own
deferred (either directly or by performing a deferred operation) and
returns it to its caller.  The caller of authorize then sees it as a
deferable operation (returning a deferred) onto which it can hang any
callbacks, which which might be as simple as chaining to the initial
deferred.

If there's an intermediate layer (such as the ProcessTransaction class
in the example), it can just return the authorize deferred as its own
result without doing anything to it (unless it does in fact want to do
some post processing to authorizes result) up the chain.

snacktime, in your sample, this could avoid your use of callLater in
OT, since you could just call c.Do(data) and use the deferred that it
returned to hang your self.PrintData callback on.  Within your
ProcessTransaction and Vital classes, your &quot;response&quot; object would be
the deferred being passed up from the authentication layer, possibly
after some callback processing (although your example code didn't show
those objects manipulating response in any way).

If you think about this from the bottom up, your authentication
operations become the ones which are promising an eventual answer (and
on which all the rest of the processing rests) by returning a
deferred, either by generating one locally or already being layered on
a deferrable operation, via the network, a deferToThread blocking
call, a adbapi call, etc...

In turn, the other layers that sit above that deferrable operation
simply make use of that low level Deferred object on which they hang
whatever processing they need.

-- David



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="042032.html">[Twisted-Python] async code structure question
</A></li>
	<LI>Next message (by thread): <A HREF="042038.html">[Twisted-Python] Re: async code structure question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42037">[ date ]</a>
              <a href="thread.html#42037">[ thread ]</a>
              <a href="subject.html#42037">[ subject ]</a>
              <a href="author.html#42037">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
