<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] async code structure question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20async%20code%20structure%20question&In-Reply-To=1f060c4c050210112631b8e0c6%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009520.html">
   <LINK REL="Next"  HREF="009524.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] async code structure question</H1>
    <B>Mary Gardiner</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20async%20code%20structure%20question&In-Reply-To=1f060c4c050210112631b8e0c6%40mail.gmail.com"
       TITLE="[Twisted-Python] async code structure question">mary-twisted at puzzling.org
       </A><BR>
    <I>Thu Feb 10 14:37:42 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="009520.html">[Twisted-Python] async code structure question
</A></li>
        <LI>Next message: <A HREF="009524.html">[Twisted-Python] async code structure question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9522">[ date ]</a>
              <a href="thread.html#9522">[ thread ]</a>
              <a href="subject.html#9522">[ subject ]</a>
              <a href="author.html#9522">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Feb 10, 2005, snacktime wrote:
&gt;<i> Specifically what I am having the most difficulty with is this.  In
</I>&gt;<i> Do() is where the Deferred is created that needs to have it's
</I>&gt;<i> callbacks fired.  How can I fire off that callback from authorize()
</I>&gt;<i> and have authorize() pass it the final data?
</I>
Somehow authorize needs to have the deferred accessible. There's no
magical Deferred way of doing this, you do it the way that you'd make
any other piece of data accessible to a method: pass it to the method,
or having it accessible as self.d would be the standard ways.

So that means that Do() will change slightly

&gt;<i>     def Do():
</I>&gt;<i>       d = defer.Deferred()
</I>&gt;<i>       c = ProcessTransaction()
</I>&gt;<i>       reactor.callLater(0, c.Do,data)
</I>&gt;<i>       d.addCallback(self.PrintData)
</I>&gt;<i>       d.addErrback(log.err)
</I>
        # finish here by storing d somewhere so that authorize can later
        # get access to it

And then authorize does something like this to fire off the callback
with data:

        # assume that the Deferred is accessible to authorize as self.d
        self.d.callback(data)

Once you use .callback, data will be passed to the first callback method
(self.PrintData) and so on.

The precise method by which you pass d around to the various classes is
as much a matter of individual program design as passing any other bit
of data around: config variables, strings, ints, etc etc.

-Mary


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009520.html">[Twisted-Python] async code structure question
</A></li>
	<LI>Next message: <A HREF="009524.html">[Twisted-Python] async code structure question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9522">[ date ]</a>
              <a href="thread.html#9522">[ thread ]</a>
              <a href="subject.html#9522">[ subject ]</a>
              <a href="author.html#9522">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
