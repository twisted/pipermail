<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] how to stop dataReceived while waiting a	deferred to fire?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20how%20to%20stop%20dataReceived%20while%20waiting%20a%0A%09deferred%20to%20fire%3F&In-Reply-To=20050221174618.GX7247%40opteron.random">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009626.html">
   <LINK REL="Next"  HREF="009628.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] how to stop dataReceived while waiting a	deferred to fire?</H1>
    <B>glyph at divmod.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20how%20to%20stop%20dataReceived%20while%20waiting%20a%0A%09deferred%20to%20fire%3F&In-Reply-To=20050221174618.GX7247%40opteron.random"
       TITLE="[Twisted-Python] how to stop dataReceived while waiting a	deferred to fire?">glyph at divmod.com
       </A><BR>
    <I>Mon Feb 21 15:47:57 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="009626.html">[Twisted-Python] how to stop dataReceived while waiting a	deferred to fire?
</A></li>
        <LI>Next message: <A HREF="009628.html">[Twisted-Python] how to stop dataReceived while waiting a	deferred to fire?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9627">[ date ]</a>
              <a href="thread.html#9627">[ thread ]</a>
              <a href="subject.html#9627">[ subject ]</a>
              <a href="author.html#9627">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 21 Feb 2005 18:46:18 +0100, Andrea Arcangeli &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">andrea at cpushare.com</A>&gt; wrote:

&gt;<i> Ok here we go, I even found a severe bug in the linereceiver code and I
</I>&gt;<i> fixed it as well. The bug in linereceiver happens like this:
</I>
Any chance that you could include some unit tests for the behavior you're expecting?  I think it might need to be fixed a different way.  For example:

&gt;<i> Index: Twisted/twisted/protocols/basic.py
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- Twisted/twisted/protocols/basic.py	(revision 13001)
</I>&gt;<i> +++ Twisted/twisted/protocols/basic.py	(working copy)
</I>     .
     .
     .
&gt;<i>          self.recvd = self.recvd + recd
</I>&gt;<i> -        while len(self.recvd) &gt; 1:
</I>&gt;<i> +        while len(self.recvd) &gt; 1 and not self.paused:
</I>
This seems like it could lead to some unpleasantly large (i.e. quadratic-time concatenation) buffers strings being left around if you pause one of these receivers and then forget to unpause it, or even just if your peer happens to be sending data very rapidly.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009626.html">[Twisted-Python] how to stop dataReceived while waiting a	deferred to fire?
</A></li>
	<LI>Next message: <A HREF="009628.html">[Twisted-Python] how to stop dataReceived while waiting a	deferred to fire?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9627">[ date ]</a>
              <a href="thread.html#9627">[ thread ]</a>
              <a href="subject.html#9627">[ subject ]</a>
              <a href="author.html#9627">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
