<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Freezing Ampoule or the Invasion of Infinite Zombie Processes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Freezing%20Ampoule%20or%20the%20Invasion%20of%20Infinite%0A%20Zombie%20Processes&In-Reply-To=%3CetPan.531c26e5.6b8b4567.176%40Buraks-MacBook-Pro.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028102.html">
   <LINK REL="Next"  HREF="028130.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Freezing Ampoule or the Invasion of Infinite Zombie Processes</H1>
    <B>Burak Nehbit</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Freezing%20Ampoule%20or%20the%20Invasion%20of%20Infinite%0A%20Zombie%20Processes&In-Reply-To=%3CetPan.531c26e5.6b8b4567.176%40Buraks-MacBook-Pro.local%3E"
       TITLE="[Twisted-Python] Freezing Ampoule or the Invasion of Infinite Zombie Processes">burak at nehbit.net
       </A><BR>
    <I>Sun Mar  9 01:31:33 MST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="028102.html">[Twisted-Python] Freezing Ampoule or the Invasion of Infinite Zombie Processes
</A></li>
        <LI>Next message: <A HREF="028130.html">[Twisted-Python] Freezing Ampoule or the Invasion of Infinite	Zombie Processes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28127">[ date ]</a>
              <a href="thread.html#28127">[ thread ]</a>
              <a href="subject.html#28127">[ subject ]</a>
              <a href="author.html#28127">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I wonder why you decided to use Ampoule to manage a single child process&#160;
(that apparently shouldn't be restarted when it exits)?&#160;
Mostly because Ampoule handles quite a bit of stuff behind the scenes. I didn&#8217;t want to use it per se&#8212;to not add extra complexity to the stack, chiefly&#8212;but it was the only way I could get it to work. It also gives me a very nice AMP interface which I am already familiar with, and that allows me to communicate with my frontend very liberally.

I think Ampoule's purpose is to make it easy to run many processes and&#160;
automatically restart them from time to time.&#160;
I agree. Though it&#8217;s also very useful as an drop&#8211;in implementation of a Twisted spawnProcess for one single other process.

It sounds like the basic process support included in Twisted,&#160;
reactor.spawnProcess, could address your requirements.&#160;
I have just found your answer here:&#160;

<A HREF="https://stackoverflow.com/questions/6678763/simple-example-with-spawnprocess">https://stackoverflow.com/questions/6678763/simple-example-with-spawnprocess</A>

which seems useful. If nothing else works, I will try to reduce complexity by converting this to bare spawnProcess.&#160;

Any ideas on what might be going wrong in my current stack? After all, processes being repeatedly created is just a symptom of something going wrong in the process very early, so ampoule tries to spawn another one. I am mainly looking to find a way to see the exception and where it happens. Twisted&#8217;s logging module seem to kick in too late.&#160;

Best,

Burak


From:&#160;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>
Reply:&#160;Twisted general discussion <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>
Date:&#160;March 3, 2014 at 4:21:42 AM
To:&#160;Twisted general discussion <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>
Subject:&#160; Re: [Twisted-Python] Freezing Ampoule or the Invasion of Infinite Zombie Processes  
On 06:34 am, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">burak at nehbit.net</A> wrote:  
&gt;<i>Hi everyone,  
</I>&gt;<i>  
</I>&gt;<i>It seems that I ran into a rather inextricable problem, would love to  
</I>&gt;<i>see what you think.  
</I>&gt;<i>  
</I>&gt;<i>As you might remember, I have been working on a distributed, anonymous  
</I>&gt;<i>community platform(s) called Aether ( www.getaether.net ) which is  
</I>&gt;<i>largely a Twisted codebase in its networking system. After releasing  
</I>&gt;<i>the app, I ended up with performance problems, in some part due to my  
</I>&gt;<i>programming incompetence, and some part because I was also using it to  
</I>&gt;<i>drive a GUI with qtreactor, which ran its own Javascript interpreter.  
</I>&gt;<i>  
</I>&gt;<i>The codebase is largely cleaned up now and the current architecture of  
</I>&gt;<i>the program involves two processes that talk to each other via Ampoule:  
</I>&gt;<i>a default reactor core, which handles network events, and a qtreactor  
</I>&gt;<i>which is solely concerned with the user interface. It works very well.  
</I>&gt;<i>Stress induced by networking does not slow down the UI and vice versa.  
</I>
I wonder why you decided to use Ampoule to manage a single child process  
(that apparently shouldn't be restarted when it exits)?  

I think Ampoule's purpose is to make it easy to run many processes and  
automatically restart them from time to time.  

It sounds like the basic process support included in Twisted,  
reactor.spawnProcess, could address your requirements.  

Jean-Paul  

_______________________________________________  
Twisted-Python mailing list  
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>  
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20140309/19d923e2/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20140309/19d923e2/attachment.html</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028102.html">[Twisted-Python] Freezing Ampoule or the Invasion of Infinite Zombie Processes
</A></li>
	<LI>Next message: <A HREF="028130.html">[Twisted-Python] Freezing Ampoule or the Invasion of Infinite	Zombie Processes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28127">[ date ]</a>
              <a href="thread.html#28127">[ thread ]</a>
              <a href="subject.html#28127">[ subject ]</a>
              <a href="author.html#28127">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
