<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Configuration options for twisted code
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Configuration%20options%20for%20twisted%20code&In-Reply-To=%3CCAFycZ9dAupsOetQ1Eqsh%3DvnuXyCgec7jD1%3Dw69ZCD2iu7svppA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028111.html">
   <LINK REL="Next"  HREF="028106.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Configuration options for twisted code</H1>
    <B>Adi Roiban</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Configuration%20options%20for%20twisted%20code&In-Reply-To=%3CCAFycZ9dAupsOetQ1Eqsh%3DvnuXyCgec7jD1%3Dw69ZCD2iu7svppA%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Configuration options for twisted code">adi at roiban.ro
       </A><BR>
    <I>Tue Mar  4 09:46:48 MST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="028111.html">[Twisted-Python] Configuration options for twisted code
</A></li>
        <LI>Next message: <A HREF="028106.html">[Twisted-Python] treq // Agent and Content-Length
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28112">[ date ]</a>
              <a href="thread.html#28112">[ thread ]</a>
              <a href="subject.html#28112">[ subject ]</a>
              <a href="author.html#28112">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 4 March 2014 15:22,  &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt; wrote:
&gt;<i> The big downside of a &quot;configuration object&quot; is that &quot;configuration&quot; isn't
</I>&gt;<i> any kind of abstraction.  &quot;Configuration&quot; approximately means &quot;stuff&quot;.
</I>&gt;<i> Where does your &quot;configuration&quot; end?  By just saying this is where
</I>&gt;<i> &quot;configuration&quot; goes you've defined its scope as infinite.  Before you know
</I>&gt;<i> it, there's 80,000 items in your &quot;configuration&quot; object and you're really
</I>&gt;<i> much worse off than if you'd just added a couple more arguments to
</I>&gt;<i> `__init__`.
</I>
Agree.

&gt;<i> I'd like to see this discussion going in the other direction so to give it a
</I>&gt;<i> little push that way, here's a specific suggestion. :)  Most or all of this
</I>&gt;<i> may be recycled from discussion that's already taken place - I'm not taking
</I>&gt;<i> credit, just repeating it. :)
</I>&gt;<i>
</I>&gt;<i> Give `Request.__init__` some new optional arguments to control the size of
</I>&gt;<i> the header.  This could be several arguments like `maxHeaderLines` and
</I>&gt;<i> `maxHeaderValueLength` and so on... Or perhaps it should just be one
</I>&gt;<i> argument that can completely describe the header size limitation (stretching
</I>&gt;<i> this idea further, perhaps the one argument is a callable that takes a
</I>&gt;<i> `Headers` instance and determines if it has gotten to big).
</I>&gt;<i>
</I>&gt;<i> Then, perhaps, also give `HTTPFactory.__init__` (and therefore
</I>&gt;<i> `Site.__init__` a `requestFactory` argument so that the request class can be
</I>&gt;<i> replaced more easily (although setting the `requestFactory` attribute after
</I>&gt;<i> creating an instance isn't *too* bad).
</I>
Why setting `requestFactory` attribute after instanciation isn't too bad?

Why not apply the same rule for setting attributes like maxHeaders and
maxHeader size
in Request itself?

&gt;<i> These two things combined make the usage pretty flexible while still being
</I>&gt;<i> pretty simple and without involving any more complicated &quot;configuration&quot;
</I>&gt;<i> system:
</I>&gt;<i>
</I>&gt;<i>    def requestFactory(*args, **kwargs):
</I>&gt;<i>        kwargs[&quot;headerSizeLimit&quot;] = HeaderSizeLimit(
</I>&gt;<i>            maxLines=23, maxTotalBytes=57, ...)
</I>&gt;<i>        return Site.requestFactory(*args, **kwargs)
</I>&gt;<i>
</I>&gt;<i>    site = Site(..., requestFactory=requestFactory)
</I>
The HeaderSizeLimit class looks like a Configuration class and I am
happy with it.

I will go and update the branches to include suggested changes.
Thank you all for the feedback!

&gt;<i> If anyone is really interested in building (or adopting) a more general
</I>&gt;<i> &quot;configuration&quot; system for Twisted then I suggest you start by looking up
</I>&gt;<i> some of Twisted's past attempts including the the &quot;Coil&quot; library Itamar
</I>&gt;<i> started (he'll have to provide a link, I've lost track of where it lives
</I>&gt;<i> now).
</I>
I am not really interested in building a big &quot;configuration&quot; system
for Twisted so don't worry
for the link.

Thanks!

-- 
Adi Roiban

</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028111.html">[Twisted-Python] Configuration options for twisted code
</A></li>
	<LI>Next message: <A HREF="028106.html">[Twisted-Python] treq // Agent and Content-Length
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28112">[ date ]</a>
              <a href="thread.html#28112">[ thread ]</a>
              <a href="subject.html#28112">[ subject ]</a>
              <a href="author.html#28112">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
