<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Freezing Ampoule or the Invasion of Infinite	Zombie Processes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Freezing%20Ampoule%20or%20the%20Invasion%20of%20Infinite%0A%09Zombie%20Processes&In-Reply-To=%3C210D1F26-F49E-4EF9-AD48-E4BFBD9274B6%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028127.html">
   <LINK REL="Next"  HREF="028133.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Freezing Ampoule or the Invasion of Infinite	Zombie Processes</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Freezing%20Ampoule%20or%20the%20Invasion%20of%20Infinite%0A%09Zombie%20Processes&In-Reply-To=%3C210D1F26-F49E-4EF9-AD48-E4BFBD9274B6%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Freezing Ampoule or the Invasion of Infinite	Zombie Processes">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon Mar 10 12:36:02 MDT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="028127.html">[Twisted-Python] Freezing Ampoule or the Invasion of Infinite Zombie Processes
</A></li>
        <LI>Next message: <A HREF="028133.html">[Twisted-Python] Freezing Ampoule or the Invasion of Infinite Zombie Processes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28130">[ date ]</a>
              <a href="thread.html#28130">[ thread ]</a>
              <a href="subject.html#28130">[ subject ]</a>
              <a href="author.html#28130">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Mar 9, 2014, at 12:31 AM, Burak Nehbit &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">burak at nehbit.net</A>&gt; wrote:
&gt;<i> I agree. Though it&#8217;s also very useful as an drop&#8211;in implementation of a Twisted spawnProcess for one single other process.
</I>&gt;<i> 
</I>spawnProcess is somewhat low-level.  It would be very nice indeed if Twisted had some sort of Service object you could easily use for spawning worker processes, along the lines of Ampoule, that would take care of all the platform-specific nonsense of setting up communication with subprocesses, spawning them, monitoring them, figuring out the right Python to spawn, the right environment variables to get sys.path correct, and other things, such as...

&gt;&gt;<i> It sounds like the basic process support included in Twisted, 
</I>&gt;&gt;<i> reactor.spawnProcess, could address your requirements. 
</I>&gt;<i> 
</I>&gt;<i> I have just found your answer here: 
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://stackoverflow.com/questions/6678763/simple-example-with-spawnprocess">https://stackoverflow.com/questions/6678763/simple-example-with-spawnprocess</A>
</I>&gt;<i> 
</I>&gt;<i> which seems useful. If nothing else works, I will try to reduce complexity by converting this to bare spawnProcess. 
</I>&gt;<i> 
</I>&gt;<i> Any ideas on what might be going wrong in my current stack? After all, processes being repeatedly created is just a symptom of something going wrong in the process very early, so ampoule tries to spawn another one. I am mainly looking to find a way to see the exception and where it happens. Twisted&#8217;s logging module seem to kick in too late. 
</I>&gt;<i> 
</I>Twisted's logging typically gets initialized after all modules are imported.  A tool like Ampoule really ought to set up logging as early as possible in its child, and handle the case where it's not getting set up on the parent side.

The important thing to do is to make sure you have an errReceived callback that actually prints or logs the stderr it receives; there's likely a traceback in there which you may have missed if the process is just crashing.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20140310/43c33bb3/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20140310/43c33bb3/attachment.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4124 bytes
Desc: not available
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20140310/43c33bb3/attachment.bin">http://twistedmatrix.com/pipermail/twisted-python/attachments/20140310/43c33bb3/attachment.bin</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028127.html">[Twisted-Python] Freezing Ampoule or the Invasion of Infinite Zombie Processes
</A></li>
	<LI>Next message: <A HREF="028133.html">[Twisted-Python] Freezing Ampoule or the Invasion of Infinite Zombie Processes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28130">[ date ]</a>
              <a href="thread.html#28130">[ thread ]</a>
              <a href="subject.html#28130">[ subject ]</a>
              <a href="author.html#28130">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
