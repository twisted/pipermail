<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] github, again
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20github%2C%20again&In-Reply-To=%3CCACqnu4WWScaJPrz%2Bf6T342y6YrEmjgTDktrqdR_30vQi0XL7yQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027036.html">
   <LINK REL="Next"  HREF="027026.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] github, again</H1>
    <B>Terry Jones</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20github%2C%20again&In-Reply-To=%3CCACqnu4WWScaJPrz%2Bf6T342y6YrEmjgTDktrqdR_30vQi0XL7yQ%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] github, again">terry at jon.es
       </A><BR>
    <I>Sat Jun  8 17:41:40 MDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027036.html">[Twisted-Python] github, again
</A></li>
        <LI>Next message: <A HREF="027026.html">[Twisted-Python] on contributions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27037">[ date ]</a>
              <a href="thread.html#27037">[ thread ]</a>
              <a href="subject.html#27037">[ subject ]</a>
              <a href="author.html#27037">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Tom

Here are some comments on your thoughts (again, I'm no expert or authority).

On Sat, Jun 8, 2013 at 5:07 PM, Tom Prince &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">tom.prince at ualberta.net</A>&gt; wrote:

&gt;<i> Although being able to comment on the diff inline is very convenient, my
</I>&gt;<i> experience is that this encourages looking at changes in a line-by-line
</I>&gt;<i> fashion,
</I>&gt;<i> rather than looking at the overall design.  find that having to compose the
</I>&gt;<i> entire review at once leads to a more thoughtful review. So, while it is
</I>&gt;<i> convenient, there is a cost to it as well.
</I>&gt;<i>
</I>
I agree with almost all of this, but not so much with the &quot;cost&quot; part. I
know there are many different kinds of tickets, but the majority (that I
see) fall into just a few categories that I have fairly well established
ways of working on (as a reviewer). 1. trivial fixes, which I tend to
review entirely in github. They usually have small/simple changes to
existing code and a small number of entirely new tests.  2. Addition of new
functionality that's not tirivial. These tend to involve mainly new code
and new tests, and again I'll usually do the whole review in github. 3.
More complicated changes that have required thought about the existing
code, its internal interactions, and its tests. I do superficial work on
these using github (commenting on style, suggesting alternate approaches to
local pieces of code, etc). Github makes this process hugely simpler and
faster. But in this case I also pull down the branch and git diff it
manually as well as going into files in the editor to consider changes more
carefully or to search for residual methods that may no longer be used or
method uses which are now no longer defined, etc. I put the result of this
reviewing into the Discussion tab in github.  In all cases I make sure to
pull the branch locally and run the tests (except when I'm SURE I don't
need to, which is when there is ALWAYS a test failure :-)).

I.e., (summarizing/repeating myself) most of the time I do reviewing in
github and it's a clear win (simple / in context / no need to refer to the
code line or cut &amp; paste, etc). But as you say some reviewing needs much
more care and thought, done with an editor, with grep, etc. The result of
that can go into the github discussion.


&gt;<i> While I understand the appeal of being able to merge with a single click
</I>&gt;<i> (and
</I>&gt;<i> wouldn't be opposed to a tool that does this), I'm not sure that github's
</I>&gt;<i> implementation is desirable.  I think there is value in composing
</I>&gt;<i> meaningful
</I>&gt;<i> commit messages, for commits to trunk. While github supports this, it
</I>&gt;<i> doesn't
</I>&gt;<i> encourage it. (I've been looking through buildbot's logs recently, and most
</I>&gt;<i> commits to master have the message &quot;Merge branch '&lt;branch-name&gt;' of
</I>&gt;<i> <A HREF="git://github.com/&lt;user">git://github.com/&lt;user</A>&gt;/buildbot&quot;.&quot; Certainly some of this is social, I
</I>&gt;<i> don't
</I>&gt;<i> think github provides any tools to help enforce this.
</I>&gt;<i>
</I>
Right, this has to be done by convention. I find it's helpful to write the
issue description with an eye towards the future merging and then to cut &amp;
paste the issue description into the merge message and edit it before
merging. If you're conscious of that workflow you can write an issue
description whose first paragraph can easily become the merge description.
We also put the names (you can use @name) of the reviewers into the merge
(on a separate line, like &quot;R: @name1 @name2&quot;) as well as the Fixes #NNNN
line.  Often the merge descriptions would be just one line, as it's easy to
be (or become) lazy.


&gt;<i> I'm not entirely sure how the hybrid workflow would make things easier. It
</I>&gt;<i> seems
</I>&gt;<i> like one would need to look at two places for comments rather than just
</I>&gt;<i> one;
</I>&gt;<i> even if all the comments on the code itself are on github, one will still
</I>&gt;<i> need
</I>&gt;<i> to look at the history of the ticket to see any discussion of the design or
</I>&gt;<i> other consideration.
</I>

Do you mean 2 places within the one pull request?  I.e., the Files Changed
and the Discussion tabs?  If so, then I understand. I got used to that
pretty quickly. You can find more substantive discussion in one place
(including reviewers giving +1 or saying they need more time or asking if a
pull request should be withdrawn etc) and code-specific comments in the
Files Changed section.   I find it very useful in the latter if the
original author makes sure they follow up on each suggestion in the Files
Changed section to say &quot;Done&quot; or &quot;Wont do this....&quot; etc.  This helps a
returning reviewer to see that requested changes have been made without
needing to look at the code again.


&gt;<i> Potentially more, if more than one person has worked on a
</I>&gt;<i> branch; unless everybody involved can push to the same repo, only a single
</I>&gt;<i> person can add commits to a specific pull request.
</I>

But anyone can comment / review.  And if you happen to have code you want
to add to the branch but you don't have the right to push into that branch
(which we do only rarely), you can just make your own branch, submit a pull
request into the branch you're reviewing, and mention that in the review.
(Unless the Twisted process has changed, I think adding code to a branch
would then rule you out as an ongoing reviewer.)


&gt;<i> For core developers, this
</I>&gt;<i> could just be the main repo, but for non-core developers (or when a core
</I>&gt;<i> developer takes over from an outside contributor), there will necessarily
</I>&gt;<i> be
</I>&gt;<i> multiple pull requests for a single change.
</I>&gt;<i>
</I>
I don't think this is the right way to do things.  It makes more sense that
there is one pull request. Those who can/want/dare can push into its
branch. Those who cant but want to suggest other code can suggest their
code is pulled into the branch in question.  Others can just put code into
their reviews - I do that often, just copy a chunk of Python, wrap it in
```python  .... ``` and make a few suggested edits.


&gt;<i> I wonder how much of the issue that github solves could be addressed by
</I>&gt;<i> other
</I>&gt;<i> means? Forcing a build is now two clicks from the ticket page, and diffs
</I>&gt;<i> one. I
</I>&gt;<i> just discovered <A HREF="https://github.com/Automattic/trac-code-comments-pluginwhich">https://github.com/Automattic/trac-code-comments-pluginwhich</A>
</I>&gt;<i> allows inline commenting. We could implement a tool to merge to trunk with
</I>&gt;<i> a
</I>&gt;<i> properly formated commit message from the web. There is, of course, the
</I>&gt;<i> question
</I>&gt;<i> of whether it worth the effort to implement this ourselves, when github
</I>&gt;<i> exists.
</I>&gt;<i>
</I>
I don't think it makes sense to try writing these things. Github is great
and it moves so quickly. It's not perfect and it does leave a lot of things
to coding team convention, but it's very good. In my (painful) experience,
it's rarely worth writing your own stuff in a situation like this and
missing out on all the other goodness that is rapidly making its way into
the mainstream heavily used and very actively developed tools.


&gt;<i> That consideration has to be tempered with the fact that github imposes
</I>&gt;<i> restrictions on our workflow that seem to run counter to the philosophy of
</I>&gt;<i> twisted development.
</I>

I'm not sure what these are.  But, I'm barely involved in Twisted
development, so it's likely just ignorance.

Thanks for the comments, mine are just my own small sample experiences and
are probably sub-optimal and/or under-informed etc.

Terry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20130609/1990005d/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20130609/1990005d/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027036.html">[Twisted-Python] github, again
</A></li>
	<LI>Next message: <A HREF="027026.html">[Twisted-Python] on contributions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27037">[ date ]</a>
              <a href="thread.html#27037">[ thread ]</a>
              <a href="subject.html#27037">[ subject ]</a>
              <a href="author.html#27037">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
