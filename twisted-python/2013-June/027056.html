<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] logging
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20logging&In-Reply-To=%3CCAPkRfUQym_zQgdiqffjWnm1Gxh0kRBPw%3DAUDcK21XuPCKaBsbg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027055.html">
   <LINK REL="Next"  HREF="027066.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] logging</H1>
    <B>Christopher Armstrong</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20logging&In-Reply-To=%3CCAPkRfUQym_zQgdiqffjWnm1Gxh0kRBPw%3DAUDcK21XuPCKaBsbg%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] logging">radix at twistedmatrix.com
       </A><BR>
    <I>Thu Jun 13 17:16:28 MDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027055.html">[Twisted-Python] logging
</A></li>
        <LI>Next message: <A HREF="027066.html">[Twisted-Python] logging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27056">[ date ]</a>
              <a href="thread.html#27056">[ thread ]</a>
              <a href="subject.html#27056">[ subject ]</a>
              <a href="author.html#27056">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Jun 13, 2013 at 5:14 PM, Glyph &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Hello everybody. Today I'd like to talk about everyone's favorite subsystem within Twisted: logging.
</I>&gt;<i>
</I>&gt;<i> There are a number of problems with Twisted's logging system.
</I>
Thanks for writing up this email. I'd like to help out with this effort.

&gt;<i> For a long time, there's been consensus among at least a few core Twisted developers that log messages ought to be specified in terms of a format message and several relevant keyword arguments, so that tools can extract the values of the keyword arguments without parsing ad-hoc messages or using regexes. In other words, like this:
</I>&gt;<i>
</I>&gt;<i> log.msg(format=&quot;Foo happened. Relevant information includes: &quot;
</I>&gt;<i>                 &quot;bar=%(bar)s baz=%(baz)s boz=%(boz)s&quot;,
</I>&gt;<i>                 bar=bar, baz=baz, boz=boz)
</I>
There's something that I want to.... not propose, but discuss, that
I've discovered through my writing of actual applications that do
actual log filtering.

Basically, the conclusion I've come to is that English isn't very
useful in logs. It's usually badly written, uninformative, and hard to
filter on. The main thing that I find really important is having what
I call an &quot;event name&quot;, which has the following properties:

1. human readable
2. computer readable
3. mandatory
4. unique across a codebase, and specific to the physical logging
statement that it's being passed to.

So, for example:

def frag_message_received(self, fragger, fragee, weapon):
    self.log(&quot;frag&quot;, fragger=fragger, fraggee=fragee, weapon=weapon)
    ...

Now, your smart log filterer can just filter by event=&quot;frag&quot; instead
of message=&quot;Frag for \w+ received with weapon \w+&quot; or whatever.

This is just how I've done things in practice, and it has worked very
well for fairly large projects, but there are improvements that I can
think of. For example, the event name should probably be based on a
hierarchy of composable logger objects (kinda like the one David Reid
wrote) so that it's easier to maintain uniqueness in a large codebase.

(Hey David, you should write an email about that logging class :)

--
Christopher Armstrong
<A HREF="http://radix.twistedmatrix.com/">http://radix.twistedmatrix.com/</A>
<A HREF="http://planet-if.com/">http://planet-if.com/</A>

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027055.html">[Twisted-Python] logging
</A></li>
	<LI>Next message: <A HREF="027066.html">[Twisted-Python] logging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27056">[ date ]</a>
              <a href="thread.html#27056">[ thread ]</a>
              <a href="subject.html#27056">[ subject ]</a>
              <a href="author.html#27056">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
