<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] logging
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20logging&In-Reply-To=%3CCE6E33D3-ACF9-43D7-B234-6AFBAFBE0FE6%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027056.html">
   <LINK REL="Next"  HREF="027070.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] logging</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20logging&In-Reply-To=%3CCE6E33D3-ACF9-43D7-B234-6AFBAFBE0FE6%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] logging">glyph at twistedmatrix.com
       </A><BR>
    <I>Fri Jun 14 16:43:10 MDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027056.html">[Twisted-Python] logging
</A></li>
        <LI>Next message: <A HREF="027070.html">[Twisted-Python] logging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27066">[ date ]</a>
              <a href="thread.html#27066">[ thread ]</a>
              <a href="subject.html#27066">[ subject ]</a>
              <a href="author.html#27066">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jun 13, 2013, at 4:16 PM, Christopher Armstrong &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">radix at twistedmatrix.com</A>&gt; wrote:

&gt;<i> On Thu, Jun 13, 2013 at 5:14 PM, Glyph &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Hello everybody. Today I'd like to talk about everyone's favorite subsystem within Twisted: logging.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> There are a number of problems with Twisted's logging system.
</I>&gt;<i> 
</I>&gt;<i> Thanks for writing up this email. I'd like to help out with this effort.
</I>&gt;<i> 
</I>&gt;&gt;<i> For a long time, there's been consensus among at least a few core Twisted developers that log messages ought to be specified in terms of a format message and several relevant keyword arguments, so that tools can extract the values of the keyword arguments without parsing ad-hoc messages or using regexes. In other words, like this:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> log.msg(format=&quot;Foo happened. Relevant information includes: &quot;
</I>&gt;&gt;<i>                &quot;bar=%(bar)s baz=%(baz)s boz=%(boz)s&quot;,
</I>&gt;&gt;<i>                bar=bar, baz=baz, boz=boz)
</I>

&gt;<i> Basically, the conclusion I've come to is that English isn't very
</I>&gt;<i> useful in logs. It's usually badly written, uninformative, and hard to
</I>&gt;<i> filter on. The main thing that I find really important is having what
</I>&gt;<i> I call an &quot;event name&quot;, which has the following properties:
</I>
So, I confess that one of my long-term goals here is to de-emphasize the english-language log file and eventually get Twisted using a structured log file as standard.  However, to just do that immediately would probably break everybody's workflow.

&gt;<i> 1. human readable
</I>&gt;<i> 2. computer readable
</I>&gt;<i> 3. mandatory
</I>&gt;<i> 4. unique across a codebase, and specific to the physical logging statement that it's being passed to.
</I>
I agree with some of these properties and disagree with others, but you didn't really say *why* these properties are useful.  So let me see if I can explain the properties I think are good, starting with the use-case rather than the other way 'round:

There are several activities that one performs with logging:

while one's writing the code, inserting a log message
while one's administering a system, reading the history of all logged messages
while one's monitoring a system, selecting criteria for future relevant log messages to alert on
while one's debugging a system, selecting criteria for past relevant log messages to display
while one's documenting a system, explaining what various log messages mean and how they may be used for the other use-cases

English (by which I mean &quot;localizable human-readable text&quot;) is useful for use-cases 1. and 2.  When you're writing the log message, selecting a unique identifier is tedious; you just want to type in what happened and move on.  When you're reading the messages, it's easier to puzzle out some english text than to go to the documentation for each and every message.

Globally unique identifiers are useful for use-cases 3 and 4.  Filtering messages by random snippets of English text is tedious, error-prone and fragile.  (It doesn't help if a message is unique &quot;across a codebase&quot; if that codebase is a library and it conflicts with another library that an application uses.)

Stable identifiers are particularly useful for use-cases 3 and 5.  While human-readability is useful for all cases, that generally conflicts with the long-term stability of an identifier.  If you write a monitoring system that looks at log messages.

I think that we can satisfy all of these requirements by expanding the notion of an &quot;identifier&quot; a bit.

In the interests of not spending ten hours working on each message to this list, I'll leave this one on a cliffhanger, so you can eagerly await the next episode!

&gt;<i> So, for example:
</I>&gt;<i> 
</I>&gt;<i> def frag_message_received(self, fragger, fragee, weapon):
</I>&gt;<i>    self.log(&quot;frag&quot;, fragger=fragger, fraggee=fragee, weapon=weapon)
</I>&gt;<i>    ...
</I>&gt;<i> 
</I>&gt;<i> Now, your smart log filterer can just filter by event=&quot;frag&quot; instead
</I>&gt;<i> of message=&quot;Frag for \w+ received with weapon \w+&quot; or whatever.
</I>&gt;<i> 
</I>&gt;<i> This is just how I've done things in practice, and it has worked very
</I>&gt;<i> well for fairly large projects, but there are improvements that I can
</I>&gt;<i> think of. For example, the event name should probably be based on a
</I>&gt;<i> hierarchy of composable logger objects (kinda like the one David Reid
</I>&gt;<i> wrote) so that it's easier to maintain uniqueness in a large codebase.
</I>&gt;<i> 
</I>&gt;<i> (Hey David, you should write an email about that logging class :)
</I>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20130614/178398b6/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20130614/178398b6/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027056.html">[Twisted-Python] logging
</A></li>
	<LI>Next message: <A HREF="027070.html">[Twisted-Python] logging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27066">[ date ]</a>
              <a href="thread.html#27066">[ thread ]</a>
              <a href="subject.html#27066">[ subject ]</a>
              <a href="author.html#27066">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
