<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] reload / restart best practices ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20reload%20/%20restart%20best%20practices%20%3F&In-Reply-To=%3C7089AB26-9DBC-482F-8187-21F3DB898188%402xlp.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027049.html">
   <LINK REL="Next"  HREF="027052.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] reload / restart best practices ?</H1>
    <B>Jonathan Vanasco</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20reload%20/%20restart%20best%20practices%20%3F&In-Reply-To=%3C7089AB26-9DBC-482F-8187-21F3DB898188%402xlp.com%3E"
       TITLE="[Twisted-Python] reload / restart best practices ?">twisted-python at 2xlp.com
       </A><BR>
    <I>Wed Jun 12 14:40:08 MDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027049.html">[Twisted-Python] reload / restart best practices ?
</A></li>
        <LI>Next message: <A HREF="027052.html">[Twisted-Python] reload / restart best practices ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27050">[ date ]</a>
              <a href="thread.html#27050">[ thread ]</a>
              <a href="subject.html#27050">[ subject ]</a>
              <a href="author.html#27050">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jun 12, 2013, at 4:31 PM, Glyph wrote:

&gt;<i> I'm not sure what &quot;autoload&quot; is.  I am assuming it's some kind of auto-re-loading technology though.
</I>
The earlier discussions talked about Django's autoload, which reloads the entire process on a config file change.

&gt;<i> You do want to re-start your process.  What you're diagnosing is some weird, unknown thread/process interaction and unless you get a clean slate, you don't know what is happening.
</I>&gt;<i> 
</I>&gt;<i> You may not want to do so immediately, though, since, as you say:
</I>
Correct on both accounts.  I don't want to kill the current process while it's talking to an API.  I just want it to not talk to any additional APIs, then kill the process a bit later.

&gt;&gt;<i> I'd like them to finish , and shutdown/restart N seconds later ( assuming that I wouldn't be able to fully shutdown because of an issue with a locked thread ).  
</I>&gt;<i> 
</I>&gt;<i> The issue is with letting them finish.  In order to accomplish this, you should write IService implementations that have stopService methods that, when called, will wait for any operations in flight associated with that service.
</I>&gt;<i> 
</I>&gt;<i> Once everything is quiesced, you can re-exec ([sys.executable] + sys.argv) and that ought to result in the same process starting up again.  If you've done the appropriate thing and made all your stopService methods wait for their operations to complete, then waiting for them all to complete is just putting them all into a MultiService, calling stopService() on that MultiService, and adding a callback/errback to the Deferred it returns which calls os.exec.
</I>
ok great !  I'll look into StopService and IService tomorrow !

thanks a ton.  that's pretty much what i want/need.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20130612/fd6656c6/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20130612/fd6656c6/attachment.html</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027049.html">[Twisted-Python] reload / restart best practices ?
</A></li>
	<LI>Next message: <A HREF="027052.html">[Twisted-Python] reload / restart best practices ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27050">[ date ]</a>
              <a href="thread.html#27050">[ thread ]</a>
              <a href="subject.html#27050">[ subject ]</a>
              <a href="author.html#27050">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
