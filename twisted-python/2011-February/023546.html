<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] sigchld
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20sigchld&In-Reply-To=%3CAANLkTikJ-NpJeQQf7SYwLYerSMkN3K7y1rcX%2Ba-1vpF3%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="056039.html">
   <LINK REL="Next"  HREF="056035.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] sigchld</H1>
    <B>Jason Rennie</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20sigchld&In-Reply-To=%3CAANLkTikJ-NpJeQQf7SYwLYerSMkN3K7y1rcX%2Ba-1vpF3%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] sigchld">jrennie at gmail.com
       </A><BR>
    <I>Fri Feb 11 07:27:38 MST 2011</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="056039.html">[Twisted-Python] twisted site should link to tx site ...
</A></li>
        <LI>Next message (by thread): <A HREF="056035.html">[Twisted-Python] sigchld
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23546">[ date ]</a>
              <a href="thread.html#23546">[ thread ]</a>
              <a href="subject.html#23546">[ subject ]</a>
              <a href="author.html#23546">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm in the process of porting code from Twisted 8.1 to 10.1 which needed
some custom signal handling code.  Twisted 8.1's approach to signal handling
was (as far as we could tell) too monolithic, so we chose
&quot;installSignalHandlers=False&quot; and wrote our own signal handling code,
installing reactor._handleSigchld so that spawnProcess would work.  Of
course, we have to change this now since #733 was fixed (
<A HREF="http://twistedmatrix.com/trac/ticket/733">http://twistedmatrix.com/trac/ticket/733</A>).

IIUC, (and please correct if I don't) the SIGCHLD handler installation is
performed by twisted.internet.posixbase.PosixReactorBase._handleSignals (the
&quot;if platformType == 'posix':&quot; block).  So, one option would be to run that
code while still using &quot;installSignalHandlers=False&quot;.

I'm wondering if there's a better way.  What if I were to let Twisted
install signal handlers, but run my own signal handling code after the
reactor starts (using callLater(0,...)) that installs &quot;super&quot; handlers which
calls the Twisted handler along with any other handlers I want to run.  I'd
use signal.getsignal to get a reference to the Twisted handler(s).  Might
this work?  Or, is there an obvious flaw?  In particular, can I get the
SIGCHLD handler using signal.getsignal, then call it via my &quot;super&quot; handler?
 I don't need to do any special handling of SIGCHLD, so I could just leave
that signal handler alone.

All thoughts appreciated.

Thanks,

Jason

-- 
Jason Rennie
Research Scientist, ITA Software
617-714-2645
<A HREF="http://www.itasoftware.com/">http://www.itasoftware.com/</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20110211/9259cc18/attachment-0001.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20110211/9259cc18/attachment-0001.htm</A> 
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="056039.html">[Twisted-Python] twisted site should link to tx site ...
</A></li>
	<LI>Next message (by thread): <A HREF="056035.html">[Twisted-Python] sigchld
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23546">[ date ]</a>
              <a href="thread.html#23546">[ thread ]</a>
              <a href="subject.html#23546">[ subject ]</a>
              <a href="author.html#23546">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
