<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] High-level view of Twisted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20High-level%20view%20of%20Twisted&In-Reply-To=AANLkTik-7mR%3D5XRoKUM0YuRWQgpHLhXGj4TNiboAR%2Bv4%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023459.html">
   <LINK REL="Next"  HREF="023461.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] High-level view of Twisted</H1>
    <B>Kevin Horn</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20High-level%20view%20of%20Twisted&In-Reply-To=AANLkTik-7mR%3D5XRoKUM0YuRWQgpHLhXGj4TNiboAR%2Bv4%40mail.gmail.com"
       TITLE="[Twisted-Python] High-level view of Twisted">kevin.horn at gmail.com
       </A><BR>
    <I>Tue Feb  1 00:58:14 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="023459.html">[Twisted-Python] High-level view of Twisted
</A></li>
        <LI>Next message: <A HREF="023461.html">[Twisted-Python] High-level view of Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23460">[ date ]</a>
              <a href="thread.html#23460">[ thread ]</a>
              <a href="subject.html#23460">[ subject ]</a>
              <a href="author.html#23460">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Jan 31, 2011 at 10:58 PM, Jason Heeris &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jason.heeris at gmail.com</A>&gt;wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I'd like to come to grips with Twisted, and so far I've been following
</I>&gt;<i> and tweaking example after example. But I'm finding it incredibly hard
</I>&gt;<i> to get a high level view of the Twisted &quot;landscape&quot; &#8212; and because I
</I>&gt;<i> don't know what I don't know, it's hard to know what questions to even
</I>&gt;<i> ask. I want to get to the point where I can just sit down and know
</I>&gt;<i> where to start, and hopefully someone here can give me a bit of
</I>&gt;<i> direction.
</I>&gt;<i>
</I>&gt;<i> I understand many of the microscopic components. Deferred results,
</I>&gt;<i> file descriptors and sockets, the reactor loop concept &#8212; I get those.
</I>&gt;<i> I've read the tutorial[1], another Twisted Introduction[2], and about
</I>&gt;<i> 50% of the API documentation (possibly not the right 50%, though).
</I>&gt;<i>
</I>&gt;<i> But I just can't seem to wrap my head around the interfaces, factories
</I>&gt;<i> and wiring it all together. Maybe some examples of the speedbumps I
</I>&gt;<i> keep encountering will help:
</I>&gt;<i>
</I>&gt;<i> 1. The &quot;finger&quot; intro &quot;Drop Connections&quot; example[3] just straight out
</I>&gt;<i> uses the self.transport member of a protocol. But how do I, a Twisted
</I>&gt;<i> newbie, know that this even exists? After hours of digging around, I
</I>&gt;<i> find it in the docs for a BaseProtocol method[4]. Later on, this same
</I>&gt;<i> example uses the &quot;self.factory&quot; member. I still haven't found that
</I>&gt;<i> one. Where do I look up these assumed-to-exist members? How do I know
</I>&gt;<i> what other members exist?
</I>&gt;<i>
</I>
Protocol objects typically (always) have a self.factory method, but you
won't
find it in the docs for a protocol.  The factory has a method called
buildProtocol
(
<A HREF="http://twistedmatrix.com/documents/10.2.0/api/twisted.internet.protocol.Factory.html#buildProtocol">http://twistedmatrix.com/documents/10.2.0/api/twisted.internet.protocol.Factory.html#buildProtocol</A>
)
which creates Protocol instances and sets the p.factory member to itself.

So it does something like (in the Factory, so self is the Factory instance):
p = self.protocol
p.factory = self
return p

It's a pretty screwy API and is not particularly well documented anywhere.

2. What is a Factory, anyway? What are they *for*?
&gt;<i>
</I>
As Andrew said (or quoted) a Factory is an object which creates Protocol
instances when a connection is made. Sometimes that's all there is to it,
but they are often used to store state across connections.  For example,
if you want to know how many connections your IMAP (or whatever) server
currently has open, putting a counter in the Factory which was incremented
each time a connection starts (it creates a protocol) and decremented each
time a connection closes would make sense.

3. The finger example goes over writing a server &#8212; what about an
&gt;<i> asynchronous client that must follow a particular protocol? Where do I
</I>&gt;<i> start with that? Is there an example?
</I>&gt;<i>
</I>&gt;<i>
</I>You already found this one. :)


&gt;<i> 4. What if I'm not interested in networking? I primarily deal with
</I>&gt;<i> serial lines, files and subprocesses... are there examples for those?
</I>&gt;<i>
</I>&gt;<i>
</I>Not many, I don't think.  I'm pretty sure there's a serial port example,
though...

(rummage, rummage)

here it is!  check out the mouse.py and gpsfix.py examples under
/doc/core/examples (
<A HREF="http://twistedmatrix.com/trac/browser/trunk/doc/core/examples">http://twistedmatrix.com/trac/browser/trunk/doc/core/examples</A>)


&gt;<i> Points #3 and #4 are my motivation for using Twisted &#8212; I am currently
</I>&gt;<i> mired in a pygtk program that uses threads and all sorts of locks and
</I>&gt;<i> synchronisation mechanisms to send and receive data over a serial
</I>&gt;<i> line, updating UI with progress, errors and success. I'd like to see
</I>&gt;<i> if using Twisted simplifies things a bit, and I'll ask a more specific
</I>&gt;<i> question about how to structure that when I can condense it to a
</I>&gt;<i> reasonable level :)
</I>&gt;<i>
</I>&gt;<i> I hope I'm not being too vague, but Twisted is rather large,
</I>&gt;<i> conceptually, to absorb. I keep being pointed to the documentation for
</I>&gt;<i> specific parts, but I have no idea how they fit together and that's
</I>&gt;<i> what I'm really after.
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Jason
</I>&gt;<i>
</I>&gt;<i> [1]
</I>&gt;<i> <A HREF="http://twistedmatrix.com/documents/current/core/howto/tutorial/index.html">http://twistedmatrix.com/documents/current/core/howto/tutorial/index.html</A>
</I>&gt;<i> [2] <A HREF="http://krondo.com/?page_id=1327">http://krondo.com/?page_id=1327</A>
</I>&gt;<i> [3]
</I>&gt;<i> <A HREF="http://twistedmatrix.com/documents/current/core/howto/tutorial/intro.html#auto4">http://twistedmatrix.com/documents/current/core/howto/tutorial/intro.html#auto4</A>
</I>&gt;<i> [4]
</I>&gt;<i> <A HREF="http://twistedmatrix.com/documents/current/api/twisted.internet.protocol.BaseProtocol.html#makeConnection">http://twistedmatrix.com/documents/current/api/twisted.internet.protocol.BaseProtocol.html#makeConnection</A>
</I>&gt;<i>
</I>&gt;<i>
</I>A couple of us are getting fired up about cleaning up the documentation to
make it easier for those new to Twisted to find what they're looking for, so
please do speak up with any feedback you have.

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20110131/8b927413/attachment-0001.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20110131/8b927413/attachment-0001.htm</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023459.html">[Twisted-Python] High-level view of Twisted
</A></li>
	<LI>Next message: <A HREF="023461.html">[Twisted-Python] High-level view of Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23460">[ date ]</a>
              <a href="thread.html#23460">[ thread ]</a>
              <a href="subject.html#23460">[ subject ]</a>
              <a href="author.html#23460">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
