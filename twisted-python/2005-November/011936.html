<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: Newbie - guidance required please
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20Newbie%20-%20guidance%20required%20please&In-Reply-To=VPOP32.2.0a.20051107174614.046.1.1.a40c1f81%40chagford.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011932.html">
   <LINK REL="Next"  HREF="011942.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: Newbie - guidance required please</H1>
    <B>Nicola Larosa</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20Newbie%20-%20guidance%20required%20please&In-Reply-To=VPOP32.2.0a.20051107174614.046.1.1.a40c1f81%40chagford.com"
       TITLE="[Twisted-Python] Re: Newbie - guidance required please">nico at tekNico.net
       </A><BR>
    <I>Mon Nov  7 15:01:10 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011932.html">[Twisted-Python] Newbie - guidance required please
</A></li>
        <LI>Next message: <A HREF="011942.html">[Twisted-Python] Re: Newbie - guidance required please
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11936">[ date ]</a>
              <a href="thread.html#11936">[ thread ]</a>
              <a href="subject.html#11936">[ subject ]</a>
              <a href="author.html#11936">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> I am developing a multi-user accounting/business system. I use a database
</I>&gt;<i> for the back end - PostgreSQL/psycopg on Linux, MS SQL Server/pywin32.odbc
</I>&gt;<i> on MSW.
</I>
FWIW, PostgreSQL 8.0 runs on MS Windows too.


&gt;<i> The solution that I have in mind is to move all of my authentication and
</I>&gt;<i> business logic to a server program, which will be the only program that
</I>&gt;<i> makes a connection to the database. Each client will connect to my server
</I>&gt;<i> program, and I will have to devise some message formats for the passing of
</I>&gt;<i> information between the client and the server.
</I>
You may also convert your program to a web interface, and use a standard
web browser as client, connected to the server via the HTTP[S] protocol.


&gt;<i> Should I worry about the
</I>&gt;<i> number of active objects, or is it safe to assume that virtual memory will
</I>&gt;<i> handle it, on the assumption that most of them will be idle most of the
</I>&gt;<i> time?
</I>
Virtual memory surely helps. A server will comfortably handle thousands of
objects: if and when you'll have problems, only then you'll explore ways to
minimize their number and size, no use worrying now.


&gt;<i> As I understand it, I will use Twisted in the following roles -
</I>&gt;<i> 
</I>&gt;<i> 1. in my server program, as an interface to DB-API for all database access.
</I>&gt;<i> 2. in my server program, to handle requests from and pass information to
</I>&gt;<i> clients.
</I>&gt;<i> 3. in my client program, to connect with and interact with my server
</I>&gt;<i> program.
</I>
Unless you go the web interface route, of course, which by the way has the
added benefit of sidestepping client maintenance issues.


&gt;<i> 1. Once a client has established a connection with the server, I would
</I>&gt;<i> prefer to keep the connection open until they log out, which could be
</I>&gt;<i> several hours later. Is this an acceptable way of doing it, or should I keep
</I>&gt;<i> the number of open connections down to a minimum, closing and reopening as
</I>&gt;<i> required?
</I>
You have a thousand sockets available per process, use them judiciously. :-)


&gt;<i> 2. For authentication, the user enters a userid and password. The userid is
</I>&gt;<i> looked up in a database table. One of the columns contains the hashed (sha)
</I>&gt;<i> password. If the userid does not exist or the hashed password does not
</I>&gt;<i> match, I do not allow the user to proceed.
</I>&gt;<i> 
</I>&gt;<i> I looked at cred.py, but it seems more complicated to use this than stick to
</I>&gt;<i> my own method. Is this a valid observation?
</I>
You have to grasp a few concepts, and then you have a general, reusable
piece fo infrastructure.

This is often true of Twisted: you first have to make an effort
understanding stuff, but then, after it &quot;clicks&quot;, you feel turbocharged. :-)


&gt;<i> A related question. With my present system, the authentication happens on
</I>&gt;<i> the client, so I do not have to send the password over the network. With the
</I>&gt;<i> new method, I will have to send it to the server. Should I be looking at
</I>&gt;<i> using SSL for protection against sniffing, or is there an easier way?
</I>
No, there isn't. You need to encrypt communication, if you want to protect
it. Of course, security involves more than just protecting communication.


&gt;<i> 3. Whether or not I use cred, it looks as if I should be using Perspective
</I>&gt;<i> Broker (PB). I would normally have been thinking in terms of defining
</I>&gt;<i> message formats for exchanging data between server and client, so the
</I>&gt;<i> concept of defining objects that make calls on each other feels a bit
</I>&gt;<i> strange. If I maintain the full state of the connection on the server side,
</I>&gt;<i> I do not want to duplicate this on the client side, so I assume I must
</I>&gt;<i> define some form of stripped down object to represent the client state, and
</I>&gt;<i> use this to exchange information. Are there any simple examples I can look
</I>&gt;<i> at to explain this concept in more detail?
</I>
You make a remote call, pass the data you want to transmit as parameters,
get data back as returned values (through Deferreds, of course). What could
be simpler than that? :-)


&gt;<i> I feel I am at a crossroads. Either I can cobble something together that
</I>&gt;<i> works, but does not fit in with the Twisted philosophy, and will therefore
</I>&gt;<i> limit me as my application grows. Or I can get my mind more in tune with
</I>&gt;<i> Twisted, and set up structures that will work with me as things evolve.
</I>
We've all been there. Twisted seems daunting at first, and it's not clear
whether it will be worth the effort.

The winning point, for me, more than the impressive amount of built-in
network infrastructure, was its asynchronous, event-driven concurrency
model. Once you read this:

Generalization of Deferred Execution in Python
<A HREF="http://www.python.org/pycon/papers/deferex/">http://www.python.org/pycon/papers/deferex/</A>

you stop and think: &quot;How could have I been relying on *threads* all this
time?!?&quot;

(The signature is quite on-topic here. :-) )


&gt;<i> If you have read this far, thanks for your perseverance. Any pointers or
</I>&gt;<i> suggestions will be much appreciated.
</I>
After you've finished the above paper, study this:

Asynchronous Programming with Twisted
<A HREF="http://twistedmatrix.com/projects/core/documentation/howto/async.html">http://twistedmatrix.com/projects/core/documentation/howto/async.html</A>

and the linked docs at the end. You're not going anywhere with Twisted
until Deferreds are firmly under your belt.

Other important things are interfaces and adapters:

Components: Interfaces and Adapters
<A HREF="http://twistedmatrix.com/projects/core/documentation/howto/components.html">http://twistedmatrix.com/projects/core/documentation/howto/components.html</A>

More details here:

<A HREF="http://svn.zope.org/*checkout*/Zope3/trunk/src/zope/interface/README.txt">http://svn.zope.org/*checkout*/Zope3/trunk/src/zope/interface/README.txt</A>

Of course, Python and Twisted are just layers in the stack. Above them
there are Nevow, and Axiom, and Mantissa, and... :-)

Good luck in your endeavors, you're fiddling with some powerful tools here!
 ;-)

-- 
Nicola Larosa - <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">nico at tekNico.net</A>

No inventions have really significantly eased the cognitive difficulty
of writing scalable concurrent applications and it is unlikely that any
will in the near term. [...] Most of all, threads do not help, in fact,
they make the problem worse in many cases. -- G. Lefkowitz, August 2005



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011932.html">[Twisted-Python] Newbie - guidance required please
</A></li>
	<LI>Next message: <A HREF="011942.html">[Twisted-Python] Re: Newbie - guidance required please
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11936">[ date ]</a>
              <a href="thread.html#11936">[ thread ]</a>
              <a href="subject.html#11936">[ subject ]</a>
              <a href="author.html#11936">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
