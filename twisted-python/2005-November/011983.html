<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: [Twisted-commits] r15100 - So I really do	want this stuff
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20%5BTwisted-commits%5D%20r15100%20-%20So%20I%20really%20do%0A%09want%20this%20stuff&In-Reply-To=d06a5cd30511121848n5f8ae4bas%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011982.html">
   <LINK REL="Next"  HREF="011981.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: [Twisted-commits] r15100 - So I really do	want this stuff</H1>
    <B>James Y Knight</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20%5BTwisted-commits%5D%20r15100%20-%20So%20I%20really%20do%0A%09want%20this%20stuff&In-Reply-To=d06a5cd30511121848n5f8ae4bas%40mail.gmail.com"
       TITLE="[Twisted-Python] Re: [Twisted-commits] r15100 - So I really do	want this stuff">foom at fuhm.net
       </A><BR>
    <I>Sun Nov 13 00:22:20 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011982.html">[Twisted-Python] Re: [Twisted-commits] r15100 - So I really do	want this stuff
</A></li>
        <LI>Next message: <A HREF="011981.html">[Twisted-Python] Re: [Twisted-commits] r15100 - So I really do	want this stuff
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11983">[ date ]</a>
              <a href="thread.html#11983">[ thread ]</a>
              <a href="subject.html#11983">[ subject ]</a>
              <a href="author.html#11983">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Nov 12, 2005, at 9:48 PM, Jonathan Lange wrote:
&gt;<i> Also, I should point out that implementing setUpClass using resources
</I>&gt;<i> will (probably -- I haven't benchmarked) make tests run faster.
</I>&gt;<i>
</I>&gt;<i> Say you have a base:
</I>&gt;<i> [snipped]
</I>
How about let's say I have a base:
class DBTestConnector:
     def setUpClass(self):
         if not self.can_connect():
             raise unittest.SkipTest, '%s: Cannot access db' %  
self.TEST_PREFIX

     def can_connect(self):
         raise NotImplementedError()

class SQLiteConnector(DBTestConnector):
     def can_connect(self):
         try: import sqlite
         except: return False
         return True
     def testPool(self):
         [...]

class PyPgSQLADBAPITestCase(DBTestConnector):
   [similar...]

Then, with resources, the run order will be:
   DBTestConnector.setUpClass. DEATH.

As opposed to
   SQLiteConnector.setUpClass
   SQLiteConnector. testPool
   PyPgSQLADBAPITestCase.setUpClass
   PyPgSQLADBAPITestCase. testPool

 From looking at twisted code, setUpClass is hardly ever shared via  
inheritance, and in the few places it is, none of them will be helped:
1) OldCredTestCase - calls warnings.filterWarnings, fast, also should  
be using suppress
2) SignalMixin, shouldn't exist
3) TLSTestCase, calls log.ignoreErrors, fast
4) DBTestConnector, uses attributes of derived classes, will break
5) CFTPClientTestBase, might actually be useful to only call once,  
except that all subclasses override setUpClass anyways.

James


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011982.html">[Twisted-Python] Re: [Twisted-commits] r15100 - So I really do	want this stuff
</A></li>
	<LI>Next message: <A HREF="011981.html">[Twisted-Python] Re: [Twisted-commits] r15100 - So I really do	want this stuff
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11983">[ date ]</a>
              <a href="thread.html#11983">[ thread ]</a>
              <a href="subject.html#11983">[ subject ]</a>
              <a href="author.html#11983">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
