<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Newbie - how to modify my db-intensive app to	use Twisted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Newbie%20-%20how%20to%20modify%20my%20db-intensive%20app%20to%0A%09use%20Twisted&In-Reply-To=20051120095402.8522E3F434C%40fcserver.chagford.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012012.html">
   <LINK REL="Next"  HREF="012014.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Newbie - how to modify my db-intensive app to	use Twisted</H1>
    <B>Marcin Kasperski</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Newbie%20-%20how%20to%20modify%20my%20db-intensive%20app%20to%0A%09use%20Twisted&In-Reply-To=20051120095402.8522E3F434C%40fcserver.chagford.com"
       TITLE="[Twisted-Python] Newbie - how to modify my db-intensive app to	use Twisted">Marcin.Kasperski at softax.com.pl
       </A><BR>
    <I>Sun Nov 20 06:44:40 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="012012.html">[Twisted-Python] Newbie - how to modify my db-intensive app to use	Twisted
</A></li>
        <LI>Next message: <A HREF="012014.html">[Twisted-Python] Newbie - how to modify my db-intensive app to	use Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12013">[ date ]</a>
              <a href="thread.html#12013">[ thread ]</a>
              <a href="subject.html#12013">[ subject ]</a>
              <a href="author.html#12013">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Moving this concept onto Twisted does not seem to work, as it can be running
</I>&gt;<i> sessions for multiple users, and each 'block' will block the main loop,
</I>&gt;<i> resulting in a major performance hit. The correct solution, as I understand
</I>&gt;<i> it, is to change each SQL command to a deferred with a callback. I can do
</I>&gt;<i> this on the inner layers, where the actual SQL command is executed. But I
</I>&gt;<i> would also have to do it on each outer layer that calls a function which
</I>&gt;<i> 'may' trigger a SQL command. There are many of these, and it goes to the
</I>&gt;<i> heart of my approach of hiding the underlying database complexity from the
</I>&gt;<i> application layer. Changing this feels like a daunting task, and frankly I
</I>&gt;<i> would not know where to start.
</I>
Not quite sure what exactly your code does, but what about taking a look
at twisted.enterprise.adbapi (and especially runInteraction)? Maybe
executing your code within runInteraction could be quick solution (in
fact the code will run in separate thread silently created by twisted
for you) - and then you could try to optimize things one by one.... 




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012012.html">[Twisted-Python] Newbie - how to modify my db-intensive app to use	Twisted
</A></li>
	<LI>Next message: <A HREF="012014.html">[Twisted-Python] Newbie - how to modify my db-intensive app to	use Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12013">[ date ]</a>
              <a href="thread.html#12013">[ thread ]</a>
              <a href="subject.html#12013">[ subject ]</a>
              <a href="author.html#12013">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
