<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Question  : How to web test txjsonrpc ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Question%20%20%3A%20How%20to%20web%20test%20txjsonrpc%20%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025095.html">
   <LINK REL="Next"  HREF="025097.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Question  : How to web test txjsonrpc ?</H1>
    <B>bino oetomo</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Question%20%20%3A%20How%20to%20web%20test%20txjsonrpc%20%3F&In-Reply-To="
       TITLE="[Twisted-Python] Question  : How to web test txjsonrpc ?">bino at indoakses-online.com
       </A><BR>
    <I>Thu Jan 12 23:13:45 EST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="025095.html">[Twisted-Python] telnet works,	why wont this client/protocol test?
</A></li>
        <LI>Next message: <A HREF="025097.html">[Twisted-Python] txjsonrpc.web2 ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25096">[ date ]</a>
              <a href="thread.html#25096">[ thread ]</a>
              <a href="subject.html#25096">[ subject ]</a>
              <a href="author.html#25096">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear All ...

I have a basic txjsonrpc script, like :
---------------
from twisted.application import internet, service
from txjsonrpc.web import jsonrpc
from twisted.web import server

from twisted.internet import reactor

import traceback


class MyRPC(jsonrpc.JSONRPC):
     def __init__(self):
         self.allowNone = True
         self.useDateTime = False

         #variabel untuk menampung koneksi xmppclient
         #perlu disiapkan terlebih dahulu
     def jsonrpc_aksi(self, msg):
         print 'JSON MSG',
         print msg
         print '------'
         print msg['myvar']
         print '\n'
         return 'OK'

#Create Application
application = service.Application(&quot;Serial MultiService Example&quot;)


#build jsonrpc site
myrpc = MyRPC()
site = server.Site(myrpc)
myrpcservice = internet.TCPServer(50008, site, interface='localhost')

#Creating Multi Service
multiService = service.MultiService()
#Add our Services to multiservice
myrpcservice.setServiceParent(multiService)
#Set created application to be serviceparent of multiservice
multiService.setServiceParent(application)
---------------

Those script is work fine ...I mean can be accessed via python based 
jsonrpc client.

But now i need to call this rpc server via web interface.
Since I don't have enough knowledge on web-based JSONRPC client , i do 
search google for it ... but I can't understand.
So I ask my friend to write some simple JSONRPC client , and he send me 
this litle html
---------------

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;script  type=&quot;text/javascript&quot;src=&quot;<A HREF="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js">http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js</A>  &lt;view-source:<A HREF="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js">http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js</A>&gt;&quot;&gt;&lt;/script&gt;
	&lt;script  type=&quot;text/javascript&quot;&gt;
		$(document).ready(function(){
				 $('#getData').live('click', function(){
						$jsonArray ='{&quot;action&quot; : &quot;aksi&quot;,&quot;myval1&quot; : &quot;val1&quot;, &quot;myval2&quot; :{&quot;myval2a&quot;:&quot;val2a&quot;,&quot;myval2b&quot;:&quot;val2b&quot;}}';
						$arr = JSON.stringify($jsonArray);
						$.get(&quot;<A HREF="http://127.0.0.1:50008/JSONRPC&quot;,{data:$arr},function(response">http://127.0.0.1:50008/JSONRPC&quot;,{data:$arr},function(response</A>){
							$(&quot;#showdata&quot;).html(response);
						});						
				 });
		 });
	&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;button  id=&quot;getData&quot;&gt;Get JSON Data&lt;/button&gt;
&lt;div  id=&quot;showdata&quot;&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

---------------
My log file say :
File &quot;/usr/lib/pymodules/python2.6/simplejson/decoder.py&quot;, line 420, in 
raw_decode
         raise JSONDecodeError(&quot;No JSON object could be decoded&quot;, s, idx)
     simplejson.decoder.JSONDecodeError: No JSON object could be 
decoded: line 1 column 0 (char 0)

And I think the received web request is reported as :
----------------
2012-01-13 10:56:29+0700 [HTTPChannel,3,127.0.0.1] 127.0.0.1 - - 
[13/Jan/2012:03:56:29 +0000] &quot;GET 
/JSONRPC?data=%22%7B%5C%22action%5C%22+%3A+%5C%22aksi%5C%22%2C%5C%22myval1%5C%22+%3A+%5C%22val1%5C%22%2C+%5C%22myval2%5C%22+%3A%7B%5C%22myval2a%5C%22%3A%5C%22val2a%5C%22%2C%5C%22myval2b%5C%22%3A%5C%22val2b%5C%22%7D%7D%22 
HTTP/1.1&quot; 500 14369 &quot;<A HREF="http://127.0.0.1/taxi-get.html&quot;">http://127.0.0.1/taxi-get.html&quot;</A> &quot;Mozilla/5.0 (X11; 
U; Linux i686; en-US; rv:1.9.2.18) Gecko/20110628 Ubuntu/10.10 
(maverick) Firefox/3.6.18&quot;
----------------


So , kindly please give me (or refer me to)  any simple sample of 
web-based JSONRPC client .. using GET and/or POS methode ?

Sincerely
-bino-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20120113/17616fe6/attachment-0001.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20120113/17616fe6/attachment-0001.htm</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025095.html">[Twisted-Python] telnet works,	why wont this client/protocol test?
</A></li>
	<LI>Next message: <A HREF="025097.html">[Twisted-Python] txjsonrpc.web2 ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25096">[ date ]</a>
              <a href="thread.html#25096">[ thread ]</a>
              <a href="subject.html#25096">[ subject ]</a>
              <a href="author.html#25096">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
