<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] List of required builds before a merge
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20List%20of%20required%20builds%20before%20a%20merge&In-Reply-To=%3CCAMxb2ivN5TeE2NAyzYiQpUEFof-RujSQ8-Nmt3uiftdbfHjwVg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="031836.html">
   <LINK REL="Next"  HREF="031838.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] List of required builds before a merge</H1>
    <B>Amber Brown</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20List%20of%20required%20builds%20before%20a%20merge&In-Reply-To=%3CCAMxb2ivN5TeE2NAyzYiQpUEFof-RujSQ8-Nmt3uiftdbfHjwVg%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] List of required builds before a merge">hawkowl at atleastfornow.net
       </A><BR>
    <I>Mon Mar 12 23:27:26 MDT 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="031836.html">[Twisted-Python] List of required builds before a merge
</A></li>
        <LI>Next message (by thread): <A HREF="031838.html">[Twisted-Python] List of required builds before a merge
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31837">[ date ]</a>
              <a href="thread.html#31837">[ thread ]</a>
              <a href="subject.html#31837">[ subject ]</a>
              <a href="author.html#31837">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The buildbots went after someone said that the RAX hosting was going away,
and I (and a few others) didn't get the (annoyingly quiet) correction that
it was only for new projects (which was not how the original was written).
All the twisted list got was the original letter from the SFC without a
&quot;false alarm&quot; followup. By the time people pointed it out, it was too late.

I have the ansible configs to rebuild them all, but unfortunately, Life has
not stopped since January and hasn't got worse. If anyone wants to take a
stab, the ansible configs are in the twisted-infra repo.

- Amber

On 13 Mar. 2018 16:08, &quot;Glyph&quot; &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Mar 12, 2018, at 4:59 AM, Adi Roiban &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> It is not clear to me what builders need to pass before we can merge
</I>&gt;<i> something.
</I>&gt;<i>
</I>&gt;<i> I expect that all supported &quot;platforms&quot; need to pass, but it is not
</I>&gt;<i> clear what are the currently supported platforms.
</I>&gt;<i>
</I>&gt;<i> We have this info in the wiki but it does not help.
</I>&gt;<i> <A HREF="https://twistedmatrix.com/trac/wiki/ReviewProcess#Authors:">https://twistedmatrix.com/trac/wiki/ReviewProcess#Authors:</A>
</I>&gt;<i> Howtomergethechangetotrunk
</I>&gt;<i>
</I>&gt;<i> In GitHub I can see Travis / Appveyor and OSX from Buildot as &quot;Required&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> These are marked as &quot;required&quot; because they're necessary, but not
</I>&gt;<i> sufficient.
</I>&gt;<i>
</I>&gt;<i> Is that all?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Ideally all the supported buildbots should be passing.  It's a real shame
</I>&gt;<i> that the offline buildbots do not report any status, because it makes it
</I>&gt;<i> very easy to miss them.  (I personally did not realize the ramifications of
</I>&gt;<i> the way buildbot repots status until I looked at <A HREF="https://buildbot.">https://buildbot.</A>
</I>&gt;<i> twistedmatrix.com/boxes-all?branch=trunk&amp;num_builds=10 just now).
</I>&gt;<i>
</I>&gt;<i> If I check the &quot;supported&quot; group in Buildbot, I see many more builders.
</I>&gt;<i> The problem is that a significant number of slaves are down and those
</I>&gt;<i> builders are not available.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> So, normally I'd say, like Jean-Paul did, that we should just get in touch
</I>&gt;<i> with the maintainers of the buildbots in question.
</I>&gt;<i>
</I>&gt;<i> But it seems the buildbots in question were the ones we had running on our
</I>&gt;<i> donated Rackspace Cloud account.
</I>&gt;<i>
</I>&gt;<i> Logging into the control panel for that account, literally all the servers
</I>&gt;<i> except for the buildmaster (i.e. buildbot.twistedmatrix.com) have been
</I>&gt;<i> deleted.  Not just shut down, but, completely gone.  This is baffling to
</I>&gt;<i> me.  I do not know who could have done this or why.  There does not appear
</I>&gt;<i> to be an audit log I can consult.  Based on billing data, and consistent
</I>&gt;<i> with the buildbot logs, it appears that this occurred some time in early
</I>&gt;<i> January.
</I>&gt;<i>
</I>&gt;<i> Is Fedora still supported and required?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> That's the hope.  Those buildbots appear to be online.
</I>&gt;<i>
</I>&gt;<i> I suggest to use GitHub &quot;Required&quot; marker to document what platforms are
</I>&gt;<i> supported.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I want to agree with you.  However, our tests are not reliable or
</I>&gt;<i> performant enough for this.
</I>&gt;<i>
</I>&gt;<i> The &quot;required&quot; marker makes it *impossible *to merge changes without a
</I>&gt;<i> passing status or an administrator override.  This has an unfortunate set
</I>&gt;<i> of corollaries.  Assuming a non-administrator reviewer:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>    1. If a single builder has a temporary configuration issue and you're
</I>&gt;<i>    not an administrator, you can't merge any code.
</I>&gt;<i>    2. Let's say the probably of an intermittent test failing is 50 to 1.
</I>&gt;<i>    A 2% chance.  The probability of a test suite passing is 98%.  We have 36
</I>&gt;<i>    supported builders.  The probability of all the builders passing for a
</I>&gt;<i>    successful run is then just *13%*; roughly 1 in 10 valid branches will
</I>&gt;<i>    be able to land. (I think our probability is actually quite a bit better
</I>&gt;<i>    than this these days, but you get my drift.)
</I>&gt;<i>    3. Even if a contributor can force all the builds to re-run (which
</I>&gt;<i>    requires special permissions, and thus needs to wait for a project member)
</I>&gt;<i>    getting a successful run on every builder could require 2 or 3 tries, which
</I>&gt;<i>    could be 2 or 3 *hours* of waiting just to get one successful run on a
</I>&gt;<i>    platform that you know is not relevant to the change you're testing.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Therefore keeping a small core set of &quot;most pass&quot; statuses and allowing
</I>&gt;<i> for some human judgement about the rest is a practical necessity given the
</I>&gt;<i> level of compute resources available to us.
</I>&gt;<i>
</I>&gt;<i> We don't have time to maintain the infrastructure, so I suggest to
</I>&gt;<i> drop support for anything that is not supported by Travis and
</I>&gt;<i> Appveyor.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> My preference would be to simply drop all the buildbots which have been
</I>&gt;<i> (for some reason) destroyed from the supported build matrix, since the
</I>&gt;<i> buildbots are still covering a multiplicity of kernels and environments
</I>&gt;<i> that travis and appveyor aren't.  But, I don't have the time to do much
</I>&gt;<i> more than write this email, so if we have no other volunteers for
</I>&gt;<i> maintenance, I will support your decision to tear down the buildbots for
</I>&gt;<i> now.
</I>&gt;<i>
</I>&gt;<i> Jean-Paul recently pointed out that CircleCI has much more performant
</I>&gt;<i> macOS builds than Travis, so if someone were motivated to make that change
</I>&gt;<i> but didn't want to keep maintaining hardware, that might be one way to go.
</I>&gt;<i>
</I>&gt;<i> I know that this might be disruptive.
</I>&gt;<i> I think that we need it in order to raise awareness that supporting a
</I>&gt;<i> platform is not easy.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I do hope that this will provoke some potential volunteers to come forward
</I>&gt;<i> to help maintain our failing infrastructure.
</I>&gt;<i>
</I>&gt;<i> If someone (including me) cares about a platform they should find a way to
</I>&gt;<i> help to project supporting that platform.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> What do you think?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I do hope that if you're going to make a change, you'll consider something
</I>&gt;<i> slightly less drastic than blowing up the buildbots entirely :).  But with
</I>&gt;<i> a dozen servers having just disappeared with no explanation, it's a course
</I>&gt;<i> of action which at least makes sense.
</I>&gt;<i>
</I>&gt;<i> -g
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20180313/f950978c/attachment.html&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="031836.html">[Twisted-Python] List of required builds before a merge
</A></li>
	<LI>Next message (by thread): <A HREF="031838.html">[Twisted-Python] List of required builds before a merge
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31837">[ date ]</a>
              <a href="thread.html#31837">[ thread ]</a>
              <a href="subject.html#31837">[ subject ]</a>
              <a href="author.html#31837">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
