<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] RunningTwisted tests on Windows and SSL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20RunningTwisted%20tests%20on%20Windows%20and%20SSL&In-Reply-To=%3CCAKmUHjZTcTUH-m0z3JQhbp-1eEKghbRO7OEv2X1oK7HqrQH0pQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="031849.html">
   <LINK REL="Next"  HREF="031857.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] RunningTwisted tests on Windows and SSL</H1>
    <B>John Aherne</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20RunningTwisted%20tests%20on%20Windows%20and%20SSL&In-Reply-To=%3CCAKmUHjZTcTUH-m0z3JQhbp-1eEKghbRO7OEv2X1oK7HqrQH0pQ%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] RunningTwisted tests on Windows and SSL">johnaherne at rocs.co.uk
       </A><BR>
    <I>Sun Mar 18 07:45:54 MDT 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="031849.html">[Twisted-Python] RunningTwisted tests on Windows and SSL
</A></li>
        <LI>Next message (by thread): <A HREF="031857.html">[Twisted-Python] RunningTwisted tests on Windows and SSL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31853">[ date ]</a>
              <a href="thread.html#31853">[ thread ]</a>
              <a href="subject.html#31853">[ subject ]</a>
              <a href="author.html#31853">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is useful info for anyone else running into these issues. At least
they might save a bit of time not having to run down what is happening.


Seems that the mail,email, test_hook and StringIO errors all come from not
ported modules as seen in twisted\src\python\_setup.py.

The _getEllipticCurve error

&lt;&lt; builtins.AttributeError: type object 'OpenSSLCertificateOptions' has no
attribute '_getEllipticCurve'

twisted.test.test_sslverify.OpenSSLOptionsTests.test_ecDoesNotBreakConstructor
&gt;&gt;<i>
</I>
is because getattr will raise an AttributeError, which is what it is doing
here. But it does not do this for python2.7.

The test is not to break if the ECCurve is missing. It is missing since it
is not found. Still looking at this.

With wincertstore being used, we get a failing test as follows:

[FAIL]
Traceback (most recent call last):
  File &quot;c:\twistedssl\twisted\src\twisted\web\test\test_agent.py&quot;, line
1568, in test_setsTrustRootOnContextToDefaultTrustRoot
    certificateOptions.trustRoot, ssl.OpenSSLDefaultPaths)
  File &quot;c:\twistedssl\twisted\src\twisted\trial\_synctest.py&quot;, line 649, in
assertIsInstance
    instance, classOrTuple, suffix))
twisted.trial.unittest.FailTest:
&lt;twisted.internet._sslverify.OpenSSLWindowsCertificateAuthorities object at
0x0CFDA810&gt; is not an instance of &lt;class
'twisted.internet._sslverify.OpenSSLDefaultPaths'&gt;

twisted.web.test.test_agent.WebClientContextFactoryTests.test_setsTrustRootOnContextToDefaultTrustRoot

So a new test is needed to fix this.

Also, the current patch only loads the ROOT certificates. The standard
library loads ['CA', 'ROOT'], so we should be doing the same I imagine.



-- 
*John Aherne*




*www.rocs.co.uk &lt;<A HREF="http://www.rocs.co.uk">http://www.rocs.co.uk</A>&gt;*
020 7223 7567
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20180318/c3b57f42/attachment.html&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="031849.html">[Twisted-Python] RunningTwisted tests on Windows and SSL
</A></li>
	<LI>Next message (by thread): <A HREF="031857.html">[Twisted-Python] RunningTwisted tests on Windows and SSL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31853">[ date ]</a>
              <a href="thread.html#31853">[ thread ]</a>
              <a href="subject.html#31853">[ subject ]</a>
              <a href="author.html#31853">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
