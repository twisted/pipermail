<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] List of required builds before a merge
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20List%20of%20required%20builds%20before%20a%20merge&In-Reply-To=%3C5DB035CE-E3A5-454B-B827-C57B848F38CA%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="031829.html">
   <LINK REL="Next"  HREF="031837.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] List of required builds before a merge</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20List%20of%20required%20builds%20before%20a%20merge&In-Reply-To=%3C5DB035CE-E3A5-454B-B827-C57B848F38CA%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] List of required builds before a merge">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon Mar 12 23:08:11 MDT 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="031829.html">[Twisted-Python] List of required builds before a merge
</A></li>
        <LI>Next message (by thread): <A HREF="031837.html">[Twisted-Python] List of required builds before a merge
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31836">[ date ]</a>
              <a href="thread.html#31836">[ thread ]</a>
              <a href="subject.html#31836">[ subject ]</a>
              <a href="author.html#31836">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

&gt;<i> On Mar 12, 2018, at 4:59 AM, Adi Roiban &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> It is not clear to me what builders need to pass before we can merge something.
</I>&gt;<i> 
</I>&gt;<i> I expect that all supported &quot;platforms&quot; need to pass, but it is not
</I>&gt;<i> clear what are the currently supported platforms.
</I>&gt;<i> 
</I>&gt;<i> We have this info in the wiki but it does not help.
</I>&gt;<i> <A HREF="https://twistedmatrix.com/trac/wiki/ReviewProcess#Authors:Howtomergethechangetotrunk">https://twistedmatrix.com/trac/wiki/ReviewProcess#Authors:Howtomergethechangetotrunk</A>
</I>&gt;<i> 
</I>&gt;<i> In GitHub I can see Travis / Appveyor and OSX from Buildot as &quot;Required&quot;
</I>
These are marked as &quot;required&quot; because they're necessary, but not sufficient.

&gt;<i> Is that all?
</I>
Ideally all the supported buildbots should be passing.  It's a real shame that the offline buildbots do not report any status, because it makes it very easy to miss them.  (I personally did not realize the ramifications of the way buildbot repots status until I looked at <A HREF="https://buildbot.twistedmatrix.com/boxes-all?branch=trunk&amp;num_builds=10">https://buildbot.twistedmatrix.com/boxes-all?branch=trunk&amp;num_builds=10</A> &lt;<A HREF="https://buildbot.twistedmatrix.com/boxes-all?branch=trunk&amp;num_builds=10">https://buildbot.twistedmatrix.com/boxes-all?branch=trunk&amp;num_builds=10</A>&gt; just now).

&gt;<i> If I check the &quot;supported&quot; group in Buildbot, I see many more builders.
</I>&gt;<i> The problem is that a significant number of slaves are down and those
</I>&gt;<i> builders are not available.
</I>
So, normally I'd say, like Jean-Paul did, that we should just get in touch with the maintainers of the buildbots in question.

But it seems the buildbots in question were the ones we had running on our donated Rackspace Cloud account.

Logging into the control panel for that account, literally all the servers except for the buildmaster (i.e. buildbot.twistedmatrix.com &lt;<A HREF="http://buildbot.twistedmatrix.com/">http://buildbot.twistedmatrix.com/</A>&gt;) have been deleted.  Not just shut down, but, completely gone.  This is baffling to me.  I do not know who could have done this or why.  There does not appear to be an audit log I can consult.  Based on billing data, and consistent with the buildbot logs, it appears that this occurred some time in early January.

&gt;<i> Is Fedora still supported and required?
</I>
That's the hope.  Those buildbots appear to be online.

&gt;<i> I suggest to use GitHub &quot;Required&quot; marker to document what platforms are supported.
</I>
I want to agree with you.  However, our tests are not reliable or performant enough for this.

The &quot;required&quot; marker makes it impossible to merge changes without a passing status or an administrator override.  This has an unfortunate set of corollaries.  Assuming a non-administrator reviewer:

If a single builder has a temporary configuration issue and you're not an administrator, you can't merge any code.
Let's say the probably of an intermittent test failing is 50 to 1.  A 2% chance.  The probability of a test suite passing is 98%.  We have 36 supported builders.  The probability of all the builders passing for a successful run is then just 13%; roughly 1 in 10 valid branches will be able to land. (I think our probability is actually quite a bit better than this these days, but you get my drift.)
Even if a contributor can force all the builds to re-run (which requires special permissions, and thus needs to wait for a project member) getting a successful run on every builder could require 2 or 3 tries, which could be 2 or 3 hours of waiting just to get one successful run on a platform that you know is not relevant to the change you're testing.

Therefore keeping a small core set of &quot;most pass&quot; statuses and allowing for some human judgement about the rest is a practical necessity given the level of compute resources available to us.

&gt;<i> We don't have time to maintain the infrastructure, so I suggest to
</I>&gt;<i> drop support for anything that is not supported by Travis and
</I>&gt;<i> Appveyor.
</I>
My preference would be to simply drop all the buildbots which have been (for some reason) destroyed from the supported build matrix, since the buildbots are still covering a multiplicity of kernels and environments that travis and appveyor aren't.  But, I don't have the time to do much more than write this email, so if we have no other volunteers for maintenance, I will support your decision to tear down the buildbots for now.

Jean-Paul recently pointed out that CircleCI has much more performant macOS builds than Travis, so if someone were motivated to make that change but didn't want to keep maintaining hardware, that might be one way to go.

&gt;<i> I know that this might be disruptive.
</I>&gt;<i> I think that we need it in order to raise awareness that supporting a
</I>&gt;<i> platform is not easy.
</I>
I do hope that this will provoke some potential volunteers to come forward to help maintain our failing infrastructure.

&gt;<i> If someone (including me) cares about a platform they should find a way to help to project supporting that platform.
</I>
&gt;<i> What do you think?
</I>
I do hope that if you're going to make a change, you'll consider something slightly less drastic than blowing up the buildbots entirely :).  But with a dozen servers having just disappeared with no explanation, it's a course of action which at least makes sense.

-g

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20180312/4639b2ca/attachment-0001.html&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="031829.html">[Twisted-Python] List of required builds before a merge
</A></li>
	<LI>Next message (by thread): <A HREF="031837.html">[Twisted-Python] List of required builds before a merge
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31836">[ date ]</a>
              <a href="thread.html#31836">[ thread ]</a>
              <a href="subject.html#31836">[ subject ]</a>
              <a href="author.html#31836">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
