<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] List of required builds before a merge
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20List%20of%20required%20builds%20before%20a%20merge&In-Reply-To=%3CCAFycZ9cXnNxpUuWYf%2BnZ0mFZW2eSCGedTf0egThogT%2BULYUhqw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="064301.html">
   <LINK REL="Next"  HREF="031830.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] List of required builds before a merge</H1>
    <B>Adi Roiban</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20List%20of%20required%20builds%20before%20a%20merge&In-Reply-To=%3CCAFycZ9cXnNxpUuWYf%2BnZ0mFZW2eSCGedTf0egThogT%2BULYUhqw%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] List of required builds before a merge">adi at roiban.ro
       </A><BR>
    <I>Tue Mar 13 11:55:14 MDT 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="064301.html">[Twisted-Python] List of required builds before a merge
</A></li>
        <LI>Next message (by thread): <A HREF="031830.html">[Twisted-Python] Waiting for a contended resource
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64302">[ date ]</a>
              <a href="thread.html#64302">[ thread ]</a>
              <a href="subject.html#64302">[ subject ]</a>
              <a href="author.html#64302">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 13 March 2018 at 13:54, Jean-Paul Calderone
&lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt; wrote:
&gt;<i> On Tue, Mar 13, 2018 at 9:36 AM, Adi Roiban &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We can try Circle-CI.
</I>&gt;&gt;<i> They don't offer any free versions. Even for open source.
</I>&gt;&gt;<i> When I did the initial work for Twisted with Travis and Appveyor I
</I>&gt;&gt;<i> contacted Circle-CI to see if we can get a discount.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> They offered OSX - Seed plan which comes with 500 minutes/month - free.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> They advertise this on their site now:
</I>&gt;<i> <A HREF="https://circleci.com/pricing/#faq-section-os-x">https://circleci.com/pricing/#faq-section-os-x</A>
</I>&gt;<i>
</I>&gt;<i> So I would expect Twisted could get it.
</I>&gt;<i>
</I>&gt;<i> Your point about the minutes limit is a good one though.  What is 500
</I>&gt;<i> minutes to Twisted?  Around 30 builds?  It seems likely Twisted would run
</I>&gt;<i> out most months.  Certainly, maintaining separate coverage and non-coverage
</I>&gt;<i> builds would totally blow this limit.  And one of the big advantages of
</I>&gt;<i> hosted CI over buildbot - letting third-party PRs trigger builds - would
</I>&gt;<i> seem to be out of the question.
</I>
I asked for this on July 2016... so maybe they have a different
offering for open source now.
Circle-CI ticket id for this request is #8736.

&gt;&gt;<i>
</I>&gt;&gt;<i> I stopped as the people on IRC told me that Circle-CI is not better than
</I>&gt;&gt;<i> Travis.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Presumably at some point this was true.  These days, in my experience,
</I>&gt;<i> CircleCI definitely seems competitive.  It has near feature parity (and more
</I>&gt;<i> features in some areas), a less crufty configuration system, and seems
</I>&gt;<i> better resourced (but this may just be better resource management - eg, the
</I>&gt;<i> 500 minute macOS limit for free open source users).
</I>&gt;<i>
</I>&gt;<i> Of course, there's also the fact that the macOS Buildbot slaves are not
</I>&gt;<i> offline right now.  I know they've gone offline but as far as I know, their
</I>&gt;<i> maintainer is fairly responsive to reports of this.  So, is macOS really
</I>&gt;<i> part of this problem?
</I>
Keeping slave online is not that much of a work.

My issue is with the buildmaster configuration and its maintenance in general.

&gt;<i> The immediate problem is all of the Rackspace-hosted slaves that are gone,
</I>&gt;<i> right?
</I>
I don't know. I don't know when and where this was discussed.

My issue is that I am checking <A HREF="https://github.com/twisted-infra/braid">https://github.com/twisted-infra/braid</A>
and there was no update for the removal of the slaves in the
buildmaster configuration.

&gt;<i> So maybe what's more interesting is that CircleCI offers a way to replace
</I>&gt;<i> those - with either VM or container (including custom-image) builders.
</I>
I don't think that Circle-CI provides support for FreeBSD10, RHEL7,
Debian 8 and 9.

I think that Rackspace still offers us generous resources, so we can
use Rackspace for that.

We can run 1 or 2 Windows slaves in Azure as they gave us $150 monthly credit.

-----

I think that we should find a way to make it super simple to run more
tests on local systems.
It might not be easy to run all 2.7 / 3.4 / 3.5 / 3.6 on Windows /
Linux / BSD/ OSX, but maybe we can find a simple script
which runs the core tests in under 1 minute.
Devs will then be asked to run these tests before pushing to a PR...
and in the same time these teste can be used as stage 1.
If they don't pass we don't spin OSX / Windows and other resource-heavy tests.

-------

On Appveyor we have 4 builders/jobs

Maybe we can stage Windows test... and execute iocp reactor only after
select tests pass... on 2.7.

We still have Windows on Buildbot, so maybe run fewer tests on
Appveyor (to speed it up),
since we will run all Windows tests anyway in Buildbot.

----

For external contributors, we are effectively now running the tests in 2 stages
Unless Travis and Appveyor don't pass, we don't manually trigger the
Buildbot tests.

--------

When I have time, I will retry Circe-CI for OSX.
Just to give it a spin and see where we are and how much time we need
per month for OSX.
I think that we can tune the number of tests we run on Circle-CI to
get into the budget.
The Circle-CI can server as a stage-1 builder for external
contributors... and we will still have the OSX slave maintained by
Glyph.

&gt;<i> Jean-Paul
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I am happy to try again with Circle-CI
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ------
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We might go over 500 minutes. I suggest running the tests in stages.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Run twistedchecker/pyflakes/newsfragment/Ubuntu tests first.
</I>&gt;&gt;<i> Only when they all pass we should trigger Windows and OSX tests.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I am also running the tests on stage... For example, Debian/RHEL/SUSE
</I>&gt;&gt;<i> pass 99.99% if Ubuntu pass... so those tests are executed only later
</I>&gt;&gt;<i> in the stage.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ------
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I don't have much time to contribute to Twisted infrastructure, and I
</I>&gt;&gt;<i> would like to spend the available time doing reviews and helping
</I>&gt;&gt;<i> people contribute to Twisted.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If there is a better plan, I am happy to go with that.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks for your time :)
</I>&gt;&gt;<i> Adi
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Twisted-Python mailing list
</I>&gt;&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>


-- 
Adi Roiban


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="064301.html">[Twisted-Python] List of required builds before a merge
</A></li>
	<LI>Next message (by thread): <A HREF="031830.html">[Twisted-Python] Waiting for a contended resource
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64302">[ date ]</a>
              <a href="thread.html#64302">[ thread ]</a>
              <a href="subject.html#64302">[ subject ]</a>
              <a href="author.html#64302">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
