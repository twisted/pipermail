<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Does Twisted support ECC for TLS?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Does%20Twisted%20support%20ECC%20for%20TLS%3F&In-Reply-To=%3CCAMGywB5vB%2BNiTUdVbgfwfkMdr93mu0MEc%3Ds001VcvxDxPiaGFg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   <LINK REL="Next"  HREF="064278.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Does Twisted support ECC for TLS?</H1>
    <B>Justin Myles Holmes</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Does%20Twisted%20support%20ECC%20for%20TLS%3F&In-Reply-To=%3CCAMGywB5vB%2BNiTUdVbgfwfkMdr93mu0MEc%3Ds001VcvxDxPiaGFg%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Does Twisted support ECC for TLS?">twotonespirit at gmail.com
       </A><BR>
    <I>Sat Mar  3 15:38:14 MST 2018</I>
    <P><UL>
        
        <LI>Next message (by thread): <A HREF="064278.html">[Twisted-Python] Does Twisted support ECC for TLS?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31816">[ date ]</a>
              <a href="thread.html#31816">[ thread ]</a>
              <a href="subject.html#31816">[ subject ]</a>
              <a href="author.html#31816">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm trying to bend a little bit of custom TLS - one possible use case for
me is a HendrixDeploy object which uses an ethereum keypair to self-sign a
certificate.

So I'm wondering: is it currently possible to use an ECC keypair for TLS
with Twisted?

Here's what I've discovered:

twisted.internet.sssl.ContextFactory has a method, use_privatekey().  This
thing wants an OpenSSL.crypto.PKey object.  And, lo and behold, PKey offers
a facility, from_cryptography_key(), which attempts to use a key from
cryptography.io, from whence I'm generating keys anyway.  However, it
expects an RSA or DSA key, not an EC or ECDSA key.

Glyph suggested that, instead of trying to handle PKeys myself, I might try
loading PEM files with txsni or the like.

I can actually get txsni to work with my cert/keypair, but I don't seem to
be able to get a client to connect.  For example, Firefox tells me
&quot;SSL_ERROR_NO_CYPHER_OVERLAP&quot;.

I tried the same things with SSL4ServerEndpoint, and I get exactly the same
thing - my protocol's dataReceived method is never run, no output appears
in the console, but the client gets this same error.

I notice that there's an issue on PyOpenSSL which appears to address this:


-- 
Justin Myles Holmes
justinholmes.com
thisisthebus.com
github.com/jMyles/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20180303/115af3db/attachment.html&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message (by thread): <A HREF="064278.html">[Twisted-Python] Does Twisted support ECC for TLS?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31816">[ date ]</a>
              <a href="thread.html#31816">[ thread ]</a>
              <a href="subject.html#31816">[ subject ]</a>
              <a href="author.html#31816">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
