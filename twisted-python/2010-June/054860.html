<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] deferred as a Protocol class attribute,	Protocol as class attribute 	of a Factory ...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20deferred%20as%20a%20Protocol%20class%20attribute%2C%0A%09Protocol%20as%20class%20attribute%20%09of%20a%20Factory%20...&In-Reply-To=%3CAANLkTik-a1oqTBp6JMEB9Q0w1pYLOyohiiAyU8Jf8o_A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="054858.html">
   <LINK REL="Next"  HREF="054861.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] deferred as a Protocol class attribute,	Protocol as class attribute 	of a Factory ...</H1>
    <B>Jean Daniel</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20deferred%20as%20a%20Protocol%20class%20attribute%2C%0A%09Protocol%20as%20class%20attribute%20%09of%20a%20Factory%20...&In-Reply-To=%3CAANLkTik-a1oqTBp6JMEB9Q0w1pYLOyohiiAyU8Jf8o_A%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] deferred as a Protocol class attribute,	Protocol as class attribute 	of a Factory ...">jeandaniel.browne at gmail.com
       </A><BR>
    <I>Wed Jun 16 10:50:30 MDT 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="054858.html">[Twisted-Python] Twisted Web, Unicode &amp; request.write()
</A></li>
        <LI>Next message (by thread): <A HREF="054861.html">[Twisted-Python] deferred as a Protocol class attribute, Protocol as class attribute 	of a Factory ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54860">[ date ]</a>
              <a href="thread.html#54860">[ thread ]</a>
              <a href="subject.html#54860">[ subject ]</a>
              <a href="author.html#54860">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

Reading the SMTP client tutorial[1], I do not see the impact of the
factory having a protocol defined as a class attribute. Especially
when here is a big fat warning [2] that I should actually understand
the inplications. My guess is that in this first case the protocol
methods do not need access to the protocol instance, maybe it is a
clear indication that the protocol is stateless, and there is a gain
ressource-wise since there is no instance created and maintained. But
I am not sure.

What are the implications of the protocol being a class attribute of
the factory?

Almost the same question: in the imapclient example [3], there is a
LineReceiver subclass hooked to stdio. The lineReceived callback willl
fire a callback added to an _class attribute_ deferred filled with a
user function. I think this design prevents two instances of the
LineReceiver subclass which would race on the class attribute
deferred.

What are the advantages of having defined the deferred at the class
level instead of at the instance level?

Thanks for your help,

[1]: <A HREF="http://twistedmatrix.com/documents/current/mail/tutorial/smtpclient/smtpclient.html#auto6">http://twistedmatrix.com/documents/current/mail/tutorial/smtpclient/smtpclient.html#auto6</A>

[2]: &quot;&quot;&quot;Another minor change to note is that the protocol attribute is
now defined in the class definition, rather than tacked onto an
instance after one is created. This means it is a class attribute,
rather than an instance attribute, now, which makes no difference as
far as this example is concerned. There are circumstances in which the
difference is important: be sure you understand the implications of
each approach when creating your own factories. &quot;&quot;&quot;


[3]: twisted/doc/mail/examples/imapclient.py in the sources and
<A HREF="http://twistedmatrix.com/documents/current/mail/examples/imap4client.py">http://twistedmatrix.com/documents/current/mail/examples/imap4client.py</A>
on the web


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="054858.html">[Twisted-Python] Twisted Web, Unicode &amp; request.write()
</A></li>
	<LI>Next message (by thread): <A HREF="054861.html">[Twisted-Python] deferred as a Protocol class attribute, Protocol as class attribute 	of a Factory ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54860">[ date ]</a>
              <a href="thread.html#54860">[ thread ]</a>
              <a href="subject.html#54860">[ subject ]</a>
              <a href="author.html#54860">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
