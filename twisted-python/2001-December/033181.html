<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Passport, my ideas about an LDAP backend
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Passport%2C%20my%20ideas%20about%20an%20LDAP%20backend&In-Reply-To=%3C87u1u8if8g.fsf%40ki.yok.utu.fi%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="033178.html">
   <LINK REL="Next"  HREF="033183.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Passport, my ideas about an LDAP backend</H1>
    <B>Tommi Virtanen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Passport%2C%20my%20ideas%20about%20an%20LDAP%20backend&In-Reply-To=%3C87u1u8if8g.fsf%40ki.yok.utu.fi%3E"
       TITLE="[Twisted-Python] Passport, my ideas about an LDAP backend">tv at twistedmatrix.com
       </A><BR>
    <I>Sun Dec 30 14:13:03 MST 2001</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="033178.html">[Twisted-Python] How to test metrics
</A></li>
        <LI>Next message (by thread): <A HREF="033183.html">[Twisted-Python] Passport, my ideas about an LDAP backend
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33181">[ date ]</a>
              <a href="thread.html#33181">[ thread ]</a>
              <a href="subject.html#33181">[ subject ]</a>
              <a href="author.html#33181">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Here's a sketch of how I imagine an LDAP backend to passport will
work:

LDAP is a logically simple (implementation horrible:) TCP protocol
with messages passing in both directions. User authentication is one
possible message type, and the server replies with either success or
an error message.

For just searching and browsing, you can bind anonymously. Most
servers allow read-only access by default.

But for any kind of modification, we need to bind.

So far, this seems pretty much like with databases. However, here's
the big catch: the normal way to use databases is to have one userid
and password per application, and perhaps store actual userids and
passwords within a table in the database. The normal way to use LDAP
is to bind _as the user who is doing the operation_.

Here is a list of requirements I can think, that need to be fulfilled
in order for me to be able to use passport. Some of these may be very
trivial, or taken for granted by now -- I'm just making sure they are
seen.


Requirement #1: Passport needs to be async.

In order to be able to use LDAP as the backend for passport-like user
verification, the backend needs to be able to talk to a possibly slow
server.


Requirement #2: Passport must be able to store data in the
Perspective during authentication.

However, if the application wants to use LDAP for more than just user
authentication, things get a bit worse. We could just store the
password we saw the user enter, and later bind to the LDAP server as
this user. However, I dislike storing plain-text passwords in virtual
memory.


Requirement #3: Passport must be able to ask users to reauthenticate.

A better way is to remember that we already did bind (authenticate) to
the LDAP server as that user. Just reserve that connection for that
user alone. As long as the connection is alive, we can keep on talking
to the LDAP server.

Now, programs can be restarted, TCP connections can die, and servers
can utilize idle timeouts, maximum time limits, or limit maximum
number of operations per connection. The TCP connection can die any
moment. As we didn't store the user password, we need to ask it again
when we see the connection has closed and the user tries an operation
that requires talking to the LDAP server. This requires &quot;invalidating&quot;
the users previous authentication.


-- 
tv@{{hq.yok.utu,havoc,gaeshido}.fi,{debian,wanderer}.org,stonesoft.com}
double a,b=4,c;main(){for(;++a&lt;2e6;c-=(b=-b)/a++);printf(&quot;%f\n&quot;,c);}


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="033178.html">[Twisted-Python] How to test metrics
</A></li>
	<LI>Next message (by thread): <A HREF="033183.html">[Twisted-Python] Passport, my ideas about an LDAP backend
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33181">[ date ]</a>
              <a href="thread.html#33181">[ thread ]</a>
              <a href="subject.html#33181">[ subject ]</a>
              <a href="author.html#33181">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
