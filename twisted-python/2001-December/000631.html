<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] python's &quot;import&quot; is giving me a headache.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20python%27s%20%22import%22%20is%20giving%20me%20a%20headache.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000627.html">
   <LINK REL="Next"  HREF="000632.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] python's &quot;import&quot; is giving me a headache.</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20python%27s%20%22import%22%20is%20giving%20me%20a%20headache.&In-Reply-To="
       TITLE="[Twisted-Python] python's &quot;import&quot; is giving me a headache.">glyph at twistedmatrix.com
       </A><BR>
    <I>Wed Dec  5 00:21:33 EST 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="000627.html">[Twisted-Python] FAQ-o-matic
</A></li>
        <LI>Next message: <A HREF="000632.html">[Twisted-Python] python's &quot;import&quot; is giving me a headache.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#631">[ date ]</a>
              <a href="thread.html#631">[ thread ]</a>
              <a href="subject.html#631">[ subject ]</a>
              <a href="author.html#631">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>So, there's a particular corner of the coding standard for Twisted
currently which is the root of a few annoying problems and has been the
cause of one or two bugs.  It's the module import requirement.

Originally it seemed like a pretty good idea for the following reasons;
if one is using packages, it is easiest to figure out where the code is
coming from if you name the module explicitly.  Documentation generators
document modules individually, and so that's how people would learn to
import modules.  Accessing the module indirectly, and not the class,
allows for reloading to work naturally and different modules to have
similarly named classes when appropriate.

In pracitce, it doesn't work out quite so well.  It did not occur to me
at the time how hard it would be to distinctly name all modules within
classes, or how often a local variable name would clash with a
straightforwardly chosen package name.

I am considering a change to the coding standard (and the attendant
massive refactoring) to a standard where modules &quot;promote&quot; public
classes and functions to the module level.  For example, in
twisted/words/service.py:

# promote public interface
from twisted import python
import twisted.words
twisted.python.publicInterface(twisted.words,
    Service,
    WordsClientInterface,
    Participant,
    ...)
# end

The end user would probably then have to do this in order to use that
module:

import twisted.words.service
from twisted import words
words.Service(...)

Pros:

* fewer names to worry about clashing with
* nested modules less inconvenient
* only public portions of interface present at package level

Cons:

* it doesn't work that way now and it would require work to change
* you still have to know which module to import
* it requires manual declaration of public interface

The number of conflicts both between modules and convenient variable
names is increasing with time, and I think that something has to be done
about it, but I don't know if this is an appropriate solution.  At any
rate, such a change will likely affect most Twisted developers, so I'd
like to hear feedback before I do anything.

-- 
______      you are in a maze of twisted little applications, all
|<i>   |_\     remarkably consistent.
</I>|<i>     |          -- glyph lefkowitz, glyph @ twisted matrix . com
</I>|<i>_____|             <A HREF="http://www.twistedmatrix.com/">http://www.twistedmatrix.com/</A>
</I>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000627.html">[Twisted-Python] FAQ-o-matic
</A></li>
	<LI>Next message: <A HREF="000632.html">[Twisted-Python] python's &quot;import&quot; is giving me a headache.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#631">[ date ]</a>
              <a href="thread.html#631">[ thread ]</a>
              <a href="subject.html#631">[ subject ]</a>
              <a href="author.html#631">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
