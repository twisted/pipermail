<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Standalone IRC server, or Passport/Words/Something sucks
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Standalone%20IRC%20server%2C%20or%20Passport/Words/Something%20sucks&In-Reply-To=3C0B7A36.9030502%40itamarst.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000620.html">
   <LINK REL="Next"  HREF="000622.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Standalone IRC server, or Passport/Words/Something sucks</H1>
    <B>Kevin Turner</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Standalone%20IRC%20server%2C%20or%20Passport/Words/Something%20sucks&In-Reply-To=3C0B7A36.9030502%40itamarst.org"
       TITLE="[Twisted-Python] Standalone IRC server, or Passport/Words/Something sucks">acapnotic at twistedmatrix.com
       </A><BR>
    <I>Mon Dec  3 13:47:48 EST 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="000620.html">[Twisted-Python] Standalone IRC server, or	Passport/Words/Something sucks
</A></li>
        <LI>Next message: <A HREF="000622.html">[Twisted-Python] Standalone IRC server, or Passport/Words/Something sucks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#621">[ date ]</a>
              <a href="thread.html#621">[ thread ]</a>
              <a href="subject.html#621">[ subject ]</a>
              <a href="author.html#621">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Dec 03, 2001 at 03:12:22PM +0200, Itamar Shtull-Trauring wrote:
&gt;<i> Issues:
</I>&gt;<i> 2. The automatic user creation is horribly verbose, hard to understand, and 
</I>&gt;<i> hacky (getPerspectiveNamed, specifically.)
</I>

{{{ # In response to Itamar's code:

from twisted.words import service, ircservice

class SimpleService(service.Service):

# If this is a standalone service, why does it inherit from
# words.service?  You override all its methods save the dictionary
# accessor 'getGroup' anyhow.

    def createParticipant(self, name):
        if not self.participants.has_key(name):
            log.msg(&quot;Created New Participant: %s&quot; % name)

# Huh? createParticipant creates a log entry, but *not* a Participant?

     def getPerspectiveNamed(self, name):
         if self.participants.has_key(name):
             raise service.WordsError, &quot;user exists&quot;

# Woah.  getPerspectiveNamed is *supposed* to return existing
# perspectives.  This error might be appropriate in createParticipant,
# but not here.

         else:
             p = service.Participant(name)
             p.setService(self)

# Don't bitch about this method being &quot;horribly verbose&quot; when you
# explicitly duplicate code that's defined in your subclass.  The above
# is done in passport.Service.createPerspective, which you deliberately
# clobbered.

             ident = passport.Identity(name, self.application)
             ident.setPassword(&quot;ugly hack&quot;)
	     
# If you want to do this, please factor the strict authorization
# requirements out of words.ircservice.IRCChatter.irc_NICK (or factor
# words.ircservice.IRCChatter out of words.*) instead of doing an 
# &quot;ugly hack&quot;.
	     
	     self.application.authorizer.addIdentity(ident)
	     p.setIdentity(ident) 
	     ident.addKeyForPerspective(p)

# If you're using 'anonymous' logins with transient user identites,
# why are you using Identities at all?  None of this is necessary if
# you're not planning on making use of a passport.DefaultAuthorizer
# anyway.  See for example words.tendril._newParticipant, no identities
# are created and bound either here or in words.service methods.

             self.participants[name] = p
             return p
 
}}}

Overall, yes, words.ircservice is absolutely horrible for use as a
&quot;normal&quot; IRC server.  But then, it's not intended to be one, that's why
it's in the twisted.words package.  It's also true that it's a fairly
shoddy Words interface as well, but aren't they all?  ;)

 - AcapNotIRC

-- 
The moon is waning gibbous, 92.1% illuminated, 17.4 days old.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000620.html">[Twisted-Python] Standalone IRC server, or	Passport/Words/Something sucks
</A></li>
	<LI>Next message: <A HREF="000622.html">[Twisted-Python] Standalone IRC server, or Passport/Words/Something sucks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#621">[ date ]</a>
              <a href="thread.html#621">[ thread ]</a>
              <a href="subject.html#621">[ subject ]</a>
              <a href="author.html#621">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
