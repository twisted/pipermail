<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted.internet.ssl
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted.internet.ssl&In-Reply-To=%3CCO2PR01MB1976A13CC5DEFDB16C0C0AF2CC450%40CO2PR01MB1976.prod.exchangelabs.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="064173.html">
   <LINK REL="Next"  HREF="064178.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted.internet.ssl</H1>
    <B>Enoch W.</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted.internet.ssl&In-Reply-To=%3CCO2PR01MB1976A13CC5DEFDB16C0C0AF2CC450%40CO2PR01MB1976.prod.exchangelabs.com%3E"
       TITLE="[Twisted-Python] twisted.internet.ssl">ixew at hotmail.com
       </A><BR>
    <I>Thu Oct 26 07:35:00 MDT 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="064173.html">[Twisted-Python] twisted.internet.ssl
</A></li>
        <LI>Next message (by thread): <A HREF="064178.html">[Twisted-Python] twisted.internet.ssl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64175">[ date ]</a>
              <a href="thread.html#64175">[ thread ]</a>
              <a href="subject.html#64175">[ subject ]</a>
              <a href="author.html#64175">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Jason,

With a more specific error message raised by github latest code [thanks!] the problem became clear.
I suggest to change the documentation of 'optionsForClientTLS' -

from:
ctx = ssl.optionsForClientTLS(hostName, trustRoot=root, clientCertificate=mycert)

to:
ctx = ssl.optionsForClientTLS(commonName, trustRoot=root, clientCertificate=mycert)

That is, what this ctx (the contextFactory) really expects is the server's certificate commonName which often is, but not in my case, the server's hostName.

Interestingly, Python's standard ssl package does not verify this field.

Regards, Enoch.


On 10/26/2017 01:13 AM, Jason Litzinger wrote:

On Wed, Oct 25, 2017 at 08:07:26PM +0000, Enoch W. wrote:


A known bug?


Hello Enoch,
A question, does the server have an intermediate cert that it is using?
If so, then the problem might be that your trust root needs both the CA
and intermediate.

I have some https test code I hacked together a while back (neither
reviewed nor heavily tested, but same general idea).
<A HREF="https://github.com/jlitzingerdev/twisted-benchmarks/blob/https-benchmark/web_https.py">https://github.com/jlitzingerdev/twisted-benchmarks/blob/https-benchmark/web_https.py</A>

If I omit the intermediate cert I get the same error.

Cheers,
-Jason

_______________________________________________
Twisted-Python mailing list
<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>&lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>&gt;
<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20171026/0bd137c1/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="064173.html">[Twisted-Python] twisted.internet.ssl
</A></li>
	<LI>Next message (by thread): <A HREF="064178.html">[Twisted-Python] twisted.internet.ssl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64175">[ date ]</a>
              <a href="thread.html#64175">[ thread ]</a>
              <a href="subject.html#64175">[ subject ]</a>
              <a href="author.html#64175">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
