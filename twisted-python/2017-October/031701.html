<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Clarification or pausing a consumer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Clarification%20or%20pausing%20a%20consumer&In-Reply-To=%3CCAEeXt4NR%3D8dFzn9zJfCwPUaak4qXqPT1VFuE3b3cQ9AigBQ%2BOQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="031700.html">
   <LINK REL="Next"  HREF="031702.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Clarification or pausing a consumer</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Clarification%20or%20pausing%20a%20consumer&In-Reply-To=%3CCAEeXt4NR%3D8dFzn9zJfCwPUaak4qXqPT1VFuE3b3cQ9AigBQ%2BOQ%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Clarification or pausing a consumer">exarkun at twistedmatrix.com
       </A><BR>
    <I>Fri Oct 13 18:47:33 MDT 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="031700.html">[Twisted-Python] Clarification or pausing a consumer
</A></li>
        <LI>Next message (by thread): <A HREF="031702.html">[Twisted-Python] Clarification or pausing a consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31701">[ date ]</a>
              <a href="thread.html#31701">[ thread ]</a>
              <a href="subject.html#31701">[ subject ]</a>
              <a href="author.html#31701">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Oct 13, 2017 at 8:29 AM, Barry Scott &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">barry.scott at forcepoint.com</A>&gt;
wrote:

&gt;<i> I have a app that needs to send data as an http response. But the data is
</I>&gt;<i> produced slowly. More slowly then the time taken to transmit it.
</I>&gt;<i>
</I>&gt;<i> The consumer keeps calling resumeProducing, but there is no data to send
</I>&gt;<i> often.
</I>&gt;<i>
</I>
This sounds like a bug in the consumer.  There are two cases.

If the producer is &quot;streaming&quot; or &quot;push&quot; (two words, one meaning) then the
consumer should call resumeProducing once and let data come.  If it wants
to slow down the data, it can call pauseProducing.  There's nothing else it
should be doing.

If the producer is &quot;not streaming&quot; or &quot;pull&quot; (again, one meaning) then the
consumer should call resumeProducing and wait for a write call.  Then it
should call resumeProducing again (if it wants more data).  It should not
call resumeProducing again while waiting for a write call.


&gt;<i> What is the correct way to pause the consumer so that it does not keep
</I>&gt;<i> calling resumeProducing? unregisterProducer?
</I>&gt;<i>
</I>
Probably just fix the consumer implementation to not be broken.  Or switch
to tubes which has a simpler model and (in principle) fewer places to make
mistakes.


&gt;<i>
</I>&gt;<i> Then when the next block of data is available what is the correct way to
</I>&gt;<i> resume the consumer? registerProducer?
</I>&gt;<i>
</I>&gt;<i> Related to that why does HTTPChannel.registerProducer convert a
</I>&gt;<i> IPullProducer
</I>&gt;<i> into a IPushProducer using _PullToPush?
</I>&gt;<i>
</I>
Probably as an attempt to simplify the implementation - to make it so the
consumer can pretend there's just one kind of producer instead of two
(which would be nice for everyone).

Jean-Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20171013/fc367417/attachment.html&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="031700.html">[Twisted-Python] Clarification or pausing a consumer
</A></li>
	<LI>Next message (by thread): <A HREF="031702.html">[Twisted-Python] Clarification or pausing a consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31701">[ date ]</a>
              <a href="thread.html#31701">[ thread ]</a>
              <a href="subject.html#31701">[ subject ]</a>
              <a href="author.html#31701">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
