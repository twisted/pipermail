<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] AMP with a long-lived connection - results and	deferred?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20AMP%20with%20a%20long-lived%20connection%20-%20results%20and%0A%09deferred%3F&In-Reply-To=%3CCAGQ70es93-%2BNWpFTZEiD0KHS8QTeTnCX5WJbskybQz90L%3DpQag%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] AMP with a long-lived connection - results and	deferred?</H1>
    <B>Oon-Ee Ng</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20AMP%20with%20a%20long-lived%20connection%20-%20results%20and%0A%09deferred%3F&In-Reply-To=%3CCAGQ70es93-%2BNWpFTZEiD0KHS8QTeTnCX5WJbskybQz90L%3DpQag%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] AMP with a long-lived connection - results and	deferred?">ngoonee.talk at gmail.com
       </A><BR>
    <I>Wed Oct 28 00:24:24 MDT 2015</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62305">[ date ]</a>
              <a href="thread.html#62305">[ thread ]</a>
              <a href="subject.html#62305">[ subject ]</a>
              <a href="author.html#62305">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Working off the example ampserver.py and ampclient.py examples, I
wanted to build a client which maintains a single connection while
allowing the passing of messages back and forth. However I'm stuck at
one of the most basic steps, getting back the result (without
'completing' the connection).

The ampclient.py example simply connects, does a callRemote on the
resulting protocol, and adds callbacks to extract the result from a
dictionary and print it. The deferred being used in this case is
produced by connectProtocol.

I'm trying to write a client (inheriting from amp.AMP) which is
embedded in a kivy GUI, something which is quite possible using the
_threadedselect reactor.

On connection, I use the connectionMade method to save the 'self' (in
this case, the client inheriting from amp.AMP) in my kivy app. I can
then call a function which does a callRemote on this saved client,
which indeed triggers the server appropriately.

The callRemote returns a deferred (from reading docs online, a remote
reference). I can't figure out what to do with it, specifically in
terms of getting the result ('total', when calling Sum from
ampserver.py).

Assistance much appreciated.


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62305">[ date ]</a>
              <a href="thread.html#62305">[ thread ]</a>
              <a href="subject.html#62305">[ subject ]</a>
              <a href="author.html#62305">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
