<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] AMP with a long-lived connection - results and	deferred?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20AMP%20with%20a%20long-lived%20connection%20-%20results%20and%0A%09deferred%3F&In-Reply-To=%3CCAGQ70etgQne%3DWV5gK646U1mMA_hbwGSFr57aLOeTEBN905HxfQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029844.html">
   <LINK REL="Next"  HREF="029848.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] AMP with a long-lived connection - results and	deferred?</H1>
    <B>Oon-Ee Ng</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20AMP%20with%20a%20long-lived%20connection%20-%20results%20and%0A%09deferred%3F&In-Reply-To=%3CCAGQ70etgQne%3DWV5gK646U1mMA_hbwGSFr57aLOeTEBN905HxfQ%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] AMP with a long-lived connection - results and	deferred?">ngoonee.talk at gmail.com
       </A><BR>
    <I>Wed Oct 28 00:33:58 MDT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="029844.html">[Twisted-Python] AMP with a long-lived connection - results and	deferred?
</A></li>
        <LI>Next message: <A HREF="029848.html">[Twisted-Python] AMP with a long-lived connection - results and deferred?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29845">[ date ]</a>
              <a href="thread.html#29845">[ thread ]</a>
              <a href="subject.html#29845">[ subject ]</a>
              <a href="author.html#29845">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>One 'answer' that I've gotten so far is in this link -
<A HREF="http://stackoverflow.com/questions/15640393/how-to-create-bi-directional-messaging-using-amp-in-twisted-python">http://stackoverflow.com/questions/15640393/how-to-create-bi-directional-messaging-using-amp-in-twisted-python</A>
- but that doesn't seem to achieve what I want, at least not in the
way I want it. It does a callRemote from the server in the function
called by the client (using callRemote). As I understand things,
that's what deferred is meant to solve, and anyway this seems to
invalidate the reason for using amp.Command inheritence anyway (as the
response is required).

To be clear, that way does 'work', but it doesn't seem to be doing the
sort of bidirectional messaging AMP should be doing.

In summary:- how do I see the response from client side without making
a new connection every time I have something to send (as done in the
ampclient.py example)?

On Wed, Oct 28, 2015 at 2:24 PM, Oon-Ee Ng &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">ngoonee.talk at gmail.com</A>&gt; wrote:
&gt;<i> Working off the example ampserver.py and ampclient.py examples, I
</I>&gt;<i> wanted to build a client which maintains a single connection while
</I>&gt;<i> allowing the passing of messages back and forth. However I'm stuck at
</I>&gt;<i> one of the most basic steps, getting back the result (without
</I>&gt;<i> 'completing' the connection).
</I>&gt;<i>
</I>&gt;<i> The ampclient.py example simply connects, does a callRemote on the
</I>&gt;<i> resulting protocol, and adds callbacks to extract the result from a
</I>&gt;<i> dictionary and print it. The deferred being used in this case is
</I>&gt;<i> produced by connectProtocol.
</I>&gt;<i>
</I>&gt;<i> I'm trying to write a client (inheriting from amp.AMP) which is
</I>&gt;<i> embedded in a kivy GUI, something which is quite possible using the
</I>&gt;<i> _threadedselect reactor.
</I>&gt;<i>
</I>&gt;<i> On connection, I use the connectionMade method to save the 'self' (in
</I>&gt;<i> this case, the client inheriting from amp.AMP) in my kivy app. I can
</I>&gt;<i> then call a function which does a callRemote on this saved client,
</I>&gt;<i> which indeed triggers the server appropriately.
</I>&gt;<i>
</I>&gt;<i> The callRemote returns a deferred (from reading docs online, a remote
</I>&gt;<i> reference). I can't figure out what to do with it, specifically in
</I>&gt;<i> terms of getting the result ('total', when calling Sum from
</I>&gt;<i> ampserver.py).
</I>&gt;<i>
</I>&gt;<i> Assistance much appreciated.
</I>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029844.html">[Twisted-Python] AMP with a long-lived connection - results and	deferred?
</A></li>
	<LI>Next message: <A HREF="029848.html">[Twisted-Python] AMP with a long-lived connection - results and deferred?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29845">[ date ]</a>
              <a href="thread.html#29845">[ thread ]</a>
              <a href="subject.html#29845">[ subject ]</a>
              <a href="author.html#29845">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
