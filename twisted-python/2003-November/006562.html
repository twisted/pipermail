<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted Signal Handler and wxPython
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20Signal%20Handler%20and%20wxPython&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006558.html">
   <LINK REL="Next"  HREF="006563.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted Signal Handler and wxPython</H1>
    <B>Thorsten Henninger</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20Signal%20Handler%20and%20wxPython&In-Reply-To="
       TITLE="[Twisted-Python] Twisted Signal Handler and wxPython">henni at brainbot.com
       </A><BR>
    <I>Tue Nov 25 11:18:27 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="006558.html">[Twisted-Python] Woven application, objects not collected.
</A></li>
        <LI>Next message: <A HREF="006563.html">[Twisted-Python] Twisted Signal Handler and wxPython
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6562">[ date ]</a>
              <a href="thread.html#6562">[ thread ]</a>
              <a href="subject.html#6562">[ subject ]</a>
              <a href="author.html#6562">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I had a problem using wxPython together with twisted.
The following code shows, that one has to start the reactor with the 
flag &quot;installSignalHandlers=0&quot;, otherwise an SystemError occures.
How does this affect my Twsited-Application?

regards,

Thorsten

import traceback
from wxPython.wx import *
from twisted.internet import  reactor


class MyApp(wxApp):
    def OnInit(self):

        # Twisted Reactor Code
        print &quot;reator start running&quot;
        #reactor.startRunning(installSignalHandlers=0)
        #reactor.startRunning(installSignalHandlers=1)
        timerid = wxNewId()
        EVT_TIMER(self,timerid,self.OnTimer)
        self.timer=wxTimer(self,timerid)
        self.timer.Start(100,True)
        # End Twisted Code
    # Do whatever you need to do here
       
        return True

    def OnTimer(self,event):
        reactor.runUntilCurrent()
        reactor.doIteration(0)


def main():
    &quot;&quot;&quot;
    &quot;&quot;&quot;
   
    try:
        app = MyApp(0)
        print &quot;CALLING MAIN LOOP&quot;
        app.MainLoop()
        print &quot;MAIN LOOP DONE&quot;
    except SystemExit, err:
        print err
    except:
        exc_info = sys.exc_info()
        print &quot;--------------------- CAUGHT EXCECPTION:&quot;, exc_info
        traceback.print_exc(file=sys.stdout)
       

if __name__ == &quot;__main__&quot;:
    try:
        main()
    finally:
        print &quot;MAIN THREAD HAS EXITED&quot;


The following error occures on Windows 2000, Python 2.3.2 and wxPython 
2.4.2:

D:\Python23\lib\fcntl.py:7: DeprecationWarning: the FCNTL module is 
deprecated; please use fcntl
  DeprecationWarning)
reator start running
--------------------- CAUGHT EXCECPTION: (&lt;class exceptions.SystemError 
at 0x007780F0&gt;, &lt;exceptions.SystemError instance at 0x011775D0&gt;, 
&lt;traceback object at 0x011775F8&gt;)
Traceback (most recent call last):
  File &quot;E:\bbot\nextbot\gui\wxpython\application.py&quot;, line 41, in main
    app = MyApp(0)
  File &quot;D:\Python23\lib\site-packages\wxPython\wx.py&quot;, line 1945, in 
__init__
    _wxStart(self.OnInit)
  File &quot;E:\bbot\nextbot\gui\wxpython\application.py&quot;, line 18, in OnInit
    reactor.startRunning(installSignalHandlers=1)
  File &quot;D:\Python23\Lib\site-packages\twisted\internet\default.py&quot;, line 
115, in startRunning
    self._handleSignals()
  File &quot;D:\Python23\Lib\site-packages\twisted\internet\default.py&quot;, line 
87, in _handleSignals
    signal.signal(signal.SIGINT, self.sigInt)
SystemError: error return without exception set

-- 
brainbot technologies AG 
boppstrasse . 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
<A HREF="http://brainbot.com/">http://brainbot.com/</A>  mailto:<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">henni at brainbot.com</A>




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006558.html">[Twisted-Python] Woven application, objects not collected.
</A></li>
	<LI>Next message: <A HREF="006563.html">[Twisted-Python] Twisted Signal Handler and wxPython
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6562">[ date ]</a>
              <a href="thread.html#6562">[ thread ]</a>
              <a href="subject.html#6562">[ subject ]</a>
              <a href="author.html#6562">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
