<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: [Twisted-commits] Somehow the waker still messes up cfreactor, never installing waker for now
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20%5BTwisted-commits%5D%20Somehow%20the%20waker%20still%20messes%20up%20cfreactor%2C%20never%20installing%20waker%20for%20now&In-Reply-To=20031112002228.0a2a11a3.itamar%40itamarst.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006368.html">
   <LINK REL="Next"  HREF="006372.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: [Twisted-commits] Somehow the waker still messes up cfreactor, never installing waker for now</H1>
    <B>Bob Ippolito</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20%5BTwisted-commits%5D%20Somehow%20the%20waker%20still%20messes%20up%20cfreactor%2C%20never%20installing%20waker%20for%20now&In-Reply-To=20031112002228.0a2a11a3.itamar%40itamarst.org"
       TITLE="[Twisted-Python] Re: [Twisted-commits] Somehow the waker still messes up cfreactor, never installing waker for now">bob at redivi.com
       </A><BR>
    <I>Wed Nov 12 01:20:07 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="006368.html">[Twisted-Python] Re: [Twisted-commits] Somehow the waker still messes up cfreactor, never installing waker for now
</A></li>
        <LI>Next message: <A HREF="006372.html">[Twisted-Python] Re: [Twisted-commits] Somehow the waker still messes up cfreactor, never installing waker for now
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6370">[ date ]</a>
              <a href="thread.html#6370">[ thread ]</a>
              <a href="subject.html#6370">[ subject ]</a>
              <a href="author.html#6370">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Nov 12, 2003, at 12:22 AM, Itamar Shtull-Trauring wrote:

&gt;<i> On Tue, 11 Nov 2003 21:43:23 -0700
</I>&gt;<i> etrepum CVS &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">etrepum at wolfwood.twistedmatrix.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Modified files:
</I>&gt;&gt;<i> Twisted/twisted/internet/cfreactor.py 1.3 1.4
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Log message:
</I>&gt;&gt;<i> Somehow the waker still messes up cfreactor, never installing waker
</I>&gt;&gt;<i> for now
</I>&gt;<i>
</I>&gt;<i> That means threaded programs with cfreactor will be really slow.
</I>&gt;<i>
</I>&gt;<i> I think the issue is that the unix waker uses python sockets. You
</I>&gt;<i> probably want to write your own waker using whatever APIs you are 
</I>&gt;<i> using.
</I>&gt;<i>
</I>&gt;<i> While we're at it - warner, could we have the mac os x reactor also run
</I>&gt;<i> tests with cfreactor?
</I>
I don't know what the deal is, exactly, because it uses python sockets 
internally and that works perfectly fine.  I believe that something 
about the waker causes the run loop to think that it's always awake.  I 
didn't feel like looking too far into it.  That said, Apple's 
implementation of CFRunLoop does everything that the reactor does (and 
then some), including thread waking and other thread communication 
facilities.. so when I have more time I'll look into the cause and the 
appropriate solution.    IIRC the only part of Twisted that uses 
threads on its own is the DB stuff, anything else would probably be 
implemented using more native means (nobody uses cfreactor for 
cross-platform applications yet), so I don't see an immediate problem 
with ignoring the waker.  I'd rather punish threaded (from what Twisted 
sees) applications than make all applications really really slow and 
resource hungry.

-bob
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2357 bytes
Desc: not available
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20031112/fe67f30f/attachment.bin">http://twistedmatrix.com/pipermail/twisted-python/attachments/20031112/fe67f30f/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006368.html">[Twisted-Python] Re: [Twisted-commits] Somehow the waker still messes up cfreactor, never installing waker for now
</A></li>
	<LI>Next message: <A HREF="006372.html">[Twisted-Python] Re: [Twisted-commits] Somehow the waker still messes up cfreactor, never installing waker for now
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6370">[ date ]</a>
              <a href="thread.html#6370">[ thread ]</a>
              <a href="subject.html#6370">[ subject ]</a>
              <a href="author.html#6370">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
