<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] SSL.SysCallError in doRead
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20SSL.SysCallError%20in%20doRead&In-Reply-To=20031113194552.GA26576%40psychlaw.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006390.html">
   <LINK REL="Next"  HREF="006403.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] SSL.SysCallError in doRead</H1>
    <B>Jp Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20SSL.SysCallError%20in%20doRead&In-Reply-To=20031113194552.GA26576%40psychlaw.com.au"
       TITLE="[Twisted-Python] SSL.SysCallError in doRead">exarkun at intarweb.us
       </A><BR>
    <I>Thu Nov 13 09:15:51 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="006390.html">[Twisted-Python] SSL.SysCallError in doRead
</A></li>
        <LI>Next message: <A HREF="006403.html">[Twisted-Python] adbapi.Augmention
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6393">[ date ]</a>
              <a href="thread.html#6393">[ thread ]</a>
              <a href="subject.html#6393">[ subject ]</a>
              <a href="author.html#6393">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Nov 14, 2003 at 05:45:52AM +1000, Sam Jordan wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I noted the following exception while running some msn related
</I>&gt;<i> code earlier:
</I>&gt;<i> 
</I>&gt;<i> 2003/11/14 05:09 EST [PassportLogin,client] Traceback (most recent call last):
</I>&gt;<i>           File &quot;/home/sam/Twisted/twisted/python/log.py&quot;, line 65, in callWithLogger
</I>&gt;<i>             callWithContext({&quot;system&quot;: lp}, func, *args, **kw)
</I>&gt;<i>           File &quot;/home/sam/Twisted/twisted/python/log.py&quot;, line 52, in callWithContext
</I>&gt;<i>             return context.call({ILogContext: newCtx}, func, *args, **kw)
</I>&gt;<i>           File &quot;/home/sam/Twisted/twisted/python/context.py&quot;, line 32, in callWithContext
</I>&gt;<i>             return func(*args,**kw)
</I>&gt;<i>           File &quot;/home/sam/Twisted/twisted/internet/default.py&quot;, line 513, in _doReadOrWrite
</I>&gt;<i>             why = getattr(selectable, method)()
</I>&gt;<i>         --- &lt;exception caught here&gt; ---
</I>&gt;<i>           File &quot;/home/sam/Twisted/twisted/internet/tcp.py&quot;, line 98, in doRead
</I>&gt;<i>             return Connection.doRead(self)
</I>&gt;<i>           File &quot;/home/sam/Twisted/twisted/internet/tcp.py&quot;, line 234, in doRead
</I>&gt;<i>             data = self.socket.recv(self.bufferSize)
</I>&gt;<i>         SSL.SysCallError: (104, 'Connection reset by peer')
</I>&gt;<i> 
</I>&gt;<i> On closer inspection it seems that the surrounding try/except clause only
</I>&gt;<i> cares about SSL.SysCallErrors which pertain to unexpected EOF and all others
</I>&gt;<i> are re-raised. The only reason I can come up with for why this is the case is
</I>&gt;<i> that it was not anticipated that other exceptions (like the one above) could
</I>&gt;<i> arise from the given recv call. I would expect that in the above instance,
</I>&gt;<i> connectionLost should be called, but it may very well be that i'm missing some
</I>&gt;<i> subtlety so I am yet to submit a bug report.
</I>
  In tcp.py, on line 114, this exception is being caught and logged, then
CONNECTION_LOST is being returned, which should cause all the appropriate
lost-connection-callbacks to be invoked.

  The error is logged just to err on the side of being overly informative. 
It shouldn't interfere with connectionLost or clientConnectionLost.  If it
is, please do file a bug report.

  Jp

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20031113/eb30d119/attachment.pgp">http://twistedmatrix.com/pipermail/twisted-python/attachments/20031113/eb30d119/attachment.pgp</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006390.html">[Twisted-Python] SSL.SysCallError in doRead
</A></li>
	<LI>Next message: <A HREF="006403.html">[Twisted-Python] adbapi.Augmention
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6393">[ date ]</a>
              <a href="thread.html#6393">[ thread ]</a>
              <a href="subject.html#6393">[ subject ]</a>
              <a href="author.html#6393">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
