From exarkun at twistedmatrix.com  Sun Jan  1 00:05:45 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 01 Jan 2012 05:05:45 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1325394345.44.2061032935@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120101/b89d3c5c/attachment.htm 

From exarkun at twistedmatrix.com  Tue Jan  3 09:33:17 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 03 Jan 2012 14:33:17 -0000
Subject: [Twisted-Python] PB and FilePager
In-Reply-To: <2C5356FB-162D-4EE0-876E-80EC0471721D@stoppani.name>
References: <2C5356FB-162D-4EE0-876E-80EC0471721D@stoppani.name>
Message-ID: <20120103143317.2755.1940890778.divmod.xquotient.23@localhost6.localdomain6>

On 27 Jun 2011, 08:52 pm, jonathan at stoppani.name wrote:
>Hi there,
>
>I encountered a problem while dealing with file transfers using PB and 
>t.s.u.FilePager.

This looks like <http://twistedmatrix.com/trac/ticket/3445> which has 
been open for a while (and is still open).

The fix does seem straight-forward - keep track of the paused/unpaused 
state so new chunks can be written right away.  Note that reversing the 
order of the __init__ and startProducing calls probably isn't the right 
solution, as that would re-introduce 
<http://twistedmatrix.com/trac/ticket/3023>.

Anyone want to take a shot at this ticket?

Jean-Paul


From saghul at gmail.com  Wed Jan  4 06:14:57 2012
From: saghul at gmail.com (=?UTF-8?Q?Sa=C3=BAl_Ibarra_Corretg=C3=A9?=)
Date: Wed, 4 Jan 2012 12:14:57 +0100
Subject: [Twisted-Python] ConnectionMixin.loseConnection (in _newtls)
 lacking arguments
In-Reply-To: <658BF4CE-9FB4-4C7C-A48C-E409AF953721@twistedmatrix.com>
References: <CANSmkSEY0eTb-=9Okw_Bf8czgqar3PNESu2jNgfUiBgR5YSHGg@mail.gmail.com>
	<658BF4CE-9FB4-4C7C-A48C-E409AF953721@twistedmatrix.com>
Message-ID: <CANSmkSFR4v3vC9FQ4zJ3YgdwaCk8Ty+O9rbbw_cY8-H_W=on8w@mail.gmail.com>

Hi Glyph,

> Hi Sa?l,
>
> The _connDone argument there is an internal convenience for that implementation of loseConnection(); it is not part of the API. ?ITransport specifies that loseConnection takes no arguments. ?See here: <http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.ITransport.html#loseConnection>. ?You should fix your code to never pass an argument to loseConnection, as other transport implementations may also lack this argument. ?(As a bizarre accident, the IOCP reactor also has this argument in its transport implementation, but there's no reason that it necessarily should.)
>
> However, the fact that you thought otherwise is a bug in our documentation :). ?Please feel free to file tickets (<http://twistedmatrix.com/trac/newticket>) describing how you got to the loseConnection that takes an argument and why you didn't realize that you should be looking at ITransport instead :).
>

I see. I'll fix the bug and file a ticket then :-)

Thanks!

-- 
/Sa?l
http://saghul.net | http://sipdoc.net


From sweetnivi88 at gmail.com  Fri Jan  6 03:54:20 2012
From: sweetnivi88 at gmail.com (nivedita datta)
Date: Fri, 6 Jan 2012 14:24:20 +0530
Subject: [Twisted-Python] Protocol stack in twisted
Message-ID: <CA+XLstsSb3O-eLzmOKAo6skAtZKe-M2PVBH2Z1vyz111xMitJw@mail.gmail.com>

A simple query,.. Is it possible to implement protocols & protocol
stack using twisted??

Regards,
Nivedita Datta


From michaelnt at gmail.com  Fri Jan  6 06:11:09 2012
From: michaelnt at gmail.com (Michael Thompson)
Date: Fri, 6 Jan 2012 11:11:09 +0000
Subject: [Twisted-Python] Protocol stack in twisted
In-Reply-To: <CA+XLstsSb3O-eLzmOKAo6skAtZKe-M2PVBH2Z1vyz111xMitJw@mail.gmail.com>
References: <CA+XLstsSb3O-eLzmOKAo6skAtZKe-M2PVBH2Z1vyz111xMitJw@mail.gmail.com>
Message-ID: <CA+A=P1pPHpdfefOBnZ4tdA6BKu0B0G38jhoywq4nxA3K_bknRA@mail.gmail.com>

On 6 January 2012 08:54, nivedita datta <sweetnivi88 at gmail.com> wrote:

> A simple query,.. Is it possible to implement protocols & protocol
> stack using twisted??
>
>
yes, http://twistedmatrix.com/documents/current/core/howto/servers.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120106/8f38c72c/attachment.htm 

From miwinter at cisco.com  Fri Jan  6 12:47:46 2012
From: miwinter at cisco.com (Mike Winter)
Date: Fri, 6 Jan 2012 09:47:46 -0800
Subject: [Twisted-Python] module name overloading and import rules
Message-ID: <0521F74B-D3AD-4F4F-B21E-4C0F77B38C26@cisco.com>

linkhttp://stackoverflow.com/questions/8761874/module-name-overloading-and-import-path
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120106/111181cb/attachment.htm 

From exarkun at twistedmatrix.com  Sun Jan  8 00:05:26 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 08 Jan 2012 05:05:26 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1325999126.43.444357280@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120108/d4dfc014/attachment.htm 

From bino at indoakses-online.com  Mon Jan  9 00:39:00 2012
From: bino at indoakses-online.com (bino oetomo)
Date: Mon, 09 Jan 2012 12:39:00 +0700
Subject: [Twisted-Python] question about twisted+wxPython : How to migrate
	to twistd ?
Message-ID: <4F0A7D74.9030500@indoakses-online.com>

Dear All ...

I just copy and paste the code from 
http://code.activestate.com/recipes/298985/
and adding lines :
--------------
         self.allowNone = True
         self.useDateTime = False
--------------
just before line#  45,
and it work great.

I need to adopting that script to my application, but I'm not familiar 
with code line 64-78 :
--------------------
if __name__ == '__main__':

     # Initiliaze MyApp
     app = MyXMLRPCApp(False) # False -> printing stdout/stderr to shell,
                              # not in an additional wx window

     # Make wx application twisted aware
     # Must have to start "wxreactor.install()" on top before
     reactor.registerWxApp(app)

     # Make a XML-RPC Server listening to port 7080
     reactor.listenTCP(7080, server.Site(app))
-------------------

How to migrate that script to twistd, something like :
------------------
#Create Application
application = service.Application("MultiService Example")
#Create xmlrpc site
myrpc = MyRPC()
site = server.Site(myrpc)
myrpcservice = internet.TCPServer(50008, site, interface='localhost')
#Creating Multi Service
multiService = service.MultiService()
#Add our Services to multiservice
myrpcservice.setServiceParent(multiService)
#Set created application to be serviceparent of multiservice
multiService.setServiceParent(application)
------------------

Kindly please give me your enlightment.

Sincerely
-bino-



From glyph at twistedmatrix.com  Mon Jan  9 09:04:30 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 9 Jan 2012 09:04:30 -0500
Subject: [Twisted-Python] question about twisted+wxPython : How to
	migrate to twistd ?
In-Reply-To: <4F0A7D74.9030500@indoakses-online.com>
References: <4F0A7D74.9030500@indoakses-online.com>
Message-ID: <EE7983F7-2613-4AAE-8173-81D054109F1C@twistedmatrix.com>

Hi Bino,

On Jan 9, 2012, at 12:39 AM, bino oetomo wrote:

> How to migrate that script to twistd, something like :

First of all, it's probably not appropriate to launch a WX GUI with twistd.  It's possible, but you don't get a lot of benefit.  If you are running in a GUI environment, your users likely have different expectations of logging, daemonization, etc, than they would with a background daemon.

Second, your script below looks mostly sensible; I assume that "MyRPC" is a version of MyXMLRPCApp that isn't a wx.App. I'm assuming that you want to run this as a .tac file, (i.e. with "twistd -y").  If that's the case, then you're on the right track.

> ------------------
> #Create Application
> application = service.Application("MultiService Example")
> #Create xmlrpc site
> myrpc = MyRPC()
> site = server.Site(myrpc)
> myrpcservice = internet.TCPServer(50008, site, interface='localhost')
> #Creating Multi Service
> multiService = service.MultiService()
> #Add our Services to multiservice
> myrpcservice.setServiceParent(multiService)
> #Set created application to be serviceparent of multiservice
> multiService.setServiceParent(application)
> ------------------

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120109/d480eace/attachment.htm 

From bino at indoakses-online.com  Mon Jan  9 19:53:29 2012
From: bino at indoakses-online.com (bino oetomo)
Date: Tue, 10 Jan 2012 07:53:29 +0700
Subject: [Twisted-Python] test
Message-ID: <4F0B8C09.7020703@indoakses-online.com>

I don't receive any new post for several days.
Is there a problem with this list ?

-bino-


From jessica.mckellar at gmail.com  Mon Jan  9 20:10:03 2012
From: jessica.mckellar at gmail.com (Jessica McKellar)
Date: Mon, 9 Jan 2012 20:10:03 -0500
Subject: [Twisted-Python] test
In-Reply-To: <4F0B8C09.7020703@indoakses-online.com>
References: <4F0B8C09.7020703@indoakses-online.com>
Message-ID: <CAKDZRciy4LU7ri9N=VLX+fHi087Cm+r+J+i+aUewNx+siHM89w@mail.gmail.com>

Hi Bino,

I received your e-mails from today, as well as the other e-mails that
have been sent in the last couple of days, which you can check here:

http://twistedmatrix.com/pipermail/twisted-python/2012-January/thread.html

There's not a problem with the mailing list e-mails going out that I'm
aware of.

Regards,
-Jessica


On Mon, Jan 9, 2012 at 7:53 PM, bino oetomo <bino at indoakses-online.com> wrote:
> I don't receive any new post for several days.
> Is there a problem with this list ?
>
> -bino-
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From bino at indoakses-online.com  Mon Jan  9 20:14:45 2012
From: bino at indoakses-online.com (bino oetomo)
Date: Tue, 10 Jan 2012 08:14:45 +0700
Subject: [Twisted-Python] question about twisted+wxPython : How to
	migrate to twistd ?
In-Reply-To: <4F0A7D74.9030500@indoakses-online.com>
References: <4F0A7D74.9030500@indoakses-online.com>
Message-ID: <4F0B9105.1080507@indoakses-online.com>

Dear Glyph and All

I see a reply to my question via 
http://twistedmatrix.com/pipermail/twisted-python/2012-January/025076.html 
but I didn't receive it in my mail box (is there a problem with this list).

Thankyou for your reply.

Yes, I want it to run that script as .tac file.
Actualy I just need the wx part as "display" only. There is no "input" 
activity via WX.
My system will serve a driver. so the input part will use pushbuttons 
that will conected to USB via ArduinoBoard.
Thats why there is some previous post by me asking about combining 
serial with wokkel ... and I got Great enlightment from this list.

 From the script that combine wokkel and Arduino board .. I got knowlede 
on how to add more service to exixting twisted script using 
service.MultiService() and service.Application()

Basicaly I need to write a script that :
1. Display a base screen/panel/window when started
2. wait for command input via TCP/UDP/UnixSocket in JSON format
3. update the display based on variables inside incoming command

And if it not to much ... i prefer using twisted .tac file and 
service.MultiService() and service.Application().

Sincerely
-bino-


**On 01/09/2012 12:39 PM, bino oetomo wrote:
> Dear All ...
>
> I just copy and paste the code from 
> http://code.activestate.com/recipes/298985/
> and adding lines :
> --------------
>         self.allowNone = True
>         self.useDateTime = False
> --------------
> just before line#  45,
> and it work great.
>
> I need to adopting that script to my application, but I'm not familiar 
> with code line 64-78 :
> --------------------
> if __name__ == '__main__':
>
>     # Initiliaze MyApp
>     app = MyXMLRPCApp(False) # False -> printing stdout/stderr to shell,
>                              # not in an additional wx window
>
>     # Make wx application twisted aware
>     # Must have to start "wxreactor.install()" on top before
>     reactor.registerWxApp(app)
>
>     # Make a XML-RPC Server listening to port 7080
>     reactor.listenTCP(7080, server.Site(app))
> -------------------
>
> How to migrate that script to twistd, something like :
> ------------------
> #Create Application
> application = service.Application("MultiService Example")
> #Create xmlrpc site
> myrpc = MyRPC()
> site = server.Site(myrpc)
> myrpcservice = internet.TCPServer(50008, site, interface='localhost')
> #Creating Multi Service
> multiService = service.MultiService()
> #Add our Services to multiservice
> myrpcservice.setServiceParent(multiService)
> #Set created application to be serviceparent of multiservice
> multiService.setServiceParent(application)
> ------------------
>
> Kindly please give me your enlightment.
>
> Sincerely
> -bino-
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120110/dccf8fe4/attachment.htm 

From bino at indoakses-online.com  Mon Jan  9 20:18:08 2012
From: bino at indoakses-online.com (bino oetomo)
Date: Tue, 10 Jan 2012 08:18:08 +0700
Subject: [Twisted-Python] test
In-Reply-To: <CAKDZRciy4LU7ri9N=VLX+fHi087Cm+r+J+i+aUewNx+siHM89w@mail.gmail.com>
References: <4F0B8C09.7020703@indoakses-online.com>
	<CAKDZRciy4LU7ri9N=VLX+fHi087Cm+r+J+i+aUewNx+siHM89w@mail.gmail.com>
Message-ID: <4F0B91D0.6010902@indoakses-online.com>

Hi Jessica.
"Strangely" I also receive this "test" post
But I didn't receive my previous post

Sincerely
-bino-



From bino at indoakses-online.com  Mon Jan  9 20:27:04 2012
From: bino at indoakses-online.com (bino oetomo)
Date: Tue, 10 Jan 2012 08:27:04 +0700
Subject: [Twisted-Python] test
In-Reply-To: <CAKDZRciy4LU7ri9N=VLX+fHi087Cm+r+J+i+aUewNx+siHM89w@mail.gmail.com>
References: <4F0B8C09.7020703@indoakses-online.com>
	<CAKDZRciy4LU7ri9N=VLX+fHi087Cm+r+J+i+aUewNx+siHM89w@mail.gmail.com>
Message-ID: <4F0B93E8.4020002@indoakses-online.com>

Hi Jessica
On 01/10/2012 08:10 AM, Jessica McKellar wrote:
> Hi Bino,
>
> I received your e-mails from today, as well as the other e-mails that
> have been sent in the last couple of days, which you can check here:
>
> http://twistedmatrix.com/pipermail/twisted-python/2012-January/thread.html
>
> There's not a problem with the mailing list e-mails going out that I'm
> aware of.
>
I Received all the "test" thread
But I didn't receive all this thread --->
http://twistedmatrix.com/pipermail/twisted-python/2012-January/025075.html

Sincerely
-bino-


From exarkun at twistedmatrix.com  Tue Jan 10 09:19:28 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 10 Jan 2012 14:19:28 -0000
Subject: [Twisted-Python] I see,
 remote_method can also return a deferred. Perhaps we could document
 that?
In-Reply-To: <CAG4NAK6CWmeZNyzEjYNRPV94zvYyc4OjGiaEvHw_4bs8xkd51w@mail.gmail.com>
References: <CAG4NAK6CWmeZNyzEjYNRPV94zvYyc4OjGiaEvHw_4bs8xkd51w@mail.gmail.com>
Message-ID: <20120110141928.3189.898224799.divmod.xquotient.15@localhost6.localdomain6>

On 22 Sep 2011, 01:19 pm, a.libran at gmail.com wrote:
>I almost gave up choosing twisted until I found this explanation
>
>http://twistedmatrix.com/pipermail/twisted- 
>python/2004-April/007517.html
>
>which basically says a remote_method can return a deferred. In this
>case, the PB server won't return the result of the Deferred back to
>the client until the server-side callback fires. The result of the
>remote_method is then returned to the client, which then triggers
>client side's deferred callback.
>
>So, I thought one of the following would be helpful:
>
>1) An example showing remote_method returning a deferred
>
>and/or
>
>2) A section named "Server side remote_* methods can be async by
>returning deferreds" could be added as a 7th item in
>
>http://twistedmatrix.com/documents/current/core/howto/pb-usage.html
>
>.
>
>I spent some quality 30+ hours carefully reading 90% of the
>
>http://twistedmatrix.com/documents/current/core/howto/index.html
>
>and I do not remember picking this subtlety up. (Or you can point me
>the right place in doc.) (great doc btw.)
>
>Should I submit an improvement ticket for this? I could also make the
>server side example using Echoer, remote_echo, and deferToThread just
>so that whoever fixes the ticket can just copy and paste.

It looks like there is actually a ticket for this issue:

  http://twistedmatrix.com/trac/ticket/2555

with some work invested in resolving it.  Anyone care to pick up where 
the previous developer left off?

Jean-Paul


From glyph at twistedmatrix.com  Wed Jan 11 21:37:26 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 11 Jan 2012 21:37:26 -0500
Subject: [Twisted-Python] question about twisted+wxPython : How to
	migrate to twistd ?
In-Reply-To: <4F0B9105.1080507@indoakses-online.com>
References: <4F0A7D74.9030500@indoakses-online.com>
	<4F0B9105.1080507@indoakses-online.com>
Message-ID: <E4F95E47-6938-4C37-9B1D-9ECA142556BD@twistedmatrix.com>


On Jan 9, 2012, at 8:14 PM, bino oetomo wrote:

> And if it not to much ... i prefer using twisted .tac file and service.MultiService() and service.Application().

As far as I can tell, you're completely on the right track for what you want to do.  I personally wouldn't use twistd for this, but there's nothing stopping you: you just need to make sure to pass the appropriate reactor option.  As long as you do 'twistd --reactor wx -y Your-App.tac'  you should be fine.  (Although some GUI libraries are highly sensitive to the use of fork(), so you may need to toss a -n in there as well; I don't know specifically about wx.)

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120111/5cb8e040/attachment.htm 

From miwinter at cisco.com  Thu Jan 12 03:40:17 2012
From: miwinter at cisco.com (Mike Winter)
Date: Thu, 12 Jan 2012 00:40:17 -0800
Subject: [Twisted-Python] telnet works, why wont this client/protocol test?
Message-ID: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>

i can telnet to the port given in test-code below and it interacts appropriately. The connection is to a regular portforwarder and the server is an Answer-server:

class Answer(LineReceiver):

    answers = {'How are you?': 'Fine',
               'no': 'No!?!',
               None : "I don't know what you mean",
               'hello': 'hi there',
               'Whats Up': 'not much' }

    def lineReceived(self, line):
        log.debug('line: %s' % line)
        if self.answers.has_key(line):
            self.sendLine(self.answers[line])
        else:
            self.sendLine(self.answers[None])

Its not a unit-test, but it reasonably expresses code that I dont understand 

from twisted.trial.unittest import TestCase
from twisted.internet import reactor, protocol, defer
from twisted.internet.protocol import ClientFactory,ReconnectingClientFactory
from twisted.protocols.policies import WrappingFactory
from twisted.protocols import basic
import localproxy
import settings
from state import State
import engine
from server import Factory, AssertingAnswer, AssertingFactoryMixin
from assertion import URL
import logging
global log

log = logging.getLogger(__name__)
log.setLevel(settings.loglevel)

class Test(TestCase):

    def sendTraffic(self, vip, count = 1,
                    payload = 'Whats Up\n',
                    expectedResponse = 'not much'):
        '''telnet to DUT and post payload'''
        log.debug('vip: %s:%s' % (vip.host, vip.port))
        t = self
        class Hello(basic.LineReceiver):
            def dataReceived(self, data):
                log.debug('trace: %s' % data)
                return basic.LineReceiver.dataReceived(self,data)

            def lineReceived(self, line):
                log.debug('trace: %s' % line)
                t.assertEquals(line, expectedResponse)
                self.transport.loseConnection()

            def connectionMade(self):
                log.debug('trace, writing "%s"' % payload)
                assert self.transport
                self.transport.write(payload)

            def connectionLost(self, reason):
                log.debug('reason: %s' % reason)

        f = ReconnectingClientFactory()
        f.protocol = Hello
        factory = WrappingFactory(f)
        reactor.connectTCP( vip.host, vip.port, factory)
        log.debug('clientFactory: %s' % factory.__dict__)
        return factory

    def killClient(t):
        log.debug('t: %s' % t)

    def testClientConnect(self):
        vip = State(host='127.0.0.1', port = 10040)
        t = self.sendTraffic( vip)
        reactor.callLater(1, self.killClient, t)



From itamar at itamarst.org  Thu Jan 12 07:42:45 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Thu, 12 Jan 2012 07:42:45 -0500
Subject: [Twisted-Python] telnet works,
 why wont this client/protocol test?
In-Reply-To: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>
References: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>
Message-ID: <4F0ED545.5050006@itamarst.org>

At a guess, it's because by default LineReceiver splits on '\r\n', but 
you're sending only '\n'.

-Itamar


From miwinter at cisco.com  Thu Jan 12 12:56:27 2012
From: miwinter at cisco.com (Mike Winter)
Date: Thu, 12 Jan 2012 09:56:27 -0800
Subject: [Twisted-Python] telnet works,
	why wont this client/protocol test?
In-Reply-To: <4F0ED545.5050006@itamarst.org>
References: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>
	<4F0ED545.5050006@itamarst.org>
Message-ID: <2FD32B03-1590-4C9C-AB01-AE77445F3315@cisco.com>

That helps, thanks. 

I know that http processing does \r\n, I suppose there is an rfc that says this is reasonable, and LineReceiver is designed to be used in http for the same reason.

On Jan 12, 2012, at 4:42:45AM, Itamar Turner-Trauring wrote:

> At a guess, it's because by default LineReceiver splits on '\r\n', but 
> you're sending only '\n'.
> 
> -Itamar
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From itamar at itamarst.org  Thu Jan 12 13:01:43 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Thu, 12 Jan 2012 13:01:43 -0500
Subject: [Twisted-Python] telnet works,
 why wont this client/protocol test?
In-Reply-To: <2FD32B03-1590-4C9C-AB01-AE77445F3315@cisco.com>
References: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>
	<4F0ED545.5050006@itamarst.org>
	<2FD32B03-1590-4C9C-AB01-AE77445F3315@cisco.com>
Message-ID: <90a8073d0696ca7817816c9857427930.squirrel@webmail.zoteca.com>

> That helps, thanks.
>
> I know that http processing does \r\n, I suppose there is an rfc that says
> this is reasonable, and LineReceiver is designed to be used in http for
> the same reason.

So does telnet, smtp, ftp, etc..



From augustocaringi at gmail.com  Thu Jan 12 13:06:16 2012
From: augustocaringi at gmail.com (Augusto Mecking Caringi)
Date: Thu, 12 Jan 2012 16:06:16 -0200
Subject: [Twisted-Python] telnet works,
	why wont this client/protocol test?
In-Reply-To: <2FD32B03-1590-4C9C-AB01-AE77445F3315@cisco.com>
References: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>
	<4F0ED545.5050006@itamarst.org>
	<2FD32B03-1590-4C9C-AB01-AE77445F3315@cisco.com>
Message-ID: <CADFy_4GUfkmpn4NhpwWCN8EyFm74mkVXe=JT_ccn08LrHznfVA@mail.gmail.com>

On Thu, Jan 12, 2012 at 3:56 PM, Mike Winter <miwinter at cisco.com> wrote:
> That helps, thanks.
>
> I know that http processing does \r\n, I suppose there is an rfc that says this is reasonable, and LineReceiver is designed to be used in http for the same reason.

"Most textual Internet protocols (including HTTP, SMTP, FTP, IRC and
many others) mandate the use of ASCII CR+LF (0x0D 0x0A) on the
protocol level, but recommend that tolerant applications recognize
lone LF as well."

http://en.wikipedia.org/wiki/Newline#Representations

[]'s

> On Jan 12, 2012, at 4:42:45AM, Itamar Turner-Trauring wrote:
>
>> At a guess, it's because by default LineReceiver splits on '\r\n', but
>> you're sending only '\n'.
>>
>> -Itamar

-- 
Augusto Mecking Caringi


From miwinter at cisco.com  Thu Jan 12 13:20:24 2012
From: miwinter at cisco.com (Mike Winter)
Date: Thu, 12 Jan 2012 10:20:24 -0800
Subject: [Twisted-Python] telnet works,
	why wont this client/protocol test?
In-Reply-To: <CADFy_4GUfkmpn4NhpwWCN8EyFm74mkVXe=JT_ccn08LrHznfVA@mail.gmail.com>
References: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>
	<4F0ED545.5050006@itamarst.org>
	<2FD32B03-1590-4C9C-AB01-AE77445F3315@cisco.com>
	<CADFy_4GUfkmpn4NhpwWCN8EyFm74mkVXe=JT_ccn08LrHznfVA@mail.gmail.com>
Message-ID: <A4AE984D-53E9-44AB-BCB0-DC9E0438040F@cisco.com>

Thanks for the link, added to code as comment.

On Jan 12, 2012, at 10:06:16AM, Augusto Mecking Caringi wrote:

> On Thu, Jan 12, 2012 at 3:56 PM, Mike Winter <miwinter at cisco.com> wrote:
>> That helps, thanks.
>> 
>> I know that http processing does \r\n, I suppose there is an rfc that says this is reasonable, and LineReceiver is designed to be used in http for the same reason.
> 
> "Most textual Internet protocols (including HTTP, SMTP, FTP, IRC and
> many others) mandate the use of ASCII CR+LF (0x0D 0x0A) on the
> protocol level, but recommend that tolerant applications recognize
> lone LF as well."
> 
> http://en.wikipedia.org/wiki/Newline#Representations
> 
> []'s
> 
>> On Jan 12, 2012, at 4:42:45AM, Itamar Turner-Trauring wrote:
>> 
>>> At a guess, it's because by default LineReceiver splits on '\r\n', but
>>> you're sending only '\n'.
>>> 
>>> -Itamar
> 
> -- 
> Augusto Mecking Caringi
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From glyph at twistedmatrix.com  Thu Jan 12 13:33:51 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 12 Jan 2012 13:33:51 -0500
Subject: [Twisted-Python] telnet works,
	why wont this client/protocol test?
In-Reply-To: <CADFy_4GUfkmpn4NhpwWCN8EyFm74mkVXe=JT_ccn08LrHznfVA@mail.gmail.com>
References: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>
	<4F0ED545.5050006@itamarst.org>
	<2FD32B03-1590-4C9C-AB01-AE77445F3315@cisco.com>
	<CADFy_4GUfkmpn4NhpwWCN8EyFm74mkVXe=JT_ccn08LrHznfVA@mail.gmail.com>
Message-ID: <C0F8FFBE-FC25-4BDB-9B0A-C6D34B5727DF@twistedmatrix.com>

On Jan 12, 2012, at 1:06 PM, Augusto Mecking Caringi wrote:

> "Most textual Internet protocols (including HTTP, SMTP, FTP, IRC and
> many others) mandate the use of ASCII CR+LF (0x0D 0x0A) on the
> protocol level, but recommend that tolerant applications recognize
> lone LF as well."

[citation needed]

Where is the recommendation that "tolerant" applications recognize lone LF for these protocols?  Re-skimming the RFCs now, they all seem to mandate CR LF.  (Also: is there a recommendation elsewhere that delineates between tolerant and intolerant applications?)

-glyph



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120112/155c97d8/attachment.htm 

From augustocaringi at gmail.com  Thu Jan 12 13:57:03 2012
From: augustocaringi at gmail.com (Augusto Mecking Caringi)
Date: Thu, 12 Jan 2012 16:57:03 -0200
Subject: [Twisted-Python] telnet works,
	why wont this client/protocol test?
In-Reply-To: <C0F8FFBE-FC25-4BDB-9B0A-C6D34B5727DF@twistedmatrix.com>
References: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>
	<4F0ED545.5050006@itamarst.org>
	<2FD32B03-1590-4C9C-AB01-AE77445F3315@cisco.com>
	<CADFy_4GUfkmpn4NhpwWCN8EyFm74mkVXe=JT_ccn08LrHznfVA@mail.gmail.com>
	<C0F8FFBE-FC25-4BDB-9B0A-C6D34B5727DF@twistedmatrix.com>
Message-ID: <CADFy_4FtquYsBdpv0yLjVaUsMsS6Tr9QPqmb6nGcbYHGaSKLBA@mail.gmail.com>

On Thu, Jan 12, 2012 at 4:33 PM, Glyph <glyph at twistedmatrix.com> wrote:
> On Jan 12, 2012, at 1:06 PM, Augusto Mecking Caringi wrote:
>
> "Most textual Internet protocols (including HTTP, SMTP, FTP, IRC and
> many others) mandate the use of ASCII CR+LF (0x0D 0x0A) on the
> protocol level, but recommend that tolerant applications recognize
> lone LF as well."
>
>
> [citation needed]
>
> Where is the recommendation that "tolerant" applications recognize lone LF
> for these protocols? ?Re-skimming the RFCs now, they all seem to mandate CR
> LF. ?(Also: is there a recommendation elsewhere that delineates between
> tolerant and intolerant applications?)
>
> -glyph

Right.

But there is an interesting fact:

"nc" and "openssl s_client", two utilities that I use every day to
connect to diferent types of servers send only LF as default...

To use CRLF you must explicity do this:


From mithrandi at mithrandi.net  Thu Jan 12 14:21:32 2012
From: mithrandi at mithrandi.net (Tristan Seligmann)
Date: Thu, 12 Jan 2012 21:21:32 +0200
Subject: [Twisted-Python] telnet works,
	why wont this client/protocol test?
In-Reply-To: <CADFy_4FtquYsBdpv0yLjVaUsMsS6Tr9QPqmb6nGcbYHGaSKLBA@mail.gmail.com>
References: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>
	<4F0ED545.5050006@itamarst.org>
	<2FD32B03-1590-4C9C-AB01-AE77445F3315@cisco.com>
	<CADFy_4GUfkmpn4NhpwWCN8EyFm74mkVXe=JT_ccn08LrHznfVA@mail.gmail.com>
	<C0F8FFBE-FC25-4BDB-9B0A-C6D34B5727DF@twistedmatrix.com>
	<CADFy_4FtquYsBdpv0yLjVaUsMsS6Tr9QPqmb6nGcbYHGaSKLBA@mail.gmail.com>
Message-ID: <CAMcKhMSuhZR-sJNxr7LTpaY1k9WgLW9yQ8CPHD0ptXKdPYuPmQ@mail.gmail.com>

On Thu, Jan 12, 2012 at 8:57 PM, Augusto Mecking Caringi
<augustocaringi at gmail.com> wrote:
> Right.
>
> But there is an interesting fact:
>
> "nc" and "openssl s_client", two utilities that I use every day to
> connect to diferent types of servers send only LF as default...

"nc" and "openssl s_client" read bytes from stdin and send them on
exactly as-is; it's your terminal that is sending LF. The reason
openssl provides an option to translate LF to CRLF is that this is
often useful when testing line-oriented network protocols
interactively, but this just underscores the point; if you want to
communicate with a network server that expects CRLF, you should send
CRLF from your client, not expect every server out there to accept LF
as an alternative line ending.
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar


From jstpierre at mecheye.net  Thu Jan 12 14:25:15 2012
From: jstpierre at mecheye.net (Jasper St. Pierre)
Date: Thu, 12 Jan 2012 14:25:15 -0500
Subject: [Twisted-Python] telnet works,
	why wont this client/protocol test?
In-Reply-To: <CADFy_4FtquYsBdpv0yLjVaUsMsS6Tr9QPqmb6nGcbYHGaSKLBA@mail.gmail.com>
References: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>
	<4F0ED545.5050006@itamarst.org>
	<2FD32B03-1590-4C9C-AB01-AE77445F3315@cisco.com>
	<CADFy_4GUfkmpn4NhpwWCN8EyFm74mkVXe=JT_ccn08LrHznfVA@mail.gmail.com>
	<C0F8FFBE-FC25-4BDB-9B0A-C6D34B5727DF@twistedmatrix.com>
	<CADFy_4FtquYsBdpv0yLjVaUsMsS6Tr9QPqmb6nGcbYHGaSKLBA@mail.gmail.com>
Message-ID: <CAA0H+QRKrO-V6AWjTbYDkWDODEQ_wYVi2zoTRoAA=bM6N6=8TQ@mail.gmail.com>

If you really want:

    from twisted.protocols.basic import LineReceiver

    class LFLineReceiver(LineReceiver):
        delimiter = '\n'

I'm assuming that it being '\r\n' by default is because more of the
protocols that use LineReceiver use '\r\n' as their delimiter. It's
not entirely hard to switch to '\n' as the delimiter.

On Thu, Jan 12, 2012 at 1:57 PM, Augusto Mecking Caringi
<augustocaringi at gmail.com> wrote:
> On Thu, Jan 12, 2012 at 4:33 PM, Glyph <glyph at twistedmatrix.com> wrote:
>> On Jan 12, 2012, at 1:06 PM, Augusto Mecking Caringi wrote:
>>
>> "Most textual Internet protocols (including HTTP, SMTP, FTP, IRC and
>> many others) mandate the use of ASCII CR+LF (0x0D 0x0A) on the
>> protocol level, but recommend that tolerant applications recognize
>> lone LF as well."
>>
>>
>> [citation needed]
>>
>> Where is the recommendation that "tolerant" applications recognize lone LF
>> for these protocols? ?Re-skimming the RFCs now, they all seem to mandate CR
>> LF. ?(Also: is there a recommendation elsewhere that delineates between
>> tolerant and intolerant applications?)
>>
>> -glyph
>
> Right.
>
> But there is an interesting fact:
>
> "nc" and "openssl s_client", two utilities that I use every day to
> connect to diferent types of servers send only LF as default...
>
> To use CRLF you must explicity do this:
>
> From the openssl s_client man page:
>
> -crlf
> ? ? ? ? ? this option translated a line feed from the terminal into
> CR+LF as required by some servers.
>
> From the nc man page:
>
> -C ? ? ?Send CRLF as line-ending
>
> Why?
>
> --
> Augusto Mecking Caringi
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



-- 
? Jasper


From bino at indoakses-online.com  Thu Jan 12 23:13:45 2012
From: bino at indoakses-online.com (bino oetomo)
Date: Fri, 13 Jan 2012 11:13:45 +0700
Subject: [Twisted-Python] Question  : How to web test txjsonrpc ?
Message-ID: <4F0FAF79.8070304@indoakses-online.com>

Dear All ...

I have a basic txjsonrpc script, like :
---------------
from twisted.application import internet, service
from txjsonrpc.web import jsonrpc
from twisted.web import server

from twisted.internet import reactor

import traceback


class MyRPC(jsonrpc.JSONRPC):
     def __init__(self):
         self.allowNone = True
         self.useDateTime = False

         #variabel untuk menampung koneksi xmppclient
         #perlu disiapkan terlebih dahulu
     def jsonrpc_aksi(self, msg):
         print 'JSON MSG',
         print msg
         print '------'
         print msg['myvar']
         print '\n'
         return 'OK'

#Create Application
application = service.Application("Serial MultiService Example")


#build jsonrpc site
myrpc = MyRPC()
site = server.Site(myrpc)
myrpcservice = internet.TCPServer(50008, site, interface='localhost')

#Creating Multi Service
multiService = service.MultiService()
#Add our Services to multiservice
myrpcservice.setServiceParent(multiService)
#Set created application to be serviceparent of multiservice
multiService.setServiceParent(application)
---------------

Those script is work fine ...I mean can be accessed via python based 
jsonrpc client.

But now i need to call this rpc server via web interface.
Since I don't have enough knowledge on web-based JSONRPC client , i do 
search google for it ... but I can't understand.
So I ask my friend to write some simple JSONRPC client , and he send me 
this litle html
---------------

<!DOCTYPE html>
<html>
<head>
	<script  type="text/javascript"src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js  <view-source:http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js>"></script>
	<script  type="text/javascript">
		$(document).ready(function(){
				 $('#getData').live('click', function(){
						$jsonArray ='{"action" : "aksi","myval1" : "val1", "myval2" :{"myval2a":"val2a","myval2b":"val2b"}}';
						$arr = JSON.stringify($jsonArray);
						$.get("http://127.0.0.1:50008/JSONRPC",{data:$arr},function(response){
							$("#showdata").html(response);
						});						
				 });
		 });
	</script>
</head>
<body>
<button  id="getData">Get JSON Data</button>
<div  id="showdata"></div>
</body>
</html>

---------------
My log file say :
File "/usr/lib/pymodules/python2.6/simplejson/decoder.py", line 420, in 
raw_decode
         raise JSONDecodeError("No JSON object could be decoded", s, idx)
     simplejson.decoder.JSONDecodeError: No JSON object could be 
decoded: line 1 column 0 (char 0)

And I think the received web request is reported as :
----------------
2012-01-13 10:56:29+0700 [HTTPChannel,3,127.0.0.1] 127.0.0.1 - - 
[13/Jan/2012:03:56:29 +0000] "GET 
/JSONRPC?data=%22%7B%5C%22action%5C%22+%3A+%5C%22aksi%5C%22%2C%5C%22myval1%5C%22+%3A+%5C%22val1%5C%22%2C+%5C%22myval2%5C%22+%3A%7B%5C%22myval2a%5C%22%3A%5C%22val2a%5C%22%2C%5C%22myval2b%5C%22%3A%5C%22val2b%5C%22%7D%7D%22 
HTTP/1.1" 500 14369 "http://127.0.0.1/taxi-get.html" "Mozilla/5.0 (X11; 
U; Linux i686; en-US; rv:1.9.2.18) Gecko/20110628 Ubuntu/10.10 
(maverick) Firefox/3.6.18"
----------------


So , kindly please give me (or refer me to)  any simple sample of 
web-based JSONRPC client .. using GET and/or POS methode ?

Sincerely
-bino-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120113/17616fe6/attachment-0001.htm 

From bino at indoakses-online.com  Fri Jan 13 03:46:43 2012
From: bino at indoakses-online.com (bino oetomo)
Date: Fri, 13 Jan 2012 15:46:43 +0700
Subject: [Twisted-Python] txjsonrpc.web2 ?
Message-ID: <4F0FEF73.7090301@indoakses-online.com>

Dear All ...
I try to use txjsonrpc web2.
I download the source from 
http://pypi.python.org/packages/source/t/txJSON-RPC/txJSON-RPC-0.3.1.tar.gz

after extracting and installing .. I go to the examples/web2 directory ...
and run :
bino at bino-desktop:~/Documents/IWIC/JSONRPC/txJSON-RPC-0.3.1/examples/web2$ 
twistd -ny ./server.tac -l ./server.log  --pidfile server.pid
---------------------------------------
and I got exception :

--- <exception caught here> ---
   File "/usr/lib/python2.6/dist-packages/twisted/application/app.py", 
line 450, in getApplication
     application = service.loadApplication(filename, style, passphrase)
   File 
"/usr/lib/python2.6/dist-packages/twisted/application/service.py", line 
390, in loadApplication
     application = sob.loadValueFromFile(filename, 'application', 
passphrase)
   File "/usr/lib/python2.6/dist-packages/twisted/persisted/sob.py", 
line 210, in loadValueFromFile
     exec fileObj in d, d
   File "./server.tac", line 1, in <module>
     from twisted.web2 import server
exceptions.ImportError: No module named web2

-------------------

I try to install newst twisted from svn ... but got same exception.

Question : Where can i got twisted.web2 ?

Sincerely
-bino-


From jaroslaw.fedewicz at gmail.com  Fri Jan 13 04:46:26 2012
From: jaroslaw.fedewicz at gmail.com (Yaroslav Fedevych)
Date: Fri, 13 Jan 2012 11:46:26 +0200
Subject: [Twisted-Python] txjsonrpc.web2 ?
In-Reply-To: <4F0FEF73.7090301@indoakses-online.com>
References: <4F0FEF73.7090301@indoakses-online.com>
Message-ID: <4F0FFD72.3000703@gmail.com>

On 13.01.12 10:46, bino oetomo wrote:

> I try to install newst twisted from svn ... but got same exception.
>
> Question : Where can i got twisted.web2 ?

If I recall correctly, twisted.web2 was deemed obsolete and unmaintained 
a few years ago and has been finally decommissioned fairly  recently. 
twisted.web2 is no more. Ceased to be. Kicked the bucket. You should 
really use twisted.web, since everything that was remotely good in web2 
was merged there.

Maybe contact the author of txJSONRPC and ask if he ever plans to update 
his code.

-- 
Yaroslav Fedevych
jaroslaw.fedewicz at gmail.com
Custom networked sofware solutions
tel. +380685061839
      +48222472352
Skype: jaroslaw.fedewicz


From tobias.oberstein at tavendo.de  Fri Jan 13 06:20:44 2012
From: tobias.oberstein at tavendo.de (Tobias Oberstein)
Date: Fri, 13 Jan 2012 03:20:44 -0800
Subject: [Twisted-Python] Review of kqueue reactor patch (ticket 1918)
Message-ID: <634914A010D0B943A035D226786325D42D14E50F82@EXVMBX020-12.exch020.serverdata.net>

Hi all,

the latest patch contained in

http://twistedmatrix.com/trac/ticket/1918

is - after some iterations - now in a "ready for final review state" for some weeks now.

I'd like to ask if someone has time to review it so it can be finally merged and the issue closed .. after 6 years;)

Cheers,
Tobias 


From itamar at itamarst.org  Fri Jan 13 08:34:45 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Fri, 13 Jan 2012 08:34:45 -0500
Subject: [Twisted-Python] txjsonrpc.web2 ?
In-Reply-To: <4F0FFD72.3000703@gmail.com>
References: <4F0FEF73.7090301@indoakses-online.com>
	<4F0FFD72.3000703@gmail.com>
Message-ID: <4F1032F5.1040309@itamarst.org>

On 01/13/2012 04:46 AM, Yaroslav Fedevych wrote:
> On 13.01.12 10:46, bino oetomo wrote:
>
>> I try to install newst twisted from svn ... but got same exception.
>>
>> Question : Where can i got twisted.web2 ?
> If I recall correctly, twisted.web2 was deemed obsolete and unmaintained
> a few years ago and has been finally decommissioned fairly  recently.
> twisted.web2 is no more. Ceased to be. Kicked the bucket. You should
> really use twisted.web, since everything that was remotely good in web2
> was merged there.
Sadly not everything in web2 has made it to twisted.web, yet. But yes, 
web2 is dead.



From jaroslaw.fedewicz at gmail.com  Fri Jan 13 08:38:08 2012
From: jaroslaw.fedewicz at gmail.com (Yaroslav Fedevych)
Date: Fri, 13 Jan 2012 15:38:08 +0200
Subject: [Twisted-Python] txjsonrpc.web2 ?
In-Reply-To: <4F1032F5.1040309@itamarst.org>
References: <4F0FEF73.7090301@indoakses-online.com>
	<4F0FFD72.3000703@gmail.com> <4F1032F5.1040309@itamarst.org>
Message-ID: <4F1033C0.40806@gmail.com>

On 13.01.12 15:34, Itamar Turner-Trauring wrote:

> Sadly not everything in web2 has made it to twisted.web, yet. But yes,
> web2 is dead.

Well, I thought those things at least made into tickets, and the sole 
fact they were not backported tells about their relative importance to 
Twisted-using folks.

-- 
Yaroslav Fedevych
jaroslaw.fedewicz at gmail.com
Custom networked sofware solutions
tel. +380685061839
      +48222472352
Skype: jaroslaw.fedewicz


From mostawesomedude at gmail.com  Fri Jan 13 10:45:48 2012
From: mostawesomedude at gmail.com (Corbin Simpson)
Date: Fri, 13 Jan 2012 07:45:48 -0800
Subject: [Twisted-Python] txjsonrpc.web2 ?
In-Reply-To: <4F1033C0.40806@gmail.com>
References: <4F0FEF73.7090301@indoakses-online.com>
	<4F0FFD72.3000703@gmail.com> <4F1032F5.1040309@itamarst.org>
	<4F1033C0.40806@gmail.com>
Message-ID: <CALiqSLdQ1S83Qz-0aZP8r47Vzt9LwN7wtw8fi6KMUQnTTng5DA@mail.gmail.com>

On Fri, Jan 13, 2012 at 5:38 AM, Yaroslav Fedevych
<jaroslaw.fedewicz at gmail.com> wrote:
> On 13.01.12 15:34, Itamar Turner-Trauring wrote:
>
>> Sadly not everything in web2 has made it to twisted.web, yet. But yes,
>> web2 is dead.
>
> Well, I thought those things at least made into tickets, and the sole
> fact they were not backported tells about their relative importance to
> Twisted-using folks.

Things like Deferred support in the Web API weren't ported because
there was no consensus on how to do it without breaking existing Web
users. I think that that is the reason why there are tickets for a
successor to IResource.

~ C.

-- 
When the facts change, I change my mind. What do you do, sir? ~ Keynes

Corbin Simpson
<MostAwesomeDude at gmail.com>


From exarkun at twistedmatrix.com  Fri Jan 13 13:23:01 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 13 Jan 2012 18:23:01 -0000
Subject: [Twisted-Python] txjsonrpc.web2 ?
In-Reply-To: <CALiqSLdQ1S83Qz-0aZP8r47Vzt9LwN7wtw8fi6KMUQnTTng5DA@mail.gmail.com>
References: <4F0FEF73.7090301@indoakses-online.com>
	<4F0FFD72.3000703@gmail.com> <4F1032F5.1040309@itamarst.org>
	<4F1033C0.40806@gmail.com>
	<CALiqSLdQ1S83Qz-0aZP8r47Vzt9LwN7wtw8fi6KMUQnTTng5DA@mail.gmail.com>
Message-ID: <20120113182301.3189.943726755.divmod.xquotient.198@localhost6.localdomain6>

On 03:45 pm, mostawesomedude at gmail.com wrote:
>On Fri, Jan 13, 2012 at 5:38 AM, Yaroslav Fedevych
><jaroslaw.fedewicz at gmail.com> wrote:
>>On 13.01.12 15:34, Itamar Turner-Trauring wrote:
>>>Sadly not everything in web2 has made it to twisted.web, yet. But 
>>>yes,
>>>web2 is dead.
>>
>>Well, I thought those things at least made into tickets, and the sole
>>fact they were not backported tells about their relative importance to
>>Twisted-using folks.
>
>Things like Deferred support in the Web API weren't ported because
>there was no consensus on how to do it without breaking existing Web
>users.

This is sort of true.
>I think that that is the reason why there are tickets for a
>successor to IResource.

But this is a much more useful piece of information.  Or, from another 
perspective, the consensus on how to do it is to introduce a new 
interface. :)

Jean-Paul


From glyph at twistedmatrix.com  Fri Jan 13 22:55:25 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 13 Jan 2012 22:55:25 -0500
Subject: [Twisted-Python] txjsonrpc.web2 ?
In-Reply-To: <20120113182301.3189.943726755.divmod.xquotient.198@localhost6.localdomain6>
References: <4F0FEF73.7090301@indoakses-online.com>
	<4F0FFD72.3000703@gmail.com> <4F1032F5.1040309@itamarst.org>
	<4F1033C0.40806@gmail.com>
	<CALiqSLdQ1S83Qz-0aZP8r47Vzt9LwN7wtw8fi6KMUQnTTng5DA@mail.gmail.com>
	<20120113182301.3189.943726755.divmod.xquotient.198@localhost6.localdomain6>
Message-ID: <6D8F8730-B8CF-45AD-BCB1-22E02282C241@twistedmatrix.com>


On Jan 13, 2012, at 1:23 PM, exarkun at twistedmatrix.com wrote:

> On 03:45 pm, mostawesomedude at gmail.com wrote:
>> On Fri, Jan 13, 2012 at 5:38 AM, Yaroslav Fedevych
>> <jaroslaw.fedewicz at gmail.com> wrote:
>>> On 13.01.12 15:34, Itamar Turner-Trauring wrote:
>>>> Sadly not everything in web2 has made it to twisted.web, yet. But 
>>>> yes,
>>>> web2 is dead.
>>> 
>>> Well, I thought those things at least made into tickets, and the sole
>>> fact they were not backported tells about their relative importance to
>>> Twisted-using folks.
>> 
>> Things like Deferred support in the Web API weren't ported because
>> there was no consensus on how to do it without breaking existing Web
>> users.
> 
> This is sort of true.
>> I think that that is the reason why there are tickets for a
>> successor to IResource.
> 
> But this is a much more useful piece of information.  Or, from another 
> perspective, the consensus on how to do it is to introduce a new 
> interface. :)

An even more useful bit of information is that the ticket in question is here:

http://twistedmatrix.com/trac/ticket/5152

and anyone who would like to contribute to its continued progress is welcome to do so :).

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120113/05e14f84/attachment.htm 

From glyph at twistedmatrix.com  Fri Jan 13 22:59:27 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 13 Jan 2012 22:59:27 -0500
Subject: [Twisted-Python] Review of kqueue reactor patch (ticket 1918)
In-Reply-To: <634914A010D0B943A035D226786325D42D14E50F82@EXVMBX020-12.exch020.serverdata.net>
References: <634914A010D0B943A035D226786325D42D14E50F82@EXVMBX020-12.exch020.serverdata.net>
Message-ID: <CF5BE68B-E445-4449-A316-547EFB01F27E@twistedmatrix.com>


On Jan 13, 2012, at 6:20 AM, Tobias Oberstein wrote:

> Hi all,
> 
> the latest patch contained in
> 
> http://twistedmatrix.com/trac/ticket/1918
> 
> is - after some iterations - now in a "ready for final review state" for some weeks now.
> 
> I'd like to ask if someone has time to review it so it can be finally merged and the issue closed .. after 6 years;)
> 
> Cheers,
> Tobias 


Hi Tobias,

I, too, would like to see this reviewed, and I hope I will find some time to do it myself.  (Actually I really hope that someone else will find the time to do it before that, but, failing that...)

However, our reviewer bandwidth has recently decreased somewhat, as you can see from a quick comparison between <http://twistedmatrix.com/highscores/> and <http://twistedmatrix.com/highscores/?time=2011-12-01>.

The best way to get your tickets reviewed is to pitch in and do some code reviews of other tickets in the meanwhile, so the hypothetical perfectly stochastic Twisted ticket reviewer will be more likely to select your ticket from the list available on <http://twistedmatrix.com/trac/report/15>.

Not that I in any way object to your agitating for a review of this specific ticket, though: people should feel free to do that as well.  If anything, consider this a bump, to keep this at the front of everyone else's mind.

Now: somebody, go review that ticket :).

-glyph




From exarkun at twistedmatrix.com  Sun Jan 15 00:05:24 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 15 Jan 2012 05:05:24 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1326603924.33.769195600@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120115/a20592bd/attachment.htm 

From bino at indoakses-online.com  Sun Jan 15 21:56:56 2012
From: bino at indoakses-online.com (bino oetomo)
Date: Mon, 16 Jan 2012 09:56:56 +0700
Subject: [Twisted-Python] still, txjson-rpc question
Message-ID: <4F1391F8.8050606@indoakses-online.com>

Dear All ..
I just test my simple txjson-rpc server with PHP , and found it 'works'

Here is the also simple php script i use
------START---------
<?php
require_once './jsonRPCClient.php';
//php json rpc class is taken from http://jsonrpcphp.org/
$myExample = new jsonRPCClient('http://127.0.0.1:50008');

// performs some basic operation
echo '<b>Attempt to perform basic operations</b><br />'."\n";
try {
     echo 'Your name is <i>'.$myExample->aksi('This is PHP 
CALL').'</i><br />'."\n";
} catch (Exception $e) {
     echo nl2br($e->getMessage()).'<br />'."\n";
}

?>
------STOP----------

Looks like the serverside able to parse posted params
------Start: serverlog------------
2012-01-16 09:21:35+0700 [HTTPChannel,8,127.0.0.1] JSON MSG This is PHP CALL
2012-01-16 09:21:35+0700 [HTTPChannel,8,127.0.0.1] ------
2012-01-16 09:21:35+0700 [HTTPChannel,8,127.0.0.1]
2012-01-16 09:21:35+0700 [HTTPChannel,8,127.0.0.1]
2012-01-16 09:21:35+0700 [HTTPChannel,8,127.0.0.1] 127.0.0.1 - - 
[16/Jan/2012:02:21:35 +0000] "POST / HTTP/1.0" 200 43 "-" "-"
------STOP--------------------------

But there is still 'small' problem.

I just put ----> return 'OK' to the end of my rpc method,
but RPC client also need 'RESPON ID' with the same value of it's 
'REQUEST ID'

My PHP script catch this exception and said --> Incorrect response id 
(request id: 1, response id: )

Is there any clue to fix this problem ?

Sincerely
-bino-


From techtonik at gmail.com  Tue Jan 17 06:51:52 2012
From: techtonik at gmail.com (anatoly techtonik)
Date: Tue, 17 Jan 2012 14:51:52 +0300
Subject: [Twisted-Python] 2011 Totals
Message-ID: <CAPkN8xK6FgdtH6wV_-EW2Er9fH0SFMiSxhuOLL2ahLpizkbq1Q@mail.gmail.com>

I want to see how did I score in 2011!
http://twistedmatrix.com/highscores/?time=2011-12-01

plz.plz.plz.  :b
-- 
anatoly t.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120117/fd727bda/attachment.htm 

From tom.sheffler at gmail.com  Wed Jan 18 12:39:41 2012
From: tom.sheffler at gmail.com (Tom Sheffler)
Date: Wed, 18 Jan 2012 09:39:41 -0800
Subject: [Twisted-Python] Python multiprocessing and Twisted stopService -
	success story
Message-ID: <CAMBtMcsY5f1aWVi-J8ajt74=N6Cjgs0whQDU9HHia84hB5ByqQ@mail.gmail.com>

We are using Py2.6's multiprocessing with Twisted and things are working
nicely.  I thought I'd pass on something that seems to work pretty well.
 Comments welcome.

I am using multiprocessing to spawn long-running worker processes as
children of Twisted.  When Twisted is killed, I want the children to be
unceremoniously killed as well.  I looked into signal handlers, but
creating a service that kills the child processes ended up being simpler
and is working well with twistd daemonization.

class MultiprocessingStopService(Service):

    def stopService(self):
        import multiprocessing
        for p in multiprocessing.active_children():
            p.terminate()
        Service.stopService(self)

and in my main service maker:

        s = MultiService()
    stopper  = MultiprocessingStopService()
    stopper.setServiceParent(s)

Perhaps this will be helpful to someone.

-T
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120118/7dc82331/attachment.htm 

From moijes12 at gmail.com  Thu Jan 19 07:21:48 2012
From: moijes12 at gmail.com (moses dsouza)
Date: Thu, 19 Jan 2012 17:51:48 +0530
Subject: [Twisted-Python] regarding ticket #2328
Message-ID: <CAKkXvca2XsYuY2wf4hxKzJma0=c8WR12kEo6gBrNbfN7_dXrxA@mail.gmail.com>

Hi

Can anyone provide any ideas how to get started on this one ? Is this still
open ?

regards
moijes12
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120119/282a83fa/attachment.htm 

From facundobatista at gmail.com  Thu Jan 19 09:19:47 2012
From: facundobatista at gmail.com (Facundo Batista)
Date: Thu, 19 Jan 2012 11:19:47 -0300
Subject: [Twisted-Python] Finding out the IP which it failed to connect
Message-ID: <CAM09pzSmHFQ0K68oDxj-fkH1TyOGq9XhcNo-hsxPAL5+T1ibdA@mail.gmail.com>

I have some code that uses a twisted.web.client.HTTPClientFactory.

I've found that because some issues (firewall rules, not relevant to
the problem), I experienced failures to connect.

More specifically, I told it to connect to one particular address, and
because of DNS load distribution, that address converted to several
different IPs, and one of that IPs was not open, so it failed to
connect with a TCPTimedOutError (code 110).

When it failed to connect, it executed the "clientConnectionFailed"
method of HTTPClientFactory, which receives a
twisted.internet.tcp.Connector instance, and the reason of the
failure.

The question is: Is there a way, at that point (when
clientConnectionFailed is called), to find out *to which IP* it failed
to connect?

Thank you very much!

-- 
.? ? Facundo

Blog: http://www.taniquetil.com.ar/plog/
PyAr: http://www.python.org/ar/


From Hanusz at aegtranzcom.com  Thu Jan 19 10:37:14 2012
From: Hanusz at aegtranzcom.com (Hanusz L.)
Date: Thu, 19 Jan 2012 16:37:14 +0100
Subject: [Twisted-Python] for reference - how to get ssl certificate from a
	xmlrpc function
Message-ID: <B06FDC00E1358B48ACD6C2254D4C9E3AD8ED583B@MS-01>

I had some difficulty to find how to get the ssl certificate from the xmlrpc function but I found how to do it :
You can get the protocol from the xmlrpc function with @withRequest
http://twistedmatrix.com/documents/11.1.0/api/twisted.web.xmlrpc.withRequest.html
Then you can use getPeerCertificate from the transport

        @withRequest
        def xmlrpc_helloworld(self,request):
            return 'Hello ' +  request.channel.transport.getPeerCertificate().get_subject().commonName


#####################################################################################
This e-mail message has been scanned for Viruses and Content and cleared 
by Mailsecurity software
#####################################################################################
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120119/2e7ecc21/attachment.htm 

From Hanusz at aegtranzcom.com  Thu Jan 19 11:41:00 2012
From: Hanusz at aegtranzcom.com (Hanusz L.)
Date: Thu, 19 Jan 2012 17:41:00 +0100
Subject: [Twisted-Python] xmlrpc function return message to client
	asynchronously
Message-ID: <B06FDC00E1358B48ACD6C2254D4C9E3AD8ED585F@MS-01>


I'd like to create a xmlrpc function get_message with the following characteristic : 
 - If the server doesn't have any message to send the client, the server will answer with a timeout after 60s (and the client can retry)
 - If the server has a message to send to the client, the answer is sent directly

To do that, can I do the following:
- create a deferred in the xmlrpc function with a calllater of 60s and keep a reference to this deferred in the factory
  * If the server has no message to send, the deferred will be called by the reactor and answer a timeout
 * If the server has a message to send, it will call the deferred in his own code (with a parameter ?) before the reactor and answer the message.

Is it possible to call a deferred before the reactor like this ?

Thanks.
Leszek
#####################################################################################
This e-mail message has been scanned for Viruses and Content and cleared 
by Mailsecurity software
#####################################################################################


From mithrandi at mithrandi.net  Thu Jan 19 12:02:50 2012
From: mithrandi at mithrandi.net (Tristan Seligmann)
Date: Thu, 19 Jan 2012 19:02:50 +0200
Subject: [Twisted-Python] xmlrpc function return message to client
	asynchronously
In-Reply-To: <B06FDC00E1358B48ACD6C2254D4C9E3AD8ED585F@MS-01>
References: <B06FDC00E1358B48ACD6C2254D4C9E3AD8ED585F@MS-01>
Message-ID: <CAMcKhMRfYeNqWWR-9AXsyfm9Sigfh0vFeBeH8Joy7JnaGKmmdQ@mail.gmail.com>

On Thu, Jan 19, 2012 at 6:41 PM, Hanusz L. <Hanusz at aegtranzcom.com> wrote:
>
> I'd like to create a xmlrpc function get_message with the following characteristic :
> ?- If the server doesn't have any message to send the client, the server will answer with a timeout after 60s (and the client can retry)
> ?- If the server has a message to send to the client, the answer is sent directly
>
> To do that, can I do the following:
> - create a deferred in the xmlrpc function with a calllater of 60s and keep a reference to this deferred in the factory
> ?* If the server has no message to send, the deferred will be called by the reactor and answer a timeout
> ?* If the server has a message to send, it will call the deferred in his own code (with a parameter ?) before the reactor and answer the message.

The object returned by callLater() provides the IDelayedCall[1]
interface. If you keep a reference to this object as well as the
deferred, then you can cancel the call when you return a response by
calling the .cancel() method.

[1] http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IDelayedCall.html
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar


From glyph at twistedmatrix.com  Thu Jan 19 12:45:04 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 19 Jan 2012 12:45:04 -0500
Subject: [Twisted-Python] regarding ticket #2328
In-Reply-To: <CAKkXvca2XsYuY2wf4hxKzJma0=c8WR12kEo6gBrNbfN7_dXrxA@mail.gmail.com>
References: <CAKkXvca2XsYuY2wf4hxKzJma0=c8WR12kEo6gBrNbfN7_dXrxA@mail.gmail.com>
Message-ID: <F946751C-E573-4FCC-A5BF-BBDC65D74054@twistedmatrix.com>


On Jan 19, 2012, at 7:21 AM, moses dsouza wrote:

> Hi
> 
> Can anyone provide any ideas how to get started on this one ?


Talking to Ralph Meijer (are you listening, Ralph?) would be a good place to get started.

Also, http://twistedmatrix.com/trac/ticket/2320 ("s2s") is (if I understand correctly) a prerequisite for a useful jabber implementation, otherwise you won't be able to talk to people on other hosts.

Other than that, just reading some relevant XEPs (<http://xmpp.org/xmpp-protocols/xmpp-extensions/>) and implementing any functionality that is missing from twisted.words.

> Is this still open ?

Yes, absolutely.  Not only is it open, it is a critical missing piece of twisted.words, in my opinion.  Thanks for looking at it, please feel free to keep posting to this list with more questions if you need any help.

-glyph



From jaroslaw.fedewicz at gmail.com  Thu Jan 19 13:07:28 2012
From: jaroslaw.fedewicz at gmail.com (Yaroslav Fedevych)
Date: Thu, 19 Jan 2012 20:07:28 +0200
Subject: [Twisted-Python] regarding ticket #2328
In-Reply-To: <F946751C-E573-4FCC-A5BF-BBDC65D74054@twistedmatrix.com>
References: <CAKkXvca2XsYuY2wf4hxKzJma0=c8WR12kEo6gBrNbfN7_dXrxA@mail.gmail.com>
	<F946751C-E573-4FCC-A5BF-BBDC65D74054@twistedmatrix.com>
Message-ID: <4F185BE0.90901@gmail.com>

I, for one, second the question.

What I'm currently missing is even the basic information on what, more 
exactly, Twisted Words is and what it is not. Recently, I heard some 
potential customer talking about a universal messaging gateway (multiple 
protocols (including email), throttling, in some cases ? per-message 
charging, messaging storage). I was wondering if t.words is something 
which is exactly right to use for projects like that and what facilities 
it provides to help me.

Currently I see it is mostly client-oriented. I can only see an IRC 
protocol (server-side), I however don't see what interfaces I need to 
implement for a working pluggable messaging server. Maybe I'm looking at 
wrong places or misunderstand the purpose of t.words altogether.

-- 
Yaroslav Fedevych
jaroslaw.fedewicz at gmail.com
Custom networked sofware solutions
tel. +380685061839
      +48222472352
Skype: jaroslaw.fedewicz


From Hanusz at aegtranzcom.com  Thu Jan 19 13:15:48 2012
From: Hanusz at aegtranzcom.com (Hanusz L.)
Date: Thu, 19 Jan 2012 19:15:48 +0100
Subject: [Twisted-Python] questions about testing xmlrpc server with ssl -
 problems with more than 1000 requests
Message-ID: <B06FDC00E1358B48ACD6C2254D4C9E3AD8ED5869@MS-01>

I did some testing between a twisted xmlrpc ssl server and a twisted client with lots of simultaneous requests.
I'm using windows (don't have the choice...), python 2.7, twisted 11.1 and both server and client are on the same computer... (Xeon 2Ghz 3GB of RAM)

The client is configured to get a number of "Hello" answers and if there is a problem on the connection, it will try again with a calllater of 1second

If the number of requests is low (<100), there is no problem.
With 200 requests, there is some errors "Connection to the other side was lost in a non-clean fashion." but the client can still get all the answers by retrying.
If I try to increase the number of requests, the number of retries is rising very fast and at some point the client is unable to get any answer (with errors like "User timeout caused connection failure")
100 request - no retries 0.688 s
200 requests - 37 retries 1.5s
500 requests - 395 retries 4.2s
750 requests - 1205 retries  - 36.4s
1500 requests - too much

In the client the time is measured between the start of the reactor and the reception of each answer.

 What I don't understand is that it seems no answer is parsed before all the messages are received. 
For example for the 750 requests, the first message is parsed after 32.1s

My questions are the following:
- what is happening ?
- why are all messages parsed at the end ? Priority of the reactor ?
- is it possible to limit the number of incoming connections globally and/or for each client ? How ? Same for outgoing connections in the client.
- to be able to see what is going on, is it possible to print the number of connections (counting connectionMade and connectionLost or is there a better method?), and the number of callbacks waiting in the reactor ?
- is there a maximum number of callbacks waiting in the reactor ?

The code I used is below.
Modified from http://twistedmatrix.com/pipermail/twisted-python/2007-May/015357.html

Thanks for your help.

##########################
xmlrpc_ssl_helloworld_server.py
##########################

from twisted.web import xmlrpc, server, http
from twisted.internet import reactor, ssl
from twisted.web.xmlrpc import withRequest

class Engine:
    def __init__(self):
        self.clientWS_ip_address = "127.0.0.1"
        self.clientWS_port = 8010
        self.clientWS = ClientWebServiceListener(self.clientWS_ip_address,self.clientWS_port,self)
        self.clientWS.start()

class ClientWebServiceListener():

    class XmlRpcFunctions(xmlrpc.XMLRPC):

        @withRequest
        def xmlrpc_helloworld(self,request):
            return 'Hello ' +  request.channel.transport.getPeerCertificate().get_subject().commonName

    def __init__(self,ip_address,port,engine):
        self.engine = engine
        self.ip_address = ip_address
        self.port = port

    def start(self):
        ctx = self.makeSSLContext(myKey='server.pem',trustedCA='cacert.pem')
        self.listening_port = reactor.listenSSL(self.port, server.Site(self.XmlRpcFunctions()) ,ctx)        

    def makeSSLContext(self,myKey,trustedCA):
        '''Returns an ssl Context Object
        @param myKey a pem formated key and certificate with for my current host
        the other end of this connection must have the cert from the CA that signed this key
        @param trustedCA a pem formated certificat from a CA you trust
        you will only allow connections from clients signed by this CA
        and you will only allow connections to a server signed by this CA
        '''
        fd = open(myKey,'r')
        theCert = ssl.PrivateCertificate.loadPEM(fd.read())
        fd.close()
        fd = open(trustedCA,'r')
        theCA = ssl.Certificate.loadPEM(fd.read())
        fd.close()
        ctx = theCert.options(theCA)

     # Now the options you can set look like Standard OpenSSL Library options

     # The SSL protocol to use, one of SSLv23_METHOD, SSLv2_METHOD,
     # SSLv3_METHOD, TLSv1_METHOD. Defaults to TLSv1_METHOD.
        ctx.method = ssl.SSL.TLSv1_METHOD

     # If True, verify certificates received from the peer and fail
     # the handshake if verification fails. Otherwise, allow anonymous
     # sessions and sessions with certificates which fail validation.
        ctx.verify = True

     # Depth in certificate chain down to which to verify.
        ctx.verifyDepth = 1

     # If True, do not allow anonymous sessions.
        ctx.requireCertification = True

     # If True, do not re-verify the certificate on session resumption.
        ctx.verifyOnce = True

     # If True, generate a new key whenever ephemeral DH parameters are used
     # to prevent small subgroup attacks.
        ctx.enableSingleUseKeys = True

     # If True, set a session ID on each context. This allows a shortened
     # handshake to be used when a known client reconnects.
        ctx.enableSessions = True

     # If True, enable various non-spec protocol fixes for broken
     # SSL implementations.
        ctx.fixBrokenPeers = False

        return ctx            

if __name__ == '__main__' :
    e = Engine()
    print "Starting reactor now."
    reactor.run()


##########################
xmlrpc_ssl_helloworld_client.py
##########################

import sys
import time
from twisted.web import xmlrpc, server
from twisted.internet import reactor, ssl
from datetime import datetime

class wstest():
    times=[]

    def __init__(self,port,nb_test):
        self.nb_test=0
        self.i=0
        self.nb_retry=0
        ctx = self.makeSSLContext(myKey='client.pem', trustedCA='cacert.pem')
        self.proxy = Proxy('https://localhost:'+str(port)+'/')
        self.proxy.setSSLClientContext(ctx)
        self.port = port
        
    def printValue(self,value):
        time_diff = datetime.now() - self.time_begin
        ms_time_diff = time_diff.microseconds / 1000 + time_diff.seconds * 1000
        self.times.append(ms_time_diff)
        self.i = self.i + 1
        print repr(value) + ' - ' + str(self.i)
        if self.i == nb_test:
            print 'Nb retrys : ' + str(self.nb_retry)
            for j in self.times:
                print str(j) + ',',
            reactor.stop()
    
    def retry_connect(self):
        self.proxy.callRemote('helloworld').addCallbacks(self.printValue,self.err_received)

    def err_received(self,failure):
        print "Error - retrying"
        sys.stderr.write(str(failure))
        self.nb_retry = self.nb_retry + 1
        reactor.callLater(1,self.retry_connect)

    def makeSSLContext(self,myKey,trustedCA):
        '''Returns an ssl Context Object
        @param myKey a pem formated key and certifcate with for my current host
            the other end of this connection must have the cert from the CA
            that signed this key
        @param trustedCA a pem formated certificat from a CA you trust
            you will only allow connections from clients signed by this CA
            and you will only allow connections to a server signed by this CA
        '''

        # our goal in here is to make a SSLContext object to pass to connectSSL
        # or listenSSL

        # Why these functioins... Not sure...
        fd = open(myKey,'r')
        theCert = ssl.PrivateCertificate.loadPEM(fd.read())
        fd.close()
        fd = open(trustedCA,'r')
        theCA = ssl.Certificate.loadPEM(fd.read())
        fd.close()
        ctx = theCert.options(theCA)

     # Now the options you can set look like Standard OpenSSL Library options

     # The SSL protocol to use, one of SSLv23_METHOD, SSLv2_METHOD,
     # SSLv3_METHOD, TLSv1_METHOD. Defaults to TLSv1_METHOD.
        ctx.method = ssl.SSL.TLSv1_METHOD

     # If True, verify certificates received from the peer and fail
     # the handshake if verification fails. Otherwise, allow anonymous
     # sessions and sessions with certificates which fail validation.
        ctx.verify = True

     # Depth in certificate chain down to which to verify.
        ctx.verifyDepth = 1

     # If True, do not allow anonymous sessions.
        ctx.requireCertification = True

     # If True, do not re-verify the certificate on session resumption.
        ctx.verifyOnce = True

     # If True, generate a new key whenever ephemeral DH parameters are used
     # to prevent small subgroup attacks.
        ctx.enableSingleUseKeys = True

     # If True, set a session ID on each context. This allows a shortened
     # handshake to be used when a known client reconnects.
        ctx.enableSessions = True

     # If True, enable various non-spec protocol fixes for broken
     # SSL implementations.
        ctx.fixBrokenPeers = False

        return ctx

class Proxy(xmlrpc.Proxy):
     ''' See: http://twistedmatrix.com/projects/web/documentation/howto/xmlrpc.html
         this is eacly like the xmlrpc.Proxy included in twisted but you can
         give it a SSLContext object insted of just accepting the defaults..
     '''
     def setSSLClientContext(self,SSLClientContext):
         self.SSLClientContext = SSLClientContext
     def callRemote(self, method, *args):
         factory = xmlrpc._QueryFactory(
             self.path, self.host, method, self.user,
             self.password, self.allowNone, args)
         if self.secure:
             from twisted.internet import ssl
             try:
                 self.SSLClientContext
             except NameError:
                 print "Must Set a SSL Context"
                 print "use self.setSSLClientContext() first"
                 # Its very bad to connect to ssl without some kind of
                 # verfication of who your talking to
                 # Using the default sslcontext without verification
                 # Can lead to man in the middle attacks
             reactor.connectSSL(self.host, self.port or 443,
                                factory,self.SSLClientContext)
         else:
             reactor.connectTCP(self.host, self.port or 80, factory)
         return factory.deferred


def do_test(t,nb_test):
    for i in range(0,nb_test):
        t.proxy.callRemote('helloworld').addCallbacks(t.printValue,t.err_received)

if __name__ == '__main__':
    if len(sys.argv) < 2 :
        sys.exit('Usage: ' + sys.argv[0] + ' nb_test')

    nb_test = int(sys.argv[1])
    t = wstest(8010,nb_test)

    reactor.callWhenRunning(do_test,t,nb_test)

    print "Starting reactor now."
    t.time_begin = datetime.now()
    reactor.run()     
#####################################################################################
This e-mail message has been scanned for Viruses and Content and cleared 
by Mailsecurity software
#####################################################################################


From glyph at twistedmatrix.com  Thu Jan 19 14:29:18 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 19 Jan 2012 14:29:18 -0500
Subject: [Twisted-Python] regarding ticket #2328
In-Reply-To: <4F185BE0.90901@gmail.com>
References: <CAKkXvca2XsYuY2wf4hxKzJma0=c8WR12kEo6gBrNbfN7_dXrxA@mail.gmail.com>
	<F946751C-E573-4FCC-A5BF-BBDC65D74054@twistedmatrix.com>
	<4F185BE0.90901@gmail.com>
Message-ID: <02C9718A-FC82-4BD1-B2C2-C7F3A2004FC1@twistedmatrix.com>


On Jan 19, 2012, at 1:07 PM, Yaroslav Fedevych wrote:

> I, for one, second the question.
> 
> What I'm currently missing is even the basic information on what, more 
> exactly, Twisted Words is and what it is not. Recently, I heard some 
> potential customer talking about a universal messaging gateway (multiple 
> protocols (including email), throttling, in some cases ? per-message 
> charging, messaging storage). I was wondering if t.words is something 
> which is exactly right to use for projects like that and what facilities 
> it provides to help me.

There is no authoritative statement about what twisted.words is not because twisted.words is incomplete.  You can definitely use it for servers, and many people do.

> Currently I see it is mostly client-oriented. I can only see an IRC 
> protocol (server-side), I however don't see what interfaces I need to 
> implement for a working pluggable messaging server. Maybe I'm looking at 
> wrong places or misunderstand the purpose of t.words altogether.

All of the facilities for parsing the client side of an XMPP connection also work for the server side.  And twisted.words does currently have some facilities for dealing with servers, such as 'twistd xmpp-router'.

You may be interested in several extensions to twisted.words.  Wokkel, especially, is hopefully going to be included in twisted.words itself at some point: <http://wokkel.ik.nu/>.  Idavoll provides publish/subscribe functionality on top of wokkel and twisted.words: <http://idavoll.ik.nu/>.  Palaver provides a multi-user chat component: <https://github.com/twonds/palaver> - however, most of the links to the original sites for Palaver appear to be dead now, so I gather that project has stopped development.

Ultimately, what you have to keep in mind is that twisted.words, like all of Twisted, is an open source project and not a commercial product.  If you would like it to do more than it does, please contribute code to help it grow into a full-featured XMPP solution.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120119/27b85d5f/attachment.htm 

From ntoper at gmail.com  Fri Jan 20 11:09:09 2012
From: ntoper at gmail.com (Nicolas Toper)
Date: Fri, 20 Jan 2012 17:09:09 +0100
Subject: [Twisted-Python] Python multiprocessing and Twisted stopService
 - success story
In-Reply-To: <CAMBtMcsY5f1aWVi-J8ajt74=N6Cjgs0whQDU9HHia84hB5ByqQ@mail.gmail.com>
References: <CAMBtMcsY5f1aWVi-J8ajt74=N6Cjgs0whQDU9HHia84hB5ByqQ@mail.gmail.com>
Message-ID: <CAJZoT5CsNWUDt8=gwVmW5q7ZxSajOGvUGhsNQAswqyt+YuiH+Q@mail.gmail.com>

Hi Tom,

How do you pass data between the parent and its children with
multiprocessing? It worked fine with Twisted in debug but never in prod :(

Best
Nicolas


On Wed, Jan 18, 2012 at 6:39 PM, Tom Sheffler <tom.sheffler at gmail.com>wrote:

> We are using Py2.6's multiprocessing with Twisted and things are working
> nicely.  I thought I'd pass on something that seems to work pretty well.
>  Comments welcome.
>
> I am using multiprocessing to spawn long-running worker processes as
> children of Twisted.  When Twisted is killed, I want the children to be
> unceremoniously killed as well.  I looked into signal handlers, but
> creating a service that kills the child processes ended up being simpler
> and is working well with twistd daemonization.
>
> class MultiprocessingStopService(Service):
>
>     def stopService(self):
>         import multiprocessing
>         for p in multiprocessing.active_children():
>             p.terminate()
>         Service.stopService(self)
>
> and in my main service maker:
>
>         s = MultiService()
>     stopper  = MultiprocessingStopService()
>     stopper.setServiceParent(s)
>
> Perhaps this will be helpful to someone.
>
> -T
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120120/da519386/attachment-0001.htm 

From kevin.horn at gmail.com  Fri Jan 20 14:06:51 2012
From: kevin.horn at gmail.com (Kevin Horn)
Date: Fri, 20 Jan 2012 13:06:51 -0600
Subject: [Twisted-Python] Finding out the IP which it failed to connect
In-Reply-To: <CAM09pzSmHFQ0K68oDxj-fkH1TyOGq9XhcNo-hsxPAL5+T1ibdA@mail.gmail.com>
References: <CAM09pzSmHFQ0K68oDxj-fkH1TyOGq9XhcNo-hsxPAL5+T1ibdA@mail.gmail.com>
Message-ID: <CA+U=zK3eU75TuAMsO9mdBL-A1Xkp7-wG3drFv_1rqhpTfzK=1g@mail.gmail.com>

On Thu, Jan 19, 2012 at 8:19 AM, Facundo Batista
<facundobatista at gmail.com>wrote:

> I have some code that uses a twisted.web.client.HTTPClientFactory.
>
> I've found that because some issues (firewall rules, not relevant to
> the problem), I experienced failures to connect.
>
> More specifically, I told it to connect to one particular address, and
> because of DNS load distribution, that address converted to several
> different IPs, and one of that IPs was not open, so it failed to
> connect with a TCPTimedOutError (code 110).
>
> When it failed to connect, it executed the "clientConnectionFailed"
> method of HTTPClientFactory, which receives a
> twisted.internet.tcp.Connector instance, and the reason of the
> failure.
>
> The question is: Is there a way, at that point (when
> clientConnectionFailed is called), to find out *to which IP* it failed
> to connect?
>
> Thank you very much!
>
> --
> .    Facundo
>
> Blog: http://www.taniquetil.com.ar/plog/
> PyAr: http://www.python.org/ar/
>

twisted.internet.tcp.Connector has a getDestination() method, which should
return an address object.

Have you tried that? (I haven't, but it looks like the right thing)

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120120/d25d072f/attachment.htm 

From facundobatista at gmail.com  Fri Jan 20 14:23:10 2012
From: facundobatista at gmail.com (Facundo Batista)
Date: Fri, 20 Jan 2012 16:23:10 -0300
Subject: [Twisted-Python] Finding out the IP which it failed to connect
In-Reply-To: <CA+U=zK3eU75TuAMsO9mdBL-A1Xkp7-wG3drFv_1rqhpTfzK=1g@mail.gmail.com>
References: <CAM09pzSmHFQ0K68oDxj-fkH1TyOGq9XhcNo-hsxPAL5+T1ibdA@mail.gmail.com>
	<CA+U=zK3eU75TuAMsO9mdBL-A1Xkp7-wG3drFv_1rqhpTfzK=1g@mail.gmail.com>
Message-ID: <CAM09pzRqGYSh2bEwrgUgajTqKeXmMowFoEM=_zoHRakiOEvfiw@mail.gmail.com>

On Fri, Jan 20, 2012 at 4:06 PM, Kevin Horn <kevin.horn at gmail.com> wrote:

> twisted.internet.tcp.Connector has a getDestination() method, which should
> return an address object.
>
> Have you tried that? (I haven't, but it looks like the right thing)

It returns the name used, not the IP.

-- 
.? ? Facundo

Blog: http://www.taniquetil.com.ar/plog/
PyAr: http://www.python.org/ar/


From exarkun at twistedmatrix.com  Fri Jan 20 16:47:19 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 20 Jan 2012 21:47:19 -0000
Subject: [Twisted-Python] Twisted Hackday at Rackspace, SF
Message-ID: <20120120214719.2876.173517733.divmod.xquotient.168@localhost6.localdomain6>

Hey all,

If you're in the bay area, join Rackspace and I on February 1st for a 
day of hacking on Twisted and Twisted projects:

  http://twistedpython.eventbrite.com/

Jean-Paul


From itamar at itamarst.org  Fri Jan 20 22:02:48 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Fri, 20 Jan 2012 22:02:48 -0500
Subject: [Twisted-Python] Finding out the IP which it failed to connect
In-Reply-To: <CAM09pzRqGYSh2bEwrgUgajTqKeXmMowFoEM=_zoHRakiOEvfiw@mail.gmail.com>
References: <CAM09pzSmHFQ0K68oDxj-fkH1TyOGq9XhcNo-hsxPAL5+T1ibdA@mail.gmail.com>
	<CA+U=zK3eU75TuAMsO9mdBL-A1Xkp7-wG3drFv_1rqhpTfzK=1g@mail.gmail.com>
	<CAM09pzRqGYSh2bEwrgUgajTqKeXmMowFoEM=_zoHRakiOEvfiw@mail.gmail.com>
Message-ID: <4F1A2AD8.9090304@itamarst.org>

On 01/20/2012 02:23 PM, Facundo Batista wrote:
> On Fri, Jan 20, 2012 at 4:06 PM, Kevin Horn<kevin.horn at gmail.com>  wrote:
>
>> twisted.internet.tcp.Connector has a getDestination() method, which should
>> return an address object.
>>
>> Have you tried that? (I haven't, but it looks like the right thing)
> It returns the name used, not the IP.
>

That seems... wrong. Perhaps enshrined by prior existence, but wrong 
nonetheless - it's an IPv4Address, it should have an IP. Could you file 
a ticket?


From kevin.horn at gmail.com  Sat Jan 21 14:19:09 2012
From: kevin.horn at gmail.com (Kevin Horn)
Date: Sat, 21 Jan 2012 13:19:09 -0600
Subject: [Twisted-Python] Finding out the IP which it failed to connect
In-Reply-To: <4F1A2AD8.9090304@itamarst.org>
References: <CAM09pzSmHFQ0K68oDxj-fkH1TyOGq9XhcNo-hsxPAL5+T1ibdA@mail.gmail.com>
	<CA+U=zK3eU75TuAMsO9mdBL-A1Xkp7-wG3drFv_1rqhpTfzK=1g@mail.gmail.com>
	<CAM09pzRqGYSh2bEwrgUgajTqKeXmMowFoEM=_zoHRakiOEvfiw@mail.gmail.com>
	<4F1A2AD8.9090304@itamarst.org>
Message-ID: <CA+U=zK0ihHCj0j+X4rXPP_a5MVeEGeT3nmoaqF7J+sq8CTvymg@mail.gmail.com>

On Fri, Jan 20, 2012 at 9:02 PM, Itamar Turner-Trauring <itamar at itamarst.org
> wrote:

> On 01/20/2012 02:23 PM, Facundo Batista wrote:
> > On Fri, Jan 20, 2012 at 4:06 PM, Kevin Horn<kevin.horn at gmail.com>
>  wrote:
> >
> >> twisted.internet.tcp.Connector has a getDestination() method, which
> should
> >> return an address object.
> >>
> >> Have you tried that? (I haven't, but it looks like the right thing)
> > It returns the name used, not the IP.
> >
>
> That seems... wrong. Perhaps enshrined by prior existence, but wrong
> nonetheless - it's an IPv4Address, it should have an IP. Could you file
> a ticket?
>
>
Looking at the api docs for IPv4Address, the 'host' member is described as
"A string containing the dotted-quad IP address."

So if it's giving you the hostname, then this definitely looks like a bug.

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120121/e93ed998/attachment.htm 

From exarkun at twistedmatrix.com  Sun Jan 22 00:05:29 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 22 Jan 2012 05:05:29 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1327208729.21.1577431650@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120122/31dbcb74/attachment.htm 

From dynamicgl at gmail.com  Sun Jan 22 04:47:22 2012
From: dynamicgl at gmail.com (gelin yan)
Date: Sun, 22 Jan 2012 17:47:22 +0800
Subject: [Twisted-Python] Python multiprocessing and Twisted stopService
 - success story
In-Reply-To: <CAJZoT5CsNWUDt8=gwVmW5q7ZxSajOGvUGhsNQAswqyt+YuiH+Q@mail.gmail.com>
References: <CAMBtMcsY5f1aWVi-J8ajt74=N6Cjgs0whQDU9HHia84hB5ByqQ@mail.gmail.com>
	<CAJZoT5CsNWUDt8=gwVmW5q7ZxSajOGvUGhsNQAswqyt+YuiH+Q@mail.gmail.com>
Message-ID: <CABkOF6TVepuXDunf7mTfmqnP=+hdbTNo411XjvjssKf+B5-DQA@mail.gmail.com>

Hi Tom

  Does it work for windows? I use ampoule instead to manage multiple
process.

Regards

gelin yan

On Sat, Jan 21, 2012 at 12:09 AM, Nicolas Toper <ntoper at gmail.com> wrote:

> Hi Tom,
>
> How do you pass data between the parent and its children with
> multiprocessing? It worked fine with Twisted in debug but never in prod :(
>
> Best
> Nicolas
>
>
> On Wed, Jan 18, 2012 at 6:39 PM, Tom Sheffler <tom.sheffler at gmail.com>wrote:
>
>> We are using Py2.6's multiprocessing with Twisted and things are working
>> nicely.  I thought I'd pass on something that seems to work pretty well.
>>  Comments welcome.
>>
>> I am using multiprocessing to spawn long-running worker processes as
>> children of Twisted.  When Twisted is killed, I want the children to be
>> unceremoniously killed as well.  I looked into signal handlers, but
>> creating a service that kills the child processes ended up being simpler
>> and is working well with twistd daemonization.
>>
>> class MultiprocessingStopService(Service):
>>
>>     def stopService(self):
>>         import multiprocessing
>>         for p in multiprocessing.active_children():
>>             p.terminate()
>>         Service.stopService(self)
>>
>> and in my main service maker:
>>
>>         s = MultiService()
>>     stopper  = MultiprocessingStopService()
>>     stopper.setServiceParent(s)
>>
>> Perhaps this will be helpful to someone.
>>
>> -T
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120122/83a9ead8/attachment.htm 

From glyph at twistedmatrix.com  Sun Jan 22 16:30:31 2012
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Sun, 22 Jan 2012 16:30:31 -0500
Subject: [Twisted-Python] Finding out the IP which it failed to connect
In-Reply-To: <4F1A2AD8.9090304@itamarst.org>
References: <CAM09pzSmHFQ0K68oDxj-fkH1TyOGq9XhcNo-hsxPAL5+T1ibdA@mail.gmail.com>
	<CA+U=zK3eU75TuAMsO9mdBL-A1Xkp7-wG3drFv_1rqhpTfzK=1g@mail.gmail.com>
	<CAM09pzRqGYSh2bEwrgUgajTqKeXmMowFoEM=_zoHRakiOEvfiw@mail.gmail.com>
	<4F1A2AD8.9090304@itamarst.org>
Message-ID: <4C7AF041-8073-4F84-AA40-9860CB2832C6@twistedmatrix.com>


On Jan 20, 2012, at 10:02 PM, Itamar Turner-Trauring wrote:

> On 01/20/2012 02:23 PM, Facundo Batista wrote:
>> On Fri, Jan 20, 2012 at 4:06 PM, Kevin Horn<kevin.horn at gmail.com>  wrote:
>> 
>>> twisted.internet.tcp.Connector has a getDestination() method, which should
>>> return an address object.
>>> 
>>> Have you tried that? (I haven't, but it looks like the right thing)
>> It returns the name used, not the IP.
>> 
> 
> That seems... wrong. Perhaps enshrined by prior existence, but wrong 
> nonetheless - it's an IPv4Address, it should have an IP. Could you file 
> a ticket?

See also <http://twistedmatrix.com/trac/ticket/3059>.

I thought this might be the same thing, but I guess it isn't.  At any rate the new ticket should reference this old one, since this is apparently an easy mistake to make.

Arguably this interface is kind of broken though: it's synchronous, but hostname resolution may not have completed yet.  Also hostname resolution may return a different address on subsequent reconnects, so there's no single destination that a hostname-based connector could be said to be connecting to.

All in all, just another reason to move to Endpoint-based client connections and ignore the Connector layer of the API in applications...

-glyph



From mike at mv3d.com  Sun Jan 22 21:20:30 2012
From: mike at mv3d.com (Michael Handverger)
Date: Sun, 22 Jan 2012 21:20:30 -0500 (EST)
Subject: [Twisted-Python] Announcing MV3D 0.70!
Message-ID: <4306641.636.1327285230502.JavaMail.root@verity>

I am pleased to announce the release version 0.70 of MV3D! This release includes a massive amount of new features and over 70 bugfixes. The main focus was on usability and involved a large amount of work on tools. In 0.70, Panda3D support was brought up to par with animation, terrain texture splatting, and skydomes. One of the things we are most excited about is the Windows development environment installer. This is an easy installer that will quickly set up any Windows system to develop MV3D. If you've been watching the project and want to get involved, there's no better time!

MV3D is an open source multiplayer game and virtual world framework written in Python which uses Twisted for networking. It encompasses a scalable server with dynamic load balancing, a robust set of content creation tools, and an extensible 3D client application. MV3D provides the foundation to build anything from 3D chat rooms to full MMORPGs with the goal of letting you concentrate on creating a unique virtual world instead of the infrastructure to support it.

For more information on MV3D and this or future releases, please visit the website at http://www.mv3d.com . The full release notes for version 0.70 are available online at this URL: http://www.mv3d.com/trac/browser/tags/mv3d-0.70/release-notes.txt . For further inquiries, feel free to stop by our IRC channel on irc.freenode.net #MV3D.

New screenshots of our demo world and the Composer tool:

http://www.mv3d.com/trac/screenshots/46
http://www.mv3d.com/trac/screenshots/47

Release 0.75 will be focused on bugfixing and adding full support for Linux + Ogre and OS X + Panda. We are currently looking for help porting and testing on these platforms. Let me know if you are interested!

Enjoy,

Mike


From Hanusz at aegtranzcom.com  Mon Jan 23 08:46:40 2012
From: Hanusz at aegtranzcom.com (Hanusz L.)
Date: Mon, 23 Jan 2012 14:46:40 +0100
Subject: [Twisted-Python] How to be sure a ssl connection was completed
	correctly
Message-ID: <B06FDC00E1358B48ACD6C2254D4C9E3AD8ED5BC3@MS-01>

Hi,

I'm using the pull method to send events to clients (with xmlrpc over ssl).
The events are in a queue and when a client calls my 'get_event' xmlrpc function; I get one event from the queue and send it to the client.

The problem is that I want to be sure that the client receives all the events.

Is it correct to assume that:
IF the method connectionLost of my protocol (the wrapped protocol of the ssl protocol) is called with a failure(error.ConnectionDone())
THEN the connection was completed successfully and the client received the event correctly ?

Thanks,

Leszek
#####################################################################################
This e-mail message has been scanned for Viruses and Content and cleared 
by Mailsecurity software
#####################################################################################


From itamar at itamarst.org  Mon Jan 23 09:00:42 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Mon, 23 Jan 2012 09:00:42 -0500
Subject: [Twisted-Python] How to be sure a ssl connection was completed
 correctly
In-Reply-To: <B06FDC00E1358B48ACD6C2254D4C9E3AD8ED5BC3@MS-01>
References: <B06FDC00E1358B48ACD6C2254D4C9E3AD8ED5BC3@MS-01>
Message-ID: <4F1D680A.2090407@itamarst.org>

On 01/23/2012 08:46 AM, Hanusz L. wrote:
> Hi,
>
> I'm using the pull method to send events to clients (with xmlrpc over ssl).
> The events are in a queue and when a client calls my 'get_event' xmlrpc function; I get one event from the queue and send it to the client.
>
> The problem is that I want to be sure that the client receives all the events.
>
> Is it correct to assume that:
> IF the method connectionLost of my protocol (the wrapped protocol of the ssl protocol) is called with a failure(error.ConnectionDone())
> THEN the connection was completed successfully and the client received the event correctly ?
No, that just means the SSL disconnect and then  the TCP disconnect 
handshakes were done cleanly. That may happen for reasons other than 
queue being cleared, e.g. the server decided to shutdown for some reason.

You need to have some other way of knowing if queue is empty, e.g. way 
to query queue size (and knowledge that no one else will add to queue 
after you queried it).


From therve at free.fr  Mon Jan 23 09:08:49 2012
From: therve at free.fr (=?UTF-8?B?VGhvbWFzIEhlcnbDqQ==?=)
Date: Mon, 23 Jan 2012 15:08:49 +0100
Subject: [Twisted-Python] Twisted 12.0.0pre1 is here!
Message-ID: <4F1D69F1.6080506@free.fr>

Hello there Twisted people,

Reading that title, I hear you saying: "Already?". But yes, now is 
already the time to test a freshly released version of Twisted. You can 
find the carefully prepared tarballs here:

     http://people.canonical.com/~therve/Twisted/12.0.0pre1/

47 tickets are closed by this release, among them:

  * A fix to the GTK2 reactor preventing unnecessary wake-ups (#4376)

  * Preliminary support of IPV6 on the server side (#5084)

  * Several fixes to the new protocol-based TLS implementation

  * Improved core documentation's main page (#5429)

Please run your application/library/framework tests against it!

New-year-resolution-ly yours,

-- 
Thomas


From ralphm at ik.nu  Mon Jan 23 18:25:46 2012
From: ralphm at ik.nu (Ralph Meijer)
Date: Tue, 24 Jan 2012 00:25:46 +0100
Subject: [Twisted-Python] [Twisted-Jabber] [ANNOUNCE] Wokkel 0.7.0
Message-ID: <4F1DEC7A.4060101@ik.nu>

Hi!

I am proud to announce version 0.7.0 of Wokkel, a set of enhancements on 
the Jabber/XMPP support in Twisted Words.

    http://wokkel.ik.nu/releases/0.7.0/wokkel-0.7.0.tar.gz

The highlights:

  * Protocol support for Publish-Subscribe subscription options,
    subscription identifiers and node configuration options.

  * Enhancements to Data Forms support for easier creation of forms to be
    submitted, and (type) verification of forms that are received.

  * A twistd plugin for running a basic XMPP server which accepts
    server-side components connections and provides server-to-server
    (dialback) connectivity.

  * Support for the Delayed Delivery data format.

  * Client-side support for Multi-User Chat, including a simple example.

Besides those new features, various bugs have been resolved and test 
coverage has been significantly improved. This release drops support for 
Twisted versions before 10.0.0. See the complete news file at:

    http://wokkel.ik.nu/releases/0.7.0/NEWS

With this release out of the way, my focus for this year will be on 
moving things from Wokkel to Words.

Jabber on!

--
ralphm


From goffi at goffi.org  Tue Jan 24 04:06:15 2012
From: goffi at goffi.org (Goffi)
Date: Tue, 24 Jan 2012 10:06:15 +0100
Subject: [Twisted-Python] [Twisted-Jabber] [ANNOUNCE] Wokkel 0.7.0
In-Reply-To: <4F1DEC7A.4060101@ik.nu>
References: <4F1DEC7A.4060101@ik.nu>
Message-ID: <3405816.QcK7JJj8mT@ubuntu-jerome>

Congratulations :)

Le Mardi 24 Janvier 2012 00:25:46 Ralph Meijer a ?crit :
> Hi!
> 
> I am proud to announce version 0.7.0 of Wokkel, a set of enhancements on
> the Jabber/XMPP support in Twisted Words.
> 
>     http://wokkel.ik.nu/releases/0.7.0/wokkel-0.7.0.tar.gz
> 
> The highlights:
> 
>   * Protocol support for Publish-Subscribe subscription options,
>     subscription identifiers and node configuration options.
> 
>   * Enhancements to Data Forms support for easier creation of forms to be
>     submitted, and (type) verification of forms that are received.
> 
>   * A twistd plugin for running a basic XMPP server which accepts
>     server-side components connections and provides server-to-server
>     (dialback) connectivity.
> 
>   * Support for the Delayed Delivery data format.
> 
>   * Client-side support for Multi-User Chat, including a simple example.
> 
> Besides those new features, various bugs have been resolved and test
> coverage has been significantly improved. This release drops support for
> Twisted versions before 10.0.0. See the complete news file at:
> 
>     http://wokkel.ik.nu/releases/0.7.0/NEWS
> 
> With this release out of the way, my focus for this year will be on
> moving things from Wokkel to Words.
> 
> Jabber on!
> 
> --
> ralphm
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From glyph at twistedmatrix.com  Tue Jan 24 13:08:08 2012
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Tue, 24 Jan 2012 10:08:08 -0800
Subject: [Twisted-Python] [Twisted-Jabber] [ANNOUNCE] Wokkel 0.7.0
In-Reply-To: <4F1DEC7A.4060101@ik.nu>
References: <4F1DEC7A.4060101@ik.nu>
Message-ID: <E69F435A-085F-457D-8C41-1ABECAB2D22E@twistedmatrix.com>


On Jan 23, 2012, at 3:25 PM, Ralph Meijer wrote:

> Hi!
> 
> I am proud to announce version 0.7.0 of Wokkel, a set of enhancements on 
> the Jabber/XMPP support in Twisted Words.
> 
>    http://wokkel.ik.nu/releases/0.7.0/wokkel-0.7.0.tar.gz

Congratulations on the release, Ralph!  I'm really glad to see the Twisted/XMPP community is still alive and well.

> With this release out of the way, my focus for this year will be on 
> moving things from Wokkel to Words.

And I am really looking forward to this! :-)

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120124/1a820928/attachment.htm 

From techaficionado1743 at gmail.com  Wed Jan 25 07:04:09 2012
From: techaficionado1743 at gmail.com (Tech Aficionado1743)
Date: Wed, 25 Jan 2012 13:04:09 +0100
Subject: [Twisted-Python] Multiple callbacks
Message-ID: <CAJttDoUbmJRx0SSTvysHoAf9GriVpQzzoYXBGqTM1Mupftpr5w@mail.gmail.com>

Hello, can anyone help ?
i can't understand why, in the piece of code below (S1),
the parameter (grid) passed to the callback is the same,
while i have 2 grid, 2 deferred and 2 lambda.
The source S2 is working (2 different grid), but inelegant...

Thank you.


#----------- S1 ------------------------
    def OnSubscribe(self):
        for pool, grid in self.grids.items():
            print 'grid = ',grid
            d = self.frame.dbpoolMiddle.runQuery(allSelect.stmts['Set0'],
(pool, self.frame.ctxName))
            print 'deferred = ', d
            f = lambda _:self.gotDataBin(_, grid)
            print 'lambda =', f
            d.addCallback(f)

    def gotDataBin(self, result, grid):
        print 'callback = ', grid
        grid.ReplaceRowsFromSQL(result)

#----------- Output S1 ----------------

grid =  <cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type 'wxGrid *'
at 0x2d61b48> >
deferred =  <Deferred at 0x2e6bd28>
lambda = <function <lambda> at 0x02DCDCF0>

grid =  <cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type 'wxGrid *'
at 0x2d5e788> >
deferred =  <Deferred at 0x2e6bdc8>
lambda = <function <lambda> at 0x02DCDCB0>

callback =  <cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type 'wxGrid
*' at 0x2d5e788> > # expected to get 1st grid here: 0x2d61b48, not two
times 2nd grid
callback =  <cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type 'wxGrid
*' at 0x2d5e788> >

#----------- S2 ------------------------
    def OnSubscribe(self):
        for pool, grid in self.grids.items():
            d = self.frame.dbpoolMiddle.runQuery(allSelect.stmts['Set0'],
(pool, self.frame.ctxName))

            def toto(grid):
                d.addCallback(lambda _:self.gotDataBin(_, grid))

            toto(grid)

    def gotDataBin(self, result, grid):
        print 'callback = ', grid
        grid.ReplaceRowsFromSQL(result)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120125/06d7990e/attachment.htm 

From poisonoff at gmail.com  Wed Jan 25 08:22:57 2012
From: poisonoff at gmail.com (=?UTF-8?B?0JDRgNC60LDQtNC40Lkg0JvQtdCy0LjQvQ==?=)
Date: Wed, 25 Jan 2012 19:22:57 +0600
Subject: [Twisted-Python] Multiple callbacks
In-Reply-To: <CAJttDoUbmJRx0SSTvysHoAf9GriVpQzzoYXBGqTM1Mupftpr5w@mail.gmail.com>
References: <CAJttDoUbmJRx0SSTvysHoAf9GriVpQzzoYXBGqTM1Mupftpr5w@mail.gmail.com>
Message-ID: <CACgbmJkeL8X_H9SaLhZKTLQWSu6aBrQz-FdhTzb0ZOqFKrpWbQ@mail.gmail.com>

Hi, you need add "grid" to lambda arguments,

f = lambda _, grip=grip:self.gotDataBin(_, grid)

On Wed, Jan 25, 2012 at 6:04 PM, Tech Aficionado1743
<techaficionado1743 at gmail.com> wrote:
> Hello, can anyone help ?
> i can't understand why, in the piece of code below (S1),
> the parameter (grid) passed to the callback is the same,
> while i have 2 grid, 2 deferred and 2 lambda.
> The source S2 is working (2 different grid), but inelegant...
>
> Thank you.
>
>
> #----------- S1 ------------------------
> ? ? def OnSubscribe(self):
> ? ? ? ? for pool, grid in self.grids.items():
> ? ? ? ? ? ? print 'grid = ',grid
> ? ? ? ? ? ? d = self.frame.dbpoolMiddle.runQuery(allSelect.stmts['Set0'],
> (pool, self.frame.ctxName))
> ? ? ? ? ? ? print 'deferred = ', d
> ? ? ? ? ? ? f = lambda _:self.gotDataBin(_, grid)
> ? ? ? ? ? ? print 'lambda =', f
> ? ? ? ? ? ? d.addCallback(f)
>
> ? ? def gotDataBin(self, result, grid):
> ? ? ? ? print 'callback = ', grid
> ? ? ? ? grid.ReplaceRowsFromSQL(result)
>
> #----------- Output S1 ----------------
>
> grid = ?<cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type 'wxGrid *' at
> 0x2d61b48> >
> deferred = ?<Deferred at 0x2e6bd28>
> lambda = <function <lambda> at 0x02DCDCF0>
>
> grid = ?<cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type 'wxGrid *' at
> 0x2d5e788> >
> deferred = ?<Deferred at 0x2e6bdc8>
> lambda = <function <lambda> at 0x02DCDCB0>
>
> callback = ?<cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type 'wxGrid
> *' at 0x2d5e788> > # expected to get 1st grid here:?0x2d61b48, not two times
> 2nd grid
> callback = ?<cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type 'wxGrid
> *' at 0x2d5e788> >
>
> #----------- S2 ------------------------
> ? ? def OnSubscribe(self):
> ? ? ? ? for pool, grid in self.grids.items():
> ? ? ? ? ? ? d = self.frame.dbpoolMiddle.runQuery(allSelect.stmts['Set0'],
> (pool, self.frame.ctxName))
>
> ? ? ? ? ? ? def toto(grid):
> ? ? ? ? ? ? ? ? d.addCallback(lambda _:self.gotDataBin(_, grid))
>
> ? ? ? ? ? ? toto(grid)
>
> ? ? def gotDataBin(self, result, grid):
> ? ? ? ? print 'callback = ', grid
> ? ? ? ? grid.ReplaceRowsFromSQL(result)
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From gerrat1 at yahoo.com  Wed Jan 25 08:28:13 2012
From: gerrat1 at yahoo.com (Gerrat)
Date: Wed, 25 Jan 2012 13:28:13 +0000 (UTC)
Subject: [Twisted-Python] http.Request and JSON
References: <fcc3e6170906300107g354cc968g204ffd7a2956b5c6@mail.gmail.com>
	<20090630081804.GA6278@wildfire.net.ic.ac.uk>
	<95bb10690906300144t6bfb1d2h7dc4f8001ed7da42@mail.gmail.com>
	<f5eea9170906300456y57a3c522rf45128ed70936631@mail.gmail.com>
Message-ID: <loom.20120125T141945-257@post.gmane.org>

Tristan Seligmann <mithrandi <at> mithrandi.net> writes:

> 
> On Tue, Jun 30, 2009 at 10:44 AM, Reza Lotun<rlotun <at> gmail.com> wrote:
> > To be safer, I do a request.content.getvalue() since content is a
> > cStringIO object and you can never be sure if somewhere along the
> > chain of processing someone hasn't done a .read and forgot to do a
> > .seek(0,0).
> 
> You should probably do the seek/read instead, since I don't believe
> this is guaranteed to be a cStringIO; it might be an actual file on
> disk, or something else.

Thank You!!!

Every <stupid> example I've seen used "request.content.getvalue()" ...which
fails miserably for me (possibly because I'm on 64bit windows - but cStringIO is
available, so I'm not sure why it's not used).  request.content.read() works
wonderfully.  The "getvalue" method looked familiar, but I couldn't recall where
I'd seen it - only that *my* request.content doesn't have a getvalue method.  It
took quite a few searches before I stumbled on your comment here which gave me
the correct solution.




From _ at lvh.cc  Wed Jan 25 09:03:47 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Wed, 25 Jan 2012 15:03:47 +0100
Subject: [Twisted-Python] Multiple callbacks
In-Reply-To: <CACgbmJkeL8X_H9SaLhZKTLQWSu6aBrQz-FdhTzb0ZOqFKrpWbQ@mail.gmail.com>
References: <CAJttDoUbmJRx0SSTvysHoAf9GriVpQzzoYXBGqTM1Mupftpr5w@mail.gmail.com>
	<CACgbmJkeL8X_H9SaLhZKTLQWSu6aBrQz-FdhTzb0ZOqFKrpWbQ@mail.gmail.com>
Message-ID: <CAE_Hg6ZGjxzeJcCZ+9wfmS5=_p32QuresA6ePtyy4EtGjYQpyA@mail.gmail.com>

Note that that's just pythons late binding semantics, nothing twistedy
going on here :)
On Jan 25, 2012 2:24 PM, "??????? ?????" <poisonoff at gmail.com> wrote:

> Hi, you need add "grid" to lambda arguments,
>
> f = lambda _, grip=grip:self.gotDataBin(_, grid)
>
> On Wed, Jan 25, 2012 at 6:04 PM, Tech Aficionado1743
> <techaficionado1743 at gmail.com> wrote:
> > Hello, can anyone help ?
> > i can't understand why, in the piece of code below (S1),
> > the parameter (grid) passed to the callback is the same,
> > while i have 2 grid, 2 deferred and 2 lambda.
> > The source S2 is working (2 different grid), but inelegant...
> >
> > Thank you.
> >
> >
> > #----------- S1 ------------------------
> >     def OnSubscribe(self):
> >         for pool, grid in self.grids.items():
> >             print 'grid = ',grid
> >             d = self.frame.dbpoolMiddle.runQuery(allSelect.stmts['Set0'],
> > (pool, self.frame.ctxName))
> >             print 'deferred = ', d
> >             f = lambda _:self.gotDataBin(_, grid)
> >             print 'lambda =', f
> >             d.addCallback(f)
> >
> >     def gotDataBin(self, result, grid):
> >         print 'callback = ', grid
> >         grid.ReplaceRowsFromSQL(result)
> >
> > #----------- Output S1 ----------------
> >
> > grid =  <cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type 'wxGrid
> *' at
> > 0x2d61b48> >
> > deferred =  <Deferred at 0x2e6bd28>
> > lambda = <function <lambda> at 0x02DCDCF0>
> >
> > grid =  <cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type 'wxGrid
> *' at
> > 0x2d5e788> >
> > deferred =  <Deferred at 0x2e6bdc8>
> > lambda = <function <lambda> at 0x02DCDCB0>
> >
> > callback =  <cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type
> 'wxGrid
> > *' at 0x2d5e788> > # expected to get 1st grid here: 0x2d61b48, not two
> times
> > 2nd grid
> > callback =  <cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type
> 'wxGrid
> > *' at 0x2d5e788> >
> >
> > #----------- S2 ------------------------
> >     def OnSubscribe(self):
> >         for pool, grid in self.grids.items():
> >             d = self.frame.dbpoolMiddle.runQuery(allSelect.stmts['Set0'],
> > (pool, self.frame.ctxName))
> >
> >             def toto(grid):
> >                 d.addCallback(lambda _:self.gotDataBin(_, grid))
> >
> >             toto(grid)
> >
> >     def gotDataBin(self, result, grid):
> >         print 'callback = ', grid
> >         grid.ReplaceRowsFromSQL(result)
> >
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120125/3c81af06/attachment.htm 

From exarkun at twistedmatrix.com  Wed Jan 25 09:10:45 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 25 Jan 2012 14:10:45 -0000
Subject: [Twisted-Python] Twisted Sprint at PyCon 2012
Message-ID: <20120125141045.2876.337282862.divmod.xquotient.281@localhost6.localdomain6>

Hello all,

The past few years have seen the Twisted sprint at PyCon grow to a very 
impressive size.  With expectations that this will be the largest PyCon 
yet, I have no reason to expect that the trend will be reversed this 
year.

I have "run" the sprint for the past two years, though in practice there 
are not many duties associated with that post.  This year, I need to 
hand off that responsibility to someone else, as I will only be 
attending the sprints for the first day.

"Running" a PyCon sprint involves interfacing with the PyCon organizers 
to get a room assignment.  Beyond that, all that's really necessary is 
to keep your eyes open for things that might be impeding the work of 
sprinters (yourself included, as these duties should not take up more 
than about 2% of your time).

If you're interested in taking this on, please let me know.  Let me know 
which days you'll be attending the sprints (preferably you'll be 
attending all days, but missing the last day or two might not disqualify 
you).

Thanks!

Jean-Paul


From _ at lvh.cc  Wed Jan 25 11:17:21 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Wed, 25 Jan 2012 17:17:21 +0100
Subject: [Twisted-Python] Twisted Sprint at PyCon 2012
In-Reply-To: <20120125141045.2876.337282862.divmod.xquotient.281@localhost6.localdomain6>
References: <20120125141045.2876.337282862.divmod.xquotient.281@localhost6.localdomain6>
Message-ID: <CAE_Hg6bDepZsSDA4H5mNoc3Xq3YfrPm4fdSCQsbR7LaoZ8KEng@mail.gmail.com>

I can do it :)
On Jan 25, 2012 3:11 PM, <exarkun at twistedmatrix.com> wrote:

> Hello all,
>
> The past few years have seen the Twisted sprint at PyCon grow to a very
> impressive size.  With expectations that this will be the largest PyCon
> yet, I have no reason to expect that the trend will be reversed this
> year.
>
> I have "run" the sprint for the past two years, though in practice there
> are not many duties associated with that post.  This year, I need to
> hand off that responsibility to someone else, as I will only be
> attending the sprints for the first day.
>
> "Running" a PyCon sprint involves interfacing with the PyCon organizers
> to get a room assignment.  Beyond that, all that's really necessary is
> to keep your eyes open for things that might be impeding the work of
> sprinters (yourself included, as these duties should not take up more
> than about 2% of your time).
>
> If you're interested in taking this on, please let me know.  Let me know
> which days you'll be attending the sprints (preferably you'll be
> attending all days, but missing the last day or two might not disqualify
> you).
>
> Thanks!
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120125/8927f8a7/attachment.htm 

From matt at conundrum.com  Wed Jan 25 14:06:57 2012
From: matt at conundrum.com (Matthew Pounsett)
Date: Wed, 25 Jan 2012 14:06:57 -0500
Subject: [Twisted-Python] Extending twisted.words.protocols.irc
Message-ID: <ACBD4FA4-9731-4110-9D92-4F1270E3785D@conundrum.com>


I've written some methods for twisted.words.protocols.irc.IRCClient that seem like they (or something like them) should be part of the main distribution.  What's the preferred way to pass those along for consideration?  Posting here?  Open a ticket on the tracker?  If the latter, should I send them all as one batch, or separate them into related chunks?

Thanks!



From kevin.horn at gmail.com  Wed Jan 25 14:44:12 2012
From: kevin.horn at gmail.com (Kevin Horn)
Date: Wed, 25 Jan 2012 13:44:12 -0600
Subject: [Twisted-Python] Extending twisted.words.protocols.irc
In-Reply-To: <ACBD4FA4-9731-4110-9D92-4F1270E3785D@conundrum.com>
References: <ACBD4FA4-9731-4110-9D92-4F1270E3785D@conundrum.com>
Message-ID: <CA+U=zK1H23h3Kq8Kz41_WLig-G_eyZu697cWifi810rq5_aD9w@mail.gmail.com>

On Wed, Jan 25, 2012 at 1:06 PM, Matthew Pounsett <matt at conundrum.com>wrote:

>
> I've written some methods for twisted.words.protocols.irc.IRCClient that
> seem like they (or something like them) should be part of the main
> distribution.  What's the preferred way to pass those along for
> consideration?  Posting here?  Open a ticket on the tracker?  If the
> latter, should I send them all as one batch, or separate them into related
> chunks?
>
> Thanks!
>
>
Probably the best way to submit code is to open a ticket on the tracker,
with an attached patch as a unified diff against the current twisted trunk.

Failing a unified diff, you can attach just a patch, but it will slow down
getting your code into Twisted.

Probably the best thing you can do to speed up inclusion of your code into
Twisted is to include unit tests with your patch.

The next best thing is to be active on the ticket.  Pay attention to
updates, code reviews, etc.

See also: http://twistedmatrix.com/trac/wiki/ContributingToTwistedLabs

Good luck!

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120125/41042d3c/attachment.htm 

From glyph at twistedmatrix.com  Wed Jan 25 15:03:35 2012
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 25 Jan 2012 12:03:35 -0800
Subject: [Twisted-Python] http.Request and JSON
In-Reply-To: <loom.20120125T141945-257@post.gmane.org>
References: <fcc3e6170906300107g354cc968g204ffd7a2956b5c6@mail.gmail.com>
	<20090630081804.GA6278@wildfire.net.ic.ac.uk>
	<95bb10690906300144t6bfb1d2h7dc4f8001ed7da42@mail.gmail.com>
	<f5eea9170906300456y57a3c522rf45128ed70936631@mail.gmail.com>
	<loom.20120125T141945-257@post.gmane.org>
Message-ID: <0F1AE771-DAA1-4894-8311-C7ED343E35AF@twistedmatrix.com>


On Jan 25, 2012, at 5:28 AM, Gerrat wrote:

> Tristan Seligmann <mithrandi <at> mithrandi.net> writes:
> 
>> 
>> On Tue, Jun 30, 2009 at 10:44 AM, Reza Lotun<rlotun <at> gmail.com> wrote:
>>> To be safer, I do a request.content.getvalue() since content is a
>>> cStringIO object and you can never be sure if somewhere along the
>>> chain of processing someone hasn't done a .read and forgot to do a
>>> .seek(0,0).
>> 
>> You should probably do the seek/read instead, since I don't believe
>> this is guaranteed to be a cStringIO; it might be an actual file on
>> disk, or something else.
> 
> Thank You!!!
> 
> Every <stupid> example I've seen used "request.content.getvalue()" ...which
> fails miserably for me (possibly because I'm on 64bit windows - but cStringIO is
> available, so I'm not sure why it's not used).  request.content.read() works
> wonderfully.  The "getvalue" method looked familiar, but I couldn't recall where
> I'd seen it - only that *my* request.content doesn't have a getvalue method.  It
> took quite a few searches before I stumbled on your comment here which gave me
> the correct solution.

Nothing to do with 64bit windows.  twisted.web will switch to a file when the threshold of the upload goes above a certain size.  request.content is a file-like object, not any particular implementation of that protocol.

This really should be documented in http://twistedmatrix.com/documents/current/api/twisted.web.iweb.IRequest.html - it's a bug that it isn't.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120125/48bef250/attachment.htm 

From matt at conundrum.com  Wed Jan 25 15:21:36 2012
From: matt at conundrum.com (Matthew Pounsett)
Date: Wed, 25 Jan 2012 15:21:36 -0500
Subject: [Twisted-Python] Extending twisted.words.protocols.irc
In-Reply-To: <CA+U=zK1H23h3Kq8Kz41_WLig-G_eyZu697cWifi810rq5_aD9w@mail.gmail.com>
References: <ACBD4FA4-9731-4110-9D92-4F1270E3785D@conundrum.com>
	<CA+U=zK1H23h3Kq8Kz41_WLig-G_eyZu697cWifi810rq5_aD9w@mail.gmail.com>
Message-ID: <0C6F1DFF-29D4-43EE-9A95-FCC95276F808@conundrum.com>


On 2012/01/25, at 14:44, Kevin Horn wrote:

> Probably the best way to submit code is to open a ticket on the tracker, with an attached patch as a unified diff against the current twisted trunk.
> [...]
> See also: http://twistedmatrix.com/trac/wiki/ContributingToTwistedLabs

Excellent.  Thanks for the pointer!





From exarkun at twistedmatrix.com  Wed Jan 25 17:31:20 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 25 Jan 2012 22:31:20 -0000
Subject: [Twisted-Python] Extending twisted.words.protocols.irc
In-Reply-To: <0C6F1DFF-29D4-43EE-9A95-FCC95276F808@conundrum.com>
References: <ACBD4FA4-9731-4110-9D92-4F1270E3785D@conundrum.com>
	<CA+U=zK1H23h3Kq8Kz41_WLig-G_eyZu697cWifi810rq5_aD9w@mail.gmail.com>
	<0C6F1DFF-29D4-43EE-9A95-FCC95276F808@conundrum.com>
Message-ID: <20120125223120.2876.1551228012.divmod.xquotient.329@localhost6.localdomain6>

On 08:21 pm, matt at conundrum.com wrote:
>
>On 2012/01/25, at 14:44, Kevin Horn wrote:
>>Probably the best way to submit code is to open a ticket on the 
>>tracker, with an attached patch as a unified diff against the current 
>>twisted trunk.
>>[...]
>>See also: http://twistedmatrix.com/trac/wiki/ContributingToTwistedLabs
>
>Excellent.  Thanks for the pointer!

And please do file multiple tickets and split your patch up amongst 
them, if you have multiple new features or bug fixes.

Thanks.
Jean-Paul


From matt at conundrum.com  Wed Jan 25 18:34:02 2012
From: matt at conundrum.com (Matthew Pounsett)
Date: Wed, 25 Jan 2012 18:34:02 -0500
Subject: [Twisted-Python] Extending twisted.words.protocols.irc
In-Reply-To: <CA+U=zK1H23h3Kq8Kz41_WLig-G_eyZu697cWifi810rq5_aD9w@mail.gmail.com>
References: <ACBD4FA4-9731-4110-9D92-4F1270E3785D@conundrum.com>
	<CA+U=zK1H23h3Kq8Kz41_WLig-G_eyZu697cWifi810rq5_aD9w@mail.gmail.com>
Message-ID: <7C55787E-1025-4AEA-B85D-77B364FF8175@conundrum.com>


On 2012/01/25, at 14:44, Kevin Horn wrote:

> Probably the best way to submit code is to open a ticket on the tracker, with an attached patch as a unified diff against the current twisted trunk.

Can whoever is responsible for the tracker software have a look at its mail queue?  I'm not receiving the email address verification mail.  And yes, I've attempted to have it re-sent, and have double-checked my address and spam filters.  It should have been sent to this address.

> sudo grep -c twistedmatrix /var/log/exim/rejectlog
0




From exarkun at twistedmatrix.com  Wed Jan 25 20:13:36 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 26 Jan 2012 01:13:36 -0000
Subject: [Twisted-Python] Problems with trac account registration (was Re:
 Extending twisted.words.protocols.irc)
In-Reply-To: <7C55787E-1025-4AEA-B85D-77B364FF8175@conundrum.com>
References: <ACBD4FA4-9731-4110-9D92-4F1270E3785D@conundrum.com>
	<CA+U=zK1H23h3Kq8Kz41_WLig-G_eyZu697cWifi810rq5_aD9w@mail.gmail.com>
	<7C55787E-1025-4AEA-B85D-77B364FF8175@conundrum.com>
Message-ID: <20120126011336.2876.649665054.divmod.xquotient.339@localhost6.localdomain6>

On 25 Jan, 11:34 pm, matt at conundrum.com wrote:
>
>On 2012/01/25, at 14:44, Kevin Horn wrote:
>>Probably the best way to submit code is to open a ticket on the 
>>tracker, with an attached patch as a unified diff against the current 
>>twisted trunk.
>
>Can whoever is responsible for the tracker software have a look at its 
>mail queue?  I'm not receiving the email address verification mail. 
>And yes, I've attempted to have it re-sent, and have double-checked my 
>address and spam filters.  It should have been sent to this address.
>>sudo grep -c twistedmatrix /var/log/exim/rejectlog
>0

Heya Matt,

Sorry about that.  The problem is almost certainly on our side, not 
yours.  Unfortunately, the cause resists identification, though it 
appears to be somewhere within the trac registration system itself, not 
in the actual mail server software.

The Twisted project is somewhat lacking in administrative resources. 
Thomas Herv? kindly did some investigation into this issue, narrowing 
things down as far as trac.  Until someone finds time to look further 
though, this issue doesn't seem likely to get resolved.  This is rather 
unfortunate, since clearly it is obstructing a lot of new contributors.

If anyone is familiar with trac and could lend a hand, it would be very 
valuable and much appreciated.

Jean-Paul


From matt at conundrum.com  Sat Jan 28 00:51:32 2012
From: matt at conundrum.com (Matthew Pounsett)
Date: Sat, 28 Jan 2012 00:51:32 -0500
Subject: [Twisted-Python] IRCClient method naming advice
Message-ID: <83470834-9FAD-4C36-898A-C3479F86BC6B@conundrum.com>


I've found that the IRCClient protocol doesn't deal well with having its connection interrupted.  If the TCP session goes away due to timeout or some other interruption, it doesn't appear to notice.  As a result, I'm looking at adding appropriate methods to allow a client to initiate its own pings to the server so that it can detect when the connection is lost.  I'll submit all this back via Trac when I can get in there.

This will need IRCClient.irc_PONG(), which looks fairly straightforward to write, and the obvious method for the outgoing ping would be IRCClient.ping(), but that seems to have been taken up for DCC PING instead.  

Presumably it would upset people if backward compatibility was broken and that was changed to IRCClient.dccPing() to match the rest of the outgoing DCC methods. Does anyone have any opinion on what other method name would make sense and still be close to maintaining consistency with the rest of the outgoing method names?




From jonathan+twisted at jsphere.com  Sat Jan 28 04:20:23 2012
From: jonathan+twisted at jsphere.com (Jonathan Jacobs)
Date: Sat, 28 Jan 2012 11:20:23 +0200
Subject: [Twisted-Python] IRCClient method naming advice
In-Reply-To: <83470834-9FAD-4C36-898A-C3479F86BC6B@conundrum.com>
References: <83470834-9FAD-4C36-898A-C3479F86BC6B@conundrum.com>
Message-ID: <CAM187SFZ_9dT+Nyj-xeYiEgV53iSYQR=-dws9gYA19WEj9Szug@mail.gmail.com>

On Sat, Jan 28, 2012 at 07:51, Matthew Pounsett <matt at conundrum.com> wrote:
>
> I've found that the IRCClient protocol doesn't deal well with having its connection interrupted. ?If the TCP session goes away due to timeout or some other interruption, it doesn't appear to notice. ?As a result, I'm looking at adding appropriate methods to allow a client to initiate its own pings to the server so that it can detect when the connection is lost. ?I'll submit all this back via Trac when I can get in there.
>
> This will need IRCClient.irc_PONG(), which looks fairly straightforward to write, and the obvious method for the outgoing ping would be IRCClient.ping(), but that seems to have been taken up for DCC PING instead.
>
> Presumably it would upset people if backward compatibility was broken and that was changed to IRCClient.dccPing() to match the rest of the outgoing DCC methods. Does anyone have any opinion on what other method name would make sense and still be close to maintaining consistency with the rest of the outgoing method names?


Hi Matthew,

"Heartbeat" functionality was implemented in IRCClient and released in
Twisted 11.1.0, see ticket #5047
<http://twistedmatrix.com/trac/ticket/5047>, by default it sends a
PING every 120 seconds.

You don't actually need to acknowledge the PONG for the purpose of
keeping the client alive and active, writing any data to the transport
is enough to trigger connectionLost if the connection is genuinely
dead.

Hope this helps.

--
Jonathan


From matt at conundrum.com  Sat Jan 28 12:55:37 2012
From: matt at conundrum.com (Matthew Pounsett)
Date: Sat, 28 Jan 2012 12:55:37 -0500
Subject: [Twisted-Python] IRCClient method naming advice
In-Reply-To: <CAM187SFZ_9dT+Nyj-xeYiEgV53iSYQR=-dws9gYA19WEj9Szug@mail.gmail.com>
References: <83470834-9FAD-4C36-898A-C3479F86BC6B@conundrum.com>
	<CAM187SFZ_9dT+Nyj-xeYiEgV53iSYQR=-dws9gYA19WEj9Szug@mail.gmail.com>
Message-ID: <4679A66D-8BCE-40C1-85E2-1D915B9397D7@conundrum.com>


On 2012/01/28, at 04:20, Jonathan Jacobs wrote:

> "Heartbeat" functionality was implemented in IRCClient and released in
> Twisted 11.1.0, see ticket #5047
> <http://twistedmatrix.com/trac/ticket/5047>, by default it sends a
> PING every 120 seconds.

Ahh.. my problem is that my package manager (FreeBSD ports) seems to be out of date: I've got 11.0.  I've already got the trunk checked out.. I should have just checked there.

Thanks!



From penxiao at cisco.com  Sat Jan 28 20:48:42 2012
From: penxiao at cisco.com (Peng Xiao -X (penxiao - Digital China at Cisco))
Date: Sun, 29 Jan 2012 09:48:42 +0800
Subject: [Twisted-Python] How to  Connect a IPv6 server through Twisted
Message-ID: <776373CB9C5EA544A476052F49F1DAE2024EB354@XMB-HKG-41B.cisco.com>

Hi experts

 

I want to establish a connection between my twisted client and an IPv6
server, how can I achieve that?

Which version of Twisted should I use?

 

I know how to use IPv4 through "reactor.connectTCP(self.Addr, PORT,
self)". 

 

Very thanks

 

Best

Regards,

 

Xiao Peng

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120129/0b2a683c/attachment.htm 

From exarkun at twistedmatrix.com  Sun Jan 29 00:05:39 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 29 Jan 2012 05:05:39 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1327813539.67.1201807449@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120129/38831691/attachment.htm 

From fourat at gmail.com  Sun Jan 29 00:57:17 2012
From: fourat at gmail.com (Fourat ZOUARI)
Date: Sun, 29 Jan 2012 06:57:17 +0100
Subject: [Twisted-Python] Problem passing objects with perspective broker
Message-ID: <CAC6f7iPja2wFuRLGZ_E9_n3REOYoLSeN4hyeQfv+TmCH=LwpzA@mail.gmail.com>

Hi,

Whenever i try to pass an object (aClass) with a property with a second
object (bClass) Am getting:

*Unpersistable('Unpersistable data: instance of class amodule.bClass deemed
insecure')*


The aClass is copyable and unjellied, the bClass is not.

Here's my code:

server.py:

from twisted.application import internet, service
from twisted.spread import pb
from amodule import PBServer

application = service.Application("Test app")

# Prepare managers
clientManager = internet.TCPServer(8282, pb.PBServerFactory(PBServer()));
clientManager.setServiceParent(application)

if __name__ == '__main__':
    print "Run with twistd"
    import sys
    sys.exit(1)


amodule.py:

from twisted.spread import pb

class bClass:
    """This is not a Copyable class
    """

class aClass(pb.RemoteCopy, pb.Copyable):
    b = bClass()
pb.setUnjellyableForClass(aClass, aClass)

class PBServer(pb.Root):
    def remote_echo(self, a):
        return a.b

Is there anyway to unjelly aClass and all the objects it can contain ?
because unjellying included object is a headache and may turn into dirty
code ...

Regards, Fourat
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120129/61fa7a74/attachment.htm 

From dripton at ripton.net  Sun Jan 29 01:11:56 2012
From: dripton at ripton.net (David Ripton)
Date: Sun, 29 Jan 2012 01:11:56 -0500
Subject: [Twisted-Python] Problem passing objects with perspective broker
In-Reply-To: <CAC6f7iPja2wFuRLGZ_E9_n3REOYoLSeN4hyeQfv+TmCH=LwpzA@mail.gmail.com>
References: <CAC6f7iPja2wFuRLGZ_E9_n3REOYoLSeN4hyeQfv+TmCH=LwpzA@mail.gmail.com>
Message-ID: <4F24E32C.3000400@ripton.net>

On 01/29/12 00:57, Fourat ZOUARI wrote:

> Whenever i try to pass an object (aClass) with a property with a second
> object (bClass) Am getting:
>
>     *Unpersistable('Unpersistable data: instance of class amodule.bClass
>     deemed insecure')*
>
>
> The aClass is copyable and unjellied, the bClass is not.
>
> Here's my code:
>
> server.py:
>
>     from twisted.application import internet, service
>     from twisted.spread import pb
>     from amodule import PBServer
>
>     application = service.Application("Test app")
>
>     # Prepare managers
>     clientManager = internet.TCPServer(8282,
>     pb.PBServerFactory(PBServer()));
>     clientManager.setServiceParent(application)
>
>     if __name__ == '__main__':
>          print "Run with twistd"
>          import sys
>          sys.exit(1)
>
>
> amodule.py:
>
>     from twisted.spread import pb
>
>     class bClass:
>     """This is not a Copyable class
>     """
>
>     class aClass(pb.RemoteCopy, pb.Copyable):
>          b = bClass()
>     pb.setUnjellyableForClass(aClass, aClass)
>
>     class PBServer(pb.Root):
>          def remote_echo(self, a):
>              return a.b
>
> Is there anyway to unjelly aClass and all the objects it can contain ?
> because unjellying included object is a headache and may turn into dirty
> code ...

If you make bClass inherit from pb.Copyable and do 
pb.setUnjellyableForClass(bClass, bClass) then everything should work.

Twisted knows how to do what you want, but it's refusing to do because 
you haven't marked bClass as safe to pass over the wire.

-- 
David Ripton    dripton at ripton.net


From fourat at gmail.com  Sun Jan 29 01:28:08 2012
From: fourat at gmail.com (Fourat ZOUARI)
Date: Sun, 29 Jan 2012 07:28:08 +0100
Subject: [Twisted-Python] Problem passing objects with perspective broker
In-Reply-To: <4F24E32C.3000400@ripton.net>
References: <CAC6f7iPja2wFuRLGZ_E9_n3REOYoLSeN4hyeQfv+TmCH=LwpzA@mail.gmail.com>
	<4F24E32C.3000400@ripton.net>
Message-ID: <CAC6f7iNo3rhAXzDeq2O0ByDm76=LV=1=u4OqA3RgJ4Rd3H1jRg@mail.gmail.com>

I didnt make bClass as copyable and unjellyed it just for the question, in
fact, the example i gave was the bare minimum of my source code to let
people clearly view the issue.

In the real problem, aClass has many references to other objects and if i
were to set them all as copyable and then unjellyed them all on the server
side, that would be a headache ...

Am asking whether if a clean solution exist for such problems.


On Sun, Jan 29, 2012 at 7:11 AM, David Ripton <dripton at ripton.net> wrote:

> On 01/29/12 00:57, Fourat ZOUARI wrote:
>
> > Whenever i try to pass an object (aClass) with a property with a second
> > object (bClass) Am getting:
> >
> >     *Unpersistable('Unpersistable data: instance of class amodule.bClass
> >     deemed insecure')*
> >
> >
> > The aClass is copyable and unjellied, the bClass is not.
> >
> > Here's my code:
> >
> > server.py:
> >
> >     from twisted.application import internet, service
> >     from twisted.spread import pb
> >     from amodule import PBServer
> >
> >     application = service.Application("Test app")
> >
> >     # Prepare managers
> >     clientManager = internet.TCPServer(8282,
> >     pb.PBServerFactory(PBServer()));
> >     clientManager.setServiceParent(application)
> >
> >     if __name__ == '__main__':
> >          print "Run with twistd"
> >          import sys
> >          sys.exit(1)
> >
> >
> > amodule.py:
> >
> >     from twisted.spread import pb
> >
> >     class bClass:
> >     """This is not a Copyable class
> >     """
> >
> >     class aClass(pb.RemoteCopy, pb.Copyable):
> >          b = bClass()
> >     pb.setUnjellyableForClass(aClass, aClass)
> >
> >     class PBServer(pb.Root):
> >          def remote_echo(self, a):
> >              return a.b
> >
> > Is there anyway to unjelly aClass and all the objects it can contain ?
> > because unjellying included object is a headache and may turn into dirty
> > code ...
>
> If you make bClass inherit from pb.Copyable and do
> pb.setUnjellyableForClass(bClass, bClass) then everything should work.
>
> Twisted knows how to do what you want, but it's refusing to do because
> you haven't marked bClass as safe to pass over the wire.
>
> --
> David Ripton    dripton at ripton.net
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120129/24341671/attachment.htm 

From dynamicgl at gmail.com  Sun Jan 29 04:24:57 2012
From: dynamicgl at gmail.com (gelin yan)
Date: Sun, 29 Jan 2012 17:24:57 +0800
Subject: [Twisted-Python] How to Connect a IPv6 server through Twisted
In-Reply-To: <776373CB9C5EA544A476052F49F1DAE2024EB354@XMB-HKG-41B.cisco.com>
References: <776373CB9C5EA544A476052F49F1DAE2024EB354@XMB-HKG-41B.cisco.com>
Message-ID: <CABkOF6StsdjS=Suq2nhbLYScRsqxnZLoP-4Fbxb2EnERTaAcQg@mail.gmail.com>

On Sun, Jan 29, 2012 at 9:48 AM, Peng Xiao -X (penxiao - Digital China at
Cisco) <penxiao at cisco.com> wrote:

>  Hi experts****
>
> ** **
>
> I want to establish a connection between my twisted client and an IPv6
> server, how can I achieve that?****
>
> Which version of Twisted should I use?****
>
> ** **
>
> I know how to use IPv4 through ?reactor.connectTCP(self.Addr, PORT,
> self)?. ****
>
> ** **
>
> Very thanks****
>
> ** **
>
> Best****
>
> Regards,****
>
>  ****
>
> Xiao Peng****
>
> **
>
   IPV6 support on twisted is rudimentary at the moment..

>  **
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120129/c0b6790e/attachment.htm 

From p.mayers at imperial.ac.uk  Sun Jan 29 18:34:30 2012
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Sun, 29 Jan 2012 23:34:30 +0000
Subject: [Twisted-Python] How to  Connect a IPv6 server through Twisted
In-Reply-To: <776373CB9C5EA544A476052F49F1DAE2024EB354@XMB-HKG-41B.cisco.com>
References: <776373CB9C5EA544A476052F49F1DAE2024EB354@XMB-HKG-41B.cisco.com>
Message-ID: <4F25D786.3090307@imperial.ac.uk>

On 01/29/2012 01:48 AM, Peng Xiao -X (penxiao - Digital China at Cisco) 
wrote:
> Hi experts
>
> I want to establish a connection between my twisted client and an IPv6
> server, how can I achieve that?
>
> Which version of Twisted should I use?

Currently not supported.

See:

  http://twistedmatrix.com/trac/ticket/5085

And:

  http://twistedmatrix.com/trac/wiki/IPv6

If you use the very latest SVN head, you can do:

  reactor.listenTCP(interface='::')

...to receive IPv6 TCP connections, but you cannot currently make them.


From glyph at twistedmatrix.com  Sun Jan 29 19:01:48 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Sun, 29 Jan 2012 19:01:48 -0500
Subject: [Twisted-Python] Problem passing objects with perspective broker
In-Reply-To: <CAC6f7iNo3rhAXzDeq2O0ByDm76=LV=1=u4OqA3RgJ4Rd3H1jRg@mail.gmail.com>
References: <CAC6f7iPja2wFuRLGZ_E9_n3REOYoLSeN4hyeQfv+TmCH=LwpzA@mail.gmail.com>
	<4F24E32C.3000400@ripton.net>
	<CAC6f7iNo3rhAXzDeq2O0ByDm76=LV=1=u4OqA3RgJ4Rd3H1jRg@mail.gmail.com>
Message-ID: <C328F9B0-EAC7-4026-94BF-3539A6F7ED30@twistedmatrix.com>


On Jan 29, 2012, at 1:28 AM, Fourat ZOUARI wrote:

> I didnt make bClass as copyable and unjellyed it just for the question, in fact, the example i gave was the bare minimum of my source code to let people clearly view the issue.
> 
> In the real problem, aClass has many references to other objects and if i were to set them all as copyable and then unjellyed them all on the server side, that would be a headache ...
> 
> Am asking whether if a clean solution exist for such problems.

You have to override getStateToCopy() and setCopyableState() so that only the references that you care about are transferred.

If you want to transfer an object though, you ned to make them copyable.  That's the whole point; only classes explicitly marked as copyable are allowed to be transferred.  Otherwise, bugs in your code might expose lots more information than you really want to, and remote attackers could create classes that they shouldn't be able to.

-glyph

From _ at lvh.cc  Tue Jan 31 07:41:01 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Tue, 31 Jan 2012 13:41:01 +0100
Subject: [Twisted-Python] Twisted Sprint at PyCon 2012 -- please sign up!
Message-ID: <CAE_Hg6ZkkwaGgw74fnf5LqPpvRejtKKM5PE=Xdo98yeC=3O72g@mail.gmail.com>

Hey!


So, I volunteered to manage the sprint at PyCon 2012. Since no-one else
has, I'm moving forward assuming I got the job ;-)

You should sign up (which involves logging in on the PyCon site, scrolling
to the bottom, clicking "Edit" and adding your name) to the sprint. This
makes it easier for organizers to know how many people to expect where.

Here's the signup link:

https://us.pycon.org/2012/community/sprints/projects/


cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120131/b95bb4a7/attachment.htm 

From exarkun at twistedmatrix.com  Tue Jan 31 10:26:48 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 31 Jan 2012 15:26:48 -0000
Subject: [Twisted-Python] Twisted Sprint at PyCon 2012 -- please sign up!
In-Reply-To: <CAE_Hg6ZkkwaGgw74fnf5LqPpvRejtKKM5PE=Xdo98yeC=3O72g@mail.gmail.com>
References: <CAE_Hg6ZkkwaGgw74fnf5LqPpvRejtKKM5PE=Xdo98yeC=3O72g@mail.gmail.com>
Message-ID: <20120131152648.4064.1770379855.divmod.xquotient.3@localhost6.localdomain6>

On 12:41 pm, _ at lvh.cc wrote:
>Hey!
>
>So, I volunteered to manage the sprint at PyCon 2012. Since no-one else
>has, I'm moving forward assuming I got the job ;-)

Thanks!  Have fun. :)

Jean-Paul


From kevin.horn at gmail.com  Tue Jan 31 15:44:27 2012
From: kevin.horn at gmail.com (Kevin Horn)
Date: Tue, 31 Jan 2012 14:44:27 -0600
Subject: [Twisted-Python] Twisted Sprint at PyCon 2012 -- please sign up!
In-Reply-To: <20120131152648.4064.1770379855.divmod.xquotient.3@localhost6.localdomain6>
References: <CAE_Hg6ZkkwaGgw74fnf5LqPpvRejtKKM5PE=Xdo98yeC=3O72g@mail.gmail.com>
	<20120131152648.4064.1770379855.divmod.xquotient.3@localhost6.localdomain6>
Message-ID: <CA+U=zK3yvSREc-2ODH7JdqguBOoKY+gEY_YGdSsS1eFiF31SVw@mail.gmail.com>

Sadly, I won't be able to make it to PyCon this year...

Kevin Horn

On Tue, Jan 31, 2012 at 9:26 AM, <exarkun at twistedmatrix.com> wrote:

> On 12:41 pm, _ at lvh.cc wrote:
> >Hey!
> >
> >So, I volunteered to manage the sprint at PyCon 2012. Since no-one else
> >has, I'm moving forward assuming I got the job ;-)
>
> Thanks!  Have fun. :)
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120131/e7428900/attachment.htm 

From rutt.4 at osu.edu  Tue Jan 31 22:59:30 2012
From: rutt.4 at osu.edu (Benjamin Rutt)
Date: Tue, 31 Jan 2012 22:59:30 -0500
Subject: [Twisted-Python] how to ensure writes to stdout via
 stdio.StandardIO are completed before we shutdown the reactor?
Message-ID: <CAMWA1_pGBmFoeYimm8WXJaCdNCDCmXVwF7xoBm8o83fWW_QTGQ@mail.gmail.com>

Hi twisted community,

What?s the best way to ensure writes to stdout via stdio.StandardIO
are completed before we shutdown the reactor??? The use case is to
emit an error message before we shutdown the reactor and stop our
program.? Dummy code snippet:

--------------------------------------------
#!/usr/bin/python

from twisted.internet import reactor, stdio
from twisted.protocols.basic? import LineReceiver

class StdinInteractor(LineReceiver):
? delimiter = '\n'

def go():
? stdio_proto = StdinInteractor()
? stdio.StandardIO(stdio_proto)
? stdio_proto.transport.write('did we get this message?\n')
? if 0:
??? reactor.stop()
? else:
??? reactor.callLater(1.0, reactor.stop)

reactor.callWhenRunning(go)
reactor.run()
--------------------------------------------

If I change ?if 0? to ?if 1?, I don?t get the message on stdout.? The
?reactor.callLater(1.0, reactor.stop)? is obviously a hack to let the
reactor send out the buffered message before shutting down.? Any
ideas?

Thanks,

-- 
Benjamin Rutt


From exarkun at twistedmatrix.com  Tue Jan  3 07:33:17 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 03 Jan 2012 14:33:17 -0000
Subject: [Twisted-Python] PB and FilePager
In-Reply-To: <2C5356FB-162D-4EE0-876E-80EC0471721D@stoppani.name>
References: <2C5356FB-162D-4EE0-876E-80EC0471721D@stoppani.name>
Message-ID: <20120103143317.2755.1940890778.divmod.xquotient.23@localhost6.localdomain6>

On 27 Jun 2011, 08:52 pm, jonathan at stoppani.name wrote:
>Hi there,
>
>I encountered a problem while dealing with file transfers using PB and 
>t.s.u.FilePager.

This looks like <http://twistedmatrix.com/trac/ticket/3445> which has 
been open for a while (and is still open).

The fix does seem straight-forward - keep track of the paused/unpaused 
state so new chunks can be written right away.  Note that reversing the 
order of the __init__ and startProducing calls probably isn't the right 
solution, as that would re-introduce 
<http://twistedmatrix.com/trac/ticket/3023>.

Anyone want to take a shot at this ticket?

Jean-Paul



From saghul at gmail.com  Wed Jan  4 04:14:57 2012
From: saghul at gmail.com (=?UTF-8?Q?Sa=C3=BAl_Ibarra_Corretg=C3=A9?=)
Date: Wed, 4 Jan 2012 12:14:57 +0100
Subject: [Twisted-Python] ConnectionMixin.loseConnection (in _newtls)
 lacking arguments
In-Reply-To: <658BF4CE-9FB4-4C7C-A48C-E409AF953721@twistedmatrix.com>
References: <CANSmkSEY0eTb-=9Okw_Bf8czgqar3PNESu2jNgfUiBgR5YSHGg@mail.gmail.com>
	<658BF4CE-9FB4-4C7C-A48C-E409AF953721@twistedmatrix.com>
Message-ID: <CANSmkSFR4v3vC9FQ4zJ3YgdwaCk8Ty+O9rbbw_cY8-H_W=on8w@mail.gmail.com>

Hi Glyph,

> Hi Saúl,
>
> The _connDone argument there is an internal convenience for that implementation of loseConnection(); it is not part of the API.  ITransport specifies that loseConnection takes no arguments.  See here: <http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.ITransport.html#loseConnection>.  You should fix your code to never pass an argument to loseConnection, as other transport implementations may also lack this argument.  (As a bizarre accident, the IOCP reactor also has this argument in its transport implementation, but there's no reason that it necessarily should.)
>
> However, the fact that you thought otherwise is a bug in our documentation :).  Please feel free to file tickets (<http://twistedmatrix.com/trac/newticket>) describing how you got to the loseConnection that takes an argument and why you didn't realize that you should be looking at ITransport instead :).
>

I see. I'll fix the bug and file a ticket then :-)

Thanks!

-- 
/Saúl
http://saghul.net | http://sipdoc.net



From sweetnivi88 at gmail.com  Fri Jan  6 01:54:20 2012
From: sweetnivi88 at gmail.com (nivedita datta)
Date: Fri, 6 Jan 2012 14:24:20 +0530
Subject: [Twisted-Python] Protocol stack in twisted
Message-ID: <CA+XLstsSb3O-eLzmOKAo6skAtZKe-M2PVBH2Z1vyz111xMitJw@mail.gmail.com>

A simple query,.. Is it possible to implement protocols & protocol
stack using twisted??

Regards,
Nivedita Datta



From michaelnt at gmail.com  Fri Jan  6 04:11:09 2012
From: michaelnt at gmail.com (Michael Thompson)
Date: Fri, 6 Jan 2012 11:11:09 +0000
Subject: [Twisted-Python] Protocol stack in twisted
In-Reply-To: <CA+XLstsSb3O-eLzmOKAo6skAtZKe-M2PVBH2Z1vyz111xMitJw@mail.gmail.com>
References: <CA+XLstsSb3O-eLzmOKAo6skAtZKe-M2PVBH2Z1vyz111xMitJw@mail.gmail.com>
Message-ID: <CA+A=P1pPHpdfefOBnZ4tdA6BKu0B0G38jhoywq4nxA3K_bknRA@mail.gmail.com>

On 6 January 2012 08:54, nivedita datta <sweetnivi88 at gmail.com> wrote:

> A simple query,.. Is it possible to implement protocols & protocol
> stack using twisted??
>
>
yes, http://twistedmatrix.com/documents/current/core/howto/servers.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120106/8f38c72c/attachment-0001.html>

From miwinter at cisco.com  Fri Jan  6 10:47:46 2012
From: miwinter at cisco.com (Mike Winter)
Date: Fri, 6 Jan 2012 09:47:46 -0800
Subject: [Twisted-Python] module name overloading and import rules
Message-ID: <0521F74B-D3AD-4F4F-B21E-4C0F77B38C26@cisco.com>

linkhttp://stackoverflow.com/questions/8761874/module-name-overloading-and-import-path
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120106/111181cb/attachment-0001.html>

From exarkun at twistedmatrix.com  Sat Jan  7 22:05:26 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 08 Jan 2012 05:05:26 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1325999126.43.444357280@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120108/d4dfc014/attachment-0001.html>

From bino at indoakses-online.com  Sun Jan  8 22:39:00 2012
From: bino at indoakses-online.com (bino oetomo)
Date: Mon, 09 Jan 2012 12:39:00 +0700
Subject: [Twisted-Python] question about twisted+wxPython : How to migrate
	to twistd ?
Message-ID: <4F0A7D74.9030500@indoakses-online.com>

Dear All ...

I just copy and paste the code from 
http://code.activestate.com/recipes/298985/
and adding lines :
--------------
         self.allowNone = True
         self.useDateTime = False
--------------
just before line#  45,
and it work great.

I need to adopting that script to my application, but I'm not familiar 
with code line 64-78 :
--------------------
if __name__ == '__main__':

     # Initiliaze MyApp
     app = MyXMLRPCApp(False) # False -> printing stdout/stderr to shell,
                              # not in an additional wx window

     # Make wx application twisted aware
     # Must have to start "wxreactor.install()" on top before
     reactor.registerWxApp(app)

     # Make a XML-RPC Server listening to port 7080
     reactor.listenTCP(7080, server.Site(app))
-------------------

How to migrate that script to twistd, something like :
------------------
#Create Application
application = service.Application("MultiService Example")
#Create xmlrpc site
myrpc = MyRPC()
site = server.Site(myrpc)
myrpcservice = internet.TCPServer(50008, site, interface='localhost')
#Creating Multi Service
multiService = service.MultiService()
#Add our Services to multiservice
myrpcservice.setServiceParent(multiService)
#Set created application to be serviceparent of multiservice
multiService.setServiceParent(application)
------------------

Kindly please give me your enlightment.

Sincerely
-bino-




From glyph at twistedmatrix.com  Mon Jan  9 07:04:30 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 9 Jan 2012 09:04:30 -0500
Subject: [Twisted-Python] question about twisted+wxPython : How to
	migrate to twistd ?
In-Reply-To: <4F0A7D74.9030500@indoakses-online.com>
References: <4F0A7D74.9030500@indoakses-online.com>
Message-ID: <EE7983F7-2613-4AAE-8173-81D054109F1C@twistedmatrix.com>

Hi Bino,

On Jan 9, 2012, at 12:39 AM, bino oetomo wrote:

> How to migrate that script to twistd, something like :

First of all, it's probably not appropriate to launch a WX GUI with twistd.  It's possible, but you don't get a lot of benefit.  If you are running in a GUI environment, your users likely have different expectations of logging, daemonization, etc, than they would with a background daemon.

Second, your script below looks mostly sensible; I assume that "MyRPC" is a version of MyXMLRPCApp that isn't a wx.App. I'm assuming that you want to run this as a .tac file, (i.e. with "twistd -y").  If that's the case, then you're on the right track.

> ------------------
> #Create Application
> application = service.Application("MultiService Example")
> #Create xmlrpc site
> myrpc = MyRPC()
> site = server.Site(myrpc)
> myrpcservice = internet.TCPServer(50008, site, interface='localhost')
> #Creating Multi Service
> multiService = service.MultiService()
> #Add our Services to multiservice
> myrpcservice.setServiceParent(multiService)
> #Set created application to be serviceparent of multiservice
> multiService.setServiceParent(application)
> ------------------

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120109/d480eace/attachment.html>

From bino at indoakses-online.com  Mon Jan  9 17:53:29 2012
From: bino at indoakses-online.com (bino oetomo)
Date: Tue, 10 Jan 2012 07:53:29 +0700
Subject: [Twisted-Python] test
Message-ID: <4F0B8C09.7020703@indoakses-online.com>

I don't receive any new post for several days.
Is there a problem with this list ?

-bino-



From jessica.mckellar at gmail.com  Mon Jan  9 18:10:03 2012
From: jessica.mckellar at gmail.com (Jessica McKellar)
Date: Mon, 9 Jan 2012 20:10:03 -0500
Subject: [Twisted-Python] test
In-Reply-To: <4F0B8C09.7020703@indoakses-online.com>
References: <4F0B8C09.7020703@indoakses-online.com>
Message-ID: <CAKDZRciy4LU7ri9N=VLX+fHi087Cm+r+J+i+aUewNx+siHM89w@mail.gmail.com>

Hi Bino,

I received your e-mails from today, as well as the other e-mails that
have been sent in the last couple of days, which you can check here:

http://twistedmatrix.com/pipermail/twisted-python/2012-January/thread.html

There's not a problem with the mailing list e-mails going out that I'm
aware of.

Regards,
-Jessica


On Mon, Jan 9, 2012 at 7:53 PM, bino oetomo <bino at indoakses-online.com> wrote:
> I don't receive any new post for several days.
> Is there a problem with this list ?
>
> -bino-
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From bino at indoakses-online.com  Mon Jan  9 18:14:45 2012
From: bino at indoakses-online.com (bino oetomo)
Date: Tue, 10 Jan 2012 08:14:45 +0700
Subject: [Twisted-Python] question about twisted+wxPython : How to
	migrate to twistd ?
In-Reply-To: <4F0A7D74.9030500@indoakses-online.com>
References: <4F0A7D74.9030500@indoakses-online.com>
Message-ID: <4F0B9105.1080507@indoakses-online.com>

Dear Glyph and All

I see a reply to my question via 
http://twistedmatrix.com/pipermail/twisted-python/2012-January/025076.html 
but I didn't receive it in my mail box (is there a problem with this list).

Thankyou for your reply.

Yes, I want it to run that script as .tac file.
Actualy I just need the wx part as "display" only. There is no "input" 
activity via WX.
My system will serve a driver. so the input part will use pushbuttons 
that will conected to USB via ArduinoBoard.
Thats why there is some previous post by me asking about combining 
serial with wokkel ... and I got Great enlightment from this list.

 From the script that combine wokkel and Arduino board .. I got knowlede 
on how to add more service to exixting twisted script using 
service.MultiService() and service.Application()

Basicaly I need to write a script that :
1. Display a base screen/panel/window when started
2. wait for command input via TCP/UDP/UnixSocket in JSON format
3. update the display based on variables inside incoming command

And if it not to much ... i prefer using twisted .tac file and 
service.MultiService() and service.Application().

Sincerely
-bino-


**On 01/09/2012 12:39 PM, bino oetomo wrote:
> Dear All ...
>
> I just copy and paste the code from 
> http://code.activestate.com/recipes/298985/
> and adding lines :
> --------------
>         self.allowNone = True
>         self.useDateTime = False
> --------------
> just before line#  45,
> and it work great.
>
> I need to adopting that script to my application, but I'm not familiar 
> with code line 64-78 :
> --------------------
> if __name__ == '__main__':
>
>     # Initiliaze MyApp
>     app = MyXMLRPCApp(False) # False -> printing stdout/stderr to shell,
>                              # not in an additional wx window
>
>     # Make wx application twisted aware
>     # Must have to start "wxreactor.install()" on top before
>     reactor.registerWxApp(app)
>
>     # Make a XML-RPC Server listening to port 7080
>     reactor.listenTCP(7080, server.Site(app))
> -------------------
>
> How to migrate that script to twistd, something like :
> ------------------
> #Create Application
> application = service.Application("MultiService Example")
> #Create xmlrpc site
> myrpc = MyRPC()
> site = server.Site(myrpc)
> myrpcservice = internet.TCPServer(50008, site, interface='localhost')
> #Creating Multi Service
> multiService = service.MultiService()
> #Add our Services to multiservice
> myrpcservice.setServiceParent(multiService)
> #Set created application to be serviceparent of multiservice
> multiService.setServiceParent(application)
> ------------------
>
> Kindly please give me your enlightment.
>
> Sincerely
> -bino-
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120110/dccf8fe4/attachment-0001.html>

From bino at indoakses-online.com  Mon Jan  9 18:18:08 2012
From: bino at indoakses-online.com (bino oetomo)
Date: Tue, 10 Jan 2012 08:18:08 +0700
Subject: [Twisted-Python] test
In-Reply-To: <CAKDZRciy4LU7ri9N=VLX+fHi087Cm+r+J+i+aUewNx+siHM89w@mail.gmail.com>
References: <4F0B8C09.7020703@indoakses-online.com>
	<CAKDZRciy4LU7ri9N=VLX+fHi087Cm+r+J+i+aUewNx+siHM89w@mail.gmail.com>
Message-ID: <4F0B91D0.6010902@indoakses-online.com>

Hi Jessica.
"Strangely" I also receive this "test" post
But I didn't receive my previous post

Sincerely
-bino-




From bino at indoakses-online.com  Mon Jan  9 18:27:04 2012
From: bino at indoakses-online.com (bino oetomo)
Date: Tue, 10 Jan 2012 08:27:04 +0700
Subject: [Twisted-Python] test
In-Reply-To: <CAKDZRciy4LU7ri9N=VLX+fHi087Cm+r+J+i+aUewNx+siHM89w@mail.gmail.com>
References: <4F0B8C09.7020703@indoakses-online.com>
	<CAKDZRciy4LU7ri9N=VLX+fHi087Cm+r+J+i+aUewNx+siHM89w@mail.gmail.com>
Message-ID: <4F0B93E8.4020002@indoakses-online.com>

Hi Jessica
On 01/10/2012 08:10 AM, Jessica McKellar wrote:
> Hi Bino,
>
> I received your e-mails from today, as well as the other e-mails that
> have been sent in the last couple of days, which you can check here:
>
> http://twistedmatrix.com/pipermail/twisted-python/2012-January/thread.html
>
> There's not a problem with the mailing list e-mails going out that I'm
> aware of.
>
I Received all the "test" thread
But I didn't receive all this thread --->
http://twistedmatrix.com/pipermail/twisted-python/2012-January/025075.html

Sincerely
-bino-



From exarkun at twistedmatrix.com  Tue Jan 10 07:19:28 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 10 Jan 2012 14:19:28 -0000
Subject: [Twisted-Python] I see,
 remote_method can also return a deferred. Perhaps we could document
 that?
In-Reply-To: <CAG4NAK6CWmeZNyzEjYNRPV94zvYyc4OjGiaEvHw_4bs8xkd51w@mail.gmail.com>
References: <CAG4NAK6CWmeZNyzEjYNRPV94zvYyc4OjGiaEvHw_4bs8xkd51w@mail.gmail.com>
Message-ID: <20120110141928.3189.898224799.divmod.xquotient.15@localhost6.localdomain6>

On 22 Sep 2011, 01:19 pm, a.libran at gmail.com wrote:
>I almost gave up choosing twisted until I found this explanation
>
>http://twistedmatrix.com/pipermail/twisted- 
>python/2004-April/007517.html
>
>which basically says a remote_method can return a deferred. In this
>case, the PB server won't return the result of the Deferred back to
>the client until the server-side callback fires. The result of the
>remote_method is then returned to the client, which then triggers
>client side's deferred callback.
>
>So, I thought one of the following would be helpful:
>
>1) An example showing remote_method returning a deferred
>
>and/or
>
>2) A section named "Server side remote_* methods can be async by
>returning deferreds" could be added as a 7th item in
>
>http://twistedmatrix.com/documents/current/core/howto/pb-usage.html
>
>.
>
>I spent some quality 30+ hours carefully reading 90% of the
>
>http://twistedmatrix.com/documents/current/core/howto/index.html
>
>and I do not remember picking this subtlety up. (Or you can point me
>the right place in doc.) (great doc btw.)
>
>Should I submit an improvement ticket for this? I could also make the
>server side example using Echoer, remote_echo, and deferToThread just
>so that whoever fixes the ticket can just copy and paste.

It looks like there is actually a ticket for this issue:

  http://twistedmatrix.com/trac/ticket/2555

with some work invested in resolving it.  Anyone care to pick up where 
the previous developer left off?

Jean-Paul



From glyph at twistedmatrix.com  Wed Jan 11 19:37:26 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 11 Jan 2012 21:37:26 -0500
Subject: [Twisted-Python] question about twisted+wxPython : How to
	migrate to twistd ?
In-Reply-To: <4F0B9105.1080507@indoakses-online.com>
References: <4F0A7D74.9030500@indoakses-online.com>
	<4F0B9105.1080507@indoakses-online.com>
Message-ID: <E4F95E47-6938-4C37-9B1D-9ECA142556BD@twistedmatrix.com>


On Jan 9, 2012, at 8:14 PM, bino oetomo wrote:

> And if it not to much ... i prefer using twisted .tac file and service.MultiService() and service.Application().

As far as I can tell, you're completely on the right track for what you want to do.  I personally wouldn't use twistd for this, but there's nothing stopping you: you just need to make sure to pass the appropriate reactor option.  As long as you do 'twistd --reactor wx -y Your-App.tac'  you should be fine.  (Although some GUI libraries are highly sensitive to the use of fork(), so you may need to toss a -n in there as well; I don't know specifically about wx.)

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120111/5cb8e040/attachment-0001.html>

From miwinter at cisco.com  Thu Jan 12 01:40:17 2012
From: miwinter at cisco.com (Mike Winter)
Date: Thu, 12 Jan 2012 00:40:17 -0800
Subject: [Twisted-Python] telnet works, why wont this client/protocol test?
Message-ID: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>

i can telnet to the port given in test-code below and it interacts appropriately. The connection is to a regular portforwarder and the server is an Answer-server:

class Answer(LineReceiver):

    answers = {'How are you?': 'Fine',
               'no': 'No!?!',
               None : "I don't know what you mean",
               'hello': 'hi there',
               'Whats Up': 'not much' }

    def lineReceived(self, line):
        log.debug('line: %s' % line)
        if self.answers.has_key(line):
            self.sendLine(self.answers[line])
        else:
            self.sendLine(self.answers[None])

Its not a unit-test, but it reasonably expresses code that I dont understand 

from twisted.trial.unittest import TestCase
from twisted.internet import reactor, protocol, defer
from twisted.internet.protocol import ClientFactory,ReconnectingClientFactory
from twisted.protocols.policies import WrappingFactory
from twisted.protocols import basic
import localproxy
import settings
from state import State
import engine
from server import Factory, AssertingAnswer, AssertingFactoryMixin
from assertion import URL
import logging
global log

log = logging.getLogger(__name__)
log.setLevel(settings.loglevel)

class Test(TestCase):

    def sendTraffic(self, vip, count = 1,
                    payload = 'Whats Up\n',
                    expectedResponse = 'not much'):
        '''telnet to DUT and post payload'''
        log.debug('vip: %s:%s' % (vip.host, vip.port))
        t = self
        class Hello(basic.LineReceiver):
            def dataReceived(self, data):
                log.debug('trace: %s' % data)
                return basic.LineReceiver.dataReceived(self,data)

            def lineReceived(self, line):
                log.debug('trace: %s' % line)
                t.assertEquals(line, expectedResponse)
                self.transport.loseConnection()

            def connectionMade(self):
                log.debug('trace, writing "%s"' % payload)
                assert self.transport
                self.transport.write(payload)

            def connectionLost(self, reason):
                log.debug('reason: %s' % reason)

        f = ReconnectingClientFactory()
        f.protocol = Hello
        factory = WrappingFactory(f)
        reactor.connectTCP( vip.host, vip.port, factory)
        log.debug('clientFactory: %s' % factory.__dict__)
        return factory

    def killClient(t):
        log.debug('t: %s' % t)

    def testClientConnect(self):
        vip = State(host='127.0.0.1', port = 10040)
        t = self.sendTraffic( vip)
        reactor.callLater(1, self.killClient, t)




From itamar at itamarst.org  Thu Jan 12 05:42:45 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Thu, 12 Jan 2012 07:42:45 -0500
Subject: [Twisted-Python] telnet works,
 why wont this client/protocol test?
In-Reply-To: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>
References: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>
Message-ID: <4F0ED545.5050006@itamarst.org>

At a guess, it's because by default LineReceiver splits on '\r\n', but 
you're sending only '\n'.

-Itamar



From miwinter at cisco.com  Thu Jan 12 10:56:27 2012
From: miwinter at cisco.com (Mike Winter)
Date: Thu, 12 Jan 2012 09:56:27 -0800
Subject: [Twisted-Python] telnet works,
	why wont this client/protocol test?
In-Reply-To: <4F0ED545.5050006@itamarst.org>
References: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>
	<4F0ED545.5050006@itamarst.org>
Message-ID: <2FD32B03-1590-4C9C-AB01-AE77445F3315@cisco.com>

That helps, thanks. 

I know that http processing does \r\n, I suppose there is an rfc that says this is reasonable, and LineReceiver is designed to be used in http for the same reason.

On Jan 12, 2012, at 4:42:45AM, Itamar Turner-Trauring wrote:

> At a guess, it's because by default LineReceiver splits on '\r\n', but 
> you're sending only '\n'.
> 
> -Itamar
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From itamar at itamarst.org  Thu Jan 12 11:01:43 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Thu, 12 Jan 2012 13:01:43 -0500
Subject: [Twisted-Python] telnet works,
 why wont this client/protocol test?
In-Reply-To: <2FD32B03-1590-4C9C-AB01-AE77445F3315@cisco.com>
References: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>
	<4F0ED545.5050006@itamarst.org>
	<2FD32B03-1590-4C9C-AB01-AE77445F3315@cisco.com>
Message-ID: <90a8073d0696ca7817816c9857427930.squirrel@webmail.zoteca.com>

> That helps, thanks.
>
> I know that http processing does \r\n, I suppose there is an rfc that says
> this is reasonable, and LineReceiver is designed to be used in http for
> the same reason.

So does telnet, smtp, ftp, etc..




From augustocaringi at gmail.com  Thu Jan 12 11:06:16 2012
From: augustocaringi at gmail.com (Augusto Mecking Caringi)
Date: Thu, 12 Jan 2012 16:06:16 -0200
Subject: [Twisted-Python] telnet works,
	why wont this client/protocol test?
In-Reply-To: <2FD32B03-1590-4C9C-AB01-AE77445F3315@cisco.com>
References: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>
	<4F0ED545.5050006@itamarst.org>
	<2FD32B03-1590-4C9C-AB01-AE77445F3315@cisco.com>
Message-ID: <CADFy_4GUfkmpn4NhpwWCN8EyFm74mkVXe=JT_ccn08LrHznfVA@mail.gmail.com>

On Thu, Jan 12, 2012 at 3:56 PM, Mike Winter <miwinter at cisco.com> wrote:
> That helps, thanks.
>
> I know that http processing does \r\n, I suppose there is an rfc that says this is reasonable, and LineReceiver is designed to be used in http for the same reason.

"Most textual Internet protocols (including HTTP, SMTP, FTP, IRC and
many others) mandate the use of ASCII CR+LF (0x0D 0x0A) on the
protocol level, but recommend that tolerant applications recognize
lone LF as well."

http://en.wikipedia.org/wiki/Newline#Representations

[]'s

> On Jan 12, 2012, at 4:42:45AM, Itamar Turner-Trauring wrote:
>
>> At a guess, it's because by default LineReceiver splits on '\r\n', but
>> you're sending only '\n'.
>>
>> -Itamar

-- 
Augusto Mecking Caringi



From miwinter at cisco.com  Thu Jan 12 11:20:24 2012
From: miwinter at cisco.com (Mike Winter)
Date: Thu, 12 Jan 2012 10:20:24 -0800
Subject: [Twisted-Python] telnet works,
	why wont this client/protocol test?
In-Reply-To: <CADFy_4GUfkmpn4NhpwWCN8EyFm74mkVXe=JT_ccn08LrHznfVA@mail.gmail.com>
References: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>
	<4F0ED545.5050006@itamarst.org>
	<2FD32B03-1590-4C9C-AB01-AE77445F3315@cisco.com>
	<CADFy_4GUfkmpn4NhpwWCN8EyFm74mkVXe=JT_ccn08LrHznfVA@mail.gmail.com>
Message-ID: <A4AE984D-53E9-44AB-BCB0-DC9E0438040F@cisco.com>

Thanks for the link, added to code as comment.

On Jan 12, 2012, at 10:06:16AM, Augusto Mecking Caringi wrote:

> On Thu, Jan 12, 2012 at 3:56 PM, Mike Winter <miwinter at cisco.com> wrote:
>> That helps, thanks.
>> 
>> I know that http processing does \r\n, I suppose there is an rfc that says this is reasonable, and LineReceiver is designed to be used in http for the same reason.
> 
> "Most textual Internet protocols (including HTTP, SMTP, FTP, IRC and
> many others) mandate the use of ASCII CR+LF (0x0D 0x0A) on the
> protocol level, but recommend that tolerant applications recognize
> lone LF as well."
> 
> http://en.wikipedia.org/wiki/Newline#Representations
> 
> []'s
> 
>> On Jan 12, 2012, at 4:42:45AM, Itamar Turner-Trauring wrote:
>> 
>>> At a guess, it's because by default LineReceiver splits on '\r\n', but
>>> you're sending only '\n'.
>>> 
>>> -Itamar
> 
> -- 
> Augusto Mecking Caringi
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From glyph at twistedmatrix.com  Thu Jan 12 11:33:51 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 12 Jan 2012 13:33:51 -0500
Subject: [Twisted-Python] telnet works,
	why wont this client/protocol test?
In-Reply-To: <CADFy_4GUfkmpn4NhpwWCN8EyFm74mkVXe=JT_ccn08LrHznfVA@mail.gmail.com>
References: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>
	<4F0ED545.5050006@itamarst.org>
	<2FD32B03-1590-4C9C-AB01-AE77445F3315@cisco.com>
	<CADFy_4GUfkmpn4NhpwWCN8EyFm74mkVXe=JT_ccn08LrHznfVA@mail.gmail.com>
Message-ID: <C0F8FFBE-FC25-4BDB-9B0A-C6D34B5727DF@twistedmatrix.com>

On Jan 12, 2012, at 1:06 PM, Augusto Mecking Caringi wrote:

> "Most textual Internet protocols (including HTTP, SMTP, FTP, IRC and
> many others) mandate the use of ASCII CR+LF (0x0D 0x0A) on the
> protocol level, but recommend that tolerant applications recognize
> lone LF as well."

[citation needed]

Where is the recommendation that "tolerant" applications recognize lone LF for these protocols?  Re-skimming the RFCs now, they all seem to mandate CR LF.  (Also: is there a recommendation elsewhere that delineates between tolerant and intolerant applications?)

-glyph



-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120112/155c97d8/attachment.html>

From augustocaringi at gmail.com  Thu Jan 12 11:57:03 2012
From: augustocaringi at gmail.com (Augusto Mecking Caringi)
Date: Thu, 12 Jan 2012 16:57:03 -0200
Subject: [Twisted-Python] telnet works,
	why wont this client/protocol test?
In-Reply-To: <C0F8FFBE-FC25-4BDB-9B0A-C6D34B5727DF@twistedmatrix.com>
References: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>
	<4F0ED545.5050006@itamarst.org>
	<2FD32B03-1590-4C9C-AB01-AE77445F3315@cisco.com>
	<CADFy_4GUfkmpn4NhpwWCN8EyFm74mkVXe=JT_ccn08LrHznfVA@mail.gmail.com>
	<C0F8FFBE-FC25-4BDB-9B0A-C6D34B5727DF@twistedmatrix.com>
Message-ID: <CADFy_4FtquYsBdpv0yLjVaUsMsS6Tr9QPqmb6nGcbYHGaSKLBA@mail.gmail.com>

On Thu, Jan 12, 2012 at 4:33 PM, Glyph <glyph at twistedmatrix.com> wrote:
> On Jan 12, 2012, at 1:06 PM, Augusto Mecking Caringi wrote:
>
> "Most textual Internet protocols (including HTTP, SMTP, FTP, IRC and
> many others) mandate the use of ASCII CR+LF (0x0D 0x0A) on the
> protocol level, but recommend that tolerant applications recognize
> lone LF as well."
>
>
> [citation needed]
>
> Where is the recommendation that "tolerant" applications recognize lone LF
> for these protocols?  Re-skimming the RFCs now, they all seem to mandate CR
> LF.  (Also: is there a recommendation elsewhere that delineates between
> tolerant and intolerant applications?)
>
> -glyph

Right.

But there is an interesting fact:

"nc" and "openssl s_client", two utilities that I use every day to
connect to diferent types of servers send only LF as default...

To use CRLF you must explicity do this:

>From the openssl s_client man page:

-crlf
           this option translated a line feed from the terminal into
CR+LF as required by some servers.

>From the nc man page:

-C      Send CRLF as line-ending

Why?

-- 
Augusto Mecking Caringi



From mithrandi at mithrandi.net  Thu Jan 12 12:21:32 2012
From: mithrandi at mithrandi.net (Tristan Seligmann)
Date: Thu, 12 Jan 2012 21:21:32 +0200
Subject: [Twisted-Python] telnet works,
	why wont this client/protocol test?
In-Reply-To: <CADFy_4FtquYsBdpv0yLjVaUsMsS6Tr9QPqmb6nGcbYHGaSKLBA@mail.gmail.com>
References: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>
	<4F0ED545.5050006@itamarst.org>
	<2FD32B03-1590-4C9C-AB01-AE77445F3315@cisco.com>
	<CADFy_4GUfkmpn4NhpwWCN8EyFm74mkVXe=JT_ccn08LrHznfVA@mail.gmail.com>
	<C0F8FFBE-FC25-4BDB-9B0A-C6D34B5727DF@twistedmatrix.com>
	<CADFy_4FtquYsBdpv0yLjVaUsMsS6Tr9QPqmb6nGcbYHGaSKLBA@mail.gmail.com>
Message-ID: <CAMcKhMSuhZR-sJNxr7LTpaY1k9WgLW9yQ8CPHD0ptXKdPYuPmQ@mail.gmail.com>

On Thu, Jan 12, 2012 at 8:57 PM, Augusto Mecking Caringi
<augustocaringi at gmail.com> wrote:
> Right.
>
> But there is an interesting fact:
>
> "nc" and "openssl s_client", two utilities that I use every day to
> connect to diferent types of servers send only LF as default...

"nc" and "openssl s_client" read bytes from stdin and send them on
exactly as-is; it's your terminal that is sending LF. The reason
openssl provides an option to translate LF to CRLF is that this is
often useful when testing line-oriented network protocols
interactively, but this just underscores the point; if you want to
communicate with a network server that expects CRLF, you should send
CRLF from your client, not expect every server out there to accept LF
as an alternative line ending.
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar



From jstpierre at mecheye.net  Thu Jan 12 12:25:15 2012
From: jstpierre at mecheye.net (Jasper St. Pierre)
Date: Thu, 12 Jan 2012 14:25:15 -0500
Subject: [Twisted-Python] telnet works,
	why wont this client/protocol test?
In-Reply-To: <CADFy_4FtquYsBdpv0yLjVaUsMsS6Tr9QPqmb6nGcbYHGaSKLBA@mail.gmail.com>
References: <5D82FCEC-8AD5-449E-8EE6-31706D3B1EC5@cisco.com>
	<4F0ED545.5050006@itamarst.org>
	<2FD32B03-1590-4C9C-AB01-AE77445F3315@cisco.com>
	<CADFy_4GUfkmpn4NhpwWCN8EyFm74mkVXe=JT_ccn08LrHznfVA@mail.gmail.com>
	<C0F8FFBE-FC25-4BDB-9B0A-C6D34B5727DF@twistedmatrix.com>
	<CADFy_4FtquYsBdpv0yLjVaUsMsS6Tr9QPqmb6nGcbYHGaSKLBA@mail.gmail.com>
Message-ID: <CAA0H+QRKrO-V6AWjTbYDkWDODEQ_wYVi2zoTRoAA=bM6N6=8TQ@mail.gmail.com>

If you really want:

    from twisted.protocols.basic import LineReceiver

    class LFLineReceiver(LineReceiver):
        delimiter = '\n'

I'm assuming that it being '\r\n' by default is because more of the
protocols that use LineReceiver use '\r\n' as their delimiter. It's
not entirely hard to switch to '\n' as the delimiter.

On Thu, Jan 12, 2012 at 1:57 PM, Augusto Mecking Caringi
<augustocaringi at gmail.com> wrote:
> On Thu, Jan 12, 2012 at 4:33 PM, Glyph <glyph at twistedmatrix.com> wrote:
>> On Jan 12, 2012, at 1:06 PM, Augusto Mecking Caringi wrote:
>>
>> "Most textual Internet protocols (including HTTP, SMTP, FTP, IRC and
>> many others) mandate the use of ASCII CR+LF (0x0D 0x0A) on the
>> protocol level, but recommend that tolerant applications recognize
>> lone LF as well."
>>
>>
>> [citation needed]
>>
>> Where is the recommendation that "tolerant" applications recognize lone LF
>> for these protocols?  Re-skimming the RFCs now, they all seem to mandate CR
>> LF.  (Also: is there a recommendation elsewhere that delineates between
>> tolerant and intolerant applications?)
>>
>> -glyph
>
> Right.
>
> But there is an interesting fact:
>
> "nc" and "openssl s_client", two utilities that I use every day to
> connect to diferent types of servers send only LF as default...
>
> To use CRLF you must explicity do this:
>
> From the openssl s_client man page:
>
> -crlf
>           this option translated a line feed from the terminal into
> CR+LF as required by some servers.
>
> From the nc man page:
>
> -C      Send CRLF as line-ending
>
> Why?
>
> --
> Augusto Mecking Caringi
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



-- 
  Jasper



From bino at indoakses-online.com  Thu Jan 12 21:13:45 2012
From: bino at indoakses-online.com (bino oetomo)
Date: Fri, 13 Jan 2012 11:13:45 +0700
Subject: [Twisted-Python] Question  : How to web test txjsonrpc ?
Message-ID: <4F0FAF79.8070304@indoakses-online.com>

Dear All ...

I have a basic txjsonrpc script, like :
---------------
from twisted.application import internet, service
from txjsonrpc.web import jsonrpc
from twisted.web import server

from twisted.internet import reactor

import traceback


class MyRPC(jsonrpc.JSONRPC):
     def __init__(self):
         self.allowNone = True
         self.useDateTime = False

         #variabel untuk menampung koneksi xmppclient
         #perlu disiapkan terlebih dahulu
     def jsonrpc_aksi(self, msg):
         print 'JSON MSG',
         print msg
         print '------'
         print msg['myvar']
         print '\n'
         return 'OK'

#Create Application
application = service.Application("Serial MultiService Example")


#build jsonrpc site
myrpc = MyRPC()
site = server.Site(myrpc)
myrpcservice = internet.TCPServer(50008, site, interface='localhost')

#Creating Multi Service
multiService = service.MultiService()
#Add our Services to multiservice
myrpcservice.setServiceParent(multiService)
#Set created application to be serviceparent of multiservice
multiService.setServiceParent(application)
---------------

Those script is work fine ...I mean can be accessed via python based 
jsonrpc client.

But now i need to call this rpc server via web interface.
Since I don't have enough knowledge on web-based JSONRPC client , i do 
search google for it ... but I can't understand.
So I ask my friend to write some simple JSONRPC client , and he send me 
this litle html
---------------

<!DOCTYPE html>
<html>
<head>
	<script  type="text/javascript"src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js  <view-source:http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js>"></script>
	<script  type="text/javascript">
		$(document).ready(function(){
				 $('#getData').live('click', function(){
						$jsonArray ='{"action" : "aksi","myval1" : "val1", "myval2" :{"myval2a":"val2a","myval2b":"val2b"}}';
						$arr = JSON.stringify($jsonArray);
						$.get("http://127.0.0.1:50008/JSONRPC",{data:$arr},function(response){
							$("#showdata").html(response);
						});						
				 });
		 });
	</script>
</head>
<body>
<button  id="getData">Get JSON Data</button>
<div  id="showdata"></div>
</body>
</html>

---------------
My log file say :
File "/usr/lib/pymodules/python2.6/simplejson/decoder.py", line 420, in 
raw_decode
         raise JSONDecodeError("No JSON object could be decoded", s, idx)
     simplejson.decoder.JSONDecodeError: No JSON object could be 
decoded: line 1 column 0 (char 0)

And I think the received web request is reported as :
----------------
2012-01-13 10:56:29+0700 [HTTPChannel,3,127.0.0.1] 127.0.0.1 - - 
[13/Jan/2012:03:56:29 +0000] "GET 
/JSONRPC?data=%22%7B%5C%22action%5C%22+%3A+%5C%22aksi%5C%22%2C%5C%22myval1%5C%22+%3A+%5C%22val1%5C%22%2C+%5C%22myval2%5C%22+%3A%7B%5C%22myval2a%5C%22%3A%5C%22val2a%5C%22%2C%5C%22myval2b%5C%22%3A%5C%22val2b%5C%22%7D%7D%22 
HTTP/1.1" 500 14369 "http://127.0.0.1/taxi-get.html" "Mozilla/5.0 (X11; 
U; Linux i686; en-US; rv:1.9.2.18) Gecko/20110628 Ubuntu/10.10 
(maverick) Firefox/3.6.18"
----------------


So , kindly please give me (or refer me to)  any simple sample of 
web-based JSONRPC client .. using GET and/or POS methode ?

Sincerely
-bino-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120113/17616fe6/attachment.html>

From bino at indoakses-online.com  Fri Jan 13 01:46:43 2012
From: bino at indoakses-online.com (bino oetomo)
Date: Fri, 13 Jan 2012 15:46:43 +0700
Subject: [Twisted-Python] txjsonrpc.web2 ?
Message-ID: <4F0FEF73.7090301@indoakses-online.com>

Dear All ...
I try to use txjsonrpc web2.
I download the source from 
http://pypi.python.org/packages/source/t/txJSON-RPC/txJSON-RPC-0.3.1.tar.gz

after extracting and installing .. I go to the examples/web2 directory ...
and run :
bino at bino-desktop:~/Documents/IWIC/JSONRPC/txJSON-RPC-0.3.1/examples/web2$ 
twistd -ny ./server.tac -l ./server.log  --pidfile server.pid
---------------------------------------
and I got exception :

--- <exception caught here> ---
   File "/usr/lib/python2.6/dist-packages/twisted/application/app.py", 
line 450, in getApplication
     application = service.loadApplication(filename, style, passphrase)
   File 
"/usr/lib/python2.6/dist-packages/twisted/application/service.py", line 
390, in loadApplication
     application = sob.loadValueFromFile(filename, 'application', 
passphrase)
   File "/usr/lib/python2.6/dist-packages/twisted/persisted/sob.py", 
line 210, in loadValueFromFile
     exec fileObj in d, d
   File "./server.tac", line 1, in <module>
     from twisted.web2 import server
exceptions.ImportError: No module named web2

-------------------

I try to install newst twisted from svn ... but got same exception.

Question : Where can i got twisted.web2 ?

Sincerely
-bino-



From jaroslaw.fedewicz at gmail.com  Fri Jan 13 02:46:26 2012
From: jaroslaw.fedewicz at gmail.com (Yaroslav Fedevych)
Date: Fri, 13 Jan 2012 11:46:26 +0200
Subject: [Twisted-Python] txjsonrpc.web2 ?
In-Reply-To: <4F0FEF73.7090301@indoakses-online.com>
References: <4F0FEF73.7090301@indoakses-online.com>
Message-ID: <4F0FFD72.3000703@gmail.com>

On 13.01.12 10:46, bino oetomo wrote:

> I try to install newst twisted from svn ... but got same exception.
>
> Question : Where can i got twisted.web2 ?

If I recall correctly, twisted.web2 was deemed obsolete and unmaintained 
a few years ago and has been finally decommissioned fairly  recently. 
twisted.web2 is no more. Ceased to be. Kicked the bucket. You should 
really use twisted.web, since everything that was remotely good in web2 
was merged there.

Maybe contact the author of txJSONRPC and ask if he ever plans to update 
his code.

-- 
Yaroslav Fedevych
jaroslaw.fedewicz at gmail.com
Custom networked sofware solutions
tel. +380685061839
      +48222472352
Skype: jaroslaw.fedewicz



From tobias.oberstein at tavendo.de  Fri Jan 13 04:20:44 2012
From: tobias.oberstein at tavendo.de (Tobias Oberstein)
Date: Fri, 13 Jan 2012 03:20:44 -0800
Subject: [Twisted-Python] Review of kqueue reactor patch (ticket 1918)
Message-ID: <634914A010D0B943A035D226786325D42D14E50F82@EXVMBX020-12.exch020.serverdata.net>

Hi all,

the latest patch contained in

http://twistedmatrix.com/trac/ticket/1918

is - after some iterations - now in a "ready for final review state" for some weeks now.

I'd like to ask if someone has time to review it so it can be finally merged and the issue closed .. after 6 years;)

Cheers,
Tobias 



From itamar at itamarst.org  Fri Jan 13 06:34:45 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Fri, 13 Jan 2012 08:34:45 -0500
Subject: [Twisted-Python] txjsonrpc.web2 ?
In-Reply-To: <4F0FFD72.3000703@gmail.com>
References: <4F0FEF73.7090301@indoakses-online.com>
	<4F0FFD72.3000703@gmail.com>
Message-ID: <4F1032F5.1040309@itamarst.org>

On 01/13/2012 04:46 AM, Yaroslav Fedevych wrote:
> On 13.01.12 10:46, bino oetomo wrote:
>
>> I try to install newst twisted from svn ... but got same exception.
>>
>> Question : Where can i got twisted.web2 ?
> If I recall correctly, twisted.web2 was deemed obsolete and unmaintained
> a few years ago and has been finally decommissioned fairly  recently.
> twisted.web2 is no more. Ceased to be. Kicked the bucket. You should
> really use twisted.web, since everything that was remotely good in web2
> was merged there.
Sadly not everything in web2 has made it to twisted.web, yet. But yes, 
web2 is dead.




From jaroslaw.fedewicz at gmail.com  Fri Jan 13 06:38:08 2012
From: jaroslaw.fedewicz at gmail.com (Yaroslav Fedevych)
Date: Fri, 13 Jan 2012 15:38:08 +0200
Subject: [Twisted-Python] txjsonrpc.web2 ?
In-Reply-To: <4F1032F5.1040309@itamarst.org>
References: <4F0FEF73.7090301@indoakses-online.com>
	<4F0FFD72.3000703@gmail.com> <4F1032F5.1040309@itamarst.org>
Message-ID: <4F1033C0.40806@gmail.com>

On 13.01.12 15:34, Itamar Turner-Trauring wrote:

> Sadly not everything in web2 has made it to twisted.web, yet. But yes,
> web2 is dead.

Well, I thought those things at least made into tickets, and the sole 
fact they were not backported tells about their relative importance to 
Twisted-using folks.

-- 
Yaroslav Fedevych
jaroslaw.fedewicz at gmail.com
Custom networked sofware solutions
tel. +380685061839
      +48222472352
Skype: jaroslaw.fedewicz



From mostawesomedude at gmail.com  Fri Jan 13 08:45:48 2012
From: mostawesomedude at gmail.com (Corbin Simpson)
Date: Fri, 13 Jan 2012 07:45:48 -0800
Subject: [Twisted-Python] txjsonrpc.web2 ?
In-Reply-To: <4F1033C0.40806@gmail.com>
References: <4F0FEF73.7090301@indoakses-online.com>
	<4F0FFD72.3000703@gmail.com> <4F1032F5.1040309@itamarst.org>
	<4F1033C0.40806@gmail.com>
Message-ID: <CALiqSLdQ1S83Qz-0aZP8r47Vzt9LwN7wtw8fi6KMUQnTTng5DA@mail.gmail.com>

On Fri, Jan 13, 2012 at 5:38 AM, Yaroslav Fedevych
<jaroslaw.fedewicz at gmail.com> wrote:
> On 13.01.12 15:34, Itamar Turner-Trauring wrote:
>
>> Sadly not everything in web2 has made it to twisted.web, yet. But yes,
>> web2 is dead.
>
> Well, I thought those things at least made into tickets, and the sole
> fact they were not backported tells about their relative importance to
> Twisted-using folks.

Things like Deferred support in the Web API weren't ported because
there was no consensus on how to do it without breaking existing Web
users. I think that that is the reason why there are tickets for a
successor to IResource.

~ C.

-- 
When the facts change, I change my mind. What do you do, sir? ~ Keynes

Corbin Simpson
<MostAwesomeDude at gmail.com>



From exarkun at twistedmatrix.com  Fri Jan 13 11:23:01 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 13 Jan 2012 18:23:01 -0000
Subject: [Twisted-Python] txjsonrpc.web2 ?
In-Reply-To: <CALiqSLdQ1S83Qz-0aZP8r47Vzt9LwN7wtw8fi6KMUQnTTng5DA@mail.gmail.com>
References: <4F0FEF73.7090301@indoakses-online.com>
	<4F0FFD72.3000703@gmail.com> <4F1032F5.1040309@itamarst.org>
	<4F1033C0.40806@gmail.com>
	<CALiqSLdQ1S83Qz-0aZP8r47Vzt9LwN7wtw8fi6KMUQnTTng5DA@mail.gmail.com>
Message-ID: <20120113182301.3189.943726755.divmod.xquotient.198@localhost6.localdomain6>

On 03:45 pm, mostawesomedude at gmail.com wrote:
>On Fri, Jan 13, 2012 at 5:38 AM, Yaroslav Fedevych
><jaroslaw.fedewicz at gmail.com> wrote:
>>On 13.01.12 15:34, Itamar Turner-Trauring wrote:
>>>Sadly not everything in web2 has made it to twisted.web, yet. But 
>>>yes,
>>>web2 is dead.
>>
>>Well, I thought those things at least made into tickets, and the sole
>>fact they were not backported tells about their relative importance to
>>Twisted-using folks.
>
>Things like Deferred support in the Web API weren't ported because
>there was no consensus on how to do it without breaking existing Web
>users.

This is sort of true.
>I think that that is the reason why there are tickets for a
>successor to IResource.

But this is a much more useful piece of information.  Or, from another 
perspective, the consensus on how to do it is to introduce a new 
interface. :)

Jean-Paul



From glyph at twistedmatrix.com  Fri Jan 13 20:55:25 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 13 Jan 2012 22:55:25 -0500
Subject: [Twisted-Python] txjsonrpc.web2 ?
In-Reply-To: <20120113182301.3189.943726755.divmod.xquotient.198@localhost6.localdomain6>
References: <4F0FEF73.7090301@indoakses-online.com>
	<4F0FFD72.3000703@gmail.com> <4F1032F5.1040309@itamarst.org>
	<4F1033C0.40806@gmail.com>
	<CALiqSLdQ1S83Qz-0aZP8r47Vzt9LwN7wtw8fi6KMUQnTTng5DA@mail.gmail.com>
	<20120113182301.3189.943726755.divmod.xquotient.198@localhost6.localdomain6>
Message-ID: <6D8F8730-B8CF-45AD-BCB1-22E02282C241@twistedmatrix.com>


On Jan 13, 2012, at 1:23 PM, exarkun at twistedmatrix.com wrote:

> On 03:45 pm, mostawesomedude at gmail.com wrote:
>> On Fri, Jan 13, 2012 at 5:38 AM, Yaroslav Fedevych
>> <jaroslaw.fedewicz at gmail.com> wrote:
>>> On 13.01.12 15:34, Itamar Turner-Trauring wrote:
>>>> Sadly not everything in web2 has made it to twisted.web, yet. But 
>>>> yes,
>>>> web2 is dead.
>>> 
>>> Well, I thought those things at least made into tickets, and the sole
>>> fact they were not backported tells about their relative importance to
>>> Twisted-using folks.
>> 
>> Things like Deferred support in the Web API weren't ported because
>> there was no consensus on how to do it without breaking existing Web
>> users.
> 
> This is sort of true.
>> I think that that is the reason why there are tickets for a
>> successor to IResource.
> 
> But this is a much more useful piece of information.  Or, from another 
> perspective, the consensus on how to do it is to introduce a new 
> interface. :)

An even more useful bit of information is that the ticket in question is here:

http://twistedmatrix.com/trac/ticket/5152

and anyone who would like to contribute to its continued progress is welcome to do so :).

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120113/05e14f84/attachment-0001.html>

From glyph at twistedmatrix.com  Fri Jan 13 20:59:27 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 13 Jan 2012 22:59:27 -0500
Subject: [Twisted-Python] Review of kqueue reactor patch (ticket 1918)
In-Reply-To: <634914A010D0B943A035D226786325D42D14E50F82@EXVMBX020-12.exch020.serverdata.net>
References: <634914A010D0B943A035D226786325D42D14E50F82@EXVMBX020-12.exch020.serverdata.net>
Message-ID: <CF5BE68B-E445-4449-A316-547EFB01F27E@twistedmatrix.com>


On Jan 13, 2012, at 6:20 AM, Tobias Oberstein wrote:

> Hi all,
> 
> the latest patch contained in
> 
> http://twistedmatrix.com/trac/ticket/1918
> 
> is - after some iterations - now in a "ready for final review state" for some weeks now.
> 
> I'd like to ask if someone has time to review it so it can be finally merged and the issue closed .. after 6 years;)
> 
> Cheers,
> Tobias 


Hi Tobias,

I, too, would like to see this reviewed, and I hope I will find some time to do it myself.  (Actually I really hope that someone else will find the time to do it before that, but, failing that...)

However, our reviewer bandwidth has recently decreased somewhat, as you can see from a quick comparison between <http://twistedmatrix.com/highscores/> and <http://twistedmatrix.com/highscores/?time=2011-12-01>.

The best way to get your tickets reviewed is to pitch in and do some code reviews of other tickets in the meanwhile, so the hypothetical perfectly stochastic Twisted ticket reviewer will be more likely to select your ticket from the list available on <http://twistedmatrix.com/trac/report/15>.

Not that I in any way object to your agitating for a review of this specific ticket, though: people should feel free to do that as well.  If anything, consider this a bump, to keep this at the front of everyone else's mind.

Now: somebody, go review that ticket :).

-glyph





From exarkun at twistedmatrix.com  Sat Jan 14 22:05:24 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 15 Jan 2012 05:05:24 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1326603924.33.769195600@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120115/a20592bd/attachment-0001.html>

From bino at indoakses-online.com  Sun Jan 15 19:56:56 2012
From: bino at indoakses-online.com (bino oetomo)
Date: Mon, 16 Jan 2012 09:56:56 +0700
Subject: [Twisted-Python] still, txjson-rpc question
Message-ID: <4F1391F8.8050606@indoakses-online.com>

Dear All ..
I just test my simple txjson-rpc server with PHP , and found it 'works'

Here is the also simple php script i use
------START---------
<?php
require_once './jsonRPCClient.php';
//php json rpc class is taken from http://jsonrpcphp.org/
$myExample = new jsonRPCClient('http://127.0.0.1:50008');

// performs some basic operation
echo '<b>Attempt to perform basic operations</b><br />'."\n";
try {
     echo 'Your name is <i>'.$myExample->aksi('This is PHP 
CALL').'</i><br />'."\n";
} catch (Exception $e) {
     echo nl2br($e->getMessage()).'<br />'."\n";
}

?>
------STOP----------

Looks like the serverside able to parse posted params
------Start: serverlog------------
2012-01-16 09:21:35+0700 [HTTPChannel,8,127.0.0.1] JSON MSG This is PHP CALL
2012-01-16 09:21:35+0700 [HTTPChannel,8,127.0.0.1] ------
2012-01-16 09:21:35+0700 [HTTPChannel,8,127.0.0.1]
2012-01-16 09:21:35+0700 [HTTPChannel,8,127.0.0.1]
2012-01-16 09:21:35+0700 [HTTPChannel,8,127.0.0.1] 127.0.0.1 - - 
[16/Jan/2012:02:21:35 +0000] "POST / HTTP/1.0" 200 43 "-" "-"
------STOP--------------------------

But there is still 'small' problem.

I just put ----> return 'OK' to the end of my rpc method,
but RPC client also need 'RESPON ID' with the same value of it's 
'REQUEST ID'

My PHP script catch this exception and said --> Incorrect response id 
(request id: 1, response id: )

Is there any clue to fix this problem ?

Sincerely
-bino-



From techtonik at gmail.com  Tue Jan 17 04:51:52 2012
From: techtonik at gmail.com (anatoly techtonik)
Date: Tue, 17 Jan 2012 14:51:52 +0300
Subject: [Twisted-Python] 2011 Totals
Message-ID: <CAPkN8xK6FgdtH6wV_-EW2Er9fH0SFMiSxhuOLL2ahLpizkbq1Q@mail.gmail.com>

I want to see how did I score in 2011!
http://twistedmatrix.com/highscores/?time=2011-12-01

plz.plz.plz.  :b
-- 
anatoly t.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120117/fd727bda/attachment-0001.html>

From tom.sheffler at gmail.com  Wed Jan 18 10:39:41 2012
From: tom.sheffler at gmail.com (Tom Sheffler)
Date: Wed, 18 Jan 2012 09:39:41 -0800
Subject: [Twisted-Python] Python multiprocessing and Twisted stopService -
	success story
Message-ID: <CAMBtMcsY5f1aWVi-J8ajt74=N6Cjgs0whQDU9HHia84hB5ByqQ@mail.gmail.com>

We are using Py2.6's multiprocessing with Twisted and things are working
nicely.  I thought I'd pass on something that seems to work pretty well.
 Comments welcome.

I am using multiprocessing to spawn long-running worker processes as
children of Twisted.  When Twisted is killed, I want the children to be
unceremoniously killed as well.  I looked into signal handlers, but
creating a service that kills the child processes ended up being simpler
and is working well with twistd daemonization.

class MultiprocessingStopService(Service):

    def stopService(self):
        import multiprocessing
        for p in multiprocessing.active_children():
            p.terminate()
        Service.stopService(self)

and in my main service maker:

        s = MultiService()
    stopper  = MultiprocessingStopService()
    stopper.setServiceParent(s)

Perhaps this will be helpful to someone.

-T
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120118/7dc82331/attachment-0001.html>

From moijes12 at gmail.com  Thu Jan 19 05:21:48 2012
From: moijes12 at gmail.com (moses dsouza)
Date: Thu, 19 Jan 2012 17:51:48 +0530
Subject: [Twisted-Python] regarding ticket #2328
Message-ID: <CAKkXvca2XsYuY2wf4hxKzJma0=c8WR12kEo6gBrNbfN7_dXrxA@mail.gmail.com>

Hi

Can anyone provide any ideas how to get started on this one ? Is this still
open ?

regards
moijes12
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120119/282a83fa/attachment.html>

From facundobatista at gmail.com  Thu Jan 19 07:19:47 2012
From: facundobatista at gmail.com (Facundo Batista)
Date: Thu, 19 Jan 2012 11:19:47 -0300
Subject: [Twisted-Python] Finding out the IP which it failed to connect
Message-ID: <CAM09pzSmHFQ0K68oDxj-fkH1TyOGq9XhcNo-hsxPAL5+T1ibdA@mail.gmail.com>

I have some code that uses a twisted.web.client.HTTPClientFactory.

I've found that because some issues (firewall rules, not relevant to
the problem), I experienced failures to connect.

More specifically, I told it to connect to one particular address, and
because of DNS load distribution, that address converted to several
different IPs, and one of that IPs was not open, so it failed to
connect with a TCPTimedOutError (code 110).

When it failed to connect, it executed the "clientConnectionFailed"
method of HTTPClientFactory, which receives a
twisted.internet.tcp.Connector instance, and the reason of the
failure.

The question is: Is there a way, at that point (when
clientConnectionFailed is called), to find out *to which IP* it failed
to connect?

Thank you very much!

-- 
.    Facundo

Blog: http://www.taniquetil.com.ar/plog/
PyAr: http://www.python.org/ar/



From Hanusz at aegtranzcom.com  Thu Jan 19 08:37:14 2012
From: Hanusz at aegtranzcom.com (Hanusz L.)
Date: Thu, 19 Jan 2012 16:37:14 +0100
Subject: [Twisted-Python] for reference - how to get ssl certificate from a
	xmlrpc function
Message-ID: <B06FDC00E1358B48ACD6C2254D4C9E3AD8ED583B@MS-01>

I had some difficulty to find how to get the ssl certificate from the xmlrpc function but I found how to do it :
You can get the protocol from the xmlrpc function with @withRequest
http://twistedmatrix.com/documents/11.1.0/api/twisted.web.xmlrpc.withRequest.html
Then you can use getPeerCertificate from the transport

        @withRequest
        def xmlrpc_helloworld(self,request):
            return 'Hello ' +  request.channel.transport.getPeerCertificate().get_subject().commonName


#####################################################################################
This e-mail message has been scanned for Viruses and Content and cleared 
by Mailsecurity software
#####################################################################################
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120119/2e7ecc21/attachment.html>

From Hanusz at aegtranzcom.com  Thu Jan 19 09:41:00 2012
From: Hanusz at aegtranzcom.com (Hanusz L.)
Date: Thu, 19 Jan 2012 17:41:00 +0100
Subject: [Twisted-Python] xmlrpc function return message to client
	asynchronously
Message-ID: <B06FDC00E1358B48ACD6C2254D4C9E3AD8ED585F@MS-01>


I'd like to create a xmlrpc function get_message with the following characteristic : 
 - If the server doesn't have any message to send the client, the server will answer with a timeout after 60s (and the client can retry)
 - If the server has a message to send to the client, the answer is sent directly

To do that, can I do the following:
- create a deferred in the xmlrpc function with a calllater of 60s and keep a reference to this deferred in the factory
  * If the server has no message to send, the deferred will be called by the reactor and answer a timeout
 * If the server has a message to send, it will call the deferred in his own code (with a parameter ?) before the reactor and answer the message.

Is it possible to call a deferred before the reactor like this ?

Thanks.
Leszek
#####################################################################################
This e-mail message has been scanned for Viruses and Content and cleared 
by Mailsecurity software
#####################################################################################



From mithrandi at mithrandi.net  Thu Jan 19 10:02:50 2012
From: mithrandi at mithrandi.net (Tristan Seligmann)
Date: Thu, 19 Jan 2012 19:02:50 +0200
Subject: [Twisted-Python] xmlrpc function return message to client
	asynchronously
In-Reply-To: <B06FDC00E1358B48ACD6C2254D4C9E3AD8ED585F@MS-01>
References: <B06FDC00E1358B48ACD6C2254D4C9E3AD8ED585F@MS-01>
Message-ID: <CAMcKhMRfYeNqWWR-9AXsyfm9Sigfh0vFeBeH8Joy7JnaGKmmdQ@mail.gmail.com>

On Thu, Jan 19, 2012 at 6:41 PM, Hanusz L. <Hanusz at aegtranzcom.com> wrote:
>
> I'd like to create a xmlrpc function get_message with the following characteristic :
>  - If the server doesn't have any message to send the client, the server will answer with a timeout after 60s (and the client can retry)
>  - If the server has a message to send to the client, the answer is sent directly
>
> To do that, can I do the following:
> - create a deferred in the xmlrpc function with a calllater of 60s and keep a reference to this deferred in the factory
>  * If the server has no message to send, the deferred will be called by the reactor and answer a timeout
>  * If the server has a message to send, it will call the deferred in his own code (with a parameter ?) before the reactor and answer the message.

The object returned by callLater() provides the IDelayedCall[1]
interface. If you keep a reference to this object as well as the
deferred, then you can cancel the call when you return a response by
calling the .cancel() method.

[1] http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IDelayedCall.html
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar



From glyph at twistedmatrix.com  Thu Jan 19 10:45:04 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 19 Jan 2012 12:45:04 -0500
Subject: [Twisted-Python] regarding ticket #2328
In-Reply-To: <CAKkXvca2XsYuY2wf4hxKzJma0=c8WR12kEo6gBrNbfN7_dXrxA@mail.gmail.com>
References: <CAKkXvca2XsYuY2wf4hxKzJma0=c8WR12kEo6gBrNbfN7_dXrxA@mail.gmail.com>
Message-ID: <F946751C-E573-4FCC-A5BF-BBDC65D74054@twistedmatrix.com>


On Jan 19, 2012, at 7:21 AM, moses dsouza wrote:

> Hi
> 
> Can anyone provide any ideas how to get started on this one ?


Talking to Ralph Meijer (are you listening, Ralph?) would be a good place to get started.

Also, http://twistedmatrix.com/trac/ticket/2320 ("s2s") is (if I understand correctly) a prerequisite for a useful jabber implementation, otherwise you won't be able to talk to people on other hosts.

Other than that, just reading some relevant XEPs (<http://xmpp.org/xmpp-protocols/xmpp-extensions/>) and implementing any functionality that is missing from twisted.words.

> Is this still open ?

Yes, absolutely.  Not only is it open, it is a critical missing piece of twisted.words, in my opinion.  Thanks for looking at it, please feel free to keep posting to this list with more questions if you need any help.

-glyph




From jaroslaw.fedewicz at gmail.com  Thu Jan 19 11:07:28 2012
From: jaroslaw.fedewicz at gmail.com (Yaroslav Fedevych)
Date: Thu, 19 Jan 2012 20:07:28 +0200
Subject: [Twisted-Python] regarding ticket #2328
In-Reply-To: <F946751C-E573-4FCC-A5BF-BBDC65D74054@twistedmatrix.com>
References: <CAKkXvca2XsYuY2wf4hxKzJma0=c8WR12kEo6gBrNbfN7_dXrxA@mail.gmail.com>
	<F946751C-E573-4FCC-A5BF-BBDC65D74054@twistedmatrix.com>
Message-ID: <4F185BE0.90901@gmail.com>

I, for one, second the question.

What I'm currently missing is even the basic information on what, more 
exactly, Twisted Words is and what it is not. Recently, I heard some 
potential customer talking about a universal messaging gateway (multiple 
protocols (including email), throttling, in some cases — per-message 
charging, messaging storage). I was wondering if t.words is something 
which is exactly right to use for projects like that and what facilities 
it provides to help me.

Currently I see it is mostly client-oriented. I can only see an IRC 
protocol (server-side), I however don't see what interfaces I need to 
implement for a working pluggable messaging server. Maybe I'm looking at 
wrong places or misunderstand the purpose of t.words altogether.

-- 
Yaroslav Fedevych
jaroslaw.fedewicz at gmail.com
Custom networked sofware solutions
tel. +380685061839
      +48222472352
Skype: jaroslaw.fedewicz



From Hanusz at aegtranzcom.com  Thu Jan 19 11:15:48 2012
From: Hanusz at aegtranzcom.com (Hanusz L.)
Date: Thu, 19 Jan 2012 19:15:48 +0100
Subject: [Twisted-Python] questions about testing xmlrpc server with ssl -
 problems with more than 1000 requests
Message-ID: <B06FDC00E1358B48ACD6C2254D4C9E3AD8ED5869@MS-01>

I did some testing between a twisted xmlrpc ssl server and a twisted client with lots of simultaneous requests.
I'm using windows (don't have the choice...), python 2.7, twisted 11.1 and both server and client are on the same computer... (Xeon 2Ghz 3GB of RAM)

The client is configured to get a number of "Hello" answers and if there is a problem on the connection, it will try again with a calllater of 1second

If the number of requests is low (<100), there is no problem.
With 200 requests, there is some errors "Connection to the other side was lost in a non-clean fashion." but the client can still get all the answers by retrying.
If I try to increase the number of requests, the number of retries is rising very fast and at some point the client is unable to get any answer (with errors like "User timeout caused connection failure")
100 request - no retries 0.688 s
200 requests - 37 retries 1.5s
500 requests - 395 retries 4.2s
750 requests - 1205 retries  - 36.4s
1500 requests - too much

In the client the time is measured between the start of the reactor and the reception of each answer.

 What I don't understand is that it seems no answer is parsed before all the messages are received. 
For example for the 750 requests, the first message is parsed after 32.1s

My questions are the following:
- what is happening ?
- why are all messages parsed at the end ? Priority of the reactor ?
- is it possible to limit the number of incoming connections globally and/or for each client ? How ? Same for outgoing connections in the client.
- to be able to see what is going on, is it possible to print the number of connections (counting connectionMade and connectionLost or is there a better method?), and the number of callbacks waiting in the reactor ?
- is there a maximum number of callbacks waiting in the reactor ?

The code I used is below.
Modified from http://twistedmatrix.com/pipermail/twisted-python/2007-May/015357.html

Thanks for your help.

##########################
xmlrpc_ssl_helloworld_server.py
##########################

from twisted.web import xmlrpc, server, http
from twisted.internet import reactor, ssl
from twisted.web.xmlrpc import withRequest

class Engine:
    def __init__(self):
        self.clientWS_ip_address = "127.0.0.1"
        self.clientWS_port = 8010
        self.clientWS = ClientWebServiceListener(self.clientWS_ip_address,self.clientWS_port,self)
        self.clientWS.start()

class ClientWebServiceListener():

    class XmlRpcFunctions(xmlrpc.XMLRPC):

        @withRequest
        def xmlrpc_helloworld(self,request):
            return 'Hello ' +  request.channel.transport.getPeerCertificate().get_subject().commonName

    def __init__(self,ip_address,port,engine):
        self.engine = engine
        self.ip_address = ip_address
        self.port = port

    def start(self):
        ctx = self.makeSSLContext(myKey='server.pem',trustedCA='cacert.pem')
        self.listening_port = reactor.listenSSL(self.port, server.Site(self.XmlRpcFunctions()) ,ctx)        

    def makeSSLContext(self,myKey,trustedCA):
        '''Returns an ssl Context Object
        @param myKey a pem formated key and certificate with for my current host
        the other end of this connection must have the cert from the CA that signed this key
        @param trustedCA a pem formated certificat from a CA you trust
        you will only allow connections from clients signed by this CA
        and you will only allow connections to a server signed by this CA
        '''
        fd = open(myKey,'r')
        theCert = ssl.PrivateCertificate.loadPEM(fd.read())
        fd.close()
        fd = open(trustedCA,'r')
        theCA = ssl.Certificate.loadPEM(fd.read())
        fd.close()
        ctx = theCert.options(theCA)

     # Now the options you can set look like Standard OpenSSL Library options

     # The SSL protocol to use, one of SSLv23_METHOD, SSLv2_METHOD,
     # SSLv3_METHOD, TLSv1_METHOD. Defaults to TLSv1_METHOD.
        ctx.method = ssl.SSL.TLSv1_METHOD

     # If True, verify certificates received from the peer and fail
     # the handshake if verification fails. Otherwise, allow anonymous
     # sessions and sessions with certificates which fail validation.
        ctx.verify = True

     # Depth in certificate chain down to which to verify.
        ctx.verifyDepth = 1

     # If True, do not allow anonymous sessions.
        ctx.requireCertification = True

     # If True, do not re-verify the certificate on session resumption.
        ctx.verifyOnce = True

     # If True, generate a new key whenever ephemeral DH parameters are used
     # to prevent small subgroup attacks.
        ctx.enableSingleUseKeys = True

     # If True, set a session ID on each context. This allows a shortened
     # handshake to be used when a known client reconnects.
        ctx.enableSessions = True

     # If True, enable various non-spec protocol fixes for broken
     # SSL implementations.
        ctx.fixBrokenPeers = False

        return ctx            

if __name__ == '__main__' :
    e = Engine()
    print "Starting reactor now."
    reactor.run()


##########################
xmlrpc_ssl_helloworld_client.py
##########################

import sys
import time
from twisted.web import xmlrpc, server
from twisted.internet import reactor, ssl
from datetime import datetime

class wstest():
    times=[]

    def __init__(self,port,nb_test):
        self.nb_test=0
        self.i=0
        self.nb_retry=0
        ctx = self.makeSSLContext(myKey='client.pem', trustedCA='cacert.pem')
        self.proxy = Proxy('https://localhost:'+str(port)+'/')
        self.proxy.setSSLClientContext(ctx)
        self.port = port
        
    def printValue(self,value):
        time_diff = datetime.now() - self.time_begin
        ms_time_diff = time_diff.microseconds / 1000 + time_diff.seconds * 1000
        self.times.append(ms_time_diff)
        self.i = self.i + 1
        print repr(value) + ' - ' + str(self.i)
        if self.i == nb_test:
            print 'Nb retrys : ' + str(self.nb_retry)
            for j in self.times:
                print str(j) + ',',
            reactor.stop()
    
    def retry_connect(self):
        self.proxy.callRemote('helloworld').addCallbacks(self.printValue,self.err_received)

    def err_received(self,failure):
        print "Error - retrying"
        sys.stderr.write(str(failure))
        self.nb_retry = self.nb_retry + 1
        reactor.callLater(1,self.retry_connect)

    def makeSSLContext(self,myKey,trustedCA):
        '''Returns an ssl Context Object
        @param myKey a pem formated key and certifcate with for my current host
            the other end of this connection must have the cert from the CA
            that signed this key
        @param trustedCA a pem formated certificat from a CA you trust
            you will only allow connections from clients signed by this CA
            and you will only allow connections to a server signed by this CA
        '''

        # our goal in here is to make a SSLContext object to pass to connectSSL
        # or listenSSL

        # Why these functioins... Not sure...
        fd = open(myKey,'r')
        theCert = ssl.PrivateCertificate.loadPEM(fd.read())
        fd.close()
        fd = open(trustedCA,'r')
        theCA = ssl.Certificate.loadPEM(fd.read())
        fd.close()
        ctx = theCert.options(theCA)

     # Now the options you can set look like Standard OpenSSL Library options

     # The SSL protocol to use, one of SSLv23_METHOD, SSLv2_METHOD,
     # SSLv3_METHOD, TLSv1_METHOD. Defaults to TLSv1_METHOD.
        ctx.method = ssl.SSL.TLSv1_METHOD

     # If True, verify certificates received from the peer and fail
     # the handshake if verification fails. Otherwise, allow anonymous
     # sessions and sessions with certificates which fail validation.
        ctx.verify = True

     # Depth in certificate chain down to which to verify.
        ctx.verifyDepth = 1

     # If True, do not allow anonymous sessions.
        ctx.requireCertification = True

     # If True, do not re-verify the certificate on session resumption.
        ctx.verifyOnce = True

     # If True, generate a new key whenever ephemeral DH parameters are used
     # to prevent small subgroup attacks.
        ctx.enableSingleUseKeys = True

     # If True, set a session ID on each context. This allows a shortened
     # handshake to be used when a known client reconnects.
        ctx.enableSessions = True

     # If True, enable various non-spec protocol fixes for broken
     # SSL implementations.
        ctx.fixBrokenPeers = False

        return ctx

class Proxy(xmlrpc.Proxy):
     ''' See: http://twistedmatrix.com/projects/web/documentation/howto/xmlrpc.html
         this is eacly like the xmlrpc.Proxy included in twisted but you can
         give it a SSLContext object insted of just accepting the defaults..
     '''
     def setSSLClientContext(self,SSLClientContext):
         self.SSLClientContext = SSLClientContext
     def callRemote(self, method, *args):
         factory = xmlrpc._QueryFactory(
             self.path, self.host, method, self.user,
             self.password, self.allowNone, args)
         if self.secure:
             from twisted.internet import ssl
             try:
                 self.SSLClientContext
             except NameError:
                 print "Must Set a SSL Context"
                 print "use self.setSSLClientContext() first"
                 # Its very bad to connect to ssl without some kind of
                 # verfication of who your talking to
                 # Using the default sslcontext without verification
                 # Can lead to man in the middle attacks
             reactor.connectSSL(self.host, self.port or 443,
                                factory,self.SSLClientContext)
         else:
             reactor.connectTCP(self.host, self.port or 80, factory)
         return factory.deferred


def do_test(t,nb_test):
    for i in range(0,nb_test):
        t.proxy.callRemote('helloworld').addCallbacks(t.printValue,t.err_received)

if __name__ == '__main__':
    if len(sys.argv) < 2 :
        sys.exit('Usage: ' + sys.argv[0] + ' nb_test')

    nb_test = int(sys.argv[1])
    t = wstest(8010,nb_test)

    reactor.callWhenRunning(do_test,t,nb_test)

    print "Starting reactor now."
    t.time_begin = datetime.now()
    reactor.run()     
#####################################################################################
This e-mail message has been scanned for Viruses and Content and cleared 
by Mailsecurity software
#####################################################################################



From glyph at twistedmatrix.com  Thu Jan 19 12:29:18 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 19 Jan 2012 14:29:18 -0500
Subject: [Twisted-Python] regarding ticket #2328
In-Reply-To: <4F185BE0.90901@gmail.com>
References: <CAKkXvca2XsYuY2wf4hxKzJma0=c8WR12kEo6gBrNbfN7_dXrxA@mail.gmail.com>
	<F946751C-E573-4FCC-A5BF-BBDC65D74054@twistedmatrix.com>
	<4F185BE0.90901@gmail.com>
Message-ID: <02C9718A-FC82-4BD1-B2C2-C7F3A2004FC1@twistedmatrix.com>


On Jan 19, 2012, at 1:07 PM, Yaroslav Fedevych wrote:

> I, for one, second the question.
> 
> What I'm currently missing is even the basic information on what, more 
> exactly, Twisted Words is and what it is not. Recently, I heard some 
> potential customer talking about a universal messaging gateway (multiple 
> protocols (including email), throttling, in some cases — per-message 
> charging, messaging storage). I was wondering if t.words is something 
> which is exactly right to use for projects like that and what facilities 
> it provides to help me.

There is no authoritative statement about what twisted.words is not because twisted.words is incomplete.  You can definitely use it for servers, and many people do.

> Currently I see it is mostly client-oriented. I can only see an IRC 
> protocol (server-side), I however don't see what interfaces I need to 
> implement for a working pluggable messaging server. Maybe I'm looking at 
> wrong places or misunderstand the purpose of t.words altogether.

All of the facilities for parsing the client side of an XMPP connection also work for the server side.  And twisted.words does currently have some facilities for dealing with servers, such as 'twistd xmpp-router'.

You may be interested in several extensions to twisted.words.  Wokkel, especially, is hopefully going to be included in twisted.words itself at some point: <http://wokkel.ik.nu/>.  Idavoll provides publish/subscribe functionality on top of wokkel and twisted.words: <http://idavoll.ik.nu/>.  Palaver provides a multi-user chat component: <https://github.com/twonds/palaver> - however, most of the links to the original sites for Palaver appear to be dead now, so I gather that project has stopped development.

Ultimately, what you have to keep in mind is that twisted.words, like all of Twisted, is an open source project and not a commercial product.  If you would like it to do more than it does, please contribute code to help it grow into a full-featured XMPP solution.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120119/27b85d5f/attachment.html>

From ntoper at gmail.com  Fri Jan 20 09:09:09 2012
From: ntoper at gmail.com (Nicolas Toper)
Date: Fri, 20 Jan 2012 17:09:09 +0100
Subject: [Twisted-Python] Python multiprocessing and Twisted stopService
 - success story
In-Reply-To: <CAMBtMcsY5f1aWVi-J8ajt74=N6Cjgs0whQDU9HHia84hB5ByqQ@mail.gmail.com>
References: <CAMBtMcsY5f1aWVi-J8ajt74=N6Cjgs0whQDU9HHia84hB5ByqQ@mail.gmail.com>
Message-ID: <CAJZoT5CsNWUDt8=gwVmW5q7ZxSajOGvUGhsNQAswqyt+YuiH+Q@mail.gmail.com>

Hi Tom,

How do you pass data between the parent and its children with
multiprocessing? It worked fine with Twisted in debug but never in prod :(

Best
Nicolas


On Wed, Jan 18, 2012 at 6:39 PM, Tom Sheffler <tom.sheffler at gmail.com>wrote:

> We are using Py2.6's multiprocessing with Twisted and things are working
> nicely.  I thought I'd pass on something that seems to work pretty well.
>  Comments welcome.
>
> I am using multiprocessing to spawn long-running worker processes as
> children of Twisted.  When Twisted is killed, I want the children to be
> unceremoniously killed as well.  I looked into signal handlers, but
> creating a service that kills the child processes ended up being simpler
> and is working well with twistd daemonization.
>
> class MultiprocessingStopService(Service):
>
>     def stopService(self):
>         import multiprocessing
>         for p in multiprocessing.active_children():
>             p.terminate()
>         Service.stopService(self)
>
> and in my main service maker:
>
>         s = MultiService()
>     stopper  = MultiprocessingStopService()
>     stopper.setServiceParent(s)
>
> Perhaps this will be helpful to someone.
>
> -T
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120120/da519386/attachment.html>

From kevin.horn at gmail.com  Fri Jan 20 12:06:51 2012
From: kevin.horn at gmail.com (Kevin Horn)
Date: Fri, 20 Jan 2012 13:06:51 -0600
Subject: [Twisted-Python] Finding out the IP which it failed to connect
In-Reply-To: <CAM09pzSmHFQ0K68oDxj-fkH1TyOGq9XhcNo-hsxPAL5+T1ibdA@mail.gmail.com>
References: <CAM09pzSmHFQ0K68oDxj-fkH1TyOGq9XhcNo-hsxPAL5+T1ibdA@mail.gmail.com>
Message-ID: <CA+U=zK3eU75TuAMsO9mdBL-A1Xkp7-wG3drFv_1rqhpTfzK=1g@mail.gmail.com>

On Thu, Jan 19, 2012 at 8:19 AM, Facundo Batista
<facundobatista at gmail.com>wrote:

> I have some code that uses a twisted.web.client.HTTPClientFactory.
>
> I've found that because some issues (firewall rules, not relevant to
> the problem), I experienced failures to connect.
>
> More specifically, I told it to connect to one particular address, and
> because of DNS load distribution, that address converted to several
> different IPs, and one of that IPs was not open, so it failed to
> connect with a TCPTimedOutError (code 110).
>
> When it failed to connect, it executed the "clientConnectionFailed"
> method of HTTPClientFactory, which receives a
> twisted.internet.tcp.Connector instance, and the reason of the
> failure.
>
> The question is: Is there a way, at that point (when
> clientConnectionFailed is called), to find out *to which IP* it failed
> to connect?
>
> Thank you very much!
>
> --
> .    Facundo
>
> Blog: http://www.taniquetil.com.ar/plog/
> PyAr: http://www.python.org/ar/
>

twisted.internet.tcp.Connector has a getDestination() method, which should
return an address object.

Have you tried that? (I haven't, but it looks like the right thing)

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120120/d25d072f/attachment.html>

From facundobatista at gmail.com  Fri Jan 20 12:23:10 2012
From: facundobatista at gmail.com (Facundo Batista)
Date: Fri, 20 Jan 2012 16:23:10 -0300
Subject: [Twisted-Python] Finding out the IP which it failed to connect
In-Reply-To: <CA+U=zK3eU75TuAMsO9mdBL-A1Xkp7-wG3drFv_1rqhpTfzK=1g@mail.gmail.com>
References: <CAM09pzSmHFQ0K68oDxj-fkH1TyOGq9XhcNo-hsxPAL5+T1ibdA@mail.gmail.com>
	<CA+U=zK3eU75TuAMsO9mdBL-A1Xkp7-wG3drFv_1rqhpTfzK=1g@mail.gmail.com>
Message-ID: <CAM09pzRqGYSh2bEwrgUgajTqKeXmMowFoEM=_zoHRakiOEvfiw@mail.gmail.com>

On Fri, Jan 20, 2012 at 4:06 PM, Kevin Horn <kevin.horn at gmail.com> wrote:

> twisted.internet.tcp.Connector has a getDestination() method, which should
> return an address object.
>
> Have you tried that? (I haven't, but it looks like the right thing)

It returns the name used, not the IP.

-- 
.    Facundo

Blog: http://www.taniquetil.com.ar/plog/
PyAr: http://www.python.org/ar/



From exarkun at twistedmatrix.com  Fri Jan 20 14:47:19 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 20 Jan 2012 21:47:19 -0000
Subject: [Twisted-Python] Twisted Hackday at Rackspace, SF
Message-ID: <20120120214719.2876.173517733.divmod.xquotient.168@localhost6.localdomain6>

Hey all,

If you're in the bay area, join Rackspace and I on February 1st for a 
day of hacking on Twisted and Twisted projects:

  http://twistedpython.eventbrite.com/

Jean-Paul



From itamar at itamarst.org  Fri Jan 20 20:02:48 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Fri, 20 Jan 2012 22:02:48 -0500
Subject: [Twisted-Python] Finding out the IP which it failed to connect
In-Reply-To: <CAM09pzRqGYSh2bEwrgUgajTqKeXmMowFoEM=_zoHRakiOEvfiw@mail.gmail.com>
References: <CAM09pzSmHFQ0K68oDxj-fkH1TyOGq9XhcNo-hsxPAL5+T1ibdA@mail.gmail.com>
	<CA+U=zK3eU75TuAMsO9mdBL-A1Xkp7-wG3drFv_1rqhpTfzK=1g@mail.gmail.com>
	<CAM09pzRqGYSh2bEwrgUgajTqKeXmMowFoEM=_zoHRakiOEvfiw@mail.gmail.com>
Message-ID: <4F1A2AD8.9090304@itamarst.org>

On 01/20/2012 02:23 PM, Facundo Batista wrote:
> On Fri, Jan 20, 2012 at 4:06 PM, Kevin Horn<kevin.horn at gmail.com>  wrote:
>
>> twisted.internet.tcp.Connector has a getDestination() method, which should
>> return an address object.
>>
>> Have you tried that? (I haven't, but it looks like the right thing)
> It returns the name used, not the IP.
>

That seems... wrong. Perhaps enshrined by prior existence, but wrong 
nonetheless - it's an IPv4Address, it should have an IP. Could you file 
a ticket?



From kevin.horn at gmail.com  Sat Jan 21 12:19:09 2012
From: kevin.horn at gmail.com (Kevin Horn)
Date: Sat, 21 Jan 2012 13:19:09 -0600
Subject: [Twisted-Python] Finding out the IP which it failed to connect
In-Reply-To: <4F1A2AD8.9090304@itamarst.org>
References: <CAM09pzSmHFQ0K68oDxj-fkH1TyOGq9XhcNo-hsxPAL5+T1ibdA@mail.gmail.com>
	<CA+U=zK3eU75TuAMsO9mdBL-A1Xkp7-wG3drFv_1rqhpTfzK=1g@mail.gmail.com>
	<CAM09pzRqGYSh2bEwrgUgajTqKeXmMowFoEM=_zoHRakiOEvfiw@mail.gmail.com>
	<4F1A2AD8.9090304@itamarst.org>
Message-ID: <CA+U=zK0ihHCj0j+X4rXPP_a5MVeEGeT3nmoaqF7J+sq8CTvymg@mail.gmail.com>

On Fri, Jan 20, 2012 at 9:02 PM, Itamar Turner-Trauring <itamar at itamarst.org
> wrote:

> On 01/20/2012 02:23 PM, Facundo Batista wrote:
> > On Fri, Jan 20, 2012 at 4:06 PM, Kevin Horn<kevin.horn at gmail.com>
>  wrote:
> >
> >> twisted.internet.tcp.Connector has a getDestination() method, which
> should
> >> return an address object.
> >>
> >> Have you tried that? (I haven't, but it looks like the right thing)
> > It returns the name used, not the IP.
> >
>
> That seems... wrong. Perhaps enshrined by prior existence, but wrong
> nonetheless - it's an IPv4Address, it should have an IP. Could you file
> a ticket?
>
>
Looking at the api docs for IPv4Address, the 'host' member is described as
"A string containing the dotted-quad IP address."

So if it's giving you the hostname, then this definitely looks like a bug.

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120121/e93ed998/attachment-0001.html>

From exarkun at twistedmatrix.com  Sat Jan 21 22:05:29 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 22 Jan 2012 05:05:29 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1327208729.21.1577431650@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120122/31dbcb74/attachment.html>

From dynamicgl at gmail.com  Sun Jan 22 02:47:22 2012
From: dynamicgl at gmail.com (gelin yan)
Date: Sun, 22 Jan 2012 17:47:22 +0800
Subject: [Twisted-Python] Python multiprocessing and Twisted stopService
 - success story
In-Reply-To: <CAJZoT5CsNWUDt8=gwVmW5q7ZxSajOGvUGhsNQAswqyt+YuiH+Q@mail.gmail.com>
References: <CAMBtMcsY5f1aWVi-J8ajt74=N6Cjgs0whQDU9HHia84hB5ByqQ@mail.gmail.com>
	<CAJZoT5CsNWUDt8=gwVmW5q7ZxSajOGvUGhsNQAswqyt+YuiH+Q@mail.gmail.com>
Message-ID: <CABkOF6TVepuXDunf7mTfmqnP=+hdbTNo411XjvjssKf+B5-DQA@mail.gmail.com>

Hi Tom

  Does it work for windows? I use ampoule instead to manage multiple
process.

Regards

gelin yan

On Sat, Jan 21, 2012 at 12:09 AM, Nicolas Toper <ntoper at gmail.com> wrote:

> Hi Tom,
>
> How do you pass data between the parent and its children with
> multiprocessing? It worked fine with Twisted in debug but never in prod :(
>
> Best
> Nicolas
>
>
> On Wed, Jan 18, 2012 at 6:39 PM, Tom Sheffler <tom.sheffler at gmail.com>wrote:
>
>> We are using Py2.6's multiprocessing with Twisted and things are working
>> nicely.  I thought I'd pass on something that seems to work pretty well.
>>  Comments welcome.
>>
>> I am using multiprocessing to spawn long-running worker processes as
>> children of Twisted.  When Twisted is killed, I want the children to be
>> unceremoniously killed as well.  I looked into signal handlers, but
>> creating a service that kills the child processes ended up being simpler
>> and is working well with twistd daemonization.
>>
>> class MultiprocessingStopService(Service):
>>
>>     def stopService(self):
>>         import multiprocessing
>>         for p in multiprocessing.active_children():
>>             p.terminate()
>>         Service.stopService(self)
>>
>> and in my main service maker:
>>
>>         s = MultiService()
>>     stopper  = MultiprocessingStopService()
>>     stopper.setServiceParent(s)
>>
>> Perhaps this will be helpful to someone.
>>
>> -T
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120122/83a9ead8/attachment.html>

From glyph at twistedmatrix.com  Sun Jan 22 14:30:31 2012
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Sun, 22 Jan 2012 16:30:31 -0500
Subject: [Twisted-Python] Finding out the IP which it failed to connect
In-Reply-To: <4F1A2AD8.9090304@itamarst.org>
References: <CAM09pzSmHFQ0K68oDxj-fkH1TyOGq9XhcNo-hsxPAL5+T1ibdA@mail.gmail.com>
	<CA+U=zK3eU75TuAMsO9mdBL-A1Xkp7-wG3drFv_1rqhpTfzK=1g@mail.gmail.com>
	<CAM09pzRqGYSh2bEwrgUgajTqKeXmMowFoEM=_zoHRakiOEvfiw@mail.gmail.com>
	<4F1A2AD8.9090304@itamarst.org>
Message-ID: <4C7AF041-8073-4F84-AA40-9860CB2832C6@twistedmatrix.com>


On Jan 20, 2012, at 10:02 PM, Itamar Turner-Trauring wrote:

> On 01/20/2012 02:23 PM, Facundo Batista wrote:
>> On Fri, Jan 20, 2012 at 4:06 PM, Kevin Horn<kevin.horn at gmail.com>  wrote:
>> 
>>> twisted.internet.tcp.Connector has a getDestination() method, which should
>>> return an address object.
>>> 
>>> Have you tried that? (I haven't, but it looks like the right thing)
>> It returns the name used, not the IP.
>> 
> 
> That seems... wrong. Perhaps enshrined by prior existence, but wrong 
> nonetheless - it's an IPv4Address, it should have an IP. Could you file 
> a ticket?

See also <http://twistedmatrix.com/trac/ticket/3059>.

I thought this might be the same thing, but I guess it isn't.  At any rate the new ticket should reference this old one, since this is apparently an easy mistake to make.

Arguably this interface is kind of broken though: it's synchronous, but hostname resolution may not have completed yet.  Also hostname resolution may return a different address on subsequent reconnects, so there's no single destination that a hostname-based connector could be said to be connecting to.

All in all, just another reason to move to Endpoint-based client connections and ignore the Connector layer of the API in applications...

-glyph




From mike at mv3d.com  Sun Jan 22 19:20:30 2012
From: mike at mv3d.com (Michael Handverger)
Date: Sun, 22 Jan 2012 21:20:30 -0500 (EST)
Subject: [Twisted-Python] Announcing MV3D 0.70!
Message-ID: <4306641.636.1327285230502.JavaMail.root@verity>

I am pleased to announce the release version 0.70 of MV3D! This release includes a massive amount of new features and over 70 bugfixes. The main focus was on usability and involved a large amount of work on tools. In 0.70, Panda3D support was brought up to par with animation, terrain texture splatting, and skydomes. One of the things we are most excited about is the Windows development environment installer. This is an easy installer that will quickly set up any Windows system to develop MV3D. If you've been watching the project and want to get involved, there's no better time!

MV3D is an open source multiplayer game and virtual world framework written in Python which uses Twisted for networking. It encompasses a scalable server with dynamic load balancing, a robust set of content creation tools, and an extensible 3D client application. MV3D provides the foundation to build anything from 3D chat rooms to full MMORPGs with the goal of letting you concentrate on creating a unique virtual world instead of the infrastructure to support it.

For more information on MV3D and this or future releases, please visit the website at http://www.mv3d.com . The full release notes for version 0.70 are available online at this URL: http://www.mv3d.com/trac/browser/tags/mv3d-0.70/release-notes.txt . For further inquiries, feel free to stop by our IRC channel on irc.freenode.net #MV3D.

New screenshots of our demo world and the Composer tool:

http://www.mv3d.com/trac/screenshots/46
http://www.mv3d.com/trac/screenshots/47

Release 0.75 will be focused on bugfixing and adding full support for Linux + Ogre and OS X + Panda. We are currently looking for help porting and testing on these platforms. Let me know if you are interested!

Enjoy,

Mike



From Hanusz at aegtranzcom.com  Mon Jan 23 06:46:40 2012
From: Hanusz at aegtranzcom.com (Hanusz L.)
Date: Mon, 23 Jan 2012 14:46:40 +0100
Subject: [Twisted-Python] How to be sure a ssl connection was completed
	correctly
Message-ID: <B06FDC00E1358B48ACD6C2254D4C9E3AD8ED5BC3@MS-01>

Hi,

I'm using the pull method to send events to clients (with xmlrpc over ssl).
The events are in a queue and when a client calls my 'get_event' xmlrpc function; I get one event from the queue and send it to the client.

The problem is that I want to be sure that the client receives all the events.

Is it correct to assume that:
IF the method connectionLost of my protocol (the wrapped protocol of the ssl protocol) is called with a failure(error.ConnectionDone())
THEN the connection was completed successfully and the client received the event correctly ?

Thanks,

Leszek
#####################################################################################
This e-mail message has been scanned for Viruses and Content and cleared 
by Mailsecurity software
#####################################################################################



From itamar at itamarst.org  Mon Jan 23 07:00:42 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Mon, 23 Jan 2012 09:00:42 -0500
Subject: [Twisted-Python] How to be sure a ssl connection was completed
 correctly
In-Reply-To: <B06FDC00E1358B48ACD6C2254D4C9E3AD8ED5BC3@MS-01>
References: <B06FDC00E1358B48ACD6C2254D4C9E3AD8ED5BC3@MS-01>
Message-ID: <4F1D680A.2090407@itamarst.org>

On 01/23/2012 08:46 AM, Hanusz L. wrote:
> Hi,
>
> I'm using the pull method to send events to clients (with xmlrpc over ssl).
> The events are in a queue and when a client calls my 'get_event' xmlrpc function; I get one event from the queue and send it to the client.
>
> The problem is that I want to be sure that the client receives all the events.
>
> Is it correct to assume that:
> IF the method connectionLost of my protocol (the wrapped protocol of the ssl protocol) is called with a failure(error.ConnectionDone())
> THEN the connection was completed successfully and the client received the event correctly ?
No, that just means the SSL disconnect and then  the TCP disconnect 
handshakes were done cleanly. That may happen for reasons other than 
queue being cleared, e.g. the server decided to shutdown for some reason.

You need to have some other way of knowing if queue is empty, e.g. way 
to query queue size (and knowledge that no one else will add to queue 
after you queried it).



From therve at free.fr  Mon Jan 23 07:08:49 2012
From: therve at free.fr (=?UTF-8?B?VGhvbWFzIEhlcnbDqQ==?=)
Date: Mon, 23 Jan 2012 15:08:49 +0100
Subject: [Twisted-Python] Twisted 12.0.0pre1 is here!
Message-ID: <4F1D69F1.6080506@free.fr>

Hello there Twisted people,

Reading that title, I hear you saying: "Already?". But yes, now is 
already the time to test a freshly released version of Twisted. You can 
find the carefully prepared tarballs here:

     http://people.canonical.com/~therve/Twisted/12.0.0pre1/

47 tickets are closed by this release, among them:

  * A fix to the GTK2 reactor preventing unnecessary wake-ups (#4376)

  * Preliminary support of IPV6 on the server side (#5084)

  * Several fixes to the new protocol-based TLS implementation

  * Improved core documentation's main page (#5429)

Please run your application/library/framework tests against it!

New-year-resolution-ly yours,

-- 
Thomas



From ralphm at ik.nu  Mon Jan 23 16:25:46 2012
From: ralphm at ik.nu (Ralph Meijer)
Date: Tue, 24 Jan 2012 00:25:46 +0100
Subject: [Twisted-Python] [Twisted-Jabber] [ANNOUNCE] Wokkel 0.7.0
Message-ID: <4F1DEC7A.4060101@ik.nu>

Hi!

I am proud to announce version 0.7.0 of Wokkel, a set of enhancements on 
the Jabber/XMPP support in Twisted Words.

    http://wokkel.ik.nu/releases/0.7.0/wokkel-0.7.0.tar.gz

The highlights:

  * Protocol support for Publish-Subscribe subscription options,
    subscription identifiers and node configuration options.

  * Enhancements to Data Forms support for easier creation of forms to be
    submitted, and (type) verification of forms that are received.

  * A twistd plugin for running a basic XMPP server which accepts
    server-side components connections and provides server-to-server
    (dialback) connectivity.

  * Support for the Delayed Delivery data format.

  * Client-side support for Multi-User Chat, including a simple example.

Besides those new features, various bugs have been resolved and test 
coverage has been significantly improved. This release drops support for 
Twisted versions before 10.0.0. See the complete news file at:

    http://wokkel.ik.nu/releases/0.7.0/NEWS

With this release out of the way, my focus for this year will be on 
moving things from Wokkel to Words.

Jabber on!

--
ralphm



From goffi at goffi.org  Tue Jan 24 02:06:15 2012
From: goffi at goffi.org (Goffi)
Date: Tue, 24 Jan 2012 10:06:15 +0100
Subject: [Twisted-Python] [Twisted-Jabber] [ANNOUNCE] Wokkel 0.7.0
In-Reply-To: <4F1DEC7A.4060101@ik.nu>
References: <4F1DEC7A.4060101@ik.nu>
Message-ID: <3405816.QcK7JJj8mT@ubuntu-jerome>

Congratulations :)

Le Mardi 24 Janvier 2012 00:25:46 Ralph Meijer a écrit :
> Hi!
> 
> I am proud to announce version 0.7.0 of Wokkel, a set of enhancements on
> the Jabber/XMPP support in Twisted Words.
> 
>     http://wokkel.ik.nu/releases/0.7.0/wokkel-0.7.0.tar.gz
> 
> The highlights:
> 
>   * Protocol support for Publish-Subscribe subscription options,
>     subscription identifiers and node configuration options.
> 
>   * Enhancements to Data Forms support for easier creation of forms to be
>     submitted, and (type) verification of forms that are received.
> 
>   * A twistd plugin for running a basic XMPP server which accepts
>     server-side components connections and provides server-to-server
>     (dialback) connectivity.
> 
>   * Support for the Delayed Delivery data format.
> 
>   * Client-side support for Multi-User Chat, including a simple example.
> 
> Besides those new features, various bugs have been resolved and test
> coverage has been significantly improved. This release drops support for
> Twisted versions before 10.0.0. See the complete news file at:
> 
>     http://wokkel.ik.nu/releases/0.7.0/NEWS
> 
> With this release out of the way, my focus for this year will be on
> moving things from Wokkel to Words.
> 
> Jabber on!
> 
> --
> ralphm
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From glyph at twistedmatrix.com  Tue Jan 24 11:08:08 2012
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Tue, 24 Jan 2012 10:08:08 -0800
Subject: [Twisted-Python] [Twisted-Jabber] [ANNOUNCE] Wokkel 0.7.0
In-Reply-To: <4F1DEC7A.4060101@ik.nu>
References: <4F1DEC7A.4060101@ik.nu>
Message-ID: <E69F435A-085F-457D-8C41-1ABECAB2D22E@twistedmatrix.com>


On Jan 23, 2012, at 3:25 PM, Ralph Meijer wrote:

> Hi!
> 
> I am proud to announce version 0.7.0 of Wokkel, a set of enhancements on 
> the Jabber/XMPP support in Twisted Words.
> 
>    http://wokkel.ik.nu/releases/0.7.0/wokkel-0.7.0.tar.gz

Congratulations on the release, Ralph!  I'm really glad to see the Twisted/XMPP community is still alive and well.

> With this release out of the way, my focus for this year will be on 
> moving things from Wokkel to Words.

And I am really looking forward to this! :-)

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120124/1a820928/attachment.html>

From techaficionado1743 at gmail.com  Wed Jan 25 05:04:09 2012
From: techaficionado1743 at gmail.com (Tech Aficionado1743)
Date: Wed, 25 Jan 2012 13:04:09 +0100
Subject: [Twisted-Python] Multiple callbacks
Message-ID: <CAJttDoUbmJRx0SSTvysHoAf9GriVpQzzoYXBGqTM1Mupftpr5w@mail.gmail.com>

Hello, can anyone help ?
i can't understand why, in the piece of code below (S1),
the parameter (grid) passed to the callback is the same,
while i have 2 grid, 2 deferred and 2 lambda.
The source S2 is working (2 different grid), but inelegant...

Thank you.


#----------- S1 ------------------------
    def OnSubscribe(self):
        for pool, grid in self.grids.items():
            print 'grid = ',grid
            d = self.frame.dbpoolMiddle.runQuery(allSelect.stmts['Set0'],
(pool, self.frame.ctxName))
            print 'deferred = ', d
            f = lambda _:self.gotDataBin(_, grid)
            print 'lambda =', f
            d.addCallback(f)

    def gotDataBin(self, result, grid):
        print 'callback = ', grid
        grid.ReplaceRowsFromSQL(result)

#----------- Output S1 ----------------

grid =  <cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type 'wxGrid *'
at 0x2d61b48> >
deferred =  <Deferred at 0x2e6bd28>
lambda = <function <lambda> at 0x02DCDCF0>

grid =  <cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type 'wxGrid *'
at 0x2d5e788> >
deferred =  <Deferred at 0x2e6bdc8>
lambda = <function <lambda> at 0x02DCDCB0>

callback =  <cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type 'wxGrid
*' at 0x2d5e788> > # expected to get 1st grid here: 0x2d61b48, not two
times 2nd grid
callback =  <cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type 'wxGrid
*' at 0x2d5e788> >

#----------- S2 ------------------------
    def OnSubscribe(self):
        for pool, grid in self.grids.items():
            d = self.frame.dbpoolMiddle.runQuery(allSelect.stmts['Set0'],
(pool, self.frame.ctxName))

            def toto(grid):
                d.addCallback(lambda _:self.gotDataBin(_, grid))

            toto(grid)

    def gotDataBin(self, result, grid):
        print 'callback = ', grid
        grid.ReplaceRowsFromSQL(result)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120125/06d7990e/attachment.html>

From poisonoff at gmail.com  Wed Jan 25 06:22:57 2012
From: poisonoff at gmail.com (=?UTF-8?B?0JDRgNC60LDQtNC40Lkg0JvQtdCy0LjQvQ==?=)
Date: Wed, 25 Jan 2012 19:22:57 +0600
Subject: [Twisted-Python] Multiple callbacks
In-Reply-To: <CAJttDoUbmJRx0SSTvysHoAf9GriVpQzzoYXBGqTM1Mupftpr5w@mail.gmail.com>
References: <CAJttDoUbmJRx0SSTvysHoAf9GriVpQzzoYXBGqTM1Mupftpr5w@mail.gmail.com>
Message-ID: <CACgbmJkeL8X_H9SaLhZKTLQWSu6aBrQz-FdhTzb0ZOqFKrpWbQ@mail.gmail.com>

Hi, you need add "grid" to lambda arguments,

f = lambda _, grip=grip:self.gotDataBin(_, grid)

On Wed, Jan 25, 2012 at 6:04 PM, Tech Aficionado1743
<techaficionado1743 at gmail.com> wrote:
> Hello, can anyone help ?
> i can't understand why, in the piece of code below (S1),
> the parameter (grid) passed to the callback is the same,
> while i have 2 grid, 2 deferred and 2 lambda.
> The source S2 is working (2 different grid), but inelegant...
>
> Thank you.
>
>
> #----------- S1 ------------------------
>     def OnSubscribe(self):
>         for pool, grid in self.grids.items():
>             print 'grid = ',grid
>             d = self.frame.dbpoolMiddle.runQuery(allSelect.stmts['Set0'],
> (pool, self.frame.ctxName))
>             print 'deferred = ', d
>             f = lambda _:self.gotDataBin(_, grid)
>             print 'lambda =', f
>             d.addCallback(f)
>
>     def gotDataBin(self, result, grid):
>         print 'callback = ', grid
>         grid.ReplaceRowsFromSQL(result)
>
> #----------- Output S1 ----------------
>
> grid =  <cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type 'wxGrid *' at
> 0x2d61b48> >
> deferred =  <Deferred at 0x2e6bd28>
> lambda = <function <lambda> at 0x02DCDCF0>
>
> grid =  <cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type 'wxGrid *' at
> 0x2d5e788> >
> deferred =  <Deferred at 0x2e6bdc8>
> lambda = <function <lambda> at 0x02DCDCB0>
>
> callback =  <cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type 'wxGrid
> *' at 0x2d5e788> > # expected to get 1st grid here: 0x2d61b48, not two times
> 2nd grid
> callback =  <cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type 'wxGrid
> *' at 0x2d5e788> >
>
> #----------- S2 ------------------------
>     def OnSubscribe(self):
>         for pool, grid in self.grids.items():
>             d = self.frame.dbpoolMiddle.runQuery(allSelect.stmts['Set0'],
> (pool, self.frame.ctxName))
>
>             def toto(grid):
>                 d.addCallback(lambda _:self.gotDataBin(_, grid))
>
>             toto(grid)
>
>     def gotDataBin(self, result, grid):
>         print 'callback = ', grid
>         grid.ReplaceRowsFromSQL(result)
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From gerrat1 at yahoo.com  Wed Jan 25 06:28:13 2012
From: gerrat1 at yahoo.com (Gerrat)
Date: Wed, 25 Jan 2012 13:28:13 +0000 (UTC)
Subject: [Twisted-Python] http.Request and JSON
References: <fcc3e6170906300107g354cc968g204ffd7a2956b5c6@mail.gmail.com>
	<20090630081804.GA6278@wildfire.net.ic.ac.uk>
	<95bb10690906300144t6bfb1d2h7dc4f8001ed7da42@mail.gmail.com>
	<f5eea9170906300456y57a3c522rf45128ed70936631@mail.gmail.com>
Message-ID: <loom.20120125T141945-257@post.gmane.org>

Tristan Seligmann <mithrandi <at> mithrandi.net> writes:

> 
> On Tue, Jun 30, 2009 at 10:44 AM, Reza Lotun<rlotun <at> gmail.com> wrote:
> > To be safer, I do a request.content.getvalue() since content is a
> > cStringIO object and you can never be sure if somewhere along the
> > chain of processing someone hasn't done a .read and forgot to do a
> > .seek(0,0).
> 
> You should probably do the seek/read instead, since I don't believe
> this is guaranteed to be a cStringIO; it might be an actual file on
> disk, or something else.

Thank You!!!

Every <stupid> example I've seen used "request.content.getvalue()" ...which
fails miserably for me (possibly because I'm on 64bit windows - but cStringIO is
available, so I'm not sure why it's not used).  request.content.read() works
wonderfully.  The "getvalue" method looked familiar, but I couldn't recall where
I'd seen it - only that *my* request.content doesn't have a getvalue method.  It
took quite a few searches before I stumbled on your comment here which gave me
the correct solution.





From _ at lvh.cc  Wed Jan 25 07:03:47 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Wed, 25 Jan 2012 15:03:47 +0100
Subject: [Twisted-Python] Multiple callbacks
In-Reply-To: <CACgbmJkeL8X_H9SaLhZKTLQWSu6aBrQz-FdhTzb0ZOqFKrpWbQ@mail.gmail.com>
References: <CAJttDoUbmJRx0SSTvysHoAf9GriVpQzzoYXBGqTM1Mupftpr5w@mail.gmail.com>
	<CACgbmJkeL8X_H9SaLhZKTLQWSu6aBrQz-FdhTzb0ZOqFKrpWbQ@mail.gmail.com>
Message-ID: <CAE_Hg6ZGjxzeJcCZ+9wfmS5=_p32QuresA6ePtyy4EtGjYQpyA@mail.gmail.com>

Note that that's just pythons late binding semantics, nothing twistedy
going on here :)
On Jan 25, 2012 2:24 PM, "Аркадий Левин" <poisonoff at gmail.com> wrote:

> Hi, you need add "grid" to lambda arguments,
>
> f = lambda _, grip=grip:self.gotDataBin(_, grid)
>
> On Wed, Jan 25, 2012 at 6:04 PM, Tech Aficionado1743
> <techaficionado1743 at gmail.com> wrote:
> > Hello, can anyone help ?
> > i can't understand why, in the piece of code below (S1),
> > the parameter (grid) passed to the callback is the same,
> > while i have 2 grid, 2 deferred and 2 lambda.
> > The source S2 is working (2 different grid), but inelegant...
> >
> > Thank you.
> >
> >
> > #----------- S1 ------------------------
> >     def OnSubscribe(self):
> >         for pool, grid in self.grids.items():
> >             print 'grid = ',grid
> >             d = self.frame.dbpoolMiddle.runQuery(allSelect.stmts['Set0'],
> > (pool, self.frame.ctxName))
> >             print 'deferred = ', d
> >             f = lambda _:self.gotDataBin(_, grid)
> >             print 'lambda =', f
> >             d.addCallback(f)
> >
> >     def gotDataBin(self, result, grid):
> >         print 'callback = ', grid
> >         grid.ReplaceRowsFromSQL(result)
> >
> > #----------- Output S1 ----------------
> >
> > grid =  <cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type 'wxGrid
> *' at
> > 0x2d61b48> >
> > deferred =  <Deferred at 0x2e6bd28>
> > lambda = <function <lambda> at 0x02DCDCF0>
> >
> > grid =  <cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type 'wxGrid
> *' at
> > 0x2d5e788> >
> > deferred =  <Deferred at 0x2e6bdc8>
> > lambda = <function <lambda> at 0x02DCDCB0>
> >
> > callback =  <cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type
> 'wxGrid
> > *' at 0x2d5e788> > # expected to get 1st grid here: 0x2d61b48, not two
> times
> > 2nd grid
> > callback =  <cfm.wx.CfmGrid.CfmGrid; proxy of <Swig Object of type
> 'wxGrid
> > *' at 0x2d5e788> >
> >
> > #----------- S2 ------------------------
> >     def OnSubscribe(self):
> >         for pool, grid in self.grids.items():
> >             d = self.frame.dbpoolMiddle.runQuery(allSelect.stmts['Set0'],
> > (pool, self.frame.ctxName))
> >
> >             def toto(grid):
> >                 d.addCallback(lambda _:self.gotDataBin(_, grid))
> >
> >             toto(grid)
> >
> >     def gotDataBin(self, result, grid):
> >         print 'callback = ', grid
> >         grid.ReplaceRowsFromSQL(result)
> >
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120125/3c81af06/attachment.html>

From exarkun at twistedmatrix.com  Wed Jan 25 07:10:45 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 25 Jan 2012 14:10:45 -0000
Subject: [Twisted-Python] Twisted Sprint at PyCon 2012
Message-ID: <20120125141045.2876.337282862.divmod.xquotient.281@localhost6.localdomain6>

Hello all,

The past few years have seen the Twisted sprint at PyCon grow to a very 
impressive size.  With expectations that this will be the largest PyCon 
yet, I have no reason to expect that the trend will be reversed this 
year.

I have "run" the sprint for the past two years, though in practice there 
are not many duties associated with that post.  This year, I need to 
hand off that responsibility to someone else, as I will only be 
attending the sprints for the first day.

"Running" a PyCon sprint involves interfacing with the PyCon organizers 
to get a room assignment.  Beyond that, all that's really necessary is 
to keep your eyes open for things that might be impeding the work of 
sprinters (yourself included, as these duties should not take up more 
than about 2% of your time).

If you're interested in taking this on, please let me know.  Let me know 
which days you'll be attending the sprints (preferably you'll be 
attending all days, but missing the last day or two might not disqualify 
you).

Thanks!

Jean-Paul



From _ at lvh.cc  Wed Jan 25 09:17:21 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Wed, 25 Jan 2012 17:17:21 +0100
Subject: [Twisted-Python] Twisted Sprint at PyCon 2012
In-Reply-To: <20120125141045.2876.337282862.divmod.xquotient.281@localhost6.localdomain6>
References: <20120125141045.2876.337282862.divmod.xquotient.281@localhost6.localdomain6>
Message-ID: <CAE_Hg6bDepZsSDA4H5mNoc3Xq3YfrPm4fdSCQsbR7LaoZ8KEng@mail.gmail.com>

I can do it :)
On Jan 25, 2012 3:11 PM, <exarkun at twistedmatrix.com> wrote:

> Hello all,
>
> The past few years have seen the Twisted sprint at PyCon grow to a very
> impressive size.  With expectations that this will be the largest PyCon
> yet, I have no reason to expect that the trend will be reversed this
> year.
>
> I have "run" the sprint for the past two years, though in practice there
> are not many duties associated with that post.  This year, I need to
> hand off that responsibility to someone else, as I will only be
> attending the sprints for the first day.
>
> "Running" a PyCon sprint involves interfacing with the PyCon organizers
> to get a room assignment.  Beyond that, all that's really necessary is
> to keep your eyes open for things that might be impeding the work of
> sprinters (yourself included, as these duties should not take up more
> than about 2% of your time).
>
> If you're interested in taking this on, please let me know.  Let me know
> which days you'll be attending the sprints (preferably you'll be
> attending all days, but missing the last day or two might not disqualify
> you).
>
> Thanks!
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120125/8927f8a7/attachment.html>

From matt at conundrum.com  Wed Jan 25 12:06:57 2012
From: matt at conundrum.com (Matthew Pounsett)
Date: Wed, 25 Jan 2012 14:06:57 -0500
Subject: [Twisted-Python] Extending twisted.words.protocols.irc
Message-ID: <ACBD4FA4-9731-4110-9D92-4F1270E3785D@conundrum.com>


I've written some methods for twisted.words.protocols.irc.IRCClient that seem like they (or something like them) should be part of the main distribution.  What's the preferred way to pass those along for consideration?  Posting here?  Open a ticket on the tracker?  If the latter, should I send them all as one batch, or separate them into related chunks?

Thanks!




From kevin.horn at gmail.com  Wed Jan 25 12:44:12 2012
From: kevin.horn at gmail.com (Kevin Horn)
Date: Wed, 25 Jan 2012 13:44:12 -0600
Subject: [Twisted-Python] Extending twisted.words.protocols.irc
In-Reply-To: <ACBD4FA4-9731-4110-9D92-4F1270E3785D@conundrum.com>
References: <ACBD4FA4-9731-4110-9D92-4F1270E3785D@conundrum.com>
Message-ID: <CA+U=zK1H23h3Kq8Kz41_WLig-G_eyZu697cWifi810rq5_aD9w@mail.gmail.com>

On Wed, Jan 25, 2012 at 1:06 PM, Matthew Pounsett <matt at conundrum.com>wrote:

>
> I've written some methods for twisted.words.protocols.irc.IRCClient that
> seem like they (or something like them) should be part of the main
> distribution.  What's the preferred way to pass those along for
> consideration?  Posting here?  Open a ticket on the tracker?  If the
> latter, should I send them all as one batch, or separate them into related
> chunks?
>
> Thanks!
>
>
Probably the best way to submit code is to open a ticket on the tracker,
with an attached patch as a unified diff against the current twisted trunk.

Failing a unified diff, you can attach just a patch, but it will slow down
getting your code into Twisted.

Probably the best thing you can do to speed up inclusion of your code into
Twisted is to include unit tests with your patch.

The next best thing is to be active on the ticket.  Pay attention to
updates, code reviews, etc.

See also: http://twistedmatrix.com/trac/wiki/ContributingToTwistedLabs

Good luck!

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120125/41042d3c/attachment-0001.html>

From glyph at twistedmatrix.com  Wed Jan 25 13:03:35 2012
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 25 Jan 2012 12:03:35 -0800
Subject: [Twisted-Python] http.Request and JSON
In-Reply-To: <loom.20120125T141945-257@post.gmane.org>
References: <fcc3e6170906300107g354cc968g204ffd7a2956b5c6@mail.gmail.com>
	<20090630081804.GA6278@wildfire.net.ic.ac.uk>
	<95bb10690906300144t6bfb1d2h7dc4f8001ed7da42@mail.gmail.com>
	<f5eea9170906300456y57a3c522rf45128ed70936631@mail.gmail.com>
	<loom.20120125T141945-257@post.gmane.org>
Message-ID: <0F1AE771-DAA1-4894-8311-C7ED343E35AF@twistedmatrix.com>


On Jan 25, 2012, at 5:28 AM, Gerrat wrote:

> Tristan Seligmann <mithrandi <at> mithrandi.net> writes:
> 
>> 
>> On Tue, Jun 30, 2009 at 10:44 AM, Reza Lotun<rlotun <at> gmail.com> wrote:
>>> To be safer, I do a request.content.getvalue() since content is a
>>> cStringIO object and you can never be sure if somewhere along the
>>> chain of processing someone hasn't done a .read and forgot to do a
>>> .seek(0,0).
>> 
>> You should probably do the seek/read instead, since I don't believe
>> this is guaranteed to be a cStringIO; it might be an actual file on
>> disk, or something else.
> 
> Thank You!!!
> 
> Every <stupid> example I've seen used "request.content.getvalue()" ...which
> fails miserably for me (possibly because I'm on 64bit windows - but cStringIO is
> available, so I'm not sure why it's not used).  request.content.read() works
> wonderfully.  The "getvalue" method looked familiar, but I couldn't recall where
> I'd seen it - only that *my* request.content doesn't have a getvalue method.  It
> took quite a few searches before I stumbled on your comment here which gave me
> the correct solution.

Nothing to do with 64bit windows.  twisted.web will switch to a file when the threshold of the upload goes above a certain size.  request.content is a file-like object, not any particular implementation of that protocol.

This really should be documented in http://twistedmatrix.com/documents/current/api/twisted.web.iweb.IRequest.html - it's a bug that it isn't.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120125/48bef250/attachment.html>

From matt at conundrum.com  Wed Jan 25 13:21:36 2012
From: matt at conundrum.com (Matthew Pounsett)
Date: Wed, 25 Jan 2012 15:21:36 -0500
Subject: [Twisted-Python] Extending twisted.words.protocols.irc
In-Reply-To: <CA+U=zK1H23h3Kq8Kz41_WLig-G_eyZu697cWifi810rq5_aD9w@mail.gmail.com>
References: <ACBD4FA4-9731-4110-9D92-4F1270E3785D@conundrum.com>
	<CA+U=zK1H23h3Kq8Kz41_WLig-G_eyZu697cWifi810rq5_aD9w@mail.gmail.com>
Message-ID: <0C6F1DFF-29D4-43EE-9A95-FCC95276F808@conundrum.com>


On 2012/01/25, at 14:44, Kevin Horn wrote:

> Probably the best way to submit code is to open a ticket on the tracker, with an attached patch as a unified diff against the current twisted trunk.
> [...]
> See also: http://twistedmatrix.com/trac/wiki/ContributingToTwistedLabs

Excellent.  Thanks for the pointer!






From exarkun at twistedmatrix.com  Wed Jan 25 15:31:20 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 25 Jan 2012 22:31:20 -0000
Subject: [Twisted-Python] Extending twisted.words.protocols.irc
In-Reply-To: <0C6F1DFF-29D4-43EE-9A95-FCC95276F808@conundrum.com>
References: <ACBD4FA4-9731-4110-9D92-4F1270E3785D@conundrum.com>
	<CA+U=zK1H23h3Kq8Kz41_WLig-G_eyZu697cWifi810rq5_aD9w@mail.gmail.com>
	<0C6F1DFF-29D4-43EE-9A95-FCC95276F808@conundrum.com>
Message-ID: <20120125223120.2876.1551228012.divmod.xquotient.329@localhost6.localdomain6>

On 08:21 pm, matt at conundrum.com wrote:
>
>On 2012/01/25, at 14:44, Kevin Horn wrote:
>>Probably the best way to submit code is to open a ticket on the 
>>tracker, with an attached patch as a unified diff against the current 
>>twisted trunk.
>>[...]
>>See also: http://twistedmatrix.com/trac/wiki/ContributingToTwistedLabs
>
>Excellent.  Thanks for the pointer!

And please do file multiple tickets and split your patch up amongst 
them, if you have multiple new features or bug fixes.

Thanks.
Jean-Paul



From matt at conundrum.com  Wed Jan 25 16:34:02 2012
From: matt at conundrum.com (Matthew Pounsett)
Date: Wed, 25 Jan 2012 18:34:02 -0500
Subject: [Twisted-Python] Extending twisted.words.protocols.irc
In-Reply-To: <CA+U=zK1H23h3Kq8Kz41_WLig-G_eyZu697cWifi810rq5_aD9w@mail.gmail.com>
References: <ACBD4FA4-9731-4110-9D92-4F1270E3785D@conundrum.com>
	<CA+U=zK1H23h3Kq8Kz41_WLig-G_eyZu697cWifi810rq5_aD9w@mail.gmail.com>
Message-ID: <7C55787E-1025-4AEA-B85D-77B364FF8175@conundrum.com>


On 2012/01/25, at 14:44, Kevin Horn wrote:

> Probably the best way to submit code is to open a ticket on the tracker, with an attached patch as a unified diff against the current twisted trunk.

Can whoever is responsible for the tracker software have a look at its mail queue?  I'm not receiving the email address verification mail.  And yes, I've attempted to have it re-sent, and have double-checked my address and spam filters.  It should have been sent to this address.

> sudo grep -c twistedmatrix /var/log/exim/rejectlog
0





From exarkun at twistedmatrix.com  Wed Jan 25 18:13:36 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 26 Jan 2012 01:13:36 -0000
Subject: [Twisted-Python] Problems with trac account registration (was Re:
 Extending twisted.words.protocols.irc)
In-Reply-To: <7C55787E-1025-4AEA-B85D-77B364FF8175@conundrum.com>
References: <ACBD4FA4-9731-4110-9D92-4F1270E3785D@conundrum.com>
	<CA+U=zK1H23h3Kq8Kz41_WLig-G_eyZu697cWifi810rq5_aD9w@mail.gmail.com>
	<7C55787E-1025-4AEA-B85D-77B364FF8175@conundrum.com>
Message-ID: <20120126011336.2876.649665054.divmod.xquotient.339@localhost6.localdomain6>

On 25 Jan, 11:34 pm, matt at conundrum.com wrote:
>
>On 2012/01/25, at 14:44, Kevin Horn wrote:
>>Probably the best way to submit code is to open a ticket on the 
>>tracker, with an attached patch as a unified diff against the current 
>>twisted trunk.
>
>Can whoever is responsible for the tracker software have a look at its 
>mail queue?  I'm not receiving the email address verification mail. 
>And yes, I've attempted to have it re-sent, and have double-checked my 
>address and spam filters.  It should have been sent to this address.
>>sudo grep -c twistedmatrix /var/log/exim/rejectlog
>0

Heya Matt,

Sorry about that.  The problem is almost certainly on our side, not 
yours.  Unfortunately, the cause resists identification, though it 
appears to be somewhere within the trac registration system itself, not 
in the actual mail server software.

The Twisted project is somewhat lacking in administrative resources. 
Thomas Hervé kindly did some investigation into this issue, narrowing 
things down as far as trac.  Until someone finds time to look further 
though, this issue doesn't seem likely to get resolved.  This is rather 
unfortunate, since clearly it is obstructing a lot of new contributors.

If anyone is familiar with trac and could lend a hand, it would be very 
valuable and much appreciated.

Jean-Paul



From matt at conundrum.com  Fri Jan 27 22:51:32 2012
From: matt at conundrum.com (Matthew Pounsett)
Date: Sat, 28 Jan 2012 00:51:32 -0500
Subject: [Twisted-Python] IRCClient method naming advice
Message-ID: <83470834-9FAD-4C36-898A-C3479F86BC6B@conundrum.com>


I've found that the IRCClient protocol doesn't deal well with having its connection interrupted.  If the TCP session goes away due to timeout or some other interruption, it doesn't appear to notice.  As a result, I'm looking at adding appropriate methods to allow a client to initiate its own pings to the server so that it can detect when the connection is lost.  I'll submit all this back via Trac when I can get in there.

This will need IRCClient.irc_PONG(), which looks fairly straightforward to write, and the obvious method for the outgoing ping would be IRCClient.ping(), but that seems to have been taken up for DCC PING instead.  

Presumably it would upset people if backward compatibility was broken and that was changed to IRCClient.dccPing() to match the rest of the outgoing DCC methods. Does anyone have any opinion on what other method name would make sense and still be close to maintaining consistency with the rest of the outgoing method names?





From jonathan+twisted at jsphere.com  Sat Jan 28 02:20:23 2012
From: jonathan+twisted at jsphere.com (Jonathan Jacobs)
Date: Sat, 28 Jan 2012 11:20:23 +0200
Subject: [Twisted-Python] IRCClient method naming advice
In-Reply-To: <83470834-9FAD-4C36-898A-C3479F86BC6B@conundrum.com>
References: <83470834-9FAD-4C36-898A-C3479F86BC6B@conundrum.com>
Message-ID: <CAM187SFZ_9dT+Nyj-xeYiEgV53iSYQR=-dws9gYA19WEj9Szug@mail.gmail.com>

On Sat, Jan 28, 2012 at 07:51, Matthew Pounsett <matt at conundrum.com> wrote:
>
> I've found that the IRCClient protocol doesn't deal well with having its connection interrupted.  If the TCP session goes away due to timeout or some other interruption, it doesn't appear to notice.  As a result, I'm looking at adding appropriate methods to allow a client to initiate its own pings to the server so that it can detect when the connection is lost.  I'll submit all this back via Trac when I can get in there.
>
> This will need IRCClient.irc_PONG(), which looks fairly straightforward to write, and the obvious method for the outgoing ping would be IRCClient.ping(), but that seems to have been taken up for DCC PING instead.
>
> Presumably it would upset people if backward compatibility was broken and that was changed to IRCClient.dccPing() to match the rest of the outgoing DCC methods. Does anyone have any opinion on what other method name would make sense and still be close to maintaining consistency with the rest of the outgoing method names?


Hi Matthew,

"Heartbeat" functionality was implemented in IRCClient and released in
Twisted 11.1.0, see ticket #5047
<http://twistedmatrix.com/trac/ticket/5047>, by default it sends a
PING every 120 seconds.

You don't actually need to acknowledge the PONG for the purpose of
keeping the client alive and active, writing any data to the transport
is enough to trigger connectionLost if the connection is genuinely
dead.

Hope this helps.

--
Jonathan



From matt at conundrum.com  Sat Jan 28 10:55:37 2012
From: matt at conundrum.com (Matthew Pounsett)
Date: Sat, 28 Jan 2012 12:55:37 -0500
Subject: [Twisted-Python] IRCClient method naming advice
In-Reply-To: <CAM187SFZ_9dT+Nyj-xeYiEgV53iSYQR=-dws9gYA19WEj9Szug@mail.gmail.com>
References: <83470834-9FAD-4C36-898A-C3479F86BC6B@conundrum.com>
	<CAM187SFZ_9dT+Nyj-xeYiEgV53iSYQR=-dws9gYA19WEj9Szug@mail.gmail.com>
Message-ID: <4679A66D-8BCE-40C1-85E2-1D915B9397D7@conundrum.com>


On 2012/01/28, at 04:20, Jonathan Jacobs wrote:

> "Heartbeat" functionality was implemented in IRCClient and released in
> Twisted 11.1.0, see ticket #5047
> <http://twistedmatrix.com/trac/ticket/5047>, by default it sends a
> PING every 120 seconds.

Ahh.. my problem is that my package manager (FreeBSD ports) seems to be out of date: I've got 11.0.  I've already got the trunk checked out.. I should have just checked there.

Thanks!




From penxiao at cisco.com  Sat Jan 28 18:48:42 2012
From: penxiao at cisco.com (Peng Xiao -X (penxiao - Digital China at Cisco))
Date: Sun, 29 Jan 2012 09:48:42 +0800
Subject: [Twisted-Python] How to  Connect a IPv6 server through Twisted
Message-ID: <776373CB9C5EA544A476052F49F1DAE2024EB354@XMB-HKG-41B.cisco.com>

Hi experts

 

I want to establish a connection between my twisted client and an IPv6
server, how can I achieve that?

Which version of Twisted should I use?

 

I know how to use IPv4 through "reactor.connectTCP(self.Addr, PORT,
self)". 

 

Very thanks

 

Best

Regards,

 

Xiao Peng

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120129/0b2a683c/attachment.html>

From exarkun at twistedmatrix.com  Sat Jan 28 22:05:39 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 29 Jan 2012 05:05:39 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1327813539.67.1201807449@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120129/38831691/attachment.html>

From fourat at gmail.com  Sat Jan 28 22:57:17 2012
From: fourat at gmail.com (Fourat ZOUARI)
Date: Sun, 29 Jan 2012 06:57:17 +0100
Subject: [Twisted-Python] Problem passing objects with perspective broker
Message-ID: <CAC6f7iPja2wFuRLGZ_E9_n3REOYoLSeN4hyeQfv+TmCH=LwpzA@mail.gmail.com>

Hi,

Whenever i try to pass an object (aClass) with a property with a second
object (bClass) Am getting:

*Unpersistable('Unpersistable data: instance of class amodule.bClass deemed
insecure')*


The aClass is copyable and unjellied, the bClass is not.

Here's my code:

server.py:

from twisted.application import internet, service
from twisted.spread import pb
from amodule import PBServer

application = service.Application("Test app")

# Prepare managers
clientManager = internet.TCPServer(8282, pb.PBServerFactory(PBServer()));
clientManager.setServiceParent(application)

if __name__ == '__main__':
    print "Run with twistd"
    import sys
    sys.exit(1)


amodule.py:

from twisted.spread import pb

class bClass:
    """This is not a Copyable class
    """

class aClass(pb.RemoteCopy, pb.Copyable):
    b = bClass()
pb.setUnjellyableForClass(aClass, aClass)

class PBServer(pb.Root):
    def remote_echo(self, a):
        return a.b

Is there anyway to unjelly aClass and all the objects it can contain ?
because unjellying included object is a headache and may turn into dirty
code ...

Regards, Fourat
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120129/61fa7a74/attachment.html>

From dripton at ripton.net  Sat Jan 28 23:11:56 2012
From: dripton at ripton.net (David Ripton)
Date: Sun, 29 Jan 2012 01:11:56 -0500
Subject: [Twisted-Python] Problem passing objects with perspective broker
In-Reply-To: <CAC6f7iPja2wFuRLGZ_E9_n3REOYoLSeN4hyeQfv+TmCH=LwpzA@mail.gmail.com>
References: <CAC6f7iPja2wFuRLGZ_E9_n3REOYoLSeN4hyeQfv+TmCH=LwpzA@mail.gmail.com>
Message-ID: <4F24E32C.3000400@ripton.net>

On 01/29/12 00:57, Fourat ZOUARI wrote:

> Whenever i try to pass an object (aClass) with a property with a second
> object (bClass) Am getting:
>
>     *Unpersistable('Unpersistable data: instance of class amodule.bClass
>     deemed insecure')*
>
>
> The aClass is copyable and unjellied, the bClass is not.
>
> Here's my code:
>
> server.py:
>
>     from twisted.application import internet, service
>     from twisted.spread import pb
>     from amodule import PBServer
>
>     application = service.Application("Test app")
>
>     # Prepare managers
>     clientManager = internet.TCPServer(8282,
>     pb.PBServerFactory(PBServer()));
>     clientManager.setServiceParent(application)
>
>     if __name__ == '__main__':
>          print "Run with twistd"
>          import sys
>          sys.exit(1)
>
>
> amodule.py:
>
>     from twisted.spread import pb
>
>     class bClass:
>     """This is not a Copyable class
>     """
>
>     class aClass(pb.RemoteCopy, pb.Copyable):
>          b = bClass()
>     pb.setUnjellyableForClass(aClass, aClass)
>
>     class PBServer(pb.Root):
>          def remote_echo(self, a):
>              return a.b
>
> Is there anyway to unjelly aClass and all the objects it can contain ?
> because unjellying included object is a headache and may turn into dirty
> code ...

If you make bClass inherit from pb.Copyable and do 
pb.setUnjellyableForClass(bClass, bClass) then everything should work.

Twisted knows how to do what you want, but it's refusing to do because 
you haven't marked bClass as safe to pass over the wire.

-- 
David Ripton    dripton at ripton.net



From fourat at gmail.com  Sat Jan 28 23:28:08 2012
From: fourat at gmail.com (Fourat ZOUARI)
Date: Sun, 29 Jan 2012 07:28:08 +0100
Subject: [Twisted-Python] Problem passing objects with perspective broker
In-Reply-To: <4F24E32C.3000400@ripton.net>
References: <CAC6f7iPja2wFuRLGZ_E9_n3REOYoLSeN4hyeQfv+TmCH=LwpzA@mail.gmail.com>
	<4F24E32C.3000400@ripton.net>
Message-ID: <CAC6f7iNo3rhAXzDeq2O0ByDm76=LV=1=u4OqA3RgJ4Rd3H1jRg@mail.gmail.com>

I didnt make bClass as copyable and unjellyed it just for the question, in
fact, the example i gave was the bare minimum of my source code to let
people clearly view the issue.

In the real problem, aClass has many references to other objects and if i
were to set them all as copyable and then unjellyed them all on the server
side, that would be a headache ...

Am asking whether if a clean solution exist for such problems.


On Sun, Jan 29, 2012 at 7:11 AM, David Ripton <dripton at ripton.net> wrote:

> On 01/29/12 00:57, Fourat ZOUARI wrote:
>
> > Whenever i try to pass an object (aClass) with a property with a second
> > object (bClass) Am getting:
> >
> >     *Unpersistable('Unpersistable data: instance of class amodule.bClass
> >     deemed insecure')*
> >
> >
> > The aClass is copyable and unjellied, the bClass is not.
> >
> > Here's my code:
> >
> > server.py:
> >
> >     from twisted.application import internet, service
> >     from twisted.spread import pb
> >     from amodule import PBServer
> >
> >     application = service.Application("Test app")
> >
> >     # Prepare managers
> >     clientManager = internet.TCPServer(8282,
> >     pb.PBServerFactory(PBServer()));
> >     clientManager.setServiceParent(application)
> >
> >     if __name__ == '__main__':
> >          print "Run with twistd"
> >          import sys
> >          sys.exit(1)
> >
> >
> > amodule.py:
> >
> >     from twisted.spread import pb
> >
> >     class bClass:
> >     """This is not a Copyable class
> >     """
> >
> >     class aClass(pb.RemoteCopy, pb.Copyable):
> >          b = bClass()
> >     pb.setUnjellyableForClass(aClass, aClass)
> >
> >     class PBServer(pb.Root):
> >          def remote_echo(self, a):
> >              return a.b
> >
> > Is there anyway to unjelly aClass and all the objects it can contain ?
> > because unjellying included object is a headache and may turn into dirty
> > code ...
>
> If you make bClass inherit from pb.Copyable and do
> pb.setUnjellyableForClass(bClass, bClass) then everything should work.
>
> Twisted knows how to do what you want, but it's refusing to do because
> you haven't marked bClass as safe to pass over the wire.
>
> --
> David Ripton    dripton at ripton.net
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120129/24341671/attachment-0001.html>

From dynamicgl at gmail.com  Sun Jan 29 02:24:57 2012
From: dynamicgl at gmail.com (gelin yan)
Date: Sun, 29 Jan 2012 17:24:57 +0800
Subject: [Twisted-Python] How to Connect a IPv6 server through Twisted
In-Reply-To: <776373CB9C5EA544A476052F49F1DAE2024EB354@XMB-HKG-41B.cisco.com>
References: <776373CB9C5EA544A476052F49F1DAE2024EB354@XMB-HKG-41B.cisco.com>
Message-ID: <CABkOF6StsdjS=Suq2nhbLYScRsqxnZLoP-4Fbxb2EnERTaAcQg@mail.gmail.com>

On Sun, Jan 29, 2012 at 9:48 AM, Peng Xiao -X (penxiao - Digital China at
Cisco) <penxiao at cisco.com> wrote:

>  Hi experts****
>
> ** **
>
> I want to establish a connection between my twisted client and an IPv6
> server, how can I achieve that?****
>
> Which version of Twisted should I use?****
>
> ** **
>
> I know how to use IPv4 through “reactor.connectTCP(self.Addr, PORT,
> self)”. ****
>
> ** **
>
> Very thanks****
>
> ** **
>
> Best****
>
> Regards,****
>
>  ****
>
> Xiao Peng****
>
> **
>
   IPV6 support on twisted is rudimentary at the moment..

>  **
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120129/c0b6790e/attachment.html>

From p.mayers at imperial.ac.uk  Sun Jan 29 16:34:30 2012
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Sun, 29 Jan 2012 23:34:30 +0000
Subject: [Twisted-Python] How to  Connect a IPv6 server through Twisted
In-Reply-To: <776373CB9C5EA544A476052F49F1DAE2024EB354@XMB-HKG-41B.cisco.com>
References: <776373CB9C5EA544A476052F49F1DAE2024EB354@XMB-HKG-41B.cisco.com>
Message-ID: <4F25D786.3090307@imperial.ac.uk>

On 01/29/2012 01:48 AM, Peng Xiao -X (penxiao - Digital China at Cisco) 
wrote:
> Hi experts
>
> I want to establish a connection between my twisted client and an IPv6
> server, how can I achieve that?
>
> Which version of Twisted should I use?

Currently not supported.

See:

  http://twistedmatrix.com/trac/ticket/5085

And:

  http://twistedmatrix.com/trac/wiki/IPv6

If you use the very latest SVN head, you can do:

  reactor.listenTCP(interface='::')

...to receive IPv6 TCP connections, but you cannot currently make them.



From glyph at twistedmatrix.com  Sun Jan 29 17:01:48 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Sun, 29 Jan 2012 19:01:48 -0500
Subject: [Twisted-Python] Problem passing objects with perspective broker
In-Reply-To: <CAC6f7iNo3rhAXzDeq2O0ByDm76=LV=1=u4OqA3RgJ4Rd3H1jRg@mail.gmail.com>
References: <CAC6f7iPja2wFuRLGZ_E9_n3REOYoLSeN4hyeQfv+TmCH=LwpzA@mail.gmail.com>
	<4F24E32C.3000400@ripton.net>
	<CAC6f7iNo3rhAXzDeq2O0ByDm76=LV=1=u4OqA3RgJ4Rd3H1jRg@mail.gmail.com>
Message-ID: <C328F9B0-EAC7-4026-94BF-3539A6F7ED30@twistedmatrix.com>


On Jan 29, 2012, at 1:28 AM, Fourat ZOUARI wrote:

> I didnt make bClass as copyable and unjellyed it just for the question, in fact, the example i gave was the bare minimum of my source code to let people clearly view the issue.
> 
> In the real problem, aClass has many references to other objects and if i were to set them all as copyable and then unjellyed them all on the server side, that would be a headache ...
> 
> Am asking whether if a clean solution exist for such problems.

You have to override getStateToCopy() and setCopyableState() so that only the references that you care about are transferred.

If you want to transfer an object though, you ned to make them copyable.  That's the whole point; only classes explicitly marked as copyable are allowed to be transferred.  Otherwise, bugs in your code might expose lots more information than you really want to, and remote attackers could create classes that they shouldn't be able to.

-glyph


From _ at lvh.cc  Tue Jan 31 05:41:01 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Tue, 31 Jan 2012 13:41:01 +0100
Subject: [Twisted-Python] Twisted Sprint at PyCon 2012 -- please sign up!
Message-ID: <CAE_Hg6ZkkwaGgw74fnf5LqPpvRejtKKM5PE=Xdo98yeC=3O72g@mail.gmail.com>

Hey!


So, I volunteered to manage the sprint at PyCon 2012. Since no-one else
has, I'm moving forward assuming I got the job ;-)

You should sign up (which involves logging in on the PyCon site, scrolling
to the bottom, clicking "Edit" and adding your name) to the sprint. This
makes it easier for organizers to know how many people to expect where.

Here's the signup link:

https://us.pycon.org/2012/community/sprints/projects/


cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120131/b95bb4a7/attachment.html>

From exarkun at twistedmatrix.com  Tue Jan 31 08:26:48 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 31 Jan 2012 15:26:48 -0000
Subject: [Twisted-Python] Twisted Sprint at PyCon 2012 -- please sign up!
In-Reply-To: <CAE_Hg6ZkkwaGgw74fnf5LqPpvRejtKKM5PE=Xdo98yeC=3O72g@mail.gmail.com>
References: <CAE_Hg6ZkkwaGgw74fnf5LqPpvRejtKKM5PE=Xdo98yeC=3O72g@mail.gmail.com>
Message-ID: <20120131152648.4064.1770379855.divmod.xquotient.3@localhost6.localdomain6>

On 12:41 pm, _ at lvh.cc wrote:
>Hey!
>
>So, I volunteered to manage the sprint at PyCon 2012. Since no-one else
>has, I'm moving forward assuming I got the job ;-)

Thanks!  Have fun. :)

Jean-Paul



From kevin.horn at gmail.com  Tue Jan 31 13:44:27 2012
From: kevin.horn at gmail.com (Kevin Horn)
Date: Tue, 31 Jan 2012 14:44:27 -0600
Subject: [Twisted-Python] Twisted Sprint at PyCon 2012 -- please sign up!
In-Reply-To: <20120131152648.4064.1770379855.divmod.xquotient.3@localhost6.localdomain6>
References: <CAE_Hg6ZkkwaGgw74fnf5LqPpvRejtKKM5PE=Xdo98yeC=3O72g@mail.gmail.com>
	<20120131152648.4064.1770379855.divmod.xquotient.3@localhost6.localdomain6>
Message-ID: <CA+U=zK3yvSREc-2ODH7JdqguBOoKY+gEY_YGdSsS1eFiF31SVw@mail.gmail.com>

Sadly, I won't be able to make it to PyCon this year...

Kevin Horn

On Tue, Jan 31, 2012 at 9:26 AM, <exarkun at twistedmatrix.com> wrote:

> On 12:41 pm, _ at lvh.cc wrote:
> >Hey!
> >
> >So, I volunteered to manage the sprint at PyCon 2012. Since no-one else
> >has, I'm moving forward assuming I got the job ;-)
>
> Thanks!  Have fun. :)
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120131/e7428900/attachment.html>

From rutt.4 at osu.edu  Tue Jan 31 20:59:30 2012
From: rutt.4 at osu.edu (Benjamin Rutt)
Date: Tue, 31 Jan 2012 22:59:30 -0500
Subject: [Twisted-Python] how to ensure writes to stdout via
 stdio.StandardIO are completed before we shutdown the reactor?
Message-ID: <CAMWA1_pGBmFoeYimm8WXJaCdNCDCmXVwF7xoBm8o83fWW_QTGQ@mail.gmail.com>

Hi twisted community,

What’s the best way to ensure writes to stdout via stdio.StandardIO
are completed before we shutdown the reactor?   The use case is to
emit an error message before we shutdown the reactor and stop our
program.  Dummy code snippet:

--------------------------------------------
#!/usr/bin/python

from twisted.internet import reactor, stdio
from twisted.protocols.basic  import LineReceiver

class StdinInteractor(LineReceiver):
  delimiter = '\n'

def go():
  stdio_proto = StdinInteractor()
  stdio.StandardIO(stdio_proto)
  stdio_proto.transport.write('did we get this message?\n')
  if 0:
    reactor.stop()
  else:
    reactor.callLater(1.0, reactor.stop)

reactor.callWhenRunning(go)
reactor.run()
--------------------------------------------

If I change ‘if 0’ to ‘if 1’, I don’t get the message on stdout.  The
‘reactor.callLater(1.0, reactor.stop)’ is obviously a hack to let the
reactor send out the buffered message before shutting down.  Any
ideas?

Thanks,

-- 
Benjamin Rutt



From exarkun at twistedmatrix.com  Tue Jan 31 23:01:44 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 01 Feb 2012 06:01:44 -0000
Subject: [Twisted-Python] how to ensure writes to stdout via
 stdio.StandardIO are completed before we shutdown the reactor?
In-Reply-To: <CAMWA1_pGBmFoeYimm8WXJaCdNCDCmXVwF7xoBm8o83fWW_QTGQ@mail.gmail.com>
References: <CAMWA1_pGBmFoeYimm8WXJaCdNCDCmXVwF7xoBm8o83fWW_QTGQ@mail.gmail.com>
Message-ID: <20120201060144.4064.433011759.divmod.xquotient.16@localhost6.localdomain6>

On 03:59 am, rutt.4 at osu.edu wrote:
>Hi twisted community,
>
>What’s the best way to ensure writes to stdout via stdio.StandardIO
>are completed before we shutdown the reactor?   The use case is to
>emit an error message before we shutdown the reactor and stop our
>program.  Dummy code snippet:

If you call the transport's loseConnection method, then the protocol's 
connectionLost method will be called after the output buffer is 
completely written.

Jean-Paul



