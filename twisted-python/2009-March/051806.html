<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] A few comments on deferreds
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20A%20few%20comments%20on%20deferreds&In-Reply-To=%3C18865.1215.882543.689802%40jon.es%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="051805.html">
   <LINK REL="Next"  HREF="051809.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] A few comments on deferreds</H1>
    <B>Terry Jones</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20A%20few%20comments%20on%20deferreds&In-Reply-To=%3C18865.1215.882543.689802%40jon.es%3E"
       TITLE="[Twisted-Python] A few comments on deferreds">terry at jon.es
       </A><BR>
    <I>Fri Mar  6 04:10:55 MST 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="051805.html">[Twisted-Python] Interview question on deferreds
</A></li>
        <LI>Next message (by thread): <A HREF="051809.html">[Twisted-Python] A few comments on deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51806">[ date ]</a>
              <a href="thread.html#51806">[ thread ]</a>
              <a href="subject.html#51806">[ subject ]</a>
              <a href="author.html#51806">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Here are a few comments on deferreds. I'll keep this short. These sort of
posts don't seem to generate much/any discussion (e.g., <A HREF="http://bit.ly/YkSD">http://bit.ly/YkSD</A>
which I thought was cool). I'm not sure why - I find deferreds infinitely
interesting, and don't understand why other people don't seem to share the
passion :-)

1. If you have a deferred d1, and you call d1.chainDeferred(d2) I think it
   makes sense for there to be a flag inside the deferred class that warns
   you if you later call d1.addCallbacks. That's because adding more
   functions to d1's callback/errback chain is probably not useful. (It
   might conceivably be useful, e.g., to let you know that d1 has been
   called). The result of d1 has been passed to d2, and because d2.callback
   and d2.errback don't return it (see point 2 below), it is not passed
   further down d1's chain. So it's most likely that someone adding a
   callback to d1 after calling d1.chainDeferred doesn't really know what
   they're doing.

2. Deferred.callback and Deferred.errback currently (implicitly) return
   None.  They could be changed to return their passed argument.  That
   would make a call to d1.chainDeferred act like a deferred fork - the
   result would go down d2's callback chain, but also continue down the
   callback/errback chain of d1.

3. There's also the possibility of adding a function to the Deferred class:

     def incorporateDeferred(self, d2):
         self.callbacks.extend(d2.callbacks)

   which might be what a naive reader might expect chainDeferred to do.
   This raises the question of what you might later do with d2 (probably
   nothing), but that's just like what happens with d1: if you call
   d1.chainDeferred you're probably not going to return d1 to anyone. All
   you can usefully do is fire it.

I'll stop for now. There's lots more that could be said, but lets see if
anyone's interested. I wish I were going to PyCon :-(

BTW, points 1 and 2 above are key to understanding what goes on in the
interview question code I recently posted (<A HREF="http://bit.ly/T3xKs">http://bit.ly/T3xKs</A>).

Terry


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="051805.html">[Twisted-Python] Interview question on deferreds
</A></li>
	<LI>Next message (by thread): <A HREF="051809.html">[Twisted-Python] A few comments on deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51806">[ date ]</a>
              <a href="thread.html#51806">[ thread ]</a>
              <a href="subject.html#51806">[ subject ]</a>
              <a href="author.html#51806">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
