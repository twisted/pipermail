<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Noob Question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Noob%20Question&In-Reply-To=%3C200903142055.07700.peter%40sabaini.at%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="051849.html">
   <LINK REL="Next"  HREF="051853.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Noob Question</H1>
    <B>Peter Sabaini</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Noob%20Question&In-Reply-To=%3C200903142055.07700.peter%40sabaini.at%3E"
       TITLE="[Twisted-Python] Noob Question">peter at sabaini.at
       </A><BR>
    <I>Sat Mar 14 13:55:01 MDT 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="051849.html">[Twisted-Python] Noob Question
</A></li>
        <LI>Next message (by thread): <A HREF="051853.html">[Twisted-Python] Noob Question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51851">[ date ]</a>
              <a href="thread.html#51851">[ thread ]</a>
              <a href="subject.html#51851">[ subject ]</a>
              <a href="author.html#51851">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Saturday 14 March 2009 19:54:04 Shelby Ramsey wrote:
&gt;<i> Peter,
</I>&gt;<i>
</I>&gt;<i> Thanks for the quick response.  The issue isn't grabbing the content length
</I>&gt;<i> ... but rather grabbing the body ...
</I>&gt;<i>
</I>&gt;<i> The protocol is TCP so the text (not binary) comes in streams ... so the
</I>&gt;<i> body is / might be broken into streams ... so I'm trying to figure out how
</I>&gt;<i> to &quot;receive&quot; the content length so I can get a complete body from different
</I>&gt;<i> streams.
</I>
Still not sure if I understand -- with TCP, there is always just one stream, 
and so its just a matter of breaking up the stream into suitable chunks.  

And in your case, it seems you have something like HTTP, ie. some header lines 
including Content-Length: and then the body, is that correct?

If that is the case, the twisted.protocols.basic.LineReceiver class might be a 
good starting point. To use it, you make your Protocol handler a subclass of 
LineReceiver; the reactor then calls your protocol objects' lineReceived() 
method with new data as long as you stay in &quot;line mode&quot;. Switch into &quot;raw 
mode&quot; to receive the body of the message. With HTTP for example, this would be 
after you receive an empty line. You do this by calling the setRawmode() 
method which is provided by LineReceiver. From that point on forward, the 
reactor will call the dataReceived() method to hand your protocol object new 
data. Presumably, you've already received a Content-Length header and stored 
that somewhere. Receive Content-Length bytes of data, and call setLineMode() 
to switch into line mode again. 

API docs are 
here:<A HREF="http://twistedmatrix.com/documents/current/api/twisted.protocols.basic.LineReceiver.html">http://twistedmatrix.com/documents/current/api/twisted.protocols.basic.LineReceiver.html</A>

Hm, that would maybe be a good topic for a tutorial.

hth,
peter.



&gt;<i> Thanks again!
</I>&gt;<i>
</I>&gt;<i> SDR
</I>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 197 bytes
Desc: This is a digitally signed message part.
URL: &lt;/pipermail/twisted-python/attachments/20090314/09dc32f9/attachment.sig&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="051849.html">[Twisted-Python] Noob Question
</A></li>
	<LI>Next message (by thread): <A HREF="051853.html">[Twisted-Python] Noob Question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51851">[ date ]</a>
              <a href="thread.html#51851">[ thread ]</a>
              <a href="subject.html#51851">[ subject ]</a>
              <a href="author.html#51851">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
