<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re:how to pass on the connection failed or	connection lost error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%3Ahow%20to%20pass%20on%20the%20connection%20failed%20or%0A%09connection%20lost%20error&In-Reply-To=%3C262572.93310.qm%40web53509.mail.re2.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="051788.html">
   <LINK REL="Next"  HREF="051811.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re:how to pass on the connection failed or	connection lost error</H1>
    <B>khawar hasham</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%3Ahow%20to%20pass%20on%20the%20connection%20failed%20or%0A%09connection%20lost%20error&In-Reply-To=%3C262572.93310.qm%40web53509.mail.re2.yahoo.com%3E"
       TITLE="[Twisted-Python] Re:how to pass on the connection failed or	connection lost error">hasham_james_007 at yahoo.com
       </A><BR>
    <I>Thu Mar  5 16:49:31 MST 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="051788.html">[Twisted-Python] how to pass on the connection failed or	connection lost error
</A></li>
        <LI>Next message (by thread): <A HREF="051811.html">[Twisted-Python] Re:how to pass on the connection failed or	connection lost error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51803">[ date ]</a>
              <a href="thread.html#51803">[ thread ]</a>
              <a href="subject.html#51803">[ subject ]</a>
              <a href="author.html#51803">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I tried to use this suggestion but I could not make it work.

here is the test I am using

in my application class
def callSend(self, msg):
      plugin.send(msg)

Now in plugin class
def send(self, msg):
      print 'before call'
      threads.blockingCallFromThread(reactor, remotesend, msg)
      print 'after call'

def handleError(self, error):
      error.raiseException()

def remotesend(self, msg):
     deferred = defer.Deferred()
     reactor.connectTCP('localhost',9999,myfactory)
     deffered.addErrback(self.handleError)
     return deffered

now myfactory class .. clientConnectionFailed 
def clientConnectionFailed(self, connector, reason):
      reason.raiseException()


now the problem is, code has become synchronous as code is waiting after threads.blockingCallFromThread, how to fire the defer returned from 'remotesend'. Do i need to fire it or twisted will take care of it.

I think I can't refer this deferred object since it is being passed to threads.blockingCallFromThread function on which I have no control.

any suggestions


--- On Wed, 3/4/09, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-request at twistedmatrix.com</A> &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-request at twistedmatrix.com</A>&gt; wrote:
From: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-request at twistedmatrix.com</A> &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-request at twistedmatrix.com</A>&gt;
Subject: Twisted-Python Digest, Vol 60, Issue 6
To: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>
Date: Wednesday, March 4, 2009, 11:00 AM

Send Twisted-Python mailing list submissions to
	<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>

To subscribe or unsubscribe via the World Wide Web, visit
	<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
or, via email, send a message with subject or body 'help' to
	<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-request at twistedmatrix.com</A>

You can reach the person managing the list at
	<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-owner at twistedmatrix.com</A>

When replying, please edit your Subject line so it is more specific
than &quot;Re: Contents of Twisted-Python digest...&quot;


Today's Topics:

   1. Re: how to pass on the connection failed or	connection lost
      error (Jean-Paul Calderone)


----------------------------------------------------------------------

Message: 1
Date: Wed, 4 Mar 2009 09:59:42 -0500
From: Jean-Paul Calderone &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at divmod.com</A>&gt;
Subject: Re: [Twisted-Python] how to pass on the connection failed or
	connection lost error
To: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>
Message-ID:
	&lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">20090304145942.12853.42253504.divmod.quotient.17917 at henry.divmod.com</A>&gt;
Content-Type: text/plain; format=flowed

On Wed, 4 Mar 2009 06:39:59 -0800 (PST), khawar hasham
&lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">hasham_james_007 at yahoo.com</A>&gt; wrote:
&gt;<i>Hi
</I>&gt;<i>
</I>&gt;<i>let me first explain the application that I am developing. I have an
</I>application that will use the twisted part as a plugin. this twisted part will
act as server and as client both.
&gt;<i>my application call the plugin method to send data to server module using
</I>connectTCP. now the problem is I can not pass on the connection failed exception
to my calling application.

Since you're running the reactor in one thread and the rest of your
application in another thread, your question is basically one of message
passing.  You've already found reactor.callFromThread which is good; I
think you just want the slightly more featureful version, available in
twisted.internet.threads, blockingCallFromThread.  This is implemented
in terms of callFromThread, but additionally allows the caller to get
the result of the function being called - including waiting on a Deferred
if the function being called returns one.  If you switch to this, then
you only need to make Plugin.clientsend return a Deferred which eventually
fires with a result or a Failure.

Jean-Paul



------------------------------

_______________________________________________
Twisted-Python mailing list
<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>


End of Twisted-Python Digest, Vol 60, Issue 6
*********************************************



      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20090305/d03a3ea0/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="051788.html">[Twisted-Python] how to pass on the connection failed or	connection lost error
</A></li>
	<LI>Next message (by thread): <A HREF="051811.html">[Twisted-Python] Re:how to pass on the connection failed or	connection lost error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51803">[ date ]</a>
              <a href="thread.html#51803">[ thread ]</a>
              <a href="subject.html#51803">[ subject ]</a>
              <a href="author.html#51803">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
