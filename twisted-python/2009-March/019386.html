<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] db connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20db%20connections&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019371.html">
   <LINK REL="Next"  HREF="019387.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] db connections</H1>
    <B>Pet</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20db%20connections&In-Reply-To="
       TITLE="[Twisted-Python] db connections">petshmidt at googlemail.com
       </A><BR>
    <I>Tue Mar 24 06:10:17 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019371.html">[Twisted-Python] Weekly Bug Summary
</A></li>
        <LI>Next message: <A HREF="019387.html">[Twisted-Python] db connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19386">[ date ]</a>
              <a href="thread.html#19386">[ thread ]</a>
              <a href="subject.html#19386">[ subject ]</a>
              <a href="author.html#19386">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I've wrote an daemon which does some queries to db and sends response
back to client. Do I need to make for every request from client (new
instance of  MyProtocol) a new connection to DB? Or can I somehow
prepare connection, so I could save some time? Maybe make connection
in Factory and pass it to Protocol? But what happens if too much
clients are connected to server? What is the way to control it?

Regards, Pet


class MyProtocol(basic.LineReceiver):

    def __init__(self):
        print &quot;new connection&quot;
        self.dbcon = adbapi.ConnectionPool(&quot;pyPgSQL.PgSQL&quot;,
database=&quot;data&quot;, user='pet', host='local', password='some')


class MyFactory(protocol.ServerFactory):
    protocol = MyProtocol

class MyService(internet.TCPServer):
    def __init__(self):
        internet.TCPServer.__init__(self,PORT,MyFactory())

def main():
    reactor.listenTCP(PORT, MyFactory())
    reactor.run()


if __name__ == '__main__':
    main()


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019371.html">[Twisted-Python] Weekly Bug Summary
</A></li>
	<LI>Next message: <A HREF="019387.html">[Twisted-Python] db connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19386">[ date ]</a>
              <a href="thread.html#19386">[ thread ]</a>
              <a href="subject.html#19386">[ subject ]</a>
              <a href="author.html#19386">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
