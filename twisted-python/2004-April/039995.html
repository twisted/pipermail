<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] addCallbacks issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20addCallbacks%20issue&In-Reply-To=%3C20040413103146.GA549%40frobozz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="039994.html">
   <LINK REL="Next"  HREF="039996.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] addCallbacks issue</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20addCallbacks%20issue&In-Reply-To=%3C20040413103146.GA549%40frobozz%3E"
       TITLE="[Twisted-Python] addCallbacks issue">andrew-twisted at puzzling.org
       </A><BR>
    <I>Tue Apr 13 04:31:46 MDT 2004</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="039994.html">[Twisted-Python] addCallbacks issue
</A></li>
        <LI>Next message (by thread): <A HREF="039996.html">[Twisted-Python] addCallbacks issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39995">[ date ]</a>
              <a href="thread.html#39995">[ thread ]</a>
              <a href="subject.html#39995">[ subject ]</a>
              <a href="author.html#39995">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Apr 13, 2004 at 01:19:30AM -0700, Sorin C. wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> Yes, I saw this bit of documentation but what I
</I>&gt;<i> understand from it is that if you chain multiple
</I>&gt;<i> addCallbacks to the same deferred then the error
</I>&gt;<i> handler from the last addCallbacks call will be
</I>&gt;<i> called. What am I missing?
</I>
You misunderstand the documentation, which is a shame because that section
is there specifically to be as clear as possible about this point :(  I
wonder how we can do better?

Anyway, have another look at the diagrams in that page; they hopefully will
give you a clear picture of how the callback and errback chains interact.

&gt;<i> Anyway, the API docs say:
</I>&gt;<i> &quot;&quot;&quot;
</I>&gt;<i> addCallbacks(self, callback, errback=None,
</I>&gt;<i> callbackArgs=None, callbackKeywords=None,
</I>&gt;<i> errbackArgs=None, errbackKeywords=None, asDefaults=0)
</I>&gt;<i> 
</I>&gt;<i> Add a pair of callbacks (success and error) to this
</I>&gt;<i> Deferred.
</I>&gt;<i> &quot;&quot;&quot;
</I>
And this is correct.

&gt;<i> 
</I>&gt;<i> So shouldn't 
</I>&gt;<i> 
</I>&gt;<i> addCallbacks(success, failure)
</I>&gt;<i> 
</I>&gt;<i> be equivalent with
</I>&gt;<i> 
</I>&gt;<i> addCallback(success)
</I>&gt;<i> addErrback(failure)
</I>
Definitely not.

Deferred callback chains are a sequence of callback/errback pairs.  Calling
just addCallback or addErrback adds a pair where one half of that pair is
None.  When a Deferred is fired, it calls one of the items in each pair in
turn, depending on whether it's currently handling a result or an error --
but if the item it would call is None, it just moves directly to the pair
without doing anything.

That's a pretty hairy description that's better explained by the diagrams in
the Deferred howto, I think -- but suggestions (and ideally patches) on how
to improve the Deferred docs are of course welcome.

I guess the basic confusion is that people expect addCallbacks(good, bad) to
add 'good' and then add 'bad' to the sequence, when actually they are added
at the same place, which is why an exception in 'good' will be passed to the
next errback after 'bad'.

I've tried to avoid resorting to bad ascii art to explain this... let me
know if I've helped :)

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="039994.html">[Twisted-Python] addCallbacks issue
</A></li>
	<LI>Next message (by thread): <A HREF="039996.html">[Twisted-Python] addCallbacks issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39995">[ date ]</a>
              <a href="thread.html#39995">[ thread ]</a>
              <a href="subject.html#39995">[ subject ]</a>
              <a href="author.html#39995">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
