<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted on os x: cfreactor or kqreactor?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted%20on%20os%20x%3A%20cfreactor%20or%20kqreactor%3F&In-Reply-To=8D2EFF25-965F-11D8-9DFB-000A95686CD8%40redivi.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007686.html">
   <LINK REL="Next"  HREF="007674.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted on os x: cfreactor or kqreactor?</H1>
    <B>Bob Ippolito</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted%20on%20os%20x%3A%20cfreactor%20or%20kqreactor%3F&In-Reply-To=8D2EFF25-965F-11D8-9DFB-000A95686CD8%40redivi.com"
       TITLE="[Twisted-Python] twisted on os x: cfreactor or kqreactor?">bob at redivi.com
       </A><BR>
    <I>Sat Apr 24 22:29:08 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="007686.html">[Twisted-Python] twisted on os x: cfreactor or kqreactor?
</A></li>
        <LI>Next message: <A HREF="007674.html">[Twisted-Python] no factory.disconnect used the docs!?! (btw thx	Itamar )
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7687">[ date ]</a>
              <a href="thread.html#7687">[ thread ]</a>
              <a href="subject.html#7687">[ subject ]</a>
              <a href="author.html#7687">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Apr 24, 2004, at 10:23 PM, Bob Ippolito wrote:

&gt;<i>
</I>&gt;<i> On Apr 23, 2004, at 12:23 PM, rayg wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> i just created a fink package for PyKQeue
</I>&gt;&gt;<i> (<A HREF="http://sourceforge.net/tracker/index.php?">http://sourceforge.net/tracker/index.php?</A> 
</I>&gt;&gt;<i> func=detail&amp;aid=940552&amp;group_id=17203&amp;atid=414256)
</I>&gt;&gt;<i> and this now allows me to use kqreactor.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> if i'm not not planning on using any cocoa functionality, is there any
</I>&gt;&gt;<i> advantage to use cfreactor over kqreactor on os x?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> i wasn't able to find any direct comparison between the mechanisms  
</I>&gt;&gt;<i> behind
</I>&gt;&gt;<i> kqreactor and cfreactor, but i did see that NSRunLoop is asynchronous,
</I>&gt;&gt;<i> like kqueue.  i've tested both reactors on a simple script and noticed
</I>&gt;&gt;<i> cfreactor doesn't stop() 75% of the time, so i'm inclined to just use
</I>&gt;&gt;<i> kqreactor, instead of tracking down why cfreactor isn't behaving...
</I>&gt;<i>
</I>&gt;<i> You need to use cfreactor or else twisted will block.  You basically  
</I>&gt;<i> have no choice.
</I>&gt;<i>
</I>&gt;<i> If that script has a problem with SVN trunk of Twisted, then post the  
</I>&gt;<i> script as a bug and I will fix it.  That said, stop() isn't  
</I>&gt;<i> necessarily going to cause the program to exit (it doesn't call  
</I>&gt;<i> CFRunLoopStop), but it should shut down twisted.  I've only  
</I>&gt;<i> extensively tested it when used with a NSRunLoop with Cocoa stuff  
</I>&gt;<i> going on, and never bothered with stop functionality because NSRunLoop  
</I>&gt;<i> doesn't have a stop method at all (exiting is done via -[NSApplication  
</I>&gt;<i> terminate] or an exit call).
</I>
I'm sorry, I read your message incorrectly.  If you are not using Cocoa  
functionality, use the default reactor or kqreactor (which will only  
work on 10.3).  CFRunLoop is designed to support Carbon (probably) and  
Cocoa applications.  There is no good reason to use it for a POSIX app  
unless you are using other event driven CoreFoundation code (highly  
unlikely, in Python anyway).

The way CoreFoundation does async socket I/O is to have a single  
network thread that posts events to the run loop thread.  In 10.2 and  
earlier it used select().  I am not sure if it is using kqueue or not  
in 10.3 (nor should I have to care).

-bob



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007686.html">[Twisted-Python] twisted on os x: cfreactor or kqreactor?
</A></li>
	<LI>Next message: <A HREF="007674.html">[Twisted-Python] no factory.disconnect used the docs!?! (btw thx	Itamar )
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7687">[ date ]</a>
              <a href="thread.html#7687">[ thread ]</a>
              <a href="subject.html#7687">[ subject ]</a>
              <a href="author.html#7687">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
