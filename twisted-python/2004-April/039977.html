<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Connection close identifier
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Connection%20close%20identifier&In-Reply-To=%3C40750323.5010403%40tv.debian.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="039976.html">
   <LINK REL="Next"  HREF="039978.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Connection close identifier</H1>
    <B>Tommi Virtanen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Connection%20close%20identifier&In-Reply-To=%3C40750323.5010403%40tv.debian.net%3E"
       TITLE="[Twisted-Python] Connection close identifier">tv at tv.debian.net
       </A><BR>
    <I>Thu Apr  8 01:45:39 MDT 2004</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="039976.html">[Twisted-Python] Connection close identifier
</A></li>
        <LI>Next message (by thread): <A HREF="039978.html">[Twisted-Python] Clarification for IReactorSSL.ListenSSL(...)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39977">[ date ]</a>
              <a href="thread.html#39977">[ thread ]</a>
              <a href="subject.html#39977">[ subject ]</a>
              <a href="author.html#39977">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Itamar Shtull-Trauring wrote:
&gt;<i> Seems like a bad idea to me (like, if TCP connection doesn't close
</I>&gt;<i> cleanly, do both sides think the other side closed? or what?). Better to
</I>&gt;<i> indicate this information on protocol level.
</I>
It _should_ be easy to tell broken TCP connections from properly shut
down ones, as broken TCP connections end in errors. In twisted, this
means ConnectionDone implies clean shutdown, anything else an error.

BUT, transparent proxies quite commonly break this, and make errors in
the proxied connection look like clean shutdowns in the original
connection. Userspace proxies don't have a choice, even.

Another case where this breaks is server applications that exit
suddenly. File descriptors are cleanly closed at process exit.

All in all, I agree with Itamar, but with some reservations you can
do that by using a flag in protocol and comparing against
ConnectionDone.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="039976.html">[Twisted-Python] Connection close identifier
</A></li>
	<LI>Next message (by thread): <A HREF="039978.html">[Twisted-Python] Clarification for IReactorSSL.ListenSSL(...)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39977">[ date ]</a>
              <a href="thread.html#39977">[ thread ]</a>
              <a href="subject.html#39977">[ subject ]</a>
              <a href="author.html#39977">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
