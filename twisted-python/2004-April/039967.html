<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] at what point does reactor.run() need to be	called?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20at%20what%20point%20does%20reactor.run%28%29%20need%20to%20be%0A%09called%3F&In-Reply-To=%3C3E922BBF-87D7-11D8-84F3-000A95686CD8%40redivi.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="039966.html">
   <LINK REL="Next"  HREF="039968.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] at what point does reactor.run() need to be	called?</H1>
    <B>Bob Ippolito</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20at%20what%20point%20does%20reactor.run%28%29%20need%20to%20be%0A%09called%3F&In-Reply-To=%3C3E922BBF-87D7-11D8-84F3-000A95686CD8%40redivi.com%3E"
       TITLE="[Twisted-Python] at what point does reactor.run() need to be	called?">bob at redivi.com
       </A><BR>
    <I>Tue Apr  6 08:32:34 MDT 2004</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="039966.html">[Twisted-Python] at what point does reactor.run() need to be	called?
</A></li>
        <LI>Next message (by thread): <A HREF="039968.html">[Twisted-Python] POP3 Client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39967">[ date ]</a>
              <a href="thread.html#39967">[ thread ]</a>
              <a href="subject.html#39967">[ subject ]</a>
              <a href="author.html#39967">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Apr 6, 2004, at 6:01 AM, Michal Pasternak wrote:

&gt;<i> Damon Fasching [Mon, Apr 05, 2004 at 11:39:57PM -0700]:
</I>&gt;&gt;<i> The following two modules work fine together.
</I>&gt;<i>
</I>&gt;<i> reactor.run() enters an event-controlled loop (it's the same as 
</I>&gt;<i> &quot;mainloop&quot;
</I>&gt;<i> in GUI toolkits you could program in), so you should call it after you 
</I>&gt;<i> do
</I>&gt;<i> all initialization stuff.
</I>&gt;<i>
</I>&gt;&gt;<i> However, if the call to reactor.run() is moved any
</I>&gt;&gt;<i> higher in client.py, the client seems to hang.  For
</I>&gt;<i>
</I>&gt;<i> It doesn't hang, it just gets the root object, but has no callback to 
</I>&gt;<i> pass
</I>&gt;<i> it to.
</I>&gt;<i>
</I>&gt;<i> If it hangs (locks-up hard), it's a bug, examine &amp; report it.
</I>
I wouldn't say that &quot;locks-up hard&quot; in this particular scenario (the 
reactor isn't supposed to be doing anything) is always a bug -- at 
least in the case of an alternative reactor implementation.  If you 
send a signal (such as SIGINT or ctrl-C) to the program, and Python 
swallows it (as it normally would), the not-written-in-Python event 
loop won't know that it would be a good idea to run some Python code, 
so it will never quit.  If you really want to guarantee that your 
program is indeed interruptible you should add a little &quot;waker&quot; that 
runs Python code (even if it's little more than &quot;pass&quot;) every few 
seconds via callLater.

This was an issue until very recently with cfreactor.  However, I have 
written a new signal handler (in PyObjC CVS) that is installed by 
default (when you use AppHelper.run[Console]EventLoop) that uses a mach 
port to wake the not-written-in-Python event loop and runs some Python 
code immediately.  So it's no longer a problem when you are using 
PyObjC to start your event loop in the recommended way, or you install 
the mach port signal handler manually (it registers to the 
CoreFoundation runLoop, which cfreactor uses if you do not specify one 
to reactor.run or you do not have an NSApplication instance created).

-bob



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="039966.html">[Twisted-Python] at what point does reactor.run() need to be	called?
</A></li>
	<LI>Next message (by thread): <A HREF="039968.html">[Twisted-Python] POP3 Client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39967">[ date ]</a>
              <a href="thread.html#39967">[ thread ]</a>
              <a href="subject.html#39967">[ subject ]</a>
              <a href="author.html#39967">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
