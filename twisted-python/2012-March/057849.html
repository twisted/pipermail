<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] unhandled error in example pb_client.py
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20unhandled%20error%20in%20example%20pb_client.py&In-Reply-To=%3C9BB00141-5B35-4D25-B802-A780E493DAA4%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="057847.html">
   <LINK REL="Next"  HREF="057853.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] unhandled error in example pb_client.py</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20unhandled%20error%20in%20example%20pb_client.py&In-Reply-To=%3C9BB00141-5B35-4D25-B802-A780E493DAA4%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] unhandled error in example pb_client.py">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon Mar 19 15:26:12 MDT 2012</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="057847.html">[Twisted-Python] unhandled error in example pb_client.py
</A></li>
        <LI>Next message (by thread): <A HREF="057853.html">[Twisted-Python] questions about twisted usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57849">[ date ]</a>
              <a href="thread.html#57849">[ thread ]</a>
              <a href="subject.html#57849">[ subject ]</a>
              <a href="author.html#57849">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Mar 19, 2012, at 3:30 AM, Wolfgang Rohdewald wrote:

&gt;<i> this is twisted 11.0.0 on kubuntu 11.10
</I>&gt;<i> 
</I>&gt;<i> if I call
</I>&gt;<i> 
</I>&gt;<i> cd /usr/share/doc/python-twisted-words/examples/pb_client.py
</I>&gt;<i> python pb_client.py fdfdasfdfdas.com 1000 a b c
</I>&gt;<i> 
</I>&gt;<i> I am getting an unhandled error. Same for servers not answering
</I>&gt;<i> or rejecting.
</I>&gt;<i> 
</I>&gt;<i> how would I have to modify pb_client if I want to catch and
</I>&gt;<i> handle all errors?
</I>
&quot;all&quot; errors is a pretty broad category, so you'd have to do a whole bunch of things :).

The type of errors you're talking about are client connection errors.  The quickest way to catch those is to make your own subclass of PBClientFactory and implement clientConnectionFailed, which will be called each time there is an error in initially setting up a connection.

&gt;<i> my real-world problem is more complicated: In case of error I
</I>&gt;<i> show a modal Qt4 message box. This gives me interactions between
</I>&gt;<i> twisted and qt4reactor leading to infinite recursion. I can fix that
</I>&gt;<i> for DNS lookup failure and not answering servers by temporarily
</I>&gt;<i> disabling qt4reactor, but for rejecting servers I cannot get rid
</I>&gt;<i> of the unhandled error. But before tackling that, I want to 
</I>&gt;<i> understand how I can really catch and handle all errors.
</I>
That sounds like a bug in QT, a bug in QT4reactor, or perhaps just the general problem that modal dialog boxes with a blocking API are an inherently bad idea.  Without more detail though it's impossible to say what your problem really is.  My guess, though, would be to find a modal-dialog-box API that doesn't block or enter a reentrant main loop.

&gt;<i> when that works I will have one more problem: I my case
</I>&gt;<i> I have
</I>&gt;<i> class myClient(pb.PBClientFactory):
</I>&gt;<i>    def clientConnectionFailed(self, connector, reason):
</I>&gt;<i>        &quot;&quot;&quot;connection from client to server failed&quot;&quot;&quot;
</I>&gt;<i>        print 'getErrorMessage:', repr(reason.getErrorMessage())
</I>&gt;<i> 
</I>&gt;<i> which gives me
</I>&gt;<i> &quot;DNS lookup failed: address u'fdksfsfa0s0f.com' not found: [Errno -5] Zu 
</I>&gt;<i> diesem Hostnamen geh\xc3\xb6rt keine Adresse.&quot;
</I>&gt;<i> 
</I>&gt;<i> so it is translated to German. But pb_client.py returns english messages
</I>&gt;<i> if I insert and use myClient. $LANG is the same for both: de_DE.UTF-8
</I>&gt;<i> so why does pb_client not translate the message?
</I>
Because &quot;DNS lookup failed&quot; and &quot;address %r not found&quot; are strings from Twisted, not from your operating system.  Twisted does not have any localizations, unfortunately.  Localizing all its error messages would be a major project, and a challenging one, as class names appear quite frequently in such messages and their names (such as &quot;Failure&quot;) are all in english.

If you were interested in starting to localize Twisted though, I would definitely be interested to hear your thoughts on how it might be done.

-glyph

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="057847.html">[Twisted-Python] unhandled error in example pb_client.py
</A></li>
	<LI>Next message (by thread): <A HREF="057853.html">[Twisted-Python] questions about twisted usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57849">[ date ]</a>
              <a href="thread.html#57849">[ thread ]</a>
              <a href="subject.html#57849">[ subject ]</a>
              <a href="author.html#57849">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
