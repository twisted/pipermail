<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] the good, the log, and the ugly
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20the%20good%2C%20the%20log%2C%20and%20the%20ugly&In-Reply-To=20120326143830.3561.285840820.divmod.xquotient.9%40localhost6.localdomain6">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025428.html">
   <LINK REL="Next"  HREF="025445.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] the good, the log, and the ugly</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20the%20good%2C%20the%20log%2C%20and%20the%20ugly&In-Reply-To=20120326143830.3561.285840820.divmod.xquotient.9%40localhost6.localdomain6"
       TITLE="[Twisted-Python] the good, the log, and the ugly">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon Mar 26 16:02:34 EDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="025428.html">[Twisted-Python] the good, the log, and the ugly
</A></li>
        <LI>Next message: <A HREF="025445.html">[Twisted-Python] the good, the log, and the ugly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25429">[ date ]</a>
              <a href="thread.html#25429">[ thread ]</a>
              <a href="subject.html#25429">[ subject ]</a>
              <a href="author.html#25429">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Mar 26, 2012, at 10:38 AM, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A> wrote:

&gt;<i> I agree with just about everything here, except I think we should be 
</I>&gt;<i> able to do better than the `format=&quot;opaque string&quot;&#180; part.
</I>
In principle I agree, but I'm not sure about how to do that _exactly now_.  Whereas today, immediately, all log messages could be written in the style I suggested and it would be a big improvement.

&gt;<i> Logging in the style you outlined here preserves the structure of the 
</I>&gt;<i> information, but it omits any consistent way to identify what the 
</I>&gt;<i> structure is.  It seems to leave only two possibilities:
</I>&gt;<i> 
</I>&gt;<i>  - Compare the format string to certain well-known format strings and 
</I>&gt;<i> use a match (if found) to make decisions based on a priori knowledge 
</I>&gt;<i> about the additional items in the log event.
</I>
Previous (limited) experience with internationalization efforts lead me to believe that looking at well-known format strings to determine meaning is the state of the art.

&gt;<i>  - Compare the set of keys in the log event to certain well-known sets 
</I>&gt;<i> and use a match there to make the same kind of decision.
</I>&gt;<i> 
</I>&gt;<i> Neither of these sounds like a good thing.
</I>
Still, a pretty substantial improvement over running a regex over a string in a quasi-structured log file after the fact (IMHO).

&gt;<i> Divmod experimented with marking log events with interfaces that 
</I>&gt;<i> documented the structure and semantics of the log event carrying them. 
</I>&gt;<i> This didn't get very far, and perhaps had problems of its own, but even 
</I>&gt;<i> it seemed preferable to either of the above options.
</I>
What I'd really like to do is to have some kind of log object built up like this:

logger = Logger(module=__name__)


class DebugFoo(logger.message()):
   &quot;&quot;&quot;wouldn't it be great if such messages were explained in detail&quot;&quot;&quot;
   audience=developers; importance=medium; format=&quot;foo %(foo)d happened&quot;;
   logID=UUID('7dc1c45b-4eb7-4a3f-b751-ee6b500f11ce')
   anythingElseInteresting=&quot;otherstuff&quot;

def onFoo(someFoo):
    DebugFoo.emit(foo=7)

and while this isn't hard to implement, it's also not implemented already, but the format= stuff is.  So my suggestion was not intended to say we should stop here, but rather, while we're figuring out better stuff to do, nobody should ever write a 'log.msg(&quot;some static &quot; + thing)' again :).

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20120326/744b724a/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20120326/744b724a/attachment.htm</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025428.html">[Twisted-Python] the good, the log, and the ugly
</A></li>
	<LI>Next message: <A HREF="025445.html">[Twisted-Python] the good, the log, and the ugly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25429">[ date ]</a>
              <a href="thread.html#25429">[ thread ]</a>
              <a href="subject.html#25429">[ subject ]</a>
              <a href="author.html#25429">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
