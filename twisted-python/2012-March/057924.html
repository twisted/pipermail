<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] the good, the log, and the ugly
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20the%20good%2C%20the%20log%2C%20and%20the%20ugly&In-Reply-To=%3C326A6AC4-9E73-498D-B063-2D721F51FD05%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="057919.html">
   <LINK REL="Next"  HREF="057928.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] the good, the log, and the ugly</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20the%20good%2C%20the%20log%2C%20and%20the%20ugly&In-Reply-To=%3C326A6AC4-9E73-498D-B063-2D721F51FD05%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] the good, the log, and the ugly">glyph at twistedmatrix.com
       </A><BR>
    <I>Fri Mar 30 18:49:04 MDT 2012</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="057919.html">[Twisted-Python] the good, the log, and the ugly
</A></li>
        <LI>Next message (by thread): <A HREF="057928.html">[Twisted-Python] the good, the log, and the ugly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57924">[ date ]</a>
              <a href="thread.html#57924">[ thread ]</a>
              <a href="subject.html#57924">[ subject ]</a>
              <a href="author.html#57924">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Mar 30, 2012, at 3:23 PM, Brian Warner wrote:

&gt;<i> On 3/25/12 7:11 PM, Glyph wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> I'm going to try to get started on record my desired behavior for
</I>&gt;&gt;<i> logging as tickets soon though, so Twisted can at least have some really
</I>&gt;&gt;<i> good logging tools /eventually/.  
</I>&gt;<i> 
</I>&gt;<i> While you're thinking about this space, I'll plug the logging tools I
</I>&gt;<i> built into Foolscap (and applications that use it, like Tahoe). I'm sure
</I>&gt;<i> many others have built things like it, but some of the features that
</I>&gt;<i> I've found particularly useful in Tahoe development are:
</I>&gt;<i> 
</I>&gt;<i> * structured log messages, stored as dicts with non-serialized
</I>&gt;<i>   arguments
</I>&gt;<i> * &quot;umids&quot;: unique message identifiers, to find the call site
</I>&gt;<i> * size-limited per-(priority*section) circular event buffers
</I>&gt;<i> * parent/child event relationships, for event trees
</I>&gt;<i> * &quot;Incidents&quot;: when an UNUSUAL event is logged, a pickle of the event
</I>&gt;<i>   buffers is saved to disk, for later inspection, including events from
</I>&gt;<i>   post-trigger error-recovery code
</I>&gt;<i> * &quot;logport&quot;: Foolscap interface for subscribing to event streams
</I>&gt;<i> * &quot;flogtool tail&quot; to connect to remote app and watch the event stream
</I>&gt;<i> * web- or text- based event renderers, with expand/hide-subtree buttons
</I>&gt;<i> * &quot;incident gatherer&quot;: subscribes to Incident reports from multiple
</I>&gt;<i>   remote apps, classifies reports them according to cause
</I>&gt;<i> 
</I>&gt;<i> It's inspired by twisted.python.log, of course, and the log.msg()
</I>&gt;<i> interface should look pretty familiar. The Foolscap buy-in may be too
</I>&gt;<i> much for most apps, but it'd be interesting to find a subset that
</I>&gt;<i> doesn't require the networking parts. I tried to figure out how to make
</I>&gt;<i> it fit with Python's stdlib logging module, but eventually gave up (I
</I>&gt;<i> think the biggest issue was needing to return an event number from the
</I>&gt;<i> log.msg() call, for the parent/child stuff).
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://foolscap.lothar.com/docs/logging.html">http://foolscap.lothar.com/docs/logging.html</A> has details.
</I>
Indeed, Foolscap has informed many of my future wishes for Twisted logging, especially its incident reporting and logport features.  (I wasn't aware of UMIDs but I have independently invented the same thing.)

Could we perhaps get some of foolscap logging's core features into Twisted?  We could have an AMP interface for subscribing to log streams that would be slightly more low-fidelity (but, I would guess, higher-performance) than the Foolscap one, but work based on the same core mechanism which foolscap could then subscribe to.

I suspect that this would be useful to foolscap as well, because then the code that foolscap calls into (for example, the web stuff for its UIs) would be using the same logging convention.

-glyph

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="057919.html">[Twisted-Python] the good, the log, and the ugly
</A></li>
	<LI>Next message (by thread): <A HREF="057928.html">[Twisted-Python] the good, the log, and the ugly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57924">[ date ]</a>
              <a href="thread.html#57924">[ thread ]</a>
              <a href="subject.html#57924">[ subject ]</a>
              <a href="author.html#57924">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
