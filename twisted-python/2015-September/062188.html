<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Exception's Implicit Public API, and Python 3
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Exception%27s%20Implicit%20Public%20API%2C%20and%20Python%203&In-Reply-To=%3CA3DDDE89-DB63-4893-B214-1D98DE106406%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="029724.html">
   <LINK REL="Next"  HREF="062191.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Exception's Implicit Public API, and Python 3</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Exception%27s%20Implicit%20Public%20API%2C%20and%20Python%203&In-Reply-To=%3CA3DDDE89-DB63-4893-B214-1D98DE106406%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Exception's Implicit Public API, and Python 3">glyph at twistedmatrix.com
       </A><BR>
    <I>Sat Sep  5 21:07:06 MDT 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="029724.html">[Twisted-Python] Exception's Implicit Public API, and Python 3
</A></li>
        <LI>Next message (by thread): <A HREF="062191.html">[Twisted-Python] Exception's Implicit Public API, and Python 3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62188">[ date ]</a>
              <a href="thread.html#62188">[ thread ]</a>
              <a href="subject.html#62188">[ subject ]</a>
              <a href="author.html#62188">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On Sep 5, 2015, at 04:03, Amber Hawkie Brown &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">hawkowl at atleastfornow.net</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">hawkowl at atleastfornow.net</A>&gt;&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> We just ran into an issue in Autobahn|Python where a log message that tried to use the message attribute an Exception subclass (twisted.internet.error.ProcessTerminated). The message attribute was deprecated in Python 2.6, and removed in Python 3 -- but it still &quot;works&quot; in Python 2.7.
</I>&gt;<i> 
</I>&gt;<i> So, this needs the question: Is this breaking Twisted's backwards compat (that .message isn't there on Python 3)? Should we go through and look at our exception subclasses, and look at what makes sense to have a .message attribute (for example, I'd say it makes sense on ProcessTerminated) and then add it? Or is it just a 2/3 change that should be expected during porting? It seems like an interesting edge case (and another example of &quot;Don't use subclassing, kids&quot; ;) ).
</I>
It's Python's API which has changed here, so I don't think that it's Twisted's responsibility to replicate this behavior.  Subclassing is bad, and Python's changes of public attributes to such a core language-feature level class as Exception is extra bad, but I think that attempting to simultaneously support every version of Python's public API via Twisted would be a mistake.

For a different example, consider the case of the implicit base of &quot;object&quot;.  We could faithfully replicate the semantics of old-style classes for all of Twisted's old-style classes, but instead, they remain old-style on py2 (for now) and new-style on py3.  The &quot;message&quot; attribute seems the same to me, so I think we should say this is a 2/3 change you have to make when porting your own code, and the onus is on Autobahn in this case.

Put differently, Twisted's &quot;the first one's free&quot; policy applies to upgrading Twisted itself, and not to upgrading Python (or any other dependency).  If you upgrade Python and you need to update your code for that, Twisted won't create any additional problems but it won't go out of its way to solve the ones you normally have to deal with.

Sound good?

-glyph

&gt;<i> The Autobahn ticket (which we're fixing as I write this email) is here <A HREF="https://github.com/tavendo/AutobahnPython/issues/479">https://github.com/tavendo/AutobahnPython/issues/479</A> &lt;<A HREF="https://github.com/tavendo/AutobahnPython/issues/479">https://github.com/tavendo/AutobahnPython/issues/479</A>&gt; .
</I>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20150905/31c853da/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="029724.html">[Twisted-Python] Exception's Implicit Public API, and Python 3
</A></li>
	<LI>Next message (by thread): <A HREF="062191.html">[Twisted-Python] Exception's Implicit Public API, and Python 3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62188">[ date ]</a>
              <a href="thread.html#62188">[ thread ]</a>
              <a href="subject.html#62188">[ subject ]</a>
              <a href="author.html#62188">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
