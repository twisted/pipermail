<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Memory size of Deferreds
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Memory%20size%20of%20Deferreds&In-Reply-To=%3C10c877d90805191218x5bbf062bk3d08167ce0946a04%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="050232.html">
   <LINK REL="Next"  HREF="050234.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Memory size of Deferreds</H1>
    <B>Michal Pasternak</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Memory%20size%20of%20Deferreds&In-Reply-To=%3C10c877d90805191218x5bbf062bk3d08167ce0946a04%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Memory size of Deferreds">michal.dtz at gmail.com
       </A><BR>
    <I>Mon May 19 13:18:14 MDT 2008</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="050232.html">[Twisted-Python] Memory size of Deferreds
</A></li>
        <LI>Next message (by thread): <A HREF="050234.html">[Twisted-Python] Re: Memory size of Deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50233">[ date ]</a>
              <a href="thread.html#50233">[ thread ]</a>
              <a href="subject.html#50233">[ subject ]</a>
              <a href="author.html#50233">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2008/5/19 Martin Geisler &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mg at daimi.au.dk</A>&gt;:
&gt;<i> What worries me is the size of a single Deferred. One user wanted to
</I>&gt;<i> do computations on very large lists of Deferreds and reported that his
</I>&gt;<i> programs used more memory than expected.
</I>&gt;<i>
</I>&gt;<i> I tried to measure the size of a Deferred by creating large lists of
</I>&gt;<i> them and found that a single empty Deferred takes up about 200 bytes.
</I>&gt;<i> Adding a callback brings that up to about 500 bytes.
</I>
As such thing as memory allocation is tightly tied to the runtime
environment, it is a bit hard to give reasonable answers without any
information about, at least, an OS and a CPU.

Did the memory in the case you mention grow constantly? Is that user
sure, that it was not a memory leak in his/hers code?

Deferreds, as you all already know, are a core concept that Twisted is
built upon. If you need to optimize such areas of Twisted, then, just
my suggestion - maybe you are using a wrong tool to do the job. If the
memory usage is a problem, then, well, maybe you are trying to do
things at once, when you should do them sequentially (eg. using a
generator). Maybe you should rather look into other areas of the
problem (eg. not try to optimize deferreds, but the code that uses
them). Maybe you should use something else than Deferreds for that
job. As for memory usage of such small objects like Deferreds, well...
Python is, well, Python. Python string or integer uses much more
memory, than C string or int. You can't tune Python string memory
usage, and you hardly can do anything about size of Deferred if that
becomes a problem. On the other hand, you should be able to write
optimal code with Python faster and memory footprint shouldn't be a
problem (from my experience, in many cases Twisted footprint is
suprisingly low).

In other words - if size of Deferred object is your only bottleneck,
then congratulations :-) I'd rather suggest optimizing other parts of
the code - as Deferreds are the core of Twisted, I suppose it could be
a bit hard to do anything about them, in the same way you can't do
anything about memory footprint of core Python objects.

Regards,
-- 
m


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="050232.html">[Twisted-Python] Memory size of Deferreds
</A></li>
	<LI>Next message (by thread): <A HREF="050234.html">[Twisted-Python] Re: Memory size of Deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50233">[ date ]</a>
              <a href="thread.html#50233">[ thread ]</a>
              <a href="subject.html#50233">[ subject ]</a>
              <a href="author.html#50233">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
