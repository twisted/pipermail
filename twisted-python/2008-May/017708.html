<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] exceptions.SystemError: unknown opcode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20exceptions.SystemError%3A%20unknown%20opcode&In-Reply-To=394cf6840805140839h2af01f80madfc49c558219165%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017707.html">
   <LINK REL="Next"  HREF="017709.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] exceptions.SystemError: unknown opcode</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20exceptions.SystemError%3A%20unknown%20opcode&In-Reply-To=394cf6840805140839h2af01f80madfc49c558219165%40mail.gmail.com"
       TITLE="[Twisted-Python] exceptions.SystemError: unknown opcode">exarkun at divmod.com
       </A><BR>
    <I>Wed May 14 12:01:27 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017707.html">[Twisted-Python] exceptions.SystemError: unknown opcode
</A></li>
        <LI>Next message: <A HREF="017709.html">[Twisted-Python] how to handle game messaging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17708">[ date ]</a>
              <a href="thread.html#17708">[ thread ]</a>
              <a href="subject.html#17708">[ subject ]</a>
              <a href="author.html#17708">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 14 May 2008 12:39:11 -0300, Miguel Filho &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">miguel.filho at gmail.com</A>&gt; wrote:
&gt;<i>On Wed, May 14, 2008 at 11:39 AM, David Ripton &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">dripton at ripton.net</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This means that Python found an illegal virtual machine instruction.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> You can cause this by running or importing a .pyc file from a different
</I>&gt;&gt;<i> version of Python, without having a matching .py file to fall back on.
</I>&gt;<i>
</I>&gt;<i>Hmm, that stills look strange, because I didn't change anything.
</I>&gt;<i>
</I>
Encountering this after the process has been running for a long time
suggests a memory corruption issue to me.  The fact that it happened
only once while the process is still running and correctly servicing
events further suggests that the corruption was somehow transient, a
somewhat unusual occurance to say the least. :)

Before the SystemError was raised, the process probably wrote a tiny
amount of debug information to stderr.  Is there any chance that got
logged somewhere useful?  In the normal deamonization mode of twistd
it probably would have been discarded since as part of daemonization
stdin, stdout, and stderr are all closed.  The information is barely
useful, though, so it isn't a huge loss, but at least it would point
out which code object had the bad opcode.  The traceback suggests it
was twisted.internet.selectreactor.SelectReactor.doSelect (at least,
if you're using select reactor).  You could attach gdb and check the
the opcodes in the code object for that function, but I imagine they
are correct now, since the process is still running.

So, I have no idea what happened, but it sounds interesting. :)

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017707.html">[Twisted-Python] exceptions.SystemError: unknown opcode
</A></li>
	<LI>Next message: <A HREF="017709.html">[Twisted-Python] how to handle game messaging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17708">[ date ]</a>
              <a href="thread.html#17708">[ thread ]</a>
              <a href="subject.html#17708">[ subject ]</a>
              <a href="author.html#17708">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
