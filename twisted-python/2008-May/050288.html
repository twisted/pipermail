<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] interaction problems with wxreactor and conch	under linux
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20interaction%20problems%20with%20wxreactor%20and%20conch%0A%09under%20linux&In-Reply-To=%3C831dbdd20805271145u646e8d20w47c5e9698f5f3e9a%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="050284.html">
   <LINK REL="Next"  HREF="050289.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] interaction problems with wxreactor and conch	under linux</H1>
    <B>Mark Dillavou</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20interaction%20problems%20with%20wxreactor%20and%20conch%0A%09under%20linux&In-Reply-To=%3C831dbdd20805271145u646e8d20w47c5e9698f5f3e9a%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] interaction problems with wxreactor and conch	under linux">mlists at line72.net
       </A><BR>
    <I>Tue May 27 12:45:26 MDT 2008</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="050284.html">[Twisted-Python] Creating a protocol-agnostic chatbot with	Twisted words
</A></li>
        <LI>Next message (by thread): <A HREF="050289.html">[Twisted-Python] interaction problems with wxreactor and conch	under linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50288">[ date ]</a>
              <a href="thread.html#50288">[ thread ]</a>
              <a href="subject.html#50288">[ subject ]</a>
              <a href="author.html#50288">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a large program that is built using wxpython and twisted in which the
client sends commands through ssh (using conch) to the server.  Under linux
I have found some very strange results. If the user is not doing anything
(i.e. not moving the mouse or doing anything to cause the window to redraw),
then conch seems to stop processing and hang the whole twisted loop.  As
soon as the user moves the mouse, clicks a button, or does something to
cause the window to refresh, then conch immediately starts processing again
and the twisted loop begins calling callbacks again.

I can't seem to reproduce this under windows or osx, and it doesn't seem to
always happen under linux with wxgtk2. I have written a dumb little test
program (attached), that hopefully shows this behavior.  After connecting to
a remote machine, through the gui you can specify a command, hit run command
and the stdout will be displayed.

The console prints out the time from two timers.  One is setup using a
reactor.callLater and another is setup using a wx.Timer.  If a command that
takes a while is run (cat a large file) and you don't move the mouse or do
anything to cause the window to refresh, then you will see that the
callLater callback stops being called (although the wx.Timer callback
continues to be called).  As soon as you move the mouse, the callLater
callback begins firing again, and you'll eventually see the output of your
command.

This is really frustrating since we are using conch to send large commands
or to download/upload large files, and it is common for the user to want to
minimize the program and let it run in the background, but with this bug,
twisted stops responding and the file stops sending until the user does
something to cause the window to redraw.

I'm not that familiar with conch, so maybe i'm doing something completely
wrong in my connection code.  Any critique on it would be nice.

Thank you in advance,
/Mark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20080527/35a82bd5/attachment.html&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: conch_wx.py
Type: text/x-python
Size: 7410 bytes
Desc: not available
URL: &lt;/pipermail/twisted-python/attachments/20080527/35a82bd5/attachment-0002.py&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="050284.html">[Twisted-Python] Creating a protocol-agnostic chatbot with	Twisted words
</A></li>
	<LI>Next message (by thread): <A HREF="050289.html">[Twisted-Python] interaction problems with wxreactor and conch	under linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50288">[ date ]</a>
              <a href="thread.html#50288">[ thread ]</a>
              <a href="subject.html#50288">[ subject ]</a>
              <a href="author.html#50288">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
