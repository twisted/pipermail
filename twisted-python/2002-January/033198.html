<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] IRC protocol rewrite?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20IRC%20protocol%20rewrite%3F&In-Reply-To=%3C1010010731.1908.21.camel%40zelda%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="033195.html">
   <LINK REL="Next"  HREF="033201.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] IRC protocol rewrite?</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20IRC%20protocol%20rewrite%3F&In-Reply-To=%3C1010010731.1908.21.camel%40zelda%3E"
       TITLE="[Twisted-Python] IRC protocol rewrite?">glyph at twistedmatrix.com
       </A><BR>
    <I>Wed Jan  2 15:32:11 MST 2002</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="033195.html">[Twisted-Python] IRC protocol rewrite?
</A></li>
        <LI>Next message (by thread): <A HREF="033201.html">[Twisted-Python] IRC protocol rewrite?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33198">[ date ]</a>
              <a href="thread.html#33198">[ thread ]</a>
              <a href="subject.html#33198">[ subject ]</a>
              <a href="author.html#33198">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 2002-01-02 at 11:46, Ivo van der Wijk wrote:
&gt;<i> Hi All,
</I>&gt;<i> 
</I>&gt;<i> I'm currently investigating the IRC Protocol as implemented by twisted,
</I>&gt;<i> to see if I perhaps can use it in my irc client, or if it perhaps can
</I>&gt;<i> use code from my irc protocol parsing.
</I>&gt;<i> 
</I>&gt;<i> However, I noticed some bugs and (imho) design failures in the current
</I>&gt;<i> implementation, which makes the code not very usefull for any other 
</I>&gt;<i> use than what it's currently used for (twisted irc client + server?)
</I>&gt;<i> 
</I>&gt;<i> For example, channels are hardcoded as starting with '#', i.e.
</I>&gt;<i> IRCClient.join prepends a '#' to the channelname. Hoewever, most servers
</I>&gt;<i> support alernative style channels such as &amp;channel (local channels),
</I>&gt;<i> +channel (modeless channels), and perhaps more.
</I>
This is an intentional design failure :).

The feature-set of IRC is highly idiosyncratic, and difficult to
represent in terms of &quot;real&quot; abstractions -- for example, the notion of
a &quot;modeless&quot; channel doesn't particularly make sense outside of the
world of IRC's implementation; there are no gradations between &quot;modeful&quot;
and &quot;modeless&quot; channels, unless you have a Services implementation w/
ChanServ and mode lock.  &quot;local&quot; channels don't either, considering that
they are really just a way to introduce an artificial barrier between
servers.  The whole point of the R in IRC is to avoid that :)

I have to agree that for the client, it's probably a bad idea to enforce
restrictions like that, since it's designed to connect to other IRC
servers, and be generally useful to connect to external services which
may be set up in bizarre configurations.

On the server, however, I would like to drop support for as many IRCisms
as reasonably possible, so that we can implement a richer set of
functionality; probably through the &quot;services&quot; idiom, since that allows
for fairly arbitrary specification of inputs (as opposed to the limited
set of client-understood modes that one may specify, and the 26
allowable characters).

&gt;<i> Furthermore, IMHO, the IRCClient class implements too many protocols
</I>&gt;<i> in one class. IRC, CTCP and DCC are distinct protocols, and each belong
</I>&gt;<i> in their own class.
</I>
I disagree.  IRC is a poorly specified protocol in its RFC, so the
&quot;usual&quot; extensions are a part of any reasonable IRC implementation these
days.  Unless you can come up with a requirement for functionality that
would require them being in different classes, I think they should stay
where they are.

&gt;<i> Lastly, the current parsemsg routine can't handle ipv6 addresses in certain 
</I>&gt;<i> replies, i.e. a 311 (whois) reply like:
</I>&gt;<i> 
</I>&gt;<i> :irc.xs4all.nl 311 VladDrac [p] -patrick 3ffe:2500:900:2000:1337:1337:1337:1337 *:foo
</I>&gt;<i> 
</I>&gt;<i> will be parsed incorrectly. I may provide a patch for this later.
</I>
Whoops.  That definitely sounds like it needs to be fixed :)

&gt;<i> Is replacing the current IRC protocol with a (non-api-compatible) new
</I>&gt;<i> protocol discussable? If so, I'll make some suggestions on how I would
</I>&gt;<i> implement the protocol.
</I>
Certainly discussable, especially since the IRC support is not as good
as it could be.  If you replace it with something non-API-compatible,
I'd like to hear from the authors of code that this would break, and
certainly refactor any code currently in Twisted to work the new way.

-- 
______      you are in a maze of twisted little applications, all
|<i>   |_\     remarkably consistent.
</I>|<i>     |          -- glyph lefkowitz, glyph @ twisted matrix . com
</I>|<i>_____|             <A HREF="http://www.twistedmatrix.com/">http://www.twistedmatrix.com/</A>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="033195.html">[Twisted-Python] IRC protocol rewrite?
</A></li>
	<LI>Next message (by thread): <A HREF="033201.html">[Twisted-Python] IRC protocol rewrite?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33198">[ date ]</a>
              <a href="thread.html#33198">[ thread ]</a>
              <a href="subject.html#33198">[ subject ]</a>
              <a href="author.html#33198">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
