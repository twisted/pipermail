<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] IRC protocol rewrite?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20IRC%20protocol%20rewrite%3F&In-Reply-To=%3C20020103143435.E29692%40amaze.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="033204.html">
   <LINK REL="Next"  HREF="033197.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] IRC protocol rewrite?</H1>
    <B>Ivo van der Wijk</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20IRC%20protocol%20rewrite%3F&In-Reply-To=%3C20020103143435.E29692%40amaze.nl%3E"
       TITLE="[Twisted-Python] IRC protocol rewrite?">ivo at amaze.nl
       </A><BR>
    <I>Thu Jan  3 06:34:35 MST 2002</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="033204.html">[Twisted-Python] IRC protocol rewrite?
</A></li>
        <LI>Next message (by thread): <A HREF="033197.html">[Twisted-Python] Bug in t.w.w.WidgetPage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33205">[ date ]</a>
              <a href="thread.html#33205">[ thread ]</a>
              <a href="subject.html#33205">[ subject ]</a>
              <a href="author.html#33205">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Jan 02, 2002 at 04:11:34PM -0800, Kevin Turner wrote:
&gt;<i> On Wed, 2002-01-02 at 15:18, Ivo van der Wijk wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; it takes actions/decisions the client builder
</I>&gt;<i> &gt; would rather like to implement (i.e. irc_ERR_NICKNAMEINUSE will generate
</I>&gt;<i> &gt; a new nickname by appending a _ - who says I want this in my client?),
</I>&gt;<i> &gt; ctcp_PING immediately sends a ping reply - this won't work with my
</I>&gt;<i> &gt; ignore list, etc.
</I>&gt;<i> 
</I>&gt;<i> Ah, this is the information I was looking for.  (The bit about
</I>&gt;<i> supporting &amp; channels is a minor detail, worth fixing but not  grounds
</I>&gt;<i> for reimplementation.)  In reply, let me just say that subclassing is a
</I>&gt;<i> wonderful and powerful thing.  You are invited, encouraged even, to
</I>&gt;<i> override any methods which don't do what you want in your subclass. 
</I>&gt;<i> Default implementations are provided in the base class for things like
</I>&gt;<i> irc_ERR_NICKNAMEINUSE because every IRC client needs to have *some*
</I>&gt;<i> implementation of them, or else it will likely be so broken that it
</I>&gt;<i> won't be able to sign on.  But again, don't hesitate to override the
</I>&gt;<i> default methods with something else.  This class uses the
</I>&gt;<i> &quot;&quot;&quot;getattr(self, &quot;prefix_%s&quot; % command)()&quot;&quot;&quot; idiom, so you can always
</I>&gt;<i> add methods for more IRC or CTCP message types (i.e. Zircon extensions)
</I>&gt;<i> in your subclass too.
</I>&gt;<i> 
</I>
Well, sure, I can override anything. But in this specific case I'd have
to override so much (and stick with redundant unused code), that I'd rather
re-implement things.

Proposal: I will implement the protocol the way I see it for my irc client,
somewhat based on the current code / the twisted philosophy (my client
needs a rewrite in that area anyway), and if others think my code is 
leaner/better/whatever than the current, we may consider replacing the
current irc protocol with it.

&gt;<i> &gt; There's is quite some DCC support in the IRCClient class that I have here
</I>&gt;<i> &gt; (twisted 0.12.3), i.e. ctcpQuery_DCC which initiates DCC, maintains a list
</I>&gt;<i> &gt; of sessions, etc
</I>&gt;<i> 
</I>&gt;<i> That's because it's a CTCP query which initiates the DCC connection. 
</I>&gt;<i> The DCC connection itself (as opposed to things talking about DCC
</I>&gt;<i> connections) has its own class and instance.
</I>&gt;<i> 
</I>
IMHO, this would be like an IP layer building (and maintaining) TCP sessions. 
&gt;<i>From the purists point of view, if I want the basic irc protocol (i.e. for 
</I>some web messaging interface), I would have the redundant ctcp, dcc etc code 
as well. Sure, having it lingering and not using it around won't break 
anything, but the nice thing about OO is that you can encapsulate specific 
functionality into objects, extend them with extra (higher-level) features, 
etc.

&gt;<i> As for maintaining a list of sessions, I think that this does belong in
</I>&gt;<i> a &quot;client&quot; implementation, but I agree that this is not state that a
</I>&gt;<i> &quot;protocol&quot; class should be concerned with.  It's only there because I
</I>&gt;<i> couldn't see another way for a subclass to figure out which DCC sessions
</I>&gt;<i> were created, which is something you probably want to know for your
</I>&gt;<i> interface.  Perhaps the default ctcpQuery_DCC method should pass back
</I>&gt;<i> the DCC session as its return value?
</I>
That would be better, yes.

Cheers,

	Ivo

-- 
Drs. I.R. van der Wijk                              -=-
Brouwersgracht 132                      Amaze Internet Services V.O.F.
1013 HA Amsterdam, NL                               -=-
Tel: +31-20-4688336                       Linux/Web/Zope/SQL/MMBase
Fax: +31-20-4688337                           Network Solutions
Web:     <A HREF="http://www.amaze.nl/">http://www.amaze.nl/</A>                    Consultancy
Email:   <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">ivo at amaze.nl</A>                               -=-


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="033204.html">[Twisted-Python] IRC protocol rewrite?
</A></li>
	<LI>Next message (by thread): <A HREF="033197.html">[Twisted-Python] Bug in t.w.w.WidgetPage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33205">[ date ]</a>
              <a href="thread.html#33205">[ thread ]</a>
              <a href="subject.html#33205">[ subject ]</a>
              <a href="author.html#33205">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
