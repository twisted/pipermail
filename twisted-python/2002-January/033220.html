<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Experiences with twisted.spread: representing an ACL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Experiences%20with%20twisted.spread%3A%20representing%20an%20ACL&In-Reply-To=%3C20020115051319.37386.qmail%40web10002.mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="033218.html">
   <LINK REL="Next"  HREF="033222.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Experiences with twisted.spread: representing an ACL</H1>
    <B>Cory Dodt</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Experiences%20with%20twisted.spread%3A%20representing%20an%20ACL&In-Reply-To=%3C20020115051319.37386.qmail%40web10002.mail.yahoo.com%3E"
       TITLE="[Twisted-Python] Experiences with twisted.spread: representing an ACL">corydodt at yahoo.com
       </A><BR>
    <I>Mon Jan 14 22:13:19 MST 2002</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="033218.html">[Twisted-Python] web widgets
</A></li>
        <LI>Next message (by thread): <A HREF="033222.html">[Twisted-Python] Experiences with twisted.spread: representing	an ACL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33220">[ date ]</a>
              <a href="thread.html#33220">[ thread ]</a>
              <a href="subject.html#33220">[ subject ]</a>
              <a href="author.html#33220">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am working on a networked backup server which is so new it doesn't even
have a project page up on SF yet, although it might by the end of the
week.  To build this I am using spread and passport instead of building my
own protocol.    I'm having trouble with some of the concepts in spread,
and at this point I'm still too naive to know whether I'm missing the
point of something or whether passport is actually missing something I
need.

I want to implement access control lists.  For each Identity, I want to
assign a simple list of strings which more or less represent the ability
to access a Perspective.  For example:

useracl=[ &quot;store_files&quot;,
        &quot;read_files&quot;,
        &quot;encrypt&quot;,
        &quot;create_lbu&quot; ]

There is a StoreFilesService, a ReadFilesService, and a CreateLBUService,
and a Perspective for each.  The &quot;encrypt&quot; permission is a modifier to
Store and Read files, so I'm not sure how to implement that yet but I'll
cross that bridge when I come to it.

I have subclassed the Authorizer thus:

class Authorizer(passport.Authorizer):
    def addIdentity(self, identity):
        if self.identities.has_key(identity.name):
            raise passport.KeyError(&quot;Already have an identity by that
name.&quot;)
        self.identities[identity.name] = identity
        if identity.permissions == None:
            raise MissingPermissionsException(identity)
        # create all perspectives the user should have
        for permission in identity.acl:
            svc=servicelist.services[permission](permission, tap.the_app)
            svc.createPerspective(identity.name).setIdentity(identity)
           
identity.addKeyForPerspective(svc.getPerspectiveNamed(identity.name))

Does passport already has something like the ACL mechanism which allows
you to easily bind an ACL to a user?  Is my solution the most parsimonious
or do I really have to subclass the Authorizer to achieve this?  It seems
like I should be able to throw in a callback somewhere that creates the
eligible service/perspective pairs when a user is added to the system.

Second, if I modify a user's ACL, for example to grant a permission,
where's the callback to create a new s/p pair for that permission?  I have
a suspicion that this is already taken care of somewhere in passport and
I'm just missing the point.

That's all for now, thanks.  

C

__________________________________________________
Do You Yahoo!?
Send FREE video emails in Yahoo! Mail!
<A HREF="http://promo.yahoo.com/videomail/">http://promo.yahoo.com/videomail/</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="033218.html">[Twisted-Python] web widgets
</A></li>
	<LI>Next message (by thread): <A HREF="033222.html">[Twisted-Python] Experiences with twisted.spread: representing	an ACL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33220">[ date ]</a>
              <a href="thread.html#33220">[ thread ]</a>
              <a href="subject.html#33220">[ subject ]</a>
              <a href="author.html#33220">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
