<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] IRC protocol rewrite?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20IRC%20protocol%20rewrite%3F&In-Reply-To=20020102184642.A29692%40amaze.nl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000690.html">
   <LINK REL="Next"  HREF="000695.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] IRC protocol rewrite?</H1>
    <B>Kevin Turner</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20IRC%20protocol%20rewrite%3F&In-Reply-To=20020102184642.A29692%40amaze.nl"
       TITLE="[Twisted-Python] IRC protocol rewrite?">acapnotic at twistedmatrix.com
       </A><BR>
    <I>Wed Jan  2 17:38:00 EST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="000690.html">[Twisted-Python] IRC protocol rewrite?
</A></li>
        <LI>Next message: <A HREF="000695.html">[Twisted-Python] IRC protocol rewrite?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#693">[ date ]</a>
              <a href="thread.html#693">[ thread ]</a>
              <a href="subject.html#693">[ subject ]</a>
              <a href="author.html#693">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 2002-01-02 at 09:46, Ivo van der Wijk wrote:
&gt;<i> However, I noticed some bugs and (imho) design failures in the current
</I>&gt;<i> implementation, which makes the code not very usefull for any other 
</I>&gt;<i> use than what it's currently used for (twisted irc client + server?)
</I>
(And Tendril.  Don't forget Tendril, in twisted.words.tendril.)
I'm interested in hearing what makes it &quot;not very useful&quot; though.  I
didn't really get a sense of that from your message.

&gt;<i> For example, channels are hardcoded as starting with '#', i.e.
</I>&gt;<i> IRCClient.join prepends a '#' to the channelname. Hoewever, most servers
</I>&gt;<i> support alernative style channels such as &amp;channel (local channels),
</I>&gt;<i> +channel (modeless channels), and perhaps more.
</I>
Valid point.  Of course, nobody actually uses those in real life
anymore, but it'd be fine to support it in the interest of completeness.

&gt;<i> Furthermore, IMHO, the IRCClient class implements too many protocols
</I>&gt;<i> in one class. IRC, CTCP and DCC are distinct protocols, and each belong
</I>&gt;<i> in their own class.
</I>
There's some sense to this too.  As a Protocol class, IRCClient is
overfeatured (as a &quot;client&quot;, maybe it's okay).  I'm not quite sure how
to split off the CTCP stuff though, as intertwined as the CTCP messages
are with IRC.  Would you define IRCClient not only as a Protocol, but as
a Transport for CTCP?  Eaugh...  A somewhat more mundane option would be
to just put all the ctcp* methods in a mixin class.  That might make the
organization a little tidier, but it wouldn't change the interface at
all, so I'm not sure if that would satisfy your concerns or not.

As for DCC, it's in seperate protocol classes already.

&gt;<i> Lastly, the current parsemsg routine can't handle ipv6 addresses in certain 
</I>&gt;<i> replies, i.e. a 311 (whois) reply like:
</I>&gt;<i> 
</I>&gt;<i> :irc.xs4all.nl 311 VladDrac [p] -patrick 3ffe:2500:900:2000:1337:1337:1337:1337 *:foo
</I>&gt;<i> 
</I>&gt;<i> will be parsed incorrectly. I may provide a patch for this later.
</I>
Eh?  It's not immediately obvious to me what will break.  But patches
are always fine.  =)

&gt;<i> Is replacing the current IRC protocol with a (non-api-compatible) new
</I>&gt;<i> protocol discussable? If so, I'll make some suggestions on how I would
</I>&gt;<i> implement the protocol.
</I>
IMO, speaking as the guy who's probably spent the most time with it,
it's certainly discussable.  Unless there was some message I didn't read
from the BDFL about an API freeze. ;)  

&quot;Oh no, it's a trap!&quot;-ly,

 - Kevin (Acapnotic)

-- 
The moon is waning gibbous, 86.8% illuminated, 18.3 days old.




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000690.html">[Twisted-Python] IRC protocol rewrite?
</A></li>
	<LI>Next message: <A HREF="000695.html">[Twisted-Python] IRC protocol rewrite?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#693">[ date ]</a>
              <a href="thread.html#693">[ thread ]</a>
              <a href="subject.html#693">[ subject ]</a>
              <a href="author.html#693">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
