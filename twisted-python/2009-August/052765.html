<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twistd .tac + wxpython
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twistd%20.tac%20%2B%20wxpython&In-Reply-To=%3Cmailman.6.1574573435.12674.twisted-python%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="052772.html">
   <LINK REL="Next"  HREF="052766.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twistd .tac + wxpython</H1>
    <B>John Crawford</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twistd%20.tac%20%2B%20wxpython&In-Reply-To=%3Cmailman.6.1574573435.12674.twisted-python%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Twistd .tac + wxpython">cyclops at speakeasy.net
       </A><BR>
    <I>Thu Aug 20 11:55:20 MDT 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="052772.html">[Twisted-Python] Twistd .tac + wxpython
</A></li>
        <LI>Next message (by thread): <A HREF="052766.html">[Twisted-Python] Twistd .tac + wxpython
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52765">[ date ]</a>
              <a href="thread.html#52765">[ thread ]</a>
              <a href="subject.html#52765">[ subject ]</a>
              <a href="author.html#52765">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i>I have some services written that I'd like to run in a ta.c w/ twistd.
</I>&gt;<i>One of them uses wxpython. I originally used the wxreactor but it seams
</I>&gt;<i>to have some problems on Mac OS X and Windows, so with help from some
</I>&gt;<i>people on this list I ended up using the wx mainloop as the mainloop and
</I>&gt;<i>putting the reactor in a separate thread. This seams to work well, but
</I>&gt;<i>now that I want to create a .tac I don't think this is possible.
</I>
I have been working through the Finger example section, and also use 
wxPython for a GUI, and although it was a bit tricky to setup, it 
works fine. I also setup my Finger server code as a .tac, and twistd 
starts it up also. Here is some of the code fragments I used:

     # finger_server.py
     from twisted.python import log
     from twisted.internet import wxreactor

     wxreactor.install()

     # import t.i.reactor only after installing wxreactor:
     from twisted.application import internet, service
     from twisted.internet import reactor, protocol, defer
     from twisted.protocols import basic

The first step is importing *and* installing wxreactor. After that, 
you have to create and register a wxPython App with the Reactor, and 
it takes care of the wx loop.

     app = MyApp(0)
     reactor.registerWxApp(app)
     msgWin = app.frame.foundText # this is a textCtrl I send output to.

     fs = FingerService(msgWin)
     ff = fs.getFingerFactory()
     fsf = fs.getFingerSetterFactory()
     global application
     application = service.Application('finger', uid=1, gid=1)
     sc = service.IServiceCollection(application)
     internet.TCPServer(79, ff).setServiceParent(sc)
     internet.TCPServer(179, fsf).setServiceParent(sc)

In my code, I actually use:

         if __name__ == '__main__':
             main_code()
         else:
             service_code()

This lets me run the code in Eclipse for testing, then I copy the .py 
file to a .tac file, and it works as a twistd daemon, including 
popping up a wxPython window for output. It *also* works as a 
standalone file when I use py2exe on the .py file - but I don't see 
how you could use twistd with a .exe, since twistd expects a script.

I hope this is clear - if not, I can send you my entire 
finger_server.py file, for your amusement :)

John C&gt;



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="052772.html">[Twisted-Python] Twistd .tac + wxpython
</A></li>
	<LI>Next message (by thread): <A HREF="052766.html">[Twisted-Python] Twistd .tac + wxpython
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52765">[ date ]</a>
              <a href="thread.html#52765">[ thread ]</a>
              <a href="subject.html#52765">[ subject ]</a>
              <a href="author.html#52765">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
