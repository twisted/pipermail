<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re : Telnet server using Twisted	and	AuthenticatingTelnetProtocol
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%20%3A%20Telnet%20server%20using%20Twisted%0A%09and%09AuthenticatingTelnetProtocol&In-Reply-To=140670.22919.qm%40web26108.mail.ukl.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020275.html">
   <LINK REL="Next"  HREF="020255.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re : Telnet server using Twisted	and	AuthenticatingTelnetProtocol</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%20%3A%20Telnet%20server%20using%20Twisted%0A%09and%09AuthenticatingTelnetProtocol&In-Reply-To=140670.22919.qm%40web26108.mail.ukl.yahoo.com"
       TITLE="[Twisted-Python] Re : Telnet server using Twisted	and	AuthenticatingTelnetProtocol">exarkun at twistedmatrix.com
       </A><BR>
    <I>Thu Aug 27 09:52:31 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020275.html">[Twisted-Python] Re : Telnet server using Twisted and	AuthenticatingTelnetProtocol
</A></li>
        <LI>Next message: <A HREF="020255.html">[Twisted-Python] Twistd .tac + wxpython
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20295">[ date ]</a>
              <a href="thread.html#20295">[ thread ]</a>
              <a href="subject.html#20295">[ subject ]</a>
              <a href="author.html#20295">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 24 Aug, 11:07 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">filoufake-python at yahoo.fr</A> wrote:
&gt;<i>Thank you Jean-Paul for replying,
</I>&gt;<i>
</I>&gt;<i>I still have some things that I don't understand:
</I>&gt;<i>
</I>&gt;<i>If I put your piece of code in my factory's protocol, I can connect to 
</I>&gt;<i>the server but as soon as I enter the username, I got the an error 
</I>&gt;<i>message telling that Server doesn't support &quot;will&quot; ('Server' object has 
</I>&gt;<i>no attribute 'will').
</I>
That means you've hooked up a telnet protocol to a tcp transport, rather 
than a telnet transport.  The telnet transport sits between these two 
things and adds features like &quot;will&quot; negotiation; it also is in charge 
of actually interpreting telnet command sequences received from the 
network and turning them into calls onto your telnet protocol instance. 
Without the telnet transport, the telnet protocol just gets raw data.
&gt;<i>[snip]
</I>&gt;<i>
</I>&gt;<i>I understand that this has something to do with TelnetTranport but how 
</I>&gt;<i>to implement it?
</I>&gt;<i>I read the telnet_echo.tac but in my case I have to manage the portal 
</I>&gt;<i>also and that is a litle bit too complex for me.
</I>
If necessary, you can pass arguments to your telnet protocol. 
telnet_echo.tac
uses &quot;lambda: TelnetTransport(TelnetEcho)&quot; as its protocol.  If 
TelnetEcho took an argument to __init__, though, you could supply it by 
using this as your protocol instead: &quot;lambda: 
TelnetTransport(TelnetEcho, foo)&quot;.

Does that help?
&gt;<i>
</I>&gt;<i>You say also that AuthenticatingTelnetProtocol  expects to be connected 
</I>&gt;<i>to an ITelnetTransport, but the documentation says &quot;When the 
</I>&gt;<i>information is collected, it is passed to a portal and an avatar
</I>&gt;<i>implementing ITelnetProtocol is requested&quot;.
</I>&gt;<i>I'm lost.
</I>
AuthenticatingTelnetProtocol is an ITelnetProtocol implementation.  So, 
it needs to be hooked up to an ITelnetTransport implementation, as all 
ITelnetProtocol implementations need to.

However, since the only thing it knows how to do is handle 
authentication, it also wants to get /another/ ITelnetProtocol 
implementation out of the portal you give it.  After authentication 
succeeds, that new ITelnetProtocol implementation will be given control 
of the connection and the AuthenticatingTelnetProtocol will get out of 
the way.

So you end up with one telnet transport and two telnet protocols.

Jean-Paul

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020275.html">[Twisted-Python] Re : Telnet server using Twisted and	AuthenticatingTelnetProtocol
</A></li>
	<LI>Next message: <A HREF="020255.html">[Twisted-Python] Twistd .tac + wxpython
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20295">[ date ]</a>
              <a href="thread.html#20295">[ thread ]</a>
              <a href="subject.html#20295">[ subject ]</a>
              <a href="author.html#20295">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
