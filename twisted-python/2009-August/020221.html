<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted.positioning: progress report + Factory	question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted.positioning%3A%20progress%20report%20%2B%20Factory%0A%09question&In-Reply-To=cedc0c090908131601t41c3220dpe0e2e1009652af87%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020219.html">
   <LINK REL="Next"  HREF="020224.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted.positioning: progress report + Factory	question</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted.positioning%3A%20progress%20report%20%2B%20Factory%0A%09question&In-Reply-To=cedc0c090908131601t41c3220dpe0e2e1009652af87%40mail.gmail.com"
       TITLE="[Twisted-Python] twisted.positioning: progress report + Factory	question">glyph at twistedmatrix.com
       </A><BR>
    <I>Fri Aug 14 12:09:51 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020219.html">[Twisted-Python] twisted.positioning: progress report + Factory	question
</A></li>
        <LI>Next message: <A HREF="020224.html">[Twisted-Python] twisted.positioning: progress report + Factory	question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20221">[ date ]</a>
              <a href="thread.html#20221">[ thread ]</a>
              <a href="subject.html#20221">[ subject ]</a>
              <a href="author.html#20221">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Aug 13, 2009 at 7:01 PM, Laurens Van Houtven &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">lvh at laurensvh.be</A>&gt;wrote:

&gt;<i>  On Thu, Aug 13, 2009 at 9:35 PM, Glyph Lefkowitz wrote:
</I>&gt;<i> &gt;&gt; Short question up front: what exactly should be in the proposed
</I>&gt;<i> &gt;&gt; factory class? What does it take? What does it return?
</I>&gt;<i>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Factory class proposed by whom and for what?
</I>&gt;<i>
</I>&gt;<i> I think that was you, and I think it was for gluing the classes in
</I>&gt;<i> NMEA together.  From your mail on July 30:
</I>&gt;<i>
</I>&gt;<i> &gt; There should also be a factory which nicely hooks everything together and
</I>&gt;<i> takes only a factory for your IPositioningProvider, so that users can
</I>&gt;<i> quickly get started with a positioning provider.
</I>&gt;<i>
</I>&gt;<i> I'm not sure what a factory that takes a factory is.
</I>

That was a typo.  There should be a *method* which nicely hooks everything
together and takes only a factory (etc).


&gt;<i> I'd think it's something that implements IPositioningProvider (eg a class)
</I>&gt;<i> and then returns the instance?
</I>

That's basically right, but I think you might want a separate object.  There
are other notifications you might want to send to a factory that you
wouldn't want to send to an instance; for example, &quot;no positioning
information is available, I will never send you any position data&quot;.

On the other hand, you could just have the class classProvides() the factory
interface and implements() the main interface for convenience, since a class
*is* really a factory in Python.

There should actually be several methods which hook things together.  One
would simply be to construct an NMEAReceiver and give it an
IPositionReceiver directly.  Another would be to call a function that scans
your serial ports, inspects your Windows registry (or whatever) and
discovers all GPS devices, normalizes them into a single stream of
positioning events, and calls
IPositionReceiverFactory.createPositionReceiver()

Would this be the correct place to implement behavior like &quot;listen on
&gt;<i> a bunch of serial ports, until you find something that spews things
</I>&gt;<i> that look like NMEA at you&quot;, or should that be another level of
</I>&gt;<i> abstraction up?
</I>&gt;<i>
</I>
There should be both levels of abstraction.  At one level you've got
SerialPort(NMEAReceiver(MyPositionReceiverFactory().createPositionReceiver(PositionSource(positioning.NMEA,
positioning.SerialPort(&quot;/dev/ttyS1&quot;)), &quot;/dev/ttyS1&quot;) and at another you've
got startGettingPositioningDataSomehow(MyPositionReceiverFactory()).  The
latter should be implemented in terms of the former.

Would there be multiple such factories for different kinds of
&gt;<i> positioning? I don't know what cell ID will need to know to set up an
</I>&gt;<i> IPositioningProvider, but the NMEA factory and gpsd factory need
</I>&gt;<i> completely different kinds of information, for example.
</I>&gt;<i>
</I>
Absolutely.  The key idea here is that you want there to be a complete
separation between application logic (which is your IPositioningReceiver or
IPositioningReceiverFactory) and your byte-level parsing code (which is your
NMEA or gpsd or Rockwell or cell triangulation or whatever).  Then, at the
top level

This is exactly analogous to the way that you can have an IProtocolFactory,
completely independent of any stream-communication API.  Later, you can do
listenSSL or listenTCP, or, with a very slight modification, connectSSL or
connectTCP.  listenSSL has a different signature from listenTCP, after all.
You need to be able to give it a certificate.  You could also have
connecting via SSH connections, via subprocesses, etc; all of these have
radically different requirements for construction and set-up, but once
you're going they should all be able to talk to an IProtocol.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20090814/dedd1d54/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20090814/dedd1d54/attachment.htm</A> 
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020219.html">[Twisted-Python] twisted.positioning: progress report + Factory	question
</A></li>
	<LI>Next message: <A HREF="020224.html">[Twisted-Python] twisted.positioning: progress report + Factory	question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20221">[ date ]</a>
              <a href="thread.html#20221">[ thread ]</a>
              <a href="subject.html#20221">[ subject ]</a>
              <a href="author.html#20221">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
