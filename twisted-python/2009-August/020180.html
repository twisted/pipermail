<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Adbapi issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Adbapi%20issues&In-Reply-To=20090806192444.19518.384017450.divmod.xquotient.47%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020179.html">
   <LINK REL="Next"  HREF="020174.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Adbapi issues</H1>
    <B>Gerrat Rickert</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Adbapi%20issues&In-Reply-To=20090806192444.19518.384017450.divmod.xquotient.47%40localhost.localdomain"
       TITLE="[Twisted-Python] Adbapi issues">grickert at coldstorage.com
       </A><BR>
    <I>Thu Aug  6 16:06:34 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020179.html">[Twisted-Python] Adbapi issues
</A></li>
        <LI>Next message: <A HREF="020174.html">[Twisted-Python] Tunneling using conch (with application.service)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20180">[ date ]</a>
              <a href="thread.html#20180">[ thread ]</a>
              <a href="subject.html#20180">[ subject ]</a>
              <a href="author.html#20180">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>-----Original Message-----
</I>&gt;<i>From: <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-bounces at twistedmatrix.com</A> [mailto:twisted-python-
</I>&gt;<i><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">bounces at twistedmatrix.com</A>] On Behalf Of <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>
</I>&gt;<i>Sent: Thursday, August 06, 2009 3:25 PM
</I>&gt;<i>To: Twisted general discussion
</I>&gt;<i>Subject: Re: [Twisted-Python] Adbapi issues
</I>&gt;<i>
</I>&gt;<i>On 06:57 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">grickert at coldstorage.com</A> wrote:
</I>&gt;&gt;<i>[snip]
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Supporting arraysize in some form is probably a good idea. Another
</I>&gt;&gt;&gt;<i>ticket is in order.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Ok, I filed ticket #3956
</I>&gt;&gt;<i>...along with a patch for adbapi.py, and test_adbapi.py.
</I>&gt;<i>
</I>&gt;<i>Great.  Thanks a lot! :)
</I>&gt;&gt;<i>My apologies in advance for the test patch :o)
</I>&gt;&gt;<i>I haven't written many tests, so I'm not exactly sure the best
</I>&gt;&gt;<i>(or perhaps even a good way) of testing some things.
</I>&gt;<i>
</I>&gt;<i>No worries.  I've given you some feedback on the ticket (I did that
</I>&gt;<i>before I noticed this email).  Please feel free to ask if anything
</I>&gt;<i>I wrote is unclear.
</I>&gt;&gt;<i>[snip]
</I>
Wow, the feedback on the patch (attempt) had a much gentler tone than I
expected ;o)  Thanks.  I'll see what I can improve.

&gt;&gt;<i>...my understanding is that it's relatively easy to kill a thread on a
</I>&gt;&gt;<i>Unix platform, but not as easy with Windows (which, unfortunately I
</I>&gt;&gt;<i>use almost exclusively).
</I>&gt;<i>
</I>&gt;<i>It's about equally easy on either platform.  However, it's also
</I>&gt;<i>basically unreliable on both platforms.  What happens if the killed
</I>&gt;<i>thread held a mutex, for example?
</I>&gt;&gt;<i>...maybe once *most* users are up to at least python version 2.6 (I'm
</I>&gt;&gt;<i>not),
</I>&gt;&gt;<i>I wonder if the threadpool in adbapi could be replaced with
</I>&gt;&gt;<i>functionality
</I>&gt;&gt;&gt;<i> From the multiprocessing package.  I would think it would be easier
</I>&gt;<i>to
</I>&gt;&gt;<i>just kill and restart dead connections then.
</I>&gt;<i>
</I>&gt;<i>Twisted actually has good support for running child processes already,
</I>&gt;<i>so we don't have to wait for Python 2.6, if this is a direction that's
</I>&gt;<i>interesting.
</I>&gt;<i>
</I>&gt;<i>Perhaps something based on Ampoule would make sense?  It could be an
</I>API
&gt;<i>compatible replacement for twisted.enterprise.adbapi, but use child
</I>&gt;<i>processes
</I>&gt;<i>instead of threads, and add one new method for interrupting outstanding
</I>&gt;<i>work.
</I>&gt;<i>
</I>&gt;<i>Jean-Paul
</I>
I've never looked at Ampoule, but I like the idea and wouldn't mind 
investigating the API compatible replacement idea (...not promising 
anything...).

Gerrat

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020179.html">[Twisted-Python] Adbapi issues
</A></li>
	<LI>Next message: <A HREF="020174.html">[Twisted-Python] Tunneling using conch (with application.service)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20180">[ date ]</a>
              <a href="thread.html#20180">[ thread ]</a>
              <a href="subject.html#20180">[ subject ]</a>
              <a href="author.html#20180">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
