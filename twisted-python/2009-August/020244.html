<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted.spread PB over a ProcessProtocol
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted.spread%20PB%20over%20a%20ProcessProtocol&In-Reply-To=1250339773.17341.42.camel%40ana.amantes">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020228.html">
   <LINK REL="Next"  HREF="020226.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted.spread PB over a ProcessProtocol</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted.spread%20PB%20over%20a%20ProcessProtocol&In-Reply-To=1250339773.17341.42.camel%40ana.amantes"
       TITLE="[Twisted-Python] twisted.spread PB over a ProcessProtocol">exarkun at twistedmatrix.com
       </A><BR>
    <I>Mon Aug 17 21:50:05 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020228.html">[Twisted-Python] twisted.spread PB over a ProcessProtocol
</A></li>
        <LI>Next message: <A HREF="020226.html">[Twisted-Python] TCP startTLS() negotiation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20244">[ date ]</a>
              <a href="thread.html#20244">[ thread ]</a>
              <a href="subject.html#20244">[ subject ]</a>
              <a href="author.html#20244">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 15 Aug, 12:36 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">thomas at apestaart.org</A> wrote:
&gt;<i>[snip]
</I>&gt;<i>
</I>&gt;<i>c) on hitting ctrl-c, tracebacks are generated, due to this block of
</I>&gt;<i>code:
</I>&gt;<i>        # At least on OS X 10.4, exiting while stdout is non-blocking
</I>&gt;<i>can
</I>&gt;<i>        # result in data loss.  For some reason putting the file
</I>&gt;<i>descriptor
</I>&gt;<i>        # back into blocking mode seems to resolve this issue.
</I>&gt;<i>        fdesc.setBlocking(self.fd)
</I>&gt;<i>
</I>&gt;<i>The exception is EBADF.
</I>&gt;<i>
</I>&gt;<i>That code looks suspicious to me - shouldn't it be at least checking 
</I>&gt;<i>for
</I>&gt;<i>exceptions there ? the fd could already be closed IMO.
</I>
I think the code was written with the assumption that the fd couldn't 
possibly by closed by that point.  If you have an example where this 
assumption is invalid, cool!  Any chance of shortening the code to just 
highlight this point?

Jean-Paul

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020228.html">[Twisted-Python] twisted.spread PB over a ProcessProtocol
</A></li>
	<LI>Next message: <A HREF="020226.html">[Twisted-Python] TCP startTLS() negotiation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20244">[ date ]</a>
              <a href="thread.html#20244">[ thread ]</a>
              <a href="subject.html#20244">[ subject ]</a>
              <a href="author.html#20244">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
