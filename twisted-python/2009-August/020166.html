<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Really Basic clarification on defers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Really%20Basic%20clarification%20on%20defers&In-Reply-To=faf2d7810908051504x425bf8d0o94f79617213fff8a%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020164.html">
   <LINK REL="Next"  HREF="020170.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Really Basic clarification on defers</H1>
    <B>Jarrod Roberson</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Really%20Basic%20clarification%20on%20defers&In-Reply-To=faf2d7810908051504x425bf8d0o94f79617213fff8a%40mail.gmail.com"
       TITLE="[Twisted-Python] Really Basic clarification on defers">jarrod at vertigrated.com
       </A><BR>
    <I>Wed Aug  5 20:12:11 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020164.html">[Twisted-Python] Really Basic clarification on defers
</A></li>
        <LI>Next message: <A HREF="020170.html">[Twisted-Python] Really Basic clarification on defers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20166">[ date ]</a>
              <a href="thread.html#20166">[ thread ]</a>
              <a href="subject.html#20166">[ subject ]</a>
              <a href="author.html#20166">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Aug 5, 2009 at 6:04 PM, John Aherne &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">johnaherne at rocs.co.uk</A>&gt; wrote:

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 2. If you have blocking code - *please define blocking* :), then first
</I>&gt;<i> think about  putting it into deferToThread with appropriate callbacks and
</I>&gt;<i> return the deferred. As suggested by Jarrod in his response.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>blocking code is code that will block or may potentially block the continued
execution of the main reactor thread.
think for the most part long running processes or operations that may be
long running.
doing file or network i/o, calculating cpu intensive work, operations that
may timeout like doing a remote call to another process or host machine,
database operations are usually a culprit, that may be flooded with work or
crashed, the examples go on but are mainly about i/o and cpu intensive
operations.
when these things happen on the reactor / main thread they block the server
from doing anything else, it can't accept new connections, it can't do
anything else until this blocking activity has completed and returned
control to the reactor thread.

you can handle this without deferToThread by breaking the blocking code up
into smaller pieces sometimes. need to transfer a large file to a socket,
instead of trying to send it all at once send 10KB at a time and yield back
to the reactor and reschedule the next 10KB until finished, this will work,
it might not be the fastest way and still may block for an unacceptable
amount of time on just 10KB, depending on how heavily taxed the i/o system
is at the moment. Usually deferToThread is just easier to implement.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20090805/4f421671/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20090805/4f421671/attachment.htm</A> 
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020164.html">[Twisted-Python] Really Basic clarification on defers
</A></li>
	<LI>Next message: <A HREF="020170.html">[Twisted-Python] Really Basic clarification on defers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20166">[ date ]</a>
              <a href="thread.html#20166">[ thread ]</a>
              <a href="subject.html#20166">[ subject ]</a>
              <a href="author.html#20166">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
