<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Clarification on returning exceptions via	Perspective Broker
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Clarification%20on%20returning%20exceptions%20via%0A%09Perspective%20Broker&In-Reply-To=e554908b0908130732j2b6dd897sc959f8d4b01915e4%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020213.html">
   <LINK REL="Next"  HREF="020251.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Clarification on returning exceptions via	Perspective Broker</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Clarification%20on%20returning%20exceptions%20via%0A%09Perspective%20Broker&In-Reply-To=e554908b0908130732j2b6dd897sc959f8d4b01915e4%40mail.gmail.com"
       TITLE="[Twisted-Python] Clarification on returning exceptions via	Perspective Broker">glyph at twistedmatrix.com
       </A><BR>
    <I>Thu Aug 13 15:50:42 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020213.html">[Twisted-Python] Clarification on returning exceptions via	Perspective Broker
</A></li>
        <LI>Next message: <A HREF="020251.html">[Twisted-Python] Clarification on returning exceptions via	Perspective Broker
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20218">[ date ]</a>
              <a href="thread.html#20218">[ thread ]</a>
              <a href="subject.html#20218">[ subject ]</a>
              <a href="author.html#20218">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Aug 13, 2009 at 10:32 AM, Matt Bennett &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">matt at bennett.name</A>&gt; wrote:

&gt;<i> My exceptions subclass pb.Error, which means tracebacks are suppressed
</I>&gt;<i> on the server and errbacks triggered on the client, exactly as I'd
</I>&gt;<i> hoped. What I'm confused about though, is why the
</I>&gt;<i> serialization/deserialization process reduces my nice structured
</I>&gt;<i> exception into a mere string. Isn't PB's raison d'&#234;tre to allow you to
</I>&gt;<i> send fully formed Python classes over the wire?
</I>&gt;<i>
</I>
It's been a while since I worked with this, but I believe the rationale goes
something like this:

the most common type of error in PB is a serialization or deserialization
error.  You sent too much, you didn't send enough, your jellier doesn't
quite match your unjellier, there's a version skew problem.

If exceptions contained structured data, there's a risk that that data will
*also* have a serialization error; or, worse yet, attempt to include the
problematic data which caused the error in the first place.  So it's
generally not a good idea to work around this, because you can easily cause
a mutually recursive loop where reporting the error causes another error
that needs to be reported.

That said, based on memory and a brief read-through of the code, PB does
support returning structured exceptions; you can't just return a normal
Exception subclass, you need to register it as serializable the same way you
would any other object, and it needs to subclass Jellyable (for example by
subclassing Copyable).

(I could be wrong, but I believe that is the intent.)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20090813/1597e6e5/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20090813/1597e6e5/attachment.htm</A> 
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020213.html">[Twisted-Python] Clarification on returning exceptions via	Perspective Broker
</A></li>
	<LI>Next message: <A HREF="020251.html">[Twisted-Python] Clarification on returning exceptions via	Perspective Broker
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20218">[ date ]</a>
              <a href="thread.html#20218">[ thread ]</a>
              <a href="subject.html#20218">[ subject ]</a>
              <a href="author.html#20218">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
