<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted Names strings
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20Names%20strings&In-Reply-To=%3C20130117172226.643a8b42%40saiph.darkstar.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="058928.html">
   <LINK REL="Next"  HREF="058932.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted Names strings</H1>
    <B>Angelo Dell'Aera</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20Names%20strings&In-Reply-To=%3C20130117172226.643a8b42%40saiph.darkstar.net%3E"
       TITLE="[Twisted-Python] Twisted Names strings">angelo.dellaera at gmail.com
       </A><BR>
    <I>Thu Jan 17 09:22:26 MST 2013</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="058928.html">[Twisted-Python] TLSMemoryBIOProtocol _shutdownTLS what to do when not successfull
</A></li>
        <LI>Next message (by thread): <A HREF="058932.html">[Twisted-Python] Twisted Names strings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58931">[ date ]</a>
              <a href="thread.html#58931">[ thread ]</a>
              <a href="subject.html#58931">[ subject ]</a>
              <a href="author.html#58931">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
After updating Twisted to 12.3.0 I started getting errors like the following one

2013-01-17 14:38:23+0100 [-]   File &quot;/usr/lib64/python2.7/site-packages/twisted/names/common.py&quot;, line 93, in lookupAddress
2013-01-17 14:38:23+0100 [-]     return self._lookup(name, dns.IN, dns.A, timeout)
2013-01-17 14:38:23+0100 [-]   File &quot;/usr/lib64/python2.7/site-packages/twisted/names/client.py&quot;, line 384, in _lookup
2013-01-17 14:38:23+0100 [-]     d = self.queryUDP([dns.Query(name, type, cls)], timeout)
2013-01-17 14:38:23+0100 [-]   File &quot;/usr/lib64/python2.7/site-packages/twisted/names/dns.py&quot;, line 484, in __init__
2013-01-17 14:38:23+0100 [-]     self.name = Name(name)
2013-01-17 14:38:23+0100 [-]   File&quot;/usr/lib64/python2.7/site-packages/twisted/names/dns.py&quot;, line 357, in __init__ 
2013-01-17 14:38:23+0100 [-]     raise TypeError(&quot;%r is not a byte string&quot; % (name,)) 
2013-01-17 14:38:23+0100 [-] TypeError: u'example.com' is not a byte string

Taking a look at documentation I found this document

<A HREF="http://twistedmatrix.com/documents/current/core/howto/python3.html">http://twistedmatrix.com/documents/current/core/howto/python3.html</A>

which states

&quot;twisted.names.dns deals with strings with a wide range of meanings,
often several for each DNS record type. Most of these strings have
remained as byte strings, which will probably require application
updates (for the reason given in the FilePath section above). Some
strings have changed to text strings, though. Any string representing a
human readable address (for example, Record_A's address parameter) is
now a text string. Additionally, time-to-live (ttl) values given as
strings must now be given as text strings.&quot;

which seems to describe the problem I'm experiencing. 

But let me say that I'm currently using Python 2.7.3 and I was surprised in realizing 
that a simple update from a minor 12.x release was enough to disrupt my application. 

Don't you think that a kind of compatibility mechanism (maybe with a warning message) 
would have been a more gentle way of doing this transition especially for those who
are still using Python 2?

Thanks and regards,
  
-- 

Angelo Dell'Aera 'buffer'
Antifork Research, Inc.		<A HREF="http://buffer.antifork.org">http://buffer.antifork.org</A>
Sysenter Honeynet Project	<A HREF="http://www.sysenter-honeynet.org">http://www.sysenter-honeynet.org</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="058928.html">[Twisted-Python] TLSMemoryBIOProtocol _shutdownTLS what to do when not successfull
</A></li>
	<LI>Next message (by thread): <A HREF="058932.html">[Twisted-Python] Twisted Names strings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58931">[ date ]</a>
              <a href="thread.html#58931">[ thread ]</a>
              <a href="subject.html#58931">[ subject ]</a>
              <a href="author.html#58931">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
