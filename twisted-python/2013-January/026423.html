<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Stopping Reactor in UnitTest Callback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Stopping%20Reactor%20in%20UnitTest%20Callback&In-Reply-To=CAEaBPB3J82OE4_tguv3Xw_cT%3Dx7-DYqLdfxUbGMiEqGsd31cYA%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026422.html">
   <LINK REL="Next"  HREF="026425.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Stopping Reactor in UnitTest Callback</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Stopping%20Reactor%20in%20UnitTest%20Callback&In-Reply-To=CAEaBPB3J82OE4_tguv3Xw_cT%3Dx7-DYqLdfxUbGMiEqGsd31cYA%40mail.gmail.com"
       TITLE="[Twisted-Python] Stopping Reactor in UnitTest Callback">exarkun at twistedmatrix.com
       </A><BR>
    <I>Thu Jan 10 15:51:34 EST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026422.html">[Twisted-Python] Stopping Reactor in UnitTest Callback
</A></li>
        <LI>Next message: <A HREF="026425.html">[Twisted-Python] Stopping Reactor in UnitTest Callback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26423">[ date ]</a>
              <a href="thread.html#26423">[ thread ]</a>
              <a href="subject.html#26423">[ subject ]</a>
              <a href="author.html#26423">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07:58 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">fabian.rothfuchs at googlemail.com</A> wrote:
&gt;<i>Hey there,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>I'm trying to start and stop a twisted server in a unittest:
</I>&gt;<i><A HREF="http://dpaste.org/qwaUt/">http://dpaste.org/qwaUt/</A> .
</I>
Why?  This isn't the typical way to write unit tests for Twisted-based 
code.  The reactor is started and stopped by trial as necessary.  Your 
code should just expect that it is running and let trial stop it when it 
is time to stop.

If you have asynchronous code to test, you return a Deferred from a test 
method and the test completes when the Deferred fires.  Not when the 
reactor stops.

Also, a lot of people have come to dislike this style of test, instead 
preferring to use test doubles that don't involve real I/O or time so 
that they can completely test the logic of their code deterministically 
- thus also without ever running a real reactor or needing to use the 
&quot;return a Deferred from a test method&quot; feature of trial.

Jean-Paul

</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026422.html">[Twisted-Python] Stopping Reactor in UnitTest Callback
</A></li>
	<LI>Next message: <A HREF="026425.html">[Twisted-Python] Stopping Reactor in UnitTest Callback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26423">[ date ]</a>
              <a href="thread.html#26423">[ thread ]</a>
              <a href="subject.html#26423">[ subject ]</a>
              <a href="author.html#26423">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
