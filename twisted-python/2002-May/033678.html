<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Issue with factories
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Issue%20with%20factories&In-Reply-To=%3C3CF3ADE5.8090002%40itamarst.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="033677.html">
   <LINK REL="Next"  HREF="033679.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Issue with factories</H1>
    <B>Itamar Shtull-Trauring</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Issue%20with%20factories&In-Reply-To=%3C3CF3ADE5.8090002%40itamarst.org%3E"
       TITLE="[Twisted-Python] Issue with factories">twisted at itamarst.org
       </A><BR>
    <I>Tue May 28 10:18:45 MDT 2002</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="033677.html">[Twisted-Python] Twisted.bugs ate my balls!
</A></li>
        <LI>Next message (by thread): <A HREF="033679.html">[Twisted-Python] Issue with factories
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33678">[ date ]</a>
              <a href="thread.html#33678">[ thread ]</a>
              <a href="subject.html#33678">[ subject ]</a>
              <a href="author.html#33678">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If you do reactor.listenTCP on a factory, startFactory and stopFactory are 
never called. I therefore suggest that we add methods doStart and doStop to 
protocol.Factory, like so, and have them called in listenTCP/UDP/SSL, and 
remove calls to start/stopFactory from app.Appliecation:

class Factory:

    running = 0

    def doStart(self):
         if not self.running:
             self.running = 1
             self.startFactory()

    def doStop(self):
         if self.running:
             self.running = 0
             self.stopFactory()

This ensures the start/stopFactory methods will only be called once, even if 
the factory is added to multiple Ports, and makes sure that they get called 
even if the factory is added to the reactor directly.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="033677.html">[Twisted-Python] Twisted.bugs ate my balls!
</A></li>
	<LI>Next message (by thread): <A HREF="033679.html">[Twisted-Python] Issue with factories
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33678">[ date ]</a>
              <a href="thread.html#33678">[ thread ]</a>
              <a href="subject.html#33678">[ subject ]</a>
              <a href="author.html#33678">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
