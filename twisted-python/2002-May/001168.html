<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted.bugs ate my balls!
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted.bugs%20ate%20my%20balls%21&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001167.html">
   <LINK REL="Next"  HREF="001169.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted.bugs ate my balls!</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted.bugs%20ate%20my%20balls%21&In-Reply-To="
       TITLE="[Twisted-Python] Twisted.bugs ate my balls!">andrew-twisted at puzzling.org
       </A><BR>
    <I>Mon May 27 05:46:47 EDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="001167.html">[Twisted-Python] adding a new connection type
</A></li>
        <LI>Next message: <A HREF="001169.html">[Twisted-Python] Twisted.bugs ate my balls!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1168">[ date ]</a>
              <a href="thread.html#1168">[ thread ]</a>
              <a href="subject.html#1168">[ subject ]</a>
              <a href="author.html#1168">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>libpq.OperationalError: ERROR: value too long for type character varying(16)
...
(&quot;INSERT INTO bugs_items\n (submittor_name, submittor_email, assigned,
date_submitted, date_modified,\n version, os, security, type, status,
summary, description) VALUES\n (%s, %s, NULL, now(), now(), %s, %s, %s, %s,
'open', %s, %s)\n &quot;, 'Andrew Bennetts', '<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">andrew-twistedbugs at puzzling.org</A>',
'0.18.0-prerelease', 'Win32', 'f', 'normal', 'connectionFailed might not get
called', 'On Win32, connecting to a closed port doesn\'t fail immediately,
but instead only calls connectionFailed after timing out. However, timeouts
are optional, so it is possible it will never be called.\r\n\r\nFor the
default (select) reactor, the problem is winsock\'s select reports failed
connections as &quot;exceptional&quot;, rather than as readable/writeable, and Twisted
ignores exceptional socket events.\r\n\r\nPerhaps if platform is win32, do
something like:\r\n\r\ndef win32select(reads, writes, ignored,
timeout=None):\r\n &quot;&quot;&quot;Kludge around winsock\'s select() function&quot;&quot;&quot;\r\n r,
w, e = select.select(reads, writes, reads, timeout)\r\n return r+e, w,
[]\r\nselect = win32select')

*sigh*

It turns out Itamar has submitted the same bug:
    <A HREF="http://www.twistedmatrix.com/users/itamarst.twistd/bugs/view_bug?bug_id=19">http://www.twistedmatrix.com/users/itamarst.twistd/bugs/view_bug?bug_id=19</A>
    
Anyway, bug I'm trying to submit reads:

Summary: 
    connectionFailed might not get called

Description:
    On Win32, connecting to a closed port doesn't fail immediately, but
    instead only calls connectionFailed after timing out.  However, timeouts
    are optional, so it is possible it will never be called.

    For the default (select) reactor, the problem is winsock's select
    reports failed connections as &quot;exceptional&quot;, rather than as
    readable/writeable, and Twisted ignores exceptional socket events.

    Perhaps if platform is win32, do something like:

    def win32select(reads, writes, ignored, timeout=None):
        &quot;&quot;&quot;Kludge around winsock's select() function&quot;&quot;&quot;
        r, w, e = select.select(reads, writes, reads, timeout)
        return r+e, w, []
    select = win32select



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001167.html">[Twisted-Python] adding a new connection type
</A></li>
	<LI>Next message: <A HREF="001169.html">[Twisted-Python] Twisted.bugs ate my balls!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1168">[ date ]</a>
              <a href="thread.html#1168">[ thread ]</a>
              <a href="subject.html#1168">[ subject ]</a>
              <a href="author.html#1168">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
