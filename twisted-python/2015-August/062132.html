<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Blacklisting hosts
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Blacklisting%20hosts&In-Reply-To=%3C71490823-139A-4B40-853A-AAB1087C39F8%40lukasa.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="062128.html">
   <LINK REL="Next"  HREF="062133.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Blacklisting hosts</H1>
    <B>Cory Benfield</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Blacklisting%20hosts&In-Reply-To=%3C71490823-139A-4B40-853A-AAB1087C39F8%40lukasa.co.uk%3E"
       TITLE="[Twisted-Python] Blacklisting hosts">cory at lukasa.co.uk
       </A><BR>
    <I>Sun Aug  9 10:07:09 MDT 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="062128.html">[Twisted-Python] Blacklisting hosts
</A></li>
        <LI>Next message (by thread): <A HREF="062133.html">[Twisted-Python] Blacklisting hosts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62132">[ date ]</a>
              <a href="thread.html#62132">[ thread ]</a>
              <a href="subject.html#62132">[ subject ]</a>
              <a href="author.html#62132">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On 8 Aug 2015, at 08:07, Chris Norman &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">chris.norman2 at googlemail.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Hi all,
</I>&gt;<i> I am using Twisted to make a game server. I want to be able to ban IP addresses. Currently I check if the host is in a blacklist, and if it is, call abortConnection on the transport. It works fine, but I'm thinking there should be a better way, to actively refuse the connection in the first place?
</I>
I am not aware of any hook in the BSD socket API that lets you refuse a connection entirely. Generally, you put a socket into ‘listen’ mode (indicating to the OS that you’ll accept new connections), and then you call accept() to get the new connection. In fact, the OS will accept the connection even before you call accept(): it’ll do it asynchronously, and you will just get the FD for the connection. IIRC Windows has a winsock specific thing that might do what you want, but that’s pretty platform specific and probably doesn’t actually prevent the connection getting established anyway.

If you really want to never allow the connection at all, you’ll probably want to program iptables (or some other firewall if you aren’t on Linux) to do the packet filtering for you. A combination of iptables and ipsets will get you a high-performance IP address blacklist that will drop all packets before they ever reach your application.

Cory


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 801 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: &lt;/pipermail/twisted-python/attachments/20150809/6d3dfe45/attachment.sig&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="062128.html">[Twisted-Python] Blacklisting hosts
</A></li>
	<LI>Next message (by thread): <A HREF="062133.html">[Twisted-Python] Blacklisting hosts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62132">[ date ]</a>
              <a href="thread.html#62132">[ thread ]</a>
              <a href="subject.html#62132">[ subject ]</a>
              <a href="author.html#62132">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
