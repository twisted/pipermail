<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Divunal-author] Charge interfaces
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:radix%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000327.html">
   <LINK REL="Next"  HREF="000329.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Divunal-author] Charge interfaces
   </H1>
    <B>Christopher Armstrong
    </B> 
    <A HREF="mailto:radix%40twistedmatrix.com"
       TITLE="[Divunal-author] Charge interfaces">radix@twistedmatrix.com
       </A><BR>
    <I>Mon, 12 May 2003 15:09:33 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="000327.html">[Divunal-author] Charge interfaces
</A></li>
        <LI> Next message: <A HREF="000329.html">[Divunal-author] Charge interfaces
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#328">[ date ]</a>
              <a href="thread.html#328">[ thread ]</a>
              <a href="subject.html#328">[ subject ]</a>
              <a href="author.html#328">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2003.05.12 00:06, Allen Short wrote:
&gt;<i> &gt;&gt;&gt;&gt;&gt; &quot;Christopher&quot; == Christopher Armstrong &lt;<A HREF="mailto:radix@twistedmatrix.com">radix@twistedmatrix.com</A>&gt; writes:
</I>&gt;<i> 
</I>&gt;<i>     &gt; The only alternative I have come up with is rather lame: There
</I>&gt;<i>     &gt; will only be IChargeSource and IChargeSink interfaces, and
</I>&gt;<i>     &gt; they'll both define a `getShape' method (or maybe getSinkShape
</I>&gt;<i>     &gt; and getSourceShape, because some objects will probably want to
</I>&gt;<i>     &gt; implement both source and sink in the same class). Each
</I>&gt;<i>     &gt; implementation of these interfaces will check to make sure that
</I>&gt;<i>     &gt; the opposite is a compatible shape, which could just be a
</I>&gt;<i>     &gt; string. I actually partially implemented this, but it smelled
</I>&gt;<i>     &gt; bad so I threw it out. But now that I've run into the problem
</I>&gt;<i>     &gt; with the `connect' action, it seems to be the only way to do it.
</I>&gt;<i> 
</I>&gt;<i> Hmm. I didn't smell it, but from here that doesn't sound so bad. That
</I>&gt;<i> way you keep your &quot;charge source/sink compatibility&quot; issues neatly
</I>&gt;<i> tucked into a couple components and dont have to fight with the
</I>&gt;<i> components system to get stuff like multiple sources/sinks working.
</I>
I implemented it. You only need a single IChargeSource and IChargeSink
per Thing, even if you want multiple conceptual sources and sinks on
a single object: You just need to implement sinkTo and gotSourced in a
way that can handle multiple objects. Also, I put a `supports(sinkTypes)'
method on Source, and a `getShapes' method on Sink. the result of getShapes
gets passed to supports, and the default implementation of supports returns
true if any of the items in self.compatibleSinks are in sinkTypes.

Oh, and rather than returning strings from getShapes, I'm returning classes.
I couldn't live without knowing that the types have an identity :)

Oh, and I also implemented `Touch' and `Zap' actions. `Touch' allows current
to go from your finger to a device, and `Zap' forces 20 charges into the 
device. TODO: Connect(ing a battery to a battery charger, e.g.).

On a related topic, I'd like people to comment on the large docstring I have
at the top of charge.py. It's just some rambling about a request/response
versus a current-based charge system.

-- 
 Twisted | Christopher Armstrong: International Man of Twistery
  Radix  |          Release Manager,  Twisted Project
---------+     <A HREF="http://twistedmatrix.com/users/radix.twistd/">http://twistedmatrix.com/users/radix.twistd/</A>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000327.html">[Divunal-author] Charge interfaces
</A></li>
	<LI> Next message: <A HREF="000329.html">[Divunal-author] Charge interfaces
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#328">[ date ]</a>
              <a href="thread.html#328">[ thread ]</a>
              <a href="subject.html#328">[ subject ]</a>
              <a href="author.html#328">[ author ]</a>
         </LI>
       </UL>
</body></html>
