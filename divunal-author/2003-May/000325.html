<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Divunal-author] Charge interfaces
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:radix%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000326.html">
   <LINK REL="Next"  HREF="000327.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Divunal-author] Charge interfaces
   </H1>
    <B>Christopher Armstrong
    </B> 
    <A HREF="mailto:radix%40twistedmatrix.com"
       TITLE="[Divunal-author] Charge interfaces">radix@twistedmatrix.com
       </A><BR>
    <I>Sun, 11 May 2003 22:56:27 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="000326.html">[Divunal-author] Charge interfaces
</A></li>
        <LI> Next message: <A HREF="000327.html">[Divunal-author] Charge interfaces
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#325">[ date ]</a>
              <a href="thread.html#325">[ thread ]</a>
              <a href="subject.html#325">[ subject ]</a>
              <a href="author.html#325">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>So I'm getting through the implementation of charge and whatnot,
and have run into a problem I can't figure out how to solve.

So far I have a new Interface for every kind of socket and plug
(or anything that can be connected, really). The general pattern
is IBattery, IBatterySink, IBatteryCharger, IBatteryChargerSink,
etc (Battery implements IBattery and IBatteryChargerSink). The
problem I'm having is with implementing the `connect' command:

  connect battery to walkman

I've implemented a couple of utility Interfaces that aren't
directly used, IChargeSource and IChargeSink; the interfaces
listed above subclass them, but obviously that doesn't have
any meaning, it's just so I don't have to keep typing the same
method names. However, I really wish I could say something like

   def doAction(self):
       try:
           IChargeSource(self.tool).sinkTo(IChargeSink(self.target))
       except Incompatible:
           ....

This doesn't actually work, of course. And the idea completely breaks
when there are two kinds of IChargeSource on an object. :-(

The only alternative I have come up with is rather lame: There will
only be IChargeSource and IChargeSink interfaces, and they'll both
define a `getShape' method (or maybe getSinkShape and getSourceShape,
because some objects will probably want to implement both source and
sink in the same class). Each implementation of these interfaces will
check to make sure that the opposite is a compatible shape, which
could just be a string. I actually partially implemented this, but it
smelled bad so I threw it out. But now that I've run into the problem
with the `connect' action, it seems to be the only way to do it.

-- 
 Twisted | Christopher Armstrong: International Man of Twistery
  Radix  |          Release Manager,  Twisted Project
---------+     <A HREF="http://twistedmatrix.com/users/radix.twistd/">http://twistedmatrix.com/users/radix.twistd/</A>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000326.html">[Divunal-author] Charge interfaces
</A></li>
	<LI> Next message: <A HREF="000327.html">[Divunal-author] Charge interfaces
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#325">[ date ]</a>
              <a href="thread.html#325">[ thread ]</a>
              <a href="subject.html#325">[ subject ]</a>
              <a href="author.html#325">[ author ]</a>
         </LI>
       </UL>
</body></html>
