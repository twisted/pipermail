<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Question regarding custom contextFactory for twisted.web.client.Agent
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-web%5D%20Question%20regarding%20custom%20contextFactory%20for%0A%20twisted.web.client.Agent&In-Reply-To=%3C20170514023607.GA787%40arch-tinker.localdomain%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="005297.html">
   <LINK REL="Next"  HREF="005299.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Question regarding custom contextFactory for twisted.web.client.Agent</H1>
    <B>Jason Litzinger</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-web%5D%20Question%20regarding%20custom%20contextFactory%20for%0A%20twisted.web.client.Agent&In-Reply-To=%3C20170514023607.GA787%40arch-tinker.localdomain%3E"
       TITLE="[Twisted-web] Question regarding custom contextFactory for twisted.web.client.Agent">jlitzingerdev at gmail.com
       </A><BR>
    <I>Sat May 13 20:36:07 MDT 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005297.html">[Twisted-web] Question regarding custom contextFactory for twisted.web.client.Agent
</A></li>
        <LI>Next message (by thread): <A HREF="005299.html">[Twisted-web] Question regarding custom contextFactory for twisted.web.client.Agent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5298">[ date ]</a>
              <a href="thread.html#5298">[ thread ]</a>
              <a href="subject.html#5298">[ subject ]</a>
              <a href="author.html#5298">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> This sounds eminently sensible, and in fact sounds like Twisted, or Treq at least, really ought to do something like this on our end with some kind of small LRU cache, keeping the most-used N hostnames (where N defaults to some small number, say, 20).  I'm surprised to hear it is such a big optimization, but surprises like that are entirely the point of performance testing!
</I>Thanks for taking a look!

I like the idea of an LRU for the last N hosts.  Given I have something
prototyped that I will expand on, that isn't much of a stretch.  If
you think it might be useful to Twisted then I can try to iterate the
patch until it is either rejected or accepted (following the well
documented steps for contributing of course), thoughts?

If it fits more in treq then I'm more than happy to share the code, but,
since I'm not currently using treq the amount of effort I can
realistically put towards it isn't as high, though that project is very
appealing.

On the size of the performance increase -- I was surprised as well, and
there's always the possibility I made an error, but it was consistent
across the five tests I ran.  Regardless, I'll be doing more profiling as
I work toward the final implementation.
&gt;<i> 
</I>&gt;<i> Nevertheless, thanks for asking!  I really wish people would ask questions about client TLS more often before doing something potentially insecure :).  In this case, the client connection creator is used to produce client connections anyway, and the connections are not shared, so there should be no worrisome mingling of state between connections.
</I>Agree.  I've come to believe that assumptions mixed with TLS/security
related issues are my worst enemy.

-Jason

* Completely unrelated - I still owe on my committment to ticket
  6597...yeah, life happened.  Luckily I saved my notes now that I'm
  finding some time here and there.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005297.html">[Twisted-web] Question regarding custom contextFactory for twisted.web.client.Agent
</A></li>
	<LI>Next message (by thread): <A HREF="005299.html">[Twisted-web] Question regarding custom contextFactory for twisted.web.client.Agent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5298">[ date ]</a>
              <a href="thread.html#5298">[ thread ]</a>
              <a href="subject.html#5298">[ subject ]</a>
              <a href="author.html#5298">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
