<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Question regarding custom contextFactory for	twisted.web.client.Agent
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-web%5D%20Question%20regarding%20custom%20contextFactory%20for%0A%09twisted.web.client.Agent&In-Reply-To=%3CCAARXrP%3Dbu-MmyNriipSx9WSXMA9VB7Q4MvSDaavYi9E0xpn3pQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   <LINK REL="Next"  HREF="005297.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Question regarding custom contextFactory for	twisted.web.client.Agent</H1>
    <B>Jason Litzinger</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-web%5D%20Question%20regarding%20custom%20contextFactory%20for%0A%09twisted.web.client.Agent&In-Reply-To=%3CCAARXrP%3Dbu-MmyNriipSx9WSXMA9VB7Q4MvSDaavYi9E0xpn3pQ%40mail.gmail.com%3E"
       TITLE="[Twisted-web] Question regarding custom contextFactory for	twisted.web.client.Agent">jlitzingerdev at gmail.com
       </A><BR>
    <I>Fri May 12 14:56:51 MDT 2017</I>
    <P><UL>
        
        <LI>Next message (by thread): <A HREF="005297.html">[Twisted-web] Question regarding custom contextFactory for twisted.web.client.Agent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5296">[ date ]</a>
              <a href="thread.html#5296">[ thread ]</a>
              <a href="subject.html#5296">[ subject ]</a>
              <a href="author.html#5296">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I have an optimization question in the realm of &quot;before I do something
foolish...&quot; regarding the contextFactory passed to twisted.web.client.Agent.

Background:

I have (several) twisted applications running on a Cortex-A5 system, one of
which interfaces with a web service using the twisted.web.client.Agent
API*.  The
problem I've observed is that requests to this web service result in a higher
than desired CPU load.  To understand the source of the load I isolated the
server interactions and profiled.

Investigation:

The profile data revealed the load in question stemmed from TLS related
calls, specifically optionsForClientTLS, which is called once per connection.
In looking (briefly) at what optionsForClientTLS does, it seemed
(perhaps wrongly)
that there was an opportunity for optimization in my specific case.

The optimization is to create a custom contextFactory that caches the connection
creator since the host is not changing.  I prototyped an implementation and the
load was reduced by a factor of ten.

Question:

Is it safe/sane to reuse a connection creator if the host to which I'm
connecting is
not going to change?

Thanks,
-Jason Litzinger

* Technically this code is inside an open source third party SDK, but were I in
  their shoes I'd write it the same way, so I've no issues with their
implementation.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message (by thread): <A HREF="005297.html">[Twisted-web] Question regarding custom contextFactory for twisted.web.client.Agent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5296">[ date ]</a>
              <a href="thread.html#5296">[ thread ]</a>
              <a href="subject.html#5296">[ subject ]</a>
              <a href="author.html#5296">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
