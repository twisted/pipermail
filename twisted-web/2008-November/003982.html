<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Having reactor run at the main thread make things
	harder for late adopters
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Having%20reactor%20run%20at%20the%20main%20thread%20make%20things%0A%09harder%20for%20late%20adopters&In-Reply-To=20081105150823.GB2561%40mcnabbs.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003981.html">
   <LINK REL="Next"  HREF="003983.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Having reactor run at the main thread make things
	harder for late adopters</H1>
    <B>glyph at divmod.com</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Having%20reactor%20run%20at%20the%20main%20thread%20make%20things%0A%09harder%20for%20late%20adopters&In-Reply-To=20081105150823.GB2561%40mcnabbs.org"
       TITLE="[Twisted-web] Having reactor run at the main thread make things
	harder for late adopters">glyph at divmod.com
       </A><BR>
    <I>Wed Nov  5 14:24:31 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003981.html">[Twisted-web] Having reactor run at the main thread make
	things harder for late adopters
</A></li>
        <LI>Next message: <A HREF="003983.html">[Twisted-web] Having reactor run at the main thread make
	things harder for late adopters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3982">[ date ]</a>
              <a href="thread.html#3982">[ thread ]</a>
              <a href="subject.html#3982">[ subject ]</a>
              <a href="author.html#3982">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 03:08 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">amcnabb at mcnabbs.org</A> wrote:
&gt;<i>On Wed, Nov 05, 2008 at 03:11:08PM +1100, Andrew Bennetts wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>The documentation could perhaps be clearer about this (that document 
</I>&gt;&gt;<i>implies,
</I>&gt;&gt;<i>but doesn't directly state, that there's only one reactor instance).
</I>&gt;<i>
</I>&gt;<i>I've always struggled with reactor being a singleton.  It makes it very
</I>&gt;<i>difficult to use Twisted on a small scale in a larger existing project.
</I>&gt;<i>Sometimes it would be really nice to stop a reactor and later start
</I>&gt;<i>another one.  Unit testing is one of several situations where this can
</I>&gt;<i>be a problem.
</I>&gt;<i>
</I>&gt;<i>I suppose this wouldn't be quite as severe of a problem if it were easy
</I>&gt;<i>to restart a stopped reactor, but even then, it would be nice to be 
</I>&gt;<i>able
</I>&gt;<i>to have two threads that each have their own reactor.  But I guess I'm
</I>&gt;<i>just ranting now. :)
</I>
I completely agree, architecturally speaking, for Twisted, that this is 
a good idea.  I already linked to 
&lt;<A HREF="http://twistedmatrix.com/trac/ticket/3205">http://twistedmatrix.com/trac/ticket/3205</A>&gt; in this thread, which is a 
broad outline of my long-term plan to eliminate the reactor's singleton- 
ness.

On the other hand, the approach you're describing here, using Twisted 
&quot;just a little&quot;, starting up a reactor and spinning it in some obscure 
corner of an application, is basically an architectural antipattern, 
which should be avoided as much as possible.  One of the hardest things 
to do on a modern software project is to keep a coherent high-level 
system design that makes enough sense to introduce new people to it. 
Concurrency, in particular, is a property which is basically impossible 
to introduce into a software system without a comprehensive rethinking 
of how the whole thing works.

I can definitely think of a few &quot;larger projects&quot; - names withheld to 
protect the guilty - whose designs have been influenced and 
rehabilitated by their decision to use Twisted.  I worry about making it 
easier to throw Twisted into a situation where it will make the overall 
design of a system into even more of an incomprehensible mess.  Just 
imagine trying to decipher a GUI project using Twisted for networking, 
where there are 3 or 4 different global reactors, each of which is used 
by a different window or dialog box, and you have to figure out which 
one you need based on what context your Twisted-using code is running 
in.

It's nice to be able to say &quot;you can't do that, it's impossible&quot;, when 
someone asks how to set up something like that.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003981.html">[Twisted-web] Having reactor run at the main thread make
	things harder for late adopters
</A></li>
	<LI>Next message: <A HREF="003983.html">[Twisted-web] Having reactor run at the main thread make
	things harder for late adopters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3982">[ date ]</a>
              <a href="thread.html#3982">[ thread ]</a>
              <a href="subject.html#3982">[ subject ]</a>
              <a href="author.html#3982">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
