<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Having reactor run at the main thread make things
	harder for late adopters
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Having%20reactor%20run%20at%20the%20main%20thread%20make%20things%0A%09harder%20for%20late%20adopters&In-Reply-To=20081105211925.GC3797%40mcnabbs.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003983.html">
   <LINK REL="Next"  HREF="003986.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Having reactor run at the main thread make things
	harder for late adopters</H1>
    <B>glyph at divmod.com</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Having%20reactor%20run%20at%20the%20main%20thread%20make%20things%0A%09harder%20for%20late%20adopters&In-Reply-To=20081105211925.GC3797%40mcnabbs.org"
       TITLE="[Twisted-web] Having reactor run at the main thread make things
	harder for late adopters">glyph at divmod.com
       </A><BR>
    <I>Wed Nov  5 21:55:37 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003983.html">[Twisted-web] Having reactor run at the main thread make
	things harder for late adopters
</A></li>
        <LI>Next message: <A HREF="003986.html">[Twisted-web] Having reactor run at the main thread make things
	harder for late adopters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3985">[ date ]</a>
              <a href="thread.html#3985">[ thread ]</a>
              <a href="subject.html#3985">[ subject ]</a>
              <a href="author.html#3985">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 5 Nov, 09:19 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">amcnabb at mcnabbs.org</A> wrote:
&gt;<i>On Wed, Nov 05, 2008 at 07:24:31PM -0000, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">glyph at divmod.com</A> wrote:
</I>
&gt;&gt;<i>On the other hand, the approach you're describing here, using Twisted
</I>&gt;&gt;<i>&quot;just a little&quot;, ... is basically an architectural antipattern,
</I>&gt;&gt;<i>which should be avoided as much as possible.
</I>&gt;<i>
</I>&gt;<i>I agree that it should be avoided as much as possible, but I don't 
</I>&gt;<i>think
</I>&gt;<i>that it should be impossible to do.  Suppose, for example, that you are
</I>&gt;<i>refactoring a project to use Twisted.
</I>
Sure.
&gt;<i>Give me any API, and I can create a program that misuses it. :)
</I>
Oh, come on.  This is a totally bogus argument, and I suspect you 
already know that :).  First of all, it's not true: in some languages (E 
comes to mind) it is possible to create APIs which are literally not 
abusable (for some suitable definition of &quot;abuse&quot;, this one about global 
state included).

It's the thing Perl people say when you corner them and make a strong 
case that Python is objectively more readable than Perl.  &quot;Sure, but you 
can create an unreadable program in any language&quot;.  That's not the 
point; the point is, does tool X make it more *likely* that you'll 
create maintainable programs?  Does X help people learn how to create 
maintainable programs?  Twisted should be doing those things.
&gt;<i>I think the following use cases for mutliple reactors outweigh the
</I>&gt;<i>potential risks:
</I>
This is almost certainly true, and as I've already said I am keenly 
interested in de-globalizing the reactor myself; making it easier to 
test things is a key reason for doing so.  However, we should be aware 
of the risks and try to mitigate them.  It could well be that we could 
come up with an API which is smooth as glass for the &quot;good&quot; use-cases we 
have in mind here, and raises exceptions or emits helpful warnings when 
used for the &quot;bad&quot; ones.  Maybe that's not possible, maybe we can only 
get halfway there: but it would be nice to try.

In fact, it would be a much better influence on architecture to have 
intentional, helpful error messages rather than buggy, non-deterministic 
and unsupported behavior.
&gt;<i>- k threads that each have their own reactor
</I>
This is a whole other, almost unrelated can of worms.  You can only use 
Twisted from one thread at a time.  There are things which make 
assumptions about non-reentrancy and mutual exclusion of global module- 
level state.  You can find and fix every instance of this if you want, 
but don't bundle it in with multiple reactors :).
&gt;&gt;<i>It's nice to be able to say &quot;you can't do that, it's impossible&quot;, when
</I>&gt;&gt;<i>someone asks how to set up something like that.
</I>&gt;<i>
</I>&gt;<i>If I wanted to be constantly told &quot;you can't do that, it's impossible&quot;,
</I>&gt;<i>I wouldn't be a Python guy.  If I want to shoot myself in the foot,
</I>&gt;<i>that's my problem.  :)
</I>
Another bogus argument.  There are lots of things that are &quot;impossible&quot; 
in Python.  For example, you &quot;can't&quot; change the values of a tuple, or 
the contents of a string.  I mean, there's terrible stuff you can do 
with ctypes, but if it breaks, you get to keep both pieces.  Similarly, 
there are lots of things that already kind of work, by accident, if you 
instantiate multiple reactors; you can kind of re-set a reactor if you 
know exactly what to twiddle.

When I say it's nice to be able to say that something's impossible, that 
doesn't mean that I don't want to support all the reasonable use-cases, 
just that boundaries are a useful tool.  This is very much the Python 
idiom - consider your options for indenting your code in strange ways, 
for example :).

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003983.html">[Twisted-web] Having reactor run at the main thread make
	things harder for late adopters
</A></li>
	<LI>Next message: <A HREF="003986.html">[Twisted-web] Having reactor run at the main thread make things
	harder for late adopters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3985">[ date ]</a>
              <a href="thread.html#3985">[ thread ]</a>
              <a href="subject.html#3985">[ subject ]</a>
              <a href="author.html#3985">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
