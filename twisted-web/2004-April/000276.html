<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Performance of twisted web with HTTP/1.1 vs.
	HTTP/1.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Performance%20of%20twisted%20web%20with%20HTTP/1.1%20vs.%0A%09HTTP/1.0&In-Reply-To=20040405144204.GA32506%40frobozz">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000287.html">
   <LINK REL="Next"  HREF="000272.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Performance of twisted web with HTTP/1.1 vs.
	HTTP/1.0</H1>
    <B>Jason E. Sibre</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Performance%20of%20twisted%20web%20with%20HTTP/1.1%20vs.%0A%09HTTP/1.0&In-Reply-To=20040405144204.GA32506%40frobozz"
       TITLE="[Twisted-web] Performance of twisted web with HTTP/1.1 vs.
	HTTP/1.0">jsibre at sibre.org
       </A><BR>
    <I>Mon Apr  5 11:26:48 MDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000287.html">[Twisted-web] Performance of twisted web with HTTP/1.1 vs.
	HTTP/1.0
</A></li>
        <LI>Next message: <A HREF="000272.html">[Twisted-web] Re: [PATCH] nevow.static.File directory listing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#276">[ date ]</a>
              <a href="thread.html#276">[ thread ]</a>
              <a href="subject.html#276">[ subject ]</a>
              <a href="author.html#276">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>ACT is part of the Microsoft Visual Studio .NET.  It stands for Application
Center Test.  The reason I tried it is that it allows the person setting up
the test to control which headers are sent to the server.  In fact, the test
is actually controlled programmatically via VBScript (it hooks into Internet
Explorer to 'record' the test, if you don't want to create it from scratch,
which would be very tedious).

If there's an open source tester that you'd rather I use for this
discussion, please let me know about it, and I'll chase it down.

In the meantime, I'm attaching the test script that is being used
(test.vbs).  It's written in VBScript, but it can't be run standalone, as
the &quot;Test&quot; object won't exist unless it's being run from the ACT.  It is
easy to read however, so you can see what's going on.

I've modified a portion of the script that ties Quixote to Twisted, so that
I can 'peek' at the HTTP headers going into/coming out of Quixote.  Here are
the headers when things are running fast:

INBOUND header GATEWAY_INTERFACE: CGI/1.1
INBOUND header HTTPS: off
INBOUND header HTTP_ACCEPT: */*
INBOUND header HTTP_ACCEPT_LANGUAGE: en-us
INBOUND header HTTP_HOST: prototype.sibre.org:8081
INBOUND header HTTP_USER_AGENT: Mozilla/4.0 (compatible; MSIE 6.0; Windows
NT 5.0; .NET CLR 1.1.4322)
INBOUND header PATH_INFO: /static/htmlarea/images/ed_image.gif
INBOUND header QUERY_STRING:
INBOUND header REMOTE_ADDR: 192.168.1.253
INBOUND header REMOTE_HOST: 192.168.1.253
INBOUND header REMOTE_PORT: 1308
INBOUND header REQUEST_METHOD: GET
INBOUND header REQUEST_URI: /static/htmlarea/images/ed_image.gif
INBOUND header SCRIPT_FILENAME:
INBOUND header SCRIPT_NAME:
INBOUND header SERVER_NAME: prototype.sibre.org
INBOUND header SERVER_PORT: 8081
INBOUND header SERVER_PROTOCOL: HTTP/1.0
INBOUND header SERVER_SOFTWARE: TwistedWeb/1.2.0


And here they are when things are running slow:

INBOUND header GATEWAY_INTERFACE: CGI/1.1
INBOUND header HTTPS: off
INBOUND header HTTP_ACCEPT: */*
INBOUND header HTTP_ACCEPT_LANGUAGE: en-us
INBOUND header HTTP_HOST: prototype.sibre.org:8081
INBOUND header HTTP_USER_AGENT: Mozilla/4.0 (compatible; MSIE 6.0; Windows
NT 5.0; .NET CLR 1.1.4322)
INBOUND header PATH_INFO: /static/htmlarea/images/ed_image.gif
INBOUND header QUERY_STRING:
INBOUND header REMOTE_ADDR: 192.168.1.253
INBOUND header REMOTE_HOST: 192.168.1.253
INBOUND header REMOTE_PORT: 1445
INBOUND header REQUEST_METHOD: GET
INBOUND header REQUEST_URI: /static/htmlarea/images/ed_image.gif
INBOUND header SCRIPT_FILENAME:
INBOUND header SCRIPT_NAME:
INBOUND header SERVER_NAME: prototype.sibre.org
INBOUND header SERVER_PORT: 8081
INBOUND header SERVER_PROTOCOL: HTTP/1.1
INBOUND header SERVER_SOFTWARE: TwistedWeb/1.2.0

I only note two differences, the HTTP/1.0 vs. HTTP/1.1 and the REMOTE_PORT
1308 vs. 1445, so, one significant difference.

Not much help, I guess, but does it give you any clues?

(I've joined the Twisted-web list for the duration of this conversation, at
least)

Thanks,

Jason Sibre








&gt;<i> -----Original Message-----
</I>&gt;<i> From: Andrew Bennetts [mailto:<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">andrew-twisted at puzzling.org</A>]
</I>&gt;<i> Sent: Monday, April 05, 2004 9:42 AM
</I>&gt;<i> To: <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">twisted-web at twistedmatrix.com</A>
</I>&gt;<i> Cc: <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">jsibre at chironsys.com</A>
</I>&gt;<i> Subject: Re: [Twisted-web] Performance of twisted web with HTTP/1.1 vs.
</I>&gt;<i> HTTP/1.0
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Wed, Mar 17, 2004 at 11:02:54AM -0600, Jason Sibre wrote:
</I>&gt;<i> [...]
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ab uses HTTP/1.0 to test an app, and of course most browsers
</I>&gt;<i> use HTTP/1.1.
</I>&gt;<i> &gt; I set up another, more sophisticated, test suite (ACT), where I could
</I>&gt;<i> &gt; control the protocol, and ran the tests through it, and I
</I>&gt;<i> confirmed that the
</I>&gt;<i> &gt; protocol level was definitely the culprit.
</I>&gt;<i>
</I>&gt;<i> Where can I find this &quot;ACT&quot; test suite?  My attempts to google for it have
</I>&gt;<i> failed.
</I>&gt;<i>
</I>&gt;<i> I've run some quick &amp; dodgy local tests with persistent connections and
</I>&gt;<i> chunked encoding that found that no differences even close to 20x slower
</I>&gt;<i> that you're seeing.  I can't think of any other significant
</I>&gt;<i> differences that
</I>&gt;<i> HTTP/1.1 might trigger, though.
</I>&gt;<i>
</I>&gt;<i> Failing all else, a copy of the exact text of the request your test suite
</I>&gt;<i> sends would be handy.
</I>&gt;<i>
</I>&gt;<i> &gt; I'm not a member of this list, so if you have a reply, please cc me
</I>&gt;<i> &gt; directly.
</I>&gt;<i>
</I>&gt;<i> Done.
</I>&gt;<i>
</I>&gt;<i> -Andrew.
</I>&gt;<i>
</I>-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.vbs
Type: application/octet-stream
Size: 1390 bytes
Desc: not available
Url : <A HREF="http://pyramid.twistedmatrix.com/pipermail/twisted-web/attachments/20040405/1eb9860f/test-0001.obj">http://pyramid.twistedmatrix.com/pipermail/twisted-web/attachments/20040405/1eb9860f/test-0001.obj</A>
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000287.html">[Twisted-web] Performance of twisted web with HTTP/1.1 vs.
	HTTP/1.0
</A></li>
	<LI>Next message: <A HREF="000272.html">[Twisted-web] Re: [PATCH] nevow.static.File directory listing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#276">[ date ]</a>
              <a href="thread.html#276">[ thread ]</a>
              <a href="subject.html#276">[ subject ]</a>
              <a href="author.html#276">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
