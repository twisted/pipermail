<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Nevow Templating question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Nevow%20Templating%20question&In-Reply-To=103A825F-8D05-11D8-9A79-000A95A6EFE6%40mastersofbranding.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000303.html">
   <LINK REL="Next"  HREF="000306.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Nevow Templating question</H1>
    <B>indigo at bitglue.com</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Nevow%20Templating%20question&In-Reply-To=103A825F-8D05-11D8-9A79-000A95A6EFE6%40mastersofbranding.com"
       TITLE="[Twisted-web] Nevow Templating question">indigo at bitglue.com
       </A><BR>
    <I>Tue Apr 13 02:54:45 MDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000303.html">[Twisted-web] Nevow Templating question
</A></li>
        <LI>Next message: <A HREF="000306.html">[Twisted-web] twcgi.py changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#305">[ date ]</a>
              <a href="thread.html#305">[ thread ]</a>
              <a href="subject.html#305">[ subject ]</a>
              <a href="author.html#305">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Another option:

&lt;select n:render='sequence' n:data='cityList'&gt;
  &lt;option n:render='city' n:pattern='item'&gt;
    &lt;n:attr name='value'&gt;&lt;n:slot name='value'/&gt;&lt;/n:attr&gt;
    &lt;n:slot name='city'/&gt;
  &lt;/option&gt;
&lt;/select&gt;

def data_cityList( self, context, data ):
  return [(&quot;New York&quot;,'1'), (&quot;Los Angeles&quot;,'2')]

def render_city( self, context, (city, value) ):
  context.fillSlots( 'value', value )
  context.fillSlots( 'city', city )

'sequence' is a built-in renderer that takes a list as data, and repeats the
nested 'item' pattern with each element of the list as data. It also accepts
patterns 'header', 'footer', and 'divider', but those arn't useful in this
case.

The data_cityList is changed to return a list of tuples, otherwise you will
have no control over the order of the items.

Also, this uses &lt;n:attr&gt;, which was just added to svn less than a day ago,
and atm only works with xmlfile. This allows putting slots in attributes.

Alternately, for something that doesn't use &lt;n:attr&gt; and isn't as verbose,
you could do:

&lt;select n:render='sequence' n:data='cityList'&gt;
  &lt;option n:render='city' n:pattern='item'&gt;
    the contents of this node don't matter
  &lt;/option&gt;
&lt;select&gt;

and change render_city to return a literal stan tag:

def render_city( self, context, (city, value) ):
  from nevow.tags import *
  return option( value=value )[city]


On Tue, Apr 13, 2004 at 12:43:09AM -0400, jonathan vanasco wrote:
&gt;<i> 
</I>&gt;<i> This works, but I think the approach might be wrong.
</I>&gt;<i> (the output is what I want it to be, but I think I may have implemented 
</I>&gt;<i> things counter to the way nevow was designed)
</I>&gt;<i> 
</I>&gt;<i> Can someone please offer their input?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> template.html
</I>&gt;<i> -------------------
</I>&gt;<i> &lt;tr&gt;
</I>&gt;<i> 	&lt;td valign=&quot;top&quot;&gt; pick a city&lt;/td&gt;
</I>&gt;<i> 	&lt;td&gt;
</I>&gt;<i> 		&lt;select name=&quot;city&quot;&gt;
</I>&gt;<i> 		&lt;span nevow:data=&quot;citiesList&quot; nevow:render=&quot;city&quot;&gt;&lt;/span&gt;
</I>&gt;<i> 		&lt;/select&gt;
</I>&gt;<i> 	&lt;/td&gt;
</I>&gt;<i> &lt;/tr&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> testing.py
</I>&gt;<i> -------------------
</I>&gt;<i> 	def data_citiesList(self, context, data):
</I>&gt;<i> 		return {&quot;New York&quot;:'1', &quot;Los Angeles&quot;:'2'}
</I>&gt;<i> 	def render_city(self, context, data):
</I>&gt;<i> 		&quot;&quot;&quot;Example of using stan to render a page.
</I>&gt;<i> 		&quot;&quot;&quot;
</I>&gt;<i> 		return rend.stan(
</I>&gt;<i> 			[
</I>&gt;<i> 				T.option(value=v)[k] for (k,v) in 
</I>&gt;<i> 				data.items()
</I>&gt;<i> 			]
</I>&gt;<i> 		)
</I>&gt;<i> 
</I>&gt;<i> Output.html
</I>&gt;<i> ----------------
</I>&gt;<i> &lt;tr&gt;
</I>&gt;<i> 	&lt;td valign=&quot;top&quot;&gt; pick a city&lt;/td&gt;
</I>&gt;<i> 	&lt;td&gt;
</I>&gt;<i> 		&lt;select name=&quot;city&quot;&gt;
</I>&gt;<i> 			&lt;option value=1&gt;New York&lt;/option&gt;
</I>&gt;<i> 			&lt;option value=2&gt;Los Angeles&lt;/option&gt;
</I>&gt;<i> 		&lt;/select&gt;
</I>&gt;<i> 	&lt;/td&gt;
</I>&gt;<i> &lt;/tr&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-web mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">Twisted-web at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web</A>
</I>
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000303.html">[Twisted-web] Nevow Templating question
</A></li>
	<LI>Next message: <A HREF="000306.html">[Twisted-web] twcgi.py changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#305">[ date ]</a>
              <a href="thread.html#305">[ thread ]</a>
              <a href="subject.html#305">[ subject ]</a>
              <a href="author.html#305">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
