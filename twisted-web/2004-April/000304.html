<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Re: choosing between nodes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Re%3A%20choosing%20between%20nodes&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000297.html">
   <LINK REL="Next"  HREF="000308.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Re: choosing between nodes</H1>
    <B>Alex Martelli</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Re%3A%20choosing%20between%20nodes&In-Reply-To="
       TITLE="[Twisted-web] Re: choosing between nodes">aleaxit at yahoo.com
       </A><BR>
    <I>Tue Apr 13 01:35:48 MDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000297.html">[Twisted-web] choosing between nodes
</A></li>
        <LI>Next message: <A HREF="000308.html">[Twisted-web] operating on literals in nevow html templates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#304">[ date ]</a>
              <a href="thread.html#304">[ thread ]</a>
              <a href="subject.html#304">[ subject ]</a>
              <a href="author.html#304">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Alex Levy wrote:

&gt;<i> On Sat, 2004-04-10 at 18:27, Ellers wrote:
</I>&gt;&gt;<i> &lt;div id=&quot;content&quot;&gt;
</I>&gt;&gt;<i>  &lt;span nevow:data=&quot;display&quot; nevow:render=&quot;xml&quot;/&gt;
</I>&gt;&gt;<i>  &lt;span nevow:data=&quot;edit&quot; nevow:render=&quot;xml&quot;&gt;
</I>&gt;&gt;<i>   &lt;form&gt;this is edit: more will go in here...&lt;/form&gt;
</I>&gt;&gt;<i>  &lt;/span&gt;
</I>&gt;&gt;<i>  &lt;span nevow:data=&quot;save&quot; nevow:render=&quot;xml/&gt;
</I>&gt;&gt;<i>   &lt;p&gt;you have saved: &lt;span nevow:data=&quot;saved_data&quot; nevow:render=&quot;xml/&gt;
</I>&gt;&gt;<i>  &lt;/span&gt;
</I>&gt;&gt;<i> &lt;/div&gt;
</I>&gt;<i> 
</I>&gt;<i> First off, you don't want to be using span tags, you want to be using
</I>&gt;<i> div tags -- span tags aren't block elements, so they aren't supposed to
</I>&gt;<i> contain things like forms and paragraphs (as far as I understand).
</I>
Unless you really need some tag to be in the output, which is unusual for
span and div unless you're placing HTML attributes on them, you may prefer
to attach your &quot;rendering logic&quot; to &lt;nevow:invisible&gt; tags instead.  Those
won't show up in the resulting HTML, which makes it &quot;lighter&quot;.

As I often need selective output, I have a very simple general-purpose
renderer:

    def render_ifeq(self, context, data):
        if data != (context.tag.pattern or ''):
            return ''
        return context.tag

If you have, for example, a data_state that returns as the current data a
string which represents some kind of &quot;state&quot;, you could code the template:

&lt;nevow:invisible nevow:data=&quot;state&quot;&gt;
    &lt;nevow:invisible nevow:render=&quot;ifeq&quot; nevow:pattern=&quot;edit&quot;&gt;
        &lt;p&gt; You are editing the object. &lt;/p&gt;
    &lt;/nevow:invisible&gt;
    &lt;nevow:invisible nevow:render=&quot;ifeq&quot; nevow:pattern=&quot;save&quot;&gt;
        &lt;p&gt; Your changes have been saved. &lt;/p&gt;
    &lt;/nevow:invisible&gt;
    &lt;nevow:invisible nevow:render=&quot;ifeq&quot; nevow:pattern=&quot;view&quot;&gt;
        &lt;p&gt; Your are just viewing the object. &lt;/p&gt;
    &lt;/nevow:invisible&gt;
&lt;/nevow:invisible&gt;

This will emit a single one of the three &lt;p&gt;'s as appropriate.  Several
other similar approaches are possible, e.g., put the patterns on the tags
among which you want to choose, and have the renderer examine all contained
patterns and pick the right one[s]; generalize ifeq to an ifmatch that
treats patterns as regular expressions; and so on, and so forth.  I'm
striving to avoid obscuring my stuff with excessive and unwarranted
generality, and so far I've found the simple ifeq serves my purpose, so
that's what I'm currently using.

I _think_ (I could be wrong...) that using nevow:pattern as the &quot;argument&quot;
to be used by data and render methods is quite consonant to nevow's design;
there used to be some confusion, e.g. with the quondam nevow:key, but now
that nevow:pattern is all that's left the approach appears to be to be
simple and effective, allowing you to pick the right degree of generality.
  

Alex



</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000297.html">[Twisted-web] choosing between nodes
</A></li>
	<LI>Next message: <A HREF="000308.html">[Twisted-web] operating on literals in nevow html templates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#304">[ date ]</a>
              <a href="thread.html#304">[ thread ]</a>
              <a href="subject.html#304">[ subject ]</a>
              <a href="author.html#304">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
