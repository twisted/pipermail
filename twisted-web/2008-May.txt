From kozneb at gmail.com  Wed May  7 06:24:18 2008
From: kozneb at gmail.com (=?UTF-8?Q?Harald_Bl=C3=A5tand?=)
Date: Wed May  7 06:24:28 2008
Subject: [Twisted-web] Nevow.Athena.PageWidget - events not caught in IE
In-Reply-To: <20080429130931.GA15820@mithrandi.net>
References: <1ff309e60804290339l1bd45e6bw2c20de6faf8cefb6@mail.gmail.com>
	<20080429110449.6859.923790625.divmod.quotient.56602@ohm>
	<1ff309e60804290536o6a75860cxcdc4901bdf588ae6@mail.gmail.com>
	<20080429130931.GA15820@mithrandi.net>
Message-ID: <1ff309e60805070324o515b4376m72ab36143f94b7ca@mail.gmail.com>

T24gNC8yOS8wOCwgVHJpc3RhbiBTZWxpZ21hbm4gPG1pdGhyYW5kaUBtaXRocmFuZGkubmV0PiB3
cm90ZToKCj4KPiBUaGVyZSBpcyBkZWZpbml0ZWx5IGEgcmVncmVzc2lvbiBpbiBBdGhlbmEgb24g
SUUgKGJvdGggNiBhbmQgNykKPiByZWdhcmRpbmcgb257YmVmb3JlLH11bmxvYWQ7CgoKVHJpc3Rh
biwKVGhpcyBpcyBfbm90XyBhIHllbGwgZm9yIGhlbHA7IGl0J3MgbW9yZSBsaWtlIEknbSB0aGlu
a2luZyg/KSBhbG91ZC4uCgpKdXN0IHRob3VnaHQgdGhhdCBzaW5jZSB3ZSBoYXZlIElFIGFsbCBv
dmVyIHRoZSBwbGFjZSwgYW5kIHdlIGNhbid0IGhhdmUgYW4KYXBwIHRoYXQgZnJlZXplcyBpZiBh
IHVzZXIgcmVmcmVzaGVzIGl0LCBJIG1pZ2h0IG1ha2UgYSBmZWVibGUgYXR0ZW1wdC4uLiBCeQot
IHJlYWRpbmcgdXAgb24gZXZlbnQgaGFuZGxpbmcgaW4gSUUgdnMgRkYgKGFpbid0IE0kIGN1dGUh
IDpdICkKLSB0cnlpbmcgdG8gdW5kZXJzdGFuZCB5b3VyIGNvZGUgKEknbSBsZWFybmluZyBhIGxv
dCAoY29tcGxpbWVudCEpKQoKQXMgZmFyIGFzIEkgdW5kZXJzdGFuZCB0aGluZ3MsIGl0J3MgYXQg
bGVhc3QgcGFydGx5IHJlbGF0ZWQgdG8gSUUncyB2cyBGRidzCmRpZmZlcmVudCBtZWFuaW5nIG9m
ICJ0aGlzIiB3aGVuIGEgd2luZG93IGV2ZW50IGZpcmVzLgpIYXZlbid0IGdvdCB0b28gZmFyIHll
dCwgYnV0IGJlZm9yZSByYW1ibGluZyBvbiAtIGEgcXVlc3Rpb246CgpJcyB0aGVyZSBhbnkgdXNl
IHRoYXQgSSBmaWRkbGUgb24gd2l0aCB0aGlzLCBvciBoYXZlIHlvdSBhbHJlYWR5IGZpeGVkIGl0
Pz8KCkJlc3QgcmVnYXJkcywKSGFyYWxkCi0tLS0tLS0tLS0tLS0tIG5leHQgcGFydCAtLS0tLS0t
LS0tLS0tLQpBbiBIVE1MIGF0dGFjaG1lbnQgd2FzIHNjcnViYmVkLi4uClVSTDogaHR0cDovL3R3
aXN0ZWRtYXRyaXguY29tL3BpcGVybWFpbC90d2lzdGVkLXdlYi9hdHRhY2htZW50cy8yMDA4MDUw
Ny8wN2U2NjFlMS9hdHRhY2htZW50Lmh0bQo=
From mithrandi at mithrandi.net  Wed May  7 06:49:00 2008
From: mithrandi at mithrandi.net (Tristan Seligmann)
Date: Wed May  7 06:49:09 2008
Subject: [Twisted-web] Nevow.Athena.PageWidget - events not caught in IE
In-Reply-To: <1ff309e60805070324o515b4376m72ab36143f94b7ca@mail.gmail.com>
References: <1ff309e60804290339l1bd45e6bw2c20de6faf8cefb6@mail.gmail.com>
	<20080429110449.6859.923790625.divmod.quotient.56602@ohm>
	<1ff309e60804290536o6a75860cxcdc4901bdf588ae6@mail.gmail.com>
	<20080429130931.GA15820@mithrandi.net>
	<1ff309e60805070324o515b4376m72ab36143f94b7ca@mail.gmail.com>
Message-ID: <20080507104859.GA32301@mithrandi.net>

KiBIYXJhbGQgQmzDpXRhbmQgPGtvem5lYkBnbWFpbC5jb20+IFsyMDA4LTA1LTA3IDEyOjI0OjE4
ICswMjAwXToKCj4gSnVzdCB0aG91Z2h0IHRoYXQgc2luY2Ugd2UgaGF2ZSBJRSBhbGwgb3ZlciB0
aGUgcGxhY2UsIGFuZCB3ZSBjYW4ndCBoYXZlIGFuCj4gYXBwIHRoYXQgZnJlZXplcyBpZiBhIHVz
ZXIgcmVmcmVzaGVzIGl0LCBJIG1pZ2h0IG1ha2UgYSBmZWVibGUgYXR0ZW1wdC4uLiBCeQoKSW5k
ZWVkLCBJJ20gaW4gdGhlIHNhbWUgcG9zaXRpb24gd2l0aCBteSBvd24gYXBwbGljYXRpb246IG91
ciB1c2VyYmFzZQppcyBjdXJyZW50bHkgMTAwJSBJRS11c2luZywgd2l0aCB0aGUgZXhjZXB0aW9u
IG9mIHVzIGRldmVsb3BlcnMgOykKCj4gSXMgdGhlcmUgYW55IHVzZSB0aGF0IEkgZmlkZGxlIG9u
IHdpdGggdGhpcywgb3IgaGF2ZSB5b3UgYWxyZWFkeSBmaXhlZCBpdD8/CgpJIGhhdmVuJ3QgeWV0
IGhhZCB0aGUgY2hhbmNlIHRvIHRyYWNrIHRoaXMgZG93biwgc28gYnkgYWxsIG1lYW5zLCBnbwph
aGVhZCA6KSAobXkgcHJvZHVjdGlvbiBkZXBsb3ltZW50IGN1cnJlbnRseSBoYXMgdGhlIHBhcnRp
Y3VsYXIgcmV2aXNpb24KSSBtZW50aW9uZWQgcmV2ZXJ0ZWQgc28gdGhhdCBvdXIgdXNlcnMgYXJl
bid0IGNyaXBwbGVkKQotLSAKbWl0aHJhbmRpLCBpIEFpbmlsIGVuLUJhbGFuZG9yLCBhIGZhZXIg
QW1iYXIKLS0tLS0tLS0tLS0tLS0gbmV4dCBwYXJ0IC0tLS0tLS0tLS0tLS0tCkEgbm9uLXRleHQg
YXR0YWNobWVudCB3YXMgc2NydWJiZWQuLi4KTmFtZTogbm90IGF2YWlsYWJsZQpUeXBlOiBhcHBs
aWNhdGlvbi9wZ3Atc2lnbmF0dXJlClNpemU6IDE5NyBieXRlcwpEZXNjOiBEaWdpdGFsIHNpZ25h
dHVyZQpVcmwgOiBodHRwOi8vdHdpc3RlZG1hdHJpeC5jb20vcGlwZXJtYWlsL3R3aXN0ZWQtd2Vi
L2F0dGFjaG1lbnRzLzIwMDgwNTA3L2I5YTE4OWI0L2F0dGFjaG1lbnQucGdwCg==
From wthie at thiengineering.ch  Wed May  7 12:23:47 2008
From: wthie at thiengineering.ch (Werner Thie)
Date: Wed May  7 12:24:02 2008
Subject: [Twisted-web] Nevow.Athena.PageWidget - events not caught in
 IE
In-Reply-To: <20080507104859.GA32301@mithrandi.net>
References: <1ff309e60804290339l1bd45e6bw2c20de6faf8cefb6@mail.gmail.com>	<20080429110449.6859.923790625.divmod.quotient.56602@ohm>	<1ff309e60804290536o6a75860cxcdc4901bdf588ae6@mail.gmail.com>	<20080429130931.GA15820@mithrandi.net>	<1ff309e60805070324o515b4376m72ab36143f94b7ca@mail.gmail.com>
	<20080507104859.GA32301@mithrandi.net>
Message-ID: <4821D793.5060507@thiengineering.ch>

Just a thought:

We ran into problems with Athena and the releases from nevow after
SVN 13786 (was a major upgrade) and IE due to the following policy MS 
introduced: IE seems to limit the connections allowed to 2max, which 
blocks IE when for instance running the Athena calculator sample and 
doing a page refresh or two.

It seems that tearing down athena and bringing it up again may in some 
cases 'hang' IE (socket states is TIME_WAIT) for around 120 secs. The 
same happens when going from one livepage to another.

I am writing this on a hunch and from memory, apologies if the problems 
are not related.

If they are, I am glad to help digging :-)

Our solution for this particular problem was to hang back on SVN rev 
13786 for nevow until fixed. Server runs ok with several hundred 
LivePages connected.

HTH, Werner


Tristan Seligmann wrote:
> * Harald Bl?tand <kozneb@gmail.com> [2008-05-07 12:24:18 +0200]:
> 
>> Just thought that since we have IE all over the place, and we can't have an
>> app that freezes if a user refreshes it, I might make a feeble attempt... By
> 
> Indeed, I'm in the same position with my own application: our userbase
> is currently 100% IE-using, with the exception of us developers ;)
> 
>> Is there any use that I fiddle on with this, or have you already fixed it??
> 
> I haven't yet had the chance to track this down, so by all means, go
> ahead :) (my production deployment currently has the particular revision
> I mentioned reverted so that our users aren't crippled)
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Twisted-web mailing list
> Twisted-web@twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web

From kozneb at gmail.com  Wed May  7 13:41:16 2008
From: kozneb at gmail.com (=?UTF-8?Q?Harald_Bl=C3=A5tand?=)
Date: Wed May  7 13:41:22 2008
Subject: [Twisted-web] Nevow.Athena.PageWidget - events not caught in IE
In-Reply-To: <20080507104859.GA32301@mithrandi.net>
References: <1ff309e60804290339l1bd45e6bw2c20de6faf8cefb6@mail.gmail.com>
	<20080429110449.6859.923790625.divmod.quotient.56602@ohm>
	<1ff309e60804290536o6a75860cxcdc4901bdf588ae6@mail.gmail.com>
	<20080429130931.GA15820@mithrandi.net>
	<1ff309e60805070324o515b4376m72ab36143f94b7ca@mail.gmail.com>
	<20080507104859.GA32301@mithrandi.net>
Message-ID: <1ff309e60805071041g3047ab2alc03566876c236e70@mail.gmail.com>

T24gV2VkLCBNYXkgNywgMjAwOCBhdCAxMjo0OSBQTSwgVHJpc3RhbiBTZWxpZ21hbm4gPG1pdGhy
YW5kaUBtaXRocmFuZGkubmV0Pgp3cm90ZToKCj4gKiBIYXJhbGQgQmzDpXRhbmQgPGtvem5lYkBn
bWFpbC5jb20+IFsyMDA4LTA1LTA3IDEyOjI0OjE4ICswMjAwXToKPgo+ID4gSnVzdCB0aG91Z2h0
IHRoYXQgc2luY2Ugd2UgaGF2ZSBJRSBhbGwgb3ZlciB0aGUgcGxhY2UsIGFuZCB3ZSBjYW4ndCBo
YXZlCj4gYW4KPiA+IGFwcCB0aGF0IGZyZWV6ZXMgaWYgYSB1c2VyIHJlZnJlc2hlcyBpdCwgSSBt
aWdodCBtYWtlIGEgZmVlYmxlCj4gYXR0ZW1wdC4uLiBCeQo+Cj4gSW5kZWVkLCBJJ20gaW4gdGhl
IHNhbWUgcG9zaXRpb24gd2l0aCBteSBvd24gYXBwbGljYXRpb246IG91ciB1c2VyYmFzZQo+IGlz
IGN1cnJlbnRseSAxMDAlIElFLXVzaW5nLCB3aXRoIHRoZSBleGNlcHRpb24gb2YgdXMgZGV2ZWxv
cGVycyA7KQo+Cj4KSSBtYXkgaGF2ZSBzb21ldGhpbmcgbm93IHRoYXQga2VlcHMgSUUgZnJvbSBo
YW5naW5nIG9uIGEgcGFnZSByZWZyZXNoLgpIZXJlJ3Mgd2hhdCBJJ3ZlIGNoYW5nZWQgaW4gdGhl
IDAuOS4zMSBKUyBjb2RlOgoKLS0tLS0tLS0tLS0tLS0tLS0tIE5ldm93L0F0aGVuYS9fX2luaXRf
Xy5qcyAoMiBhZGRpdGlvbnMpCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCk5ldm93LkF0aGVu
YS5XaWRnZXQuX2luaXRpYWxpemUgPSBmdW5jdGlvbigpIHsKICAgIERpdm1vZC5kZWJ1Zygid2lk
Z2V0IiwgIkluc3RhbnRpYXRpbmcgbGl2ZSB3aWRnZXRzIik7CiAgICBOZXZvdy5BdGhlbmEuV2lk
Z2V0Ll9wYWdlTG9hZGVkID0gdHJ1ZTsKICAgIC8vIFdpdGggdGhlIG5leHQgbGluZSwgc2VuZENs
b3NlTWVzc2FnZSB3aWxsIGdldCBjYWxsZWQgaW4gSUUuIC8vIEhhcmFsZAogICAgRGl2bW9kLkJh
c2UuYWRkVW5Mb2FkRXZlbnQoTmV2b3cuQXRoZW5hLnBhZ2UuZGVsaXZlcnlDaGFubmVsKTsgLy8g
SGFyYWxkCiAgICBOZXZvdy5BdGhlbmEuV2lkZ2V0Ll9pbnN0YW50aWF0ZVdpZGdldHMoKTsKICAg
IERpdm1vZC5kZWJ1Zygid2lkZ2V0IiwgIkZpbmlzaGVkIGluc3RhbnRpYXRpbmcgbGl2ZSB3aWRn
ZXRzIik7Cn07Ck5ldm93LkF0aGVuYS5ib290c3RyYXAgPSBmdW5jdGlvbiAocGFnZUNsYXNzTmFt
ZSwgY2xpZW50SUQpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYWdlQ2xhc3MgPSBE
aXZtb2QubmFtZWRBbnkocGFnZUNsYXNzTmFtZSk7CiAgICBzZWxmLnBhZ2UgPSBwYWdlQ2xhc3Mo
Y2xpZW50SUQsIE5ldm93LkF0aGVuYS5fY3JlYXRlTWVzc2FnZURlbGl2ZXJ5KTsKICAgIE5ldm93
LkF0aGVuYS5wYWdlID0gc2VsZi5wYWdlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
Ly8gSGFyYWxkCiAgICBzZWxmLnBhZ2UuYmluZEV2ZW50cyh3aW5kb3cpOwogICAgLi4uLi4KCiAt
LS0tLS0tLS0tLS0tLS0tLS0gRGl2bW9kL0Jhc2UuanMgKDEgYWRkZWQgZnVuY3Rpb24gYXQgdGhl
IGVuZCkKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KRGl2bW9kLkJhc2UuYWRkVW5Mb2FkRXZl
bnQgPSBmdW5jdGlvbihjaGFubmVsKSB7CiAgICAvKioqCiAgICAgICAgSGFyYWxkJ3MgZGVzcGVy
YXRlIHRyeSB0byBnZXQgSUUgcGFnZSByZWZyZXNoIHRvIHdvcmsuLi4KICAgICoqKi8KICAgIHdp
bmRvdy5hdHRhY2hFdmVudCgib251bmxvYWQiLCBmdW5jdGlvbiAoZSkKe2NoYW5uZWwuc2VuZENs
b3NlTWVzc2FnZSgpO30pOwp9OwpEaXZtb2QuQmFzZS5qc29uUmVnaXN0cnkgPSBEaXZtb2QuQmFz
ZS5BZGFwdGVyUmVnaXN0cnkoKTsKSSdtIG5vdCB1c2VkIHRvIHRoaXMgY29kaW5nIHN0eWxlLCBz
byBpdCdzIGEgYml0IG9mIHRyaWFsICYgZXJyb3IuIEFueXdheSwKYmVmb3JlLCBzZW5kQ2xvc2VN
ZXNzYWdlIHdvdWxkIF9ub3RfIGJlIGNhbGxlZDsgbm93IGl0IGlzLCBhbmQgSSBjYW4gcmVmcmVz
aAphZCBsaWIgb24gSUUgNi5hbmQgNy4KCk5vdCBzdXJlIGVpdGhlciB3aGF0IHRoaXMgd2lsbCBk
byB0byBGRi4gKFNpbmNlIHdlJ3JlIHN0dWNrIHdpdGggSUUsIEknbQpoZWF2aWx5IGFidXNpbmcg
aXRzIG5vbi1zdGFuZGFyZCBleHRyYXMsIHNvIEkgY2FuJ3QgZ2V0IG15IGZ1bGwgYXBwIHRvIHJ1
bgpvbiBGRi4pIEJlc2lkZXMsIHlvdSdyZSBiZXR0ZXIgb24gRkYgdGhhbiBJIGFtIDotKQoKRmlu
YWxseSwgdG8gZml4IHRoZSBvbmtleXByZXNzIGlzc3VlLCBJIHRoaW5rIHdlJ2QgbmVlZCB0byBn
byBkZWVwZXIgaW50bwp0aGUgInRoaXMiIGRlcHQuIEZvciBtZSwgdGhlIHJlZnJlc2ggaXMgbW9y
ZSBpbXBvcnRhbnQgLSBpZiB0aGUgdXNlcnMgaW5zaXN0Cm9uIHByZXNzaW5nIEVTQywgdGhleSBj
YW4gYmxhbWUgdGhlbXNlbHZlcy4uIDstKQoKV2hhdCBkbyB5b3UgdGhpbms/CgpSZWdhcmRzLApI
YXJhbGQKLS0tLS0tLS0tLS0tLS0gbmV4dCBwYXJ0IC0tLS0tLS0tLS0tLS0tCkFuIEhUTUwgYXR0
YWNobWVudCB3YXMgc2NydWJiZWQuLi4KVVJMOiBodHRwOi8vdHdpc3RlZG1hdHJpeC5jb20vcGlw
ZXJtYWlsL3R3aXN0ZWQtd2ViL2F0dGFjaG1lbnRzLzIwMDgwNTA3L2ZlZjQzZjQ5L2F0dGFjaG1l
bnQuaHRtCg==
From kozneb at gmail.com  Wed May  7 13:51:50 2008
From: kozneb at gmail.com (=?UTF-8?Q?Harald_Bl=C3=A5tand?=)
Date: Wed May  7 13:51:54 2008
Subject: [Twisted-web] Nevow.Athena.PageWidget - events not caught in IE
In-Reply-To: <4821D793.5060507@thiengineering.ch>
References: <1ff309e60804290339l1bd45e6bw2c20de6faf8cefb6@mail.gmail.com>
	<20080429110449.6859.923790625.divmod.quotient.56602@ohm>
	<1ff309e60804290536o6a75860cxcdc4901bdf588ae6@mail.gmail.com>
	<20080429130931.GA15820@mithrandi.net>
	<1ff309e60805070324o515b4376m72ab36143f94b7ca@mail.gmail.com>
	<20080507104859.GA32301@mithrandi.net>
	<4821D793.5060507@thiengineering.ch>
Message-ID: <1ff309e60805071051p34b4a439v3d0ecc73e98c713@mail.gmail.com>

T24gV2VkLCBNYXkgNywgMjAwOCBhdCA2OjIzIFBNLCBXZXJuZXIgVGhpZSA8d3RoaWVAdGhpZW5n
aW5lZXJpbmcuY2g+IHdyb3RlOgoKPiBKdXN0IGEgdGhvdWdodDoKPgo+IFdlIHJhbiBpbnRvIHBy
b2JsZW1zIHdpdGggQXRoZW5hIGFuZCB0aGUgcmVsZWFzZXMgZnJvbSBuZXZvdyBhZnRlcgo+IFNW
TiAxMzc4NiAod2FzIGEgbWFqb3IgdXBncmFkZSkgYW5kIElFIGR1ZSB0byB0aGUgZm9sbG93aW5n
IHBvbGljeSBNUwo+IGludHJvZHVjZWQ6IElFIHNlZW1zIHRvIGxpbWl0IHRoZSBjb25uZWN0aW9u
cyBhbGxvd2VkIHRvIDJtYXgsIHdoaWNoIGJsb2Nrcwo+IElFIHdoZW4gZm9yIGluc3RhbmNlIHJ1
bm5pbmcgdGhlIEF0aGVuYSBjYWxjdWxhdG9yIHNhbXBsZSBhbmQgZG9pbmcgYSBwYWdlCj4gcmVm
cmVzaCBvciB0d28uCgoKSG1tLCBub3Qgc3VyZSB3ZSBjYW4gYmxhbWUgTSQgZm9yIHRoYXQuIFRo
aW5rIEkgc2F3IHNvbWV3aGVyZSB0aGF0IHNvbWUKc3RhbmRhcmQgdGFsa3MgYWJvdXQgXzJfIGNv
bm5lY3Rpb25zLCBvbmx5IHNvbWUgYnJvd3NlcnMgaW1wcm92ZSBpdCBhIGJpdC4uLgoKPgo+Cj4g
SXQgc2VlbXMgdGhhdCB0ZWFyaW5nIGRvd24gYXRoZW5hIGFuZCBicmluZ2luZyBpdCB1cCBhZ2Fp
biBtYXkgaW4gc29tZQo+IGNhc2VzICdoYW5nJyBJRSAoc29ja2V0IHN0YXRlcyBpcyBUSU1FX1dB
SVQpIGZvciBhcm91bmQgMTIwIHNlY3MuIFRoZSBzYW1lCj4gaGFwcGVucyB3aGVuIGdvaW5nIGZy
b20gb25lIGxpdmVwYWdlIHRvIGFub3RoZXIuCj4KPiBJIGFtIHdyaXRpbmcgdGhpcyBvbiBhIGh1
bmNoIGFuZCBmcm9tIG1lbW9yeSwgYXBvbG9naWVzIGlmIHRoZSBwcm9ibGVtcwo+IGFyZSBub3Qg
cmVsYXRlZC4KCgpJIHRoaW5rIHRoZXkgcHJvYmFibHkgYXJlLCBiZWNhdXNlIG9mIGRpZmZlcmVu
dCBldmVudCBoYW5kbGluZyBpbiBJRSB2cyBGRi4KCj4KPiBPdXIgc29sdXRpb24gZm9yIHRoaXMg
cGFydGljdWxhciBwcm9ibGVtIHdhcyB0byBoYW5nIGJhY2sgb24gU1ZOIHJldiAxMzc4Ngo+IGZv
ciBuZXZvdyB1bnRpbCBmaXhlZC4gU2VydmVyIHJ1bnMgb2sgd2l0aCBzZXZlcmFsIGh1bmRyZWQg
TGl2ZVBhZ2VzCj4gY29ubmVjdGVkLgo+Ckdvb2QgdG8gaGVhciBpdCBzY2FsZXMgd2VsbC4gV291
bGRuJ3QgZXhwZWN0IGFueXRoaW5nIGVsc2UgZnJvbSBUd2lzdGVkLCBidXQKd2UncmUgcHJldHR5
IG11Y2ggTmV2b3cgcm9va2llcyBoZXJlIC4uLgoKUmVnYXJkcywKSGFyYWxkCi0tLS0tLS0tLS0t
LS0tIG5leHQgcGFydCAtLS0tLS0tLS0tLS0tLQpBbiBIVE1MIGF0dGFjaG1lbnQgd2FzIHNjcnVi
YmVkLi4uClVSTDogaHR0cDovL3R3aXN0ZWRtYXRyaXguY29tL3BpcGVybWFpbC90d2lzdGVkLXdl
Yi9hdHRhY2htZW50cy8yMDA4MDUwNy9mYTYwZGUyZi9hdHRhY2htZW50Lmh0bQo=
From wthie at thiengineering.ch  Thu May  8 05:24:08 2008
From: wthie at thiengineering.ch (Werner Thie)
Date: Thu May  8 05:24:21 2008
Subject: [Twisted-web] Nevow.Athena.PageWidget - events not caught in
 IE
In-Reply-To: <1ff309e60805071051p34b4a439v3d0ecc73e98c713@mail.gmail.com>
References: <1ff309e60804290339l1bd45e6bw2c20de6faf8cefb6@mail.gmail.com>	<20080429110449.6859.923790625.divmod.quotient.56602@ohm>	<1ff309e60804290536o6a75860cxcdc4901bdf588ae6@mail.gmail.com>	<20080429130931.GA15820@mithrandi.net>	<1ff309e60805070324o515b4376m72ab36143f94b7ca@mail.gmail.com>	<20080507104859.GA32301@mithrandi.net>	<4821D793.5060507@thiengineering.ch>
	<1ff309e60805071051p34b4a439v3d0ecc73e98c713@mail.gmail.com>
Message-ID: <4822C6B8.5000400@thiengineering.ch>

Hi Harald

Harald Bl?tand wrote:
> 
> 
> On Wed, May 7, 2008 at 6:23 PM, Werner Thie <wthie@thiengineering.ch> wrote:
> 
>     Just a thought:
> 
>     We ran into problems with Athena and the releases from nevow after
>     SVN 13786 (was a major upgrade) and IE due to the following policy
>     MS introduced: IE seems to limit the connections allowed to 2max,
>     which blocks IE when for instance running the Athena calculator
>     sample and doing a page refresh or two.
> 
>  
> Hmm, not sure we can blame M$ for that. Think I saw somewhere that some 
> standard talks about _2_ connections, only some browsers improve it a bit...
Just get me right, I'm not blaming MS, but the behavior of IE is erratic 
in this particular case. The whole Athena/IE system is also working 
logically correct, but the user experience is more than disturbed by the 
  seemingly dead IE which springs into action after two minutes or so.

IE introduces a hard limit of two connections, whereas FF implements two 
open sockets and ignores sockets which are in TIME_WAIT, waiting to be 
teared down completely.

AFAIK there is no solution to this problem, because closing a socket 
brings it into the TIME_WAIT state

http://www.developerweb.net/forum/showthread.php?t=2941

and what is left is up to the interpretation of the RFC by the 
implementor of the browsers TCP/IP code.

The easiest way to illustrate this problem is to run examples.tac and go 
to the calculator (example is broken, I proposed a fix on divmod dev 
mailing list)

Line 27 in calculator.html from

getElement('output').innerHTML = expression;

to

document.getElementById('output').innerHTML = expression;

Hit the example/calculator with IE and refresh the page...

You will be greeted by a IE which shows the watch cursor and does not 
refresh the page until the TIME_WAIT time (usually 120 secs) for the 
socket over.

HTH, Werner

PS:
If you want to have a look my athena site implementing a popular card 
game in Switzerland called 'Jass' then hit

http://www.jass.sf.tv/?uid=gast

From kozneb at gmail.com  Fri May  9 07:01:00 2008
From: kozneb at gmail.com (=?UTF-8?Q?Harald_Bl=C3=A5tand?=)
Date: Fri May  9 07:01:10 2008
Subject: [Twisted-web] Nevow.Athena.PageWidget - events not caught in IE
In-Reply-To: <20080507104859.GA32301@mithrandi.net>
References: <1ff309e60804290339l1bd45e6bw2c20de6faf8cefb6@mail.gmail.com>
	<20080429110449.6859.923790625.divmod.quotient.56602@ohm>
	<1ff309e60804290536o6a75860cxcdc4901bdf588ae6@mail.gmail.com>
	<20080429130931.GA15820@mithrandi.net>
	<1ff309e60805070324o515b4376m72ab36143f94b7ca@mail.gmail.com>
	<20080507104859.GA32301@mithrandi.net>
Message-ID: <1ff309e60805090401lf65f187geeeb027b1d93ac43@mail.gmail.com>

T24gV2VkLCBNYXkgNywgMjAwOCBhdCAxMjo0OSBQTSwgVHJpc3RhbiBTZWxpZ21hbm4gPG1pdGhy
YW5kaUBtaXRocmFuZGkubmV0Pgp3cm90ZToKCj4gSSBoYXZlbid0IHlldCBoYWQgdGhlIGNoYW5j
ZSB0byB0cmFjayB0aGlzIGRvd24sIHNvIGJ5IGFsbCBtZWFucywgZ28KPgoKVHJpc3RhbiwKCkp1
c3QgYSBtaW5vciBjb3NtZXRpYyB0b3VjaCB0byBteSBwcmV2aW91cyBmaXguIFNob3VsZG4ndCBt
YWtlIGFueSB2aXNpYmxlCmRpZmZlcmVuY2UsIGJ1dCBtYWtlcyB0aGUgY29kZSBsb29rIHNsaWdo
dGx5IGxlc3MgSUUtY2VudHJpYy4KCgotLS0tLS0tLS0tLS0tLS0tLS0gTmV2b3cvQXRoZW5hL19f
aW5pdF9fLmpzICgyIGFkZGl0aW9ucykKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KTmV2b3cu
QXRoZW5hLldpZGdldC5faW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCkgewogICAgRGl2bW9kLmRlYnVn
KCJ3aWRnZXQiLCAiSW5zdGFudGlhdGluZyBsaXZlIHdpZGdldHMiKTsKICAgIE5ldm93LkF0aGVu
YS5XaWRnZXQuX3BhZ2VMb2FkZWQgPSB0cnVlOwogICAgLy8gV2l0aCB0aGUgbmV4dCBsaW5lLCBz
ZW5kQ2xvc2VNZXNzYWdlIHdpbGwgZ2V0IGNhbGxlZCBpbiBJRS4gLy8gSGFyYWxkCiAgICBEaXZt
b2QuQmFzZS5hZGRVbkxvYWRFdmVudChOZXZvdy5BdGhlbmEucGFnZS5kZWxpdmVyeUNoYW5uZWwp
OyAvLyBIYXJhbGQKICAgIE5ldm93LkF0aGVuYS5XaWRnZXQuX2luc3RhbnRpYXRlV2lkZ2V0cygp
OwogICAgRGl2bW9kLmRlYnVnKCJ3aWRnZXQiLCAiRmluaXNoZWQgaW5zdGFudGlhdGluZyBsaXZl
IHdpZGdldHMiKTsKfTsKTmV2b3cuQXRoZW5hLmJvb3RzdHJhcCA9IGZ1bmN0aW9uIChwYWdlQ2xh
c3NOYW1lLCBjbGllbnRJRCkgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhZ2VDbGFz
cyA9IERpdm1vZC5uYW1lZEFueShwYWdlQ2xhc3NOYW1lKTsKICAgIHNlbGYucGFnZSA9IHBhZ2VD
bGFzcyhjbGllbnRJRCwgTmV2b3cuQXRoZW5hLl9jcmVhdGVNZXNzYWdlRGVsaXZlcnkpOwogICAg
TmV2b3cuQXRoZW5hLnBhZ2UgPSBzZWxmLnBhZ2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAvLyBIYXJhbGQKICAgIHNlbGYucGFnZS5iaW5kRXZlbnRzKHdpbmRvdyk7CiAgICAuLi4u
LgoKLS0tLS0tLS0tLS0tLS0tLS0tIERpdm1vZC9CYXNlLmpzICgxIGFkZGVkIGZ1bmN0aW9uIGF0
IHRoZSBlbmQpCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCkRpdm1vZC5CYXNlLmFkZFVuTG9h
ZEV2ZW50ID0gZnVuY3Rpb24oY2hhbm5lbCkgewogICAgLyoqKgogICAgICAgIEhhcmFsZCdzIGRl
c3BlcmF0ZSB0cnkgdG8gZ2V0IElFIHBhZ2UgcmVmcmVzaCB0byB3b3JrLi4uCiAgICAqKiovCiAg
ICBpZiAod2luZG93LmF0dGFjaEV2ZW50KQogICAgICAgIHdpbmRvdy5hdHRhY2hFdmVudCgib251
bmxvYWQiLCBmdW5jdGlvbiAoZSkKe2NoYW5uZWwuc2VuZENsb3NlTWVzc2FnZSgpO30pOwp9OwpE
aXZtb2QuQmFzZS5qc29uUmVnaXN0cnkgPSBEaXZtb2QuQmFzZS5BZGFwdGVyUmVnaXN0cnkoKTsK
CgpIYXZlIHlvdSBoYWQgYSBjaGFuY2UgdG8gdHJ5IGl0PwpIYXJhbGQKLS0tLS0tLS0tLS0tLS0g
bmV4dCBwYXJ0IC0tLS0tLS0tLS0tLS0tCkFuIEhUTUwgYXR0YWNobWVudCB3YXMgc2NydWJiZWQu
Li4KVVJMOiBodHRwOi8vdHdpc3RlZG1hdHJpeC5jb20vcGlwZXJtYWlsL3R3aXN0ZWQtd2ViL2F0
dGFjaG1lbnRzLzIwMDgwNTA5L2RiMWRiZmJlL2F0dGFjaG1lbnQuaHRtCg==
From sipickles at googlemail.com  Sun May 11 15:01:59 2008
From: sipickles at googlemail.com (Simon Pickles)
Date: Sun May 11 15:02:35 2008
Subject: [Twisted-web] Using Nevow in an existing reactor
Message-ID: <482742A7.6050308@googlemail.com>

Hi,

I have a game server running a twisted.internet.reactor already, but am 
new to nevow.

I'd like to be able to add an HTTP server for debugging and monitoring.

What is this simplest way I could incorporate this? Eg:

#----------------------------
from nevow import loaders, rend
from twisted.internet import reactor
      
class HttpServer(rend.Page):
    addSlash = True
    docFactory = loaders.xmlfile('testPage.html')

reactor.listenTCP(8080, HttpServer())
reactor.run()

#----------------------------

When I try this, I get errors since I have not overridden all the 
protocol functions (like doStart, and buildProtocol). I am a little 
confused by this since the HttpServer inherits from rend.Page, not 
twisted.protocol

Any advice gratefully recieved.

Simon




From sipickles at googlemail.com  Sun May 11 16:29:37 2008
From: sipickles at googlemail.com (Simon Pickles)
Date: Sun May 11 16:30:13 2008
Subject: [Twisted-web] Using Nevow in an existing reactor
In-Reply-To: <482742A7.6050308@googlemail.com>
References: <482742A7.6050308@googlemail.com>
Message-ID: <48275731.4040304@googlemail.com>

Aha! NevowSite.
 ;)

From sipickles at googlemail.com  Mon May 12 09:07:22 2008
From: sipickles at googlemail.com (Simon Pickles)
Date: Mon May 12 09:07:58 2008
Subject: [Twisted-web] Stackless and Nevow integration
Message-ID: <4828410A.6060908@googlemail.com>

?Hi

has anyone managed to combined Nevow with Stackless Python?

I have rebuilt stackless after satisfying all the extension libs (to 
include zLib), but now Nevow baulks at the mention of the global 'stackless'

Any advice gratefully received.

Regards

Simon

From exarkun at divmod.com  Mon May 12 09:16:02 2008
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon May 12 09:16:10 2008
Subject: [Twisted-web] Stackless and Nevow integration
In-Reply-To: <4828410A.6060908@googlemail.com>
Message-ID: <20080512131602.6859.2045023596.divmod.quotient.62467@ohm>

On Mon, 12 May 2008 14:07:22 +0100, Simon Pickles <sipickles@googlemail.com> wrote:
>?Hi
>
>has anyone managed to combined Nevow with Stackless Python?
>
>I have rebuilt stackless after satisfying all the extension libs (to include 
>zLib), but now Nevow baulks at the mention of the global 'stackless'

I don't understand how this could actually be related to Nevow.  Nevow is
just a Python library.  If you have NameErrors, it's because you wrote some
code using a name that wasn't defined. :)  Does adding, say, "import stackless"
to the top of your program fix the problem?  If not, post some code that shows
how it breaks.

Jean-Paul

From sipickles at googlemail.com  Tue May 13 03:34:51 2008
From: sipickles at googlemail.com (Simon Pickles)
Date: Tue May 13 03:35:25 2008
Subject: [Twisted-web] Stackless and Nevow integration
In-Reply-To: <48293B5D.2000307@googlemail.com>
References: <48293B5D.2000307@googlemail.com>
Message-ID: <4829449B.9040306@googlemail.com>


> On Mon, 12 May 2008 14:07:22 +0100, Simon Pickles <sipickles at 
> googlemail.com 
> <http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web>> wrote:
>> /?Hi
> />/
> />/has anyone managed to combined Nevow with Stackless Python?
> />/
> />/I have rebuilt stackless after satisfying all the extension libs 
> (to include />/zLib), but now Nevow baulks at the mention of the 
> global 'stackless'
> /
> I don't understand how this could actually be related to Nevow.  Nevow is
> just a Python library.  If you have NameErrors, it's because you wrote 
> some
> code using a name that wasn't defined. :)  Does adding, say, "import 
> stackless"
> to the top of your program fix the problem?  If not, post some code 
> that shows
> how it breaks.
>
> Jean-Paul
>
It looks like a nevow issue in some introspection process used to import 
loaders. Looking at the callstack, its actually a twisted file which throws.

Example:

#=====================
import sys

# link to standard python packages (like twisted and nevow)
sys.path.append("/usr/lib/python2.5/site-packages")

# Has no effect
import stackless

# causes Attribute Error under stackless python, fine in normal python
from nevow import loaders
#=====================

Callstack:

simon@simon-linux:~/Dev/Hub$ spython nevStack.py
Traceback (most recent call last):
  File "nevStack.py", line 11, in <module>
    from nevow import loaders
  File "/usr/lib/python2.5/site-packages/nevow/__init__.py", line 226, 
in <module>
    loadFlatteners(flatteners)
  File "/usr/lib/python2.5/site-packages/nevow/__init__.py", line 39, in 
loadFlatteners
    flat.registerFlattener(f, clean(o))
  File "/usr/lib/python2.5/site-packages/nevow/flat/ten.py", line 36, in 
registerFlattener
    forType = util._namedAnyWithBuiltinTranslation(forType)
  File "/usr/lib/python2.5/site-packages/nevow/util.py", line 183, in 
_namedAnyWithBuiltinTranslation
    return namedAny(name)
  File "/usr/lib/python2.5/site-packages/twisted/python/reflect.py", 
line 432, in namedAny
    obj = getattr(obj, n)
AttributeError: 'slpmodule' object has no attribute 'function'


I thought maybe I needed to build twisted and Nevow with stackless 
python instead so tried that. Twisted works, installing into 
/usr/local/lib but Nevow fails at the same point as above:

simon@simon-linux:~/Source/Nevow$ sudo spython setup.py install
Traceback (most recent call last):
  File "setup.py", line 11, in <module>
    import setupcommon
  File "/home/simon/Source/Nevow/setupcommon.py", line 2, in <module>
    from nevow import __version__ as version
  File "/home/simon/Source/Nevow/nevow/__init__.py", line 226, in <module>
    loadFlatteners(flatteners)
  File "/home/simon/Source/Nevow/nevow/__init__.py", line 39, in 
loadFlatteners
    flat.registerFlattener(f, clean(o))
  File "/home/simon/Source/Nevow/nevow/flat/ten.py", line 36, in 
registerFlattener
    forType = util._namedAnyWithBuiltinTranslation(forType)
  File "/home/simon/Source/Nevow/nevow/util.py", line 183, in 
_namedAnyWithBuiltinTranslation
    return namedAny(name)
  File 
"/usr/local/lib/python2.5/site-packages/twisted/python/reflect.py", line 
432, in namedAny
    obj = getattr(obj, n)
AttributeError: 'slpmodule' object has no attribute 'function'

I guess I am getting in a muddle ;)

Thanks for any advice and your continued patience!

Si



From bca at contact.de  Tue May 13 06:26:36 2008
From: bca at contact.de (Brian Carmalt)
Date: Tue May 13 06:26:44 2008
Subject: [Twisted-web] How to use twisted.web2 http clients.
Message-ID: <1210674396.14404.41.camel@pleione.contact.de>

Hello all, 

I have set up a twisted.web2 http server and would like to use the web2
client to connect to it. I have been using the httplib in Python, but it
is tedious to use and has a significant(for my project) bug in it(no
100-continue support). 

I have asked a similar question a couple of months ago, Cameron Dale
responded with an example of how he uses the http client in web2, but
the the link he supplied is no longer available and I cannot seem to
find a local copy. I looked at his example when he posted the link, but
it did not seem like it was relevant to the cases I have. If I am wrong,
could you post the example agian Cameron? Thanks.   
 
Here is what I need to implement: 

Streaming POST:
1) create connection
2) set up connection
3) check for a 100-continue and authenticate if necessary. 
3) stream data over the connection, in small chunks with unknown content length or from files.
4) check the response.
5) close connection/or reuse it if I can.  

Multiple One-shot POST, GET, HEAD and DELETES
1) create connection
2) set up connection
3) authenticate if necessary. 
3) send multiple POST/GET/HEAD/DELETE commands and retrieve the   
   responses.
4) close connection when done. 

For the Streaming POSTs I need to support HTTP 1.1, chunked encoding,
persistent connections and 100-continue. This means web2, as far as I
can tell. The same for the one-shot requests, if I want to use
persistent connections, I need web2. 

Is this correct? Or can I get the same functionality in web?

If I have to use web2, could somebody help me in the right direction? 
If this is possible in web, then a hint in that direction and how i
could do it would also be appriciated.

Thank you, 

Brian




From exarkun at divmod.com  Tue May 13 08:03:55 2008
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Tue May 13 08:04:01 2008
Subject: [Twisted-web] Stackless and Nevow integration
In-Reply-To: <4829449B.9040306@googlemail.com>
Message-ID: <20080513120355.6859.2086086825.divmod.quotient.62919@ohm>

On Tue, 13 May 2008 08:34:51 +0100, Simon Pickles <sipickles@googlemail.com> wrote:
>
>>On Mon, 12 May 2008 14:07:22 +0100, Simon Pickles <sipickles at 
>>googlemail.com <http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted- 
>>web>> wrote:
>>>/?Hi
>>/>/
>>/>/has anyone managed to combined Nevow with Stackless Python?
>>/>/
>>/>/I have rebuilt stackless after satisfying all the extension libs (to 
>>include />/zLib), but now Nevow baulks at the mention of the global 
>>'stackless'
>>/
>>I don't understand how this could actually be related to Nevow.  Nevow is
>>just a Python library.  If you have NameErrors, it's because you wrote some
>>code using a name that wasn't defined. :)  Does adding, say, "import 
>>stackless"
>>to the top of your program fix the problem?  If not, post some code that 
>>shows
>>how it breaks.
>>
>>Jean-Paul
>It looks like a nevow issue in some introspection process used to import 
>loaders. Looking at the callstack, its actually a twisted file which throws.
>

Ah.  I'd completely forgotten about that code.  I suspect it should just
be deleted.  Can you file a ticket for this and attach the traceback?

Jean-Paul

From sipickles at googlemail.com  Tue May 13 12:04:58 2008
From: sipickles at googlemail.com (Simon Pickles)
Date: Tue May 13 12:05:31 2008
Subject: [Twisted-web] Stackless and Nevow integration
In-Reply-To: <20080513120355.6859.2086086825.divmod.quotient.62919@ohm>
References: <20080513120355.6859.2086086825.divmod.quotient.62919@ohm>
Message-ID: <4829BC2A.6030203@googlemail.com>

Jean-Paul Calderone wrote:
> On Tue, 13 May 2008 08:34:51 +0100, Simon Pickles 
> <sipickles@googlemail.com> wrote:
>>
>>> On Mon, 12 May 2008 14:07:22 +0100, Simon Pickles <sipickles at 
>>> googlemail.com 
>>> <http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted- web>> 
>>> wrote:
>>>> /?Hi
>>> />/
>>> />/has anyone managed to combined Nevow with Stackless Python?
>>> />/
>>> />/I have rebuilt stackless after satisfying all the extension libs 
>>> (to include />/zLib), but now Nevow baulks at the mention of the 
>>> global 'stackless'
>>> /
>>> I don't understand how this could actually be related to Nevow.  
>>> Nevow is
>>> just a Python library.  If you have NameErrors, it's because you 
>>> wrote some
>>> code using a name that wasn't defined. :)  Does adding, say, "import 
>>> stackless"
>>> to the top of your program fix the problem?  If not, post some code 
>>> that shows
>>> how it breaks.
>>>
>>> Jean-Paul
>> It looks like a nevow issue in some introspection process used to 
>> import loaders. Looking at the callstack, its actually a twisted file 
>> which throws.
>>
>
> Ah.  I'd completely forgotten about that code.  I suspect it should just
> be deleted.  Can you file a ticket for this and attach the traceback?
>
>
Will do. Can you suggest a quick mod I can make (which lines to delete) 
so I can progress? Thanks Jean

Regards

Simon


From exarkun at divmod.com  Tue May 13 12:34:53 2008
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Tue May 13 12:35:01 2008
Subject: [Twisted-web] Stackless and Nevow integration
In-Reply-To: <4829BC2A.6030203@googlemail.com>
Message-ID: <20080513163453.6859.1885836572.divmod.quotient.62964@ohm>

On Tue, 13 May 2008 17:04:58 +0100, Simon Pickles <sipickles@googlemail.com> wrote:
>Jean-Paul Calderone wrote:
>>On Tue, 13 May 2008 08:34:51 +0100, Simon Pickles 
>><sipickles@googlemail.com> wrote:
>>>
>>>>On Mon, 12 May 2008 14:07:22 +0100, Simon Pickles <sipickles at 
>>>>googlemail.com <http://twistedmatrix.com/cgi- 
>>>>bin/mailman/listinfo/twisted- web>> wrote:
>>>>>/?Hi
>>>>/>/
>>>>/>/has anyone managed to combined Nevow with Stackless Python?
>>>>/>/
>>>>/>/I have rebuilt stackless after satisfying all the extension libs (to 
>>>>include />/zLib), but now Nevow baulks at the mention of the global 
>>>>'stackless'
>>>>/
>>>>I don't understand how this could actually be related to Nevow.  Nevow is
>>>>just a Python library.  If you have NameErrors, it's because you wrote 
>>>>some
>>>>code using a name that wasn't defined. :)  Does adding, say, "import 
>>>>stackless"
>>>>to the top of your program fix the problem?  If not, post some code that 
>>>>shows
>>>>how it breaks.
>>>>
>>>>Jean-Paul
>>>It looks like a nevow issue in some introspection process used to import 
>>>loaders. Looking at the callstack, its actually a twisted file which 
>>>throws.
>>
>>Ah.  I'd completely forgotten about that code.  I suspect it should just
>>be deleted.  Can you file a ticket for this and attach the traceback?
>Will do. Can you suggest a quick mod I can make (which lines to delete) so I 
>can progress? Thanks Jean
>

I think something like this should help:

Index: Nevow/nevow/__init__.py
===================================================================
--- Nevow/nevow/__init__.py     (revision 15766)
+++ Nevow/nevow/__init__.py     (working copy)
@@ -207,16 +207,6 @@
 nevow.i18n.flattenL10n              nevow.i18n.PlaceHolder
 """

-flatteners_stackless = """
-nevow.flat.flatstan.FunctionSerializer            stackless.function
-nevow.flat.flatstan.MethodSerializer              stackless.instancemethod
-"""
-try:
-    import stackless
-    flatteners += flatteners_stackless
-except ImportError:
-    pass
-
 flatteners_2_4 = """
 nevow.flat.flatstan.StringCastSerializer          decimal.Decimal
 """

From jamsratnam at gmail.com  Tue May 13 12:45:02 2008
From: jamsratnam at gmail.com (Ratnam Chandra)
Date: Tue May 13 12:45:06 2008
Subject: [Twisted-web] sms gateway/server
Message-ID: <21c879a30805130945h32c74103g321ee038e0610e0e@mail.gmail.com>

can anyone tell me how to create SMS server/gateway by which it
becomes possible to send/recieve SMS from PC to web and vice versa

-- 
Ratnam Chandra
   "THE ONE"

From camrdale at gmail.com  Tue May 13 13:13:20 2008
From: camrdale at gmail.com (Cameron Dale)
Date: Tue May 13 13:13:27 2008
Subject: [Twisted-web] How to use twisted.web2 http clients.
In-Reply-To: <1210674396.14404.41.camel@pleione.contact.de>
References: <1210674396.14404.41.camel@pleione.contact.de>
Message-ID: <f4438a6a0805131013g1a37b822pae9dbfdd65989b7e@mail.gmail.com>

On 5/13/08, Brian Carmalt <bca@contact.de> wrote:
>  I have asked a similar question a couple of months ago, Cameron Dale
>  responded with an example of how he uses the http client in web2, but
>  the the link he supplied is no longer available and I cannot seem to
>  find a local copy. I looked at his example when he posted the link, but
>  it did not seem like it was relevant to the cases I have. If I am wrong,
>  could you post the example agian Cameron? Thanks.

http://git.camrdale.org/?p=apt-p2p.git;a=blob;f=apt_p2p/HTTPDownloader.py

It's undergone some changes since then, including adding the fix for
ticket #3207. You're probably only interested in the parts of the Peer
class that implements the ClientManager interface and submitting
requests.

>  Here is what I need to implement:
>
>  Streaming POST:
>  1) create connection
>  2) set up connection
>  3) check for a 100-continue and authenticate if necessary.
>  3) stream data over the connection, in small chunks with unknown content length or from files.
>  4) check the response.
>  5) close connection/or reuse it if I can.

Mine only does no content requests.

>  Multiple One-shot POST, GET, HEAD and DELETES
>  1) create connection
>  2) set up connection
>  3) authenticate if necessary.
>  3) send multiple POST/GET/HEAD/DELETE commands and retrieve the
>    responses.
>  4) close connection when done.

Mine handles multiple GET and HEAD requests, not POST, and DELETE
should work but I haven't tried it.

Cameron

From sipickles at googlemail.com  Thu May 15 08:27:59 2008
From: sipickles at googlemail.com (Simon Pickles)
Date: Thu May 15 08:28:35 2008
Subject: [Twisted-web] Context Removal
Message-ID: <482C2C4F.5090207@googlemail.com>

Hi,

Should I be using the Context Removal guidelines laid out in:

http://divmod.org/trac/wiki/DivmodNevow/ContextRemoval

or is this future Nevow?

Thanks

Simon

From exarkun at divmod.com  Thu May 15 08:37:50 2008
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Thu May 15 08:38:00 2008
Subject: [Twisted-web] Context Removal
In-Reply-To: <482C2C4F.5090207@googlemail.com>
Message-ID: <20080515123750.6859.1635828070.divmod.quotient.63743@ohm>

On Thu, 15 May 2008 13:27:59 +0100, Simon Pickles <sipickles@googlemail.com> wrote:
>Hi,
>
>Should I be using the Context Removal guidelines laid out in:
>
>http://divmod.org/trac/wiki/DivmodNevow/ContextRemoval
>
>or is this future Nevow?

There's no such thing as nevow.page.Page yet; that part is the future (what
the exact spelling will be is still up in the air).  You *should* use
nevow.page.Element instead of nevow.rend.Fragment, though (which I see isn't
discussed on that page - however, the discussion about converting renderers
applies to the Fragment/Element conversion as well).

Jean-Paul

From sipickles at googlemail.com  Thu May 15 15:29:31 2008
From: sipickles at googlemail.com (Simon Pickles)
Date: Thu May 15 15:30:13 2008
Subject: [Twisted-web] Passing data to render functions
Message-ID: <482C8F1B.1000909@googlemail.com>



Hi,

In the example below, I want to use a member of the class to process the
HTML render request. How can I arrange my code to allow access to class
members?

# -----------------------------------------------------------
from nevow import loaders
from nevow import rend
from nevow import tags as T

import monitorBroker

class HttpServer(rend.Page):
    def __init__(self):
         def ServerInfo(self, ctx, data):
              self.broker.GetServerData()  # self refers to
WovenContext, not HttpServer, not happy!

         self.addSlash = True
         self.docFactory = loaders.stan( T.html [ T.head ( title =
"TestMonitor" ),
                                               T.body [ T.h1[ "Test
Monitor 0.1" ],
                                                        T.div[ "HUB
Server: ", ServerInfo]
                                                      ]
                                               ]
                                    )

         self.broker = monitorBroker.PBroker('127.0.0.1', 7021)

#-----------------

Thanks

Simon






From sipickles at googlemail.com  Thu May 15 15:35:46 2008
From: sipickles at googlemail.com (Simon Pickles)
Date: Thu May 15 15:36:20 2008
Subject: [Twisted-web] Passing data to render functions
In-Reply-To: <482C8F1B.1000909@googlemail.com>
References: <482C8F1B.1000909@googlemail.com>
Message-ID: <482C9092.5090408@googlemail.com>

Sorry, I've just demonstrated a hole in my python.

If I change the function to this then it will work since I am not 
overwriting the self, and the context is in the right place!

        def ServerInfo(ctx):
            self.broker.GetServerData(serverData.HUB_SERVER)

Guess you realise-something-very-obvious everyday!

From sipickles at googlemail.com  Fri May 16 14:40:07 2008
From: sipickles at googlemail.com (Simon Pickles)
Date: Fri May 16 14:40:44 2008
Subject: [Twisted-web] Nevow Tables
Message-ID: <482DD507.2040301@googlemail.com>

hmm,

Well, I've met stan, and that is all good for handy supplied tuples, but 
I am having trouble integrating this with my lists from remote PBs.

I've a little Nevow monitor app which is requesting data from a server 
and generating HTML from it, in theory.

The comms are fine, but building a table of the supplied data is eluding me!

Please get your red pen out:

#-----------------------
#import stuff

class HttpServer(rend.Page):
    def __init__(self):
        self.broker = monitorBroker.PBroker("monitor", '127.0.0.1', 7021)
        self.docFactory = loaders.xmlfile('main.html') # includes <div 
nevow:render="serverData" />
       
    def render_serverData(self, ctx):
        def useResult(data):
            return T.table(render=T.directive('sequence'))[
                T.tr(pattern='header')[ T.th[ 'sID' ], T.th[ 'host' ] ],
                T.tr(pattern='item', render=T.directive('row')),
                T.tr(pattern='item', render=T.directive('row'))
            ]
   
        def render_row(self, ctx, rowData):
            return ctx.tag[ T.td[ rowData[0] ], T.td[ rowData[1] ] ]    
                
               
        d = self.broker.DoRemoteCallFromMonitor(serverData.HUB_ZONEDATA)
        d.addCallback(useResult)
        return d
#---------------------

The remote PB supplies data like this:
(((0,0), "alpha"), ((0,1), "beta", ((1,0), "alpha"), ((1,1), "alpha"))
representing the rows and cols of the table.

Can anyone help beat my code into shape?

Thanks


Si

From sipickles at googlemail.com  Sat May 17 05:55:12 2008
From: sipickles at googlemail.com (Simon Pickles)
Date: Sat May 17 05:55:51 2008
Subject: [Twisted-web] Thanks
Message-ID: <482EAB80.8090303@googlemail.com>

Well, the penny finally dropped this morning and my understanding of 
nevow finally arrived!

Its really something. I guess I am only aware of a small fraction of its 
power and flexibility, and already I have vertigo!

I just wanted to say thanks for producing such a great framework.

PHP is history!

Regards

Simon

From sipickles at googlemail.com  Sat May 17 06:36:56 2008
From: sipickles at googlemail.com (Simon Pickles)
Date: Sat May 17 06:37:30 2008
Subject: [Twisted-web] Issue with nevow.tag.meta
Message-ID: <482EB548.5070807@googlemail.com>

Hi,

This statement will not run due to the syntax error caused by the -.

T.meta(http-equiv="refresh" content="600")

Is there a workaround?

Simon

From sipickles at googlemail.com  Sat May 17 07:17:41 2008
From: sipickles at googlemail.com (Simon Pickles)
Date: Sat May 17 07:18:14 2008
Subject: [Twisted-web] Issue with nevow.tag.meta - SOLVED
In-Reply-To: <482EB548.5070807@googlemail.com>
References: <482EB548.5070807@googlemail.com>
Message-ID: <482EBED5.90702@googlemail.com>

Simon Pickles wrote:
> Hi,
>
> This statement will not run due to the syntax error caused by the -.
>
> T.meta(http-equiv="refresh" content="600")
>
> Is there a workaround?
>
I had to pass a dictionary to the meta tag:

        metaRefresh = { "http-equiv":"refresh", "content":"5"}
       
        T.meta(**self.metaRefresh)


Thanks k4y!

From sc at linux.it  Sun May 18 15:49:59 2008
From: sc at linux.it (Stefano Canepa)
Date: Sun May 18 15:50:19 2008
Subject: [Twisted-web] sms gateway/server
In-Reply-To: <21c879a30805130945h32c74103g321ee038e0610e0e@mail.gmail.com>
References: <21c879a30805130945h32c74103g321ee038e0610e0e@mail.gmail.com>
Message-ID: <1211140199.13932.71.camel@galletto>

SWwgZ2lvcm5vIG1hciwgMTMvMDUvMjAwOCBhbGxlIDIyLjE1ICswNTMwLCBSYXRuYW0gQ2hhbmRy
YSBoYSBzY3JpdHRvOgo+IGNhbiBhbnlvbmUgdGVsbCBtZSBob3cgdG8gY3JlYXRlIFNNUyBzZXJ2
ZXIvZ2F0ZXdheSBieSB3aGljaCBpdAo+IGJlY29tZXMgcG9zc2libGUgdG8gc2VuZC9yZWNpZXZl
IFNNUyBmcm9tIFBDIHRvIHdlYiBhbmQgdmljZSB2ZXJzYQoKVG8gYW5zd2VyIHRoaXMgcmVhbGx5
IHZhZ3VlIHF1ZXN0aW9uIHlvdSBzaG91bGQgZXhwbGFpbiBhdCBsZWFzdCBob3cKdGhpcyBpcyBy
ZWxhdGVkIHRvIHR3aXN0ZWQuCgpCeWUKc2MKCi0tIApTdGVmYW5vIENhbmVwYSBha2Egc2M6IHNj
QGxpbnV4Lml0IC0gaHR0cDovL3d3dy5zdGVmYW5vY2FuZXBhLml0ClRocmVlIGdyZWF0IHZpcnR1
ZXMgb2YgYSBwcm9ncmFtbWVyOiBsYXppbmVzcywgaW1wYXRpZW5jZSBhbmQgaHVicmlzLgpMZSB0
cmUgZ3JhbmRpIHZpcnTDuSBkaSB1biBwcm9ncmFtbWF0b3JlOiBwaWdyaXppYSwgaW1wYXppZW56
YSBlCmFycm9nYW56YS4gKExhcnJ5IFdhbGwpCi0tLS0tLS0tLS0tLS0tIG5leHQgcGFydCAtLS0t
LS0tLS0tLS0tLQpBIG5vbi10ZXh0IGF0dGFjaG1lbnQgd2FzIHNjcnViYmVkLi4uCk5hbWU6IG5v
dCBhdmFpbGFibGUKVHlwZTogYXBwbGljYXRpb24vcGdwLXNpZ25hdHVyZQpTaXplOiAxODkgYnl0
ZXMKRGVzYzogUXVlc3RhID0/SVNPLTg4NTktMT9RPz1FOD89IHVuYSBwYXJ0ZSBkZWwgbWVzc2Fn
Z2lvCglmaXJtYXRhIGRpZ2l0YWxtZW50ZQpVcmwgOiBodHRwOi8vdHdpc3RlZG1hdHJpeC5jb20v
cGlwZXJtYWlsL3R3aXN0ZWQtd2ViL2F0dGFjaG1lbnRzLzIwMDgwNTE4LzY3MGNjNDFhL2F0dGFj
aG1lbnQucGdwCg==
From knueffle at yahoo.com  Wed May 28 10:53:09 2008
From: knueffle at yahoo.com (Jody Gugelhupf)
Date: Wed May 28 10:53:40 2008
Subject: [Twisted-web] help with twisted webserver and rpy script
Message-ID: <227211.35924.qm@web36102.mail.mud.yahoo.com>

hi there ppl :)
i have a question, twisted is very new to me, i'm using the twisted webserver to control my
tvcard, i wrote several scripts and got it all working, i also use a rpy script to switch stations
from the website, only that it seems that i need to create for each station a rpy script, i'd
rather have all stations in once rpy file and do it that way, i got it working in php, but is it
possible to write php in rpy? here is an example of one of my rpy scripts to switch stations:

#!/usr/bin/python
import sys
import os
from www.web_types import HTMLResource, FreevoResource

class TestResource(FreevoResource):

    def _render(self, request):
        fv = HTMLResource()
        fv.printHeader(_('LiveTV'), 'styles/main.css',selected=_('Test'))
        form = request.args
        command = "v4lctl setstation MTV"
        os.system(command)
        fv.res += "<html><script language=\"JavaScript\"> close();</script></html>"
        return String( fv.res )
resource = TestResource()



the java stuff is so that when i click on the MTV.rpy link it closes the new window after the
execution of the command, the main site where the MTV.rpy is displayed looks like this:

#!/usr/bin/python
import sys
import os
from www.web_types import HTMLResource, FreevoResource

class TestResource(FreevoResource):

    def _render(self, request):
        fv = HTMLResource()
        fv.printHeader(_('LiveTV'), 'styles/main.css',selected=_('Test'))
        form = request.args
        fv.res += "<html>To start the stream server click <a
href=\"http://10.0.0.1:8085/startstream.rpy\" target=\"_blank\">here.</a> To start the camera
stream server click <a href=\"http://10.0.0.1:8085/startstreamcam.rpy\"
target=\"_blank\">here.</a> To stop the stream-server click<a
href=\"http://195.169.205.24:8085/stopstream.rpy\">here.</a> To switch to the channel you can
simply click on the channel you want to watch. A new window will pop up and close itself
automatically, then the channel should be changed.</html>"
        fv.res += "<html><br><a href=\"MTV.rpy\" target=\"_blank\"> MTV </a> <a href=\"TMF.rpy\"
target=\"_blank\"> TMF </a> <a href=\"national.rpy\" target=\"_blank\"> National Geographic </a>
<a href=\"discovery.rpy\" target=\"_blank\"> Discovery Channel </a> <a href=\"CNN.rpy\"
target=\"_blank\"> CNN </a> <a href=\"BBC1.rpy\" target=\"_blank\"> BBC1 </a> <a href=\"BBC2.rpy\"
target=\"_blank\"> BBC2 </a> <a href=\"net5.rpy\" target=\"_blank\"> Net5 </a> <a
href=\"sbs6.rpy\" target=\"_blank\"> sbs6 </a> <a href=\"veronica.rpy\" target=\"_blank\">
Veronica </a> <a href=\"talpa.rpy\" target=\"_blank\"> talpa </a> <a href=\"rtl4.rpy\"
target=\"_blank\"> rtl4 </a> <a href=\"rtl5.rpy\" target=\"_blank\"> rtl5 </a> <a
href=\"rtl7.rpy\" target=\"_blank\"> rtl7 </a> <a href=\"een.rpy\" target=\"_blank\"> een </a> <a
href=\"euronews.rpy\" target=\"_blank\"> Euronews </a> <a href=\"ard.rpy\" target=\"_blank\"> ARD
</a> <a href=\"zdf.rpy\" target=\"_blank\"> ZDF </a> <a href=\"wdr.rpy\" target=\"_blank\"> WDR
</a> <a href=\"gelderland.rpy\" target=\"_blank\"> TV Gelderland </a> <a href=\"ned1.rpy\"
target=\"_blank\"> Nederland 1 </a> <a href=\"ned2.rpy\" target=\"_blank\"> Nederland 2 </a> <a
href=\"ned3.rpy\" target=\"_blank\"> Nederland 3 </a> <a href=\"ketnet.rpy\" target=\"_blank\">
Ketnet/Canvas </a> <a href=\"lokal.rpy\" target=\"_blank\"> Lokaal Plus </a> <a
href=\"upcinfo.rpy\" target=\"_blank\"> UpcInfo </a> <a href=\"trtint.rpy\" target=\"_blank\">
TRTint </a> <a href=\"rai1.rpy\" target=\"_blank\"> Rai Uno </a> <a href=\"eurosport.rpy\"
target=\"_blank\"> Eurosport </a> <a href=\"nick.rpy\" target=\"_blank\"> Nick/Comedy Central </a>
<a href=\"tellsell.rpy\" target=\"_blank\"> TellSell </a> <a href=\"tv5.rpy\" target=\"_blank\">
TV5 </a> <a href=\"cam.rpy\" target=\"_blank\"> cam </a></br></html>"
        fv.res += "<center><OBJECT ID=\"MediaPlayer\" WIDTH=320 HEIGHT=300
CLASSID=\"CLSID:22D6F312-B0F6-11D0-94AB-0080C74C7E95\" STANDBY=\"Loading Windows Media Player
components...\" TYPE=\"application/x-oleobject\" /><param name=\"autoStart\" value=\"true\"
/><PARAM NAME=\"error\" VALUE=\"item\" /><PARAM NAME=\"stretchToFit\" VALUE=\"false\" /><PARAM
NAME=\"ShowStatusBar\" VALUE=\"true\" /><PARAM NAME=\"FileName\" VALUE=\"mms://10.0.0.1:8083\" />
<EMBED TYPE=\"application/x-mplayer2\" SRC=\"mms://10.0.0.1:8083\"NAME=\"MediaPlayer\" WIDTH=320
HEIGHT=300 ShowStatusBar=\"1\" /></EMBED></OBJECT></center>"
        return String( fv.res )
resource = TestResource()

as you can see and as i said i need to create for each station a rpy file, can i not somehow put
it all in one or make php work in rpy?

thx for any input :)
jody :D


      __________________________________________________________________
Looking for the perfect gift? Give the gift of Flickr! 

http://www.flickr.com/gift/

From abbysecured at atlantisgoose.com  Thu May 29 00:50:59 2008
From: abbysecured at atlantisgoose.com (Abby)
Date: Thu May 29 00:11:06 2008
Subject: [Twisted-web] Can't Send email to rediffmail server!!
Message-ID: <1212034259.1607599349@as03.cooltoad.com>

Hi,
    I am curently pursuing Master's in Computer Science from India. as i was working with Twisted Framework, a very powerful 
python framework, was not able to send email to rediffmail.com and yahoo mail server. The mail sent considered to be a 
SPAM,rejected by their server and entered in the records of www.spamhaus.org. But on the brighter side i successfully sent emails 
to cooltoad mail server as well as gmail server. previously i spent my time in configuring my mail server on my site and i found 
that my mail server was not announcing a proper HELO/EHLO. Also configured the server Authentication. Still am not able to send 
emails to these servers. it would be a great pleasure to hear a solution from twisted framework fine programmers.

i am using a Apache JAMES mail server.

Thanking you

(ABHISHEK DEY)

From duncan.mcgreggor at gmail.com  Thu May 29 01:07:03 2008
From: duncan.mcgreggor at gmail.com (Duncan McGreggor)
Date: Thu May 29 01:06:56 2008
Subject: [Twisted-web] Can't Send email to rediffmail server!!
In-Reply-To: <1212034259.1607599349@as03.cooltoad.com>
References: <1212034259.1607599349@as03.cooltoad.com>
Message-ID: <1212037623.5284.133.camel@gondor>

On Thu, 2008-05-29 at 10:40 +0550, Abby wrote:
> Hi,
>     I am curently pursuing Master's in Computer Science from India. as i was working with Twisted Framework, a very powerful 
> python framework, was not able to send email to rediffmail.com and yahoo mail server. The mail sent considered to be a 
> SPAM,rejected by their server and entered in the records of www.spamhaus.org. But on the brighter side i successfully sent emails 
> to cooltoad mail server as well as gmail server. previously i spent my time in configuring my mail server on my site and i found 
> that my mail server was not announcing a proper HELO/EHLO. Also configured the server Authentication. Still am not able to send 
> emails to these servers. it would be a great pleasure to hear a solution from twisted framework fine programmers.
> 
> i am using a Apache JAMES mail server.
> 
> Thanking you
> 
> (ABHISHEK DEY)

Abhishek,

Forgive me if I have misunderstood, but it sounds like you're not
actually having a problem with a Twisted mail server. Is that correct?
Are you writing client software with Twisted?

If you can provide us with more details about your problem with Twisted
(minimal code examples that demonstrate the problem are best), we might
be able to help you out.

Thanks,

d


