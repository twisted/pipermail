<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Leaf Resources with child Leaf Resources
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Leaf%20Resources%20with%20child%20Leaf%20Resources&In-Reply-To=CAGDztiFxWpsrjiqQrLttBfVR_87hApeRa_N95RJHt4VrOznBBQ%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="004897.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Leaf Resources with child Leaf Resources</H1>
    <B>Jonathan Jacobs</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Leaf%20Resources%20with%20child%20Leaf%20Resources&In-Reply-To=CAGDztiFxWpsrjiqQrLttBfVR_87hApeRa_N95RJHt4VrOznBBQ%40mail.gmail.com"
       TITLE="[Twisted-web] Leaf Resources with child Leaf Resources">jonathan+twisted at jsphere.com
       </A><BR>
    <I>Thu Mar  1 09:42:25 EST 2012</I>
    <P><UL>
        
        <LI>Next message: <A HREF="004897.html">[Twisted-web] Leaf Resources with child Leaf Resources
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4896">[ date ]</a>
              <a href="thread.html#4896">[ thread ]</a>
              <a href="subject.html#4896">[ subject ]</a>
              <a href="author.html#4896">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Feb 29, 2012 at 23:00, Jacek Furmankiewicz &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">jacek99 at gmail.com</A>&gt; wrote:
&gt;<i> OK, so the issue I have is that I cannot create two separate REST Resources
</I>&gt;<i> with nested URLs &#160;e.g.
</I>&gt;<i>
</I>&gt;<i> class CustomerRestService(Resource):
</I>&gt;<i> &#160; &#160; &#160;&quot;&quot;&quot;Handles REST operations for Customer /customer&quot;&quot;&quot;
</I>&gt;<i> &#160; &#160; &#160;pass
</I>&gt;<i>
</I>&gt;<i> class CustomerAddressRestService(Resource):
</I>&gt;<i> &#160; &#160; &#160;&quot;&quot;&quot;Handles REST operations for Customer Address
</I>&gt;<i> /customer/&lt;customerId&gt;/address&quot;&quot;&quot;
</I>&gt;<i> &#160; &#160; &#160;pass
</I>&gt;<i>
</I>&gt;<i> Instead I would need to have one common Resource that handles everything
</I>&gt;<i> under '/customer',
</I>&gt;<i> including the customer entity and customer address entity in one (and any
</I>&gt;<i> other entity whose root is '/customer').
</I>
Perhaps I'm misunderstanding something here, but the idea with Twisted
resources (that aren't leaf resources) is not to have two things
handle the same path. The way the resource lookups work is that Site
loops through request.postpath from the root resource, locating child
resources one segment at a time, until it either runs out of path
segments *or* encounters a resource with isLeaf=True, that resource is
then rendered.

So in this example you might implement a CustomerIndexResource (that
exists at /customers) with a getChild method (/customers/&lt;name&gt;) that
creates a CustomerResource with some information (via a database call,
web service call, etc.). That CustomerResource then handles child
resource location for things like &quot;address&quot;
(/customers/&lt;name&gt;/address). This approach also makes it easier to do
things like swap out CustomerResource for ReadOnlyCustomerResource
that perhaps doesn't allow POST/PUT methods or prevents access to
certain child resources by not even having those child resources.

&gt;<i> That isn't a very good design...especially if you maybe have 50 different
</I>&gt;<i> entities hooked up &#160;under '/customer' (like in our app).
</I>&gt;<i> It seems in order to enable having nice cohesive classes that provide a REST
</I>&gt;<i> service for just one entity I would need to manually
</I>&gt;<i> route the request from the root Resource into each of them myself.
</I>
You can easily design a plugin system or other programmatic method for
handling dynamic child dispatch for these 50 methods on a customer
object.

Hope this helps.

-- 
Jonathan

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="004897.html">[Twisted-web] Leaf Resources with child Leaf Resources
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4896">[ date ]</a>
              <a href="thread.html#4896">[ thread ]</a>
              <a href="subject.html#4896">[ subject ]</a>
              <a href="author.html#4896">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
