<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] twistd and web2 weirdness
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20twistd%20and%20web2%20weirdness&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003505.html">
   <LINK REL="Next"  HREF="003491.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] twistd and web2 weirdness</H1>
    <B>Phil Christensen</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20twistd%20and%20web2%20weirdness&In-Reply-To="
       TITLE="[Twisted-web] twistd and web2 weirdness">phil at bubblehouse.org
       </A><BR>
    <I>Tue Jul 24 11:35:34 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003505.html">[Twisted-web] Adding Athena JS handlers in render methods?
</A></li>
        <LI>Next message: <A HREF="003491.html">[Twisted-web] twistd and web2 weirdness
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3490">[ date ]</a>
              <a href="thread.html#3490">[ thread ]</a>
              <a href="subject.html#3490">[ subject ]</a>
              <a href="author.html#3490">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm totally confounded on this one. For some reason, when using  
twistd, web2 cannot be found by the interpreter. (I'm running Twisted  
SVN HEAD on pythonmac's Python 2.4 on Mac OS X.)

For example, I've got the following code in a file called twisted.py


     from twisted.web2 import server, channel, static, wsgi

     def handler(env, start_response):
     	pass

     # This part gets run when you run this file via: &quot;twistd -noy  
modu/web/twisted.py&quot;
     root = wsgi.WSGIResource(handler)
     site = server.Site(root)

     # Start up the server
     from twisted.application import service, strports
     application = service.Application(&quot;web2&quot;)
     s = strports.service('tcp:8888', channel.HTTPFactory(site))
     s.setServiceParent(application)


When running it (with twistd -noy twisted.py), I get:


     Traceback (most recent call last):
       File &quot;/Library/Frameworks/Python.framework/Versions/Current/ 
bin/twistd&quot;, line 20, in ?
         from twisted.scripts.twistd import run
       File &quot;/Users/phil/Desktop/twisted.py&quot;, line 1, in ?
         from twisted.web2 import server, channel, static, wsgi
     ImportError: No module named web2


This is a standard Twisted installation using `python setup.py  
install`, and web2 is clearly in my site-packages directory:


     optimus:~ phil$ ls -la /Library/Frameworks/Python.framework/ 
Versions/2.4/lib/python2.4/site-packages/twisted/web2
     total 1272
     drwxr-xr-x   54 root  admin   1836 Jul 24 10:54 .
     drwxr-xr-x   36 root  admin   1224 Jul 24 10:54 ..
     -rw-r--r--    1 root  admin    254 Jun 29  2006 __init__.py
     -rw-r--r--    1 root  admin    371 Jul 24 10:54 __init__.pyc
     ...
     ...


Even stranger is that twistd doesn't seem to have any problems  
finding/loading the web2 plugin


     optimus:~ phil$ twistd
     Usage: twistd [options]
     ...
     ...
     ...
     Commands:
         web2             An HTTP/1.1 web server that can serve from  
a filesystem or
                          application resource.
     ...
     ...
     ...


And when running the exact interpreter path specified in twistd,  
there are no problems either:


     optimus:~ phil$ which twistd
     /Library/Frameworks/Python.framework/Versions/Current/bin/twistd

     optimus:~ phil$ head -n 1 /Library/Frameworks/Python.framework/ 
Versions/Current/bin/twistd
     #!/Library/Frameworks/Python.framework/Versions/2.4/Resources/ 
Python.app/Contents/MacOS/Python

     optimus:~ phil$ /Library/Frameworks/Python.framework/Versions/ 
2.4/Resources/Python.app/Contents/MacOS/Python
     Python 2.4.3 (#1, Apr  7 2006, 10:54:33)
     [GCC 4.0.1 (Apple Computer, Inc. build 5250)] on darwin
     Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more  
information.
     &gt;&gt;&gt; from twisted.web2 import server
     &gt;&gt;&gt;


I had this same issue on my other development machine, also a Mac,  
but I assumed it was some kind of configuration issue with that  
machine in particular.

Has anyone had a similar experience? Any help in this matter would be  
appreciated.

-phil

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003505.html">[Twisted-web] Adding Athena JS handlers in render methods?
</A></li>
	<LI>Next message: <A HREF="003491.html">[Twisted-web] twistd and web2 weirdness
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3490">[ date ]</a>
              <a href="thread.html#3490">[ thread ]</a>
              <a href="subject.html#3490">[ subject ]</a>
              <a href="author.html#3490">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
