<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] what happens when browsers close the connection?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20what%20happens%20when%20browsers%20close%20the%20connection%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003502.html">
   <LINK REL="Next"  HREF="003504.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] what happens when browsers close the connection?</H1>
    <B>Phil Christensen</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20what%20happens%20when%20browsers%20close%20the%20connection%3F&In-Reply-To="
       TITLE="[Twisted-web] what happens when browsers close the connection?">phil at bubblehouse.org
       </A><BR>
    <I>Fri Jul 27 17:25:44 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003502.html">[Twisted-web] wsgi thread synchronization
</A></li>
        <LI>Next message: <A HREF="003504.html">[Twisted-web] what happens when browsers close the connection?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3503">[ date ]</a>
              <a href="thread.html#3503">[ thread ]</a>
              <a href="subject.html#3503">[ subject ]</a>
              <a href="author.html#3503">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sorry to be so noisy lately, but I've run into another strange  
problem with web2.wsgi, or more likely, my understanding of it.

I'm seeing issues when the browser connection is closed uncleanly,  
particularly when doing a &quot;fast reload&quot; and clicking the reload  
before the first request/response has completed.

My specific issue is that when this happens, if I'm in the middle of  
a MySQL query (which in my app, I usually am), subsequent calls to  
&lt;Cursor&gt;.execute() are failing because the previous resultset was  
never freed.

This is only an issue when using web2 (or my custom twisted.web wsgi  
layer, which still uses web2's wsgi.WSGIHandler class). Apache/ 
mod_python seems to allow each request to continue to completion  
behind the scenes, although it makes up for it by crashing horribly  
in other ways.

What I'd like to know is what exactly happens when a browser closes a  
connection? Is there any possibility that the lost connection event  
has some implications further up the call chain? Could any of this  
somehow stop or kill the thread created in WSGIResource.renderHTTP()?

-phil

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003502.html">[Twisted-web] wsgi thread synchronization
</A></li>
	<LI>Next message: <A HREF="003504.html">[Twisted-web] what happens when browsers close the connection?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3503">[ date ]</a>
              <a href="thread.html#3503">[ thread ]</a>
              <a href="subject.html#3503">[ subject ]</a>
              <a href="author.html#3503">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
