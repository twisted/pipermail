<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Re: some questions about twisted.web
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Re%3A%20some%20questions%20about%20twisted.web&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004122.html">
   <LINK REL="Next"  HREF="004124.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Re: some questions about twisted.web</H1>
    <B>David Bolen</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Re%3A%20some%20questions%20about%20twisted.web&In-Reply-To="
       TITLE="[Twisted-web] Re: some questions about twisted.web">db3l.net at gmail.com
       </A><BR>
    <I>Wed Apr  8 15:05:12 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004122.html">[Twisted-web] some questions about twisted.web
</A></li>
        <LI>Next message: <A HREF="004124.html">[Twisted-web] Re: some questions about twisted.web
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4123">[ date ]</a>
              <a href="thread.html#4123">[ thread ]</a>
              <a href="subject.html#4123">[ subject ]</a>
              <a href="author.html#4123">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jack Moffitt &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">jack at chesspark.com</A>&gt; writes:

&gt;<i> Now I've just deluged the poor user with lots of factory start and
</I>&gt;<i> stops.  All I want is normal HTTP style logs.  Twisted's logging
</I>&gt;<i> infrastructure has its place, but it is not quite ready to produce
</I>&gt;<i> user friendly output for a simple utility.
</I>
I generally just use the default logging but then it's mostly for my
own use, not end users.

As an interim to any more extensive changes, perhaps you could just
use a local HTTPFactory subclass for your site, overriding with your
own log method that bypasses the twisted logging to do whatever you
want?

You could then use twisted logging (if preferred) for lower level logs
and do some higher level stuff for user logging.
If you're looking for 

&gt;<i> Great, now the user has to edit a tac file just to configure the
</I>&gt;<i> thing.  I'd rather them be able to type &quot;tape&quot; and not have to worry
</I>&gt;<i> about twistd -ny some.tac.  I use tac files a lot, but they don't make
</I>&gt;<i> much sense for simple utilities.  It sucks that it's either/or with
</I>&gt;<i> Twisted applications.
</I>
For what it's worth, I've just never seemed to get into any of the
services or applications stuff with twisted.  It's certainly not a
requirement to run a server.  You can implement your own daemon
support on a Unix platform, or run as a service under Windows or
whatever.

There's nothing stopping you from just instantiating the right factory
classes, associating them with a port and running the reactor.  That
can then be a single python module that gets run directly, or if built
into an application (such as py2exe on Windows), executed directly.

I normally have more than just the web server running in a single process,
but all you'd probably need is to instantiate your &quot;Site&quot; class, connect
it with reactor.listenTCP, and then sit in reactor.run().

&gt;<i> I grok Twisted just fine.  This may be my first post to twisted-web,
</I>&gt;<i> but I've been hacking on and around Twisted for some time.  Even
</I>&gt;<i> Apache doesn't work this way.  I can tell apache that my proxy is at
</I>&gt;<i> /some/url/over/here and it will work.  It will return 404s for the
</I>&gt;<i> intermediate URLs.  Because Resources only have immediate children and
</I>&gt;<i> paths are only dealt with in single element pieces, there doesn't seem
</I>&gt;<i> to be a way to do this in Twisted Web.  It feels weird that the tree
</I>&gt;<i> must be complete.  It feels weird that paths are dealt with in tiny
</I>&gt;<i> sections.
</I>
As another view on this point, for me, I find the &quot;work segment by
segment&quot; approach of twisted's to be very natural, albeit different
than an arbitrary path mapping mechanism such as apache or many web
frameworks.  I actually missed the incremental lookup mechanism when
first working with django on a project, for example. It can feel weird
compared to other mechanisms, but just because it doesn't match how
Apache works need not make it a problem.  There's more than one way to
navigate an object hierarchy within a server based on the URL in a
request.

Since it's inherently simple in terms of using the getChild* methods
(or resource.getChildForRequest helper function), it's easy to
override to make very dynamic sites, which I guess I find myself doing
more often than not.  It can be very flexible when it comes to
dynamically picking the resource to handle a request.

Yes, for a static (URL wise) portion of a site you do need to
construct a &quot;tree&quot; of resources, so I just generally do that at
initialization time.  At worst you can stub out any piece of the tree
with a plain old Resource object to which you can add further
children.

That's not so say supporting a more &quot;mapper&quot; based approach on top of
this might not be useful, if only to assist people more used to that
approach.  But I definitely wouldn't want to lose the dynamic
capabilities provided by the current system.

One way to tie into the current framework to take more control is to
define the resource at the root of your mapper-capable tree using
&quot;isLeaf&quot;.  That resource's &quot;render&quot; method will then get called for
any URLs at that point or below, have access to the full URL (already
split into segments), and it can do whatever lookups/mapping to
resource objects it might like.  I've used that to strip out URL
prefixes (such as client keys unique to them) and then re-perform the
URL lookup to locate the resource, but it could just as easily do a
mapper based URL lookup at that point to yield the right resource
object to then call (instantiating it if needed) to render the
request.

-- David


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004122.html">[Twisted-web] some questions about twisted.web
</A></li>
	<LI>Next message: <A HREF="004124.html">[Twisted-web] Re: some questions about twisted.web
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4123">[ date ]</a>
              <a href="thread.html#4123">[ thread ]</a>
              <a href="subject.html#4123">[ subject ]</a>
              <a href="author.html#4123">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
