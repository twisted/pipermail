<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Athena LiveElement: how to putChild under unique
	session URL?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Athena%20LiveElement%3A%20how%20to%20putChild%20under%20unique%0A%09session%20URL%3F&In-Reply-To=49EF1C68.5080503%40ivsn.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004157.html">
   <LINK REL="Next"  HREF="004160.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Athena LiveElement: how to putChild under unique
	session URL?</H1>
    <B>Werner Thie</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Athena%20LiveElement%3A%20how%20to%20putChild%20under%20unique%0A%09session%20URL%3F&In-Reply-To=49EF1C68.5080503%40ivsn.com"
       TITLE="[Twisted-web] Athena LiveElement: how to putChild under unique
	session URL?">wthie at thiengineering.ch
       </A><BR>
    <I>Wed Apr 22 10:44:17 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004157.html">[Twisted-web] Athena LiveElement: how to putChild under unique
	session URL?
</A></li>
        <LI>Next message: <A HREF="004160.html">[Twisted-web] Athena LiveElement: how to putChild under unique
	session URL?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4158">[ date ]</a>
              <a href="thread.html#4158">[ thread ]</a>
              <a href="subject.html#4158">[ subject ]</a>
              <a href="author.html#4158">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Paul Reznicek wrote:
&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">glyph at divmod.com</A> wrote:
</I>&gt;&gt;<i> On 21 Apr, 08:57 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">maillists at ivsn.com</A> wrote:
</I>&gt;&gt;&gt;<i> Hello All,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> LiveElement is fantastic, but I'm too stupid to find out,
</I>&gt;&gt;&gt;<i> how to put temporary page under sessiop URL...
</I>&gt;&gt;&gt;<i> This work for js modules at start like:
</I>&gt;&gt;&gt;<i>    <A HREF="http://localhost:8080/user/&lt;HASH">http://localhost:8080/user/&lt;HASH</A> clientID&gt;/jsmodule/athena_test
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I'd like to add temporary during run time something like:
</I>&gt;&gt;&gt;<i>    <A HREF="http://localhost:8080/user/&lt;HASH">http://localhost:8080/user/&lt;HASH</A> clientID&gt;/your_data
</I>&gt;&gt;&gt;<i> page or staticFile, which should exists only few minutes.
</I>&gt;<i> Caveat is, that instances of gone clients are keeping in memory. Is there
</I>&gt;<i> a way to find out, that a client is gone (closed browser or switched to
</I>&gt;<i> other site)?
</I>Welcome to the land of garbage collecting languages... What was the 
losing memory of the C++ ages is now the not releasing memory because of 
noncollectable garbage and server processes eating all the memory the 
machine has. I had to learn it the hard way but NEVER ever store a 
reference to something like sessions, mind or the the hierarchy of your 
LiveElements unless you're prepared to handle the breakup of the 
reference at cleanup time. Also keep in mind that the object hierarchy 
of client and server must be in sync or you're risking that the detach 
functionality does not work as advertised. Please see the 
detach/detached functionality in athena.py

class thePage(athena.LivePage):

   def beforeRender(self, ctx):
            :
     d = self.notifyOnDisconnect()
     d.addErrback(self.disconn)

   def disconn(self, reason):
     &quot;&quot;&quot;
     we will be called back when the client disconnects, just iterate
     over all children and call a disconnected func if available
     &quot;&quot;&quot;
     for child in self.liveFragmentChildren:
       if hasattr(child, 'disconnected'):
         child.disconnected(reason);

Werner

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004157.html">[Twisted-web] Athena LiveElement: how to putChild under unique
	session URL?
</A></li>
	<LI>Next message: <A HREF="004160.html">[Twisted-web] Athena LiveElement: how to putChild under unique
	session URL?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4158">[ date ]</a>
              <a href="thread.html#4158">[ thread ]</a>
              <a href="subject.html#4158">[ subject ]</a>
              <a href="author.html#4158">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
