<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] proxy http 204
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20proxy%20http%20204&In-Reply-To=20090424190153.24697.1830717712.divmod.quotient.11290%40henry.divmod.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004163.html">
   <LINK REL="Next"  HREF="004165.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] proxy http 204</H1>
    <B>Brian Kuhn</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20proxy%20http%20204&In-Reply-To=20090424190153.24697.1830717712.divmod.quotient.11290%40henry.divmod.com"
       TITLE="[Twisted-web] proxy http 204">bnkuhn at gmail.com
       </A><BR>
    <I>Fri Apr 24 15:40:33 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004163.html">[Twisted-web] proxy http 204
</A></li>
        <LI>Next message: <A HREF="004165.html">[Twisted-web] proxy http 204
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4164">[ date ]</a>
              <a href="thread.html#4164">[ thread ]</a>
              <a href="subject.html#4164">[ subject ]</a>
              <a href="author.html#4164">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I understand what a 204 is.  It appears though that the framework is hanging
on them...not my code.
Twisted calls my handleEndHeaders method, then hangs for awhile, then calls
my handleResponseEnd method.

Perhaps there is something I need to do in the handleStatus method to
preempt this behavior.  Any idea how I can tell Twisted to not timeout
waiting for content that will never come?

-Brian




On Fri, Apr 24, 2009 at 12:01 PM, Jean-Paul Calderone &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">exarkun at divmod.com</A>&gt;w=
rote:

&gt;<i> On Fri, 24 Apr 2009 11:55:20 -0700, Brian Kuhn &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">bnkuhn at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I've written an http proxy using twisted.  It works fine, except when
</I>&gt;&gt;<i> proxying an HTTP 204 response.
</I>&gt;&gt;<i> The handleStatus, handleHeader and handleEndHeaders all get called.  Then
</I>&gt;&gt;<i> the process just hangs for 10+ seconds (presumably timing out).  Then
</I>&gt;&gt;<i> handleResponseEnd gets called (never calling handleResponsePart).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> All of this is expected, except for the hanging part.  Anyone have any
</I>&gt;&gt;<i> ideas
</I>&gt;&gt;<i> what's going on here?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 204 is &quot;No Content&quot;.  Quoting the RFC:
</I>&gt;<i>
</I>&gt;<i>  The 204 response MUST NOT include a message-body, and thus is always
</I>&gt;<i>  terminated by the first empty line after the header fields.
</I>&gt;<i>
</I>&gt;<i> This, despite the fact that a 204 response may include a content-length
</I>&gt;<i> header with a non-zero value.  Make sure you're handling this properly.
</I>&gt;<i>
</I>&gt;<i> Jean-Paul
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-web mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">Twisted-web at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20090424/8c=">http://twistedmatrix.com/pipermail/twisted-web/attachments/20090424/8c=</A>
3db563/attachment.htm
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004163.html">[Twisted-web] proxy http 204
</A></li>
	<LI>Next message: <A HREF="004165.html">[Twisted-web] proxy http 204
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4164">[ date ]</a>
              <a href="thread.html#4164">[ thread ]</a>
              <a href="subject.html#4164">[ subject ]</a>
              <a href="author.html#4164">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
