<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Athena LiveElement: how to putChild under unique
	session URL?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Athena%20LiveElement%3A%20how%20to%20putChild%20under%20unique%0A%09session%20URL%3F&In-Reply-To=20090422114758.12555.1153349173.divmod.xquotient.8879%40weber.divmod.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004155.html">
   <LINK REL="Next"  HREF="004158.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Athena LiveElement: how to putChild under unique
	session URL?</H1>
    <B>Paul Reznicek</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Athena%20LiveElement%3A%20how%20to%20putChild%20under%20unique%0A%09session%20URL%3F&In-Reply-To=20090422114758.12555.1153349173.divmod.xquotient.8879%40weber.divmod.com"
       TITLE="[Twisted-web] Athena LiveElement: how to putChild under unique
	session URL?">maillists at ivsn.com
       </A><BR>
    <I>Wed Apr 22 09:32:24 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004155.html">[Twisted-web] Athena LiveElement: how to putChild under unique
	session URL?
</A></li>
        <LI>Next message: <A HREF="004158.html">[Twisted-web] Athena LiveElement: how to putChild under unique
	session URL?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4157">[ date ]</a>
              <a href="thread.html#4157">[ thread ]</a>
              <a href="subject.html#4157">[ subject ]</a>
              <a href="author.html#4157">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">glyph at divmod.com</A> wrote:
&gt;<i> On 21 Apr, 08:57 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">maillists at ivsn.com</A> wrote:
</I>&gt;&gt;<i> Hello All,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> LiveElement is fantastic, but I'm too stupid to find out,
</I>&gt;&gt;<i> how to put temporary page under sessiop URL...
</I>&gt;&gt;<i> This work for js modules at start like:
</I>&gt;&gt;<i>    <A HREF="http://localhost:8080/user/&lt;HASH">http://localhost:8080/user/&lt;HASH</A> clientID&gt;/jsmodule/athena_test
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'd like to add temporary during run time something like:
</I>&gt;&gt;<i>    <A HREF="http://localhost:8080/user/&lt;HASH">http://localhost:8080/user/&lt;HASH</A> clientID&gt;/your_data
</I>&gt;&gt;<i> page or staticFile, which should exists only few minutes.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> How can I add a child to the livepage session path?
</I>&gt;<i> 
</I>&gt;<i> The magical hash URL you're referring to is just an alias for your page 
</I>&gt;<i> instance.  So all you need to do is, in your LiveElement:
</I>&gt;<i> 
</I>&gt;<i>    self.page.putChild(&quot;your_data&quot;, YourDataResource())
</I>&gt;<i> 
</I>&gt;<i> That YourDataResource() object (and its attendant URL) will then live as 
</I>&gt;<i> long as your LivePage connection does.
</I>&gt;<i> 
</I>&gt;<i> This is an interesting use-case, and it should work fine - but be aware 
</I>&gt;<i> that you're relying on a pretty weird little corner of implementation 
</I>&gt;<i> details here.  It certainly never occurred to *me* that somebody would 
</I>&gt;<i> want to do this :).
</I>&gt;<i> 
</I>&gt;<i> Particularly, there's no public API for generating this URL; you'll have 
</I>&gt;<i> to rely on the fact that url.here.child(self.clientID) keeps working.
</I>&gt;<i> 
</I>Thank you for that fast answer, I've tried before and now again, but this
work only when one instance is running. If you try on i.e. chatterbox,
after 2nd user join it is no more reliable, few times it works, but mostly
not.

I solved the problem by overriding locateChild in the top site instance of
WidgetPluginRoot by checking segments[0] against all instances of
elementFactory comparing their clientID and on match passing the request
to own method added to LiveElement derived class.
It is complicated, but seems to work... If there is an easier solution,
I'll be happy.

Caveat is, that instances of gone clients are keeping in memory. Is there
a way to find out, that a client is gone (closed browser or switched to
other site)?

Thanks &amp; regards,
Paul

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004155.html">[Twisted-web] Athena LiveElement: how to putChild under unique
	session URL?
</A></li>
	<LI>Next message: <A HREF="004158.html">[Twisted-web] Athena LiveElement: how to putChild under unique
	session URL?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4157">[ date ]</a>
              <a href="thread.html#4157">[ thread ]</a>
              <a href="subject.html#4157">[ subject ]</a>
              <a href="author.html#4157">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
