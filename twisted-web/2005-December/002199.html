<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Nevow - how to render sequence into 3 column table
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Nevow%20-%20how%20to%20render%20sequence%20into%203%20column%20table&In-Reply-To=4397193A.2070103%40ivsn.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002198.html">
   <LINK REL="Next"  HREF="002174.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Nevow - how to render sequence into 3 column table</H1>
    <B>Samuel Reynolds</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Nevow%20-%20how%20to%20render%20sequence%20into%203%20column%20table&In-Reply-To=4397193A.2070103%40ivsn.com"
       TITLE="[Twisted-web] Nevow - how to render sequence into 3 column table">sam at SpinwardStars.com
       </A><BR>
    <I>Wed Dec  7 10:58:07 MST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002198.html">[Twisted-web] Nevow - how to render sequence into 3 column table
</A></li>
        <LI>Next message: <A HREF="002174.html">[Twisted-web] Strange crash with custom resource code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2199">[ date ]</a>
              <a href="thread.html#2199">[ thread ]</a>
              <a href="subject.html#2199">[ subject ]</a>
              <a href="author.html#2199">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You'd need a custom renderer that does the
multicolumn layout.

I've attached a function that takes a list of items
and returns a list of lists. I created it for the
purpose you describe. It's not the prettiest or
most elegant code I've written, but I wrote it
when I was learning Python; since it works, and
I don't need it often, I haven't bothered trying
to improve it.

I added a couple of simple examples to the docstring.

Hope this helps.

- Sam

At 2005-12-07 06:17 PM +0100, you wrote:
&gt;<i>Leif K-Brooks wrote:
</I>&gt;&gt;&gt;<i>The result should looks like:
</I>&gt;&gt;&gt;<i>    &lt;table&gt;
</I>&gt;&gt;&gt;<i>      &lt;tr&gt;
</I>&gt;&gt;&gt;<i>        &lt;td&gt;Alfred is 15&lt;/td&gt;
</I>&gt;&gt;&gt;<i>        &lt;td&gt;Mary is 17&lt;/td&gt;
</I>&gt;&gt;&gt;<i>        &lt;td&gt;Bob is 25&lt;/td&gt;
</I>&gt;&gt;&gt;<i>      &lt;/tr&gt;
</I>&gt;&gt;&gt;<i>      ...
</I>&gt;&gt;&gt;<i>      &lt;tr&gt;
</I>&gt;&gt;&gt;<i>        &lt;td&gt;Molly is 22&lt;/td&gt;
</I>&gt;&gt;&gt;<i>        &lt;td&gt;Manfred is 33&lt;/td&gt;
</I>&gt;&gt;&gt;<i>      &lt;/tr&gt;
</I>&gt;&gt;&gt;<i>    &lt;/table&gt;
</I>&gt;&gt;<i>If all you really want to do is have the names and ages displayed next
</I>&gt;&gt;<i>to each other, why not use ordinary nevow:render=&quot;sequence&quot; along with
</I>&gt;&gt;<i>CSS? A demonstration of the stylesheet you'll need is at
</I>&gt;&gt;<i>&lt;<A HREF="http://tw.ecritters.biz/html_examples/tile/">http://tw.ecritters.biz/html_examples/tile/</A>&gt;.
</I>&gt;<i>
</I>&gt;<i>Thanks for this hint, it solve 50% of my needs ...
</I>&gt;<i>There is one reason, why I'd like prefer the &lt;table&gt; solution:
</I>&gt;<i>the variable column width!
</I>&gt;<i>In real, I'd like to use this for database field editing and the variable
</I>&gt;<i>field width get very important.
</I>&gt;<i>
</I>&gt;<i>But your way is better than no way !!!
</I>&gt;<i>Paul
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Twisted-web mailing list
</I>&gt;<i><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">Twisted-web at twistedmatrix.com</A>
</I>&gt;<i><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web</A>
</I>
__________________________________________________________
Spinward Stars, LLC                        Samuel Reynolds
Software Consulting and Development           303-805-1446
<A HREF="http://SpinwardStars.com/">http://SpinwardStars.com/</A>            <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">sam at SpinwardStars.com</A> 
-------------- next part --------------
#	PlaceInColumns.py
#
#	Code by Samuel Reynolds.
#	This code is hereby released to the public domain.
#

def PlaceInColumns( itemList, numColumns=2, flReadAcross=False, flReturnAsRows=False ):
	&quot;&quot;&quot;
	Group the items in itemList for multiple-column presentation.
	
	Examples:
	1.	To present data as a 4-column HTML table:
			rowData = PlaceInColumns( myData, 4, True, True )
			#                                    ^^^^  ^^^^
			print '&lt;table&gt;'
			for row in rowData:
				TDs = [ '&lt;td&gt;%s&lt;/td&gt;' % elt for elt in row ]
				print '&lt;tr&gt;%s&lt;tr&gt;' % ''.join( TDs )
			print '&lt;/table&gt;'
	
	2.	To present data as a 4-column HTML table
		using only one row (items separated vertically by linebreaks):
			colData = PlaceInColumns( myData, 4, True, False )
			#                                    ^^^^  ^^^^^
			print '&lt;table&gt;'
			print '&lt;tr&gt;'
			for col in colData:
				print '&lt;td&gt;'
				print '&lt;br /&gt;'.join( col )
				print '&lt;/td&gt;'
			print '&lt;/tr&gt;'
			print '&lt;/table&gt;'
		
	&quot;&quot;&quot;
	outList = []
	if numColumns &lt; 2:
		outList.append( itemList )
	else:
		numItems = len( itemList )
		
		if flReadAcross:	# Read across the columns
			idx = 0
			numCopies = 0
			subList = []
			while numCopies &lt; numItems:
				subList.append( itemList[idx] )
				numCopies += 1
				idx = idx + numColumns
				if idx &gt;= numItems:
					outList.append( subList )
					subList= []
					idx = idx % numColumns + 1
			if len( subList ) &gt; 0:
				outList.append( subList )
		else:	# Read down the columns
			def CalcItemsPerColumn( cols, count ):
				perCol = count / cols
				if cols * perCol &lt; count:
					perCol += 1
				return perCol
			idx = 1
			numCopies = 0
			numColumnsRemaining = numColumns
			subList = []
			itemsPerColumn = CalcItemsPerColumn( numColumnsRemaining, numItems )
			while numCopies &lt; numItems:
				subList.append( itemList[ numCopies ] )
				numCopies += 1
				idx = idx + 1
				if idx &gt; itemsPerColumn:
					outList.append( subList )
					subList = []
					idx = 1
					numColumnsRemaining -= 1
					if numColumnsRemaining &gt; 1:
						itemsPerColumn = CalcItemsPerColumn( numColumnsRemaining, numItems - numCopies )
					else:
						itemsPerColumn = numItems - numCopies
	
	if not flReturnAsRows:
		return outList
	
	#Rows requested
	numCols = len( outList )
	numRows = len( outList[0] )
	rowsList = []
	subList = []
	numCopies = 0
	rowIdx = 1
	colIdx = 1
	for rowIdx in range( 0, numRows ):
		subList = []
		for colIdx in range( 0, numCols ):
			try:
				subList.append( outList[colIdx][rowIdx] )
			except:
				None
		rowsList.append( subList )
	
	return rowsList


if __name__ == &quot;__main__&quot;:
	
	def TEST( trial, expect, flIgnoreNewlines=False ):
		&quot;&quot;&quot;
		Run trial script, compare to expected result,
		and print pass or fail message.
		&quot;&quot;&quot;
		result = eval( trial )
		if flIgnoreNewlines:
			expect = string.replace( expect, &quot;\n&quot;, &quot;\r&quot; )
			while expect[-1] == '\r':
				expect = expect[:-1]
			result = string.replace( result, &quot;\n&quot;, &quot;\r&quot; )
			while result[-1] == '\r':
				result = result[:-1]
		if result == expect:
			print &quot;[PASS]      &quot;, trial
		else:
			print &quot;[FAIL] **** &quot;, trial
			print &quot;=&quot; * 75
			print &quot;Expect:&quot;
			print &quot;.&quot; * 75
			print expect
			print &quot;-&quot; * 75
			print &quot;\nResult:&quot;
			print &quot;.&quot; * 75
			print result
			print &quot;=&quot; * 75
	
	# PlaceInColumns
	itemList = ['a','b','c','d','e','f','g']
	
	expectList = [ itemList ]
	TEST( &quot;PlaceInColumns( itemList, 1 )&quot;, expectList )
	
	expectList = [['a'],['b'],['c'],['d'],['e'],['f'],['g']]
	TEST( &quot;PlaceInColumns( itemList, 1, flReturnAsRows=True )&quot;, expectList )
	
	expectList = [['a','b','c','d'],['e','f','g']]
	TEST( &quot;PlaceInColumns( itemList, 2 )&quot;, expectList )
	
	expectList = [['a','c','e','g'], ['b','d','f']]
	TEST( &quot;PlaceInColumns( itemList, 2, flReadAcross=True )&quot;, expectList )
	
	expectList = [['a','b','c'],['d','e'],['f','g']]
	TEST( &quot;PlaceInColumns( itemList, 3 )&quot;, expectList )
	
	expectList = [['a','d','f'],['b','e','g'],['c']]
	TEST( &quot;PlaceInColumns( itemList, 3, flReturnAsRows=True )&quot;, expectList )
	
	expectList = [['a','d','g'],['b','e'],['c','f']]
	TEST( &quot;PlaceInColumns( itemList, 3, flReadAcross=True )&quot;, expectList )
	
	expectList = [['a','b','c'],['d','e','f'],['g']]
	TEST( &quot;PlaceInColumns( itemList, 3, flReadAcross=True, flReturnAsRows=True )&quot;, expectList )
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002198.html">[Twisted-web] Nevow - how to render sequence into 3 column table
</A></li>
	<LI>Next message: <A HREF="002174.html">[Twisted-web] Strange crash with custom resource code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2199">[ date ]</a>
              <a href="thread.html#2199">[ thread ]</a>
              <a href="subject.html#2199">[ subject ]</a>
              <a href="author.html#2199">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
