<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] XMLRPC and sessions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20XMLRPC%20and%20sessions&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002251.html">
   <LINK REL="Next"  HREF="002256.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] XMLRPC and sessions</H1>
    <B>Rob McMillen</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20XMLRPC%20and%20sessions&In-Reply-To="
       TITLE="[Twisted-web] XMLRPC and sessions">rob at securecognition.com
       </A><BR>
    <I>Tue Dec 27 23:04:01 MST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002251.html">[Twisted-web] WebDAV branch merge
</A></li>
        <LI>Next message: <A HREF="002256.html">[Twisted-web] Re: [Twisted-Python] WSGI Thread-management strategy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2255">[ date ]</a>
              <a href="thread.html#2255">[ thread ]</a>
              <a href="subject.html#2255">[ subject ]</a>
              <a href="author.html#2255">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am trying to build an XMLRPC server that utilizes sessions to keep
track of authenticated users.  However, I have not been able to find
too much on session management and the only way I have figured out how
to get at the site from within the XMLRPC server is by overriding the
render method.  Is this the proper way?  Are there other ways to do
it?  I am currently thinking about adding a mechanism to store the uid
and time in a db.

Any help would be great!

Rob

class Handler(xmlrpc.XMLRPC):
   def __init__(self, cmd_schema, cmd_xml):
      log.msg(&quot;Using %s and %s to configure api&quot; % (cmd_schema, cmd_xml))
      self.api = API(cmd_schema, cmd_xml)

      log.msg(&quot;Preparing authentication mechanism&quot;)
      self.creds = Creds()

      log.msg(&quot;Preparing role mechanism&quot;)
      self.roles = Roles()

   def render(self, request):
      s = request.site.makeSession()
      print s.uid
      return xmlrpc.XMLRPC.render(self, request)

   def xmlrpc_login(self, user, password):
      return self.creds.authenticate(user, password).addErrback(
         self.handleError)

if __name__ == &quot;__main__&quot;:
   import sys
   from twisted.internet import reactor
   from twisted.python import log

   log.startLogging(sys.stdout)

   site = server.Site(Handler('conf/api.xsd', 'conf/api.xml'))
   reactor.listenSSL(8000, site, ServerContextFactory('etc/host.pem',
'etc/host.pem'))
   reactor.run()

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002251.html">[Twisted-web] WebDAV branch merge
</A></li>
	<LI>Next message: <A HREF="002256.html">[Twisted-web] Re: [Twisted-Python] WSGI Thread-management strategy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2255">[ date ]</a>
              <a href="thread.html#2255">[ thread ]</a>
              <a href="subject.html#2255">[ subject ]</a>
              <a href="author.html#2255">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
