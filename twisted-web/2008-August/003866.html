<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> Fwd: [Twisted-web] Setting up a project.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Fwd%3A%20%5BTwisted-web%5D%20Setting%20up%20a%20project.&In-Reply-To=mailman.76090.1218038609.30706.twisted-web%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003872.html">
   <LINK REL="Next"  HREF="003869.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Fwd: [Twisted-web] Setting up a project.</H1>
    <B>Govind Salinas</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Fwd%3A%20%5BTwisted-web%5D%20Setting%20up%20a%20project.&In-Reply-To=mailman.76090.1218038609.30706.twisted-web%40twistedmatrix.com"
       TITLE="Fwd: [Twisted-web] Setting up a project.">blix at sophiasuchtig.com
       </A><BR>
    <I>Wed Aug  6 12:13:16 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003872.html">[Twisted-web] Re: Setting up a project.
</A></li>
        <LI>Next message: <A HREF="003869.html">[Twisted-web] Re: Fwd: Setting up a project.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3866">[ date ]</a>
              <a href="thread.html#3866">[ thread ]</a>
              <a href="subject.html#3866">[ subject ]</a>
              <a href="author.html#3866">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Aug 6, 2008 at 4:27 AM, Phil Mayers &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">p.mayers at imperial.ac.uk</A>&gt; wrote:
&gt;<i> On Tue, Aug 05, 2008 at 06:30:23PM -0500, Govind Salinas wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi Folks,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I am trying to set up an application that uses twisted.web for doing
</I>&gt;&gt;<i> some ad-hoc serving of data.  If you are familiar with mercurial, what
</I>&gt;&gt;<i> i am doing is very similar to the &quot;hg serve&quot; command except it is for
</I>&gt;&gt;<i> use with git.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So my question is, how should I compose the project.  The how-tos and
</I>&gt;&gt;<i> examples left me not sure of what I should do.  I have something that
</I>&gt;&gt;<i> runs and can serve up mako templates, but that is all it can do since
</I>&gt;&gt;<i> I am doing everything manually.  I would prefer not to have to code in
</I>&gt;&gt;<i> serving things like css pages, 404 pages etc.  I am sure this is
</I>&gt;&gt;<i> already in twisted.web somewhere.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> You haven't really given enough information.
</I>&gt;<i>
</I>&gt;<i> I presume you're using twisted.web &quot;Resource&quot; classes and http server?
</I>&gt;<i>
</I>
Yes that is correct.


&gt;&gt;<i> Let me give you some information about the set up I have .  Basically
</I>&gt;&gt;<i> I have a python program running somewhere.  I will have a default set
</I>&gt;&gt;<i> of files that serve the content a particular way.  The default set
</I>&gt;&gt;<i> will contain mako templates[1], style sheets and perhaps some images.
</I>&gt;&gt;<i> So I need a way to kick off the mako templates based on the URL.  The
</I>&gt;&gt;<i> templates may include each other.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Here is the layout
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> content-dir/
</I>&gt;&gt;<i>  __config__.py -- This is a file that currently just sets up the mapping
</I>&gt;&gt;<i>                           between a regex that selects a page and a path
</I>&gt;&gt;<i> to
</I>&gt;&gt;<i>                           where that page's template is under the
</I>&gt;&gt;<i>                   content-dir
</I>&gt;&gt;<i>  main.html -- The html files here are really the mako templates
</I>&gt;&gt;<i>  main.css
</I>&gt;&gt;<i>  etc...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My server class takes in a template dir, loads the config and starts a
</I>&gt;&gt;<i> server.  When it gets a request it matches it against the regexes and
</I>&gt;&gt;<i> runs the template.  There should be some initialization that sets up
</I>&gt;&gt;<i> objects that get passed to the template (in addition to values from
</I>&gt;&gt;<i> the regex parsing). This is all pretty brain-dead code.
</I>&gt;<i>
</I>&gt;<i> Why does it need to be anything more than that? What's wrong with the
</I>&gt;<i> current code?
</I>
There are a few things wrong with my current approach.  One is that it
feels sort of like a hack the way I am doing it.  It doesn't seem like the
right way.  Second, since manually doing things that I normally expect
the web server to be doing,  I expect there are 100 things that I should
be doing that I am not to act like a proper server.  For instance, my
css pages wouldn't load so I am manually setting the content-type,
but *only* for css pages.  If I end up needing other types of files, I
will have to add that in as well.   Another example is that I am having
to roll my own page-not-found implementation.  Aside from setting
the response code to 404, I am not sure what else I need to be doing.

Now, I have been able to get things to work for the simple pages that
I have put together, and it works rather well.  But it seems limited and
fragile.

Is that more clear.

&gt;&gt;<i> I was hoping for some guidance on a better strategy for doing this.
</I>&gt;<i>
</I>&gt;<i> Better how?
</I>&gt;<i>
</I>&gt;&gt;<i> Any help would be appreciated.  Bonus points if it is something that
</I>&gt;&gt;<i> could easily be re-used on another webserver if someone wanted to host
</I>&gt;&gt;<i> this on an existing website.
</I>&gt;<i>
</I>&gt;<i> I don't understand that bit.
</I>
This is not too important, I was hoping that there was a &quot;framework&quot; that I
could use that would be portable to other webservers if someone wanted
to do so.

&gt;&gt;<i>
</I>&gt;&gt;<i> I tried to post this before signing up to the list and I was rejected.  I
</I>&gt;&gt;<i> don't
</I>&gt;&gt;<i> know if you guys consider that a problem.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> [1] I am only using mako because it seems to suit my needs from a
</I>&gt;&gt;<i> templating perspective.   If there is something built into twisted
</I>&gt;&gt;<i> that will do the job as well, then that would be one less dependency
</I>&gt;&gt;<i> that I have.
</I>&gt;<i>
</I>&gt;<i> You probably want to look at the Nevow toolkit which contains:
</I>&gt;<i>
</I>&gt;<i> * A slightly better application server / resource object hierarhcy on top of
</I>&gt;<i> twisted.web - my understanding is this will eventually be backported into
</I>&gt;<i> twisted.web
</I>&gt;<i>
</I>&gt;<i> * An XHTML &amp; native-python deferred-aware templating engine
</I>&gt;<i>
</I>&gt;<i> * An AJAX/COMET server called Athena
</I>&gt;<i>
</I>&gt;<i> A little more detail about what's wrong with the current system would be
</I>&gt;<i> helpful.
</I>
I think the problem is that, even having read the howtos, I do not feel like
I am making full use of the libraries in twisted.

I have not yet looked into newvow.  However I have seen mention of .rpy
files in the documentation, but not a lot on the files themselves. Is there
a tutorial or some documentation on how to use rpy files?  By that I mean
what should go inside them, setting up the server is explained in the
howtos.

-Govind

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003872.html">[Twisted-web] Re: Setting up a project.
</A></li>
	<LI>Next message: <A HREF="003869.html">[Twisted-web] Re: Fwd: Setting up a project.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3866">[ date ]</a>
              <a href="thread.html#3866">[ thread ]</a>
              <a href="subject.html#3866">[ subject ]</a>
              <a href="author.html#3866">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
