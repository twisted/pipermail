<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Content-disposition and static.File
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Content-disposition%20and%20static.File&In-Reply-To=48B7B092.8010101%40nu.no">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003902.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Content-disposition and static.File</H1>
    <B>Maarten ter Huurne</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Content-disposition%20and%20static.File&In-Reply-To=48B7B092.8010101%40nu.no"
       TITLE="[Twisted-web] Content-disposition and static.File">maarten at treewalker.org
       </A><BR>
    <I>Fri Aug 29 04:50:56 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003902.html">[Twisted-web] Content-disposition and static.File
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3903">[ date ]</a>
              <a href="thread.html#3903">[ thread ]</a>
              <a href="subject.html#3903">[ subject ]</a>
              <a href="author.html#3903">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Friday 29 August 2008, tarjei wrote:

&gt;<i> def locateChild(self, ctx):
</I>&gt;<i>    request = inevow.IRequest(ctx)
</I>&gt;<i>    request.setHeader(&quot;content-disposition&quot;
</I>&gt;<i> ,&quot;attachment;filename=foo.pdf&quot;)
</I>&gt;<i>
</I>&gt;<i>    return static.File(self.path_to_file)
</I>&gt;<i>
</I>&gt;<i> This works well (except I do not get to define the filename) if I do not
</I>&gt;<i> add the content-disposition header, but when I do that twisted just
</I>&gt;<i> explodes into an exception.
</I>
What is that exception exactly?

One thing to be careful with is that in HTTP headers only ASCII is allowed. 
If your file name is a unicode object (even if it only contains ASCII 
characters), 16-bit characters will be sent in the HTTP headers and the 
browser will not like that. But in my experience this does not cause 
exceptions (maybe it should, though).

Bye,
		Maarten
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 194 bytes
Desc: This is a digitally signed message part.
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20080829/3d311937/attachment.pgp">http://twistedmatrix.com/pipermail/twisted-web/attachments/20080829/3d311937/attachment.pgp</A>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003902.html">[Twisted-web] Content-disposition and static.File
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3903">[ date ]</a>
              <a href="thread.html#3903">[ thread ]</a>
              <a href="subject.html#3903">[ subject ]</a>
              <a href="author.html#3903">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
