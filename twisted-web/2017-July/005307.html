<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Question regarding custom contextFactory for twisted.web.client.Agent
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-web%5D%20Question%20regarding%20custom%20contextFactory%20for%0A%20twisted.web.client.Agent&In-Reply-To=%3CB69ACA5E-2444-460A-A02C-28467FA86964%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="005306.html">
   <LINK REL="Next"  HREF="005308.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Question regarding custom contextFactory for twisted.web.client.Agent</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-web%5D%20Question%20regarding%20custom%20contextFactory%20for%0A%20twisted.web.client.Agent&In-Reply-To=%3CB69ACA5E-2444-460A-A02C-28467FA86964%40twistedmatrix.com%3E"
       TITLE="[Twisted-web] Question regarding custom contextFactory for twisted.web.client.Agent">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon Jul  3 00:15:32 MDT 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005306.html">[Twisted-web] Question regarding custom contextFactory for twisted.web.client.Agent
</A></li>
        <LI>Next message (by thread): <A HREF="005308.html">[Twisted-web] Question regarding custom contextFactory for	twisted.web.client.Agent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5307">[ date ]</a>
              <a href="thread.html#5307">[ thread ]</a>
              <a href="subject.html#5307">[ subject ]</a>
              <a href="author.html#5307">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On Jul 2, 2017, at 9:58 PM, Jason Litzinger &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">jlitzingerdev at gmail.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> The cryptography APIs for making certs are pretty straightforward and well
</I>&gt;&gt;<i> documented.  But if another example helps, here's some code that creates a
</I>&gt;&gt;<i> self-signed ca cert and a client cert with an intermediate cert in between:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> <A HREF="https://github.com/LeastAuthority/txkube/blob/faa0374fcef6d089af39a98310f1bd798eb54b08/src/txkube/test/test_authentication.py#L17-L29">https://github.com/LeastAuthority/txkube/blob/faa0374fcef6d089af39a98310f1bd798eb54b08/src/txkube/test/test_authentication.py#L17-L29</A>
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> <A HREF="https://github.com/LeastAuthority/txkube/blob/faa0374fcef6d089af39a98310f1bd798eb54b08/src/txkube/test/test_authentication.py#L276-L309">https://github.com/LeastAuthority/txkube/blob/faa0374fcef6d089af39a98310f1bd798eb54b08/src/txkube/test/test_authentication.py#L276-L309</A>
</I>&gt;<i> 
</I>&gt;<i> I'm diving into adding benchmarks for testing HTTPS and this has been
</I>&gt;<i> very helpful.  I did have one question, in the cert function
</I>&gt;<i> neither the pubkey or privkey parameters are used, rather, a_key is
</I>&gt;<i> always used as both the public and the signing key.  Is that
</I>&gt;<i> intentional?
</I>&gt;<i> 
</I>&gt;<i> Or, should the public key be the pubkey value and the signing key the
</I>&gt;<i> privkey value?  Meaning, each cert uses the supplied public key and the
</I>&gt;<i> signing order is:
</I>&gt;<i> 
</I>&gt;<i>    a signs a
</I>&gt;<i>    a signs b
</I>&gt;<i>    b signs c
</I>&gt;<i> 
</I>&gt;<i> If so, do you want me to send you a PR for this change?
</I>
I don't know much about txkube, but my understanding of certificate chains suggests that this is what it is trying to test.  It looks like this might succeed by accident since everything is signed by the root, and therefore trusted?

It also appears to be implied that the chain is verified somehow, but the invariant is actually just about the subject/issuer pairs: <A HREF="https://github.com/LeastAuthority/txkube/blob/faa0374fcef6d089af39a98310f1bd798eb54b08/src/txkube/_authentication.py#L47-L59">https://github.com/LeastAuthority/txkube/blob/faa0374fcef6d089af39a98310f1bd798eb54b08/src/txkube/_authentication.py#L47-L59</A> &lt;<A HREF="https://github.com/LeastAuthority/txkube/blob/faa0374fcef6d089af39a98310f1bd798eb54b08/src/txkube/_authentication.py#L47-L59">https://github.com/LeastAuthority/txkube/blob/faa0374fcef6d089af39a98310f1bd798eb54b08/src/txkube/_authentication.py#L47-L59</A>&gt; so something else must be validating the chain.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-web/attachments/20170702/edb9beec/attachment.html&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005306.html">[Twisted-web] Question regarding custom contextFactory for twisted.web.client.Agent
</A></li>
	<LI>Next message (by thread): <A HREF="005308.html">[Twisted-web] Question regarding custom contextFactory for	twisted.web.client.Agent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5307">[ date ]</a>
              <a href="thread.html#5307">[ thread ]</a>
              <a href="subject.html#5307">[ subject ]</a>
              <a href="author.html#5307">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
