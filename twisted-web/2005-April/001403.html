<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] two questions abt nevow
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20two%20questions%20abt%20nevow&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001402.html">
   <LINK REL="Next"  HREF="001406.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] two questions abt nevow</H1>
    <B>Little</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20two%20questions%20abt%20nevow&In-Reply-To="
       TITLE="[Twisted-web] two questions abt nevow">mordaha at gmail.com
       </A><BR>
    <I>Mon Apr 25 00:41:32 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001402.html">[Twisted-web] pointers for newbie
</A></li>
        <LI>Next message: <A HREF="001406.html">[Twisted-web] two questions abt nevow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1403">[ date ]</a>
              <a href="thread.html#1403">[ thread ]</a>
              <a href="subject.html#1403">[ subject ]</a>
              <a href="author.html#1403">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm newbie now in Model-View-Controller pattern, from perl/php it's
difficult to think in DOM-model :)

So i have two questions, answers on which i can't google:

Q1: I have a page. At page i have 2 elements. The values(data-&gt;render)
of both elements must calculated from single request to the Database.
Simple, it's looks like:

[total: 100 rows]
[table-like result]

So, in the template i have 2 elements, with 2 data_functions:

&lt;div n:data=&quot;totals&quot;&gt; - ???
&lt;div n:data=&quot;result&quot;&gt; - select * from db ... where ...

But &quot;totals&quot; i will knew only after &quot;result&quot; makes request to DB

So, i must to make &quot;select * &quot; in data_totals(), store data in
self.var, and take it from self.var in data_result() function.
This way is not perfect to me, coz if request to DB failed - it's very
difficult to pass message about error into &quot;request&quot; function. May be
not difficult but not clear. :(

Another way is to use &quot;fake&quot; tag before &quot;totals&quot; and &quot;request&quot;, like this:

&lt;n:invisible data=&quot;real_request&quot;&gt;
&lt;div n:data=&quot;fetch_totals&quot;&gt;
&lt;div n:data=&quot;fetch_data&quot;&gt;

Where data_real_request() doing &quot;select *&quot; and stores result (or error
msg) in self.var
It's not perfect too, coz we have program logic layer in template,
and, again, it's not clear to programmer.

Third way is to use 2 requests to DB - the worst way, coz requests are
long in time.

Is there another, perfect, clear way to produce such pages in nevow?

Q2: About formless. How can i use my own check of form element's value?
For example, i have &quot;e-mail&quot; field in form. And i wanna check char '@'
existense in it.
When my code falls into anotate.autocallable() function in
FormImplementation class - i have only values of form elements.
If e-mail value doesn't have &quot;@&quot;-char, how can i stop submitting and
show error near &quot;e-mail&quot; field in form when RenderForm() called?

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001402.html">[Twisted-web] pointers for newbie
</A></li>
	<LI>Next message: <A HREF="001406.html">[Twisted-web] two questions abt nevow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1403">[ date ]</a>
              <a href="thread.html#1403">[ thread ]</a>
              <a href="subject.html#1403">[ subject ]</a>
              <a href="author.html#1403">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
