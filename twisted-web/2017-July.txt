From jlitzingerdev at gmail.com  Sun Jul  2 22:58:28 2017
From: jlitzingerdev at gmail.com (Jason Litzinger)
Date: Sun, 2 Jul 2017 22:58:28 -0600
Subject: [Twisted-web] Question regarding custom contextFactory for
 twisted.web.client.Agent
In-Reply-To: <CAEeXt4OShOLHpc47yPYEpwpVePAoCdw+Z2j49+mSKx+_yL1KBA@mail.gmail.com>
References: <CAARXrP=bu-MmyNriipSx9WSXMA9VB7Q4MvSDaavYi9E0xpn3pQ@mail.gmail.com>
 <D4A89F99-09B0-404A-8A96-286B9E44CC67@twistedmatrix.com>
 <20170522044113.GA2346@arch-tinker.localdomain>
 <87FD5935-20E0-4A3C-9BC0-51DC34B25F62@twistedmatrix.com>
 <20170523003830.GA1086@arch-tinker.localdomain>
 <E72E306E-2656-4582-A71D-30DDF4ED117E@twistedmatrix.com>
 <CAEeXt4OShOLHpc47yPYEpwpVePAoCdw+Z2j49+mSKx+_yL1KBA@mail.gmail.com>
Message-ID: <20170703045828.GA2484@arch-tinker.localdomain>

> The cryptography APIs for making certs are pretty straightforward and well
> documented.  But if another example helps, here's some code that creates a
> self-signed ca cert and a client cert with an intermediate cert in between:
> 
> 
> https://github.com/LeastAuthority/txkube/blob/faa0374fcef6d089af39a98310f1bd798eb54b08/src/txkube/test/test_authentication.py#L17-L29
> 
> https://github.com/LeastAuthority/txkube/blob/faa0374fcef6d089af39a98310f1bd798eb54b08/src/txkube/test/test_authentication.py#L276-L309

I'm diving into adding benchmarks for testing HTTPS and this has been
very helpful.  I did have one question, in the cert function
neither the pubkey or privkey parameters are used, rather, a_key is
always used as both the public and the signing key.  Is that
intentional?

Or, should the public key be the pubkey value and the signing key the
privkey value?  Meaning, each cert uses the supplied public key and the
signing order is:

    a signs a
    a signs b
    b signs c

If so, do you want me to send you a PR for this change?

Thanks again,
-Jason


From glyph at twistedmatrix.com  Mon Jul  3 00:15:32 2017
From: glyph at twistedmatrix.com (Glyph)
Date: Sun, 2 Jul 2017 23:15:32 -0700
Subject: [Twisted-web] Question regarding custom contextFactory for
 twisted.web.client.Agent
In-Reply-To: <20170703045828.GA2484@arch-tinker.localdomain>
References: <CAARXrP=bu-MmyNriipSx9WSXMA9VB7Q4MvSDaavYi9E0xpn3pQ@mail.gmail.com>
 <D4A89F99-09B0-404A-8A96-286B9E44CC67@twistedmatrix.com>
 <20170522044113.GA2346@arch-tinker.localdomain>
 <87FD5935-20E0-4A3C-9BC0-51DC34B25F62@twistedmatrix.com>
 <20170523003830.GA1086@arch-tinker.localdomain>
 <E72E306E-2656-4582-A71D-30DDF4ED117E@twistedmatrix.com>
 <CAEeXt4OShOLHpc47yPYEpwpVePAoCdw+Z2j49+mSKx+_yL1KBA@mail.gmail.com>
 <20170703045828.GA2484@arch-tinker.localdomain>
Message-ID: <B69ACA5E-2444-460A-A02C-28467FA86964@twistedmatrix.com>


> On Jul 2, 2017, at 9:58 PM, Jason Litzinger <jlitzingerdev at gmail.com> wrote:
> 
>> The cryptography APIs for making certs are pretty straightforward and well
>> documented.  But if another example helps, here's some code that creates a
>> self-signed ca cert and a client cert with an intermediate cert in between:
>> 
>> 
>> https://github.com/LeastAuthority/txkube/blob/faa0374fcef6d089af39a98310f1bd798eb54b08/src/txkube/test/test_authentication.py#L17-L29
>> 
>> https://github.com/LeastAuthority/txkube/blob/faa0374fcef6d089af39a98310f1bd798eb54b08/src/txkube/test/test_authentication.py#L276-L309
> 
> I'm diving into adding benchmarks for testing HTTPS and this has been
> very helpful.  I did have one question, in the cert function
> neither the pubkey or privkey parameters are used, rather, a_key is
> always used as both the public and the signing key.  Is that
> intentional?
> 
> Or, should the public key be the pubkey value and the signing key the
> privkey value?  Meaning, each cert uses the supplied public key and the
> signing order is:
> 
>    a signs a
>    a signs b
>    b signs c
> 
> If so, do you want me to send you a PR for this change?

I don't know much about txkube, but my understanding of certificate chains suggests that this is what it is trying to test.  It looks like this might succeed by accident since everything is signed by the root, and therefore trusted?

It also appears to be implied that the chain is verified somehow, but the invariant is actually just about the subject/issuer pairs: https://github.com/LeastAuthority/txkube/blob/faa0374fcef6d089af39a98310f1bd798eb54b08/src/txkube/_authentication.py#L47-L59 <https://github.com/LeastAuthority/txkube/blob/faa0374fcef6d089af39a98310f1bd798eb54b08/src/txkube/_authentication.py#L47-L59> so something else must be validating the chain.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-web/attachments/20170702/edb9beec/attachment.html>

From exarkun at twistedmatrix.com  Mon Jul  3 05:08:23 2017
From: exarkun at twistedmatrix.com (Jean-Paul Calderone)
Date: Mon, 3 Jul 2017 07:08:23 -0400
Subject: [Twisted-web] Question regarding custom contextFactory for
	twisted.web.client.Agent
In-Reply-To: <20170703045828.GA2484@arch-tinker.localdomain>
References: <CAARXrP=bu-MmyNriipSx9WSXMA9VB7Q4MvSDaavYi9E0xpn3pQ@mail.gmail.com>
 <D4A89F99-09B0-404A-8A96-286B9E44CC67@twistedmatrix.com>
 <20170522044113.GA2346@arch-tinker.localdomain>
 <87FD5935-20E0-4A3C-9BC0-51DC34B25F62@twistedmatrix.com>
 <20170523003830.GA1086@arch-tinker.localdomain>
 <E72E306E-2656-4582-A71D-30DDF4ED117E@twistedmatrix.com>
 <CAEeXt4OShOLHpc47yPYEpwpVePAoCdw+Z2j49+mSKx+_yL1KBA@mail.gmail.com>
 <20170703045828.GA2484@arch-tinker.localdomain>
Message-ID: <CAEeXt4OdVLChpmVGz_ZLqJ634Zqmdp5TmAtpmvUcOaa_5Ri62w@mail.gmail.com>

On Mon, Jul 3, 2017 at 12:58 AM, Jason Litzinger <jlitzingerdev at gmail.com>
wrote:

> > The cryptography APIs for making certs are pretty straightforward and
> well
> > documented.  But if another example helps, here's some code that creates
> a
> > self-signed ca cert and a client cert with an intermediate cert in
> between:
> >
> >
> > https://github.com/LeastAuthority/txkube/blob/
> faa0374fcef6d089af39a98310f1bd798eb54b08/src/txkube/test/
> test_authentication.py#L17-L29
> >
> > https://github.com/LeastAuthority/txkube/blob/
> faa0374fcef6d089af39a98310f1bd798eb54b08/src/txkube/test/
> test_authentication.py#L276-L309
>
> I'm diving into adding benchmarks for testing HTTPS and this has been
> very helpful.  I did have one question, in the cert function
> neither the pubkey or privkey parameters are used, rather, a_key is
> always used as both the public and the signing key.  Is that
> intentional?
>
Or, should the public key be the pubkey value and the signing key the
> privkey value?  Meaning, each cert uses the supplied public key and the
> signing order is:
>
>     a signs a
>     a signs b
>     b signs c
>
> If so, do you want me to send you a PR for this change?
>
>
Heya Jason,

Thanks for pointing this out.  Yes, it's a bug.  Also, it turns out
re-using serial numbers is a bad idea too.  I don't think their mistake
*currently* hurts the tests but it would be great to get them both fixed.
So a PR would be quite welcome.

Regarding Glyph's comments about where the chain is verified - that's still
handled by the TLS library.  The Chain invariant in _authentication.py is
just a superficial sanity check to catch the common problem of "a-b-c" vs
"c-b-a" chain certificate order.

Thanks!
Jean-Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-web/attachments/20170703/96d07f81/attachment.html>

From jlitzingerdev at gmail.com  Mon Jul  3 21:54:51 2017
From: jlitzingerdev at gmail.com (Jason Litzinger)
Date: Mon, 3 Jul 2017 21:54:51 -0600
Subject: [Twisted-web] Question regarding custom contextFactory for
 twisted.web.client.Agent
In-Reply-To: <CAEeXt4OdVLChpmVGz_ZLqJ634Zqmdp5TmAtpmvUcOaa_5Ri62w@mail.gmail.com>
References: <CAARXrP=bu-MmyNriipSx9WSXMA9VB7Q4MvSDaavYi9E0xpn3pQ@mail.gmail.com>
 <D4A89F99-09B0-404A-8A96-286B9E44CC67@twistedmatrix.com>
 <20170522044113.GA2346@arch-tinker.localdomain>
 <87FD5935-20E0-4A3C-9BC0-51DC34B25F62@twistedmatrix.com>
 <20170523003830.GA1086@arch-tinker.localdomain>
 <E72E306E-2656-4582-A71D-30DDF4ED117E@twistedmatrix.com>
 <CAEeXt4OShOLHpc47yPYEpwpVePAoCdw+Z2j49+mSKx+_yL1KBA@mail.gmail.com>
 <20170703045828.GA2484@arch-tinker.localdomain>
 <CAEeXt4OdVLChpmVGz_ZLqJ634Zqmdp5TmAtpmvUcOaa_5Ri62w@mail.gmail.com>
Message-ID: <20170704035451.GA12278@arch-tinker.localdomain>

> Thanks for pointing this out.  Yes, it's a bug.  Also, it turns out
> re-using serial numbers is a bad idea too.  I don't think their mistake
> *currently* hurts the tests but it would be great to get them both fixed.
> So a PR would be quite welcome.
No problem.  I noticed most of the branches merged into txkube
correspond to issues, do you want an issue first?  Also, is the branch
naming convention <issue>.<branch-name>?

-Jason


From exarkun at twistedmatrix.com  Tue Jul  4 06:30:44 2017
From: exarkun at twistedmatrix.com (Jean-Paul Calderone)
Date: Tue, 4 Jul 2017 08:30:44 -0400
Subject: [Twisted-web] Question regarding custom contextFactory for
	twisted.web.client.Agent
In-Reply-To: <20170704035451.GA12278@arch-tinker.localdomain>
References: <CAARXrP=bu-MmyNriipSx9WSXMA9VB7Q4MvSDaavYi9E0xpn3pQ@mail.gmail.com>
 <D4A89F99-09B0-404A-8A96-286B9E44CC67@twistedmatrix.com>
 <20170522044113.GA2346@arch-tinker.localdomain>
 <87FD5935-20E0-4A3C-9BC0-51DC34B25F62@twistedmatrix.com>
 <20170523003830.GA1086@arch-tinker.localdomain>
 <E72E306E-2656-4582-A71D-30DDF4ED117E@twistedmatrix.com>
 <CAEeXt4OShOLHpc47yPYEpwpVePAoCdw+Z2j49+mSKx+_yL1KBA@mail.gmail.com>
 <20170703045828.GA2484@arch-tinker.localdomain>
 <CAEeXt4OdVLChpmVGz_ZLqJ634Zqmdp5TmAtpmvUcOaa_5Ri62w@mail.gmail.com>
 <20170704035451.GA12278@arch-tinker.localdomain>
Message-ID: <CAEeXt4Nvx+7x3EBfGUagaXLNhgy+eZQKJ0n=uAHjE0Y5frDKiA@mail.gmail.com>

On Mon, Jul 3, 2017 at 11:54 PM, Jason Litzinger <jlitzingerdev at gmail.com>
wrote:

> > Thanks for pointing this out.  Yes, it's a bug.  Also, it turns out
> > re-using serial numbers is a bad idea too.  I don't think their mistake
> > *currently* hurts the tests but it would be great to get them both fixed.
> > So a PR would be quite welcome.
> No problem.  I noticed most of the branches merged into txkube
> correspond to issues, do you want an issue first?  Also, is the branch
> naming convention <issue>.<branch-name>?
>

Yes and yes.  Thanks!


>
> -Jason
>
> _______________________________________________
> Twisted-web mailing list
> Twisted-web at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-web/attachments/20170704/a77a9c5f/attachment.html>

From jlitzingerdev at gmail.com  Wed Jul  5 23:45:29 2017
From: jlitzingerdev at gmail.com (Jason Litzinger)
Date: Wed, 5 Jul 2017 23:45:29 -0600
Subject: [Twisted-web] Question regarding custom contextFactory for
 twisted.web.client.Agent
In-Reply-To: <E72E306E-2656-4582-A71D-30DDF4ED117E@twistedmatrix.com>
References: <CAARXrP=bu-MmyNriipSx9WSXMA9VB7Q4MvSDaavYi9E0xpn3pQ@mail.gmail.com>
 <D4A89F99-09B0-404A-8A96-286B9E44CC67@twistedmatrix.com>
 <20170522044113.GA2346@arch-tinker.localdomain>
 <87FD5935-20E0-4A3C-9BC0-51DC34B25F62@twistedmatrix.com>
 <20170523003830.GA1086@arch-tinker.localdomain>
 <E72E306E-2656-4582-A71D-30DDF4ED117E@twistedmatrix.com>
Message-ID: <20170706054529.GA3103@arch-tinker.localdomain>

On Mon, May 22, 2017 at 10:54:06PM -0700, Glyph wrote:
> The benchmark could use the Cryptography x509 layer to do setup for a custom CA cert, similar to the way many unit tests in Twisted already do...
FYI, WIP here:

https://github.com/jlitzingerdev/twisted-benchmarks/commit/37ca9e5fe64a94e2a4e3d7c2a521be3336e3bff3

I will be doing more testing/cleanup before submitting a PR. I'd also
like to write a benchmark using persistent connections as that is a
different but interesting path (as indicated in web.py).  That of course
means one server/many connections.

Cheers,
-Jason


From mithrandi at mithrandi.net  Wed Jul 26 12:46:27 2017
From: mithrandi at mithrandi.net (Tristan Seligmann)
Date: Wed, 26 Jul 2017 18:46:27 +0000
Subject: [Twisted-web] Nevow 0.14.3rc1 released
Message-ID: <CAMcKhMR3fD0a0YmDLq9ekzjjRkLpmuZnmVBz-TyOFn+p2m7EMw@mail.gmail.com>

Hi all,

I've uploaded a prerelease of Nevow 0.14.3 to PyPI[1]. This contains a fix
for some Athena client-side timeout behaviour (or more specifically, the
lack of one) and removes use of FilePath.getmtime.

If you are using Athena, please a) let me know! and b) give this prerelease
a try to see if anything breaks. As the de facto Nevow release manager, and
one of its last users, I'd like to avoid going overboard on release
engineering if it isn't necessary, but I'd also like to avoid making life
worse for any other remaining users, so it would be useful to hear from any
of you out there still using Nevow.

[1] https://pypi.python.org/pypi/Nevow/0.14.3rc1
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-web/attachments/20170726/8f080893/attachment.html>

