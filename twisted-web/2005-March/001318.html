<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Pastebin behind a ReverseProxyResource
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Pastebin%20behind%20a%20ReverseProxyResource&In-Reply-To=b194c91905031511293ad9cced%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001317.html">
   <LINK REL="Next"  HREF="001319.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Pastebin behind a ReverseProxyResource</H1>
    <B>Matt Goodall</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Pastebin%20behind%20a%20ReverseProxyResource&In-Reply-To=b194c91905031511293ad9cced%40mail.gmail.com"
       TITLE="[Twisted-web] Pastebin behind a ReverseProxyResource">matt at pollenation.net
       </A><BR>
    <I>Tue Mar 15 15:49:51 MST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001317.html">[Twisted-web] Pastebin behind a ReverseProxyResource
</A></li>
        <LI>Next message: <A HREF="001319.html">[Twisted-web] liveevil.py import breaks py2exe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1318">[ date ]</a>
              <a href="thread.html#1318">[ thread ]</a>
              <a href="subject.html#1318">[ subject ]</a>
              <a href="author.html#1318">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 2005-03-15 at 12:29 -0700, Jason Mobarak wrote:
&gt;<i> Hi --
</I>&gt;<i> 
</I>&gt;<i> I'm trying to set up the pastebin example from Nevow SVN behind a
</I>&gt;<i> ReverseProxyResource. I have the following tac file [1] setting
</I>&gt;<i> everything up. The doc strings for VHostMonsterResource state that the
</I>&gt;<i> paths on the main site and the proxy site should be the same. For
</I>&gt;<i> example something like &quot;<A HREF="http://foo.com/bar&quot;">http://foo.com/bar&quot;</A> would be written to
</I>&gt;<i> &quot;<A HREF="http://foo.com:8080/bar&quot;,">http://foo.com:8080/bar&quot;,</A> however everything seems to be rewritten
</I>&gt;<i> incorrectly. You can see how everything comes up here [2].
</I>&gt;<i> 
</I>&gt;<i> 1: <A HREF="http://deadbeefbabe.org/dbb.tac.txt">http://deadbeefbabe.org/dbb.tac.txt</A>
</I>&gt;<i> 2: <A HREF="http://deadbeefbabe.org/paste">http://deadbeefbabe.org/paste</A>
</I>
The problem is that the pastebin expects to be the root resource. It
loads the CSS and images (if there are any, I can't remember now) from /
and not /paste. To mount the pastebin at /paste you will need to update
it so that it knows that's where it's mounted.

It's not just the pastebin that has this problem. If any app is to be
mounted at /foo then it needs to be written to know that from the start.

However ... a long time ago now, I wrote a simple reroot renderer that
may help with this sort of problem. It's in sandbox/mg/reroot.py. A
macro would be better for this though (see dp's latest macro branch)
because then the reroot would only happen once and not every request.

Cheers, Matt

-- 
     __
    /  \__     Matt Goodall, Pollenation Internet Ltd
    \__/  \    w: <A HREF="http://www.pollenation.net">http://www.pollenation.net</A>
  __/  \__/    e: <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">matt at pollenation.net</A>
 /  \__/  \    t: +44 (0)113 2252500
 \__/  \__/
 /  \          Any views expressed are my own and do not necessarily
 \__/          reflect the views of my employer.


</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001317.html">[Twisted-web] Pastebin behind a ReverseProxyResource
</A></li>
	<LI>Next message: <A HREF="001319.html">[Twisted-web] liveevil.py import breaks py2exe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1318">[ date ]</a>
              <a href="thread.html#1318">[ thread ]</a>
              <a href="subject.html#1318">[ subject ]</a>
              <a href="author.html#1318">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
