<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] nevow + cookieless sessions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20nevow%20%2B%20cookieless%20sessions&In-Reply-To=40DCA5EF.4070106%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000497.html">
   <LINK REL="Next"  HREF="000500.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] nevow + cookieless sessions</H1>
    <B>Mike Warren</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20nevow%20%2B%20cookieless%20sessions&In-Reply-To=40DCA5EF.4070106%40twistedmatrix.com"
       TITLE="[Twisted-web] nevow + cookieless sessions">spam at mike-warren.com
       </A><BR>
    <I>Fri Jun 25 19:54:05 MDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000497.html">[Twisted-web] nevow + cookieless sessions
</A></li>
        <LI>Next message: <A HREF="000500.html">[Twisted-web] gronking nevow forms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#498">[ date ]</a>
              <a href="thread.html#498">[ thread ]</a>
              <a href="subject.html#498">[ subject ]</a>
              <a href="author.html#498">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Christopher Armstrong &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">radix at twistedmatrix.com</A>&gt; writes:
&gt;<i> Mike Warren wrote:
</I>
&gt;<i> &gt; I'm not entirely sure where to look for problems. I would have
</I>&gt;<i> &gt; expected Nevow to re-write href attributes to be something like
</I>&gt;<i> &gt; /__session_key__BAR/foo from /foo, but that's not happening.  Any
</I>&gt;<i> &gt; guidance or suggestions for things I should look into?
</I>
&gt;<i> Rewriting is way too problematic. This form of session management is
</I>&gt;<i> only compatible with relative links. Just use relative links instead
</I>&gt;<i> of absolute ones.
</I>
Is there a way to turn it off, besides overriding the locateChild
method is nevow.guard.SessionWrapper? In my case, re-writing the URLs
myself is going to be about the same amount of work as writing
relative URLs, so I'd rather do the former or neither (and just make
users turn on cookies or not interact).

What exactly are the problems with re-writing? I tried some quick
hackery in nevow.flat.flatstan near line 110 to look for an &quot;href&quot; key
and then check that the resulting serialized value started with the
appropriate magic if it started with '/', but neither the request nor
session is &quot;remembered&quot; in the context I get; is this the &quot;way too
problematic&quot; bit? (I don't know quite how the remembering/flattening
works).

It would be preferable to just have a &quot;please turn on cookies if you
want to do ``X''&quot; page; I would like to keep site-customisation sorts
of things in the session (rather than, for example, cookies) but the
way the session_key code works right now, a user with blocked cookies
will be generating a new session for every request they make; I'd
rather have just one &quot;anonymous&quot; session which wouldn't be mutable
(i.e. it would always be filled with the defaults which would be
generated by creating a new session).

To that end, would anyone else find a &quot;default session if no cookies&quot;
bit of code useful? (Obviously, one could then determine if the user
was a &quot;no-cookies&quot; user by seeing if their session is the same as the
&quot;no-cookies&quot; session).

Thanks,

-- 
mike [at] mike [dash] warren [dot] com
&lt;URL:<A HREF="http://www.mike-warren.com">http://www.mike-warren.com</A>&gt;
gpg --keyserver 80.71.227.37 --recv-key 579911BD
87F2 4D98 BDB0 0E90 EE2A 0CF9 1087 0884 5799 11BD

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000497.html">[Twisted-web] nevow + cookieless sessions
</A></li>
	<LI>Next message: <A HREF="000500.html">[Twisted-web] gronking nevow forms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#498">[ date ]</a>
              <a href="thread.html#498">[ thread ]</a>
              <a href="subject.html#498">[ subject ]</a>
              <a href="author.html#498">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
