<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] twisted.web getPage-- retrieving error information 
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20twisted.web%20getPage--%20retrieving%20error%20information%20&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001997.html">
   <LINK REL="Next"  HREF="002000.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] twisted.web getPage-- retrieving error information </H1>
    <B>David E. Konerding</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20twisted.web%20getPage--%20retrieving%20error%20information%20&In-Reply-To="
       TITLE="[Twisted-web] twisted.web getPage-- retrieving error information ">dekonerding at lbl.gov
       </A><BR>
    <I>Wed Oct 19 14:36:36 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001997.html">[Twisted-web] sessions how to
</A></li>
        <LI>Next message: <A HREF="002000.html">[Twisted-web] Preventing XSS when using Nevow's vhost functionality
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1999">[ date ]</a>
              <a href="thread.html#1999">[ thread ]</a>
              <a href="subject.html#1999">[ subject ]</a>
              <a href="author.html#1999">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi folks,

I am tryign to get useful error information when I use 
twisted.web.getPage.  For example, this code doesn't supply a trailing
slash when making a request for www.google.com.  This causes getPage to 
make an invalid request to the web server
(&quot;GET  HTTP/1.1&quot;) which causes the server to disconnect immediately 
(that's true for the google web server.  for apache, it produces
an &quot;Invalid Request&quot; message and error code).

It doens't seem like the error object passed to the errback contains any 
useful information which I can bubble up to the user.
For example, I'd like to know what data was received before the server 
closed the connection.  ANy ideas?

from twisted.internet import reactor
from twisted.web.client import getPage

def gotPage(result):
    print &quot;gotPage: result=&quot;, result

def gotPageErr(error):
    print &quot;gotPageErr: error=&quot;, error
   
def getAPage(url):
    gp = getPage(url)
    gp.addCallback(gotPage)
    gp.addErrback(gotPageErr)

reactor.callWhenRunning(getAPage, &quot;<A HREF="http://google.com&quot;">http://google.com&quot;</A>)
reactor.run()



</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001997.html">[Twisted-web] sessions how to
</A></li>
	<LI>Next message: <A HREF="002000.html">[Twisted-web] Preventing XSS when using Nevow's vhost functionality
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1999">[ date ]</a>
              <a href="thread.html#1999">[ thread ]</a>
              <a href="subject.html#1999">[ subject ]</a>
              <a href="author.html#1999">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
