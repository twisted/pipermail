<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Twisted and WSGI...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Twisted%20and%20WSGI...&In-Reply-To=e36b84ee0604051127n27763bacnbbe4e4587772687a%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002571.html">
   <LINK REL="Next"  HREF="002573.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Twisted and WSGI...</H1>
    <B>Ed Suominen</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Twisted%20and%20WSGI...&In-Reply-To=e36b84ee0604051127n27763bacnbbe4e4587772687a%40mail.gmail.com"
       TITLE="[Twisted-web] Twisted and WSGI...">general at eepatents.com
       </A><BR>
    <I>Wed Apr  5 14:01:39 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002571.html">[Twisted-web] Twisted and WSGI...
</A></li>
        <LI>Next message: <A HREF="002573.html">[Twisted-web] Twisted and WSGI...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2572">[ date ]</a>
              <a href="thread.html#2572">[ thread ]</a>
              <a href="subject.html#2572">[ subject ]</a>
              <a href="author.html#2572">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>m h wrote:
&gt;<i> I'm new to this list.  (Am beginning to think more about learning
</I>&gt;<i> twisted... for the third time ;) ).  I've got a question for you all
</I>&gt;<i> and hope that you don't take it the wrong way.  It's not meant to be
</I>&gt;<i> flame bait.
</I>
Don't worry, I don't see how it could remotely be considered anything
but an honest and constructive inquiry!

&gt;<i> As WSGI is going into python 2.5, I was wondering what the general
</I>&gt;<i> consensus is among twisted web devs about it?  Does the WSGI model map
</I>&gt;<i> well into twisted's asynchronous model?  Does twisted already have
</I>&gt;<i> everything it needs, so WSGI doesn't bring much to the table?
</I>
For a Twisted HTTP server (web2) to serve as a WSGI gateway and run a
WSGI application, the application has to either operate under the
Twisted non-blocking model or has to be run in a thread. The latter is
what's being done with everything run under twisted.web2.wsgi right now;
the WSGI Resource object returns the result of a deferToThread(f) where
f is the potentially blocking WSGI app.

However, you could write your WSGI app in a way that quickly returns a
deferred to its output and then crank away at its leisure with some
Twisted-friendly technique like iterations of reactor.callLater(). (The
Twisted devs may correct me and suggest more Twisted-friendly techniques
for &quot;cranking away&quot; at something...) The advantage of the async approach
would be (1) it's more in tune with overall Twisted approach, and (2)
you could have partial results start to show up on the page before the
WSGI app is completely done producing them.

&gt;<i> It appears that as AJAX becomes more popular then the asynchronous
</I>&gt;<i> model might scale better with many small requests.  Say I have a WSGI
</I>&gt;<i> app and I want to port it to twisted.  How easy is that?  (I know
</I>&gt;<i> there is a twisted wsgi module)  Do I just need to wrap some logic in
</I>&gt;<i> deferreds?
</I>
Since twisted.web2.wsgi currently runs the WSGI app in a thread (and
will no doubt keep the option of doing so even if it broadens to allow
for async WSGI apps), it's very simple. You just let your app block all
it wants, and the deferred that results from deferToThread will fire
when it's done.

&gt;<i> Are any twisted people using WSGI?
</I>
Yes, I am. I use it to run Trac over Twisted.web2 at my
<A HREF="http://foss.eepatents.com">http://foss.eepatents.com</A> site. You can see both an example of it
working and some pertinent code at
<A HREF="http://foss.eepatents.com/DynamicSite/.">http://foss.eepatents.com/DynamicSite/.</A> That is, by the way, one of
several virtual-host sites all running from a single instance of
DynamicSite, my same twisted.web2 HTTP server.

Good luck!

-Ed Suominen


</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002571.html">[Twisted-web] Twisted and WSGI...
</A></li>
	<LI>Next message: <A HREF="002573.html">[Twisted-web] Twisted and WSGI...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2572">[ date ]</a>
              <a href="thread.html#2572">[ thread ]</a>
              <a href="subject.html#2572">[ subject ]</a>
              <a href="author.html#2572">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
