<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Turkey Questions 1-5
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Turkey%20Questions%201-5&In-Reply-To=2130.129.44.180.6.1120766611.squirrel%40www.wbsysnet.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001637.html">
   <LINK REL="Next"  HREF="001650.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Turkey Questions 1-5</H1>
    <B>Matt Goodall</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Turkey%20Questions%201-5&In-Reply-To=2130.129.44.180.6.1120766611.squirrel%40www.wbsysnet.com"
       TITLE="[Twisted-web] Turkey Questions 1-5">matt at pollenation.net
       </A><BR>
    <I>Thu Jul  7 18:32:29 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001637.html">[Twisted-web] Turkey Questions 1-5
</A></li>
        <LI>Next message: <A HREF="001650.html">[Twisted-web] Turkey Questions 6-8
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1640">[ date ]</a>
              <a href="thread.html#1640">[ thread ]</a>
              <a href="subject.html#1640">[ subject ]</a>
              <a href="author.html#1640">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">lloyd at paisite.com</A> wrote:

&gt;<i>Hello,
</I>&gt;<i>
</I>&gt;<i>I've changed the thread from &quot;Re: Introduction, newbie confusion plus an
</I>&gt;<i>offer&quot; to &quot;Turkey Questions 1-5&quot; to start the Q&amp;A.
</I>&gt;<i>
</I>&gt;<i>Goal: Create the world's simplest web-server
</I>&gt;<i>
</I>&gt;<i>My first set of questions are based on &quot;Configuring and Using the
</I>&gt;<i>Twisted.Web Server in &quot;Twisted.Web Documentation.&quot;
</I>&gt;<i>
</I>&gt;<i>Inspired by the section &quot;Installing a pre-configured server,&quot; I did the
</I>&gt;<i>following:
</I>&gt;<i>
</I>&gt;<i>-- created the directory ~/twisted/www
</I>&gt;<i>-- created the file ~/twisted/www/myHTML.html
</I>&gt;<i>
</I>&gt;<i>&lt;html&gt;
</I>&gt;<i>&lt;head&gt;
</I>&gt;<i>&lt;title&gt;flat html file&lt;/title&gt;
</I>&gt;<i>&lt;/head&gt;
</I>&gt;<i>&lt;body&gt;
</I>&gt;<i>&lt;h1&gt;Hello, World!&lt;/h1&gt;
</I>&gt;<i>&lt;/body&gt;
</I>&gt;<i>&lt;/html&gt;
</I>&gt;<i>
</I>&gt;<i>-- entered &quot;mktap web --path ~/twisted/www --logfile ~/twisted/www --port
</I>&gt;<i>8080&quot; into the command line
</I>&gt;<i>-- entered &quot;twistd -f web.tap&quot; into command line
</I>&gt;<i>
</I>&gt;<i>Results:
</I>&gt;<i>
</I>&gt;<i>-- System wrote the file &quot;web.tap&quot; into ~$, my home directory
</I>&gt;<i>-- System wrote twistd.log into ~/twisted/www
</I>&gt;<i>-- When I entered &quot;<A HREF="http://localhost:8080/myHTML.html,">http://localhost:8080/myHTML.html,</A> my browser displayed
</I>&gt;<i>&quot;Hello, World!&quot;
</I>&gt;<i>
</I>&gt;<i>OK, success.
</I>&gt;<i>
</I>&gt;<i>Questions:
</I>&gt;<i>
</I>&gt;<i>1) Why did mktap write web.tap to my home directory rather than
</I>&gt;<i>~/twisted/www?
</I>&gt;<i>  
</I>&gt;<i>
</I>Presumably because you ran mktap from your home directory. The --path is
the path to the root of the web server. The .tak file is written to the
current directory.

&gt;<i>2) Why didn't myHTML.html require a &quot;Content-type: text/html&quot; line?
</I>&gt;<i>  
</I>&gt;<i>
</I>The web.tap you created actually uses a twisted.web.static.File instance
to serve the files from the --path directory. static.File guesses the
MIME type and sends the Content-Type response header to the browser.

&gt;<i>3) How can I see the source for the server created by mktap?
</I>&gt;<i>  
</I>&gt;<i>
</I>Good question and, to be honest, I rarely use mktap. I find it useful
for quickly creating a web server for static content but most of the
stuff I use is highly dynamic.

Here's an equivalent .tac file that serves static content:

    from twisted.application import internet, service
    from twisted.web import server, static

    WWWROOT = '/home/matt/www/docs'
    LOGPATH = '/home/matt/www/logs/access.log'
    PORT = 8080

    application = service.Application('web-server')
    site = server.Site(static.File(WWWROOT), logPath=LOGPATH)
    internet.TCPServer(PORT, site).setServiceParent(application)


That sort of thing can be easily modified into something that creates a
dynamic root resource.

&gt;<i>4) Are there preferred practices for creating directories for the document
</I>&gt;<i>root (for instance, better in user or root), directories for resource
</I>&gt;<i>modules, site data, css styling, etc.?
</I>&gt;<i>  
</I>&gt;<i>
</I>I never use .rpy resources so all my Python is in packages and modules.
I tend to have templates, css, js and images in a directory somewhere
and a .tac to start the services.

Site data is either in a database or in another directory, away from the
templates etc.

&gt;<i>5) Are there preferred practices for assigning permissions to files in the
</I>&gt;<i>above directories?
</I>&gt;<i>  
</I>&gt;<i>
</I>Well, I think the most important thing is to avoid making *any* code or
data directly accessible from the web. That's fairly easy to do if you
don't use .rpy files and make sure that any directories served by
static.File resources don't contain any files with sensitive content.
XHTML templates should not be directly accessible over the web either.

Hope some of that is useful.

- Matt

-- 
     __
    /  \__     Matt Goodall, Pollenation Internet Ltd
    \__/  \    w: <A HREF="http://www.pollenation.net">http://www.pollenation.net</A>
  __/  \__/    e: <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">matt at pollenation.net</A>
 /  \__/  \    t: +44 (0)113 2252500
 \__/  \__/
 /  \	       Any views expressed are my own and do not necessarily
 \__/          reflect the views of my employer.


</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001637.html">[Twisted-web] Turkey Questions 1-5
</A></li>
	<LI>Next message: <A HREF="001650.html">[Twisted-web] Turkey Questions 6-8
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1640">[ date ]</a>
              <a href="thread.html#1640">[ thread ]</a>
              <a href="subject.html#1640">[ subject ]</a>
              <a href="author.html#1640">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
