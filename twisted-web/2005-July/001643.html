<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] how are solving the calls to the children in nevow?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20how%20are%20solving%20the%20calls%20to%20the%20children%20in%20nevow%3F&In-Reply-To=42CD290C.3000503%40ucd.ie">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001647.html">
   <LINK REL="Next"  HREF="001631.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] how are solving the calls to the children in nevow?</H1>
    <B>Donovan Preston</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20how%20are%20solving%20the%20calls%20to%20the%20children%20in%20nevow%3F&In-Reply-To=42CD290C.3000503%40ucd.ie"
       TITLE="[Twisted-web] how are solving the calls to the children in nevow?">dp at ulaluma.com
       </A><BR>
    <I>Thu Jul  7 20:27:42 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001647.html">[Twisted-web] how are solving the calls to the children in nevow?
</A></li>
        <LI>Next message: <A HREF="001631.html">[Twisted-web] Re: Introduction, newbie confusion plus an offer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1643">[ date ]</a>
              <a href="thread.html#1643">[ thread ]</a>
              <a href="subject.html#1643">[ subject ]</a>
              <a href="author.html#1643">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jul 7, 2005, at 6:07 AM, Alberto Trujillo wrote:

&gt;<i> Hello:
</I>&gt;<i> I have been following this example &quot;<A HREF="http://nevowexamples.adytum.us/">http://nevowexamples.adytum.us/</A> 
</I>&gt;<i> childrenhtml/&quot;to know how works the calls to the children with  
</I>&gt;<i> nevow, but still it's not enough clear for me.
</I>&gt;<i>
</I>&gt;<i> I even add a new child in the childFactory and some print command  
</I>&gt;<i> to follow the way of the calls. Here I show you my modifications:
</I>&gt;<i>
</I>&gt;<i>    def childFactory(self, ctx, name):
</I>&gt;<i>        print &quot;NAME = &quot; + name
</I>&gt;<i>        if name in ['1', '2', '3']:
</I>&gt;<i>            return ChildPage(name)
</I>&gt;<i>        elif name == 'one':
</I>&gt;<i>            return OneRoot()
</I>&gt;<i>
</I>&gt;<i>    def locateChild(self, ctx, segments):
</I>&gt;<i>        child, remainingSegments = rend.Page.locateChild(self, ctx,  
</I>&gt;<i> segments)
</I>&gt;<i>        print &quot;CHILD = &quot; + str(child) + &quot; SEGMENT = &quot; + str 
</I>&gt;<i> (remainingSegments)
</I>&gt;<i>        if child:
</I>&gt;<i>            print &quot;IN THE IF&quot;
</I>&gt;<i>            return child, remainingSegments
</I>&gt;<i>
</I>&gt;<i>        return ChildPage('/'.join(segments)), []
</I>&gt;<i>
</I>&gt;<i> My question is why each time that I call to &quot;one&quot; it goes inside  
</I>&gt;<i> &quot;locateChild&quot; wheter &quot;one&quot; is place in &quot;childFactory&quot;, here is a  
</I>&gt;<i> trace of my server.
</I>
locateChild is the only external API defined by IResource.  
nevow.appserver.NevowSite will always call locateChild. The  
rend.Page.locateChild implementation calls childFactory.

In your example above, your locateChild is called, which calls  
rend.Page.locateChild, which calls your childFactory.

&lt;snip&gt;

&gt;<i> And when I return to the father, who call to childrenRoot class  
</I>&gt;<i> again, and what is favicon.ico?. I show you the results here.
</I>
When you return a tuple from locateChild, nevow.appserver.NevowSite  
(which called locateChild) looks to see if the first element of the  
tuple is None. If it is, it renders a 404 page. If not, it looks to  
see if the length of the second element of the tuple (segments) is  
greater than zero. If there are segments left to be processed, it  
calls locateChild on the new child, passing the new segments, until  
all segments have been consumed.

Search the web for information about favicon.ico -- basically it was  
a non-standard addition made by Microsoft Internet Explorer which got  
adopted by Mozilla and FireFox later. Every time a web browser visits  
a web site, it requests the url &quot;/favicon.ico&quot;. If the URL is a 404  
it doesn't do anything. If a valid .bmp file is returned, it is  
displayed in the location bar next to the url of the site. It is also  
displayed in the Favorites menu of Internet Explorer, but I don't  
think Mozilla does this.

(The display of this icon in the Favorites menu is why it is called  
favicon.ico, presumably)

&gt;<i> 2005/07/07 13:58 IST [HTTPChannel,1,127.0.0.1] NAME = favicon.ico
</I>&gt;<i> 2005/07/07 13:58 IST [HTTPChannel,1,127.0.0.1] CHILD = None SEGMENT  
</I>&gt;<i> = ()
</I>&gt;<i> 2005/07/07 13:58 IST [HTTPChannel,1,127.0.0.1] 127.0.0.1 - - [07/ 
</I>&gt;<i> Jul/2005:12:58:34 +0000] &quot;GET /favicon.ico HTTP/1.1&quot; 200 684 &quot;-&quot;  
</I>&gt;<i> &quot;Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.8) Gecko/20050517  
</I>&gt;<i> Firefox/1.0.4 (Debian package 1.0.4-2)&quot;
</I>&gt;<i>
</I>&gt;<i> I would like to know as well if I must to implement all these  
</I>&gt;<i> methods each time that I'm working with children, and what is  
</I>&gt;<i> segments.
</I>
You should rarely, if ever, have to implement locateChild. The  
nevow.rend.Page.locateChild implementation looks for child_* methods  
on the Page object and also calls childFactory if none was found. The  
only reason to implement locateChild is if you wish to consume no URL  
segments or more than one URL segment.

&gt;<i> Sorry I know that are a lot of question, but I don't have access to  
</I>&gt;<i> the IRC channel and I couldn't understand the information in  
</I>&gt;<i> &quot;inevow.IReource&quot;.
</I>
There is obviously a need for more permanent communication. The IRC  
channel worked well while the community was small and while the ideas  
were still new and needed discussing. Now that more people are trying  
to learn Nevow, the mailing list, website, and documentation should  
be used more often, to provide a more permanent record of answers to  
common questions.

The docstrings really need work, too.

Donovan


</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001647.html">[Twisted-web] how are solving the calls to the children in nevow?
</A></li>
	<LI>Next message: <A HREF="001631.html">[Twisted-web] Re: Introduction, newbie confusion plus an offer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1643">[ date ]</a>
              <a href="thread.html#1643">[ thread ]</a>
              <a href="subject.html#1643">[ subject ]</a>
              <a href="author.html#1643">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
