<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Writing Nevow Plugins ... dont have a clue! ;)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Writing%20Nevow%20Plugins%20...%20dont%20have%20a%20clue%21%20%3B%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001667.html">
   <LINK REL="Next"  HREF="001680.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Writing Nevow Plugins ... dont have a clue! ;)</H1>
    <B>Andreas De Stefani</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Writing%20Nevow%20Plugins%20...%20dont%20have%20a%20clue%21%20%3B%29&In-Reply-To="
       TITLE="[Twisted-web] Writing Nevow Plugins ... dont have a clue! ;)">andreas.destefani at ucd.ie
       </A><BR>
    <I>Tue Jul 12 13:26:31 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001667.html">[Twisted-web] liveglue.js patch
</A></li>
        <LI>Next message: <A HREF="001680.html">[Twisted-web] Can I use a Perl with Twisted?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1679">[ date ]</a>
              <a href="thread.html#1679">[ thread ]</a>
              <a href="subject.html#1679">[ subject ]</a>
              <a href="author.html#1679">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey guys,

i was just wondering if this would be possible:

I generate a nevow application with one main template, then i simply 
plugin multiple sub websites which are using template fragments ... for 
example:

i got a main site which has navigation and content, simple so far ... 
then i have a plugin directory where i simply put my &quot;sub websites&quot; ...

webkit/plugins/login
webkit/plugins/andysgreatsite
webkit/plugins/acrapsite

after i restart the webserver there should be a link for each site in 
the navigation and the navigation fragment template and after a click on 
a link, the content should show the sub-site ... or at least render the 
sub-site

hmmm... i was trying a bit, but i think i took the wrong approach... 
probably i have to go one layer lower to inevow.IRequest, but i didnt 
really figure out how i could do that... or is it Realm or Portal ... 
i'm  a bit confused!

anyway this is what i tried: (i even got trouble with the automatic 
plugin loader, the modules werent imported correctly for some strange 
reason)


from nevow import loaders, rend, static, url, tags
import os

PLUGIN_PATH = './plugins'

webplugins = []

class WebKitRoot(rend.Page):
   
    docFactory = loaders.xmlfile('webkit.html')
   
    def __init__(self):
        &quot;&quot;&quot;init the Root Page, load plugins&quot;&quot;&quot;
        self.__importPlugins()
   
    def __importPlugins(self):
        &quot;&quot;&quot;retrieve the plugins from the plugin directory and import them&quot;&quot;&quot;
        plugindirs = os.listdir(PLUGIN_PATH)
        for p in plugindirs:
            if os.path.isdir(os.path.join(PLUGIN_PATH, p)):
                #constructing the plugin path --&gt; ./plugins/login/login
                
webplugins.append(__import__(PLUGIN_PATH.split('/')[-1]+'.'+p+'.'+p))

   
    def childFactory(self, ctx, name):
        if name in ['login']:
            #just a simple test
            return webplugins[0].RootPage()


would be cool if somebody could give me some hints!

thanks a lot!

bye Andy

</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001667.html">[Twisted-web] liveglue.js patch
</A></li>
	<LI>Next message: <A HREF="001680.html">[Twisted-web] Can I use a Perl with Twisted?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1679">[ date ]</a>
              <a href="thread.html#1679">[ thread ]</a>
              <a href="subject.html#1679">[ subject ]</a>
              <a href="author.html#1679">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
