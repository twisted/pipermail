<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Accessing request object from a SOAPPublisher soap_
	method
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Accessing%20request%20object%20from%20a%20SOAPPublisher%20soap_%0A%09method&In-Reply-To=42CD65BA.6010306%40gsti3d.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001635.html">
   <LINK REL="Next"  HREF="001671.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Accessing request object from a SOAPPublisher soap_
	method</H1>
    <B>Donovan Preston</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Accessing%20request%20object%20from%20a%20SOAPPublisher%20soap_%0A%09method&In-Reply-To=42CD65BA.6010306%40gsti3d.com"
       TITLE="[Twisted-web] Accessing request object from a SOAPPublisher soap_
	method">dp at ulaluma.com
       </A><BR>
    <I>Tue Jul 12 02:38:20 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001635.html">[Twisted-web] Accessing request object from a SOAPPublisher soap_
	method
</A></li>
        <LI>Next message: <A HREF="001671.html">[Twisted-web] Accessing request object from a SOAPPublisher soap_
	method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1665">[ date ]</a>
              <a href="thread.html#1665">[ thread ]</a>
              <a href="subject.html#1665">[ subject ]</a>
              <a href="author.html#1665">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jul 7, 2005, at 10:26 AM, Jonathan Blocksom wrote:

&gt;<i> Hi, I've got a SOAPPublisher class with some published methods and  
</I>&gt;<i> I was hoping to access the HTTP request object from within.   
</I>&gt;<i> Anybody know how to do this?
</I>
Unfortunately it doesn't look like it. If you look at the  
SOAPPublisher.render method, it looks up the callable and then calls  
it (indirecting through maybeDeferred). The only place the request is  
available is in the local namespace of render. So, you could:

1) override render, stuff the request somewhere (like self), then get  
it out in your method; you should only do this if threads are in no  
way involved. If there aren't any threads then it would be safe. Just  
be sure to get it out immediately and pass around what you got out  
(for example, don't return a deferred then look in self in a callback)

2) use some horrible callframe hack to extract the request from the  
caller's frame. This would have the advantage of being threadsafe,  
but you aren't using threads anyway -- right?

Itamar is the guy to talk to about SOAP and XMLRPC, but I guess he  
doesn't read this list. If you want to have a cleaner way of doing  
this in the future, you should probably talk to him about it, either  
on IRC or through email or something.

Donovan


</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001635.html">[Twisted-web] Accessing request object from a SOAPPublisher soap_
	method
</A></li>
	<LI>Next message: <A HREF="001671.html">[Twisted-web] Accessing request object from a SOAPPublisher soap_
	method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1665">[ date ]</a>
              <a href="thread.html#1665">[ thread ]</a>
              <a href="subject.html#1665">[ subject ]</a>
              <a href="author.html#1665">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
