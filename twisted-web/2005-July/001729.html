<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] exception in formless with a few nevow examples
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20exception%20in%20formless%20with%20a%20few%20nevow%20examples&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001722.html">
   <LINK REL="Next"  HREF="001730.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] exception in formless with a few nevow examples</H1>
    <B>Marek Habersack</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20exception%20in%20formless%20with%20a%20few%20nevow%20examples&In-Reply-To="
       TITLE="[Twisted-web] exception in formless with a few nevow examples">grendel at caudium.net
       </A><BR>
    <I>Tue Jul 19 18:17:48 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001722.html">[Twisted-web] How do you customise the Freeform form-error message
</A></li>
        <LI>Next message: <A HREF="001730.html">[Twisted-web] exception in formless with a few nevow examples
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1729">[ date ]</a>
              <a href="thread.html#1729">[ thread ]</a>
              <a href="subject.html#1729">[ subject ]</a>
              <a href="author.html#1729">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

  This is my first post to the list and I'm quite a newcomer to twisted and
nevow, so forgive me if the issue is already known. The problem is with some
Nevow examples (e.g. formpost, userdb, db, customform, formbuilder - you can
see the problem at
<A HREF="http://nevowexamples.adytum.us/{formpost,db,customform,formbuilder}/">http://nevowexamples.adytum.us/{formpost,db,customform,formbuilder}/</A>), the
following exception occurs when the samples are run:

 exceptions.NameError: global name 'cf' is not defined

With the exception of userdb (which seems to give a slightly incorrect
traceback for the exception), the problem seems to originate at line 449 in
formless/webform.py:

447  def formRenderer(ctx, data):
448      cf = ctx.locate(iformless.IConfigurableFactory)
449      return util.maybeDeferred(cf.locateConfigurable, ctx, configurableKey
450                                  ).addCallback(_formRenderIt)

I'm not sure whether my guess is correct, but I perhaps the local 'cf'
variable has been garbage-collected before the _runCallbacks routine in
twisted/internet/defer.py calls the _formRenderIt?

I'm not familiar enough with Python yet to check whether my assumption is
right or not, but I'm sure somebody on the list will be able to verify that
without any problem.

I'm using twisted 2.0.1, latest Nevow svn and python 2.4 on an Ubuntu/breezy 
system.

tia,

marek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20050720/b68ddee3/attachment.bin">http://twistedmatrix.com/pipermail/twisted-web/attachments/20050720/b68ddee3/attachment.bin</A>
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001722.html">[Twisted-web] How do you customise the Freeform form-error message
</A></li>
	<LI>Next message: <A HREF="001730.html">[Twisted-web] exception in formless with a few nevow examples
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1729">[ date ]</a>
              <a href="thread.html#1729">[ thread ]</a>
              <a href="subject.html#1729">[ subject ]</a>
              <a href="author.html#1729">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
