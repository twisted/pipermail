<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] xmlrpc blocking
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20xmlrpc%20blocking&In-Reply-To=200507251833.26741.rasjidw%40openminddev.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001759.html">
   <LINK REL="Next"  HREF="001762.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] xmlrpc blocking</H1>
    <B>Mary Gardiner</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20xmlrpc%20blocking&In-Reply-To=200507251833.26741.rasjidw%40openminddev.net"
       TITLE="[Twisted-web] xmlrpc blocking">mary-twisted at puzzling.org
       </A><BR>
    <I>Mon Jul 25 02:46:31 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001759.html">[Twisted-web] xmlrpc blocking
</A></li>
        <LI>Next message: <A HREF="001762.html">[Twisted-web] xmlrpc blocking
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1760">[ date ]</a>
              <a href="thread.html#1760">[ thread ]</a>
              <a href="subject.html#1760">[ subject ]</a>
              <a href="author.html#1760">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Jul 25, 2005, Rasjid Wilcox wrote:
&gt;<i> What should I be doing instead?
</I>
Writing code that doesn't block.

A Deferred object is not a sophisticated wrapper which writes
asynchronous code for you, ie, wrapping a blocking function in a
Deferred does not make it non-blocking. (A Deferred is more like an
abstraction for chains of callback functions.) Wrapping a blocking
function in a Deferred just means that your application blocks for a
while, and *then* the Deferred fires the callbacks.

The use case for defer.succeed is actually for when you have a result
that is synchronous but want to pass it code that expects Deferreds. For
example, if I have:

def null():
    return 3

and want to use it like this:

d = null()
d.addCallback(...)
d.addErrback(...)

then I can wrap null using defer.succeed.

Your example doesn't say why it is that you need a blocking function.
The reason will affect the way you choose to make it non-blocking:

 1. you may interrupt your blocking function periodically and allow
    Twisted to return to the main loop, using twisted.flow or defgen
    (see <A HREF="http://mesozoic.geecs.org/cogito/archives/000160.html">http://mesozoic.geecs.org/cogito/archives/000160.html</A> and one
    day I will write it up...).

 2. you may use an existing Twisted function that does an asynchronous
    version of whatever your blocking function is, or call some third
    party asynchronous library.

 3. You may need to use deferToThread in order to run the blocking
    function in a thread: this is usually the case if you're using some
    libraries that can't easily be made non-blocking (my major personal
    use case has been the PIL, there are plenty of others).

-Mary

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001759.html">[Twisted-web] xmlrpc blocking
</A></li>
	<LI>Next message: <A HREF="001762.html">[Twisted-web] xmlrpc blocking
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1760">[ date ]</a>
              <a href="thread.html#1760">[ thread ]</a>
              <a href="subject.html#1760">[ subject ]</a>
              <a href="author.html#1760">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
