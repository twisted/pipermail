<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] web2 log patch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20web2%20log%20patch&In-Reply-To=200601201905.48574.mike%40mkp.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002398.html">
   <LINK REL="Next"  HREF="002407.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] web2 log patch</H1>
    <B>Andrea Arcangeli</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20web2%20log%20patch&In-Reply-To=200601201905.48574.mike%40mkp.ca"
       TITLE="[Twisted-web] web2 log patch">andrea at cpushare.com
       </A><BR>
    <I>Fri Jan 20 18:14:56 MST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002398.html">[Twisted-web] web2 log patch
</A></li>
        <LI>Next message: <A HREF="002407.html">[Twisted-web] Re: web2 log patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2401">[ date ]</a>
              <a href="thread.html#2401">[ thread ]</a>
              <a href="subject.html#2401">[ subject ]</a>
              <a href="author.html#2401">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Jan 20, 2006 at 07:05:48PM -0500, Mike Pelletier wrote:
&gt;<i> admitted in passing to not having used unit tests before.  Like everything 
</I>
I've not used unit test in my CPUShare work related to Twisted, but that's
because I've no time for that and this isn't going to change.

Please don't confuse the kernel work I do, with the CPUShare work. The
CPUShare work I do happens in the spare time with very little resources,
so I'm not even dreaming of writing unit tests.

In the kernel we use things like LTP or other stress test like cerberus
to check for regression. But those packages are separated. In my 8 years
of lkml experience I've never heard one single time that one fix or
feature wasn't applied because the author didn't write a corresponding
LTP testcase yet (I've heard all sort of arguments but not yet the
missing unittest). The group of people doing LTP is infact almost not
overlapping with the people writing the kernel code.  Furthermore the
LTP and the other stress tests are in userland, so there's a moltitude
of kernel-internal apis they can't hope to test.  However we've some
subsystem module like the packet injection engine or the RCU torture
test module that can stress some kernel internal apis to spot race
conditions or bugs. But to make an example, the RCU torture test was
posted and included _years_ after RCU made into the kernel and after
being used by routing cache, IPC and dcache for years. The idea is to
first make things working, then once stuff works, we can spend some time
for the unittest.

It's shoking for me to hear that valid bugfixes and features are left
hanging around for years in bugrackers because no unit test exists.

The twisted branch that CPUShare will use in production on the server
side from now on is published at the below URL. This is a fork in the
sense that I'll change whatever I need on the server side (while still
providing backwards compatibility). I'll closely track twisted SVN trunk
on a weekly or monthly (or daily) basis. I'll try to keep the thing
working stable as much as I can, since it'll be used on live servers.
For example if I feel twisted.web2 is changing too fast I may freeze it
for a while in my branch to reduce the number of breakages to the apps.
Fixes and new features will be applied promptly and without formalities.
I'll send fixes upstream through the mailing list but I don't expect
them to be applied due the lack of unittest.

	<A HREF="http://www.cpushare.com/hg/Twisted">http://www.cpushare.com/hg/Twisted</A>

You can check it out with mercurial:

	<A HREF="http://www.selenic.com/mercurial/">http://www.selenic.com/mercurial/</A>
	<A HREF="http://www.selenic.com/mercurial/wiki/index.cgi/QuickStart">http://www.selenic.com/mercurial/wiki/index.cgi/QuickStart</A>

quickstart:

wget <A HREF="http://www.selenic.com/mercurial/mercurial-snapshot.tar.gz">http://www.selenic.com/mercurial/mercurial-snapshot.tar.gz</A>
tar xzf mercurial-snapshot.tar.gz
cd mercurial-snapshot
python setup.py install
hg clone <A HREF="http://www.cpushare.com/hg/Twisted">http://www.cpushare.com/hg/Twisted</A> /whereveryouwant/Twisted

then edit /whereveryouwant/Twisted, &quot;hg ci&quot;, and publish on your server
so I can pull it back.  here the twisted.web2 module to publish on your
server (hgwebdir.cgi is from twisted dir):

from twisted.web2 import server, twcgi, channel
from twisted.internet import defer

site = server.Site(twcgi.FilteredScript('hgwebdir.cgi',
					filters=['python']))

from twisted.application import service, strports
application = service.Application(&quot;mercurial&quot;)
s = strports.service('tcp:8080', channel.HTTPFactory(site))
s.setServiceParent(application)

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002398.html">[Twisted-web] web2 log patch
</A></li>
	<LI>Next message: <A HREF="002407.html">[Twisted-web] Re: web2 log patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2401">[ date ]</a>
              <a href="thread.html#2401">[ thread ]</a>
              <a href="subject.html#2401">[ subject ]</a>
              <a href="author.html#2401">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
