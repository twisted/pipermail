<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Nevow PageCache
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Nevow%20PageCache&In-Reply-To=20051214014712.GH23878%40opteron.random">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002267.html">
   <LINK REL="Next"  HREF="002271.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Nevow PageCache</H1>
    <B>Andrea Arcangeli</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Nevow%20PageCache&In-Reply-To=20051214014712.GH23878%40opteron.random"
       TITLE="[Twisted-web] Nevow PageCache">andrea at cpushare.com
       </A><BR>
    <I>Fri Jan  6 08:08:09 MST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002267.html">[Twisted-web] Resource.child_()
</A></li>
        <LI>Next message: <A HREF="002271.html">[Twisted-web] simple registry failure - __adapt__
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2269">[ date ]</a>
              <a href="thread.html#2269">[ thread ]</a>
              <a href="subject.html#2269">[ subject ]</a>
              <a href="author.html#2269">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Dec 14, 2005 at 02:47:12AM +0100, Andrea Arcangeli wrote:
&gt;<i> On Wed, Dec 14, 2005 at 12:48:00AM +0100, Valentino Volonghi wrote:
</I>&gt;<i> &gt; The right strategy would be to write something similar for twisted.web2 using
</I>&gt;<i> &gt; filters maybe. This would make the implementation significantly easier to
</I>&gt;<i> &gt; maintain and probably shorter.
</I>&gt;<i> 
</I>&gt;<i> So, we should defer it to the time nevow will switch over web2? 
</I>&gt;<i> 
</I>&gt;<i> &gt; Nevow would be the place of fragment caches (for which there is an already
</I>&gt;<i> &gt; implemented API as you may recall).
</I>&gt;<i> 
</I>&gt;<i> Yep, at some point I started using it but then it complicated things too
</I>&gt;<i> much and I removed them. The benefit wasn't big enough. Those caches
</I>&gt;<i> require explicit coding, while the PageCache is instead totally
</I>&gt;<i> transparent and it only requires a two liner patch to be enabled and the
</I>&gt;<i> patched code runs backwards compatible if run on a pristine nevow tree.
</I>&gt;<i> So to me the PageCache is more important and it does 99% of the work.
</I>
Can we focus on the API of the app? That's the most important thing
after all, it's the only one that must not change.

My current API is this:

class forever_cached_page_class(rend.Page):
	cache = True
class cached_page_class(forever_cached_page_class):
	lifetime = LIFETIME

class cached_page_class(rend.Page):
	cache = True
	lifetime = LIFETIME
	max_cache_size = 20*1024*1024

(LIFETIME in seconds)

If this API is good, then I suggest adding my patch now even if it's not
the long term implementation, and then once nevow will switch over to
web2, it'll transparently support the same API with web2 support instead
of the PageCache inside nevow.

The PageCache class is absolutely invisible to the web application code
and as such it doesn't need to be a long term implementation.

The only thing we have to focus before including that code, is the API
provided to the nevow application.

Perhaps lifetime should be renamed to cache_lifetime or do you have
other suggestions?

Thanks.

</PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002267.html">[Twisted-web] Resource.child_()
</A></li>
	<LI>Next message: <A HREF="002271.html">[Twisted-web] simple registry failure - __adapt__
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2269">[ date ]</a>
              <a href="thread.html#2269">[ thread ]</a>
              <a href="subject.html#2269">[ subject ]</a>
              <a href="author.html#2269">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
