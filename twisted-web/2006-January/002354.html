<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Cheetah+twisted.web2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Cheetah%2Btwisted.web2&In-Reply-To=1137619466.3416.6.camel%40audrey.local">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002351.html">
   <LINK REL="Next"  HREF="002357.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Cheetah+twisted.web2</H1>
    <B>Andrea Arcangeli</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Cheetah%2Btwisted.web2&In-Reply-To=1137619466.3416.6.camel%40audrey.local"
       TITLE="[Twisted-web] Cheetah+twisted.web2">andrea at cpushare.com
       </A><BR>
    <I>Wed Jan 18 14:36:28 MST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002351.html">[Twisted-web] Cheetah+twisted.web2
</A></li>
        <LI>Next message: <A HREF="002357.html">[Twisted-web] Cheetah+twisted.web2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2354">[ date ]</a>
              <a href="thread.html#2354">[ thread ]</a>
              <a href="subject.html#2354">[ subject ]</a>
              <a href="author.html#2354">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Jan 18, 2006 at 01:24:26PM -0800, David Reid wrote:
&gt;<i> On Wed, 2006-01-18 at 06:42 +0100, Andrea Arcangeli wrote:
</I>&gt;<i> &gt; On Wed, Jan 18, 2006 at 03:56:41AM +0100, Andrea Arcangeli wrote:
</I>&gt;<i> &gt; &gt; to twisted.web but not to twisted.web2 yet). So I'll do that next.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I did quite an hack to avoid having to update the reverse proxy on the
</I>&gt;<i> &gt; other end (my modified twisted.web reverse proxy):
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; class myvhost(object):
</I>&gt;<i> 
</I>&gt;<i> I'm not sure why this code was necessary, it looks like a less generic
</I>&gt;<i> version of twisted.web2.vhost.VHostURIRewrite.  
</I>
Correct, the only difference (and in turn the only reason I need it) is
the getRemoteHost wrapper class I created in my code. I need the client
IP passed through the proxy. I created an API for that (I sent patches
for twisted.web). So twisted.web+nevow is now talking to twisted.web2,
and this code is allowing twisted.web2 to overwrite the peer ip address.

&gt;<i> &gt; Could somebody suggest the best way to solve the reverse proxy sanely in
</I>&gt;<i> &gt; web2?
</I>&gt;<i> 
</I>&gt;<i> Give me copious amounts of money (or cookies) to whip a client branch
</I>&gt;<i> into shape.
</I>
8) I guess the cookies could fit in my current budget ;)

&gt;<i> &gt; Notably we must allow the remote IP to be passed through the proxy (the
</I>&gt;<i> &gt; autorewrite class already contemplated it but it was never implemented).
</I>&gt;<i> 
</I>&gt;<i> Yes it was.  twisted.web2.vhost.VHostAutoURIRewrite, but the proxy needs
</I>&gt;<i> to give us certain headers to get the client IP this is always the case
</I>&gt;<i> (and trust is an issue)
</I>
What branch are you looking at? I'm looking trunk and I see:

        # FIXME: remote_ip ?

this is why I said the remote IP forwarding was never implemented. It
receives it, but it does nothing with the received information.

&gt;<i> Create a patch (probably to twisted.web2.log) and submit it to the
</I>&gt;<i> bugtracker, assigned to either foom or dreid. (ideally with unittests)
</I>
I already have to use bugtruckers for my job, why can't we just use
email? Thankfully the kernel development doesn't require patches to pass
through bugzilla and Andrew gets them by email. And this is not a bug,
it's a feature... so it should go in the featuretracker if something 8)

I'll have to learn using unittest, I appreciated the email from Andrew
B. on how to create a unittest for the caching feature (the one for
vhost will be simpler).

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002351.html">[Twisted-web] Cheetah+twisted.web2
</A></li>
	<LI>Next message: <A HREF="002357.html">[Twisted-web] Cheetah+twisted.web2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2354">[ date ]</a>
              <a href="thread.html#2354">[ thread ]</a>
              <a href="subject.html#2354">[ subject ]</a>
              <a href="author.html#2354">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
