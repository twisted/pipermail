<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] nevow + ajax - lite
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20nevow%20%2B%20ajax%20-%20lite&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002415.html">
   <LINK REL="Next"  HREF="002419.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] nevow + ajax - lite</H1>
    <B>Tim Stebbing</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20nevow%20%2B%20ajax%20-%20lite&In-Reply-To="
       TITLE="[Twisted-web] nevow + ajax - lite">tjstebbing at gmail.com
       </A><BR>
    <I>Sat Jan 21 23:17:51 MST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002415.html">[Twisted-web] fix web2 connection lost error handler
</A></li>
        <LI>Next message: <A HREF="002419.html">[Twisted-web] fix web2 connection lost error handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2417">[ date ]</a>
              <a href="thread.html#2417">[ thread ]</a>
              <a href="subject.html#2417">[ subject ]</a>
              <a href="author.html#2417">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Just recently someone commented on how people where starting to write
form field validation using athena, I mean, talk about overkill. I've
been using something like this little snippet of code since about the
time athena got json.py added with great success to build
mochikit-using ajax UIs.

Athena rocks, but unless you actually want to receive server side
events, its usually overkill, things like field validation are a great
example of this. If you think hard about the type of app you're
writing its more often than not the common case not to be expecting
serverside events.

from twisted.internet.defer import maybeDeferred
from twisted.python import log
from nevow import rend, static, json

class AjaxResource(rend.Page):

    def childFactory(self, ctx, methodName):
        f = getattr(self, 'ajax_' + methodName, None)
        if f:
            d = maybeDeferred(f, ctx)
            d.addCallback(lambda r: static.Data(json.serialize(r),'text/html'))
            d.addErrback(log.err)
            return d
        return json.serialize(u&quot;Method not found&quot;)


this could be a mixin, but I usually just subclass it, you just add an
ajax_foo(self, ctx) method and call it from javascript using
mochikit's loadJSONDoc, inside your ajax_ method you access
inevow.IRequest(ctx).args to get any params. Perhaps some smart person
could make it extract the args and pass them to the method if they
liked. Its designed to be about as simple as you can get, I think
thats a good point.

hope this is useful for someone

-tjs

</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002415.html">[Twisted-web] fix web2 connection lost error handler
</A></li>
	<LI>Next message: <A HREF="002419.html">[Twisted-web] fix web2 connection lost error handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2417">[ date ]</a>
              <a href="thread.html#2417">[ thread ]</a>
              <a href="subject.html#2417">[ subject ]</a>
              <a href="author.html#2417">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
