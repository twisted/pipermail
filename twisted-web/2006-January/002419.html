<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] fix web2 connection lost error handler
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20fix%20web2%20connection%20lost%20error%20handler&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002417.html">
   <LINK REL="Next"  HREF="002423.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] fix web2 connection lost error handler</H1>
    <B>glyph at divmod.com</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20fix%20web2%20connection%20lost%20error%20handler&In-Reply-To="
       TITLE="[Twisted-web] fix web2 connection lost error handler">glyph at divmod.com
       </A><BR>
    <I>Sun Jan 22 03:02:41 MST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002417.html">[Twisted-web] nevow + ajax - lite
</A></li>
        <LI>Next message: <A HREF="002423.html">[Twisted-web] fix web2 connection lost error handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2419">[ date ]</a>
              <a href="thread.html#2419">[ thread ]</a>
              <a href="subject.html#2419">[ subject ]</a>
              <a href="author.html#2419">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 22 Jan 2006 05:27:18 +0100, Andrea Arcangeli &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">andrea at cpushare.com</A>&gt; wrote:
&gt;<i>comments and patch here:
</I>&gt;<i>
</I>&gt;<i><A HREF="http://www.cpushare.com/hg/Twisted/?cs=a924218612ef">http://www.cpushare.com/hg/Twisted/?cs=a924218612ef</A>
</I>
Please send comments and patches to the bugtracker:

    <A HREF="http://twistedmatrix.com/bugs/">http://twistedmatrix.com/bugs/</A>

It's a basic courtesy, like using the proper format of diff.  You can just as easily link to external repositories or files from there as from the mailing list.

I skimmed the patch since it was so short, although I do wish it had been in the tracker.

 - You're disabling logging which someone else may have been depending upon in the same revision as you're fixing an arguably legitimate bug.  An exception was being trapped incorrectly.  Maybe you want to log a message rather than an error in the event of disconnects?  Maybe it should be an option?  At any rate, not separating the issues makes it harder to include the patch.

 - The aforementioned 'legitimate bugfix' is still wrong, except now it's slow and stylistically wrong instead of fast and logically wrong.  The appropriate API to use there is reason.check(error.ConnectionLost).  (Actually, I personally think it should be reason.trap(error.ConnectionLost), but then you'd depend on finalizing-deferred exception reporting, and it looks like someone was trying to avoid that...?)

 - You didn't really explain what the problem was, besides log noise.  What is the expected behavior?  Why is it expected?  What is the incorrect observed behavior?  You're randomly changing things around to suit your personal preferences (Twisted does not include an SMS log exception reporter, so I'm sure that wasn't bothering anyone else), and while that's fine for you, to be included in a release other people will use, it should have some justification.

One procedural error for every line of code that you changed - *and* you didn't write tests, not because you didn't have time yet, but because you refuse to.  Do you really wonder why your patches don't get included?

</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002417.html">[Twisted-web] nevow + ajax - lite
</A></li>
	<LI>Next message: <A HREF="002423.html">[Twisted-web] fix web2 connection lost error handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2419">[ date ]</a>
              <a href="thread.html#2419">[ thread ]</a>
              <a href="subject.html#2419">[ subject ]</a>
              <a href="author.html#2419">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
