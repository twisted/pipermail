<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] newbiew question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20newbiew%20question&In-Reply-To=60ed19d40807230515n6d032248l3ced0da5b5d55466%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003855.html">
   <LINK REL="Next"  HREF="003858.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] newbiew question</H1>
    <B>Maarten ter Huurne</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20newbiew%20question&In-Reply-To=60ed19d40807230515n6d032248l3ced0da5b5d55466%40mail.gmail.com"
       TITLE="[Twisted-web] newbiew question">maarten at treewalker.org
       </A><BR>
    <I>Wed Jul 23 15:30:33 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003855.html">Resource as Avatar (was Re: [Twisted-web] newbiew question)
</A></li>
        <LI>Next message: <A HREF="003858.html">[Twisted-web] newbiew question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3857">[ date ]</a>
              <a href="thread.html#3857">[ thread ]</a>
              <a href="subject.html#3857">[ subject ]</a>
              <a href="author.html#3857">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wednesday 23 July 2008, Christopher Armstrong wrote:
&gt;<i> On Tue, Jul 22, 2008 at 11:26 PM, Maarten ter Huurne
</I>&gt;<i> &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">maarten at treewalker.org</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; The information about the user does not belong in any Resource
</I>&gt;<i> &gt; subclass: a Resource is a page that can be generated for different
</I>&gt;<i> &gt; users, so it should only contain information that is the same for all
</I>&gt;<i> &gt; users. Any user specific data should be fetched via the request object.
</I>&gt;<i>
</I>&gt;<i> This is totally inaccurate. It's perfectly reasonable to store
</I>&gt;<i> user-specific data in Resource objects.  &quot;a Resource is a page that
</I>&gt;<i> can be generated for different users&quot; is either irrelevant or not
</I>&gt;<i> true, I can't tell which. You can dynamically and return Resources
</I>&gt;<i> based on which user is making the request.
</I>
Ah, I never realized it could be used like that. I thought &quot;resource&quot; was 
intended to be used as &quot;something reachable by URL&quot;, with a 1:1 mapping of 
URL path to Resource instance. Sorry for spreading misinformation.

It is still not entirely clear to me what an avatar is though and how it 
relates to resources and authorization.

When accessing a file system, would the &quot;traditional&quot; authorization approach 
be to have permission bits on every file indicating whether that file can 
be read or written by a certain users, while the &quot;avatar&quot; approach would be 
to give the user a chroot environment with only files under it that that 
user should have access to?

On Wednesday 23 July 2008, Phil Mayers wrote:
&gt;<i> Since this is a common mis-conception (one I suffered from and have now
</I>&gt;<i> disabused myself of) it's worth discussing.
</I>&gt;<i>
</I>&gt;<i> If my understanding is correct: twisted.cred uses the concept of an
</I>&gt;<i> &quot;avatar&quot;. Avatars (I think...):
</I>&gt;<i>
</I>&gt;<i>   * are protocol objects
</I>&gt;<i>   * represent the user
</I>&gt;<i>
</I>&gt;<i> In twisted.web, the Resource *is* the avatar. In twisted.mail.imap, the
</I>&gt;<i> Mailbox is the avatar. In twisted.conch, the Shell is the avatar (and so
</I>&gt;<i> on).
</I>
In what way does the avatar represent the user? Is it like a Mars lander 
representing the control team on Earth?

&gt;<i> I found this initially confusing, because in many web frameworks e.g.
</I>&gt;<i> Zope, where I came from, the objects representing resources are:
</I>&gt;<i>
</I>&gt;<i>   * long lived
</I>&gt;<i>   * the same instances serve &gt;1 HTTP request
</I>&gt;<i>   * instantiated at process start time
</I>
That is the approach I was familiar with from Java servlets and from 
Webware. Since this approach can be mapped onto twisted.web easily I never 
realized it was designed for a different approach.

On Wednesday 23 July 2008, Jean-Paul Calderone wrote:
&gt;<i> Sounds like you're basically on target.  One area that you didn't talk
</I>&gt;<i> much about is what the role of the user object is.  It's possible to
</I>&gt;<i> just examine the user object and then, in your custom Resource, decide
</I>&gt;<i> what to do based on that examination.  A more powerful approach is to
</I>&gt;<i> actually delegate those decisions to the user object (and this is why
</I>&gt;<i> twisted.web.guard makes the user object a Resource).  This removes all
</I>&gt;<i> checking from your code and just makes the right code for each user
</I>&gt;<i> execute automatically.  Explicit checking is tedious and error prone.
</I>&gt;<i> Delegating all authorization decisions to the avatar simplifies the
</I>&gt;<i> code and makes it less likely that you'll introduce a security issue.
</I>
Does this mean the top-level Resource node is the user object, so in fact 
there is a user-specific Resource tree?

Bye,
		Maarten
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 194 bytes
Desc: This is a digitally signed message part.
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20080723/34d070db/attachment.pgp">http://twistedmatrix.com/pipermail/twisted-web/attachments/20080723/34d070db/attachment.pgp</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003855.html">Resource as Avatar (was Re: [Twisted-web] newbiew question)
</A></li>
	<LI>Next message: <A HREF="003858.html">[Twisted-web] newbiew question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3857">[ date ]</a>
              <a href="thread.html#3857">[ thread ]</a>
              <a href="subject.html#3857">[ subject ]</a>
              <a href="author.html#3857">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
