<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> Resource as Avatar (was Re: [Twisted-web] newbiew question)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Resource%20as%20Avatar%20%28was%20Re%3A%20%5BTwisted-web%5D%20newbiew%20question%29&In-Reply-To=48873C9D.5000609%40imperial.ac.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003854.html">
   <LINK REL="Next"  HREF="003857.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Resource as Avatar (was Re: [Twisted-web] newbiew question)</H1>
    <B>arun chhetri</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Resource%20as%20Avatar%20%28was%20Re%3A%20%5BTwisted-web%5D%20newbiew%20question%29&In-Reply-To=48873C9D.5000609%40imperial.ac.uk"
       TITLE="Resource as Avatar (was Re: [Twisted-web] newbiew question)">chhetriarun84 at gmail.com
       </A><BR>
    <I>Wed Jul 23 11:33:34 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003854.html">Resource as Avatar (was Re: [Twisted-web] newbiew question)
</A></li>
        <LI>Next message: <A HREF="003857.html">[Twisted-web] newbiew question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3855">[ date ]</a>
              <a href="thread.html#3855">[ thread ]</a>
              <a href="subject.html#3855">[ subject ]</a>
              <a href="author.html#3855">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hi,
thanks for your suggestion Phil. You have pointed out the main objective of
my problem and that is,,

I have created a desktop CALDAV client application. The Client connect to
the Caldav server and fetches an object
called account (and it cannot be pickled) which has session information,
nonce, authentication information etc. Now my task is to port the Desktop
code to web so that everybody can user it.

But there is some problem. This account object should be created once per
user session for example, ones user passes the user name, password, server
address, then this account should be created and using this account any
transaction with the CALDAV server should be done.

Now I have made the Design something like this




                                 MainClass(User Login)
                                               |
                                               |
                                               |
                                              V
                      Calendar Class (The Root of My application, here the
account object should be created and passed to the controller class)
                                               |
                                               |
                                               |
                                              V
                                  Controller Class(This Class Should have
account object that it gets from the Calendar Class
and
                                       |                     should manage
what kind of views user  want)
                                               |
                                               |
                      ____________V___________________
                      |
|<i>                              |
</I>                      |
|<i>                              |
</I>                      |
|<i>                              |
</I>                     V
V                            V
                Month(View)            Week(View)
Day(View)

I am new to web development, I am thinking of using the core application of
CALDAV client  to integrate with this kind of web view. I have tested
mod_python and that did not worked for me.
So, can twisted.web be used in this case, and if yes can you please give me
some pointers how to do that.



Thanks in advance


On Wed, Jul 23, 2008 at 9:13 AM, Phil Mayers &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">p.mayers at imperial.ac.uk</A>&gt;wrote:

&gt;<i> The information about the user does not belong in any Resource subclass: a
</I>&gt;&gt;&gt;<i> Resource is a page that can be generated for different users, so it
</I>&gt;&gt;&gt;<i> should
</I>&gt;&gt;&gt;<i> only contain information that is the same for all users. Any user
</I>&gt;&gt;&gt;<i> specific
</I>&gt;&gt;&gt;<i> data should be fetched via the request object.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is totally inaccurate. It's perfectly reasonable to store
</I>&gt;&gt;<i> user-specific data in Resource objects.  &quot;a Resource is a page that
</I>&gt;&gt;<i> can be generated for different users&quot; is either irrelevant or not
</I>&gt;&gt;<i> true, I can't tell which. You can dynamically and return Resources
</I>&gt;&gt;<i> based on which user is making the request.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Now, I'm not sure my favorite abstraction for a user is a string; I'd
</I>&gt;&gt;<i> probably pass something other than a username to a Resource. Perhaps a
</I>&gt;&gt;<i> rich object representing the user.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> Since this is a common mis-conception (one I suffered from and have now
</I>&gt;<i> disabused myself of) it's worth discussing.
</I>&gt;<i>
</I>&gt;<i> If my understanding is correct: twisted.cred uses the concept of an
</I>&gt;<i> &quot;avatar&quot;. Avatars (I think...):
</I>&gt;<i>
</I>&gt;<i>  * are protocol objects
</I>&gt;<i>  * represent the user
</I>&gt;<i>
</I>&gt;<i> In twisted.web, the Resource *is* the avatar. In twisted.mail.imap, the
</I>&gt;<i> Mailbox is the avatar. In twisted.conch, the Shell is the avatar (and so
</I>&gt;<i> on).
</I>&gt;<i>
</I>&gt;<i> I found this initially confusing, because in many web frameworks e.g. Zop=
</I>e,
&gt;<i> where I came from, the objects representing resources are:
</I>&gt;<i>
</I>&gt;<i>  * long lived
</I>&gt;<i>  * the same instances serve &gt;1 HTTP request
</I>&gt;<i>  * instantiated at process start time
</I>&gt;<i>
</I>&gt;<i> It's also somewhat confusing because unlike other protocols, HTTP requests
</I>&gt;<i> are very short-lived. It's worth noting you *can* have long-lived
</I>&gt;<i> multi-instance t.w.Resource objects.
</I>&gt;<i>
</I>&gt;<i> In twisted, a common design pattern seems to be (I hope; I adopted it...)
</I>&gt;<i>
</I>&gt;<i>  * have your realm return a root Resource i.e. one for &quot;/&quot;
</I>&gt;<i>  * attach your User object to that resource
</I>&gt;<i>  * have your root resource dynamically create the leaf resources via
</I>&gt;<i> locateChild or childFactory, then attach the User object
</I>&gt;<i>  * when you need user info, get at it via e.g. self.user
</I>&gt;<i>  * let the leaf/root objects get GC-ed when the HTTP request is done
</I>&gt;<i>
</I>&gt;<i> I believe changes have been committed to twisted.web making this design
</I>&gt;<i> pattern even more preferred:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/trac/changeset/23950">http://twistedmatrix.com/trac/changeset/23950</A>
</I>&gt;<i>
</I>&gt;<i> Code which, by the way, I very much like the look of.
</I>&gt;<i>
</I>&gt;<i> Could someone clarify if this is the &quot;right&quot; way of doing things?
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-web mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">Twisted-web at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20080723/62=">http://twistedmatrix.com/pipermail/twisted-web/attachments/20080723/62=</A>
e3b534/attachment.htm
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003854.html">Resource as Avatar (was Re: [Twisted-web] newbiew question)
</A></li>
	<LI>Next message: <A HREF="003857.html">[Twisted-web] newbiew question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3855">[ date ]</a>
              <a href="thread.html#3855">[ thread ]</a>
              <a href="subject.html#3855">[ subject ]</a>
              <a href="author.html#3855">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
