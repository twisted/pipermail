<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] newbiew question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20newbiew%20question&In-Reply-To=8181edc00807221547q46970b45ia630f98b53bd53c9%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003847.html">
   <LINK REL="Next"  HREF="003856.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] newbiew question</H1>
    <B>Duncan McGreggor</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20newbiew%20question&In-Reply-To=8181edc00807221547q46970b45ia630f98b53bd53c9%40mail.gmail.com"
       TITLE="[Twisted-web] newbiew question">duncan.mcgreggor at gmail.com
       </A><BR>
    <I>Tue Jul 22 20:02:38 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003847.html">[Twisted-web] newbiew question
</A></li>
        <LI>Next message: <A HREF="003856.html">[Twisted-web] newbiew question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3848">[ date ]</a>
              <a href="thread.html#3848">[ thread ]</a>
              <a href="subject.html#3848">[ subject ]</a>
              <a href="author.html#3848">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Jul 22, 2008 at 3:47 PM, arun chhetri &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">chhetriarun84 at gmail.com</A>&gt; wrote:
&gt;<i> from twisted.web import resource, server
</I>&gt;<i> from twisted.web import http
</I>&gt;<i>
</I>&gt;<i> class HomePage(resource.Resource):
</I>&gt;<i>     def __init__(self):
</I>&gt;<i>         resource.Resource.__init__(self)
</I>&gt;<i>         self.putChild('calendar',Calendar(user=None,pswd=None,server=None))
</I>&gt;<i>
</I>&gt;<i>     def render(self,request):
</I>&gt;<i>         return&quot;&quot;&quot;&lt;html&gt;&lt;body&gt;
</I>&gt;<i>                 &lt;a href = calendar&gt;Here is the solution
</I>&gt;<i>                 &lt;body&gt;
</I>&gt;<i>             &lt;/html&gt;&quot;&quot;&quot;
</I>&gt;<i>     def getChild(self,path,request):
</I>&gt;<i>         return
</I>&gt;<i> Calendar(request.args[&quot;user&quot;],request.args[&quot;pswd&quot;],request.args[&quot;server&quot;])
</I>&gt;<i>
</I>&gt;<i> class Calendar(resource.Resource):
</I>&gt;<i>     def __init__(self,user,pswd,server):
</I>&gt;<i>         resource.Resource.__init__(self)
</I>&gt;<i>         self.user = user
</I>&gt;<i>         self.pswd = pswd
</I>&gt;<i>         self.server = server
</I>&gt;<i>         self.putChild('month',Month(user))
</I>&gt;<i>
</I>&gt;<i>     def render(self,request):
</I>&gt;<i>         return&quot;&quot;&quot;&lt;p&gt; The user is %s
</I>&gt;<i>     &lt;a href=/calendar/month&gt; The link to the month is this
</I>&gt;<i>     &quot;&quot;&quot;%self.user[0]
</I>&gt;<i>
</I>&gt;<i>     def getChild(self,path,request):
</I>&gt;<i>         return Month(self.user[0])
</I>&gt;<i>
</I>&gt;<i> class Month(resource.Resource):
</I>&gt;<i>     def __init__(self,user):
</I>&gt;<i>         resource.Resource.__init__(self)
</I>&gt;<i>         self.user = user
</I>&gt;<i>     def render(self,request):
</I>&gt;<i>         return &quot;&quot;&quot; %s&quot;&quot;&quot;%self.user
</I>&gt;<i>
</I>&gt;<i> if __name__==&quot;__main__&quot;:
</I>&gt;<i>     from twisted.internet import reactor
</I>&gt;<i>     root = HomePage()
</I>&gt;<i>     site = server.Site(root)
</I>&gt;<i>     reactor.listenTCP(8000,site)
</I>&gt;<i>     reactor.run()
</I>&gt;<i>
</I>&gt;<i> now if i go to <A HREF="http://localhost:8000/?user=arun&amp;pswd=test&amp;server=test">http://localhost:8000/?user=arun&amp;pswd=test&amp;server=test</A>
</I>&gt;<i> i get this   The user is arun The link to the month is this
</I>&gt;<i> and if I click the link then I get    None
</I>&gt;<i>
</I>&gt;<i> Can anybody help me how I can redirect the value self.user to Month so that
</I>&gt;<i> instead of None it shows the user name provided in query string
</I>&gt;<i>
</I>&gt;<i> Thanks in advance
</I>
Hey Arun,

The problem is that you're mixing two different patterns: an object
store (pre-created hierarchy of parents/children) and dynamically
generated children.

The latter is the easiest case to talk about, since it's the classic
HTTP GET where you pass all the arguments you need for any given
request. If that's what you want to do, then your application needs to
add query parameters to every link that it renders.

The quickest way to do that with your example code and without
changing anything would be to change Calendar.render to the following:

    def render(self,request):
        return &quot;&quot;&quot;
            &lt;p&gt; The user is %s
            &lt;a href=/calendar/month?user=%s&amp;pswd=%s&amp;server=%s&gt;The
            link to the month is this &quot;&quot;&quot; % (
            self.user[0], self.user[0], self.pswd[0], self.server[0])

and remove your HomePage.__init__ method.

The first option is what I'd guess you were originally aiming for.
This is a very different pattern: you want an object to be created
with appropriate data stored on attributes, and you want to be able to
refer to those objects and the values of their attributes in the
future, not create them on the fly. There are probably some quick
hacks that could demonstrate how to do this, but as soon as you tried
to do anything remotely real with those hacks, you'd be in trouble. If
this is really what you want, then you should spend some time getting
to know Axiom.

Hope that helps. If not, feel free to ask more questions,

d

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003847.html">[Twisted-web] newbiew question
</A></li>
	<LI>Next message: <A HREF="003856.html">[Twisted-web] newbiew question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3848">[ date ]</a>
              <a href="thread.html#3848">[ thread ]</a>
              <a href="subject.html#3848">[ subject ]</a>
              <a href="author.html#3848">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
