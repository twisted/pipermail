<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] newbiew question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20newbiew%20question&In-Reply-To=8181edc00807221547q46970b45ia630f98b53bd53c9%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003856.html">
   <LINK REL="Next"  HREF="003851.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] newbiew question</H1>
    <B>Maarten ter Huurne</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20newbiew%20question&In-Reply-To=8181edc00807221547q46970b45ia630f98b53bd53c9%40mail.gmail.com"
       TITLE="[Twisted-web] newbiew question">maarten at treewalker.org
       </A><BR>
    <I>Tue Jul 22 23:26:56 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003856.html">[Twisted-web] newbiew question
</A></li>
        <LI>Next message: <A HREF="003851.html">[Twisted-web] newbiew twisted.enterprise.adbapi question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3850">[ date ]</a>
              <a href="thread.html#3850">[ thread ]</a>
              <a href="subject.html#3850">[ subject ]</a>
              <a href="author.html#3850">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wednesday 23 July 2008, arun chhetri wrote:

&gt;<i> class Calendar(resource.Resource):
</I>&gt;<i>     def __init__(self,user,pswd,server):
</I>&gt;<i>         resource.Resource.__init__(self)
</I>&gt;<i>         self.user = user
</I>&gt;<i>         self.pswd = pswd
</I>&gt;<i>         self.server = server
</I>&gt;<i>         self.putChild('month',Month(user))
</I>&gt;<i>
</I>&gt;<i>     def render(self,request):
</I>&gt;<i>         return&quot;&quot;&quot;&lt;p&gt; The user is %s
</I>&gt;<i>     &lt;a href=/calendar/month&gt; The link to the month is this
</I>&gt;<i>     &quot;&quot;&quot;%self.user[0]
</I>&gt;<i>
</I>&gt;<i>     def getChild(self,path,request):
</I>&gt;<i>         return Month(self.user[0])
</I>
The information about the user does not belong in any Resource subclass: a 
Resource is a page that can be generated for different users, so it should 
only contain information that is the same for all users. Any user specific 
data should be fetched via the request object.

&gt;<i> now if i go to <A HREF="http://localhost:8000/?user=arun&amp;pswd=test&amp;server=test">http://localhost:8000/?user=arun&amp;pswd=test&amp;server=test</A>
</I>&gt;<i> i get this   The user is arun The link to the month is
</I>&gt;<i> this&lt;<A HREF="http://localhost:8000/calendar/month">http://localhost:8000/calendar/month</A>&gt;
</I>&gt;<i> and if I click the link then I get    None
</I>
One way to do it is to include the arguments in the URL for the &quot;month&quot; 
page:
    '&lt;a href=&quot;month?user=%s&amp;pswd=%s&quot;&gt;this month&lt;/a&gt;' % (user, pswd)

Having the password in every URL is neither elegant nor safe. So probably 
you'll want to create a session to remember a user who has already 
authenticated.

You can get a session object like this:
    session = request.getSession()

You can attach custom data to a session like this:
    user = User(name)
    session.setComponent(IUser, user)
and fetch it later like this:
    user = session.getComponent(IUser)

The IUser class is a Zope Interface, here is an example:

from zope.interface import Interface, implements

class IUser(Interface):
    '''A user account.
    '''

    def getUserName(self):
        '''Returns the name of the user account.
        '''

class User(object):
    implements(IUser)

    def __init__(self, name):
        self.__name = name

    def getUserName(self):
        return self.__name

The User object contains the data you want to keep per user: the user name 
and maybe more. You don't have to store the password in this data object; 
instead you should create this object only if the user has successfully 
authenticated.

Bye,
		Maarten
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 194 bytes
Desc: This is a digitally signed message part.
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20080723/f6f274e4/attachment.pgp">http://twistedmatrix.com/pipermail/twisted-web/attachments/20080723/f6f274e4/attachment.pgp</A>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003856.html">[Twisted-web] newbiew question
</A></li>
	<LI>Next message: <A HREF="003851.html">[Twisted-web] newbiew twisted.enterprise.adbapi question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3850">[ date ]</a>
              <a href="thread.html#3850">[ thread ]</a>
              <a href="subject.html#3850">[ subject ]</a>
              <a href="author.html#3850">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
