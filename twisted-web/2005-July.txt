From m.milvo at gmail.com  Fri Jul  1 03:04:57 2005
From: m.milvo at gmail.com (Michael M)
Date: Fri Jul  1 03:05:33 2005
Subject: [Twisted-web] Error: nevow_clientToServerEvent is not defined
	(Firefox JS Console)
In-Reply-To: <7752E043-663E-46DC-9FA9-D6B132BD2D4B@ulaluma.com>
References: <3a767c3905062902326a69104d@mail.gmail.com>
	<7752E043-663E-46DC-9FA9-D6B132BD2D4B@ulaluma.com>
Message-ID: <3a767c3905070102041a53413c@mail.gmail.com>

Thanks, it did help. I have attached a stan version for anybody else
that comes across this thread.

I did notice when upgrading to the svn branch you recommended
(svn://divmod.org/svn/Nevow/branches/dp/livepage-completion-notification-3),
that addSlash seems to be required on root objects but not on
children. Where do I look to find information on what addSlash does, (
I know it is probably obvious but still I haven't seen it in my
wanderings yet :).

Last questions, 
1.) Is this the main branch for livepage development?
2.) is this branch likely to change before 0.5?
3.) If so how can I be notified, or do I just watch this list? 
4.) Is the api for livepage likely to change much or is it just in
need of more general development?

Thanks in advance. 

<dribble_warning>
I looked at nevow when it was version 0.1 and couldn't make much sense
of it so I tried apache + mod_python and then tried to develop my own
pure python web application setup. I ran into problems, then thought I
would checkout nevow again. When I looked at it I realised that it
solved all the problems I was having in a brilliant way. There are
very few pieces of software that have made me as excited as nevow has.
I guess I had to try to solve the problems first before I appreciated
what you guys already solved. So thanks and keep up the brilliant
work.
</dribble_warning>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test-live-page.tac
Type: application/octet-stream
Size: 939 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-web/attachments/20050701/cb399593/test-live-page.obj
From matt at pollenation.net  Fri Jul  1 03:39:27 2005
From: matt at pollenation.net (Matt Goodall)
Date: Fri Jul  1 03:39:43 2005
Subject: [Twisted-web] Error: nevow_clientToServerEvent is not defined
	(Firefox JS Console)
In-Reply-To: <3a767c3905070102041a53413c@mail.gmail.com>
References: <3a767c3905062902326a69104d@mail.gmail.com>	<7752E043-663E-46DC-9FA9-D6B132BD2D4B@ulaluma.com>
	<3a767c3905070102041a53413c@mail.gmail.com>
Message-ID: <42C50F4F.7060606@pollenation.net>

Michael M wrote:
> Thanks, it did help. I have attached a stan version for anybody else
> that comes across this thread.
> 
> I did notice when upgrading to the svn branch you recommended
> (svn://divmod.org/svn/Nevow/branches/dp/livepage-completion-notification-3),
> that addSlash seems to be required on root objects but not on
> children. Where do I look to find information on what addSlash does, (
> I know it is probably obvious but still I haven't seen it in my
> wanderings yet :).

addSlash is semi-documented in the .txt docs dp wrote, see 
docs/txt/nevow-traversal.txt.

Basically, addSlash=True forces a redirect when a resource is requested 
without the trailing slash. addSlash serves two main purposes:

   * Relative URLs become manageable.
   * Directory-like resources can process the trailing '' segment and
     choose to render a listing or a default resource such as index.html.

Browsers append a slash when requesting the root resource of a site so 
it makes sense for root resources to be addSlash=True.

> 
> Last questions, 
> 1.) Is this the main branch for livepage development?

Yes.

> 2.) is this branch likely to change before 0.5?

Yes, but probably not too much ... although dp might have different 
ideas about that.

> 3.) If so how can I be notified, or do I just watch this list? 

Subsribe to the nevow commits list.

     http://divmod.org/users/mailman.twistd/listinfo/nevow-commits

> 4.) Is the api for livepage likely to change much or is it just in
> need of more general development?

I'll let dp answer this more but I think that branch is about finalising 
the livepage API. The old API had a few problems, especially around 
error handling.

> 
> Thanks in advance. 
> 
> <dribble_warning>
> I looked at nevow when it was version 0.1 and couldn't make much sense
> of it so I tried apache + mod_python and then tried to develop my own
> pure python web application setup. I ran into problems, then thought I
> would checkout nevow again. When I looked at it I realised that it
> solved all the problems I was having in a brilliant way. There are
> very few pieces of software that have made me as excited as nevow has.
> I guess I had to try to solve the problems first before I appreciated
> what you guys already solved. So thanks and keep up the brilliant
> work.
> </dribble_warning>

Welcome aboard :)

Cheers, Matt

-- 
      __
     /  \__     Matt Goodall, Pollenation Internet Ltd
     \__/  \    w: http://www.pollenation.net
   __/  \__/    e: matt@pollenation.net
  /  \__/  \    t: +44 (0)113 2252500
  \__/  \__/
  /  \          Any views expressed are my own and do not necessarily
  \__/          reflect the views of my employer.

From alberto.trujillo at ucd.ie  Fri Jul  1 04:39:25 2005
From: alberto.trujillo at ucd.ie (Alberto Trujillo)
Date: Fri Jul  1 04:49:35 2005
Subject: [Twisted-web] Re: How work formless?
Message-ID: <42C51D5D.3010204@ucd.ie>

Thank you very much for your help Donovan. Now is working, but I can't 
see any error messages if I introduce a string and not a number. If I 
not worng, I should see that kind of message.
Other question, if I want to sent the information from the form to 
another page, How can I do it?

From m.milvo at gmail.com  Fri Jul  1 07:43:34 2005
From: m.milvo at gmail.com (Michael M)
Date: Fri Jul  1 07:44:10 2005
Subject: [Twisted-web] Error: nevow_clientToServerEvent is not defined
	(Firefox JS Console)
In-Reply-To: <42C50F4F.7060606@pollenation.net>
References: <3a767c3905062902326a69104d@mail.gmail.com>
	<7752E043-663E-46DC-9FA9-D6B132BD2D4B@ulaluma.com>
	<3a767c3905070102041a53413c@mail.gmail.com>
	<42C50F4F.7060606@pollenation.net>
Message-ID: <3a767c390507010643a7141f1@mail.gmail.com>

Thanks for you help, its appreciated.

From dp at ulaluma.com  Fri Jul  1 09:33:43 2005
From: dp at ulaluma.com (Donovan Preston)
Date: Fri Jul  1 09:33:49 2005
Subject: [Twisted-web] Error: nevow_clientToServerEvent is not defined
	(Firefox JS Console)
In-Reply-To: <42C50F4F.7060606@pollenation.net>
References: <3a767c3905062902326a69104d@mail.gmail.com>	<7752E043-663E-46DC-9FA9-D6B132BD2D4B@ulaluma.com>
	<3a767c3905070102041a53413c@mail.gmail.com>
	<42C50F4F.7060606@pollenation.net>
Message-ID: <9B6688D4-8FC9-4E81-A748-A9CAB6E69E96@ulaluma.com>


On Jul 1, 2005, at 2:39 AM, Matt Goodall wrote:

> Michael M wrote:
>
>> Thanks, it did help. I have attached a stan version for anybody else
>> that comes across this thread.
>> I did notice when upgrading to the svn branch you recommended
>> (svn://divmod.org/svn/Nevow/branches/dp/livepage-completion- 
>> notification-3),
>> that addSlash seems to be required on root objects but not on
>> children. Where do I look to find information on what addSlash  
>> does, (
>> I know it is probably obvious but still I haven't seen it in my
>> wanderings yet :).
>
> addSlash is semi-documented in the .txt docs dp wrote, see docs/txt/ 
> nevow-traversal.txt.
>
> Basically, addSlash=True forces a redirect when a resource is  
> requested without the trailing slash. addSlash serves two main  
> purposes:
>
>   * Relative URLs become manageable.
>   * Directory-like resources can process the trailing '' segment and
>     choose to render a listing or a default resource such as  
> index.html.
>
> Browsers append a slash when requesting the root resource of a site  
> so it makes sense for root resources to be addSlash=True.

Should we set addSlash = True in NevowSite.__init__ on the root  
resource that is passed? It's pretty confusing to try to build a tiny  
site and get a 404 on the root of it because you forgot to specify  
addSlash.

>> Last questions, 1.) Is this the main branch for livepage development?
>
> Yes.
>
>> 2.) is this branch likely to change before 0.5?
>
> Yes, but probably not too much ... although dp might have different  
> ideas about that.

The dispatch_ stuff I mentioned in a previous email will be completed  
before 0.5. I am currently thinking of calling it frag_* instead of  
dispatch_*. Anyone who has a problem with this, speak up now :-)

Also, the livepage-completion-notification-3 branch will have to be  
merged with trunk and branched again ("merged forward" as we call it  
at Divmod) to resolve logical conflicts introduced by mg into trunk  
with string quoting in various contexts. When I do this I will send a  
message to this list, and the new branch will be called livepage- 
completion-notification-4. This branch will be fairly short lived,  
and I hope to merge it into trunk as soon as I can. (By the end of  
next week maybe?)

>> 3.) If so how can I be notified, or do I just watch this list?
>
> Subsribe to the nevow commits list.
>
>     http://divmod.org/users/mailman.twistd/listinfo/nevow-commits
>
>> 4.) Is the api for livepage likely to change much or is it just in
>> need of more general development?
>
> I'll let dp answer this more but I think that branch is about  
> finalising the livepage API. The old API had a few problems,  
> especially around error handling.

This branch is an attempt to finalize the API and fix some problems  
with the earlier API. So far all indications are good that there  
aren't any problems with the new API. Barring some unforeseen huge  
problems, I don't think the livepage API will be changing any more.

This means if anybody wants to propose radical changes to the way  
things work, now is the time to do it (or forever hold your peace, etc)

Thanks for trying it out. I need all the feedback I can get.

Donovan


From dp at ulaluma.com  Fri Jul  1 09:38:56 2005
From: dp at ulaluma.com (Donovan Preston)
Date: Fri Jul  1 09:39:02 2005
Subject: [Twisted-web] Re: How work formless?
In-Reply-To: <42C51D5D.3010204@ucd.ie>
References: <42C51D5D.3010204@ucd.ie>
Message-ID: <22F86B2B-5DAB-44F3-B0CE-AD94839DE72E@ulaluma.com>


On Jul 1, 2005, at 3:39 AM, Alberto Trujillo wrote:

> Thank you very much for your help Donovan. Now is working, but I  
> can't see any error messages if I introduce a string and not a  
> number. If I not worng, I should see that kind of message.
> Other question, if I want to sent the information from the form to  
> another page, How can I do it?

You should be seeing error messages -- that's the whole point of  
formless, automatic error handling. Maybe send me the code you are  
using and I'll take a look at it.

As far as redirecting to another page, if you really want that much  
control over what is happening I recommend you don't use formless at  
this time. However it is possible:

request.setComponent(iformless.IRedirectAfterPost, "http://foo.com/bar")

You'll need to put an annotate.Request() instance in your method  
signature in order to get at the request from your autocallable method.

This will all be completely changing at some point in the future,  
because the way things work currently is all really very stupid.  
Again, this is why I recommend people avoid using it at the moment.  
It's easier to do things by hand than learn all the weird workarounds  
in a system which is due for a complete overhaul sometime soon.

Donovan


From alberto.trujillo at ucd.ie  Mon Jul  4 04:50:06 2005
From: alberto.trujillo at ucd.ie (Alberto Trujillo)
Date: Mon Jul  4 05:00:24 2005
Subject: [Twisted-web] Re: How work formless?
Message-ID: <42C9145E.5000607@ucd.ie>

Hello Donovan:
Thank again for your help, here I send you the files. Everythings is 
working like I told you before, but I don't see the error message in the 
screen.

year.html
----------------
<form action="freeform_post!!selectYear" method="POST">
    Type a year: <input type="text" name="year" />
    <input type="submit" />
</form>

year.py
------------
from nevow import rend, loaders
import formless

class YearChooseable(formless.TypedInterface):
    def selectYear(self, year=formless.Integer()):
        pass
    selectYear = formless.autocallable(selectYear)


class Colorful(rend.Page):
    __implements__ = YearChooseable, rend.Page.__implements__
    addSlash = True

    def selectYear(self, year):
        self.test = True
#        return rend.Page.locateChild(self, context, segments)
       
    docFactory = loaders.xmlfile("year.html")

year.tac
-------------
from twisted.application import internet, service
from nevow import appserver
import year

application = service.Application("tasks")
webserver = internet.TCPServer(8080, appserver.NevowSite(year.Colorful()))
webserver.setServiceParent(application)

From mdmoin939 at yahoo.com  Tue Jul  5 15:13:38 2005
From: mdmoin939 at yahoo.com (Md Moin)
Date: Tue Jul  5 15:14:12 2005
Subject: [Twisted-web] Re: XML RPC
In-Reply-To: <mailman.6849.1120596947.458.twisted-python@twistedmatrix.com>
Message-ID: <20050705211338.36772.qmail@web40908.mail.yahoo.com>

I would like to setup a XML RPC server with
authentication functionality based on username and
password.Is there any simple example available for XML
RPC server/client that uses username/password
authentication?



		
__________________________________ 
Discover Yahoo! 
Find restaurants, movies, travel and more fun for the weekend. Check it out! 
http://discover.yahoo.com/weekend.html 


From kieran.holland at gmail.com  Tue Jul  5 20:16:41 2005
From: kieran.holland at gmail.com (Kieran Holland)
Date: Tue Jul  5 20:17:15 2005
Subject: [Twisted-web] Should data passed to data_ methods be adapted via
	IGetable?
Message-ID: <3d87b12b0507051916896dc65@mail.gmail.com>

Is this expected behaviour?

----------------------

from nevow import loaders, rend, tags as T

class TestPage(rend.Page):
   docFactory = loaders.stan(
       T.html(data=T.directive('showdata'), render=T.directive('showdata'))
   )
   def data_showdata(self, context, data):
       print 'data_showdata:', data
       return data
   def render_showdata(self, context, data):
       print 'render_showdata: ', data
page = TestPage([1,2,3])
page.renderSynchronously()

---------------------

Output:

data_showdata: <__main__.TestPage object at 0xb72bad4c>
render_showdata:  [1, 2, 3]

I had expected that the data passed to the data_ method would be
adapted via IGettable, for consistency between corresponding data_ and
render_ methods.  But perhaps there is a good reason for this
behaviour which is not obvious to me?

Kieran

From m.milvo at gmail.com  Tue Jul  5 23:27:02 2005
From: m.milvo at gmail.com (Michael M)
Date: Tue Jul  5 23:28:23 2005
Subject: [Twisted-web] Error: nevow_clientToServerEvent is not defined
	(Firefox JS Console)
In-Reply-To: <9B6688D4-8FC9-4E81-A748-A9CAB6E69E96@ulaluma.com>
References: <3a767c3905062902326a69104d@mail.gmail.com>
	<7752E043-663E-46DC-9FA9-D6B132BD2D4B@ulaluma.com>
	<3a767c3905070102041a53413c@mail.gmail.com>
	<42C50F4F.7060606@pollenation.net>
	<9B6688D4-8FC9-4E81-A748-A9CAB6E69E96@ulaluma.com>
Message-ID: <3a767c39050705222766498ee0@mail.gmail.com>

> Should we set addSlash = True in NevowSite.__init__ on the root
> resource that is passed? It's pretty confusing to try to build a tiny
> site and get a 404 on the root of it because you forgot to specify
> addSlash.

Yeah, that would be great, it took me a while of looking at old and
new examples to work out what had changed, i,e what I was missing.

Thanks for you help.

From m.milvo at gmail.com  Tue Jul  5 23:56:54 2005
From: m.milvo at gmail.com (Michael M)
Date: Tue Jul  5 23:57:27 2005
Subject: [Twisted-web] Doing pure XML with stan
Message-ID: <3a767c39050705225677696155@mail.gmail.com>

Hi all,

Firstly what I want to do is produce a well formatted xml document
using stan. I worked out that adding the follow to the
stan.py->Proto() class

    def __getattr__(self, name):
        return Tag(name)

allows me to do

T = Proto()

T.hairy[
    T.dog(lice='yes')[T.smells(status=True)]
]

In other words I can create arbitary tags with same ease as with the
tags module. Two problems stand in my way of producing pure xml
documents using stan.

1.) Can't see an easy way to specify that a tag is a single, i.e <bug/>

2.) Don't know where to look to see if I can code a solution to the
xml presentation problem. If this isn't already solved, could somebody
point in the direction of where I should look to solve this. I solved
this problem with my own code by using a position variable to be
incremented, decremented as tags are rendered. Tags then can simply
call getSpace() and get some whitespace to pad themselves with. Any
way of doing this with stan, if it hasn't already been done of course.

Example of what I want :)
<prettyxml>
    <morexml>
        Looks nice and pretty.
    </morexml>
</prettyxml>

Thanks in advance

From lloyd at paisite.com  Wed Jul  6 12:33:43 2005
From: lloyd at paisite.com (lloyd@paisite.com)
Date: Wed Jul  6 12:36:53 2005
Subject: [Twisted-web] Introduction, newbie confusion plus an offer
Message-ID: <1978.129.44.180.6.1120674823.squirrel@www.wbsysnet.com>

Hello,

I'm Lloyd, I'm baffled, and I'd like to offer my modest talents to help
others like me come up to speed with Twisted.web in record time.

I've been looking for a way to bring a large ColdFusion application over
to Python. Twisted.web looks to offer all that I could wish for and more.
The work to date is awe-inspiring. But... the documentation,
well-intentioned as it is, and much more ample than in many Open Source
projects, truly baffles me.

I'm first to admit my limitations: I'm still in the early learning stages
of Python; I understand OO conceptually, but have little experience
writing or reading OO code; and, approaching the golden years, undoubtably
have far fewer functioning neurons than most of the subscribers to this
list, much less the brilliant young turks who have created the Twisted
framework.

But, browsing through the archives, it's clear that I am not alone in my
confusion.

So, I'd like to make a proposal:

I have many years of writing and editing experience. Back in the days when
personal computers were still connected to audio cassette recorders, and I
was as excited but unenlightened about PCs as I am now about Twisted, I
contributed three well-received articles to Personal Computing magazine
under the name Techo Turkey. These helped readers hook up IBM Selectric
Terminals to their new PCs, create a computer-controlled haunted house for
Halloween, and set up a computer-controlled home security system.

I would like now to offer to write some supplementary documentation for
Twisted.web aimed at turkeys like me -- the really really basic stuff plus
sure-to-work examples that can bring even Mickey-the-Dunce to sufficient
level of understanding that he can participate creatively in the Twisted
community.

The catch: I need knowledgeable folks willing to answer my many many
stupid questions like, once you've installed Twisted from, say, Debian,
where should what files go and how should permissions be defined?
Undoubtably these generous mentors would also need to critique my newbie
code and perhaps, even, submit examples of their own. Who know, maybe we
could even get a book out of it.

Any takers?

Best wishes,

Lloyd






From general at eepatents.com  Wed Jul  6 12:50:14 2005
From: general at eepatents.com (Ed Suominen)
Date: Wed Jul  6 12:50:32 2005
Subject: [Twisted-web] Introduction, newbie confusion plus an offer
In-Reply-To: <1978.129.44.180.6.1120674823.squirrel@www.wbsysnet.com>
References: <1978.129.44.180.6.1120674823.squirrel@www.wbsysnet.com>
Message-ID: <1120675815.9458.19.camel@207-118-73-152.dyn.centurytel.net>

Lloyd, as a fairly experienced Nevow user who has gone through the same
frustrations, I'll gladly help to the extent what you're writing about
applies to Nevow. I understand that Twisted.web2 is more like Nevow than
Twisted.web, so that may make sense. (Actually, you may want to use
Nevow -- check it out at http://nevow.org/.) 

Contact me directly if interested. Also, don't forget the #twisted.web
channel on the Freenode IRC server, which is an excellent real-time
resource that has helped me a great deal with questions.

Best regards,
Ed Suominen

On Wed, 2005-07-06 at 14:33 -0400, lloyd@paisite.com wrote:
> Hello,
> 
> I'm Lloyd, I'm baffled, and I'd like to offer my modest talents to help
> others like me come up to speed with Twisted.web in record time.
> 
> I've been looking for a way to bring a large ColdFusion application over
> to Python. Twisted.web looks to offer all that I could wish for and more.
> The work to date is awe-inspiring. But... the documentation,
> well-intentioned as it is, and much more ample than in many Open Source
> projects, truly baffles me.
> 
> I'm first to admit my limitations: I'm still in the early learning stages
> of Python; I understand OO conceptually, but have little experience
> writing or reading OO code; and, approaching the golden years, undoubtably
> have far fewer functioning neurons than most of the subscribers to this
> list, much less the brilliant young turks who have created the Twisted
> framework.
> 
> But, browsing through the archives, it's clear that I am not alone in my
> confusion.
> 
> So, I'd like to make a proposal:
> 
> I have many years of writing and editing experience. Back in the days when
> personal computers were still connected to audio cassette recorders, and I
> was as excited but unenlightened about PCs as I am now about Twisted, I
> contributed three well-received articles to Personal Computing magazine
> under the name Techo Turkey. These helped readers hook up IBM Selectric
> Terminals to their new PCs, create a computer-controlled haunted house for
> Halloween, and set up a computer-controlled home security system.
> 
> I would like now to offer to write some supplementary documentation for
> Twisted.web aimed at turkeys like me -- the really really basic stuff plus
> sure-to-work examples that can bring even Mickey-the-Dunce to sufficient
> level of understanding that he can participate creatively in the Twisted
> community.
> 
> The catch: I need knowledgeable folks willing to answer my many many
> stupid questions like, once you've installed Twisted from, say, Debian,
> where should what files go and how should permissions be defined?
> Undoubtably these generous mentors would also need to critique my newbie
> code and perhaps, even, submit examples of their own. Who know, maybe we
> could even get a book out of it.
> 
> Any takers?
> 
> Best wishes,
> 
> Lloyd



From kieran.holland at gmail.com  Wed Jul  6 17:05:07 2005
From: kieran.holland at gmail.com (Kieran Holland)
Date: Wed Jul  6 17:05:42 2005
Subject: [Twisted-web] Introduction, newbie confusion plus an offer
In-Reply-To: <1120675815.9458.19.camel@207-118-73-152.dyn.centurytel.net>
References: <1978.129.44.180.6.1120674823.squirrel@www.wbsysnet.com>
	<1120675815.9458.19.camel@207-118-73-152.dyn.centurytel.net>
Message-ID: <3d87b12b05070616052be29876@mail.gmail.com>

Partly in an effort to clear up my own confusion, I have just been
putting together some documentation on Stan, Nevow's document object
model.  This is my first draft and I am fairly new to Nevow so don't
take it as gospel:

http://dictator.kieranholland.com/prose/Meet%20Stan.html

I would greatly value feedback from more experienced Nevow users.

Kieran

On 07/07/05, Ed Suominen <general@eepatents.com> wrote:
> Lloyd, as a fairly experienced Nevow user who has gone through the same
> frustrations, I'll gladly help to the extent what you're writing about
> applies to Nevow. I understand that Twisted.web2 is more like Nevow than
> Twisted.web, so that may make sense. (Actually, you may want to use
> Nevow -- check it out at http://nevow.org/.)
> 
> Contact me directly if interested. Also, don't forget the #twisted.web
> channel on the Freenode IRC server, which is an excellent real-time
> resource that has helped me a great deal with questions.
> 
> Best regards,
> Ed Suominen
> 
> On Wed, 2005-07-06 at 14:33 -0400, lloyd@paisite.com wrote:
> > Hello,
> >
> > I'm Lloyd, I'm baffled, and I'd like to offer my modest talents to help
> > others like me come up to speed with Twisted.web in record time.
> >
> > I've been looking for a way to bring a large ColdFusion application over
> > to Python. Twisted.web looks to offer all that I could wish for and more.
> > The work to date is awe-inspiring. But... the documentation,
> > well-intentioned as it is, and much more ample than in many Open Source
> > projects, truly baffles me.
> >
> > I'm first to admit my limitations: I'm still in the early learning stages
> > of Python; I understand OO conceptually, but have little experience
> > writing or reading OO code; and, approaching the golden years, undoubtably
> > have far fewer functioning neurons than most of the subscribers to this
> > list, much less the brilliant young turks who have created the Twisted
> > framework.
> >
> > But, browsing through the archives, it's clear that I am not alone in my
> > confusion.
> >
> > So, I'd like to make a proposal:
> >
> > I have many years of writing and editing experience. Back in the days when
> > personal computers were still connected to audio cassette recorders, and I
> > was as excited but unenlightened about PCs as I am now about Twisted, I
> > contributed three well-received articles to Personal Computing magazine
> > under the name Techo Turkey. These helped readers hook up IBM Selectric
> > Terminals to their new PCs, create a computer-controlled haunted house for
> > Halloween, and set up a computer-controlled home security system.
> >
> > I would like now to offer to write some supplementary documentation for
> > Twisted.web aimed at turkeys like me -- the really really basic stuff plus
> > sure-to-work examples that can bring even Mickey-the-Dunce to sufficient
> > level of understanding that he can participate creatively in the Twisted
> > community.
> >
> > The catch: I need knowledgeable folks willing to answer my many many
> > stupid questions like, once you've installed Twisted from, say, Debian,
> > where should what files go and how should permissions be defined?
> > Undoubtably these generous mentors would also need to critique my newbie
> > code and perhaps, even, submit examples of their own. Who know, maybe we
> > could even get a book out of it.
> >
> > Any takers?
> >
> > Best wishes,
> >
> > Lloyd
> 
> _______________________________________________
> Twisted-web mailing list
> Twisted-web@twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>

From mikeparker at inbox.lv  Wed Jul  6 22:52:45 2005
From: mikeparker at inbox.lv (Mike)
Date: Wed Jul  6 22:53:30 2005
Subject: [Twisted-web] Location of MSI for twisted 2.01 sumo
Message-ID: <opsti057fk9fpmb1@k-net>

Is there a MSI for twisted sumo? http://twistedmatrix.com/ suggests there  
is one in existence.
I will continue to search, however if any one knows where I can obtain  
this, it would be appreciated. even some leads would be great so far have  
searched this mailing achive, twistedmatrix site, and many random dead  
ends as a result of inadequate search engine queries.
Thanks


From simon at hedberg.net  Thu Jul  7 02:51:17 2005
From: simon at hedberg.net (Simon Hedberg)
Date: Thu Jul  7 02:52:06 2005
Subject: [Twisted-web] Introduction, newbie confusion plus an offer
In-Reply-To: <3d87b12b05070616052be29876@mail.gmail.com>
Message-ID: <000001c582d1$0a15be20$38aa20d4@hp>

Great work Kieran!
It's inspiring to see docs like that. If we could manage to produce
similar documents on the other parts of Nevow I think we'd be in good
shape. Like you've noted in the appendix a context tutorial and a
overview of the interfaces would probably be a good thing to start
doin'.

Lloyd, can you tell me more about the scope of the document(s) you are
planning?  (Ie, is it setting up a server, creating webpages or using
the components of twisted.web or something else?).


Simon
(STemplar)

-----Original Message-----
From: twisted-web-bounces@twistedmatrix.com
[mailto:twisted-web-bounces@twistedmatrix.com] On Behalf Of Kieran
Holland
Sent: den 7 juli 2005 01:05
To: Discussion of twisted.web, Nevow, and Woven
Subject: Re: [Twisted-web] Introduction, newbie confusion plus an offer


Partly in an effort to clear up my own confusion, I have just been
putting together some documentation on Stan, Nevow's document object
model.  This is my first draft and I am fairly new to Nevow so don't
take it as gospel:

http://dictator.kieranholland.com/prose/Meet%20Stan.html

I would greatly value feedback from more experienced Nevow users.

Kieran

On 07/07/05, Ed Suominen <general@eepatents.com> wrote:
> Lloyd, as a fairly experienced Nevow user who has gone through the 
> same frustrations, I'll gladly help to the extent what you're writing 
> about applies to Nevow. I understand that Twisted.web2 is more like 
> Nevow than Twisted.web, so that may make sense. (Actually, you may 
> want to use Nevow -- check it out at http://nevow.org/.)
> 
> Contact me directly if interested. Also, don't forget the #twisted.web

> channel on the Freenode IRC server, which is an excellent real-time 
> resource that has helped me a great deal with questions.
> 
> Best regards,
> Ed Suominen
> 
> On Wed, 2005-07-06 at 14:33 -0400, lloyd@paisite.com wrote:
> > Hello,
> >
> > I'm Lloyd, I'm baffled, and I'd like to offer my modest talents to 
> > help others like me come up to speed with Twisted.web in record 
> > time.
> >
> > I've been looking for a way to bring a large ColdFusion application 
> > over to Python. Twisted.web looks to offer all that I could wish for

> > and more. The work to date is awe-inspiring. But... the 
> > documentation, well-intentioned as it is, and much more ample than 
> > in many Open Source projects, truly baffles me.
> >
> > I'm first to admit my limitations: I'm still in the early learning 
> > stages of Python; I understand OO conceptually, but have little 
> > experience writing or reading OO code; and, approaching the golden 
> > years, undoubtably have far fewer functioning neurons than most of 
> > the subscribers to this list, much less the brilliant young turks 
> > who have created the Twisted framework.
> >
> > But, browsing through the archives, it's clear that I am not alone 
> > in my confusion.
> >
> > So, I'd like to make a proposal:
> >
> > I have many years of writing and editing experience. Back in the 
> > days when personal computers were still connected to audio cassette 
> > recorders, and I was as excited but unenlightened about PCs as I am 
> > now about Twisted, I contributed three well-received articles to 
> > Personal Computing magazine under the name Techo Turkey. These 
> > helped readers hook up IBM Selectric Terminals to their new PCs, 
> > create a computer-controlled haunted house for Halloween, and set up

> > a computer-controlled home security system.
> >
> > I would like now to offer to write some supplementary documentation 
> > for Twisted.web aimed at turkeys like me -- the really really basic 
> > stuff plus sure-to-work examples that can bring even 
> > Mickey-the-Dunce to sufficient level of understanding that he can 
> > participate creatively in the Twisted community.
> >
> > The catch: I need knowledgeable folks willing to answer my many many

> > stupid questions like, once you've installed Twisted from, say, 
> > Debian, where should what files go and how should permissions be 
> > defined? Undoubtably these generous mentors would also need to 
> > critique my newbie code and perhaps, even, submit examples of their 
> > own. Who know, maybe we could even get a book out of it.
> >
> > Any takers?
> >
> > Best wishes,
> >
> > Lloyd
> 
> _______________________________________________
> Twisted-web mailing list
> Twisted-web@twistedmatrix.com 
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>

_______________________________________________
Twisted-web mailing list
Twisted-web@twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web


From matt at pollenation.net  Thu Jul  7 03:30:19 2005
From: matt at pollenation.net (Matt Goodall)
Date: Thu Jul  7 03:30:24 2005
Subject: [Twisted-web] Introduction, newbie confusion plus an offer
In-Reply-To: <1120675815.9458.19.camel@207-118-73-152.dyn.centurytel.net>
References: <1978.129.44.180.6.1120674823.squirrel@www.wbsysnet.com>
	<1120675815.9458.19.camel@207-118-73-152.dyn.centurytel.net>
Message-ID: <42CCF62B.2010700@pollenation.net>

Ed Suominen wrote:
> Lloyd, as a fairly experienced Nevow user who has gone through the same
> frustrations, I'll gladly help to the extent what you're writing about
> applies to Nevow. I understand that Twisted.web2 is more like Nevow than
> Twisted.web, so that may make sense. (Actually, you may want to use
> Nevow -- check it out at http://nevow.org/.) 
> 
> Contact me directly if interested. Also, don't forget the #twisted.web
> channel on the Freenode IRC server, which is an excellent real-time
> resource that has helped me a great deal with questions.

Same for me. I'll do what I can to help anyone volenteering to write 
docs. Thanks for the help, Lloyd.

- Matt

> 
> Best regards,
> Ed Suominen
> 
> On Wed, 2005-07-06 at 14:33 -0400, lloyd@paisite.com wrote:
> 
>>Hello,
>>
>>I'm Lloyd, I'm baffled, and I'd like to offer my modest talents to help
>>others like me come up to speed with Twisted.web in record time.
>>
>>I've been looking for a way to bring a large ColdFusion application over
>>to Python. Twisted.web looks to offer all that I could wish for and more.
>>The work to date is awe-inspiring. But... the documentation,
>>well-intentioned as it is, and much more ample than in many Open Source
>>projects, truly baffles me.
>>
>>I'm first to admit my limitations: I'm still in the early learning stages
>>of Python; I understand OO conceptually, but have little experience
>>writing or reading OO code; and, approaching the golden years, undoubtably
>>have far fewer functioning neurons than most of the subscribers to this
>>list, much less the brilliant young turks who have created the Twisted
>>framework.
>>
>>But, browsing through the archives, it's clear that I am not alone in my
>>confusion.
>>
>>So, I'd like to make a proposal:
>>
>>I have many years of writing and editing experience. Back in the days when
>>personal computers were still connected to audio cassette recorders, and I
>>was as excited but unenlightened about PCs as I am now about Twisted, I
>>contributed three well-received articles to Personal Computing magazine
>>under the name Techo Turkey. These helped readers hook up IBM Selectric
>>Terminals to their new PCs, create a computer-controlled haunted house for
>>Halloween, and set up a computer-controlled home security system.
>>
>>I would like now to offer to write some supplementary documentation for
>>Twisted.web aimed at turkeys like me -- the really really basic stuff plus
>>sure-to-work examples that can bring even Mickey-the-Dunce to sufficient
>>level of understanding that he can participate creatively in the Twisted
>>community.
>>
>>The catch: I need knowledgeable folks willing to answer my many many
>>stupid questions like, once you've installed Twisted from, say, Debian,
>>where should what files go and how should permissions be defined?
>>Undoubtably these generous mentors would also need to critique my newbie
>>code and perhaps, even, submit examples of their own. Who know, maybe we
>>could even get a book out of it.
>>
>>Any takers?
>>
>>Best wishes,
>>
>>Lloyd
> 
> 
> 
> 
> _______________________________________________
> Twisted-web mailing list
> Twisted-web@twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web

-- 
      __
     /  \__     Matt Goodall, Pollenation Internet Ltd
     \__/  \    w: http://www.pollenation.net
   __/  \__/    e: matt@pollenation.net
  /  \__/  \    t: +44 (0)113 2252500
  \__/  \__/
  /  \          Any views expressed are my own and do not necessarily
  \__/          reflect the views of my employer.

From uwe at microshare.com.au  Thu Jul  7 03:51:01 2005
From: uwe at microshare.com.au (Uwe (Peter) Feldtmann)
Date: Thu Jul  7 03:53:12 2005
Subject: [Twisted-web] Introduction, newbie confusion plus an offer
In-Reply-To: <1120675815.9458.19.camel@207-118-73-152.dyn.centurytel.net>
References: <1978.129.44.180.6.1120674823.squirrel@www.wbsysnet.com>
	<1120675815.9458.19.camel@207-118-73-152.dyn.centurytel.net>
Message-ID: <42CCFB05.6030300@microshare.com.au>

Can someone tell me where Nevow starts and where Twisted ends?  I think 
Nevow needs Twisted but where is the development source held? Is it at 
nevow.com divmod.org or in the Twisted source tree?

Thanks in advance.

Ed Suominen wrote:
> Lloyd, as a fairly experienced Nevow user who has gone through the same
> frustrations, I'll gladly help to the extent what you're writing about
> applies to Nevow. I understand that Twisted.web2 is more like Nevow than
> Twisted.web, so that may make sense. (Actually, you may want to use
> Nevow -- check it out at http://nevow.org/.) 
> 
> Contact me directly if interested. Also, don't forget the #twisted.web
> channel on the Freenode IRC server, which is an excellent real-time
> resource that has helped me a great deal with questions.
> 
> Best regards,
> Ed Suominen
> 
> On Wed, 2005-07-06 at 14:33 -0400, lloyd@paisite.com wrote:
> 
>>Hello,
>>
>>I'm Lloyd, I'm baffled, and I'd like to offer my modest talents to help
>>others like me come up to speed with Twisted.web in record time.
>>
>>I've been looking for a way to bring a large ColdFusion application over
>>to Python. Twisted.web looks to offer all that I could wish for and more.
>>The work to date is awe-inspiring. But... the documentation,
>>well-intentioned as it is, and much more ample than in many Open Source
>>projects, truly baffles me.
>>
>>I'm first to admit my limitations: I'm still in the early learning stages
>>of Python; I understand OO conceptually, but have little experience
>>writing or reading OO code; and, approaching the golden years, undoubtably
>>have far fewer functioning neurons than most of the subscribers to this
>>list, much less the brilliant young turks who have created the Twisted
>>framework.
>>
>>But, browsing through the archives, it's clear that I am not alone in my
>>confusion.
>>
>>So, I'd like to make a proposal:
>>
>>I have many years of writing and editing experience. Back in the days when
>>personal computers were still connected to audio cassette recorders, and I
>>was as excited but unenlightened about PCs as I am now about Twisted, I
>>contributed three well-received articles to Personal Computing magazine
>>under the name Techo Turkey. These helped readers hook up IBM Selectric
>>Terminals to their new PCs, create a computer-controlled haunted house for
>>Halloween, and set up a computer-controlled home security system.
>>
>>I would like now to offer to write some supplementary documentation for
>>Twisted.web aimed at turkeys like me -- the really really basic stuff plus
>>sure-to-work examples that can bring even Mickey-the-Dunce to sufficient
>>level of understanding that he can participate creatively in the Twisted
>>community.
>>
>>The catch: I need knowledgeable folks willing to answer my many many
>>stupid questions like, once you've installed Twisted from, say, Debian,
>>where should what files go and how should permissions be defined?
>>Undoubtably these generous mentors would also need to critique my newbie
>>code and perhaps, even, submit examples of their own. Who know, maybe we
>>could even get a book out of it.
>>
>>Any takers?
>>
>>Best wishes,
>>
>>Lloyd
> 
> 
> 
> 
> _______________________________________________
> Twisted-web mailing list
> Twisted-web@twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web

From matt at pollenation.net  Thu Jul  7 04:03:21 2005
From: matt at pollenation.net (Matt Goodall)
Date: Thu Jul  7 04:03:26 2005
Subject: [Twisted-web] Introduction, newbie confusion plus an offer
In-Reply-To: <42CCFB05.6030300@microshare.com.au>
References: <1978.129.44.180.6.1120674823.squirrel@www.wbsysnet.com>	<1120675815.9458.19.camel@207-118-73-152.dyn.centurytel.net>
	<42CCFB05.6030300@microshare.com.au>
Message-ID: <42CCFDE9.60701@pollenation.net>

Uwe (Peter) Feldtmann wrote:
> Can someone tell me where Nevow starts and where Twisted ends?  I think 
> Nevow needs Twisted but where is the development source held? Is it at 
> nevow.com divmod.org or in the Twisted source tree?

Nevow code is at divmod.org. Twisted code is at twistedmatrix.com.

Strictly speaking, Nevow doesn't need Twisted or rather, Nevow should be 
able to function without Twisted. However, there are twisted imports and 
a few Twisted-specific bits of code in Nevow.

To be honest, I'm not sure if anyone is that interested in *completely* 
separating Nevow from Twisted. You can use Nevow outside of a Twisted 
event loop anyway.

Note that some of the Nevow concepts are moving back into twisted.web2. 
At some point Nevow will start using t.web2 and, hopefully, we'll be 
able to remove (with backwards compatability) module from Nevow and rely 
on the t.web2 equivalents.

Hope that helps.

- Matt

> 
> Thanks in advance.
> 
> Ed Suominen wrote:
> 
>> Lloyd, as a fairly experienced Nevow user who has gone through the same
>> frustrations, I'll gladly help to the extent what you're writing about
>> applies to Nevow. I understand that Twisted.web2 is more like Nevow than
>> Twisted.web, so that may make sense. (Actually, you may want to use
>> Nevow -- check it out at http://nevow.org/.)
>> Contact me directly if interested. Also, don't forget the #twisted.web
>> channel on the Freenode IRC server, which is an excellent real-time
>> resource that has helped me a great deal with questions.
>>
>> Best regards,
>> Ed Suominen
>>
>> On Wed, 2005-07-06 at 14:33 -0400, lloyd@paisite.com wrote:
>>
>>> Hello,
>>>
>>> I'm Lloyd, I'm baffled, and I'd like to offer my modest talents to help
>>> others like me come up to speed with Twisted.web in record time.
>>>
>>> I've been looking for a way to bring a large ColdFusion application over
>>> to Python. Twisted.web looks to offer all that I could wish for and 
>>> more.
>>> The work to date is awe-inspiring. But... the documentation,
>>> well-intentioned as it is, and much more ample than in many Open Source
>>> projects, truly baffles me.
>>>
>>> I'm first to admit my limitations: I'm still in the early learning 
>>> stages
>>> of Python; I understand OO conceptually, but have little experience
>>> writing or reading OO code; and, approaching the golden years, 
>>> undoubtably
>>> have far fewer functioning neurons than most of the subscribers to this
>>> list, much less the brilliant young turks who have created the Twisted
>>> framework.
>>>
>>> But, browsing through the archives, it's clear that I am not alone in my
>>> confusion.
>>>
>>> So, I'd like to make a proposal:
>>>
>>> I have many years of writing and editing experience. Back in the days 
>>> when
>>> personal computers were still connected to audio cassette recorders, 
>>> and I
>>> was as excited but unenlightened about PCs as I am now about Twisted, I
>>> contributed three well-received articles to Personal Computing magazine
>>> under the name Techo Turkey. These helped readers hook up IBM Selectric
>>> Terminals to their new PCs, create a computer-controlled haunted 
>>> house for
>>> Halloween, and set up a computer-controlled home security system.
>>>
>>> I would like now to offer to write some supplementary documentation for
>>> Twisted.web aimed at turkeys like me -- the really really basic stuff 
>>> plus
>>> sure-to-work examples that can bring even Mickey-the-Dunce to sufficient
>>> level of understanding that he can participate creatively in the Twisted
>>> community.
>>>
>>> The catch: I need knowledgeable folks willing to answer my many many
>>> stupid questions like, once you've installed Twisted from, say, Debian,
>>> where should what files go and how should permissions be defined?
>>> Undoubtably these generous mentors would also need to critique my newbie
>>> code and perhaps, even, submit examples of their own. Who know, maybe we
>>> could even get a book out of it.
>>>
>>> Any takers?
>>>
>>> Best wishes,
>>>
>>> Lloyd
>>
>>
>>
>>
>>
>> _______________________________________________
>> Twisted-web mailing list
>> Twisted-web@twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
> 
> 
> _______________________________________________
> Twisted-web mailing list
> Twisted-web@twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web

-- 
      __
     /  \__     Matt Goodall, Pollenation Internet Ltd
     \__/  \    w: http://www.pollenation.net
   __/  \__/    e: matt@pollenation.net
  /  \__/  \    t: +44 (0)113 2252500
  \__/  \__/
  /  \          Any views expressed are my own and do not necessarily
  \__/          reflect the views of my employer.

From uwe at microshare.com.au  Thu Jul  7 05:04:37 2005
From: uwe at microshare.com.au (Uwe (Peter) Feldtmann)
Date: Thu Jul  7 05:06:48 2005
Subject: [Twisted-web] Introduction, newbie confusion plus an offer
In-Reply-To: <42CCFDE9.60701@pollenation.net>
References: <1978.129.44.180.6.1120674823.squirrel@www.wbsysnet.com>	<1120675815.9458.19.camel@207-118-73-152.dyn.centurytel.net>	<42CCFB05.6030300@microshare.com.au>
	<42CCFDE9.60701@pollenation.net>
Message-ID: <42CD0C45.2020903@microshare.com.au>

Thank you. My confusion came from being on the twisted and nevow lists.

Should we discuss nevow here or on divmod?

Matt Goodall wrote:
> Uwe (Peter) Feldtmann wrote:
> 
>> Can someone tell me where Nevow starts and where Twisted ends?  I 
>> think Nevow needs Twisted but where is the development source held? Is 
>> it at nevow.com divmod.org or in the Twisted source tree?
> 
> 
> Nevow code is at divmod.org. Twisted code is at twistedmatrix.com.
> 
> Strictly speaking, Nevow doesn't need Twisted or rather, Nevow should be 
> able to function without Twisted. However, there are twisted imports and 
> a few Twisted-specific bits of code in Nevow.
> 
> To be honest, I'm not sure if anyone is that interested in *completely* 
> separating Nevow from Twisted. You can use Nevow outside of a Twisted 
> event loop anyway.
> 
> Note that some of the Nevow concepts are moving back into twisted.web2. 
> At some point Nevow will start using t.web2 and, hopefully, we'll be 
> able to remove (with backwards compatability) module from Nevow and rely 
> on the t.web2 equivalents.
> 
> Hope that helps.
> 
> - Matt
> 
>>
>> Thanks in advance.
>>
>> Ed Suominen wrote:
>>
>>> Lloyd, as a fairly experienced Nevow user who has gone through the same
>>> frustrations, I'll gladly help to the extent what you're writing about
>>> applies to Nevow. I understand that Twisted.web2 is more like Nevow than
>>> Twisted.web, so that may make sense. (Actually, you may want to use
>>> Nevow -- check it out at http://nevow.org/.)
>>> Contact me directly if interested. Also, don't forget the #twisted.web
>>> channel on the Freenode IRC server, which is an excellent real-time
>>> resource that has helped me a great deal with questions.
>>>
>>> Best regards,
>>> Ed Suominen
>>>
>>> On Wed, 2005-07-06 at 14:33 -0400, lloyd@paisite.com wrote:
>>>
>>>> Hello,
>>>>
>>>> I'm Lloyd, I'm baffled, and I'd like to offer my modest talents to help
>>>> others like me come up to speed with Twisted.web in record time.
>>>>
>>>> I've been looking for a way to bring a large ColdFusion application 
>>>> over
>>>> to Python. Twisted.web looks to offer all that I could wish for and 
>>>> more.
>>>> The work to date is awe-inspiring. But... the documentation,
>>>> well-intentioned as it is, and much more ample than in many Open Source
>>>> projects, truly baffles me.
>>>>
>>>> I'm first to admit my limitations: I'm still in the early learning 
>>>> stages
>>>> of Python; I understand OO conceptually, but have little experience
>>>> writing or reading OO code; and, approaching the golden years, 
>>>> undoubtably
>>>> have far fewer functioning neurons than most of the subscribers to this
>>>> list, much less the brilliant young turks who have created the Twisted
>>>> framework.
>>>>
>>>> But, browsing through the archives, it's clear that I am not alone 
>>>> in my
>>>> confusion.
>>>>
>>>> So, I'd like to make a proposal:
>>>>
>>>> I have many years of writing and editing experience. Back in the 
>>>> days when
>>>> personal computers were still connected to audio cassette recorders, 
>>>> and I
>>>> was as excited but unenlightened about PCs as I am now about Twisted, I
>>>> contributed three well-received articles to Personal Computing magazine
>>>> under the name Techo Turkey. These helped readers hook up IBM Selectric
>>>> Terminals to their new PCs, create a computer-controlled haunted 
>>>> house for
>>>> Halloween, and set up a computer-controlled home security system.
>>>>
>>>> I would like now to offer to write some supplementary documentation for
>>>> Twisted.web aimed at turkeys like me -- the really really basic 
>>>> stuff plus
>>>> sure-to-work examples that can bring even Mickey-the-Dunce to 
>>>> sufficient
>>>> level of understanding that he can participate creatively in the 
>>>> Twisted
>>>> community.
>>>>
>>>> The catch: I need knowledgeable folks willing to answer my many many
>>>> stupid questions like, once you've installed Twisted from, say, Debian,
>>>> where should what files go and how should permissions be defined?
>>>> Undoubtably these generous mentors would also need to critique my 
>>>> newbie
>>>> code and perhaps, even, submit examples of their own. Who know, 
>>>> maybe we
>>>> could even get a book out of it.
>>>>
>>>> Any takers?
>>>>
>>>> Best wishes,
>>>>
>>>> Lloyd
>>>
>>>
>>>
>>>
>>>
>>>
>>> _______________________________________________
>>> Twisted-web mailing list
>>> Twisted-web@twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>>
>>
>>
>> _______________________________________________
>> Twisted-web mailing list
>> Twisted-web@twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
> 
> 

From matt at pollenation.net  Thu Jul  7 05:18:10 2005
From: matt at pollenation.net (Matt Goodall)
Date: Thu Jul  7 05:18:17 2005
Subject: [Twisted-web] Introduction, newbie confusion plus an offer
In-Reply-To: <42CD0C45.2020903@microshare.com.au>
References: <1978.129.44.180.6.1120674823.squirrel@www.wbsysnet.com>	<1120675815.9458.19.camel@207-118-73-152.dyn.centurytel.net>	<42CCFB05.6030300@microshare.com.au>	<42CCFDE9.60701@pollenation.net>
	<42CD0C45.2020903@microshare.com.au>
Message-ID: <42CD0F72.2040203@pollenation.net>

Uwe (Peter) Feldtmann wrote:
> Thank you. My confusion came from being on the twisted and nevow lists.
> 
> Should we discuss nevow here or on divmod?

Here in twisted-web.

AFAIK, there is no Nevow discussion on divmod but it may be that I'm not 
subscribed to the right divmod list ;-).

- Matt

> 
> Matt Goodall wrote:
> 
>> Uwe (Peter) Feldtmann wrote:
>>
>>> Can someone tell me where Nevow starts and where Twisted ends?  I 
>>> think Nevow needs Twisted but where is the development source held? 
>>> Is it at nevow.com divmod.org or in the Twisted source tree?
>>
>>
>>
>> Nevow code is at divmod.org. Twisted code is at twistedmatrix.com.
>>
>> Strictly speaking, Nevow doesn't need Twisted or rather, Nevow should 
>> be able to function without Twisted. However, there are twisted 
>> imports and a few Twisted-specific bits of code in Nevow.
>>
>> To be honest, I'm not sure if anyone is that interested in 
>> *completely* separating Nevow from Twisted. You can use Nevow outside 
>> of a Twisted event loop anyway.
>>
>> Note that some of the Nevow concepts are moving back into 
>> twisted.web2. At some point Nevow will start using t.web2 and, 
>> hopefully, we'll be able to remove (with backwards compatability) 
>> module from Nevow and rely on the t.web2 equivalents.
>>
>> Hope that helps.
>>
>> - Matt
>>
>>>
>>> Thanks in advance.
>>>
>>> Ed Suominen wrote:
>>>
>>>> Lloyd, as a fairly experienced Nevow user who has gone through the same
>>>> frustrations, I'll gladly help to the extent what you're writing about
>>>> applies to Nevow. I understand that Twisted.web2 is more like Nevow 
>>>> than
>>>> Twisted.web, so that may make sense. (Actually, you may want to use
>>>> Nevow -- check it out at http://nevow.org/.)
>>>> Contact me directly if interested. Also, don't forget the #twisted.web
>>>> channel on the Freenode IRC server, which is an excellent real-time
>>>> resource that has helped me a great deal with questions.
>>>>
>>>> Best regards,
>>>> Ed Suominen
>>>>
>>>> On Wed, 2005-07-06 at 14:33 -0400, lloyd@paisite.com wrote:
>>>>
>>>>> Hello,
>>>>>
>>>>> I'm Lloyd, I'm baffled, and I'd like to offer my modest talents to 
>>>>> help
>>>>> others like me come up to speed with Twisted.web in record time.
>>>>>
>>>>> I've been looking for a way to bring a large ColdFusion application 
>>>>> over
>>>>> to Python. Twisted.web looks to offer all that I could wish for and 
>>>>> more.
>>>>> The work to date is awe-inspiring. But... the documentation,
>>>>> well-intentioned as it is, and much more ample than in many Open 
>>>>> Source
>>>>> projects, truly baffles me.
>>>>>
>>>>> I'm first to admit my limitations: I'm still in the early learning 
>>>>> stages
>>>>> of Python; I understand OO conceptually, but have little experience
>>>>> writing or reading OO code; and, approaching the golden years, 
>>>>> undoubtably
>>>>> have far fewer functioning neurons than most of the subscribers to 
>>>>> this
>>>>> list, much less the brilliant young turks who have created the Twisted
>>>>> framework.
>>>>>
>>>>> But, browsing through the archives, it's clear that I am not alone 
>>>>> in my
>>>>> confusion.
>>>>>
>>>>> So, I'd like to make a proposal:
>>>>>
>>>>> I have many years of writing and editing experience. Back in the 
>>>>> days when
>>>>> personal computers were still connected to audio cassette 
>>>>> recorders, and I
>>>>> was as excited but unenlightened about PCs as I am now about 
>>>>> Twisted, I
>>>>> contributed three well-received articles to Personal Computing 
>>>>> magazine
>>>>> under the name Techo Turkey. These helped readers hook up IBM 
>>>>> Selectric
>>>>> Terminals to their new PCs, create a computer-controlled haunted 
>>>>> house for
>>>>> Halloween, and set up a computer-controlled home security system.
>>>>>
>>>>> I would like now to offer to write some supplementary documentation 
>>>>> for
>>>>> Twisted.web aimed at turkeys like me -- the really really basic 
>>>>> stuff plus
>>>>> sure-to-work examples that can bring even Mickey-the-Dunce to 
>>>>> sufficient
>>>>> level of understanding that he can participate creatively in the 
>>>>> Twisted
>>>>> community.
>>>>>
>>>>> The catch: I need knowledgeable folks willing to answer my many many
>>>>> stupid questions like, once you've installed Twisted from, say, 
>>>>> Debian,
>>>>> where should what files go and how should permissions be defined?
>>>>> Undoubtably these generous mentors would also need to critique my 
>>>>> newbie
>>>>> code and perhaps, even, submit examples of their own. Who know, 
>>>>> maybe we
>>>>> could even get a book out of it.
>>>>>
>>>>> Any takers?
>>>>>
>>>>> Best wishes,
>>>>>
>>>>> Lloyd
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> Twisted-web mailing list
>>>> Twisted-web@twistedmatrix.com
>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>>>
>>>
>>>
>>>
>>> _______________________________________________
>>> Twisted-web mailing list
>>> Twisted-web@twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>>
>>
>>
> 
> _______________________________________________
> Twisted-web mailing list
> Twisted-web@twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web

-- 
      __
     /  \__     Matt Goodall, Pollenation Internet Ltd
     \__/  \    w: http://www.pollenation.net
   __/  \__/    e: matt@pollenation.net
  /  \__/  \    t: +44 (0)113 2252500
  \__/  \__/
  /  \          Any views expressed are my own and do not necessarily
  \__/          reflect the views of my employer.

From mdmoin939 at yahoo.com  Thu Jul  7 05:23:56 2005
From: mdmoin939 at yahoo.com (Md Moin)
Date: Thu Jul  7 05:24:36 2005
Subject: [Twisted-web] XML RPC authentication
Message-ID: <20050707112356.21861.qmail@web40906.mail.yahoo.com>

I would like to setup a XML RPC server with
authentication functionality based on username and
password.Is there any simple example available for XML
RPC server/client that uses username/password
authentication? 
Thanx


		
__________________________________ 
Yahoo! Mail for Mobile 
Take Yahoo! Mail with you! Check email on your mobile phone. 
http://mobile.yahoo.com/learn/mail 

From alberto.trujillo at ucd.ie  Thu Jul  7 07:07:24 2005
From: alberto.trujillo at ucd.ie (Alberto Trujillo)
Date: Thu Jul  7 07:18:02 2005
Subject: [Twisted-web] how are solving the calls to the children in nevow?
Message-ID: <42CD290C.3000503@ucd.ie>

Hello:
I have been following this example 
"http://nevowexamples.adytum.us/childrenhtml/"to know how works the 
calls to the children with nevow, but still it's not enough clear for me.

I even add a new child in the childFactory and some print command to 
follow the way of the calls. Here I show you my modifications:

    def childFactory(self, ctx, name):
        print "NAME = " + name
        if name in ['1', '2', '3']:
            return ChildPage(name)
        elif name == 'one':
            return OneRoot()

    def locateChild(self, ctx, segments):
        child, remainingSegments = rend.Page.locateChild(self, ctx, 
segments)
        print "CHILD = " + str(child) + " SEGMENT = " + 
str(remainingSegments)
        if child:
            print "IN THE IF"
            return child, remainingSegments

        return ChildPage('/'.join(segments)), []

My question is why each time that I call to "one" it goes inside 
"locateChild" wheter "one" is place in "childFactory", here is a trace 
of my server.

2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] NAME = one
2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] CHILD = <one.OneRoot 
object at 0x40701eac> SEGMENT = ()
2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] IN THE IF
2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] 127.0.0.1 - - 
[07/Jul/2005:12:52:11 +0000] "GET /one?id=1 HTTP/1.1" 200 47 
"http://localhost:8080/" "Mozilla/5.0 (X11; U; Linux i686; en-US; 
rv:1.7.8) Gecko/20050517 Firefox/1.0.4 (Debian package 1.0.4-2)"
2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] NAME = favicon.ico
2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] CHILD = None SEGMENT = ()
2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] 127.0.0.1 - - 
[07/Jul/2005:12:52:11 +0000] "GET /favicon.ico HTTP/1.1" 200 684 "-" 
"Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.8) Gecko/20050517 
Firefox/1.0.4 (Debian package 1.0.4-2)

And when I return to the father, who call to childrenRoot class again, 
and what is favicon.ico?. I show you the results here.

2005/07/07 13:58 IST [HTTPChannel,1,127.0.0.1] NAME = favicon.ico
2005/07/07 13:58 IST [HTTPChannel,1,127.0.0.1] CHILD = None SEGMENT = ()
2005/07/07 13:58 IST [HTTPChannel,1,127.0.0.1] 127.0.0.1 - - 
[07/Jul/2005:12:58:34 +0000] "GET /favicon.ico HTTP/1.1" 200 684 "-" 
"Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.8) Gecko/20050517 
Firefox/1.0.4 (Debian package 1.0.4-2)"

I would like to know as well if I must to implement all these methods 
each time that I'm working with children, and what is segments.

Sorry I know that are a lot of question, but I don't have access to the 
IRC channel and I couldn't understand the information in "inevow.IReource".

Thanks a lot

From weeti at usr.fi  Thu Jul  7 08:31:50 2005
From: weeti at usr.fi (weeti)
Date: Thu Jul  7 08:32:29 2005
Subject: [Twisted-web] Re: How work formless?
In-Reply-To: <42C9145E.5000607@ucd.ie> (from alberto.trujillo@ucd.ie on Mon
	Jul  4 13:50:06 2005)
References: <42C9145E.5000607@ucd.ie>
Message-ID: <1120746710l.1894l.1l@wx31>


On 07/04/05 13:50:06, Alberto Trujillo wrote:
> Hello Donovan:
> Thank again for your help, here I send you the files. Everythings is  
> working like I told you before, but I don't see the error message in  
> the screen.
> 
> year.html
> ----------------
> <form action="freeform_post!!selectYear" method="POST">
>    Type a year: <input type="text" name="year" />
>    <input type="submit" />
> </form>
> 
> year.py
> ------------
> from nevow import rend, loaders
> import formless
> 
> class YearChooseable(formless.TypedInterface):
>    def selectYear(self, year=formless.Integer()):
>        pass
>    selectYear = formless.autocallable(selectYear)
> 
> 
> class Colorful(rend.Page):
>    __implements__ = YearChooseable, rend.Page.__implements__
>    addSlash = True
> 
>    def selectYear(self, year):
>        self.test = True
> #        return rend.Page.locateChild(self, context, segments)
>          docFactory = loaders.xmlfile("year.html")
> 
> year.tac
> -------------
> from twisted.application import internet, service
> from nevow import appserver
> import year
> 
> application = service.Application("tasks")
> webserver = internet.TCPServer(8080, appserver.NevowSite 
> (year.Colorful()))
> webserver.setServiceParent(application)
> 
> _______________________________________________
> Twisted-web mailing list
> Twisted-web@twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
> 
>

Hi
Maybe you should have a place where to render those error-messages in  
your template? and in any case, you can access them in IFormErrors 
(ctx).


From weeti at usr.fi  Thu Jul  7 08:31:50 2005
From: weeti at usr.fi (weeti)
Date: Thu Jul  7 08:32:32 2005
Subject: [Twisted-web] Re: How work formless?
In-Reply-To: <42C9145E.5000607@ucd.ie> (from alberto.trujillo@ucd.ie on Mon
	Jul  4 13:50:06 2005)
References: <42C9145E.5000607@ucd.ie>
Message-ID: <1120746710l.1894l.1l@wx31>


On 07/04/05 13:50:06, Alberto Trujillo wrote:
> Hello Donovan:
> Thank again for your help, here I send you the files. Everythings is  
> working like I told you before, but I don't see the error message in  
> the screen.
> 
> year.html
> ----------------
> <form action="freeform_post!!selectYear" method="POST">
>    Type a year: <input type="text" name="year" />
>    <input type="submit" />
> </form>
> 
> year.py
> ------------
> from nevow import rend, loaders
> import formless
> 
> class YearChooseable(formless.TypedInterface):
>    def selectYear(self, year=formless.Integer()):
>        pass
>    selectYear = formless.autocallable(selectYear)
> 
> 
> class Colorful(rend.Page):
>    __implements__ = YearChooseable, rend.Page.__implements__
>    addSlash = True
> 
>    def selectYear(self, year):
>        self.test = True
> #        return rend.Page.locateChild(self, context, segments)
>          docFactory = loaders.xmlfile("year.html")
> 
> year.tac
> -------------
> from twisted.application import internet, service
> from nevow import appserver
> import year
> 
> application = service.Application("tasks")
> webserver = internet.TCPServer(8080, appserver.NevowSite 
> (year.Colorful()))
> webserver.setServiceParent(application)
> 
> _______________________________________________
> Twisted-web mailing list
> Twisted-web@twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
> 
>

Hi
Maybe you should have a place where to render those error-messages in  
your template? and in any case, you can access them in IFormErrors 
(ctx).


From lloyd at paisite.com  Thu Jul  7 09:50:02 2005
From: lloyd at paisite.com (lloyd@paisite.com)
Date: Thu Jul  7 09:53:15 2005
Subject: [Twisted-web] Re: Introduction, newbie confusion plus an offer
In-Reply-To: <E1DqXQX-0007VU-02@pyramid.twistedmatrix.com>
References: <E1DqXQX-0007VU-02@pyramid.twistedmatrix.com>
Message-ID: <1915.129.44.180.6.1120751402.squirrel@www.wbsysnet.com>

Hello,

To Ed Suominen:

Many thanks for your response.

I'd very much appreciate your help.

I am interested in Nevow, but like one of the other posters I'm confused
about where Twisted leaves off and where Nevow begins. This is only one of
many duh kind of questions I'd like to try to clear up.

My personal goal in all this is to re-write a ColdFusion application in
Python -- and improve it whereever possible. An example of the kind of
sites I want the new Python site to support support can be found at
http://www.luxexecutivesummit.com.

I'm after:
-- Scalability
-- Modularity
-- Rapid form-based site development
-- Efficient form-based site maintenance
-- Ability to plug in a rich variety of dynamic applications

But I recognize that you have to walk before you run. So my first
milestone will be to bring up the simplest web-server in the world. I know
it's in the present documentation, but I haven't quite figured it out yet.
I did get a couple of the Twisted examples working, however. My second
goal is to make the site data-driven. My third goal is to tighten it up
into an efficient, secure, flexible foundation that I and others can build
on.

My assumption is that if I, coming naively from a different technology,
have questions, others will too. If I can stumble through to answers and
help in whatever way to improve the documentation, then it'll be easier
for others.

More in following posts.

Best wishes,

Lloyd






>
> Today's Topics:
>
>    1. Re: Introduction, newbie confusion plus an offer (Matt Goodall)
>    2. Re: Introduction, newbie confusion plus an offer
>       (Uwe (Peter) Feldtmann)
>    3. Re: Introduction, newbie confusion plus an offer (Matt Goodall)
>    4. XML RPC authentication (Md Moin)
>    5. how are solving the calls to the children in nevow?
>       (Alberto Trujillo)
>    6. Re: Re: How work formless? (weeti)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Thu, 07 Jul 2005 11:03:21 +0100
> From: Matt Goodall <matt@pollenation.net>
> Subject: Re: [Twisted-web] Introduction, newbie confusion plus an
> 	offer
> To: "Discussion of twisted.web, Nevow,	and Woven"
> 	<twisted-web@twistedmatrix.com>
> Message-ID: <42CCFDE9.60701@pollenation.net>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> Uwe (Peter) Feldtmann wrote:
>> Can someone tell me where Nevow starts and where Twisted ends?  I think
>> Nevow needs Twisted but where is the development source held? Is it at
>> nevow.com divmod.org or in the Twisted source tree?
>
> Nevow code is at divmod.org. Twisted code is at twistedmatrix.com.
>
> Strictly speaking, Nevow doesn't need Twisted or rather, Nevow should be
> able to function without Twisted. However, there are twisted imports and
> a few Twisted-specific bits of code in Nevow.
>
> To be honest, I'm not sure if anyone is that interested in *completely*
> separating Nevow from Twisted. You can use Nevow outside of a Twisted
> event loop anyway.
>
> Note that some of the Nevow concepts are moving back into twisted.web2.
> At some point Nevow will start using t.web2 and, hopefully, we'll be
> able to remove (with backwards compatability) module from Nevow and rely
> on the t.web2 equivalents.
>
> Hope that helps.
>
> - Matt
>
>>
>> Thanks in advance.
>>
>> Ed Suominen wrote:
>>
>>> Lloyd, as a fairly experienced Nevow user who has gone through the same
>>> frustrations, I'll gladly help to the extent what you're writing about
>>> applies to Nevow. I understand that Twisted.web2 is more like Nevow
>>> than
>>> Twisted.web, so that may make sense. (Actually, you may want to use
>>> Nevow -- check it out at http://nevow.org/.)
>>> Contact me directly if interested. Also, don't forget the #twisted.web
>>> channel on the Freenode IRC server, which is an excellent real-time
>>> resource that has helped me a great deal with questions.
>>>
>>> Best regards,
>>> Ed Suominen
>>>
>>> On Wed, 2005-07-06 at 14:33 -0400, lloyd@paisite.com wrote:
>>>
>>>> Hello,
>>>>
>>>> I'm Lloyd, I'm baffled, and I'd like to offer my modest talents to
>>>> help
>>>> others like me come up to speed with Twisted.web in record time.
>>>>
>>>> I've been looking for a way to bring a large ColdFusion application
>>>> over
>>>> to Python. Twisted.web looks to offer all that I could wish for and
>>>> more.
>>>> The work to date is awe-inspiring. But... the documentation,
>>>> well-intentioned as it is, and much more ample than in many Open
>>>> Source
>>>> projects, truly baffles me.
>>>>
>>>> I'm first to admit my limitations: I'm still in the early learning
>>>> stages
>>>> of Python; I understand OO conceptually, but have little experience
>>>> writing or reading OO code; and, approaching the golden years,
>>>> undoubtably
>>>> have far fewer functioning neurons than most of the subscribers to
>>>> this
>>>> list, much less the brilliant young turks who have created the Twisted
>>>> framework.
>>>>
>>>> But, browsing through the archives, it's clear that I am not alone in
>>>> my
>>>> confusion.
>>>>
>>>> So, I'd like to make a proposal:
>>>>
>>>> I have many years of writing and editing experience. Back in the days
>>>> when
>>>> personal computers were still connected to audio cassette recorders,
>>>> and I
>>>> was as excited but unenlightened about PCs as I am now about Twisted,
>>>> I
>>>> contributed three well-received articles to Personal Computing
>>>> magazine
>>>> under the name Techo Turkey. These helped readers hook up IBM
>>>> Selectric
>>>> Terminals to their new PCs, create a computer-controlled haunted
>>>> house for
>>>> Halloween, and set up a computer-controlled home security system.
>>>>
>>>> I would like now to offer to write some supplementary documentation
>>>> for
>>>> Twisted.web aimed at turkeys like me -- the really really basic stuff
>>>> plus
>>>> sure-to-work examples that can bring even Mickey-the-Dunce to
>>>> sufficient
>>>> level of understanding that he can participate creatively in the
>>>> Twisted
>>>> community.
>>>>
>>>> The catch: I need knowledgeable folks willing to answer my many many
>>>> stupid questions like, once you've installed Twisted from, say,
>>>> Debian,
>>>> where should what files go and how should permissions be defined?
>>>> Undoubtably these generous mentors would also need to critique my
>>>> newbie
>>>> code and perhaps, even, submit examples of their own. Who know, maybe
>>>> we
>>>> could even get a book out of it.
>>>>
>>>> Any takers?
>>>>
>>>> Best wishes,
>>>>
>>>> Lloyd
>>>
>>>
>>>
>>>
>>>
>>> _______________________________________________
>>> Twisted-web mailing list
>>> Twisted-web@twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>>
>>
>> _______________________________________________
>> Twisted-web mailing list
>> Twisted-web@twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>
> --
>       __
>      /  \__     Matt Goodall, Pollenation Internet Ltd
>      \__/  \    w: http://www.pollenation.net
>    __/  \__/    e: matt@pollenation.net
>   /  \__/  \    t: +44 (0)113 2252500
>   \__/  \__/
>   /  \          Any views expressed are my own and do not necessarily
>   \__/          reflect the views of my employer.
>
>
>
> ------------------------------
>
> Message: 2
> Date: Thu, 07 Jul 2005 21:04:37 +1000
> From: "Uwe (Peter) Feldtmann" <uwe@microshare.com.au>
> Subject: Re: [Twisted-web] Introduction, newbie confusion plus an
> 	offer
> To: "Discussion of twisted.web, Nevow,	and Woven"
> 	<twisted-web@twistedmatrix.com>
> Message-ID: <42CD0C45.2020903@microshare.com.au>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> Thank you. My confusion came from being on the twisted and nevow lists.
>
> Should we discuss nevow here or on divmod?
>
> Matt Goodall wrote:
>> Uwe (Peter) Feldtmann wrote:
>>
>>> Can someone tell me where Nevow starts and where Twisted ends?  I
>>> think Nevow needs Twisted but where is the development source held? Is
>>> it at nevow.com divmod.org or in the Twisted source tree?
>>
>>
>> Nevow code is at divmod.org. Twisted code is at twistedmatrix.com.
>>
>> Strictly speaking, Nevow doesn't need Twisted or rather, Nevow should be
>> able to function without Twisted. However, there are twisted imports and
>> a few Twisted-specific bits of code in Nevow.
>>
>> To be honest, I'm not sure if anyone is that interested in *completely*
>> separating Nevow from Twisted. You can use Nevow outside of a Twisted
>> event loop anyway.
>>
>> Note that some of the Nevow concepts are moving back into twisted.web2.
>> At some point Nevow will start using t.web2 and, hopefully, we'll be
>> able to remove (with backwards compatability) module from Nevow and rely
>> on the t.web2 equivalents.
>>
>> Hope that helps.
>>
>> - Matt
>>
>>>
>>> Thanks in advance.
>>>
>>> Ed Suominen wrote:
>>>
>>>> Lloyd, as a fairly experienced Nevow user who has gone through the
>>>> same
>>>> frustrations, I'll gladly help to the extent what you're writing about
>>>> applies to Nevow. I understand that Twisted.web2 is more like Nevow
>>>> than
>>>> Twisted.web, so that may make sense. (Actually, you may want to use
>>>> Nevow -- check it out at http://nevow.org/.)
>>>> Contact me directly if interested. Also, don't forget the #twisted.web
>>>> channel on the Freenode IRC server, which is an excellent real-time
>>>> resource that has helped me a great deal with questions.
>>>>
>>>> Best regards,
>>>> Ed Suominen
>>>>
>>>> On Wed, 2005-07-06 at 14:33 -0400, lloyd@paisite.com wrote:
>>>>
>>>>> Hello,
>>>>>
>>>>> I'm Lloyd, I'm baffled, and I'd like to offer my modest talents to
>>>>> help
>>>>> others like me come up to speed with Twisted.web in record time.
>>>>>
>>>>> I've been looking for a way to bring a large ColdFusion application
>>>>> over
>>>>> to Python. Twisted.web looks to offer all that I could wish for and
>>>>> more.
>>>>> The work to date is awe-inspiring. But... the documentation,
>>>>> well-intentioned as it is, and much more ample than in many Open
>>>>> Source
>>>>> projects, truly baffles me.
>>>>>
>>>>> I'm first to admit my limitations: I'm still in the early learning
>>>>> stages
>>>>> of Python; I understand OO conceptually, but have little experience
>>>>> writing or reading OO code; and, approaching the golden years,
>>>>> undoubtably
>>>>> have far fewer functioning neurons than most of the subscribers to
>>>>> this
>>>>> list, much less the brilliant young turks who have created the
>>>>> Twisted
>>>>> framework.
>>>>>
>>>>> But, browsing through the archives, it's clear that I am not alone
>>>>> in my
>>>>> confusion.
>>>>>
>>>>> So, I'd like to make a proposal:
>>>>>
>>>>> I have many years of writing and editing experience. Back in the
>>>>> days when
>>>>> personal computers were still connected to audio cassette recorders,
>>>>> and I
>>>>> was as excited but unenlightened about PCs as I am now about Twisted,
>>>>> I
>>>>> contributed three well-received articles to Personal Computing
>>>>> magazine
>>>>> under the name Techo Turkey. These helped readers hook up IBM
>>>>> Selectric
>>>>> Terminals to their new PCs, create a computer-controlled haunted
>>>>> house for
>>>>> Halloween, and set up a computer-controlled home security system.
>>>>>
>>>>> I would like now to offer to write some supplementary documentation
>>>>> for
>>>>> Twisted.web aimed at turkeys like me -- the really really basic
>>>>> stuff plus
>>>>> sure-to-work examples that can bring even Mickey-the-Dunce to
>>>>> sufficient
>>>>> level of understanding that he can participate creatively in the
>>>>> Twisted
>>>>> community.
>>>>>
>>>>> The catch: I need knowledgeable folks willing to answer my many many
>>>>> stupid questions like, once you've installed Twisted from, say,
>>>>> Debian,
>>>>> where should what files go and how should permissions be defined?
>>>>> Undoubtably these generous mentors would also need to critique my
>>>>> newbie
>>>>> code and perhaps, even, submit examples of their own. Who know,
>>>>> maybe we
>>>>> could even get a book out of it.
>>>>>
>>>>> Any takers?
>>>>>
>>>>> Best wishes,
>>>>>
>>>>> Lloyd
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> Twisted-web mailing list
>>>> Twisted-web@twistedmatrix.com
>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>>>
>>>
>>>
>>> _______________________________________________
>>> Twisted-web mailing list
>>> Twisted-web@twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>>
>>
>
>
>
> ------------------------------
>
> Message: 3
> Date: Thu, 07 Jul 2005 12:18:10 +0100
> From: Matt Goodall <matt@pollenation.net>
> Subject: Re: [Twisted-web] Introduction, newbie confusion plus an
> 	offer
> To: "Discussion of twisted.web, Nevow,	and Woven"
> 	<twisted-web@twistedmatrix.com>
> Message-ID: <42CD0F72.2040203@pollenation.net>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> Uwe (Peter) Feldtmann wrote:
>> Thank you. My confusion came from being on the twisted and nevow lists.
>>
>> Should we discuss nevow here or on divmod?
>
> Here in twisted-web.
>
> AFAIK, there is no Nevow discussion on divmod but it may be that I'm not
> subscribed to the right divmod list ;-).
>
> - Matt
>
>>
>> Matt Goodall wrote:
>>
>>> Uwe (Peter) Feldtmann wrote:
>>>
>>>> Can someone tell me where Nevow starts and where Twisted ends?  I
>>>> think Nevow needs Twisted but where is the development source held?
>>>> Is it at nevow.com divmod.org or in the Twisted source tree?
>>>
>>>
>>>
>>> Nevow code is at divmod.org. Twisted code is at twistedmatrix.com.
>>>
>>> Strictly speaking, Nevow doesn't need Twisted or rather, Nevow should
>>> be able to function without Twisted. However, there are twisted
>>> imports and a few Twisted-specific bits of code in Nevow.
>>>
>>> To be honest, I'm not sure if anyone is that interested in
>>> *completely* separating Nevow from Twisted. You can use Nevow outside
>>> of a Twisted event loop anyway.
>>>
>>> Note that some of the Nevow concepts are moving back into
>>> twisted.web2. At some point Nevow will start using t.web2 and,
>>> hopefully, we'll be able to remove (with backwards compatability)
>>> module from Nevow and rely on the t.web2 equivalents.
>>>
>>> Hope that helps.
>>>
>>> - Matt
>>>
>>>>
>>>> Thanks in advance.
>>>>
>>>> Ed Suominen wrote:
>>>>
>>>>> Lloyd, as a fairly experienced Nevow user who has gone through the
>>>>> same
>>>>> frustrations, I'll gladly help to the extent what you're writing
>>>>> about
>>>>> applies to Nevow. I understand that Twisted.web2 is more like Nevow
>>>>> than
>>>>> Twisted.web, so that may make sense. (Actually, you may want to use
>>>>> Nevow -- check it out at http://nevow.org/.)
>>>>> Contact me directly if interested. Also, don't forget the
>>>>> #twisted.web
>>>>> channel on the Freenode IRC server, which is an excellent real-time
>>>>> resource that has helped me a great deal with questions.
>>>>>
>>>>> Best regards,
>>>>> Ed Suominen
>>>>>
>>>>> On Wed, 2005-07-06 at 14:33 -0400, lloyd@paisite.com wrote:
>>>>>
>>>>>> Hello,
>>>>>>
>>>>>> I'm Lloyd, I'm baffled, and I'd like to offer my modest talents to
>>>>>> help
>>>>>> others like me come up to speed with Twisted.web in record time.
>>>>>>
>>>>>> I've been looking for a way to bring a large ColdFusion application
>>>>>> over
>>>>>> to Python. Twisted.web looks to offer all that I could wish for and
>>>>>> more.
>>>>>> The work to date is awe-inspiring. But... the documentation,
>>>>>> well-intentioned as it is, and much more ample than in many Open
>>>>>> Source
>>>>>> projects, truly baffles me.
>>>>>>
>>>>>> I'm first to admit my limitations: I'm still in the early learning
>>>>>> stages
>>>>>> of Python; I understand OO conceptually, but have little experience
>>>>>> writing or reading OO code; and, approaching the golden years,
>>>>>> undoubtably
>>>>>> have far fewer functioning neurons than most of the subscribers to
>>>>>> this
>>>>>> list, much less the brilliant young turks who have created the
>>>>>> Twisted
>>>>>> framework.
>>>>>>
>>>>>> But, browsing through the archives, it's clear that I am not alone
>>>>>> in my
>>>>>> confusion.
>>>>>>
>>>>>> So, I'd like to make a proposal:
>>>>>>
>>>>>> I have many years of writing and editing experience. Back in the
>>>>>> days when
>>>>>> personal computers were still connected to audio cassette
>>>>>> recorders, and I
>>>>>> was as excited but unenlightened about PCs as I am now about
>>>>>> Twisted, I
>>>>>> contributed three well-received articles to Personal Computing
>>>>>> magazine
>>>>>> under the name Techo Turkey. These helped readers hook up IBM
>>>>>> Selectric
>>>>>> Terminals to their new PCs, create a computer-controlled haunted
>>>>>> house for
>>>>>> Halloween, and set up a computer-controlled home security system.
>>>>>>
>>>>>> I would like now to offer to write some supplementary documentation
>>>>>> for
>>>>>> Twisted.web aimed at turkeys like me -- the really really basic
>>>>>> stuff plus
>>>>>> sure-to-work examples that can bring even Mickey-the-Dunce to
>>>>>> sufficient
>>>>>> level of understanding that he can participate creatively in the
>>>>>> Twisted
>>>>>> community.
>>>>>>
>>>>>> The catch: I need knowledgeable folks willing to answer my many many
>>>>>> stupid questions like, once you've installed Twisted from, say,
>>>>>> Debian,
>>>>>> where should what files go and how should permissions be defined?
>>>>>> Undoubtably these generous mentors would also need to critique my
>>>>>> newbie
>>>>>> code and perhaps, even, submit examples of their own. Who know,
>>>>>> maybe we
>>>>>> could even get a book out of it.
>>>>>>
>>>>>> Any takers?
>>>>>>
>>>>>> Best wishes,
>>>>>>
>>>>>> Lloyd
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> Twisted-web mailing list
>>>>> Twisted-web@twistedmatrix.com
>>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>>>>
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> Twisted-web mailing list
>>>> Twisted-web@twistedmatrix.com
>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>>>
>>>
>>>
>>
>> _______________________________________________
>> Twisted-web mailing list
>> Twisted-web@twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>
> --
>       __
>      /  \__     Matt Goodall, Pollenation Internet Ltd
>      \__/  \    w: http://www.pollenation.net
>    __/  \__/    e: matt@pollenation.net
>   /  \__/  \    t: +44 (0)113 2252500
>   \__/  \__/
>   /  \          Any views expressed are my own and do not necessarily
>   \__/          reflect the views of my employer.
>
>
>
> ------------------------------
>
> Message: 4
> Date: Thu, 7 Jul 2005 04:23:56 -0700 (PDT)
> From: Md Moin <mdmoin939@yahoo.com>
> Subject: [Twisted-web] XML RPC authentication
> To: twisted-web@twistedmatrix.com
> Message-ID: <20050707112356.21861.qmail@web40906.mail.yahoo.com>
> Content-Type: text/plain; charset=iso-8859-1
>
> I would like to setup a XML RPC server with
> authentication functionality based on username and
> password.Is there any simple example available for XML
> RPC server/client that uses username/password
> authentication?
> Thanx
>
>
>
> __________________________________
> Yahoo! Mail for Mobile
> Take Yahoo! Mail with you! Check email on your mobile phone.
> http://mobile.yahoo.com/learn/mail
>
>
>
> ------------------------------
>
> Message: 5
> Date: Thu, 07 Jul 2005 14:07:24 +0100
> From: Alberto Trujillo <alberto.trujillo@ucd.ie>
> Subject: [Twisted-web] how are solving the calls to the children in
> 	nevow?
> To: twisted-web@twistedmatrix.com
> Message-ID: <42CD290C.3000503@ucd.ie>
> Content-Type: text/plain; format=flowed; charset=ISO-8859-1
>
> Hello:
> I have been following this example
> "http://nevowexamples.adytum.us/childrenhtml/"to know how works the
> calls to the children with nevow, but still it's not enough clear for me.
>
> I even add a new child in the childFactory and some print command to
> follow the way of the calls. Here I show you my modifications:
>
>     def childFactory(self, ctx, name):
>         print "NAME = " + name
>         if name in ['1', '2', '3']:
>             return ChildPage(name)
>         elif name == 'one':
>             return OneRoot()
>
>     def locateChild(self, ctx, segments):
>         child, remainingSegments = rend.Page.locateChild(self, ctx,
> segments)
>         print "CHILD = " + str(child) + " SEGMENT = " +
> str(remainingSegments)
>         if child:
>             print "IN THE IF"
>             return child, remainingSegments
>
>         return ChildPage('/'.join(segments)), []
>
> My question is why each time that I call to "one" it goes inside
> "locateChild" wheter "one" is place in "childFactory", here is a trace
> of my server.
>
> 2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] NAME = one
> 2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] CHILD = <one.OneRoot
> object at 0x40701eac> SEGMENT = ()
> 2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] IN THE IF
> 2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] 127.0.0.1 - -
> [07/Jul/2005:12:52:11 +0000] "GET /one?id=1 HTTP/1.1" 200 47
> "http://localhost:8080/" "Mozilla/5.0 (X11; U; Linux i686; en-US;
> rv:1.7.8) Gecko/20050517 Firefox/1.0.4 (Debian package 1.0.4-2)"
> 2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] NAME = favicon.ico
> 2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] CHILD = None SEGMENT = ()
> 2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] 127.0.0.1 - -
> [07/Jul/2005:12:52:11 +0000] "GET /favicon.ico HTTP/1.1" 200 684 "-"
> "Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.8) Gecko/20050517
> Firefox/1.0.4 (Debian package 1.0.4-2)
>
> And when I return to the father, who call to childrenRoot class again,
> and what is favicon.ico?. I show you the results here.
>
> 2005/07/07 13:58 IST [HTTPChannel,1,127.0.0.1] NAME = favicon.ico
> 2005/07/07 13:58 IST [HTTPChannel,1,127.0.0.1] CHILD = None SEGMENT = ()
> 2005/07/07 13:58 IST [HTTPChannel,1,127.0.0.1] 127.0.0.1 - -
> [07/Jul/2005:12:58:34 +0000] "GET /favicon.ico HTTP/1.1" 200 684 "-"
> "Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.8) Gecko/20050517
> Firefox/1.0.4 (Debian package 1.0.4-2)"
>
> I would like to know as well if I must to implement all these methods
> each time that I'm working with children, and what is segments.
>
> Sorry I know that are a lot of question, but I don't have access to the
> IRC channel and I couldn't understand the information in
> "inevow.IReource".
>
> Thanks a lot
>
>
>
> ------------------------------
>
> Message: 6
> Date: Thu, 07 Jul 2005 14:31:50 +0000
> From: weeti <weeti@usr.fi>
> Subject: Re: [Twisted-web] Re: How work formless?
> To: "Discussion of twisted.web, Nevow,	and Woven"
> 	<twisted-web@twistedmatrix.com>
> Cc: twisted-web@twistedmatrix.com
> Message-ID: <1120746710l.1894l.1l@wx31>
> Content-Type: text/plain; charset=us-ascii; DelSp=Yes; Format=Flowed
>
>
> On 07/04/05 13:50:06, Alberto Trujillo wrote:
>> Hello Donovan:
>> Thank again for your help, here I send you the files. Everythings is
>> working like I told you before, but I don't see the error message in
>> the screen.
>>
>> year.html
>> ----------------
>> <form action="freeform_post!!selectYear" method="POST">
>>    Type a year: <input type="text" name="year" />
>>    <input type="submit" />
>> </form>
>>
>> year.py
>> ------------
>> from nevow import rend, loaders
>> import formless
>>
>> class YearChooseable(formless.TypedInterface):
>>    def selectYear(self, year=formless.Integer()):
>>        pass
>>    selectYear = formless.autocallable(selectYear)
>>
>>
>> class Colorful(rend.Page):
>>    __implements__ = YearChooseable, rend.Page.__implements__
>>    addSlash = True
>>
>>    def selectYear(self, year):
>>        self.test = True
>> #        return rend.Page.locateChild(self, context, segments)
>>          docFactory = loaders.xmlfile("year.html")
>>
>> year.tac
>> -------------
>> from twisted.application import internet, service
>> from nevow import appserver
>> import year
>>
>> application = service.Application("tasks")
>> webserver = internet.TCPServer(8080, appserver.NevowSite
>> (year.Colorful()))
>> webserver.setServiceParent(application)
>>
>> _______________________________________________
>> Twisted-web mailing list
>> Twisted-web@twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>>
>>
>
> Hi
> Maybe you should have a place where to render those error-messages in
> your template? and in any case, you can access them in IFormErrors
> (ctx).
>
>
>
>
> ------------------------------
>
> _______________________________________________
> Twisted-web mailing list
> Twisted-web@twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>
>
> End of Twisted-web Digest, Vol 16, Issue 6
> ******************************************
>
>



From lloyd at paisite.com  Thu Jul  7 09:58:45 2005
From: lloyd at paisite.com (lloyd@paisite.com)
Date: Thu Jul  7 10:01:59 2005
Subject: [Twisted-web] Re: Introduction, newbie confusion plus an offer
Message-ID: <1921.129.44.180.6.1120751925.squirrel@www.wbsysnet.com>

Hello,

To Kieran Holland:

Wow!

I haven't had a chance to study it all, but your stan tutorial is exactly
the kind of clear, thorough documentation that will propell Twisted from
outstanding to extraordinary.

I hope I can do my part to suplement your work -- perhaps work with you on
other parts of the problem.

All the best,

Lloyd



From lloyd at paisite.com  Thu Jul  7 10:24:42 2005
From: lloyd at paisite.com (lloyd@paisite.com)
Date: Thu Jul  7 10:27:54 2005
Subject: [Twisted-web] Re: Introduction, newbie confusion plus an offer
Message-ID: <1924.129.44.180.6.1120753482.squirrel@www.wbsysnet.com>

To Simon Hedberg:

Hi Simon,

> can you tell me more about the scope of the document(s) you are
> planning?  (Ie, is it setting up a server, creating webpages or using
> the components of twisted.web or something else?).

Excellent question.

-- As Step 1 I'd like to cover all that a newbie like me needs to know to
set up an efficient, secure, scalable web-server.

-- As Step 2 I'd like to cover how to build high-styled web pages through
form-based editors

-- As Step 3 I'd like to cover how to integrate modular applications into
those pages, such things, in my case, as conference registrations

-- As Step 4, should we get there, I'd like to explore other aspects of
Twisted that can add really cool and fun functionality to my web pages.

I can see two approaches, and welcome input from all:

1) Work through current documentation, asking questions about things that
confuse me and providing the answers/clarifications as a rewrite of
current documentation

2) Develop totally parallel documents

Since this would be an on-going project, the next question is how best or
organize it. I'm open to any and all suggestions. Some possibilities:

1) Submit my questions to the mail-list. Consolidate and re-write
responses. Submit suggested "patches" to current documention.

2) Start a new document on my site or one of the Twisted sites. Write what
I understand with questions about what I don't. Invite clarifications
through the mail-list.

3) Perhaps there's already a documentation process already in place that I
don't know about; e.g. I don't know enough yet to understand the
capabilities of Lore nor how to use it. Maybe this is a place to start.

In short, I'm just a guy with lots of questions who'd like to contribute
what he can to help the community while pursuing his own mastery of
Twisted.

Please let me know how you think this can best be pursued?

Best wishes,

Lloyd








From alberto.trujillo at ucd.ie  Thu Jul  7 10:22:26 2005
From: alberto.trujillo at ucd.ie (Alberto Trujillo)
Date: Thu Jul  7 10:33:19 2005
Subject: [Twisted-web] Nested templates?
Message-ID: <42CD56C2.3030801@ucd.ie>

There is any way to use nested templates without mix the python code 
with the html code.
I know, that I could solve this problem using Stan, or just writing html 
code inside the python file and after display what I want.
But that are exactly the option that I can't use. I have to nest the 
template keeping the html code and the python code in different file.
If some body can give a example, a tutorial, a address, o something that 
can help me, I'll be very pleasant.

Thank you very much

From jblocksom at gsti3d.com  Thu Jul  7 11:26:18 2005
From: jblocksom at gsti3d.com (Jonathan Blocksom)
Date: Thu Jul  7 11:28:03 2005
Subject: [Twisted-web] Accessing request object from a SOAPPublisher soap_
	method
Message-ID: <42CD65BA.6010306@gsti3d.com>

Hi, I've got a SOAPPublisher class with some published methods and I was 
hoping to access the HTTP request object from within.  Anybody know how 
to do this?

Thanks,
Jonathan

From weeti at usr.fi  Thu Jul  7 14:04:08 2005
From: weeti at usr.fi (weeti)
Date: Thu Jul  7 14:04:50 2005
Subject: [Twisted-web] Nested templates?
In-Reply-To: <42CD56C2.3030801@ucd.ie> (from alberto.trujillo@ucd.ie on Thu
	Jul  7 19:22:26 2005)
References: <42CD56C2.3030801@ucd.ie>
Message-ID: <1120766648l.9691l.0l@wx31>



Hi, what do you mean by nested templates, if I have understood it  
correctly you need a way to have a single renderer rendering another  
template inside it? and am i correct that you are using nevow?

if so, i use like this


template...
<n:invisible n:render="page"/>

code
def render_page(self, ctx, data):
    ctx.tag(render=loaders.xmlfile('anothertemplate'))

dunno if this is what you asked for.

On 07/07/05 19:22:26, Alberto Trujillo wrote:
> There is any way to use nested templates without mix the python code  
> with the html code.
> I know, that I could solve this problem using Stan, or just writing  
> html code inside the python file and after display what I want.
> But that are exactly the option that I can't use. I have to nest the  
> template keeping the html code and the python code in different file.
> If some body can give a example, a tutorial, a address, o something  
> that can help me, I'll be very pleasant.
> 
> Thank you very much
> 
> _______________________________________________
> Twisted-web mailing list
> Twisted-web@twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
> 
> 
> 


From lloyd at paisite.com  Thu Jul  7 14:03:31 2005
From: lloyd at paisite.com (lloyd@paisite.com)
Date: Thu Jul  7 14:06:44 2005
Subject: [Twisted-web] Turkey Questions 1-5
Message-ID: <2130.129.44.180.6.1120766611.squirrel@www.wbsysnet.com>

Hello,

I've changed the thread from "Re: Introduction, newbie confusion plus an
offer" to "Turkey Questions 1-5" to start the Q&A.

Goal: Create the world's simplest web-server

My first set of questions are based on "Configuring and Using the
Twisted.Web Server in "Twisted.Web Documentation."

Inspired by the section "Installing a pre-configured server," I did the
following:

-- created the directory ~/twisted/www
-- created the file ~/twisted/www/myHTML.html

<html>
<head>
<title>flat html file</title>
</head>
<body>
<h1>Hello, World!</h1>
</body>
</html>

-- entered "mktap web --path ~/twisted/www --logfile ~/twisted/www --port
8080" into the command line
-- entered "twistd -f web.tap" into command line

Results:

-- System wrote the file "web.tap" into ~$, my home directory
-- System wrote twistd.log into ~/twisted/www
-- When I entered "http://localhost:8080/myHTML.html, my browser displayed
"Hello, World!"

OK, success.

Questions:

1) Why did mktap write web.tap to my home directory rather than
~/twisted/www?

2) Why didn't myHTML.html require a "Content-type: text/html" line?

3) How can I see the source for the server created by mktap?

4) Are there preferred practices for creating directories for the document
root (for instance, better in user or root), directories for resource
modules, site data, css styling, etc.?

5) Are there preferred practices for assigning permissions to files in the
above directories?

Best wishes,

Lloyd









From matt at pollenation.net  Thu Jul  7 16:43:28 2005
From: matt at pollenation.net (Matt Goodall)
Date: Thu Jul  7 16:43:37 2005
Subject: [Twisted-web] Introduction, newbie confusion plus an offer
In-Reply-To: <3d87b12b05070616052be29876@mail.gmail.com>
References: <1978.129.44.180.6.1120674823.squirrel@www.wbsysnet.com>	<1120675815.9458.19.camel@207-118-73-152.dyn.centurytel.net>
	<3d87b12b05070616052be29876@mail.gmail.com>
Message-ID: <42CDB010.6040004@pollenation.net>

Kieran Holland wrote:

>Partly in an effort to clear up my own confusion, I have just been
>putting together some documentation on Stan, Nevow's document object
>model.  This is my first draft and I am fairly new to Nevow so don't
>take it as gospel:
>
>http://dictator.kieranholland.com/prose/Meet%20Stan.html
>
>I would greatly value feedback from more experienced Nevow users.
>  
>
Wow, that's great! Thankyou.

The writing style is great - it's very easy to read. There's a
surprising amount of detail in there but it doesn't feel that way.

I have a couple of specific comments ...

"Wherever this is the case, the Stan attribute name should be prefixed
or postfixed with an underscore."

It's probably best to forget about the prefixed version, it's something
we're trying to discourage anyway.

"Pretty-printing flattened Stan"

It's worth mentioning that introducing arbitrary whitespace into XHTML
content can affect how the browser renders the page so it should always
be double-checked for correctness.

"Built in renderers of the Page class"

The description of render_string should mention that it is really a
debugging aid (perhaps it should be renamed?) and should never to be
used to render real, human strings. render_string will break badly as
soon as it meets a unicode character that cannot be encoded to ascii.

render_sequence should mention that the "item" pattern is required.

Once again, thanks for writing this.

Cheers, Matt

>Kieran
>
>On 07/07/05, Ed Suominen <general@eepatents.com> wrote:
>  
>
>>Lloyd, as a fairly experienced Nevow user who has gone through the same
>>frustrations, I'll gladly help to the extent what you're writing about
>>applies to Nevow. I understand that Twisted.web2 is more like Nevow than
>>Twisted.web, so that may make sense. (Actually, you may want to use
>>Nevow -- check it out at http://nevow.org/.)
>>
>>Contact me directly if interested. Also, don't forget the #twisted.web
>>channel on the Freenode IRC server, which is an excellent real-time
>>resource that has helped me a great deal with questions.
>>
>>Best regards,
>>Ed Suominen
>>
>>On Wed, 2005-07-06 at 14:33 -0400, lloyd@paisite.com wrote:
>>    
>>
>>>Hello,
>>>
>>>I'm Lloyd, I'm baffled, and I'd like to offer my modest talents to help
>>>others like me come up to speed with Twisted.web in record time.
>>>
>>>I've been looking for a way to bring a large ColdFusion application over
>>>to Python. Twisted.web looks to offer all that I could wish for and more.
>>>The work to date is awe-inspiring. But... the documentation,
>>>well-intentioned as it is, and much more ample than in many Open Source
>>>projects, truly baffles me.
>>>
>>>I'm first to admit my limitations: I'm still in the early learning stages
>>>of Python; I understand OO conceptually, but have little experience
>>>writing or reading OO code; and, approaching the golden years, undoubtably
>>>have far fewer functioning neurons than most of the subscribers to this
>>>list, much less the brilliant young turks who have created the Twisted
>>>framework.
>>>
>>>But, browsing through the archives, it's clear that I am not alone in my
>>>confusion.
>>>
>>>So, I'd like to make a proposal:
>>>
>>>I have many years of writing and editing experience. Back in the days when
>>>personal computers were still connected to audio cassette recorders, and I
>>>was as excited but unenlightened about PCs as I am now about Twisted, I
>>>contributed three well-received articles to Personal Computing magazine
>>>under the name Techo Turkey. These helped readers hook up IBM Selectric
>>>Terminals to their new PCs, create a computer-controlled haunted house for
>>>Halloween, and set up a computer-controlled home security system.
>>>
>>>I would like now to offer to write some supplementary documentation for
>>>Twisted.web aimed at turkeys like me -- the really really basic stuff plus
>>>sure-to-work examples that can bring even Mickey-the-Dunce to sufficient
>>>level of understanding that he can participate creatively in the Twisted
>>>community.
>>>
>>>The catch: I need knowledgeable folks willing to answer my many many
>>>stupid questions like, once you've installed Twisted from, say, Debian,
>>>where should what files go and how should permissions be defined?
>>>Undoubtably these generous mentors would also need to critique my newbie
>>>code and perhaps, even, submit examples of their own. Who know, maybe we
>>>could even get a book out of it.
>>>
>>>Any takers?
>>>
>>>Best wishes,
>>>
>>>Lloyd
>>>      
>>>
>>_______________________________________________
>>Twisted-web mailing list
>>Twisted-web@twistedmatrix.com
>>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>>
>>    
>>
>
>_______________________________________________
>Twisted-web mailing list
>Twisted-web@twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>  
>


-- 
     __
    /  \__     Matt Goodall, Pollenation Internet Ltd
    \__/  \    w: http://www.pollenation.net
  __/  \__/    e: matt@pollenation.net
 /  \__/  \    t: +44 (0)113 2252500
 \__/  \__/
 /  \	       Any views expressed are my own and do not necessarily
 \__/          reflect the views of my employer.


From matt at pollenation.net  Thu Jul  7 17:47:35 2005
From: matt at pollenation.net (Matt Goodall)
Date: Thu Jul  7 17:47:42 2005
Subject: [Twisted-web] how are solving the calls to the children in nevow?
In-Reply-To: <42CD290C.3000503@ucd.ie>
References: <42CD290C.3000503@ucd.ie>
Message-ID: <42CDBF17.3020208@pollenation.net>

Alberto Trujillo wrote:

> Hello:
> I have been following this example
> "http://nevowexamples.adytum.us/childrenhtml/"to know how works the
> calls to the children with nevow, but still it's not enough clear for me.
>
> I even add a new child in the childFactory and some print command to
> follow the way of the calls. Here I show you my modifications:
>
>    def childFactory(self, ctx, name):
>        print "NAME = " + name
>        if name in ['1', '2', '3']:
>            return ChildPage(name)
>        elif name == 'one':
>            return OneRoot()
>
>    def locateChild(self, ctx, segments):
>        child, remainingSegments = rend.Page.locateChild(self, ctx,
> segments)
>        print "CHILD = " + str(child) + " SEGMENT = " +
> str(remainingSegments)
>        if child:
>            print "IN THE IF"
>            return child, remainingSegments
>
>        return ChildPage('/'.join(segments)), []
>
> My question is why each time that I call to "one" it goes inside
> "locateChild" wheter "one" is place in "childFactory", here is a trace
> of my server.

Only locateChild(self, context, segments) is part of the IResource API.
All the child_ and childFactory support is provided by the
rend.ChildLookupMixin class that rend.Page subclasses.

What's happening in the above code is that you have an overridden
locateChild method that calls rend.Page.locateChild.
rend.Page.locateChild does the child_ and childFactory magic and calls
your childFactory method. Your childFactory prints the NAME and returns
the child resource back to your locateChild method which then also
prints it out as CHILD.

>
> 2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] NAME = one
> 2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] CHILD = <one.OneRoot
> object at 0x40701eac> SEGMENT = ()
> 2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] IN THE IF
> 2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] 127.0.0.1 - -
> [07/Jul/2005:12:52:11 +0000] "GET /one?id=1 HTTP/1.1" 200 47
> "http://localhost:8080/" "Mozilla/5.0 (X11; U; Linux i686; en-US;
> rv:1.7.8) Gecko/20050517 Firefox/1.0.4 (Debian package 1.0.4-2)"
> 2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] NAME = favicon.ico
> 2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] CHILD = None SEGMENT = ()
> 2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] 127.0.0.1 - -
> [07/Jul/2005:12:52:11 +0000] "GET /favicon.ico HTTP/1.1" 200 684 "-"
> "Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.8) Gecko/20050517
> Firefox/1.0.4 (Debian package 1.0.4-2)
>
> And when I return to the father, who call to childrenRoot class again,
> and what is favicon.ico?. I show you the results here.
>
> 2005/07/07 13:58 IST [HTTPChannel,1,127.0.0.1] NAME = favicon.ico
> 2005/07/07 13:58 IST [HTTPChannel,1,127.0.0.1] CHILD = None SEGMENT = ()
> 2005/07/07 13:58 IST [HTTPChannel,1,127.0.0.1] 127.0.0.1 - -
> [07/Jul/2005:12:58:34 +0000] "GET /favicon.ico HTTP/1.1" 200 684 "-"
> "Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.8) Gecko/20050517
> Firefox/1.0.4 (Debian package 1.0.4-2)"

favicon.ico is something the browsers request. It's the annoying little
icon browsers add to tabs and bookmarks. I hate it. See
<http://en.wikipedia.org/wiki/Favicon>.

>
> I would like to know as well if I must to implement all these methods
> each time that I'm working with children, and what is segments.

segments is simply a tuple of the remaining URI path segments.

A URL of http://localhost/foo/bar has segments ('foo', 'bar'). Nevow
tries to turn those segments into child resources until there are no
more segments left. A typical sequence of events for that URL might be:

1. Nevow asks the root resource to turn 'foo' into a resource. The root
resource returns a foo resource.
2. Nevow asks the foo resource to turn 'bar' into a resource. The foo
resource returns a bar resource.
3. Nevow seems that there are all segments have been used and asks the
bar resource to render itself.

However, as you will see below the root resource could consume both
'foo' and 'bar' and return a bar resource directly.


How you choose to traverse the URI depends on what you know and need to
do ...

If you know the name of a child resource at development time and the
child resource never changes then use a child_ class attribute:

    class Page(rend.Page):
        child_css = static.File('/path/to/css')

If you know the name of a child but you need to create it in a special
way use a child_ method:

    class Page(rend.Page):
        def child_time(self, ctx):
            return TimePage(time.now())

If you don't know the name of the resource, i.e. it's a database id or
something similar, then use childFactory:

    class Page(rend.Page):
        def childFactory(self, ctx, name):
            obj = db.getObj(int(name))
            return ChildPage(obj)

Finally, if you want absolute control, i.e. to consume two URI segments
in one go, then override locateChild:

    class Page(rend.Page):
       def locateChild(self, ctx, segments):
          if segments[:2] == ('foo', 'bar'):
             return BarPage(), segments[2:]
          return rend.Page(self, ctx, segments)

Note how that example compares the first 2 segments and consumes both
'foo' and 'bar' by returning a new BarPage child and the remaining
segments - segments[2:]. Only locateChild is able to process more than
one segment at a time.

Personally, I nearly always use child_ and childFactory. I only using
locateChild for more comlpex URL traversal problems.

>
> Sorry I know that are a lot of question, but I don't have access to
> the IRC channel and I couldn't understand the information in
> "inevow.IReource". 

Hope this explains it well enough now.

Cheers, Matt

-- 
     __
    /  \__     Matt Goodall, Pollenation Internet Ltd
    \__/  \    w: http://www.pollenation.net
  __/  \__/    e: matt@pollenation.net
 /  \__/  \    t: +44 (0)113 2252500
 \__/  \__/
 /  \	       Any views expressed are my own and do not necessarily
 \__/          reflect the views of my employer.


From matt at pollenation.net  Thu Jul  7 18:32:29 2005
From: matt at pollenation.net (Matt Goodall)
Date: Thu Jul  7 18:32:37 2005
Subject: [Twisted-web] Turkey Questions 1-5
In-Reply-To: <2130.129.44.180.6.1120766611.squirrel@www.wbsysnet.com>
References: <2130.129.44.180.6.1120766611.squirrel@www.wbsysnet.com>
Message-ID: <42CDC99D.1090200@pollenation.net>

lloyd@paisite.com wrote:

>Hello,
>
>I've changed the thread from "Re: Introduction, newbie confusion plus an
>offer" to "Turkey Questions 1-5" to start the Q&A.
>
>Goal: Create the world's simplest web-server
>
>My first set of questions are based on "Configuring and Using the
>Twisted.Web Server in "Twisted.Web Documentation."
>
>Inspired by the section "Installing a pre-configured server," I did the
>following:
>
>-- created the directory ~/twisted/www
>-- created the file ~/twisted/www/myHTML.html
>
><html>
><head>
><title>flat html file</title>
></head>
><body>
><h1>Hello, World!</h1>
></body>
></html>
>
>-- entered "mktap web --path ~/twisted/www --logfile ~/twisted/www --port
>8080" into the command line
>-- entered "twistd -f web.tap" into command line
>
>Results:
>
>-- System wrote the file "web.tap" into ~$, my home directory
>-- System wrote twistd.log into ~/twisted/www
>-- When I entered "http://localhost:8080/myHTML.html, my browser displayed
>"Hello, World!"
>
>OK, success.
>
>Questions:
>
>1) Why did mktap write web.tap to my home directory rather than
>~/twisted/www?
>  
>
Presumably because you ran mktap from your home directory. The --path is
the path to the root of the web server. The .tak file is written to the
current directory.

>2) Why didn't myHTML.html require a "Content-type: text/html" line?
>  
>
The web.tap you created actually uses a twisted.web.static.File instance
to serve the files from the --path directory. static.File guesses the
MIME type and sends the Content-Type response header to the browser.

>3) How can I see the source for the server created by mktap?
>  
>
Good question and, to be honest, I rarely use mktap. I find it useful
for quickly creating a web server for static content but most of the
stuff I use is highly dynamic.

Here's an equivalent .tac file that serves static content:

    from twisted.application import internet, service
    from twisted.web import server, static

    WWWROOT = '/home/matt/www/docs'
    LOGPATH = '/home/matt/www/logs/access.log'
    PORT = 8080

    application = service.Application('web-server')
    site = server.Site(static.File(WWWROOT), logPath=LOGPATH)
    internet.TCPServer(PORT, site).setServiceParent(application)


That sort of thing can be easily modified into something that creates a
dynamic root resource.

>4) Are there preferred practices for creating directories for the document
>root (for instance, better in user or root), directories for resource
>modules, site data, css styling, etc.?
>  
>
I never use .rpy resources so all my Python is in packages and modules.
I tend to have templates, css, js and images in a directory somewhere
and a .tac to start the services.

Site data is either in a database or in another directory, away from the
templates etc.

>5) Are there preferred practices for assigning permissions to files in the
>above directories?
>  
>
Well, I think the most important thing is to avoid making *any* code or
data directly accessible from the web. That's fairly easy to do if you
don't use .rpy files and make sure that any directories served by
static.File resources don't contain any files with sensitive content.
XHTML templates should not be directly accessible over the web either.

Hope some of that is useful.

- Matt

-- 
     __
    /  \__     Matt Goodall, Pollenation Internet Ltd
    \__/  \    w: http://www.pollenation.net
  __/  \__/    e: matt@pollenation.net
 /  \__/  \    t: +44 (0)113 2252500
 \__/  \__/
 /  \	       Any views expressed are my own and do not necessarily
 \__/          reflect the views of my employer.


From exarkun at divmod.com  Thu Jul  7 19:00:54 2005
From: exarkun at divmod.com (Jp Calderone)
Date: Thu Jul  7 19:00:58 2005
Subject: [Twisted-web] Turkey Questions 1-5
In-Reply-To: <2130.129.44.180.6.1120766611.squirrel@www.wbsysnet.com>
Message-ID: <20050708010054.26278.1104567316.divmod.quotient.7401@ohm>

On Thu, 7 Jul 2005 16:03:31 -0400 (EDT), lloyd@paisite.com wrote:
>Hello,
>
>I've changed the thread from "Re: Introduction, newbie confusion plus an
>offer" to "Turkey Questions 1-5" to start the Q&A.
>
>Goal: Create the world's simplest web-server
>
>My first set of questions are based on "Configuring and Using the
>Twisted.Web Server in "Twisted.Web Documentation."
>
> [snip]
>
>Questions:
>
>1) Why did mktap write web.tap to my home directory rather than
>~/twisted/www?

You didn't specify a path to a tap file to write, so it picked a reasonable-seeming default.  The surprisingly named --append option lets you specify the name of the tap to write (as well as letting you add a new application to an existing tap).  For example,

  mktap --append ~/twisted/www/web.tap web ...

> [snip]
>
>3) How can I see the source for the server created by mktap?
>

  TAP stands for Twisted Application Pickle.  Its contents are a Python pickle of a Twisted Application instance (twisted.application.service.Application) configured to do whatever you specified on the mktap command line.

  You can inspect it using pickle interactively:

    exarkun@boson:~$ python
    Python 2.4.1 (#2, Mar 30 2005, 21:51:10) 
    [GCC 3.3.5 (Debian 1:3.3.5-8ubuntu2)] on linux2
    Type "help", "copyright", "credits" or "license" for more information.
    >>> import pickle
    >>> app = pickle.load(file('web.tap', 'rb'))
    >>> print app
    <twisted.python.components.Componentized instance at 0xb7e05b8c>
    >>> from twisted.application import service
    >>> svc = service.IService(app)
    >>> print svc
    <twisted.application.service.MultiService instance at 0xb7e11d0c>
    >>> list(svc)
    [<twisted.application.service.MultiService instance at 0xb7ae126c>]
    >>> list(svc)[0]
    <twisted.application.service.MultiService instance at 0xb7ae126c>
    >>> list(list(svc)[0])
    [<twisted.application.internet.TCPServer instance at 0xb7a54d8c>]
    >>> list(list(svc)[0])[0].args
    (8080, <twisted.web.server.Site instance at 0xb7a5a66c>)
    >>> 
    [etc]

  There are some other formats mktap can write, but they are generally more fragile than pickle.  If you want to explore, try the `--type' argument to mktap (eg, mktap --type source web).

The key here is that mktap outputs configuration, not code.  Of course, if you asked "How can I view the configuration for the server generated by mktap?" I wouldn't have a better answer for you ;)

Jp

From kieran.holland at gmail.com  Thu Jul  7 19:05:46 2005
From: kieran.holland at gmail.com (Kieran Holland)
Date: Thu Jul  7 19:06:21 2005
Subject: [Twisted-web] how are solving the calls to the children in nevow?
In-Reply-To: <42CDBF17.3020208@pollenation.net>
References: <42CD290C.3000503@ucd.ie> <42CDBF17.3020208@pollenation.net>
Message-ID: <3d87b12b05070718055ff82606@mail.gmail.com>

> Only locateChild(self, context, segments) is part of the IResource API.
> All the child_ and childFactory support is provided by the
> rend.ChildLookupMixin class that rend.Page subclasses.
> 
> What's happening in the above code is that you have an overridden
> locateChild method that calls rend.Page.locateChild.
> rend.Page.locateChild does the child_ and childFactory magic and calls
> your childFactory method. Your childFactory prints the NAME and returns
> the child resource back to your locateChild method which then also
> prints it out as CHILD.
> 
> >
> > 2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] NAME = one
> > 2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] CHILD = <one.OneRoot
> > object at 0x40701eac> SEGMENT = ()
> > 2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] IN THE IF
> > 2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] 127.0.0.1 - -
> > [07/Jul/2005:12:52:11 +0000] "GET /one?id=1 HTTP/1.1" 200 47
> > "http://localhost:8080/" "Mozilla/5.0 (X11; U; Linux i686; en-US;
> > rv:1.7.8) Gecko/20050517 Firefox/1.0.4 (Debian package 1.0.4-2)"
> > 2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] NAME = favicon.ico
> > 2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] CHILD = None SEGMENT = ()
> > 2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] 127.0.0.1 - -
> > [07/Jul/2005:12:52:11 +0000] "GET /favicon.ico HTTP/1.1" 200 684 "-"
> > "Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.8) Gecko/20050517
> > Firefox/1.0.4 (Debian package 1.0.4-2)
> >
> > And when I return to the father, who call to childrenRoot class again,
> > and what is favicon.ico?. I show you the results here.
> >
> > 2005/07/07 13:58 IST [HTTPChannel,1,127.0.0.1] NAME = favicon.ico
> > 2005/07/07 13:58 IST [HTTPChannel,1,127.0.0.1] CHILD = None SEGMENT = ()
> > 2005/07/07 13:58 IST [HTTPChannel,1,127.0.0.1] 127.0.0.1 - -
> > [07/Jul/2005:12:58:34 +0000] "GET /favicon.ico HTTP/1.1" 200 684 "-"
> > "Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.8) Gecko/20050517
> > Firefox/1.0.4 (Debian package 1.0.4-2)"
> 
> favicon.ico is something the browsers request. It's the annoying little
> icon browsers add to tabs and bookmarks. I hate it. See
> <http://en.wikipedia.org/wiki/Favicon>.
> 
> >
> > I would like to know as well if I must to implement all these methods
> > each time that I'm working with children, and what is segments.
> 
> segments is simply a tuple of the remaining URI path segments.
> 
> A URL of http://localhost/foo/bar has segments ('foo', 'bar'). Nevow
> tries to turn those segments into child resources until there are no
> more segments left. A typical sequence of events for that URL might be:
> 
> 1. Nevow asks the root resource to turn 'foo' into a resource. The root
> resource returns a foo resource.
> 2. Nevow asks the foo resource to turn 'bar' into a resource. The foo
> resource returns a bar resource.
> 3. Nevow seems that there are all segments have been used and asks the
> bar resource to render itself.
> 
> However, as you will see below the root resource could consume both
> 'foo' and 'bar' and return a bar resource directly.
> 
> 
> How you choose to traverse the URI depends on what you know and need to
> do ...
> 
> If you know the name of a child resource at development time and the
> child resource never changes then use a child_ class attribute:
> 
>     class Page(rend.Page):
>         child_css = static.File('/path/to/css')
> 
> If you know the name of a child but you need to create it in a special
> way use a child_ method:
> 
>     class Page(rend.Page):
>         def child_time(self, ctx):
>             return TimePage(time.now())
> 
> If you don't know the name of the resource, i.e. it's a database id or
> something similar, then use childFactory:
> 
>     class Page(rend.Page):
>         def childFactory(self, ctx, name):
>             obj = db.getObj(int(name))
>             return ChildPage(obj)
> 
> Finally, if you want absolute control, i.e. to consume two URI segments
> in one go, then override locateChild:
> 
>     class Page(rend.Page):
>        def locateChild(self, ctx, segments):
>           if segments[:2] == ('foo', 'bar'):
>              return BarPage(), segments[2:]
>           return rend.Page(self, ctx, segments)
> 
> Note how that example compares the first 2 segments and consumes both
> 'foo' and 'bar' by returning a new BarPage child and the remaining
> segments - segments[2:]. Only locateChild is able to process more than
> one segment at a time.
> 
> Personally, I nearly always use child_ and childFactory. I only using
> locateChild for more comlpex URL traversal problems.
> 
> >
> > Sorry I know that are a lot of question, but I don't have access to
> > the IRC channel and I couldn't understand the information in
> > "inevow.IReource".
> 
> Hope this explains it well enough now.
> 
> Cheers, Matt

Nice case point demonstrating what I was getting at in the appendix of
my introduction to Stan.  Had that been said in IRC (as I am sure it
has been, many times) then it would be lost and gone forever - here it
is Googlable and provides most of what one would need to write a good
overview of URL traversal ;)

It lead me to wonder further about IRC.  Imagine if python development
was discussed in #python.dev...actually, don't, it hurts.  So what are
the appeals of IRC?

It is instantaneous.  Yes, but often the time saving is an illusion. 
The same problems occur over and over again, even for the same person,
who forgot the answer they got last time...

It can be exclusive.  But the twisted.web developers don't seem like
an exclusive bunch - quite the opposite, on the whole.

It is social.  It is true that IRC feels more like a conversation, and
sarcasm is a little more apparent, but on the other hand you tend to
miss out on the more considered quips... I certainly don't think that
a mailing list precludes development from being a social activity.

It is forgotten.  You can say what you like and it will tend not to
haunt you down the line.  Well, this is a plus for those, such as
myself, prone to putting their foot in their mouth ;)

Pastebins may be Cool, but isn't it actually easier to just "paste"
into an email?  Valuable code fragments should not be consigned to a
bin!

It seems to me that IRC is fine for a developer-only piece of
software, where everyone who uses it hangs out there, but it becomes
counter-productive if you want to extend the user base.  Isn't that
what we all want for Nevow?

I would be interested to hear other people's thoughts on this.

Kieran

From dp at ulaluma.com  Thu Jul  7 20:27:42 2005
From: dp at ulaluma.com (Donovan Preston)
Date: Thu Jul  7 20:27:49 2005
Subject: [Twisted-web] how are solving the calls to the children in nevow?
In-Reply-To: <42CD290C.3000503@ucd.ie>
References: <42CD290C.3000503@ucd.ie>
Message-ID: <A68EDB7D-D464-4C5B-9BFB-EB078EBC0BDC@ulaluma.com>


On Jul 7, 2005, at 6:07 AM, Alberto Trujillo wrote:

> Hello:
> I have been following this example "http://nevowexamples.adytum.us/ 
> childrenhtml/"to know how works the calls to the children with  
> nevow, but still it's not enough clear for me.
>
> I even add a new child in the childFactory and some print command  
> to follow the way of the calls. Here I show you my modifications:
>
>    def childFactory(self, ctx, name):
>        print "NAME = " + name
>        if name in ['1', '2', '3']:
>            return ChildPage(name)
>        elif name == 'one':
>            return OneRoot()
>
>    def locateChild(self, ctx, segments):
>        child, remainingSegments = rend.Page.locateChild(self, ctx,  
> segments)
>        print "CHILD = " + str(child) + " SEGMENT = " + str 
> (remainingSegments)
>        if child:
>            print "IN THE IF"
>            return child, remainingSegments
>
>        return ChildPage('/'.join(segments)), []
>
> My question is why each time that I call to "one" it goes inside  
> "locateChild" wheter "one" is place in "childFactory", here is a  
> trace of my server.

locateChild is the only external API defined by IResource.  
nevow.appserver.NevowSite will always call locateChild. The  
rend.Page.locateChild implementation calls childFactory.

In your example above, your locateChild is called, which calls  
rend.Page.locateChild, which calls your childFactory.

<snip>

> And when I return to the father, who call to childrenRoot class  
> again, and what is favicon.ico?. I show you the results here.

When you return a tuple from locateChild, nevow.appserver.NevowSite  
(which called locateChild) looks to see if the first element of the  
tuple is None. If it is, it renders a 404 page. If not, it looks to  
see if the length of the second element of the tuple (segments) is  
greater than zero. If there are segments left to be processed, it  
calls locateChild on the new child, passing the new segments, until  
all segments have been consumed.

Search the web for information about favicon.ico -- basically it was  
a non-standard addition made by Microsoft Internet Explorer which got  
adopted by Mozilla and FireFox later. Every time a web browser visits  
a web site, it requests the url "/favicon.ico". If the URL is a 404  
it doesn't do anything. If a valid .bmp file is returned, it is  
displayed in the location bar next to the url of the site. It is also  
displayed in the Favorites menu of Internet Explorer, but I don't  
think Mozilla does this.

(The display of this icon in the Favorites menu is why it is called  
favicon.ico, presumably)

> 2005/07/07 13:58 IST [HTTPChannel,1,127.0.0.1] NAME = favicon.ico
> 2005/07/07 13:58 IST [HTTPChannel,1,127.0.0.1] CHILD = None SEGMENT  
> = ()
> 2005/07/07 13:58 IST [HTTPChannel,1,127.0.0.1] 127.0.0.1 - - [07/ 
> Jul/2005:12:58:34 +0000] "GET /favicon.ico HTTP/1.1" 200 684 "-"  
> "Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.8) Gecko/20050517  
> Firefox/1.0.4 (Debian package 1.0.4-2)"
>
> I would like to know as well if I must to implement all these  
> methods each time that I'm working with children, and what is  
> segments.

You should rarely, if ever, have to implement locateChild. The  
nevow.rend.Page.locateChild implementation looks for child_* methods  
on the Page object and also calls childFactory if none was found. The  
only reason to implement locateChild is if you wish to consume no URL  
segments or more than one URL segment.

> Sorry I know that are a lot of question, but I don't have access to  
> the IRC channel and I couldn't understand the information in  
> "inevow.IReource".

There is obviously a need for more permanent communication. The IRC  
channel worked well while the community was small and while the ideas  
were still new and needed discussing. Now that more people are trying  
to learn Nevow, the mailing list, website, and documentation should  
be used more often, to provide a more permanent record of answers to  
common questions.

The docstrings really need work, too.

Donovan


From dp at ulaluma.com  Thu Jul  7 20:40:27 2005
From: dp at ulaluma.com (Donovan Preston)
Date: Thu Jul  7 20:40:34 2005
Subject: [Twisted-web] Nested templates?
In-Reply-To: <42CD56C2.3030801@ucd.ie>
References: <42CD56C2.3030801@ucd.ie>
Message-ID: <EE45C45F-6CEB-4AC4-BC69-FDC7BDBB1CF5@ulaluma.com>


On Jul 7, 2005, at 9:22 AM, Alberto Trujillo wrote:

> There is any way to use nested templates without mix the python  
> code with the html code.
> I know, that I could solve this problem using Stan, or just writing  
> html code inside the python file and after display what I want.
> But that are exactly the option that I can't use. I have to nest  
> the template keeping the html code and the python code in different  
> file.
> If some body can give a example, a tutorial, a address, o something  
> that can help me, I'll be very pleasant.
>
> Thank you very much

It's not very hard. There is a class in nevow.rend specifically for  
this purpose, nevow.rend.Fragment. It is one of Page's superclasses.  
It doesn't do much but load a docFactory and render it. Here is an  
example of using it.

Let me know if this isn't enough help.

Donovan

-------------- next part --------------
A non-text attachment was scrubbed...
Name: subtemplate.tac
Type: application/octet-stream
Size: 631 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-web/attachments/20050707/6ad44bac/subtemplate.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Main.xml
Type: text/xml
Size: 297 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-web/attachments/20050707/6ad44bac/Main.xml
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Sub.xml
Type: text/xml
Size: 117 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-web/attachments/20050707/6ad44bac/Sub.xml
From dp at ulaluma.com  Thu Jul  7 21:01:11 2005
From: dp at ulaluma.com (Donovan Preston)
Date: Thu Jul  7 21:01:18 2005
Subject: [Twisted-web] how are solving the calls to the children in nevow?
In-Reply-To: <3d87b12b05070718055ff82606@mail.gmail.com>
References: <42CD290C.3000503@ucd.ie> <42CDBF17.3020208@pollenation.net>
	<3d87b12b05070718055ff82606@mail.gmail.com>
Message-ID: <DF86421C-C6A5-43F1-B0EE-244BB2BABC3C@ulaluma.com>


On Jul 7, 2005, at 6:05 PM, Kieran Holland wrote:

> It is forgotten.  You can say what you like and it will tend not to
> haunt you down the line.  Well, this is a plus for those, such as
> myself, prone to putting their foot in their mouth ;)

I hate using a technical IRC channel without an IRC logbot. That  
said, I've been using #twisted and #twisted.web for the last 4 years  
now. *sigh*

Personally, I would prefer an IRC channel with a logbot, an NNTP  
server for longer, asynchronous discussion, and a web server which  
exposes it all to casual browsers (and google).

The thing that is most valuable about real-time communication in a  
medium like IRC is the iterative refinement of the topic matter. On a  
mailing list, it's too easy to misinterpret what someone was saying  
early on, and waste 20 minutes laboring under an incorrect  
assumption. On IRC, a misassumption is discovered and corrected  
earlier and conversations go through many more rounds of small  
iteration, much like Extreme Programming.

> Pastebins may be Cool, but isn't it actually easier to just "paste"
> into an email?  Valuable code fragments should not be consigned to a
> bin!

Pastebins should also be a part of the permanent record of a  
community. An implementation more like lisppaste would be very nice.  
The ability to have an addressable, color-coded page which  
encapsulates it's own mini-discussion about some code is more  
valuable than emailing back and forth minor edits to examples. One  
thing that is missing is discoverability of paste entries, and  
permanence. I'm willing to host a permanent pastebin on nevow.com,  
but I think we need to add some more discovery features, like  
searching, tagging, hierarchical comments... etc.

It occurs to me that a pastebin, containing iterative history of  
changes to a small example fragment, with a tagging capability like  
delicious or flickr could end up being a self-organizing example  
repository (somewhat like the Python Cookbook, but maybe better  
organized, and like a wiki because anyone can improve the "latest"  
version of the example?)

I certainly have no shortage of ideas for things like this. I really  
need to take a few months to seriously focus on developing tools like  
this for nevow.com.

> It seems to me that IRC is fine for a developer-only piece of
> software, where everyone who uses it hangs out there, but it becomes
> counter-productive if you want to extend the user base.  Isn't that
> what we all want for Nevow?

I agree. IRC is great for smaller communities but a wider range of  
tools is needed for the community to grow. The IRC channel and  
mailing list will have to do for now, but we'll have to use some  
better tools in the future.

> I would be interested to hear other people's thoughts on this.

Thanks.

Donovan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-web/attachments/20050707/a2d8618a/attachment.htm
From m.milvo at gmail.com  Fri Jul  8 00:32:23 2005
From: m.milvo at gmail.com (Michael M)
Date: Fri Jul  8 00:32:57 2005
Subject: [Twisted-web] Introduction, newbie confusion plus an offer
In-Reply-To: <3d87b12b05070616052be29876@mail.gmail.com>
References: <1978.129.44.180.6.1120674823.squirrel@www.wbsysnet.com>
	<1120675815.9458.19.camel@207-118-73-152.dyn.centurytel.net>
	<3d87b12b05070616052be29876@mail.gmail.com>
Message-ID: <3a767c390507072332485884b4@mail.gmail.com>

Great job, well written.

From alberto.trujillo at ucd.ie  Fri Jul  8 04:48:44 2005
From: alberto.trujillo at ucd.ie (Alberto Trujillo)
Date: Fri Jul  8 04:59:30 2005
Subject: [Twisted-web] how are solving the calls to the children in nevow?
In-Reply-To: <42CDBF17.3020208@pollenation.net>
References: <42CD290C.3000503@ucd.ie> <42CDBF17.3020208@pollenation.net>
Message-ID: <42CE5A0C.2020205@ucd.ie>

Thank you very much Matt for this brief tutorial or personal class. It 
helped me a lot.

Matt Goodall wrote:

>Alberto Trujillo wrote:
>
>  
>
>>Hello:
>>I have been following this example
>>"http://nevowexamples.adytum.us/childrenhtml/"to know how works the
>>calls to the children with nevow, but still it's not enough clear for me.
>>
>>I even add a new child in the childFactory and some print command to
>>follow the way of the calls. Here I show you my modifications:
>>
>>   def childFactory(self, ctx, name):
>>       print "NAME = " + name
>>       if name in ['1', '2', '3']:
>>           return ChildPage(name)
>>       elif name == 'one':
>>           return OneRoot()
>>
>>   def locateChild(self, ctx, segments):
>>       child, remainingSegments = rend.Page.locateChild(self, ctx,
>>segments)
>>       print "CHILD = " + str(child) + " SEGMENT = " +
>>str(remainingSegments)
>>       if child:
>>           print "IN THE IF"
>>           return child, remainingSegments
>>
>>       return ChildPage('/'.join(segments)), []
>>
>>My question is why each time that I call to "one" it goes inside
>>"locateChild" wheter "one" is place in "childFactory", here is a trace
>>of my server.
>>    
>>
>
>Only locateChild(self, context, segments) is part of the IResource API.
>All the child_ and childFactory support is provided by the
>rend.ChildLookupMixin class that rend.Page subclasses.
>
>What's happening in the above code is that you have an overridden
>locateChild method that calls rend.Page.locateChild.
>rend.Page.locateChild does the child_ and childFactory magic and calls
>your childFactory method. Your childFactory prints the NAME and returns
>the child resource back to your locateChild method which then also
>prints it out as CHILD.
>
>  
>
>>2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] NAME = one
>>2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] CHILD = <one.OneRoot
>>object at 0x40701eac> SEGMENT = ()
>>2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] IN THE IF
>>2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] 127.0.0.1 - -
>>[07/Jul/2005:12:52:11 +0000] "GET /one?id=1 HTTP/1.1" 200 47
>>"http://localhost:8080/" "Mozilla/5.0 (X11; U; Linux i686; en-US;
>>rv:1.7.8) Gecko/20050517 Firefox/1.0.4 (Debian package 1.0.4-2)"
>>2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] NAME = favicon.ico
>>2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] CHILD = None SEGMENT = ()
>>2005/07/07 13:52 IST [HTTPChannel,0,127.0.0.1] 127.0.0.1 - -
>>[07/Jul/2005:12:52:11 +0000] "GET /favicon.ico HTTP/1.1" 200 684 "-"
>>"Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.8) Gecko/20050517
>>Firefox/1.0.4 (Debian package 1.0.4-2)
>>
>>And when I return to the father, who call to childrenRoot class again,
>>and what is favicon.ico?. I show you the results here.
>>
>>2005/07/07 13:58 IST [HTTPChannel,1,127.0.0.1] NAME = favicon.ico
>>2005/07/07 13:58 IST [HTTPChannel,1,127.0.0.1] CHILD = None SEGMENT = ()
>>2005/07/07 13:58 IST [HTTPChannel,1,127.0.0.1] 127.0.0.1 - -
>>[07/Jul/2005:12:58:34 +0000] "GET /favicon.ico HTTP/1.1" 200 684 "-"
>>"Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.8) Gecko/20050517
>>Firefox/1.0.4 (Debian package 1.0.4-2)"
>>    
>>
>
>favicon.ico is something the browsers request. It's the annoying little
>icon browsers add to tabs and bookmarks. I hate it. See
><http://en.wikipedia.org/wiki/Favicon>.
>
>  
>
>>I would like to know as well if I must to implement all these methods
>>each time that I'm working with children, and what is segments.
>>    
>>
>
>segments is simply a tuple of the remaining URI path segments.
>
>A URL of http://localhost/foo/bar has segments ('foo', 'bar'). Nevow
>tries to turn those segments into child resources until there are no
>more segments left. A typical sequence of events for that URL might be:
>
>1. Nevow asks the root resource to turn 'foo' into a resource. The root
>resource returns a foo resource.
>2. Nevow asks the foo resource to turn 'bar' into a resource. The foo
>resource returns a bar resource.
>3. Nevow seems that there are all segments have been used and asks the
>bar resource to render itself.
>
>However, as you will see below the root resource could consume both
>'foo' and 'bar' and return a bar resource directly.
>
>
>How you choose to traverse the URI depends on what you know and need to
>do ...
>
>If you know the name of a child resource at development time and the
>child resource never changes then use a child_ class attribute:
>
>    class Page(rend.Page):
>        child_css = static.File('/path/to/css')
>
>If you know the name of a child but you need to create it in a special
>way use a child_ method:
>
>    class Page(rend.Page):
>        def child_time(self, ctx):
>            return TimePage(time.now())
>
>If you don't know the name of the resource, i.e. it's a database id or
>something similar, then use childFactory:
>
>    class Page(rend.Page):
>        def childFactory(self, ctx, name):
>            obj = db.getObj(int(name))
>            return ChildPage(obj)
>
>Finally, if you want absolute control, i.e. to consume two URI segments
>in one go, then override locateChild:
>
>    class Page(rend.Page):
>       def locateChild(self, ctx, segments):
>          if segments[:2] == ('foo', 'bar'):
>             return BarPage(), segments[2:]
>          return rend.Page(self, ctx, segments)
>
>Note how that example compares the first 2 segments and consumes both
>'foo' and 'bar' by returning a new BarPage child and the remaining
>segments - segments[2:]. Only locateChild is able to process more than
>one segment at a time.
>
>Personally, I nearly always use child_ and childFactory. I only using
>locateChild for more comlpex URL traversal problems.
>
>  
>
>>Sorry I know that are a lot of question, but I don't have access to
>>the IRC channel and I couldn't understand the information in
>>"inevow.IReource". 
>>    
>>
>
>Hope this explains it well enough now.
>
>Cheers, Matt
>
>  
>


From matt at pollenation.net  Fri Jul  8 08:26:43 2005
From: matt at pollenation.net (Matt Goodall)
Date: Fri Jul  8 08:26:48 2005
Subject: [Twisted-web] how are solving the calls to the children in nevow?
In-Reply-To: <3d87b12b05070718055ff82606@mail.gmail.com>
References: <42CD290C.3000503@ucd.ie> <42CDBF17.3020208@pollenation.net>
	<3d87b12b05070718055ff82606@mail.gmail.com>
Message-ID: <42CE8D23.6040107@pollenation.net>

Kieran Holland wrote:

[snip]

> Nice case point demonstrating what I was getting at in the appendix of
> my introduction to Stan.  Had that been said in IRC (as I am sure it
> has been, many times) then it would be lost and gone forever - here it
> is Googlable and provides most of what one would need to write a good
> overview of URL traversal ;)

I know, I know! You're comment in the stan doc shamed me into spending 
time to properly, and hopefully fully, answer the question. ;-)

> 
> It lead me to wonder further about IRC.  Imagine if python development
> was discussed in #python.dev...actually, don't, it hurts.  So what are
> the appeals of IRC?
> 
> It is instantaneous.  Yes, but often the time saving is an illusion. 
> The same problems occur over and over again, even for the same person,
> who forgot the answer they got last time...
> 
> It can be exclusive.  But the twisted.web developers don't seem like
> an exclusive bunch - quite the opposite, on the whole.
> 
> It is social.  It is true that IRC feels more like a conversation, and
> sarcasm is a little more apparent, but on the other hand you tend to
> miss out on the more considered quips... I certainly don't think that
> a mailing list precludes development from being a social activity.
> 
> It is forgotten.  You can say what you like and it will tend not to
> haunt you down the line.  Well, this is a plus for those, such as
> myself, prone to putting their foot in their mouth ;)
> 
> Pastebins may be Cool, but isn't it actually easier to just "paste"
> into an email?  Valuable code fragments should not be consigned to a
> bin!
> 
> It seems to me that IRC is fine for a developer-only piece of
> software, where everyone who uses it hangs out there, but it becomes
> counter-productive if you want to extend the user base.  Isn't that
> what we all want for Nevow?
> 
> I would be interested to hear other people's thoughts on this.

I basically agree.

IRC has the distinct advantage of being quicker and more interactive. I 
find email can take a lot longer to answer because I am much more 
careful about what I write. That means I don't always pay as much 
attention to the mailing list as I should.

Actually, I'm being a bit unfair on myself. I often read an email and 
deliberately leave it unread with the intention of answering it later, 
when I have more time. Currently, I have 52 unread messages in my 
Twisted folder so it's obviously not a strategy that works well.

What we really need is a Twisted app that intergrates all the services 
that a distributed development team would ever needs. Anyone fancy 
writing it over the weekend? ;-)

Cheers, Matt

-- 
      __
     /  \__     Matt Goodall, Pollenation Internet Ltd
     \__/  \    w: http://www.pollenation.net
   __/  \__/    e: matt@pollenation.net
  /  \__/  \    t: +44 (0)113 2252500
  \__/  \__/
  /  \          Any views expressed are my own and do not necessarily
  \__/          reflect the views of my employer.

From alberto.trujillo at ucd.ie  Fri Jul  8 10:24:10 2005
From: alberto.trujillo at ucd.ie (Alberto Trujillo)
Date: Fri Jul  8 10:35:45 2005
Subject: [Twisted-web] Nested templates?
In-Reply-To: <EE45C45F-6CEB-4AC4-BC69-FDC7BDBB1CF5@ulaluma.com>
References: <42CD56C2.3030801@ucd.ie>
	<EE45C45F-6CEB-4AC4-BC69-FDC7BDBB1CF5@ulaluma.com>
Message-ID: <42CEA8AA.1080701@ucd.ie>

Donovan Preston wrote:

>
> On Jul 7, 2005, at 9:22 AM, Alberto Trujillo wrote:
>
>> There is any way to use nested templates without mix the python  code 
>> with the html code.
>> I know, that I could solve this problem using Stan, or just writing  
>> html code inside the python file and after display what I want.
>> But that are exactly the option that I can't use. I have to nest  the 
>> template keeping the html code and the python code in different  file.
>> If some body can give a example, a tutorial, a address, o something  
>> that can help me, I'll be very pleasant.
>>
>> Thank you very much
>
>
> It's not very hard. There is a class in nevow.rend specifically for  
> this purpose, nevow.rend.Fragment. It is one of Page's superclasses.  
> It doesn't do much but load a docFactory and render it. Here is an  
> example of using it.
>
> Let me know if this isn't enough help.
>
> Donovan
>
>------------------------------------------------------------------------
>
><html xmlns:n="http://nevow.com/ns/nevow/0.1">
>    <head>
>        <title>This is a page.</title>
>    </head>
>    <body>
>        <h1>This is a page.</h1>
>        Here are some subtemplates:
>        <div n:data="one" n:render="sub" />
>        <div n:data="two" n:render="sub" />
>    </body>
></html>
>  
>
>------------------------------------------------------------------------
>
><div xmlns:n="http://nevow.com/ns/nevow/0.1">
>    This is a subtemplate. <n:invisible n:render="something" />
></div>
>  
>
>------------------------------------------------------------------------
>
>_______________________________________________
>Twisted-web mailing list
>Twisted-web@twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>  
>
Hey, thanks again one more time. It's very cool the example that you 
send me here. I was working with and is what I need.
Thanks as well to the rest of the people that has help me with these 
problems (even with the call of the child)

From lloyd at paisite.com  Fri Jul  8 14:33:51 2005
From: lloyd at paisite.com (lloyd@paisite.com)
Date: Fri Jul  8 14:37:07 2005
Subject: [Twisted-web] Turkey Questions 6-8
In-Reply-To: <42CDC99D.1090200@pollenation.net>
References: <2130.129.44.180.6.1120766611.squirrel@www.wbsysnet.com>
	<42CDC99D.1090200@pollenation.net>
Message-ID: <3059.129.44.180.6.1120854831.squirrel@www.wbsysnet.com>

Hi Matt,

Thanks for responding.

I've started a website to capture the sequence of experiments, questions,
and responses. Will have posted this weekend.


>>
> Presumably because you ran mktap from your home directory. The --path is
> the path to the root of the web server. The .tak file is written to the
> current directory.

Makes sense.

>
>>2) Why didn't myHTML.html require a "Content-type: text/html" line?
>>
>>
> The web.tap you created actually uses a twisted.web.static.File instance
> to serve the files from the --path directory. static.File guesses the
> MIME type and sends the Content-Type response header to the browser.

ok.

 I rarely use mktap. I find it useful
> for quickly creating a web server for static content but most of the
> stuff I use is highly dynamic.
>
> Here's an equivalent .tac file that serves static content:
>
>     from twisted.application import internet, service
>     from twisted.web import server, static
>
>     WWWROOT = '/home/matt/www/docs'
>     LOGPATH = '/home/matt/www/logs/access.log'
>     PORT = 8080
>
>     application = service.Application('web-server')
>     site = server.Site(static.File(WWWROOT), logPath=LOGPATH)
>     internet.TCPServer(PORT, site).setServiceParent(application)

I copied and saved this code to web.tac. Then tried to launch it with
twistd -ny web.tac.

System came back with response: Failed to load application: TCPServer has
no attribute 'setServerParent'

I looked at source for twisted.application.internet, which seems to import
new to synthesize TCPServer. Couldn't follow from there because I didn't
have time to track down new.

Question 6: Why did this code fail?
Question 7: Where is new?

>
> That sort of thing can be easily modified into something that creates a
> dynamic root resource.

This is the line I'd like to pursue next. I'll see how far I can go on my
own, then come back when stuck.

>>
> I never use .rpy resources so all my Python is in packages and modules.
> I tend to have templates, css, js and images in a directory somewhere
> and a .tac to start the services.

Question 8: What's wrong with .rpy resources?

>
> Site data is either in a database or in another directory, away from the
> templates etc.

ok

>>
> Well, I think the most important thing is to avoid making *any* code or
> data directly accessible from the web. That's fairly easy to do if you
> don't use .rpy files and make sure that any directories served by
> static.File resources don't contain any files with sensitive content.
> XHTML templates should not be directly accessible over the web either.

Got it.

Again, thanks for you help, Matt.

Best wishes,

Lloyd




From kieran.holland at gmail.com  Fri Jul  8 16:03:53 2005
From: kieran.holland at gmail.com (Kieran Holland)
Date: Fri Jul  8 16:04:25 2005
Subject: [Twisted-web] how are solving the calls to the children in nevow?
In-Reply-To: <42CE8D23.6040107@pollenation.net>
References: <42CD290C.3000503@ucd.ie> <42CDBF17.3020208@pollenation.net>
	<3d87b12b05070718055ff82606@mail.gmail.com>
	<42CE8D23.6040107@pollenation.net>
Message-ID: <3d87b12b05070815036ca3379c@mail.gmail.com>

> What we really need is a Twisted app that intergrates all the services
> that a distributed development team would ever needs. Anyone fancy
> writing it over the weekend? ;-)

I would...only I can't seem to find the documentation anywhere!

OK I'll let up now.

Kieran

From tomc74 at gmail.com  Sat Jul  9 07:29:39 2005
From: tomc74 at gmail.com (Tom Carmichael)
Date: Sat Jul  9 07:30:12 2005
Subject: [Twisted-web] Turkey Questions 6-8
In-Reply-To: <3059.129.44.180.6.1120854831.squirrel@www.wbsysnet.com>
References: <2130.129.44.180.6.1120766611.squirrel@www.wbsysnet.com>
	<42CDC99D.1090200@pollenation.net>
	<3059.129.44.180.6.1120854831.squirrel@www.wbsysnet.com>
Message-ID: <332b7c5f050709062925fb0e71@mail.gmail.com>

I think you have a typo.

> > internet.TCPServer(PORT, site).setServiceParent(application)
> 
> System came back with response: Failed to load application: TCPServer has
> no attribute 'setServerParent'
> 
> 

Tom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-web/attachments/20050709/5a7c482f/attachment.htm
From exarkun at divmod.com  Sat Jul  9 07:40:53 2005
From: exarkun at divmod.com (Jp Calderone)
Date: Sat Jul  9 07:40:54 2005
Subject: [Twisted-web] Turkey Questions 6-8
In-Reply-To: <3059.129.44.180.6.1120854831.squirrel@www.wbsysnet.com>
Message-ID: <20050709134053.26278.1924523756.divmod.quotient.8246@ohm>

On Fri, 8 Jul 2005 16:33:51 -0400 (EDT), lloyd@paisite.com wrote:
>Hi Matt,
>
>Thanks for responding.
>
>I've started a website to capture the sequence of experiments, questions,
>and responses. Will have posted this weekend.
>
> [snip]
>Question 7: Where is new?
>

It's a standard library module.

    foo = new.classobj('foo', (Bar, Baz), {'quux': foobar})

Is the same as:

    class foo(Bar, Baz):
        quux = foobar

The code in question is in bad need of a refactoring.

Jp

From mary-twisted at puzzling.org  Sun Jul 10 23:34:51 2005
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Sun Jul 10 23:34:36 2005
Subject: [Twisted-web] Reminder: Australian Twisted Sprint #2: 19th - 21st
	August 2005, Sydney
Message-ID: <20050711053451.GR9691@sourdust.home.puzzling.org>

Apologises for the duplicate post to those who read twisted-python as
well... this sprint welcomes web hackers as much as anyone :)

Still no final word on exactly where in Sydney this sprint will be held,
but it *will* be held and will be on these dates, so I'm posting again
to give people time to book flights before they get expensive.

I've made a grant application to Linux Australia to fund some of the
sprint, but this is not guarenteed to go through. Watch this thread for
details:
http://lists.linux.org.au/archives/linux-aus/2005-July/msg00216.html

We would very much appreciate people letting us know via the wiki if
they are definitely or maybe coming so that we have a good idea of
numbers when scouring for venues.

--- Announcement ---

Following the success of the Twisted sprint in Hobart in April, we're
having a second sprint.

Dates: Friday 19th - Sunday 21st August 2005

Location: Sydney (venue not yet known)

As with last time, there will be no attendence charge and sprinters will
be taking care of their own accommodation and transport. Once we have a
venue we'll have some suggestions.

We'll be working on code and documentation hopefully destined for the
Twisted Subversion repository. People not really familiar with Twisted
are welcome but will probably at least want to have the basics down by
the time of the sprint.

More details will be announced here, also see the wiki at
http://users.puzzling.org/users/mary/TwistedSprint/moin.cgi/FrontPage
People interested in coming should update
http://users.puzzling.org/users/mary/TwistedSprint/moin.cgi/SprintAttendees
and email me, so that we have an idea of numbers.

-Mary

From rasjidw at openminddev.net  Mon Jul 11 02:41:56 2005
From: rasjidw at openminddev.net (Rasjid Wilcox)
Date: Mon Jul 11 02:42:45 2005
Subject: [Twisted-web] Logging error messages
Message-ID: <200507111841.56919.rasjidw@openminddev.net>

Hi,

I have written an XMLRPC server with Twisted-Web (following 
http://twistedmatrix.com/projects/web/documentation/examples/xmlrpc.py).

I have used a python (2.3) logger to record what is happening, but I am 
unclear how to get errors that occur within the xmlrpc procedure calls to be 
logged to the logger.

I have had a look at twisted.web.xmlrpc, and I guess I could overwrite 
_ebRender, or I could do something perhaps with the twisted.python.log 
module.

I'm still very new to Twisted, and have no idea what is the 'right' way to 
proceed.

Any feedback would be appreciated.

Thanks,

Rasjid.

-- 
Rasjid Wilcox
Melbourne, Australia (UTC +10 hrs)

From lloyd at paisite.com  Mon Jul 11 11:05:49 2005
From: lloyd at paisite.com (lloyd@paisite.com)
Date: Mon Jul 11 11:09:16 2005
Subject: [Twisted-web] Techno Turkey's Twisted Adventure
In-Reply-To: <3059.129.44.180.6.1120854831.squirrel@www.wbsysnet.com>
References: <2130.129.44.180.6.1120766611.squirrel@www.wbsysnet.com>
	<42CDC99D.1090200@pollenation.net>
	<3059.129.44.180.6.1120854831.squirrel@www.wbsysnet.com>
Message-ID: <4799.151.199.16.253.1121101549.squirrel@www.wbsysnet.com>

Hi all,

As promised last week, I've posted a site for supplementary documentation
of Twisted -- e.g. documentation for people like me who really need their
hands held as they try to understand and use Twisted.

The URL: http://twisted.paisite.com

The goal is twofold:

1) To accelerate my own learning curve through Twisted and related tools
2) To give something back to the incredible community that has conceived
and implemented Twisted and related frameworks. Since I don't have much to
offer technically, the least I can do is to take on the role of
tech-challenged user, ask the many naive questions on issues that
experienced users may take for granted, and try to fill in the gaps in
documentation.

The approach will be a series of experiments, taken in small steps, each
designed to build knowledge and confidence. This approach is inspired
largely by the excellent "Twisted from Scratch, or the Evolution of
Finger" tutorials.

I'll do my best to dig out what I can from existing documentation and
other sources, but I can only succeed with your help. I hope my many
stupid questions don't come to annoy you; if so, please let me know.

Meanwhile, I welcome your input and criticism at any and all levels.

All the best,

Lloyd R. Prentice

P.S. It may take a day or two for the response e-mail address in the site
to come live.





From lloyd at paisite.com  Mon Jul 11 11:42:43 2005
From: lloyd at paisite.com (lloyd@paisite.com)
Date: Mon Jul 11 11:46:07 2005
Subject: [Twisted-web] Turkey Questions 6-8
In-Reply-To: <3059.129.44.180.6.1120854831.squirrel@www.wbsysnet.com>
References: <2130.129.44.180.6.1120766611.squirrel@www.wbsysnet.com>
	<42CDC99D.1090200@pollenation.net>
	<3059.129.44.180.6.1120854831.squirrel@www.wbsysnet.com>
Message-ID: <4832.151.199.16.253.1121103763.squirrel@www.wbsysnet.com>

Thanks very much, Tom and Matt,

Tom Carmichael wrote:

> I think you have a typo.
>
Took awhile for my aging eyes to see that I'd typed "setServerParent"
rather than "setServiceParent."

And thanks Matt Goodall for the code fragment. Got it working. Now need to
figure out how to build on it. It'll be the basis for the next Turkey
experiment.

Best,

Lloyd


From twisted-web at twistedmatrix.com  Mon Jul 11 12:57:20 2005
From: twisted-web at twistedmatrix.com (James Mayfield)
Date: Mon Jul 11 12:52:08 2005
Subject: [Twisted-web] livepage-notification branches
In-Reply-To: <4832.151.199.16.253.1121103763.squirrel@www.wbsysnet.com>
Message-ID: <20050711.ILC.21046100@workplace.escholaracademy.net>

Hello everybody.

I have been using the livepage-completion-notification-X branches of
nevow and came across an issue with Internet Explorer.  In the
liveglue.js there is a place where it tries to add some data to the
xmlhttp request object.  IE doesn't allow this.  My solution was to make
the createRequest() function return a new js object rather than the
xmlhttprequest itself.  It seems to be working, but I am not a js guru
by any stretch of the imagination so I have no idea if this is a good
way of going about solving the issue.  I'll paste my version here for
review.

##########

var liveevil_unload = false; var auto_open = true;

var base_url = this.location.toString()
var queryParamIndex = base_url.indexOf('?')
if (queryParamIndex != -1) {
    base_url = base_url.substring(0, queryParamIndex)
}
if (base_url.charAt(base_url.length-1) != '/')
  base_url += '/'


function createRequest() {
    if (window.XMLHttpRequest) {
        req = new XMLHttpRequest()
    } else {
        req = new ActiveXObject("Microsoft.XMLHTTP")
    }
    reqObj = new Object()
    reqObj.request = req
    return reqObj
}

var last_request = null
var last_server_message_time = null

function connect(outputNum) {
    var xmlhttp = createRequest()
    last_request = xmlhttp.request
    xmlhttp.request.onreadystatechange = function() {
        if (xmlhttp.request.readyState == 4) {
            if (xmlhttp.request.responseText) {
                        last_server_message_time = new Date()
                eval(xmlhttp.request.responseText)
                if (!liveevil_unload && auto_open) {
                    connect(outputNum + 1)
                }
            } else {
                last_request = null
            }
        }
    }
    xmlhttp.request.open("GET", base_url + "nevow_liveOutput?outputNum="
+ outputNum + "&client-handle-id=" + nevow_clientHandleId, true)
    xmlhttp.request.send(null)
}


var userAgent = navigator.userAgent.toLowerCase()
if (userAgent.indexOf("msie") != -1) {
    /* IE specific stuff */
    /* Abort last request so we don't 'leak' connections */
    window.attachEvent("onbeforeunload", function() { if (last_request !
= null) {last_request.abort();} } )
    /* Set unload flag */
    window.attachEvent("onbeforeunload", function() { liveevil_unload =
true; } )
} else if (document.implementation &&
document.implementation.createDocument) {
    /* Mozilla specific stuff (onbeforeunload is in v1.7+ only) */
    window.addEventListener("beforeunload", function() { liveevil_unload
= true; }, false)
}


if (auto_open) {
    connect(0)
}


var inputListeners = []
var listenerId = 0

function listener(callWhenAllDone) {
    this.listenerId = listenerId
    listenerId += 1
    this.events = []
    this.callWhenAllDone = callWhenAllDone
    this.fired = false
    this.inputDone = function(what) {
        var found = false
        for (var i in this.events) {
            if (this.events[i] == what) {
                this.events.splice(i, 1)
                found = true
                break
            }
        }
        if (this.events.length == 0) {
            if (this.fired) {
                alert("Tried to fire twice :(")
            } else {
                this.callWhenAllDone()
                this.fired = true
            }
        }
    }
}


function listenForInputEvents(callWhenAllDone) {
    var newListener = new listener(callWhenAllDone)
    inputListeners.push(newListener)
    return newListener
}


function stopListening(theListener) {
    for (var i in inputListeners) {
        if (inputListeners[i] == theListener) {
            inputListeners.splice(i, 1)
            break
        }
    }
    if (theListener.events.length == 0) {
        theListener.callWhenAllDone()
    }
}


function nevow_clientToServerEvent(theTarget, evalAfterDone) {
    if (theTarget != 'close' && liveevil_unload) {
        // Server had previously closed the output; let's open it again.
        if (auto_open) {
            liveevil_unload = false }
        connect(0)
    }
    var additionalArguments = ''
    for (i = 2; i<arguments.length; i++) {
        additionalArguments += '&arguments='
        additionalArguments += encodeURIComponent(arguments[i])
    }
    var input = createRequest()
    input.request.onreadystatechange = function() {
        if (input.request.readyState == 4) {
            eval(input.request.responseText)
            if (evalAfterDone) {
               eval(evalAfterDone)
            }
            for (var i in input.events) {
                input.events[i].inputDone(input.request)
            }
        }
    }
    input.events = []
    for (var i in inputListeners) {
        inputListeners[i].events.push(input.request)
        input.events.push(inputListeners[i])
    }
    input.request.open(
      "GET",
      base_url + "nevow_liveInput?handler-path=&handler-name=" +
      encodeURIComponent(theTarget) +
      '&client-handle-id=' +
      nevow_clientHandleId +
      additionalArguments)

    input.request.send(null)
}

function nevow_setNode(node, to) {
    document.getElementById(node).innerHTML = to;
}

function nevow_appendNode(node, what) {
    var oldnode = document.getElementById(node);
    var newspan = document.createElement('span');
    newspan.innerHTML = what;
    for (i=0; i<newspan.childNodes.length; i++) {
        oldnode.appendChild(newspan.childNodes[i]);
    }
}

function nevow_prependNode(node, what) {
  var oldnode = document.getElementById(node);
  var newspan = document.createElement('span');
  newspan.innerHTML = what;
  for (i=newspan.childNodes.length-1; i>=0; i--){
    if (oldnode.childNodes.length == 0)
      oldnode.appendChild(newspan.childNodes[i]);
    else
      oldnode.insertBefore(newspan.childNodes[i],
oldnode.childNodes[0]);
  }
}

function nevow_insertNode(node, before) {
    var oldnode = document.getElementById('before');
    var newspan = document.createElement('span');
    newspan.innerHTML = what;
    var previous = oldnode;
    for (i=0; i<newspan.childNodes.length; i++) {
        previous.parentNode.insertBefore(newspan.childNodes[i],
previous);
        previous = newspan.childNodes[i];
    }
}

function nevow_closeLive(evalAfterDone) {
    // Tell connect() not to complain at us when the server closes the
    // connection with no serverToClientEvent
    liveevil_unload = true
    var old_auto_open = auto_open
    auto_open = false
    // Tell the server we know we're done, send us an empty event
    // evalAfterDone will be evalled after the server sends us an empty
event
    nevow_clientToServerEvent('close', '', evalAfterDone)
    auto_open = old_auto_open
}


var server = {
    handle: function(handlerName) {
        var args = [handlerName, '']
        for (var i = 1; i < arguments.length; i++) {
            args.push(arguments[i])
        }
        nevow_clientToServerEvent.apply(this, args)
    }
}


From dp at ulaluma.com  Mon Jul 11 15:56:32 2005
From: dp at ulaluma.com (Donovan Preston)
Date: Mon Jul 11 15:56:43 2005
Subject: [Twisted-web] how are solving the calls to the children in nevow?
In-Reply-To: <42CE8D23.6040107@pollenation.net>
References: <42CD290C.3000503@ucd.ie> <42CDBF17.3020208@pollenation.net>
	<3d87b12b05070718055ff82606@mail.gmail.com>
	<42CE8D23.6040107@pollenation.net>
Message-ID: <0C84D7AB-40F3-4742-9CF5-D97424A06D82@ulaluma.com>


On Jul 8, 2005, at 7:26 AM, Matt Goodall wrote:

> What we really need is a Twisted app that intergrates all the  
> services that a distributed development team would ever needs.  
> Anyone fancy writing it over the weekend? ;-)

Yes.

Donovan

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-web/attachments/20050711/55d1fc76/attachment.htm
From wsanchez at wsanchez.net  Mon Jul 11 16:24:04 2005
From: wsanchez at wsanchez.net (=?ISO-8859-1?Q?Wilfredo_S=E1nchez_Vega?=)
Date: Mon Jul 11 16:24:13 2005
Subject: [Twisted-web] [PATCH] add content-type to error responses
Message-ID: <5021C253-5679-482B-9F73-124CCA27DF7B@wsanchez.net>

   Errors handled by error.defaultErrorHandler() do not set the  
content-type header.  This patch sets that header in the code that  
emits the HTML.

     -wsv


Index: error.py
===================================================================
--- error.py    (revision 14132)
+++ error.py    (working copy)
@@ -5,7 +5,7 @@
Default error output filter for twisted.web2.
"""
-from twisted.web2 import stream
+from twisted.web2 import stream, http_headers
from twisted.web2.responsecode import *
# 300 - Should include entity with choices
@@ -91,7 +91,10 @@
      body = ("<html><head><title>%d %s</title></head>"
              "<body><h1>%s</h1>%s</body></html>") % (
          response.code, title, title, message)
+
      response.stream = stream.MemoryStream(body)
+    response.headers.setHeader("content-type", http_headers.MimeType 
('text', 'html'))
+
      return response
defaultErrorHandler.handleErrors = True
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3057 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-web/attachments/20050711/29f7f89d/smime.bin
From wsanchez at wsanchez.net  Mon Jul 11 17:48:11 2005
From: wsanchez at wsanchez.net (=?ISO-8859-1?Q?Wilfredo_S=E1nchez_Vega?=)
Date: Mon Jul 11 17:48:17 2005
Subject: [Twisted-web] [PATCH] Make all file extentions case-insensitive.
Message-ID: <2428126D-8D8C-46E7-B256-E9485ADA5451@wsanchez.net>

   The current code in static.py has a special case for Windows in  
order to deal with possible confusion in matching file extensions on  
a case-insensitive filesystem.

   That's the wrong test; a correct test would be per-filesystem, not  
per-OS.  I assume it's possible to write a case-sensitive filesystem  
on Windows (dunno, really), and there exist both case-sensitive and  
case-insensitive filesystem on a few operating systems, most  
prominently Mac OS.  (eg. They exist on Linux as well, though not as  
widely used.)

   Anyway, so the test is wrong.  Unfortunately, a correct (and not  
complicated) test isn't really obvious to anyone.

   I propose we dodge the problem by making our handling of file  
extensions (not filenames) case-insensitive, which is pretty much  
what people expect anyway: foo.TXT is the same type of file as  
foo.txt, etc.

   We simply lowercase the extensions when they are registered and  
looked up.

   This patch also gets rid of our usage of InsensitiveDict(), which  
has its detractors.

     -wsv


Index: static.py
===================================================================
--- static.py   (revision 14132)
+++ static.py   (working copy)
@@ -14,8 +14,6 @@
# Twisted Imports
from twisted.python import filepath
-from twisted.python.util import InsensitiveDict
-from twisted.python.runtime import platformType
from zope.interface import implements
dangerousPathError = http.HTTPError(responsecode.NOT_FOUND) #"Invalid  
request URL."
@@ -140,7 +138,10 @@
          self.ignoredExts = list(ignoredExts)
          self.children = {}
          if processors is not None:
-            self.processors = processors
+            self.processors = dict([
+                (key.lower(), value)
+                for key, value in processors.items()
+            ])
          if indexNames is not None:
              self.indexNames = indexNames
@@ -189,12 +190,7 @@
          # Don't run processors on directories - if someone wants  
their own
          # customized directory rendering, subclass File instead.
          if fpath.isfile():
-            if platformType == "win32":
-                # don't want .RPY to be different than .rpy, since that
-                # would allow source disclosure.
-                processor = InsensitiveDict(self.processors).get 
(fpath.splitext()[1])
-            else:
-                processor = self.processors.get(fpath.splitext()[1])
+            processor = self.processors.get(fpath.splitext()[1].lower 
())
              if processor:
                  return (
                      processor(fpath.path),

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3057 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-web/attachments/20050711/05afc42c/smime.bin
From dp at ulaluma.com  Mon Jul 11 21:30:41 2005
From: dp at ulaluma.com (Donovan Preston)
Date: Mon Jul 11 21:30:47 2005
Subject: [Twisted-web] LivePage branch complete; merged to trunk
Message-ID: <8A93A40A-C25B-4C13-ADFC-B669E7551F51@ulaluma.com>

For everyone who has been following my livepage-completion- 
notification branches for the past few months, I have completed  
development and merged the branch back into trunk. People who were  
following the development on the branch should now switch back to a  
checkout of trunk.

I still have not yet implemented dispatching livepage events to  
fragments yet; I will do that work very soon in a new, shorter-lived  
branch. I expect to have fragment dispatching done and merged back  
into trunk by the middle of the week.

I am attempting to do a 0.5 release; a major feature of 0.5 is this  
new, more stable and reliable livepage api. Sorry if anyone has old  
livepage applications that relied on the old behavior; I hope the  
increased ease of use and reduced uncollectable garbage benefits are  
worth it.

Another major feature of the 0.5 release is the switchover to  
requiring zope.interface. Many of us have been using Nevow with  
zope.interface for over 6 months now; however during this period we  
have been living with the horrible, horrible deprecation warnings  
that spew annoying noise everywhere. I really don't want to see the  
normal tarball-installing unwashed masses to see these warnings. I  
have started cleaning these up in branches/dp/deprecation-cleanup but  
they are harder to clean than I had hoped.

In the long run, some decisions are going to have to be made about  
the API of formless. Specifically, I don't think TypedInterface can  
continue to operate the way it does, and the concept might have to be  
done away with entirely. Instead, I might like to focus more on  
IConfigurable as an interface, and clean it up so it is easier to  
use. Specifically, Page will implement IConfigurable directly, and  
the default getBindingNames and getBinding will look for bind_*  
methods to call on the Page instance. The return value of these  
should be simpler than what it is now. I also want to replace  
configurable_* with frag_* to go along with the way I want to  
dispatch livepage events to fragments, as I discussed above.

Donovan


From chris.were at gmail.com  Tue Jul 12 01:01:57 2005
From: chris.were at gmail.com (Chris (FeedTagger))
Date: Tue Jul 12 01:02:37 2005
Subject: [Twisted-web] LivePage branch complete; merged to trunk
In-Reply-To: <8A93A40A-C25B-4C13-ADFC-B669E7551F51@ulaluma.com>
References: <8A93A40A-C25B-4C13-ADFC-B669E7551F51@ulaluma.com>
Message-ID: <35bb4269050712000163da1738@mail.gmail.com>

On 7/12/05, Donovan Preston <dp@ulaluma.com> wrote:
> For everyone who has been following my livepage-completion-
> notification branches for the past few months, I have completed
> development and merged the branch back into trunk. People who were
> following the development on the branch should now switch back to a
> checkout of trunk.
That's great news! Excellent work Donovan.

> I still have not yet implemented dispatching livepage events to
> fragments yet; I will do that work very soon in a new, shorter-lived
> branch. I expect to have fragment dispatching done and merged back
> into trunk by the middle of the week.
As you've already outlined this, I'm really looking forward to playing
with your proposed dispatch methods.

As a nevow noob - thanks for your help & contribution :)

Regards,
Chris

From gwenael.remond at gmail.com  Tue Jul 12 02:02:09 2005
From: gwenael.remond at gmail.com (=?ISO-8859-1?Q?Gwena=EBl_R=E9mond?=)
Date: Tue Jul 12 02:02:44 2005
Subject: [Twisted-web] Doing pure XML with stan
In-Reply-To: <3a767c39050705225677696155@mail.gmail.com>
References: <3a767c39050705225677696155@mail.gmail.com>
Message-ID: <606cdf3b05071201022e822efe@mail.gmail.com>

> 1.) Can't see an easy way to specify that a tag is a single, i.e <bug/>

I don't use directly the prototype class as you do, but when I
customize my tag list in nevow.tags, it clearly allows any kind of
singleton, for example :

from nevow import loaders
import tags as T
doc = loaders.stan(T.toto)
from nevow.flat.ten import flatten
print flatten(doc)

# and the result is : 
# <toto />

I use nevow-0.4.1 and it is weird to notice that there is actually an
allowSingleton  variable in the nevow.flat.flatstan module, obviously
any kind of tag  is allowed, but it's good news...

2005/7/6, Michael M <m.milvo@gmail.com>:
> Hi all,
> 
> Firstly what I want to do is produce a well formatted xml document
> using stan. I worked out that adding the follow to the
> stan.py->Proto() class
> 
>     def __getattr__(self, name):
>         return Tag(name)
> 
> allows me to do
> 
> T = Proto()
> 
> T.hairy[
>     T.dog(lice='yes')[T.smells(status=True)]
> ]
> 
> In other words I can create arbitary tags with same ease as with the
> tags module. Two problems stand in my way of producing pure xml
> documents using stan.
> 
> 1.) Can't see an easy way to specify that a tag is a single, i.e <bug/>
> 
> 2.) Don't know where to look to see if I can code a solution to the
> xml presentation problem. If this isn't already solved, could somebody
> point in the direction of where I should look to solve this. I solved
> this problem with my own code by using a position variable to be
> incremented, decremented as tags are rendered. Tags then can simply
> call getSpace() and get some whitespace to pad themselves with. Any
> way of doing this with stan, if it hasn't already been done of course.
> 
> Example of what I want :)
> <prettyxml>
>     <morexml>
>         Looks nice and pretty.
>     </morexml>
> </prettyxml>
> 
> Thanks in advance
> 
> _______________________________________________
> Twisted-web mailing list
> Twisted-web@twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>

From dp at ulaluma.com  Tue Jul 12 02:38:20 2005
From: dp at ulaluma.com (Donovan Preston)
Date: Tue Jul 12 02:38:23 2005
Subject: [Twisted-web] Accessing request object from a SOAPPublisher soap_
	method
In-Reply-To: <42CD65BA.6010306@gsti3d.com>
References: <42CD65BA.6010306@gsti3d.com>
Message-ID: <B3007648-63A7-4D60-AC04-9639AF84460E@ulaluma.com>


On Jul 7, 2005, at 10:26 AM, Jonathan Blocksom wrote:

> Hi, I've got a SOAPPublisher class with some published methods and  
> I was hoping to access the HTTP request object from within.   
> Anybody know how to do this?

Unfortunately it doesn't look like it. If you look at the  
SOAPPublisher.render method, it looks up the callable and then calls  
it (indirecting through maybeDeferred). The only place the request is  
available is in the local namespace of render. So, you could:

1) override render, stuff the request somewhere (like self), then get  
it out in your method; you should only do this if threads are in no  
way involved. If there aren't any threads then it would be safe. Just  
be sure to get it out immediately and pass around what you got out  
(for example, don't return a deferred then look in self in a callback)

2) use some horrible callframe hack to extract the request from the  
caller's frame. This would have the advantage of being threadsafe,  
but you aren't using threads anyway -- right?

Itamar is the guy to talk to about SOAP and XMLRPC, but I guess he  
doesn't read this list. If you want to have a cleaner way of doing  
this in the future, you should probably talk to him about it, either  
on IRC or through email or something.

Donovan


From mithrandi-twisted-web at mithrandi.za.net  Tue Jul 12 03:59:40 2005
From: mithrandi-twisted-web at mithrandi.za.net (Tristan Seligmann)
Date: Tue Jul 12 03:59:48 2005
Subject: [Twisted-web] Nevow patches
Message-ID: <20050712095940.GB25935@quotemaster.co.za>

Hi,

Just two quick Nevow patches. The first changes livepage.js.__getitem__
to accept a list or a tuple, and handle an empty sequence. The second
should fix handling of URLs containing quoted slashes.
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar
-------------- next part --------------
Index: nevow/test/test_livepage.py
===================================================================
--- nevow/test/test_livepage.py	(revision 1620)
+++ nevow/test/test_livepage.py	(working copy)
@@ -172,6 +172,10 @@
         self.assertEquals(self.livepage.sent, "array[5]")
         self.livepage.sendScript(livepage.js[1,2,3])
         self.assertEquals(self.livepage.sent, "[1,2,3]")
+        self.livepage.sendScript(livepage.js[()])
+        self.assertEquals(self.livepage.sent, "[]")
+        self.livepage.sendScript(livepage.js[[1,2,3]])
+        self.assertEquals(self.livepage.sent, "[1,2,3]")
 
     def test_setAndAppend(self):
         for apiName in ['set', 'append']:
Index: nevow/livepage.py
===================================================================
--- nevow/livepage.py	(revision 1620)
+++ nevow/livepage.py	(working copy)
@@ -176,11 +176,12 @@
         return self.__class__(newchildren)
 
     def __getitem__(self, args):
-        if not isinstance(args, tuple):
+        if not isinstance(args, (tuple, list)):
             args = (args,)
         newchildren = self._children[:]
         stuff = [(x, stan.raw(',')) for x in args]
-        stuff[-1] = stuff[-1][0]
+        if stuff:
+            stuff[-1] = stuff[-1][0]
         newchildren.extend([stan.raw("["), stuff, stan.raw("]")])
         return self.__class__(newchildren)
 
-------------- next part --------------
Index: nevow/url.py
===================================================================
--- nevow/url.py	(revision 1442)
+++ nevow/url.py	(working copy)
@@ -68,7 +68,7 @@
         scheme, netloc, path, query, fragment = urlparse.urlsplit(st)
         u = klass(
             scheme, netloc,
-            [raw(urllib.unquote(seg)) for seg in path.split('/')[1:]],
+            [urllib.unquote(seg) for seg in path.split('/')[1:]],
             unquerify(query), fragment)
         return u
     fromString = classmethod(fromString)
From sifu-twisted at 0xx0.net  Tue Jul 12 04:32:44 2005
From: sifu-twisted at 0xx0.net (Siegmund Fuehringer)
Date: Tue Jul 12 04:29:01 2005
Subject: [Twisted-web] liveglue.js patch
Message-ID: <20050712103244.GB7415@m.0xx0.net>

hi!

here is a small patch to make liveglue.js work together with libs like 
prototype.

bye - sifu
-------------- next part --------------
Index: liveglue.js
===================================================================
--- liveglue.js	(revision 1622)
+++ liveglue.js	(working copy)
@@ -35,7 +35,7 @@
                     connect(outputNum + 1)
                 }
             } else {
-		for (var i in disconnectListeners) {
+		for (var i=0; i<disconnectListeners.length; i++) {
 		    disconnectListeners[i]()
 		    disconnectListeners = []
 		}
@@ -77,7 +77,7 @@
     this.fired = false
     this.inputDone = function(what) {
         var found = false
-        for (var i in this.events) {
+        for (var i=0; i<this.events.length; i++) {
             if (this.events[i] == what) {
                 this.events.splice(i, 1)
                 found = true
@@ -104,7 +104,7 @@
 
 
 function stopListening(theListener) {
-    for (var i in inputListeners) {
+    for (var i=0; i<inputListeners.length; i++) {
         if (inputListeners[i] == theListener) {
             inputListeners.splice(i, 1)
             break
@@ -123,7 +123,7 @@
 }
 
 function delDisconnectListener(theListener) {
-    for (var i in disconnectListeners) {
+    for (var i=0; i<disconnectListeners.length; i++) {
 	if (disconnectListeners[i] == theListener){
 	    disconnectListeners.splice(i, 1)
 	    break
@@ -150,13 +150,13 @@
             if (evalAfterDone) {
                eval(evalAfterDone)
             }
-            for (var i in input.events) {
+            for (var i=0; i<input.events.length; i++) {
                 input.events[i].inputDone(input.request)
             }
         }
     }
     input.events = []
-    for (var i in inputListeners) {
+    for (var i=0; i<inputListeners.length; i++) {
         inputListeners[i].events.push(input.request)
         input.events.push(inputListeners[i])
     }
From tv at twistedmatrix.com  Tue Jul 12 04:52:57 2005
From: tv at twistedmatrix.com (Tommi Virtanen)
Date: Tue Jul 12 04:53:11 2005
Subject: [Twisted-web] Re: Introduction, newbie confusion plus an offer
In-Reply-To: <1924.129.44.180.6.1120753482.squirrel@www.wbsysnet.com>
References: <1924.129.44.180.6.1120753482.squirrel@www.wbsysnet.com>
Message-ID: <42D3A109.3040902@twistedmatrix.com>

lloyd@paisite.com wrote:
> I can see two approaches, and welcome input from all:
> 
> 1) Work through current documentation, asking questions about things that
> confuse me and providing the answers/clarifications as a rewrite of
> current documentation

I suggest you start with this, using the roundup issue tracking system
to submit documentation bugs (the mailing list archives have a good list
of things you should include in the report, IIRC by Mary)

> 2) Develop totally parallel documents

I feel most of the efforts that have gone this way have ended up dying
quietly with nothing much achieved, and more to the point, with no value
gained by the Twisted or Nevow projects.

> 1) Submit my questions to the mail-list. Consolidate and re-write
> responses. Submit suggested "patches" to current documention.

Yes please.

> 2) Start a new document on my site or one of the Twisted sites. Write what
> I understand with questions about what I don't. Invite clarifications
> through the mail-list.

That might work too, but please try to get it integrated into twisted
early (being a draft is no reason not to be part of the project), and
make sure people on the mailing lists see your open questions.


Thank you very much for your efforts. (Thank you even more if something
real comes out of this ;)

From tv at twistedmatrix.com  Tue Jul 12 05:06:28 2005
From: tv at twistedmatrix.com (Tommi Virtanen)
Date: Tue Jul 12 05:06:41 2005
Subject: [Twisted-web] Use WubWubWub
In-Reply-To: <2130.129.44.180.6.1120766611.squirrel@www.wbsysnet.com>
References: <2130.129.44.180.6.1120766611.squirrel@www.wbsysnet.com>
Message-ID: <42D3A434.206@twistedmatrix.com>

lloyd@paisite.com wrote:
> -- entered "mktap web --path ~/twisted/www --logfile ~/twisted/www --port
> 8080" into the command line
> -- entered "twistd -f web.tap" into command line

Oh, it's time for me to do this thing again.

(
  If you aren't writing an application, but just want to run a website
  OR
  If you want to host multiple applications
  OR
  You want a thing that actually serves on port 80, and not just some
  silly only for five minutes while you test something
)
AND
(
  you are using Debian
  OR
  you are willing to work on porting it
)

You should probably use WubWubWub. Think of it as "the apache-like
thingy for twisted and nevow things".

http://www.inoi.fi/open/trac/wubwubwub

No pre-built debs, svn co and build yourself.
Will get uploaded to Debian after minor refactoring, some day.


Of course, this thing _will_ probably increase your learning curve by a
bit, so I'm not suggesting all newbies do this -- I'm suggesting this
thing more for "real use".

From dp at ulaluma.com  Tue Jul 12 05:15:09 2005
From: dp at ulaluma.com (Donovan Preston)
Date: Tue Jul 12 05:15:13 2005
Subject: [Twisted-web] Use WubWubWub
In-Reply-To: <42D3A434.206@twistedmatrix.com>
References: <2130.129.44.180.6.1120766611.squirrel@www.wbsysnet.com>
	<42D3A434.206@twistedmatrix.com>
Message-ID: <4A6DA4A4-4000-4B90-A64C-CB3FF670B9AD@ulaluma.com>


On Jul 12, 2005, at 4:06 AM, Tommi Virtanen wrote:

> lloyd@paisite.com wrote:
>
>> -- entered "mktap web --path ~/twisted/www --logfile ~/twisted/www  
>> --port
>> 8080" into the command line
>> -- entered "twistd -f web.tap" into command line
>>
>
> Oh, it's time for me to do this thing again.

<snip WubWubWub instructions>

Neat. I hadn't seen this before. Thanks, Tv.

Donovan


From jblocksom at gsti3d.com  Tue Jul 12 08:57:13 2005
From: jblocksom at gsti3d.com (Jonathan Blocksom)
Date: Tue Jul 12 08:59:12 2005
Subject: [Twisted-web] Accessing request object from a SOAPPublisher soap_
	method
In-Reply-To: <B3007648-63A7-4D60-AC04-9639AF84460E@ulaluma.com>
References: <42CD65BA.6010306@gsti3d.com>
	<B3007648-63A7-4D60-AC04-9639AF84460E@ulaluma.com>
Message-ID: <42D3DA49.7010900@gsti3d.com>

Thanks for the reply, I've been meaning to post a followup with what I 
wound up doing, which is along the lines of your second suggestion.

I modified the SOAPPublisher class render() method so that if the 
calling convention was keywords it added a keyword "request" with the 
HTTP reqeust object as the value.  I did this before the arguments from 
the message are put into the dict so that if there happened to be an 
argument named request it would still be okay (assuming you didn't want 
to look at the request object).

But thinking about the problem got me to wonder if my method really 
should have access to the request object.  It seems to me that it breaks 
the encapsulation in a fairly bad way.  I'm curious if other SOAP 
libraries in other languages give access to the HTTP requests along with 
the message.

I wound up deciding that I would have the originator of the message send 
along the information instead of trying to gather it from the header. 
The information was just the IP address of the sender (although my app 
won't work across NAT firewalls now, but that's ok).

Jonathan

Donovan Preston wrote:
> 
> On Jul 7, 2005, at 10:26 AM, Jonathan Blocksom wrote:
> 
>> Hi, I've got a SOAPPublisher class with some published methods and  I 
>> was hoping to access the HTTP request object from within.   Anybody 
>> know how to do this?
> 
> 
> Unfortunately it doesn't look like it. If you look at the  
> SOAPPublisher.render method, it looks up the callable and then calls  it 
> (indirecting through maybeDeferred). The only place the request is  
> available is in the local namespace of render. So, you could:
> 
> 1) override render, stuff the request somewhere (like self), then get  
> it out in your method; you should only do this if threads are in no  way 
> involved. If there aren't any threads then it would be safe. Just  be 
> sure to get it out immediately and pass around what you got out  (for 
> example, don't return a deferred then look in self in a callback)
> 
> 2) use some horrible callframe hack to extract the request from the  
> caller's frame. This would have the advantage of being threadsafe,  but 
> you aren't using threads anyway -- right?
> 
> Itamar is the guy to talk to about SOAP and XMLRPC, but I guess he  
> doesn't read this list. If you want to have a cleaner way of doing  this 
> in the future, you should probably talk to him about it, either  on IRC 
> or through email or something.
> 
> Donovan
> 
> 
> _______________________________________________
> Twisted-web mailing list
> Twisted-web@twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
> 


From lloyd at paisite.com  Tue Jul 12 11:30:25 2005
From: lloyd at paisite.com (lloyd@paisite.com)
Date: Tue Jul 12 11:33:52 2005
Subject: [Twisted-web] Re: Introduction, newbie confusion plus an offer
In-Reply-To: <42D3A109.3040902@twistedmatrix.com>
References: <1924.129.44.180.6.1120753482.squirrel@www.wbsysnet.com>
	<42D3A109.3040902@twistedmatrix.com>
Message-ID: <1291.151.199.16.253.1121189425.squirrel@www.wbsysnet.com>

Hi Tommi,

>> 1) Work through current documentation, asking questions about things
>> that
>> confuse me and providing the answers/clarifications as a rewrite of
>> current documentation
>
> I suggest you start with this, using the roundup issue tracking system
> to submit documentation bugs (the mailing list archives have a good list
> of things you should include in the report, IIRC by Mary)

I don't know about the roundup issue tracking system. I'll look into it.

Are you suggesting that I comb the archives and consolidate all reported
documentation errors? I have gone through the archives, but this feels
like a very big project. If enough folks thought it would be a worthy and
pressing contribution I suppose I could take it on. But I'd kind of like
to be learning some hands-on Twisted as I go.

What do you mean "IIRC by Mary?"

>
>> 2) Develop totally parallel documents
>
> I feel most of the efforts that have gone this way have ended up dying
> quietly with nothing much achieved, and more to the point, with no value
> gained by the Twisted or Nevow projects.

I can see the problem. I have started a parallel document:
http://twisted.paisite.com. It's a first baby step, but I'd certainly not
like to see it die on the vine. Feedback and "next-step"
suggestions/contributions would certainly help me keep up the momentum.

>
>> 1) Submit my questions to the mail-list. Consolidate and re-write
>> responses. Submit suggested "patches" to current documention.
>
> Yes please.

I can do this. I'm not sure that I'm knowledgable enough yet to suggest
rewrites. But I've got questions aplenty.

>
>> 2) Start a new document on my site or one of the Twisted sites. Write
>> what
>> I understand with questions about what I don't. Invite clarifications
>> through the mail-list.
>
> That might work too, but please try to get it integrated into twisted
> early (being a draft is no reason not to be part of the project), and
> make sure people on the mailing lists see your open questions.

See above. If Techno's Adventures prove useful to the Twisted community,
I'd be more than honored to have them integrated into the project.

>
> Thank you very much for your efforts. (Thank you even more if something
> real comes out of this ;)

And thank you for your thoughtful response. I've taken a first small step
with Techno's Adventures. And hope to add experiments as I myself learn
more over the coming days and weeks. I will indeed look into this "roundup
issue tracking system" you mentioned.

Best wishes,

Lloyd






From nico at tekNico.net  Tue Jul 12 11:41:03 2005
From: nico at tekNico.net (Nicola Larosa)
Date: Tue Jul 12 11:41:10 2005
Subject: [Twisted-web] Re: Use WubWubWub
In-Reply-To: <42D3A434.206@twistedmatrix.com>
References: <2130.129.44.180.6.1120766611.squirrel@www.wbsysnet.com>
	<42D3A434.206@twistedmatrix.com>
Message-ID: <42D400AF.9060502@tekNico.net>

> You should probably use WubWubWub. Think of it as "the apache-like
> thingy for twisted and nevow things".
> 
> http://www.inoi.fi/open/trac/wubwubwub
> 
> No pre-built debs, svn co and build yourself.

No SVN link there, so I made one up on the model of the Ldaptor's one.

$ svn co svn://inoi.fi/wubwubwub/trunk
svn: Can't open file '/srv/inoi.fi/repo/view/open/wubwubwub/trunk/format':
Permission denied

Same error when trying to access the Ldaptor SVN.

-- 
Nicola Larosa - nico@tekNico.net

Adding things just because you can leads to monstrosities like Common LISP,
PL/I, Algol 68 and Perl 6. Adding features only when they add functionality
(or better yet, by removing restrictions) leads to jewels like Python,
Scheme and Eiffel. -- Mike Meyer, comp.lang.python, April 2005


From lloyd at paisite.com  Tue Jul 12 11:40:58 2005
From: lloyd at paisite.com (lloyd@paisite.com)
Date: Tue Jul 12 11:44:24 2005
Subject: [Twisted-web] Use WubWubWub
In-Reply-To: <42D3A434.206@twistedmatrix.com>
References: <2130.129.44.180.6.1120766611.squirrel@www.wbsysnet.com>
	<42D3A434.206@twistedmatrix.com>
Message-ID: <1301.151.199.16.253.1121190058.squirrel@www.wbsysnet.com>

Hello again, Tommi,

>
> You should probably use WubWubWub. Think of it as "the apache-like
> thingy for twisted and nevow things".
>
> http://www.inoi.fi/open/trac/wubwubwub
>
> No pre-built debs, svn co and build yourself.
> Will get uploaded to Debian after minor refactoring, some day.
>
> Of course, this thing _will_ probably increase your learning curve by a
> bit, so I'm not suggesting all newbies do this -- I'm suggesting this
> thing more for "real use".

This looks extremely cool. I'll study it and try to work one or more
Turkey adventures around it. You available if I get stuck?

Thanks for the suggestion,

Lloyd




From tpherndon at optonline.net  Tue Jul 12 11:48:35 2005
From: tpherndon at optonline.net (T. Peter Herndon)
Date: Tue Jul 12 11:49:17 2005
Subject: [Twisted-web] Re: Introduction, newbie confusion plus an
 offer
In-Reply-To: <1291.151.199.16.253.1121189425.squirrel@www.wbsysnet.com>
References: <1924.129.44.180.6.1120753482.squirrel@www.wbsysnet.com>
	<42D3A109.3040902@twistedmatrix.com>
	<1291.151.199.16.253.1121189425.squirrel@www.wbsysnet.com>
Message-ID: <C9DE909B-6282-4029-85FE-A3C1C4E30E89@optonline.net>



>> to submit documentation bugs (the mailing list archives have a  
>> good list
>> of things you should include in the report, IIRC by Mary)
>>
>
> What do you mean "IIRC by Mary?"
>
>

He means that a good list of things to include in your report has  
been enumerated by Mary Gardiner (the main Twisted documentation  
maintainer, from what I've gathered from lurking), which can be found  
in the mailing list archives.  IIRC stands for If I Remember  
Correctly, if that was part of the confusion.

For what it's worth, thank you for your efforts at documenting  
Twisted.  I have not had the chance to read your initial offerings,  
but I'm sure they will shed some light on the subject for me, in my  
own ignorance of Twisted et al.

---Peter Herndon


From lloyd at paisite.com  Tue Jul 12 12:07:48 2005
From: lloyd at paisite.com (lloyd@paisite.com)
Date: Tue Jul 12 12:11:14 2005
Subject: [Twisted-web] Re: Introduction, newbie confusion plus an offer
In-Reply-To: <C9DE909B-6282-4029-85FE-A3C1C4E30E89@optonline.net>
References: <1924.129.44.180.6.1120753482.squirrel@www.wbsysnet.com>
	<42D3A109.3040902@twistedmatrix.com>
	<1291.151.199.16.253.1121189425.squirrel@www.wbsysnet.com>
	<C9DE909B-6282-4029-85FE-A3C1C4E30E89@optonline.net>
Message-ID: <1354.151.199.16.253.1121191668.squirrel@www.wbsysnet.com>

Hi Peter,


> He means that a good list of things to include in your report has
> been enumerated by Mary Gardiner (the main Twisted documentation
> maintainer, from what I've gathered from lurking), which can be found
> in the mailing list archives.  IIRC stands for If I Remember
> Correctly, if that was part of the confusion.

Ah, thank you.

Mary, if you're out there, please let me know how I can best complement
your work.

>
> For what it's worth, thank you for your efforts at documenting
> Twisted.  I have not had the chance to read your initial offerings,
> but I'm sure they will shed some light on the subject for me, in my
> own ignorance of Twisted et al.

At the moment I'm still a child wandering lost in the woods. Helpful
pilgrims have begun pointing the way. It's very reassuring.

Take care,

Lloyd




From lloyd at paisite.com  Tue Jul 12 12:53:29 2005
From: lloyd at paisite.com (lloyd@paisite.com)
Date: Tue Jul 12 12:56:55 2005
Subject: [Twisted-web] Turkey Questions 9-12
In-Reply-To: <4832.151.199.16.253.1121103763.squirrel@www.wbsysnet.com>
References: <2130.129.44.180.6.1120766611.squirrel@www.wbsysnet.com>
	<42CDC99D.1090200@pollenation.net>
	<3059.129.44.180.6.1120854831.squirrel@www.wbsysnet.com>
	<4832.151.199.16.253.1121103763.squirrel@www.wbsysnet.com>
Message-ID: <1389.151.199.16.253.1121194409.squirrel@www.wbsysnet.com>

Hello,

Question 9:

I've been using the Debian stable packages Twisted 1.3.0-8. Is there a
more current version?

Question 10:

If so, does it make sense to upgrade?

Question 11:

Is there a Debian package for the upgrade?

Question 12:

If not, how do I upgrade (specific steps, please)

Thanks all,

Lloyd



From exarkun at divmod.com  Tue Jul 12 13:16:53 2005
From: exarkun at divmod.com (Jp Calderone)
Date: Tue Jul 12 13:16:55 2005
Subject: [Twisted-web] Turkey Questions 9-12
In-Reply-To: <1389.151.199.16.253.1121194409.squirrel@www.wbsysnet.com>
Message-ID: <20050712191653.26278.299293024.divmod.quotient.10351@ohm>

On Tue, 12 Jul 2005 14:53:29 -0400 (EDT), lloyd@paisite.com wrote:
>Hello,
>
>Question 9:
>
>I've been using the Debian stable packages Twisted 1.3.0-8. Is there a
>more current version?
>

Yes.  2.0.1 is out.  There are debian packages available here - <http://twistedmatrix.com/~tv/2.0-BEWARE>.  While I won't suggest that you shouldn't "beware" of the quality of these packages, I will point out that they've been out for some time now and I haven't heard of any problems with them.

>Question 10:
>
>If so, does it make sense to upgrade?
>

If you're just getting started (as the case seems to be for you), yes, definitely.  If you had some old software based on 1.3, there might be something to discuss, but since you're starting fresh I see no point in not starting with the latest release.

>Question 11:
>
>Is there a Debian package for the upgrade?
>
>Question 12:
>
>If not, how do I upgrade (specific steps, please)
>

I'll leave these to someone with more details (Tommi?), but I didn't have any difficulty installing the packages.

Jp

From andreas.destefani at ucd.ie  Tue Jul 12 13:26:31 2005
From: andreas.destefani at ucd.ie (Andreas De Stefani)
Date: Tue Jul 12 13:27:10 2005
Subject: [Twisted-web] Writing Nevow Plugins ... dont have a clue! ;)
Message-ID: <42D41967.8050605@ucd.ie>

Hey guys,

i was just wondering if this would be possible:

I generate a nevow application with one main template, then i simply 
plugin multiple sub websites which are using template fragments ... for 
example:

i got a main site which has navigation and content, simple so far ... 
then i have a plugin directory where i simply put my "sub websites" ...

webkit/plugins/login
webkit/plugins/andysgreatsite
webkit/plugins/acrapsite

after i restart the webserver there should be a link for each site in 
the navigation and the navigation fragment template and after a click on 
a link, the content should show the sub-site ... or at least render the 
sub-site

hmmm... i was trying a bit, but i think i took the wrong approach... 
probably i have to go one layer lower to inevow.IRequest, but i didnt 
really figure out how i could do that... or is it Realm or Portal ... 
i'm  a bit confused!

anyway this is what i tried: (i even got trouble with the automatic 
plugin loader, the modules werent imported correctly for some strange 
reason)


from nevow import loaders, rend, static, url, tags
import os

PLUGIN_PATH = './plugins'

webplugins = []

class WebKitRoot(rend.Page):
   
    docFactory = loaders.xmlfile('webkit.html')
   
    def __init__(self):
        """init the Root Page, load plugins"""
        self.__importPlugins()
   
    def __importPlugins(self):
        """retrieve the plugins from the plugin directory and import them"""
        plugindirs = os.listdir(PLUGIN_PATH)
        for p in plugindirs:
            if os.path.isdir(os.path.join(PLUGIN_PATH, p)):
                #constructing the plugin path --> ./plugins/login/login
                
webplugins.append(__import__(PLUGIN_PATH.split('/')[-1]+'.'+p+'.'+p))

   
    def childFactory(self, ctx, name):
        if name in ['login']:
            #just a simple test
            return webplugins[0].RootPage()


would be cool if somebody could give me some hints!

thanks a lot!

bye Andy

From kairanga at cox.net  Tue Jul 12 15:32:52 2005
From: kairanga at cox.net (Ranga Nathan)
Date: Tue Jul 12 15:33:30 2005
Subject: [Twisted-web] Can I use a Perl with Twisted?
Message-ID: <42D43704.5040708@cox.net>

I have a server written in Perl that needs to be accessed via FTP / HTTP 
/ socket interface. Would I be able to use Twisted? If so do I have to 
write a python wrapper for the perl process? Or do I have to re-code the 
server in python?
Thanks

From rasjidw at openminddev.net  Wed Jul 13 02:29:47 2005
From: rasjidw at openminddev.net (Rasjid Wilcox)
Date: Wed Jul 13 02:30:20 2005
Subject: [Twisted-web] Logging error messages
In-Reply-To: <200507111841.56919.rasjidw@openminddev.net>
References: <200507111841.56919.rasjidw@openminddev.net>
Message-ID: <200507131829.47613.rasjidw@openminddev.net>

On Mon, 11 Jul 2005 06:41 pm, Rasjid Wilcox wrote:
> I have written an XMLRPC server with Twisted-Web (following
> http://twistedmatrix.com/projects/web/documentation/examples/xmlrpc.py).
>
> I have used a python (2.3) logger to record what is happening, but I am
> unclear how to get errors that occur within the xmlrpc procedure calls to
> be logged to the logger.

I have achieved what I wanted with a twisted.python.log.startKeepingErrors() 
and a periodic call to twisted.python.log.flushErrors().  I then any errors 
from the flushed list into my normal logging.

Cheers,

Rasjid.

-- 
Rasjid Wilcox
Melbourne, Australia (UTC +10 hrs)

From tv at twistedmatrix.com  Wed Jul 13 04:58:13 2005
From: tv at twistedmatrix.com (Tommi Virtanen)
Date: Wed Jul 13 04:58:42 2005
Subject: [Twisted-web] Re: Introduction, newbie confusion plus an offer
In-Reply-To: <1291.151.199.16.253.1121189425.squirrel@www.wbsysnet.com>
References: <1924.129.44.180.6.1120753482.squirrel@www.wbsysnet.com>	<42D3A109.3040902@twistedmatrix.com>
	<1291.151.199.16.253.1121189425.squirrel@www.wbsysnet.com>
Message-ID: <42D4F3C5.10706@twistedmatrix.com>

lloyd@paisite.com wrote:
>>I suggest you start with this, using the roundup issue tracking system
>>to submit documentation bugs (the mailing list archives have a good list
>>of things you should include in the report, IIRC by Mary)
> Are you suggesting that I comb the archives and consolidate all reported
> documentation errors? I have gone through the archives, but this feels
> like a very big project. If enough folks thought it would be a worthy and
> pressing contribution I suppose I could take it on. But I'd kind of like
> to be learning some hands-on Twisted as I go.

I mean Mary has written instructions for people on how to improve the
documentation.

Googling for mary twisted documentation bug gives me nothing of help.
I'm sorry, I have no clue where the guide is -- there is something
in the mailing list archives about it, but I can't find it in the
few minutes I can dedicate to this right now. Maybe someone else will
pitch in.

From tv at twistedmatrix.com  Wed Jul 13 05:06:13 2005
From: tv at twistedmatrix.com (Tommi Virtanen)
Date: Wed Jul 13 05:06:31 2005
Subject: [Twisted-web] Turkey Questions 9-12
In-Reply-To: <1389.151.199.16.253.1121194409.squirrel@www.wbsysnet.com>
References: <2130.129.44.180.6.1120766611.squirrel@www.wbsysnet.com>	<42CDC99D.1090200@pollenation.net>	<3059.129.44.180.6.1120854831.squirrel@www.wbsysnet.com>	<4832.151.199.16.253.1121103763.squirrel@www.wbsysnet.com>
	<1389.151.199.16.253.1121194409.squirrel@www.wbsysnet.com>
Message-ID: <42D4F5A5.6090400@twistedmatrix.com>

lloyd@paisite.com wrote:
> Question 9:
> 
> I've been using the Debian stable packages Twisted 1.3.0-8. Is there a
> more current version?

You'll find 2.0 in unstable/testing. Of course, using anything that
explicitly claims to changing a lot is a step not to be taken lightly.

> Question 10:
> 
> If so, does it make sense to upgrade?

There should be no pressing need, unless you hit some of the bugs which
have already been fixed.

Writing new applications or documents based on the old version is a
somewhat bad decision.

I suggest you keep using debian stable for now, install subversion,
check out the development tree with svn co
svn://svn.twistedmatrix.com/svn/Twisted/trunk and set the
environment variable PYTHONPATH to point to that when working on
twisted. That way, you have a stable basic version, but still can
see e.g. fixes and additions as soon as they are available.

> Question 11:
> 
> Is there a Debian package for the upgrade?

In unstable and testing. I currently have very little interest
in providing explicit backports to stable, but the package will
probably install just fine in stable -- atleast for now.

From mary-twisted at puzzling.org  Wed Jul 13 05:09:20 2005
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Wed Jul 13 05:09:27 2005
Subject: [Twisted-web] Re: Introduction, newbie confusion plus an offer
In-Reply-To: <42D4F3C5.10706@twistedmatrix.com>
References: <1924.129.44.180.6.1120753482.squirrel@www.wbsysnet.com>
	<42D3A109.3040902@twistedmatrix.com>
	<1291.151.199.16.253.1121189425.squirrel@www.wbsysnet.com>
	<42D4F3C5.10706@twistedmatrix.com>
Message-ID: <20050713110920.GD13143@home.puzzling.org>

On Wed, Jul 13, 2005, Tommi Virtanen wrote:
> I mean Mary has written instructions for people on how to improve the
> documentation.
> 
> Googling for mary twisted documentation bug gives me nothing of help.
> I'm sorry, I have no clue where the guide is -- there is something
> in the mailing list archives about it, but I can't find it in the
> few minutes I can dedicate to this right now. Maybe someone else will
> pitch in.

Try limiting your query (-mary) to puzzling.org, I have a couple of blog
entries about it. If noone else finds them I'll locate them, but not
tonight.

-Mary

From tv at twistedmatrix.com  Wed Jul 13 05:18:09 2005
From: tv at twistedmatrix.com (Tommi Virtanen)
Date: Wed Jul 13 05:18:23 2005
Subject: [Twisted-web] Re: Use WubWubWub
In-Reply-To: <42D400AF.9060502@tekNico.net>
References: <2130.129.44.180.6.1120766611.squirrel@www.wbsysnet.com>	<42D3A434.206@twistedmatrix.com>
	<42D400AF.9060502@tekNico.net>
Message-ID: <42D4F871.5020400@twistedmatrix.com>

Nicola Larosa wrote:
> $ svn co svn://inoi.fi/wubwubwub/trunk
> svn: Can't open file '/srv/inoi.fi/repo/view/open/wubwubwub/trunk/format':
> Permission denied

Seems like I accidentally disabled anonymous SVN. Should be working now.
(mental note to self: add more automatic checks)

From en.karpachov at ospaz.ru  Wed Jul 13 06:50:38 2005
From: en.karpachov at ospaz.ru (en.karpachov@ospaz.ru)
Date: Wed Jul 13 06:49:51 2005
Subject: [Twisted-web] Turkey Questions 9-12
In-Reply-To: <42D4F5A5.6090400@twistedmatrix.com>
References: <2130.129.44.180.6.1120766611.squirrel@www.wbsysnet.com>
	<42CDC99D.1090200@pollenation.net>
	<3059.129.44.180.6.1120854831.squirrel@www.wbsysnet.com>
	<42D4F5A5.6090400@twistedmatrix.com>
Message-ID: <20050713125038.GB9595@jk.dev>

Wed, Jul 13, 2005 at 02:06:13PM +0300, Tommi Virtanen ?????:
> > Question 11:
> > 
> > Is there a Debian package for the upgrade?
> 
> In unstable and testing. I currently have very little interest
> in providing explicit backports to stable, but the package will
> probably install just fine in stable -- atleast for now.

No, at least apt-proxy will get broken - the apt-proxy package depends on
twisted 1.3.

-- 
Eugene

From richard at reticulatus.plus.com  Wed Jul 13 12:39:05 2005
From: richard at reticulatus.plus.com (Richard Townsend)
Date: Wed Jul 13 12:41:20 2005
Subject: [Twisted-web] Twisted client to access proxy web server
Message-ID: <42D55FC9.3010206@reticulatus.plus.com>

I've used twisted.web.client.getPage() and downloadPage() to get pages from
a web server, but was wondering how to use Twisted to get pages from a proxy
web server.

Can anyone point me at some example Twisted code for a client to access a
proxy-server?




From lloyd at paisite.com  Wed Jul 13 13:18:34 2005
From: lloyd at paisite.com (lloyd@paisite.com)
Date: Wed Jul 13 13:22:02 2005
Subject: [Twisted-web] Re: Introduction, newbie confusion plus an offer
In-Reply-To: <42D4F3C5.10706@twistedmatrix.com>
References: <1924.129.44.180.6.1120753482.squirrel@www.wbsysnet.com>	<42D3A109.3040902@twistedmatrix.com>
	<1291.151.199.16.253.1121189425.squirrel@www.wbsysnet.com>
	<42D4F3C5.10706@twistedmatrix.com>
Message-ID: <2262.68.160.37.29.1121282314.squirrel@www.wbsysnet.com>


> I mean Mary has written instructions for people on how to improve the
> documentation.

Thanks, Tommi,

I'll se what I can find.

Best wishes,

Lloyd



From lloyd at paisite.com  Wed Jul 13 13:22:42 2005
From: lloyd at paisite.com (lloyd@paisite.com)
Date: Wed Jul 13 13:26:11 2005
Subject: [Twisted-web] Turkey Questions 9-12
In-Reply-To: <42D4F5A5.6090400@twistedmatrix.com>
References: <2130.129.44.180.6.1120766611.squirrel@www.wbsysnet.com>	<42CDC99D.1090200@pollenation.net>	<3059.129.44.180.6.1120854831.squirrel@www.wbsysnet.com>	<4832.151.199.16.253.1121103763.squirrel@www.wbsysnet.com>
	<1389.151.199.16.253.1121194409.squirrel@www.wbsysnet.com>
	<42D4F5A5.6090400@twistedmatrix.com>
Message-ID: <2266.68.160.37.29.1121282562.squirrel@www.wbsysnet.com>

Hi Tommi,

>
> You'll find 2.0 in unstable/testing. Of course, using anything that
> explicitly claims to changing a lot is a step not to be taken lightly.

Thanks. Will have to wait two years for the testing version to be moved
over to stable?

> There should be no pressing need, unless you hit some of the bugs which
> have already been fixed.
>
> Writing new applications or documents based on the old version is a
> somewhat bad decision.
>
> I suggest you keep using debian stable for now, install subversion,
> check out the development tree with svn co
> svn://svn.twistedmatrix.com/svn/Twisted/trunk and set the
> environment variable PYTHONPATH to point to that when working on
> twisted. That way, you have a stable basic version, but still can
> see e.g. fixes and additions as soon as they are available.

Sounds like a good idea. I'm not up on subversion, but it's on my list of
skills to master.

Thanks for the help.

Lloyd



From mary-twisted at puzzling.org  Wed Jul 13 15:26:35 2005
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Wed Jul 13 15:26:22 2005
Subject: On improving the documentation (Re: [Twisted-web] Re: Introduction,
	newbie confusion plus an offer)
In-Reply-To: <20050713110920.GD13143@home.puzzling.org>
References: <1924.129.44.180.6.1120753482.squirrel@www.wbsysnet.com>
	<42D3A109.3040902@twistedmatrix.com>
	<1291.151.199.16.253.1121189425.squirrel@www.wbsysnet.com>
	<42D4F3C5.10706@twistedmatrix.com>
	<20050713110920.GD13143@home.puzzling.org>
Message-ID: <20050713212635.GA19547@sourdust.home.puzzling.org>

On Wed, Jul 13, 2005, Mary Gardiner wrote:
> Try limiting your query (-mary) to puzzling.org, I have a couple of blog
> entries about it. If noone else finds them I'll locate them, but not
> tonight.

Are these what you were thinking of Tommi?

How to file documentation bugs:
http://twistedmatrix.com/pipermail/twisted-python/2004-June/008071.html

How to review documentation:
http://twistedmatrix.com/pipermail/twisted-python/2005-May/010386.html

-Mary

From mary-twisted at puzzling.org  Thu Jul 14 00:38:57 2005
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Thu Jul 14 00:39:00 2005
Subject: [Twisted-web] Reminder: Australian Twisted Sprint #2: 19th - 21st
	August 2005, Sydney
In-Reply-To: <20050711053451.GR9691@sourdust.home.puzzling.org>
References: <20050711053451.GR9691@sourdust.home.puzzling.org>
Message-ID: <20050714063857.GB20866@home.puzzling.org>

On Mon, Jul 11, 2005, Mary Gardiner wrote:
> Still no final word on exactly where in Sydney this sprint will be
> held, but it *will* be held and will be on these dates, so I'm posting
> again to give people time to book flights before they get expensive.

The location is now finalised: it will be held at the city campus of the
University of Technology Sydney (UTS). This is close to the business
district and a short walk from Central Station, Sydney's major train
interchange. It's also pretty convienient for buses and the like and
nice and near some of Sydney's better cheap eating.

I'll update the wiki with accommodation suggestions soon.

Many thanks to Matthew Beauregard of UTS ProgSoc[1] for organising the room
bookings for us.

-Mary

[1] http://www.progsoc.uts.edu.au/

From andreas.destefani at ucd.ie  Thu Jul 14 10:22:39 2005
From: andreas.destefani at ucd.ie (Andreas De Stefani)
Date: Thu Jul 14 10:24:37 2005
Subject: [Twisted-web] writing a twisted wrapper in nevow
Message-ID: <42D6914F.5020401@ucd.ie>

Hello guys,

i have a webserver which needs to run nevow and twisted sites, but i 
want to use only one port. I was thinking that i probably could just 
include a twisted site into a nevow site since nevow runs on top of 
twisted, but i had some difficulties...

is there a mktap web --path equivalent for nevow?

i was trying to forward a "not nevow" request coming from the twisted 
website to the corresponding twisted python class by using locatechild 
and just returning the twisted Resource which implements it... it 
suprisingly worked for a very simple testsite, but it didntt work if 
there are any hrefs to static html, picture links etc.

does anybody know how i could run twisted and nevow code mixed together?

thanks in advance

Andy

From jason.mobarak at gmail.com  Thu Jul 14 12:12:06 2005
From: jason.mobarak at gmail.com (Jason Mobarak)
Date: Thu Jul 14 12:12:10 2005
Subject: [Twisted-web] writing a twisted wrapper in nevow
In-Reply-To: <42D6914F.5020401@ucd.ie>
References: <42D6914F.5020401@ucd.ie>
Message-ID: <b194c91905071411125a9b0178@mail.gmail.com>

On 7/14/05, Andreas De Stefani <andreas.destefani@ucd.ie> wrote:
> i was trying to forward a "not nevow" request coming from the twisted
> website to the corresponding twisted python class by using locatechild
> and just returning the twisted Resource which implements it... it
> suprisingly worked for a very simple testsite, but it didntt work if
> there are any hrefs to static html, picture links etc.
> 
> does anybody know how i could run twisted and nevow code mixed together?

This is how I mix nevow applications and static content:

http://deadbeefbabe.org/dbb.tac.txt

...basically the site is static but for certain URLs the requests get
proxied to a NevowSite site instance.

,,Jason

From kairanga at cox.net  Thu Jul 14 12:38:01 2005
From: kairanga at cox.net (Ranga Nathan)
Date: Thu Jul 14 12:38:38 2005
Subject: [Twisted-web] Perl servers for Twisted?
Message-ID: <42D6B109.4070904@cox.net>

Is it possible to plug-in perl servers into Twisted framework?

From exarkun at divmod.com  Thu Jul 14 13:28:33 2005
From: exarkun at divmod.com (Jp Calderone)
Date: Thu Jul 14 13:28:39 2005
Subject: [Twisted-web] Perl servers for Twisted?
In-Reply-To: <42D6B109.4070904@cox.net>
Message-ID: <20050714192833.26278.938223376.divmod.quotient.11793@ohm>

On Thu, 14 Jul 2005 11:38:01 -0700, Ranga Nathan <kairanga@cox.net> wrote:
>Is it possible to plug-in perl servers into Twisted framework?
>

Perl CGIs?  Sure.  Other stuff?  Dunno, probably not.  What did you have in mind?

Jp

From christopher.zorn at gmail.com  Thu Jul 14 15:22:20 2005
From: christopher.zorn at gmail.com (Christopher Zorn)
Date: Thu Jul 14 15:22:54 2005
Subject: [Twisted-web] Perl servers for Twisted?
In-Reply-To: <42D6B109.4070904@cox.net>
References: <42D6B109.4070904@cox.net>
Message-ID: <149014b9050714142264548395@mail.gmail.com>

What do you want to do?

POE[1] is perl's version of twisted. 

[1] http://poe.perl.org 



On 7/14/05, Ranga Nathan <kairanga@cox.net> wrote:
> Is it possible to plug-in perl servers into Twisted framework?
> 
> _______________________________________________
> Twisted-web mailing list
> Twisted-web@twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>

From nico at tekNico.net  Fri Jul 15 01:45:54 2005
From: nico at tekNico.net (Nicola Larosa)
Date: Fri Jul 15 01:46:16 2005
Subject: [Twisted-web] Re: Perl servers for Twisted?
In-Reply-To: <149014b9050714142264548395@mail.gmail.com>
References: <42D6B109.4070904@cox.net>
	<149014b9050714142264548395@mail.gmail.com>
Message-ID: <db7pji$1vg$1@sea.gmane.org>

>> Is it possible to plug-in perl servers into Twisted framework?

> What do you want to do?
> 
> POE[1] is perl's version of twisted. 
> 
> [1] http://poe.perl.org 

http://poe.perl.org/?What_POE_Is

"POE parcels out execution time among one or more tasks, called sessions.
Sessions multitask through cooperation (at least until Perl's threads
become mainstream)."

What?

"POE is a big wad of potential waiting for your kinetic. It's a mirror
reflecting your ideas in code. It's the dingdong in shamalamadingdong. It's
the hoho in hohoho, and at least one Po in PoCo. It's the freak in fries.
It's all these things and more, even Europa, and you can attempt a landing
there."

WHAT?

These people are silly. ;-)

-- 
Nicola Larosa - nico@tekNico.net

Lad: Is anyone capable of providing Python advantages over PHP if there
    are any?
Jorey Bump: As you learn Python, you will find that your PHP code will
    improve, possibly becoming more and more concise until it disappears
    completely. -- comp.lang.python, April 2005


From en.karpachov at ospaz.ru  Fri Jul 15 04:46:22 2005
From: en.karpachov at ospaz.ru (en.karpachov@ospaz.ru)
Date: Fri Jul 15 04:45:27 2005
Subject: [Twisted-web] HTTP redirection from data_*/render_* methods
Message-ID: <20050715104622.GA18115@jk.dev>

I wondered if I can make an HTTP redirection (302) from inside of render_*
or data_* method. Here is a code snipped I wrote; I'd like to know if it
can be considered as "good" nevow practice?


from nevow import rend, loaders, inevow
from twisted.internet import defer

class MyPage(rend.Page):

    addSlash = True

    docFactory = loaders.xmlstr("""\
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" xmlns:nevow="http://nevow.com/ns/nevow/0.1">
  <body>
    <div nevow:render="redirect http://google.com">Nothing is here</div>
  </body>
</html>
""")

    buffered = True

    def renderHTTP(self, ctx):
        """The renderHTTP method is overloaded to add errback handler
        to the rendering Deferred object"""

        d = defer.maybeDeferred(rend.Page.renderHTTP, self, ctx)
        d.addErrback(self.onError, ctx)
        return d

    #
    # Custom exception-based class to request redirection
    #
    class __Redirect(Exception): pass

    def onError(self, failure, ctx):
        if isinstance(failure.value, self.__Redirect):
            #
            # If a redirection was requested, then drop the output buffer
            # and redirect the Request object
            #
            inevow.IRequest(ctx).redirect(failure.value.args[0])
            return ""
        #
        # Otherwise, fall through
        #
        return failure

    #
    # Convenience method to be called from inside of render_* or data_*
    # callback
    #
    def __redirect(self, url):
        raise self.__Redirect, url

    #
    #
    #
    def render_redirect(self, url):
        return lambda ctx, data: self.__redirect(url)



The "redirect" render directive could be used depending on some another
logic in the page, if some pattern was assigned to the containing tag.

Any comments will be very appreciated.

-- 
jk

From tv at twistedmatrix.com  Fri Jul 15 06:30:15 2005
From: tv at twistedmatrix.com (Tommi Virtanen)
Date: Fri Jul 15 06:30:06 2005
Subject: [Twisted-web] HTTP redirection from data_*/render_* methods
In-Reply-To: <20050715104622.GA18115@jk.dev>
References: <20050715104622.GA18115@jk.dev>
Message-ID: <42D7AC57.5050908@twistedmatrix.com>

en.karpachov@ospaz.ru wrote:
> Any comments will be very appreciated.

"Eww."

From sam at SpinwardStars.com  Fri Jul 15 07:40:33 2005
From: sam at SpinwardStars.com (Samuel Reynolds)
Date: Fri Jul 15 07:46:35 2005
Subject: [Twisted-web] HTTP redirection from data_*/render_* methods
In-Reply-To: <20050715104622.GA18115@jk.dev>
References: <20050715104622.GA18115@jk.dev>
Message-ID: <6.1.2.0.0.20050715073635.04c883f8@mail.myedl.com>

At 2005-07-15 02:46 PM +0400, you wrote:
>I wondered if I can make an HTTP redirection (302) from inside of render_*
>or data_* method. Here is a code snipped I wrote; I'd like to know if it
>can be considered as "good" nevow practice?

What about
     request.redirect( redirectUrl )
possibly followed by
     request.finish()

I haven't ported my app to the latest nevow version
(still on v. 0.1d), but redirects are sufficiently
useful and common that I would expect request.redirect
to still work.

- Sam

__________________________________________________________
Spinward Stars, LLC                        Samuel Reynolds
Software Consulting and Development           303-805-1446
http://SpinwardStars.com/            sam@SpinwardStars.com 



From en.karpachov at ospaz.ru  Fri Jul 15 08:17:48 2005
From: en.karpachov at ospaz.ru (en.karpachov@ospaz.ru)
Date: Fri Jul 15 08:18:32 2005
Subject: [Twisted-web] HTTP redirection from data_*/render_* methods
In-Reply-To: <6.1.2.0.0.20050715073635.04c883f8@mail.myedl.com>
References: <20050715104622.GA18115@jk.dev>
	<6.1.2.0.0.20050715073635.04c883f8@mail.myedl.com>
Message-ID: <20050715141748.GA1080@ospaz.ru>

On Fri, Jul 15, 2005 at 07:40:33AM -0600, Samuel Reynolds wrote:
> At 2005-07-15 02:46 PM +0400, you wrote:
> >I wondered if I can make an HTTP redirection (302) from inside of render_*
> >or data_* method. Here is a code snipped I wrote; I'd like to know if it
> >can be considered as "good" nevow practice?
> 
> What about
>     request.redirect( redirectUrl )
> possibly followed by
>     request.finish()

It doesn't work when called from inside a render_something or data_smth
methods. If I redirect, I want the flattening process to stop immediately,
dropping request output accumulated so far. The only way to do it is to
raise an exception, cancelling normal flow.  Otherwise, flattening will
continue, and the request will be finished twice. Also, the http reply will
have non-empty body.

-- 
jk

From en.karpachov at ospaz.ru  Fri Jul 15 09:58:38 2005
From: en.karpachov at ospaz.ru (en.karpachov@ospaz.ru)
Date: Fri Jul 15 09:59:24 2005
Subject: [Twisted-web] HTTP redirection from data_*/render_* methods
In-Reply-To: <6.1.2.0.0.20050715073635.04c883f8@mail.myedl.com>
References: <20050715104622.GA18115@jk.dev>
	<6.1.2.0.0.20050715073635.04c883f8@mail.myedl.com>
Message-ID: <20050715155838.GA2498@ospaz.ru>

On Fri, Jul 15, 2005 at 07:40:33AM -0600, Samuel Reynolds wrote:
> At 2005-07-15 02:46 PM +0400, you wrote:
> >I wondered if I can make an HTTP redirection (302) from inside of render_*
> >or data_* method. Here is a code snipped I wrote; I'd like to know if it
> >can be considered as "good" nevow practice?
> 
> What about
>     request.redirect( redirectUrl )
> possibly followed by
>     request.finish()

That is, this method doesn't allow to return an empty body. If it is ok to
return fully rendered page together with the "302 Found", then it is
probably enough to call request.redirect, that's right.

So the render method from my snippet should probably look like

def render_redirect(self, url):
     def _(ctx, data):
          inevow.IRequest.redirect(str(url))
          return "Redirecting"
     return _

Thanks for your hint.

-- 
jk

From doug at isotoma.com  Fri Jul 15 10:45:09 2005
From: doug at isotoma.com (Doug Winter)
Date: Fri Jul 15 10:45:19 2005
Subject: [Twisted-web] [PATCH] Allow forms to see requiredness
Message-ID: <42D7E815.4070503@isotoma.com>

Also adds some commonly used attributes to string and textarea renderers.

Cheers,

Doug.

-- 
doug@isotoma.com   / Isotoma, Open Source Software Consulting
Tel: 020 7620 1446 / Mobile: 07879 423002 / Fax: 020 79006980
Skype: dougwinter  / http://www.isotoma.com
Lincoln House, 75 Westminster Bridge Road, London, SE1 7HS
-------------- next part --------------
A non-text attachment was scrubbed...
Name: webform.patch
Type: text/x-patch
Size: 1914 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-web/attachments/20050715/7f1e3e02/webform-0001.bin
From dp at ulaluma.com  Fri Jul 15 12:45:24 2005
From: dp at ulaluma.com (Donovan Preston)
Date: Fri Jul 15 12:45:33 2005
Subject: [Twisted-web] HTTP redirection from data_*/render_* methods
In-Reply-To: <20050715141748.GA1080@ospaz.ru>
References: <20050715104622.GA18115@jk.dev>
	<6.1.2.0.0.20050715073635.04c883f8@mail.myedl.com>
	<20050715141748.GA1080@ospaz.ru>
Message-ID: <2E0B3D2F-CDA2-4CFA-BD2E-22660E28ACE3@ulaluma.com>


On Jul 15, 2005, at 7:17 AM, <en.karpachov@ospaz.ru>  
<en.karpachov@ospaz.ru> wrote:

> On Fri, Jul 15, 2005 at 07:40:33AM -0600, Samuel Reynolds wrote:
>
>> At 2005-07-15 02:46 PM +0400, you wrote:
>>
>>> I wondered if I can make an HTTP redirection (302) from inside of  
>>> render_*
>>> or data_* method. Here is a code snipped I wrote; I'd like to  
>>> know if it
>>> can be considered as "good" nevow practice?
>>>
>>
>> What about
>>     request.redirect( redirectUrl )
>> possibly followed by
>>     request.finish()
>>
>
> It doesn't work when called from inside a render_something or  
> data_smth
> methods. If I redirect, I want the flattening process to stop  
> immediately,
> dropping request output accumulated so far. The only way to do it  
> is to
> raise an exception, cancelling normal flow.  Otherwise, flattening  
> will
> continue, and the request will be finished twice. Also, the http  
> reply will
> have non-empty body.

Even if you do raise an exception, all output generated up to that  
point will have already been sent out over the socket to the browser.  
This means the headers will already have been written, and  
redirecting will have no effect.

What you want instead is to set the "buffered" attribute of your Page  
class to true before it starts rendering. This will cause nevow to  
delay sending any output to the browser until the entire page is done  
rendering, allowing you to do a redirect in the middle of it.

Personally, I don't think it's a good idea. You should decide about  
the redirect up front, that way you avoid doing wasted work on the  
server. Buffering also isn't as cool, because pages will chunk in  
rather than streaming in.

Donovan


From en.karpachov at ospaz.ru  Sat Jul 16 02:02:39 2005
From: en.karpachov at ospaz.ru (en.karpachov@ospaz.ru)
Date: Sat Jul 16 02:03:21 2005
Subject: [Twisted-web] HTTP redirection from data_*/render_* methods
In-Reply-To: <2E0B3D2F-CDA2-4CFA-BD2E-22660E28ACE3@ulaluma.com>
References: <20050715141748.GA1080@ospaz.ru>
	<2E0B3D2F-CDA2-4CFA-BD2E-22660E28ACE3@ulaluma.com>
Message-ID: <20050716080239.GA17718@ospaz.ru>

On Fri, Jul 15, 2005 at 11:45:24AM -0700, Donovan Preston wrote:
> Even if you do raise an exception, all output generated up to that  
> point will have already been sent out over the socket to the browser.  
> This means the headers will already have been written, and  
> redirecting will have no effect.

It is why I set the buffered = True in my example.

> What you want instead is to set the "buffered" attribute of your Page  
> class to true before it starts rendering. This will cause nevow to  
> delay sending any output to the browser until the entire page is done  
> rendering, allowing you to do a redirect in the middle of it.
> 
> Personally, I don't think it's a good idea. You should decide about  
> the redirect up front, that way you avoid doing wasted work on the  

Well, one possible usage example could be

<table nevow:data="sqlquery" nevow:render="sequence">
  <tr nevow:pattern="item"><td>...</td></tr>
  <tr nevow:pattern="empty">
     <td nevow:render="redirect /notfound">None at all</td>
  </tr>
</table>

> server. Buffering also isn't as cool, because pages will chunk in  
> rather than streaming in.
> 
> Donovan

Thanks!

-- 
jk

From maillists at ivsn.com  Sat Jul 16 05:47:35 2005
From: maillists at ivsn.com (Paul Reznicek)
Date: Sat Jul 16 05:48:46 2005
Subject: [Twisted-web] using freeform bind_* instead of subclass
	TypedInterface
Message-ID: <42D8F3D7.1040305@ivsn.com>

Hello all,
using "bind_*" is very simple, nice and usable (try the example),
but I have several questions (see below):
# -------------------------------------------------------------------
from nevow import loaders
from nevow import rend
from nevow import tags as T

from formless import annotate
from formless import webform

class TestForm(rend.Page):
     addSlash = True
     def bind_two_fields(self, ctx):
         return [
             ('search', annotate.String(default='any text', label='Enter search string '), ),
             ('lines', annotate.Choice([10, 20, 30, ], default=20, label='set lines per page '), ),
             ('left', annotate.Button(label='<-'), ),
             ('right', annotate.Button(label='->'), ),
             ]

     def two_fields(self, **kwargs):
         print 'two_fields **kwargs:', kwargs

     docFactory = loaders.stan(T.html[T.body[webform.renderForms(), ] ] )

from nevow import appserver
from twisted.internet import reactor
reactor.listenTCP(8080, appserver.NevowSite(TestForm()))
reactor.run()
# -------------------------------------------------------------------

1. how to omit the automatically generated submit button "Call"
2. how to change (or skip) the displayed form name "Two _fields", resp. the whole frame ?
3. how to get all fields and buttons into one line, resp. one table row ?

Thanks for all hints and also for Nevow and Twisted!!!
Paul

From m-lists at the-moon.net  Sat Jul 16 08:33:32 2005
From: m-lists at the-moon.net (Richard Wall)
Date: Sat Jul 16 08:33:37 2005
Subject: [Twisted-web] using freeform bind_* instead of
	subclass	TypedInterface
In-Reply-To: <42D8F3D7.1040305@ivsn.com>
References: <42D8F3D7.1040305@ivsn.com>
Message-ID: <42D91ABC.90903@the-moon.net>

On 16/07/05 12:47 Paul Reznicek wrote:
> Hello all,
> using "bind_*" is very simple, nice and usable (try the example),

Yep, I prefer it too.

> but I have several questions (see below):

I've attached an example which (I think) addresses all these questions.
Also available at...
http://deadbeefbabe.org/paste/1124

> 1. how to omit the automatically generated submit button "Call"

Instead of returning a list of tuple(label, annotated types) return an
instance of formless.MethodBinding, whose constructor accepts an
action="My button label" kw argument

> 2. how to change (or skip) the displayed form name "Two _fields", resp.
> the whole frame ?
> 3. how to get all fields and buttons into one line, resp. one table row ?

In the example I have done this by providing my own form template
'Pattern', but another way might be to register your own
MethodBindingRenderer adaptor based on the one in formless/webform.py.

There has been talk on #twisted.web of removing the slot system and
encouraging use of render_ methods instead, so this example may need
altering in future. Perhaps Donovan or one of the other developers might
comment on whether there is a better / more future proof way of creating
custom forms. I might just have not understood what was being talked
about though. :-)

You might also want to look at pollenation's 'forms' system which works
at a lower level than formless / freeform...
http://forms-project.pollenation.net/

Hope that helps.
-- 
Richard Wall
-------------- next part --------------
A non-text attachment was scrubbed...
Name: customform.tac.gz
Type: application/x-gzip
Size: 1662 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-web/attachments/20050716/6e793089/customform.tac.bin
From dp at ulaluma.com  Sat Jul 16 13:22:34 2005
From: dp at ulaluma.com (Donovan Preston)
Date: Sat Jul 16 13:22:42 2005
Subject: [Twisted-web] using freeform bind_* instead of subclass
	TypedInterface
In-Reply-To: <42D8F3D7.1040305@ivsn.com>
References: <42D8F3D7.1040305@ivsn.com>
Message-ID: <0072137B-1558-4AE9-8D51-9CAB24D57C2C@ulaluma.com>


On Jul 16, 2005, at 4:47 AM, Paul Reznicek wrote:

> Hello all,
> using "bind_*" is very simple, nice and usable (try the example),
> but I have several questions (see below):

<snip>

I guess I should learn that attempting to remove a source of FAQs  
just introduces new FAQs :-)

> 1. how to omit the automatically generated submit button "Call"

Thanks for mentioning this. It gave me an idea about a better way to  
support submit buttons in formless (more like forms does it).  
However, in the meantime, would it be enough if it said "Submit"  
instead of "Call"? Or do you want no buttons at all?

> 2. how to change (or skip) the displayed form name "Two _fields",  
> resp. the whole frame ?

The convention is to use camelCase in the method and argument names.  
If you use camelCase the names should look nice.

> 3. how to get all fields and buttons into one line, resp. one table  
> row ?

For this, you'd have to customize the skin. It's pretty painful, but  
it is possible. There's an example of doing it in the examples  
directory.

Donovan

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-web/attachments/20050716/7d3fb8fa/attachment.htm
From dp at ulaluma.com  Sat Jul 16 13:30:44 2005
From: dp at ulaluma.com (Donovan Preston)
Date: Sat Jul 16 13:30:48 2005
Subject: [Twisted-web] using freeform bind_* instead of
	subclass	TypedInterface
In-Reply-To: <42D91ABC.90903@the-moon.net>
References: <42D8F3D7.1040305@ivsn.com> <42D91ABC.90903@the-moon.net>
Message-ID: <F3CC1124-AA4D-45AB-B67C-D62257F710A0@ulaluma.com>


On Jul 16, 2005, at 7:33 AM, Richard Wall wrote:

> There has been talk on #twisted.web of removing the slot system and
> encouraging use of render_ methods instead, so this example may need
> altering in future. Perhaps Donovan or one of the other developers  
> might
> comment on whether there is a better / more future proof way of  
> creating
> custom forms. I might just have not understood what was being talked
> about though. :-)

The discussion was mostly exploratory; nothing is likely to happen  
for months, if not years. Also, I don't think slots would ever go  
away fully. I would just like to replicate the way exarkun uses slots  
by changing the render calling convention to be more likable and useful.

It would be really nice if it were simpler to customize formless  
forms. Thanks for doing this example.

Donovan


From maillists at ivsn.com  Sun Jul 17 03:36:50 2005
From: maillists at ivsn.com (Paul Reznicek)
Date: Sun Jul 17 03:37:38 2005
Subject: [Twisted-web] using freeform bind_* instead
	of	subclass	TypedInterface
In-Reply-To: <42D91ABC.90903@the-moon.net>
References: <42D8F3D7.1040305@ivsn.com> <42D91ABC.90903@the-moon.net>
Message-ID: <42DA26B2.2050602@ivsn.com>

Richard Wall wrote:
> I've attached an example which (I think) addresses all these questions.
> http://deadbeefbabe.org/paste/1124

Thank you very much, the (simplified) result of my efforts is now at:
http://deadbeefbabe.org/paste/1135

Question to all:
Is there a more simple and flexible way to customize forms in Nevow?

--
Paul Reznicek

From kairanga at cox.net  Sun Jul 17 19:23:39 2005
From: kairanga at cox.net (Ranga Nathan)
Date: Sun Jul 17 19:24:20 2005
Subject: [Twisted-web] Perl servers for Twisted?
In-Reply-To: <20050714192833.26278.938223376.divmod.quotient.11793@ohm>
References: <20050714192833.26278.938223376.divmod.quotient.11793@ohm>
Message-ID: <42DB049B.8070209@cox.net>

Jp Calderone wrote:
> On Thu, 14 Jul 2005 11:38:01 -0700, Ranga Nathan <kairanga@cox.net> wrote:
> 
>> Is it possible to plug-in perl servers into Twisted framework?
>>
> 
> Perl CGIs?  Sure.  Other stuff?  Dunno, probably not.  What did you have 
> in mind?
> 

I need a multi-protocol server so the same input via different protocols 
can be processed without the server aware of the different protocols.

The protocol part needs to be abstracted from the server - perhaps 
through a config file.

> Jp
> 
> _______________________________________________
> Twisted-web mailing list
> Twisted-web@twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
> 



From exarkun at divmod.com  Sun Jul 17 20:37:13 2005
From: exarkun at divmod.com (Jp Calderone)
Date: Sun Jul 17 20:37:15 2005
Subject: [Twisted-web] Perl servers for Twisted?
In-Reply-To: <42DB049B.8070209@cox.net>
Message-ID: <20050718023713.26278.845538742.divmod.quotient.13912@ohm>

On Sun, 17 Jul 2005 18:23:39 -0700, Ranga Nathan <kairanga@cox.net> wrote:
>Jp Calderone wrote:
>>On Thu, 14 Jul 2005 11:38:01 -0700, Ranga Nathan <kairanga@cox.net> wrote:
>>>Is it possible to plug-in perl servers into Twisted framework?
>>
>>Perl CGIs?  Sure.  Other stuff?  Dunno, probably not.  What did you have in 
>>mind?
>
>I need a multi-protocol server so the same input via different protocols can 
>be processed without the server aware of the different protocols.
>
>The protocol part needs to be abstracted from the server - perhaps through a 
>config file.

I don't see anything about perl there...

Jp

From en.karpachov at ospaz.ru  Sun Jul 17 23:53:58 2005
From: en.karpachov at ospaz.ru (en.karpachov@ospaz.ru)
Date: Sun Jul 17 23:52:54 2005
Subject: [Twisted-web] renderInlineException - what is it for?
Message-ID: <20050718055358.GA2418@jk.dev>

The ICanHandleException interface has two methods in its API:
renderHTTP_exception and renderInlineException. What is the latter for?
I wasn't able to find any use of it, neither in the nevow source nor in
examples.

-- 
jk

From maillists at ivsn.com  Mon Jul 18 01:58:35 2005
From: maillists at ivsn.com (Paul Reznicek)
Date: Mon Jul 18 01:59:29 2005
Subject: [Twisted-web] using freeform bind_* instead of
	subclass	TypedInterface
In-Reply-To: <0072137B-1558-4AE9-8D51-9CAB24D57C2C@ulaluma.com>
References: <42D8F3D7.1040305@ivsn.com>
	<0072137B-1558-4AE9-8D51-9CAB24D57C2C@ulaluma.com>
Message-ID: <42DB612B.1040809@ivsn.com>

Donovan Preston wrote:
> 
> I guess I should learn that attempting to remove a source of FAQs just 
> introduces new FAQs :-)
> 
>> 1. how to omit the automatically generated submit button "Call"
> 
> Thanks for mentioning this. It gave me an idea about a better way to 
> support submit buttons in formless (more like forms does it). However, 
> in the meantime, would it be enough if it said "Submit" instead of 
> "Call"? Or do you want no buttons at all?

Sorry, the name should be a parameter, not all people understand English,
not all time is the action a "call" or a "submit".

>> 2. how to change (or skip) the displayed form name "Two _fields", 
>> resp. the whole frame ?
> 
> The convention is to use camelCase in the method and argument names. If 
> you use camelCase the names should look nice.

But the name of the frame is on this way not translatable. I prefer to
code in English, and using this automatism would push me to code in Czech
for a Czech application, than recode in German, than ...

>> 3. how to get all fields and buttons into one line, resp. one table row ?
> 
> For this, you'd have to customize the skin. It's pretty painful, but it 
> is possible. There's an example of doing it in the examples directory.

I believe, that except the examples in Nevow distribution, everybody NEED
customized skins. Partial effect can be reached with custom css, but not all
necessary tasks. I've tried to do this using ideas and help from Richard Wall
(see my previous message) and the result is more complicated, than render
a form manually.

Nevow is very nice, the livepage technique is great, only the creating and
maintaining of multi-language user interfaces seems to be complicated.
Something like this could be cool in my opinion:

bind_XYZ(self, ctx):
     formType = None      # same effect as skip formType attr. = classical form
# other predefined types can be:
#  'inLineAll':       label:field | label:field ... button(s)
#  'inLineNoLabel':   field | field ... button(s)
#  'twoColunms':      label:field        | label:field
#                     label:field        | button(s)
# ...

     formName = None      # same effect as skip formName attr. = NO form name
#    formName = True      # autogenerate form name (behavior now)
#    formName = _('Testing form 1')     # use this name

     formFrame = None     # same effect as skip formFrame attr. = NO form border
#    formFrame = True     # autogenerate form border (behavior now)
#    formFrame = 'css_class_name'     # modify the default

     submitButton = _('OK')  # use this value (label)
#    submitButton = True     # autogenerate submitButton (behavior now)
#    submitButton = None     # same effect as skip submitButton attr. = NO button

     resetButton = None      # same effect as skip resetButton attr. = NO button
     ...

Also, an easy way to set error messages from application will be nice.
The English message "Please enter a string." is not so user-friendly, like
a (localizable) message i.e. _('Please enter your family name').

Thank you for all the work
Paul


From m-lists at the-moon.net  Mon Jul 18 05:21:56 2005
From: m-lists at the-moon.net (Richard Wall)
Date: Mon Jul 18 05:22:00 2005
Subject: Freeform default button label (Was: [Twisted-web] using freeform
	bind_* instead of subclass TypedInterface)
In-Reply-To: <0072137B-1558-4AE9-8D51-9CAB24D57C2C@ulaluma.com>
References: <42D8F3D7.1040305@ivsn.com>
	<0072137B-1558-4AE9-8D51-9CAB24D57C2C@ulaluma.com>
Message-ID: <42DB90D4.8060709@the-moon.net>

On 16/07/05 20:22 Donovan Preston wrote:
> Thanks for mentioning this. It gave me an idea about a better way to 
> support submit buttons in formless (more like forms does it).  However,
> in the meantime, would it be enough if it said "Submit"  instead of
> "Call"? Or do you want no buttons at all?

I think "Submit" would be a much better default.

It might be useful to be able to add extra buttons to the form but in
most cases I find it better to have one submit button and a series of
hyperlinks css styled as buttons.

For example a form that saves a DB record at...
http://www.example.com/events/1/edit
...would save its contents to recordID=1.
A "cancel" button would link to...
http://www.example.com/events/1/
...a "delete" button would link directly to...
http://www.example.com/events/1/delete
...which presents a confirmation form. Finally a "duplicate" button
links to...
http://www.example.com/events/new/?id=1

I'm sure there are usecases for multiple submit buttons but I haven't
yet needed them.

-RichardW.
-- 
Richard Wall <richard@the-moon.net>

From simon at hedberg.net  Mon Jul 18 05:57:23 2005
From: simon at hedberg.net (Mobilisera.com)
Date: Mon Jul 18 05:58:10 2005
Subject: Freeform default button label (Was: [Twisted-web] using
	freeformbind_* instead of subclass TypedInterface)
In-Reply-To: <42DB90D4.8060709@the-moon.net>
Message-ID: <000601c58b8f$dc1a1c10$38aa20d4@hp>

One usecase is for example having a message form and having one button
for 'save' and another one for 'save and send'.

-----Original Message-----
From: twisted-web-bounces@twistedmatrix.com
[mailto:twisted-web-bounces@twistedmatrix.com] On Behalf Of Richard Wall
Sent: den 18 juli 2005 13:22
To: Discussion of twisted.web, Nevow, and Woven
Subject: Freeform default button label (Was: [Twisted-web] using
freeformbind_* instead of subclass TypedInterface)


On 16/07/05 20:22 Donovan Preston wrote:
> Thanks for mentioning this. It gave me an idea about a better way to
> support submit buttons in formless (more like forms does it).
However,
> in the meantime, would it be enough if it said "Submit"  instead of
> "Call"? Or do you want no buttons at all?

I think "Submit" would be a much better default.

It might be useful to be able to add extra buttons to the form but in
most cases I find it better to have one submit button and a series of
hyperlinks css styled as buttons.

For example a form that saves a DB record at...
http://www.example.com/events/1/edit
...would save its contents to recordID=1.
A "cancel" button would link to... http://www.example.com/events/1/ ...a
"delete" button would link directly to...
http://www.example.com/events/1/delete
...which presents a confirmation form. Finally a "duplicate" button
links to... http://www.example.com/events/new/?id=1

I'm sure there are usecases for multiple submit buttons but I haven't
yet needed them.

-RichardW.
-- 
Richard Wall <richard@the-moon.net>

_______________________________________________
Twisted-web mailing list
Twisted-web@twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web


From m-lists at the-moon.net  Mon Jul 18 06:29:04 2005
From: m-lists at the-moon.net (Richard Wall)
Date: Mon Jul 18 06:29:10 2005
Subject: [Twisted-web] Freeform customisation (Was: using freeform bind_*
 instead of	subclass TypedInterface)
In-Reply-To: <F3CC1124-AA4D-45AB-B67C-D62257F710A0@ulaluma.com>
References: <42D8F3D7.1040305@ivsn.com> <42D91ABC.90903@the-moon.net>
	<F3CC1124-AA4D-45AB-B67C-D62257F710A0@ulaluma.com>
Message-ID: <42DBA090.6070905@the-moon.net>

On 16/07/05 20:30 Donovan Preston wrote:
> It would be really nice if it were simpler to customize formless  forms.
> Thanks for doing this example.

I think that the customisation facilities in formless are really clever.
I haven't seen another system that allows you to set out your forms so
precisely while still allowing the automatic validation and filling in
of defaults etc.

If there was a way of grouping input elements in the bind_* method and
have them rendered inside fieldsets that would be good. Perhaps you
could just add a "groupname" parameter to annotate.Type and use that
somehow.

It did take me a while to get to grips with the slots etc and I think it
would be good to have more examples. Also note that the customforms
example doesn't mention the argument!!?? slot, which I find the most
useful of all.

It should also probably be mentioned that you don't *have* to define the
general argument layout. If you are happy with the default and just want
 to control the position the inputs then you only have to define
form-action and argument!!?? slots.

I have attached a patch to the customform.py example which shows usage
of the argument!!?? slot and also uses the new bind_* methods.
Or view the file at http://deadbeefbabe.org/paste/1141

I don't think that the Forms (http://forms-project.pollenation.net)
allows the same level of customisation, although there used to be
"ideas.txt" and "issues.txt" that mention "interleave mode where you get
to define lots of HTML and the forms.form weaves
itself in" and "Nested groups of fields (Structure)" respectively...
http://forms-project.pollenation.net/cgi-bin/trac.cgi/file/trunk/ideas.txt?rev=2
http://forms-project.pollenation.net/cgi-bin/trac.cgi/file/trunk/issues.txt?rev=2
...when Forms has those capabilities it will be really useful.
-- 
Richard Wall
-------------- next part --------------
A non-text attachment was scrubbed...
Name: nevow-examples-customform.patch
Type: text/x-patch
Size: 4540 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-web/attachments/20050718/491fcc6d/nevow-examples-customform.bin
From m-lists at the-moon.net  Mon Jul 18 06:36:55 2005
From: m-lists at the-moon.net (Richard Wall)
Date: Mon Jul 18 06:37:01 2005
Subject: [Twisted-web] using freeform bind_* instead
	of	subclass	TypedInterface
In-Reply-To: <42DB612B.1040809@ivsn.com>
References: <42D8F3D7.1040305@ivsn.com>	<0072137B-1558-4AE9-8D51-9CAB24D57C2C@ulaluma.com>
	<42DB612B.1040809@ivsn.com>
Message-ID: <42DBA267.3060208@the-moon.net>

On 18/07/05 08:58 Paul Reznicek wrote:

> I believe, that except the examples in Nevow distribution, everybody
> NEED customized skins. Partial effect can be reached with custom css,
> but not all necessary tasks.

I think the default form / argument layout could be improved. I'd prefer
a layout using definition lists (as demonstrated in my example) for
inputs, labels and errors. Thats way the form looks presentable without
the css and actually looks quite good in lynx.

> I've tried to do this using ideas and help from Richard Wall (see my
> previous message) and the result is more complicated, than render a
> form manually.

I don't agree there. Even though you have to write more html, it is
still simpler than writing the full form by hand, and you get all the
benefits of formless validation messages etc.

Remember that you don't have to define the n:pattern="argument" if you
are happy with the formless default. Just define the form-action and
argument!!?? slots.
-- 
Richard Wall

From foom at fuhm.net  Mon Jul 18 07:38:10 2005
From: foom at fuhm.net (James Y Knight)
Date: Mon Jul 18 07:38:21 2005
Subject: [Twisted-web] renderInlineException - what is it for?
In-Reply-To: <20050718055358.GA2418@jk.dev>
References: <20050718055358.GA2418@jk.dev>
Message-ID: <0E069EAB-3A0F-4A7D-8F7B-8ED570997D78@fuhm.net>

Huh, yes. It's supposed to be used to render an exception in the  
middle of the page. It's used in nevow/flat/flatstan.py,  
ContextSerializer. However, at the use, it is called  
"renderInlineError". Oops!

James

On Jul 18, 2005, at 1:53 AM, <en.karpachov@ospaz.ru>  
<en.karpachov@ospaz.ru> wrote:

> The ICanHandleException interface has two methods in its API:
> renderHTTP_exception and renderInlineException. What is the latter  
> for?
> I wasn't able to find any use of it, neither in the nevow source  
> nor in
> examples.
>


From radeex at gmail.com  Mon Jul 18 07:42:57 2005
From: radeex at gmail.com (Christopher Armstrong)
Date: Mon Jul 18 07:43:03 2005
Subject: [Twisted-web] renderInlineException - what is it for?
In-Reply-To: <0E069EAB-3A0F-4A7D-8F7B-8ED570997D78@fuhm.net>
References: <20050718055358.GA2418@jk.dev>
	<0E069EAB-3A0F-4A7D-8F7B-8ED570997D78@fuhm.net>
Message-ID: <60ed19d405071806426d9bcb4c@mail.gmail.com>

I wondered why that never seemed to work any more.

On 7/18/05, James Y Knight <foom@fuhm.net> wrote:
> Huh, yes. It's supposed to be used to render an exception in the
> middle of the page. It's used in nevow/flat/flatstan.py,
> ContextSerializer. However, at the use, it is called
> "renderInlineError". Oops!
> 
> James
> 
> On Jul 18, 2005, at 1:53 AM, <en.karpachov@ospaz.ru>
> <en.karpachov@ospaz.ru> wrote:
> 
> > The ICanHandleException interface has two methods in its API:
> > renderHTTP_exception and renderInlineException. What is the latter
> > for?
> > I wasn't able to find any use of it, neither in the nevow source
> > nor in
> > examples.
> >
> 
> 
> _______________________________________________
> Twisted-web mailing list
> Twisted-web@twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
> 
> 


-- 
  Twisted   |  Christopher Armstrong: International Man of Twistery
   Radix    |    -- http://radix.twistedmatrix.com
            |  Release Manager, Twisted Project
  \\\V///   |    -- http://twistedmatrix.com
   |o O|    |  
w----v----w-+

From matt at pollenation.net  Mon Jul 18 07:57:41 2005
From: matt at pollenation.net (Matt Goodall)
Date: Mon Jul 18 07:57:40 2005
Subject: [Twisted-web] Freeform customisation (Was: using freeform bind_*
	instead of	subclass TypedInterface)
In-Reply-To: <42DBA090.6070905@the-moon.net>
References: <42D8F3D7.1040305@ivsn.com>
	<42D91ABC.90903@the-moon.net>	<F3CC1124-AA4D-45AB-B67C-D62257F710A0@ulaluma.com>
	<42DBA090.6070905@the-moon.net>
Message-ID: <42DBB555.8030901@pollenation.net>

Richard Wall wrote:
> On 16/07/05 20:30 Donovan Preston wrote:

[snip]

> I don't think that the Forms (http://forms-project.pollenation.net)
> allows the same level of customisation,

You're correct, it doesn't, but only because I've not needed it yet. One
day, if forms is to be useful, it will need to support a custom template
too.

 although there used to be
> "ideas.txt" and "issues.txt" that mention "interleave mode where you get
> to define lots of HTML and the forms.form weaves
> itself in" and "Nested groups of fields (Structure)" respectively...
> http://forms-project.pollenation.net/cgi-bin/trac.cgi/file/trunk/ideas.txt?rev=2
> http://forms-project.pollenation.net/cgi-bin/trac.cgi/file/trunk/issues.txt?rev=2
> ...when Forms has those capabilities it will be really useful.

Yep, I removed those two files and moved the points in them to Trac issues.

Cheers, Matt

-- 
     __
    /  \__     Matt Goodall, Pollenation Internet Ltd
    \__/  \    w: http://www.pollenation.net
  __/  \__/    e: matt@pollenation.net
 /  \__/  \    t: +44 (0)113 2252500
 \__/  \__/
 /  \          Any views expressed are my own and do not necessarily
 \__/          reflect the views of my employer.

From m-lists at the-moon.net  Mon Jul 18 09:22:34 2005
From: m-lists at the-moon.net (Richard Wall)
Date: Mon Jul 18 09:22:37 2005
Subject: [Twisted-web] How do you customise the Freeform form-error message
Message-ID: <42DBC93A.80102@the-moon.net>

When a form error occurs, the form-error slot gets filled with the text
"Error:". Is there a way to customise this? Or could the default at
least be expanded a bit? eg Error: There were errors in your data,
please check and try again"

Having browsed through the source, it looks like it might be possible to
summarise in the form-error slot those fields which didn't validate. Eg
Error: Name, Age

Thanks.
-- 
Richard Wall

From maillists at ivsn.com  Mon Jul 18 12:16:41 2005
From: maillists at ivsn.com (Paul Reznicek)
Date: Mon Jul 18 12:17:37 2005
Subject: [Twisted-web] Re: Freeform default button label (+How do you
 customise the Freeform form-error message)
In-Reply-To: <42DB90D4.8060709@the-moon.net>
References: <42D8F3D7.1040305@ivsn.com>	<0072137B-1558-4AE9-8D51-9CAB24D57C2C@ulaluma.com>
	<42DB90D4.8060709@the-moon.net>
Message-ID: <42DBF209.7030403@ivsn.com>

I see a lot of usecases for more buttons, one I'm writing now:
DB record browser/editor, where are at least
   [previous|next|search] + [reload|new|copy|save|delete]
are necessary.
You are right, it is possible to do this with hyperlinks,
but this allow users to bookmark every of this actions,
and to use the browser's back button with undesired effects.

To extend the discussion about freeform:
- please also pay attention to the fact, that all labels, errors
messages, tips, etc. should be easy localizable.
- error messages can vary depending on field contents:
integer error is from user's point of view not a numeric error,
(i.e. "please enter your age as whole number")

Paul

Richard Wall wrote:
> On 16/07/05 20:22 Donovan Preston wrote:
> 
>>Thanks for mentioning this. It gave me an idea about a better way to 
>>support submit buttons in formless (more like forms does it).  However,
>>in the meantime, would it be enough if it said "Submit"  instead of
>>"Call"? Or do you want no buttons at all?
> 
> 
> I think "Submit" would be a much better default.
> 
> It might be useful to be able to add extra buttons to the form but in
> most cases I find it better to have one submit button and a series of
> hyperlinks css styled as buttons.
> 
> For example a form that saves a DB record at...
> http://www.example.com/events/1/edit
> ...would save its contents to recordID=1.
> A "cancel" button would link to...
> http://www.example.com/events/1/
> ...a "delete" button would link directly to...
> http://www.example.com/events/1/delete
> ...which presents a confirmation form. Finally a "duplicate" button
> links to...
> http://www.example.com/events/new/?id=1
> 
> I'm sure there are usecases for multiple submit buttons but I haven't
> yet needed them.
> 
> -RichardW.


From maillists at ivsn.com  Mon Jul 18 12:47:08 2005
From: maillists at ivsn.com (Paul Reznicek)
Date: Mon Jul 18 12:47:47 2005
Subject: [Twisted-web] using freeform bind_*
	instead	of	subclass	TypedInterface
In-Reply-To: <42DBA267.3060208@the-moon.net>
References: <42D8F3D7.1040305@ivsn.com>	<0072137B-1558-4AE9-8D51-9CAB24D57C2C@ulaluma.com>	<42DB612B.1040809@ivsn.com>
	<42DBA267.3060208@the-moon.net>
Message-ID: <42DBF92C.5090605@ivsn.com>

Richard Wall wrote:
<snap>
> I think the default form / argument layout could be improved. I'd prefer
> a layout using definition lists (as demonstrated in my example) for
> inputs, labels and errors. Thats way the form looks presentable without
> the css and actually looks quite good in lynx.

I'm not sure, how many end-users browse the web with lynx, I'm afraid 0.
Using <dl> is indeed very effective with absolutely low costs, but not
universal enough for all applications.
BTW: Nice web-design is a "must have" today - one very nice is at
   http://divmod.com    and   http://divmod.org
But I cant find any page using freeform there...

>>I've tried to do this using ideas and help from Richard Wall (see my
>>previous message) and the result is more complicated, than render a
>>form manually.
> 
> I don't agree there. Even though you have to write more html, it is
> still simpler than writing the full form by hand, and you get all the
> benefits of formless validation messages etc.

Unfortunately, the benefit of validation is not so high, because there
is no easy way to customize and localize the error messages. The only plus
is, there are lot of samples, how to write own validators + the framework.

> Remember that you don't have to define the n:pattern="argument" if you
> are happy with the formless default. Just define the form-action and
> argument!!?? slots.

As written above - nice, variable skins are necessary.
Thank you very much for your examples, you helped me to find the way
to own skins.
-Paul

From m-lists at the-moon.net  Mon Jul 18 15:36:09 2005
From: m-lists at the-moon.net (Richard Wall)
Date: Mon Jul 18 15:36:10 2005
Subject: [Twisted-web] Freeform localisation and buttons (Was: Freeform
	default button label)
In-Reply-To: <42DBF209.7030403@ivsn.com>
References: <42D8F3D7.1040305@ivsn.com>	<0072137B-1558-4AE9-8D51-9CAB24D57C2C@ulaluma.com>	<42DB90D4.8060709@the-moon.net>
	<42DBF209.7030403@ivsn.com>
Message-ID: <42DC20C9.9000500@the-moon.net>

On 18/07/05 19:16 Paul Reznicek wrote:
> I see a lot of usecases for more buttons, one I'm writing now:
> DB record browser/editor, where are at least
>   [previous|next|search] + [reload|new|copy|save|delete]
> are necessary.
> You are right, it is possible to do this with hyperlinks,
> but this allow users to bookmark every of this actions,
> and to use the browser's back button with undesired effects.

Paul, you know your webapp best... but in my experience this could also
be achieved with a single submit button and supplementary hyperlinks.
Assuming that the page above is a form representing the state of a
single record...

Next / Previous - hyperlinks *because* that will allow the user to
bookmark particular pages.

Search - a submit button but associated with a separate search form.

Save - The single submit button to POST the form. Formless does an http
redirect after a successful post so the back button shouldn't be a problem.

*Cancel - I hyperlink to the previous page or to a datagrid / index of
records. Although you didn't mention it, I think it's a good to provide
users with a way of escaping from the form.

The following would only be shown for saved records...

Reload - a hyperlink to the current resource. To discard changes made to
the data. (Although a simple <input type="reset"> might do that

New - Hyperlink to a blank form.

Copy - Hyperlink to a form prefilled with the data of the source record,
but unsaved.

Delete - a hyperlink to a deletion confirmation page displaying the
record that is to be deleted. With a single submit button to confirm
deletion, and which http POSTs so that the deletion url cannot be
bookmarked.

> To extend the discussion about freeform:
> - please also pay attention to the fact, that all labels, errors
> messages, tips, etc. should be easy localizable.

I've never done a foreign language site, but I can see that this would
be useful. I just tried hacking the i18n example a bit and have found
that you can use an i18n.Translator as the label, requiredFailMessage
parameters to the eg annotate.String. Have attached tgz archive of the
app. It seems really cool, but I haven't had time to figure out how to
generate the .mo files from the .po files. It would be good if that
could be done automatically when the .po files change. Maybe you'll
better understand that side of things.

> - error messages can vary depending on field contents:
> integer error is from user's point of view not a numeric error,
> (i.e. "please enter your age as whole number")

You might get away with annotate.String(requiredFailMessage="please
enter your age as whole number")

More likely, you'll want to create your own library of formless types,
processors and renderers. For ideas see second attachement.

-- 
Richard Wall
-------------- next part --------------
A non-text attachment was scrubbed...
Name: i18n-form-fields.tgz
Type: application/x-compressed-tar
Size: 2118 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-web/attachments/20050718/2f5bac02/i18n-form-fields.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rwall-formless-types.tgz
Type: application/x-compressed-tar
Size: 4848 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-web/attachments/20050718/2f5bac02/rwall-formless-types.bin
From m-lists at the-moon.net  Mon Jul 18 15:45:37 2005
From: m-lists at the-moon.net (Richard Wall)
Date: Mon Jul 18 15:45:37 2005
Subject: [Twisted-web] Freeform input layout using definition lists (Was:
 using freeform bind_*	instead	of subclass TypedInterface)
In-Reply-To: <42DBF92C.5090605@ivsn.com>
References: <42D8F3D7.1040305@ivsn.com>	<0072137B-1558-4AE9-8D51-9CAB24D57C2C@ulaluma.com>	<42DB612B.1040809@ivsn.com>	<42DBA267.3060208@the-moon.net>
	<42DBF92C.5090605@ivsn.com>
Message-ID: <42DC2301.7050800@the-moon.net>

On 18/07/05 19:47 Paul Reznicek wrote:

> I'm not sure, how many end-users browse the web with lynx, I'm afraid 0.
> Using <dl> is indeed very effective with absolutely low costs, but not
> universal enough for all applications.

It's not just for Lynx, it looks and reads better in any CSS disabled
browser. Use CSS to make it look cool. See...
http://www.clagnut.com/blog/241/
http://www.devarticles.com/c/a/Web-Design-Standards/Web-Forms/2/
-- 
Richard Wall

From maillists at ivsn.com  Tue Jul 19 14:33:42 2005
From: maillists at ivsn.com (Paul Reznicek)
Date: Tue Jul 19 14:34:50 2005
Subject: [Twisted-web] Freeform localisation and buttons (Was: Freeform
	default button label)
In-Reply-To: <42DC20C9.9000500@the-moon.net>
References: <42D8F3D7.1040305@ivsn.com>	<0072137B-1558-4AE9-8D51-9CAB24D57C2C@ulaluma.com>	<42DB90D4.8060709@the-moon.net>	<42DBF209.7030403@ivsn.com>
	<42DC20C9.9000500@the-moon.net>
Message-ID: <42DD63A6.5000202@ivsn.com>

Richard Wall wrote:
<snap>
> Paul, you know your webapp best... but in my experience this could also
> be achieved with a single submit button and supplementary hyperlinks.
> ... <snap>
You are right, me maybe too - it's matter of taste and the experience level
of users: I've seen situations, where the use of browser's back button produced
very confusing situations, so I prefer to disable uncontrolled step-back
while any edit/insert/delete action.

> I've never done a foreign language site, but I can see that this would
> be useful. I just tried hacking the i18n example a bit and have found
> that you can use an i18n.Translator as the label, requiredFailMessage
> parameters to the eg annotate.String. Have attached tgz archive of the
> app. It seems really cool, but I haven't had time to figure out how to
> generate the .mo files from the .po files. It would be good if that
> could be done automatically when the .po files change. Maybe you'll
> better understand that side of things.
> 
THAT'S IT !!! (with little limitations) THANKS - I've not realized this
possibility before.
To extract _('messages'), translate and create *.mo files, I can recommend
" poEdit " release 1.3.2 or above, works very well with Python.

>>- error messages can vary depending on field contents:
>>integer error is from user's point of view not a numeric error,
>>(i.e. "please enter your age as whole number")
> 
> You might get away with annotate.String(requiredFailMessage="please
> enter your age as whole number")
Good solution for required message, but ...
> More likely, you'll want to create your own library of formless types,
> processors and renderers. For ideas see second attachement.
... this way seems to be more efficient, because here I can place
translation of all texts + own validators can be extended to range too
(i.e. age field accept values only between 5 to 99, although integer has
other range)

Thank you again for help, if my efforts are successful, I hope to pay
back with posting some usable validators, etc.
-Paul

From maillists at ivsn.com  Tue Jul 19 14:35:45 2005
From: maillists at ivsn.com (Paul Reznicek)
Date: Tue Jul 19 14:36:27 2005
Subject: [Twisted-web] Freeform input layout using definition lists (Was:
	using freeform bind_*	instead	of subclass TypedInterface)
In-Reply-To: <42DC2301.7050800@the-moon.net>
References: <42D8F3D7.1040305@ivsn.com>	<0072137B-1558-4AE9-8D51-9CAB24D57C2C@ulaluma.com>	<42DB612B.1040809@ivsn.com>	<42DBA267.3060208@the-moon.net>	<42DBF92C.5090605@ivsn.com>
	<42DC2301.7050800@the-moon.net>
Message-ID: <42DD6421.9030506@ivsn.com>

Richard Wall wrote:
<snap>
> It's not just for Lynx, it looks and reads better in any CSS disabled
> browser. Use CSS to make it look cool. See...
> http://www.clagnut.com/blog/241/
> http://www.devarticles.com/c/a/Web-Design-Standards/Web-Forms/2/

Clear and helpful - your right - thanks
-Paul

From grendel at caudium.net  Tue Jul 19 18:17:48 2005
From: grendel at caudium.net (Marek Habersack)
Date: Tue Jul 19 18:18:13 2005
Subject: [Twisted-web] exception in formless with a few nevow examples
Message-ID: <20050720001748.GA3877@beowulf.thanes.org>

Hello,

  This is my first post to the list and I'm quite a newcomer to twisted and
nevow, so forgive me if the issue is already known. The problem is with some
Nevow examples (e.g. formpost, userdb, db, customform, formbuilder - you can
see the problem at
http://nevowexamples.adytum.us/{formpost,db,customform,formbuilder}/), the
following exception occurs when the samples are run:

 exceptions.NameError: global name 'cf' is not defined

With the exception of userdb (which seems to give a slightly incorrect
traceback for the exception), the problem seems to originate at line 449 in
formless/webform.py:

447  def formRenderer(ctx, data):
448      cf = ctx.locate(iformless.IConfigurableFactory)
449      return util.maybeDeferred(cf.locateConfigurable, ctx, configurableKey
450                                  ).addCallback(_formRenderIt)

I'm not sure whether my guess is correct, but I perhaps the local 'cf'
variable has been garbage-collected before the _runCallbacks routine in
twisted/internet/defer.py calls the _formRenderIt?

I'm not familiar enough with Python yet to check whether my assumption is
right or not, but I'm sure somebody on the list will be able to verify that
without any problem.

I'm using twisted 2.0.1, latest Nevow svn and python 2.4 on an Ubuntu/breezy 
system.

tia,

marek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://twistedmatrix.com/pipermail/twisted-web/attachments/20050720/b68ddee3/attachment.bin
From exarkun at divmod.com  Tue Jul 19 20:40:39 2005
From: exarkun at divmod.com (Jp Calderone)
Date: Tue Jul 19 20:40:43 2005
Subject: [Twisted-web] exception in formless with a few nevow examples
In-Reply-To: <20050720001748.GA3877@beowulf.thanes.org>
Message-ID: <20050720024039.26278.513438150.divmod.quotient.14944@ohm>

On Wed, 20 Jul 2005 02:17:48 +0200, Marek Habersack <grendel@caudium.net> wrote:
>Hello,
>
>  This is my first post to the list and I'm quite a newcomer to twisted and
>nevow, so forgive me if the issue is already known. The problem is with some
>Nevow examples (e.g. formpost, userdb, db, customform, formbuilder - you can
>see the problem at
>http://nevowexamples.adytum.us/{formpost,db,customform,formbuilder}/), the
>following exception occurs when the samples are run:
>
> exceptions.NameError: global name 'cf' is not defined
>
>With the exception of userdb (which seems to give a slightly incorrect
>traceback for the exception), the problem seems to originate at line 449 in
>formless/webform.py:
>
>447  def formRenderer(ctx, data):
>448      cf = ctx.locate(iformless.IConfigurableFactory)
>449      return util.maybeDeferred(cf.locateConfigurable, ctx, configurableKey
>450                                  ).addCallback(_formRenderIt)
>
>I'm not sure whether my guess is correct, but I perhaps the local 'cf'
>variable has been garbage-collected before the _runCallbacks routine in
>twisted/internet/defer.py calls the _formRenderIt?
>

Objects never get garbage collected in Python until it is safe for them to be garbage collected.  When there is code relying on their existence that might yet execute, it is not safe.

The real problem is that _formRenderIt is an entirely separate function, and it thinks "cf" is a local, but it's totally not.  This is fixed in current svn trunk@HEAD, but was broken in the 0.4.1 release.

Of course, with this error fixed, the code path that can successfully execute is one that warns you that your application is written wrong.  So everything isn't /perfect/, but at least it becomes more apparent what the real problem is.

Jp

From grendel at caudium.net  Wed Jul 20 03:33:46 2005
From: grendel at caudium.net (Marek Habersack)
Date: Wed Jul 20 03:34:08 2005
Subject: [Twisted-web] exception in formless with a few nevow examples
In-Reply-To: <20050720024039.26278.513438150.divmod.quotient.14944@ohm>
References: <20050720001748.GA3877@beowulf.thanes.org>
	<20050720024039.26278.513438150.divmod.quotient.14944@ohm>
Message-ID: <20050720093346.GA5718@beowulf.thanes.org>

On Tue, Jul 19, 2005 at 10:40:39PM -0400, Jp Calderone scribbled:
[snip]
> >With the exception of userdb (which seems to give a slightly incorrect
> >traceback for the exception), the problem seems to originate at line 449 in
> >formless/webform.py:
> >
> >447  def formRenderer(ctx, data):
> >448      cf = ctx.locate(iformless.IConfigurableFactory)
> >449      return util.maybeDeferred(cf.locateConfigurable, ctx, 
> >configurableKey
> >450                                  ).addCallback(_formRenderIt)
> >
> >I'm not sure whether my guess is correct, but I perhaps the local 'cf'
> >variable has been garbage-collected before the _runCallbacks routine in
> >twisted/internet/defer.py calls the _formRenderIt?
> >
> 
> Objects never get garbage collected in Python until it is safe for them to 
> be garbage collected.  When there is code relying on their existence that 
> might yet execute, it is not safe.
Yep, I kind of thought it could have been some obscure bug in the Python
garbage collector code.

> The real problem is that _formRenderIt is an entirely separate function, 
> and it thinks "cf" is a local, but it's totally not.  This is fixed in 
> current svn trunk@HEAD, but was broken in the 0.4.1 release.
Indeed, everything works just fine now, thanks.

regards,

marek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://twistedmatrix.com/pipermail/twisted-web/attachments/20050720/be05c07e/attachment.bin
From simon at hedberg.net  Wed Jul 20 06:27:15 2005
From: simon at hedberg.net (Simon Hedberg)
Date: Wed Jul 20 06:28:07 2005
Subject: [Twisted-web] Freeform localisation and buttons (Was:
	Freeformdefault button label)
In-Reply-To: <42DC20C9.9000500@the-moon.net>
Message-ID: <001601c58d26$5d386da0$38aa20d4@hp>

To follow up on this thread on button issues I want to share the
following with you. 
Since I want multiple buttons per form in my app I started digging a bit
in webform.py. I've came up with the supplied patch that makes this a
more pleasant experience by making the button renderer pick up template
patterns.
This makes buttons appear at the right place even when doing custom
layouts and also makes it possible to create patterns that use image
buttons. Have a look at the supplied example (run twistd -noy
buttonexample.py). After applying the patch the extra buttons should
appear in the right place and one of them will be in the form of the
twisted logo.

Hope this helps.
And anyone with commit access; feel free to commit the patch to trunk if
you think it's ok.

Final note: To remove the default button just exclude the form-button
slot in your custom template. In the example this is done dynamically
using a render method.

/Simon

-----Original Message-----
From: twisted-web-bounces@twistedmatrix.com
[mailto:twisted-web-bounces@twistedmatrix.com] On Behalf Of Richard Wall
Sent: den 18 juli 2005 23:36
To: Discussion of twisted.web, Nevow, and Woven
Subject: [Twisted-web] Freeform localisation and buttons (Was:
Freeformdefault button label)


On 18/07/05 19:16 Paul Reznicek wrote:
> I see a lot of usecases for more buttons, one I'm writing now: DB 
> record browser/editor, where are at least
>   [previous|next|search] + [reload|new|copy|save|delete]
> are necessary.
> You are right, it is possible to do this with hyperlinks,
> but this allow users to bookmark every of this actions,
> and to use the browser's back button with undesired effects.

Paul, you know your webapp best... but in my experience this could also
be achieved with a single submit button and supplementary hyperlinks.
Assuming that the page above is a form representing the state of a
single record...

Next / Previous - hyperlinks *because* that will allow the user to
bookmark particular pages.

Search - a submit button but associated with a separate search form.

Save - The single submit button to POST the form. Formless does an http
redirect after a successful post so the back button shouldn't be a
problem.

*Cancel - I hyperlink to the previous page or to a datagrid / index of
records. Although you didn't mention it, I think it's a good to provide
users with a way of escaping from the form.

The following would only be shown for saved records...

Reload - a hyperlink to the current resource. To discard changes made to
the data. (Although a simple <input type="reset"> might do that

New - Hyperlink to a blank form.

Copy - Hyperlink to a form prefilled with the data of the source record,
but unsaved.

Delete - a hyperlink to a deletion confirmation page displaying the
record that is to be deleted. With a single submit button to confirm
deletion, and which http POSTs so that the deletion url cannot be
bookmarked.

> To extend the discussion about freeform:
> - please also pay attention to the fact, that all labels, errors 
> messages, tips, etc. should be easy localizable.

I've never done a foreign language site, but I can see that this would
be useful. I just tried hacking the i18n example a bit and have found
that you can use an i18n.Translator as the label, requiredFailMessage
parameters to the eg annotate.String. Have attached tgz archive of the
app. It seems really cool, but I haven't had time to figure out how to
generate the .mo files from the .po files. It would be good if that
could be done automatically when the .po files change. Maybe you'll
better understand that side of things.

> - error messages can vary depending on field contents: integer error 
> is from user's point of view not a numeric error, (i.e. "please enter 
> your age as whole number")

You might get away with annotate.String(requiredFailMessage="please
enter your age as whole number")

More likely, you'll want to create your own library of formless types,
processors and renderers. For ideas see second attachement.

-- 
Richard Wall
-------------- next part --------------
A non-text attachment was scrubbed...
Name: webform.diff
Type: application/octet-stream
Size: 934 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-web/attachments/20050720/bfd8eafc/webform.obj
-------------- next part --------------
#################################################################################
# Example of having more than one submit button
# Made to show the benefits of the supplied patch
# /STemplar


from zope.interface import implements

from nevow import rend
from nevow import url
from nevow import loaders
from nevow import tags as T
from nevow import inevow

from formless import annotate
from formless import webform


FORM_LAYOUT = loaders.xmlstr("""<?xml version="1.0"?>
<form xmlns:n="http://nevow.com/ns/nevow/0.1" n:pattern="freeform-form" enctype="multipart/form-data">
  <n:attr name="action"><n:slot name="form-action"/></n:attr>
  <n:attr name="id"><n:slot name="form-id"/></n:attr>
  <n:attr name="name"><n:slot name="form-name"/></n:attr>
  <n:attr name="method">post</n:attr>
  <p><strong><n:slot name="form-label"/></strong></p>
  <p><em><n:slot name="form-description"/></em></p>
  <p><strong><em><n:slot name="form-error"/></em></strong></p>
    <table id="form-table">
        <n:slot name="form-arguments"/>
        <n:invisible n:render="formbutton">
            <n:slot name="form-button"/>
        </n:invisible>
    </table>
    <n:invisible n:pattern="argument">
       <tr>
           <td>
           <n:slot name="label"/>
           </td>
           <td>
           <n:slot name="input"/><span class="freeform-error"><n:slot name="error"/></span>
           <n:slot name="description"/>
           </td>
       </tr>
    </n:invisible>
    <n:invisible n:pattern="argument!!action2">
       <tr>
           <td>
           <n:slot name="label"/>
           </td>
           <td>
           <input type="image" widht="155" height="24" src="http://twistedmatrix.com/images/header-logo.png">
               <n:attr name="name"><n:slot name="name"/></n:attr>
               <n:attr name="value"><n:slot name="value"/></n:attr>
           </input>
           <n:slot name="description"/>
           </td>
       </tr>
    </n:invisible>
    <n:invisible n:pattern="form-button">
        <td></td><td><n:slot name="input"/></td>
    </n:invisible>
</form>
"""      ).load()
css = """
.freeform-radio-option {margin-left:0px;}
"""
class Root(rend.Page):
    """Render a custom and normal form for an ISomething.
    """       
    addSlash = True
    _showbutton = True
    
    child_webform_css = webform.defaultCSS
    
    def render_normalForm(self, ctx, data):
        return webform.renderForms()
    
    def render_customForm(self, ctx, data):
        return webform.renderForms()[FORM_LAYOUT]
    
    def doSomething(self, ctx, **kwargs):
        if kwargs.get('defaultbutton'): #Switch the value of self._showbutton
            self._showbutton = [1,0][self._showbutton==1]
        btn = "default"
        if kwargs.get('action1'):
           btn = "action1" 
        elif kwargs.get('action2'):
           btn = "action2" 
        return [T.p['You clicked the %s button.'%btn],T.p['doSomething called with: %s' %kwargs]]
    
    def bind_doSomething(self, ctx):
        return [
            ( 'ctx', annotate.Context() ),
            ( 'fee', annotate.String(description="Wee!") ),
            ( 'fi', annotate.Integer(description="Tra-la-la") ),
            ( 'fo', annotate.Text() ),
            ( 'fum', annotate.String()),
            ( 'defaultbutton', annotate.Radio(choices=lambda x,y:[('Show',),('Hide',)][self._showbutton])),
            ( 'action1', annotate.Button()),
            ( 'action2', annotate.Button())]
    
    def render_formbutton(self,ctx,data):
        if self._showbutton:
            return ctx.tag
        else:
            return ''
            
    def render_hand(self, ctx, data):
        hand = inevow.IHand(ctx, default=None)
        if hand is not None:
            return ctx.tag[hand]
        return ''
        
    docFactory = loaders.stan(
        T.html[
            T.head[
                T.title['Example :: Custom Form Layout'],
                T.link(rel='stylesheet', type='text/css', href=url.here.child("webform_css")),
                T.style[css],
                ],
            T.body[T.p(render=T.directive("hand")),
                T.h1['Custom'],
                render_customForm,
                T.h1['Default'],
                render_normalForm,
                ]
            ]
        )

from twisted.application import internet, service
from nevow import appserver
application = service.Application('buttontest')
webServer = internet.TCPServer(8080, appserver.NevowSite(Root()))
webServer.setServiceParent(application)
From wenshengwang at gmail.com  Wed Jul 20 07:40:17 2005
From: wenshengwang at gmail.com (Wensheng Wang)
Date: Wed Jul 20 07:40:21 2005
Subject: [Twisted-web] cookie parsing
In-Reply-To: <7b22037d050720022948d778a1@mail.gmail.com>
References: <7b22037d050720022948d778a1@mail.gmail.com>
Message-ID: <7b22037d05072006404eabf762@mail.gmail.com>

Today I had a problem of not getting back cookie data in twisted web.
After browsing the code I found the culprit.  My cookie value has '='
in it.
In twisted.web.http.py, the code of  parsing of a cookie:
        cookietxt = self.getHeader("cookie")
        if cookietxt:
            for cook in cookietxt.split(';'):
                cook = cook.lstrip()
                try:
                    k, v = cook.split('=')
                    self.received_cookies[k] = v
                except ValueError:
                    pass

because I have '=' in the value, that k,v=cook.split('=') caused error
and that "pass" hide the error.
Because I used modpython and cgi for the same cookie, the there was no
problem, I assume equal sign in cookie value is legal.

May I suggest change the parsing code to:
pos=cook.find('=')
k,v=cook[0:pos],cook[pos+1:]
or something like this.

From alberto.trujillo at ucd.ie  Wed Jul 20 09:30:48 2005
From: alberto.trujillo at ucd.ie (Alberto Trujillo)
Date: Wed Jul 20 09:41:31 2005
Subject: [Twisted-web] How to set the selected item in a select box?
Message-ID: <42DE6E28.9050405@ucd.ie>

I'm trying to fill a simple select box using templates but I have a 
problem when I try to set the selected value. Here is my code:

file.py
------------

    def render_selectauthor(self, ctx, data):
        author = data.firstname + " " + data.lastname
        if data.id == self.idauthor:
            ctx.fillSlots("authorselected", "selected")
        else:
            ctx.fillSlots("authorselected", None)
        ctx.fillSlots("authorvalue", data.id)
        ctx.fillSlots("authorlabel", author)
        return ctx.tag


file.html
----------------

     <select name="idauthor" nevow:data="selectusers" 
nevow:render="sequence">
          <option nevow:pattern="item" nevow:render="selectauthor">
              <nevow:attr name="value"><nevow:slot name="authorvalue" 
/></nevow:attr>
              <nevow:attr name="selected"><nevow:slot 
name="authorselected" /></nevow:attr>
              <nevow:slot name="authorlabel">select...</nevow:slot>
          </option>
     </select>

The problem is that the attribute selected allways appear in my html 
code, and then allways the last item is the selected.
Can anybody tell me how to fix this problem? If possible don't use a 
attribute even when I have set this one in my template?

Thank you very much.

From andreas.destefani at ucd.ie  Wed Jul 20 10:08:23 2005
From: andreas.destefani at ucd.ie (Andreas De Stefani)
Date: Wed Jul 20 10:22:39 2005
Subject: [Twisted-web] web proxy with twistd
Message-ID: <42DE76F7.7030104@ucd.ie>

Hello twisted programmers!

i was trying to write a proxy which allows me to access twisted and 
nevow websites on a local development server infrastructure to which i 
dont have direct access (the proxy sits on the gateway).

It works fine if i access external websites but it fails for homebrewed 
twisted websites and i always get a
No Such Resource File not found Error (the websites are running on port 
8080, 8081 ... but don't think thats the reason?! )

I might do somethin wrong in my proxy i suppose, here is my code

proxy.py:

from twisted.internet import protocol
from twisted.internet import reactor
from twisted.protocols import http
from twisted.web import proxy, server, resource



class ReverseProxyResource(resource.Resource):


        def getChild(self, path, request):
                return self

        def render(self, request):
                d = request.received_headers.get('destination')
                hp = request.received_headers['host']
                if ':' in hp:
                        host, port = hp.split(':')
                        port = int(port)
                else:
                        host = hp
                        port = 80

                print 'forwarding to: ' + host + ' port ' + str(port)
                clientFactory = proxy.ProxyClientFactory(request.method, 
request.uri,
                                                                         
request.clientproto,
                                                                         
request.getAllHeaders(),
                                                                         
request.content.read(),
                                                                         
request)
                reactor.connectTCP(host, port, clientFactory)
                return server.NOT_DONE_YET

site = server.Site(ReverseProxyResource())
reactor.listenTCP(8484, site)
reactor.run()


Thanks for your help!

Andy

From therve at free.fr  Wed Jul 20 10:26:04 2005
From: therve at free.fr (Thomas HERVE)
Date: Wed Jul 20 10:27:10 2005
Subject: [Twisted-web] How to set the selected item in a select box?
In-Reply-To: <42DE6E28.9050405@ucd.ie>
References: <42DE6E28.9050405@ucd.ie>
Message-ID: <20050720182604.hh2nmfvztji80s4g@itchy.wasabout.net>

Quoting Alberto Trujillo <alberto.trujillo@ucd.ie>:


> The problem is that the attribute selected allways appear in my html 
> code, and then allways the last item is the selected.
> Can anybody tell me how to fix this problem? If possible don't use a 
> attribute even when I have set this one in my template?

selected is a strange attribute as it don't have a value. You can use this :

    def render_selectauthor(self, ctx, data):
        author = data.firstname + " " + data.lastname
        ctx.fillSlots("authorvalue", data.id)
        ctx.fillSlots("authorlabel", author)
        if data.id == self.idauthor:
            return ctx.tag(selected=True)
        else:
            return ctx.tag

and remove the slot "selected" in your template.

-- 
Thomas



From dp at ulaluma.com  Wed Jul 20 13:42:22 2005
From: dp at ulaluma.com (Donovan Preston)
Date: Wed Jul 20 13:42:27 2005
Subject: [Twisted-web] How to set the selected item in a select box?
In-Reply-To: <20050720182604.hh2nmfvztji80s4g@itchy.wasabout.net>
References: <42DE6E28.9050405@ucd.ie>
	<20050720182604.hh2nmfvztji80s4g@itchy.wasabout.net>
Message-ID: <F411FE5A-01CE-4FDB-AB04-41D43A594AAB@ulaluma.com>


On Jul 20, 2005, at 9:26 AM, Thomas HERVE wrote:

> Quoting Alberto Trujillo <alberto.trujillo@ucd.ie>:
>
>
>
>> The problem is that the attribute selected allways appear in my  
>> html code, and then allways the last item is the selected.
>> Can anybody tell me how to fix this problem? If possible don't use  
>> a attribute even when I have set this one in my template?
>>
>
> selected is a strange attribute as it don't have a value. You can  
> use this :
>
>    def render_selectauthor(self, ctx, data):
>        author = data.firstname + " " + data.lastname
>        ctx.fillSlots("authorvalue", data.id)
>        ctx.fillSlots("authorlabel", author)
>        if data.id == self.idauthor:
>            return ctx.tag(selected=True)
>        else:
>            return ctx.tag
>
> and remove the slot "selected" in your template.

It is also a known "issue" that if a slot is in an html attribute,  
there is no way to prevent that attribute from showing up in the HTML  
output. To do so would require Nevow have the ability to rewind time,  
to erase the attribute name from the output stream (in this case,  
selectecd="). There is a way to do this which would involve rendering  
the attribute value to a temporary location before rendering the  
attribute name, and checking to see if the value is a string of 0  
length or not. However, nobody has yet taken the time to implement  
this properly (it's tricky; several people have tried).

Once this issue is fixed, you could go back to using the slot  
approach. For now, what Thomas suggests is a reasonable workaround.

Donovan


From en.karpachov at ospaz.ru  Wed Jul 20 15:44:11 2005
From: en.karpachov at ospaz.ru (en.karpachov@ospaz.ru)
Date: Wed Jul 20 16:07:28 2005
Subject: [Twisted-web] renderInlineException - what is it for?
In-Reply-To: <0E069EAB-3A0F-4A7D-8F7B-8ED570997D78@fuhm.net>
References: <20050718055358.GA2418@jk.dev>
	<0E069EAB-3A0F-4A7D-8F7B-8ED570997D78@fuhm.net>
Message-ID: <20050720214411.GA1177@ospaz.ru>

On Mon, Jul 18, 2005 at 09:38:10AM -0400, James Y Knight wrote:
> Huh, yes. It's supposed to be used to render an exception in the  
> middle of the page. It's used in nevow/flat/flatstan.py,  
> ContextSerializer. However, at the use, it is called  
> "renderInlineError". Oops!

If so, which one I must implement in my custom handler? I guess it is
renderInlineException anyway, right?

> James

Thanks!

-- 
jk

From sifu-twisted at 0xx0.net  Wed Jul 20 17:26:32 2005
From: sifu-twisted at 0xx0.net (Siegmund Fuehringer)
Date: Wed Jul 20 17:24:35 2005
Subject: [Twisted-web] OT: ajax in zope3
Message-ID: <20050720232632.GI9198@m.0xx0.net>

hi!

there is a thread on the Z3labs-lists about how ajax for zope might look 
like.
http://lists.nuxeo.com/pipermail/z3lab/2005-July/thread.html#550

i didn't read every message, but it doesn't look like there is much 
consensus.
maybe fzZzy should advertise livepage to them.

bye - sifu

From dp at ulaluma.com  Thu Jul 21 01:51:22 2005
From: dp at ulaluma.com (Donovan Preston)
Date: Thu Jul 21 01:51:26 2005
Subject: [Twisted-web] renderInlineException - what is it for?
In-Reply-To: <20050720214411.GA1177@ospaz.ru>
References: <20050718055358.GA2418@jk.dev>
	<0E069EAB-3A0F-4A7D-8F7B-8ED570997D78@fuhm.net>
	<20050720214411.GA1177@ospaz.ru>
Message-ID: <37D9E747-5116-482B-942B-BA3B8DE21317@ulaluma.com>


On Jul 20, 2005, at 2:44 PM, <en.karpachov@ospaz.ru>  
<en.karpachov@ospaz.ru> wrote:

> On Mon, Jul 18, 2005 at 09:38:10AM -0400, James Y Knight wrote:
>
>> Huh, yes. It's supposed to be used to render an exception in the
>> middle of the page. It's used in nevow/flat/flatstan.py,
>> ContextSerializer. However, at the use, it is called
>> "renderInlineError". Oops!

This has been broken for a really, really long time. Sorry about that.

> If so, which one I must implement in my custom handler? I guess it is
> renderInlineException anyway, right?

I'm not sure. I'll take a look and try to fix it for real, tomorrow.

Donovan


From dp at ulaluma.com  Thu Jul 21 02:14:24 2005
From: dp at ulaluma.com (Donovan Preston)
Date: Thu Jul 21 02:14:29 2005
Subject: [Twisted-web] OT: ajax in zope3
In-Reply-To: <20050720232632.GI9198@m.0xx0.net>
References: <20050720232632.GI9198@m.0xx0.net>
Message-ID: <1580AD10-BC80-4612-B60F-0989707A842B@ulaluma.com>


On Jul 20, 2005, at 4:26 PM, Siegmund Fuehringer wrote:

> hi!
>
> there is a thread on the Z3labs-lists about how ajax for zope might  
> look
> like.
> http://lists.nuxeo.com/pipermail/z3lab/2005-July/thread.html#550
>
> i didn't read every message, but it doesn't look like there is much
> consensus.
> maybe fzZzy should advertise livepage to them.

Perhaps. LivePage doesn't really sound too much like anything that is  
being discussed there. LivePage is two-way asynchronous JavaScript/ 
Python RPC; that's all. Client-side Javascript event handlers use  
XMLHttpRequest to route an event (such as onclick) to the server,  
where a Python event handler is located and invoked. The result is  
sent back to the browser and evaluated as Javascript.

There's not really any XML involved, unless you count XHTML embedded  
in Javascript strings; it's debatable whether the XML really belongs  
in the Asynchronous Javascript And Xml technique anyway. Neither are  
there any libraries for doing drag and drop or fading colors or  
simulating "classes" in a language that doesn't need them, like those  
other Javascript libraries have.

So, until Zope 3 is hosted on a twisted.web server instead of the  
homegrown HTTP server it uses, I don't think LivePage has much to  
contribute to this discussion, other than suggesting a useful  
implementation technique for creating interactive web applications.

Donovan


From chris.were at gmail.com  Fri Jul 22 01:38:56 2005
From: chris.were at gmail.com (Chris (FeedTagger))
Date: Fri Jul 22 02:43:18 2005
Subject: [Twisted-web] Sessions with LivePage?
Message-ID: <35bb42690507220038137a205f@mail.gmail.com>

Hi,
I'm having an issue with sessions and livepage - I can't seem to get
the two working together. If I replace livepage.LivePage with
rend.Page the session works as expected... I keep refreshing and the
same uid appears. Why is this not the case with LivePage and how can I
use sessions? Neither of the examples; chatola and liveanimal use
sessions with livepage.

Thanks in advance,
Chris

-----

from nevow import rend, loaders, appserver
from nevow import tags as T
from nevow import inevow, static
from nevow import livepage


class Page(livepage.LivePage):
#class Page(rend.Page):
    addSlash = True
    docFactory = loaders.xmlfile('core.xhtml')
    
    def __init__(self):
        print '*'*22
        livepage.LivePage.__init__(self)
    
    def child_search(self,ctx):
        return SearchPage()
        
    def render_body(self, ctx, data):
        session = inevow.ISession(ctx)
        ctx.fillSlots('a_slot',session.uid)
        return ctx.tag
        
        
class SearchPage(livepage.LivePage):
    pass
    
from twisted.application import service, internet
application = service.Application("liveweb")
internet.TCPServer(8080,
appserver.NevowSite(Page())).setServiceParent(application)

From sylvain.detilly at adelux.fr  Fri Jul 22 08:03:32 2005
From: sylvain.detilly at adelux.fr (Sylvain de Tilly)
Date: Fri Jul 22 08:03:55 2005
Subject: [Twisted-web] install pb with Nevow (svn 1671) & Debian Sarge
Message-ID: <1122041012.3796.15.camel@localhost.localdomain>

Hello,

I'll try to install Nevow svn release (1671) on Debian Sarge (python
2.4) with twisted release 2.0.1. I've got this traceback :

/usr/local/src/Nevow/formless/iformless.py:206:
ComponentsDeprecationWarning: Please don't use __adapt__ on Interface
subclasses
  class IConfigurable(Interface):
/usr/lib/python2.4/site-packages/twisted/web/resource.py:27:
ComponentsDeprecationWarning: Please only use functions and
zope.interface.Attributes as Interface class attributes (.isLeaf)
  class IResource(components.Interface):
Traceback (most recent call last):
  File "setup.py", line 10, in ?
    import nevow
  File "/usr/local/src/Nevow/nevow/__init__.py", line 140, in ?
    load(basic_adapters)
  File "/usr/local/src/Nevow/nevow/__init__.py", line 30, in load
    compy.registerAdapter(a, clean(o), i)
  File "/usr/local/src/Nevow/nevow/compy.py", line 33, in
registerAdapter
    origInterface = _namedAnyWithBuiltinTranslation(origInterface)
  File "/usr/local/src/Nevow/nevow/util.py", line 227, in
_namedAnyWithBuiltinTranslation
    raise _NamedAnyError("Name %s not found." % name)
nevow.util._NamedAnyError: Name nevow.appserver.NevowRequest not found.


With some tests, I just discoverd that the last  
nevow.utils.namedAny.trialname before traceback is ['formless',
'iformless', 'IFormErrors']. Don't know if it's help...


All works fine in Sid. (same twisted).

Regards,
-- 
Soci?t? Adelux  -  http://www.adelux.fr
Sylvain de Tilly - responsable technique
t?l. 01 46 88 60 55 - fax. 01 47 90 26 32
gpg. http://adelux.fr/societe/gpg/sylvain.asc
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-web/attachments/20050722/c3c6f250/attachment.bin
From foom at fuhm.net  Fri Jul 22 10:03:48 2005
From: foom at fuhm.net (James Y Knight)
Date: Fri Jul 22 10:04:01 2005
Subject: [Twisted-web] install pb with Nevow (svn 1671) & Debian Sarge
In-Reply-To: <1122041012.3796.15.camel@localhost.localdomain>
References: <1122041012.3796.15.camel@localhost.localdomain>
Message-ID: <F21816AE-FB39-42AD-98CD-AAAE7C0F85E6@fuhm.net>

On Jul 22, 2005, at 10:03 AM, Sylvain de Tilly wrote:
> Hello,
>
> I'll try to install Nevow svn release (1671) on Debian Sarge (python
> 2.4) with twisted release 2.0.1. I've got this traceback :

I suspect you downloaded the Twisted core package, which doesn't  
include twisted.web. Either download the twisted sumo package or the  
twisted core and twisted web packages.

James

From lloyd at paisite.com  Fri Jul 22 11:17:12 2005
From: lloyd at paisite.com (lloyd@paisite.com)
Date: Fri Jul 22 11:21:03 2005
Subject: [Twisted-web] Turkey questions 13-15
Message-ID: <2019.68.160.37.29.1122052632.squirrel@www.wbsysnet.com>

Hello,

Thanks to Matt Goodall and Nils Grotnes, Techno Turkey's Twisted Adventure
is coming along at a slow, but sure pace. See http://twisted.paisite.com/

If you scroll down to Experiments.Twisted.Web you'll see the latest
experiment, Matt Goodall's Barebones Static Web Server.

I've done the best I can to explicate Matt's code, but not sure that I've
got it exactly right. Here're some questions:

Turkey question 13:

Any errors, misunderstandings, or confusing explanations so far in
Adventures?

Turkey question 14:

In the document "Using Application" the term "service" is used in a
technical sense. Could someone please give me a clear definition in plain
English?

Turkey question 15:

In an e-mail, Matt pointed out that the Barebones code could be "easily
modified into something that creates a dynamic root resource."

What's the next logical step toward this goal? E.g. How can I modify and/or
add to the barebones code to support dynamic resources if, say, my
ultimate goal is an efficient, solid, secure production web-server that
supports virtual hosts and dynamic resources?

In the spirit of Moshe's Finger tutorial, I'd like to take this
step-by-baby-step, illustrating and explaining key Twisted
interfaces/principles as I go.

Many thanks,

Lloyd R. Prentice













From dp at ulaluma.com  Fri Jul 22 21:53:51 2005
From: dp at ulaluma.com (Donovan Preston)
Date: Fri Jul 22 21:53:57 2005
Subject: [Twisted-web] Sessions with LivePage?
In-Reply-To: <35bb42690507220038137a205f@mail.gmail.com>
References: <35bb42690507220038137a205f@mail.gmail.com>
Message-ID: <E4B50CF2-096A-4B1F-8D5C-98F5C040E061@ulaluma.com>


On Jul 22, 2005, at 12:38 AM, Chris (FeedTagger) wrote:

> I'm having an issue with sessions and livepage - I can't seem to get
> the two working together. If I replace livepage.LivePage with
> rend.Page the session works as expected... I keep refreshing and the
> same uid appears. Why is this not the case with LivePage and how can I
> use sessions? Neither of the examples; chatola and liveanimal use
> sessions with livepage.

I don't know of any reason why there would be an issue using sessions  
with livepage. In fact, my "Secret Project" uses them. Just as an  
experiment, you might want to try wrapping the root resource in a  
nevow.guard.SessionWrapper so that you get guard's modern sessions,  
not the old crufty twisted-web one.

dp



From matt at pollenation.net  Sat Jul 23 05:19:00 2005
From: matt at pollenation.net (Matt Goodall)
Date: Sat Jul 23 05:19:09 2005
Subject: [Twisted-web] Sessions with LivePage?
In-Reply-To: <E4B50CF2-096A-4B1F-8D5C-98F5C040E061@ulaluma.com>
References: <35bb42690507220038137a205f@mail.gmail.com>
	<E4B50CF2-096A-4B1F-8D5C-98F5C040E061@ulaluma.com>
Message-ID: <42E227A4.10403@pollenation.net>

Donovan Preston wrote:
> 
> On Jul 22, 2005, at 12:38 AM, Chris (FeedTagger) wrote:
> 
>> I'm having an issue with sessions and livepage - I can't seem to get
>> the two working together. If I replace livepage.LivePage with
>> rend.Page the session works as expected... I keep refreshing and the
>> same uid appears. Why is this not the case with LivePage and how can I
>> use sessions? Neither of the examples; chatola and liveanimal use
>> sessions with livepage.
> 
> 
> I don't know of any reason why there would be an issue using sessions 
> with livepage. In fact, my "Secret Project" uses them. Just as an 
> experiment, you might want to try wrapping the root resource in a 
> nevow.guard.SessionWrapper so that you get guard's modern sessions,  not
> the old crufty twisted-web one.

There are two problem:

1. If you expect to create a session in the middle of rendering a page
then you *must* set the buffered=True on the Page class.

    class MyPage(rend.Page):
        buffered = True
        docFactory = loader.xmlfile(...)
        def render_something(self, ctx, data):
            session = inevow.ISession(ctx)
            ...

Session are identified using a cookie. Cookies are set in the response
headers, but it's too late once any of the page content has been written.

Unfortunately, twisted.web has a bug that masks this problem. t.web
should raise an error really, but changing that now would probably break
applications (although they're arguably broken already).

2. LivePage breaks buffered anyway. LivePage overrides Page's renderHTTP
and the first thing it does is set some headers (no problem) and then
writes some content (agh!). Once that's happened, the buffered attribute
is irrelevant.

As it happens, LivePage also breaks addSlash but it's more likely that
addSlash the thing that's broken really ;-).

- Matt

-- 
     __
    /  \__     Matt Goodall, Pollenation Internet Ltd
    \__/  \    w: http://www.pollenation.net
  __/  \__/    e: matt@pollenation.net
 /  \__/  \    t: +44 (0)113 2252500
 \__/  \__/
 /  \	       Any views expressed are my own and do not necessarily
 \__/          reflect the views of my employer.

From matt at pollenation.net  Sat Jul 23 05:26:26 2005
From: matt at pollenation.net (Matt Goodall)
Date: Sat Jul 23 05:26:34 2005
Subject: [Twisted-web] Remove addSlash from Nevow
Message-ID: <42E22962.4090003@pollenation.net>

Hi,

Nevow's addSlash sometimes causes problems (see LivePage) and some
people are a bit confused by it anyway.

I know it's been in Nevow (twisted.web too?) for a long time but perhaps
we should remove it from rend.Page and either:

* Leave it completely to the application to expliticly implement the
behaviour if that's what they want
* Provide a mixin (or some sort of "pluggable" code) that resources can
use to pick up the addSlash behaviour.

Thoughts?

- Matt

-- 
     __
    /  \__     Matt Goodall, Pollenation Internet Ltd
    \__/  \    w: http://www.pollenation.net
  __/  \__/    e: matt@pollenation.net
 /  \__/  \    t: +44 (0)113 2252500
 \__/  \__/
 /  \	       Any views expressed are my own and do not necessarily
 \__/          reflect the views of my employer.

From matt at pollenation.net  Sat Jul 23 05:28:58 2005
From: matt at pollenation.net (Matt Goodall)
Date: Sat Jul 23 05:29:04 2005
Subject: [Twisted-web] LivePage as a mixin
Message-ID: <42E229FA.7050509@pollenation.net>

Should the guts of LivePage be some sort of mixin so that pages than
cannot subclass LivePage can also become live pages?

I use the word mixin loosely. I really don't care if it's a traditional
Python-style mixin; it's really the effect of a mixin I'm suggesting.

- Matt

-- 
     __
    /  \__     Matt Goodall, Pollenation Internet Ltd
    \__/  \    w: http://www.pollenation.net
  __/  \__/    e: matt@pollenation.net
 /  \__/  \    t: +44 (0)113 2252500
 \__/  \__/
 /  \	       Any views expressed are my own and do not necessarily
 \__/          reflect the views of my employer.

From dialtone at divmod.com  Sat Jul 23 05:39:12 2005
From: dialtone at divmod.com (Valentino Volonghi aka Dialtone)
Date: Sat Jul 23 05:39:23 2005
Subject: [Twisted-web] Remove addSlash from Nevow
In-Reply-To: <42E22962.4090003@pollenation.net>
References: <42E22962.4090003@pollenation.net>
Message-ID: <42E22C60.9050604@divmod.com>

Matt Goodall wrote:

>Hi,
>
>Nevow's addSlash sometimes causes problems (see LivePage) and some
>people are a bit confused by it anyway.
>
>I know it's been in Nevow (twisted.web too?) for a long time but perhaps
>we should remove it from rend.Page and either:
>
>* Leave it completely to the application to expliticly implement the
>behaviour if that's what they want
>* Provide a mixin (or some sort of "pluggable" code) that resources can
>use to pick up the addSlash behaviour.
>
>Thoughts?
>  
>
I think that the trailing / only makes sense when dealing with directory
listing.
A Page, unless it's a Directory shouldn't use the /.

addSlash is really awful and should really go away.

-- 
Valentino Volonghi aka Dialtone
Now Running MacOSX 10.4.1
Blog: http://vvolonghi.blogspot.com
http://weever.berlios.de


From foom at fuhm.net  Sat Jul 23 08:33:31 2005
From: foom at fuhm.net (James Y Knight)
Date: Sat Jul 23 08:33:39 2005
Subject: [Twisted-web] Remove addSlash from Nevow
In-Reply-To: <42E22C60.9050604@divmod.com>
References: <42E22962.4090003@pollenation.net> <42E22C60.9050604@divmod.com>
Message-ID: <69CA6D23-2863-41DA-AE0B-9EAA03D49471@fuhm.net>

On Jul 23, 2005, at 7:39 AM, Valentino Volonghi aka Dialtone wrote:
> I think that the trailing / only makes sense when dealing with  
> directory
> listing.
> A Page, unless it's a Directory shouldn't use the /.
>
> addSlash is really awful and should really go away.

Lots of pages are directories (viz. child_ methods)

James

From mesozoic at polynode.com  Sat Jul 23 15:57:03 2005
From: mesozoic at polynode.com (Alex Levy)
Date: Sat Jul 23 15:57:39 2005
Subject: [Twisted-web] Re: Remove addSlash from Nevow
In-Reply-To: <69CA6D23-2863-41DA-AE0B-9EAA03D49471@fuhm.net>
References: <42E22962.4090003@pollenation.net> <42E22C60.9050604@divmod.com>
	<69CA6D23-2863-41DA-AE0B-9EAA03D49471@fuhm.net>
Message-ID: <20050723215702.GA16480@perpetual.moxn.net>

On Sat, Jul 23, 2005 at 10:33:31AM -0400, James Y Knight wrote:
> On Jul 23, 2005, at 7:39 AM, Valentino Volonghi aka Dialtone wrote:
> >I think that the trailing / only makes sense when dealing with  
> >directory
> >listing.
> >A Page, unless it's a Directory shouldn't use the /.
> >
> >addSlash is really awful and should really go away.
> 
> Lots of pages are directories (viz. child_ methods)

As long as addSlash defaults to not True, what is the harm in leaving it in?
It seems like the sort of generic feature that a lot of people could find
very useful in a lot of different circumstances.

-- 
Alex Levy
WWW: http://mesozoic.geecs.org/
 
"Never let your sense of morals prevent you from doing what is right."
 -- Salvor Hardin, Isaac Asimov's _Foundation_

From radeex at gmail.com  Sat Jul 23 19:31:37 2005
From: radeex at gmail.com (Christopher Armstrong)
Date: Sat Jul 23 19:31:40 2005
Subject: [Twisted-web] Re: Remove addSlash from Nevow
In-Reply-To: <20050723215702.GA16480@perpetual.moxn.net>
References: <42E22962.4090003@pollenation.net> <42E22C60.9050604@divmod.com>
	<69CA6D23-2863-41DA-AE0B-9EAA03D49471@fuhm.net>
	<20050723215702.GA16480@perpetual.moxn.net>
Message-ID: <60ed19d40507231831fb78851@mail.gmail.com>

On 7/24/05, Alex Levy <mesozoic@polynode.com> wrote:
> On Sat, Jul 23, 2005 at 10:33:31AM -0400, James Y Knight wrote:
> > On Jul 23, 2005, at 7:39 AM, Valentino Volonghi aka Dialtone wrote:
> > >I think that the trailing / only makes sense when dealing with
> > >directory
> > >listing.
> > >A Page, unless it's a Directory shouldn't use the /.
> > >
> > >addSlash is really awful and should really go away.
> >
> > Lots of pages are directories (viz. child_ methods)
> 
> As long as addSlash defaults to not True, what is the harm in leaving it in?
> It seems like the sort of generic feature that a lot of people could find
> very useful in a lot of different circumstances.

In all of my apps, I use addSlash quite a bit, and only in pages that
have child_ methods (or otherwise implement child resources).

I can understand from a code factoring sense why a separate mixin
might be nice, but I really don't understand why you'd want to get rid
of it when it doesn't even currently affect anything until you turn it
on.

-- 
  Twisted   |  Christopher Armstrong: International Man of Twistery
   Radix    |    -- http://radix.twistedmatrix.com
            |  Release Manager, Twisted Project
  \\\V///   |    -- http://twistedmatrix.com
   |o O|    |  
w----v----w-+

From mike at mkp.ca  Sun Jul 24 13:56:36 2005
From: mike at mkp.ca (Mike Pelletier)
Date: Sun Jul 24 13:56:46 2005
Subject: [Twisted-web] livepage.glue and Componentized
Message-ID: <200507241556.38026.mike@mkp.ca>

Hi there, helpful Nevow hackers.

I just tried to convert a rend.Page-derived class into a livepage.LivePage 
one.  My first attempt resulted in an infinite recursion.  I managed to spaz 
around until I eventually found what I had to change to fix this, but I don't 
understand why my fix worked.

It seems that if my LivePage object is a component of the application, and I 
specify either the component or the application as the root page, I get the 
infinite recursion when rendering the page.  But if my LivePage object merely 
Adapts the application in a non-persistent manner, it works fine.  Please see 
the attachment for clarification.  (Hopefully I haven't reduced it beyond 
making sense.)

Was I attempting to use something in an unsupported or undefined manner, or 
should it have worked the way I thought it would?

TIA!
Mike.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: livepagetest.py
Type: application/x-python
Size: 1059 bytes
Desc: Demonstrate working and broken behaviour
Url : http://twistedmatrix.com/pipermail/twisted-web/attachments/20050724/25c8b89c/livepagetest.bin
From radeex at gmail.com  Sun Jul 24 18:48:14 2005
From: radeex at gmail.com (Christopher Armstrong)
Date: Sun Jul 24 18:48:17 2005
Subject: [Twisted-web] livepage.glue and Componentized
In-Reply-To: <200507241556.38026.mike@mkp.ca>
References: <200507241556.38026.mike@mkp.ca>
Message-ID: <60ed19d405072417481a911ec9@mail.gmail.com>

On 7/25/05, Mike Pelletier <mike@mkp.ca> wrote:
> Hi there, helpful Nevow hackers.
> 
> I just tried to convert a rend.Page-derived class into a livepage.LivePage
> one.  My first attempt resulted in an infinite recursion.  I managed to spaz
> around until I eventually found what I had to change to fix this, but I don't
> understand why my fix worked.
> 
> It seems that if my LivePage object is a component of the application, and I
> specify either the component or the application as the root page, I get the
> infinite recursion when rendering the page.  But if my LivePage object merely
> Adapts the application in a non-persistent manner, it works fine.  Please see
> the attachment for clarification.  (Hopefully I haven't reduced it beyond
> making sense.)
> 
> Was I attempting to use something in an unsupported or undefined manner, or
> should it have worked the way I thought it would?


I'm not sure *exactly* why you got this infinite recursion thing, but
I can tell you that I find it extremely bizarre that you were trying
to make the resource an adapter of your application. Application
objects aren't really meant to have more adapters or components added
to them in regular application code. Where did you get that idea, or
what were you trying to accomplish with it?

-- 
  Twisted   |  Christopher Armstrong: International Man of Twistery
   Radix    |    -- http://radix.twistedmatrix.com
            |  Release Manager, Twisted Project
  \\\V///   |    -- http://twistedmatrix.com
   |o O|    |  
w----v----w-+

From chris.were at gmail.com  Sun Jul 24 20:51:10 2005
From: chris.were at gmail.com (Chris (FeedTagger))
Date: Sun Jul 24 20:51:44 2005
Subject: [Twisted-web] Sessions with LivePage?
In-Reply-To: <42E227A4.10403@pollenation.net>
References: <35bb42690507220038137a205f@mail.gmail.com>
	<E4B50CF2-096A-4B1F-8D5C-98F5C040E061@ulaluma.com>
	<42E227A4.10403@pollenation.net>
Message-ID: <35bb4269050724195119a297f5@mail.gmail.com>

> > I don't know of any reason why there would be an issue using sessions
> > with livepage. In fact, my "Secret Project" uses them. Just as an
> > experiment, you might want to try wrapping the root resource in a
> > nevow.guard.SessionWrapper so that you get guard's modern sessions,  not
> > the old crufty twisted-web one.
That seemed to fix the problems - Now you've got me using guard I have
more questions ;)

How can I specify the URL to redirect to when a user logs in or logs
out? For example if i browse to /index and login, I want to be
redirected to /home. If I'm at /some-page and click logout I still
want to be at that page (not sent back to /index) - or sometimes i
will want to redirect on logout. I'm struggling to see how this is
possible at the moment.

On IRC it was suggested redirecting to the final url before logging
in, but that seems a little clumsy and just moving the problem (I also
don't know how to perform a login without using a form with
action=url.root.child(guard.LOGIN_AVATAR)). It also doesn't address
the issue of controlling the URI for logging out.

I'm working with a modified guarded.py example, but here is the portal
and Page() object I'm using (the createResource() is identical to
guarded.py)

-----------------

class MyRealm:
	"""A simple implementor of cred's IRealm.
		 For web, this gives us the LoggedIn page.
	"""
	implements(portal.IRealm)
	
	def requestAvatar(self, avatarId, mind, *interfaces):
		for iface in interfaces:
			if iface is inevow.IResource:
				# do web stuff
				if avatarId is checkers.ANONYMOUS:
					resc = Page(None)
					resc.realm = self
					return (inevow.IResource, resc, noLogout)
				else:
					resc = Page(avatarId)
					resc.realm = self
					return (inevow.IResource, resc, resc.logout)
			raise NotImplementedError("Can't support that interface.")

class Page(livepage.LivePage):
	
	def __init__(self,avatar):
		self.avatar = avatar
	
	def child_index(self,ctx):
		return IndexPage()

	def child_home(self,ctx)
		return HomePage()

	# child_xxx etc. etc.
		
	def logout(self):
		## self.original is the page's main data -- the object that was
passed in to the constructor, and
		## the object that is initially passed as the 'data' parameter to renderers
		print "%s logged out!" % self.original

From dp at ulaluma.com  Mon Jul 25 00:27:03 2005
From: dp at ulaluma.com (Donovan Preston)
Date: Mon Jul 25 00:27:13 2005
Subject: [Twisted-web] Sessions with LivePage?
In-Reply-To: <35bb4269050724195119a297f5@mail.gmail.com>
References: <35bb42690507220038137a205f@mail.gmail.com>
	<E4B50CF2-096A-4B1F-8D5C-98F5C040E061@ulaluma.com>
	<42E227A4.10403@pollenation.net>
	<35bb4269050724195119a297f5@mail.gmail.com>
Message-ID: <2FCDEA90-646E-4D52-8301-3F004FF05AD0@ulaluma.com>


On Jul 24, 2005, at 7:51 PM, Chris (FeedTagger) wrote:

>>> I don't know of any reason why there would be an issue using  
>>> sessions
>>> with livepage. In fact, my "Secret Project" uses them. Just as an
>>> experiment, you might want to try wrapping the root resource in a
>>> nevow.guard.SessionWrapper so that you get guard's modern  
>>> sessions,  not
>>> the old crufty twisted-web one.
>>>
> That seemed to fix the problems - Now you've got me using guard I have
> more questions ;)
>
> How can I specify the URL to redirect to when a user logs in or logs
> out? For example if i browse to /index and login, I want to be
> redirected to /home. If I'm at /some-page and click logout I still
> want to be at that page (not sent back to /index) - or sometimes i
> will want to redirect on logout. I'm struggling to see how this is
> possible at the moment.
>

If you post the login form to a url in the form of /__login__/foo/bar/ 
baz you will get redirected to /foo/bar/baz after login. I think the  
same is also true of logout.

dp


From sylvain.detilly at adelux.fr  Mon Jul 25 02:10:22 2005
From: sylvain.detilly at adelux.fr (Sylvain de Tilly)
Date: Mon Jul 25 02:10:52 2005
Subject: [Twisted-web] install pb with Nevow (svn 1671) & Debian Sarge
In-Reply-To: <F21816AE-FB39-42AD-98CD-AAAE7C0F85E6@fuhm.net>
References: <1122041012.3796.15.camel@localhost.localdomain>
	<F21816AE-FB39-42AD-98CD-AAAE7C0F85E6@fuhm.net>
Message-ID: <1122279022.3700.5.camel@localhost.localdomain>

It's working well... Thanks a lot.

Le vendredi 22 juillet 2005 ? 12:03 -0400, James Y Knight a ?crit :
> On Jul 22, 2005, at 10:03 AM, Sylvain de Tilly wrote:
> > Hello,
> >
> > I'll try to install Nevow svn release (1671) on Debian Sarge (python
> > 2.4) with twisted release 2.0.1. I've got this traceback :
> 
> I suspect you downloaded the Twisted core package, which doesn't  
> include twisted.web. Either download the twisted sumo package or the  
> twisted core and twisted web packages.
> 
> James
> 
> _______________________________________________
> Twisted-web mailing list
> Twisted-web@twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web

-- 
Sylvain de Tilly
gpg. http://www.adelux.fr/gpg/sylvain.asc
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-web/attachments/20050725/587c51ee/attachment.bin
From rasjidw at openminddev.net  Mon Jul 25 02:33:26 2005
From: rasjidw at openminddev.net (Rasjid Wilcox)
Date: Mon Jul 25 02:34:07 2005
Subject: [Twisted-web] xmlrpc blocking
Message-ID: <200507251833.26741.rasjidw@openminddev.net>

Hi,

I've gone through all the xmlrpc examples I can find, and I see the use of 
'defer.succeed(...)', but I'm clearly not understanding something.

When I run some code that blocks, the whole server stops responding.

I have:

def test(foo):
   print "start test"
   sleep(5)
   print foo
   print "finish test"
   return 'Success'

class Echoer(xmlrpc.XMLRPC):
    def xmlrpc_test(self):
        return defer.succeed(test('hello'))

What should I be doing instead?

Thanks,

Rasjid.

-- 
Rasjid Wilcox
Melbourne, Australia (UTC +10 hrs)

From mary-twisted at puzzling.org  Mon Jul 25 02:46:31 2005
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Mon Jul 25 02:46:35 2005
Subject: [Twisted-web] xmlrpc blocking
In-Reply-To: <200507251833.26741.rasjidw@openminddev.net>
References: <200507251833.26741.rasjidw@openminddev.net>
Message-ID: <20050725084631.GG15507@home.puzzling.org>

On Mon, Jul 25, 2005, Rasjid Wilcox wrote:
> What should I be doing instead?

Writing code that doesn't block.

A Deferred object is not a sophisticated wrapper which writes
asynchronous code for you, ie, wrapping a blocking function in a
Deferred does not make it non-blocking. (A Deferred is more like an
abstraction for chains of callback functions.) Wrapping a blocking
function in a Deferred just means that your application blocks for a
while, and *then* the Deferred fires the callbacks.

The use case for defer.succeed is actually for when you have a result
that is synchronous but want to pass it code that expects Deferreds. For
example, if I have:

def null():
    return 3

and want to use it like this:

d = null()
d.addCallback(...)
d.addErrback(...)

then I can wrap null using defer.succeed.

Your example doesn't say why it is that you need a blocking function.
The reason will affect the way you choose to make it non-blocking:

 1. you may interrupt your blocking function periodically and allow
    Twisted to return to the main loop, using twisted.flow or defgen
    (see http://mesozoic.geecs.org/cogito/archives/000160.html and one
    day I will write it up...).

 2. you may use an existing Twisted function that does an asynchronous
    version of whatever your blocking function is, or call some third
    party asynchronous library.

 3. You may need to use deferToThread in order to run the blocking
    function in a thread: this is usually the case if you're using some
    libraries that can't easily be made non-blocking (my major personal
    use case has been the PIL, there are plenty of others).

-Mary

From chris at feedtagger.com  Mon Jul 25 02:47:22 2005
From: chris at feedtagger.com (Chris Were)
Date: Mon Jul 25 02:47:29 2005
Subject: [Twisted-web] Sessions with LivePage?
In-Reply-To: <2FCDEA90-646E-4D52-8301-3F004FF05AD0@ulaluma.com>
References: <35bb42690507220038137a205f@mail.gmail.com>
	<E4B50CF2-096A-4B1F-8D5C-98F5C040E061@ulaluma.com>
	<42E227A4.10403@pollenation.net>
	<35bb4269050724195119a297f5@mail.gmail.com>
	<2FCDEA90-646E-4D52-8301-3F004FF05AD0@ulaluma.com>
Message-ID: <42E4A71A.6020105@feedtagger.com>


>> How can I specify the URL to redirect to when a user logs in or logs
>> out? For example if i browse to /index and login, I want to be
>> redirected to /home. If I'm at /some-page and click logout I still
>> want to be at that page (not sent back to /index) - or sometimes i
>> will want to redirect on logout. I'm struggling to see how this is
>> possible at the moment.
>>
>
> If you post the login form to a url in the form of /__login__/foo/bar/ 
> baz you will get redirected to /foo/bar/baz after login. I think the  
> same is also true of logout.
>
> dp

Thanks! Works like a charm on both counts.

From mary-twisted at puzzling.org  Mon Jul 25 02:49:07 2005
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Mon Jul 25 02:49:12 2005
Subject: [Twisted-web] xmlrpc blocking
In-Reply-To: <20050725084631.GG15507@home.puzzling.org>
References: <200507251833.26741.rasjidw@openminddev.net>
	<20050725084631.GG15507@home.puzzling.org>
Message-ID: <20050725084907.GH15507@home.puzzling.org>

On Mon, Jul 25, 2005, Mary Gardiner wrote:
> On Mon, Jul 25, 2005, Rasjid Wilcox wrote:
> > What should I be doing instead?
> 
> Writing code that doesn't block.

This is a good place to start, by the way:
http://twistedmatrix.com/projects/core/documentation/howto/async.html

If you've been there before, do let me know what was wrong with it.

-Mary

From maillists at ivsn.com  Mon Jul 25 03:30:52 2005
From: maillists at ivsn.com (Paul Reznicek)
Date: Mon Jul 25 03:31:41 2005
Subject: [Twisted-web] nevow/i18n.py - Suggested better client's language
	resolving
Message-ID: <42E4B14C.7020908@ivsn.com>

If the user's browser has selected country-specific languages, like:
   de-de,en-us;q=0.8,cs;q=0.5
the default language will be not correctly resolved OR you should have
.../LC_MESSAGES for each variant, i.e. for German maintaining translations
( de/LC_MESSAGES, de-de/LC_., de-at/LC_., de-ch/LC_., de-li/LC_., de-lu/LC_... )

Following patch add to the language list automatically the base variant,
so that if i.e. "de-de" is not found, translation "de" with same quality
will be used.
-Paul
===================================================================
--- i18n.py    (Revision 1672)
+++ i18n.py    (Arbeitskopie)
@@ -19,6 +19,8 @@
                  except ValueError:
                      pass
          langs.append((quality, lang))
+        if '-' in lang:
+            langs.append((quality, lang.split('-')[0]))
      langs.sort(lambda a,b: cmp(b[0], a[0]))
      return [lang for quality, lang in langs]


From u3292467 at anu.edu.au  Mon Jul 25 03:45:28 2005
From: u3292467 at anu.edu.au (Paul Warren)
Date: Mon Jul 25 03:40:32 2005
Subject: [Twisted-web] xmlrpc blocking
In-Reply-To: <200507251833.26741.rasjidw@openminddev.net>
References: <200507251833.26741.rasjidw@openminddev.net>
Message-ID: <42E4B4B8.1010501@anu.edu.au>

Rasjid Wilcox wrote:
> Hi,
> 
> I've gone through all the xmlrpc examples I can find, and I see the use of 
> 'defer.succeed(...)', but I'm clearly not understanding something.
> 
> When I run some code that blocks, the whole server stops responding.
> 
> I have:
> 
> def test(foo):
>    print "start test"
>    sleep(5)
>    print foo
>    print "finish test"
>    return 'Success'
> 
> class Echoer(xmlrpc.XMLRPC):
>     def xmlrpc_test(self):
>         return defer.succeed(test('hello'))
> 
> What should I be doing instead?
> 
> Thanks,
> 
> Rasjid.
>

For blocking code, you don't want to use defer.succeed()

   something like:

def xmlrpc_test(self):
	d = threads.deferToThread(test,'Hello')
	d.addCallback(_cb)
  	return d

def _cb(self, *args):
	print "Blocking call finished"
	print args

is what you want.

The idea is to write non-blocking stuff if at all possible.  But if you 
can't, do it a different thread, and have callbacks (and error backs)

At least, that is the conclusion (confusion??) I've come to after 
spending six months writing a fairly large twisted project interacting 
with real-life hardware (http://agcentral.org/downloads/agdevicecontrol 
if you're interested.

Hope that helps.
-- 
Paul Warren
ANU Supercomputer facility, Access Grid Projects.
u3292467 at anu dot edu dot au
pwarren.homelinux.org

From maillists at ivsn.com  Mon Jul 25 03:44:45 2005
From: maillists at ivsn.com (Paul Reznicek)
Date: Mon Jul 25 03:45:20 2005
Subject: [Twisted-web] nevow/i18n.py - Suggested handling of missing domain,
 localedir or languages
Message-ID: <42E4B48D.8020809@ivsn.com>

Using        gettext.NullTranslations()
allow to     return translation.ugettext(s)
also when domain, localedir or language is missing, so the result
is always an Unicode object. (...and is less code ;-)
-Paul
===================================================================
--- i18n.py    (Revision 1672)
+++ i18n.py    (Arbeitskopie)

@@ -133,14 +135,9 @@
                  localedir=localeDir,
                  languages=languages,
                  )
-        except IOError, e:
-            if e.errno == errno.ENOENT:
-                # no locale file found
-                return s
-            else:
-                raise
-        else:
-            return translation.ugettext(s)
+        except IOError:
+            translation = gettext.NullTranslations()
+        return translation.ugettext(s)

      def __init__(self, **kw):
          """

From rasjidw at openminddev.net  Mon Jul 25 05:44:51 2005
From: rasjidw at openminddev.net (Rasjid Wilcox)
Date: Mon Jul 25 05:45:26 2005
Subject: [Twisted-web] xmlrpc blocking
In-Reply-To: <20050725084631.GG15507@home.puzzling.org>
References: <200507251833.26741.rasjidw@openminddev.net>
	<20050725084631.GG15507@home.puzzling.org>
Message-ID: <200507252144.52005.rasjidw@openminddev.net>

On Mon, 25 Jul 2005 06:46 pm, Mary Gardiner wrote:
> On Mon, Jul 25, 2005, Rasjid Wilcox wrote:
> > What should I be doing instead?
>
> Writing code that doesn't block.
>
> A Deferred object is not a sophisticated wrapper which writes
> asynchronous code for you, ie, wrapping a blocking function in a
> Deferred does not make it non-blocking. (A Deferred is more like an
> abstraction for chains of callback functions.) Wrapping a blocking
> function in a Deferred just means that your application blocks for a
> while, and *then* the Deferred fires the callbacks.

Okay.  I think the light just came on.

Thanks,

Rasjid.

-- 
Rasjid Wilcox
Melbourne, Australia (UTC +10 hrs)

From rasjidw at openminddev.net  Mon Jul 25 05:45:58 2005
From: rasjidw at openminddev.net (Rasjid Wilcox)
Date: Mon Jul 25 05:46:28 2005
Subject: [Twisted-web] xmlrpc blocking
In-Reply-To: <20050725084907.GH15507@home.puzzling.org>
References: <200507251833.26741.rasjidw@openminddev.net>
	<20050725084631.GG15507@home.puzzling.org>
	<20050725084907.GH15507@home.puzzling.org>
Message-ID: <200507252145.58554.rasjidw@openminddev.net>

On Mon, 25 Jul 2005 06:49 pm, Mary Gardiner wrote:
> On Mon, Jul 25, 2005, Mary Gardiner wrote:
> > On Mon, Jul 25, 2005, Rasjid Wilcox wrote:
> > > What should I be doing instead?
> >
> > Writing code that doesn't block.
>
> This is a good place to start, by the way:
> http://twistedmatrix.com/projects/core/documentation/howto/async.html
>
> If you've been there before, do let me know what was wrong with it.

If I think of some simple examples to clarify, I'll let you know.

Cheers,

Rasjid.

-- 
Rasjid Wilcox
Melbourne, Australia (UTC +10 hrs)

From mary-twisted at puzzling.org  Mon Jul 25 06:13:34 2005
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Mon Jul 25 06:13:25 2005
Subject: [Twisted-web] xmlrpc blocking
In-Reply-To: <200507252145.58554.rasjidw@openminddev.net>
References: <200507251833.26741.rasjidw@openminddev.net>
	<20050725084631.GG15507@home.puzzling.org>
	<20050725084907.GH15507@home.puzzling.org>
	<200507252145.58554.rasjidw@openminddev.net>
Message-ID: <20050725121334.GD13462@sourdust.home.puzzling.org>

On Mon, Jul 25, 2005, Rasjid Wilcox wrote:
> If I think of some simple examples to clarify, I'll let you know.

File them at twistedmatrix.com/bugs/ and assign to "hypatia".

Thanks,

Mary

From jean-marc.pouchoulon at ac-montpellier.fr  Mon Jul 25 06:19:57 2005
From: jean-marc.pouchoulon at ac-montpellier.fr (jean-marc.pouchoulon@ac-montpellier.fr)
Date: Mon Jul 25 06:20:33 2005
Subject: [Twisted-web] How can I retrieve passwd on ldap auth + do I need
 asynchronous ldap request ?
Message-ID: <42E4D8ED.6040307@ac-montpellier.fr>

hello,

    we try to user nevow with ldap-auth .
    Users are authentified  with ldap but we need to save theirs 
username/passwords  to bind on a second phase.(the informations we'd 
like to modify via the application  are stored in ldap directory server ).
    We implemented a dict to do that (Using user/pass get from the 
checker). But I'm sure there is a  best way.


    Another question.
    Do I need asynchronous ldap-request  with nevow ? If I don't return 
a deferred what's the matter ?

thanks for your help

Jean-Marc.



From mike at mkp.ca  Mon Jul 25 07:50:44 2005
From: mike at mkp.ca (Mike Pelletier)
Date: Mon Jul 25 07:50:49 2005
Subject: [Twisted-web] livepage.glue and Componentized
In-Reply-To: <60ed19d405072417481a911ec9@mail.gmail.com>
References: <200507241556.38026.mike@mkp.ca>
	<60ed19d405072417481a911ec9@mail.gmail.com>
Message-ID: <200507250950.47648.mike@mkp.ca>

On Sun July 24 2005 20:48, Christopher Armstrong wrote:
> I'm not sure *exactly* why you got this infinite recursion thing

I think I forgot to mention that it happens while attempting to render 
livepage.glue, if that helps any

> I can tell you that I find it extremely bizarre that you were trying
> to make the resource an adapter of your application.

Thank you.

> Application 
> objects aren't really meant to have more adapters or components added
> to them in regular application code. Where did you get that idea, or
> what were you trying to accomplish with it?

The application (by which I mean the thing I'm working on, not the application 
pseudoclass) was already designed as a collection of components.  I find it 
terribly convenient to be able to mix and match implementations as needed.  
If I was building an application based on a componentized design, why would I 
not just use the Componentized instance that every application must have 
anyway?  Do you really think it would make any difference if I had 
instantiated my own?  (I'll give it a shot this evening, but it's really just 
more voodoo...)

Mike.

From mdbranth at u.washington.edu  Mon Jul 25 14:40:14 2005
From: mdbranth at u.washington.edu (Matthew David Branthwaite)
Date: Mon Jul 25 14:40:17 2005
Subject: [Twisted-web] wxreactor and twisted web
Message-ID: <Pine.LNX.4.43.0507251340140.31798@hymn06.u.washington.edu>




I am trying to write a websight with nevow that spawns a process using wxreactor.  However, I continually get a error saying "Reactor already installed" any advice would be most appreciated.


From matt at pollenation.net  Mon Jul 25 16:52:58 2005
From: matt at pollenation.net (Matt Goodall)
Date: Mon Jul 25 16:53:04 2005
Subject: [Twisted-web] Turkey questions 13-15
In-Reply-To: <2019.68.160.37.29.1122052632.squirrel@www.wbsysnet.com>
References: <2019.68.160.37.29.1122052632.squirrel@www.wbsysnet.com>
Message-ID: <42E56D4A.20906@pollenation.net>

lloyd@paisite.com wrote:
> Hello,
> 
> Thanks to Matt Goodall and Nils Grotnes, Techno Turkey's Twisted Adventure
> is coming along at a slow, but sure pace. See http://twisted.paisite.com/
> 
> If you scroll down to Experiments.Twisted.Web you'll see the latest
> experiment, Matt Goodall's Barebones Static Web Server.
> 
> I've done the best I can to explicate Matt's code, but not sure that I've
> got it exactly right. Here're some questions:
> 
> Turkey question 13:
> 
> Any errors, misunderstandings, or confusing explanations so far in
> Adventures?

Looks pretty good.

> 
> Turkey question 14:
> 
> In the document "Using Application" the term "service" is used in a
> technical sense. Could someone please give me a clear definition in plain
> English?

Hmm, tricky. "Service" is a fairly meaningless term because it's so general.

I guess all I can say is that a service is some important part of your
application that is started and stopped in a controlled manner, i.e as
the application itself is started and stopped.

Typically a service manages resources that, without the predictable
startup and shutdown sequence, could be started too soon or left dangling.

Examples are:

  * a storage service that must open and close the store to avoid corruption
  * an integration service that opens a connection to some remote server
  * a mail service that creates and manages smtp, pop and imap servers

> 
> Turkey question 15:
> 
> In an e-mail, Matt pointed out that the Barebones code could be "easily
> modified into something that creates a dynamic root resource."
> 
> What's the next logical step toward this goal? E.g. How can I modify and/or
> add to the barebones code to support dynamic resources if, say, my
> ultimate goal is an efficient, solid, secure production web-server that
> supports virtual hosts and dynamic resources?

Here's a modified version of the barebones server that renders dynamic
pages instead of static pages:

-----------------------
from twisted.application import internet, service
from twisted.web import resource, server

LOGPATH = './logs/access.log'
PORT = 8080

class DynamicResource(resource.Resource):
    """A simple, dynamic resource with a name.
    """

    def __init__(self, name):
        resource.Resource.__init__(self)
        self.name = name

    def getChild(self, name, request):
        # If the child's name is '' - the empty segment - then return
        # myself.
        if name == '':
            return self
        # Return an instance of my type with the requested segment name.
        return DynamicResource(name)

    def render(self, request):
        return '<html><p>I am a DynamicResource and my name is
%r.</p></html>' % (self.name,)

application = service.Application('web-server')
site = server.Site(DynamicResource('root'), logPath=LOGPATH)
internet.TCPServer(PORT, site).setServiceParent(application)
-----------------------

There's really no conceptual difference between a DynamicResource and a
static.File resource. The only difference is how they choose to render
the request.

A couple of things worth pointing out here:

  * templating like that sucks. don't do it. use nevow, or one of the
    many templating libraries available for Python.
  * the name == '' bit in getChild is important for the root resource of
    a site but you often don't want that for resources deeper into the
    URL.

One other thing that needs mentioning is that the above is a twisted.web
resource. twisted.web2 (currently in development) is more flexible and
has a much stronger concept of the Response. To avoid confusion, I won't
say anymore about this. Go and read the code if you're interested.

To learn about virtual hosts you should read the "Virtual Hosts" section
of the twisted.web HOWTO.

http://twistedmatrix.com/projects/web/documentation/howto/using-twistedweb.html

> 
> In the spirit of Moshe's Finger tutorial, I'd like to take this
> step-by-baby-step, illustrating and explaining key Twisted
> interfaces/principles as I go.
> 
> Many thanks,

No problem. Hope it helps.

Cheers, Matt

-- 
     __
    /  \__     Matt Goodall, Pollenation Internet Ltd
    \__/  \    w: http://www.pollenation.net
  __/  \__/    e: matt@pollenation.net
 /  \__/  \    t: +44 (0)113 2252500
 \__/  \__/
 /  \	       Any views expressed are my own and do not necessarily
 \__/          reflect the views of my employer.

From radeex at gmail.com  Mon Jul 25 18:05:54 2005
From: radeex at gmail.com (Christopher Armstrong)
Date: Mon Jul 25 18:05:57 2005
Subject: [Twisted-web] livepage.glue and Componentized
In-Reply-To: <60ed19d405072517053bf3f877@mail.gmail.com>
References: <200507241556.38026.mike@mkp.ca>
	<60ed19d405072417481a911ec9@mail.gmail.com>
	<200507250950.47648.mike@mkp.ca> <200507251043.03104.mike@mkp.ca>
	<60ed19d405072517053bf3f877@mail.gmail.com>
Message-ID: <60ed19d405072517053e4d3450@mail.gmail.com>

On 7/26/05, Mike Pelletier <mike@mkp.ca> wrote:
> > Do you really think it would make
> > any difference if I had instantiated my own?  (I'll give it a shot this
> > evening, but it's really just more voodoo...)
>
> Apologies if my tone got away from me.  I do appreciate any theories you care
> to share.  There's also an element of "new hammer syndrome" going on, the
> application could well have been designed without components.  But it's such
> a shiny hammer...

no worries. :)

Anyway, I would say that you should maintain the idea that
componentized objects should be made up of tightly-related components.
This isn't to say that the code of the components should necessarily
be intimately aware of the other components, but only that each
componentized object should have a pretty cohesive purpose in life.
(the same could be said about any "object", really).

One of the most common misuses of components that I see is to use them
for arbitrary 1:1 mappings. Indeed, "new hammer syndrome" often causes
people to forget about the fact that Python has attributes. :)


-- 
  Twisted   |  Christopher Armstrong: International Man of Twistery
   Radix    |    -- http://radix.twistedmatrix.com
            |  Release Manager, Twisted Project
  \\\V///   |    -- http://twistedmatrix.com
   |o O|    |  
w----v----w-+

From tv at twistedmatrix.com  Mon Jul 25 23:25:51 2005
From: tv at twistedmatrix.com (Tommi Virtanen)
Date: Mon Jul 25 23:27:03 2005
Subject: [Twisted-web] nevow/i18n.py - Suggested handling of missing
	domain, localedir or languages
In-Reply-To: <42E4B48D.8020809@ivsn.com>
References: <42E4B48D.8020809@ivsn.com>
Message-ID: <42E5C95F.9080606@twistedmatrix.com>

Paul Reznicek wrote:

> Using        gettext.NullTranslations()
> allow to     return translation.ugettext(s)
> also when domain, localedir or language is missing, so the result
> is always an Unicode object. (...and is less code ;-)
> -Paul
> ===================================================================
> --- i18n.py    (Revision 1672)
> +++ i18n.py    (Arbeitskopie)
>
> @@ -133,14 +135,9 @@
>                  localedir=localeDir,
>                  languages=languages,
>                  )
> -        except IOError, e:
> -            if e.errno == errno.ENOENT:
> -                # no locale file found
> -                return s
> -            else:
> -                raise
> -        else:
> -            return translation.ugettext(s)
> +        except IOError:
> +            translation = gettext.NullTranslations()
> +        return translation.ugettext(s)
>
>      def __init__(self, **kw):
>          """


Don't take away the

            if e.errno == errno.ENOENT:


From rasjidw at openminddev.net  Tue Jul 26 03:49:27 2005
From: rasjidw at openminddev.net (Rasjid Wilcox)
Date: Tue Jul 26 03:49:59 2005
Subject: [Twisted-web] Custom __del__ not run
Message-ID: <200507261949.28060.rasjidw@openminddev.net>

Hello again.

I have my xmlrpc class that I am running in twisted.  I want it to do some 
cleaning up when it is finished, and so I have defined a custom __del__ 
procedure.

However, when mixed with a looping call, it never gets called.  Sample code 
below.  Remove the two lines starting with self.looping, and it all works as 
expected.  Put them in, and the custom __del__ is not called.

Is this a bug in twisted?  Or have I broken some twisted rule about using 
__del__ procedures?  Is there some other way of saying 'when you have stopped 
the reactor, do foo', that twisted would be happy with?

Any suggestions welcome.  :-)

Thanks,

Rasjid

---------------------------------
from twisted.web import xmlrpc

import xmlrpclib
from twisted.internet import reactor, task

class Hello(xmlrpc.XMLRPC):
    def __init__(self):
        print 'Init class Hello'
        # the following two lines cause the custom __del__
        # function to never be called
        self.looping = task.LoopingCall(self.foo)
        self.looping.start(5)
    def __del__(self):
        print 'Tidy up class Hello'
    def foo(self):
        print 'foo!'
    def xmlrpc_hello(self):
        """Return 'hello, world'."""
        return 'hello, world!'
    def xmlrpc_quit(self):
        reactor.callLater(0.1, reactor.stop)
        return 'Shutting down server'

def main():
    from twisted.web import server
    r = Hello()
    reactor.listenTCP(7080, server.Site(r), interface = '127.0.0.1')
    reactor.run()

if __name__ == '__main__':
    main()


-- 
Rasjid Wilcox
Melbourne, Australia (UTC +10 hrs)

From exarkun at divmod.com  Tue Jul 26 06:39:07 2005
From: exarkun at divmod.com (Jp Calderone)
Date: Tue Jul 26 06:39:12 2005
Subject: [Twisted-web] Custom __del__ not run
In-Reply-To: <200507261949.28060.rasjidw@openminddev.net>
Message-ID: <20050726123907.26278.373967214.divmod.quotient.17182@ohm>

On Tue, 26 Jul 2005 19:49:27 +1000, Rasjid Wilcox <rasjidw@openminddev.net> wrote:
>Hello again.
>
>I have my xmlrpc class that I am running in twisted.  I want it to do some
>cleaning up when it is finished, and so I have defined a custom __del__
>procedure.

"Finished"?  "__del__" isn't a "finished" callback.  It's a garbage collection  callback.

>
>However, when mixed with a looping call, it never gets called.  Sample code
>below.  Remove the two lines starting with self.looping, and it all works as
>expected.  Put them in, and the custom __del__ is not called.

You created a strong, permanent reference to your instance.  Now it will never be garbage collected.  So there's no reason for __del__ to ever be called.

>
>Is this a bug in twisted?  Or have I broken some twisted rule about using
>__del__ procedures?  Is there some other way of saying 'when you have stopped
>the reactor, do foo', that twisted would be happy with?
>

If you want to run something when the reactor stops, you either want to use a server or a system event trigger:

    from twisted.application import service

    class SomeService(service.Service):
        def stopService(self):
            print 'bye bye'

    # Having a reference to theApplicationOrAnotherService is left 
    # as an exercise for the reader
    SomeService().setServiceParent(theApplicationOrAnotherService) 

Alternatively

    from twisted.internet import reactor

    class MyThing:
        def __init__(self):
            reactor.addSystemEventTrigger('before', 'shutdown', self.stop)

        def stop(self):
            print 'bye bye'

    th = MyThing()

In general, don't use __del__.  It doesn't do what you want.

Jp

From p.mayers at imperial.ac.uk  Tue Jul 26 07:50:58 2005
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Tue Jul 26 07:51:37 2005
Subject: [Twisted-web] Nevow importing reactor?
Message-ID: <42E63FC2.2090407@imperial.ac.uk>

Is this bad?

http://divmod.org/users/roundup.twistd/nevow/issue211

Twisted says:

http://twistedmatrix.com/projects/core/documentation/howto/choosing-reactor.html

"""IMPORTANT: installing a reactor should be the first thing done in the 
app, since any code that does from twisted.internet import reactor will 
automatically install the default reactor if the code hasen't already 
installed one."""

It doesn't explicitly state the converse, that the framework should not 
cause a reactor to be installed, but I've seen plenty of code that 
"defers" importing twisted.internet.reactor.

If it's not a bug then ignore, but if it's a trivial fix then...?

From foom at fuhm.net  Tue Jul 26 08:15:37 2005
From: foom at fuhm.net (James Y Knight)
Date: Tue Jul 26 08:15:51 2005
Subject: [Twisted-web] Nevow importing reactor?
In-Reply-To: <42E63FC2.2090407@imperial.ac.uk>
References: <42E63FC2.2090407@imperial.ac.uk>
Message-ID: <00EF7081-B2B5-4A8F-91E2-1309817157E3@fuhm.net>

On Jul 26, 2005, at 9:50 AM, Phil Mayers wrote:
> Is this bad?
>
> http://divmod.org/users/roundup.twistd/nevow/issue211
>
> Twisted says:
>
> http://twistedmatrix.com/projects/core/documentation/howto/choosing- 
> reactor.html
>
> """IMPORTANT: installing a reactor should be the first thing done  
> in the app, since any code that does from twisted.internet import  
> reactor will automatically install the default reactor if the code  
> hasen't already installed one."""
>
> It doesn't explicitly state the converse, that the framework should  
> not cause a reactor to be installed, but I've seen plenty of code  
> that "defers" importing twisted.internet.reactor.
>
> If it's not a bug then ignore, but if it's a trivial fix then...?

Framework code that gets imported by the reactor you want to install  
*must* not cause the default reactor to get installed, of course (nor  
must any framework code which is imported by twisted.scripts.twistd).  
However, as far as I know any other framework code may import it  
whenever desired.

If it's a trivial fix and a patch is supplied I don't suppose anyone  
would mind applying it, but I don't think there's much point. Just  
follow the advise above and you should be all set no matter what.

James

From tv at twistedmatrix.com  Tue Jul 26 13:24:58 2005
From: tv at twistedmatrix.com (Tommi Virtanen)
Date: Tue Jul 26 13:26:14 2005
Subject: [Twisted-web] nevow.i18n bugfix and feature need review and commit
Message-ID: <42E68E0A.4040508@twistedmatrix.com>

Hi. The patches attached to these two bugs need a review
and someone to commit -- I don't have access to my normal
work environment right now.

They do two things:

 - number formatting:
    _('localization with number %d and floats %f') % (42, 3.141)

 - support proper pluralization:
    ungettext('%d dog', '%d dogs', count) % count

http://divmod.org/users/roundup.twistd/nevow/issue212
http://divmod.org/users/roundup.twistd/nevow/issue213

From rasjidw at openminddev.net  Tue Jul 26 18:31:10 2005
From: rasjidw at openminddev.net (Rasjid Wilcox)
Date: Tue Jul 26 18:31:42 2005
Subject: [Twisted-web] Custom __del__ not run
In-Reply-To: <20050726123907.26278.373967214.divmod.quotient.17182@ohm>
References: <20050726123907.26278.373967214.divmod.quotient.17182@ohm>
Message-ID: <200507271031.10391.rasjidw@openminddev.net>

On Tue, 26 Jul 2005 10:39 pm, Jp Calderone wrote:
> "Finished"?  "__del__" isn't a "finished" callback.  It's a garbage
> collection  callback.

Oh.  I had the misconception that the __del__ routine would always be called 
eventually, even if it was not until the interpreter was about to exit.  
However, this seems not to be the case.

> Alternatively
>
>     from twisted.internet import reactor
>
>     class MyThing:
>         def __init__(self):
>             reactor.addSystemEventTrigger('before', 'shutdown', self.stop)
>
>         def stop(self):
>             print 'bye bye'
>
>     th = MyThing()

This seems to work perfectly.  Thanks.

Rasjid.

-- 
Rasjid Wilcox
Melbourne, Australia (UTC +10 hrs)

From john.horton at blackspider.com  Wed Jul 27 03:22:27 2005
From: john.horton at blackspider.com (John Horton)
Date: Wed Jul 27 03:22:32 2005
Subject: [Twisted-web] using livepage
Message-ID: <1122456148.24463.26.camel@jhorton-dt.rdgoffice.blackspider.com>

Hi
I have looked through the examples and the archives but cannot find what
I am looking for.
I need to be able to create a piece of HTML that is updated once a
second via livepage.
currently my html looks like

<html><head></head>
<body>
<span class="time"><nevow:slot name="time" /></span>
</body></head></html>
and the python looks like

def render_time(self, context, data):
	context.fillSlots('time', '%s' % time.ctime())
	return context.tag

but I need to refresh the browser to update the time - can anyone point
me in the right direction so that the time is constantly updated?
Thanks
John


This message has been scanned for viruses by BlackSpider MailControl - www.blackspider.com

From tjs at nunatak.com.au  Wed Jul 27 06:45:36 2005
From: tjs at nunatak.com.au (Timothy Stebbing)
Date: Wed Jul 27 06:46:17 2005
Subject: [Twisted-web] nufox
Message-ID: <42E781F0.6030505@nunatak.com.au>

G'day,

    I just thought that I would make a little project announcement about 
something I've been tinkering with for the past week or two. 

NuFox is a server-side XUL toolkit written on top of nevow. It uses a 
customised stan dialect with xml namespace support as well as livepage 
(nevow svn head version), and then abstracts that all away into a more 
python-gui-toolit-like API.

Its very early in development but its already pretty powerful in terms 
of what you can do with it, check it out and play with some of the 
examples. Feedback is most welcome.

-tjs

From tjs at nunatak.com.au  Wed Jul 27 06:56:28 2005
From: tjs at nunatak.com.au (Timothy Stebbing)
Date: Wed Jul 27 06:57:10 2005
Subject: [Twisted-web] re: nufox
Message-ID: <42E7847C.1010808@nunatak.com.au>

oops, I guess an URL is customary..

http://trac.nunatak.com.au/projects/nufox

-tjs

From maillists at ivsn.com  Wed Jul 27 08:18:12 2005
From: maillists at ivsn.com (Paul Reznicek)
Date: Wed Jul 27 08:18:49 2005
Subject: [Twisted-web] re: nufox | please omit using of _ (= underscore),
 it's gettext function and identifier
In-Reply-To: <42E7847C.1010808@nunatak.com.au>
References: <42E7847C.1010808@nunatak.com.au>
Message-ID: <42E797A4.5020205@ivsn.com>

Hi Timothy,
thank you for posting your code, although I've no time to test it
at the moment, I believe, it's very good idea behind.
Only one comment:
  PLEASE DON'T USE  _ (= underscore)   as a class name (or anything else)
This function name is used by convention for i18n translation, not only
within Nevow, also by gettext (For the usage, please see Nevow's examples
of i18n.)
All automation tools (known by me) use the syntax
  print _('Some text for localization')
for identifying and extracting translatable texts  into *.po files.
Python's gettext bindings and Nevow's i18n works fine with this too.

Thanks
-Paul

Timothy Stebbing wrote:
> oops, I guess an URL is customary..
> 
> http://trac.nunatak.com.au/projects/nufox

From tjs at nunatak.com.au  Wed Jul 27 17:13:13 2005
From: tjs at nunatak.com.au (Timothy Stebbing)
Date: Wed Jul 27 17:13:51 2005
Subject: [Twisted-web] re: nufox | please omit using of _ (= underscore), 
	it's gettext function and identifier
In-Reply-To: <42E797A4.5020205@ivsn.com>
References: <42E7847C.1010808@nunatak.com.au> <42E797A4.5020205@ivsn.com>
Message-ID: <42E81509.4030601@nunatak.com.au>

Paul Reznicek wrote:

> Hi Timothy,
> thank you for posting your code, although I've no time to test it
> at the moment, I believe, it's very good idea behind.
> Only one comment:
>  PLEASE DON'T USE  _ (= underscore)   as a class name (or anything else)
> This function name is used by convention for i18n translation, not only
> within Nevow, also by gettext (For the usage, please see Nevow's examples
> of i18n.)
> All automation tools (known by me) use the syntax
>  print _('Some text for localization')
> for identifying and extracting translatable texts  into *.po files.
> Python's gettext bindings and Nevow's i18n works fine with this too.
>
> Thanks
> -Paul
>
> Timothy Stebbing wrote:
>
>> oops, I guess an URL is customary..
>>
>> http://trac.nunatak.com.au/projects/nufox
>
>
> _______________________________________________
> Twisted-web mailing list
> Twisted-web@twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web

Thanks for the info Paul, I've renamed it. Its a bad habit of mine to 
call anon class/funcs _, but its also a shame that it is a convention 
for i18n.

-tjs

From mike at mkp.ca  Thu Jul 28 11:59:44 2005
From: mike at mkp.ca (Mike Pelletier)
Date: Thu Jul 28 11:59:41 2005
Subject: [Twisted-web] using livepage
In-Reply-To: <1122456148.24463.26.camel@jhorton-dt.rdgoffice.blackspider.com>
References: <1122456148.24463.26.camel@jhorton-dt.rdgoffice.blackspider.com>
Message-ID: <200507281359.46363.mike@mkp.ca>

On Wed July 27 2005 05:22, John Horton wrote:
> Hi
> I have looked through the examples and the archives but cannot find what
> I am looking for.
> I need to be able to create a piece of HTML that is updated once a
> second via livepage.
> currently my html looks like
>
> <html><head></head>

I *think* you are missing the glue that makes livepage "live":

<html>
 <head>
  <script nevow:render="liveid"/>
  <script nevow:render="liveglue"/>
  ...
 </head>
 ...
</html>

Mike.

From eurleif at gmail.com  Fri Jul 29 21:24:25 2005
From: eurleif at gmail.com (Leif K-Brooks)
Date: Fri Jul 29 21:24:32 2005
Subject: [Twisted-web] Right way to implement layout objects with Nevow?
Message-ID: <85d9a90905072920246adfa247@mail.gmail.com>

For the Nevow-based application I'm coding, I want to have a
standardized layout with a header and footer. The layout needs to be
implemented as an object, so that a new one can be swapped in without
having to change the code.

A simplified version of the code I'm using looks like this:


class Layout(rend.Fragment):
    docFactory = loaders.xmlstr('''
<html xmlns:nevow="http://nevow.com/ns/nevow/0.1">
<head>
<title>Foo</title>
</head>
<body>
<p>Header...</p>
<nevow:invisible nevow:data="body" nevow:render="data"/>
<p>Footer...</p>
</body>
</html>
''')
    def data_body(self, context, data):
        return self.original

class Resource(rend.Page):
    docFactory = loaders.xmlstr('''
<html  xmlns:nevow="http://nevow.com/ns/nevow/0.1" nevow:render="withLayout">
<body nevow:pattern="body">
<p>Hello, world!</p>
</body>
</html>
''')
    def render_withLayout(self, context, data):
        return Layout(inevow.IQ(context).onePattern('body').children)


This works fine for a simple static page like the one in the example,
but if I add nevow:render="foo" to an element in the page, it gets
looked up as as Layout.render_foo instead of as Resource.render_foo.

I can fix that by making Resource.render_withLayout call flatten() on
the page's body, but that causes Deferred data to stop working. Is
there a better approach?

From eurleif at gmail.com  Sat Jul 30 16:30:19 2005
From: eurleif at gmail.com (Leif K-Brooks)
Date: Sat Jul 30 16:30:23 2005
Subject: [Twisted-web] Right way to implement layout objects with Nevow?
In-Reply-To: <85d9a90905072920246adfa247@mail.gmail.com>
References: <85d9a90905072920246adfa247@mail.gmail.com>
Message-ID: <85d9a909050730153035124186@mail.gmail.com>

For the Nevow-based application I'm coding, I want to have a
standardized layout with a header and footer. The layout needs to be
implemented as an object, so that a new one can be swapped in without
having to change the code.

A simplified version of the code I'm using looks like this:


class Layout(rend.Fragment):
    docFactory = loaders.xmlstr('''
<html xmlns:nevow="http://nevow.com/ns/nevow/0.1">
<head>
<title>Foo</title>
</head>
<body>
<p>Header...</p>
<nevow:invisible nevow:data="body" nevow:render="data"/>
<p>Footer...</p>
</body>
</html>
''')
    def data_body(self, context, data):
        return self.original

class Resource(rend.Page):
    docFactory = loaders.xmlstr('''
<html  xmlns:nevow="http://nevow.com/ns/nevow/0.1" nevow:render="withLayout">
<body nevow:pattern="body">
<p>Hello, world!</p>
</body>
</html>
''')
    def render_withLayout(self, context, data):
        return Layout(inevow.IQ(context).onePattern('body').children)


This works fine for a simple static page like the one in the example,
but if I add nevow:render="foo" to an element in the page, it gets
looked up as as Layout.render_foo instead of as Resource.render_foo.

I can fix that by making Resource.render_withLayout call flatten() on
the page's body, but that causes Deferred data to stop working. Is 
there a better approach?

