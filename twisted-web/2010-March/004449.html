<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Twisted and reverse proxies
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Twisted%20and%20reverse%20proxies&In-Reply-To=926718221.1631270000659978.JavaMail.rgacote%40Raymond-Cotes-Mac-mini.local">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004447.html">
   <LINK REL="Next"  HREF="004450.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Twisted and reverse proxies</H1>
    <B>Maarten ter Huurne</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Twisted%20and%20reverse%20proxies&In-Reply-To=926718221.1631270000659978.JavaMail.rgacote%40Raymond-Cotes-Mac-mini.local"
       TITLE="[Twisted-web] Twisted and reverse proxies">maarten at treewalker.org
       </A><BR>
    <I>Wed Mar 31 05:42:36 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="004447.html">[Twisted-web] Twisted and reverse proxies
</A></li>
        <LI>Next message: <A HREF="004450.html">[Twisted-web] Twisted and reverse proxies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4449">[ date ]</a>
              <a href="thread.html#4449">[ thread ]</a>
              <a href="subject.html#4449">[ subject ]</a>
              <a href="author.html#4449">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wednesday 31 March 2010, Ray Cote wrote:

&gt;<i> One note, you ask how your static resources 'will react' to being reverse
</I>&gt;<i> proxied. When running Twisted behind Apache, we find it most useful to
</I>&gt;<i> serve all the static files directly from Apache and leave Twisted to
</I>&gt;<i> serve only the dynamic content. No reason to use Twisted to serve static
</I>&gt;<i> files when there's a perfectly good Apache server available.
</I>
In most cases you are right, but there can be a reason to let Twisted serve 
the static files.

For performance it is best to set the expiery date of a static resource a 
long time (1 year) into the future. That way, the browser can load it once 
and uses its cached version ever after.

However, if you change the resoure, for example to add elements to your 
style sheet, you want the new version to be used instead of the outdated 
cached version. To force the new version to be loaded without reducing the 
expiery time dramatically or having to manually flush the browser's cache, 
you can give the new version a new URL.

You could put the release version in the URL: &quot;app/static/1.0&quot;, 
&quot;app/static/1.1&quot; etc. That works well for deployed apps, but is still a pain 
for development. So what I did instead was generate a unique ID on startup 
of the app and use that ID in the URL: &quot;app/static-HDUI89BDY3/main.css&quot;, 
&quot;app/static-HDUI89BDY3/icon.png&quot; etc. So after a content chance, an app 
restart ensures the browser will refetch everything.

An alternative would be to compute a hash of the static content and use that 
hash the URL. That way you would not need an application restart when static 
content changes.

Bye,
		Maarten

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004447.html">[Twisted-web] Twisted and reverse proxies
</A></li>
	<LI>Next message: <A HREF="004450.html">[Twisted-web] Twisted and reverse proxies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4449">[ date ]</a>
              <a href="thread.html#4449">[ thread ]</a>
              <a href="subject.html#4449">[ subject ]</a>
              <a href="author.html#4449">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
