<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] url.URL.fromRequest gives unexpected behaviour
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20url.URL.fromRequest%20gives%20unexpected%20behaviour&In-Reply-To=1094643348.12413.129.camel%40harold">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000621.html">
   <LINK REL="Next"  HREF="000642.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] url.URL.fromRequest gives unexpected behaviour</H1>
    <B>Donovan Preston</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20url.URL.fromRequest%20gives%20unexpected%20behaviour&In-Reply-To=1094643348.12413.129.camel%40harold"
       TITLE="[Twisted-web] url.URL.fromRequest gives unexpected behaviour">dp at ulaluma.com
       </A><BR>
    <I>Tue Sep 14 08:03:22 MDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000621.html">[Twisted-web] url.URL.fromRequest gives unexpected behaviour
</A></li>
        <LI>Next message: <A HREF="000642.html">[Twisted-web] url.URL.fromRequest gives unexpected behaviour
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#639">[ date ]</a>
              <a href="thread.html#639">[ thread ]</a>
              <a href="subject.html#639">[ subject ]</a>
              <a href="author.html#639">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Sep 8, 2004, at 7:35 AM, Matt Goodall wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> URL.fromRequest() currently creates a URL for the path segments that
</I>&gt;<i> have been resolved so far. That means that creating a URL in 
</I>&gt;<i> locateChild
</I>&gt;<i> and a rend_* method gives you a different URL. That's unexpected.
</I>
Hi, sorry for not responding for so long.

This is actually intentional behavior and is expected -- but so much of 
the url module seems surprising to other people that I think we have to 
stop and seriously revisit it.

&gt;<i> I think we need more explicit ways of creating a URL to allow for
</I>&gt;<i> different usecases:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> URL.fromString(aStr)
</I>&gt;<i>     create a URL from the string. this is already implemented
</I>&gt;<i>
</I>&gt;<i> URL.fromRequestURI(aRequest)
</I>&gt;<i>     create a URL that matches the request exactly
</I>
This would always return a URL object which could reproduce the URL 
used to make the current request. This would be a good thing. But what 
exactly does the URI at the end of the method name indicate?

&gt;<i> URL.fromContext(aContext)
</I>&gt;<i>     create a URL for handled path segments. kind of like the
</I>&gt;<i>     url.here overlay but not so lazy.
</I>
Recently, I changed the way keeping track of the current segments works 
by remembering ICurrentSegments and IRemainingSegments in the context. 
Since each Page gets it's own Context object, URL.fromContext could be 
explicitly given a Context object which is at the level for which you 
want the url generated. For example, if you are requesting the url 
/foo/bar/baz but you want a URL object for just /foo, you could find 
the Context object representing this and do URL.fromContext with it. 
(You could find it in the appropriate locateChild, or you could find it 
by climbing the Context .parent chain). This would be a nice way to 
build breadcrumb trails.

&gt;<i> A better name for fromContext might be fromLocation, fromSegment, etc.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> We can deprecate URL.fromRequest but, until it's removed, make it call
</I>&gt;<i> fromContext.
</I>
I don't think we should deprecate fromRequest, just change what it does 
semantically. I don't think anyone was relying on the old behavior, 
anyway.

dp


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000621.html">[Twisted-web] url.URL.fromRequest gives unexpected behaviour
</A></li>
	<LI>Next message: <A HREF="000642.html">[Twisted-web] url.URL.fromRequest gives unexpected behaviour
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#639">[ date ]</a>
              <a href="thread.html#639">[ thread ]</a>
              <a href="subject.html#639">[ subject ]</a>
              <a href="author.html#639">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
