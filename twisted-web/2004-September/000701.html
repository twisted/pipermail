<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] adding etag and modified arguments to twisted
	feedparser
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20adding%20etag%20and%20modified%20arguments%20to%20twisted%0A%09feedparser&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000709.html">
   <LINK REL="Next"  HREF="000702.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] adding etag and modified arguments to twisted
	feedparser</H1>
    <B>Selwyn McCracken</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20adding%20etag%20and%20modified%20arguments%20to%20twisted%0A%09feedparser&In-Reply-To="
       TITLE="[Twisted-web] adding etag and modified arguments to twisted
	feedparser">selwyn.mccracken at stonebow.otago.ac.nz
       </A><BR>
    <I>Tue Sep 28 15:53:31 MDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000709.html">[Twisted-web] Re: Serving files from many web-servers thru one
	central web-server
</A></li>
        <LI>Next message: <A HREF="000702.html">[Twisted-web] adding etag and modified arguments to twisted
	feedparser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#701">[ date ]</a>
              <a href="thread.html#701">[ thread ]</a>
              <a href="subject.html#701">[ subject ]</a>
              <a href="author.html#701">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hi,

I am having trouble modifying the twisted-based rss aggregator from the 
python cookbook so that feedparser can make use of the update related 
arguments of 'etag' and 'modified' to save bandwith.
(see <A HREF="http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/277099">http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/277099</A>)

I realise that the problem is deferred related, but I can't seem to 
resolve the problem, even after reading the deferred documentation.

Anyway, the series of deferred functions that I think are relevant are:

1) def getPage(self, data, args): #args is the rss feed link
         return client.getPage(args,timeout=TIMEOUT)


2) def parseFeed(self, feed):
     parsed = feedparser.parse(cStringIO.StringIO(feed))

The problem is that getPage() requests the entire rss feed, and then 
passes the stream through to feedparser.parse. Normally however, 
feedparser.parse() takes furthers arguments of 'etag' and 'modified' so 
that only new feed information is returned, thereby saving bandwidth.

I tried modifying getPage() to return feedparser.parse(args), and 
removing the need for parseFeed(), but it runs substantially slower than 
the original method, I presume in a synchronous manner.

Any assistance in helping to restore the impressive parallel downloading 
performance, but with the the datetime arguments included, would be 
greatly appreciated.

many thanks,
Selwyn





</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000709.html">[Twisted-web] Re: Serving files from many web-servers thru one
	central web-server
</A></li>
	<LI>Next message: <A HREF="000702.html">[Twisted-web] adding etag and modified arguments to twisted
	feedparser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#701">[ date ]</a>
              <a href="thread.html#701">[ thread ]</a>
              <a href="subject.html#701">[ subject ]</a>
              <a href="author.html#701">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
