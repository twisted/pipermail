<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] nevow/stackless bugs -- patch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20nevow/stackless%20bugs%20--%20patch&In-Reply-To=115B6036-1335-11D9-B112-000A95A50FB2%40fuhm.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000714.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] nevow/stackless bugs -- patch</H1>
    <B>Donovan Preston</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20nevow/stackless%20bugs%20--%20patch&In-Reply-To=115B6036-1335-11D9-B112-000A95A50FB2%40fuhm.net"
       TITLE="[Twisted-web] nevow/stackless bugs -- patch">dp at ulaluma.com
       </A><BR>
    <I>Thu Sep 30 17:50:08 MDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000714.html">[Twisted-web] nevow/stackless bugs -- patch
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#715">[ date ]</a>
              <a href="thread.html#715">[ thread ]</a>
              <a href="subject.html#715">[ subject ]</a>
              <a href="author.html#715">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Sep 30, 2004, at 7:04 PM, James Y Knight wrote:

&gt;<i> On Sep 30, 2004, at 3:45 PM, Peter Hunt wrote:
</I>&gt;&gt;<i> I've been trying to run stan on stackless when I ran into a problem
</I>&gt;&gt;<i> with render methods. Stackless uses &quot;stackless.instancemethod&quot; instead
</I>&gt;&gt;<i> of &quot;__builtin__.instancemethod&quot;, and &quot;stackless.function&quot; instead of
</I>&gt;&gt;<i> &quot;__builtin__.function&quot;. Attached is a svn diff patch of the changes I
</I>&gt;&gt;<i> made to __init__.py in order for stan to support stackless properly.
</I>&gt;<i>
</I>&gt;<i> I think this is a serious problem with the lazy adapter registration. 
</I>&gt;<i> Even for things that aren't __builtin__ brokenness. For example, if I 
</I>&gt;<i> refactor and move some classes around, their module name will change. 
</I>&gt;<i> To maintain backwards compatibility, I keep the binding in the old 
</I>&gt;<i> module with a deprecation warning, which keeps everything happy, 
</I>&gt;<i> EXCEPT for the lazy adapter registration. Since it keys on the full 
</I>&gt;<i> object name, it breaks.
</I>&gt;<i>
</I>&gt;<i> But, as for this patch, committed.
</I>
It's also a problem when you have an adapter registration and then you 
delete the adapter. You have garbage in your registrations that you 
don't know about until later.

To help prevent this situation from occurring, I wrote some tests which 
assert that all the registered adapters actually exist, so while you 
might not see it in production, you'll see it if you run the tests.

I think writing a test that verifies your adapters are registered 
properly is the best solution.

dp


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000714.html">[Twisted-web] nevow/stackless bugs -- patch
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#715">[ date ]</a>
              <a href="thread.html#715">[ thread ]</a>
              <a href="subject.html#715">[ subject ]</a>
              <a href="author.html#715">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
