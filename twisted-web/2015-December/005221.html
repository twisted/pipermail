<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] [BACKWARDS INCOMPATIBLE] Moving Twisted to PEP-3333
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-web%5D%20%5BBACKWARDS%20INCOMPATIBLE%5D%20Moving%20Twisted%20to%20PEP-3333&In-Reply-To=%3C39E4584B-03DD-4042-9393-E5445C9F6E70%40atleastfornow.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005220.html">
   <LINK REL="Next"  HREF="005222.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] [BACKWARDS INCOMPATIBLE] Moving Twisted to PEP-3333</H1>
    <B>Amber &quot;Hawkie&quot; Brown</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-web%5D%20%5BBACKWARDS%20INCOMPATIBLE%5D%20Moving%20Twisted%20to%20PEP-3333&In-Reply-To=%3C39E4584B-03DD-4042-9393-E5445C9F6E70%40atleastfornow.net%3E"
       TITLE="[Twisted-web] [BACKWARDS INCOMPATIBLE] Moving Twisted to PEP-3333">hawkowl at atleastfornow.net
       </A><BR>
    <I>Mon Dec 21 23:27:23 MST 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="005220.html">[Twisted-web] Nevow 0.12.0
</A></li>
        <LI>Next message: <A HREF="005222.html">[Twisted-web] [(maybe) BACKWARDS INCOMPATIBLE] Moving Twisted to	PEP-3333
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5221">[ date ]</a>
              <a href="thread.html#5221">[ thread ]</a>
              <a href="subject.html#5221">[ subject ]</a>
              <a href="author.html#5221">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi everyone!

We've been attempting to port twisted.web.wsgi to Python 3, as of recent. The existence of PEP-3333 makes this easier, but due to our backwards compatibility policy, implementing stricter checks to make sure t.w.wsgi-using applications are actually PEP-3333 may be a change which cannot be easily done.

The patch we have currently, which is based on work by jMyles (of Hendrix), tirelessly worked on allennap (of Canonical MAAS), and sheparded along by the wonderful Adi (our other Twisted Fellow), is in very good shape, bringing Twisted's WSGI support to be compliant with PEP-3333. PEP-3333 is much stricter on bytes/Unicode, and the patch introduces some further type checking that the original PEP-333 describes as a must, even though we did not check this before.

This branch cannot currently be merged because of backwards compatibility issues -- the spirit of our Compatibility Policy is that 'apps keep working', and sufficiently Unicode unclean WSGI applications may break due to it, even though PEP-333 is very explicit in saying that &quot;HTTP does not directly support Unicode, and neither does this interface&quot;.

So, I am looking to get a compat exception for this -- WSGI is very explicit in its types, and any misbehaving applications are violating the specification grossly enough for there to possibly not need a compat exception -- but going through this way may catch the attention of anyone with a potentially misbehaving application and fix it before Twisted 16.0, when I expect this will be merged.

The ticket is <A HREF="https://twistedmatrix.com/trac/ticket/7993,">https://twistedmatrix.com/trac/ticket/7993,</A> and the branch you should test against is linked at the top. The compatibility policy will allow a week before we move to merge the ticket, although we may have some changes to the branch to make warnings turn into errors, if we are breaking backwards compat, so please ensure no exceptions *or warnings* are produced by your code.

Thanks,

- Amber
Twisted Fellow, RM, Python 3 Overlord
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20151222/e631024e/attachment.pgp">http://twistedmatrix.com/pipermail/twisted-web/attachments/20151222/e631024e/attachment.pgp</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005220.html">[Twisted-web] Nevow 0.12.0
</A></li>
	<LI>Next message: <A HREF="005222.html">[Twisted-web] [(maybe) BACKWARDS INCOMPATIBLE] Moving Twisted to	PEP-3333
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5221">[ date ]</a>
              <a href="thread.html#5221">[ thread ]</a>
              <a href="subject.html#5221">[ subject ]</a>
              <a href="author.html#5221">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
