<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Re: URL length limits in twisted-web
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Re%3A%20URL%20length%20limits%20in%20twisted-web&In-Reply-To=20050825181323.10157.qmail%40web31513.mail.mud.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001860.html">
   <LINK REL="Next"  HREF="001863.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Re: URL length limits in twisted-web</H1>
    <B>Jp Calderone</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Re%3A%20URL%20length%20limits%20in%20twisted-web&In-Reply-To=20050825181323.10157.qmail%40web31513.mail.mud.yahoo.com"
       TITLE="[Twisted-web] Re: URL length limits in twisted-web">exarkun at divmod.com
       </A><BR>
    <I>Thu Aug 25 20:30:58 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001860.html">[Twisted-web] Re: URL length limits in twisted-web
</A></li>
        <LI>Next message: <A HREF="001863.html">[Twisted-web] Tabbed pane
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1861">[ date ]</a>
              <a href="thread.html#1861">[ thread ]</a>
              <a href="subject.html#1861">[ subject ]</a>
              <a href="author.html#1861">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 25 Aug 2005 11:13:23 -0700 (PDT), Lenny G Arbage &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">alengarbage at yahoo.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i>--- Tommi Virtanen wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There's this DoS-avoidance bit:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> class LineReceiver(protocol.Protocol,
</I>&gt;<i>_PauseableMixin):
</I>&gt;&gt;<i>     ...
</I>&gt;&gt;<i>     MAX_LENGTH = 16384
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  Thanks, Tommi.  That appears to be it (16898 -
</I>&gt;<i>len('<A HREF="http://'">http://'</A>) and the non &quot;path&quot; part of my URL = the
</I>&gt;<i>more sane number of 16384).
</I>&gt;<i>
</I>&gt;<i>  The 'silent failure' feature doesn't seem quite
</I>&gt;<i>right to me.
</I>
It isn't a silent failure.  The connection is dropped, as you notice.  The client is entirely capable of noticing that the server never responded to its request.  If no response is received, the correct thing to do is /not/ to assume everything worked perfectly.  Especially if the response was supposed to be a page.  twisted.web.client may well be buggy in its handling of this case (I've noticed several other bugs of this variety, though I'm not sure I've seen this one in particular).
&gt;<i> 
</I>&gt;<i> [snip]
</I>&gt;<i>
</I>&gt;<i>  I changed LineReceiver.lineLengthReceived() as
</I>&gt;<i>follows:
</I>&gt;<i>
</I>&gt;<i>def lineLengthExceeded(self, line):
</I>&gt;<i>        &quot;&quot;&quot;Called when the maximum line length has
</I>&gt;<i>been reached.
</I>&gt;<i>        Override if it needs to be dealt with in some
</I>&gt;<i>special way.
</I>&gt;<i>        &quot;&quot;&quot;
</I>&gt;<i>        #return self.transport.loseConnection()
</I>&gt;<i>        self.transport.loseConnection()
</I>&gt;<i>        raise error.ConnectionLost('Line length
</I>&gt;<i>exceeded')
</I>&gt;<i>
</I>&gt;<i>  Which now does what I would expect (raises an
</I>&gt;<i>exception if I try to send URLs that exceed the
</I>&gt;<i>maximum), but I'm sure there are reasons not to raise
</I>&gt;<i>an exception here (other classes that rely on
</I>&gt;<i>LineReceiver, etc).
</I>
This just throws a random exception up into the reactor.  This is not allowed, but Twisted kindly catches it, logs it, and makes sure the protocol is not given any further data.  It's not an error condition you can reasonably deal with, it's just loud and ugly and obnoxious to make sure you notice your program is horribly broken and should be fixed.

&gt;<i>
</I>&gt;<i>  What is the proper solution to this issue?
</I>
A better HTTP client.  Some people have been working in this area.  Perhaps they will grace us with a progress report.

Jp

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001860.html">[Twisted-web] Re: URL length limits in twisted-web
</A></li>
	<LI>Next message: <A HREF="001863.html">[Twisted-web] Tabbed pane
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1861">[ date ]</a>
              <a href="thread.html#1861">[ thread ]</a>
              <a href="subject.html#1861">[ subject ]</a>
              <a href="author.html#1861">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
