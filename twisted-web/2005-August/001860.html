<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Re: URL length limits in twisted-web
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Re%3A%20URL%20length%20limits%20in%20twisted-web&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001858.html">
   <LINK REL="Next"  HREF="001861.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Re: URL length limits in twisted-web</H1>
    <B>Lenny G Arbage</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Re%3A%20URL%20length%20limits%20in%20twisted-web&In-Reply-To="
       TITLE="[Twisted-web] Re: URL length limits in twisted-web">alengarbage at yahoo.com
       </A><BR>
    <I>Thu Aug 25 12:13:23 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001858.html">[Twisted-web] How to &quot;monitor&quot; parallel executions of Deferreds
</A></li>
        <LI>Next message: <A HREF="001861.html">[Twisted-web] Re: URL length limits in twisted-web
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1860">[ date ]</a>
              <a href="thread.html#1860">[ thread ]</a>
              <a href="subject.html#1860">[ subject ]</a>
              <a href="author.html#1860">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
--- Tommi Virtanen wrote:
&gt;<i>
</I>&gt;<i> There's this DoS-avoidance bit:
</I>&gt;<i> 
</I>&gt;<i> class LineReceiver(protocol.Protocol,
</I>_PauseableMixin):
&gt;<i>     ...
</I>&gt;<i>     MAX_LENGTH = 16384
</I>

  Thanks, Tommi.  That appears to be it (16898 -
len('<A HREF="http://'">http://'</A>) and the non &quot;path&quot; part of my URL = the
more sane number of 16384).

  The 'silent failure' feature doesn't seem quite
right to me.  LineReceiver.dataReceived() returns
self.lineLengthExceeded(line), which calls
self.transport.loseConnection(), which means that
neither http.HTTPClient.lineReceived() nor
http.HTTPChannel.lineReceived() ever get called.  If
I'm following the code correctly, loseConnection()
does its job silently, and the caller never knows what
happened, but is led to believe that the request was
sent successfully.

  I changed LineReceiver.lineLengthReceived() as
follows:

def lineLengthExceeded(self, line):
        &quot;&quot;&quot;Called when the maximum line length has
been reached.
        Override if it needs to be dealt with in some
special way.
        &quot;&quot;&quot;
        #return self.transport.loseConnection()
        self.transport.loseConnection()
        raise error.ConnectionLost('Line length
exceeded')

  Which now does what I would expect (raises an
exception if I try to send URLs that exceed the
maximum), but I'm sure there are reasons not to raise
an exception here (other classes that rely on
LineReceiver, etc).

  What is the proper solution to this issue?

Lenny


		
____________________________________________________
Start your day with Yahoo! - make it your home page 
<A HREF="http://www.yahoo.com/r/hs">http://www.yahoo.com/r/hs</A> 
 

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001858.html">[Twisted-web] How to &quot;monitor&quot; parallel executions of Deferreds
</A></li>
	<LI>Next message: <A HREF="001861.html">[Twisted-web] Re: URL length limits in twisted-web
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1860">[ date ]</a>
              <a href="thread.html#1860">[ thread ]</a>
              <a href="subject.html#1860">[ subject ]</a>
              <a href="author.html#1860">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
