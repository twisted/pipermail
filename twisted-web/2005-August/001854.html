<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] registerAdapter and implemented interfaces
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20registerAdapter%20and%20implemented%20interfaces&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001855.html">
   <LINK REL="Next"  HREF="001859.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] registerAdapter and implemented interfaces</H1>
    <B>en.karpachov at ospaz.ru</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20registerAdapter%20and%20implemented%20interfaces&In-Reply-To="
       TITLE="[Twisted-web] registerAdapter and implemented interfaces">en.karpachov at ospaz.ru
       </A><BR>
    <I>Thu Aug 25 01:11:57 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001855.html">[Twisted-web] URL length limits in twisted-web
</A></li>
        <LI>Next message: <A HREF="001859.html">[Twisted-web] How to &quot;monitor&quot; parallel executions of Deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1854">[ date ]</a>
              <a href="thread.html#1854">[ thread ]</a>
              <a href="subject.html#1854">[ subject ]</a>
              <a href="author.html#1854">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In nevow, when I adapt a context to ISession, I get a
twisted.web.server.Session object by default. If I want to adapt this
session-like object to my custom IUser interface, I register an adapter:

components.registerAdapter(UserAdapter, twisted.web.server.Session, IUser)

so I could write:

     session = ISession(ctx)
     user = IUser(session)

But, if I eventually move to the nevow guard, this code won't work because
ISession adapter now returns an object of nevow.guard.GuardSession.

What is the right way to register an adapter so the code won't break?

components.registerAdapter(UserAdapter, &lt;what is here?&gt;, IUser)

I can use the Componentized class, but it is not obvious and there is no
guarantee either that ISession will always adapt to the Componentized.

It would be easier if there was a precondition that an adapter itself
implemented the interface it adapts to, so one could write:

components.registerAdapter(UserAdapter, ISession, IUser)

Is there any rationale not to have such a precondition? What I missed here?

-- 
jk

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001855.html">[Twisted-web] URL length limits in twisted-web
</A></li>
	<LI>Next message: <A HREF="001859.html">[Twisted-web] How to &quot;monitor&quot; parallel executions of Deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1854">[ date ]</a>
              <a href="thread.html#1854">[ thread ]</a>
              <a href="subject.html#1854">[ subject ]</a>
              <a href="author.html#1854">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
