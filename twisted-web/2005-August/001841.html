<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Generating cache headers for dymanic data
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Generating%20cache%20headers%20for%20dymanic%20data&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001840.html">
   <LINK REL="Next"  HREF="001842.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Generating cache headers for dymanic data</H1>
    <B>Mary Gardiner</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Generating%20cache%20headers%20for%20dymanic%20data&In-Reply-To="
       TITLE="[Twisted-web] Generating cache headers for dymanic data">mary-twisted at puzzling.org
       </A><BR>
    <I>Sat Aug 20 23:57:14 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001840.html">[Twisted-web] On Flatteners and Adapters
</A></li>
        <LI>Next message: <A HREF="001842.html">[Twisted-web] Generating cache headers for dymanic data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1841">[ date ]</a>
              <a href="thread.html#1841">[ thread ]</a>
              <a href="subject.html#1841">[ subject ]</a>
              <a href="author.html#1841">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I think this is round 2 of this discussion, but I'd appreciate thoughts
anyway.

I have a Nevow application. It has the following properties:
 1. it is the same for all users, there is no user specific output
 2. part of the data source, and hence some of the pages (say 5-10 out
    600 odd) changes about twice a week
 3. the vast majority of pages remain the same for periods of weeks or
    months

As far as I can tell, this makes it a pretty good candidate for the
various cache headers (Last-Modified and ETag). In fact I'm sure it's a
pretty good candidate, because I've seen how much bandwidth the
Googlebot and the RSS aggregators suck if I don't use them.

The problem is giving a sufficient guarentee of byte-equality. As I
understand the purpose of those headers, if a page has a Last-Modified
unchanged from the last time it was accessed, or has an ETag unchanged
from the last time it was accessed, the body of the response should be
guarenteed to be byte-for-byte identical in so far as that is possible.
(I think foom told me that in practice, Apache regards mtime, file size
and inode numbers as a sufficient guarentee of this.)

As best I can tell, a realistic and reasonably bullet-proof way for me
to tell if there's been a change in my output would be:
 - the same version of Nevow
 - the same version of my Nevow application
 - the same template (as checked by the above logic of Apache's)
 - the same data source (mine are files on disk, so again I can use the
   above logic)

So that's all well and good for the last two, but does anyone have any
ways to detect the first two in any other way than storing a version
variable in my source code and in Nevow source code?

-Mary

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001840.html">[Twisted-web] On Flatteners and Adapters
</A></li>
	<LI>Next message: <A HREF="001842.html">[Twisted-web] Generating cache headers for dymanic data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1841">[ date ]</a>
              <a href="thread.html#1841">[ thread ]</a>
              <a href="subject.html#1841">[ subject ]</a>
              <a href="author.html#1841">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
