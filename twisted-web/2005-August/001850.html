<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] resolving a hostname problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20resolving%20a%20hostname%20problem&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001849.html">
   <LINK REL="Next"  HREF="001853.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] resolving a hostname problem</H1>
    <B>Raphael Arbuz</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20resolving%20a%20hostname%20problem&In-Reply-To="
       TITLE="[Twisted-web] resolving a hostname problem">raphaelarbuz at netcourrier.com
       </A><BR>
    <I>Wed Aug 24 11:28:34 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001849.html">[Twisted-web] resolving a hostname problem
</A></li>
        <LI>Next message: <A HREF="001853.html">[Twisted-web] resolving a hostname problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1850">[ date ]</a>
              <a href="thread.html#1850">[ thread ]</a>
              <a href="subject.html#1850">[ subject ]</a>
              <a href="author.html#1850">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sorry, here is a more complete listing of the part that could help:

import wx
from threading import Thread
from twisted.internet import reactor
from twisted.python import threadable
from twisted.internet.defer import maybeDeferred, Deferred
from twisted.internet import defer
from time import sleep
from time import time
from communication import Communication

from twisted.internet.task import LoopingCall
from twisted.internet.protocol import DatagramProtocol

import sys, traceback
import audio
import Queue

import ConnectionManager

class TwistedThread(Thread, DatagramProtocol):

    def __init__(self, appliClass, fileID, queue):
        Thread.__init__(self) # initialize the thread

        self.appliClass = appliClass
        self.fileID = fileID
        self.queue = queue

    def run(self):
        &quot;&quot;&quot;after the thread is launched&quot;&quot;&quot;
        threadable.init(1)
        self.waitForCalls()
        while 1:
            msg = self.queue.get(1)
            if msg[0]==&quot;call&quot;:
                  self.resolve(IP = msg[1], password = msg[2])
                break

    def waitForCalls(self):
        &quot;&quot;&quot;open MAX_NB_CORRESPONDENTS ports to listen to incoming
connections&quot;&quot;&quot;
        print &quot;waiting for calls&quot;
        for counter in range(self.appliClass.MAX_NB_CORRESPONDENTS):
            correspondent = ConnectionManager.ConnectionManager(self,
self.sendPointer, False)
            try:
                reactor.listenUDP(8000+counter,
self.correspondents[counter])
            except:
                pass
        reactor.run(installSignalHandlers=0)

    def resolve(self, IP, distPort= 8000, password = &quot;&quot;, destroy = False):
        print &quot;on res&quot;
        dd = reactor.resolve(IP)
        dd.addCallback(self.call, distPort, password, destroy)

    def call(self, IP, distPort = 8000, password = &quot;&quot;, destroy = False):
        print &quot;res done&quot;
        &quot;&quot;&quot;place a phone call&quot;&quot;&quot;
        print &quot;Calling the IP &quot; + str(IP) + &quot; on port &quot; + str(distPort)
        self.confPassword = password #set the conference password
....


Hope it is clearer.

Thanks a lot for your time

Raphael



----- Original Message -----
From: &quot;Tommi Virtanen&quot; &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">tv at twistedmatrix.com</A>&gt;
To: &quot;Discussion of twisted.web, Nevow, and Woven&quot;
&lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">twisted-web at twistedmatrix.com</A>&gt;
Sent: Wednesday, August 24, 2005 6:15 PM
Subject: Re: [Twisted-web] resolving a hostname problem


&gt;<i> Raphael Arbuz wrote:
</I>&gt;<i> &gt; I;m trying to impleting hostname resolution in a program that aimed to
</I>&gt;<i> &gt; exchange UDP packets with his peers.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; What I do is add the two lines:
</I>&gt;<i> &gt;     dd = reactor.resolve(IP)
</I>&gt;<i> &gt;     dd.addCallback(self.call, distPort, password, destroy)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; To my program, but when I do that, I don't reach the call function.
</I>Seems
&gt;<i> &gt; like something would be missing. Does anyone have a clue?
</I>&gt;<i>
</I>&gt;<i> Yes, we do.
</I>&gt;<i>
</I>&gt;<i> What is missing is the rest of your program; that is, the parts
</I>&gt;<i> that contain the bug.
</I>&gt;<i>
</I>&gt;<i> You owe the Oracle a bottle of crystal ball polish[1].
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> [1] You ain't an old beard if you don't know what that refers to.[2]
</I>&gt;<i>
</I>&gt;<i> [2] Yes, the grovel _was_ insufficient.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-web mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">Twisted-web at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web</A>
</I>&gt;<i>
</I>

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001849.html">[Twisted-web] resolving a hostname problem
</A></li>
	<LI>Next message: <A HREF="001853.html">[Twisted-web] resolving a hostname problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1850">[ date ]</a>
              <a href="thread.html#1850">[ thread ]</a>
              <a href="subject.html#1850">[ subject ]</a>
              <a href="author.html#1850">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
