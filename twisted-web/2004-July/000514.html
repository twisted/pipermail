<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Multiple choices
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Multiple%20choices&In-Reply-To=94a776e704051708156149a04b%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000512.html">
   <LINK REL="Next"  HREF="000528.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Multiple choices</H1>
    <B>Tommi Virtanen</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Multiple%20choices&In-Reply-To=94a776e704051708156149a04b%40mail.gmail.com"
       TITLE="[Twisted-web] Multiple choices">tv at tv.debian.net
       </A><BR>
    <I>Mon Jul  5 06:02:08 MDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000512.html">[Twisted-web] best way to find my place in the tree
</A></li>
        <LI>Next message: <A HREF="000528.html">[Twisted-web] Multiple choices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#514">[ date ]</a>
              <a href="thread.html#514">[ thread ]</a>
              <a href="subject.html#514">[ subject ]</a>
              <a href="author.html#514">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Justin Johnson wrote:
&gt;<i> Here's an example of what I did to get a multiple choice select box. 
</I>&gt;<i> It's been a while since I did this so it could probably use some
</I>&gt;<i> cleanup.  But it is working for me.
</I>
Here's a cleaned up and modernized version, with an example.

Please explicitly say you are cool with this getting included
in nevow -- I'd be happy to file the issue.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: multichoice.py
Type: text/x-python
Size: 3141 bytes
Desc: not available
Url : <A HREF="http://pyramid.twistedmatrix.com/pipermail/twisted-web/attachments/20040705/91f35e1b/multichoice.py">http://pyramid.twistedmatrix.com/pipermail/twisted-web/attachments/20040705/91f35e1b/multichoice.py</A>
-------------- next part --------------
# -*- python -*-
from twisted.application import service, internet
from nevow import compy, rend, inevow, appserver
from formless import webform, annotate, iformless
import multichoice

ANIMALS = ['dogs', 'cats', 'snakes']

class IAnimals(annotate.TypedInterface):
    def remember(self,
                 like=multichoice.MultipleChoice(choices=ANIMALS),
                 hate=multichoice.MultipleChoice(choices=ANIMALS)):
        pass
    remember = annotate.autocallable(remember)

class Animals(object):
    __implements__ = IAnimals
    like = None
    hate = None

    def remember(self, like, hate):
        self.like = like
        self.hate = hate
        print 'REMEMBER', self
        return self

    def __repr__(self):
        return '&lt;%s like=%r hate=%r&gt;' % (
            self.__class__.__name__,
            self.like,
            self.hate,
            )

class MyResource(rend.Page):
    docFactory = rend.htmlstr(
        &quot;&quot;&quot;\
&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
    &quot;<A HREF="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;</A>&gt;

&lt;html xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml&quot;">http://www.w3.org/1999/xhtml&quot;</A>
 xmlns:xi=&quot;<A HREF="http://nevow.com/ns/nevow/0.1&quot;">http://nevow.com/ns/nevow/0.1&quot;</A>&gt;
  &lt;head&gt;
    &lt;title&gt;Thingies&lt;/title&gt;
    &lt;link href=&quot;/form_css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;nevow:invisible nevow:render=&quot;input&quot;/&gt;
  &lt;/body&gt;
&lt;/html&gt;
&quot;&quot;&quot;)
    child_form_css = webform.defaultCSS

    def configurable_(self, context):
        try:
            return context.locate(inevow.IHand)
        except KeyError:
            return Animals()

    def render_input(self, context, data):
        formDefaults = context.locate(iformless.IFormDefaults)
        methodDefaults = formDefaults.getAllDefaults('remember')
        conf = self.locateConfigurable(context, '')
        methodDefaults['like'] = conf.original.like
        methodDefaults['hate'] = conf.original.hate
        print 'RENDER', conf.original
        return webform.renderForms()

site = appserver.NevowSite(MyResource())
application = service.Application(&quot;multichoice-example&quot;)
webServer = internet.TCPServer(8080, site)
webServer.setServiceParent(application)
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000512.html">[Twisted-web] best way to find my place in the tree
</A></li>
	<LI>Next message: <A HREF="000528.html">[Twisted-web] Multiple choices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#514">[ date ]</a>
              <a href="thread.html#514">[ thread ]</a>
              <a href="subject.html#514">[ subject ]</a>
              <a href="author.html#514">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
