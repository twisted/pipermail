<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Sorting an option list
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Sorting%20an%20option%20list&In-Reply-To=20040709111400.GB23263%40manque.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000527.html">
   <LINK REL="Next"  HREF="000534.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Sorting an option list</H1>
    <B>Samuel Reynolds</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Sorting%20an%20option%20list&In-Reply-To=20040709111400.GB23263%40manque.net"
       TITLE="[Twisted-web] Sorting an option list">sam at SpinwardStars.com
       </A><BR>
    <I>Fri Jul  9 10:50:10 MDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000527.html">[Twisted-web] Sorting an option list
</A></li>
        <LI>Next message: <A HREF="000534.html">[Twisted-web] [PATCH] doc/Nevow2004Tutorial.html
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#532">[ date ]</a>
              <a href="thread.html#532">[ thread ]</a>
              <a href="subject.html#532">[ subject ]</a>
              <a href="author.html#532">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 2004-07-09 12:14 PM +0100, you wrote:
&gt;<i>This may not be solvable with nevow/stan but I'm hoping it may be...
</I>&gt;<i>
</I>&gt;<i>I'm doing
</I>&gt;<i>
</I>&gt;<i>return t.select(name=&quot;establishment&quot;)[
</I>&gt;<i>         [
</I>&gt;<i>             t.option(value=e['_oid'])[e['establishment_desc']]
</I>&gt;<i>             for e in data
</I>&gt;<i>         ]
</I>&gt;<i>     ]
</I>&gt;<i>
</I>&gt;<i>to create a select list from data, where data is in the form
</I>&gt;<i>
</I>&gt;<i>[{'_oid': '1', 'establishment_desc': 'foo'},
</I>&gt;<i>  {'_oid': '2', 'establishment_desc': 'bar'},
</I>&gt;<i>  ... ]
</I>&gt;<i>
</I>&gt;<i>The drop down that is created really needs to be sorted alphabetically
</I>&gt;<i>by the establishment_desc.
</I>&gt;<i>
</I>&gt;<i>I realise I can probably write a function to sort the data myself and
</I>&gt;<i>pass it to data.sort(), but I was wondering if there was a way to do it
</I>&gt;<i>with stan or nevow after the DOM has been created.
</I>&gt;<i>
</I>&gt;<i>--
</I>&gt;<i>Ed.
</I>
Another &quot;maybe not 'the nevow way,' but it works&quot;....
I created this in about December out of frustration with
not begin able to get a select where value != label.
(May be possible now, I don't know.)
Also, this was before I (more or less) got the hang of stan.
But, as I said, it works.

In one application, all my pages derive from PageBase,
which defines render_myselect:

     def render_myselect(self, context, data):
         &quot;&quot;&quot;
         Populate options in a select wgt.

         data is a list of dictionaries.
         Each dictionary has (at least) 'value' and 'label' fields.

         Usage: &lt;select name='...' nevow:data='...' nevow:render='myselect' /&gt;
         &quot;&quot;&quot;
         # Order by label for UI
         ordered = [(item['label'],item['value']) for item in data]
         ordered.sort()

         # Generate options
         tag = context.tag.clear()
         tag.children = []
         for item in ordered:
             tag.children.append( tags.option(value=item[1])[ item[0] ] )
         tag.renderer = None
         return tag

An example data_xx method:

     def data_testselect( self, context, data ):
         return [
                 {'value':1, 'label':'Alice'},
                 {'value':2, 'label':'Victor'},
                 {'value':3, 'label':'Clancy'},
                 {'value':4, 'label':'Nancy'},
             ]

... And in template (again, just an example):

&lt;div&gt;
     &lt;b&gt;Test Select&lt;/b&gt;&amp;nbsp;
     &lt;select name='person' nevow:data='testselect' nevow:render='myselect' /&gt;
     &lt;br /&gt;Selections should appear in the order
     Alice/Clancy/Nancy/Victor
&lt;/div&gt;



__________________________________________________________
Spinward Stars, LLC                        Samuel Reynolds
Software Consulting and Development           303-805-1446
<A HREF="http://SpinwardStars.com/">http://SpinwardStars.com/</A>            <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">sam at SpinwardStars.com</A> 



</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000527.html">[Twisted-web] Sorting an option list
</A></li>
	<LI>Next message: <A HREF="000534.html">[Twisted-web] [PATCH] doc/Nevow2004Tutorial.html
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#532">[ date ]</a>
              <a href="thread.html#532">[ thread ]</a>
              <a href="subject.html#532">[ subject ]</a>
              <a href="author.html#532">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
