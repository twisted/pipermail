<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Integrating Twisted Matrix with Cheetah
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Integrating%20Twisted%20Matrix%20with%20Cheetah&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000550.html">
   <LINK REL="Next"  HREF="000553.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Integrating Twisted Matrix with Cheetah</H1>
    <B>Donnie Hale</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Integrating%20Twisted%20Matrix%20with%20Cheetah&In-Reply-To="
       TITLE="[Twisted-web] Integrating Twisted Matrix with Cheetah">dhale at speakeasy.net
       </A><BR>
    <I>Sun Jul 18 15:01:17 MDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000550.html">[Twisted-web] Re: ignoreExt value archived inside a web.tap?
</A></li>
        <LI>Next message: <A HREF="000553.html">[Twisted-web] cgi-bin from twisted.web
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#552">[ date ]</a>
              <a href="thread.html#552">[ thread ]</a>
              <a href="subject.html#552">[ subject ]</a>
              <a href="author.html#552">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I really love Twisted Matrix' approach to network programming, etc. As a
long-time developer of network apps using C, C++, Java, etc., it is a breath
of fresh air for a large class of network apps. One thing I'm not too wild
about is its sort of &quot;native&quot; web frameworks (woven, or now nevow). I like
very simple templating approaches, and as a fan of Velocity in the Java
world am drawn to Cheetah (www.cheetahtemplate.org). So my task was to see
if the two could be integrated without compromising the core elements of
either. Note that I searched around the web quite a bit trying to see if had
been done, but couldn't find anything.

As it turns out, it was fairly easy to get the basics going. This file has a
template base class for the Cheetah templates and a Twisted Matrix resource
to invoke the templates:

======== CheetahMapper.py =========
from twisted.web import resource, server from Cheetah.Template import
Template

class TwistedCheetahTemplate(Template):
    twrequest = None

class CheetahResource(resource.Resource):
    isLeaf = 1

    def __init__(self, filename, registry):
        self.filename = filename
        self.registry = registry

    def render(self, request):
        tmplt = TwistedCheetahTemplate(file=self.filename)
        tmplt.twrequest = request
        request.write(tmplt.respond())
        request.finish()
        return server.NOT_DONE_YET
===================================

As the template below will show, the &quot;twrequest&quot; member in the
TwistedCheetahTemplate class holds the Twisted Matrix request object.
Twisted Matrix is kind enough to pass the full absolute path to the
referenced template file in CheetahResource's constructor.

To create and execute the web application, in typical Twisted Matrix
fashion, use these commands (from the directory in which the above file
resides):

&gt;<i> mktap web --path=.\webroot 
</I>&gt;<i> --processor=&quot;.cht=CheetahMapper.CheetahResource&quot; --port=8880 twistd 
</I>&gt;<i> --file=web.tap
</I>
This simple template will be executed and its results returned by pointing
your browser at <A HREF="http://127.0.0.1:8880/test.cht:">http://127.0.0.1:8880/test.cht:</A>

============ test.cht =============
## A dummy template
&lt;HTML&gt;
&lt;HEAD&gt;
&lt;TITLE&gt;Test Cheetah Within Twisted&lt;/TITLE&gt; &lt;/HEAD&gt; &lt;BODY&gt; &lt;B&gt;We've arrived
in a Cheetah template!&lt;/B&gt; &lt;br&gt;$twrequest.method &lt;br&gt;$twrequest.path
&lt;br&gt;$twrequest.args &lt;br&gt;$twrequest.received_headers &lt;/BODY&gt; &lt;/HTML&gt;
===================================

I have no idea if this will help anyone out or not, but I thought I ought to
at least post it. My next task is to add the capability for Python code to
be executed to fulfill a request and the results be available when a
template is executed. I'm sure this is anathema to some, but I frankly quite
like asp.net's code-behind model and think I can make a much-simplified
flavor of that work within this general approach.

FWIW...

Donnie


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000550.html">[Twisted-web] Re: ignoreExt value archived inside a web.tap?
</A></li>
	<LI>Next message: <A HREF="000553.html">[Twisted-web] cgi-bin from twisted.web
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#552">[ date ]</a>
              <a href="thread.html#552">[ thread ]</a>
              <a href="subject.html#552">[ subject ]</a>
              <a href="author.html#552">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
