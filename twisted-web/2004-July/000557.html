<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Capturing args to the Registry
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Capturing%20args%20to%20the%20Registry&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000556.html">
   <LINK REL="Next"  HREF="000558.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Capturing args to the Registry</H1>
    <B>Sergio Trejo</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Capturing%20args%20to%20the%20Registry&In-Reply-To="
       TITLE="[Twisted-web] Capturing args to the Registry">serj_trejo at hotmail.com
       </A><BR>
    <I>Sat Jul 24 12:57:32 MDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000556.html">[Twisted-web] cgi-bin from twisted.web
</A></li>
        <LI>Next message: <A HREF="000558.html">[Twisted-web] Error Reporting Color Schema in the browser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#557">[ date ]</a>
              <a href="thread.html#557">[ thread ]</a>
              <a href="subject.html#557">[ subject ]</a>
              <a href="author.html#557">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am capturing cgi args to the registry (in a .rpy script) inside a 
resource's render_GET() method courtesy of registry.setComponent(). Once the 
resource has returned its html to the HTTP client, I want to parse out some 
of the cgi args and send them over the wire to a remote PB server.

Is there any way to extract the cgi args from the registry before my .rpy 
script dies? I've only been able to reclaim the stored args from the 
registry after a subsequent browser hit (I.e., using registry.getComponent() 
the next HTTP request that invokes render_GET() works). I'm hoping this will 
be simple, as I would prefer not to write to storage and would prefer to use 
the registry per every instance that the .rpy is loaded by the Twisted web 
server.

Here's an example of what I've got:

class Poof:
	def __init__(self, a):
		self.arr = a
	def setArgs(self, a):
		self.arr = a
	def getArgs(self):
		return self.arr

class leResource(Resource):
	isLeaf = True

	def render_GET(self, request):
		p= Poof(request.args)
		registry.setComponent(Poof, p)
		return &quot;&lt;html&gt;Thanks for your visit.&lt;/html&gt;&quot;

resource = leResource()

# get cgi args, send them over the wire to the PB server

Thanks much for any suggestions.

Serg

_________________________________________________________________
MSN 8 helps eliminate e-mail viruses. Get 2 months FREE*. 
<A HREF="http://join.msn.com/?page=features/virus">http://join.msn.com/?page=features/virus</A>


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000556.html">[Twisted-web] cgi-bin from twisted.web
</A></li>
	<LI>Next message: <A HREF="000558.html">[Twisted-web] Error Reporting Color Schema in the browser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#557">[ date ]</a>
              <a href="thread.html#557">[ thread ]</a>
              <a href="subject.html#557">[ subject ]</a>
              <a href="author.html#557">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
