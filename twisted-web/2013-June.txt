From benjamin at schollnick.net  Tue Jun 11 16:51:36 2013
From: benjamin at schollnick.net (Benjamin Schollnick)
Date: Tue, 11 Jun 2013 18:51:36 -0400
Subject: [Twisted-web] Connection Pool?
Message-ID: <3131B1E7-E5AD-423E-825D-99B8F31A6282@schollnick.net>

Folks,

I am a little confused, and I haven't been able to find anything in the Twisted docs regarding this?

pool = threadpool.ThreadPool ()
root = Resource ()
root.putChild ("resources", File( server_root + os.sep + "resources") )
root.putChild ("thumbnails", File( server_root + os.sep + "thumbnails") )
root.putChild ("templates", File( server_root + os.sep + "templates") )
root.putChild ("albums", Gallery() )
factory = Site ( root )
print "Listening on Port 8888..."
reactor.listenTCP ( 8888, factory)
reactor.run()

I can't find how to add a ThreadPool to a standard reactor?
And how can I check or set Keep alive for the TCP connections?

Can anyone point me in the right direction?

	- Benjamin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20130611/7059c395/attachment.html>

From benjamin at schollnick.net  Tue Jun 11 16:53:27 2013
From: benjamin at schollnick.net (Benjamin Schollnick)
Date: Tue, 11 Jun 2013 18:53:27 -0400
Subject: [Twisted-web] Connection Pool?
Message-ID: <BACEAA9F-DF96-4DBE-9152-C4AE9E3193AC@schollnick.net>

Folks,

I am a little confused, and I haven't been able to find anything in the Twisted docs regarding this?

pool = threadpool.ThreadPool ()
root = Resource ()
root.putChild ("resources", File( server_root + os.sep + "resources") )
root.putChild ("thumbnails", File( server_root + os.sep + "thumbnails") )
root.putChild ("templates", File( server_root + os.sep + "templates") )
root.putChild ("albums", Gallery() )
factory = Site ( root )
print "Listening on Port 8888..."
reactor.listenTCP ( 8888, factory)
reactor.run()

I can't find how to add a ThreadPool to a standard reactor?
And how can I check or set Keep alive for the TCP connections?

Can anyone point me in the right direction?

	- Benjamin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20130611/df5fc185/attachment.html>

From p.mayers at imperial.ac.uk  Tue Jun 11 17:02:23 2013
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Wed, 12 Jun 2013 00:02:23 +0100
Subject: [Twisted-web] Connection Pool?
In-Reply-To: <BACEAA9F-DF96-4DBE-9152-C4AE9E3193AC@schollnick.net>
References: <BACEAA9F-DF96-4DBE-9152-C4AE9E3193AC@schollnick.net>
Message-ID: <51B7AC7F.9000604@imperial.ac.uk>

On 06/11/2013 11:53 PM, Benjamin Schollnick wrote:

>
> I can't find how to add a ThreadPool to a standard reactor?

I think you might be confused about what ThreadPool does. It doesn't 
magically use threads for Twisted work - Twisted is single-threaded, and 
does all it's work in one thread (except for adbapi and a few edge cases)

The ThreadPool is for *your* code. It won't do anything unless you call 
deferToThreadPool or similar.

> And how can I check or set Keep alive for the TCP connections?

transport.setTcpKeepAlive - see here:

http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.ITCPTransport.html#setTcpKeepAlive


From _ at lvh.io  Tue Jun 11 23:56:28 2013
From: _ at lvh.io (Laurens Van Houtven)
Date: Wed, 12 Jun 2013 07:56:28 +0200
Subject: [Twisted-web] Connection Pool?
In-Reply-To: <51B7AC7F.9000604@imperial.ac.uk>
References: <BACEAA9F-DF96-4DBE-9152-C4AE9E3193AC@schollnick.net>
 <51B7AC7F.9000604@imperial.ac.uk>
Message-ID: <CAE_Hg6Zu-dqqi1Ng_T5590999=fb-=W-AZS7PXpSFLPseqe+HQ@mail.gmail.com>

Hi Benjamin,

You create a thread pool, but don't do anything with it.

For what it's worth, it doesn't seem like the rest of your example, being
simple twisted.web resources, would require a thread pool at all :)

What would you like to achieve with said thread pool?

cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20130612/b66fb89e/attachment.html>

From rt at aspirinka.net  Thu Jun 13 08:24:38 2013
From: rt at aspirinka.net (Sergey Alembekov)
Date: Thu, 13 Jun 2013 18:24:38 +0400
Subject: [Twisted-web] twisted web client
Message-ID: <51B9D626.5030708@aspirinka.net>

Hi there!
I'm new in twisted, sorry if my question are stupid.
I want to make tones of http get's to different urls and measure time 
for every request. I have tryed to use client.HTTPClientFactory for it, 
but it wants url as argument and i whink it's wrong to make a factory 
for every url. So, am i wrong? What class i must use for my needs?


__
Regards, Sergey.


From _ at lvh.io  Thu Jun 13 08:34:06 2013
From: _ at lvh.io (Laurens Van Houtven)
Date: Thu, 13 Jun 2013 16:34:06 +0200
Subject: [Twisted-web] twisted web client
In-Reply-To: <51B9D626.5030708@aspirinka.net>
References: <51B9D626.5030708@aspirinka.net>
Message-ID: <CAE_Hg6aDPN=WaAS-O09e-=N04Ff41pPyohXfhK+RX1mKqX9-og@mail.gmail.com>

Hi Sergey,


Several points:

1. Making a new factory for each *client* connection isn't unusual -- just
for servers.
2. The API you probably want to use is twisted.web.client.Agent.
3. You could do something like this (I wrote no tests for this!)

def timeURL(agent, url):
    return agent.get(url).addCallback(_responseReceived, time.time(), url)

def _responseReceived(response, startTime, url):
    elapsed = time.time() - startTime
    print "Elapsed for {}: {}s".format(url, elapsed)
    # Note: response received gets called before the entire body is received

... or you could wrap that startTime and URL state in an object, of course
:-)

hope to help
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20130613/f6c0f69f/attachment.html>

From ashfall at twistedmatrix.com  Mon Jun 17 09:39:13 2013
From: ashfall at twistedmatrix.com (Ashwini Oruganti)
Date: Mon, 17 Jun 2013 21:09:13 +0530
Subject: [Twisted-web] Twisted 13.1.0pre1 is here!
Message-ID: <CAMFCZ-1N+2UrcDAhvwRhELTmsimBohxXKMfzUDsqCttvSLangA@mail.gmail.com>

Hi everyone,

I'm pleased to announce that the pre-release for the upcoming Twisted 13.1
is now available!

You can download the tarballs here:

    http://twistedmatrix.com/~ashfall/13.1.0pre1/

Highlights for this release include:

  * trial now has an --exitfirst flag which stops the test run after the
first error or failure.

  * twisted.internet.ssl.CertificateOptions now supports chain certificates.

  * twisted.conch.endpoints.SSHCommandClientEndpoint is a new
IStreamClientEndpoint which supports
    connecting a protocol to the stdio of a command running on a remote
host via an SSH connection.

  * twisted.web.xmlrpc.QueryProtocol now generates valid Authorization
headers for long user names
    and passwords.

  * self.transport.resumeProducing() will no longer raise an AssertionError
if called after
    self.transport.loseConnection()

For the complete list, see the NEWS file.

Please download the tarballs and test them!

-Ashwini
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20130617/fbc08253/attachment.html>

From joasqueeniebee at gmail.com  Tue Jun 18 19:47:56 2013
From: joasqueeniebee at gmail.com (Jo as Queeniebee)
Date: Tue, 18 Jun 2013 21:47:56 -0400
Subject: [Twisted-web] Twisted.Web and Jinja2
Message-ID: <CAC8CUWyd5P5E-kVFbQYvCuGkakeisX5R7yHOnws9tXuQHNkvyQ@mail.gmail.com>

Hello,

I'm writing a content server to run on my Raspberry Pi and I'll be using
Jinja2 as the templating engine. I'm new to Twisted so I'm having a hard
time imaging the examples for TwistedMatrix.com scale.

Are there any examples of a fully featured Twisted application that uses
Jinja2 or any other templating engine like Mako?

Thanks,
Jo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20130618/c533886b/attachment.html>

From joasqueeniebee at gmail.com  Wed Jun 19 08:45:58 2013
From: joasqueeniebee at gmail.com (Jo as Queeniebee)
Date: Wed, 19 Jun 2013 10:45:58 -0400
Subject: [Twisted-web] Twisted.Web and Jinja2
In-Reply-To: <878v26yz4k.fsf@sparky.home>
References: <CAC8CUWyd5P5E-kVFbQYvCuGkakeisX5R7yHOnws9tXuQHNkvyQ@mail.gmail.com>
 <878v26yz4k.fsf@sparky.home>
Message-ID: <CAC8CUWw-tZaL1aUp6K_D3wLZGg+aE5ZpyyOxW-dFuJXWoqpGyw@mail.gmail.com>

Thank you, I am looking into txtemplate; it makes the logic between the
views and Resource classes a bit clearer for me.

Did you use txtemplate with Jinja2 or another template engine?


On Wed, Jun 19, 2013 at 10:05 AM, Russell Sim <russell.sim at gmail.com> wrote:

>
> Jo as Queeniebee <joasqueeniebee at gmail.com> writes:
>
> > Are there any examples of a fully featured Twisted application that
> > uses Jinja2 or any other templating engine like Mako?
>
> As far as I know buildbot[1] uses Jinja2 for it's templating.  So it
> might be worth a look.
>
> Apart from that I have used txtemplate[2] briefly at work and it seemed
> reasonably simple to get up and running.
>
> 1. https://github.com/buildbot/buildbot/
> 2. https://github.com/steder/txtemplate
>
> --
> Russell
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20130619/534e53bb/attachment.html>

From ltaylor.volks at gmail.com  Wed Jun 19 12:35:08 2013
From: ltaylor.volks at gmail.com (Lucas Taylor)
Date: Wed, 19 Jun 2013 13:35:08 -0500
Subject: [Twisted-web] Twisted.Web and Jinja2
In-Reply-To: <CAC8CUWyd5P5E-kVFbQYvCuGkakeisX5R7yHOnws9tXuQHNkvyQ@mail.gmail.com>
References: <CAC8CUWyd5P5E-kVFbQYvCuGkakeisX5R7yHOnws9tXuQHNkvyQ@mail.gmail.com>
Message-ID: <268039C9-5647-4FD9-915F-85983DA91958@gmail.com>


On Jun 18, 2013, at 8:47 PM, Jo as Queeniebee wrote:

> Hello,
> 
> I'm writing a content server to run on my Raspberry Pi and I'll be using Jinja2 as the templating engine. I'm new to Twisted so I'm having a hard time imaging the examples for TwistedMatrix.com scale. 
> 
> Are there any examples of a fully featured Twisted application that uses Jinja2 or any other templating engine like Mako?


Hi Jo,

You can return a string (e.g. a rendered jinja2 template) from the .render method of an IResource
http://twistedmatrix.com/documents/current/web/howto/using-twistedweb.html#auto6

So when you see a string being returned from a Resource in the docs, you can consider substituting the particulars of the template engine you want to use.


Here's a very simple example of one approach using jinja2:

##  myapp/config.py
#
# Define a jinja2 Environment somewhere
# I specify a PackageLoader to look up templates from the templates folder in the myapp.web.static package
from jinja2 import Environment, PackageLoader
jinja = Environment(loader=PackageLoader('myapp.web.static', 'templates'))

----
## myapp/web/views.py
#
from twisted.web.resource import Resource
from myapp.config import jinja

class MyResource(Resource):
    isLeaf = True    
    template_name = "example.html"
    
    def render_GET(self, request):
        ctx = {
            'content': "Templated content",
            'extra_info': [1, 2, 3, 4, 5, 6]
        }
        template = jinja.get_template(self.template_name)
        
        return template.render(ctx)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20130619/94f1c709/attachment.html>

From joasqueeniebee at gmail.com  Wed Jun 19 15:21:50 2013
From: joasqueeniebee at gmail.com (Jo as Queeniebee)
Date: Wed, 19 Jun 2013 17:21:50 -0400
Subject: [Twisted-web] Twisted.Web and Jinja2
In-Reply-To: <268039C9-5647-4FD9-915F-85983DA91958@gmail.com>
References: <CAC8CUWyd5P5E-kVFbQYvCuGkakeisX5R7yHOnws9tXuQHNkvyQ@mail.gmail.com>
 <268039C9-5647-4FD9-915F-85983DA91958@gmail.com>
Message-ID: <CAC8CUWy3BXN0wiphoR5q17fBNo_Y5gP-Ui+8Ke-WCPOoE2Cuiw@mail.gmail.com>

This is great, thanks.

I want to deploy a content server on my Raspberry Pi, do I need to write a
separate file for the server/reactor that imports views.py and config.py?

Jo


On Wed, Jun 19, 2013 at 2:35 PM, Lucas Taylor <ltaylor.volks at gmail.com>wrote:

>
> On Jun 18, 2013, at 8:47 PM, Jo as Queeniebee wrote:
>
> Hello,
>
> I'm writing a content server to run on my Raspberry Pi and I'll be using
> Jinja2 as the templating engine. I'm new to Twisted so I'm having a hard
> time imaging the examples for TwistedMatrix.com scale.
>
> Are there any examples of a fully featured Twisted application that uses
> Jinja2 or any other templating engine like Mako?
>
>
>
> Hi Jo,
>
> You can return a string (e.g. a rendered jinja2 template) from the .render
> method of an IResource
>
> http://twistedmatrix.com/documents/current/web/howto/using-twistedweb.html#auto6
>
> So when you see a string being returned from a Resource in the docs, you
> can consider substituting the particulars of the template engine you want
> to use.
>
>
> Here's a very simple example of one approach using jinja2:
>
> ##  myapp/config.py
> #
> # Define a jinja2 Environment somewhere
> # I specify a PackageLoader to look up templates from the templates folder
> in the myapp.web.static package
> from jinja2 import Environment, PackageLoader
> jinja = Environment(loader=PackageLoader('myapp.web.static', 'templates'))
>
> ----
> ## myapp/web/views.py
> #
> from twisted.web.resource import Resource
> from myapp.config import jinja
>
> class MyResource(Resource):
>     isLeaf = True
>     template_name = "example.html"
>
>     def render_GET(self, request):
>         ctx = {
>             'content': "Templated content",
>             'extra_info': [1, 2, 3, 4, 5, 6]
>         }
>         template = jinja.get_template(self.template_name)
>
>         return template.render(ctx)
>
>
> _______________________________________________
> Twisted-web mailing list
> Twisted-web at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20130619/df4616f6/attachment.html>

From glyph at twistedmatrix.com  Wed Jun 19 18:24:06 2013
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 19 Jun 2013 17:24:06 -0700
Subject: [Twisted-web] Twisted.Web and Jinja2
In-Reply-To: <CAC8CUWy3BXN0wiphoR5q17fBNo_Y5gP-Ui+8Ke-WCPOoE2Cuiw@mail.gmail.com>
References: <CAC8CUWyd5P5E-kVFbQYvCuGkakeisX5R7yHOnws9tXuQHNkvyQ@mail.gmail.com>
 <268039C9-5647-4FD9-915F-85983DA91958@gmail.com>
 <CAC8CUWy3BXN0wiphoR5q17fBNo_Y5gP-Ui+8Ke-WCPOoE2Cuiw@mail.gmail.com>
Message-ID: <4CB6790A-C463-4539-AFC8-49B6F7AB0961@twistedmatrix.com>


On Jun 19, 2013, at 2:21 PM, Jo as Queeniebee <joasqueeniebee at gmail.com> wrote:

> This is great, thanks.
> 
> I want to deploy a content server on my Raspberry Pi, do I need to write a separate file for the server/reactor that imports views.py and config.py?

Given that on a raspberry pi you might be somewhat resource-constrained and concerned about overhead of code resources, have you considered using Twisted's built-in template engine?

<http://twistedmatrix.com/documents/current/web/howto/twisted-templates.html>

You can certainly use Jinja2 with Twisted, but given that Twisted might load this to render some of its own internal content (like directory listings) it might be worthwhile to give it a try.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20130619/92483f4d/attachment.html>

From joasqueeniebee at gmail.com  Wed Jun 19 18:28:36 2013
From: joasqueeniebee at gmail.com (Jo as Queeniebee)
Date: Wed, 19 Jun 2013 20:28:36 -0400
Subject: [Twisted-web] Twisted.Web and Jinja2
In-Reply-To: <4CB6790A-C463-4539-AFC8-49B6F7AB0961@twistedmatrix.com>
References: <CAC8CUWyd5P5E-kVFbQYvCuGkakeisX5R7yHOnws9tXuQHNkvyQ@mail.gmail.com>
 <268039C9-5647-4FD9-915F-85983DA91958@gmail.com>
 <CAC8CUWy3BXN0wiphoR5q17fBNo_Y5gP-Ui+8Ke-WCPOoE2Cuiw@mail.gmail.com>
 <4CB6790A-C463-4539-AFC8-49B6F7AB0961@twistedmatrix.com>
Message-ID: <CAC8CUWzBeP+a1+_qFPzo2oDnemgCtG2Oc3wHyHB7Q52yvYM_sQ@mail.gmail.com>

Alright, then I'll use Twisted's built-in! But I still have my same
question: Should I write a separate file containing all the resources and
another file with the server? To deploy a content server on the RPi, do I
need to wrap all the files within a .tac file?

Joelle


On Wed, Jun 19, 2013 at 8:24 PM, Glyph <glyph at twistedmatrix.com> wrote:

>
> On Jun 19, 2013, at 2:21 PM, Jo as Queeniebee <joasqueeniebee at gmail.com>
> wrote:
>
> This is great, thanks.
>
> I want to deploy a content server on my Raspberry Pi, do I need to write a
> separate file for the server/reactor that imports views.py and config.py?
>
>
> Given that on a raspberry pi you might be somewhat resource-constrained
> and concerned about overhead of code resources, have you considered using
> Twisted's built-in template engine?
>
> <
> http://twistedmatrix.com/documents/current/web/howto/twisted-templates.html
> >
>
> You can certainly use Jinja2 with Twisted, but given that Twisted might
> load this to render some of its own internal content (like directory
> listings) it might be worthwhile to give it a try.
>
> -glyph
>
> _______________________________________________
> Twisted-web mailing list
> Twisted-web at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20130619/24988f79/attachment.html>

From ltaylor.volks at gmail.com  Wed Jun 19 23:47:14 2013
From: ltaylor.volks at gmail.com (Lucas Taylor)
Date: Thu, 20 Jun 2013 00:47:14 -0500
Subject: [Twisted-web] Twisted.Web and Jinja2
In-Reply-To: <CAC8CUWzBeP+a1+_qFPzo2oDnemgCtG2Oc3wHyHB7Q52yvYM_sQ@mail.gmail.com>
References: <CAC8CUWyd5P5E-kVFbQYvCuGkakeisX5R7yHOnws9tXuQHNkvyQ@mail.gmail.com>
 <268039C9-5647-4FD9-915F-85983DA91958@gmail.com>
 <CAC8CUWy3BXN0wiphoR5q17fBNo_Y5gP-Ui+8Ke-WCPOoE2Cuiw@mail.gmail.com>
 <4CB6790A-C463-4539-AFC8-49B6F7AB0961@twistedmatrix.com>
 <CAC8CUWzBeP+a1+_qFPzo2oDnemgCtG2Oc3wHyHB7Q52yvYM_sQ@mail.gmail.com>
Message-ID: <0D1EFF89-16B3-4925-A32D-B914B397098C@gmail.com>


On Jun 19, 2013, at 7:28 PM, Jo as Queeniebee wrote:

> Alright, then I'll use Twisted's built-in! But I still have my same question: Should I write a separate file containing all the resources and another file with the server? To deploy a content server on the RPi, do I need to wrap all the files within a .tac file?
> 
> Joelle
> 

This is highly dependent upon your application.  Maybe you can contain everything you need to do in a single .py file and run it. Or maybe it would be beneficial to use separate modules or packages. These aren't really twisted-specific concerns. It's a matter of laying out your application so you can import the code you need, where you need it. If you have all of your Resources in a separate module or package, then you need to figure out how to import those and hook them up to the Site object.

Extending the simple example from earlier, you might have a "run.py" in your app:

## myapp/run.py
#
from twisted.web import server
from twisted.internet import reactor

from myapp.views import MyResource

site = server.Site(MyResource())
reactor.listenTCP(8080, site)
reactor.run()

This is highly simplified, but hopefully you can see it's just basic python. twisted.web.server.Site needs a Resource, so you have to figure out how to supply it. Could be in the same file, or could be importable from some other package or module. In this case, we've decided that we'll have a views module that contains MyResource.


A .tac file is one way to handle application startup. You could also create a twistd plugin: https://twistedmatrix.com/documents/current/core/howto/tap.html. Or you could have a plain old python file with reactor.run() in it. This is prevalent in many of the howto examples and what the example above shows. I wouldn't really worry about .tac or plugins for the time being.


At any rate, we're venturing into different territory now. You'll need to share some code (http://sscce.org/) or give a more complete description of what you're trying to do in order to get practical advice. It would be better to start a new thread with a clear intent and a different subject line, unless you still have questions about using jinja2.


Lucas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20130620/9871dbb9/attachment-0001.html>

From joasqueeniebee at gmail.com  Thu Jun 20 11:29:38 2013
From: joasqueeniebee at gmail.com (Jo as Queeniebee)
Date: Thu, 20 Jun 2013 13:29:38 -0400
Subject: [Twisted-web] Twisted.Web and Jinja2
In-Reply-To: <0D1EFF89-16B3-4925-A32D-B914B397098C@gmail.com>
References: <CAC8CUWyd5P5E-kVFbQYvCuGkakeisX5R7yHOnws9tXuQHNkvyQ@mail.gmail.com>
 <268039C9-5647-4FD9-915F-85983DA91958@gmail.com>
 <CAC8CUWy3BXN0wiphoR5q17fBNo_Y5gP-Ui+8Ke-WCPOoE2Cuiw@mail.gmail.com>
 <4CB6790A-C463-4539-AFC8-49B6F7AB0961@twistedmatrix.com>
 <CAC8CUWzBeP+a1+_qFPzo2oDnemgCtG2Oc3wHyHB7Q52yvYM_sQ@mail.gmail.com>
 <0D1EFF89-16B3-4925-A32D-B914B397098C@gmail.com>
Message-ID: <CAC8CUWzDE-FN1ts1S1SBuGN2S=+Df4xS6ubhSM2o=Hk-sGeVVg@mail.gmail.com>

Thanks, this has helped.

When I share my code, is it better include a pastebin link or within the
message?


On Thu, Jun 20, 2013 at 1:47 AM, Lucas Taylor <ltaylor.volks at gmail.com>wrote:

>
> On Jun 19, 2013, at 7:28 PM, Jo as Queeniebee wrote:
>
> Alright, then I'll use Twisted's built-in! But I still have my same
> question: Should I write a separate file containing all the resources and
> another file with the server? To deploy a content server on the RPi, do I
> need to wrap all the files within a .tac file?
>
> Joelle
>
>
> This is highly dependent upon your application.  Maybe you can contain
> everything you need to do in a single .py file and run it. Or maybe it
> would be beneficial to use separate modules or packages. These aren't
> really twisted-specific concerns. It's a matter of laying out your
> application so you can import the code you need, where you need it. If you
> have all of your Resources in a separate module or package, then you need
> to figure out how to import those and hook them up to the Site object.
>
> Extending the simple example from earlier, you might have a "run.py" in
> your app:
>
> ## myapp/run.py
> #
> from twisted.web import server
> from twisted.internet import reactor
>
> from myapp.views import MyResource
>
> site = server.Site(MyResource())
> reactor.listenTCP(8080, site)
> reactor.run()
>
> This is highly simplified, but hopefully you can see it's just basic
> python. twisted.web.server.Site needs a Resource, so you have to figure out
> how to supply it. Could be in the same file, or could be importable from
> some other package or module. In this case, we've decided that we'll have a
> views module that contains MyResource.
>
>
> A .tac file is one way to handle application startup. You could also
> create a twistd plugin:
> https://twistedmatrix.com/documents/current/core/howto/tap.html. Or you
> could have a plain old python file with reactor.run() in it. This is
> prevalent in many of the howto examples and what the example above shows. I
> wouldn't really worry about .tac or plugins for the time being.
>
>
> At any rate, we're venturing into different territory now. You'll need to
> share some code (http://sscce.org/) or give a more complete description
> of what you're trying to do in order to get practical advice. It would be
> better to start a new thread with a clear intent and a different subject
> line, unless you still have questions about using jinja2.
>
>
> Lucas
>
> _______________________________________________
> Twisted-web mailing list
> Twisted-web at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20130620/e41be090/attachment.html>

From ltaylor.volks at gmail.com  Thu Jun 20 13:39:16 2013
From: ltaylor.volks at gmail.com (Lucas Taylor)
Date: Thu, 20 Jun 2013 14:39:16 -0500
Subject: [Twisted-web] Twisted.Web and Jinja2
In-Reply-To: <CAC8CUWzDE-FN1ts1S1SBuGN2S=+Df4xS6ubhSM2o=Hk-sGeVVg@mail.gmail.com>
References: <CAC8CUWyd5P5E-kVFbQYvCuGkakeisX5R7yHOnws9tXuQHNkvyQ@mail.gmail.com>
 <268039C9-5647-4FD9-915F-85983DA91958@gmail.com>
 <CAC8CUWy3BXN0wiphoR5q17fBNo_Y5gP-Ui+8Ke-WCPOoE2Cuiw@mail.gmail.com>
 <4CB6790A-C463-4539-AFC8-49B6F7AB0961@twistedmatrix.com>
 <CAC8CUWzBeP+a1+_qFPzo2oDnemgCtG2Oc3wHyHB7Q52yvYM_sQ@mail.gmail.com>
 <0D1EFF89-16B3-4925-A32D-B914B397098C@gmail.com>
 <CAC8CUWzDE-FN1ts1S1SBuGN2S=+Df4xS6ubhSM2o=Hk-sGeVVg@mail.gmail.com>
Message-ID: <4181BDF3-2956-4015-BCAB-240EB6D1AD37@gmail.com>


On Jun 20, 2013, at 12:29 PM, Jo as Queeniebee wrote:

> 
> When I share my code, is it better include a pastebin link or within the message?
> 

Pastebins tend to disappear, so including a http://sscce.org/ in the message itself is better. You can always _additionally_ include a pastebin, but it's much better if the message contains all of the context needed to understand it. If I have to seek out a pastebin to review your code and it's down or deleted, I'll probably just ignore the thread. Also consider future readers of the list...it's very frustrating to find that a critical part of a conversation has gone missing.

Also, in keeping with the idea that the message should be easy to understand and follow, the preference and convention for Twisted mailing lists is to bottom-post (http://en.wikipedia.org/wiki/Posting_style#Bottom-posting). Notice I've snipped out all of the extraneous stuff unrelated to this reply and just focused on your question.


Lucas

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20130620/57a26be9/attachment.html>

From donal.mcmullan at gmail.com  Fri Jun 21 20:34:45 2013
From: donal.mcmullan at gmail.com (Donal McMullan)
Date: Sat, 22 Jun 2013 14:34:45 +1200
Subject: [Twisted-web] Twisted.Web and Jinja2
In-Reply-To: <4181BDF3-2956-4015-BCAB-240EB6D1AD37@gmail.com>
References: <CAC8CUWyd5P5E-kVFbQYvCuGkakeisX5R7yHOnws9tXuQHNkvyQ@mail.gmail.com>
 <268039C9-5647-4FD9-915F-85983DA91958@gmail.com>
 <CAC8CUWy3BXN0wiphoR5q17fBNo_Y5gP-Ui+8Ke-WCPOoE2Cuiw@mail.gmail.com>
 <4CB6790A-C463-4539-AFC8-49B6F7AB0961@twistedmatrix.com>
 <CAC8CUWzBeP+a1+_qFPzo2oDnemgCtG2Oc3wHyHB7Q52yvYM_sQ@mail.gmail.com>
 <0D1EFF89-16B3-4925-A32D-B914B397098C@gmail.com>
 <CAC8CUWzDE-FN1ts1S1SBuGN2S=+Df4xS6ubhSM2o=Hk-sGeVVg@mail.gmail.com>
 <4181BDF3-2956-4015-BCAB-240EB6D1AD37@gmail.com>
Message-ID: <CADf-aJEaFVjHchzoJrmDHxu-8vyfLFRq6TJFPwwXfd+dGnzKow@mail.gmail.com>

I'm not sure how resource-constrained you'll be; If you run into
problems, it might be interesting to deliver all your dynamic content
as JSON, and offload the presentation to JS on the client side.

On 21 June 2013 07:39, Lucas Taylor <ltaylor.volks at gmail.com> wrote:
>
> On Jun 20, 2013, at 12:29 PM, Jo as Queeniebee wrote:
>
>
> When I share my code, is it better include a pastebin link or within the
> message?
>
>
> Pastebins tend to disappear, so including a http://sscce.org/ in the message
> itself is better. You can always _additionally_ include a pastebin, but it's
> much better if the message contains all of the context needed to understand
> it. If I have to seek out a pastebin to review your code and it's down or
> deleted, I'll probably just ignore the thread. Also consider future readers
> of the list...it's very frustrating to find that a critical part of a
> conversation has gone missing.
>
> Also, in keeping with the idea that the message should be easy to understand
> and follow, the preference and convention for Twisted mailing lists is to
> bottom-post (http://en.wikipedia.org/wiki/Posting_style#Bottom-posting).
> Notice I've snipped out all of the extraneous stuff unrelated to this reply
> and just focused on your question.
>
>
> Lucas
>
>
> _______________________________________________
> Twisted-web mailing list
> Twisted-web at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>


From joasqueeniebee at gmail.com  Wed Jun 26 09:52:06 2013
From: joasqueeniebee at gmail.com (Jo as Queeniebee)
Date: Wed, 26 Jun 2013 11:52:06 -0400
Subject: [Twisted-web] HTML Rendering with Twisted.Web
Message-ID: <CAC8CUWyTP1ChXdcDU7Putjt0fHHOo+TZq4NyG6WA7EBqhQab0Q@mail.gmail.com>

Hello,

I've asked a question before about using Jinja2 with Twisted.Web, but now I
have a more general question about rendering HTML docs within a Twisted web
application.

All the examples on TwistedMatrix.com and the txTemplate adapter show that
you pass the web page by either returning it as a string from render_Get or
as a param in .render(). Is this true for all cases? This seems a bit
inefficient when you have a file larger than <html><body> Hello,
World!</body></html>.

I've written an HTML file complete with .css and .js. How to I pass that
document to my Twisted.Web resource? When I use the code below, the context
replaces all markup from my HTML file. How do I get around this? How do you
pass a larger HTML file to Twisted.Web?

# -*- coding: utf-8 -*

import os, sys

from twisted.application import internet
from twisted.web.resource import Resource
from twisted.web import server
from twisted.internet import reactor

import txtemplate

TEMPLATE_DIR =
os.path.join(os.path.dirname(os.path.abspath(__file__)),"templates")

class ThreadResource(Resource):
    def __init__(self):
        resource.Resource.__init__(self)
        self.loader = txtemplate.Jinja2TemplateLoader(TEMPLATE_DIR)

    def getChild(self, name, request):
         return self
    def render_GET(self, request):
    template_name = "base.html"
        template = self.loader.load(template_name)
        context = {"greeting": "Enter"}

        def cb(content):
            request.write(content)
            request.setResponseCode(200)
            request.finish()

    d = template.render(**context)
        d.addCallback(cb)
        return server.NOT_DONE_YET

site = server.Site(ThreadResource())
reactor.listenTCP(8888, site)
reactor.run()
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20130626/d50e89ee/attachment.html>

From JP at eukor.com  Wed Jun 26 09:53:26 2013
From: JP at eukor.com (JP at eukor.com)
Date: Thu, 27 Jun 2013 00:53:26 +0900 (KST)
Subject: [Twisted-web] =?euc-kr?q?HTML_Rendering_with_Twisted=2EWeb?=
Message-ID: <20130626155327.17B69116980@mmp.eukor21.com>

An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20130627/aad75af6/attachment.html>

From ltaylor.volks at gmail.com  Fri Jun 28 16:33:10 2013
From: ltaylor.volks at gmail.com (Lucas Taylor)
Date: Fri, 28 Jun 2013 17:33:10 -0500
Subject: [Twisted-web] HTML Rendering with Twisted.Web
In-Reply-To: <CAC8CUWyTP1ChXdcDU7Putjt0fHHOo+TZq4NyG6WA7EBqhQab0Q@mail.gmail.com>
References: <CAC8CUWyTP1ChXdcDU7Putjt0fHHOo+TZq4NyG6WA7EBqhQab0Q@mail.gmail.com>
Message-ID: <F57B76AF-DF7B-4A09-8B12-FE962E972007@gmail.com>

Hi Jo,

On Jun 26, 2013, at 10:52 AM, Jo as Queeniebee wrote:

> Hello,
> 
> I've asked a question before about using Jinja2 with Twisted.Web, but now I have a more general question about rendering HTML docs within a Twisted web application.
> 
> All the examples on TwistedMatrix.com and the txTemplate adapter show that you pass the web page by either returning it as a string from render_Get or as a param in .render(). Is this true for all cases?

A Resource should either directly return bytes from a render* method, OR, return twisted.web.server.NOT_DONE_YET to indicate an asynchronous response will be returned *at some point*.  

API:  http://twistedmatrix.com/documents/current/api/twisted.web.resource.IResource.html#render

Also, these howtos may be useful to clarify the concept:
http://twistedmatrix.com/documents/current/web/howto/web-in-60/asynchronous.html
http://twistedmatrix.com/documents/current/web/howto/web-in-60/asynchronous-deferred.html


If you're just loading up a template from disk and rendering it with local data, you may find that synchronous load/render/return works fine. If you find that you are blocking the web server from servicing other requests because you are querying a database, or fetching something from a remote service or something, then you'll want to go the asynchronous route.

(Note that in your code below, there is really no reason to do it asynchronously)


> This seems a bit inefficient when you have a file larger than <html><body> Hello, World!</body></html>.

If you are planning on streaming large amounts of data, then Twisted's producer/consumer api may be helpful:
http://twistedmatrix.com/documents/current/core/howto/producers.html



> I've written an HTML file complete with .css and .js. How to I pass that document to my Twisted.Web resource? When I use the code below, the context replaces all markup from my HTML file. How do I get around this? How do you pass a larger HTML file to Twisted.Web?
> 
> # -*- coding: utf-8 -*
> 
> import os, sys
> 
> from twisted.application import internet
> from twisted.web.resource import Resource
> from twisted.web import server
> from twisted.internet import reactor
> 
> import txtemplate
> 
> TEMPLATE_DIR = os.path.join(os.path.dirname(os.path.abspath(__file__)),"templates")
> 
> class ThreadResource(Resource):
>     def __init__(self):
>         resource.Resource.__init__(self)
>         self.loader = txtemplate.Jinja2TemplateLoader(TEMPLATE_DIR)
>     
>     def getChild(self, name, request):
>          return self
> 	
>     def render_GET(self, request):
>     	template_name = "base.html"
>         template = self.loader.load(template_name)
>         context = {"greeting": "Enter"}
>  
>         def cb(content):
>             request.write(content)
>             request.setResponseCode(200)
>             request.finish()
>  
>     d = template.render(**context)
>         d.addCallback(cb)
>         return server.NOT_DONE_YET
> 
> site = server.Site(ThreadResource())
> reactor.listenTCP(8888, site)
> reactor.run()
> _______________________________________________



Your code looks fine (w/ a minor fixup in __init__).  I did a quick test using your code and the context rendered fine. e.g. in 'base.html' I just have:

Greeting:  {{ greeting }}

Maybe your template is malformed? 



Lucas



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20130628/081a0efd/attachment.html>

From JP at eukor.com  Fri Jun 28 16:34:09 2013
From: JP at eukor.com (JP at eukor.com)
Date: Sat, 29 Jun 2013 07:34:09 +0900 (KST)
Subject: [Twisted-web] =?euc-kr?q?HTML_Rendering_with_Twisted=2EWeb?=
Message-ID: <20130628223409.EC100116275@mmp.eukor21.com>

An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20130629/1428f299/attachment.html>

From p.mayers at imperial.ac.uk  Sat Jun 29 04:05:53 2013
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Sat, 29 Jun 2013 11:05:53 +0100
Subject: [Twisted-web] HTML Rendering with Twisted.Web
In-Reply-To: <20130628223409.EC100116275@mmp.eukor21.com>
References: <20130628223409.EC100116275@mmp.eukor21.com>
Message-ID: <51CEB181.7080506@imperial.ac.uk>

Is anyone else getting these crazy anti-spam challenge/response emails 
from "jp at eukor.com"? Can the list admin please unsub them?


From JP at eukor.com  Sat Jun 29 04:06:59 2013
From: JP at eukor.com (JP at eukor.com)
Date: Sat, 29 Jun 2013 19:06:59 +0900 (KST)
Subject: [Twisted-web] =?euc-kr?q?HTML_Rendering_with_Twisted=2EWeb?=
Message-ID: <20130629100659.A300C116A9F@mmp.eukor21.com>

An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20130629/4d05b6cc/attachment-0001.html>

From ashfall at twistedmatrix.com  Sun Jun 30 07:34:42 2013
From: ashfall at twistedmatrix.com (Ashwini Oruganti)
Date: Sun, 30 Jun 2013 19:04:42 +0530
Subject: [Twisted-web] Twisted 13.1.0 released
Message-ID: <CAMFCZ-3F=0UnatN9iufbxHy6z+Y_s5iOgGgOcFpnF-V5xa2V8A@mail.gmail.com>

On behalf of  Twisted Matrix Laboratories, I am pleased to announce the
release of
Twisted 13.1.

Highlights for this release include:

  * trial now has an --exitfirst flag which stops the test run after the
first error or failure.

  * twisted.internet.ssl.CertificateOptions now supports chain certificates.

  * twisted.conch.endpoints.SSHCommandClientEndpoint is a new
IStreamClientEndpoint
    which supports connecting a protocol to the stdio of a command running
on a remote host
    via an SSH connection.

  * twisted.web.xmlrpc.QueryProtocol now generates valid Authorization
headers for long user
    names and passwords.

  * twisted.internet.endpoints.connectProtocol allows connecting to a
client endpoint using only
    a protocol instance, rather than requiring a factory.

For more information, see the NEWS file here:
  http://twistedmatrix.com/Releases/Twisted/13.1/NEWS.txt

Download it now from:
  http://pypi.python.org/packages/source/T/Twisted/Twisted-13.1.0.tar.bz2 or

http://pypi.python.org/packages/2.7/T/Twisted/Twisted-13.1.0.win32-py2.7.msi

Many thanks to Tom Prince and Thomas Herv?, whose work on release-process
and answers
to numerous questions made this release possible.
Thanks also to the supporters of the Twisted Software Foundation and to the
many contributors
for this release.

-Ashwini
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20130630/0f59da43/attachment.html>

From JP at eukor.com  Sun Jun 30 07:36:03 2013
From: JP at eukor.com (JP at eukor.com)
Date: Sun, 30 Jun 2013 22:36:03 +0900 (KST)
Subject: [Twisted-web] =?euc-kr?q?Twisted_13=2E1=2E0_released?=
Message-ID: <20130630133603.E9360116AD9@mmp.eukor21.com>

An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20130630/dfcafcbf/attachment.html>

From exarkun at twistedmatrix.com  Sun Jun 30 12:19:01 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 30 Jun 2013 18:19:01 -0000
Subject: [Twisted-web] HTML Rendering with Twisted.Web
In-Reply-To: <51CEB181.7080506@imperial.ac.uk>
References: <20130628223409.EC100116275@mmp.eukor21.com>
 <51CEB181.7080506@imperial.ac.uk>
Message-ID: <20130630181901.28793.369222793.divmod.xquotient.45@top>

On 29 Jun, 10:05 am, p.mayers at imperial.ac.uk wrote:
>Is anyone else getting these crazy anti-spam challenge/response emails 
>from "jp at eukor.com"? Can the list admin please unsub them?

Yes, done.

Jean-Paul


From ron at ronallensmith.com  Sun Jun 30 19:40:21 2013
From: ron at ronallensmith.com (Ron Allen Smith)
Date: Sun, 30 Jun 2013 18:40:21 -0700
Subject: [Twisted-web] Where to begin
Message-ID: <7A0AF043-3839-404E-9DD0-176500946A0F@ronallensmith.com>

Hi,

I'm a newbie to Python, but not programming.  However, my problem is replacing an antiquated web-based classroom-attendance oriented software app.

I need to serve out an environment where teachers can sign in and take attendance for students in their classrooms.  That's the general idea.  Python was recommended, but I've not used it before.  So, I'm looking for directions on what the best overall components would be.  I just so happened to have started with the web server first--Twisted Web was at the top of the list on the http://wiki.python.org/moin/WebServers page and seemed intriguing.

That's the background on my search/inquiry.

I think I'll need components to help with authenticating people, a database to capture attendance data, components to help with presenting data back to the user's browser, etc.

Any help is appreciated.

Thanks,

Ron
ron at ronallensmith.com





