<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Can someone translate this, please?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000188.html">
   <LINK REL="Next"  HREF="000192.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Can someone translate this, please?
   </H1>
    <B>Phil Hunt
    </B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com"
       TITLE="[Twisted-web] Can someone translate this, please?">twisted-web@twistedmatrix.com
       </A><BR>
    <I>Tue, 24 Feb 2004 18:35:41 +0000</I>
    <P><UL>
        <LI> Previous message: <A HREF="000188.html">[Twisted-web] Ping
</A></li>
        <LI> Next message: <A HREF="000192.html">[Twisted-web] Can someone translate this, please?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#190">[ date ]</a>
              <a href="thread.html#190">[ thread ]</a>
              <a href="subject.html#190">[ subject ]</a>
              <a href="author.html#190">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am trying to get my head round Twisted, particularly to use it as a 
simple web server (using http as a RPC mechanism, really). I was thinknig
of using a &quot;Rosetta Stone&quot; approach, and am wondering if someone could 
translate this ordinary Python program into Twisted, please:

=====================================================================
# simple_http.py = a simple http server

import SimpleHTTPServer
import BaseHTTPServer
import StringIO

template = &quot;&quot;&quot;&lt;html&gt;
&lt;head&gt;
&lt;title&gt;%(title)s&lt;/title&gt;
&lt;/head&gt;&lt;body&gt;
&lt;h1&gt;%(title)s&lt;/h1&gt;
&lt;p&gt;Path is [&lt;tt&gt;%(path)s&lt;/tt&gt;]
&lt;/body&gt;&lt;/html&gt;
&quot;&quot;&quot;

portNum = 1450

class MyRequestHandler(SimpleHTTPServer.SimpleHTTPRequestHandler):

   def do_GET(self):
      args = {
         'title': 'simple_http.py',
         'path': self.path
      }   
      result = template % args
      self.send_response(200)
      self.send_header(&quot;Content-type&quot;, &quot;text/html&quot;)
      self.send_header(&quot;Content-Length&quot;, str(len(result)))
      self.end_headers()
      f = StringIO.StringIO()
      f.write(result)
      f.seek(0)
      self.copyfile(f, self.wfile)
      f.close()

print &quot;===== starting simple_http.py on port %d =====&quot; % portNum
server_address = ('', portNum)
httpd = BaseHTTPServer.HTTPServer(server_address, 
   MyRequestHandler)
httpd.serve_forever()

#end
=====================================================================

As you can see, it's very simple. When it recieves a GET request it just
sends back an HTML page saying what the path in the GET request was.


-- 
Phil Hunt, <A HREF="mailto:phil.hunt@tech.mrc.ac.uk">phil.hunt@tech.mrc.ac.uk</A>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000188.html">[Twisted-web] Ping
</A></li>
	<LI> Next message: <A HREF="000192.html">[Twisted-web] Can someone translate this, please?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#190">[ date ]</a>
              <a href="thread.html#190">[ thread ]</a>
              <a href="subject.html#190">[ subject ]</a>
              <a href="author.html#190">[ author ]</a>
         </LI>
       </UL>
</body></html>
