<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Slot/pattern/key changes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000166.html">
   <LINK REL="Next"  HREF="000170.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Slot/pattern/key changes
   </H1>
    <B>Matt Goodall
    </B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com"
       TITLE="[Twisted-web] Slot/pattern/key changes">twisted-web@twistedmatrix.com
       </A><BR>
    <I>Tue, 10 Feb 2004 22:58:20 +0000</I>
    <P><UL>
        <LI> Previous message: <A HREF="000166.html">[Twisted-web] Slot/pattern/key changes
</A></li>
        <LI> Next message: <A HREF="000170.html">[Twisted-web] Slot/pattern/key changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#167">[ date ]</a>
              <a href="thread.html#167">[ thread ]</a>
              <a href="subject.html#167">[ subject ]</a>
              <a href="author.html#167">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 2004-02-10 at 21:30, James Y Knight wrote:
&gt;<i> This is a set of *BACKWARDS-INCOMPATIBLE* changes that simplifies and 
</I>&gt;<i> clarifies the set of attributes nevow has for finding elements. Tests 
</I>&gt;<i> pass, and my app works (both after being updated slightly for the API 
</I>&gt;<i> changes).
</I>&gt;<i> 
</I>&gt;<i> There used to be 3 attributes you could put on elements to locate them: 
</I>&gt;<i> slot, pattern, and key. They all did similar but slightly different 
</I>&gt;<i> things.
</I>&gt;<i> 
</I>&gt;<i> - Filling slots with data is a useful concept but 'slot' shouldn' t be 
</I>&gt;<i> an attribute. A slot is something that gets replaced with the given 
</I>&gt;<i> data, and is thus better as a standalone element. It has been replaced 
</I>&gt;<i> with the following:
</I>&gt;<i> slot('slotname') in a stan tree, or &lt;nevow:slot name=&quot;slotname&quot; /&gt; in 
</I>&gt;<i> an (X)HTML template.
</I>&gt;<i> context.slotted() (which could locate a slot) has been eliminated and 
</I>&gt;<i> replaced with context.fillSlots(slotname, stantree). Note that you 
</I>&gt;<i> cannot locate slots, you can just specify data for them to fill 
</I>&gt;<i> themselves with.
</I>&gt;<i> 
</I>&gt;<i> - Assigning unique keys is also a useful concept, but it doesn't 
</I>&gt;<i> require the &quot;context.keyed()&quot; method. That method has been eliminated. 
</I>&gt;<i> HTMLRenderer used it to find the key=&quot;content&quot; in HTML files used as 
</I>&gt;<i> sub-renderers, now it uses pattern=&quot;content&quot;.
</I>&gt;<i> 
</I>&gt;<i> - Patterns remain as the only way to locate a sub-element of your 
</I>&gt;<i> renderer. There are now 3 methods to locate them, depending on what you 
</I>&gt;<i> want to do. patternGenerator() replaces patterns(), onePattern() 
</I>&gt;<i> semi-replaces keyed(), and allPatterns() replaces the direct use of 
</I>&gt;<i> specialMatches that the sequence renderer previous did. Please see the 
</I>&gt;<i> docs in context.py for these three methods for precise behavior.
</I>&gt;<i> 
</I>&gt;<i> So, in summary, to convert your old code to new code:
</I>&gt;<i> 1) If you had &quot;div(style=&quot;border:1px&quot;, slot=&quot;myslot&quot;)&quot; replace it with 
</I>&gt;<i> div(style=&quot;border: 1px&quot;)[slot(&quot;myslot&quot;)].
</I>&gt;<i> 2) If you had a template with &quot;&lt;div style=&quot;border:1px&quot; 
</I>&gt;<i> nevow:slot=&quot;myslot&quot; /&gt;&quot; replace it with &quot;&lt;div 
</I>&gt;<i> style=&quot;border:1px&quot;&gt;&lt;nevow:slot name=&quot;myslot&quot; /&gt;&lt;/div&gt;
</I>&gt;<i> 3) If you had &quot;context.slotted(&quot;myslot&quot;).clear()[a(href=&quot;foo&quot;)[&quot;bar&quot;]] 
</I>&gt;<i> replace it with context.fillSlot(&quot;myslot&quot;, a(href=&quot;foo&quot;)[&quot;bar&quot;]]
</I>&gt;<i> 4) If you used keyed(), convert key= to pattern= and keyed() to 
</I>&gt;<i> onePattern().
</I>&gt;<i> 5) If you used patterns(), just rename it to patternGenerator()
</I>
I have one more use case that is not possible/easy with the proposed
change:

HTML:
&lt;a nevow:slot=&quot;email&quot; class=&quot;whatever&quot; href=&quot;email:&quot;&gt;email&lt;/a&gt;

Rendered by:
context.slotted('email')(href=['mailto:','<A HREF="mailto:a@bc.com">a@bc.com</A>'])['Mr X']

Result:
&lt;a class=&quot;whatever&quot; href=&quot;email:<A HREF="mailto:a@bc.com">a@bc.com</A>&quot;&gt;Mr X&lt;/a&gt;

&gt;<i> 
</I>&gt;<i> Also included in this patch are doc cleanups, removing excess xml() 
</I>&gt;<i> wrappings, replacing yield by return when possible, and the ability to 
</I>&gt;<i> use the &quot;&lt;nevow:invisible&gt;&quot; element in a (x)html template file, with 
</I>&gt;<i> the same behavior as the invisible stan tag.
</I>&gt;<i> 
</I>&gt;<i> James
</I>-- 
Matt Goodall, Pollenation Internet Ltd
w: <A HREF="http://www.pollenation.net">http://www.pollenation.net</A>
e: <A HREF="mailto:matt@pollenation.net">matt@pollenation.net</A>

Any views expressed are my own and do not necessarily reflect
the views of my employer.



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000166.html">[Twisted-web] Slot/pattern/key changes
</A></li>
	<LI> Next message: <A HREF="000170.html">[Twisted-web] Slot/pattern/key changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#167">[ date ]</a>
              <a href="thread.html#167">[ thread ]</a>
              <a href="subject.html#167">[ subject ]</a>
              <a href="author.html#167">[ author ]</a>
         </LI>
       </UL>
</body></html>
