<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Re: Can someone translate this, please?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000198.html">
   <LINK REL="Next"  HREF="000191.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Re: Can someone translate this, please?
   </H1>
    <B>David Bolen
    </B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com"
       TITLE="[Twisted-web] Re: Can someone translate this, please?">twisted-web@twistedmatrix.com
       </A><BR>
    <I>26 Feb 2004 20:32:57 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="000198.html">[Twisted-web] Can someone translate this, please?
</A></li>
        <LI> Next message: <A HREF="000191.html">[Twisted-web] server crashes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#210">[ date ]</a>
              <a href="thread.html#210">[ thread ]</a>
              <a href="subject.html#210">[ subject ]</a>
              <a href="author.html#210">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Phil Hunt &lt;<A HREF="mailto:phil.hunt@tech.mrc.ac.uk">phil.hunt@tech.mrc.ac.uk</A>&gt; writes:

&gt;<i> rosetta1 kind-of does what I want, but not quite, when I try to fetch
</I>&gt;<i> the URL &lt;<A HREF="http://localhost:1450/xxx?aaa=bbb&c=12345">http://localhost:1450/xxx?aaa=bbb&amp;c=12345</A>&gt; in my web browser,
</I>&gt;<i> it says request.path = /xxx, whereas I'm interested in the variable/value
</I>&gt;<i> pairs as well, i.e. /xxx?aaa=bbb&amp;c=12345
</I>
Ah, yeah, that would be a difference between that and the simpler HTTP
handler object in the standard library.  The Twisted support code
automatically parses out the arguments for you and makes them
available from the request object (passed in to the render method in
rosetta1) in the args attribute.  It's a dictionary keyed by variable,
with the value being a list of values supplied.  The value is always a
list even if only one instance of the variable occurs in the URL.

So in your example here, in the render() method, request.args would be
set to {'aaa':['bbb'],'c':['12345']}.

&gt;<i> If I wrote a program like this that was invoked by the ``python'' program
</I>&gt;<i> rather than ``twistd'', would that make a difference it what it can do?
</I>
Not particularly - you can pretty much do anything in either case, but
the sequence of how to initialize things (and how much work you might
need to do to accomplish a particular initialization) will differ.
twistd provides some standard startup handling, but you can initialize
things and run the reactor yourself if you want.

For example, one way to have a more standalone version would be to
replace the bottom portion of rosetta1 (starting from &quot;application = &quot;
down) with:

    site = server.Site(resource=MyResource())
    reactor.listenTCP(1450, site)
    reactor.run()

and you'd need a &quot;from twisted.internet import reactor&quot; at the top
(and could remove the application imports).  It's not exactly
identical since the application/service approach is initializing a
more flexible framework, but for this example, the end result is the
same.  With the above change you could just run the script with
Python.

You can pretty much do anything you want at that point, although you
need to get to the reactor.run() for most stuff to start running.

You can also hang other services off of your application object and do
other initialization in the twistd/tac case.  I don't tend to use twistd
that much myself, but I'm sure for others it's what they prefer.

Oh, and if you'd like to see some simple logging of requests and what
not you can just enable logging by:

    import sys
    from twisted.python import log

at the top, and

    log.startLogging(sys.stdout)

before creating your site.  I think the equivalent is just a command
line option with twistd.

-- David



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000198.html">[Twisted-web] Can someone translate this, please?
</A></li>
	<LI> Next message: <A HREF="000191.html">[Twisted-web] server crashes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#210">[ date ]</a>
              <a href="thread.html#210">[ thread ]</a>
              <a href="subject.html#210">[ subject ]</a>
              <a href="author.html#210">[ author ]</a>
         </LI>
       </UL>
</body></html>
