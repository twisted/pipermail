<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Trac via twisted.web2.wsgi
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Trac%20via%20twisted.web2.wsgi&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002554.html">
   <LINK REL="Next"  HREF="002556.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Trac via twisted.web2.wsgi</H1>
    <B>Ed Suominen</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Trac%20via%20twisted.web2.wsgi&In-Reply-To="
       TITLE="[Twisted-web] Trac via twisted.web2.wsgi">general at eepatents.com
       </A><BR>
    <I>Thu Mar 16 04:23:50 CST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002554.html">[Twisted-web] Re: Lingering HTTP Channel in web2 when testing with
	trial
</A></li>
        <LI>Next message: <A HREF="002556.html">[Twisted-web] How to fill slots in sub-pattern
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2555">[ date ]</a>
              <a href="thread.html#2555">[ thread ]</a>
              <a href="subject.html#2555">[ subject ]</a>
              <a href="author.html#2555">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've implemented a twisted.web2 resource for accessing Trac via WSGI.
You can see both a working example and the code at

<A HREF="http://foss.eepatents.com/DynamicSite/browser/branches/kiss-web2/dynamicsite/external.py">http://foss.eepatents.com/DynamicSite/browser/branches/kiss-web2/dynamicsite/external.py</A>

There's a StanResource class there that I'm using and think is kind of
cool, too.

I use the following python code to provide my root resource for the
foss.eepatents.com site. (A copy is at <A HREF="http://deadbeefbabe.org/paste/34">http://deadbeefbabe.org/paste/34</A>
in case the email version is too mangled to be useful.) Obviously,
you'll want to personalize it for your own use and not call the home
page &quot;Ed Suominen's Free &amp; Open Source Software Projects.&quot;

This will all be part of an upcoming release of DynamicSite, a flexible,
reasonably user-friendly vhost implementation of twisted.web2. Hopefully
I will remain inspired to package it all up now that I've scratched my
particular itch. Since I believe in generous usage of docstrings (hint,
hint to the Twisted devs), the code in the kiss-web2 branch should be
fairly easy to use even in its current raw form.

Those interested in what can be (over)done with Nevow, dynamic image
generation, intelligent caching, etc. might want to browse through the
current revision (SVN:47) of trunk before I replace it with the &quot;keep it
simple stupid&quot; twisted.web2 branch.

Best regards,
Ed Suominen

&gt;<i> # DynamicSite:
</I>&gt;<i> # A virtual hosting twisted.web2 HTTP server that uses subdirectories for
</I>&gt;<i> # virtual host content. Subdirectories can be python packages providing dynamic
</I>&gt;<i> # content with a root resource object, or sources of static content.
</I>&gt;<i> #
</I>&gt;<i> # Copyright (C) 2006 by Edwin A. Suominen, <A HREF="http://www.eepatents.com">http://www.eepatents.com</A>
</I>&gt;<i> #
</I>&gt;<i> # This program is free software; you can redistribute it and/or modify it under
</I>&gt;<i> # the terms of the GNU General Public License as published by the Free Software
</I>&gt;<i> # Foundation; either version 2 of the License, or (at your option) any later
</I>&gt;<i> # version.
</I>&gt;<i> # 
</I>&gt;<i> # This program is distributed in the hope that it will be useful, but WITHOUT
</I>&gt;<i> # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
</I>&gt;<i> # FOR A PARTICULAR PURPOSE.  See the file COPYING for more details.
</I>&gt;<i> # 
</I>&gt;<i> # You should have received a copy of the GNU General Public License along with
</I>&gt;<i> # this program; if not, write to the Free Software Foundation, Inc., 51
</I>&gt;<i> # Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA
</I>&gt;<i> 
</I>&gt;<i> &quot;&quot;&quot;
</I>&gt;<i> Provides a Trac resource via an WSGI gateway.
</I>&gt;<i> 
</I>&gt;<i> &quot;&quot;&quot;
</I>&gt;<i> 
</I>&gt;<i> from dynamicsite.external import TracResource, StanResource
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> class HomePage(StanResource):
</I>&gt;<i>     &quot;&quot;&quot;
</I>&gt;<i>     A home page for all of the trac project names and paths supplied in the
</I>&gt;<i>     I{projects} dict
</I>&gt;<i>     &quot;&quot;&quot;
</I>&gt;<i>     def __init__(self, projects):
</I>&gt;<i>         self.projects = projects
</I>&gt;<i>     
</I>&gt;<i>     def render(self, request):
</I>&gt;<i>         title = &quot;Ed Suominen's Free &amp; Open Source Software Projects&quot;
</I>&gt;<i>         body = [self.h2[title]]
</I>&gt;<i>         for projectName in self.projects.iterkeys():
</I>&gt;<i>             projectDescription = &quot; &quot;.join(self.projects[projectName][1:])
</I>&gt;<i>             body.append(self.p[self.a(href=projectName)[projectName],
</I>&gt;<i>                                &quot;: %s&quot; % projectDescription])
</I>&gt;<i>         
</I>&gt;<i>         return [self.html[
</I>&gt;<i>                 self.head[self.title[title]],
</I>&gt;<i>                 self.body[body]]]
</I>&gt;<i> 
</I>&gt;<i>     def locateChild(self, request, segments):
</I>&gt;<i>         projectName = segments[0]
</I>&gt;<i>         if projectName in self.projects:
</I>&gt;<i>             projectPath = self.projects[projectName][0]
</I>&gt;<i>             return TracResource(projectPath), segments[1:]
</I>&gt;<i>         else:
</I>&gt;<i>             return self, ()
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> projects = {&quot;pNetworkX&quot;:(&quot;/var/trac/pnetworkx&quot;,
</I>&gt;<i>                          &quot;An enhancement to the NetworkX package that provides&quot;,
</I>&gt;<i>                          &quot;database persistency of underlying data in graph&quot;,
</I>&gt;<i>                          &quot;objects&quot;),
</I>&gt;<i>             
</I>&gt;<i>             &quot;DynamicSite&quot;:(&quot;/var/trac/dynamicsite&quot;,
</I>&gt;<i>                            &quot;A virtual hosting twisted.web2 HTTP server that&quot;,
</I>&gt;<i>                            &quot;uses subdirectories for virtual host content&quot;)
</I>&gt;<i>             }
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> resource = HomePage(projects)
</I>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002554.html">[Twisted-web] Re: Lingering HTTP Channel in web2 when testing with
	trial
</A></li>
	<LI>Next message: <A HREF="002556.html">[Twisted-web] How to fill slots in sub-pattern
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2555">[ date ]</a>
              <a href="thread.html#2555">[ thread ]</a>
              <a href="subject.html#2555">[ subject ]</a>
              <a href="author.html#2555">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
