<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Athena &amp; browser 2-connection limit
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Athena%20%26%20browser%202-connection%20limit&In-Reply-To=48CF5B6C.7030405%40thiengineering.ch">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003924.html">
   <LINK REL="Next"  HREF="003918.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Athena &amp; browser 2-connection limit</H1>
    <B>glyph at divmod.com</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Athena%20%26%20browser%202-connection%20limit&In-Reply-To=48CF5B6C.7030405%40thiengineering.ch"
       TITLE="[Twisted-web] Athena &amp; browser 2-connection limit">glyph at divmod.com
       </A><BR>
    <I>Tue Sep 16 06:56:44 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003924.html">[Twisted-web] Athena &amp; browser 2-connection limit
</A></li>
        <LI>Next message: <A HREF="003918.html">[Twisted-web] Athena &amp; browser 2-connection limit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3914">[ date ]</a>
              <a href="thread.html#3914">[ thread ]</a>
              <a href="subject.html#3914">[ subject ]</a>
              <a href="author.html#3914">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07:08 am, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">wthie at thiengineering.ch</A> wrote:
&gt;<i>Hello Harald
</I>&gt;<i>
</I>&gt;<i>Try the following before you proceed:
</I>&gt;<i>
</I>&gt;<i>Run the nevow examples, go to calculator with IE7 or greater, then hit 
</I>&gt;<i>F5 for reload in rapid sequence. You will hit the point where the 
</I>&gt;<i>browser sits there seemingly deactivated with a waiting cursor. Wait 
</I>&gt;<i>for the time it takes for the socket to come out of its TIME_WAIT state 
</I>&gt;<i>and see the browser window come alive again.
</I>&gt;<i>
</I>&gt;<i>You can provoke this behavior also by providing a sequence of 
</I>&gt;<i>LivePages, going from one LivePage to the other.
</I>&gt;<i>
</I>&gt;<i>The Athena implementation which was rewritten at SVN version 13786 to
</I>
This doesn't look like a rewrite of Athena:

    <A HREF="http://divmod.org/trac/changeset/13786">http://divmod.org/trac/changeset/13786</A>

I think you meant SVN version 14017?

    <A HREF="http://divmod.org/trac/changeset/14017">http://divmod.org/trac/changeset/14017</A>

Or maybe something else?
&gt;<i>implement a better disconnect logic collides in my experience with the 
</I>&gt;<i>limited connections IE's developer decided to use. At any particular 
</I>&gt;<i>time the browser accepts only two open sockets (...)
</I>
&gt;<i>This is in my opinion a fundamental flaw in the current Athena 
</I>&gt;<i>implementation and leads to problems no end, because users WILL simply 
</I>&gt;<i>NOT behave and will do the impossible. User feedback in our case was 
</I>&gt;<i>so, that I was forced to live with the 'old' Athena stuff.
</I>
I don't think the flaw is in any way &quot;fundamental&quot;.  The whole design of 
Athena is based around the idea that all the pieces are pluggable and 
can be substituted.  For example, ReliableMessageDelivery is a separate 
class specifically so that it can be modified in isolation and we can 
change this strategy without touching the rest of athena.
&gt;<i>If you or anybody else sees a solution to that IE/TIME_WAIT problem I 
</I>&gt;<i>would be more than happy to invest time into furthering Athenas 
</I>&gt;<i>evolution, I like the concepts underneath and if they're coupled with a 
</I>&gt;<i>decent JScript library the 'real app in the browser' becomes a reality.
</I>
Several things come to mind.

One is that you could simply submit a patch to ReliableMessageDelivery 
to make it better.  There are a number of obvious flaws with the current 
implementation and it would be nice if it could be fixed.  This is not a 
very specific idea because browsers are awful, and I don't know of any 
collection of pure-Javascript gross kludges to work around their 
awfulness better than the current collection of gross kludges.

Another is that we could abuse a browser extension that supports real 
sockets - say, Flash - to provide a better &quot;default&quot; experience, but 
fall back to the current crummy behavior for the few users that don't 
have it.  A long time ago we did this, and there was a flash movie 
called 'flashconduit' included with Nevow's predecessor (Woven).  At the 
time this was impossible to build and test either in an automated way or 
on an open-source platform, so we abandoned that strategy.

Recently I've been playing with Flex, which is (among other things) a 
toolkit for building Flash movies out of actual source code rather than 
the atrocity that is a .FLA file.  It's also amenable to automated 
builds and testing, which FLA files had impeded in the past.

Java is another option, and although the typically long startup time for 
applets wouldn't make it ideal, it might be a reasonable backup option. 
I hear .NET has something called &quot;no touch deployment&quot;, and Firefox has 
a socket API for extensions which an extension could selectively expose 
to the web page context.

Anyway, all of these options are really just different ways that the RDM 
might be adjusted; all of them could be implemented and the best option 
selected automatically based on the user's browser.  Given that you seem 
to have some specific requirements based on specific user experiences, I 
hope that you'll contribute patches that we can discuss and test in a 
variety of different browser situations.

</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003924.html">[Twisted-web] Athena &amp; browser 2-connection limit
</A></li>
	<LI>Next message: <A HREF="003918.html">[Twisted-web] Athena &amp; browser 2-connection limit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3914">[ date ]</a>
              <a href="thread.html#3914">[ thread ]</a>
              <a href="subject.html#3914">[ subject ]</a>
              <a href="author.html#3914">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
