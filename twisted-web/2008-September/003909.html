<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Athena &amp; browser 2-connection limit
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Athena%20%26%20browser%202-connection%20limit&In-Reply-To=1ff309e60809151123h518d1029w8004123185427aa1%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003908.html">
   <LINK REL="Next"  HREF="003912.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Athena &amp; browser 2-connection limit</H1>
    <B>Werner Thie</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Athena%20%26%20browser%202-connection%20limit&In-Reply-To=1ff309e60809151123h518d1029w8004123185427aa1%40mail.gmail.com"
       TITLE="[Twisted-web] Athena &amp; browser 2-connection limit">wthie at thiengineering.ch
       </A><BR>
    <I>Tue Sep 16 03:08:28 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003908.html">[Twisted-web] Athena &amp; browser 2-connection limit
</A></li>
        <LI>Next message: <A HREF="003912.html">[Twisted-web] Athena &amp; browser 2-connection limit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3909">[ date ]</a>
              <a href="thread.html#3909">[ thread ]</a>
              <a href="subject.html#3909">[ subject ]</a>
              <a href="author.html#3909">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Harald

Try the following before you proceed:

Run the nevow examples, go to calculator with IE7 or greater, then hit 
F5 for reload in rapid sequence. You will hit the point where the 
browser sits there seemingly deactivated with a waiting cursor. Wait for 
the time it takes for the socket to come out of its TIME_WAIT state and 
see the browser window come alive again.

You can provoke this behavior also by providing a sequence of LivePages, 
going from one LivePage to the other.

The Athena implementation which was rewritten at SVN version 13786 to 
implement a better disconnect logic collides in my experience with the 
limited connections IE's developer decided to use. At any particular 
time the browser accepts only two open sockets and if the user is fast 
enough to close and open a series of independent windows such that the 
tearing down of one connection provokes a 'half open' socket in 
TIME_WAIT state, IE7 &amp; IE8 wait for the that socket to close completely. 
This problem is amplified by higher latency systems such when running IP 
traffic over satellite or mobile networks.

This is in my opinion a fundamental flaw in the current Athena 
implementation and leads to problems no end, because users WILL simply 
NOT behave and will do the impossible. User feedback in our case was so, 
that I was forced to live with the 'old' Athena stuff.

I have a site up which consists of almost only LivePages doing dialogs 
and fancy stuff, but it's using nevow/athena at SVN version 13786 and it 
  took me an arm and a leg to bring it up to the point where it was 
running smoothly, now serving a constant load of more than 100 users 
24/7. (see www.samschtigjass.ch, goto 'Einzelspieler-Version' for a 
guest game)

If you or anybody else sees a solution to that IE/TIME_WAIT problem I 
would be more than happy to invest time into furthering Athenas 
evolution, I like the concepts underneath and if they're coupled with a 
decent JScript library the 'real app in the browser' becomes a reality.

Werner


Harald Bl&#229;tand wrote:
&gt;<i> Hi there,
</I>&gt;<i>  
</I>&gt;<i> Been thinking about this. It _would_ be cool if you could have more than 
</I>&gt;<i> one LivePage per browser session, like in popups, or even frames.
</I>&gt;<i>  
</I>&gt;<i> What do you think: Is there any obvious &amp; fundamental reason why the 
</I>&gt;<i> ReliableMessageDelivery stuff couldn't be modified, so that one instance 
</I>&gt;<i> of it could be shared between several PageWidgets?
</I>&gt;<i>  
</I>&gt;<i> Harald
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-web mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">Twisted-web at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web</A>
</I>
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003908.html">[Twisted-web] Athena &amp; browser 2-connection limit
</A></li>
	<LI>Next message: <A HREF="003912.html">[Twisted-web] Athena &amp; browser 2-connection limit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3909">[ date ]</a>
              <a href="thread.html#3909">[ thread ]</a>
              <a href="subject.html#3909">[ subject ]</a>
              <a href="author.html#3909">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
