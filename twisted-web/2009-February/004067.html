<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Telnet server: Detecting CTRL-&lt;key&gt;,
	as happends with CTRL-C
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Telnet%20server%3A%20Detecting%20CTRL-%3Ckey%3E%2C%0A%09as%20happends%20with%20CTRL-C&In-Reply-To=4FCF6216C629B8429751D4F654DBCBA11DE261%40FIESEXC035.nsn-intra.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004066.html">
   <LINK REL="Next"  HREF="004070.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Telnet server: Detecting CTRL-&lt;key&gt;,
	as happends with CTRL-C</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Telnet%20server%3A%20Detecting%20CTRL-%3Ckey%3E%2C%0A%09as%20happends%20with%20CTRL-C&In-Reply-To=4FCF6216C629B8429751D4F654DBCBA11DE261%40FIESEXC035.nsn-intra.net"
       TITLE="[Twisted-web] Telnet server: Detecting CTRL-&lt;key&gt;,
	as happends with CTRL-C">exarkun at divmod.com
       </A><BR>
    <I>Wed Feb  4 10:15:48 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004066.html">[Twisted-web] Telnet server: Detecting CTRL-&lt;key&gt;,
	as happends with CTRL-C
</A></li>
        <LI>Next message: <A HREF="004070.html">[Twisted-web] Telnet server: Detecting CTRL-&lt;key&gt;,
	as happends with CTRL-C
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4067">[ date ]</a>
              <a href="thread.html#4067">[ thread ]</a>
              <a href="subject.html#4067">[ subject ]</a>
              <a href="author.html#4067">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 4 Feb 2009 13:35:23 +0200, &quot;Eloranta, Teuvo \(NSN - FI/Tampere\)&quot; &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">teuvo.eloranta at nsn.com</A>&gt; wrote:
&gt;<i>Hello,
</I>&gt;<i>
</I>&gt;<i>I have an application, with Python 2.4 and Twisted 8.2.0.
</I>&gt;<i>
</I>&gt;<i>Can I somehow detect e.g. CTRL-J key presses in:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  class Telnet_simulation(telnet.Telnet)
</I>&gt;<i>	--&gt;
</I>&gt;<i>      def dataReceived(self, data):
</I>&gt;<i>
</I>&gt;<i>(or elsewhere in code)?
</I>&gt;<i>
</I>
If the `telnet&#180; above is twisted.protocols.telnet, then you should switch
to twisted.conch.telnet.  If it's twisted.conch.telnet, then you should
override `applicationDataReceived&#180;, not `dataReceived&#180; (or use one of the
other mechanisms for hooking into it - subclass and override is one
approach, but there are others which you can find examples of in doc/conch/
examples).

&gt;<i>
</I>&gt;<i>When sending CTRL-C, the dataReceived() is called immeaditely, but when
</I>&gt;<i>sending some other combinations, the data can be seen only after Enter
</I>&gt;<i>is pressed?
</I>&gt;<i>(telnet_Command is called then) But the CTRL-J is not a telnet command,
</I>&gt;<i>it should act same way as CTRL-C.
</I>
Ah, telnet_Command, I guess you are using twisted.protocols.telnet. :)

Most likely your telnet client is in line editing mode.  This means it
isn't sending data typed in until enter is pressed, so of course you can't
receive it until then.  There are telnet negotiation options which you can
use from the server to ask the client to go into character mode.  You can
see some code which negotiates about linemode in twisted/conch/telnet.py
(search for LINEMODE).  I'm not sure if LINEMODE is the preferred option
for controlling this behavior (I seem to recall there being another one,
but I forget which obsoleted which).

Also, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">twisted-python at twistedmatrix.com</A> might be a more appropriate list for
this topic, since this is a web-oriented list.

Jean-Paul

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004066.html">[Twisted-web] Telnet server: Detecting CTRL-&lt;key&gt;,
	as happends with CTRL-C
</A></li>
	<LI>Next message: <A HREF="004070.html">[Twisted-web] Telnet server: Detecting CTRL-&lt;key&gt;,
	as happends with CTRL-C
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4067">[ date ]</a>
              <a href="thread.html#4067">[ thread ]</a>
              <a href="subject.html#4067">[ subject ]</a>
              <a href="author.html#4067">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
