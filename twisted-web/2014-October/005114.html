<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Making Secure HTTPS requests, SSL Method, and Certificate Management using Twisted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-web%5D%20Making%20Secure%20HTTPS%20requests%2C%20SSL%20Method%2C%0A%20and%20Certificate%20Management%20using%20Twisted&In-Reply-To=%3CCAHPVzqYDmXZdvRTPz1Ei8h091drUOYN6uTuJP2_PP656tA8NiQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005115.html">
   <LINK REL="Next"  HREF="005118.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Making Secure HTTPS requests, SSL Method, and Certificate Management using Twisted</H1>
    <B>Carl Waldbieser</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-web%5D%20Making%20Secure%20HTTPS%20requests%2C%20SSL%20Method%2C%0A%20and%20Certificate%20Management%20using%20Twisted&In-Reply-To=%3CCAHPVzqYDmXZdvRTPz1Ei8h091drUOYN6uTuJP2_PP656tA8NiQ%40mail.gmail.com%3E"
       TITLE="[Twisted-web] Making Secure HTTPS requests, SSL Method, and Certificate Management using Twisted">cwaldbieser at gmail.com
       </A><BR>
    <I>Mon Oct  6 08:55:31 MDT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="005115.html">[Twisted-web] Auto-Re:  Making Secure HTTPS requests, SSL Method, and Certificate Management using Twisted
</A></li>
        <LI>Next message: <A HREF="005118.html">[Twisted-web] Making Secure HTTPS requests, SSL Method,	and Certificate Management using Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5114">[ date ]</a>
              <a href="thread.html#5114">[ thread ]</a>
              <a href="subject.html#5114">[ subject ]</a>
              <a href="author.html#5114">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a couple projects I am working on where I would like to make HTTPS
requests using Twisted.  I reviewed the articles &quot;Using TLS in Twisted&quot; [1]
and &quot;Using the Twisted Web Client&quot; (section &quot;HTTP over SSL&quot;) [2].  It seems
like various options exist that will allow me to make HTTPS requests using
the CA certs bundled on the client OS.

I would like to be able to tell my HTTPS clients to accept specific
*internal* CA certificates *in addition* to the certificates provided by
the OS.  Initially, I thought this might be possible by passing a custom
t.w.c.BrowserLikePolicyForHTTPS to the t.w.c.Agent as its `contextFactory`
argument. I wasn't quite sure how to go about doing this, so I got some
advice on StackOverflow [3]. With some slight modifications to the solution
presented there, I was able to create a custom Trust Root that accepted a
list of paths to CA cert files in PEM format that I wanted to add to the
client. The custom trust root is passed to the BrowserLikePolicyForHTTPS.
The policy is passed to the Agent.

The one hitch is that the IOpenSSLTrustRoot interface upon which my custom
trust root is based is located in `twisted.internet._sslverify`[4], which
if I understand correctly, is a private module and not supposed to be used
as an API.  Is there a *supported* way to specify *additional* CA certs to
use during SSL verification when making HTTPS requests using Twisted? If
so, what is the recommended method?

Another related concept that was not clear to me is how one might specify
the SSL method (e.g. SSLv23_METHOD, SSLv3_METHOD, etc.) when making the
request. Is there some recommended way to pass options to indicate the SSL
method that ought to be used?

Any guidance would be appreciated.

Thanks,
Carl Waldbieser


[1] <A HREF="https://twistedmatrix.com/documents/current/core/howto/ssl.html">https://twistedmatrix.com/documents/current/core/howto/ssl.html</A>
[2]
<A HREF="http://twistedmatrix.com/documents/current/web/howto/client.html#http-over-ssl">http://twistedmatrix.com/documents/current/web/howto/client.html#http-over-ssl</A>
[3]
<A HREF="http://stackoverflow.com/questions/26166444/twisted-python-how-to-create-a-twisted-web-client-browserlikepolicyforhttps-with">http://stackoverflow.com/questions/26166444/twisted-python-how-to-create-a-twisted-web-client-browserlikepolicyforhttps-with</A>
[4]
<A HREF="http://twistedmatrix.com/documents/current/api/twisted.internet._sslverify.IOpenSSLTrustRoot.html">http://twistedmatrix.com/documents/current/api/twisted.internet._sslverify.IOpenSSLTrustRoot.html</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20141006/f0f8c111/attachment.html">http://twistedmatrix.com/pipermail/twisted-web/attachments/20141006/f0f8c111/attachment.html</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005115.html">[Twisted-web] Auto-Re:  Making Secure HTTPS requests, SSL Method, and Certificate Management using Twisted
</A></li>
	<LI>Next message: <A HREF="005118.html">[Twisted-web] Making Secure HTTPS requests, SSL Method,	and Certificate Management using Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5114">[ date ]</a>
              <a href="thread.html#5114">[ thread ]</a>
              <a href="subject.html#5114">[ subject ]</a>
              <a href="author.html#5114">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
