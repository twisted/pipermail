<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Nevow and python 3
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-web%5D%20Nevow%20and%20python%203&In-Reply-To=%3C20180124085420.kynnasbqkmiio3c6%40victor%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="005339.html">
   <LINK REL="Next"  HREF="005342.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Nevow and python 3</H1>
    <B>Markus Demleitner</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-web%5D%20Nevow%20and%20python%203&In-Reply-To=%3C20180124085420.kynnasbqkmiio3c6%40victor%3E"
       TITLE="[Twisted-web] Nevow and python 3">msdemlei at ari.uni-heidelberg.de
       </A><BR>
    <I>Wed Jan 24 01:54:20 MST 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005339.html">[Twisted-web] Nevow and python 3
</A></li>
        <LI>Next message (by thread): <A HREF="005342.html">[Twisted-web] Nevow and python 3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5341">[ date ]</a>
              <a href="thread.html#5341">[ thread ]</a>
              <a href="subject.html#5341">[ subject ]</a>
              <a href="author.html#5341">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Glyph,

On Tue, Jan 23, 2018 at 11:51:44PM -0800, Glyph wrote:
&gt;<i> &gt; On Jan 23, 2018, at 2:03 AM, Markus Demleitner &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">msdemlei at ari.uni-heidelberg.de</A>&gt; wrote:
</I>&gt;<i> &gt; through from twisted.web quite unsatisfying.  I've tried to formulate
</I>&gt;<i> &gt; something like a preliminary policy in
</I>&gt;<i> &gt; <A HREF="https://github.com/msdemlei/nevow/blob/master/doc/strings_and_bytes.rst,">https://github.com/msdemlei/nevow/blob/master/doc/strings_and_bytes.rst,</A>
</I>&gt;<i> &gt; but I'm deeply unhappy about most of this.
</I>&gt;<i> 
</I>&gt;<i> Yeah, IRequest is an unfortunate interface.  Work is ongoing to
</I>&gt;<i> design a more thoughtful one and gradually migrate to it.  I think
</I>&gt;<i> <A HREF="https://github.com/wsanchez/txrequest">https://github.com/wsanchez/txrequest</A>
</I>&gt;<i> &lt;<A HREF="https://github.com/wsanchez/txrequest">https://github.com/wsanchez/txrequest</A>&gt; is getting pretty complete,
</I>&gt;<i> and from there the hope is that it will get integrated into Klein
</I>&gt;<i> and then upstreamed into Twisted.
</I>
...which of course looks like a very long migration path, very likely
stretching far beyond python2's EOL if my typical deployment is on
Debian stable...

I wonder if one couldn't arrange for inevow.IRequest to adapt to
essentially this (perhaps with a bit more glue code to keep
as compatible with existing code as possible).

&gt;<i> &gt; Ideally, I'd like to fairly exclusively expose actual strings to
</I>&gt;<i> 
</I>&gt;<i> &quot;actual&quot; meaning text?
</I>
Yes: str.

&gt;<i> &gt; (2) Is anyone at all interested in the livepages stuff (I'm not, and
</I>&gt;<i> &gt; dropping it would certainly make porting and maintaining the package
</I>&gt;<i> &gt; a lot easier)?
</I>&gt;<i> 
</I>&gt;<i> If you're going to drop livepage, is there any reason you're not
</I>&gt;<i> just migrating to twisted.web.template?  Is there any way t.w.t
</I>&gt;<i> could be made into an easier migration path?
</I>
I have to admit I've not really investigated t.w.t in any detail; one
thing that actually does matter -- because templates of my users will
silently fail with it -- is the change of the XML namespace for the
nevow elements and attributes.  

I suppose one could work around it on template load, though.  Hm --
this might be an interesting alternative to keeping all of nevow.

Of course, that still doesn't help against the insiduous breakage
when suddenly code needs to deal with byte strings coming out of
request.args.keys(), path components, and headers; that's a bit less
of a direct concern for me since it's much less deployer-visible for
my applications, but if I have to write some compatibility layer, why
not have nevow be it?

&gt;<i> &gt; (3) If I went ahead with this and actually tried to get a
</I>&gt;<i> &gt; python3-nevow into Debian (which I'd really, really like to see): How
</I>&gt;<i> &gt; is everyone's feeling about keeping the name nevow even if serious
</I>&gt;<i> &gt; functional changes (such as dropping livepages) were to come about?
</I>&gt;<i> &gt; [What I care about most is keeping the templating system including
</I>&gt;<i> &gt; the render_ and data_ methods].
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> If you're going to do a fork, please come up with a new name.
</I>&gt;<i> Using the existing one is confusing, it causes namespace conflicts
</I>&gt;<i> (what happens when Nevow itself gets some upstream patches that
</I>&gt;<i> port it to python 3 from someone else?) and it causes import
</I>&gt;<i> conflicts.
</I>
Fair enough (a bit more on this in my response to Werner).

&gt;<i> That said, if you are interested in porting Nevow the same way that
</I>&gt;<i> Twisted is being ported (i.e. there's one set of sources, but `pip
</I>&gt;<i> install` on python 3 only installs the modules ported thus far)
</I>
Ouch -- given my experiences while porting it would seem a major
chore to keep python2 compatibity.  But then I've not tried, and I
may be wrong.   If I actually wanted to follow
<A HREF="https://twistedmatrix.com/trac/wiki/Plan/Python3">https://twistedmatrix.com/trac/wiki/Plan/Python3</A> by the letter,
that's certainly far beyond what I can reasonably commit in terms of
resources.

&gt;<i> then that would certainly be a way to invest the effort in just
</I>&gt;<i> porting the parts that you need, and letting someone else port
</I>&gt;<i> LivePage later :).  I'd be happy to make you a maintainer if you're
</I>&gt;<i> interested in doing this - not a lot of other activity on Nevow
</I>&gt;<i> right now!
</I>
I'd certainly like to make the effort I invest as worthwhile as
possible; but, in particular after the experience of porting, I feel
I'm not nearly as familiar with nevow's codebase (and customs in the
twisted ecosystem) as I should be to confidently work as maintainer.

Before I commit to anything, let me try to work out if I can get
nevow to the point where it doesn't cause extra porting pains in the
python3 migration of dependent code.

Thanks,

         Markus

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005339.html">[Twisted-web] Nevow and python 3
</A></li>
	<LI>Next message (by thread): <A HREF="005342.html">[Twisted-web] Nevow and python 3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5341">[ date ]</a>
              <a href="thread.html#5341">[ thread ]</a>
              <a href="subject.html#5341">[ subject ]</a>
              <a href="author.html#5341">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
