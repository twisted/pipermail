<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Nevow and python 3
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-web%5D%20Nevow%20and%20python%203&In-Reply-To=%3C4AB22B3E-3738-4512-96BF-1FBC67520618%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="005345.html">
   <LINK REL="Next"  HREF="005341.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Nevow and python 3</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-web%5D%20Nevow%20and%20python%203&In-Reply-To=%3C4AB22B3E-3738-4512-96BF-1FBC67520618%40twistedmatrix.com%3E"
       TITLE="[Twisted-web] Nevow and python 3">glyph at twistedmatrix.com
       </A><BR>
    <I>Wed Jan 24 00:51:44 MST 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005345.html">[Twisted-web] Nevow and python 3
</A></li>
        <LI>Next message (by thread): <A HREF="005341.html">[Twisted-web] Nevow and python 3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5339">[ date ]</a>
              <a href="thread.html#5339">[ thread ]</a>
              <a href="subject.html#5339">[ subject ]</a>
              <a href="author.html#5339">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> On Jan 23, 2018, at 2:03 AM, Markus Demleitner &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">msdemlei at ari.uni-heidelberg.de</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> Since I have a couple of projects building on nevow that I'd like to
</I>&gt;<i> keep maintaining into the post-python2 world (and at least one of
</I>&gt;<i> them contains a broader user base that I can't easily get to port
</I>&gt;<i> templates and such), I've started porting nevow to python3.  What's
</I>&gt;<i> on <A HREF="https://github.com/msdemlei/nevow">https://github.com/msdemlei/nevow</A> runs essentially all the unit
</I>&gt;<i> tests that weren't broken on python2 except for those related to
</I>&gt;<i> livepages.
</I>
Hi Markus!

&gt;<i> I've not tried to port any python2 code to this now, though, since I
</I>&gt;<i> find the current situation where lots of byte strings leak
</I>&gt;<i> through from twisted.web quite unsatisfying.  I've tried to formulate
</I>&gt;<i> something like a preliminary policy in
</I>&gt;<i> <A HREF="https://github.com/msdemlei/nevow/blob/master/doc/strings_and_bytes.rst,">https://github.com/msdemlei/nevow/blob/master/doc/strings_and_bytes.rst,</A>
</I>&gt;<i> but I'm deeply unhappy about most of this.
</I>
Yeah, IRequest is an unfortunate interface.  Work is ongoing to design a more thoughtful one and gradually migrate to it.  I think <A HREF="https://github.com/wsanchez/txrequest">https://github.com/wsanchez/txrequest</A> &lt;<A HREF="https://github.com/wsanchez/txrequest">https://github.com/wsanchez/txrequest</A>&gt; is getting pretty complete, and from there the hope is that it will get integrated into Klein and then upstreamed into Twisted.

&gt;<i> Ideally, I'd like to fairly exclusively expose actual strings to
</I>
&quot;actual&quot; meaning text?

&gt;<i> nevow client code unless they actually deal with binary data (as in
</I>&gt;<i> static.File, and of course request.write needs to be able to deal
</I>&gt;<i> with this).  This will probably mean isolating client code from
</I>&gt;<i> twisted.web.Requests a bit more.
</I>&gt;<i> 
</I>&gt;<i> So: 
</I>&gt;<i> 
</I>&gt;<i> (1) Is anyone else still interested in this?
</I>
I can't speak to anyone else, but the fact that Nevow has a duplicated resource model is kind of unfortunate; that's why we're hoping to just replace the Twisted one eventually.  (But in an upward-compatible way, with comprehensive interoperability and a smooth deprecation transition, not web2 all over again...)

&gt;<i> (2) Is anyone at all interested in the livepages stuff (I'm not, and
</I>&gt;<i> dropping it would certainly make porting and maintaining the package
</I>&gt;<i> a lot easier)?
</I>
If you're going to drop livepage, is there any reason you're not just migrating to twisted.web.template?  Is there any way t.w.t could be made into an easier migration path?

&gt;<i> (3) If I went ahead with this and actually tried to get a
</I>&gt;<i> python3-nevow into Debian (which I'd really, really like to see): How
</I>&gt;<i> is everyone's feeling about keeping the name nevow even if serious
</I>&gt;<i> functional changes (such as dropping livepages) were to come about?
</I>&gt;<i> [What I care about most is keeping the templating system including
</I>&gt;<i> the render_ and data_ methods].
</I>

If you're going to do a fork, please come up with a new name.  Using the existing one is confusing, it causes namespace conflicts (what happens when Nevow itself gets some upstream patches that port it to python 3 from someone else?) and it causes import conflicts.

That said, if you are interested in porting Nevow the same way that Twisted is being ported (i.e. there's one set of sources, but `pip install` on python 3 only installs the modules ported thus far) then that would certainly be a way to invest the effort in just porting the parts that you need, and letting someone else port LivePage later :).  I'd be happy to make you a maintainer if you're interested in doing this - not a lot of other activity on Nevow right now!

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-web/attachments/20180123/a077aa83/attachment.html&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005345.html">[Twisted-web] Nevow and python 3
</A></li>
	<LI>Next message (by thread): <A HREF="005341.html">[Twisted-web] Nevow and python 3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5339">[ date ]</a>
              <a href="thread.html#5339">[ thread ]</a>
              <a href="subject.html#5339">[ subject ]</a>
              <a href="author.html#5339">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
