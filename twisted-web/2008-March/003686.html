<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> WSGI support (was [Twisted-web] Re: status of Twisted Web and
	Web	2)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=WSGI%20support%20%28was%20%5BTwisted-web%5D%20Re%3A%20status%20of%20Twisted%20Web%20and%0A%09Web%092%29&In-Reply-To=812252F7-FB2D-4304-9026-AC41EA5ECCF4%40dreid.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003685.html">
   <LINK REL="Next"  HREF="003675.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>WSGI support (was [Twisted-web] Re: status of Twisted Web and
	Web	2)</H1>
    <B>Manlio Perillo</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=WSGI%20support%20%28was%20%5BTwisted-web%5D%20Re%3A%20status%20of%20Twisted%20Web%20and%0A%09Web%092%29&In-Reply-To=812252F7-FB2D-4304-9026-AC41EA5ECCF4%40dreid.org"
       TITLE="WSGI support (was [Twisted-web] Re: status of Twisted Web and
	Web	2)">manlio_perillo at libero.it
       </A><BR>
    <I>Fri Mar  7 06:10:25 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003685.html">WSGI support (was [Twisted-web] Re: status of Twisted Web and Web
	2)
</A></li>
        <LI>Next message: <A HREF="003675.html">WSGI support (was [Twisted-web] Re: status of Twisted Web and
	Web	2)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3686">[ date ]</a>
              <a href="thread.html#3686">[ thread ]</a>
              <a href="subject.html#3686">[ subject ]</a>
              <a href="author.html#3686">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>David Reid ha scritto:
&gt;<i> [...]
</I>&gt;&gt;<i> Right.
</I>&gt;&gt;<i> This is what makes WSGI great.
</I>&gt;<i> 
</I>&gt;<i> Read: &quot;So the thing I like about WSGI is that it's actually poorly 
</I>&gt;<i> specified&quot;
</I>&gt;<i> 
</I>
No, I disagree.

WSGI is able to support asynchronous applications since you can send 
headers in the application iterable, and the application iterable can be 
a generator, so the WSGI gateway can suspend the iteration at any time.

&gt;<i> Why is attempting to adapt a currently synchronous API (the WSGI 
</I>&gt;<i> application API is synchronous) It's supposed to allow you to write web 
</I>&gt;<i> applications that may be able to run singlethreaded, multithreaded or in 
</I>&gt;<i> a multiprocess environment, it doesn't specify an asynchronous API.   If 
</I>&gt;<i> it did applications would still need to be written in an asynchronous 
</I>&gt;<i> manner.
</I>&gt;<i> 
</I>&gt;<i> Threads are the only way to make blocking code appear to be non-blocking.
</I>&gt;<i> Processes are the only way to make blocking code actually not block.
</I>&gt;<i> 
</I>
Ok, but I'm not speaking about generic code.
I'm speaking about code specifically written for an asynchronous WSGI 
implementation.

&gt;<i> [...]
</I>&gt;&gt;<i> By the way, some time ago I proposed a wsgi.asynchronous enviroment 
</I>&gt;&gt;<i> variable.
</I>&gt;<i> 
</I>&gt;<i> I don't get it.  I don't see the point at all.  
</I>&gt;<i> I can't make blocking 
</I>&gt;<i> code magically not-block.  
</I>
Right.

There is no need for such variable, the application can just check for 
asynchronous extensions.

However wsgi.asynchronous does make sense if the WSGI gateway implements 
a whole set of asynchronous extensions, like poll or async reading from 
wsgi.input.

&gt;<i> I could use a middlewear that translated from 
</I>&gt;<i> wsgi.asynchronous to a wsgi.multithreaded or wsgi.multiprocess 
</I>&gt;<i> implementation for running my synchronous code, but I don't think there 
</I>&gt;<i> are any benefits to a wsgi.asynchronous API at all.
</I>&gt;<i> 
</I>&gt;<i> I can reasonably write an application that honestly doesn't care if it's 
</I>&gt;<i> being serialized, run in threads, or run in seperate processes.  As soon 
</I>&gt;<i> as you throw wsgi.asynchronous into the mix I lose that ability.
</I>&gt;<i> 
</I>
Not necessary true.
If you look at the simple nginx-poll-sleep example, then it easy to use 
two separate HTTP clients, depending on the presence of ngx.poll extension.

Of course, your application *needs* to return a generator, but this is 
not a problem.

&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> As far as Twisted's WSGI implementation, it should probably support 
</I>&gt;&gt;&gt;<i> both approaches, maybe where some kind of argument to the 
</I>&gt;&gt;&gt;<i> WSGIResource class constructor determines what it specifies in the 
</I>&gt;&gt;&gt;<i> environ dictionary. It should be the responsibility of the WSGI 
</I>&gt;&gt;&gt;<i> application itself to do the right thing depending on what's inside 
</I>&gt;&gt;&gt;<i> the environ dict.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm not sure that this is possible.
</I>&gt;&gt;<i> An application is asynchronous or synchronous.
</I>&gt;<i> 
</I>&gt;<i> Exactly so why should we try to make the same API do both?
</I>&gt;&gt;<i>
</I>
The API does not do anything.
It simply should support both models (and this is possible, it is 
*already* possible)




&gt;<i> 
</I>&gt;<i> All that being said I'm perfectly happy to accept patches that enhance 
</I>&gt;<i> twisted's wsgi support, but I feel no inclination to support anything 
</I>&gt;<i> out of spec.
</I>&gt;<i> 
</I>&gt;<i> -David
</I>&gt;<i> 
</I>
Manlio Perillo

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003685.html">WSGI support (was [Twisted-web] Re: status of Twisted Web and Web
	2)
</A></li>
	<LI>Next message: <A HREF="003675.html">WSGI support (was [Twisted-web] Re: status of Twisted Web and
	Web	2)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3686">[ date ]</a>
              <a href="thread.html#3686">[ thread ]</a>
              <a href="subject.html#3686">[ subject ]</a>
              <a href="author.html#3686">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
