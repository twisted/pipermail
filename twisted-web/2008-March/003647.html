<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] streaming request (was: status of Twisted Web
	and Web 2)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20streaming%20request%20%28was%3A%20status%20of%20Twisted%20Web%0A%09and%20Web%202%29&In-Reply-To=20080306021345.6859.996607536.divmod.quotient.16052%40ohm">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003644.html">
   <LINK REL="Next"  HREF="003649.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] streaming request (was: status of Twisted Web
	and Web 2)</H1>
    <B>Andrew McNabb</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20streaming%20request%20%28was%3A%20status%20of%20Twisted%20Web%0A%09and%20Web%202%29&In-Reply-To=20080306021345.6859.996607536.divmod.quotient.16052%40ohm"
       TITLE="[Twisted-web] streaming request (was: status of Twisted Web
	and Web 2)">amcnabb at mcnabbs.org
       </A><BR>
    <I>Wed Mar  5 22:09:52 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003644.html">[Twisted-web] streaming request (was: status of Twisted Web and Web
	2)
</A></li>
        <LI>Next message: <A HREF="003649.html">[Twisted-web] streaming request (was: status of Twisted Web
	and Web 2)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3647">[ date ]</a>
              <a href="thread.html#3647">[ thread ]</a>
              <a href="subject.html#3647">[ subject ]</a>
              <a href="author.html#3647">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Mar 05, 2008 at 09:13:44PM -0500, Jean-Paul Calderone wrote:
&gt;<i> On Wed, 5 Mar 2008 18:52:50 -0700, Andrew McNabb &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">amcnabb at mcnabbs.org</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've written some code that uses Twisted Web, and it seemed a little
</I>&gt;&gt;<i> basic.  For example, I had to make some modifications in order to
</I>&gt;&gt;<i> receive large files in progress instead of waiting until they were done
</I>&gt;&gt;<i> downloading.
</I>&gt;<i>
</I>&gt;<i> Does this code have tests?  Is it compatible with &quot;normal&quot; twisted.web
</I>&gt;<i> usage?  Can I have the code?
</I>
My answer to all three questions is &quot;sort of.&quot;  If you (or others) could
help me resolve a problem I ran into, I could change all of those to a
&quot;yes.&quot;

The problem that I ran into is that with streaming requests, I would
like to be able to call back multiple times.  It makes sense that a
normal deferred can only be called back once.  I couldn't find anything
in Twisted that you might call a &quot;multi-deferred&quot; (to make it simple to
callback multiple times).  It's been a while, so let me see if I
remember what I tried.

My first attempt was to callback with a new deferred as the callback
value.  Then the callback function could add itself to the new deferred
and get called again the next time data arrive.  I thought this was a
clean approach, but it turns out that if you try to call back with a new
deferred, there's a TypeError.  I couldn't figure out why it didn't like
this.

My second attempt was to create a new deferred each time data arrived
and to copy the callback list from the previous deferred.  This worked,
but it felt dirty, so I got rid of it.

My third and final attempt was to tie the downloader in to my
application.  Every time data arrive, the downloader sends it to the
object that needs it.  This isn't a very general solution, but it is
very short and readable.

Anyway, if you know of a better way to deal with this issue, I would be
happy to modify my code for it.  If you're happy with what I've got, I
would be happy to email it to you, but I wouldn't recommend adding it to
Twisted Web until it's more general.

Thanks.


-- 
Andrew McNabb
<A HREF="http://www.mcnabbs.org/andrew/">http://www.mcnabbs.org/andrew/</A>
PGP Fingerprint: 8A17 B57C 6879 1863 DE55  8012 AB4D 6098 8826 6868
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20080305/3fa7adba/attachment.pgp">http://twistedmatrix.com/pipermail/twisted-web/attachments/20080305/3fa7adba/attachment.pgp</A>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003644.html">[Twisted-web] streaming request (was: status of Twisted Web and Web
	2)
</A></li>
	<LI>Next message: <A HREF="003649.html">[Twisted-web] streaming request (was: status of Twisted Web
	and Web 2)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3647">[ date ]</a>
              <a href="thread.html#3647">[ thread ]</a>
              <a href="subject.html#3647">[ subject ]</a>
              <a href="author.html#3647">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
