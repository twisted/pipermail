<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Alternative to &lt;nevow:attr&gt;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Alternative%20to%20%3Cnevow%3Aattr%3E&In-Reply-To=20041019095148.GA4892%40frobozz">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000768.html">
   <LINK REL="Next"  HREF="000753.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Alternative to &lt;nevow:attr&gt;</H1>
    <B>Donovan Preston</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Alternative%20to%20%3Cnevow%3Aattr%3E&In-Reply-To=20041019095148.GA4892%40frobozz"
       TITLE="[Twisted-web] Alternative to &lt;nevow:attr&gt;">dp at divmod.org
       </A><BR>
    <I>Tue Oct 19 14:19:51 MDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000768.html">[Twisted-web] Alternative to &lt;nevow:attr&gt;
</A></li>
        <LI>Next message: <A HREF="000753.html">[Twisted-web] Alternative to &lt;nevow:attr&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#757">[ date ]</a>
              <a href="thread.html#757">[ thread ]</a>
              <a href="subject.html#757">[ subject ]</a>
              <a href="author.html#757">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Oct 19, 2004, at 2:51 AM, Andrew Bennetts wrote:
&gt;<i> TAL does allow this, in two ways (that I know of):
</I>&gt;<i>
</I>&gt;<i> First, there's the hackish way:
</I>&gt;<i>
</I>&gt;<i>     &lt;a tal:attributes=&quot;href python:'/users/' + context/username + 
</I>&gt;<i> '/images'&quot;
</I>&gt;<i>      /&gt;
</I>&gt;<i>
</I>&gt;<i> The second way is to put this sort of complex code a view:
</I>&gt;<i>
</I>&gt;<i>     class ViewBlah:
</I>&gt;<i>         def __init__(self, context, request):
</I>&gt;<i>             self.context = context
</I>&gt;<i>             self.request = request
</I>&gt;<i>         def imagesPath(self):
</I>&gt;<i>             return '/users/' + self.context.username + '/images'
</I>&gt;<i>
</I>&gt;<i> then you can do:
</I>&gt;<i>
</I>&gt;<i>     &lt;a tal:attributes=&quot;href view/imagesPath&quot; /&gt;
</I>
Which is exactly what Nevow allows you to do very easily, as well. 
Currently, if you want to put this type of information in python code, 
you can use a technique similar to your second example:

def render_imagesPath(self, ctx, username):
	return ctx.tag(href=['/users/', username, '/images'])

If you'd rather put that information in the template, you can do it 
using nevow:attr:

&lt;a&gt;&lt;nevow:attr name=&quot;href&quot;&gt;/users/&lt;nevow:slot name=&quot;username&quot; 
/&gt;/images&lt;/nevow:attr&gt;&lt;/a&gt;

Again, the reason I arrived at this syntax is because it doesn't 
require you to learn any new substitution syntax and the full range of 
nevow functionality is available. It's consistent.

I don't see what the huge advantage of dreid's proposed 
nevow:attributes syntax is, in fact I'm not even sure how it would 
work. I'm against it mostly because it's another mechanism users have 
to learn, and is only useful for one small use case.

Another possibility is a python renderer:

&lt;a nevow:render=&quot;python ctx.tag(href=[&quot;/users/&quot;, slot('username'), 
&quot;/images&quot;])&quot; /&gt;

The implementation would be pretty simple:

def render_python(self, ctx, code):
	def evalIt(ctx, data):
		return eval(code, {'ctx': ctx, 'data': data})
	return evalIt

dp


</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000768.html">[Twisted-web] Alternative to &lt;nevow:attr&gt;
</A></li>
	<LI>Next message: <A HREF="000753.html">[Twisted-web] Alternative to &lt;nevow:attr&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#757">[ date ]</a>
              <a href="thread.html#757">[ thread ]</a>
              <a href="subject.html#757">[ subject ]</a>
              <a href="author.html#757">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
