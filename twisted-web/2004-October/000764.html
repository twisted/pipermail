<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Alternative to &lt;nevow:attr&gt;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Alternative%20to%20%3Cnevow%3Aattr%3E&In-Reply-To=20041019210611.GA5213%40frobozz">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000758.html">
   <LINK REL="Next"  HREF="000765.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Alternative to &lt;nevow:attr&gt;</H1>
    <B>Matt Goodall</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Alternative%20to%20%3Cnevow%3Aattr%3E&In-Reply-To=20041019210611.GA5213%40frobozz"
       TITLE="[Twisted-web] Alternative to &lt;nevow:attr&gt;">matt at pollenation.net
       </A><BR>
    <I>Wed Oct 20 03:26:36 MDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000758.html">[Twisted-web] Alternative to &lt;nevow:attr&gt;
</A></li>
        <LI>Next message: <A HREF="000765.html">[Twisted-web] Alternative to &lt;nevow:attr&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#764">[ date ]</a>
              <a href="thread.html#764">[ thread ]</a>
              <a href="subject.html#764">[ subject ]</a>
              <a href="author.html#764">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 2004-10-19 at 23:06 +0200, Andrew Bennetts wrote:
&gt;<i> On Tue, Oct 19, 2004 at 12:10:37PM -0700, David Reid wrote:
</I>&gt;<i> &gt; On Tue, 2004-10-19 at 02:51, Andrew Bennetts wrote: 
</I>&gt;<i> &gt; &gt; TAL does allow this, in two ways (that I know of):
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; First, there's the hackish way:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; They're both hackish ways in my opinion, and the latter
</I>&gt;<i> &gt; Another alternative is for the alternative syntax to not even support
</I>&gt;<i> &gt; such behavior, and only be for the general case which would look
</I>&gt;<i> &gt; something like this:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &lt;a nevow:attributes=&quot;href=link alt=label&quot;&gt;&lt;nevow:slot name=&quot;label&quot;
</I>&gt;<i> &gt; /&gt;&lt;/a&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; (Looks an aweful lot like mg's attr.tac example, doesn't it?)
</I>[...]
&gt;<i> mg's attr.tac has this in the template:
</I>&gt;<i> 
</I>&gt;<i>     &lt;ul nevow:data=&quot;links&quot; nevow:render=&quot;sequence&quot;&gt;
</I>&gt;<i>       &lt;li nevow:pattern=&quot;item&quot; nevow:render=&quot;link&quot;&gt;&lt;a href=&quot;#&quot; nevow:render=&quot;attribute href=link,alt=label&quot;&gt;&lt;nevow:slot name=&quot;label&quot;&gt;label&lt;/nevow:slot&gt;&lt;/a&gt;&lt;/li&gt;
</I>&gt;<i>     &lt;/ul&gt;
</I>&gt;<i> 
</I>&gt;<i> I don't see what this does that is different to:
</I>
I think that was David's point, they're basically doing the same thing
with a different syntax.


&gt;<i>     &lt;ul tal:repeat=&quot;linkinfo context/links&quot;&gt;
</I>&gt;<i>       &lt;li&gt;&lt;a href=&quot;#&quot; tal:attributes=&quot;href linkinfo/link; label linkinfo/label&quot;/&gt;&lt;/li&gt;
</I>&gt;<i>     &lt;/ul&gt;
</I>&gt;<i> 
</I>&gt;<i> Although I don't totally understand why mg's attr.tac has a nevow:slot tag
</I>&gt;<i> for label and not link, as far as I can tell the ZPT I give here is
</I>&gt;<i> equivalent in concept.  Explanations and/or corrections welcome!
</I>
The attribute renderer in attr.tac example updates updates from values
in slots, i.e. href is set to the href slot and alt (yeah, it should be
label;-)) is set to the label slot. The slot *inside* the &lt;a&gt;...&lt;/a&gt; is
actually nothing to do with the attribute renderer but ensures that the
label also appears inside the element.

I don't know ZPT well enough to know if your example does exactly the
same (I can't see how it could) but that really doesn't matter for this
discussion anyway.

I should point out that most of the time, I use the &lt;n:attr ...
&gt;<i>&lt;n:slot ...&gt;&lt;/n:attr&gt; syntax because it's always there and it's more
</I>flexible. I wrote the attr.tac more as an example of how one might
implement something like this using a renderer although it does have the
benefit of being compact for really simple stuff.

&gt;<i> 
</I>&gt;<i> Of course, my ZPT examples requires that the code would require there to be
</I>&gt;<i> a linkinfo class, e.g.
</I>&gt;<i> 
</I>&gt;<i>     class LinkInfo:
</I>&gt;<i>         def __init__(self, link, label):
</I>&gt;<i>             self.link = link
</I>&gt;<i>             self.label = label
</I>&gt;<i> 
</I>&gt;<i> And context/links would just be a list of these.  I don't see this as being
</I>&gt;<i> any more complex than what attr.tac does, though.
</I>
This is probably the right way with Nevow too. The difference with Nevow
is that Nevow refuses to look inside objects it doesn't understand by
default so it would never use getattr unless explicitly told to.

You can tell Nevow how to look inside objects by registering a
inevow.IContainer adapter. We've talked about providing a IContainer
adapter that does getattr magic in Nevow but it would be up to the
developer to register the adapter for specific types.

&gt;<i> 
</I>&gt;<i> If nothing else, I hope this discussion can serve as the basis for a &quot;Nevow for
</I>&gt;<i> ZPT users&quot; tutorial.
</I>
I guess I should learn ZPT properly sometime, just to get another angle
on all this.

Cheers, Matt

-- 
     __
    /  \__     Matt Goodall, Pollenation Internet Ltd
    \__/  \    w: <A HREF="http://www.pollenation.net">http://www.pollenation.net</A>
  __/  \__/    e: <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">matt at pollenation.net</A>
 /  \__/  \    t: +44 (0)113 2252500
 \__/  \__/
 /  \          Any views expressed are my own and do not necessarily
 \__/          reflect the views of my employer.


</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000758.html">[Twisted-web] Alternative to &lt;nevow:attr&gt;
</A></li>
	<LI>Next message: <A HREF="000765.html">[Twisted-web] Alternative to &lt;nevow:attr&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#764">[ date ]</a>
              <a href="thread.html#764">[ thread ]</a>
              <a href="subject.html#764">[ subject ]</a>
              <a href="author.html#764">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
