<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> Comparison with ZPT [Was: [Twisted-web] Sub-tag level templating in
	Nevow: possible?]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Comparison%20with%20ZPT%20%5BWas%3A%20%5BTwisted-web%5D%20Sub-tag%20level%20templating%20in%0A%09Nevow%3A%20possible%3F%5D&In-Reply-To=1097441846.4735.42.camel%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000732.html">
   <LINK REL="Next"  HREF="000735.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Comparison with ZPT [Was: [Twisted-web] Sub-tag level templating in
	Nevow: possible?]</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Comparison%20with%20ZPT%20%5BWas%3A%20%5BTwisted-web%5D%20Sub-tag%20level%20templating%20in%0A%09Nevow%3A%20possible%3F%5D&In-Reply-To=1097441846.4735.42.camel%40localhost.localdomain"
       TITLE="Comparison with ZPT [Was: [Twisted-web] Sub-tag level templating in
	Nevow: possible?]">andrew-twisted at puzzling.org
       </A><BR>
    <I>Sun Oct 10 15:29:14 MDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000732.html">[Twisted-web] Sub-tag level templating in Nevow: possible?
</A></li>
        <LI>Next message: <A HREF="000735.html">[Twisted-web] request.getHost() warning message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#733">[ date ]</a>
              <a href="thread.html#733">[ thread ]</a>
              <a href="subject.html#733">[ subject ]</a>
              <a href="author.html#733">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Oct 10, 2004 at 09:57:26PM +0100, Matt Goodall wrote:
[...]
&gt;<i> 
</I>&gt;<i> Yes, this is what slots are for ...
</I>&gt;<i> 
</I>&gt;<i> Your template should look something like this:
</I>&gt;<i> 
</I>&gt;<i>         &lt;a href=&quot;#&quot; n:render=&quot;category&quot;&gt;&lt;n:attr name=&quot;href&quot;&gt;&lt;n:slot
</I>&gt;<i>         name=&quot;link&quot;/&gt;&lt;/n:attr&gt;Category: &lt;n:slot name=&quot;name&quot;/&gt;&lt;/a&gt;
</I>
Pardon me for hijacking the discussion like this when I barely know
Nevow, and have relatively limited knowledge of Zope Page Templates (ZPT)...

This looks much more verbose than the ZPT way of setting attributes:

    &lt;a tal:attributes=&quot;href context/link&quot;&gt;Category: &lt;span 
    tal:replace=&quot;context/name&quot; /&gt;&lt;/a&gt;

[The tal:replace isn't relevant to setting the attribute, I'm just doing
that for completeness sake with the Nevow example].

Here &quot;context/link&quot; could be an TALES expression, of course.

Multiple attributes can be set with, e.g.:

    &lt;a tal:attributes=&quot;href foo; class bar&quot;&gt;...&lt;/a&gt;

&gt;<i> The &quot;contract&quot; between the HTML template and the render method is to
</I>&gt;<i> provide (at least) the two slots 'link' and 'name'. Your renderer should
</I>&gt;<i> therefore look something:
</I>&gt;<i> 
</I>&gt;<i>         def render_category(self, ctx, data):
</I>&gt;<i>             ctx.tag.fillSlots('link', data)
</I>&gt;<i>             ctx.tag.fillSlots('name', data)
</I>&gt;<i>             return ctx.tag
</I>&gt;<i> 
</I>&gt;<i> As you can see, the render method provides the information but has no
</I>&gt;<i> idea how it is used; the template expects the slots to be filled but it
</I>&gt;<i> can do anything it wants with the information.
</I>
In Zope 3, the contract is specified by an interface.  Somewhere, usually in
ZCML, you declare what interfaces are allowed to be accessed on what content
types when rendering (or publishing in general, I guess).  You can also
define view classes (which are adapters that adapt a request and a context)
if you want to define display logic that doesn't belong with your business
logic (such as helper methods for generating HTML, or form processing), and
again the contract here is controlled by interfaces.

This is a very nice model -- interfaces are designed to be contracts, after
all.  

I mention all this because I suspect that in many ways ZPT and Nevow are 
quite similar, and it would be good if they could cross-pollinate,
particularly if it helps users of one shift to the other.  The easier it is
for ZPT users to play with Nevow, the better :)

So, I guess this suggests two questions:
  - is it possible to make the attribute-setting syntax in Nevow nicer by
    borrowing ZPT's syntax for it?
  - is it possible to use interfaces to define contracts between templates
    and renders in Nevow? (so as to make it easier for people to shift from
    the Zope 3 model and back)

-Andrew.


</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000732.html">[Twisted-web] Sub-tag level templating in Nevow: possible?
</A></li>
	<LI>Next message: <A HREF="000735.html">[Twisted-web] request.getHost() warning message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#733">[ date ]</a>
              <a href="thread.html#733">[ thread ]</a>
              <a href="subject.html#733">[ subject ]</a>
              <a href="author.html#733">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
