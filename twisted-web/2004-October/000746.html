<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Re: [Web-SIG] A more Twisted approach to
	async apps in WSGI
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Re%3A%20%5BWeb-SIG%5D%20A%20more%20Twisted%20approach%20to%0A%09async%20apps%20in%20WSGI&In-Reply-To=C2ABAA9E-1EBD-11D9-AAA6-000A95A50FB2%40fuhm.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000745.html">
   <LINK REL="Next"  HREF="000725.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Re: [Web-SIG] A more Twisted approach to
	async apps in WSGI</H1>
    <B>Phillip J. Eby</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Re%3A%20%5BWeb-SIG%5D%20A%20more%20Twisted%20approach%20to%0A%09async%20apps%20in%20WSGI&In-Reply-To=C2ABAA9E-1EBD-11D9-AAA6-000A95A50FB2%40fuhm.net"
       TITLE="[Twisted-web] Re: [Web-SIG] A more Twisted approach to
	async apps in WSGI">pje at telecommunity.com
       </A><BR>
    <I>Fri Oct 15 09:52:58 MDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000745.html">[Twisted-web] Re: [Web-SIG] A more Twisted approach to async apps
	in WSGI
</A></li>
        <LI>Next message: <A HREF="000725.html">[Twisted-web] Trivial diff -- automatically adapt renderers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#746">[ date ]</a>
              <a href="thread.html#746">[ thread ]</a>
              <a href="subject.html#746">[ subject ]</a>
              <a href="author.html#746">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 11:20 AM 10/15/04 -0400, James Y Knight wrote:

&gt;<i>On Oct 7, 2004, at 1:28 AM, Phillip J. Eby wrote:
</I>&gt;&gt;<i>By the way, after all this discussion...  do you think it would be better to:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>1) Push towards a full async API, nailing down all these loose ends
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>2) Use the simple-but-klugdy &quot;pause iteration&quot; API idea
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>3) Don't make an &quot;official&quot; async API, and just leave it open to server 
</I>&gt;&gt;<i>authors to create their own extensions, and maybe cherry pick the best 
</I>&gt;&gt;<i>ideas for WSGI 2.0, or
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>4) Do something else altogether?
</I>&gt;<i>
</I>&gt;<i>I think the API you've outlined sounds good. I can imagine ways to 
</I>&gt;<i>implement it both for an async server like twisted, and as a compatibility 
</I>&gt;<i>layer for an async-requiring application on a sync server. I think it's 
</I>&gt;<i>easier to make the compatibility layer with this API than with the 
</I>&gt;<i>pause/resume API.  However, I would be quite wary of including it in the 
</I>&gt;<i>final spec without it being implemented first.
</I>
Right, this is one reason I'm thinking that #3 might be a good idea, 
although it'd probably be more like 1.1 than 2.0.  Or really, it would just 
be an optional extension available under 1.0.  Even if we finalize the 1.0 
spec, nothing stops us from adding optional extensions that don't alter the 
existing required semantics.


&gt;<i>Another question is: what is the current use for it? Does anyone want to 
</I>&gt;<i>write untwisted async web applications?
</I>
Right.  That's the really big issue, and another reason why saying, &quot;let's 
wait for implementations&quot; might be a good idea.  That is, if people 
implement something, there's clearly a market for it.  If they don't, maybe 
we don't need it.


&gt;<i>My current interest in WSGI is basically on the &quot;plug twisted web into 
</I>&gt;<i>another webserver as an application&quot; side of things. I wouldn't want to 
</I>&gt;<i>write an application to WSGI (without a framework on top)... If everyone 
</I>&gt;<i>else feels that way, an async API may not be actually useful until there 
</I>&gt;<i>is some other Async-WSGI web server that you could plug twisted framework 
</I>&gt;<i>stuff on top of, or some other async framework you can plug on top of the 
</I>&gt;<i>twisted server.
</I>
Yep, that's the issue alright.  It seems that the common usecase for an 
async web app is going to boil down to: &quot;do you want to proxy your Twisted 
app from some other web server?&quot;  Because let's face it, Twisted's process 
model isn't really a match for say, the Apache prefork model, or CGI.

ISTM, then, that the useful thing to write would be a synchronous 
WSGI-&gt;HTTP &quot;application&quot; object.  That would allow Twisted or any other 
async server (or really any HTTP server at all) to be treated as a WSGI 
application, thus letting async apps join the WSGI party without forcing 
them to give up any asyncness or to have to do other really horrid things 
to fit.

With a little more sophistication, such an application component could 
perhaps actually spawn the async server if it's not running, by checking a 
pid file or some such.  Or that could be middleware; you have a &quot;server 
starter&quot; middleware that just ensures the server is running before it 
passes the request down to the proxy middleware.


&gt;<i>As for postponing until WSGI 2.0, I would hope there doesn't need to be a 
</I>&gt;<i>WSGI 2.0, though, since the interface is so darn simple. ;) But it could 
</I>&gt;<i>be in a separate WSGI async addons.
</I>
Technically, I don't think finalizing the base specification would prevent 
us from amending the PEP to add optional features even to 1.0.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000745.html">[Twisted-web] Re: [Web-SIG] A more Twisted approach to async apps
	in WSGI
</A></li>
	<LI>Next message: <A HREF="000725.html">[Twisted-web] Trivial diff -- automatically adapt renderers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#746">[ date ]</a>
              <a href="thread.html#746">[ thread ]</a>
              <a href="subject.html#746">[ subject ]</a>
              <a href="author.html#746">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
