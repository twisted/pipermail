<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Alternative to &lt;nevow:attr&gt;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Alternative%20to%20%3Cnevow%3Aattr%3E&In-Reply-To=1098264396.22920.31.camel%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000764.html">
   <LINK REL="Next"  HREF="000768.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Alternative to &lt;nevow:attr&gt;</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Alternative%20to%20%3Cnevow%3Aattr%3E&In-Reply-To=1098264396.22920.31.camel%40localhost.localdomain"
       TITLE="[Twisted-web] Alternative to &lt;nevow:attr&gt;">andrew-twisted at puzzling.org
       </A><BR>
    <I>Wed Oct 20 06:01:36 MDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000764.html">[Twisted-web] Alternative to &lt;nevow:attr&gt;
</A></li>
        <LI>Next message: <A HREF="000768.html">[Twisted-web] Alternative to &lt;nevow:attr&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#765">[ date ]</a>
              <a href="thread.html#765">[ thread ]</a>
              <a href="subject.html#765">[ subject ]</a>
              <a href="author.html#765">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Oct 20, 2004 at 10:26:36AM +0100, Matt Goodall wrote:
&gt;<i> On Tue, 2004-10-19 at 23:06 +0200, Andrew Bennetts wrote:
</I>[...]
&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt;     &lt;ul tal:repeat=&quot;linkinfo context/links&quot;&gt;
</I>&gt;<i> &gt;       &lt;li&gt;&lt;a href=&quot;#&quot; tal:attributes=&quot;href linkinfo/link; label linkinfo/label&quot;/&gt;&lt;/li&gt;
</I>&gt;<i> &gt;     &lt;/ul&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Although I don't totally understand why mg's attr.tac has a nevow:slot tag
</I>&gt;<i> &gt; for label and not link, as far as I can tell the ZPT I give here is
</I>&gt;<i> &gt; equivalent in concept.  Explanations and/or corrections welcome!
</I>&gt;<i> 
</I>&gt;<i> The attribute renderer in attr.tac example updates updates from values
</I>&gt;<i> in slots, i.e. href is set to the href slot and alt (yeah, it should be
</I>&gt;<i> label;-)) is set to the label slot. The slot *inside* the &lt;a&gt;...&lt;/a&gt; is
</I>&gt;<i> actually nothing to do with the attribute renderer but ensures that the
</I>&gt;<i> label also appears inside the element.
</I>
Oh, right.  I get it now, duh :)

&gt;<i> I don't know ZPT well enough to know if your example does exactly the
</I>&gt;<i> same (I can't see how it could) but that really doesn't matter for this
</I>&gt;<i> discussion anyway.
</I>
My ZPT to be equivalent should be:

    &lt;ul tal:repeat=&quot;linkinfo context/links&quot;&gt;
      &lt;li&gt;&lt;a href=&quot;#&quot; tal:attributes=&quot;href linkinfo/link; alt linkinfo/label&quot;
             tal:content=&quot;linkinfo/label&quot;/&gt;Label will go here&lt;/li&gt;
    &lt;/ul&gt;

I think it's a shame that no-one seems to know both ZPT and Nevow, as I
suspect there may be something they can learn from each other, as they have
some similar goals.  I'd like to learn Nevow (although I'm really no ZPT
expert), but time is always the problem...

&gt;<i> I should point out that most of the time, I use the &lt;n:attr ...
</I>&gt;<i> &gt;&lt;n:slot ...&gt;&lt;/n:attr&gt; syntax because it's always there and it's more
</I>&gt;<i> flexible. I wrote the attr.tac more as an example of how one might
</I>&gt;<i> implement something like this using a renderer although it does have the
</I>&gt;<i> benefit of being compact for really simple stuff.
</I>&gt;<i> 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Of course, my ZPT examples requires that the code would require there to be
</I>&gt;<i> &gt; a linkinfo class, e.g.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;     class LinkInfo:
</I>&gt;<i> &gt;         def __init__(self, link, label):
</I>&gt;<i> &gt;             self.link = link
</I>&gt;<i> &gt;             self.label = label
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; And context/links would just be a list of these.  I don't see this as being
</I>&gt;<i> &gt; any more complex than what attr.tac does, though.
</I>&gt;<i> 
</I>&gt;<i> This is probably the right way with Nevow too. The difference with Nevow
</I>&gt;<i> is that Nevow refuses to look inside objects it doesn't understand by
</I>&gt;<i> default so it would never use getattr unless explicitly told to.
</I>
I don't know exactly where this happens in Zope 3, but it won't by default
either.  So, the code would look more like this:

    from zope.interface import Interface, Attribute, implements

    class ILinkInfo(Interface):
        link = Attribute('URI that a link points to')
        label = Attribute('Short description of the link')

    class LinkInfo:
        implements(ILinkInfo)
        ...

And then usually in a ZCML file say that ZPT (or really the publisher in
general) is allowed to access attributes and methods defined in ILinkInfo.

&gt;<i> You can tell Nevow how to look inside objects by registering a
</I>&gt;<i> inevow.IContainer adapter. We've talked about providing a IContainer
</I>&gt;<i> adapter that does getattr magic in Nevow but it would be up to the
</I>&gt;<i> developer to register the adapter for specific types.
</I>
I see.  This seems essentially equivalent to the ZPT way -- registering an
adapter from ILinkInfo to IContainer.  Zope does things via security
declarations because there's a desire to allow relatively untrusted sources
to write page templates, I guess.  There's more in common here than
different, though :)

&gt;<i> &gt; If nothing else, I hope this discussion can serve as the basis for a &quot;Nevow for
</I>&gt;<i> &gt; ZPT users&quot; tutorial.
</I>&gt;<i> 
</I>&gt;<i> I guess I should learn ZPT properly sometime, just to get another angle
</I>&gt;<i> on all this.
</I>
And I should learn Nevow  :)

-Andrew.


</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000764.html">[Twisted-web] Alternative to &lt;nevow:attr&gt;
</A></li>
	<LI>Next message: <A HREF="000768.html">[Twisted-web] Alternative to &lt;nevow:attr&gt;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#765">[ date ]</a>
              <a href="thread.html#765">[ thread ]</a>
              <a href="subject.html#765">[ subject ]</a>
              <a href="author.html#765">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
