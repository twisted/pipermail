<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Sub-tag level templating in Nevow: possible?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Sub-tag%20level%20templating%20in%20Nevow%3A%20possible%3F&In-Reply-To=20041010194445.GC4726%40fuchsia.puzzling.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000731.html">
   <LINK REL="Next"  HREF="000733.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Sub-tag level templating in Nevow: possible?</H1>
    <B>Matt Goodall</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Sub-tag%20level%20templating%20in%20Nevow%3A%20possible%3F&In-Reply-To=20041010194445.GC4726%40fuchsia.puzzling.org"
       TITLE="[Twisted-web] Sub-tag level templating in Nevow: possible?">matt at pollenation.net
       </A><BR>
    <I>Sun Oct 10 14:57:26 MDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000731.html">[Twisted-web] Sub-tag level templating in Nevow: possible?
</A></li>
        <LI>Next message: <A HREF="000733.html">Comparison with ZPT [Was: [Twisted-web] Sub-tag level templating in
	Nevow: possible?]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#732">[ date ]</a>
              <a href="thread.html#732">[ thread ]</a>
              <a href="subject.html#732">[ subject ]</a>
              <a href="author.html#732">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 2004-10-10 at 21:44 +0200, Mary Gardiner wrote:
&gt;<i> I have a use-case for sub-tag level templating in Nevow.
</I>&gt;<i> 
</I>&gt;<i> Imagine that for some reason I have a list of categories that I want to
</I>&gt;<i> link to. I might want to link to them like this:
</I>&gt;<i> 
</I>&gt;<i>     &lt;a href=&quot;catname1&quot;&gt;catname1&lt;/a&gt;
</I>&gt;<i>     &lt;a href=&quot;catname2&quot;&gt;catname2&lt;/a&gt;
</I>&gt;<i>     &lt;a href=&quot;catname3&quot;&gt;catname3&lt;/a&gt;
</I>&gt;<i> 
</I>&gt;<i> Or I might want to link to them like this:
</I>&gt;<i> 
</I>&gt;<i>     &lt;a href=&quot;catname1&quot;&gt;Category catname1&lt;/a&gt;
</I>&gt;<i>     &lt;a href=&quot;catname2&quot;&gt;Category catname2&lt;/a&gt;
</I>&gt;<i>     &lt;a href=&quot;catname3&quot;&gt;Category catname3&lt;/a&gt;
</I>&gt;<i> 
</I>&gt;<i> As best I can tell, the only way to do this is by changing a render_
</I>&gt;<i> method to be either:
</I>&gt;<i> 
</I>&gt;<i>     render_atag(self, ctx, data):
</I>&gt;<i>         return ctx.tag(href=data)[data]
</I>&gt;<i> 
</I>&gt;<i> or
</I>&gt;<i>     
</I>&gt;<i>     render_atag(self, ctx, data):
</I>&gt;<i>         return ctx.tag(href=data)[&quot;Category: &quot; + data]
</I>&gt;<i> 
</I>&gt;<i> I'd prefer to specify it in an HTML template rather than the Python code for
</I>&gt;<i> various reasons (for starters, it isn't &quot;business logic&quot;, it's a design
</I>&gt;<i> choice). Is there any way to do that?
</I>
Yes, this is what slots are for ...

Your template should look something like this:

        &lt;a href=&quot;#&quot; n:render=&quot;category&quot;&gt;&lt;n:attr name=&quot;href&quot;&gt;&lt;n:slot
        name=&quot;link&quot;/&gt;&lt;/n:attr&gt;Category: &lt;n:slot name=&quot;name&quot;/&gt;&lt;/a&gt;

The &quot;contract&quot; between the HTML template and the render method is to
provide (at least) the two slots 'link' and 'name'. Your renderer should
therefore look something:

        def render_category(self, ctx, data):
            ctx.tag.fillSlots('link', data)
            ctx.tag.fillSlots('name', data)
            return ctx.tag

As you can see, the render method provides the information but has no
idea how it is used; the template expects the slots to be filled but it
can do anything it wants with the information.

You can now change the template to the following, without affecting the
renderer, if you wanted to:

        &lt;p n:render=&quot;category&quot;&gt;I was provided with '&lt;n:slot
        name=&quot;link&quot; /&gt;' as a link and '&lt;n:slot name=&quot;name&quot; /&gt;' as the
        name.&lt;/p&gt;

Judging by your example, you only need a single slot in which case just
use the same slot name in both places in the template and change the
renderer to fill only one. Note: your renderer is allowed to fill too
many slots as long as everything the template needs is provided.

Hope this helps.

Cheers, Matt

-- 
Matt Goodall &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">matt at pollenation.net</A>&gt;


</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000731.html">[Twisted-web] Sub-tag level templating in Nevow: possible?
</A></li>
	<LI>Next message: <A HREF="000733.html">Comparison with ZPT [Was: [Twisted-web] Sub-tag level templating in
	Nevow: possible?]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#732">[ date ]</a>
              <a href="thread.html#732">[ thread ]</a>
              <a href="subject.html#732">[ subject ]</a>
              <a href="author.html#732">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
