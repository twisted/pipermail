<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] [Nevow] template performance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20%5BNevow%5D%20template%20performance&In-Reply-To=4582C06F.50605%40libero.it">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003214.html">
   <LINK REL="Next"  HREF="003216.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] [Nevow] template performance</H1>
    <B>L. Daniel Burr</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20%5BNevow%5D%20template%20performance&In-Reply-To=4582C06F.50605%40libero.it"
       TITLE="[Twisted-web] [Nevow] template performance">ldanielburr at mac.com
       </A><BR>
    <I>Fri Dec 15 09:55:16 CST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="003214.html">[Twisted-web] [Nevow] template performance
</A></li>
        <LI>Next message: <A HREF="003216.html">[Twisted-web] [Nevow] template performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3218">[ date ]</a>
              <a href="thread.html#3218">[ thread ]</a>
              <a href="subject.html#3218">[ subject ]</a>
              <a href="author.html#3218">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 15 Dec 2006 09:34:07 -0600, Manlio Perillo  
&lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">manlio_perillo at libero.it</A>&gt; wrote:

&gt;<i> L. Daniel Burr ha scritto:
</I>&gt;&gt;<i> [...]
</I>&gt;&gt;<i> Re-writing rend,Page and flat to improve execution speed would most
</I>&gt;&gt;<i> certainly be considered optimization.
</I>&gt;<i>
</I>&gt;<i> Ok, lets consider it an optimization.
</I>&gt;<i>
</I>&gt;&gt;<i> Note that I am confident that we'd all like Nevow to be faster, but
</I>&gt;&gt;<i> optimization requires a lot more than just a cursory analysis.  I
</I>&gt;&gt;<i> get the impression from reading your post that you think your
</I>&gt;&gt;<i> request is simple/trivial, and perhaps it seems that way, but there
</I>&gt;&gt;<i> is a lot more to this.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> My first question was:
</I>&gt;<i> &quot;Is it possible to use that same model used by django.template?&quot;
</I>&gt;<i>
</I>
Sure, but you posed that question for a reason.  You didn't ask it
because you thought it would be fun, you asked it because you found
django to be faster, and wanted to use the same technique as django
in order to make nevow faster.

&gt;<i> I have posted my test results only later.
</I>&gt;<i>
</I>
See above.  You wouldn't have asked the question if you didn't want
an optimization to be performed.

&gt;&gt;<i> What you have done, so far, is to measure raw serialization speed,
</I>&gt;&gt;<i> and in so doing, you've found that Django is faster.  That part
</I>&gt;&gt;<i> is fine, but the conclusion you've drawn is questionable.  Do you
</I>&gt;&gt;<i> know if the difference in speed actually makes any difference in
</I>&gt;&gt;<i> a real web application?  I'll bet that other factors, such as
</I>&gt;&gt;<i> database access and network latency generally account for the
</I>&gt;&gt;<i> majority of time that it takes for a request to be serviced.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The first test I have done was to compare the two web servers (Nevow +  
</I>&gt;<i> Twisted Web and Django + Lighttpd), obtaining the random data from a  
</I>&gt;<i> database.
</I>&gt;<i>
</I>&gt;<i> Again, Nevow was much slower than Django.
</I>&gt;<i>
</I>
Ok, that's great.  Can you please provide the numbers?  What was the
concurrency level used?

&gt;&gt;<i> Please understand, I am not trying to offend you or tell you that
</I>&gt;&gt;<i> Nevow doesn't need improving; everyone agrees that it could be a
</I>&gt;&gt;<i> lot better.  I am just trying to point out that your observations
</I>&gt;&gt;<i> regarding serialization speed have not been made in a context that
</I>&gt;&gt;<i> demonstrates a serious need to rewrite rend.Page and flat.flatten.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I ask again: Nevow uses a lot of object adaptation.
</I>&gt;<i> Is this really necessary?
</I>&gt;<i>
</I>
Please google for posts to this list regarding adaptation and various
rendering-speed concerns by one Andrea Arcangeli.  In his case, he
found Cheetah to be much faster than Nevow, just as you found Django
to be much faster than Nevow.  The long and short of it is that yes,
object adaptation is more expensive that not using any adaptation
at all.

The real question is, do you care enough to become familiar with the
branch in which the context-removal changes are being made, and to
help in moving that work forward?

&gt;<i>
</I>&gt;<i> Regards  Manlio Perillo
</I>&gt;<i>
</I>
Hope this helps,

L. Daniel Burr

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003214.html">[Twisted-web] [Nevow] template performance
</A></li>
	<LI>Next message: <A HREF="003216.html">[Twisted-web] [Nevow] template performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3218">[ date ]</a>
              <a href="thread.html#3218">[ thread ]</a>
              <a href="subject.html#3218">[ subject ]</a>
              <a href="author.html#3218">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
