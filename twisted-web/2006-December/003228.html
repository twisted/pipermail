<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] [Nevow] template performance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20%5BNevow%5D%20template%20performance&In-Reply-To=4582EACD.6080404%40libero.it">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003227.html">
   <LINK REL="Next"  HREF="003229.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] [Nevow] template performance</H1>
    <B>L. Daniel Burr</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20%5BNevow%5D%20template%20performance&In-Reply-To=4582EACD.6080404%40libero.it"
       TITLE="[Twisted-web] [Nevow] template performance">ldanielburr at mac.com
       </A><BR>
    <I>Fri Dec 15 12:56:02 CST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="003227.html">[Twisted-web] [Nevow] template performance
</A></li>
        <LI>Next message: <A HREF="003229.html">[Twisted-web] [Nevow] template performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3228">[ date ]</a>
              <a href="thread.html#3228">[ thread ]</a>
              <a href="subject.html#3228">[ subject ]</a>
              <a href="author.html#3228">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 15 Dec 2006 12:34:53 -0600, Manlio Perillo  
&lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">manlio_perillo at libero.it</A>&gt; wrote:
[...]
&gt;<i>
</I>&gt;<i> The point is that in the template it should be &quot;visible&quot; the XHTML that  
</I>&gt;<i> will result.
</I>&gt;<i>
</I>&gt;<i> As an example, this code:
</I>&gt;<i>
</I>&gt;<i>            &lt;ul nevow:pattern=&quot;sums-container&quot;&gt;
</I>&gt;<i> 	    &lt;nevow:slot name=&quot;elements&quot; /&gt;
</I>&gt;<i> 	  &lt;/ul&gt;
</I>&gt;<i> 	  &lt;li nevow:pattern=&quot;sums-element&quot;&gt;
</I>&gt;<i> 	    &lt;nevow:slot name=&quot;date&quot; /&gt;
</I>&gt;<i> 	    &lt;nevow:slot name=&quot;value&quot; /&gt;
</I>&gt;<i> 	  &lt;/li&gt;
</I>&gt;<i>   	
</I>&gt;<i>   	  &lt;ul nevow:pattern=&quot;methods-container&quot;&gt;
</I>&gt;<i>   	    &lt;nevow:slot name=&quot;elements&quot; /&gt;
</I>&gt;<i>   	  &lt;/ul&gt;
</I>&gt;<i>   	  &lt;li nevow:pattern=&quot;methods-element&quot;&gt;
</I>&gt;<i>   	    &lt;nevow:slot name=&quot;method&quot; /&gt;
</I>&gt;<i>   	    &lt;nevow:slot name=&quot;value&quot; /&gt;
</I>&gt;<i>   	  &lt;/li&gt;
</I>&gt;<i>   	
</I>&gt;<i>   	  &lt;div&gt;
</I>&gt;<i>   	    Wallclock duration totals (seconds)
</I>&gt;<i>   	    &lt;nevow:invisible nevow:render=&quot;totalWallClock&quot; /&gt;
</I>&gt;<i>   	  &lt;/div&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> give me no clue on how the renderized page will look.
</I>&gt;<i>
</I>
Sure, but that is nothing like the example I provided you.
In my example, it is clear that the header row contains
1 or more th elements, and that the tbody element will
contain 1 or more tr elements, each having 1 or more td
elements.

I agree that your example above doesn't read as clearly,
but I'm sure you can write that in a style similar to
what I used for the table example.

&gt;<i>
</I>&gt;&gt;<i> Moreover, you've embedded iteration logic in the Django
</I>&gt;&gt;<i> template, so if some idea of &quot;XHTML purity&quot; is driving you,
</I>&gt;&gt;<i> the the Django approach, while faster, is less pure.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Nevow has a better solution: the sequence renderer.
</I>&gt;<i> But it will go away.
</I>&gt;<i>
</I>
The sequence renderer is basically doing the same thing
as the code I used in the &quot;headers&quot; and &quot;rows&quot; methods.
We aren't talking about some large class/function that
is complicated to reproduce.  Adding a sequence renderer
that complies with the upcoming changes to nevow is not
going to be difficult.

Even if no direct substitute is provided, nothing is
stopping you from adding your own, or better yet, being
the person to contribute a new sequence renderer.  I think
it would be a good thing to do.

&gt;<i>  &gt; [...]
</I>&gt;&gt;<i>  The most important thing is to stop thinking in terms
</I>&gt;&gt;<i> of data types (render=&quot;sequence&quot;, render=&quot;string&quot;),
</I>&gt;&gt;<i> and just write render methods that deal with app-level
</I>&gt;&gt;<i> concepts (headers, rows).
</I>&gt;&gt;<i>  An important point to make here, is that the code I
</I>&gt;&gt;<i> provided above is based on the same code used to
</I>&gt;&gt;<i> implement the &quot;sequence&quot; directive, so there is really
</I>&gt;&gt;<i> nothing magical going on.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Ok, but what about reusability?
</I>&gt;<i> Now for every table (in theory) I have to reimplement the sequence logic.
</I>&gt;<i>
</I>
See above.  The existing sequence renderer is just a few lines of code,
not a magical entity.  Why reimplement it for each table?

&gt;<i> Well, I'm sure that it is possible to write generic/reusable code for  
</I>&gt;<i> rendering tables.
</I>&gt;<i>
</I>
Absolutely.  The code I provided in my example *is* a generic table
element, that you could stick in any page.  Just add some methods for
querying your DB and you have a reusable element, that will render
arbitrary data in tabular format.

&gt;<i>
</I>&gt;<i>  &gt; Hope this helps,
</I>&gt;<i>
</I>&gt;<i> Yes, thanks.
</I>&gt;<i> I will try to use slots instead of data.
</I>&gt;<i>
</I>
Slots are a good solution, because they work today, and will allow you
to switch to the context-less version of nevow when it is released,
without any major breakage.

&gt;<i>
</I>&gt;<i> P.S.
</I>&gt;<i> How tested/stable is the new(?) page module?
</I>&gt;<i>
</I>
I have used page.Element in a production environment for months now.
I switched from using rend.Fragment to page.Element as soon as it was
available, and things have worked perfectly, at least for me.

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Regards  Manlio Perillo
</I>
Hope this helps,

L. Daniel Burr

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003227.html">[Twisted-web] [Nevow] template performance
</A></li>
	<LI>Next message: <A HREF="003229.html">[Twisted-web] [Nevow] template performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3228">[ date ]</a>
              <a href="thread.html#3228">[ thread ]</a>
              <a href="subject.html#3228">[ subject ]</a>
              <a href="author.html#3228">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
