<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] How to nest LiveElements? (getting a
	MissingRenderMethod error)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20How%20to%20nest%20LiveElements%3F%20%28getting%20a%0A%09MissingRenderMethod%20error%29&In-Reply-To=200612011535.34432.iacovou%40gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003148.html">
   <LINK REL="Next"  HREF="003150.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] How to nest LiveElements? (getting a
	MissingRenderMethod error)</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20How%20to%20nest%20LiveElements%3F%20%28getting%20a%0A%09MissingRenderMethod%20error%29&In-Reply-To=200612011535.34432.iacovou%40gmail.com"
       TITLE="[Twisted-web] How to nest LiveElements? (getting a
	MissingRenderMethod error)">exarkun at divmod.com
       </A><BR>
    <I>Fri Dec  1 08:20:24 CST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="003148.html">[Twisted-web] How to nest LiveElements? (getting a
	MissingRenderMethod error)
</A></li>
        <LI>Next message: <A HREF="003150.html">[Twisted-web] How to nest LiveElements? (getting a
	MissingRenderMethod error)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3149">[ date ]</a>
              <a href="thread.html#3149">[ thread ]</a>
              <a href="subject.html#3149">[ subject ]</a>
              <a href="author.html#3149">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 1 Dec 2006 15:35:34 +0200, kgi &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">iacovou at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i>Hi there.
</I>&gt;<i>
</I>&gt;<i>I've got a web app that was originally written as a bunch of LiveElements at
</I>&gt;<i>the top level of a LivePage. I want to clean up this code and restructure it
</I>&gt;<i>such that several of the LiveElements are more modular; this entails making
</I>&gt;<i>some of the LiveElements contain other LiveElements.
</I>&gt;<i>
</I>&gt;<i>Now, I could have *sworn* I've done this before, but whatever I try to do now
</I>&gt;<i>I get a nevow.errors.MissingRenderMethod exception.
</I>&gt;<i>
</I>&gt;<i>At the end of this email is a cut-down example that exhibits the behaviour.
</I>&gt;<i>OuterWidget and InnerWidget are two LiveElement objects; they can both exist
</I>&gt;<i>happily in the LivePage, but if you uncomment the div containing an
</I>&gt;<i>innerWidget rendering directive (around line 28) you get:
</I>&gt;<i>
</I>&gt;<i>          File &quot;/usr/lib/python2.4/site-packages/nevow/flat/ten.py&quot;, line 70,
</I>&gt;<i>in serialize
</I>&gt;<i>            return partialflatten(context, obj)
</I>&gt;<i>          File &quot;/usr/lib/python2.4/site-packages/nevow/flat/ten.py&quot;, line 61,
</I>&gt;<i>in partialflatten
</I>&gt;<i>            return flattener(obj, context)
</I>&gt;<i>          File &quot;/usr/lib/python2.4/site-packages/nevow/flat/flatstan.py&quot;, line
</I>&gt;<i>261, in DirectiveSerializer
</I>&gt;<i>            renderer = rendererFactory.renderer(context, original.name)
</I>&gt;<i>          File &quot;/usr/lib/python2.4/site-packages/nevow/page.py&quot;, line 78, in
</I>&gt;<i>renderer
</I>&gt;<i>            raise MissingRenderMethod(self, name)
</I>&gt;<i>        nevow.errors.MissingRenderMethod: (&lt;OuterWidget object at
</I>&gt;<i>0xb763482c&gt;, 'innerWidget')
</I>&gt;<i>
</I>&gt;<i>Can anyone shed any light on this?
</I>&gt;<i>
</I>&gt;<i>There are also seemingly three styles for render methods that I've found. The
</I>&gt;<i>third was kind of guessed from the documentation of nevow.page.Element; I'm
</I>&gt;<i>not sure I've used it correctly, but I seem to recall reading that the
</I>&gt;<i>special &quot;render_&quot; prefixes will be going away and replaced by a renderer()
</I>&gt;<i>registration method, like the expose() method for athena callables.
</I>
All Element renderers _must_ use renderer().  All Fragment/Page renderers
_must_ use the &quot;render_&quot; prefix.  All Athena callables _must_ use expose().

No other approach will work at all.

&gt;<i>
</I>&gt;<i>Which is the preferred form?
</I>&gt;<i>
</I>&gt;<i>    def render_innerWidget ( self, ctx, data ):
</I>&gt;<i>        elem = InnerWidget()
</I>&gt;<i>        elem.setFragmentParent ( self )
</I>&gt;<i>        return elem
</I>&gt;<i>
</I>&gt;<i>   def render_innerWidget ( self, ctx, data ):
</I>&gt;<i>        elem = InnerWidget()
</I>&gt;<i>        elem.setFragmentParent ( self )
</I>&gt;<i>        return ctx.tag[f]
</I>
Either of these is usable on a Fragment or Page class.  Whether you wrap
the result in ctx.tag or not depends on whether you want to preserve the
tag on which the render directive was defined.

&gt;<i>
</I>&gt;<i>   from nevow.page import renderer
</I>&gt;<i>   def innerWidget ( self, request, tag ):
</I>&gt;<i>        elem = InnerWidget()
</I>&gt;<i>        elem.setFragmentParent ( self )
</I>&gt;<i>        return elem
</I>&gt;<i>   renderer(items)
</I>
Like the other examples, you could return ctx.tag[elem] here.  The
difference between Fragment and Element or render_* and renderer() has
no bearing on that choice.

Hope this helps,

Jean-Paul

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003148.html">[Twisted-web] How to nest LiveElements? (getting a
	MissingRenderMethod error)
</A></li>
	<LI>Next message: <A HREF="003150.html">[Twisted-web] How to nest LiveElements? (getting a
	MissingRenderMethod error)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3149">[ date ]</a>
              <a href="thread.html#3149">[ thread ]</a>
              <a href="subject.html#3149">[ subject ]</a>
              <a href="author.html#3149">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
