<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Multithread SSL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Multithread%20SSL&In-Reply-To=79ee6a400906241225x201819e7wac0d398adde19901%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004191.html">
   <LINK REL="Next"  HREF="004193.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Multithread SSL</H1>
    <B>lasizoillo</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Multithread%20SSL&In-Reply-To=79ee6a400906241225x201819e7wac0d398adde19901%40mail.gmail.com"
       TITLE="[Twisted-web] Multithread SSL">lasizoillo at gmail.com
       </A><BR>
    <I>Wed Jun 24 16:00:51 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004191.html">[Twisted-web] Multithread SSL
</A></li>
        <LI>Next message: <A HREF="004193.html">[Twisted-web] Multithread SSL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4192">[ date ]</a>
              <a href="thread.html#4192">[ thread ]</a>
              <a href="subject.html#4192">[ subject ]</a>
              <a href="author.html#4192">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2009/6/24 Yann Pomarede &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">yann.pomarede_twisted at gadz.org</A>&gt;:
&gt;<i> Thanks for your reply.
</I>&gt;<i> I already thought about that but I'll have other problems if I do so:
</I>&gt;<i> - I need some variables to be common between the instances (Maybe it's
</I>&gt;<i> not so difficult with RPC or a DB or shared memory).
</I>If you need full ACI (ACID without durability) this can be a performance issue.

&gt;<i> - I also need to keep a pool of all the outgoing the connections (to
</I>&gt;<i> perform some real time stats and to limit the number of connection per
</I>&gt;<i> user)
</I>&gt;<i>
</I>The load balancer can limit number of connections (without decipher
ssl) or agregate real time stats from web servers (for easier
management). You can upgrade code in your web app without lost service
too ;-)

&gt;<i> But if I do not have other choices, it's certainly what I'll have to do...
</I>&gt;<i>
</I>
Threads are not  the solution. Python have a GIL (Global Inter-Lock)
[1] and don't use multicore facilities. I don't know if you can do
multiprocessing with twisted. A load balancer sound more easy (and
maybe more horizontal scalable).

[1] <A HREF="http://www.dabeaz.com/python/GIL.pdf">http://www.dabeaz.com/python/GIL.pdf</A>

Excuse my poor english.

Regargs,

Javi

&gt;<i> Yann.
</I>&gt;<i>
</I>


&gt;<i> On Wed, Jun 24, 2009 at 21:08, Duncan M.
</I>&gt;<i> McGreggor&lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">duncan.mcgreggor at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> Yann Pomarede wrote:
</I>&gt;&gt;&gt;<i> Hello,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I used Twisted to write some kind of proxy and it's working great,
</I>&gt;&gt;&gt;<i> it's so easy to develop and understand.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> But I have a problem. I use SSL (on both side of this app) and the
</I>&gt;&gt;&gt;<i> bandwidth available is limited to the power of one of my CPU due to
</I>&gt;&gt;&gt;<i> the high cost of the SSL encryption.
</I>&gt;&gt;&gt;<i> I would like to use both core of my CPU to increase the bandwidth of
</I>&gt;&gt;&gt;<i> this application but it does not seem easy to do.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> # Here is the server definition in myapp.tac
</I>&gt;&gt;&gt;<i> from twisted.application import internet, service
</I>&gt;&gt;&gt;<i> application = service.Application('MyApp', uid=1001, gid=1001)
</I>&gt;&gt;&gt;<i> internet.SSLServer(80, serverFactory, MySSLContext(), 50,
</I>&gt;&gt;&gt;<i> 'xxx.xxx.xxx.xxx').setServiceParent(service.IServiceCollection(application))
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> # And here the clients connections
</I>&gt;&gt;&gt;<i> from twisted.internet import reactor, ssl
</I>&gt;&gt;&gt;<i> mySSLContext = ssl.ClientContextFactory()
</I>&gt;&gt;&gt;<i> mySSLContext.method = SSL.SSLv23_METHOD
</I>&gt;&gt;&gt;<i> reactor.connectSSL(self.HOST, self.PORT, self, mySSLContext)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Does anyone already have this kind of problem? Is there an easy way to
</I>&gt;&gt;&gt;<i> multithread the SSL encryption part?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> You could run two instances and load balance them...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> d
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Twisted-web mailing list
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">Twisted-web at twistedmatrix.com</A>
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-web mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">Twisted-web at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web</A>
</I>&gt;<i>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004191.html">[Twisted-web] Multithread SSL
</A></li>
	<LI>Next message: <A HREF="004193.html">[Twisted-web] Multithread SSL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4192">[ date ]</a>
              <a href="thread.html#4192">[ thread ]</a>
              <a href="subject.html#4192">[ subject ]</a>
              <a href="author.html#4192">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
