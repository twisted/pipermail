<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Athena javascript question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Athena%20javascript%20question&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004194.html">
   <LINK REL="Next"  HREF="004196.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Athena javascript question</H1>
    <B>Juanjo Conti</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Athena%20javascript%20question&In-Reply-To="
       TITLE="[Twisted-web] Athena javascript question">jjconti at gmail.com
       </A><BR>
    <I>Thu Jun 25 15:17:20 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004194.html">[Twisted-web] Multithread SSL
</A></li>
        <LI>Next message: <A HREF="004196.html">[Twisted-web] Athena javascript question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4195">[ date ]</a>
              <a href="thread.html#4195">[ thread ]</a>
              <a href="subject.html#4195">[ subject ]</a>
              <a href="author.html#4195">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I used Twisted to write a small server and now I am using Nevow.Athena
to write a web administrative interface. I got the tutorials running
and now I am changing it to reach what I want for my webapp.

The problem I am having is in the javascript side. Whe I try this js:

/ import Nevow.Athena

TempDisplay.TempWidget = Nevow.Athena.Widget.subclass('TempDisplay.TempWidget');

TempDisplay.TempWidget.methods(
    function __init__(self, node) {
        TempDisplay.TempWidget.upcall(self, &quot;__init__&quot;, node);

        self.tempWidget = self.nodeByAttribute('name', 'terElement');

        self.tempSalaTxt = document.createTextNode('');
        self.tempSala = self.nodeByAttribute('name', 'temp_sala')
        self.tempSala.appendChild(self.tempSalaTxt);

        self.tempRetornoTxt = document.createTextNode('');
        self.tempRetorno = self.nodeByAttribute('name', 'temp_retorno');
        self.tempRetorno.appendChild(self.tempRetornoTxt);

        self.tempExteriorTxt = document.createTextNode('');
        self.tempExterior = self.nodeByAttribute('name', 'temp_exterior');
        self.tempExterior.appendChild(self.tempExteriorTxt);
    },

    function doRead(self) {
        // ejecuta funcion read en servidor
        self.callRemote(&quot;read&quot;);
        return false;
    },

    function actualizarValores(self, data) {
        // llamada por servidor para actualizar valores
        var valores = data.split(',');

        self.tempSala.remove(self.tempSalaTxt);
        self.tempSalaTxt = document.createTextNode(valores[0]);
        self.tempSala.appendChild(self.tempSalaTxt);

        self.tempRetorno(self.tempRetornoTxt);
        self.tempRetornoTxt = document.createTextNode(valores[1]);
        self.tempRetorno.appendChild(self.tempRetornoTxt);

        self.tempExterior.remove(self.tempExteriorTxt);
        self.tempExteriorTxt = document.createTextNode(valores[2]);
        self.tempExterior.appendChild(self.tempExteriorTxt);
    });

When the functi&#243;n actualizarValores is excecuted from the server, I
get this error:

Unhandled error in Deferred:
Traceback (most recent call last):
  File &quot;c:\Python25\lib\site-packages\nevow\js\Divmod\Runtime\__init__.js&quot;, lin
 566, in ([object Event])
    d.callback(result);
--- &lt;exception caught here&gt; ---
  File &quot;c:\Python25\lib\site-packages\nevow\js\Divmod\Runtime\__init__.js&quot;, lin
 566, in ([object Event])
    d.callback(result);
  File &quot;c:\Python25\lib\site-packages\nevow\js\Divmod\__init__.js&quot;, line 249, i
 ([object Object])
    return methodFunction.apply(this, args);
  File &quot;c:\Python25\lib\site-packages\nevow\js\Divmod\Defer.js&quot;, line 258, in c
llback([object Object],[object Object])
    self._startRunCallbacks(result);
  File &quot;c:\Python25\lib\site-packages\nevow\js\Divmod\__init__.js&quot;, line 249, i
 ([object Object])
    return methodFunction.apply(this, args);
  File &quot;c:\Python25\lib\site-packages\nevow\js\Divmod\Defer.js&quot;, line 255, in _
tartRunCallbacks([object Object],[object Object])
    self._runCallbacks();
  File &quot;c:\Python25\lib\site-packages\nevow\js\Divmod\__init__.js&quot;, line 249, i
 ()
    return methodFunction.apply(this, args);
  File &quot;c:\Python25\lib\site-packages\nevow\js\Divmod\Defer.js&quot;, line 229, in _
unCallbacks([object Object])
    self._result = callback.apply(null, args);
  File &quot;c:\Python25\lib\site-packages\nevow\js\Nevow\Athena\__init__.js&quot;, line
92, in ([object Array])
    self.messageReceived(result[1]);
  File &quot;c:\Python25\lib\site-packages\nevow\js\Divmod\__init__.js&quot;, line 249, i
 ([object Array])
    return methodFunction.apply(this, args);
  File &quot;c:\Python25\lib\site-packages\nevow\js\Nevow\Athena\__init__.js&quot;, line
35, in messageReceived([object Object],[object Array])
    self.page['action_'+actionName].apply(self.page, actionArgs);
  File &quot;c:\Python25\lib\site-packages\nevow\js\Divmod\__init__.js&quot;, line 249, i
 (&quot;Nevow.Athena.callByAthenaID&quot;,&quot;s2c0&quot;,[object Array])
    return methodFunction.apply(this, args);
  File &quot;c:\Python25\lib\site-packages\nevow\js\Nevow\Athena\__init__.js&quot;, line
48, in action_call([object Object],&quot;Nevow.Athena.callByAthenaID&quot;,&quot;s2c0&quot;,[object
Array])
    result = method.apply(target, funcArgs);
  File &quot;c:\Python25\lib\site-packages\nevow\js\Nevow\Athena\__init__.js&quot;, line
259, in (1,&quot;actualizarValores&quot;,[object Array])
    return method.apply(widget, varargs);
  File &quot;c:\Python25\lib\site-packages\nevow\js\Divmod\__init__.js&quot;, line 249, i
 (&quot;21.4,27.8,31.8&quot;)
    return methodFunction.apply(this, args);
  File &quot;C:\Documents and Settings\Teco2006\Escritorio\line\js\TempDisplay.js&quot;,
ine 34, in actualizarValores([object Object],&quot;21.4,27.8,31.8&quot;)
    self.tempSala.remove(self.tempSalaTxt);
nevow.athena.JSException: TypeError: self.tempSala.remove is not a function

As far as I know, remove is a valid javascript function. Why can't I
use it in this context?

Thanks in advance!

-- 
Juanjo Conti

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004194.html">[Twisted-web] Multithread SSL
</A></li>
	<LI>Next message: <A HREF="004196.html">[Twisted-web] Athena javascript question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4195">[ date ]</a>
              <a href="thread.html#4195">[ thread ]</a>
              <a href="subject.html#4195">[ subject ]</a>
              <a href="author.html#4195">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
