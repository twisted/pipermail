From hawkowl at atleastfornow.net  Mon Feb  8 23:56:22 2016
From: hawkowl at atleastfornow.net (Amber "Hawkie" Brown)
Date: Tue, 9 Feb 2016 14:56:22 +0800
Subject: [Twisted-web] Compatibility issues with Twisted and OpenSSL 1.0.2f
Message-ID: <8D62CD0D-E824-4E04-877B-304DB56C84B4@atleastfornow.net>

Hi everyone,

There's a known issue with Twisted + PyOpenSSL>=0.13 using OpenSSL version 1.0.2f. Please note, this only potentially affects you if:

- You use Windows or OS X -- Cryptography 1.2.2's wheels have a bundled 1.0.2f.
OR
- You use a Linux or FreeBSD distribution which has OpenSSL 1.0.2f. If you are using a released distribution of Ubuntu or Debian, you most likely have a *patched* (so, still secure) past version (like Ubuntu 15.10, which has a patched 1.0.2d). If you are using Fedora 23, you may have 1.0.2f. You can check by running "openssl version".

There is also an unrelated issue with CFFI that causes Cryptography 1.2 wheels for Windows/OS X to cause CPython to crash on interpreter shutdown.

The current highest working Cryptography version that causes a test suite pass is 1.2.2 on Linux with OpenSSL versions other than 1.0.2f, 1.1.2 on Windows & OS X without an unreleased CFFI patch, and 1.2.1 once the CFFI patch is released. Our Windows and OS X builders have their Cryptography dependencies pinned to 1.1.2 until these problems are solved.

Please note, this doesn't mean your applications may or may not work in practice with OpenSSL 1.0.2f! It just means the test suite does not pass, so we can't be absolutely sure that 1.0.2f will not cause problems for you. The latest patched versions of OpenSSL are strongly recommended from a security standpoint.

The relevant issues are:

- Make tests pass on 1.0.2f (Twisted, https://twistedmatrix.com/trac/ticket/8189)
- Crash during interpreter shutdown when using static callbacks (CFFI, https://bitbucket.org/cffi/cffi/issues/246/crash-during-interpreter-shutdown-when)

Regards,

Amber Brown
Twisted Release Manager
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20160209/f69d8f5b/attachment.pgp>

From teratorn at gmail.com  Tue Feb  9 06:16:54 2016
From: teratorn at gmail.com (Eric P. Mangold)
Date: Tue, 9 Feb 2016 07:16:54 -0600
Subject: [Twisted-web] Compatibility issues with Twisted and OpenSSL
	1.0.2f
In-Reply-To: <8D62CD0D-E824-4E04-877B-304DB56C84B4@atleastfornow.net>
References: <8D62CD0D-E824-4E04-877B-304DB56C84B4@atleastfornow.net>
Message-ID: <CAMCvQ9uZT=Z9jcAAiSTUht=xpas4==4O1P0OxLLgZZsa0PAqiw@mail.gmail.com>

Hi Amber,

Are you aware of anyone trying to use Twisted with PyOpenSSL/LibreSSL ?
Just curious.

Cheers,
-E

On Tue, Feb 9, 2016 at 12:56 AM, Amber "Hawkie" Brown <
hawkowl at atleastfornow.net> wrote:

> Hi everyone,
>
> There's a known issue with Twisted + PyOpenSSL>=0.13 using OpenSSL version
> 1.0.2f. Please note, this only potentially affects you if:
>
> - You use Windows or OS X -- Cryptography 1.2.2's wheels have a bundled
> 1.0.2f.
> OR
> - You use a Linux or FreeBSD distribution which has OpenSSL 1.0.2f. If you
> are using a released distribution of Ubuntu or Debian, you most likely have
> a *patched* (so, still secure) past version (like Ubuntu 15.10, which has a
> patched 1.0.2d). If you are using Fedora 23, you may have 1.0.2f. You can
> check by running "openssl version".
>
> There is also an unrelated issue with CFFI that causes Cryptography 1.2
> wheels for Windows/OS X to cause CPython to crash on interpreter shutdown.
>
> The current highest working Cryptography version that causes a test suite
> pass is 1.2.2 on Linux with OpenSSL versions other than 1.0.2f, 1.1.2 on
> Windows & OS X without an unreleased CFFI patch, and 1.2.1 once the CFFI
> patch is released. Our Windows and OS X builders have their Cryptography
> dependencies pinned to 1.1.2 until these problems are solved.
>
> Please note, this doesn't mean your applications may or may not work in
> practice with OpenSSL 1.0.2f! It just means the test suite does not pass,
> so we can't be absolutely sure that 1.0.2f will not cause problems for you.
> The latest patched versions of OpenSSL are strongly recommended from a
> security standpoint.
>
> The relevant issues are:
>
> - Make tests pass on 1.0.2f (Twisted,
> https://twistedmatrix.com/trac/ticket/8189)
> - Crash during interpreter shutdown when using static callbacks (CFFI,
> https://bitbucket.org/cffi/cffi/issues/246/crash-during-interpreter-shutdown-when
> )
>
> Regards,
>
> Amber Brown
> Twisted Release Manager
>
> _______________________________________________
> Twisted-web mailing list
> Twisted-web at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20160209/6b948196/attachment.html>

From glyph at twistedmatrix.com  Tue Feb  9 12:52:03 2016
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Tue, 9 Feb 2016 11:52:03 -0800
Subject: [Twisted-web] Compatibility issues with Twisted and OpenSSL
	1.0.2f
In-Reply-To: <CAMCvQ9uZT=Z9jcAAiSTUht=xpas4==4O1P0OxLLgZZsa0PAqiw@mail.gmail.com>
References: <8D62CD0D-E824-4E04-877B-304DB56C84B4@atleastfornow.net>
 <CAMCvQ9uZT=Z9jcAAiSTUht=xpas4==4O1P0OxLLgZZsa0PAqiw@mail.gmail.com>
Message-ID: <B360741E-B786-405D-9352-35F9C47B3CA9@twistedmatrix.com>


> On Feb 9, 2016, at 5:16 AM, Eric P. Mangold <teratorn at gmail.com> wrote:
> 
> Are you aware of anyone trying to use Twisted with PyOpenSSL/LibreSSL ? Just curious.


I am not aware of anyone using it with Twisted, but Cryptography does test with LibreSSL: https://jenkins.cryptography.io/job/cryptography-pr-builder/4964/ - so if you built your own wheel it ought to work.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20160209/86220957/attachment.html>

From glyph at twistedmatrix.com  Tue Feb  9 13:08:15 2016
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Tue, 9 Feb 2016 12:08:15 -0800
Subject: [Twisted-web] [Twisted-Python] Compatibility issues with
	Twisted and OpenSSL 1.0.2f
In-Reply-To: <8D62CD0D-E824-4E04-877B-304DB56C84B4@atleastfornow.net>
References: <8D62CD0D-E824-4E04-877B-304DB56C84B4@atleastfornow.net>
Message-ID: <00604360-CC5C-46D3-AA2A-133F86DC40F0@twistedmatrix.com>


> On Feb 8, 2016, at 10:56 PM, Amber Hawkie Brown <hawkowl at atleastfornow.net> wrote:
> 
> Hi everyone,
> 
> There's a known issue with Twisted + PyOpenSSL>=0.13 using OpenSSL version 1.0.2f. Please note, this only potentially affects you if:
> 
> - You use Windows or OS X -- Cryptography 1.2.2's wheels have a bundled 1.0.2f.
> OR
> - You use a Linux or FreeBSD distribution which has OpenSSL 1.0.2f. If you are using a released distribution of Ubuntu or Debian, you most likely have a *patched* (so, still secure) past version (like Ubuntu 15.10, which has a patched 1.0.2d). If you are using Fedora 23, you may have 1.0.2f. You can check by running "openssl version".
> 
> There is also an unrelated issue with CFFI that causes Cryptography 1.2 wheels for Windows/OS X to cause CPython to crash on interpreter shutdown.
> 
> The current highest working Cryptography version that causes a test suite pass is 1.2.2 on Linux with OpenSSL versions other than 1.0.2f, 1.1.2 on Windows & OS X without an unreleased CFFI patch, and 1.2.1 once the CFFI patch is released. Our Windows and OS X builders have their Cryptography dependencies pinned to 1.1.2 until these problems are solved.
> 
> Please note, this doesn't mean your applications may or may not work in practice with OpenSSL 1.0.2f! It just means the test suite does not pass, so we can't be absolutely sure that 1.0.2f will not cause problems for you. The latest patched versions of OpenSSL are strongly recommended from a security standpoint.
> 
> The relevant issues are:
> 
> - Make tests pass on 1.0.2f (Twisted, https://twistedmatrix.com/trac/ticket/8189)
> - Crash during interpreter shutdown when using static callbacks (CFFI, https://bitbucket.org/cffi/cffi/issues/246/crash-during-interpreter-shutdown-when)

Thanks for the write-up, Amber.

The main consequence of this constellation of unfortunate facts is that it is causing problems for Twisted development right now; the cffi issue may be causing some issues with crashing at shutdown, but the crash occurs after interpreter teardown so even programs that depend on "clean" shutdown (in the sense that they need to do work at shutdown time) should be affected.  Systems that require a 0 exit-status from a daemon might be but hopefully there aren't many of those.

All of these issues are under active investigation by the Cryptography and CFFI teams, and the one thing that might be an issue in Twisted (the 1.0.2f compatibility issue as Amber described above) has already gotten some attention from Tristan Seligmann and there should be a fix available shortly.

In any case, I'm very happy that we are communicating better about arcane issues like this :).  We'll try to send an update when they're all resolved.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20160209/320e3672/attachment.html>

From glyph at twistedmatrix.com  Sat Feb 13 13:32:40 2016
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Sat, 13 Feb 2016 12:32:40 -0800
Subject: [Twisted-web] [Twisted-Python] Compatibility issues with
	Twisted and OpenSSL 1.0.2f
In-Reply-To: <00604360-CC5C-46D3-AA2A-133F86DC40F0@twistedmatrix.com>
References: <8D62CD0D-E824-4E04-877B-304DB56C84B4@atleastfornow.net>
 <00604360-CC5C-46D3-AA2A-133F86DC40F0@twistedmatrix.com>
Message-ID: <CCF7499F-EBB4-4949-A22A-8238A207D005@twistedmatrix.com>


> On Feb 9, 2016, at 12:08 PM, Glyph Lefkowitz <glyph at twistedmatrix.com> wrote:
> 
> 
>> On Feb 8, 2016, at 10:56 PM, Amber Hawkie Brown <hawkowl at atleastfornow.net <mailto:hawkowl at atleastfornow.net>> wrote:
>> 
>> Hi everyone,
>> 
>> There's a known issue with Twisted + PyOpenSSL>=0.13 using OpenSSL version 1.0.2f. Please note, this only potentially affects you if:
>> 
>> - You use Windows or OS X -- Cryptography 1.2.2's wheels have a bundled 1.0.2f.
>> OR
>> - You use a Linux or FreeBSD distribution which has OpenSSL 1.0.2f. If you are using a released distribution of Ubuntu or Debian, you most likely have a *patched* (so, still secure) past version (like Ubuntu 15.10, which has a patched 1.0.2d). If you are using Fedora 23, you may have 1.0.2f. You can check by running "openssl version".
>> 
>> There is also an unrelated issue with CFFI that causes Cryptography 1.2 wheels for Windows/OS X to cause CPython to crash on interpreter shutdown.
>> 
>> The current highest working Cryptography version that causes a test suite pass is 1.2.2 on Linux with OpenSSL versions other than 1.0.2f, 1.1.2 on Windows & OS X without an unreleased CFFI patch, and 1.2.1 once the CFFI patch is released. Our Windows and OS X builders have their Cryptography dependencies pinned to 1.1.2 until these problems are solved.
>> 
>> Please note, this doesn't mean your applications may or may not work in practice with OpenSSL 1.0.2f! It just means the test suite does not pass, so we can't be absolutely sure that 1.0.2f will not cause problems for you. The latest patched versions of OpenSSL are strongly recommended from a security standpoint.
>> 
>> The relevant issues are:
>> 
>> - Make tests pass on 1.0.2f (Twisted, https://twistedmatrix.com/trac/ticket/8189 <https://twistedmatrix.com/trac/ticket/8189>)
>> - Crash during interpreter shutdown when using static callbacks (CFFI, https://bitbucket.org/cffi/cffi/issues/246/crash-during-interpreter-shutdown-when <https://bitbucket.org/cffi/cffi/issues/246/crash-during-interpreter-shutdown-when>)
> 
> Thanks for the write-up, Amber.
> 
> The main consequence of this constellation of unfortunate facts is that it is causing problems for Twisted development right now; the cffi issue may be causing some issues with crashing at shutdown, but the crash occurs after interpreter teardown so even programs that depend on "clean" shutdown (in the sense that they need to do work at shutdown time) should be affected.  Systems that require a 0 exit-status from a daemon might be but hopefully there aren't many of those.

One of these issues - the CFFI crash - https://bitbucket.org/cffi/cffi/issues/246/crash-during-interpreter-shutdown-when <https://bitbucket.org/cffi/cffi/issues/246/crash-during-interpreter-shutdown-when> - is now fixed and released in cffi 1.5.2.  So we should start returning to normal shortly ;).

> All of these issues are under active investigation by the Cryptography and CFFI teams, and the one thing that might be an issue in Twisted (the 1.0.2f compatibility issue as Amber described above) has already gotten some attention from Tristan Seligmann and there should be a fix available shortly.
> 
> In any case, I'm very happy that we are communicating better about arcane issues like this :).  We'll try to send an update when they're all resolved.
> 
> -glyph
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20160213/3995143c/attachment.html>

From hawkowl at atleastfornow.net  Mon Feb 15 23:39:05 2016
From: hawkowl at atleastfornow.net (Amber "Hawkie" Brown)
Date: Tue, 16 Feb 2016 14:39:05 +0800
Subject: [Twisted-web] Twisted 16.0pre1 Announcement
Message-ID: <7A0FAF3E-C053-4955-A298-3EBA1D8F540E@atleastfornow.net>

Hi everyone, it's time for another Twisted release!

Twisted 16.0 brings some important changes, and some nice-to-haves as well. The major things are:

- TLS endpoints have arrived! They're like the old `ssl:` endpoints, but support faster IPv4/IPv6 connections (using HostnameEndpoint) and always do hostname verification.
- Conch now uses Cryptography instead of PyCrypto for underlying cryptographic operations. This means it'll work much better on PyPy!
- Headers objects (notably used by t.web.server.Request) now support Unicode for the vast majority of cases, encoding keys to ISO-8859-1 and values to UTF-8.
- WSGI support and AMP have been ported to Python 3, along with a handful of other modules.
- More shedding of the past, with the GTK+ 1 reactor being removed.
- Over 45 tickets have been closed.

As usual, it's available for download -- go here (https://twistedmatrix.com/Releases/pre/16.0.0pre1/) to get the prerelease tarballs and the full NEWS file.

Please let me know if you have any issues, as well as if you don't! If everything works well, that's a good thing for me to know :)

Thanks! <3

- Amber Brown
Twisted Release Manager
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20160216/2423bfcc/attachment.pgp>

From epalmer at farmersagent.com  Mon Feb 15 23:40:19 2016
From: epalmer at farmersagent.com (Emily Palmer)
Date: Tue, 16 Feb 2016 06:40:19 -0000
Subject: [Twisted-web] Twisted 16.0pre1 Announcement
Message-ID: <973uBPgOT9213T02.1455604819@cm02.cms.usa.net>

An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20160216/47ba3f17/attachment.html>

From hawkowl at atleastfornow.net  Fri Feb 19 08:42:44 2016
From: hawkowl at atleastfornow.net (Amber "Hawkie" Brown)
Date: Fri, 19 Feb 2016 23:42:44 +0800
Subject: [Twisted-web] Twisted + OpenSSL 1.0.2f issues resolved
Message-ID: <2E70D7CD-1E23-4691-B23F-3EFF2A386CC6@atleastfornow.net>

Hi everyone,

Since Tristan Seligmann has fixed https://twistedmatrix.com/trac/ticket/8189 , and the CFFI crash-on-shutdown bugs have been resolved upstream, Twisted is now fully compatible with OpenSSL 1.0.2f as included in Cryptography 1.2.2, and as included in distributions that have been updated.

This fix is in Twisted trunk, but did not make it into Twisted 16.0. Twisted 16.1 will include the fix.

Thanks to Tristan and Glyph (the reviewer) for getting this issue fixed.

- Amber
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20160219/3e16dd14/attachment.pgp>

From epalmer at farmersagent.com  Fri Feb 19 08:44:30 2016
From: epalmer at farmersagent.com (Emily Palmer)
Date: Fri, 19 Feb 2016 15:44:30 -0000
Subject: [Twisted-web] Twisted + OpenSSL 1.0.2f issues resolved
Message-ID: <547uBsPSE5241T02.1455896670@cm02.cms.usa.net>

An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20160219/7dc3f645/attachment.html>

From hawkowl at atleastfornow.net  Sat Feb 27 21:20:40 2016
From: hawkowl at atleastfornow.net (Amber "Hawkie" Brown)
Date: Sun, 28 Feb 2016 12:20:40 +0800
Subject: [Twisted-web] Twisted 16.0.0 Prerelease 2 Announcement
Message-ID: <4CC0E15B-B37C-4C46-BE88-90F2151F4B24@atleastfornow.net>

Hi everyone,

A few issues were identified in Twisted 16.0.0pre1 by the Canonical MAAS team, related to the twisted.conch.ssh.keys module missing some dependencies when installed on Python 3.

These issues have been fixed and are in Twisted 16.0.0pre2. You can find it and the NEWS file at https://twistedmatrix.com/Releases/pre/16.0.0pre2/ .

If no further issues are identified, Twisted 16.0 will be released this week.

- Amber Brown
Twisted Release Manager
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://twistedmatrix.com/pipermail/twisted-web/attachments/20160228/1543b98b/attachment.pgp>

