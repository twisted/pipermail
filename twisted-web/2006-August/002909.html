<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] [Nevow] about new guard in sandbox
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20%5BNevow%5D%20about%20new%20guard%20in%20sandbox&In-Reply-To=44CF1374.8040906%40libero.it">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002908.html">
   <LINK REL="Next"  HREF="002913.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] [Nevow] about new guard in sandbox</H1>
    <B>Valentino Volonghi aka Dialtone</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20%5BNevow%5D%20about%20new%20guard%20in%20sandbox&In-Reply-To=44CF1374.8040906%40libero.it"
       TITLE="[Twisted-web] [Nevow] about new guard in sandbox">dialtone at divmod.com
       </A><BR>
    <I>Tue Aug  1 04:53:49 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002908.html">[Twisted-web] [Nevow] about new guard in sandbox
</A></li>
        <LI>Next message: <A HREF="002913.html">[Twisted-web] [Nevow] about new guard in sandbox
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2909">[ date ]</a>
              <a href="thread.html#2909">[ thread ]</a>
              <a href="subject.html#2909">[ subject ]</a>
              <a href="author.html#2909">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 01 Aug 2006 10:40:20 +0200, Manlio Perillo &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">manlio_perillo at libero.it</A>&gt; wrote:
&gt;<i>Only a question: in the example you only store (in the database)
</I>&gt;<i>&quot;permanent&quot; sessions.
</I>&gt;<i>Not sure about this, but I think that all sessions, except those for
</I>&gt;<i>anonymous access, should be persisted in the database (to avoid problems
</I>&gt;<i>in a distributed system).
</I>
Not really unless you want your system on its knees begging for some holidays. Just think about the chance for 1M people to visit your website each day. Your sessions database will shortly be the biggest bottleneck of the application.

&gt;<i>Here I'm not sure to understand.
</I>&gt;<i>You mean that the avatarID (username) is not stored in the session
</I>&gt;<i>object? This seems not the case.
</I>
First of all the avatarID is not the username. The avatarID is the avatarID. Then I repeat that I do not store the avatar anywhere which means that I have to pass through portal.login() for each request and portal.login() requires full credentials. Then I cannot get the avatarId because it is only passed to requestAvatar and the SessionWrapper only sees the result of that call.

&gt;<i>Another thing: is it really necessary to create a session for anonymous
</I>&gt;<i>access?
</I>
This is an interesting question. I think I'll probably say yes.

&gt;<i>And what about to store the authenticated username in the context
</I>&gt;<i>(instead of hacking on the site.makeSession)?
</I>
Maybe you didn't notice but... The context is going away we have been talking about this for ages and using the context means that the code will need to be trashed in not so long.

&gt;<i>I'm against this because I whould like to have a realy reusable
</I>&gt;<i>SessionManager.
</I>&gt;<i>
</I>&gt;<i>The SessionManager is really an useful class and it should not depend
</I>&gt;<i>over a SessionWrapper (because I can choose to not use a SessionWrapper
</I>&gt;<i>al all).
</I>
And what does this have to do with the loggedIn method? The reason it is like that is because cookies are dealt with in the sessionwrapper and not in the sessionmanager, but having 2 places to check the rememberMe argument was sub-optimal. If you don't need the sessionmanager you can clearly avoid implementing loggedIn at all, but this doesn't mean the rest of the developers don't need such a callback.

&gt;<i>Yes, this is not a valid concern but I like to have code that is as much
</I>&gt;<i>symple as possible, where I don't have to try to understand every
</I>&gt;<i>statement. ;-)
</I>
Which is yet another reason to have it like it is now.

&gt;<i>As an example a valid alternative to store state in the server is to
</I>&gt;<i>store it in the cookie.
</I>
&gt;<i>NEVOW_SESSION=&quot;username=manlio&amp;last_accessed=...&amp;created=...&quot;
</I>
&gt;<i>of course using some cryptography.
</I>
&gt;<i>This has the advantage to work &quot;as is&quot; in a distributed system and to
</I>&gt;<i>not depend on the number of sessions/users.
</I>
You will still need a session object on the serverside. Sessions are a serverside detail and saving state in the database is not hard at all. The problem rises when you want to reach consistency between all the servers.

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002908.html">[Twisted-web] [Nevow] about new guard in sandbox
</A></li>
	<LI>Next message: <A HREF="002913.html">[Twisted-web] [Nevow] about new guard in sandbox
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2909">[ date ]</a>
              <a href="thread.html#2909">[ thread ]</a>
              <a href="subject.html#2909">[ subject ]</a>
              <a href="author.html#2909">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
