<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] [Nevow] new chapter about authentication
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20%5BNevow%5D%20new%20chapter%20about%20authentication&In-Reply-To=44D23FC5.7060202%40libero.it">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002933.html">
   <LINK REL="Next"  HREF="002935.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] [Nevow] new chapter about authentication</H1>
    <B>Valentino Volonghi aka Dialtone</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20%5BNevow%5D%20new%20chapter%20about%20authentication&In-Reply-To=44D23FC5.7060202%40libero.it"
       TITLE="[Twisted-web] [Nevow] new chapter about authentication">dialtone at divmod.com
       </A><BR>
    <I>Thu Aug  3 17:54:54 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002933.html">[Twisted-web] [Nevow] new chapter about authentication
</A></li>
        <LI>Next message: <A HREF="002935.html">[Twisted-web] [Nevow] new chapter about authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2934">[ date ]</a>
              <a href="thread.html#2934">[ thread ]</a>
              <a href="subject.html#2934">[ subject ]</a>
              <a href="author.html#2934">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 03 Aug 2006 20:26:13 +0200, Manlio Perillo &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">manlio_perillo at libero.it</A>&gt; wrote:
&gt;&gt;<i> You must autogenerate a new one and then send it, and if it's like that
</I>&gt;&gt;<i> you 'just' lost an account and not a password.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>One can simply update the entry in the database, without having the
</I>&gt;<i>application code know about this (but I'm not sure here, I have to do
</I>&gt;<i>some tests since I'm interested in this feature).
</I>
Update which entry in the database? The password? Just ask to provide the old one or simply don't put the old one in the page. Again: how are you going to _show_ a passoword that you don't even know? it's hashed.

&gt;<i>authenticator or authentication token.
</I>&gt;<i>On papers (like <A HREF="http://pdos.lcs.mit.edu/cookies/pubs/webauth:tr.pdf">http://pdos.lcs.mit.edu/cookies/pubs/webauth:tr.pdf</A>) and
</I>&gt;<i>the OWASPGuide they use this term.
</I>
Ok, it's the session ID. Let's restate your sentence now then: you said that sessions are a bad fit for authentication.

This is true only when you talk about cookies. Sessions serverside are a perfect way to deal with authentication and they should not be accessible by the user.

&gt;<i>How many developers knows to remove meta tag in the body?
</I>
Well done even with the cookie. I think that a good way to fix the bug is
to begin some work to include my new guard code.

What do the others think about this? Glyph, exarkun, idnar, amberite, etc.?

&gt;<i>Well, know I'm spending a couple of hours on this topic, but HTTPs will
</I>&gt;<i>slowdown my site forever.
</I>
Measured in how much loss in performance? How loaded is the server? How many users do you have?

&gt;&gt;<i> heavier than nothing, probably true
</I>&gt;&gt;<i> heavier than encrypting/decrypting all cookie values each time? slightly
</I>&gt;&gt;<i> heavier timewise? not at all.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Encryption is not really needed, only signing.
</I>&gt;<i>But, as you say, HTTPs can be a better solution at all.
</I>
signing is even heavier than encryption because signing means hashing and encrypting (a)symetrically which is what HTTPs does.

Many websites just go for the HTTPs solution with secure cookies. It's easy enough and if you were really concerned about performances you wouldn't be using python and twisted and nevow.

&gt;<i>Well, for some uses cases it can just work.
</I>
No it doesn't. It's mostly always a bad idea and is confusing.

&gt;<i>But this is a nightmare! ;-)
</I>&gt;<i>Have you done some tests with the new version context-less?
</I>
context-less doesn't create contexts and that's more than enough to know that it would be better. Currently there is no code that uses a context-less rendering only an API that provides a Page and an Element object without the context.

&gt;<i>But you forgot to include some time here...
</I>
I expect you to do some job on your own. If you say something is expensive it's because you already measured it.

&gt;<i>But I think that it will never be commited, since it will involve a
</I>&gt;<i>partial refactoring of Guard.
</I>
A new guard version is already there and we are about to start the biggest ticket in Nevow history... guard is not going to scare anyone (hopefully is going to go once web2 is finished).

&gt;<i>The same reason why old file upload support is still there (and there is
</I>&gt;<i>no control on the size of POST data so someone can send me an image of 3
</I>&gt;<i>MB).
</I>&gt;<i>
</I>&gt;<i>At least I can change this without changing source code.
</I>
Fixing this requires more than a simple refactoring... It's a complete overhaul of twisted.web API, which is twisted.web2.

&gt;<i>I can create a session only to store some state (as an example, to count
</I>&gt;<i>how time an user failed the login).
</I>&gt;<i>Why it should have a guard attribute?
</I>
Do you know that in python everything is by reference? It's not going to waste more time and having a reference to guard is useful for application level code that wants to mutate a session from unauthenticated to authenticated. (this is pretty much the only usecase).

&gt;<i>And, indeed, in newow.inevow are defined ISession and IGuardSession.
</I>
Those are not 2 kinds of sessions that you can use. It's backwards compatibility mess plus a small amount of being generic.

&gt;<i>You are right.
</I>&gt;<i>But you are also supposing that SessionManager creates only one king of
</I>&gt;<i>session.
</I>
I'm supposing that yes. Do you have a usecase besides the one already implemented in session.py where you have both persistent and non persistent sessions in the same object? 

&gt;&gt;&gt;<i> - If you choose to not create sessions for anonymous users, then there
</I>&gt;&gt;&gt;<i>  is no more need for the loggedIn callback
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If you give me enough reason to remove the loggedIn callback I will
</I>&gt;&gt;<i> remove it.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>If it is possible to avoid creating sessions for anonymous users, then a
</I>&gt;<i>session needs only to be created after a successful login.
</I>&gt;<i>So you can put the code that is now in loggedIn in createSession.
</I>
Which doesn't change the fact that createSession is not that easy to change while changing loggedIn just requires a subclass and override without even going for the upcall if you don't need to, because the callback is fairly easy (and that's why it's a callback).

This is not enough reason anyway. You have to explain why it is a bad idea.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002933.html">[Twisted-web] [Nevow] new chapter about authentication
</A></li>
	<LI>Next message: <A HREF="002935.html">[Twisted-web] [Nevow] new chapter about authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2934">[ date ]</a>
              <a href="thread.html#2934">[ thread ]</a>
              <a href="subject.html#2934">[ subject ]</a>
              <a href="author.html#2934">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
