<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] My $0.25 (was: RE: [Athena] Is	ReliableMessageDelivery really	necessary?)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20My%20%240.25%20%28was%3A%20RE%3A%20%5BAthena%5D%20Is%0A%09ReliableMessageDelivery%20really%09necessary%3F%29&In-Reply-To=4a4f0615.0c11660a.54f6.535b%40mx.google.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004228.html">
   <LINK REL="Next"  HREF="004219.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] My $0.25 (was: RE: [Athena] Is	ReliableMessageDelivery really	necessary?)</H1>
    <B>Paul Thomas</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20My%20%240.25%20%28was%3A%20RE%3A%20%5BAthena%5D%20Is%0A%09ReliableMessageDelivery%20really%09necessary%3F%29&In-Reply-To=4a4f0615.0c11660a.54f6.535b%40mx.google.com"
       TITLE="[Twisted-web] My $0.25 (was: RE: [Athena] Is	ReliableMessageDelivery really	necessary?)">spongelavapaul at googlemail.com
       </A><BR>
    <I>Sat Jul  4 04:19:42 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004228.html">[Twisted-web] My $0.25 (was: RE: [Athena] Is	ReliableMessageDelivery really	necessary?)
</A></li>
        <LI>Next message: <A HREF="004219.html">[Twisted-web] [Athena] Is ReliableMessageDelivery	really	necessary?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4229">[ date ]</a>
              <a href="thread.html#4229">[ thread ]</a>
              <a href="subject.html#4229">[ subject ]</a>
              <a href="author.html#4229">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 4 Jul 2009, at 08:34, Micha&#322; Pasternak wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> as you can see here: <A HREF="http://www.divmod.org/trac/browser/trunk/Nevow/nevow/athena.py#L800">http://www.divmod.org/trac/browser/trunk/Nevow/nevow/athena.py#L800</A> 
</I>&gt;<i>   , if incomingMessages is a very, very long list, chances are, that  
</I>&gt;<i> it will block for a small amount of time. Also, if you happen to run  
</I>&gt;<i> the web server interactively, calling a lot of log.msg(&#8230;) functions  
</I>&gt;<i> will print out a lot of stuff on the console, which will also take  
</I>&gt;<i> some CPU cycles and GUI resources[1]. I think the best approach  
</I>&gt;<i> would be first to remove lines 803 &#8211; 806 (&#8220;else: log.msg(&#8230;)&#8221;)  
</I>&gt;<i> and test if the problem of browser lagging still exists &#8211; of course  
</I>&gt;<i> if you run server and browser on the same machine.
</I>&gt;<i>
</I>&gt;<i> There are some cases, which may lead to accumulation of the messages  
</I>&gt;<i> on client, which then lead to lags on the client side (and a lots of  
</I>&gt;<i> log messages on the server). Those may be bugs in the application  
</I>&gt;<i> code, but I think some of those cases are browser-dependent too (for  
</I>&gt;<i> some code I tested, Google Chrome sent a lot of duplicate messages,  
</I>&gt;<i> while Firefox sent none). Some people say, that duplicate messages  
</I>&gt;<i> phenomenon may be even extension-dependent, as in case of Firefox  
</I>&gt;<i> with FireBug enabled.
</I>&gt;<i>
</I>&gt;<i> Unfortunately, it seems that none of us is able to provide a minimal  
</I>&gt;<i> code sample of described misbehavior. Maybe it would be better just  
</I>&gt;<i> to disable those log messages in the release builds or make them  
</I>&gt;<i> optional?
</I>
I'll certainly look into this, but I believe that the system causing  
concern was run without a controlling terminal - and I have a  
suspicion that the offending log was even removed. The system is IO  
intensive though (hence using twisted in the first place) and we have  
had instances in the past of accidentally using blocking calls.

I'll report back in a few weeks if we get some real tests going.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20090704/e5b492bd/attachment.htm">http://twistedmatrix.com/pipermail/twisted-web/attachments/20090704/e5b492bd/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004228.html">[Twisted-web] My $0.25 (was: RE: [Athena] Is	ReliableMessageDelivery really	necessary?)
</A></li>
	<LI>Next message: <A HREF="004219.html">[Twisted-web] [Athena] Is ReliableMessageDelivery	really	necessary?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4229">[ date ]</a>
              <a href="thread.html#4229">[ thread ]</a>
              <a href="subject.html#4229">[ subject ]</a>
              <a href="author.html#4229">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
