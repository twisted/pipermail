<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Strange Nevow / Athena error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Strange%20Nevow%20/%20Athena%20error&In-Reply-To=4A539AC5.4020004%40ivsn.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004242.html">
   <LINK REL="Next"  HREF="004244.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Strange Nevow / Athena error</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Strange%20Nevow%20/%20Athena%20error&In-Reply-To=4A539AC5.4020004%40ivsn.com"
       TITLE="[Twisted-web] Strange Nevow / Athena error">exarkun at divmod.com
       </A><BR>
    <I>Tue Jul  7 15:12:01 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004242.html">[Twisted-web] Strange Nevow / Athena error
</A></li>
        <LI>Next message: <A HREF="004244.html">[Twisted-web] Strange Nevow / Athena error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4243">[ date ]</a>
              <a href="thread.html#4243">[ thread ]</a>
              <a href="subject.html#4243">[ subject ]</a>
              <a href="author.html#4243">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 07 Jul 2009 20:58:13 +0200, Paul Reznicek &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">maillists at ivsn.com</A>&gt; wrote:
&gt;<i>Hello,
</I>&gt;<i>I observe this error few times a day and have no idea about what is causing
</I>&gt;<i>it, neither under which conditions it happen (Nevow-0.9.33):
</I>&gt;<i>
</I>&gt;<i>Traceback (most recent call last):
</I>&gt;<i>   File &quot;/usr/lib/python2.6/dist-packages/twisted/internet/defer.py&quot;, line 195, in addCallback
</I>&gt;<i>     callbackKeywords=kw)
</I>&gt;<i>   File &quot;/usr/lib/python2.6/dist-packages/twisted/internet/defer.py&quot;, line 186, in
</I>&gt;<i>addCallbacks
</I>&gt;<i>     self._runCallbacks()
</I>&gt;<i>   File &quot;/usr/lib/python2.6/dist-packages/twisted/internet/defer.py&quot;, line 328, in
</I>&gt;<i>_runCallbacks
</I>&gt;<i>     self.result = callback(self.result, *args, **kw)
</I>&gt;<i>   File &quot;/usr/local/lib/python2.6/dist-packages/nevow/appserver.py&quot;, line 163, in
</I>&gt;<i>gotPageContext
</I>&gt;<i>     pageContext.tag.renderHTTP, pageContext
</I>&gt;<i>--- &lt;exception caught here&gt; ---
</I>&gt;<i>   File &quot;/usr/lib/python2.6/dist-packages/twisted/internet/defer.py&quot;, line 106, in
</I>&gt;<i>maybeDeferred
</I>&gt;<i>     result = f(*args, **kw)
</I>&gt;<i>   File &quot;/usr/local/lib/python2.6/dist-packages/nevow/athena.py&quot;, line 440, in renderHTTP
</I>&gt;<i>     messageData = json.parse(requestContent)
</I>&gt;<i>   File &quot;/usr/local/lib/python2.6/dist-packages/nevow/json.py&quot;, line 228, in parse
</I>&gt;<i>     value, tokens = parseValue(tokens)
</I>&gt;<i>   File &quot;/usr/local/lib/python2.6/dist-packages/nevow/json.py&quot;, line 130, in parseValue
</I>&gt;<i>     if tokens[0] == '{':
</I>&gt;<i>exceptions.IndexError: list index out of range
</I>&gt;<i>
</I>&gt;<i>I asked some user, but nobody observed problems on the user site,
</I>&gt;<i>any idea, what is wrong?
</I>
This happens whenever the server receives an Athena message which is not
valid json.  A common reason for this to happen is a proxy sitting between
the server and client which decides to send a truncated request.  The client
can recover from this in most cases, so it should be transparent to the user,
but it gets logged on the server since it's not explicitly handled there.

Just yesterday someone suggested that the server could report this failure
mode a little more clearly.  That'd be fine with me.

Jean-Paul

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004242.html">[Twisted-web] Strange Nevow / Athena error
</A></li>
	<LI>Next message: <A HREF="004244.html">[Twisted-web] Strange Nevow / Athena error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4243">[ date ]</a>
              <a href="thread.html#4243">[ thread ]</a>
              <a href="subject.html#4243">[ subject ]</a>
              <a href="author.html#4243">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
