<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Error output for bad deferred method signatures?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Error%20output%20for%20bad%20deferred%20method%20signatures%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002152.html">
   <LINK REL="Next"  HREF="002160.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Error output for bad deferred method signatures?</H1>
    <B>Lenny G Arbage</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Error%20output%20for%20bad%20deferred%20method%20signatures%3F&In-Reply-To="
       TITLE="[Twisted-web] Error output for bad deferred method signatures?">alengarbage at yahoo.com
       </A><BR>
    <I>Wed Nov 30 10:04:11 MST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002152.html">[Twisted-web] About Authentication/Membership
</A></li>
        <LI>Next message: <A HREF="002160.html">[Twisted-web] Nevow Athena LiveFragment without allowedMethods
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2158">[ date ]</a>
              <a href="thread.html#2158">[ thread ]</a>
              <a href="subject.html#2158">[ subject ]</a>
              <a href="author.html#2158">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm curious why errors aren't reported when deferreds
are fired if the deferred method has a bad signature. 
For example, if the following is run:


import httplib, sys
from twisted.web import client
from twisted.internet import reactor, threads, defer
from twisted.protocols import http
from twisted.python import failure

class getYahoo(object):
    def __init__(self):
        factory =
client.HTTPClientFactory(&quot;<A HREF="http://www.yahoo.com&quot;">http://www.yahoo.com&quot;</A>)
        reactor.connectTCP(&quot;www.yahoo.com&quot;,80,factory)
       
factory.deferred.addCallback(self._gotResponse,
factory)
        factory.deferred.addErrback(self._errSendReq,
factory)
        self.deferred = factory.deferred

    def _gotResponse(self, resp, factory):
        print &quot;yeah!&quot;
        print resp

    def _errSendReq(self, err, factory):
        print &quot;shucks!&quot;
        print err

def sendRequest():
    return getYahoo().deferred

if __name__ == '__main__':
    def test(msg):
        print msg
        print respOrErr

    d = sendRequest()
    d.addCallback(test, &quot;success&quot;)
    d.addErrback(test, &quot;failure&quot;)

    reactor.run()


The deferred _gotResponse() and _errSendReq() fire
perfectly, but the test() function in __main__ is not
called for &quot;success&quot; or &quot;failure&quot;.  This is expected
as the signature is wrong -- it should be
'test(respOrErr, msg)'.  What isn't clear [to me] is
why this doesn't produce an error upon firing the
deferred, but instead produces an error when the
reactor shuts down [via ctrl-c], which could be hours
later.

I have an instance of this that is more severe, where
the error output is *never* produced (maybe because of
threading?).

Is this the expected behavior, or am I doing something
atrocious to produce it?

  Thanks,
  Lenny


		
__________________________________ 
Yahoo! Music Unlimited 
Access over 1 million songs. Try it free. 
<A HREF="http://music.yahoo.com/unlimited/">http://music.yahoo.com/unlimited/</A>

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002152.html">[Twisted-web] About Authentication/Membership
</A></li>
	<LI>Next message: <A HREF="002160.html">[Twisted-web] Nevow Athena LiveFragment without allowedMethods
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2158">[ date ]</a>
              <a href="thread.html#2158">[ thread ]</a>
              <a href="subject.html#2158">[ subject ]</a>
              <a href="author.html#2158">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
