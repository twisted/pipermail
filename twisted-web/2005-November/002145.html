<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Serving different resource types from the same
	directory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Serving%20different%20resource%20types%20from%20the%20same%0A%09directory&In-Reply-To=20051127171254.GA20237%40debian">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002144.html">
   <LINK REL="Next"  HREF="002146.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Serving different resource types from the same
	directory</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Serving%20different%20resource%20types%20from%20the%20same%0A%09directory&In-Reply-To=20051127171254.GA20237%40debian"
       TITLE="[Twisted-web] Serving different resource types from the same
	directory">exarkun at divmod.com
       </A><BR>
    <I>Sun Nov 27 10:24:30 MST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002144.html">[Twisted-web] Serving different resource types from the same
	directory
</A></li>
        <LI>Next message: <A HREF="002146.html">[Twisted-web] Serving different resource types from the same
	directory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2145">[ date ]</a>
              <a href="thread.html#2145">[ thread ]</a>
              <a href="subject.html#2145">[ subject ]</a>
              <a href="author.html#2145">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 27 Nov 2005 18:12:54 +0100, Olivier Laurent &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">olilau.list.1 at gmail.com</A>&gt; wrote:
&gt;<i>On dim, 27 nov 2005, at 16:18, oli wrote:
</I>&gt;<i>I'm trying to serve 2 different kind of resources from the same
</I>&gt;<i>directory. I can, with no problem, serve one kind or the other but not
</I>&gt;<i>the two resource types at the same time.
</I>&gt;<i>
</I>&gt;<i>Examples abounds on the web on how to serve one kind of resources from
</I>&gt;<i>subdirectory /foo and another kind from subdirectory /bar. But no
</I>&gt;<i>example on how to serve different kind of resources from the same
</I>&gt;<i>directory.
</I>&gt;<i>
</I>&gt;<i>Here is how I tried:
</I>&gt;<i>
</I>&gt;<i># [...]
</I>&gt;<i>
</I>&gt;<i>PATH = '/var/www/'
</I>&gt;<i>
</I>&gt;<i>pt_resource = static.File(PATH)
</I>&gt;<i>pt_resource.processors = { '.pt' : PTResource }
</I>&gt;<i>pt_resource.indexNames = [ 'index' + '.pt' ]
</I>&gt;<i>
</I>&gt;<i>rst_resource = static.File( PATH )
</I>&gt;<i>rst_resource.processors = { '.rst' : RSTResource }
</I>&gt;<i>rst_resource.indexNames = [ 'index' + '.rst' ]
</I>&gt;<i>
</I>&gt;<i>#root = Resource() # I tried this too
</I>&gt;<i>root = static.File(PATH)
</I>&gt;<i>
</I>&gt;<i>root.putChild(PATH, pt_resource)
</I>&gt;<i>root.putChild(PATH, rst_resource)
</I>&gt;<i>
</I>&gt;<i>reactor.listenTCP(
</I>&gt;<i>        80,
</I>&gt;<i>        server.Site( root )
</I>&gt;<i>        )
</I>&gt;<i>reactor.run( )
</I>&gt;<i># this is the end
</I>&gt;<i>
</I>&gt;<i>What's wrong ? What did I forget ? Is it possible ?
</I>
&quot;/var/www/&quot; does not make sense as the first argument to putChild().  Someone would have to request &quot;%2fvar%2fwww%2f&quot; to get anything at that location.  Also, you cannot pass the same path to putChild() twice and expect both resources to figure out what to do.  Fortunately, you do not appear to need two resources.  I think you are looking for something like this:

  root = static.File(PATH)
  root.processors = {'.pt': PTResource, '.rst': RSTResource}
  root.indexNames = ['index.rst', 'index.pt']
  reactor.listenTCP(80, server.Site(root))
  reactor.run()

Jean-Paul

</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002144.html">[Twisted-web] Serving different resource types from the same
	directory
</A></li>
	<LI>Next message: <A HREF="002146.html">[Twisted-web] Serving different resource types from the same
	directory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2145">[ date ]</a>
              <a href="thread.html#2145">[ thread ]</a>
              <a href="subject.html#2145">[ subject ]</a>
              <a href="author.html#2145">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
