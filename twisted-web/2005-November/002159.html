<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Sessions and Authentication for Web2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Sessions%20and%20Authentication%20for%20Web2&In-Reply-To=20051130014912.1217.626791999.divmod.quotient.1934%40ohm">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002157.html">
   <LINK REL="Next"  HREF="002080.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Sessions and Authentication for Web2</H1>
    <B>Phil Mayers</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Sessions%20and%20Authentication%20for%20Web2&In-Reply-To=20051130014912.1217.626791999.divmod.quotient.1934%40ohm"
       TITLE="[Twisted-web] Sessions and Authentication for Web2">p.mayers at imperial.ac.uk
       </A><BR>
    <I>Wed Nov 30 14:04:16 MST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002157.html">[Twisted-web] Sessions and Authentication for Web2
</A></li>
        <LI>Next message: <A HREF="002080.html">[Twisted-web] web2 response.setCookie and request.getCookie
	shortcuts?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2159">[ date ]</a>
              <a href="thread.html#2159">[ thread ]</a>
              <a href="subject.html#2159">[ subject ]</a>
              <a href="author.html#2159">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jean-Paul Calderone wrote:
&gt;<i> On Tue, 29 Nov 2005 17:26:32 +0000, Phil Mayers 
</I>&gt;<i> &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">p.mayers at imperial.ac.uk</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> [snip]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> class MultiPortal(Portal):
</I>&gt;&gt;<i>   def login(self, credlist):
</I>&gt;&gt;<i>     for c in self.checkers:
</I>&gt;&gt;<i>       # All or a subset...
</I>&gt;&gt;<i>       if c.canHandle(credlist):
</I>&gt;&gt;<i>         return c.login(credlist)
</I>&gt;&gt;<i>     for c in self.checkers:
</I>&gt;&gt;<i>       c.maybeChallenge(credlist)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ...which starts to look very different from cred as-is
</I>&gt;<i> 
</I>&gt;<i> I haven't had time to catch up on this thread, but I wanted to point out 
</I>&gt;<i> that it is pretty much always wrong to subclass Portal.  If you ever 
</I>
Yes, wanting to is a symptom of the underlying problem, which is that 
for HTTP and Digest auth, you have to send the initial challenge back 
with the 401. To do this, you have to communicate with the checker to 
generate said challenge, or implement the digest algo. inside the HTTP 
proto, which is way nasty and breaks sharing. This either means:

  * &quot;just deciding&quot; that the client *will* use digest, creating a digest 
creds object that will issue the 401 and challenge, and calling &quot;login&quot; 
with it - losing auth mechanism negotiation support, which is nasty

  * holding a reference to a &quot;challenge&quot; method on the digest checker, 
and potentially any other challenge-with-401 mechs, breaking the 
encapsulation, which is nasty

  * adding a pre-login-stage mechanism to portal, or otherwise futzing 
the API, which is nasty

I would add that the listCredentialInterfaces method is not really 
sufficient for a completely configuration-free decision on what 
mechanisms to present the client - some (e.g. plain/login) may only be 
available over certain channels depending on policy, and deciding that 
policy may require a method call into the checker *instance* with a 
protocol-neutral description of the &quot;connection characteristics&quot; (e.g. 
the SSF in SASL)

It is, in general, a non-trivial problem in any environment. None of 
these issues are specific to Twisted. Witness the hassle GSSAPI, SASL 
and EAP cause. But to drag this back on topic, the original discussion 
was that t.web2 was MANDATED to use t.cred for authentication, and it 
seems to me at least there are unanswered questions about how it will work.

I'm sure it will, and am interested in working out how - hence the 
flurry of emails. Perhaps I'll have another go next week (since I am 
moving datacentre for the rest of this one)

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002157.html">[Twisted-web] Sessions and Authentication for Web2
</A></li>
	<LI>Next message: <A HREF="002080.html">[Twisted-web] web2 response.setCookie and request.getCookie
	shortcuts?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2159">[ date ]</a>
              <a href="thread.html#2159">[ thread ]</a>
              <a href="subject.html#2159">[ subject ]</a>
              <a href="author.html#2159">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
