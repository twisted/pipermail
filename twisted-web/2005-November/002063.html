<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Can't get XMLRPC server working with Twisted 2.1
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Can%27t%20get%20XMLRPC%20server%20working%20with%20Twisted%202.1&In-Reply-To=4378AED2.9050802%40smartology.nl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002062.html">
   <LINK REL="Next"  HREF="002064.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Can't get XMLRPC server working with Twisted 2.1</H1>
    <B>L. Daniel Burr</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Can%27t%20get%20XMLRPC%20server%20working%20with%20Twisted%202.1&In-Reply-To=4378AED2.9050802%40smartology.nl"
       TITLE="[Twisted-web] Can't get XMLRPC server working with Twisted 2.1">ldanielburr at mac.com
       </A><BR>
    <I>Mon Nov 14 09:06:11 MST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002062.html">[Twisted-web] Can't get XMLRPC server working with Twisted 2.1
</A></li>
        <LI>Next message: <A HREF="002064.html">[Twisted-web] Can't get XMLRPC server working with Twisted 2.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2063">[ date ]</a>
              <a href="thread.html#2063">[ thread ]</a>
              <a href="subject.html#2063">[ subject ]</a>
              <a href="author.html#2063">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Remi,

Your client code specifies the wrong URL.  Just change  
Proxy('<A HREF="http://localhost:7080'">http://localhost:7080'</A>) to Proxy('<A HREF="http://localhost:7080/RPC2'">http://localhost:7080/RPC2'</A>), and  
you'll receive the echo response you are expecting.

Also, since you are using Twisted 2.1, I'd suggest abandoning the use of  
components.Interface, and use zope.interface.Interface directly.  See the  
revised interfaces and adapters documentation on the web site for examples  
of using zope.interface.Interface.

Hope this helps,

L. Daniel Burr

On Mon, 14 Nov 2005 09:35:46 -0600, Remi Cool &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">mailinglists at smartology.nl</A>&gt;  
wrote:

&gt;<i> Hello Twisters,
</I>&gt;<i>
</I>&gt;<i> I've looked in the documentation, searched the archives and the web, but
</I>&gt;<i> found no solution to the XMLRPC problem I'm having.
</I>&gt;<i>
</I>&gt;<i> I've used the finger example code to create an XMLRPC server, but I keep
</I>&gt;<i> getting the 405 Method not allowed error. I'm probably overlooking
</I>&gt;<i> something very obvious, call me stupid, but I can't get it to work.
</I>&gt;<i> Below the code I'm using.
</I>&gt;<i>
</I>&gt;<i> If someone has a clue ... please enlighten me.
</I>&gt;<i>
</I>&gt;<i> -- Remi --
</I>&gt;<i>
</I>&gt;<i> Server code:
</I>&gt;<i>
</I>&gt;<i> #!/usr/bin/env python
</I>&gt;<i> # -*- coding: iso-8859-15 -*-
</I>&gt;<i>
</I>&gt;<i> &quot;&quot;&quot;&quot;&quot;&quot;
</I>&gt;<i> import sys
</I>&gt;<i>
</I>&gt;<i> from twisted.application import internet, service
</I>&gt;<i> from twisted.internet import reactor, protocol, defer
</I>&gt;<i> from twisted.web import resource, server, static, xmlrpc
</I>&gt;<i> from twisted.python import components, rebuild
</I>&gt;<i> from zope.interface import Interface, implements
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> class myXMLRPC(xmlrpc.XMLRPC):
</I>&gt;<i>     &quot;&quot;&quot;This class contains all root xmlrpc methods and the modules
</I>&gt;<i> subhandler.&quot;&quot;&quot;
</I>&gt;<i>     def __init__(self, service):
</I>&gt;<i>         xmlrpc.XMLRPC.__init__(self)
</I>&gt;<i>         self.service = service
</I>&gt;<i>    def xmlrpc_echo(self, x):
</I>&gt;<i>         &quot;&quot;&quot;Simple echo function&quot;&quot;&quot;
</I>&gt;<i>         return x
</I>&gt;<i> def catchError(err):
</I>&gt;<i>     return &quot;Internal error in server&quot;
</I>&gt;<i> class IowwService(components.Interface):
</I>&gt;<i>     &quot;&quot;&quot;&quot;&quot;&quot;
</I>&gt;<i>     def rebuild(self, modname):
</I>&gt;<i>         &quot;&quot;&quot;Rebuild classes in given module&quot;&quot;&quot;
</I>&gt;<i>
</I>&gt;<i> class httpResource(resource.Resource):
</I>&gt;<i>
</I>&gt;<i>     implements(resource.IResource)
</I>&gt;<i>    def __init__(self, service):
</I>&gt;<i>         resource.Resource.__init__(self)
</I>&gt;<i>         self.service = service
</I>&gt;<i>         self.putChild('RPC2', myXMLRPC(self.service))
</I>&gt;<i>
</I>&gt;<i>     def render(self, request):
</I>&gt;<i>         self._clientIP = request.getClientIP()
</I>&gt;<i>         return resource.Resource.render(self, request)
</I>&gt;<i>
</I>&gt;<i>     def render_GET(self, request):
</I>&gt;<i>         &quot;&quot;&quot;Process HTTP GET Requests.&quot;&quot;&quot;
</I>&gt;<i>         return '&lt;html&gt;&lt;body&gt;&lt;h3&gt;Not Implemented&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;'
</I>&gt;<i>    def getChild(self, path, request):
</I>&gt;<i>         &quot;&quot;&quot;This method handles http calls&quot;&quot;&quot;
</I>&gt;<i>         return httpResource(self.service)
</I>&gt;<i>
</I>&gt;<i> components.registerAdapter(httpResource, IowwService, resource.IResource)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> class owwService(service.Service):
</I>&gt;<i>     &quot;&quot;&quot;&quot;&quot;&quot;
</I>&gt;<i>     implements(IowwService)
</I>&gt;<i>    def rebuild(self, modname):
</I>&gt;<i>         &quot;&quot;&quot;Rebuild classes in given module&quot;&quot;&quot;
</I>&gt;<i>         mod = sys.modules[modname]
</I>&gt;<i>         rebuild.rebuild(mod)
</I>&gt;<i>
</I>&gt;<i> def main():
</I>&gt;<i>     &quot;&quot;&quot;&quot;&quot;&quot;
</I>&gt;<i>     application = service.Application('OWW', uid=100, gid=100)
</I>&gt;<i>     s = owwService()
</I>&gt;<i>     serviceCollection = service.IServiceCollection(application)
</I>&gt;<i>     internet.TCPServer(7080,
</I>&gt;<i> server.Site(resource.IResource(s))).setServiceParent(serviceCollection)
</I>&gt;<i>     serviceCollection.startService()
</I>&gt;<i>     reactor.run()
</I>&gt;<i>
</I>&gt;<i> if __name__ == '__main__':
</I>&gt;<i>     main()
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> And the client code:
</I>&gt;<i>
</I>&gt;<i> #!/usr/bin/env python
</I>&gt;<i>
</I>&gt;<i> from twisted.web.xmlrpc import Proxy
</I>&gt;<i> from twisted.internet import reactor
</I>&gt;<i>
</I>&gt;<i> def printValue(value):
</I>&gt;<i>     print repr(value)
</I>&gt;<i>     reactor.stop()
</I>&gt;<i>
</I>&gt;<i> def printError(error):
</I>&gt;<i>     print 'error', error
</I>&gt;<i>     reactor.stop()
</I>&gt;<i>
</I>&gt;<i> proxy = Proxy('<A HREF="http://localhost:7080'">http://localhost:7080'</A>)
</I>&gt;<i> proxy.callRemote('echo', 'hello world').addCallbacks(printValue,  
</I>&gt;<i> printError)
</I>&gt;<i> reactor.run()
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-web mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">Twisted-web at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web</A>
</I>


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002062.html">[Twisted-web] Can't get XMLRPC server working with Twisted 2.1
</A></li>
	<LI>Next message: <A HREF="002064.html">[Twisted-web] Can't get XMLRPC server working with Twisted 2.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2063">[ date ]</a>
              <a href="thread.html#2063">[ thread ]</a>
              <a href="subject.html#2063">[ subject ]</a>
              <a href="author.html#2063">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
