<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] spawning a xvfb and firefox with a timeout
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20spawning%20a%20xvfb%20and%20firefox%20with%20a%20timeout&In-Reply-To=CADozHMVfHF1wDPuzJ8rFsZ7BOjGwyDNR3xbmH%2B5KeyM_Lbsbuw%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004718.html">
   <LINK REL="Next"  HREF="004720.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] spawning a xvfb and firefox with a timeout</H1>
    <B>Stephan</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20spawning%20a%20xvfb%20and%20firefox%20with%20a%20timeout&In-Reply-To=CADozHMVfHF1wDPuzJ8rFsZ7BOjGwyDNR3xbmH%2B5KeyM_Lbsbuw%40mail.gmail.com"
       TITLE="[Twisted-web] spawning a xvfb and firefox with a timeout">schenette at gmail.com
       </A><BR>
    <I>Sat Aug 20 15:29:05 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004718.html">[Twisted-web] spawning a xvfb and firefox with a timeout
</A></li>
        <LI>Next message: <A HREF="004720.html">[Twisted-web] spawning a xvfb and firefox with a timeout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4719">[ date ]</a>
              <a href="thread.html#4719">[ thread ]</a>
              <a href="subject.html#4719">[ subject ]</a>
              <a href="author.html#4719">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've attempted to switch out spawnProcess for subprocess.Popen

e.g.

               command = &quot;xvfb-run --auto-servernum firefox&quot;
                args = shlex.split(command)
                #p = subprocess.Popen(args)
                #logging.debug(&quot;spawned a process: pid: %d&quot;, p.pid)
                subprocess =
reactor.spawnProcess(TimedProcessProtocol(20), args[0], args)

                logging.debug(type(subprocess))
                logging.debug(&quot;spawned a process: pid: %d&quot;, subprocess.pid)

when using subprocess.Popen, xvfb does start up correctly, but then I
have a python issue which is that xfb will start firefox-bin and make
it the parent and exit, thus, making it hard to kill the new process
of which I don't know the pid of.

in any case, I'd like to use spawnProcess, so any help as to why this
isn't working would be helpful.

Stephan

On Sat, Aug 20, 2011 at 10:52 AM, Stephan &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">schenette at gmail.com</A>&gt; wrote:
&gt;<i> Hi Glyph,
</I>&gt;<i>
</I>&gt;<i> I've created a specially crafted runnable example
</I>&gt;<i> you can find it here: <A HREF="http://pastebin.com/dyhTFPjM">http://pastebin.com/dyhTFPjM</A>
</I>&gt;<i>
</I>&gt;<i> as you'll see in the debug log that is created:
</I>&gt;<i>
</I>&gt;<i> 2011-08-20 10:36:10,484 DEBUG:errReceived xvfb-run: error: Xvfb failed to start
</I>&gt;<i> 2011-08-20 10:36:10,486 DEBUG:inConnectionLost
</I>&gt;<i> 2011-08-20 10:36:10,486 DEBUG:errConnectionLost
</I>&gt;<i> 2011-08-20 10:36:10,487 DEBUG:process exited, status 1
</I>&gt;<i>
</I>&gt;<i> Any help is appreciated.
</I>&gt;<i> to install xvfb on linux if not already installed
</I>&gt;<i> sudo apt-get install xvfb
</I>&gt;<i>
</I>&gt;<i> On Fri, Aug 19, 2011 at 1:22 AM, Glyph Lefkowitz
</I>&gt;<i> &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">glyph at twistedmatrix.com</A>&gt; wrote:
</I>&gt;&gt;<i> On Aug 19, 2011, at 1:14 AM, Stephan wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks for the prompt reply response inline. I'm still having issues
</I>&gt;&gt;<i> even though I've changed some code based on your advice.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Perhaps you could reduce this to a complete, runnable example so that
</I>&gt;&gt;<i> someone could reproduce the behavior you're seeing. &#160;At this point further
</I>&gt;&gt;<i> advice would be guessing on my part.
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Twisted-web mailing list
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">Twisted-web at twistedmatrix.com</A>
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004718.html">[Twisted-web] spawning a xvfb and firefox with a timeout
</A></li>
	<LI>Next message: <A HREF="004720.html">[Twisted-web] spawning a xvfb and firefox with a timeout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4719">[ date ]</a>
              <a href="thread.html#4719">[ thread ]</a>
              <a href="subject.html#4719">[ subject ]</a>
              <a href="author.html#4719">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
