<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Error: nevow_clientToServerEvent is not defined
	(Firefox JS Console)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Error%3A%20nevow_clientToServerEvent%20is%20not%20defined%0A%09%28Firefox%20JS%20Console%29&In-Reply-To=42C36CF0.2010100%40microshare.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001598.html">
   <LINK REL="Next"  HREF="001596.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Error: nevow_clientToServerEvent is not defined
	(Firefox JS Console)</H1>
    <B>Donovan Preston</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Error%3A%20nevow_clientToServerEvent%20is%20not%20defined%0A%09%28Firefox%20JS%20Console%29&In-Reply-To=42C36CF0.2010100%40microshare.com.au"
       TITLE="[Twisted-web] Error: nevow_clientToServerEvent is not defined
	(Firefox JS Console)">dp at ulaluma.com
       </A><BR>
    <I>Thu Jun 30 10:24:50 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001598.html">[Twisted-web] Error: nevow_clientToServerEvent is not defined
	(Firefox JS Console)
</A></li>
        <LI>Next message: <A HREF="001596.html">[Twisted-web] [PATCH] typo in static.py?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1600">[ date ]</a>
              <a href="thread.html#1600">[ thread ]</a>
              <a href="subject.html#1600">[ subject ]</a>
              <a href="author.html#1600">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jun 29, 2005, at 8:54 PM, Uwe (Peter) Feldtmann wrote:

&gt;<i> Does the current svn checkout handle XUL?
</I>
Seems to :-)

&gt;<i> I've tried playing with it with mixed results.
</I>&gt;<i>
</I>&gt;<i> I need to send updated values to client fields and later to bring  
</I>&gt;<i> em back. I've included slightly hacked versions of xul_nevow.py and  
</I>&gt;<i> xul_example.xul  The label change works as expected but I'm not  
</I>&gt;<i> handling the text fields properly.
</I>&gt;<i>
</I>&gt;<i> Can someone please nudge or kick me in the right direction?
</I>
Well, you had a simple problem in your example file. You defined a  
function at the module level named onCommand, which you presumably  
wanted to be called at some point, but you never called it. I have  
attached an updated example which eschews the function entirely and  
puts all the logic in the handle_onCommand method.

Note that it is still possible to program in the old style by doing  
IClientHandle(ctx) to get the client instance and repeatedly  
calling .send on it, but instead I have changed your example to  
return a list of javascript to send to the browser. Nevow now uses  
the normal rendering machinery to render javascript results from  
handlers and javascript which is pushed to the browser, so this is a  
natural way to express it.

Note that currently, you are required to include a newline or  
semicolon to delimit your statements; like nevow's html rendering,  
the javascript rendering does not currently insert newlines anywhere.  
I have suspected for a while that it would be safe to insert newlines  
in between list elements while rendering in a JavascriptContext, but  
I haven't tested this theory yet. If it is possible to insert these  
newlines automatically then the livepage.eol will no longer be  
necessary, which would be very nice.

Note that:

livepage.eol = livepage.js('\n') ## A newline character

Here is your working example (the XUL file didn't change at all):

-------------- next part --------------
A non-text attachment was scrubbed...
Name: xul_example.xul
Type: application/octet-stream
Size: 1875 bytes
Desc: not available
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20050630/c2d3468d/xul_example.obj">http://twistedmatrix.com/pipermail/twisted-web/attachments/20050630/c2d3468d/xul_example.obj</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xul_nevow.py
Type: text/x-python-script
Size: 1002 bytes
Desc: not available
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20050630/c2d3468d/xul_nevow.bin">http://twistedmatrix.com/pipermail/twisted-web/attachments/20050630/c2d3468d/xul_nevow.bin</A>
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001598.html">[Twisted-web] Error: nevow_clientToServerEvent is not defined
	(Firefox JS Console)
</A></li>
	<LI>Next message: <A HREF="001596.html">[Twisted-web] [PATCH] typo in static.py?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1600">[ date ]</a>
              <a href="thread.html#1600">[ thread ]</a>
              <a href="subject.html#1600">[ subject ]</a>
              <a href="author.html#1600">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
