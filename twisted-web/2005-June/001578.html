<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Livepage, ClientHandle and context [continued]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Livepage%2C%20ClientHandle%20and%20context%20%5Bcontinued%5D&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001585.html">
   <LINK REL="Next"  HREF="001589.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Livepage, ClientHandle and context [continued]</H1>
    <B>Chris (FeedTagger)</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Livepage%2C%20ClientHandle%20and%20context%20%5Bcontinued%5D&In-Reply-To="
       TITLE="[Twisted-web] Livepage, ClientHandle and context [continued]">chris.were at gmail.com
       </A><BR>
    <I>Mon Jun 27 00:30:40 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001585.html">[Twisted-web] memory leak with metaclass
</A></li>
        <LI>Next message: <A HREF="001589.html">[Twisted-web] Livepage, ClientHandle and context [continued]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1578">[ date ]</a>
              <a href="thread.html#1578">[ thread ]</a>
              <a href="subject.html#1578">[ subject ]</a>
              <a href="author.html#1578">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sorry, just registered so unable to join existing thread.

I'm having similar problems that are outlined here:
<A HREF="http://twistedmatrix.com/pipermail/twisted-web/2005-June/001523.html">http://twistedmatrix.com/pipermail/twisted-web/2005-June/001523.html</A>
&quot;I also can't see a way to use handler_* methods, because this methods
must be inside a rend.Fragment subclass in my case.&quot;

I expect this can be rectified in livepage.py (line 728 on my co):
    def locateHandler(self, ctx, path, name):
        ### XXX TODO: Handle path
        return getattr(self, 'handle_%s' % (name, ))

My implementation is slightly different in that I'm not using
rend.Fragment, I have a Page broker that responds to requests and
returns a new page that implements from a master page.

--------------------------
myserver.py:

pageMappings ] {
  'search': search.Page
  'index': index.Page
}

class Page(livepage.LivePage):
  def locateChild(self,ctx,segments):
    # depending on the value of segments[0] return the correct page
    # from a predefined map, otherwise 404
    page = pageMappings[segments[0]]
    return page(), segments[1]

Then in index.Page.py:
class Page(_master.FrontPage):

  def render_button(self,ctx,data):
    return ctx.tag(onclick=&quot;server.handle('click')&quot;)

  def handle_click(self,ctx,client):
    client.alert('clicked button')

_master.py:

class CorePage(livepage.LivePage):
  # various properties that all generic pages should exhibit

class FrontPage(CorePage):
  # load front page template
  # provide any default slot fills etc.

--------------------
Now the problem as I see it (with primitive livepage knowledge) is
that the livepage request that's sent with server.handle('click') is
attempting to be mapped to myserver.Page, instead of my intended
index.Page class.
Is it possible to provide this functionality or should this whole
template based approach be re-worked in some other fashion?

... as a side note using a generic dispatcher of pages (myserver.Page)
I can do cool things like detect /xml appended to url and instead of
loading .xhtml templates, load the appropriate .xml templates. Hence
without changing any application code I can generate xml versions of
every single webpage across a site.

Cheers,
Chris

</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001585.html">[Twisted-web] memory leak with metaclass
</A></li>
	<LI>Next message: <A HREF="001589.html">[Twisted-web] Livepage, ClientHandle and context [continued]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1578">[ date ]</a>
              <a href="thread.html#1578">[ thread ]</a>
              <a href="subject.html#1578">[ subject ]</a>
              <a href="author.html#1578">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
