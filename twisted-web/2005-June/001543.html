<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Returning Deferred from coerce method in formless -
	patch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Returning%20Deferred%20from%20coerce%20method%20in%20formless%20-%0A%09patch&In-Reply-To=20050615174646.GA4216%40pasternak.w.lub.pl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001539.html">
   <LINK REL="Next"  HREF="001548.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Returning Deferred from coerce method in formless -
	patch</H1>
    <B>Andrea Arcangeli</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Returning%20Deferred%20from%20coerce%20method%20in%20formless%20-%0A%09patch&In-Reply-To=20050615174646.GA4216%40pasternak.w.lub.pl"
       TITLE="[Twisted-web] Returning Deferred from coerce method in formless -
	patch">andrea at cpushare.com
       </A><BR>
    <I>Wed Jun 15 21:43:29 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001539.html">[Twisted-web] Returning Deferred from coerce method in formless -
	patch
</A></li>
        <LI>Next message: <A HREF="001548.html">[Twisted-web] Returning Deferred from coerce method in formless -
	patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1543">[ date ]</a>
              <a href="thread.html#1543">[ thread ]</a>
              <a href="subject.html#1543">[ subject ]</a>
              <a href="author.html#1543">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Jun 15, 2005 at 07:46:46PM +0200, Michal Pasternak wrote:
&gt;<i> various reasons. You could validate an e-mail address using
</I>&gt;<i> queries to DNS servers, or you could validate login name
</I>
FWIW, I also needed to return deferred from coerce.

Right now I'm using the autocallable to do that. The autocallable
returns annotate.ValidateError if something goes wrong.

But the dns is checked only if all the coerce methods all passes, so I
can't show the dns error until all coerce passed, which made the dns
check a kind of last special check, for no good reason. It'd be more
coherent to check for all errors even when some other coerce in the same
form fails.

Thanks for working to add this feature.

BTW, I'd also need &quot;context&quot; to be passed to the coerce method (as last
argument), I had to write my own ProcessTypedContext to do that, and
it'd be much nicer if the default formless process handler would pass
the context to coerce too (though I believe it would break current apps,
but it'd be a very visible breakage, no risk of silent malfunctions at
runtime). Said that I also appreciate backwards compatibility ;)

I need the context in order to reach the session with
inevow.ISession(ctx) inside the coerce handler.

Thanks!

</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001539.html">[Twisted-web] Returning Deferred from coerce method in formless -
	patch
</A></li>
	<LI>Next message: <A HREF="001548.html">[Twisted-web] Returning Deferred from coerce method in formless -
	patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1543">[ date ]</a>
              <a href="thread.html#1543">[ thread ]</a>
              <a href="subject.html#1543">[ subject ]</a>
              <a href="author.html#1543">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
