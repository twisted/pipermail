<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Formless, custom form layout
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Formless%2C%20custom%20form%20layout&In-Reply-To=42C43B8C.2030309%40divmod.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001603.html">
   <LINK REL="Next"  HREF="001605.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Formless, custom form layout</H1>
    <B>Ian Bicking</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Formless%2C%20custom%20form%20layout&In-Reply-To=42C43B8C.2030309%40divmod.com"
       TITLE="[Twisted-web] Formless, custom form layout">ianb at colorstudy.com
       </A><BR>
    <I>Thu Jun 30 12:55:55 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001603.html">[Twisted-web] Formless, custom form layout
</A></li>
        <LI>Next message: <A HREF="001605.html">[Twisted-web] Formless, custom form layout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1604">[ date ]</a>
              <a href="thread.html#1604">[ thread ]</a>
              <a href="subject.html#1604">[ subject ]</a>
              <a href="author.html#1604">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Valentino Volonghi aka Dialtone wrote:
&gt;<i> Rendering:
</I>&gt;<i> - form object is remembered in the context as iforms.IForm
</I>&gt;<i> - thanks to the adapter for the form object to IRenderer the form object    
</I>&gt;<i>   is directly passed in a stan tag. The Form renderer will take care of 
</I>&gt;<i>   rendering.
</I>&gt;<i> - A new context is created. and the data from the old context is 
</I>&gt;<i>   remembered on it (errors, data inserted and such).
</I>&gt;<i> - The form is rendered in this way:
</I>&gt;<i>   - the form object is iterated through for each field.
</I>&gt;<i>   - each field is rendered, if there are errors they are looked up in 
</I>&gt;<i>     iforms.IFormErrors (which was remembered at the beginning).
</I>&gt;<i>   - the render method of the widget is called and it does the following  
</I>&gt;<i>     thing:
</I>&gt;<i>     - One of the converters is gathered from the adaptators and the 
</I>&gt;<i>       python type is converted into a string.
</I>&gt;<i>     - the result is set as value, the stan representing the widget is 
</I>&gt;<i>       returned and sent to the client browser.
</I>
I don't understand all the aspects -- I don't know much about Nevow 
rendering -- but I think what you are describing is the traditional way 
form toolkits work, except perhaps that validation is better separated 
than in some cases.

I'm proposing that validation and form generation be *completely* 
seperate.  So you get several real data structures.  The validation 
produces something like this:

   {'field_name': 'field_value', ...}
   {'field_name': 'error_string', ...}

You can package that in an object or whatever, but that's the basic 
data.  Then the form generation produces:

   &lt;input type=&quot;text&quot; name=&quot;field_name&quot;&gt;

Then a third component (like htmlfill) puts these two items together, 
but does so with no knowledge of how the data came into being.  And the 
actual logic for redisplaying forms and whatnot should be entirely 
seperate, because

Traditionally form toolkits generate HTML widgets with values and errors 
  already filled in.  This binds HTML generation to the validation 
process, which almost always falls apart eventually, because no one HTML 
generator is general enough (and the most general HTML generator -- an 
actual person writing HTML by hand -- should always be allowed for).

Maybe form is doing this, but at least it doesn't sound like it is.  But 
it does sound like it uses two-way conversion/validation, which I think 
is also a very important feature.


-- 
Ian Bicking  /  <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">ianb at colorstudy.com</A>  /  <A HREF="http://blog.ianbicking.org">http://blog.ianbicking.org</A>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001603.html">[Twisted-web] Formless, custom form layout
</A></li>
	<LI>Next message: <A HREF="001605.html">[Twisted-web] Formless, custom form layout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1604">[ date ]</a>
              <a href="thread.html#1604">[ thread ]</a>
              <a href="subject.html#1604">[ subject ]</a>
              <a href="author.html#1604">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
