<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Adding service to virtual path
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Adding%20service%20to%20virtual%20path&In-Reply-To=20101021204733.GA2437%40murdoc">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004554.html">
   <LINK REL="Next"  HREF="004558.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Adding service to virtual path</H1>
    <B>Eric Chamberlain</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Adding%20service%20to%20virtual%20path&In-Reply-To=20101021204733.GA2437%40murdoc"
       TITLE="[Twisted-web] Adding service to virtual path">Eric.Chamberlain at zonarsystems.com
       </A><BR>
    <I>Thu Oct 21 17:20:41 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="004554.html">[Twisted-web] Adding service to virtual path
</A></li>
        <LI>Next message: <A HREF="004558.html">[Twisted-web] Adding service to virtual path
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4555">[ date ]</a>
              <a href="thread.html#4555">[ thread ]</a>
              <a href="subject.html#4555">[ subject ]</a>
              <a href="author.html#4555">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>That was it.  If you lived near by I'd buy you a beer.  Thank you!


On Oct 21, 2010, at 1:47 PM, Marco Giusti wrote:

On Thu, Oct 21, 2010 at 01:17:36PM -0700, Eric Chamberlain wrote:
I'm trying to add a single service to a virtual path like <A HREF="http://localhost:8080/geospatial/geocoder/XMLRPC.">http://localhost:8080/geospatial/geocoder/XMLRPC.</A>

Version info:
Twisted: 9.0
Python: 2.6

The following code does not work:

root = resource.Resource()
srv = XMLRPCGeocoder()
root.putChild(&quot;geospatial/geocoder/XMLRPC&quot;, srv)

When I attempt to access the service, twisted gives the following error:
Request failed: &lt;ProtocolError for
localhost:8080/geospatial/geocoder/XMLRPC: 404 Not Found&gt;

You should put a resource for each component of the url:

root = resource.Resource()
geospatial = resource.Resource()
root.putChild('geospatial', geospatial)
geocoder = resource.Resource()
geospatial.putChild('geocoder', geocoder)
xmlrpc = XMLRPCGeocoder()
geocoder.putChild('XMLRPC', xmlrpc)

I didn't double checked, but I am pretty sure that this will works.

Looking at twisted.web.resource.Resource's source code, all it does is
add the path to a hash array and returns nothing...

Yes, putChild does this, but this is not how path traversal works. The
path is splitted in segments which are harvested one after the other
until a resource is returned.

m.

--
Dalle virt&#249; che si esigono in un domestico, l'Eccellenza Vostra conosce molti
padroni degni d'esser servitori?
-- Pierre Augustin Caron de Beaumarchais

_______________________________________________
Twisted-web mailing list
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">Twisted-web at twistedmatrix.com</A>&lt;mailto:<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">Twisted-web at twistedmatrix.com</A>&gt;
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web</A>


________________________________
Confidentiality Notice: This e-mail may contain proprietary information some of which may be legally privileged. It is for the intended recipient(s) only. If you believe that it has been sent to you in error, please notify the sender by reply e-mail and delete the message. Any disclosure, copying, distribution or use of this information by someone other than the intended recipient(s) is prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20101021/50dec48d/attachment.htm">http://twistedmatrix.com/pipermail/twisted-web/attachments/20101021/50dec48d/attachment.htm</A> 
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004554.html">[Twisted-web] Adding service to virtual path
</A></li>
	<LI>Next message: <A HREF="004558.html">[Twisted-web] Adding service to virtual path
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4555">[ date ]</a>
              <a href="thread.html#4555">[ thread ]</a>
              <a href="subject.html#4555">[ subject ]</a>
              <a href="author.html#4555">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
