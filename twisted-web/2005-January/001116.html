<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] load balancing and performance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20load%20balancing%20and%20performance&In-Reply-To=41FBC8FB.7050205%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001107.html">
   <LINK REL="Next"  HREF="001110.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] load balancing and performance</H1>
    <B>Andrea Arcangeli</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20load%20balancing%20and%20performance&In-Reply-To=41FBC8FB.7050205%40twistedmatrix.com"
       TITLE="[Twisted-web] load balancing and performance">andrea at cpushare.com
       </A><BR>
    <I>Sun Jan 30 04:49:47 MST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001107.html">[Twisted-web] load balancing and performance
</A></li>
        <LI>Next message: <A HREF="001110.html">[Twisted-web] load balancing and performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1116">[ date ]</a>
              <a href="thread.html#1116">[ thread ]</a>
              <a href="subject.html#1116">[ subject ]</a>
              <a href="author.html#1116">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, Jan 29, 2005 at 07:33:47PM +0200, Tommi Virtanen wrote:
&gt;<i> Andrea Arcangeli wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt;3) the load balancer misses an API with the real webserver to pass up the
</I>&gt;<i> &gt;  client IP address, that's annoying, especially the logs gets screwed
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;
</I>&gt;<i> We need that for reverse proxying, too.
</I>&gt;<i> 
</I>&gt;<i> My current idea is to replace the /vhost/http/hostname[:port]/path
</I>&gt;<i> style with 
</I>&gt;<i> /vhost;host=hostname[;port=port][;scheme=https][;client=1.2.3.4]/path
</I>&gt;<i> to allow passing arbitrary variables. That way it's easy to extend in 
</I>&gt;<i> the future.
</I>
Isn't that going to waste more resources and isn't it much more complex
than the approach I've taken to simply pass a variable to
appserver.NevowSite(proxyPeer = 1). Perhaps proxyPeer isn't the right
name for the variable but you get the idea.

Now my patch is too dirty to even think at applying it, but it still
shows the place to touch and I didn't need to play with vhost
complexity, I keep the trigger as a parameter to NevowSite (the literal
parameter isn't implemented yet, and that's why it clearly cannot be
applied).

In theory banana could pass down the whole object returned by getPeer()
from the load balancer to the http server, but I was scared to hurt
performance by using banana, and I'm only dealing with .host and .port
which I'm sure will go fast.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001107.html">[Twisted-web] load balancing and performance
</A></li>
	<LI>Next message: <A HREF="001110.html">[Twisted-web] load balancing and performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1116">[ date ]</a>
              <a href="thread.html#1116">[ thread ]</a>
              <a href="subject.html#1116">[ subject ]</a>
              <a href="author.html#1116">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
