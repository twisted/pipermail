<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] livepage breaks after reload
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20livepage%20breaks%20after%20reload&In-Reply-To=1106755000.25740.21.camel%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001095.html">
   <LINK REL="Next"  HREF="001097.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] livepage breaks after reload</H1>
    <B>noema</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20livepage%20breaks%20after%20reload&In-Reply-To=1106755000.25740.21.camel%40localhost.localdomain"
       TITLE="[Twisted-web] livepage breaks after reload">mailinglists at shechen.at
       </A><BR>
    <I>Wed Jan 26 11:29:45 MST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001095.html">[Twisted-web] livepage breaks after reload
</A></li>
        <LI>Next message: <A HREF="001097.html">[Twisted-web] livepage breaks after reload
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1096">[ date ]</a>
              <a href="thread.html#1096">[ thread ]</a>
              <a href="subject.html#1096">[ subject ]</a>
              <a href="author.html#1096">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> You're locate child should look something more like ...
</I>&gt;<i> 
</I>&gt;<i> def locateChild(self, context, segments):
</I>&gt;<i> 
</I>&gt;<i>     # Do whatever you need to do here, probably returning
</I>&gt;<i>     # a resource and the remaining segments.
</I>&gt;<i> 
</I>&gt;<i>     # I don't know what it is so let Page (my subclass) try.
</I>&gt;<i>     return rend.Page.locateChild(self, context, segments)
</I>

I am not sure I fully understand what you mean. Am I not exactly doing 
what you are suggesting?!  I return a resource and the remaining 
segments. Just that in my case the resource is the current resource 
itself and the remaining segments are empty. (to make any child valid 
and be handled by MyPage (which it does just not with livepage support))

 &gt; return rend.Page.locateChild(self, context, segments)

Isn't this returned/called anyways if I wouldn't overwrite the inherited 
locateChild methode.



&gt;&gt;<i>What follows is some code that illustrates exactly that. Javascript 
</I>&gt;&gt;<i>events come perfectly through until I uncommend the localChild methode.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>#noema
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>#################### START OF .TAC FILE ########################
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>import random
</I>&gt;&gt;<i>from twisted.application import service, internet
</I>&gt;&gt;<i>from nevow import loaders, rend, tags, livepage, url
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>class MyPage(rend.Page):
</I>&gt;&gt;<i>     addSlash = True
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     #def locateChild(self, context, segments):
</I>&gt;&gt;<i>     #    #store the rest of the url for any kind of manual processing
</I>&gt;&gt;<i>     #    self.postpath = segments
</I>&gt;&gt;<i>     #    return self, ()
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     def onLinkAction(self, client):
</I>&gt;&gt;<i>         client.set('atag',
</I>&gt;&gt;<i>             random.choice(('one', 'two', 'three', 'four', 'five')))
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     def render_link(self, context, data):
</I>&gt;&gt;<i>         return tags.a(onclick=livepage.handler(self.onLinkAction),
</I>&gt;&gt;<i>                     href=url.here, id=&quot;atag&quot;)['click!']
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     def render_glue(self, context, data):
</I>&gt;&gt;<i>         return livepage.glue
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     docFactory = loaders.stan(
</I>&gt;&gt;<i>     tags.html[
</I>&gt;&gt;<i>         tags.head[
</I>&gt;&gt;<i>             tags.title[&quot;mypage&quot;],
</I>&gt;&gt;<i>           ],
</I>&gt;&gt;<i>         tags.body[
</I>&gt;&gt;<i>             tags.div[
</I>&gt;&gt;<i>                 render_link
</I>&gt;&gt;<i>             ],
</I>&gt;&gt;<i>             tags.span(render=render_glue)
</I>&gt;&gt;<i>         ]
</I>&gt;&gt;<i>     ])
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>application = service.Application('mypage')
</I>&gt;&gt;<i>internet.TCPServer(8080, livepage.LiveSite(MyPage()))\
</I>&gt;&gt;<i>     .setServiceParent(application)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>#################### END OF .TAC FILE ##########################
</I>

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001095.html">[Twisted-web] livepage breaks after reload
</A></li>
	<LI>Next message: <A HREF="001097.html">[Twisted-web] livepage breaks after reload
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1096">[ date ]</a>
              <a href="thread.html#1096">[ thread ]</a>
              <a href="subject.html#1096">[ subject ]</a>
              <a href="author.html#1096">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
