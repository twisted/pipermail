<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] html cache with timeout
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20html%20cache%20with%20timeout&In-Reply-To=20050130152809.GO10440%40opteron.random">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001121.html">
   <LINK REL="Next"  HREF="001130.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] html cache with timeout</H1>
    <B>Andrea Arcangeli</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20html%20cache%20with%20timeout&In-Reply-To=20050130152809.GO10440%40opteron.random"
       TITLE="[Twisted-web] html cache with timeout">andrea at cpushare.com
       </A><BR>
    <I>Sun Jan 30 15:22:36 MST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001121.html">[Twisted-web] html cache with timeout
</A></li>
        <LI>Next message: <A HREF="001130.html">[Twisted-web] html cache with timeout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1122">[ date ]</a>
              <a href="thread.html#1122">[ thread ]</a>
              <a href="subject.html#1122">[ subject ]</a>
              <a href="author.html#1122">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I did some benchmarking with the last patch applied, and there's
not really a significant benefit anymore from the load balancer with
this patch.  Without caching (at 6/7 req per second) load balancing was
a net 100% improvement, now it's down to a 23.5% improvement in terms of
req per second.

ab2 -n 1000 -c 100 localhost:8080/ | grep 'Requests
Requests per second:    224.73 [#/sec] (mean)
ab2 -n 1000 -c 100 localhost:8081/ | grep 'Requests
Requests per second:    225.18 [#/sec] (mean)
ab2 -n 1000 -c 100 localhost:8079/ | grep 'Requests
Requests per second:    278.22 [#/sec] (mean)

The load balancer was on port 79 and it balanced the load across 8080
and 8081 on a two-way through loopback interface. Probably on a 4-way it
would make more difference since the load balancer itself takes some
cpu.

The nice thing is that the above is still a completely dynamic page, but
it changes now at most once every 10 seconds, which is exactly what I
need.

Overall this is a much superior approach and much simpler to setup if compared
to the reverse cache proxying IMHO, and it should perform better too
since it avoids the two context switches between proxy -&gt; server -&gt;
proxy.

So the next improvement on top of this would be replace compy with
zope.interfaces for the very dynamic ssl part that cannot be cached at
all.

Thanks! ;)

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001121.html">[Twisted-web] html cache with timeout
</A></li>
	<LI>Next message: <A HREF="001130.html">[Twisted-web] html cache with timeout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1122">[ date ]</a>
              <a href="thread.html#1122">[ thread ]</a>
              <a href="subject.html#1122">[ subject ]</a>
              <a href="author.html#1122">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
