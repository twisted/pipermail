<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] pgasync (was: /freeform_post!!random causes
	exceptions)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20pgasync%20%28was%3A%20/freeform_post%21%21random%20causes%0A%09exceptions%29&In-Reply-To=A3470774-6994-11D9-B76D-000A95A50FB2%40fuhm.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001052.html">
   <LINK REL="Next"  HREF="001056.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] pgasync (was: /freeform_post!!random causes
	exceptions)</H1>
    <B>Andrea Arcangeli</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20pgasync%20%28was%3A%20/freeform_post%21%21random%20causes%0A%09exceptions%29&In-Reply-To=A3470774-6994-11D9-B76D-000A95A50FB2%40fuhm.net"
       TITLE="[Twisted-web] pgasync (was: /freeform_post!!random causes
	exceptions)">andrea at cpushare.com
       </A><BR>
    <I>Tue Jan 18 18:35:07 MST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001052.html">[Twisted-web] pgasync (was: /freeform_post!!random causes
	exceptions)
</A></li>
        <LI>Next message: <A HREF="001056.html">[Twisted-web] pgasync (was: /freeform_post!!random causes
	exceptions)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1054">[ date ]</a>
              <a href="thread.html#1054">[ thread ]</a>
              <a href="subject.html#1054">[ subject ]</a>
              <a href="author.html#1054">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Jan 18, 2005 at 04:05:09PM -0500, James Y Knight wrote:
&gt;<i> Or as a more likely example, you would feel free to make blocking calls 
</I>&gt;<i> to (and therefore expect non-deferred results from) curs.execute() and 
</I>&gt;<i> curs.fetch(). Which of course, *all* current code written for use with 
</I>&gt;<i> runInteraction does!
</I>
Ok, I didn't know they were returning a deferred (from J example it
looked like .execute returned void, but anyway I missed .fetch requires
deferred). I'm also using .fetch() in the runInteration callback of
course.

Perhaps it could be adapted with minimal modifications with
waitfordeferred + yield by checking if the return value of exec/fetch is
an instance of a deferred object? I ack I will have to change my code
somehow, but still I would like to write code that works with both
pgasync and adbapi, so the closest the pgasync2adbapi wrapper gets to
adbapi, the less messy code I will have to write.  While I'd like to
experiment with pgasync I must be able to go back to adbapi anytime.

So feel free to implement runInteration with a slightly different
semantic in the wrapper, you won't have to write the big fat warning
since the deferred at runtime will break executon of old code, and
adapting that bit by checking if the retval is a deferred, shouldn't be
too bad. And all other calls would be compatible. So it still looks
reasonable to have a wrapper.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001052.html">[Twisted-web] pgasync (was: /freeform_post!!random causes
	exceptions)
</A></li>
	<LI>Next message: <A HREF="001056.html">[Twisted-web] pgasync (was: /freeform_post!!random causes
	exceptions)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1054">[ date ]</a>
              <a href="thread.html#1054">[ thread ]</a>
              <a href="subject.html#1054">[ subject ]</a>
              <a href="author.html#1054">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
