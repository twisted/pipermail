<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] pgasync (was: /freeform_post!!random causes
	exceptions)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20pgasync%20%28was%3A%20/freeform_post%21%21random%20causes%0A%09exceptions%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001050.html">
   <LINK REL="Next"  HREF="001052.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] pgasync (was: /freeform_post!!random causes
	exceptions)</H1>
    <B>J Turner</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20pgasync%20%28was%3A%20/freeform_post%21%21random%20causes%0A%09exceptions%29&In-Reply-To="
       TITLE="[Twisted-web] pgasync (was: /freeform_post!!random causes
	exceptions)">jamwt-twistedlist at jamwt.com
       </A><BR>
    <I>Tue Jan 18 12:40:52 MST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001050.html">[Twisted-web] Sample code to run twisted web server
</A></li>
        <LI>Next message: <A HREF="001052.html">[Twisted-web] pgasync (was: /freeform_post!!random causes
	exceptions)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1051">[ date ]</a>
              <a href="thread.html#1051">[ thread ]</a>
              <a href="subject.html#1051">[ subject ]</a>
              <a href="author.html#1051">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Jan 18, 2005 at 02:24:09PM +0100, Andrea Arcangeli wrote:
&gt;<i> &gt; I'm not a huge fan of *encouraging* the use of adbapi in new projects,
</I>&gt;<i> &gt; however.  DB API is used by every single other project.  It's not really
</I>&gt;<i> &gt; me that invented a new API.  :)
</I>&gt;<i> 
</I>&gt;<i> ;) The point is that I hava to depend on the twisted API for my app, not
</I>&gt;<i> on DB API. There is no way I can handle an unstable API for the DB side
</I>&gt;<i> while developing my app, the overhead would be too huge, I don't have
</I>&gt;<i> time to maintain two APIs and adbapi is the only one I'm confortable to
</I>&gt;<i> depend right now. I choosed python only to go in production as fast as I
</I>&gt;<i> possibly can, I've truly no time to help on what's not strictly need for
</I>&gt;<i> my app, not more than answering these emails ;).
</I>
DB API is the API used by all the synchronous modules, which probably
represent 99.9% of the python database code out there.  There are two
schools of thought on this one:

 1.) Do it adbapi style to play well with legacy Twisted code, the
     twisted way

 2.) Keep a very DB API-like setup to try to merge Twisted db
     development back toward the standard used by the rest of the python
     community (but with callbacks and release()).

runQuery and runOperation are nice, and calls like those should be added
in some clean way to pgasync, IMO.  However, please, please use a cursor
and do it the db api way if you're doing more than one execute(), and
you want any kind of real transactional capability.  adbapi doesn't
really facilitate transactions all that well, unless you retrieve a
cursor in runInteraction, and hey--cursors!  Here we are back at DB API
anyway.  (Also the problems with runInteraction, that I explain below.)

I'm just not sure how fully to embrace adbapi, and how to resolve the
&quot;right&quot; API for pgasync.  But I need to figure it out soon, because the
protocol layer has been pretty stable for awhile now, and I'm already
using pgasync in some production code on my end.  I'd like to stop all
this API shuffling ASAP.

&gt;<i> &gt; Plus, I cannot make a true runInteraction, since the called function is
</I>&gt;<i> &gt; assumed to be executed in a thread.  As far as runQuery() goes, that's
</I>&gt;<i> &gt; basically connection.exFetch().  And runOperation is a trivial
</I>&gt;<i> &gt; addition...
</I>&gt;<i> 
</I>&gt;<i> What's the difference between running it in a thread or not?
</I>
runInteraction takes a function as an argument.  Traditionally,
this function was always run in a thread, so you could be free to, for
example, make a blocking call using urllib.urlopen or something.  While
pgasync could call the function that runInteraction passes to it, that
function could *not* block.

pgasync doesn't make a thread pool, and it won't (ever) run anything on a
thread.  That was the principal goal when I started the project: Twisted
is async, so I want it all async.

 - jamwt

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001050.html">[Twisted-web] Sample code to run twisted web server
</A></li>
	<LI>Next message: <A HREF="001052.html">[Twisted-web] pgasync (was: /freeform_post!!random causes
	exceptions)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1051">[ date ]</a>
              <a href="thread.html#1051">[ thread ]</a>
              <a href="subject.html#1051">[ subject ]</a>
              <a href="author.html#1051">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
