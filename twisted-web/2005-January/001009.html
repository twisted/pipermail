<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] /freeform_post!!random causes exceptions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20/freeform_post%21%21random%20causes%20exceptions&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001008.html">
   <LINK REL="Next"  HREF="001010.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] /freeform_post!!random causes exceptions</H1>
    <B>Andrea Arcangeli</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20/freeform_post%21%21random%20causes%20exceptions&In-Reply-To="
       TITLE="[Twisted-web] /freeform_post!!random causes exceptions">andrea at cpushare.com
       </A><BR>
    <I>Mon Jan 10 03:18:55 MST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001008.html">[Twisted-web] minor compile/typo fix
</A></li>
        <LI>Next message: <A HREF="001010.html">[Twisted-web] /freeform_post!!random causes exceptions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1009">[ date ]</a>
              <a href="thread.html#1009">[ thread ]</a>
              <a href="subject.html#1009">[ subject ]</a>
              <a href="author.html#1009">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This fixes a server exception that you can trigger by using an url like
the one in subject on a page that misses the binding.

This fixed the problem for my application, it's probably the right fix
too. I noticed it after logging out of the session and pressing some
back on the web browser, the forms that were valid inside the account,
weren't valid in the guest area and caused exceptions.

BTW, I wrote an exception handler that sends me any exception by email
and redirects the user to a nice message (so you can debug any problem
before people complains and you don't show the sensitive data to the
user) if the client IP is != localhost (so you can still debug it great
with the formatter in localhost). If anybody wants to see the code or to
merge it into nevow feel free to ask (though it depends on twisted for
delivering the email).

Index: nevow/rend.py
===================================================================
--- nevow/rend.py	(revision 1057)
+++ nevow/rend.py	(working copy)
@@ -127,7 +127,8 @@
             ctx.remember(request, inevow.IRequest)
             cf = iformless.IConfigurableFactory(self)
             c = cf.locateConfigurable(ctx, configurableName)
-            return self.webFormPost(request, self, c, ctx, bindingName, request.args)
+            if c:
+                return self.webFormPost(request, self, c, ctx, bindingName, request.args)
         return NotFound
 
 

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001008.html">[Twisted-web] minor compile/typo fix
</A></li>
	<LI>Next message: <A HREF="001010.html">[Twisted-web] /freeform_post!!random causes exceptions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1009">[ date ]</a>
              <a href="thread.html#1009">[ thread ]</a>
              <a href="subject.html#1009">[ subject ]</a>
              <a href="author.html#1009">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
