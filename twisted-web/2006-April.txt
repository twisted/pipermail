From nsavard at mapgears.com  Wed Apr  5 08:54:40 2006
From: nsavard at mapgears.com (Normand Savard)
Date: Wed Apr  5 08:54:44 2006
Subject: [Twisted-web] [Twisted-Python]How to display python script output
	and php path
Message-ID: <4433CC20.9020902@mapgears.com>

I'm using an existing twisted python script to serve my Web pages (see 
below) on Linux.  When I set the URL to point to a python script (see 
example below), the script executes well.  I see the output result in 
the shell window but nothing is shown in the browser window.  Could you 
point me out what is missing in this script to display the output of a 
script?  I looked in the mailing list archive and could not find my answer.

And how could I change the filter path to the php executable.  Actually 
the path is set to "/usr/bin/php4" and I want to set it to 
"/usr/local/bin/php".

Thanks.

------------------------------------------------------
Script:


import sys
 
if sys.platform == 'win32':
    from twisted.internet import win32eventreactor
    win32eventreactor.install()
     
from twisted.python import log
from twisted.internet import reactor
from twisted.web import static, server, twcgi, script, xmlrpc, resource
from twisted.internet import utils
import os
 
import Interpreter
import Dispatcher
 
def main():
 
    log.startLogging(sys.stdout)
     
    print "Starting up Selenium Server..."
    root = resource.Resource()
     
    # The proxy server (aka "The Funnel")
    if sys.platform == 'win32':
        path = os.path.join(os.getcwd(),"cgi-bin","nph-proxy.exe")
    else:
        path = os.path.join(os.getcwd(),"cgi-bin","nph-proxy.cgi")
 
    proxy = twcgi.CGIScript(path)
    root.putChild("AUT",proxy)
     
    #The followoing are all available from /selenium-driver/
    #  * Selenium BrowserBot html, css, and javascript (/selenium-driver/*)
    #  * Selenese driver    (/selenium-driver/driver/)
    #  * XML-RPC listener   (/selenium-driver/RP2/)
    driver = static.File("./selenium_driver")
    driver.ignoreExt('.rpy')
    driver.indexNames=['index.rpy']
    driver.processors = {'.rpy': script.ResourceScript,
                         '.php': twcgi.PHPScript,
                         '.py': script.PythonScript}
 
    root.putChild('selenium-driver', driver)
     
    reactor.listenTCP(10001, server.Site(root))
    reactor.run()
 
if __name__ == '__main__':
    main()


---------------------------
Example of script:

#!/usr/bin/env python
  
print 'Allo'
[

From sesquile at gmail.com  Wed Apr  5 13:27:30 2006
From: sesquile at gmail.com (m h)
Date: Wed Apr  5 13:27:33 2006
Subject: [Twisted-web] Twisted and WSGI...
Message-ID: <e36b84ee0604051127n27763bacnbbe4e4587772687a@mail.gmail.com>

Hi Folks-

I'm new to this list.  (Am beginning to think more about learning
twisted... for the third time ;) ).  I've got a question for you all
and hope that you don't take it the wrong way.  It's not meant to be
flame bait.

As WSGI is going into python 2.5, I was wondering what the general
consensus is among twisted web devs about it?  Does the WSGI model map
well into twisted's asynchronous model?  Does twisted already have
everything it needs, so WSGI doesn't bring much to the table?

It appears that as AJAX becomes more popular then the asynchronous
model might scale better with many small requests.  Say I have a WSGI
app and I want to port it to twisted.  How easy is that?  (I know
there is a twisted wsgi module)  Do I just need to wrap some logic in
deferreds?

Are any twisted people using WSGI?

Again, I'm just interested in hearing your constructive thoughts. 
Google didn't turn up much on the subject.

thanks,

-matt

From ldanielburr at mac.com  Wed Apr  5 12:48:23 2006
From: ldanielburr at mac.com (L. Daniel Burr)
Date: Wed Apr  5 13:48:29 2006
Subject: [Twisted-web] Twisted and WSGI...
In-Reply-To: <e36b84ee0604051127n27763bacnbbe4e4587772687a@mail.gmail.com>
References: <e36b84ee0604051127n27763bacnbbe4e4587772687a@mail.gmail.com>
Message-ID: <op.s7js6xwe3oj628@l-daniel-burrs-powerbook-g4-17.local>

On Wed, 05 Apr 2006 14:27:30 -0400, m h <sesquile@gmail.com> wrote:

> Hi Folks-
>
> I'm new to this list.  (Am beginning to think more about learning
> twisted... for the third time ;) ).  I've got a question for you all
> and hope that you don't take it the wrong way.  It's not meant to be
> flame bait.
>
> As WSGI is going into python 2.5, I was wondering what the general
> consensus is among twisted web devs about it?  Does the WSGI model map
> well into twisted's asynchronous model?  Does twisted already have
> everything it needs, so WSGI doesn't bring much to the table?

In my opinion, no.  WSGI doesn't deal with the asynchronous model at
all.  The original author, Phillip Eby, noted that every time he tried
to figure out what async WSGI would look like, he ended up with something
like twisted or PEAK anyway.

In general, WSGI seems to have caught on with people who like threaded
servers.  I honestly see zero value in it if you are going to use an
integration toolkit like twisted.

> It appears that as AJAX becomes more popular then the asynchronous
> model might scale better with many small requests.  Say I have a WSGI
> app and I want to port it to twisted.  How easy is that?  (I know
> there is a twisted wsgi module)  Do I just need to wrap some logic in
> deferreds?
>

If you want to do AJAX-y things, then you want Athena, which runs on
twisted, and does even more than run-of-the-mill AJAX.  Google for
"comet" and you'll get an idea of the 2-way web functionality that
Athena can provide.

> Are any twisted people using WSGI?

Lord, I hope not.  The Zope 3 team runs their app-server on top of
twisted via WSGI, but they are the only ones I know of.

> Again, I'm just interested in hearing your constructive thoughts.
> Google didn't turn up much on the subject.
>
> thanks,
>
> -matt

Hope this helps,

Daniel

From general at eepatents.com  Wed Apr  5 14:01:39 2006
From: general at eepatents.com (Ed Suominen)
Date: Wed Apr  5 14:01:44 2006
Subject: [Twisted-web] Twisted and WSGI...
In-Reply-To: <e36b84ee0604051127n27763bacnbbe4e4587772687a@mail.gmail.com>
References: <e36b84ee0604051127n27763bacnbbe4e4587772687a@mail.gmail.com>
Message-ID: <44341413.4020508@eepatents.com>

m h wrote:
> I'm new to this list.  (Am beginning to think more about learning
> twisted... for the third time ;) ).  I've got a question for you all
> and hope that you don't take it the wrong way.  It's not meant to be
> flame bait.

Don't worry, I don't see how it could remotely be considered anything
but an honest and constructive inquiry!

> As WSGI is going into python 2.5, I was wondering what the general
> consensus is among twisted web devs about it?  Does the WSGI model map
> well into twisted's asynchronous model?  Does twisted already have
> everything it needs, so WSGI doesn't bring much to the table?

For a Twisted HTTP server (web2) to serve as a WSGI gateway and run a
WSGI application, the application has to either operate under the
Twisted non-blocking model or has to be run in a thread. The latter is
what's being done with everything run under twisted.web2.wsgi right now;
the WSGI Resource object returns the result of a deferToThread(f) where
f is the potentially blocking WSGI app.

However, you could write your WSGI app in a way that quickly returns a
deferred to its output and then crank away at its leisure with some
Twisted-friendly technique like iterations of reactor.callLater(). (The
Twisted devs may correct me and suggest more Twisted-friendly techniques
for "cranking away" at something...) The advantage of the async approach
would be (1) it's more in tune with overall Twisted approach, and (2)
you could have partial results start to show up on the page before the
WSGI app is completely done producing them.

> It appears that as AJAX becomes more popular then the asynchronous
> model might scale better with many small requests.  Say I have a WSGI
> app and I want to port it to twisted.  How easy is that?  (I know
> there is a twisted wsgi module)  Do I just need to wrap some logic in
> deferreds?

Since twisted.web2.wsgi currently runs the WSGI app in a thread (and
will no doubt keep the option of doing so even if it broadens to allow
for async WSGI apps), it's very simple. You just let your app block all
it wants, and the deferred that results from deferToThread will fire
when it's done.

> Are any twisted people using WSGI?

Yes, I am. I use it to run Trac over Twisted.web2 at my
http://foss.eepatents.com site. You can see both an example of it
working and some pertinent code at
http://foss.eepatents.com/DynamicSite/. That is, by the way, one of
several virtual-host sites all running from a single instance of
DynamicSite, my same twisted.web2 HTTP server.

Good luck!

-Ed Suominen


From jim at zope.com  Wed Apr  5 14:04:21 2006
From: jim at zope.com (Jim Fulton)
Date: Wed Apr  5 14:03:04 2006
Subject: [Twisted-web] Twisted and WSGI...
In-Reply-To: <e36b84ee0604051127n27763bacnbbe4e4587772687a@mail.gmail.com>
References: <e36b84ee0604051127n27763bacnbbe4e4587772687a@mail.gmail.com>
Message-ID: <443414B5.60805@zope.com>

m h wrote:
> Hi Folks-
> 
> I'm new to this list.  (Am beginning to think more about learning
> twisted... for the third time ;) ).  I've got a question for you all
> and hope that you don't take it the wrong way.  It's not meant to be
> flame bait.

I'm not a Twisted developer, so no worries. :)

> As WSGI is going into python 2.5, I was wondering what the general
> consensus is among twisted web devs about it?  Does the WSGI model map
> well into twisted's asynchronous model? 

Not as well as it should IMO.  There seems to be some disdain
for asynchronous servers on the WSGI list.  I tried to
advocate on the WSGI list for better support for asynchronous
servers, especially wrt threading issues.

> Does twisted already have
> everything it needs, so WSGI doesn't bring much to the table?

WSGI makes it much easier for applications to leverage Twisted,
so it increases Twisted's potential user base.

> It appears that as AJAX becomes more popular then the asynchronous
> model might scale better with many small requests. 

An asynchronous model works well for many requests period,
whether they are large or small.

> Say I have a WSGI
> app and I want to port it to twisted.  How easy is that?  (I know
> there is a twisted wsgi module)

Trivial.

>  Do I just need to wrap some logic in deferreds?

No. You don't have to do any twisted programming at all to use the
web server via WSGI.

IMO, to get the full scalability benefits you want, you may
need to address some threading issues.  You might look at the
Zope 3 integration, which isn't as clean as it ought to me.

> Are any twisted people using WSGI?

I don't know. Zope 3 is using it. Zope 2 will be using it in
the future.  I don't think we count as Twisted people.
(Although we might count as twisted people. ;)

Jim

-- 
Jim Fulton           mailto:jim@zope.com       Python Powered!
CTO                  (540) 361-1714            http://www.python.org
Zope Corporation     http://www.zope.com       http://www.zope.org


From ianb at colorstudy.com  Wed Apr  5 14:39:36 2006
From: ianb at colorstudy.com (Ian Bicking)
Date: Wed Apr  5 14:40:24 2006
Subject: [Twisted-web] Twisted and WSGI...
In-Reply-To: <443414B5.60805@zope.com>
References: <e36b84ee0604051127n27763bacnbbe4e4587772687a@mail.gmail.com>
	<443414B5.60805@zope.com>
Message-ID: <44341CF8.6050609@colorstudy.com>

Jim Fulton wrote:
>> As WSGI is going into python 2.5, I was wondering what the general
>> consensus is among twisted web devs about it?  Does the WSGI model map
>> well into twisted's asynchronous model? 
> 
> 
> Not as well as it should IMO.  There seems to be some disdain
> for asynchronous servers on the WSGI list.  I tried to
> advocate on the WSGI list for better support for asynchronous
> servers, especially wrt threading issues.

I think "disdain" is too strong.  There's a lack of any complete 
proposal which would work, especially one that doesn't have Deferred or 
other particular bits of code as a prerequesite.  There was discussion a 
long time ago, but it drifted off.  More generally, there's no larger 
consensus on how to do asynchronous programming in Python, though 
there's obvious consensus on how to do synchronous programming (that is: 
with functions).

I remember some discussion about allowing an asynchronous application to 
return '' in the WSGI app response iterator, which would signify a 
yield, but I'm not sure where any ready signal would go.

>> Say I have a WSGI
>> app and I want to port it to twisted.  How easy is that?  (I know
>> there is a twisted wsgi module)
> 
> 
> Trivial.

Which reminds me -- I started doing this in Paste, but got bogged down 
in all the setup and imports I didn't understand, and then subscribed 
here and never followed up.  Can someone provide an example of a simple 
function that would look like:

def serve_with_twisted(hosts, wsgi_app, **kw):
     """Serve wsgi_app indefinitely

     hosts is a list of 'address:port', and wsgi_app is a
     WSGI application.  **kw is... whatever other interesting things
     you might want to use to configure a Twisted server
     """

Then I can lightly wrap that and people could use Twisted with their 
Paste configuration files.

>>  Do I just need to wrap some logic in deferreds?
> 
> 
> No. You don't have to do any twisted programming at all to use the
> web server via WSGI.
> 
> IMO, to get the full scalability benefits you want, you may
> need to address some threading issues.  You might look at the
> Zope 3 integration, which isn't as clean as it ought to me.

Is this related to the threadpool, or are you using backdoors to the 
underlying Twisted server to do some things in an asynchronous manner?


-- 
Ian Bicking  /  ianb@colorstudy.com  /  http://blog.ianbicking.org

From glyph at divmod.com  Wed Apr  5 19:07:55 2006
From: glyph at divmod.com (glyph@divmod.com)
Date: Wed Apr  5 19:07:58 2006
Subject: [Twisted-web] Twisted and WSGI...
In-Reply-To: <44341CF8.6050609@colorstudy.com>
Message-ID: <20060406000755.22481.54226217.divmod.quotient.10521@ohm>

On Wed, 05 Apr 2006 14:39:36 -0500, Ian Bicking <ianb@colorstudy.com> wrote:

>I think "disdain" is too strong.  There's a lack of any complete proposal 
>which would work, especially one that doesn't have Deferred or other 
>particular bits of code as a prerequesite.  There was discussion a long time 
>ago, but it drifted off.  More generally, there's no larger consensus on how 
>to do asynchronous programming in Python, though there's obvious consensus 
>on how to do synchronous programming (that is: with functions).

There is plenty of consensus on how to do asynchronous programming with Python: use Twisted ;-).

>Which reminds me -- I started doing this in Paste, but got bogged down in 
>all the setup and imports I didn't understand, and then subscribed here and 
>never followed up.  Can someone provide an example of a simple function that 
>would look like:

Taking this approach restricts your deployment to be web-only, which eliminates a substantial advantage of Twisted.  It isn't hard to implement, though:

from twisted.web2 import server, wsgi
from twisted.web2.channel import http
from twisted.internet import reactor

>def serve_with_twisted(hosts, wsgi_app, **kw):
>     """Serve wsgi_app indefinitely
>
>     hosts is a list of 'address:port', and wsgi_app is a
>     WSGI application.  **kw is... whatever other interesting things
>     you might want to use to configure a Twisted server
>     """
      factory = http.HTTPFactory(server.Site(wsgi.WSGIResource(app)))
      for hostportpair in hosts:
           host, portstr = hostportpair.split(':')
           port = int(portstr)
           reactor.listenTCP(port, factory, interface=host)
      reactor.run()

This is completely untested, but it should at least get you going in the right direction.

From nico at tekNico.net  Thu Apr  6 05:58:44 2006
From: nico at tekNico.net (Nicola Larosa)
Date: Thu Apr  6 05:58:52 2006
Subject: [Twisted-web] A great discussion...
Message-ID: <4434F464.9040800@tekNico.net>

...by two Lisp guys about web architectural styles, continuations and REST:

Re: Web application design: the REST of the story
http://common-lisp.net/project/ucw/docs/html/rest/rest.html

-- 
Nicola Larosa - http://www.tekNico.net/

Big problems are terrifying. There's an almost physical pain in facing them
. It's like having a vacuum cleaner hooked up to your imagination. All your
initial ideas get sucked out immediately, and you don't have any more, and
yet the vacuum cleaner is still sucking. -- Paul Graham, December 2005


From moof at metamoof.net  Thu Apr  6 06:05:58 2006
From: moof at metamoof.net (Moof)
Date: Thu Apr  6 06:06:06 2006
Subject: [Twisted-web] HTML Tidy and Stan
Message-ID: <bff8eeef0604060405q1c64ed0es65d2443732de7853@mail.gmail.com>

Hiya,

Being relatively new to nevow, I'm findint it a bit of a challenge to
get to grips with. Of late, I've been wantign to look at some of the
generated HTML from the pages I'm producing in my application, and I
find stan's "run it all together" approach a bit confusing to read, so
I've been putting the result through HTML tidy manually.

I then tried to work out how to get nevow to do it automatically, and
the only way I've found it by overriding the finisher in
rend.Page._renderHTTP for when self.buffered is true. This makes me
uneasy, for obvious reasons, and I'm wondering:

* Is there a saner place to put a filter such as HTML tidy?
* Is there a way to get stan to pretty-print its output?

Thanks in advance,
Moof

From corydodt at twistedmatrix.com  Thu Apr  6 10:12:35 2006
From: corydodt at twistedmatrix.com (Cory Dodt)
Date: Thu Apr  6 10:09:25 2006
Subject: [Twisted-web] HTML Tidy and Stan
In-Reply-To: <bff8eeef0604060405q1c64ed0es65d2443732de7853@mail.gmail.com>
References: <bff8eeef0604060405q1c64ed0es65d2443732de7853@mail.gmail.com>
Message-ID: <44352FE3.3060202@twistedmatrix.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Moof wrote:
> Hiya,

> * Is there a way to get stan to pretty-print its output?
>

My favorite, very simple technique for getting nicer output from stan is just
to embed literal newlines: '\n' between elements in the stan tree I'm
generating.  This is almost always good enough to read the source code when
I'm working on a markup problem, and they're innocuous enough to leave in the
production code.


e.g.

T.body['\n',
  T.ol['\n',
    T.li['hahaha'], '\n',
    T.li['yayayay'], '\n', ...


This is particularly useful when you're building a stan tree with lots of
loops, you just add one newline in each iteration.

C
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFENS/i3A5SrXAiHQcRAs8KAJ4s/De+1zSrxR8WZsuP33SXSTpRGACeJOBU
QZ4HhazugzRFtrdajAJrWyE=
=mCPz
-----END PGP SIGNATURE-----

From nsavard at mapgears.com  Fri Apr  7 08:58:24 2006
From: nsavard at mapgears.com (Normand Savard)
Date: Fri Apr  7 08:58:54 2006
Subject: [Twisted-web] How to display python script output	and php path
In-Reply-To: <4433CC20.9020902@mapgears.com>
References: <4433CC20.9020902@mapgears.com>
Message-ID: <44367000.5060607@mapgears.com>

Normand Savard wrote:

> I'm using an existing twisted python script to serve my Web pages (see 
> below) on Linux.  When I set the URL to point to a python script (see 
> example below), the script executes well.  I see the output result in 
> the shell window but nothing is shown in the browser window.  Could 
> you point me out what is missing in this script to display the output 
> of a script?  I looked in the mailing list archive and could not find 
> my answer.
>
> And how could I change the filter path to the php executable.  
> Actually the path is set to "/usr/bin/php4" and I want to set it to 
> "/usr/local/bin/php".
>
> Thanks.
>
Two days ago I sent this post to this list (notice that I removed the 
script to not overload this email)  without any answer maybe because my 
question was not clear enough.  So I try again.  I have a Twisted Web 
server to serve my HTML pages.  When I point my URL to an external 
Python script, the script is executed because I can see the return value 
of this script in the shell where I started Twisted Web.  But the return 
value is not displayed in the browser window.

Does someone know why Twisted Web server does not display the return 
value of my Python script in the browser window? Or what is the output 
stream to print to in my python script for Twisted to display the text 
in the browser?

Any help would be really appreciate.  Or if someone could point me out 
to some Twisted documentation about this topic.

Thanks for your time.

Norm

From exarkun at divmod.com  Fri Apr  7 10:33:39 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Fri Apr  7 10:33:43 2006
Subject: [Twisted-web] How to display python script output	and php path
In-Reply-To: <44367000.5060607@mapgears.com>
Message-ID: <20060407153339.22481.64760327.divmod.quotient.11150@ohm>

On Fri, 07 Apr 2006 09:58:24 -0400, Normand Savard <nsavard@mapgears.com> wrote:
>Normand Savard wrote:
>>I'm using an existing twisted python script to serve my Web pages (see 
>>below) on Linux.  When I set the URL to point to a python script (see 
>>example below), the script executes well.  I see the output result in the 
>>shell window but nothing is shown in the browser window.  Could you point 
>>me out what is missing in this script to display the output of a script?  I 
>>looked in the mailing list archive and could not find my answer.
>>
>>And how could I change the filter path to the php executable.  Actually the 
>>path is set to "/usr/bin/php4" and I want to set it to 
>>"/usr/local/bin/php".
>>
>>Thanks.
>Two days ago I sent this post to this list (notice that I removed the script 
>to not overload this email)  without any answer maybe because my question 
>was not clear enough.  So I try again.  I have a Twisted Web server to serve 
>my HTML pages.  When I point my URL to an external Python script, the script 
>is executed because I can see the return value of this script in the shell 
>where I started Twisted Web.  But the return value is not displayed in the 
>browser window.
>
>Does someone know why Twisted Web server does not display the return value 
>of my Python script in the browser window? Or what is the output stream to 
>print to in my python script for Twisted to display the text in the browser?
>
>Any help would be really appreciate.  Or if someone could point me out to 
>some Twisted documentation about this topic.

If the output is going to a terminal window, it's not being sent to the right place.  I am not sure what kind of external Python script you are trying to use, but it sounds like it is using "print" and expecting the results to end up on a web page.  Generally speaking, this isn't how dynamic resources in Twisted Web work - you need to write something to the request object for it to end up in the browser.

Hope this helps,

Jean-Paul

From nsavard at mapgears.com  Fri Apr  7 10:49:05 2006
From: nsavard at mapgears.com (Normand Savard)
Date: Fri Apr  7 10:49:11 2006
Subject: [Twisted-web] How to display python script output	and php path
In-Reply-To: <20060407153339.22481.64760327.divmod.quotient.11150@ohm>
References: <20060407153339.22481.64760327.divmod.quotient.11150@ohm>
Message-ID: <443689F1.8040006@mapgears.com>

Jean-Paul Calderone wrote:

>
> If the output is going to a terminal window, it's not being sent to 
> the right place.  I am not sure what kind of external Python script 
> you are trying to use, but it sounds like it is using "print" and 
> expecting the results to end up on a web page.  Generally speaking, 
> this isn't how dynamic resources in Twisted Web work - you need to 
> write something to the request object for it to end up in the browser.
>
Thanks for your answer.  Yes I used a simple print in my script.  Could 
you point me out some documentation and/or examples on how to do that?

I appreciate your help.

Norm

From mike at mkp.ca  Sat Apr  8 07:50:07 2006
From: mike at mkp.ca (Mike Pelletier)
Date: Sat Apr  8 07:50:29 2006
Subject: [Twisted-web] [Twisted-Python]How to display python script output
	and php path
In-Reply-To: <4433CC20.9020902@mapgears.com>
References: <4433CC20.9020902@mapgears.com>
Message-ID: <200604080850.07831.mike@mkp.ca>

On Wednesday 05 April 2006 09:54, Normand Savard wrote:
> Example of script:
>
> #!/usr/bin/env python
>
> print 'Allo'

I think this should be:

---
from twisted.web import resource

class AlloResource(resource.Resource):
    def render(self, request):
        return "Allo"

resource = AlloResource()
---

Mike.

From nsavard at mapgears.com  Sat Apr  8 18:06:20 2006
From: nsavard at mapgears.com (Normand Savard)
Date: Sat Apr  8 18:06:25 2006
Subject: [Twisted-web] [Twisted-Python]How to display python script output
	and php path
In-Reply-To: <200604080850.07831.mike@mkp.ca>
References: <4433CC20.9020902@mapgears.com> <200604080850.07831.mike@mkp.ca>
Message-ID: <443841EC.4020001@mapgears.com>

Mike Pelletier wrote:

>On Wednesday 05 April 2006 09:54, Normand Savard wrote:
>  
>
>>Example of script:
>>
>>#!/usr/bin/env python
>>
>>print 'Allo'
>>    
>>
>
>I think this should be:
>
>---
>from twisted.web import resource
>
>class AlloResource(resource.Resource):
>    def render(self, request):
>        return "Allo"
>
>resource = AlloResource()
>---
>
>Mike.
>  
>
Mike,

Thanks a lot.  It will help.

Norm

From nsavard at mapgears.com  Sat Apr  8 18:12:01 2006
From: nsavard at mapgears.com (Normand Savard)
Date: Sat Apr  8 18:12:06 2006
Subject: [Twisted-web] How to display python script output	and php path
In-Reply-To: <20060407153339.22481.64760327.divmod.quotient.11150@ohm>
References: <20060407153339.22481.64760327.divmod.quotient.11150@ohm>
Message-ID: <44384341.9070404@mapgears.com>

Jean-Paul Calderone wrote:

>
> If the output is going to a terminal window, it's not being sent to 
> the right place.  I am not sure what kind of external Python script 
> you are trying to use, but it sounds like it is using "print" and 
> expecting the results to end up on a web page.  Generally speaking, 
> this isn't how dynamic resources in Twisted Web work - you need to 
> write something to the request object for it to end up in the browser.
>
Thanks.  It makes me understand some elements about Twisted I didn't 
understand first.

Norm

From lists at fabis-site.net  Sun Apr  9 07:04:58 2006
From: lists at fabis-site.net (Fabian Steiner)
Date: Sun Apr  9 06:57:43 2006
Subject: [Twisted-web] CGI is not working on windows
Message-ID: <4438F86A.2080002@fabis-site.net>

Hello!

I have written a very small HTTP-Server with CGI-support based on
twisted.web and twisted.web.twcgi. Everything works fine on Linux, but
whenever I want my twisted web server to serve a Python-CGI script on
Windows XP I get the following error: pywintypes.error: (193,
'CreateProcess', '%1 ist keine zul\xe4ssige Win32-Anwendung.')
<http://localhost:81/cgi-bin/request.py#tbend> (saying that %1 is not a
valid win32 application)

In fact, I don't know what I did wrong, my HttpServer.py looks like this:

import sys
from twisted.internet import reactor
from twisted.web import static, server, twcgi
import config

class HttpServer(object):
    def __init__(self, htdocs, directory_indexes=None):
        directory_indexes = None or directory_indexes
        self.HttpServer = static.File(htdocs)
        self.HttpServer.indexNames = ['index.html', 'index.htm',
'start.html', 'start.htm']
        if directory_indexes is not None:
            self.HttpServer.indexNames.extend([index_name for index_name
in directory_indexes])
        self.HttpServer.putChild('cgi-bin',
twcgi.CGIDirectory(config.CGI_DIR))
        self.HttpServer.processors = {'.py': PythonScript}
       
    def run(self, port):
        reactor.listenTCP(port, server.Site(self.HttpServer))
        reactor.run()
       
class PythonScript(twcgi.FilteredScript):
    filter =  r'"C:\Python24\python.exe -u"'

if __name__ == '__main__':
    http = HttpServer(config.HTDOCS_DIR)
    try:
        http.run(81)
    except:
        print 'Can\'t start server. Aborting!'
        sys.exit(1)
       

The Python-CGI-Script which should be served to the client is a simple
"Hello world!" script which runs in the console when called directly.

What did I do wrong? Any hints?

Cheers,
Fabian


From glyph at divmod.com  Sun Apr  9 13:54:23 2006
From: glyph at divmod.com (glyph@divmod.com)
Date: Sun Apr  9 13:54:28 2006
Subject: [Twisted-web] CGI is not working on windows
In-Reply-To: <4438F86A.2080002@fabis-site.net>
Message-ID: <20060409185423.22481.1153395204.divmod.quotient.11811@ohm>

On Sun, 09 Apr 2006 14:04:58 +0200, Fabian Steiner <lists@fabis-site.net> wrote:

>    filter =  r'"C:\Python24\python.exe -u"'

>What did I do wrong? Any hints?

"filter" is used as the executable argument to spawnProcess - which is a string indicating the file to load the program from.  There is no file named 
'"C:\Python24\python.exe -u"' on your computer, presumably it's  "C:\Python24\python.exe".  (Remember that file names can have spaces in them.)

In other words, FilteredScript isn't going to do what you want if you need to add the "-u" argument to Python, either on UNIX or on Windows.  Luckily the one relevant method it implements is only 3 lines long, so it should serve as a good example for your own CGIScript-derived implementation of process filtering.

From lists at fabis-site.net  Sun Apr  9 16:40:01 2006
From: lists at fabis-site.net (Fabian Steiner)
Date: Sun Apr  9 16:32:43 2006
Subject: [Twisted-web] CGI is not working on windows
In-Reply-To: <20060409185423.22481.1153395204.divmod.quotient.11811@ohm>
References: <20060409185423.22481.1153395204.divmod.quotient.11811@ohm>
Message-ID: <44397F31.3000001@fabis-site.net>

glyph@divmod.com schrieb:
> On Sun, 09 Apr 2006 14:04:58 +0200, Fabian Steiner
> <lists@fabis-site.net> wrote:
>
>>    filter =  r'"C:\Python24\python.exe -u"'
>
>> What did I do wrong? Any hints?
>
> "filter" is used as the executable argument to spawnProcess - which is
> a string indicating the file to load the program from.  There is no
> file named '"C:\Python24\python.exe -u"' on your computer, presumably
> it's  "C:\Python24\python.exe".  (Remember that file names can have
> spaces in them.)
>
Ok, this sounds quite reasonable. I added the '-u' parameter since I
have read somewhere that I actually have to do this. But obviously, I
don't have to.
> In other words, FilteredScript isn't going to do what you want if you
> need to add the "-u" argument to Python, either on UNIX or on
> Windows.  Luckily the one relevant method it implements is only 3
> lines long, so it should serve as a good example for your own
> CGIScript-derived implementation of process filtering.
>
So what do I have to do to make this piece of code work? I removed the
'-u' parameter but I still get the same error. Unfortunately, I dont'
have any other ideas either.

I would be glad for another pieces of advice.

Cheers,
Fabian

From lists at fabis-site.net  Mon Apr 10 12:35:06 2006
From: lists at fabis-site.net (Fabian Steiner)
Date: Mon Apr 10 12:27:56 2006
Subject: [Twisted-web] twisted.web and sharing class instances with CGI
	scripts
Message-ID: <443A974A.8060507@fabis-site.net>

Hello!

I am currently working on a quite complicated application (at least for
me) and unfortunately I don't know how to go on.

I wrapped a Windows-dll by using the ctypes module so that I can access
different functions that are used to control a network device (open,
close, write/read values). Now I was asked to write something like a GUI
for it which should be based on a CGI script that calls the different
functions (read/write) with parameters entered in a text-input of a
HTML-Template.
Therefore I wrote a small HTTP-Server class based on twisted.web. In its
constructor the network device is opened (--> the wrapper class is
initiated) and is closed by the server's destructor. Now I need the same
wrapper class instance in my CGI script so that read() and write() can
be called on exactly the same instance - otherwise these methods would
fail since the network device hasn't been opened so far.

Do you have any idea how to solve this problem? I am looking forward to
any responses.

Cheers,
Fabian


From maillists at ivsn.com  Mon Apr 10 12:57:36 2006
From: maillists at ivsn.com (Paul Reznicek)
Date: Mon Apr 10 12:58:12 2006
Subject: [Twisted-web] Open Source Portal Software in Python/Twisted/Nevow
In-Reply-To: <44352FE3.3060202@twistedmatrix.com>
References: <bff8eeef0604060405q1c64ed0es65d2443732de7853@mail.gmail.com>
	<44352FE3.3060202@twistedmatrix.com>
Message-ID: <443A9C90.2050808@ivsn.com>

Look here, maybe it can be helpful for somebody:

    http://portal-os.blogspot.com/

Paul

From glyph at divmod.com  Mon Apr 10 19:44:44 2006
From: glyph at divmod.com (glyph@divmod.com)
Date: Mon Apr 10 19:44:46 2006
Subject: [Twisted-web] twisted.web and sharing class instances with CGI
	scripts
In-Reply-To: <443A974A.8060507@fabis-site.net>
Message-ID: <20060411004444.22481.1170960690.divmod.quotient.12252@ohm>



On Mon, 10 Apr 2006 19:35:06 +0200, Fabian Steiner <lists@fabis-site.net> wrote:
>Do you have any idea how to solve this problem? I am looking forward to
>any responses.

CGIs run in subprocesses.  You can't transfer Python objects into subprocesses without making copies.

The best way to solve this problem would be to rewrite your CGI as a twisted.web resource.  You can then pass the wrapper object to the resource and keep it around, making sure that the same resource object is always returned.

From manlio_perillo at libero.it  Tue Apr 11 10:32:32 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Tue Apr 11 10:31:20 2006
Subject: [Twisted-web] online Nevow examples
Message-ID: <443BCC10.1070304@libero.it>

Regards.

It seems there are some problems with online Nevow examples at
http://nevowexamples.adytum.us/

The test suits fails with a
"Sorry, but I couldn't find the object you requested."

db fails with a
exceptions.NameError: global name 'cf' is not defined

chatola does not work


There exists some other site where to find updated and working examples?


Thanks  Manlio Perillo

From manlio_perillo at libero.it  Tue Apr 11 11:05:40 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Tue Apr 11 11:04:38 2006
Subject: [Twisted-web] online Nevow examples
In-Reply-To: <443BCD5F.7030401@clingfire.net>
References: <443BCC10.1070304@libero.it> <443BCD5F.7030401@clingfire.net>
Message-ID: <443BD3D4.70400@libero.it>

Carl Shimer ha scritto:
> 
> you want http://divmod.org for the latest release and samples.  the best
> way is to download nevow 0.8 and the run the samples yourself.
> 

Yes, but the online examples are good if I want to illustrate Nevow
abilities to another person.




Thanks and regards  Manlio Perillo

From manlio_perillo at libero.it  Tue Apr 11 11:12:36 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Tue Apr 11 11:11:19 2006
Subject: [Twisted-web] Nevow future
Message-ID: <443BD574.4000609@libero.it>

Hi.

I have used Nevow a bit, when it was at 0.4 version.
Now there seems to be a lot of changes, moreover twisted.web2 appears.

What are the plane in the middle term for Nevow?

It will closely integrate with twisted.web2?

It will remain indipendent from the underlying web server?


Now Nevow is realy only usable with twisted.web.

Reverse Proxy is not an option for me (*why* to use two or more
webservers and duplicate HTTP protocol handling?).
Zonme is really safe to use?
Why there is not support for FastCGI (so I can use lighttp)?


Thanks and regards  Manlio Perillo

From exarkun at divmod.com  Tue Apr 11 14:17:31 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Tue Apr 11 14:17:35 2006
Subject: [Twisted-web] Nevow future
In-Reply-To: <443BD574.4000609@libero.it>
Message-ID: <20060411191731.22481.86979626.divmod.quotient.12499@ohm>

On Tue, 11 Apr 2006 14:12:36 -0200, Manlio Perillo <manlio_perillo@libero.it> wrote:
>Hi.
>
>I have used Nevow a bit, when it was at 0.4 version.
>Now there seems to be a lot of changes, moreover twisted.web2 appears.

Actually, quite a lot has remained the same as well.  Many of the core concepts remain the same, many of the APIs remain unchanged, many programs which ran with Nevow 0.4 will continue to run unchanged with 0.8.  However, do notice the "0" at the beginning of these version numbers.  That means "this software is not yet complete, expect some changes".  When there is a 1.x release, you can begin to expect things to stop changing as much.

>
>What are the plane in the middle term for Nevow?
>
>It will closely integrate with twisted.web2?

That's one possibility.

>
>It will remain indipendent from the underlying web server?
>

It isn't independent from the underlying web server now, so saying that it would remain that way doesn't make sense.

Your Nevow applications should remain independent of it, though.

>
>Now Nevow is realy only usable with twisted.web.

Yes.

>
>Reverse Proxy is not an option for me (*why* to use two or more
>webservers and duplicate HTTP protocol handling?).

Because it solves a problem?  Why *not* do this?

>Zonme is really safe to use?

Who knows?  Remember, Nevow comes with no guarantees.  Personally, I wouldn't use it.

>Why there is not support for FastCGI (so I can use lighttp)?

Because no one has implemented it.  Feel free to contribute a FastCGI implementation, if you like.  Efforts might better be spent finishing twisted.web2 (this includes writing documentation, test cases, examples, etc, not just coding) or figuring out how best to port Nevow to web2, since web2 supports FastCGI already.

Jean-Paul

From manlio_perillo at libero.it  Tue Apr 11 14:56:18 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Tue Apr 11 14:55:02 2006
Subject: [Twisted-web] Nevow future
In-Reply-To: <20060411191731.22481.86979626.divmod.quotient.12499@ohm>
References: <20060411191731.22481.86979626.divmod.quotient.12499@ohm>
Message-ID: <443C09E2.9040307@libero.it>

Jean-Paul Calderone ha scritto:
> On Tue, 11 Apr 2006 14:12:36 -0200, Manlio Perillo
> <manlio_perillo@libero.it> wrote:
>> Hi.
>>
>> I have used Nevow a bit, when it was at 0.4 version.
>> Now there seems to be a lot of changes, moreover twisted.web2 appears.
> 
> Actually, quite a lot has remained the same as well.  Many of the core
> concepts remain the same, many of the APIs remain unchanged, many
> programs which ran with Nevow 0.4 will continue to run unchanged with
> 0.8.  
> However, do notice the "0" at the beginning of these version
> numbers.  That means "this software is not yet complete, expect some
> changes".  


Of course!
For this reason I'm waiting some time before fully stud Nevow sources.

What are the major changes?
- direct support for zope.interfaces (and so no more lots of annoying
warnings)
- LivePage -> Athena
- what about formless?

> When there is a 1.x release, you can begin to expect things
> to stop changing as much.
> 

There are previsions?

>>
>> What are the plane in the middle term for Nevow?
>>
>> It will closely integrate with twisted.web2?
> 
> That's one possibility.
> 
>>
>> It will remain indipendent from the underlying web server?
>>
> 
> It isn't independent from the underlying web server now, so saying that
> it would remain that way doesn't make sense.
> 

Well, there is support for WSGI and an implementation with Zomne...

> Your Nevow applications should remain independent of it, though.
> 

I would like to use lighttp as the *only* webserver, and Nevow *only*
for the rendering, session support, and so.

>>
>> Now Nevow is realy only usable with twisted.web.
> 
> Yes.
> 

Ok.

>>
>> Reverse Proxy is not an option for me (*why* to use two or more
>> webservers and duplicate HTTP protocol handling?).
> 
> Because it solves a problem?  Why *not* do this?
> 

I don't like the idea.
Is this really necessary?


>> Zonme is really safe to use?
> 
> Who knows?  Remember, Nevow comes with no guarantees.  Personally, I
> wouldn't use it.
> 

I have found no comments regarding its use.

>> Why there is not support for FastCGI (so I can use lighttp)?
> 
> Because no one has implemented it. 

Well, why?

Is FastCGI really hated or flawed?
The author of twisted.web2.channel.fastcgi seems not to like it.

Moreover I was unable to find some "use cases" of it in an asyncronous
enviroment.

> Feel free to contribute a FastCGI
> implementation, if you like.  Efforts might better be spent finishing
> twisted.web2 (this includes writing documentation, test cases, examples,
> etc, not just coding) or figuring out how best to port Nevow to web2,
> since web2 supports FastCGI already.
> 

Now the twisted.web2 implementation support only the Responder role,
what about the Authorizer and Filter roles?


I'm very interested in this but I'm not an expert.
In the end, is FastCGI really worth of further investigations?



Thanks and regards  ManlioPerillo

From manlio_perillo at libero.it  Tue Apr 11 15:50:43 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Tue Apr 11 15:49:29 2006
Subject: [Twisted-web] test failure of Nevow on Windows XP
Message-ID: <443C16A3.7060402@libero.it>

I have installed Nevow 0.8 with Twisted 2.2.0.

I got:
[FAIL]:
nevow.test.test_json.JavascriptObjectNotationTestCase.testOrdinalRange

  File "F:\home\manlio\...\nevow\test\test_json.py", line 68, in
testOrdinalRange

twisted.trial.unittest.FailTest: ValueError not raised
('"\\ud800\\udc00"' returned)
-------------------------------------------------------------------------------
Ran 538 tests in 20.297s

FAILED (skips=7, expectedFailures=5, failures=1, successes=525)


Moreover, the README, install section, contains an error:
trial has no -v option.



Sorry, but I have not tested the trunk version.



Regards  Manlio Perillo

From exarkun at divmod.com  Tue Apr 11 17:04:05 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Tue Apr 11 17:04:08 2006
Subject: [Twisted-web] test failure of Nevow on Windows XP
In-Reply-To: <443C16A3.7060402@libero.it>
Message-ID: <20060411220405.22481.449056770.divmod.quotient.12542@ohm>

On Tue, 11 Apr 2006 18:50:43 -0200, Manlio Perillo <manlio_perillo@libero.it> wrote:
>I have installed Nevow 0.8 with Twisted 2.2.0.
>
>I got:
>[FAIL]:
>nevow.test.test_json.JavascriptObjectNotationTestCase.testOrdinalRange
>
>  File "F:\home\manlio\...\nevow\test\test_json.py", line 68, in
>testOrdinalRange
>
>twisted.trial.unittest.FailTest: ValueError not raised
>('"\\ud800\\udc00"' returned)

Thanks for reporting this!  (Too bad the test does not give more information).  This particular area is under active development, so this test will probably be quite a bit happier in 0.8.1 or 0.9.  What this failure means is that some extremely obscure characters will not pass between server and client correctly, when used in with Athena.  It's pretty unlikely that you'll encounter this in any application, and when it is fixed, it will be transparent (ie, your app will just magically start supporting those characters).

>
>
>Moreover, the README, install section, contains an error:
>trial has no -v option.
>

And thanks for pointing this out!  I've created a ticket in the issue tracker for fixing it.

Jean-Paul

From glyph at divmod.com  Tue Apr 11 17:10:09 2006
From: glyph at divmod.com (glyph@divmod.com)
Date: Tue Apr 11 17:10:11 2006
Subject: [Twisted-web] Nevow future
In-Reply-To: <443C09E2.9040307@libero.it>
Message-ID: <20060411221009.22481.224910828.divmod.quotient.12546@ohm>



On Tue, 11 Apr 2006 17:56:18 -0200, Manlio Perillo <manlio_perillo@libero.it> wrote:
>Jean-Paul Calderone ha scritto:

>- what about formless?

Pollenation's "Formal" seems to be replacing it as a de-facto standard in the community for people who want form generation.  It may even be distributed with Nevow at some point.  However, formless itself is somewhat of a dead end; while it contains some handy convenience utilities to slap a form on a page, you end up having to do almost as much work to get a decent-looking form with formless as just writing the HTML by hand yourself, and the rules are often implicit and undocumented.

>> When there is a 1.x release, you can begin to expect things
>> to stop changing as much.

>There are previsions?

What is a 'prevision'?

>>> It will remain indipendent from the underlying web server?
>>>
>>
>> It isn't independent from the underlying web server now, so saying that
>> it would remain that way doesn't make sense.

>Well, there is support for WSGI and an implementation with Zomne...

The WSGI support may not work at all.  It is unsupported, undocumented, and there are no tests which import it.

The WSGI support will only realistically work in a Twisted-style environment.  Athena depends explicitly on the reactor, so invoking any Athena-using applications in a non-Twisted context will not work.  Livetest requires the reactor as well, so you will not be able to write nit tests for your application or use any 3rd party fragments which use athena or are tested in this manner.

It might be _possible_ to write a Nevow application through wsgi, but why bother?  Unless you already know Nevow intimately and have some bizarre deployment constraints, it is unlikely that it is the best tool for that job.

"zomne" is a way to run your twisted.web server in "stealth mode" behind another webserver.  It's also untested, and depends on a C component, which I believe the author did as a simple proof of concept to answer the question "but my $5 hosting doesn't let me run a long-running server", not a robust deployment mechanism.

Don't get me wrong, I would love it if there were dedicated maintainers for these use-cases, since I realize they are important to many people.  They just aren't important to *us*, so we're not going to spend time.

>> Your Nevow applications should remain independent of it, though.

>I would like to use lighttp as the *only* webserver, and Nevow *only*
>for the rendering, session support, and so.

lighttpd supports reverse proxies.  Nevow's session support, in nevow.guard, depends on the reactor and twisted.web, so you will be unable to use it otherwise.

>>> Reverse Proxy is not an option for me (*why* to use two or more
>>> webservers and duplicate HTTP protocol handling?).

>> Because it solves a problem?  Why *not* do this?

>I don't like the idea.

Yes but _WHY_ don't you like the idea?  Do you live in some alternate reality where the arrangement of bytes in an HTTP packet has harmful effects but the arrangement of bytes in a FastCGI packet does not?

>Is this really necessary?

No, you could do away with LightTPD and then you wouldn't need a proxy ;-).  (Seriously though LightTPD is unbelievably fast for static content so dealing with the proxy is probably a good idea.)

>>> Why there is not support for FastCGI (so I can use lighttp)?
>>
>> Because no one has implemented it.
>
>Well, why?

We don't need it.  We use twisted web, or reverse proxies, which solve all of the problems you have raised neatly.

>Is FastCGI really hated or flawed?
>The author of twisted.web2.channel.fastcgi seems not to like it.

It is highly complex, and serves no purpose.  What is the goal of FastCGI?  To communicate between a web server and web applications.  I.E. to relay information about HTTP requests between a program which parses HTTP requests, and a program which acts upon the information present in an HTTP request.  Sometimes -- efficiency and security being the primary concerns here -- different programs have to handle different HTTP requests depending on their content, so a front-end server is required.

One way to do this is to reverse-proxy: I.E. take the HTTP request from the browser, identify the program which will handle it, and hand it off to that program in as close to the original format as possible, in standard HTTP, for minimal loss of information.

Another way to do this is the (Fast)CGI model: take the HTTP request, convert it into a random, half-documented sequence of bytes and/or and environment variables, and then send it to a program whose job is to process HTTP requests but, for some reason, cannot contain a parser for HTTP requests but *can* contain a parser for random mashed-up remnants of an HTTP requests over a different protocol.

This is a common mistake, because it seems "simpler" to design your own protocol for talking about HTTP than to use HTTP itself.  It isn't.  In fact, by definition, it cannot be: your new protocol has to provide all the information present in the original HTTP request (or risk breaking applications that depend on some information you did not relay), so in the best case it can be exactly as complex as HTTP.  I wrote something like this in twisted.web.distrib, where I converted the HTTP requests to PB and back again.  While the "automated proxying for users" functionality was cool, I had *just written* an HTTP parser and it was silly not to just use it over a unix socket.  I am pleased to note that web2, when it implements something like web.distrib, will do it the correct way and just make it a regular reverse proxy over a unix socket.

FastCGI itself is also actually harder to parse, contains numerous design errors, and more confusing and inconsistent than HTTP itself.  There are numerous inconsistencies it could have fixed in HTTP - it could have properly optimized the multiplexed-channel case with inband flow control to avoid TCP startup overhead for distant FastCGI proxies - it could have normalized the transport over something easy to audit and implement like netstrings - but it totally failed to do anything worthwhile despite being an entirely new protocol.

By contrast, SCGI has the same property of "transmitter of HTTP data that isn't HTTP" but is not insanely overcomplex and full of mistakes.  It at least works enough like CGI that it caters to a market of people writing server containers who can't necessarily write a good HTTP implementation -- whereas if you have enough time to implement FastCGI, you can _definitely_ implement HTTP.

Nevertheless, dumb as it is, supporting FastCGI is still worthwhile.  Various bits of useful software have integrated it for one reason or another, and some of them don't have other ways of talking to the outside world.  That doesn't mean it's a good idea to write new software that is similarly hamstrung by a bad integration decision.

>> Feel free to contribute a FastCGI
>> implementation, if you like.  Efforts might better be spent finishing
>> twisted.web2 (this includes writing documentation, test cases, examples,
>> etc, not just coding) or figuring out how best to port Nevow to web2,
>> since web2 supports FastCGI already.

I would go so far as to say that web2 is _the_ way we will support FastCGI.  It might be worthwhile to support, but we need to move Nevow to web2 at some point, and any effort directed at this should be spent improving web2.

>Now the twisted.web2 implementation support only the Responder role,
>what about the Authorizer and Filter roles?

You can contribute implementations if you like, but does anyone really use those?

>I'm very interested in this but I'm not an expert.
>In the end, is FastCGI really worth of further investigations?

I hope I've made it clear that no, it isn't.

From manlio_perillo at libero.it  Wed Apr 12 04:04:00 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Wed Apr 12 04:02:54 2006
Subject: [Twisted-web] Nevow future
In-Reply-To: <20060411221009.22481.224910828.divmod.quotient.12546@ohm>
References: <20060411221009.22481.224910828.divmod.quotient.12546@ohm>
Message-ID: <443CC280.7020708@libero.it>

glyph@divmod.com ha scritto:
> [...]
>>> When there is a 1.x release, you can begin to expect things
>>> to stop changing as much.
> 
>> There are previsions?
> 
> What is a 'prevision'?
> 

1) We don't have any idea of what will happen in the future
2) We have an ideal architecture and API definition in mind, but we
don't know how it will take to complete the developement

> [...]
> The WSGI support may not work at all.  It is unsupported, undocumented,
> and there are no tests which import it.
> 
> The WSGI support will only realistically work in a Twisted-style
> environment.  Athena depends explicitly on the reactor, so invoking any
> Athena-using applications in a non-Twisted context will not work. 
> Livetest requires the reactor as well, so you will not be able to write
> nit tests for your application or use any 3rd party fragments which use
> athena or are tested in this manner.
> 

I'm not sure of this point.
Athena depends on the reactor, but when using Nevow with Zomne, don't we
have a full twisted application running?


By the way, what about:
"""Running your Nevow applications under twisted.web also gives you
access to some of the more advanced "Live" features of Nevow, such as
nevow.livepage and nevow.canvas. Currently, these modules require more
control over the HTTP socket than CGI or WSGI can provide. (This may
change in the future.)"""
in
nevow-deployment.html
?


>  [...]

> Don't get me wrong, I would love it if there were dedicated maintainers
> for these use-cases, since I realize they are important to many people.

In my case I'm still investigating this.

lighttp is gaining popularity, so there are opportunities to have it
available on many hosting solutions.

> They just aren't important to *us*, so we're not going to spend time.
> 
>>> Your Nevow applications should remain independent of it, though.
> 
>> I would like to use lighttp as the *only* webserver, and Nevow *only*
>> for the rendering, session support, and so.
> 
> lighttpd supports reverse proxies.  Nevow's session support, in
> nevow.guard, depends on the reactor and twisted.web, so you will be
> unable to use it otherwise.
> 

Just a question:
it is possible to forward an HTTP request using Unix domain sockets?
Is this supported with Apache and lighhtp?


>>>> Reverse Proxy is not an option for me (*why* to use two or more
>>>> webservers and duplicate HTTP protocol handling?).
> 
>>> Because it solves a problem?  Why *not* do this?
> 
>> I don't like the idea.
> 
> Yes but _WHY_ don't you like the idea?  

I like the idea of a full separation between a web server and a web
application.

> Do you live in some alternate
> reality where the arrangement of bytes in an HTTP packet has harmful
> effects but the arrangement of bytes in a FastCGI packet does not?
> 

There is not only the question of arrangment of packets.

> [...]
> 
> This is a common mistake, because it seems "simpler" to design your own
> protocol for talking about HTTP than to use HTTP itself.  It isn't.  In
> fact, by definition, it cannot be: your new protocol has to provide all
> the information present in the original HTTP request (or risk breaking
> applications that depend on some information you did not relay), so in
> the best case it can be exactly as complex as HTTP.  

A web server does not simply parse tha HTTP headers; it have to do some
pre and post processing.

The question is:
- what can do a web server?
- what have to do a web application?


> I wrote something
> like this in twisted.web.distrib, where I converted the HTTP requests to
> PB and back again.  While the "automated proxying for users"
> functionality was cool, I had *just written* an HTTP parser and it was
> silly not to just use it over a unix socket.  I am pleased to note that
> web2, when it implements something like web.distrib, will do it the
> correct way and just make it a regular reverse proxy over a unix socket.
> 

This is interesting.

> FastCGI itself is also actually harder to parse, contains numerous
> design errors, and more confusing and inconsistent than HTTP itself. 
> There are numerous inconsistencies it could have fixed in HTTP - it
> could have properly optimized the multiplexed-channel case with inband
> flow control to avoid TCP startup overhead for distant FastCGI proxies -
> it could have normalized the transport over something easy to audit and
> implement like netstrings - but it totally failed to do anything
> worthwhile despite being an entirely new protocol.
> 

I agree.
FastCGI failed because it could have been a more better protocol.

> [...]

> Nevertheless, dumb as it is, supporting FastCGI is still worthwhile. 
> Various bits of useful software have integrated it for one reason or
> another, and some of them don't have other ways of talking to the
> outside world.  That doesn't mean it's a good idea to write new software
> that is similarly hamstrung by a bad integration decision.
> 

Ok.

> [...]
> 
> I hope I've made it clear that no, it isn't.
> 

Thanks for the exhaustive explanation.


Regards  Manlio Perillo

From Michael-Niehues at gmx.net  Wed Apr 12 08:54:53 2006
From: Michael-Niehues at gmx.net (Michael Niehues)
Date: Wed Apr 12 08:54:59 2006
Subject: [Twisted-web] sending several Requests with one Connection
Message-ID: <1066.1144850093@www017.gmx.net>

Hi,

I'm using twisted.web and I've programmed a HTTP-client. Actually the
Client opens a connection to the server for every HTTP-Request.
But I don't want to close the connection for sending all requests over
the same connection. Is this possible and what have I to do?

kindly regards

Michael Niehues

From glyph at divmod.com  Wed Apr 12 11:25:36 2006
From: glyph at divmod.com (glyph@divmod.com)
Date: Wed Apr 12 11:25:39 2006
Subject: [Twisted-web] Nevow future
In-Reply-To: 0
Message-ID: <20060412162536.22481.1792103741.divmod.quotient.12805@ohm>


On Wed, 12 Apr 2006 07:04:00 -0200, Manlio Perillo <manlio_perillo@libero.it> wrote:
>glyph@divmod.com ha scritto:

>> What is a 'prevision'?
>>
>
>1) We don't have any idea of what will happen in the future
>2) We have an ideal architecture and API definition in mind, but we
>don't know how it will take to complete the developement

#2.  That was what the "context is going away, streams are going away" stuff was.

>I'm not sure of this point.
>Athena depends on the reactor, but when using Nevow with Zomne, don't we
>have a full twisted application running?

True.  But you also have a full web server running.

>By the way, what about:
>"""Running your Nevow applications under twisted.web also gives you
>access to some of the more advanced "Live" features of Nevow, such as
>nevow.livepage and nevow.canvas. Currently, these modules require more
>control over the HTTP socket than CGI or WSGI can provide. (This may
>change in the future.)"""
>in
>nevow-deployment.html
>?

That document is probably slightly out of date.  For example, nevow.livepage has been deprecated in favor of nevow.athena.  I don't think anyone is maintaining nevow.canvas any more.

>lighttp is gaining popularity, so there are opportunities to have it
>available on many hosting solutions.

Yes.  Personally, I love lighttpd; I would really like it if, for example, when Mantissa starts a web server, it could automatically put static content in a front-end lighttpd proxy.  I should really file a ticket for that...

lighttpd, like twisted.web[2], supports reverse proxies as well as other forms of frontend/backend server communication.

>Just a question:
>it is possible to forward an HTTP request using Unix domain sockets?

Yes

>Is this supported with Apache and lighhtp?

Not as far as I know.  Everything sucks except Twisted ;-).

>> Yes but _WHY_ don't you like the idea?
>
>I like the idea of a full separation between a web server and a web
>application.

Can you name a single problem that this solves, or feature that it enables?

>The question is:

Yes.  That is exactly the question.  However, you've phrased it misleadingly.  Since the invention of linking libraries, "program" does not have to be the same thing as "process".  You can run a web server *library* as part of your web server *application* to communicate with the central web server on a particular system.  There is also the question of what role a particular process serves in a particular environment, which is only tangentially related to the protocol that it should speak.

There are different requirements for serving requests at different points in a pipeline.  There are web front-end proxies which do nothing but inspect a cookie and send the request, bytes unmodified, on to another machine.  There are servers which will internally process some requests ("static content") and forward others ("dynamic content").

In other words,

>- what can do a web server?

Translate HTTP requests into behavior (such as dispatching to an application)

>- what have to do a web application?

Translate HTTP requests into behavior (such as processing orders for a store)

>> [...] twisted.web.distrib [...]

>This is interesting.

Yes, I do think so :).

>> [...]
>>
>> I hope I've made it clear that no, it isn't.
>>
>
>Thanks for the exhaustive explanation.

You're welcome.

From manlio_perillo at libero.it  Wed Apr 12 12:01:46 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Wed Apr 12 12:00:40 2006
Subject: [Twisted-web] Nevow future
In-Reply-To: <20060412162536.22481.1792103741.divmod.quotient.12805@ohm>
References: <20060412162536.22481.1792103741.divmod.quotient.12805@ohm>
Message-ID: <443D327A.6040007@libero.it>

glyph@divmod.com ha scritto:
> [...]

>> I'm not sure of this point.
>> Athena depends on the reactor, but when using Nevow with Zomne, don't we
>> have a full twisted application running?
> 
> True.  But you also have a full web server running.
> 

Ok, this is a good point!

But, as an example:

wc channel\fastcgi.py
  343  1078 11712 channel\fastcgi.py

wc channel\http.py
  868  2795 31479 channel\http.py


So, http "support" is far more difficult to implement?.

> [...]
>> nevow-deployment.html
>> ?
> 
> That document is probably slightly out of date.  For example,
> nevow.livepage has been deprecated in favor of nevow.athena.  I don't
> think anyone is maintaining nevow.canvas any more.
> 

Ok, thanks.

>> lighttp is gaining popularity, so there are opportunities to have it
>> available on many hosting solutions.
> 
> Yes.  Personally, I love lighttpd; I would really like it if, for
> example, when Mantissa starts a web server, it could automatically put
> static content in a front-end lighttpd proxy.  I should really file a
> ticket for that...
> 

I'm not a lighttp developer, sorry ;-).

> lighttpd, like twisted.web[2], supports reverse proxies as well as other
> forms of frontend/backend server communication.
> 
>> Just a question:
>> it is possible to forward an HTTP request using Unix domain sockets?
> 
> Yes
> 
>> Is this supported with Apache and lighhtp?
> 
> Not as far as I know.  Everything sucks except Twisted ;-).
> 

Maybe a file ticket for lighttp is needed here too.

>>> Yes but _WHY_ don't you like the idea?
>>
>> I like the idea of a full separation between a web server and a web
>> application.
> 
> Can you name a single problem that this solves, or feature that it enables?
> 
>> The question is:
> 
> Yes.  That is exactly the question.  However, you've phrased it
> misleadingly.  

> [...]
>
> In other words,
> 
>> - what can do a web server?
> 
> Translate HTTP requests into behavior (such as dispatching to an
> application)
> 
>> - what have to do a web application?
> 
> Translate HTTP requests into behavior (such as processing orders for a
> store)
> 


Well, thanks.
I got the point.



Regards  Manlio Perillo

From mithrandi-twisted-web at mithrandi.za.net  Wed Apr 12 12:17:43 2006
From: mithrandi-twisted-web at mithrandi.za.net (Tristan Seligmann)
Date: Wed Apr 12 12:18:02 2006
Subject: [Twisted-web] test failure of Nevow on Windows XP
In-Reply-To: <20060411220405.22481.449056770.divmod.quotient.12542@ohm>
References: <443C16A3.7060402@libero.it>
	<20060411220405.22481.449056770.divmod.quotient.12542@ohm>
Message-ID: <20060412171743.GA3421@mithrandi.za.net>

* Jean-Paul Calderone <exarkun@divmod.com> [2006-04-11 18:04:05 -0400]:

> Thanks for reporting this!  (Too bad the test does not give more 
> information).  This particular area is under active development, so this 
> test will probably be quite a bit happier in 0.8.1 or 0.9.  What this 
> failure means is that some extremely obscure characters will not pass 
> between server and client correctly, when used in with Athena.  It's pretty 

In fact, the failure indicates that the code that tries to prevent these
characters silently passing incorrectly is not raising an exception,
because on your platform they are in fact passing correctly anyway
(this was a somewhat accidental implementation issue).

Thus, this test failure is completely harmless.
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://twistedmatrix.com/pipermail/twisted-web/attachments/20060412/239a59eb/attachment.pgp
From glyph at divmod.com  Wed Apr 12 12:22:27 2006
From: glyph at divmod.com (glyph@divmod.com)
Date: Wed Apr 12 12:22:28 2006
Subject: [Twisted-web] Nevow future
In-Reply-To: <443D327A.6040007@libero.it>
Message-ID: <20060412172227.22481.522805438.divmod.quotient.12819@ohm>



On Wed, 12 Apr 2006 15:01:46 -0200, Manlio Perillo <manlio_perillo@libero.it> wrote:
>glyph@divmod.com ha scritto:

>But, as an example:
>
>wc channel\fastcgi.py
>  343  1078 11712 channel\fastcgi.py
>
>wc channel\http.py
>  868  2795 31479 channel\http.py
>
>
>So, http "support" is far more difficult to implement?.

The difference is actually smaller than that, since HTTP support is better commented and documented.  Also, the HTTP channel has a lot more features, such as client timeout support and pipelining.  The FastCGI support, as you mentioned, is incomplete, not supporting the (broken) multiplexed connections described in the protocol, or AUTHORIZER or FILTER roles.

Also, they both import a great deal of logic from twisted core and other areas of web2.  The difference is even smaller when you take the full picture into consideration.

I think what this difference boils down to is that a lot more time and effort have (rightly) been spent on the HTTP channel than the fastCGI channel; totally correct, robust support for both would likely be close to equivalent.

>> Yes.  Personally, I love lighttpd; I would really like it if, for
>> example, when Mantissa starts a web server, it could automatically put
>> static content in a front-end lighttpd proxy.  I should really file a
>> ticket for that...

>I'm not a lighttp developer, sorry ;-).

It is a mantissa ticket, not a lighttpd ticket, anyway :).

>>> it is possible to forward an HTTP request using Unix domain sockets?
>>> Is this supported with Apache and lighhtp?

>> Not as far as I know.  Everything sucks except Twisted ;-).

>Maybe a file ticket for lighttp is needed here too.

Probably.  It may be possible, I haven't checked.

>>>> Yes but _WHY_ don't you like the idea?

[...]

>Well, thanks.
>I got the point.

OK.  I won't belabor it any longer, then :).

From dominic.fox at gmail.com  Fri Apr 14 12:25:09 2006
From: dominic.fox at gmail.com (Dominic Fox)
Date: Fri Apr 14 12:25:16 2006
Subject: [Twisted-web] Twisted-WS?
Message-ID: <f278b2130604141025q665f1cb6he613ba378b90f367@mail.gmail.com>

Hi,

I'm evaluating Twisted as a platform for doing some Python-based SOAP
web service work. What's the current status of SOAP/WSDL support (both
client and server) in Twisted? Is there some documentation I could
refer to, besides the book (which I'll be getting in due course, if I
decide to go further with this approach)?

Thanks,
Dominic

From dekonerding at lbl.gov  Fri Apr 14 14:56:17 2006
From: dekonerding at lbl.gov (David E. Konerding)
Date: Fri Apr 14 14:56:23 2006
Subject: [Twisted-web] Twisted-WS?
In-Reply-To: <f278b2130604141025q665f1cb6he613ba378b90f367@mail.gmail.com>
References: <f278b2130604141025q665f1cb6he613ba378b90f367@mail.gmail.com>
Message-ID: <443FFE61.5040403@lbl.gov>

Dominic Fox wrote:
> Hi,
>
> I'm evaluating Twisted as a platform for doing some Python-based SOAP
> web service work. What's the current status of SOAP/WSDL support (both
> client and server) in Twisted? Is there some documentation I could
> refer to, besides the book (which I'll be getting in due course, if I
> decide to go further with this approach)?
>   

The ZSI project
http://pywebsvcs.sourceforge.net/zsi.html
provides a WS resource that you can add to your site.  Then you can 
write service methods that implement your
services, and write clients that use the twisted reactor.

It works great. 

Dave

From trohed at gmail.com  Fri Apr 14 16:51:52 2006
From: trohed at gmail.com (trohed)
Date: Fri Apr 14 16:52:00 2006
Subject: [Twisted-web] uploading a file to twisted web
Message-ID: <f9d5aa270604141451j5d27c889k8701b44891ad76c0@mail.gmail.com>

I was wondering if there was any documentation or an example of how to
upload a file to a twisted web server.  I would like to setup a page
that allows a user to select a file from their local machine that is
then uploaded and processed on the server side (twisted web server).

Any information is appreciated!

Thanks,
trohed

From exarkun at divmod.com  Sun Apr 16 09:56:32 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sun Apr 16 09:56:35 2006
Subject: [Twisted-web] Re: [Twisted-Python] Status of twisted.web2?
In-Reply-To: <e89aa560604160358h469022fbj5cb4b7934807f37d@mail.gmail.com>
Message-ID: <20060416145632.22481.1012738303.divmod.quotient.14142@ohm>

On Sun, 16 Apr 2006 12:58:30 +0200, Ofer Shem Tov <ost12666@gmail.com> wrote:
>Hello,
>
>I need to implement a web server with authentication and SSL (so I
>guess basic authentication is good enough) and to be able to upload
>big files to the server.
>
>Is web2 ready for that (I assume twisted.web is not good for that), if

Why do you assume that?

Followups to twisted-web@twistedmatrix.com, please.

>not is there a new version coming soon (release or CVS head) or can I
>add this stuff my self?
>
>thanks
>

Jean-Paul

From ost12666 at gmail.com  Sun Apr 16 10:26:45 2006
From: ost12666 at gmail.com (Ofer Shem Tov)
Date: Sun Apr 16 10:26:48 2006
Subject: [Twisted-web] twisted.web and twisted.web2 authentication and file
	upload questions
Message-ID: <e89aa560604160826p2fa28d35nc2e6c2e49b440ff9@mail.gmail.com>

Hello,

Can I implement HTTP authentication (basic+SSL) using twisted.web
server without implementing the authentication headers mysefl?

Can I upload big files to a twisted.web server using HTTP?

Same questions for twisted.web2 since I saw in several places
recommendations to use twisted.web2 and not twisted.web. Is
twisted.web2 mature enough, which one should I use?

thanks

From manlio_perillo at libero.it  Mon Apr 17 04:20:03 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Mon Apr 17 04:18:42 2006
Subject: [Twisted-web] online Nevow examples
Message-ID: <44435DC3.5070300@libero.it>

Hi.

Maybe this is non an huge problem, but the online Nevow demos at
http://nevowexamples.adytum.us/chatola/

have some problems (the tests fails, chatola does not works).


I think that having working and updated live examples is a good think.



Thanks  Manlio Perillo

From exarkun at divmod.com  Mon Apr 17 07:12:28 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon Apr 17 07:12:31 2006
Subject: [Twisted-web] online Nevow examples
In-Reply-To: <44435DC3.5070300@libero.it>
Message-ID: <20060417121228.22481.1817451609.divmod.quotient.14418@ohm>

On Mon, 17 Apr 2006 07:20:03 -0200, Manlio Perillo <manlio_perillo@libero.it> wrote:
>Hi.
>
>Maybe this is non an huge problem, but the online Nevow demos at
>http://nevowexamples.adytum.us/chatola/
>
>have some problems (the tests fails, chatola does not works).
>
>
>I think that having working and updated live examples is a good think.
>

I have no idea who maintains this website, but it's not Divmod.  I don't have any way to fix or update it.

Jean-Paul

From manlio_perillo at libero.it  Mon Apr 17 10:18:24 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Mon Apr 17 10:16:58 2006
Subject: [Twisted-web] online Nevow examples
In-Reply-To: <20060417121228.22481.1817451609.divmod.quotient.14418@ohm>
References: <20060417121228.22481.1817451609.divmod.quotient.14418@ohm>
Message-ID: <4443B1C0.6000009@libero.it>

Jean-Paul Calderone ha scritto:
> On Mon, 17 Apr 2006 07:20:03 -0200, Manlio Perillo
> <manlio_perillo@libero.it> wrote:
>> Hi.
>>
>> Maybe this is non an huge problem, but the online Nevow demos at
>> http://nevowexamples.adytum.us/chatola/
>>
>> have some problems (the tests fails, chatola does not works).
>>
>>
>> I think that having working and updated live examples is a good think.
>>
> 
> I have no idea who maintains this website, but it's not Divmod.  I don't
> have any way to fix or update it.
> 

Ok, thanks and sorry for the double message (I just forgot the already
posted one ;-)).

By the way, I think that Divmod should offer this service.
As a developer I can download the sources, but the online examples can
be used to attract users.



Regards  Manlio Perillo

From exarkun at divmod.com  Mon Apr 17 10:57:59 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon Apr 17 10:58:02 2006
Subject: [Twisted-web] online Nevow examples
In-Reply-To: <4443B1C0.6000009@libero.it>
Message-ID: <20060417155759.22481.1279343316.divmod.quotient.14477@ohm>

On Mon, 17 Apr 2006 13:18:24 -0200, Manlio Perillo <manlio_perillo@libero.it> wrote:
>Jean-Paul Calderone ha scritto:
>> On Mon, 17 Apr 2006 07:20:03 -0200, Manlio Perillo
>> <manlio_perillo@libero.it> wrote:
>>> Hi.
>>>
>>> Maybe this is non an huge problem, but the online Nevow demos at
>>> http://nevowexamples.adytum.us/chatola/
>>>
>>> have some problems (the tests fails, chatola does not works).
>>>
>>>
>>> I think that having working and updated live examples is a good think.
>>>
>>
>> I have no idea who maintains this website, but it's not Divmod.  I don't
>> have any way to fix or update it.
>>
>
>Ok, thanks and sorry for the double message (I just forgot the already
>posted one ;-)).
>
>By the way, I think that Divmod should offer this service.
>As a developer I can download the sources, but the online examples can
>be used to attract users.
>

Unfortunately, the examples server seems to be unbounded in memory consumption.  At some point, I plan to try to fix this so that Divmod can host a live example site, but until then the administrative costs are prohibitive, and it is not the highest thing on my todo list.

Jean-Paul

From duncan.mcgreggor at gmail.com  Wed Apr 19 08:35:05 2006
From: duncan.mcgreggor at gmail.com (Duncan McGreggor)
Date: Wed Apr 19 08:35:31 2006
Subject: [Twisted-web] online Nevow examples
In-Reply-To: <44435DC3.5070300@libero.it>
References: <44435DC3.5070300@libero.it>
Message-ID: <72577d1a9ac1686f78877b75f9a33ce0@gmail.com>


On Apr 17, 2006, at 3:20 AM, Manlio Perillo wrote:

> Hi.
>
> Maybe this is non an huge problem, but the online Nevow demos at
> http://nevowexamples.adytum.us/chatola/
>
> have some problems (the tests fails, chatola does not works).
>
>
> I think that having working and updated live examples is a good think.

Hey Manlio,

I "maintain" that server, with all that the quotes imply. Chatola only 
worked when I first installed it, and that was a while ago... and 
several versions in the past. I've just upgraded nevow on that box (an 
old Compaq Proliant 5000). No guarantees.

Enjoy!

d


From manlio_perillo at libero.it  Wed Apr 19 11:25:52 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Wed Apr 19 11:24:30 2006
Subject: [Twisted-web] online Nevow examples
In-Reply-To: <72577d1a9ac1686f78877b75f9a33ce0@gmail.com>
References: <44435DC3.5070300@libero.it>
	<72577d1a9ac1686f78877b75f9a33ce0@gmail.com>
Message-ID: <44466490.809@libero.it>

Duncan McGreggor ha scritto:
> 
> On Apr 17, 2006, at 3:20 AM, Manlio Perillo wrote:
> 
>> Hi.
>>
>> Maybe this is non an huge problem, but the online Nevow demos at
>> http://nevowexamples.adytum.us/chatola/
>>
>> have some problems (the tests fails, chatola does not works).
>>
>>
>> I think that having working and updated live examples is a good think.
> 
> Hey Manlio,
> 
> I "maintain" that server, with all that the quotes imply. Chatola only
> worked when I first installed it, and that was a while ago... and
> several versions in the past. I've just upgraded nevow on that box (an
> old Compaq Proliant 5000). No guarantees.
> 

Thanks, really!
This is a great service for evangelization!


Regards  Manlio Perillo

From dominic.fox at gmail.com  Wed Apr 19 11:41:49 2006
From: dominic.fox at gmail.com (Dominic Fox)
Date: Wed Apr 19 11:41:55 2006
Subject: [Twisted-web] Efficient parsing of XML Posts
Message-ID: <f278b2130604190941m17a4280dk761de7d7e5243b1@mail.gmail.com>

Hi,

I've been delving into twisted.web, looking at the handling of HTTP
requests by the HTTPChannel and Request classes. Something I'd like to
do is produce a variant for XML processing which starts parsing raw
HTTP message body data into SAX events as soon as it comes in. The
idea is to avoid having to cache the incoming raw data in memory (or a
temp file) and wait for it all to have arrived before parsing it -
instead, we would be handling SAX events generated out of the incoming
stream of XML data immediately. This would basically be an efficiency
tweak for turning around XML messages more quickly and with less of a
memory footprint.

Has anything like this been tried already? Does anyone know of any
good reasons *not* to do it? I'm particularly thinking of web service
calls where a custom parser could parse and validate SOAP RPC messages
directly as they came down the wire, without ever constructing an
intermediate raw data object or XML DOM.

Regards,
Dominic

From mikeal at osafoundation.org  Sat Apr 22 19:43:16 2006
From: mikeal at osafoundation.org (Mikeal Rogers)
Date: Sat Apr 22 19:43:23 2006
Subject: [Twisted-web] Twisted-Web2 perf numbers
Message-ID: <0265CE7A-0D4F-4A5F-ADEA-895B091A76CC@osafoundation.org>

I noticed on the twisted-web2 site it is noted that performance is an  
issue in web2

"Speed, it's not very fast, depending on how the benchmarks are done  
it's either significantly faster than Twisted.Web or twice as slow."

I was wondering what these numbers actually are and if the numbers  
and tests are posted somewhere?

-Mikeal

From exarkun at divmod.com  Sun Apr 23 22:42:27 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sun Apr 23 22:42:32 2006
Subject: [Twisted-web] Twisted-Web2 perf numbers
In-Reply-To: <0265CE7A-0D4F-4A5F-ADEA-895B091A76CC@osafoundation.org>
Message-ID: <20060424034227.22481.733529994.divmod.quotient.16452@ohm>

On Sat, 22 Apr 2006 17:43:16 -0700, Mikeal Rogers <mikeal@osafoundation.org> wrote:
>I noticed on the twisted-web2 site it is noted that performance is an  issue 
>in web2
>
>"Speed, it's not very fast, depending on how the benchmarks are done  it's 
>either significantly faster than Twisted.Web or twice as slow."
>
>I was wondering what these numbers actually are and if the numbers  and 
>tests are posted somewhere?
>

A short thread covered this topic a couple months ago:

http://twistedmatrix.com/pipermail/twisted-web/2006-February/002474.html

Jean-Paul

From christopher.zorn at gmail.com  Thu Apr 27 12:56:40 2006
From: christopher.zorn at gmail.com (Christopher Zorn)
Date: Thu Apr 27 12:56:42 2006
Subject: [Twisted-web] Nevow athena
Message-ID: <149014b90604271056y6cbf2088hb0bd26785d8d560@mail.gmail.com>

Hey,

  I have been using livepage in a project and I use gaurd and
twisted.cred for different livepage resources. Everything works well,
but I wanted to use athena. I run into two problems with athena. The
first problem is when I have one athena.Livepage object in my realm I
get errors saying I can only render the LivePage once.

So, to get around that I just do something like the following in the
realm class :

 def requestAvatar(self, avatarId, mind, *interfaces):
       for iface in interfaces:
           if iface is inevow.IResource:
               if avatarId is checkers.ANONYMOUS:
                   resc = AnonPage()
                   resc.realm = self
                   return (inevow.IResource, resc, noLogout)
               else:
                   resc = MyPage(avatarId)
                   resc.realm = self
                   return (inevow.IResource, resc, resc.logout)

This seems to work ok. Is this something I have to do? Or can I use
one class that takes avatarId as a paramater on __init__?

Now for the second problem. (This problem happens after I use the above fix. )

If I use checkers.InMemoryUsernamePasswordDatabaseDontUse() everything
works ok. But if I use my checker or other checkers the page does not
get rendered and everything just hangs. If I run my tac file with
twisted -noy I can not control-C to kill the process, I have to kill
it with signal 9.

I have tried a basic athena.LivePage class with nothing but html,
body, and liveglue that is supposed to be rendered out and it still
hangs.

Everything works well with livepage.LivePage, but hangs with athena.
Does anyone know why this would happen? I hope this email is not too
vague. Let me know if I need more details.

Thanks in advance.

