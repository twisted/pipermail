<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Nevow upgrading trouble 2.0 -&gt;4.1
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Nevow%20upgrading%20trouble%202.0%20-%3E4.1&In-Reply-To=7a59f0250505282017587b35d0%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001500.html">
   <LINK REL="Next"  HREF="001505.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Nevow upgrading trouble 2.0 -&gt;4.1</H1>
    <B>Yun Mao</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Nevow%20upgrading%20trouble%202.0%20-%3E4.1&In-Reply-To=7a59f0250505282017587b35d0%40mail.gmail.com"
       TITLE="[Twisted-web] Nevow upgrading trouble 2.0 -&gt;4.1">maoy+twisted at cis.upenn.edu
       </A><BR>
    <I>Sat May 28 21:56:09 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001500.html">[Twisted-web] Nevow upgrading trouble 2.0 -&gt;4.1
</A></li>
        <LI>Next message: <A HREF="001505.html">[Twisted-web] Nevow upgrading trouble 2.0 -&gt;4.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1501">[ date ]</a>
              <a href="thread.html#1501">[ thread ]</a>
              <a href="subject.html#1501">[ subject ]</a>
              <a href="author.html#1501">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is part of it (locateChild omitted). Thanks.

Yun
==============
class SessionRoot(rend.Page):
     docFactory = loaders.htmlfile(
         templateDir = os.path.join(getAbsResourcePath(),'template'),
         template ='session.html')
     child_css = 
static.File(os.path.join(getAbsResourcePath(),'template/css'))
     child_images = 
static.File(os.path.join(getAbsResourcePath(),'template/images'))

     viewall = False # view all sessions or not

     def data_nAllSessions(self, context, data):
         return len(smanager.socks.items())
     def data_nActiveSessions(self, context, data):
         count = 0
         for k,v in smanager.socks.items():
             if v.state!=&quot;ended&quot;: count += 1
         return count
     def data_haSelection(self, context, data):
         return smanager.ha_selection
     def data_globalSSLOption(self, context, data):
         return &quot;SSL(%s)&quot; % (smanager.smartSSL)

     def data_session(self, context, data):
         #print inevow.IRequest(context).args

         result = []
         for k,v in smanager.socks.items():
             if not self.viewall:
                 if v.state==&quot;ended&quot;: continue
             x = {}
             x['value'] = v
             x['myID'] = v.myID
             x['sessionID'] = v.getSessionID()
             x['remotehost'] = &quot;%s:%s&quot; % (v.realserver, v.realport)
             x['homeagent'] = v.getHomeAgent()

             x['status'] = v.getSessionState()
             x['message'] = v.infolog.getLatestInfo()
             x['error'] = v.errinfo
             result.append(x)
         return result

     def render_mymapping(self, context, data):
         mylog(3, 'hey!, in mymapping %s'% (str(data)))
         for k, v in data.items():
             context.fillSlots(k, v)
         return context.tag

     def render_status(self, context, data):
         mylog(3, 'hey!, in status %s'% (data['status']))

         tag = context.tag.clear()
         if data['value'].state!=&quot;ended&quot;:
             tag.attributes['href'] = &quot;?adapt=%d&quot; % data['myID']
             tag.attributes['title']=&quot;Click to do adaptation for session 
%d&quot; % data['myID']

         tag.children.append(data['status'])
         return tag

     def render_message(self, context, data):
         tag = context.tag.clear()
         tag.attributes['href'] = 
here.child('msg').child(str(data['myID']))
         tag.attributes['title'] = &quot;Click to see the detailed messages&quot;
         msg = data['message']
         if len(msg)&gt;43:
             msg = msg[:40]+&quot;...&quot;
         tag.children.append(msg)
         return tag

     def render_SSLOption(self, context, data):
         tag = context.tag.clear()
         msg = data['value'].isSSLEnabled() and &quot;Enabled&quot; or &quot;Disabled&quot;
         if data['value'].state!=&quot;ended&quot;:
             tag.attributes['href'] = &quot;?switchSSL=%d&quot; % data['myID']
             tag.attributes['title']=&quot;Click to %s SSL&quot; %\
                                      (data['value'].isSSLEnabled() and 
&quot;disable&quot; or &quot;enable&quot;)
         tag.children.append(msg)
         return tag
==========

On Sat, 28 May 2005, Dave Cook wrote:

&gt;<i> What does your Page class look like?
</I>&gt;<i>
</I>&gt;<i> Dave Cook
</I>
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001500.html">[Twisted-web] Nevow upgrading trouble 2.0 -&gt;4.1
</A></li>
	<LI>Next message: <A HREF="001505.html">[Twisted-web] Nevow upgrading trouble 2.0 -&gt;4.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1501">[ date ]</a>
              <a href="thread.html#1501">[ thread ]</a>
              <a href="subject.html#1501">[ subject ]</a>
              <a href="author.html#1501">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
