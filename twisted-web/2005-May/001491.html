<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Reactor in a multithreaded program
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Reactor%20in%20a%20multithreaded%20program&In-Reply-To=20050522232432.GA28253%40frobozz">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001487.html">
   <LINK REL="Next"  HREF="001492.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Reactor in a multithreaded program</H1>
    <B>Ellers</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Reactor%20in%20a%20multithreaded%20program&In-Reply-To=20050522232432.GA28253%40frobozz"
       TITLE="[Twisted-web] Reactor in a multithreaded program">ellers at ellerton.net
       </A><BR>
    <I>Mon May 23 00:20:05 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001487.html">[Twisted-web] Reactor in a multithreaded program
</A></li>
        <LI>Next message: <A HREF="001492.html">[Twisted-web] Reactor in a multithreaded program
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1491">[ date ]</a>
              <a href="thread.html#1491">[ thread ]</a>
              <a href="subject.html#1491">[ subject ]</a>
              <a href="author.html#1491">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> On Sun, May 22, 2005 at 03:12:13PM -0700, Ellers wrote:
</I>&gt;&gt;<i> Hi all
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What is the right way to use a reactor in a multithreaded program?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The program I'm writing is a command line program that needs to use the
</I>&gt;&gt;<i> readline package. Readline blocks so I need to put the reactor (or the
</I>&gt;&gt;<i> readline call) in a separate thread.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I can start the reactor ok if I set installSignalHandlers=0. But calling
</I>&gt;&gt;<i> reactor.stop() from the main thread doesn't seem to stop it.
</I>&gt;<i>
</I>&gt;<i> Nothing in Twisted is thread-safe, except for reactor.callFromThread.  So,
</I>&gt;<i> if you want to stop the reactor from thread aside from the one the reactor
</I>&gt;<i> is in, you need to do reactor.callFromThread(reactor.stop).
</I>
Ah - that makes sense, thanks :)

I tried that, but in itself it didn't solve my problem.

Would you expect the stop() message only to be picked up when the reactor
has some activity?

Is there an advised pattern for working with the reactor with multiple
threads?

Thanks :)
Ellers


</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001487.html">[Twisted-web] Reactor in a multithreaded program
</A></li>
	<LI>Next message: <A HREF="001492.html">[Twisted-web] Reactor in a multithreaded program
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1491">[ date ]</a>
              <a href="thread.html#1491">[ thread ]</a>
              <a href="subject.html#1491">[ subject ]</a>
              <a href="author.html#1491">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
