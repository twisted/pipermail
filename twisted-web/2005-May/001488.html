<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] LivePage erratic under IE 6.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20LivePage%20erratic%20under%20IE%206.0&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001494.html">
   <LINK REL="Next"  HREF="001489.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] LivePage erratic under IE 6.0</H1>
    <B>Garth T Kidd</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20LivePage%20erratic%20under%20IE%206.0&In-Reply-To="
       TITLE="[Twisted-web] LivePage erratic under IE 6.0">garthk at gmail.com
       </A><BR>
    <I>Sun May 22 19:17:14 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001494.html">[Twisted-web] Reactor in a multithreaded program
</A></li>
        <LI>Next message: <A HREF="001489.html">[Twisted-web] Re: LivePage erratic under IE 6.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1488">[ date ]</a>
              <a href="thread.html#1488">[ thread ]</a>
              <a href="subject.html#1488">[ subject ]</a>
              <a href="author.html#1488">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>To see whether LivePage is the right foundation for a side-project,
I've written a rudimentary ping program that updates the client DOM.
Under FireFox, all works as expected. Under IE, it worked for text
pings (handled entirely in ping()) but not for numeric pings (handled
by the Blaster class). Then it stopped working at all. I'm most
puzzled.

Versions:

    nevow 0.4.1
    twisted 2.0.0
    python 2.3.5
    IE 6.0.2800.1106.xpsp2.040919-1003CO

Script: 

from nevow import loaders
from nevow import tags
from nevow import livepage
from nevow import appserver

from twisted.internet import reactor

class Blaster: 
    def __init__(self, client, tenths): 
        self.client = client
        self.tenths = tenths
        self.now = 0.0
    def __call__(self): 
        self.client.set('head', str(self.now))
        self.now = self.now + self.tenths/10.0
        if self.now &lt; 10:
            reactor.callLater(self.tenths/10.0, self)
            
def ping(client, payload): 
    try: 
        Blaster(client, float(payload))()
    except ValueError: 
        client.set('head', payload)
        reactor.callLater(1, client.set, 'head', &quot;Do it again!&quot;)

ping = livepage.handler(ping, 
            livepage.document.getElementById('payload').value)

class Twister(livepage.LivePage):
    addSlash = True
    
    docFactory = loaders.stan( 
        tags.html[
            tags.head[
                tags.directive('liveid'),
                tags.directive('liveglue') 
                ],
            tags.body[
                tags.h1(id='head') [&quot;Twist me, baby!&quot;],
                tags.div(id='pingform') [
                    tags.form(name='ping', onsubmit=ping) [
                        tags.input(name='payload', id='payload'), 
                        tags.button['Ping!']
                        ]
                    ]
                ]
            ]
        )

if __name__ == '__main__':
    reactor.listenTCP(7080, appserver.NevowSite(Twister()))
    reactor.run()

</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001494.html">[Twisted-web] Reactor in a multithreaded program
</A></li>
	<LI>Next message: <A HREF="001489.html">[Twisted-web] Re: LivePage erratic under IE 6.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1488">[ date ]</a>
              <a href="thread.html#1488">[ thread ]</a>
              <a href="subject.html#1488">[ subject ]</a>
              <a href="author.html#1488">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
