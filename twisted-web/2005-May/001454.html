<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] appropriate way to use patternGenerator
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20appropriate%20way%20to%20use%20patternGenerator&In-Reply-To=70850FA6-3743-4874-923A-7A721AEFDA15%40fuhm.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001453.html">
   <LINK REL="Next"  HREF="001461.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] appropriate way to use patternGenerator</H1>
    <B>Carl Shimer</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20appropriate%20way%20to%20use%20patternGenerator&In-Reply-To=70850FA6-3743-4874-923A-7A721AEFDA15%40fuhm.net"
       TITLE="[Twisted-web] appropriate way to use patternGenerator">carl at clingfire.net
       </A><BR>
    <I>Mon May  9 09:43:08 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001453.html">[Twisted-web] appropriate way to use patternGenerator
</A></li>
        <LI>Next message: <A HREF="001461.html">[Twisted-web] _nevow_carryover_
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1454">[ date ]</a>
              <a href="thread.html#1454">[ thread ]</a>
              <a href="subject.html#1454">[ subject ]</a>
              <a href="author.html#1454">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> 

Ok... I think I understand this issue a bit better.  I am deriving most of
my work in this area from the chatola example.  In chatola the pattern is
created at object initialization time (which won't work in my scenario).

 

The pattern needs to be used in the server side handler that is invoked by
the client javascript.  Excerpt from my class:

 

def on_submit(self,client,inputname,inputtags):

      # THIS IS THE HACK RIGHT here

      self.locelpattern
=inevow.IQ(self._maincontentimpl(None,None)).patternGenerator('loc_el')

      # slot filling time

 
client.append('placecontent',self.locelpattern.fillSlots('foobar',inputname)
.fillSlots('foobaz',inputtags))

      #client.sendScript(&quot;focusInput();&quot;)

 

def render_input(self,ctx,data):

      return ctx.tag(onsubmit=livepage.handler(self.on_submit,
getValue('inputname'),getValue('inputtags')))

 

 

My solution (based on your comments):

 

1)    put a method in the stan tree prior to the set of tags that I want to
generate a pattern for

2)    store the pattern on the object for later use by on_submit.

 

def render_pattern(self,ctx,data):

            self.locelpattern = inevow.IQ(ctx).patternGenerator('loc_el')

            return ''

 

excepts from the stan tree:

 

T.div(_id='content')[

      self.render_pattern,

      T.div(pattern='loc_el',_pattern='loc_el')[

      T.div(_class='row')[

      T.span[T.slot(name='foobar')],T.span[T.slot(name='foobaz')]

      ]

 

 

-----Original Message-----
From: <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">twisted-web-bounces at twistedmatrix.com</A>
[mailto:<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">twisted-web-bounces at twistedmatrix.com</A>] On Behalf Of James Y Knight
Sent: Monday, May 09, 2005 9:36 AM
To: Discussion of twisted.web, Nevow,and Woven
Subject: Re: [Twisted-web] appropriate way to use patternGenerator

 

 

On May 8, 2005, at 6:31 PM, Carl Shimer wrote:

&gt;<i> I spent the last couple of hours trying to get the nevow LivePage  
</I>
&gt;<i> stuff to
</I>
&gt;<i> work.  The problem was on this line of my code:
</I>
&gt;<i> 
</I>
&gt;<i> Inevow.IQ(self.docFactory).patternGenerator('foo')
</I>
&gt;<i> 
</I>
 

It sounds like you're doing things the hard way, but I don't quite  

understand your description of what you want to do -- it's a bit too  

abstract for me. Patterns are designed for use by the immediately  

enclosing renderer, so they operate on the unrendered tree, not the  

rendered tree.

 

This is how most pattern uses look. A renderer which uses them,  

immediately enclosing the patterns themselves.

def render_boolean(self, ctx, data):

   return IQ(ctx).allPatterns(data and 'true' or 'false')

 

&lt;div n:data=&quot;foo&quot; n:render=&quot;boolean&quot;&gt;

&lt;span n:pattern=&quot;true&quot;&gt;True!&lt;/span&gt;

&lt;span n:pattern=&quot;false&quot;&gt;False!&lt;/span&gt;

&lt;/div&gt;

 

Perhaps your use case would be better served by filling slots?

 

James

 

_______________________________________________

Twisted-web mailing list

<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">Twisted-web at twistedmatrix.com</A>

<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web</A>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20050509/c7a51d50/attachment.htm">http://twistedmatrix.com/pipermail/twisted-web/attachments/20050509/c7a51d50/attachment.htm</A>
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001453.html">[Twisted-web] appropriate way to use patternGenerator
</A></li>
	<LI>Next message: <A HREF="001461.html">[Twisted-web] _nevow_carryover_
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1454">[ date ]</a>
              <a href="thread.html#1454">[ thread ]</a>
              <a href="subject.html#1454">[ subject ]</a>
              <a href="author.html#1454">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
