<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Re: Thoughts on documentation, wading into Twisted, 
	Nevow, etc.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Re%3A%20Thoughts%20on%20documentation%2C%20wading%20into%20Twisted%2C%20%0A%09Nevow%2C%20etc.&In-Reply-To=33127.206.173.68.153.1152555158.squirrel%40www.wbsysnet.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002791.html">
   <LINK REL="Next"  HREF="002793.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Re: Thoughts on documentation, wading into Twisted, 
	Nevow, etc.</H1>
    <B>Valentino Volonghi aka Dialtone</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Re%3A%20Thoughts%20on%20documentation%2C%20wading%20into%20Twisted%2C%20%0A%09Nevow%2C%20etc.&In-Reply-To=33127.206.173.68.153.1152555158.squirrel%40www.wbsysnet.com"
       TITLE="[Twisted-web] Re: Thoughts on documentation, wading into Twisted, 
	Nevow, etc.">dialtone at divmod.com
       </A><BR>
    <I>Tue Jul 11 07:07:37 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002791.html">[Twisted-web] Re: Thoughts on documentation,
	wading into Twisted, Nevow, etc.
</A></li>
        <LI>Next message: <A HREF="002793.html">[Twisted-web] Re: Thoughts on documentation,
	wading into Twisted,  Nevow, etc.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2792">[ date ]</a>
              <a href="thread.html#2792">[ thread ]</a>
              <a href="subject.html#2792">[ subject ]</a>
              <a href="author.html#2792">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 10 Jul 2006 14:12:38 -0400 (EDT), <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">lloyd at paisite.com</A> wrote:
&gt;<i>Can you post modified code and flesh out your critique? Might be good next
</I>&gt;<i>step, better preparing us for IResources.
</I>&gt;<i>
</I>&gt;<i>What do you think, Valentino?
</I>
For IResource the right example is most_basic which uses the following code:

from zope.interface import implements

from nevow import inevow

##
## How does a request come to the Page?
##
## or How to use Nevow without all the fancy automations
##

# This is a simple Root page object, the inevow.IResource interface
# tells us that it must implement 2 methods:
# locateChild and renderHTTP.
# locateChild is used to find children of the current page, it must return a 
# tuple of (page, remaining_segments)
# if there is no page, and you want to display a 404 page, you will need to return
# a None, () tuple.
class Root(object):
    implements(inevow.IResource)

    def locateChild(self, ctx, segments):
        # This locateChild is 'stupid' since it can only work if the tree of
        # pages is static. Anyway it will work for our simple example
        if segments[0] == '':
            # If the server is looking for the root page segments will be ('',)
            # then renderHTTP will be called on self
            return self, ()
        elif segments[0] == 'foo':
            # Now we received a request whose segments had in the first position
            # the string foo
            # like <A HREF="http://example.org/foo/baz/">http://example.org/foo/baz/</A> -&gt; ('foo', 'baz')
            # after the page has been located we return it with the remaining segments
            # ('baz')
            return self.foo, segments[1:]
        else:
            return None, ()
        
    def renderHTTP(self, ctx):
        # When the server needs to return a response to the request it will call
        # the renderHTTP method that will return a string of what needs to be sent.
        return &quot;&quot;&quot;&lt;html&gt;&lt;body&gt;Hello world!&lt;br /&gt;
        &lt;a href=&quot;./foo&quot; id=&quot;foo&quot;&gt;foo&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;
&quot;&quot;&quot;

class Foo(object):
    implements(inevow.IResource)
    
    def locateChild(self, ctx, segments):
        # segments is the remaining segments returned by the root locateChild
        # see segments[1:]
        if segments[0] == 'baz':
            return self.baz, segments[1:]
        else:
            return None, ()
    
    def renderHTTP(self, ctx):
        return &quot;&quot;&quot;&lt;html&gt;&lt;body&gt;&lt;h1 id=&quot;heading&quot;&gt;You are in Foo&lt;/h1&gt;
        &lt;a href=&quot;./foo/baz&quot; id=&quot;baz&quot;&gt;baz&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;
&quot;&quot;&quot;

class Baz(object):
    implements(inevow.IResource)
    def locateChild(self, ctx, segments):
        return None, ()
    def renderHTTP(self, ctx):
        return '&lt;html&gt;&lt;body&gt;&lt;h1 id=&quot;heading&quot;&gt;You are in Baz&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;'

# We are adding children to the pages.
# This could also happen inside the class.
root = Root()
root.foo = Foo()
root.foo.baz = Baz()

This example was written with the clear intent to just show the IResource interface separated from Nevow. Keep in mind that this is the IResource interface from Nevow and not the one from twisted.web.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002791.html">[Twisted-web] Re: Thoughts on documentation,
	wading into Twisted, Nevow, etc.
</A></li>
	<LI>Next message: <A HREF="002793.html">[Twisted-web] Re: Thoughts on documentation,
	wading into Twisted,  Nevow, etc.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2792">[ date ]</a>
              <a href="thread.html#2792">[ thread ]</a>
              <a href="subject.html#2792">[ subject ]</a>
              <a href="author.html#2792">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
