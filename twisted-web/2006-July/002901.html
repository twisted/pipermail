<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] [Nevow] about new guard in sandbox
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20%5BNevow%5D%20about%20new%20guard%20in%20sandbox&In-Reply-To=44CE5476.8040303%40libero.it">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002900.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] [Nevow] about new guard in sandbox</H1>
    <B>Valentino Volonghi aka Dialtone</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20%5BNevow%5D%20about%20new%20guard%20in%20sandbox&In-Reply-To=44CE5476.8040303%40libero.it"
       TITLE="[Twisted-web] [Nevow] about new guard in sandbox">dialtone at divmod.com
       </A><BR>
    <I>Mon Jul 31 15:52:47 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002900.html">[Twisted-web] [Nevow] about new guard in sandbox
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2901">[ date ]</a>
              <a href="thread.html#2901">[ thread ]</a>
              <a href="subject.html#2901">[ subject ]</a>
              <a href="author.html#2901">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 31 Jul 2006 21:05:26 +0200, Manlio Perillo &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">manlio_perillo at libero.it</A>&gt; wrote:
&gt;<i>Hi again.
</I>&gt;<i>
</I>&gt;<i>I have read the draft implementation of guard in Valentino's sandbox and
</I>&gt;<i>I like it.
</I>&gt;<i>
</I>&gt;<i>However I have some questions:
</I>&gt;<i>- why the ISessionMenager interface does not include a name attribute
</I>&gt;<i>  (since the default Session class uses the private _name)?
</I>
The reason why it misses the name in the interface is that it's not meant to be accessible from the outside. It's a pretty important internal detail in _this_ SessionManager implementation. There might be many other ways to deal with distributed session rather than simply using name attribute on the sessionmanager and ISessionManager ought to be as generic as possible.

&gt;<i>- why Session.authenticatedAs has to be a property?
</I>
Because I wasn't able to find a better name that was somewhat compatible
to using an explicit get/set. And because it's cleaner IMHO.

&gt;<i>- I think that there is no need to store tha password but only the
</I>&gt;<i>  username, so authenticatedAs -&gt; avatarID
</I>
Not really... Authentication is rerun for each request because the avatar is not saved and this is the most important detail of that new guard. Also the avatarId is not available in guard because it's a cred implementation detail. And the avatarId might be any object. But I'm open for alternative solutions.

&gt;<i>- what's the use for the guard attribute in Session?
</I>
It's explained in the docstring of loggedIn (somehow). It's because it makes
it easier to access the guard that created the session.

&gt;<i>- I think that ISessionManager should not have the loggedIn method.
</I>
Why? It allows to change how the application should react to a successfully
logged in session without going through guard code overriding a callback, of a very big method, defined as a closure. IMHO it's a lot cleaner to have it this way unless your reasons are sensible.

&gt;<i>- as I can see the code in SessionManager._tick causes the log
</I>&gt;<i>  &quot;Session %r expired&quot; to be issued two times.
</I>
True.

&gt;<i>- what's the use for mind in a web authentication?
</I>
I have no idea. There might be a usage, why should you make it impossible
to have a usage of it?

&gt;<i>- why credInterface is a variable? It can be something different from
</I>&gt;<i>  IResource?
</I>
iweb2.IResource? Anyway this is absolutely not a valid concern it's simply
a refactoring to allow changing that interface from application level code (again without the need to dig through the code).

&gt;<i>- Session.sessionLifetime is only used on the server side but never set
</I>&gt;<i>  on the cookie.
</I>&gt;<i>  Only persistent cookies have a not null expiration date.
</I>
True. In fact sessionLifetime is used for transient sessions that die when you restart your browser and from the serverside they last until sessionLifetime is expired. If the session is logged in the cookies are made persistent by default. If you use the persistent session manager you also have the chance to make the session persistent (by using rememberMe url argument in the login form).

&gt;<i>- As I can see in SessionWrappper.locateChild the code
</I>&gt;<i>  request.session = session is executed twice (the first time in
</I>&gt;<i>  getSession.
</I>
I think you might be right also on this. Although it's not that big of a problem it might be worth fixing it. Just by making getSession automatically set the session on the request (and not only with brand new sessions) and removing all the other places where this assignment is done. And then rerunning tests.

Also keep in mind that the most developed version of that code lies in:
<A HREF="http://hg.stiq.it/index.cgi/stiq?f=b9671c61c96b;file=stiq/guard.py;style=gitweb">http://hg.stiq.it/index.cgi/stiq?f=b9671c61c96b;file=stiq/guard.py;style=gitweb</A>
and
<A HREF="http://hg.stiq.it/index.cgi/stiq?f=eef00c91fd79;file=stiq/session.py;style=gitweb">http://hg.stiq.it/index.cgi/stiq?f=eef00c91fd79;file=stiq/session.py;style=gitweb</A>

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002900.html">[Twisted-web] [Nevow] about new guard in sandbox
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2901">[ date ]</a>
              <a href="thread.html#2901">[ thread ]</a>
              <a href="subject.html#2901">[ subject ]</a>
              <a href="author.html#2901">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
