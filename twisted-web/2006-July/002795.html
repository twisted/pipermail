<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Re: Thoughts on documentation, wading into Twisted,
	Nevow, etc.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Re%3A%20Thoughts%20on%20documentation%2C%20wading%20into%20Twisted%2C%0A%09Nevow%2C%20etc.&In-Reply-To=32885.206.173.68.153.1152645058.squirrel%40www.wbsysnet.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002793.html">
   <LINK REL="Next"  HREF="002798.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Re: Thoughts on documentation, wading into Twisted,
	Nevow, etc.</H1>
    <B>L. Daniel Burr</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Re%3A%20Thoughts%20on%20documentation%2C%20wading%20into%20Twisted%2C%0A%09Nevow%2C%20etc.&In-Reply-To=32885.206.173.68.153.1152645058.squirrel%40www.wbsysnet.com"
       TITLE="[Twisted-web] Re: Thoughts on documentation, wading into Twisted,
	Nevow, etc.">ldanielburr at mac.com
       </A><BR>
    <I>Tue Jul 11 15:37:17 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002793.html">[Twisted-web] Re: Thoughts on documentation,
	wading into Twisted,  Nevow, etc.
</A></li>
        <LI>Next message: <A HREF="002798.html">[Twisted-web] Re: Thoughts on documentation,
	wading into Twisted, Nevow, etc.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2795">[ date ]</a>
              <a href="thread.html#2795">[ thread ]</a>
              <a href="subject.html#2795">[ subject ]</a>
              <a href="author.html#2795">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 11 Jul 2006 14:10:58 -0500, &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">lloyd at paisite.com</A>&gt; wrote:

[snip]

&gt;<i> Re: IRequest code:
</I>&gt;<i>
</I>
I've got some suggestion for this IResource example, which I will
detail below.

&gt;&gt;<i> from zope.interface import implements
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> from nevow import inevow
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ##
</I>&gt;&gt;<i> ## How does a request come to the Page?
</I>
I'd really prefer to be talking about Resources right from the very
start, rather than web pages.  Note that I mean Resource as in: &quot;The
thing that a URL points to&quot;.  Web applications are becoming a bit
less page-centric these days, so it might be helpful to start the
reader off with the Resource concept, rather than talking about
pages.

&gt;&gt;<i> ##
</I>&gt;&gt;<i> ## or How to use Nevow without all the fancy automations
</I>&gt;&gt;<i> ##
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> # This is a simple Root page object, the inevow.IResource interface
</I>
Maybe something like this:

&quot;This is a simple resource, representing the root, or top-most resource
of this site.  The inevow.IResource interface...&quot;

&gt;&gt;<i> # tells us that it must implement 2 methods:
</I>&gt;&gt;<i> # locateChild and renderHTTP.
</I>&gt;&gt;<i> # locateChild is used to find children of the current page, it must  
</I>&gt;&gt;<i> return
</I>&gt;&gt;<i> a # tuple of (page, remaining_segments)
</I>&gt;&gt;<i> # if there is no page, and you want to display a 404 page, you will need
</I>&gt;&gt;<i> to return # a None, () tuple.
</I>
Let's make this simpler: nevow.rend.NotFound is a much more convenient
and readable way to spell &quot;None, ()&quot;.  So, I'd suggest we change this to
something like the following:

&quot;locateChild is used to find children of the current resource.  It must
return a tuple of (resource, remaining_segments).  If no child resource
exists at this location, you may return nevow.rend.NotFound.&quot;

This ignores the fact that you could also return your own custom error
resource, but maybe that should be saved for later docs?

&gt;&gt;<i> class Root(object): implements(inevow.IResource)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> def locateChild(self, ctx, segments): # This locateChild is 'stupid'  
</I>&gt;&gt;<i> since
</I>&gt;&gt;<i> it can only work if the tree of # pages is static. Anyway it will work  
</I>&gt;&gt;<i> for
</I>
&quot;if the tree of resources is static&quot;

&gt;&gt;<i> our simple example if segments[0] == '': # If the server is looking for  
</I>&gt;&gt;<i> the
</I>&gt;&gt;<i> root page segments will be ('',) # then renderHTTP will be called on  
</I>&gt;&gt;<i> self
</I>&gt;&gt;<i> return self, () elif segments[0] == 'foo': # Now we received a request
</I>&gt;<i> whose
</I>&gt;&gt;<i> segments had in the first position # the string foo
</I>&gt;&gt;<i> # like <A HREF="http://example.org/foo/baz/">http://example.org/foo/baz/</A> -&gt; ('foo', 'baz')
</I>&gt;&gt;<i> # after the page has been located we return it with the remaining  
</I>&gt;&gt;<i> segments
</I>&gt;&gt;<i>  # ('baz')
</I>&gt;&gt;<i> return self.foo, segments[1:] else:
</I>&gt;&gt;<i> return None, ()
</I>return
&gt;&gt;<i>
</I>&gt;&gt;<i> def renderHTTP(self, ctx): # When the server needs to return a response  
</I>&gt;&gt;<i> to
</I>&gt;&gt;<i> the request it will call # the renderHTTP method that will return a  
</I>&gt;&gt;<i> string
</I>&gt;&gt;<i> of what needs to be sent. return &quot;&quot;&quot;&lt;html&gt;&lt;body&gt;Hello world!&lt;br /&gt; &lt;a
</I>&gt;&gt;<i> href=&quot;./foo&quot; id=&quot;foo&quot;&gt;foo&lt;/a&gt;&lt;/body&gt;&lt;/html&gt; &quot;&quot;&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> class Foo(object): implements(inevow.IResource)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> def locateChild(self, ctx, segments): # segments is the remaining  
</I>&gt;&gt;<i> segments
</I>&gt;&gt;<i> returned by the root locateChild # see segments[1:]
</I>&gt;&gt;<i> if segments[0] == 'baz': return self.baz, segments[1:] else:
</I>&gt;&gt;<i> return None, ()
</I>&gt;&gt;<i>
</I>
&quot;return rend.NotFound&quot;

In general, I think it is better to replace the word &quot;page&quot; with &quot;resource&quot;
so that we don't lock readers into thinking of everything as a page; so
much of what make twisted and nevow handy comes into play when you stop
thinking about web pages as the unit of work, and think about resources.

Anyone agree, violently disagree?

L. Daniel Burr

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002793.html">[Twisted-web] Re: Thoughts on documentation,
	wading into Twisted,  Nevow, etc.
</A></li>
	<LI>Next message: <A HREF="002798.html">[Twisted-web] Re: Thoughts on documentation,
	wading into Twisted, Nevow, etc.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2795">[ date ]</a>
              <a href="thread.html#2795">[ thread ]</a>
              <a href="subject.html#2795">[ subject ]</a>
              <a href="author.html#2795">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
