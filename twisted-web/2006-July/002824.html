<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] documentation -- Techno Turkey's fifth adventure
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20documentation%20--%20Techno%20Turkey%27s%20fifth%20adventure&In-Reply-To=32836.206.173.68.153.1152992424.squirrel%40www.wbsysnet.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002829.html">
   <LINK REL="Next"  HREF="002759.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] documentation -- Techno Turkey's fifth adventure</H1>
    <B>L. Daniel Burr</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20documentation%20--%20Techno%20Turkey%27s%20fifth%20adventure&In-Reply-To=32836.206.173.68.153.1152992424.squirrel%40www.wbsysnet.com"
       TITLE="[Twisted-web] documentation -- Techno Turkey's fifth adventure">ldanielburr at mac.com
       </A><BR>
    <I>Mon Jul 17 13:28:27 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002829.html">[Twisted-web] documentation -- Techno Turkey's fifth adventure
</A></li>
        <LI>Next message: <A HREF="002759.html">[Twisted-web]  Thoughts on documentation, wading into Twisted,
	Nevow, etc.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2824">[ date ]</a>
              <a href="thread.html#2824">[ thread ]</a>
              <a href="subject.html#2824">[ subject ]</a>
              <a href="author.html#2824">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Lloyd,


On Sat, 15 Jul 2006 14:40:24 -0500, &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">lloyd at paisite.com</A>&gt; wrote:

[snip]

&gt;<i> So here's... Techno Turkey
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Dialtone's Resource Magic
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &quot;It's magic!&quot; said Techno Turkey.
</I>&gt;<i>
</I>&gt;<i> &quot;What's magic?&quot; asked Twisted Wizard Daniel.
</I>&gt;<i>
</I>&gt;<i> &quot;I just type it in at the top of my browser and... shazamm... back comes
</I>&gt;<i> just the page I'm looking for -- could be from anywhere in the world.  
</I>&gt;<i> It's
</I>&gt;<i> like casting a magic spell.&quot;
</I>&gt;<i>
</I>&gt;<i> &quot;It's far more magical than you think,&quot; says Twisted Wizard Daniel. &quot;Just
</I>&gt;<i> consider it's name: 'Uniform Resource Identifier' -- URI.&quot;
</I>&gt;<i>
</I>&gt;<i> &quot;I thought it was a URL,&quot; said Turkey.
</I>&gt;<i>
</I>&gt;<i> &quot;That was before people understood it's full mojo. Back then they called
</I>&gt;<i> it a 'Uniform Resource Locator.' But then they realized that it could be
</I>&gt;<i> used to identify anything in cyberspace.&quot;
</I>&gt;<i>
</I>&gt;<i> &quot;Anything?&quot; asked Turkey.
</I>&gt;<i>
</I>&gt;<i> &quot;Sure, anything. We use URI's to identify servers, webpages, web  
</I>&gt;<i> services,
</I>&gt;<i> images, sound files...&quot;
</I>&gt;<i>
</I>&gt;<i> &quot;But the only thing I ever get back are webpages.&quot;
</I>&gt;<i>
</I>&gt;<i> &quot;That's because that's what static HTTP webservers do. They listen for
</I>&gt;<i> their designated URI and return the specified HTML web page. But aided by
</I>&gt;<i> the right software, they can return anything of a digital nature.&quot;
</I>&gt;<i>
</I>&gt;<i> Twisted Wizard Dialtone happened to be listening in.
</I>&gt;<i>
</I>&gt;<i> &quot;Hey, Turkey old bird,&quot; said Daniel, &quot;Want to see my Resource magic?&quot;
</I>&gt;<i>
</I>
Looks like a typo, above.  I think it is intended to read &quot;said Dialtone&quot;.

[snip initial download/install stuff]

&gt;<i> Once downloaded:
</I>&gt;<i>
</I>&gt;<i> -- how to find Twisted and Nevow source directories
</I>
I'd just make sure twisted and nevow are installed in site-packages, though
other options are certainly possible.  In the spirit of not distracting the
reader from non-essential information, let's just pick one.

&gt;<i> -- how to set up development environment
</I>
Well, we've got to at least cover setup for Win32 and Linux.  I'd argue  
that
OS X and one of the BSDs deserves a little attention too.

&gt;<i> -- how to set up working directories -- user source, logs,
</I>
See my response to dialtone's recent email on this list, for my suggestion
regarding directory layout.

&gt;<i> -- how to set up path variables
</I>
I suggest using .pth files rather than path variables.  Using .pth files
should &quot;just work&quot; regardless of your OS, and not require any fiddling
around with the environment by hand.

So, basically, for a new web project, you'd create your project dirs, and
then stick a &quot;myproject.pth&quot; file in the site-packages directory,  
containing
&quot;/path/to/my/project/topmost/folder&quot;

&gt;<i> -- how to test development environment
</I>&gt;<i>
</I>
To test that the dev environment is set up correctly, I'd just start up a
python interpreter prompt and import twisted, then import nevow, and  
lastly,
import myprojectpackage.

&gt;<i> Should be sufficiently detailed that even the slowest turkey on the farm
</I>&gt;<i> can implement.
</I>&gt;<i>
</I>&gt;<i> Anybody up for fleshing in details for this page? I can edit, put it up  
</I>&gt;<i> on
</I>&gt;<i> the Turkey server, and link it into Turkey adventures.
</I>&gt;<i>
</I>&gt;<i> ***************
</I>&gt;<i>
</I>&gt;<i> &quot;Now, create a file called ResourceMagic.py in your Twisted source
</I>&gt;<i> directoy, and enter the following code:&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> from zope.interface import implements
</I>&gt;<i>
</I>&gt;<i> from nevow import inevow
</I>&gt;<i>
</I>&gt;<i> ##
</I>&gt;<i> ## How does a request come to the Resource?
</I>&gt;<i> ##
</I>&gt;<i> ## or How to use Nevow without all the fancy automations
</I>&gt;<i> ##
</I>&gt;<i>
</I>&gt;<i> class Root(object):
</I>&gt;<i>     # This is a simple resource, representing the root, or top-most
</I>&gt;<i>
</I>&gt;<i>     # resource of this site.  The inevow.IResource interface
</I>&gt;<i>     # tells us that it must implement two methods:
</I>&gt;<i>     # locateChild and renderHTTP.
</I>&gt;<i>     # locateChild is used to find children of the current resource.  It  
</I>&gt;<i> must
</I>&gt;<i>     # return a tuple of (resource, remaining_segments).  If no child  
</I>&gt;<i> resource
</I>&gt;<i>     # exists at this location, you may return nevow.rend.NotFound.&quot;
</I>&gt;<i>     # For more information see:
</I>&gt;<i>     # <A HREF="http://divmod.org/users/exarkun/nevow-doc/nevow-traversal.html">http://divmod.org/users/exarkun/nevow-doc/nevow-traversal.html</A>
</I>&gt;<i>     implements(inevow.IResource)
</I>&gt;<i>
</I>&gt;<i>     def locateChild(self, ctx, segments):
</I>&gt;<i>         # This locateChild is 'stupid' since it can only work if the  
</I>&gt;<i> tree of
</I>&gt;<i>         # resources is static. But it will work for our simple example
</I>&gt;<i>         if segments[0] == '':
</I>&gt;<i>             # If the server is looking for the root resource segments  
</I>&gt;<i> will
</I>&gt;<i> be ('',)
</I>&gt;<i>             # then renderHTTP will be called on self
</I>&gt;<i>             return self, ()
</I>&gt;<i>         elif segments[0] == 'foo':
</I>&gt;<i>             # Now we received a request whose segments had in the first
</I>&gt;<i> position
</I>&gt;<i>             # the string foo like <A HREF="http://example.org/foo/baz/">http://example.org/foo/baz/</A> -&gt; ('foo',
</I>&gt;<i> 'baz').
</I>&gt;<i>             # After the resource has been located we return it with the
</I>&gt;<i> remaining segments
</I>&gt;<i>             # ('baz')
</I>&gt;<i>             return self.foo, segments[1:]
</I>&gt;<i>
</I>&gt;<i>         else:
</I>&gt;<i>             return None, ()
</I>&gt;<i>
</I>&gt;<i>     def renderHTTP(self, ctx):
</I>&gt;<i>         # When the server needs to return a response to the request it
</I>&gt;<i> will call
</I>&gt;<i>         # the renderHTTP method that will return a string of what needs  
</I>&gt;<i> to
</I>&gt;<i> be sent.
</I>&gt;<i>         def renderHTTP(self, ctx):
</I>&gt;<i>             return &quot;&quot;&quot;&lt;html&gt;&lt;body&gt;Hello, world!&lt;br /&gt;&quot;&quot;&quot;
</I>&gt;<i>
</I>&gt;<i> class Foo(object):
</I>&gt;<i>     implements(inevow.IResource)
</I>&gt;<i>
</I>&gt;<i>     def locateChild(self, ctx, segments):
</I>&gt;<i>         # segments is the remaining segments returned by the root  
</I>&gt;<i> locateChild
</I>&gt;<i>         # see segments[1:]
</I>&gt;<i>         if segments[0] == 'baz':
</I>&gt;<i>             return self.baz, segment[1:]
</I>&gt;<i>         else:
</I>&gt;<i>             return None, ()
</I>&gt;<i>
</I>&gt;<i>     def renderHTTP(self, ctx):
</I>&gt;<i>         return &quot;&quot;&quot;&lt;html&gt;&lt;body&gt;&lt;h1 id=&quot;heading&quot;&gt;You are in Foo&lt;/h1&gt;
</I>&gt;<i>         &lt;a href=&quot;./foo/baz&quot; id=&quot;baz&quot;&gt;baz&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;
</I>&gt;<i> &quot;&quot;&quot;
</I>&gt;<i>
</I>&gt;<i> class Baz(object):
</I>&gt;<i>     implements(inevow.IResource)
</I>&gt;<i>     def locateChild(self, ctx, segments):
</I>&gt;<i>         return None, ()
</I>&gt;<i>     def renderHTTP(self, ctx):
</I>&gt;<i>         return '&lt;html&gt;&lt;body&gt;&lt;h1 id=&quot;heading&quot;&gt;You are in
</I>&gt;<i> Baz&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;'
</I>&gt;<i>
</I>&gt;<i> # We are adding children to the resources.
</I>&gt;<i> # This could also happen inside the class.
</I>&gt;<i> root = Root()
</I>&gt;<i> root.foo = Foo()
</I>&gt;<i> root.foo.baz = Baz()
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &quot;Note,&quot; said Dialtone, &quot;That this is the IResource interface from Nevow;
</I>&gt;<i> not the one from twisted.web.&quot;
</I>&gt;<i>
</I>&gt;<i> &quot;So now what?&quot; said Turkey.
</I>&gt;<i>
</I>&gt;<i> &quot;At the end of your ResourceMagic.py source file enter:&quot;
</I>&gt;<i>
</I>&gt;<i> from twisted.internet import reactor
</I>&gt;<i> from nevow import appserver
</I>&gt;<i> site = appserver.NevowSite(root)
</I>&gt;<i> reactor.listenTCP(8080, site)
</I>&gt;<i>
</I>&gt;<i> &quot;Hey, I recognize the reactor bit from earlier adventures, &quot; said
</I>&gt;<i> Turkey, &quot;But what's this 'nevow?'&quot;
</I>&gt;<i>
</I>&gt;<i> &quot;Nevow is a web-application construction kit written in Python. Check out
</I>&gt;<i> <A HREF="http://divmod.org/trac/wiki/DivmodNevow.">http://divmod.org/trac/wiki/DivmodNevow.</A> But let's keep our eye on the
</I>&gt;<i> ball here...
</I>&gt;<i>
</I>
I'd move this section up, and place it just after the ResourceMagic  
listing.
The code uses inevow.IResource, so I think it is best to clear that up
right away, rather than having Dialtone mention Nevow, go on to another
code snippet and *then* finally explaining what nevow is.

&gt;<i> &quot;To cast the spell, just save the ResourceMagic.py file and enter at the
</I>&gt;<i> console prompt:&quot;
</I>&gt;<i>
</I>&gt;<i> python ResourceMagic.py
</I>&gt;<i>
</I>&gt;<i> &quot;Then point your browser to:&quot;
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://localhost:8080/">http://localhost:8080/</A>
</I>&gt;<i>
</I>&gt;<i> &quot;Wait,&quot; said Turkey, &quot;Before we run it, I'm still confused by this word
</I>&gt;<i> 'Resource.' When you say, 'Resource,' are you talking about web pages?&quot;
</I>&gt;<i>
</I>&gt;<i> &quot;Could be,&quot; said Daniel. &quot;But there are many more kinds of Resources than
</I>&gt;<i> webpages. A Resource is anything that a URI happens to point to --
</I>&gt;<i> anything in cyberspace.&quot;
</I>&gt;<i>
</I>&gt;<i> &quot;Well, at least,&quot; said Dialtone, &quot;Anything available through the
</I>&gt;<i> designated server.&quot;
</I>&gt;<i>
</I>&gt;<i> &quot;Like my favorite Radiohead MP3?&quot; said Turky.
</I>&gt;<i>
</I>&gt;<i> &quot;Anything that gets you through the day,&quot; said Daniel. &quot;For more info,
</I>&gt;<i> check out:&quot;
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://en.wikipedia.org/wiki/Resource_(Web">http://en.wikipedia.org/wiki/Resource_(Web</A>)
</I>&gt;<i>
</I>&gt;<i> &quot;...or:&quot;
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://en.wikipedia.org/wiki/Representational_State_Transfer#Resources">http://en.wikipedia.org/wiki/Representational_State_Transfer#Resources</A>
</I>&gt;<i>
</I>&gt;<i> &quot;OK,&quot; said Turkey, turning to Dialtone. &quot;How's this magic spell of yours
</I>&gt;<i> supposed to work?&quot;
</I>&gt;<i>
</I>&gt;<i> &quot;Well let's run it and see...&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Another way to run the code
</I>&gt;<i>
</I>&gt;<i> Another way to run Dialtone's code uses the tac file approach.
</I>
I probably sound like a broken record, but I'd suggest offering one, and
only one, way to run the code, so that users aren't fiddling with things
that are not central to grasping the concepts being presented.

Me, I use .tac files for everything these days, so that's what I would
recommend for use within the tutorials.

Keep up the great work, it is inspiring to see someone take this on.

L. Daniel Burr

</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002829.html">[Twisted-web] documentation -- Techno Turkey's fifth adventure
</A></li>
	<LI>Next message: <A HREF="002759.html">[Twisted-web]  Thoughts on documentation, wading into Twisted,
	Nevow, etc.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2824">[ date ]</a>
              <a href="thread.html#2824">[ thread ]</a>
              <a href="subject.html#2824">[ subject ]</a>
              <a href="author.html#2824">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
