<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Re: [Twisted-Python] again on nested sequence
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Re%3A%20%5BTwisted-Python%5D%20again%20on%20nested%20sequence&In-Reply-To=44BBCB3E.9010005%40libero.it">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002818.html">
   <LINK REL="Next"  HREF="002823.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Re: [Twisted-Python] again on nested sequence</H1>
    <B>Valentino Volonghi aka Dialtone</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Re%3A%20%5BTwisted-Python%5D%20again%20on%20nested%20sequence&In-Reply-To=44BBCB3E.9010005%40libero.it"
       TITLE="[Twisted-web] Re: [Twisted-Python] again on nested sequence">dialtone at divmod.com
       </A><BR>
    <I>Mon Jul 17 13:04:55 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002818.html">[Twisted-web] Re: [Twisted-Python] again on nested sequence
</A></li>
        <LI>Next message: <A HREF="002823.html">[Twisted-web] Re: [Twisted-Python] again on nested sequence
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2821">[ date ]</a>
              <a href="thread.html#2821">[ thread ]</a>
              <a href="subject.html#2821">[ subject ]</a>
              <a href="author.html#2821">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 17 Jul 2006 15:39:10 -0200, Manlio Perillo &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">manlio_perillo at libero.it</A>&gt; wrote:
&gt;<i>And what about my first solution?
</I>&gt;<i><A HREF="http://twistedmatrix.com/pipermail/twisted-web/2006-July/002813.html">http://twistedmatrix.com/pipermail/twisted-web/2006-July/002813.html</A>
</I>
Better, although it rewrites the sequence renderer for more or less the same functionality. Not too bad of course but could be avoided with less code and more templates (that usually are dealt with by the designer).

&gt;&gt;<i> The second is that IData is not for external use but rather internal
</I>&gt;&gt;<i> Nevow usage.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Ok, thanks for the advice.
</I>&gt;<i>I have read about this trick in a message in the archive.
</I>&gt;<i>
</I>&gt;<i>Only one last question.
</I>&gt;<i>I have read the whole ml archive but I was unable to find any message
</I>&gt;<i>where it is explained why the context is bad.
</I>
The context has some bad points:
1) Changes the rules for passing arguments to python functions, instead of
   using normal foo(a, b, c) you do ctx.remember(a, IA)... and foo(ctx), then
   in foo you do IA(ctx) and so on. While this might have an advantage after
   an initial analysis it isn't like that at all since you can always use
   **kwargs and grab the arguments you need from kwargs, and kwargs is
   standard python convention (although explicitly defining arguments is 
   better for most cases).
2) It is slow... each adaptation is a non-trivial function call that might
   end up with multiple lookups into a tree. Of course there are 
   optimizations that could solve this problem but nobody dared to write them
   AND test them AND merge with trunk.
3) The context is slow in a way that can hardly be optimized because for each
   branch in the rendering/childlocating procedures a new context is created.
   I don't have real numbers but I can presume that for each request a 
   minimum of 3 contexts for a mostly static page at root level and an
   unlimited maximum of object creation/collection and this for _each_  
   request.
4) The context makes non trivial understanding what instead should be trivial
   because it saves state that is reused later breaking the tracebacks.

This are the first 4 reasons that came to mind.

&gt;<i>Ok.
</I>&gt;<i>But I'm searching a simple solution that is database friendly; that is,
</I>&gt;<i>where I can map directly database queries to data directives.
</I>
Just like everyone else does. Besides that writing a simple function like the following:

def mapComments(comments, for_atom=False):
    for comment in comments:
        yield dict(rank=comment[0],
                   author=comment[1],
                   id=comment[2],
                   body=comment[3],
                   date=comment[4]
                  )

Will give you a dict interface over the comments rows returned from the database without losing much performance compared to the situation without that functions (also thanks to generators).

Also consider that it's better to put time in creating something that makes a specific problem more generic so that an already existing tool can be used to solve it rather than creating many different solutions to the same problem.

 

</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002818.html">[Twisted-web] Re: [Twisted-Python] again on nested sequence
</A></li>
	<LI>Next message: <A HREF="002823.html">[Twisted-web] Re: [Twisted-Python] again on nested sequence
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2821">[ date ]</a>
              <a href="thread.html#2821">[ thread ]</a>
              <a href="subject.html#2821">[ subject ]</a>
              <a href="author.html#2821">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
