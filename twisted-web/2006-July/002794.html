<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] web2: reverse dns lookup in twisted reactor thread
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20web2%3A%20reverse%20dns%20lookup%20in%20twisted%20reactor%20thread&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002779.html">
   <LINK REL="Next"  HREF="002796.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] web2: reverse dns lookup in twisted reactor thread</H1>
    <B>Div Shekhar</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20web2%3A%20reverse%20dns%20lookup%20in%20twisted%20reactor%20thread&In-Reply-To="
       TITLE="[Twisted-web] web2: reverse dns lookup in twisted reactor thread">div.shekhar at gmail.com
       </A><BR>
    <I>Tue Jul 11 14:41:16 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002779.html">[Twisted-web] Bay Area Twisted Sprint - July 15th and 16th
</A></li>
        <LI>Next message: <A HREF="002796.html">[Twisted-web] web2: reverse dns lookup in twisted reactor thread
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2794">[ date ]</a>
              <a href="thread.html#2794">[ thread ]</a>
              <a href="subject.html#2794">[ subject ]</a>
              <a href="author.html#2794">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I've been using web2 for WSGI apps for a few months, and it's been
working fine. However, I did run into one bug this week:

web2 does a reverse dns lookup of the client ip address, and in the
twisted reactor thread, no less! When the dns server is unreachable,
this delays that http request and blocks twisted as well.

I'm planning to solve this by commenting out line 490 in
twisted/web2/channel/http.py:

        host.host = _cachedGetHostByAddr(host.host)

I'd recommend that this lookup be moved to wsgi thread and/or be
turned off by default. Just wanted to check - am I missing something?

Cheers,
Div.

</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002779.html">[Twisted-web] Bay Area Twisted Sprint - July 15th and 16th
</A></li>
	<LI>Next message: <A HREF="002796.html">[Twisted-web] web2: reverse dns lookup in twisted reactor thread
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2794">[ date ]</a>
              <a href="thread.html#2794">[ thread ]</a>
              <a href="subject.html#2794">[ subject ]</a>
              <a href="author.html#2794">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
