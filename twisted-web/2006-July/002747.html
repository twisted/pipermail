<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Athena callRemote with str()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Athena%20callRemote%20with%20str%28%29&In-Reply-To=44A6FEDD.4010508%40imperial.ac.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002746.html">
   <LINK REL="Next"  HREF="002748.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Athena callRemote with str()</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Athena%20callRemote%20with%20str%28%29&In-Reply-To=44A6FEDD.4010508%40imperial.ac.uk"
       TITLE="[Twisted-web] Athena callRemote with str()">exarkun at divmod.com
       </A><BR>
    <I>Sat Jul  1 18:13:48 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002746.html">[Twisted-web] Athena callRemote with str()
</A></li>
        <LI>Next message: <A HREF="002748.html">[Twisted-web] 
	Thoughts on documentation, wading into Twisted, Nevow, etc.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2747">[ date ]</a>
              <a href="thread.html#2747">[ thread ]</a>
              <a href="subject.html#2747">[ subject ]</a>
              <a href="author.html#2747">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 02 Jul 2006 00:01:49 +0100, Phil Mayers &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">p.mayers at imperial.ac.uk</A>&gt; wrote:
&gt;<i>Jean-Paul Calderone wrote:
</I>&gt;&gt;<i>On Sat, 01 Jul 2006 22:12:19 +0100, Phil Mayers &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">p.mayers at imperial.ac.uk</A>&gt; 
</I>&gt;&gt;<i>wrote:
</I>&gt;&gt;&gt;<i>Is the behaviour that Athena won't permit a server-side callRemote to 
</I>&gt;&gt;&gt;<i>return a str() and mandates a unicode() intentional? If so, what is the 
</I>&gt;&gt;&gt;<i>rationale?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Yep.  JavaScript doesn't have a byte string type, only a character string
</I>&gt;&gt;<i>type.  Athena won't guess what kind of characters you want to result from
</I>&gt;&gt;<i>a Python str.
</I>&gt;<i>
</I>&gt;<i>Hmm. I had not appreciated the wholly character-based nature of javascript 
</I>&gt;<i>strings. Thanks - I'll recast str() as unicode(). In case anyone is 
</I>&gt;<i>interested the specific thing I was passing was packed MAC and IP addresses, 
</I>&gt;<i>which of course are not unicode strings, for a host management database. I 
</I>&gt;<i>will have to unpack them to get unambiguous encodings :o(
</I>&gt;<i>
</I>&gt;<i>On a related note, is there any particular reason that Nevow uses it's own 
</I>&gt;<i>json lib instead of $thebetter of the python json libs? Because at least one 
</I>&gt;<i>of them has support for pluggable mappings of types to serialisers - e.g. 
</I>&gt;<i>DateTime -&gt; $thestringrep - allowing applications to be explicit and hook 
</I>&gt;<i>when sending complex types over the wire, but without having to do so in 
</I>&gt;<i>boilerplate each call.
</I>
The historical explanation is that nevow's was written before most of the
others (the ones which predate it were unusably bad at the time).

The rest of the explanation is that JSON is not actually part of the
public API provided by Athena.  It's an implementation detail which may
well go away at some future point.  Specifically, I am currently
contemplating using a packed format for client -&gt; server communication.
There aren't plans to replace JSON in server -&gt; client messages yet, but
it could happen at some future point.

Jean-Paul

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002746.html">[Twisted-web] Athena callRemote with str()
</A></li>
	<LI>Next message: <A HREF="002748.html">[Twisted-web] 
	Thoughts on documentation, wading into Twisted, Nevow, etc.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2747">[ date ]</a>
              <a href="thread.html#2747">[ thread ]</a>
              <a href="subject.html#2747">[ subject ]</a>
              <a href="author.html#2747">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
