<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] [Nevow] JavaScript code
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20%5BNevow%5D%20JavaScript%20code&In-Reply-To=44CE1A6A.5050907%40imperial.ac.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002889.html">
   <LINK REL="Next"  HREF="002875.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] [Nevow] JavaScript code</H1>
    <B>Tristan Seligmann</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20%5BNevow%5D%20JavaScript%20code&In-Reply-To=44CE1A6A.5050907%40imperial.ac.uk"
       TITLE="[Twisted-web] [Nevow] JavaScript code">mithrandi-twisted-web at mithrandi.za.net
       </A><BR>
    <I>Mon Jul 31 10:21:02 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002889.html">[Twisted-web] [Nevow] JavaScript code
</A></li>
        <LI>Next message: <A HREF="002875.html">[Twisted-web] [Nevow] nestedsequence renderer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2890">[ date ]</a>
              <a href="thread.html#2890">[ thread ]</a>
              <a href="subject.html#2890">[ subject ]</a>
              <a href="author.html#2890">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>* Phil Mayers &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">p.mayers at imperial.ac.uk</A>&gt; [2006-07-31 15:57:46 +0100]:

&gt;<i> &gt;Is there anything besides XMLHTTPRequest that you would use MochiKit's
</I>&gt;<i> &gt;deferreds for? If you're using Athena, you don't have any need for
</I>&gt;<i> &gt;MochiKit's XHR support, so this seems to be a non-issue...
</I>&gt;<i> 
</I>&gt;<i> I can think of several reasons one might want MochiKit.
</I>&gt;<i> 
</I>&gt;<i> Due to the security model protecting XMLHTTP requests, you can only make 
</I>&gt;<i> requests back to the same origin server. Therefore, if you want to call 
</I>&gt;<i> an external (non-Twisted, non-Nevow, non-Athena) application from your 
</I>&gt;<i> Athena page, you might choose to glue that application into your server 
</I>&gt;<i> URL space using server-side reverse proxying.
</I>
You could make XHR calls via this reverse-proxy using the Athena
primitives for XHR, though.

&gt;<i> If Athena is to replace MochiKit, it would need to provide at least as 
</I>&gt;<i> good primitives for e.g. JSON-RPC. If it does not, you'd still need a 
</I>&gt;<i> library to do so.
</I>
I don't see any reason why Athena has to replace MochiKit. For the most
part, the two libraries are completely orthogonal. If you want to use
MochiKit's JSON-RPC functionality, nothing is stopping you.

&gt;<i> In *addition*, my understanding was that many (most?) browsers limited 
</I>&gt;<i> the number of outstanding HTTP requests you may have to a given server 
</I>&gt;<i> to 2. Therefore, running &gt;2 &quot;event loops&quot; for XMLHTTP requests to e.g. 
</I>&gt;<i> different application spaces is impossible. If you happen to have 3 
</I>&gt;<i> application spaces deployed into your URL hierarchy, well, tough.
</I>
MochiKit does not implement any kind of peristent HTTP transport, so
this seems a moot point.

&gt;<i> Finally, I think it's worth pointing out that one might want to use the 
</I>&gt;<i> Nevow+Athena code for widgetry and so forth, but if one already had an 
</I>&gt;<i> application API as e.g. JSON-RPC calls, exposing those calls *again* to 
</I>&gt;<i> an &quot;implementation is internal detail&quot; Athena channel is at best time 
</I>&gt;<i> consuming boilerplate, and at worst bug-riddled and insecure.
</I>
I'm not personally concerned with this use case, so I'm not likely to
spend any time on implementing this. I would imagine that patches to
refactor Athena's Widget code to be less dependent on the Athena
client-server transport would be accepted, though, so others are free to
do the work to implement this.

&gt;<i> Athena-JS is more like a domain-specific language IHMO. It's not 
</I>&gt;<i> unreasonable to want to code the non-athena specific bits to a more 
</I>&gt;<i> general JS platform/framework/library.
</I>
My point is that nothing is stopping you from doing this, so far as I
can see.

&gt;<i> &gt;&gt;And also using mochikit would only solve the visual effects problem, 
</I>&gt;<i> &gt;&gt;whereas the browser compatibility problem won't be solved (not that I 
</I>&gt;<i> &gt;&gt;especially care about the bugged safari).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Increasing the usage of MochiKit in Athena would not solve the browser
</I>&gt;<i> &gt;compatibility problem either: the lack of support for various browsers
</I>&gt;<i> &gt;stems from functionality that is not implemented in MochiKit at all.
</I>&gt;<i> 
</I>&gt;<i> It seems a peculiar choice to not just fold those fixes back into 
</I>&gt;<i> MochiKit. The upstream developer(s) have good reputations for being 
</I>&gt;<i> sensible people, do they not?
</I>
There are no &quot;fixes&quot;. The copy of MochiKit distributed in Nevow is
completely unmodified so far as I am aware (even if it isn't the latest
version). There is Athena-specific functionality, not implemented at all
by MochiKit, that requires either certain browser functionality, or
browser-runtime-specific code. For example, the Divmod.Class system
results in widespread idiomatic usage of named function expressions.
Safari's JavaScript parser chokes on this as invalid syntax, hence the
lack of Safari support. As was pointed out elsewhere, this problem has
been fixed in WebKit upstream, so will presumably make its way into
Safari at some point; when this happens, doing the rest of the work to
support Safari should not be very difficult.

This is basically all completely orthogonal functionality, however;
Athena is not reimplementing large portions of MochiKit verbatim, it is
implementing different functionality in different ways, with a few
exceptions such as XHR and Deferred.

Once the MochiKit dependency in Athena is completely gone, there will be
no need to distribute MK alongside Athena, and thus developers will be
free to include whatever version of MochiKit they wish for their own
use, without having to jump through hoops.
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20060731/a903afa0/attachment.pgp">http://twistedmatrix.com/pipermail/twisted-web/attachments/20060731/a903afa0/attachment.pgp</A>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002889.html">[Twisted-web] [Nevow] JavaScript code
</A></li>
	<LI>Next message: <A HREF="002875.html">[Twisted-web] [Nevow] nestedsequence renderer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2890">[ date ]</a>
              <a href="thread.html#2890">[ thread ]</a>
              <a href="subject.html#2890">[ subject ]</a>
              <a href="author.html#2890">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
