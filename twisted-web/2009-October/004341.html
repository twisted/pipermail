<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Limit the simultaneous	twisted.web.client.downloadPage requests
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Limit%20the%20simultaneous%0A%09twisted.web.client.downloadPage%20requests&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004340.html">
   <LINK REL="Next"  HREF="004342.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Limit the simultaneous	twisted.web.client.downloadPage requests</H1>
    <B>Igor Katson</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Limit%20the%20simultaneous%0A%09twisted.web.client.downloadPage%20requests&In-Reply-To="
       TITLE="[Twisted-web] Limit the simultaneous	twisted.web.client.downloadPage requests">descentspb at gmail.com
       </A><BR>
    <I>Sat Oct 24 09:20:49 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004340.html">[Twisted-web] docFactory at Nevow Elements
</A></li>
        <LI>Next message: <A HREF="004342.html">[Twisted-web] Limit the	simultaneous	twisted.web.client.downloadPage requests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4341">[ date ]</a>
              <a href="thread.html#4341">[ thread ]</a>
              <a href="subject.html#4341">[ subject ]</a>
              <a href="author.html#4341">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello!

I am a newbie in twisted, sorry if my question sounds awkward.

I have written a pretty simple recursive page downloader, which parses 
an html, extracts all the needed links from it, and starts dowloading 
them. The links are the videofiles, so they are pretty large. The 
problem is, that the downloader works TOO FAST :) I want to set 
something like the global bandwidth limit or the maximum limit of 
concurrently downloading files.

I am using the twisted.web.client.downloadPage to download the files and 
using the Deferred, that it returns.
I can't understand how to make it still return a Deferred, corresponding 
to that file, but not start downloading right away, but instead start 
downloading it on some kind of event (make a manger-like wrapper for 
that function).

So I want the code to still look simple like this:

for link in links:
    d = downloadPage_limited(link, filename)

And the wrapper(function downloadPage_limited) will manage the amount of 
concurrent downloads, and will still return the Deferred, which will be 
returned by twisted.web.client.downloadPage.

Is my idea about a &quot;wrapper&quot; practical and what's the general way to 
write it?
On which event is it better to decrement the counter of the amount 
currently downloading files?

Hope it is clear enough.

Thanks in advance,
Igor Katson.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004340.html">[Twisted-web] docFactory at Nevow Elements
</A></li>
	<LI>Next message: <A HREF="004342.html">[Twisted-web] Limit the	simultaneous	twisted.web.client.downloadPage requests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4341">[ date ]</a>
              <a href="thread.html#4341">[ thread ]</a>
              <a href="subject.html#4341">[ subject ]</a>
              <a href="author.html#4341">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
