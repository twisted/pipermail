<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Tracking the progress of the server
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Tracking%20the%20progress%20of%20the%20server&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004351.html">
   <LINK REL="Next"  HREF="004352.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Tracking the progress of the server</H1>
    <B>naman jain</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Tracking%20the%20progress%20of%20the%20server&In-Reply-To="
       TITLE="[Twisted-web] Tracking the progress of the server">namanvit at gmail.com
       </A><BR>
    <I>Tue Oct 27 01:48:25 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004351.html">[Twisted-web] Limit the simultaneous	twisted.web.client.downloadPage requests
</A></li>
        <LI>Next message: <A HREF="004352.html">[Twisted-web] using css with nevow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4350">[ date ]</a>
              <a href="thread.html#4350">[ thread ]</a>
              <a href="subject.html#4350">[ subject ]</a>
              <a href="author.html#4350">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I have a client server model in twisted, where the server spawns a thread (
basically a test script in python that runs for about 20 mins)
I want to track the progress of the thread, and send the progress to the
client back

So, I write something like this in my server:

parent_conn, child_conn = Pipe()
thread = Process(target = start_test.main_func, args=(SCRIPT_PATH,
TEMP_OUTPUT_PATH, self.output_name, child_conn))
thread.start()

response = parent_conn.recv()
print response //prints like: initialization done
self.transport.write(response)


response = parent_conn.recv()
print response // configuration done
self.transport.write(response)

.
.
.

thread.join()


But the transport.write calls don't send at the same time. instead they wait
for the thread to finish (coz of thread.join) and then append all the
response and send it back; like &quot;initialization doneconfiguration
done...done&quot;
thereby defeating the purpose of creating a thread.

How do I give the control to the reactor to write the data back, and still
keep the thread running?
or is there any other way these kinda of progress can be tracked ?
I am kinda stuck with this :(
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20091027/d7bb2957/attachment.htm">http://twistedmatrix.com/pipermail/twisted-web/attachments/20091027/d7bb2957/attachment.htm</A> 
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004351.html">[Twisted-web] Limit the simultaneous	twisted.web.client.downloadPage requests
</A></li>
	<LI>Next message: <A HREF="004352.html">[Twisted-web] using css with nevow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4350">[ date ]</a>
              <a href="thread.html#4350">[ thread ]</a>
              <a href="subject.html#4350">[ subject ]</a>
              <a href="author.html#4350">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
