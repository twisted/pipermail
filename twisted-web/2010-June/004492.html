<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] parsing xml coming from a socket
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20parsing%20xml%20coming%20from%20a%20socket&In-Reply-To=AANLkTinMJj4QDXU1mVKEK7UGMsPfbRzlr3cjdb05-u2E%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004491.html">
   <LINK REL="Next"  HREF="004493.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] parsing xml coming from a socket</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20parsing%20xml%20coming%20from%20a%20socket&In-Reply-To=AANLkTinMJj4QDXU1mVKEK7UGMsPfbRzlr3cjdb05-u2E%40mail.gmail.com"
       TITLE="[Twisted-web] parsing xml coming from a socket">glyph at twistedmatrix.com
       </A><BR>
    <I>Tue Jun  1 10:44:27 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="004491.html">[Twisted-web] parsing xml coming from a socket
</A></li>
        <LI>Next message: <A HREF="004493.html">[Twisted-web] A small getPage problem accessing localhost on Vista
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4492">[ date ]</a>
              <a href="thread.html#4492">[ thread ]</a>
              <a href="subject.html#4492">[ subject ]</a>
              <a href="author.html#4492">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello, Antonis!

On Jun 1, 2010, at 9:46 AM, Antonis Kaklis wrote:

&gt;<i> Hi to all, and since this is my first post, congratulations for the perfect framework.
</I>
Thank you :).

&gt;<i> i have the following code
</I>
This code has two major, obvious problems:

&gt;<i> class SimpleServer(LineReceiver):  
</I>&gt;<i> 
</I>&gt;<i>     def dataReceived(self, line): 
</I>&gt;<i> 
</I>Here you say &quot;dataReceived&quot; receives a &quot;line&quot; parameter.  But dataReceived does not receive lines, it receives *data*, i.e. arbitrary chunks of bytes.  What you want to do is write a *line*Received method; you are already using LineReceiver, so I assume that's what you were trying to do.

If you fix that, the second problem is that you are creating a new XML parser for every line received.  Is that actually what you want to do?  Your message has some headers, which you will want to skip, and then the body of the message spans multiple lines.

Your &quot;XML message&quot; looks a lot like an HTTP POST (I am assuming the lack of spaces after the headers in your example is a typo).  Perhaps you would be better off using the built-in HTTP server in twisted.web, rather than trying to implement your own wire-level protocol?

Good luck,

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20100601/dbd5d431/attachment.htm">http://twistedmatrix.com/pipermail/twisted-web/attachments/20100601/dbd5d431/attachment.htm</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004491.html">[Twisted-web] parsing xml coming from a socket
</A></li>
	<LI>Next message: <A HREF="004493.html">[Twisted-web] A small getPage problem accessing localhost on Vista
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4492">[ date ]</a>
              <a href="thread.html#4492">[ thread ]</a>
              <a href="subject.html#4492">[ subject ]</a>
              <a href="author.html#4492">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
