<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Session class
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Session%20class&In-Reply-To=20081001173804.31635.411247414.divmod.xquotient.836%40weber.divmod.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003939.html">
   <LINK REL="Next"  HREF="003941.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Session class</H1>
    <B>Maarten ter Huurne</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Session%20class&In-Reply-To=20081001173804.31635.411247414.divmod.xquotient.836%40weber.divmod.com"
       TITLE="[Twisted-web] Session class">maarten at treewalker.org
       </A><BR>
    <I>Fri Oct  3 07:01:06 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003939.html">[Twisted-web] Session class
</A></li>
        <LI>Next message: <A HREF="003941.html">[Twisted-web] Session class
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3940">[ date ]</a>
              <a href="thread.html#3940">[ thread ]</a>
              <a href="subject.html#3940">[ subject ]</a>
              <a href="author.html#3940">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wednesday 01 October 2008, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">glyph at divmod.com</A> wrote:
&gt;<i> On 11:31 am, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">maarten at treewalker.org</A> wrote:
</I>&gt;<i> &gt;None of this is a critical problem, but it does feel a bit strange. Is
</I>&gt;<i> &gt;the
</I>&gt;<i> &gt;current design motivated by something I haven't understood yet, or is
</I>&gt;<i> &gt;it
</I>&gt;<i> &gt;something that works well enough in typical use even though it has some
</I>&gt;<i> &gt;unexpected special cases?
</I>&gt;<i>
</I>&gt;<i> Most likely the latter.  twisted.web.server.Session was designed years
</I>&gt;<i> and years ago, before anyone involved in Twisted really had any idea how
</I>&gt;<i> the web worked.  It turns out that it works okay for a lot of cases, but
</I>&gt;<i> it could definitely be a lot better.
</I>&gt;<i>
</I>&gt;<i> It sounds like you've got lots of very specific ideas for making it
</I>&gt;<i> better.  I very much doubt that you're misunderstanding it; please
</I>&gt;<i> search around the tracker at &lt;<A HREF="http://twistedmatrix.com/trac/">http://twistedmatrix.com/trac/</A>&gt; and find
</I>&gt;<i> existing tickets that describe some of these issues (there are bound to
</I>&gt;<i> be a few) and feel free to file some new ones.  Patches (with tests, of
</I>&gt;<i> course) would be very much appreciated.
</I>
I looked for tickets describing these issues, and while I found a few that 
describe related issues, I did not find any that describe the same issues. 
Therefore, I entered two new tickets about session expiry:

  Session expiry check frequency should be based on sessionTimeout
  <A HREF="http://twistedmatrix.com/trac/ticket/3457">http://twistedmatrix.com/trac/ticket/3457</A>

  Expired session can be revived
  <A HREF="http://twistedmatrix.com/trac/ticket/3458">http://twistedmatrix.com/trac/ticket/3458</A>

While writing the first ticket, I realized that I was mixing up session 
expiry and session cleanup. Expiry is when the session timeout occurs, 
while cleanup is when the session object is removed. The implementation 
also mixes up these concepts though: the callbacks registered with 
notifyOnExpire() are called on cleanup, not on expiry.

It might be possible to fix 3457 in such a way that 3458 would be fixed as 
well without extra effort: if expired sessions are immediately cleaned up, 
it is not possible for an expired session to be revived, since it is simply 
no longer around.

I also wrote a ticket about the UIDs generation:

  Session UID might be predictable
  <A HREF="http://twistedmatrix.com/trac/ticket/3460">http://twistedmatrix.com/trac/ticket/3460</A>

The most important question in this ticket is whether the session UID is 
indeed supposed to be unpredictable, or whether it is good enough if the 
UID is unique. Can someone please answer that?

And finally a ticket about session cookies and HTTPS:

  Use secure session cookie when connection is secure
  <A HREF="http://twistedmatrix.com/trac/ticket/3461">http://twistedmatrix.com/trac/ticket/3461</A>

Bye,
		Maarten
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 194 bytes
Desc: This is a digitally signed message part.
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20081003/72b021c2/attachment.pgp">http://twistedmatrix.com/pipermail/twisted-web/attachments/20081003/72b021c2/attachment.pgp</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003939.html">[Twisted-web] Session class
</A></li>
	<LI>Next message: <A HREF="003941.html">[Twisted-web] Session class
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3940">[ date ]</a>
              <a href="thread.html#3940">[ thread ]</a>
              <a href="subject.html#3940">[ subject ]</a>
              <a href="author.html#3940">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
