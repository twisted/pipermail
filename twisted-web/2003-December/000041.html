<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Session trouble
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000040.html">
   <LINK REL="Next"  HREF="000042.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Session trouble
   </H1>
    <B>Michal Pasternak
    </B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com"
       TITLE="[Twisted-web] Session trouble">twisted-web@twistedmatrix.com
       </A><BR>
    <I>Wed, 17 Dec 2003 00:47:12 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="000040.html">[Twisted-web] Q: Hidden field in TypedInterface?
</A></li>
        <LI> Next message: <A HREF="000042.html">[Twisted-web] Session trouble
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41">[ date ]</a>
              <a href="thread.html#41">[ thread ]</a>
              <a href="subject.html#41">[ subject ]</a>
              <a href="author.html#41">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On a page of the site I've got a form. The user enters values and submits
the form. Entered values are saved to session. If s/he gets back to the page
(=&gt; encounters the same form), values are loaded from the session and the
form is filled with them. Everything worked okay, until I turned on caching.
Now, even if the test machine is on different subnet, the filled values are
presented to all connected users by default (eg. my friend, while testing
it, enters some data; I open a &quot;clean&quot; browser, without any cookies or such,
enter the page with the form - and I get the same data he entered!).

My question is simple: how do I get around this?

If I turn off caching, everything is fine - but I need caching. It speeds up
things a lot.

Is it known issue? What am I doing wrong? Where should I RTFM?

I run the site server with twistd and RPY script.

This is my RPY script:

	cache()
	import myWeb
	resource = myWeb.RootPage()

This is how I save / load session values in myWeb:

     I have declared:
     
	class IPreferences(components.Interface):
    		pass
	class Preferences(components.Adapter):
    		__implements__ = IPreferences
	components.registerAdapter(Preferences, server.Session, IPreferences)

     Then, when I'm loading/saving values from/to session, I use:

        prefs = req.getSession(IPreferences)
	
     saving values to session:
     
	prefs.foobar = 5
	
     loading values from session:
     
     	a = prefs.foobar
	
-- 
Michal Pasternak :: <A HREF="http://pasternak.w.lub.pl">http://pasternak.w.lub.pl</A> :: <A HREF="http://winsrc.sf.net">http://winsrc.sf.net</A>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000040.html">[Twisted-web] Q: Hidden field in TypedInterface?
</A></li>
	<LI> Next message: <A HREF="000042.html">[Twisted-web] Session trouble
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41">[ date ]</a>
              <a href="thread.html#41">[ thread ]</a>
              <a href="subject.html#41">[ subject ]</a>
              <a href="author.html#41">[ author ]</a>
         </LI>
       </UL>
</body></html>
