<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] TypedInterface implementation returned in a render_ method
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000020.html">
   <LINK REL="Next"  HREF="000024.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] TypedInterface implementation returned in a render_ method
   </H1>
    <B>Justin Johnson
    </B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com"
       TITLE="[Twisted-web] TypedInterface implementation returned in a render_ method">twisted-web@twistedmatrix.com
       </A><BR>
    <I>Mon, 15 Dec 2003 13:32:46 -0600</I>
    <P><UL>
        <LI> Previous message: <A HREF="000020.html">[Twisted-web] TypedInterface implementation returned in a render_ method
</A></li>
        <LI> Next message: <A HREF="000024.html">[Twisted-web] new to Guard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28">[ date ]</a>
              <a href="thread.html#28">[ thread ]</a>
              <a href="subject.html#28">[ subject ]</a>
              <a href="author.html#28">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a multi-part message in MIME format.

--_----------=_1071516766319720
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset=&quot;ISO-8859-1&quot;

Attached is a TAP that demonstrates my problem.

Expand ClearCase &gt; VOB &gt; mkvob and then submit the form and see the
error.


On Mon, 15 Dec 2003 09:22:09 -0600, &quot;Justin Johnson&quot;
&lt;<A HREF="mailto:justinjohnson@fastmail.fm">justinjohnson@fastmail.fm</A>&gt; said:
&gt;<i> I have the following render_main method which returns the current tag,
</I>&gt;<i> but specifies an implementation of a TypedInterface as 'data', and
</I>&gt;<i> freeform.configure as a child node.
</I>&gt;<i> 
</I>&gt;<i>     def render_main(self, context, data):
</I>&gt;<i>         if &quot;mkvob&quot; in self.selected_menu_items:
</I>&gt;<i>             return context.tag(data=forms.MkvobForm())[
</I>&gt;<i>             freeform.configure ]
</I>&gt;<i>         else:
</I>&gt;<i>             return Base.render_main(self, context, data)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> The TypedInterface is defined as follows:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> class IMkvobForm(formless.TypedInterface):
</I>&gt;<i>     def do_mkvob(self,
</I>&gt;<i>                  request=formless.Request(),
</I>&gt;<i>                  tag=typed.VobTags(),
</I>&gt;<i>                  site=typed.Sites(),
</I>&gt;<i>                  other_sites=typed.Sites()):
</I>&gt;<i>         &quot;&quot;&quot;Make a VOB
</I>&gt;<i> 
</I>&gt;<i>         Make a ClearCase VOB.
</I>&gt;<i>         &quot;&quot;&quot;
</I>&gt;<i>     do_mkvob = formless.autocallable(do_mkvob)
</I>&gt;<i> 
</I>&gt;<i> class MkvobForm(object):
</I>&gt;<i>     __implements__ = IMkvobForm,
</I>&gt;<i> 
</I>&gt;<i>     def do_mkvob(self, request, tag, site, other_sites):
</I>&gt;<i>         vobs = tag.split(&quot;,&quot;)
</I>&gt;<i>         other_sites = other_sites.split(&quot;,&quot;)
</I>&gt;<i>         print &quot;DEBUG: locals() = &quot; + str(locals())
</I>&gt;<i>         Redirect(&quot;/&quot;)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Eventually this will do something useful.  This code succeeds in
</I>&gt;<i> displaying the form when I select the mkvob menu item.  However, when I
</I>&gt;<i> click submit, I get the following error before the Type coerce methods
</I>&gt;<i> are called.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 2003/12/15 09:16 Central Standard Time [HTTPChannel,1,127.0.0.1]
</I>&gt;<i> Traceback (most
</I>&gt;<i>  recent call last):
</I>&gt;<i>           File &quot;C:\Python23\Lib\site-packages\twisted\protocols\http.py&quot;,
</I>&gt;<i>           line 1
</I>&gt;<i> 000, in rawDataReceived
</I>&gt;<i>             self.allContentReceived()
</I>&gt;<i>           File &quot;C:\Python23\Lib\site-packages\twisted\protocols\http.py&quot;,
</I>&gt;<i>           line 9
</I>&gt;<i> 91, in allContentReceived
</I>&gt;<i>             req.requestReceived(command, path, version)
</I>&gt;<i>           File &quot;C:\Python23\Lib\site-packages\twisted\protocols\http.py&quot;,
</I>&gt;<i>           line 5
</I>&gt;<i> 49, in requestReceived
</I>&gt;<i>             self.process()
</I>&gt;<i>           File &quot;C:\svn\Quotient\nevow\appserver.py&quot;, line 99, in process
</I>&gt;<i>             return server.Request.process(self)
</I>&gt;<i>         --- &lt;exception caught here&gt; ---
</I>&gt;<i>           File &quot;C:\Python23\Lib\site-packages\twisted\web\server.py&quot;,
</I>&gt;<i>           line 158,
</I>&gt;<i> in process
</I>&gt;<i>             resrc = self.site.getResourceFor(self)
</I>&gt;<i>           File &quot;C:\svn\Quotient\nevow\appserver.py&quot;, line 125, in
</I>&gt;<i>           getResourceFor
</I>&gt;<i> 
</I>&gt;<i>             res = gener.getResourceForRequest(request)
</I>&gt;<i>           File &quot;C:\svn\Quotient\nevow\appserver.py&quot;, line 50, in
</I>&gt;<i>           getResourceForR
</I>&gt;<i> equest
</I>&gt;<i>             return self.postForm(request, res, configurable, ctx,
</I>&gt;<i>             bindingName, r
</I>&gt;<i> equest.args)
</I>&gt;<i>           File &quot;C:\svn\Quotient\nevow\appserver.py&quot;, line 53, in postForm
</I>&gt;<i>             return configurable.postForm(ctx, bindingName, args)
</I>&gt;<i>           File &quot;C:\svn\Quotient\nevow\freeform.py&quot;, line 731, in postForm
</I>&gt;<i>             binding = configurable.getBinding(ctx, seg)
</I>&gt;<i>           File &quot;C:\svn\Quotient\nevow\freeform.py&quot;, line 796, in
</I>&gt;<i>           getBinding
</I>&gt;<i>             raise ImproperInputError, self.original
</I>&gt;<i>         nevow.freeform.ImproperInputError: An unconfigurable object
</I>&gt;<i>         (None)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Does anyone know what I'm doing wrong here?
</I>&gt;<i> Thanks.
</I>&gt;<i> -Justin
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-web mailing list
</I>&gt;<i> <A HREF="mailto:Twisted-web@twistedmatrix.com">Twisted-web@twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web</A>
</I>
--_----------=_1071516766319720
Content-Disposition: attachment; filename=&quot;menus_and_configurables.tac&quot;
Content-Transfer-Encoding: base64
Content-Type: application/unknown; name=&quot;menus_and_configurables.tac&quot;

ZnJvbSB0d2lzdGVkLndlYi53b3ZlbiBpbXBvcnQgZ3VhcmQKZnJvbSB0d2lz
dGVkLmFwcGxpY2F0aW9uIGltcG9ydCBzZXJ2aWNlLCBpbnRlcm5ldApmcm9t
IHR3aXN0ZWQuY3JlZCBpbXBvcnQgcG9ydGFsLCBjaGVja2Vycwpmcm9tIHR3
aXN0ZWQud2ViIGltcG9ydCByZXNvdXJjZSwgc2VydmVyLCB1dGlsCmZyb20g
dHdpc3RlZC5jcmVkLnBvcnRhbCBpbXBvcnQgUG9ydGFsCmZyb20gdHdpc3Rl
ZC5jcmVkLmNoZWNrZXJzIGltcG9ydCBBbGxvd0Fub255bW91c0FjY2Vzcywg
SW5NZW1vcnlVc2VybmFtZVBhc3N3b3JkRGF0YWJhc2VEb250VXNlCmZyb20g
dHdpc3RlZC53ZWIud292ZW4uZ3VhcmQgaW1wb3J0IFVzZXJuYW1lUGFzc3dv
cmRXcmFwcGVyLCBTZXNzaW9uV3JhcHBlcgpmcm9tIHR3aXN0ZWQuY3JlZC5j
cmVkZW50aWFscyBpbXBvcnQgSUFub255bW91cwpmcm9tIHR3aXN0ZWQud2Vi
LnV0aWwgaW1wb3J0IFJlZGlyZWN0CgoKZnJvbSBuZXZvdyBpbXBvcnQgcmVu
ZGVyZXIsIHRhZ3MsIGFwcHNlcnZlcgpmcm9tIG5ldm93LnRhZ3MgaW1wb3J0
ICoKCmZyb20gbmV2b3cgaW1wb3J0IGZvcm1sZXNzLCBmcmVlZm9ybQpmcm9t
IHR3aXN0ZWQud2ViLnV0aWwgaW1wb3J0IFJlZGlyZWN0CgpjbGFzcyBJTWt2
b2JGb3JtKGZvcm1sZXNzLlR5cGVkSW50ZXJmYWNlKToKICAgIGRlZiBkb19t
a3ZvYihzZWxmLAogICAgICAgICAgICAgICAgIHJlcXVlc3Q9Zm9ybWxlc3Mu
UmVxdWVzdCgpLAogICAgICAgICAgICAgICAgIHRhZz1mb3JtbGVzcy5TdHJp
bmcoKSwKICAgICAgICAgICAgICAgICBzaXRlPWZvcm1sZXNzLlN0cmluZygp
LAogICAgICAgICAgICAgICAgIG90aGVyX3NpdGVzPWZvcm1sZXNzLlN0cmlu
ZygpKToKICAgICAgICAiIiJNYWtlIGEgVk9CCgogICAgICAgIE1ha2UgYSBD
bGVhckNhc2UgVk9CLgogICAgICAgICIiIgogICAgZG9fbWt2b2IgPSBmb3Jt
bGVzcy5hdXRvY2FsbGFibGUoZG9fbWt2b2IpCgpjbGFzcyBNa3ZvYkZvcm0o
b2JqZWN0KToKICAgIF9faW1wbGVtZW50c19fID0gSU1rdm9iRm9ybSwKCiAg
ICBkZWYgZG9fbWt2b2Ioc2VsZiwgcmVxdWVzdCwgdGFnLCBzaXRlLCBvdGhl
cl9zaXRlcyk6CiAgICAgICAgIiIiTWFrZSBhIFZPQgoKICAgICAgICBNYWtl
IGEgQ2xlYXJDYXNlIFZPQi4KICAgICAgICAiIiIKICAgICAgICB2b2JzID0g
dGFnLnNwbGl0KCIsIikKICAgICAgICBncm91cCA9IHInVUhDQURBQUFcY2N2
b2JhZCcKICAgICAgICBvdGhlcl9zaXRlcyA9IG90aGVyX3NpdGVzLnNwbGl0
KCIsIikKICAgICAgICBwcmludCAiREVCVUc6IGxvY2FscygpID0gIiArIHN0
cihsb2NhbHMoKSkKICAgICAgICBSZWRpcmVjdCgiLyIpCgoKCmNsYXNzIE15
UmVuZGVyZXIocmVuZGVyZXIuUmVuZGVyZXIpOgogICAgIiIiVGhlIHJlbmRl
cmVyIGZvciBsb2dnZWQgaW4gdXNlcnMKICAgICIiIgoKICAgIGRlZiBfX2lu
aXRfXyhzZWxmKToKICAgICAgICBzZWxmLnNlbGVjdGVkX21lbnVfaXRlbXMg
PSBbXQogICAgICAgIHJlbmRlcmVyLlJlbmRlcmVyLl9faW5pdF9fKHNlbGYp
CgogICAgZG9jdW1lbnQgPSB0YWdzLmh0bWxbCiAgICAgICAgdGFncy5oZWFk
W3RhZ3MudGl0bGVbIk15IFJlbmRlcmVyIl1dLAogICAgICAgIHRhZ3MuYm9k
eVsKICAgICAgICAgICAgdGFncy51bChkYXRhPXRhZ3MuZGlyZWN0aXZlKCJt
ZW51X2l0ZW1zIiksIHJlbmRlcmVyPXRhZ3MuZGlyZWN0aXZlKCJtZW51Iikp
LAogICAgICAgICAgICB0YWdzLmRpdihyZW5kZXJlcj10YWdzLmRpcmVjdGl2
ZSgibWFpbiIpKSwKICAgICAgICBdCiAgICBdCgogICAgZGVmIGRhdGFfbWVu
dV9pdGVtcyhzZWxmLCBjb250ZXh0LCBkYXRhKToKICAgICAgICByZXR1cm4g
W05vbmUsIHsKICAgICAgICAgICAgIkNsZWFyQ2FzZSI6IFt7IlZPQiI6IFsi
bWt2b2IiLCJybXZvYiJdfSwgeyJWaWV3IjogWyJybXZpZXciXX0sIHsiVXNl
ciI6IFsiYWRkdXNlciIsImRlbHVzZXIiXX1dLAogICAgICAgICAgICAiQ2xl
YXJRdWVzdCI6IFt7IkRCIjogWyJhZGRkYiIsImRlbGRiIl19LCB7IlVzZXIi
OiBbImFkZHVzZXIiLCJkZWx1c2VyIl19XSwKICAgICAgICB9XQoKICAgIGRl
ZiByZW5kZXJfbWVudShzZWxmLCBjb250ZXh0LCBkYXRhKToKICAgICAgICAi
IiJSZW5kZXIgYSBkaWN0aW9uYXJ5IG9mIHN0cmluZyBrZXlzIGFuZCBsaXN0
IG9mIHN0cmluZy9kaWN0IHZhbHVlcy4iIiIKCiAgICAgICAgIyBVdGlsaXR5
IGZ1bmN0aW9uIHRvIGNvbnN0cnVjdCB0aGUgYW5jaG9yIGhyZWYKICAgICAg
ICBkZWYgYW5jaG9yUGF0aChwYXJlbnQsIGVudHJ5KToKICAgICAgICAgICAg
aWYgcGFyZW50OgogICAgICAgICAgICAgICAgcmV0dXJuICIvZG8vJXMiICUg
Ii8iLmpvaW4oW3BhcmVudCwgZW50cnldKQogICAgICAgICAgICBlbHNlOgog
ICAgICAgICAgICAgICAgcmV0dXJuICIvZG8vJXMiICUgZW50cnkKCiAgICAg
ICAgbWVudSA9IGNvbnRleHQudGFnICMgVGhlIHRhZyB3ZSB3aWxsIHJldHVy
bgogICAgICAgIHBhcmVudCA9IGRhdGFbMF0gIyBUaGUgY3VycmVudCBzZWxl
Y3RlZCBtZW51IGl0ZW0gcGF0aCAoZWcuIC9kby9pdGVtMS9pdGVtMikKCiAg
ICAgICAgIyBGb3IgZXZlcnkgZWxlbWVudCBpbiB0aGUgbWVudQogICAgICAg
IGZvciBrLCB2IGluIGRhdGFbMV0uaXRlbXMoKToKICAgICAgICAgICAgIyBJ
ZiBpdCBpcyBhIHNlbGVjdGVkIG1lbnUgaXRlbSwgYWRkIGEgbGlzdCBpdGVt
IHdpdGggb3VyIGtleSBhcyB0aGUgbGFiZWwKICAgICAgICAgICAgIyBhbmQg
ZXhwYW5kIGl0cyBjaGlsZHJlbiwgdG8gZXhwYW5kIHRoZSBtZW51LgogICAg
ICAgICAgICBpZiBrIGluIHNlbGYuc2VsZWN0ZWRfbWVudV9pdGVtczoKICAg
ICAgICAgICAgICAgICMgVXNlIHRoZSBhcHByb3ByaWF0ZSBDU1MgY2xhc3Mg
ZGVwZW5kaW5nIG9uIHdoZXRoZXIgb3Igbm90IGl0J3Mgc2VsZWN0ZWQKICAg
ICAgICAgICAgICAgIG1lbnUuY2hpbGRyZW4uYXBwZW5kKGxpWyBhKF9jbGFz
cz0ibWVudS1zZWxlY3RlZCIsIGhyZWY9YW5jaG9yUGF0aChwYXJlbnQsIGsp
KVsgayBdIF0pCgogICAgICAgICAgICAgICAgIyBBZGQgYW4gdWwgdGFnIHRv
IHRoaXMgbWVudSBmb3IgdGhlIHN1Ym1lbnUKICAgICAgICAgICAgICAgIHN1
Ym1lbnUgPSB1bCgpCiAgICAgICAgICAgICAgICBtZW51LmNoaWxkcmVuLmFw
cGVuZChzdWJtZW51KQoKICAgICAgICAgICAgICAgICMgQXMgd2UgYWRkIHRo
ZSBjaGlsZCBtZW51IGVudHJpZXMsIHByZXBlbmQgdGhlIHBhcmVudCBwYXRo
IHRvIG91ciBocmVmcwogICAgICAgICAgICAgICAgbmV3X3BhcmVudCA9IHBh
cmVudAogICAgICAgICAgICAgICAgaWYgbmV3X3BhcmVudDoKICAgICAgICAg
ICAgICAgICAgICBuZXdfcGFyZW50ICs9ICIvIiArIGsKICAgICAgICAgICAg
ICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgbmV3X3BhcmVudCA9IGsK
CiAgICAgICAgICAgICAgICAjIEZvciBldmVyeSBlbGVtZW50IG9mIHRoZSB2
YWx1ZSBsaXN0CiAgICAgICAgICAgICAgICBmb3IgaSBpbiB2OgogICAgICAg
ICAgICAgICAgICAgICMgaWYgaXQncyBhIGRpY3QsIGNhdXNlIHJlbmRlcl9t
ZW51IHRvIGJlIGNhbGxlZCBvbiBpdCwgYW5kIHRoZSBvdXRwdXQgcGxhY2Vk
IGluIHRoZSBzdWJtZW51IHRhZwogICAgICAgICAgICAgICAgICAgIGlmIGlz
aW5zdGFuY2UoaSwgZGljdCk6CiAgICAgICAgICAgICAgICAgICAgICAgIHN1
Ym1lbnUuY2hpbGRyZW4uYXBwZW5kKGxpKGRhdGE9W25ld19wYXJlbnQsaV0s
IHJlbmRlcmVyPXNlbGYucmVuZGVyX21lbnUpKQogICAgICAgICAgICAgICAg
ICAgICMgaWYgaXQncyBhIHN0cmluZywganVzdCBhZGQgYSBsaXN0IGl0ZW0g
d2l0aCB0aGUgc3RyaW5nIHRvIHRoZSBtZW51CiAgICAgICAgICAgICAgICAg
ICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgIyBVc2UgdGhlIGFw
cHJvcHJpYXRlIENTUyBjbGFzcwogICAgICAgICAgICAgICAgICAgICAgICBp
ZiBpIGluIHNlbGYuc2VsZWN0ZWRfbWVudV9pdGVtczoKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHN1Ym1lbnUuY2hpbGRyZW4uYXBwZW5kKGxpWyBh
KF9jbGFzcz0ibWVudS1zZWxlY3RlZCIsIGhyZWY9YW5jaG9yUGF0aChuZXdf
cGFyZW50LGkpKVsgaSBdIF0pCiAgICAgICAgICAgICAgICAgICAgICAgIGVs
c2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJtZW51LmNoaWxk
cmVuLmFwcGVuZChsaVsgYShocmVmPWFuY2hvclBhdGgobmV3X3BhcmVudCxp
KSlbIGkgXSBdKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAg
IyBUaGlzIGl0ZW0gd2Fzbid0IHNlbGVjdGVkLiAgSnVzdCBhZGQgYSBsaXN0
IGl0ZW0sIGJ1dCBkb24ndCBleHBhbmQgaXRzIGNoaWxkcmVuCiAgICAgICAg
ICAgICAgICBtZW51LmNoaWxkcmVuLmFwcGVuZChsaVsgYShocmVmPWFuY2hv
clBhdGgocGFyZW50LGspKVsgayBdIF0pCiAgICAgICAgcmV0dXJuIG1lbnUK
CiAgICBkZWYgcmVuZGVyX21haW4oc2VsZiwgY29udGV4dCwgZGF0YSk6CiAg
ICAgICAgaWYgIm1rdm9iIiBpbiBzZWxmLnNlbGVjdGVkX21lbnVfaXRlbXM6
CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LnRhZyhkYXRhPU1rdm9iRm9y
bSgpKVsgZnJlZWZvcm0uY29uZmlndXJlIF0KICAgICAgICByZXR1cm4gIiIK
CiAgICBkZWYgY2hpbGRfZG8oc2VsZiwgcmVxdWVzdCk6CiAgICAgICAgIiIi
UmVkaXJlY3QgdG8gdGhlIGFwcHJvcHJpYXRlIGFjdGlvbiBoYW5kbGVyCiAg
ICAgICAgIiIiCiAgICAgICAgc2VsZi5zZWxlY3RlZF9tZW51X2l0ZW1zID0g
cmVxdWVzdC5wYXRoLnNwbGl0KCIvIilbMjpdCiAgICAgICAgcmV0dXJuIFJl
ZGlyZWN0KCIvIikKCgoKYXBwbGljYXRpb24gPSBzZXJ2aWNlLkFwcGxpY2F0
aW9uKCJtZW51c19hbmRfY29uZmlndXJhYmxlcyIpCmludGVybmV0LlRDUFNl
cnZlcigKICAgIDgwODAsCiAgICBhcHBzZXJ2ZXIuTmV2b3dTaXRlKHJlc291
cmNlPU15UmVuZGVyZXIoKSkKKS5zZXRTZXJ2aWNlUGFyZW50KGFwcGxpY2F0
aW9uKQo=

--_----------=_1071516766319720--



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000020.html">[Twisted-web] TypedInterface implementation returned in a render_ method
</A></li>
	<LI> Next message: <A HREF="000024.html">[Twisted-web] new to Guard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28">[ date ]</a>
              <a href="thread.html#28">[ thread ]</a>
              <a href="subject.html#28">[ subject ]</a>
              <a href="author.html#28">[ author ]</a>
         </LI>
       </UL>
</body></html>
