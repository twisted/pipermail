<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Session not destroyed on logout when using new cred
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000058.html">
   <LINK REL="Next"  HREF="000061.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Session not destroyed on logout when using new cred
   </H1>
    <B>Justin Johnson
    </B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com"
       TITLE="[Twisted-web] Session not destroyed on logout when using new cred">twisted-web@twistedmatrix.com
       </A><BR>
    <I>Fri, 19 Dec 2003 12:59:15 -0600</I>
    <P><UL>
        <LI> Previous message: <A HREF="000058.html">[Twisted-web] Rendering forms from HTML templates using freeform
</A></li>
        <LI> Next message: <A HREF="000061.html">[Twisted-web] subtle copying in woven driving me crazy.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59">[ date ]</a>
              <a href="thread.html#59">[ thread ]</a>
              <a href="subject.html#59">[ subject ]</a>
              <a href="author.html#59">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a multi-part message in MIME format.

--_----------=_1071860355107720
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset=&quot;ISO-8859-1&quot;

The attached tac file demonstrates my problem.

1) Login with username of &quot;user&quot; and password of &quot;password&quot;.
   A large red &quot;None&quot; should appear because there is no session data.
2) Reload the page.  Now session data should appear.
3) Logout and login again.
   The session data appears right away, but I would expect it to not be
   available yet.

Does anyone know what the proper way to have the session destroyed when I
logout is?  It seems like this should be done automatically for me.

Thanks.
-Justin

--_----------=_1071860355107720
Content-Disposition: attachment; filename=&quot;guarded.tac&quot;
Content-Transfer-Encoding: base64
Content-Type: application/unknown; name=&quot;guarded.tac&quot;

ZnJvbSB0d2lzdGVkLndlYi53b3ZlbiBpbXBvcnQgZ3VhcmQKZnJvbSB0d2lz
dGVkLmFwcGxpY2F0aW9uIGltcG9ydCBzZXJ2aWNlLCBpbnRlcm5ldApmcm9t
IHR3aXN0ZWQuY3JlZCBpbXBvcnQgcG9ydGFsLCBjaGVja2Vycwpmcm9tIHR3
aXN0ZWQud2ViIGltcG9ydCByZXNvdXJjZSwgc2VydmVyLCB1dGlsCmZyb20g
dHdpc3RlZC5jcmVkLnBvcnRhbCBpbXBvcnQgUG9ydGFsCmZyb20gdHdpc3Rl
ZC5jcmVkLmNoZWNrZXJzIGltcG9ydCBBbGxvd0Fub255bW91c0FjY2Vzcywg
SW5NZW1vcnlVc2VybmFtZVBhc3N3b3JkRGF0YWJhc2VEb250VXNlCmZyb20g
dHdpc3RlZC53ZWIud292ZW4uZ3VhcmQgaW1wb3J0IFVzZXJuYW1lUGFzc3dv
cmRXcmFwcGVyLCBTZXNzaW9uV3JhcHBlcgpmcm9tIHR3aXN0ZWQuY3JlZC5j
cmVkZW50aWFscyBpbXBvcnQgSUFub255bW91cwoKZnJvbSBuZXZvdyBpbXBv
cnQgcmVuZGVyZXIsIHRhZ3MsIGFwcHNlcnZlciwgaXdvdmVuCgoKIyMjIFJl
bmRlcmVycwoKY2xhc3MgTm90TG9nZ2VkSW4ocmVuZGVyZXIuUmVuZGVyZXIp
OgogICAgIiIiVGhlIHJlc291cmNlIHRoYXQgaXMgcmV0dXJuZWQgd2hlbiB5
b3UgYXJlIG5vdCBsb2dnZWQgaW4iIiIKICAgIGRvY3VtZW50ID0gdGFncy5o
dG1sWwogICAgICAgIHRhZ3MuaGVhZFt0YWdzLnRpdGxlWyJOb3QgTG9nZ2Vk
IEluIl1dLAogICAgICAgIHRhZ3MuYm9keVsKICAgICAgICAgICAgdGFncy5m
b3JtKGFjdGlvbj1ndWFyZC5JTklUX1BFUlNQRUNUSVZFKVsKICAgICAgICAg
ICAgICAgIHRhZ3MudGFibGVbCiAgICAgICAgICAgICAgICAgICAgdGFncy50
clsKICAgICAgICAgICAgICAgICAgICAgICAgdGFncy50ZFsgIlVzZXJuYW1l
OiIgXSwKICAgICAgICAgICAgICAgICAgICAgICAgdGFncy50ZFsgdGFncy5p
bnB1dCh0eXBlPSd0ZXh0JyxuYW1lPSd1c2VybmFtZScpIF0sCiAgICAgICAg
ICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICB0YWdzLnRyWwog
ICAgICAgICAgICAgICAgICAgICAgICB0YWdzLnRkWyAiUGFzc3dvcmQ6IiBd
LAogICAgICAgICAgICAgICAgICAgICAgICB0YWdzLnRkWyB0YWdzLmlucHV0
KHR5cGU9J3Bhc3N3b3JkJyxuYW1lPSdwYXNzd29yZCcpIF0sCiAgICAgICAg
ICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAg
ICAgIHRhZ3MuaW5wdXQodHlwZT0nc3VibWl0JyksCiAgICAgICAgICAgICAg
ICB0YWdzLnAsCiAgICAgICAgICAgIF0KICAgICAgICBdCiAgICBdCgpjbGFz
cyBMb2dnZWRJbihyZW5kZXJlci5SZW5kZXJlcik6CiAgICAiIiJUaGUgcmVz
b3VyY2UgdGhhdCBpcyByZXR1cm5lZCB3aGVuIHlvdSBsb2dpbiIiIgogICAg
ZG9jdW1lbnQgPSB0YWdzLmh0bWxbCiAgICAgICAgdGFncy5oZWFkW3RhZ3Mu
dGl0bGVbIkxvZ2dlZCBJbiJdXSwKICAgICAgICB0YWdzLmJvZHlbCiAgICAg
ICAgICAgIHRhZ3MuaDMocmVuZGVyZXI9dGFncy5kaXJlY3RpdmUoIndlbGNv
bWUiKSksCiAgICAgICAgICAgIHRhZ3MuaDMocmVuZGVyZXI9dGFncy5kaXJl
Y3RpdmUoInNlc3Npb25fZGF0YSIpKSwKICAgICAgICAgICAgdGFncy5hKGhy
ZWY9Z3VhcmQuREVTVFJPWV9QRVJTUEVDVElWRSlbIkxvZ291dCJdCiAgICAg
ICAgXQogICAgXQoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB1c2VybmFtZSwg
KmFyZ3MsICoqa3cpOgogICAgICAgIHNlbGYudXNlcm5hbWUgPSB1c2VybmFt
ZQogICAgICAgIHJlbmRlcmVyLlJlbmRlcmVyLl9faW5pdF9fKHNlbGYsICph
cmdzLCAqKmt3KQoKICAgIGRlZiByZW5kZXJfc2Vzc2lvbl9kYXRhKHNlbGYs
IGNvbnRleHQsIGRhdGEpOgogICAgICAgIHNlc3Npb24gPSBjb250ZXh0Lmxv
Y2F0ZShpd292ZW4uSVJlcXVlc3QpLmdldFNlc3Npb24oKQogICAgICAgIGQg
PSBzZXNzaW9uLmdldENvbXBvbmVudChpd292ZW4uSURhdGEpCiAgICAgICAg
c2Vzc2lvbi5zZXRDb21wb25lbnQoaXdvdmVuLklEYXRhLCAiSSBhbSBzZXNz
aW9uIGRhdGEiKQogICAgICAgIHJldHVybiBjb250ZXh0LnRhZ1tkXQoKICAg
IGRlZiByZW5kZXJfd2VsY29tZShzZWxmLCBjb250ZXh0LCBkYXRhKToKICAg
ICAgICByZXR1cm4gY29udGV4dC50YWdbICJIZWxsbywgJXMhIiAlIHNlbGYu
dXNlcm5hbWVdCgogICAgZGVmIGxvZ291dChzZWxmKToKICAgICAgICBwcmlu
dCAiJXMgbG9nZ2VkIG91dCEiICUgc2VsZi51c2VybmFtZQoKCiMjIyBBdXRo
ZW50aWNhdGlvbgoKZGVmIG5vTG9nb3V0KCk6CiAgICByZXR1cm4gTm9uZQoK
ZGVmIGxvZ2luQ2FsbGJhY2soaWdub3JlZCk6CiAgICByZXR1cm4gdXRpbC5S
ZWRpcmVjdCgiLiIpCgpjbGFzcyBNeVJlYWxtOgogICAgIiIiQSBzaW1wbGUg
aW1wbGVtZW50b3Igb2YgY3JlZCdzIElSZWFsbS4KICAgICAgIEZvciB3ZWIs
IHRoaXMgZ2l2ZXMgdXMgdGhlIExvZ2dlZEluIHBhZ2UuCiAgICAiIiIKICAg
IF9faW1wbGVtZW50c19fID0gcG9ydGFsLklSZWFsbQoKICAgIGRlZiByZXF1
ZXN0QXZhdGFyKHNlbGYsIGF2YXRhcklkLCBtaW5kLCAqaW50ZXJmYWNlcyk6
CiAgICAgICAgZm9yIGlmYWNlIGluIGludGVyZmFjZXM6CiAgICAgICAgICAg
IGlmIGlmYWNlIGlzIHJlc291cmNlLklSZXNvdXJjZToKICAgICAgICAgICAg
ICAgICMgZG8gd2ViIHN0dWZmCiAgICAgICAgICAgICAgICBpZiBhdmF0YXJJ
ZCBpcyBjaGVja2Vycy5BTk9OWU1PVVM6CiAgICAgICAgICAgICAgICAgICAg
cmVzYyA9IE5vdExvZ2dlZEluKCkKICAgICAgICAgICAgICAgICAgICByZXNj
LnJlYWxtID0gc2VsZgogICAgICAgICAgICAgICAgICAgIHJldHVybiAocmVz
b3VyY2UuSVJlc291cmNlLCByZXNjLCBub0xvZ291dCkKICAgICAgICAgICAg
ICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmVzYyA9IExvZ2dlZElu
KGF2YXRhcklkKQogICAgICAgICAgICAgICAgICAgIHJlc2MucmVhbG0gPSBz
ZWxmCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChyZXNvdXJjZS5JUmVz
b3VyY2UsIHJlc2MsIHJlc2MubG9nb3V0KQoKICAgICAgICByYWlzZSBOb3RJ
bXBsZW1lbnRlZEVycm9yKCJDYW4ndCBzdXBwb3J0IHRoYXQgaW50ZXJmYWNl
LiIpCgoKcmVhbG0gPSBNeVJlYWxtKCkKcG9ydGFsID0gUG9ydGFsKHJlYWxt
KQpteUNoZWNrZXIgPSBJbk1lbW9yeVVzZXJuYW1lUGFzc3dvcmREYXRhYmFz
ZURvbnRVc2UoKQpteUNoZWNrZXIuYWRkVXNlcigidXNlciIsInBhc3N3b3Jk
IikKIyBBbGxvdyBhbm9ueW1vdXMgYWNjZXNzLiAgTmVlZGVkIGZvciBhY2Nl
c3MgdG8gTm90TG9nZ2VkSW4KcG9ydGFsLnJlZ2lzdGVyQ2hlY2tlcihBbGxv
d0Fub255bW91c0FjY2VzcygpLCBJQW5vbnltb3VzKQojIEFsbG93IHVzZXJz
IHJlZ2lzdGVyZWQgaW4gdGhlIHBhc3N3b3JkIGZpbGUuCnBvcnRhbC5yZWdp
c3RlckNoZWNrZXIobXlDaGVja2VyKQoKc2l0ZSA9IGFwcHNlcnZlci5OZXZv
d1NpdGUoCiAgICByZXNvdXJjZT1ndWFyZC5TZXNzaW9uV3JhcHBlcigKICAg
ICAgICBndWFyZC5Vc2VybmFtZVBhc3N3b3JkV3JhcHBlcihwb3J0YWwsIGNh
bGxiYWNrPWxvZ2luQ2FsbGJhY2spCiAgICApLAopCgphcHBsaWNhdGlvbiA9
IHNlcnZpY2UuQXBwbGljYXRpb24oImd1YXJkZWQiKQppbnRlcm5ldC5UQ1BT
ZXJ2ZXIoODA4MCwgc2l0ZSkuc2V0U2VydmljZVBhcmVudChhcHBsaWNhdGlv
bikK

--_----------=_1071860355107720--



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000058.html">[Twisted-web] Rendering forms from HTML templates using freeform
</A></li>
	<LI> Next message: <A HREF="000061.html">[Twisted-web] subtle copying in woven driving me crazy.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59">[ date ]</a>
              <a href="thread.html#59">[ thread ]</a>
              <a href="subject.html#59">[ subject ]</a>
              <a href="author.html#59">[ author ]</a>
         </LI>
       </UL>
</body></html>
