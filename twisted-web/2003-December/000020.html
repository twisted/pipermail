<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] TypedInterface implementation returned in a render_ method
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000031.html">
   <LINK REL="Next"  HREF="000028.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] TypedInterface implementation returned in a render_ method
   </H1>
    <B>Justin Johnson
    </B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com"
       TITLE="[Twisted-web] TypedInterface implementation returned in a render_ method">twisted-web@twistedmatrix.com
       </A><BR>
    <I>Mon, 15 Dec 2003 09:22:09 -0600</I>
    <P><UL>
        <LI> Previous message: <A HREF="000031.html">[Twisted-web] Woven Input Problem  cont.
</A></li>
        <LI> Next message: <A HREF="000028.html">[Twisted-web] TypedInterface implementation returned in a render_ method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20">[ date ]</a>
              <a href="thread.html#20">[ thread ]</a>
              <a href="subject.html#20">[ subject ]</a>
              <a href="author.html#20">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have the following render_main method which returns the current tag,
but specifies an implementation of a TypedInterface as 'data', and
freeform.configure as a child node.

    def render_main(self, context, data):
        if &quot;mkvob&quot; in self.selected_menu_items:
            return context.tag(data=forms.MkvobForm())[
            freeform.configure ]
        else:
            return Base.render_main(self, context, data)


The TypedInterface is defined as follows:


class IMkvobForm(formless.TypedInterface):
    def do_mkvob(self,
                 request=formless.Request(),
                 tag=typed.VobTags(),
                 site=typed.Sites(),
                 other_sites=typed.Sites()):
        &quot;&quot;&quot;Make a VOB

        Make a ClearCase VOB.
        &quot;&quot;&quot;
    do_mkvob = formless.autocallable(do_mkvob)

class MkvobForm(object):
    __implements__ = IMkvobForm,

    def do_mkvob(self, request, tag, site, other_sites):
        vobs = tag.split(&quot;,&quot;)
        other_sites = other_sites.split(&quot;,&quot;)
        print &quot;DEBUG: locals() = &quot; + str(locals())
        Redirect(&quot;/&quot;)


Eventually this will do something useful.  This code succeeds in
displaying the form when I select the mkvob menu item.  However, when I
click submit, I get the following error before the Type coerce methods
are called.


2003/12/15 09:16 Central Standard Time [HTTPChannel,1,127.0.0.1]
Traceback (most
 recent call last):
          File &quot;C:\Python23\Lib\site-packages\twisted\protocols\http.py&quot;,
          line 1
000, in rawDataReceived
            self.allContentReceived()
          File &quot;C:\Python23\Lib\site-packages\twisted\protocols\http.py&quot;,
          line 9
91, in allContentReceived
            req.requestReceived(command, path, version)
          File &quot;C:\Python23\Lib\site-packages\twisted\protocols\http.py&quot;,
          line 5
49, in requestReceived
            self.process()
          File &quot;C:\svn\Quotient\nevow\appserver.py&quot;, line 99, in process
            return server.Request.process(self)
        --- &lt;exception caught here&gt; ---
          File &quot;C:\Python23\Lib\site-packages\twisted\web\server.py&quot;,
          line 158,
in process
            resrc = self.site.getResourceFor(self)
          File &quot;C:\svn\Quotient\nevow\appserver.py&quot;, line 125, in
          getResourceFor

            res = gener.getResourceForRequest(request)
          File &quot;C:\svn\Quotient\nevow\appserver.py&quot;, line 50, in
          getResourceForR
equest
            return self.postForm(request, res, configurable, ctx,
            bindingName, r
equest.args)
          File &quot;C:\svn\Quotient\nevow\appserver.py&quot;, line 53, in postForm
            return configurable.postForm(ctx, bindingName, args)
          File &quot;C:\svn\Quotient\nevow\freeform.py&quot;, line 731, in postForm
            binding = configurable.getBinding(ctx, seg)
          File &quot;C:\svn\Quotient\nevow\freeform.py&quot;, line 796, in
          getBinding
            raise ImproperInputError, self.original
        nevow.freeform.ImproperInputError: An unconfigurable object
        (None)



Does anyone know what I'm doing wrong here?
Thanks.
-Justin


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000031.html">[Twisted-web] Woven Input Problem  cont.
</A></li>
	<LI> Next message: <A HREF="000028.html">[Twisted-web] TypedInterface implementation returned in a render_ method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20">[ date ]</a>
              <a href="thread.html#20">[ thread ]</a>
              <a href="subject.html#20">[ subject ]</a>
              <a href="author.html#20">[ author ]</a>
         </LI>
       </UL>
</body></html>
