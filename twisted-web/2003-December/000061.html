<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] subtle copying in woven driving me crazy.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000059.html">
   <LINK REL="Next"  HREF="000062.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] subtle copying in woven driving me crazy.
   </H1>
    <B>Douglas Bagnall
    </B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com"
       TITLE="[Twisted-web] subtle copying in woven driving me crazy.">twisted-web@twistedmatrix.com
       </A><BR>
    <I>Sun, 21 Dec 2003 22:04:53 +1300</I>
    <P><UL>
        <LI> Previous message: <A HREF="000059.html">[Twisted-web] Session not destroyed on logout when using new cred
</A></li>
        <LI> Next message: <A HREF="000062.html">[Twisted-web] subtle copying in woven driving me crazy.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61">[ date ]</a>
              <a href="thread.html#61">[ thread ]</a>
              <a href="subject.html#61">[ subject ]</a>
              <a href="author.html#61">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I thought it was reasonable to give my player storing object a 
requestAvatarId method and call it a checker, and it seemed to work 
until it was found that new players couldn't log in.  Eventually I 
discovered that:

class Checker(dict):
     __implements__ = checkers.ICredentialsChecker
     def __init__(self):
         log.debug(id(self))
     def requestAvatarId(self, credentials):
         log.debug(id(self))

gives two different numbers.  Of course seperating the checker from the 
player model fixed this problem, and is no doubt correcter. Similarly:

class SomePage(page.Page):
     def __init__(self, children_dict):
         page.Page.__init__(self)
         self.children_dict = children_dict
         log.debug(id(self.children_dict))

     def getDynamicChild(self, path, request):
         log.debug(id(self.children_dict))
         return self.children_dict.get(path, error.NoResource())

gives two different id numbers!  So you can't manipulate the children by 
referring to the original dictionary in some other context.  Again, 
there is an easy way around this, once you realise what is happening, 
and that other way is perhaps better, but this has caused me some 
bewilderment.

Is this behaviour intentional? or necessary?  It should perhaps be 
better documented.


douglas





</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000059.html">[Twisted-web] Session not destroyed on logout when using new cred
</A></li>
	<LI> Next message: <A HREF="000062.html">[Twisted-web] subtle copying in woven driving me crazy.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61">[ date ]</a>
              <a href="thread.html#61">[ thread ]</a>
              <a href="subject.html#61">[ subject ]</a>
              <a href="author.html#61">[ author ]</a>
         </LI>
       </UL>
</body></html>
