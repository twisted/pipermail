<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Cascading forms in formal (example code included)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Cascading%20forms%20in%20formal%20%28example%20code%20included%29&In-Reply-To=44907AA4.8000908%40pollenation.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002690.html">
   <LINK REL="Next"  HREF="002691.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Cascading forms in formal (example code included)</H1>
    <B>Ricky Iacovou</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Cascading%20forms%20in%20formal%20%28example%20code%20included%29&In-Reply-To=44907AA4.8000908%40pollenation.net"
       TITLE="[Twisted-web] Cascading forms in formal (example code included)">iacovou at gmail.com
       </A><BR>
    <I>Fri Jun 16 07:18:05 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002690.html">[Twisted-web] Cascading forms in formal (example code included)
</A></li>
        <LI>Next message: <A HREF="002691.html">[Twisted-web] Nevow depends on Twisted 2.4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2694">[ date ]</a>
              <a href="thread.html#2694">[ thread ]</a>
              <a href="subject.html#2694">[ subject ]</a>
              <a href="author.html#2694">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thursday 15 June 2006 00:07, Matt Goodall wrote:

&gt;<i> I suspect it's because when SecondPage sees the request was POST'ed and
</I>&gt;<i> assumes it's a form POST. Processing the POST will re-find the
</I>&gt;<i> FirstPage's form and processes it again which returns a SecondPage, etc.
</I>
Thanks for taking the time to look at this, Matt.

&gt;<i> Even if SecondPage was rendered correctly after submitting FirstPage, I
</I>&gt;<i> think Formal would have a hard time finding SecondPage's form because
</I>&gt;<i> the URL would resolve to a FirstPage resource.
</I>
Yes, I was fearing I was going to hit that problem sooner or later. I guess I 
was hoping that there was some Deep Magic under the hood that would deal with 
the URL mapping (maybe some onsubmit Javascript :-) )

&gt;<i> The way I've done this sort of thing is to make FirstPage HTTP redirect
</I>&gt;<i> to another URL to display SecondPage, passing data from FirstPage to
</I>&gt;<i> SecondPage using request args. (Hint: return a nevow.url.URL instance
</I>&gt;<i> from FirstPage's form's submit method.)
</I>&gt;<i>
</I>&gt;<i> If there's a lot of data to pass around you might need to resort to
</I>&gt;<i> sessions. Yucky but, hey, it's the web.
</I>
Hmm. I've got the URL redirect working, but the data can potentially be too 
much for a request, so I guess it's sessions. I do actually have a session 
enabled, as everything is wrapped up inside a portal/guard/SessionWrapper 
thingie, so it's not a huge deal.

However ... that gets me thinking.

The next step is basically, &quot;here are the things that matched your criteria; 
select one or more of them so that I can do something with them&quot;, so it seems 
silly to send them to the browser only to have the browser send them right 
back again.

Additionally, this *isn't* really 'client state', as the intermediate search 
results aren't persisted beyond the next form (the user's choice from the 
second form, however, is), nor is it 'privileged data', since anyone who has 
sufficient permissions to access the first form can find the same search 
results themselves.

Given that this is Twisted, and we don't have threading issues to deal with, 
is it unfeasibly evil and sinful to pass a handle (e.g. the base64 
representation of the original search string) as a request argument to the 
client and store the 'real' results server-side, to be retrieved while 
rendering the next form?

In other words, I'd end up using sessions for the Important Stuff (e.g. client 
state) but not use sessions for stuff that doesn't matter.

Is this a good application of Laziness, Impatience and Hubris, or is it just a 
recipe for disaster? :-)

Cheers,

Ricky

P.S. Apologies if I've broken list threading ... kmail doesn't seem to like me 
using &quot;Reply To Mailing List&quot;, so I've just done &quot;Reply To All&quot;, hoping that 
the Message-IDs work. I know that people get religious about their message 
threading *grin*.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002690.html">[Twisted-web] Cascading forms in formal (example code included)
</A></li>
	<LI>Next message: <A HREF="002691.html">[Twisted-web] Nevow depends on Twisted 2.4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2694">[ date ]</a>
              <a href="thread.html#2694">[ thread ]</a>
              <a href="subject.html#2694">[ subject ]</a>
              <a href="author.html#2694">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
