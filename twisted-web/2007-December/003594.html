<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] renderer returning an errored deferred makes the
	response hang
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20renderer%20returning%20an%20errored%20deferred%20makes%20the%0A%09response%20hang&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003593.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] renderer returning an errored deferred makes the
	response hang</H1>
    <B>Drew Perttula</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20renderer%20returning%20an%20errored%20deferred%20makes%20the%0A%09response%20hang&In-Reply-To="
       TITLE="[Twisted-web] renderer returning an errored deferred makes the
	response hang">drewp at bigasterisk.com
       </A><BR>
    <I>Thu Dec 20 01:28:00 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003593.html">[Twisted-web] REST and DELETE
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3594">[ date ]</a>
              <a href="thread.html#3594">[ thread ]</a>
              <a href="subject.html#3594">[ subject ]</a>
              <a href="author.html#3594">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This page prints an error to the console, but the page never terminates. 
Rendering 'bar' behaves how I would expect-- an error page is shown in 
the browser.

How can I cause error pages to display when any renderer errors (or even 
replace that renderer with a local error message)? Having my site hang 
is awkward for debugging.



import sys
from twisted.internet.defer import Deferred
from twisted.internet import reactor
from twisted.python import log
from nevow.appserver import NevowSite
from nevow import rend, loaders, tags as T
import nevow

class P(rend.Page):
     docFactory = loaders.stan(T.body[T.directive('foo')])
     def render_foo(self, ctx, data):
         d = Deferred()
         def e(result):
             raise ValueError
         d.addCallback(e)
         d.callback(5)
         return d

     def render_bar(self, ctx, data):
         raise ValueError

print nevow.__file__, nevow.__version__
log.startLogging(sys.stdout)
reactor.listenTCP(8006, NevowSite(P()))
reactor.run()

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003593.html">[Twisted-web] REST and DELETE
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3594">[ date ]</a>
              <a href="thread.html#3594">[ thread ]</a>
              <a href="subject.html#3594">[ subject ]</a>
              <a href="author.html#3594">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
