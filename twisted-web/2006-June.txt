From dominic.fox at gmail.com  Thu Jun  1 05:01:28 2006
From: dominic.fox at gmail.com (Dominic Fox)
Date: Thu Jun  1 05:02:19 2006
Subject: [Twisted-web] Desperately Seeking fpconst
Message-ID: <f278b2130606010301t282acec7l2e19354d45b087c6@mail.gmail.com>

twisted.web.soap requires SOAPpy; SOAPpy requires fpconst. fpconst is
alleged to be available from
http://www.analytics.washington.edu/statcomp/projects/testfolder/rzope/fpconst,
but the site is not responding.

Not a problem on my linux box, as Ubuntu has packages for all this
stuff. But I'd like to run a Windows test client for a SOAP server,
and right at the moment I can't because a needed software component is
missing in action.

Two requests: i) If anyone has a zip file containing fpconst, could
they email it to me or put it somewhere where I can get hold of it?
ii) Any chance of the twisted site mirroring fpconst?

thanks,
Dominic

From ralf at brainbot.com  Thu Jun  1 05:36:45 2006
From: ralf at brainbot.com (Ralf Schmitt)
Date: Thu Jun  1 05:36:47 2006
Subject: [Twisted-web] Desperately Seeking fpconst
In-Reply-To: <f278b2130606010301t282acec7l2e19354d45b087c6@mail.gmail.com>
References: <f278b2130606010301t282acec7l2e19354d45b087c6@mail.gmail.com>
Message-ID: <447EC33D.4020403@brainbot.com>

Dominic Fox wrote:
> twisted.web.soap requires SOAPpy; SOAPpy requires fpconst. fpconst is
> alleged to be available from
> http://www.analytics.washington.edu/statcomp/projects/testfolder/rzope/fpconst, 
> 
> but the site is not responding.
> 
> Not a problem on my linux box, as Ubuntu has packages for all this
> stuff. But I'd like to run a Windows test client for a SOAP server,
> and right at the moment I can't because a needed software component is
> missing in action.
> 
> Two requests: i) If anyone has a zip file containing fpconst, could
> they email it to me or put it somewhere where I can get hold of it?
> ii) Any chance of the twisted site mirroring fpconst?

fpconst is pure python. you should be able to use the ubuntu version.

http://systemexit.de/~ralf/fpconst-0.7.2.tar.gz



From eric.faurot at gmail.com  Thu Jun  1 05:37:28 2006
From: eric.faurot at gmail.com (Eric Faurot)
Date: Thu Jun  1 05:37:31 2006
Subject: [Twisted-web] Desperately Seeking fpconst
In-Reply-To: <f278b2130606010301t282acec7l2e19354d45b087c6@mail.gmail.com>
References: <f278b2130606010301t282acec7l2e19354d45b087c6@mail.gmail.com>
Message-ID: <e012d6b50606010337y251ac8d4jeeb264938a5708ee@mail.gmail.com>

On 6/1/06, Dominic Fox <dominic.fox@gmail.com> wrote:

> Two requests: i) If anyone has a zip file containing fpconst, could
> they email it to me or put it somewhere where I can get hold of it?
> ii) Any chance of the twisted site mirroring fpconst?

You can find it in the openbsd distfiles.
ftp://ftp.openbsd.org/pub/OpenBSD/distfiles/fpconst-0.7.2.tar.gz

Eric.

From dominic.fox at gmail.com  Thu Jun  1 05:42:27 2006
From: dominic.fox at gmail.com (Dominic Fox)
Date: Thu Jun  1 05:43:39 2006
Subject: [Twisted-web] Desperately Seeking fpconst
In-Reply-To: <447EC33D.4020403@brainbot.com>
References: <f278b2130606010301t282acec7l2e19354d45b087c6@mail.gmail.com>
	<447EC33D.4020403@brainbot.com>
Message-ID: <f278b2130606010342r5878f570hb5bf7282aec013b1@mail.gmail.com>

Excellent, thanks guys.

Dominic

From georgewr at bigpond.net.au  Thu Jun  1 06:38:54 2006
From: georgewr at bigpond.net.au (George Wright)
Date: Thu Jun  1 06:39:03 2006
Subject: [Twisted-web] Import channel Problem
In-Reply-To: <447DB0F7.2090907@dreid.org>
References: <E6C489F5-07CA-4052-9E97-5627F39612B2@bigpond.net.au>	<447CE0E2.3070403@dreid.org>
	<678088B9-786B-4262-A79C-8E4FDC8D899A@bigpond.net.au>
	<447DB0F7.2090907@dreid.org>
Message-ID: <E70562D2-1331-41B7-9B56-7CE971896A09@bigpond.net.au>

Thanks again David
and thanks for the welcome and introduction to the list.
I ended up trashing the previous web2 folder contents and replacing  
it with the new svn download.
It works fine now.
Just a beginner - but it looks like fun.
Regards
On 01/06/2006, at 1:06 AM, David Reid wrote:

> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> George Wright wrote:
>>
>> Do I just copy contents into the web2 folder at
>> /Library/Python/2.3/site-packages/twisted/web2/ after trashing  
>> previous
>> contents?
>
> or just copy the twisted directory to
> /Library/Python/2.3/site-packages/twisted
> - -David
> ____________________
> Twisted-web mailing list
> Twisted-web@twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web

George Wright
http://users.bigpond.net.au/George.Wright/
http://www.labyrinth.net.au/~gwright




From glyph at divmod.com  Sat Jun  3 22:04:07 2006
From: glyph at divmod.com (glyph@divmod.com)
Date: Sat Jun  3 22:04:13 2006
Subject: [Twisted-web] trying to resolve half a decade of confusion
In-Reply-To: 0
Message-ID: <20060604030407.31435.1022800644.divmod.quotient.864@ohm>

Itamar and I have written a page that attempts to explain the current situation in the Twisted Web World to newcomers, both to reduce confusion and to drive people in the direction of the appropriate tools for their problems.

The page is here:

   http://twistedmatrix.com/trac/wiki/WebDevelopmentWithTwisted

and we've prominently linked it from the front page and both the TwistedWeb and TwistedWeb2 pages.

From manlio_perillo at libero.it  Sun Jun  4 06:21:20 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Sun Jun  4 06:19:24 2006
Subject: [Twisted-web] integration of HTTP Basic Auth and cred
Message-ID: <4482C230.1020304@libero.it>

Hi.

I have written a small module for integrating HTTP Basic Auth and cred.
This is like guard.SessionWrapper.

I'm posting this module here because I'm not sure I'm doing the right thing.


Thanks and regards  Manlio Perillo
-------------- next part --------------
"""cred integration with HTTP Basic Authentication.
"""


from zope.interface import Interface, Attribute, implements

from twisted.web import http
from twisted.cred import portal
from twisted.cred.credentials import UsernamePassword, Anonymous
from twisted.cred.error import UnauthorizedLogin

from nevow import inevow, url, stan


class INamedRealm(portal.IRealm):
    # this is used in the HTTP WWW-Authenticate header
    name = Attribute("The name of the realm")


class Forbidden(object):
    implements(inevow.IResource)

    def locateChild(self, ctx, segments):
        return self

    def renderHTTP(self, ctx):
        request = inevow.IRequest(ctx)
        request.setResponseCode(http.FORBIDDEN)
        return ("<html><head><title>Forbidden</title></head>"
                "<body><h1>Forbidden</h1>Request was forbidden.</body></html>")


def nomind(*args): return None


class HTTPAuthWrapper(object):
    """Wrapper for HTTP Basic Authentication
    """

    implements(inevow.IResource)

    # The interface to cred for when logging into the portal
    credInterface = inevow.IResource
    resource = None
    
    def __init__(self, portal, mindFactory=None, credInterface=None):
        self.portal = portal
        
        if mindFactory is None:
            mindFactory = nomind
        self.mindFactory = mindFactory
        
        if credInterface is not None:
            self.credInterface = credInterface
        
    def renderHTTP(self, ctx):
        def _cb((iface, res, logout)):
            self.resource = inevow.IResource(res)
            
            req = inevow.IRequest(ctx)

            # XXX remove the Authorization header 
            # (compatibility with guard) 
            del req.getAllHeaders()["authorization"]

            return self.resource.renderHTTP(ctx)
        
        
        request = inevow.IRequest(ctx)
        realm = self.portal.realm
        
        username, password = request.getUser(), request.getPassword()
        
        # XXX TODO handle anonymous access?
        if (username, password) == ('', ''):
            request.setHeader('WWW-Authenticate', 
                              'Basic realm="%s"' % realm.name)
            request.setResponseCode(http.UNAUTHORIZED)
            
            # XXX
            return "Authentication required."
        else:
            credentials = UsernamePassword(username, password)
            mind = self.mindFactory(request, credentials)
            
            d = self.portal.login(credentials, mind,
                                  self.credInterface)
            d.addCallback(_cb)
            d.addErrback(self.incorrectLoginError, ctx)
            
            return d

    def locateChild(self, ctx, segments):
        # XXX not sure
        if not self.resource:
            if not segments:
                return self, ()
            elif not segments[0]:
                return self, ()
            else:
                return None, ()
        else:
            if not segments:
                return self.resource, ()
            elif not segments[0]:
                return self.resource, ()
            else:
                return self.resource.locateChild(ctx, segments)
  
    def incorrectLoginError(self, error, ctx):
        """Called on login failure.
        You can override this, as an example placing a limit on the
        number of failed logins.
        """
        
        request = inevow.IRequest(ctx)
        realm = self.portal.realm
        
        error.trap(UnauthorizedLogin)

        request.setHeader('WWW-Authenticate', 
                          'Basic realm="%s"' % realm.name)
        request.setResponseCode(http.UNAUTHORIZED)
        
        # XXX
        return "Authentication failed."
From manlio_perillo at libero.it  Mon Jun  5 04:16:29 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Mon Jun  5 04:14:43 2006
Subject: [Twisted-web] trying to resolve half a decade of confusion
In-Reply-To: <20060604030407.31435.1022800644.divmod.quotient.864@ohm>
References: <20060604030407.31435.1022800644.divmod.quotient.864@ohm>
Message-ID: <4483F66D.3060406@libero.it>

glyph@divmod.com ha scritto:
> Itamar and I have written a page that attempts to explain the current
> situation in the Twisted Web World to newcomers, both to reduce
> confusion and to drive people in the direction of the appropriate tools
> for their problems.
> 
> The page is here:
> 
>   http://twistedmatrix.com/trac/wiki/WebDevelopmentWithTwisted
> 
> and we've prominently linked it from the front page and both the
> TwistedWeb and TwistedWeb2 pages.
> 

I think it would help to have a list of problems with twisted.web (that
will be resolved in twisted.web2).

As far as I know:
- no persistent connections
- no compression
- problems with file upload
- ?



Thanks and regards  Manlio Perillo

From berry at polmann.com  Sun Jun  4 09:35:37 2006
From: berry at polmann.com (Berry L. Polmann)
Date: Mon Jun  5 09:34:28 2006
Subject: [Twisted-web] twistedweb install driving me nuts
Message-ID: <000001c687e4$260c9590$7225c0b0$@com>

Short update:
I am trying to install Hellanzb, which has twistedweb as its dependency.
(mac osx 10.4.5, intel, darwinports latest intel) 

 Building py-twistedweb with target build
Error: Target com.apple.build returned: shell command "cd
"/opt/local/var/db/dports/build/_opt_local_var_db_dports_sources_rsync.rsync
.darwinports.org_dpupdate_dports_python_py-twistedweb/work/TwistedWeb-0.5.0"
&& /opt/local/bin/python2.4 setup.py build" returned error 1
Command output: Traceback (most recent call last):
  File "setup.py", line 19, in ?
    long_description="""\
  File "/opt/local/lib/python2.4/site-packages/twisted/python/dist.py", line
41, in setup
    kw['version'] = getVersion(projname)
  File "/opt/local/lib/python2.4/site-packages/twisted/python/dist.py", line
92, in getVersion
    execfile(vfile, ns)
IOError: [Errno 2] No such file or directory: 'twisted/web/_version.py'

Error: /opt/local/bin/port: Status 1 encountered during processing.

Hellanzb has been driving me nuts for 2 days this would be the last step. So
all help greatlz appreciated!!

Regards,

Berry 


From exarkun at divmod.com  Mon Jun  5 09:39:44 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon Jun  5 09:39:48 2006
Subject: [Twisted-web] twistedweb install driving me nuts
In-Reply-To: <000001c687e4$260c9590$7225c0b0$@com>
Message-ID: <20060605143944.31435.438362715.divmod.quotient.1944@ohm>

On Sun, 4 Jun 2006 16:35:37 +0200, "Berry L. Polmann" <berry@polmann.com> wrote:
>Short update:
>I am trying to install Hellanzb, which has twistedweb as its dependency.
>(mac osx 10.4.5, intel, darwinports latest intel)

Install Twisted Web 0.6.0 instead.  0.5.0 does not work with the version of Twisted you have installed.  Better yet, install Twisted 2.4.0, which should includ everything you need.

Jean-Paul

From radix at twistedmatrix.com  Mon Jun  5 09:53:49 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Mon Jun  5 09:53:52 2006
Subject: [Twisted-web] twistedweb install driving me nuts
In-Reply-To: <000001c687e4$260c9590$7225c0b0$@com>
References: <000001c687e4$260c9590$7225c0b0$@com>
Message-ID: <60ed19d40606050753v6d6a13dfp28f456b8aa600529@mail.gmail.com>

On 6/4/06, Berry L. Polmann <berry@polmann.com> wrote:
> Short update:
> I am trying to install Hellanzb, which has twistedweb as its dependency.
> (mac osx 10.4.5, intel, darwinports latest intel)
>
>  Building py-twistedweb with target build
> Error: Target com.apple.build returned: shell command "cd
> "/opt/local/var/db/dports/build/_opt_local_var_db_dports_sources_rsync.rsync
> .darwinports.org_dpupdate_dports_python_py-twistedweb/work/TwistedWeb-0.5.0"
> && /opt/local/bin/python2.4 setup.py build" returned error 1
> Command output: Traceback (most recent call last):
>   File "setup.py", line 19, in ?
>     long_description="""\
>   File "/opt/local/lib/python2.4/site-packages/twisted/python/dist.py", line
> 41, in setup
>     kw['version'] = getVersion(projname)
>   File "/opt/local/lib/python2.4/site-packages/twisted/python/dist.py", line
> 92, in getVersion
>     execfile(vfile, ns)
> IOError: [Errno 2] No such file or directory: 'twisted/web/_version.py'
>
> Error: /opt/local/bin/port: Status 1 encountered during processing.
>
> Hellanzb has been driving me nuts for 2 days this would be the last step. So
> all help greatlz appreciated!!


http://twistedmatrix.com/trac/wiki/TwistedWeb

The latest release is 0.6.0, please try that one.


-- 
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/

From berry at polmann.com  Sun Jun  4 10:28:49 2006
From: berry at polmann.com (Berry L. Polmann)
Date: Mon Jun  5 10:27:39 2006
Subject: [Twisted-web] twistedweb install driving me nuts
In-Reply-To: <60ed19d40606050753v6d6a13dfp28f456b8aa600529@mail.gmail.com>
Message-ID: <000101c687eb$94657820$bd306860$@com>

Thx.
Not available through darwinports.
This n00b, has 48 hours experience in osx..
How do I install that, I have installed python24 so I thought hitting
setup.py would do the trick.


-----Original Message-----
From: twisted-web-bounces@twistedmatrix.com
[mailto:twisted-web-bounces@twistedmatrix.com] On Behalf Of Christopher
Armstrong
Sent: maandag 5 juni 2006 16:54
To: Twisted Web World
Subject: Re: [Twisted-web] twistedweb install driving me nuts

On 6/4/06, Berry L. Polmann <berry@polmann.com> wrote:
> Short update:
> I am trying to install Hellanzb, which has twistedweb as its dependency.
> (mac osx 10.4.5, intel, darwinports latest intel)
>
>  Building py-twistedweb with target build
> Error: Target com.apple.build returned: shell command "cd 
> "/opt/local/var/db/dports/build/_opt_local_var_db_dports_sources_rsync
> .rsync 
>
.darwinports.org_dpupdate_dports_python_py-twistedweb/work/TwistedWeb-0.5.0"
> && /opt/local/bin/python2.4 setup.py build" returned error 1 Command 
> output: Traceback (most recent call last):
>   File "setup.py", line 19, in ?
>     long_description="""\
>   File 
> "/opt/local/lib/python2.4/site-packages/twisted/python/dist.py", line 41,
in setup
>     kw['version'] = getVersion(projname)
>   File 
> "/opt/local/lib/python2.4/site-packages/twisted/python/dist.py", line 92,
in getVersion
>     execfile(vfile, ns)
> IOError: [Errno 2] No such file or directory: 'twisted/web/_version.py'
>
> Error: /opt/local/bin/port: Status 1 encountered during processing.
>
> Hellanzb has been driving me nuts for 2 days this would be the last 
> step. So all help greatlz appreciated!!


http://twistedmatrix.com/trac/wiki/TwistedWeb

The latest release is 0.6.0, please try that one.


--
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/

_______________________________________________
Twisted-web mailing list
Twisted-web@twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web


From berry at polmann.com  Sun Jun  4 10:30:55 2006
From: berry at polmann.com (Berry L. Polmann)
Date: Mon Jun  5 10:29:43 2006
Subject: [Twisted-web] twistedweb install driving me nuts
In-Reply-To: <20060605143944.31435.438362715.divmod.quotient.1944@ohm>
Message-ID: <000201c687eb$df1c5c80$9d551580$@com>

Jean Peal thx for taking the time..

I installed hellanzb through darwinports, which installes all other
dependencies in the right order, python24, py-twisted, py-twistedweb.

Uninstalled apple devtools, darwinports and started over again. Same
result...


-----Original Message-----
From: twisted-web-bounces@twistedmatrix.com
[mailto:twisted-web-bounces@twistedmatrix.com] On Behalf Of Jean-Paul
Calderone
Sent: maandag 5 juni 2006 16:40
To: twisted-web@twistedmatrix.com
Subject: Re: [Twisted-web] twistedweb install driving me nuts

On Sun, 4 Jun 2006 16:35:37 +0200, "Berry L. Polmann" <berry@polmann.com>
wrote:
>Short update:
>I am trying to install Hellanzb, which has twistedweb as its dependency.
>(mac osx 10.4.5, intel, darwinports latest intel)

Install Twisted Web 0.6.0 instead.  0.5.0 does not work with the version of
Twisted you have installed.  Better yet, install Twisted 2.4.0, which should
includ everything you need.

Jean-Paul

_______________________________________________
Twisted-web mailing list
Twisted-web@twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web


From mailinglists at smartology.nl  Tue Jun  6 09:26:57 2006
From: mailinglists at smartology.nl (Remi Cool)
Date: Tue Jun  6 09:27:03 2006
Subject: [Twisted-web] Guard and service
Message-ID: <448590B1.4050802@smartology.nl>

G'day,

I want to protect the root of my nevow Site with guard, but can't get it
to work.

My nevow Site is passed the service like in:

s = myService()
ms = service.MultiService()
internet.TCPServer(8000,
server.Site(resource.IResource(s))).setServiceParent(ms)

I used the nevow guarded example for the code and registered the
resource factory:

def createResource(service):
    realm = MyRealm()
    porta = portal.Portal(realm)

    myChecker = checkers.InMemoryUsernamePasswordDatabaseDontUse()
    myChecker.addUser("user","pass")
    myChecker.addUser("fred", "flint")
    porta.registerChecker(checkers.AllowAnonymousAccess(),
credentials.IAnonymous)
    porta.registerChecker(myChecker)
    res = guard.SessionWrapper(porta, mindFactory=Mind)
    res.service = service
    return res

Like so:

components.registerAdapter(createResource, ImyService, inevow.IResource)

When I browse to the root page (http://localhost:8000), FireFox gives me
an error:

> The page isn't redirecting properly
>
> Firefox has detected that the server is redirecting the request for
> this address in a way that will never complete.
>
> *   This problem can sometimes be caused by disabling or refusing to
> accept  cookies.

There are cookies, so that doesn't seem to be the problem.

How can I solve this problem?



From manlio_perillo at libero.it  Tue Jun 13 12:12:28 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Tue Jun 13 12:10:28 2006
Subject: [Twisted-web] problems with Nevow wiki examples
Message-ID: <448EF1FC.2060409@libero.it>

Hi.

Some examples on the Nevow wiki are not correct.

1) the examples with Pollenation Forms use the wrong package name, forms
instead of formal
http://divmod.org/trac/wiki/DivmodNevow/FormHandling

2) the example of guarded login page is really incomplete



Thanks and regards  Manlio Perillo

From manlio_perillo at libero.it  Tue Jun 13 12:46:31 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Tue Jun 13 12:44:27 2006
Subject: [Twisted-web] [formal] missing examples.css in formal.examples
Message-ID: <448EF9F7.6050707@libero.it>

I don't know if this is the right place but I have installed formal from
trunk (on a Windows XP system) and when trying to run the examples.tac I
got:

...
Failed to load application: 'formal\\examples\\examples.css'

I unzipped the egg and this file is missing...


Another problem is with the test.tac.
I run this from its directory but I got:

...
File "C:\Python2.4\lib\site-packages\twisted\python\logfile.py",
line 26, in __init__
    assert os.path.isdir(self.directory)
AssertionError


What's the problem?


Thanks and regards  Manlio Perillo

From manlio_perillo at libero.it  Tue Jun 13 13:17:01 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Tue Jun 13 13:14:59 2006
Subject: [Twisted-web] [formal] custom error message
Message-ID: <448F011D.8000202@libero.it>

Hi.

When an error occur in form validation, formal return the following:
T.p['Please correct the following errors:']


How can I change this error message?



Thanks  Manlio Perillo

From iacovou at gmail.com  Wed Jun 14 08:34:12 2006
From: iacovou at gmail.com (Ricky Iacovou)
Date: Wed Jun 14 08:34:45 2006
Subject: [Twisted-web] Cascading forms in formal (example code included)
Message-ID: <200606141634.12993.iacovou@gmail.com>


Hi there.

I've been wrestling with a Nevow/formal problem for a day now (though it might 
not be formal-specific); I'm hoping someone with more Nevow experience might 
be able to shed some light on the problem.

I've reduced the problem to the Python code below; run it with 'twistd -noy 
file.py' and point your browser to localhost:8080.

The first page is a form; anything you enter gets handled by 
FirstPage.handler(). I want to have this form lead to another form which asks 
for further information based on the input to the first form.

If you enter the string 'test' in the first page, you will go through an 
intermediate static page. Anything else will take you directly to another 
form.

Tv on #twisted.web pointed out that I can return an IResource from a form 
handler. I'm trying to do this here: I create a SecondPage() object and 
return that, but the server goes into an infinite loop, constantly handling 
the first page results (printing, "User string was: " ...).

[In my actual code, I can Ctrl-C the server at this point; in this example 
code, I actually have to Ctrl-Z and kill -9 the server. I don't know why.]

Note that using the static intermediate page (i.e. simply return a TestPage() 
object from FirstPage.handler()) works peachily. In fact, when you access a 
SecondPage instance as a child of the FirstPage (there's a link on the static 
page), it also works.

Does anyone have any idea why returning the second form page directly creates 
an infinite loop?

Thanks,

Ricky

--
Code starts here
--

from twisted.python import util
from twisted.internet import defer
from twisted.application import strports
from twisted.application import service

from nevow import appserver
from nevow import rend
from nevow import loaders
from nevow import tags as T
from nevow import url

import formal


class SecondPage ( formal.ResourceMixin, rend.Page ):

    def form_example ( self, ctx ):
        form = formal.Form()
        form.addField ( 'description',
                        formal.String(),
                        label = "Type Stuff",
                        description = "For example, 'marmalade'"
                        )

        form.addAction ( self.handler, label = "Go" )
        return form


    def handler ( self, ctx, form, data ):
        print "Form data was: ", data
        # End of form chain; just return a static page.
        return TestPage()


    docFactory = loaders.stan (
        T.html [ T.head [ T.title [ "Second Page" ] ],
                 T.body [ T.directive ( 'form example' ) ] ] )




class FirstPage ( formal.ResourceMixin, rend.Page ):

    def form_example ( self, ctx ):
        form = formal.Form()
        form.addField ( 'user_string',
                        formal.String(),
                        label = "Type Stuff",
                        description = "Type 'test' to go to TestPage."
                        )

        form.addAction ( self.handler, label = "Go" )
        return form


    def handler ( self, ctx, form, data ):
        user_string = data [ 'user_string' ]
        print "User string was: ", user_string

        if str ( user_string ) == 'test':
            # This works:
            page = TestPage()
        else:
            # ... but this doesn't:
            page = SecondPage()

        # Also, how to pass in the 'state' (i.e. user_string)? Should we pass
        # it as a construction argument of the Page?

        # In the Real Code we make a call to an XML-RPC server in the handler,
        # which is why we return a deferred here rather than the page itself.
        return defer.succeed ( page )


    # Instantiate a SecondPage so it can be accessed indirectly.
    child_secondPage = SecondPage()


    docFactory = loaders.stan (
        T.html [ T.head [ T.title [ "First Page" ] ],
                 T.body [ T.directive ( 'form example' ) ] ] )


class TestPage ( rend.Page ):
    docFactory = loaders.stan (
        T.html [ T.head [ T.title [ "Test Page" ] ],
                 T.body [ "Visit the ",
                          T.a ( href = '/secondPage' ) [ "Second Page" ] ] ] )


application = service.Application ( 'Broken Forms' )
site        = appserver.NevowSite ( resource = FirstPage() )
server      = strports.service ( "8080", site )
server.setServiceParent ( application )


--
Code ends here
--

From matt at pollenation.net  Wed Jun 14 15:51:52 2006
From: matt at pollenation.net (Matt Goodall)
Date: Wed Jun 14 15:52:03 2006
Subject: [Twisted-web] [formal] missing examples.css in formal.examples
In-Reply-To: <448EF9F7.6050707@libero.it>
References: <448EF9F7.6050707@libero.it>
Message-ID: <449076E8.4050809@pollenation.net>

Manlio Perillo wrote:
> I don't know if this is the right place but I have installed formal from
> trunk (on a Windows XP system) and when trying to run the examples.tac I
> got:
> 
> ...
> Failed to load application: 'formal\\examples\\examples.css'
> 
> I unzipped the egg and this file is missing...

You're correct. examples.css was not picked up by setup.py at all and 
I've never run the examples.tac from outside the source directory.

This should be fixed in svn trunk now.

> 
> 
> Another problem is with the test.tac.
> I run this from its directory but I got:
> 
> ...
> File "C:\Python2.4\lib\site-packages\twisted\python\logfile.py",
> line 26, in __init__
>     assert os.path.isdir(self.directory)
> AssertionError
> 
> 
> What's the problem?

Heh, test.tac was logging web access to /dev/null. Apparently, some OS's 
don't have a /dev directory ;-).

To be honest, test.tac and test.html should not exist anymore. The 
examples are much more useful. I've removed both files from svn.

Thanks for the bug reports.

- Matt


-- 
      __
     /  \__     Matt Goodall, Pollenation Internet Ltd
     \__/  \    w: http://www.pollenation.net
   __/  \__/    e: matt@pollenation.net
  /  \__/  \    t: +44 (0)113 2252500
  \__/  \__/
  /  \	       Any views expressed are my own and do not necessarily
  \__/          reflect the views of my employer.

From matt at pollenation.net  Wed Jun 14 15:53:31 2006
From: matt at pollenation.net (Matt Goodall)
Date: Wed Jun 14 15:53:39 2006
Subject: [Twisted-web] [formal] custom error message
In-Reply-To: <448F011D.8000202@libero.it>
References: <448F011D.8000202@libero.it>
Message-ID: <4490774B.7030604@pollenation.net>

Manlio Perillo wrote:
> Hi.
> 
> When an error occur in form validation, formal return the following:
> T.p['Please correct the following errors:']
> 
> 
> How can I change this error message?

You can't :(.

There is an i18n branch sitting around somewhere that I was working on. 
Would that help?

- Matt

-- 
      __
     /  \__     Matt Goodall, Pollenation Internet Ltd
     \__/  \    w: http://www.pollenation.net
   __/  \__/    e: matt@pollenation.net
  /  \__/  \    t: +44 (0)113 2252500
  \__/  \__/
  /  \	       Any views expressed are my own and do not necessarily
  \__/          reflect the views of my employer.

From matt at pollenation.net  Wed Jun 14 16:07:48 2006
From: matt at pollenation.net (Matt Goodall)
Date: Wed Jun 14 16:08:00 2006
Subject: [Twisted-web] Cascading forms in formal (example code included)
In-Reply-To: <200606141634.12993.iacovou@gmail.com>
References: <200606141634.12993.iacovou@gmail.com>
Message-ID: <44907AA4.8000908@pollenation.net>

Ricky Iacovou wrote:
> Hi there.
> 
> I've been wrestling with a Nevow/formal problem for a day now (though it might 
> not be formal-specific); I'm hoping someone with more Nevow experience might 
> be able to shed some light on the problem.
> 
> I've reduced the problem to the Python code below; run it with 'twistd -noy 
> file.py' and point your browser to localhost:8080.
> 
> The first page is a form; anything you enter gets handled by 
> FirstPage.handler(). I want to have this form lead to another form which asks 
> for further information based on the input to the first form.
> 
> If you enter the string 'test' in the first page, you will go through an 
> intermediate static page. Anything else will take you directly to another 
> form.
> 
> Tv on #twisted.web pointed out that I can return an IResource from a form 
> handler. I'm trying to do this here: I create a SecondPage() object and 
> return that, but the server goes into an infinite loop, constantly handling 
> the first page results (printing, "User string was: " ...).
> 
> [In my actual code, I can Ctrl-C the server at this point; in this example 
> code, I actually have to Ctrl-Z and kill -9 the server. I don't know why.]
> 
> Note that using the static intermediate page (i.e. simply return a TestPage() 
> object from FirstPage.handler()) works peachily. In fact, when you access a 
> SecondPage instance as a child of the FirstPage (there's a link on the static 
> page), it also works.
> 
> Does anyone have any idea why returning the second form page directly creates 
> an infinite loop?


I suspect it's because when SecondPage sees the request was POST'ed and 
assumes it's a form POST. Processing the POST will re-find the 
FirstPage's form and processes it again which returns a SecondPage, etc.

I'm not sure if that's a bug or a feature/limitation ;-).

Even if SecondPage was rendered correctly after submitting FirstPage, I 
think Formal would have a hard time finding SecondPage's form because 
the URL would resolve to a FirstPage resource.

Interesting.

I'll add a ticket and have a think about it.

The way I've done this sort of thing is to make FirstPage HTTP redirect 
to another URL to display SecondPage, passing data from FirstPage to 
SecondPage using request args. (Hint: return a nevow.url.URL instance 
from FirstPage's form's submit method.)

If there's a lot of data to pass around you might need to resort to 
sessions. Yucky but, hey, it's the web.

It would certainly be nicer to chain form pages together.

Hope this helps, even if it doesn't solve your problem.

- Matt


> 
> Thanks,
> 
> Ricky
> 
> --
> Code starts here
> --
> 
> from twisted.python import util
> from twisted.internet import defer
> from twisted.application import strports
> from twisted.application import service
> 
> from nevow import appserver
> from nevow import rend
> from nevow import loaders
> from nevow import tags as T
> from nevow import url
> 
> import formal
> 
> 
> class SecondPage ( formal.ResourceMixin, rend.Page ):
> 
>     def form_example ( self, ctx ):
>         form = formal.Form()
>         form.addField ( 'description',
>                         formal.String(),
>                         label = "Type Stuff",
>                         description = "For example, 'marmalade'"
>                         )
> 
>         form.addAction ( self.handler, label = "Go" )
>         return form
> 
> 
>     def handler ( self, ctx, form, data ):
>         print "Form data was: ", data
>         # End of form chain; just return a static page.
>         return TestPage()
> 
> 
>     docFactory = loaders.stan (
>         T.html [ T.head [ T.title [ "Second Page" ] ],
>                  T.body [ T.directive ( 'form example' ) ] ] )
> 
> 
> 
> 
> class FirstPage ( formal.ResourceMixin, rend.Page ):
> 
>     def form_example ( self, ctx ):
>         form = formal.Form()
>         form.addField ( 'user_string',
>                         formal.String(),
>                         label = "Type Stuff",
>                         description = "Type 'test' to go to TestPage."
>                         )
> 
>         form.addAction ( self.handler, label = "Go" )
>         return form
> 
> 
>     def handler ( self, ctx, form, data ):
>         user_string = data [ 'user_string' ]
>         print "User string was: ", user_string
> 
>         if str ( user_string ) == 'test':
>             # This works:
>             page = TestPage()
>         else:
>             # ... but this doesn't:
>             page = SecondPage()
> 
>         # Also, how to pass in the 'state' (i.e. user_string)? Should we pass
>         # it as a construction argument of the Page?
> 
>         # In the Real Code we make a call to an XML-RPC server in the handler,
>         # which is why we return a deferred here rather than the page itself.
>         return defer.succeed ( page )
> 
> 
>     # Instantiate a SecondPage so it can be accessed indirectly.
>     child_secondPage = SecondPage()
> 
> 
>     docFactory = loaders.stan (
>         T.html [ T.head [ T.title [ "First Page" ] ],
>                  T.body [ T.directive ( 'form example' ) ] ] )
> 
> 
> class TestPage ( rend.Page ):
>     docFactory = loaders.stan (
>         T.html [ T.head [ T.title [ "Test Page" ] ],
>                  T.body [ "Visit the ",
>                           T.a ( href = '/secondPage' ) [ "Second Page" ] ] ] )
> 
> 
> application = service.Application ( 'Broken Forms' )
> site        = appserver.NevowSite ( resource = FirstPage() )
> server      = strports.service ( "8080", site )
> server.setServiceParent ( application )
> 
> 
> --
> Code ends here
> --
> 
> _______________________________________________
> Twisted-web mailing list
> Twisted-web@twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web


-- 
      __
     /  \__     Matt Goodall, Pollenation Internet Ltd
     \__/  \    w: http://www.pollenation.net
   __/  \__/    e: matt@pollenation.net
  /  \__/  \    t: +44 (0)113 2252500
  \__/  \__/
  /  \	       Any views expressed are my own and do not necessarily
  \__/          reflect the views of my employer.

From matt at pollenation.net  Wed Jun 14 16:29:27 2006
From: matt at pollenation.net (Matt Goodall)
Date: Wed Jun 14 16:29:41 2006
Subject: [Twisted-web] Nevow depends on Twisted 2.4
Message-ID: <44907FB7.2000803@pollenation.net>

Hi,

Nevow now uses t.p.versions which makes it dependent on Twisted 2.4. Was 
that intentional?

I don't think it's a big problem for me but it could be quite awkward if 
you weren't expecting it.

At the very least, it's probably something that should be noted fairly 
prominently in the README or NEWS file.

- Matt

-- 
      __
     /  \__     Matt Goodall, Pollenation Internet Ltd
     \__/  \    w: http://www.pollenation.net
   __/  \__/    e: matt@pollenation.net
  /  \__/  \    t: +44 (0)113 2252500
  \__/  \__/
  /  \	       Any views expressed are my own and do not necessarily
  \__/          reflect the views of my employer.

From glyph at divmod.com  Wed Jun 14 17:35:15 2006
From: glyph at divmod.com (glyph@divmod.com)
Date: Wed Jun 14 17:35:16 2006
Subject: [Twisted-web] Nevow depends on Twisted 2.4
In-Reply-To: <44907FB7.2000803@pollenation.net>
Message-ID: <20060614223515.29014.548174907.divmod.quotient.339@ohm>



On Wed, 14 Jun 2006 22:29:27 +0100, Matt Goodall <matt@pollenation.net> wrote:
>Hi,
>
>Nevow now uses t.p.versions which makes it dependent on Twisted 2.4. Was 
>that intentional?
>
>I don't think it's a big problem for me but it could be quite awkward if you 
>weren't expecting it.
>
>At the very least, it's probably something that should be noted fairly 
>prominently in the README or NEWS file.

Whoops!  As a double-whammie, although the README got a bit of an overhaul, NEWS.txt wasn't even included at all in this release, since the MANIFEST.in wasn't changed.

We'll probably do an 0.9.1 shortly to fix these issues and mention it prominently in the NEWS file there.

From manlio_perillo at libero.it  Thu Jun 15 04:25:17 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Thu Jun 15 04:23:28 2006
Subject: [Twisted-web] [formal] missing examples.css in formal.examples
In-Reply-To: <449076E8.4050809@pollenation.net>
References: <448EF9F7.6050707@libero.it> <449076E8.4050809@pollenation.net>
Message-ID: <4491277D.3090305@libero.it>

Matt Goodall ha scritto:
> Manlio Perillo wrote:
>> I don't know if this is the right place but I have installed formal from
>> trunk (on a Windows XP system) and when trying to run the examples.tac I
>> got:
>>
>> ...
>> Failed to load application: 'formal\\examples\\examples.css'
>>
>> I unzipped the egg and this file is missing...
> 
> You're correct. examples.css was not picked up by setup.py at all and
> I've never run the examples.tac from outside the source directory.
> 
> This should be fixed in svn trunk now.
> 

Thanks!

>>
>>
>> Another problem is with the test.tac.
>> I run this from its directory but I got:
>>
>> ...
>> File "C:\Python2.4\lib\site-packages\twisted\python\logfile.py",
>> line 26, in __init__
>>     assert os.path.isdir(self.directory)
>> AssertionError
>>
>>
>> What's the problem?
> 
> Heh, test.tac was logging web access to /dev/null. Apparently, some OS's
> don't have a /dev directory ;-).
> 

You can use os.devnull (new in Pyhton 2.4).
On Windows the "pseudo"/"virtual"/"who knows" device is "NUL"




Regards  Manlio Perillo

From iacovou at gmail.com  Fri Jun 16 07:18:05 2006
From: iacovou at gmail.com (Ricky Iacovou)
Date: Fri Jun 16 07:18:31 2006
Subject: [Twisted-web] Cascading forms in formal (example code included)
In-Reply-To: <44907AA4.8000908@pollenation.net>
References: <200606141634.12993.iacovou@gmail.com>
	<44907AA4.8000908@pollenation.net>
Message-ID: <200606161518.05447.iacovou@gmail.com>

On Thursday 15 June 2006 00:07, Matt Goodall wrote:

> I suspect it's because when SecondPage sees the request was POST'ed and
> assumes it's a form POST. Processing the POST will re-find the
> FirstPage's form and processes it again which returns a SecondPage, etc.

Thanks for taking the time to look at this, Matt.

> Even if SecondPage was rendered correctly after submitting FirstPage, I
> think Formal would have a hard time finding SecondPage's form because
> the URL would resolve to a FirstPage resource.

Yes, I was fearing I was going to hit that problem sooner or later. I guess I 
was hoping that there was some Deep Magic under the hood that would deal with 
the URL mapping (maybe some onsubmit Javascript :-) )

> The way I've done this sort of thing is to make FirstPage HTTP redirect
> to another URL to display SecondPage, passing data from FirstPage to
> SecondPage using request args. (Hint: return a nevow.url.URL instance
> from FirstPage's form's submit method.)
>
> If there's a lot of data to pass around you might need to resort to
> sessions. Yucky but, hey, it's the web.

Hmm. I've got the URL redirect working, but the data can potentially be too 
much for a request, so I guess it's sessions. I do actually have a session 
enabled, as everything is wrapped up inside a portal/guard/SessionWrapper 
thingie, so it's not a huge deal.

However ... that gets me thinking.

The next step is basically, "here are the things that matched your criteria; 
select one or more of them so that I can do something with them", so it seems 
silly to send them to the browser only to have the browser send them right 
back again.

Additionally, this *isn't* really 'client state', as the intermediate search 
results aren't persisted beyond the next form (the user's choice from the 
second form, however, is), nor is it 'privileged data', since anyone who has 
sufficient permissions to access the first form can find the same search 
results themselves.

Given that this is Twisted, and we don't have threading issues to deal with, 
is it unfeasibly evil and sinful to pass a handle (e.g. the base64 
representation of the original search string) as a request argument to the 
client and store the 'real' results server-side, to be retrieved while 
rendering the next form?

In other words, I'd end up using sessions for the Important Stuff (e.g. client 
state) but not use sessions for stuff that doesn't matter.

Is this a good application of Laziness, Impatience and Hubris, or is it just a 
recipe for disaster? :-)

Cheers,

Ricky

P.S. Apologies if I've broken list threading ... kmail doesn't seem to like me 
using "Reply To Mailing List", so I've just done "Reply To All", hoping that 
the Message-IDs work. I know that people get religious about their message 
threading *grin*.

From manlio_perillo at libero.it  Sat Jun 17 04:51:35 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Sat Jun 17 04:49:30 2006
Subject: [Twisted-web] [Nevow] nested sequence pattern
Message-ID: <4493D0A7.9080502@libero.it>

Hi.

I have an SQL Table like:
field1, field2
A,      1
A,      2
A,      3
B,      4
B,      7
C,      2

I want to render it in a table like:

<body>
    <table>
      <caption>
        My Table
      </caption>
      <thead>
        <tr>
          <th scope="col">field 1</th>
          <th scope="col">field 2</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td scope="rowgroup">A</td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td>1</td>
        </tr>
        <tr>
          <td></td>
          <td>2</td>
        </tr>
        <tr>
          <td></td>
          <td>3</td>
        </tr>
      </tbody>
      <tbody>
        <tr>
          <td scope="rowgroup">B</td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td>4</td>
        </tr>
        <tr>
          <td></td>
          <td>7</td>
        </tr>
      </tbody>
      <tbody>
        <tr>
          <td scope="rowgroup">C</td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td>2</td>
        </tr>
      </tbody>
    </table>
  </body>



Is this possible with Nevow template? And how?




Thanks  Manlio Perillo

From manlio_perillo at libero.it  Sat Jun 17 16:35:24 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Sat Jun 17 16:33:16 2006
Subject: [Twisted-web] [Nevow] nested sequence pattern
In-Reply-To: <4493D0A7.9080502@libero.it>
References: <4493D0A7.9080502@libero.it>
Message-ID: <4494759C.3010605@libero.it>

Manlio Perillo ha scritto:
> Hi.
> 
> I have an SQL Table like:
> letters, numbers
> A,      1
> A,      2
> A,      3
> B,      4
> B,      7
> C,      2
> 
> I want to render it in a table like:
> 
> [...]
> Is this possible with Nevow template? And how?
> 

I have solved but I don't like the solution.

Only two question:

with this template

...
    <n:invisible n:render="table" n:data="theLetters">
        <tbody n:pattern="tbody" n:render="tbody"
              n:data="theNumbers">
          <tr n:pattern="header" n:render="header">
            <td scope="rowgroup"><n:slot name="letter" /></td>
            <td></td>
          </tr>
          <tr n:pattern="row" n:render="row">
            <td></td>
            <td><n:slot name="number" /></td>
          </tr>
        </tbody>
   </n:invisible>


1) Why I can access the "header" pattern from "table" render?
2) How can I use the "theNumbers" data directive?


my renderers are

def data_theLetters(self, ctx, data):
    return "SELECT DISTINCT letters FROM MyTable"


def render_table(self, ctx, data):
    tag = ctx.tag

    pattern = tag.patternGenerator("tbody")
    content = []
    for letter in data:
        numbers = """SELECT numbers FROM MyTable
                     WHERE letter = :letter"""
            		
        content.append(pattern(data=(letter, numbers)))


    return ctx.tag.clear()[content]


def render_tbody(self, ctx, data):
     tag = ctx.tag

     header = tag.onePattern("header")(data = data[0])
     pattern = tag.patternGenerator("row")

     content = [pattern(data=row) for row in data[1]]

     return tag.clear()[header, content]



Thanks and regards   Manlio Perillo

From dan+twisted at catolabs.org  Tue Jun 20 13:16:18 2006
From: dan+twisted at catolabs.org (Dan Aronson)
Date: Tue Jun 20 13:16:25 2006
Subject: [Twisted-web] is there needless complexity in the nevow userdb
	example?
Message-ID: <44983B72.4020303@catolabs.org>

I'm boldly taking the step into Nevow, lots of concepts, but I'm
beginning to grok them.

Could someone be kind enough to explain to me what I see as needless
complexity in the userdb example.

I don't understand why the user and userdb need to be stored in the
session attribute.

Since they are passed in from the portal, why can't the portal just use
them directly in the childFactory of UserBrowsePage

    def childFactory(self, ctx, name):

        #make sure our child nodes have access to these session objects

        self.setupSession(ctx)

        # name == the username of the user in the database.

        user = self.userManager.findUser(name)

        if user is None:

            return None

        #return page for a particular user object

        return UserPage(user)


since the UserPage instance being created has the user being passed, it
seems to me that it can also be passed the userdb and then that instance
wouldn't need to look of the user and db from the session, since it
would already have it as instance variables.

What am I missing?

--dan




From mailinglists at smartology.nl  Thu Jun 22 02:50:44 2006
From: mailinglists at smartology.nl (Remi Cool)
Date: Thu Jun 22 02:50:51 2006
Subject: [Twisted-web] Copy livepage into div?
Message-ID: <449A4BD4.1070408@smartology.nl>

Hello,

I have an XUL (intranet) application running from chrome and I would
like to have a (athena) livepage in an (XUL) iframe. Not a problem you
would say ... but those damn privileges prevent me from reaching the
chrome from the livepage.

A way to circumvent the privileges horror, is to load the remote html
(via xmlhttpRequests) into for example a div on a (x)html page loaded
from chrome. That works with simple pages (and scripts) ... but would it
also work with a livepage and how should I tackle this problem?

BTW: if anyone knows a method to enable all privileges for remote XUL
(without bothering the user with dialogs asking for permission etc.) ...
please let me know :-D

Thanks...

- Remi -


From glyph at divmod.com  Thu Jun 22 08:25:37 2006
From: glyph at divmod.com (glyph@divmod.com)
Date: Thu Jun 22 08:25:40 2006
Subject: [Twisted-web] Copy livepage into div?
In-Reply-To: <449A4BD4.1070408@smartology.nl>
Message-ID: <20060622132537.29014.207262659.divmod.quotient.6773@ohm>

On Thu, 22 Jun 2006 09:50:44 +0200, Remi Cool <mailinglists@smartology.nl> wrote:

>BTW: if anyone knows a method to enable all privileges for remote XUL
>(without bothering the user with dialogs asking for permission etc.) ...
>please let me know :-D

If this is an intranet application, you can hopefully get the sysadmin to install the appropriate signatures on everyone's firefox.

Otherwise, I'd start auditing the XML parser and network stack in mozilla for buffer overflows :)

From mailinglists at smartology.nl  Thu Jun 22 08:43:28 2006
From: mailinglists at smartology.nl (Remi Cool)
Date: Thu Jun 22 08:43:33 2006
Subject: [Twisted-web] Copy livepage into div?
In-Reply-To: <20060622132537.29014.207262659.divmod.quotient.6773@ohm>
References: <20060622132537.29014.207262659.divmod.quotient.6773@ohm>
Message-ID: <449A9E80.8010307@smartology.nl>

glyph@divmod.com wrote:

> On Thu, 22 Jun 2006 09:50:44 +0200, Remi Cool
> <mailinglists@smartology.nl> wrote:
>
>> BTW: if anyone knows a method to enable all privileges for remote XUL
>> (without bothering the user with dialogs asking for permission etc.) ...
>> please let me know :-D
>
>
> If this is an intranet application, you can hopefully get the sysadmin
> to install the appropriate signatures on everyone's firefox.
>
> Otherwise, I'd start auditing the XML parser and network stack in
> mozilla for buffer overflows :)
>
The client is based on xulrunner (gecko 1.8), not Firefox.

But I do think I have the solution for the livepage ...

I fetch the page from the server using an xmlhttpRequest and store the
result as a XML dom object. Then the javascripts from the head are
processed into the receiving chrome html page. I now need to copy the
body content ... but that should not be so hard. In theory, the livepage
should work. I hope :)




From lordvan at lordvan.com  Thu Jun 22 11:10:06 2006
From: lordvan at lordvan.com (Thomas Raschbacher)
Date: Thu Jun 22 11:11:06 2006
Subject: [Twisted-web] OSS Nevow blog ?
Message-ID: <10693.83.67.126.41.1150992606.squirrel@83.67.126.41>

Hi

i was just wondering if there's an existing nevow blog available (open
source).
otherwise i'll have to write it myself (problem is lack of time though ..)

regards,
  Thomas "LordVan" Raschbacher
P.S.: please CC me directly as i'll prolly forget to look in this mail
folder ;)

-- 
-----BEGIN GEEK CODE BLOCK-----
GCS/CC/E/M/MU/S d- s: a--- C++++(++) UL++++ P+ L++++ E W+++ N+++ o-- K w-- O
M-- V- PS+ PE-- Y++ PGP+++ t+++ 5+ X- R tv b++++ DI- D+ G++ e-->+++++ h-- !r
z-
------END GEEK CODE BLOCK------




From zbir at urbanape.com  Thu Jun 22 11:15:48 2006
From: zbir at urbanape.com (Zachery Bir)
Date: Thu Jun 22 11:16:26 2006
Subject: [Twisted-web] OSS Nevow blog ?
In-Reply-To: <10693.83.67.126.41.1150992606.squirrel@83.67.126.41>
References: <10693.83.67.126.41.1150992606.squirrel@83.67.126.41>
Message-ID: <D143727A-EC1B-425D-8974-F4B221A26AA4@urbanape.com>

On Jun 22, 2006, at 12:10 PM, Thomas Raschbacher wrote:

> Hi
>
> i was just wondering if there's an existing nevow blog available (open
> source).
> otherwise i'll have to write it myself (problem is lack of time  
> though ..)
>
> regards,
>   Thomas "LordVan" Raschbacher
> P.S.: please CC me directly as i'll prolly forget to look in this mail
> folder ;)

I don't recall if it ever got to a "final" release, but you might  
check out Andy's minnow project:

   <http://python.chichaplanet.org/tag/minnow/>

Zac


From glyph at divmod.com  Thu Jun 22 14:37:56 2006
From: glyph at divmod.com (glyph@divmod.com)
Date: Thu Jun 22 14:37:58 2006
Subject: [Twisted-web] OSS Nevow blog ?
In-Reply-To: <D143727A-EC1B-425D-8974-F4B221A26AA4@urbanape.com>
Message-ID: <20060622193756.29014.1889045091.divmod.quotient.7098@ohm>

On Thu, 22 Jun 2006 12:15:48 -0400, Zachery Bir <zbir@urbanape.com> wrote:
>On Jun 22, 2006, at 12:10 PM, Thomas Raschbacher wrote:

>>i was just wondering if there's an existing nevow blog available

>I don't recall if it ever got to a "final" release, but you might  check out 
>Andy's minnow project:

First of all, that doesn't mention Nevow anywhere on that blog post, which is the only mention of "minnow" I can find on the internet.  It uses Twisted and Kid.

Secondly, there doesn't seem to be a place where you can download it; in fact the original post has been deleted, and there's merely the cache of the aggregator you linked to.

From zbir at urbanape.com  Thu Jun 22 14:50:17 2006
From: zbir at urbanape.com (Zachery Bir)
Date: Thu Jun 22 14:50:58 2006
Subject: [Twisted-web] OSS Nevow blog ?
In-Reply-To: <20060622193756.29014.1889045091.divmod.quotient.7098@ohm>
References: <20060622193756.29014.1889045091.divmod.quotient.7098@ohm>
Message-ID: <B348DF81-7CE3-4275-9447-C4D7F507A000@urbanape.com>

On Jun 22, 2006, at 3:37 PM, glyph@divmod.com wrote:

> On Thu, 22 Jun 2006 12:15:48 -0400, Zachery Bir <zbir@urbanape.com>  
> wrote:
>> On Jun 22, 2006, at 12:10 PM, Thomas Raschbacher wrote:
>
>>> i was just wondering if there's an existing nevow blog available
>
>> I don't recall if it ever got to a "final" release, but you might   
>> check out Andy's minnow project:
>
> First of all, that doesn't mention Nevow anywhere on that blog  
> post, which is the only mention of "minnow" I can find on the  
> internet.  It uses Twisted and Kid.

D'oh. You're right, you're right. I just remember Andy working on it  
at PyCon a couple years ago. I knew it was using Twisted. I assumed  
it was using Nevow. My bad.

Zac


From lordvan at lordvan.com  Fri Jun 23 06:50:52 2006
From: lordvan at lordvan.com (Thomas Raschbacher)
Date: Fri Jun 23 06:51:56 2006
Subject: [Twisted-web] OSS Nevow blog ?
In-Reply-To: <20060622193756.29014.1889045091.divmod.quotient.7098@ohm>
References: <D143727A-EC1B-425D-8974-F4B221A26AA4@urbanape.com>
	<20060622193756.29014.1889045091.divmod.quotient.7098@ohm>
Message-ID: <10956.83.67.126.41.1151063452.squirrel@83.67.126.41>

hi
:)

@glyph: u were faster than me . i wanted to write something like this
already :D

so I assume that means that there is no nevow blog yet ..

btw for some reason i don't get the twisted-web list mails .. odd /me
checks mail filters and spam filter.

Regards

-- 
-----BEGIN GEEK CODE BLOCK-----
GCS/CC/E/M/MU/S d- s: a--- C++++(++) UL++++ P+ L++++ E W+++ N+++ o-- K w-- O
M-- V- PS+ PE-- Y++ PGP+++ t+++ 5+ X- R tv b++++ DI- D+ G++ e-->+++++ h-- !r
z-
------END GEEK CODE BLOCK------

On Thu, June 22, 2006 20:37, glyph@divmod.com said:
> On Thu, 22 Jun 2006 12:15:48 -0400, Zachery Bir <zbir@urbanape.com> wrote:
>>On Jun 22, 2006, at 12:10 PM, Thomas Raschbacher wrote:
>
>>>i was just wondering if there's an existing nevow blog available
>
>>I don't recall if it ever got to a "final" release, but you might  check
>> out
>>Andy's minnow project:
>
> First of all, that doesn't mention Nevow anywhere on that blog post, which
> is the only mention of "minnow" I can find on the internet.  It uses
> Twisted and Kid.
>
> Secondly, there doesn't seem to be a place where you can download it; in
> fact the original post has been deleted, and there's merely the cache of
> the aggregator you linked to.
>



From aleuser at inwind.it  Fri Jun 23 19:04:21 2006
From: aleuser at inwind.it (Alessandro)
Date: Fri Jun 23 19:00:06 2006
Subject: [Twisted-web] livepage and  IClientHandle().transient
Message-ID: <449C8185.7090707@inwind.it>

Hi,
  I'm in trouble with livepage. Looking at livepage.LivePage.__doc__ I 
can see this example:
.....
 def render_clickable(self, ctx, data):
             def hello(ctx):
                 return livepage.alert("Hello, world. You can only click 
me once.")
             return ctx.tag(onclick=IClientHandle(ctx).transient(hello))
.....

I have tested it, but I can't find IClientHandle inside the "normal" 
page context; I can find it only inside the handle_XX's context, but I 
can't use "transient" (It doesn't function, I can click as many times as 
I want).

How can I "grant the client the capability of calling a handler once and 
exactly once"?

I'm going to use the server side sessions and something similar "return 
client.get(btn_idname).disable=true"... but I don't like it.

thanks
Alessandro

From dialtone at divmod.com  Sat Jun 24 06:09:12 2006
From: dialtone at divmod.com (Valentino Volonghi aka Dialtone)
Date: Sat Jun 24 06:09:14 2006
Subject: [Twisted-web] livepage and  IClientHandle().transient
In-Reply-To: <449C8185.7090707@inwind.it>
Message-ID: <20060624110912.29014.1667923570.divmod.quotient.8846@ohm>

On Sat, 24 Jun 2006 02:04:21 +0200, Alessandro <aleuser@inwind.it> wrote:
>Hi,
>  I'm in trouble with livepage. Looking at livepage.LivePage.__doc__ I can 
>see this example:
>.....
>def render_clickable(self, ctx, data):
>             def hello(ctx):
>                 return livepage.alert("Hello, world. You can only click me 
>once.")
>             return ctx.tag(onclick=IClientHandle(ctx).transient(hello))
>.....
>
>I have tested it, but I can't find IClientHandle inside the "normal" page 
>context; I can find it only inside the handle_XX's context, but I can't use 
>"transient" (It doesn't function, I can click as many times as I want).

Check that you are using livepage.LivePage as a base class and report here the code you are using _completely_.

>How can I "grant the client the capability of calling a handler once and 
>exactly once"?

With transient.

>I'm going to use the server side sessions and something similar "return 
>client.get(btn_idname).disable=true"... but I don't like it.

Sessions should not be used at all because you must always be able to serialize them and their fields should remain somewhat fixed.

I suggest moving to Athena which is newer and more actively maintained and better overall, moving from one to the other is not very complex or hard if your app is not medium-big and there is a considerable gain in code complexity using Athena (less closures and such).

From aleuser at inwind.it  Sat Jun 24 07:23:43 2006
From: aleuser at inwind.it (Alessandro)
Date: Sat Jun 24 07:19:26 2006
Subject: [Twisted-web] livepage and  IClientHandle().transient
In-Reply-To: <20060624110912.29014.1667923570.divmod.quotient.8846@ohm>
References: <20060624110912.29014.1667923570.divmod.quotient.8846@ohm>
Message-ID: <449D2ECF.4080704@inwind.it>

Valentino Volonghi aka Dialtone wrote:

> Check that you are using livepage.LivePage as a base class and report 
> here the code you are using _completely_.

At the bottom of this email.
I'm using nevow from svn, last revision.
Python 2.4.1

>> I'm going to use the server side sessions and something similar 
>> "return client.get(btn_idname).disable=true"... but I don't like it.
>
> Sessions should not be used at all because you must always be able to 
> serialize them and their fields should remain somewhat fixed.

I can't understand: why sessions should be "serializzable"? Do you mean 
that I should be able to write them to a file whenever I want?

> I suggest moving to Athena which is newer and more actively maintained 
> and better overall, moving from one to the other is not very complex 
> or hard if your app is not medium-big and there is a considerable gain 
> in code complexity using Athena (less closures and such).

Probably you are right; my app is only made by few test modules. I have 
choosed livepage because It is simpler to understand IMHO

Thanks
Alessandro

Here the code:

from nevow import appserver, loaders, tags as T
from twisted.application import service, strports
from nevow.livepage import glue, LivePage

from nevow import livepage

class LiveExample(LivePage):
    docFactory = loaders.stan(
             T.html[
               T.head[glue],
               T.body[
                 T.invisible(render=T.directive('choice'))
               ]
             ])

    def render_choice(self, ctx, data):
        def chosen(ctx, choseWhat):
            return livepage.set("choosable", \
                                ["Thanks for choosing ", choseWhat])
        chooser = livepage.IClientHandle(ctx).transient(chosen)
        return T.span(id="choosable")["Choose one:",
                                      T.p(onclick=chooser("one"))["One"],
                                      T.p(onclick=chooser("two"))["Two"]]

site = appserver.NevowSite(LiveExample())
application = service.Application("site")
strports.service("8080", site).setServiceParent(application)


From moebius.lists at gmail.com  Sat Jun 24 09:22:11 2006
From: moebius.lists at gmail.com (Adrian Perez)
Date: Sat Jun 24 09:26:10 2006
Subject: [Twisted-web] OSS Nevow blog ?
In-Reply-To: <10956.83.67.126.41.1151063452.squirrel@83.67.126.41>
References: <D143727A-EC1B-425D-8974-F4B221A26AA4@urbanape.com>
	<20060622193756.29014.1889045091.divmod.quotient.7098@ohm>
	<10956.83.67.126.41.1151063452.squirrel@83.67.126.41>
Message-ID: <20060624162211.03e96ae8@tron.foobar.homeunix.org>


Hi!

This is my first post to the twisted-web mailing list, so let me say
some words about myself first. Name's Adrian and I'm from Spain. I'm
studying Computer Science (this one is my fifth year -- I hope to
graduate soon) and I've always been interested in Python; unfortunately
there's no much people at my University using it...

I used to have a website I set up on top of Zope but my homemade
webserver just blew up two months ago. I've been trying some web
development frameworks since then because I find Zope too heavy for my
purposes. After taking a quick look at Django, TurboGears (which I
found quite interesting) and CherryPy I discovered Nevow -- and decided
to go on with it. I subscribed to this list some weeks ago but I have
been just ?hearing? what other people had to say.

"Thomas Raschbacher" <lordvan@lordvan.com> wrote:

> so I assume that means that there is no nevow blog yet ..

Well, it does not exist... ?yet?. I'm currently starting to code a
weblog using Nevow. I currently have a working prototype with nearly
no features I made in two afternoons. I'm happy Nevow was quite easy
to start working with -- my previous experience learning Zope was a
hell.

The weblog is named ?Bic? (like a mythical brand of ball pens which
exists here in Spain, http://www.bicworld.com/), and this is a quick
summary of the features I want it to have:

 - reStructuredText for writing posts, and maybe comments too.
   (http://docutils.sf.net/rst.html)

 - Data is stored on-disk as flat plaintext files. If this proves being
   slow, maybe caching pre-rendered reStructuredText and/or having a
   cache of the filesystem contents is acceptable for me.

 - Articles are categorized by using ?tags?. I'm not sure how I will
   blend this with the plaintext storage, but I don't consider this as
   an important feature.

 - Support for uploading files (including images, of course).

 - Serving RSS feeds (of course!)

 - Support for static pages. This could be as simple as marking an
   article as static page, or tagging it as ?static? if I manage to add
   support for tags.

 - Indexing and searching using Xapian (http://www.xapian.org). I think
   I will use Divmod's Xapwrap for this.

 - The current default templates are XHTML 1.0 Strict and CSS 2.0
   compliant. I want to make them accesible, too (WAI-AA at least).

 - Support for localization. I've starting adding it some days ago, and
   I plan to provide english, spanish and galician translations of the
   user interface.

Some other features I would like to have (but which I consider less
important):

 - Stylesheet may be changed ?on the fly? (e.g. a high contrast
   stylesheet would useful for people with vision problems if they can
   select it while browsing).

 - In the future I would like to extend this to have some special URI
   segments translated (e.g. using ?/search/foo? in english and
   ?/buscar/foo? in spanish).

 - Support for pluggable text converters, so articles may be written
   not only in reStructuredText (e.g. wiki syntax, plain ol' HTML...)

 - Some XML-RPC APIs, so posts may be done from blogging clients. 

 - ...some other?

Currently I'm using Python 2.4, Twisted 2.4, Twisted-Web 0.6, Docutils
0.4 and Nevow 0.8 as development environment.

Of course, all comments, proposals, etc. are welcome. I can notify you
of my progress on this list, if you want.

Cheers,

-- 
Adrian Perez
"Experience is what you get when you don't get what you want"
                                           -- (Dan Stanford)

From moebius.lists at gmail.com  Sat Jun 24 09:37:47 2006
From: moebius.lists at gmail.com (Adrian Perez)
Date: Sat Jun 24 09:41:47 2006
Subject: [Twisted-web] OSS Nevow blog ?
In-Reply-To: <20060624162211.03e96ae8@tron.foobar.homeunix.org>
References: <D143727A-EC1B-425D-8974-F4B221A26AA4@urbanape.com>
	<20060622193756.29014.1889045091.divmod.quotient.7098@ohm>
	<10956.83.67.126.41.1151063452.squirrel@83.67.126.41>
	<20060624162211.03e96ae8@tron.foobar.homeunix.org>
Message-ID: <20060624163747.2426adc9@tron.foobar.homeunix.org>


Everybody loves screenshots... here is how my prototype looks. The
article shown is the Bic README file, which is reStructuredText itself.

Cheers,

P.S: I cropped the image a bit so it's smaller, I don't like to send
big attachments in emails.

-- 
Adrian Perez
"Experience is what you get when you don't get what you want"
                                           -- (Dan Stanford)

-------------- next part --------------
A non-text attachment was scrubbed...
Name: bicsmall.png
Type: image/png
Size: 34750 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-web/attachments/20060624/886c622e/bicsmall-0001.png
From dialtone at divmod.com  Sat Jun 24 19:31:21 2006
From: dialtone at divmod.com (Valentino Volonghi aka Dialtone)
Date: Sat Jun 24 19:31:27 2006
Subject: [Twisted-web] livepage and  IClientHandle().transient
In-Reply-To: <449D2ECF.4080704@inwind.it>
Message-ID: <20060625003121.29014.1593747967.divmod.quotient.9549@ohm>

On Sat, 24 Jun 2006 14:23:43 +0200, Alessandro <aleuser@inwind.it> wrote:
>At the bottom of this email.
>I'm using nevow from svn, last revision.
>Python 2.4.1

Ok, I think this is a bug. IClientHandle is not registered in the context so transient cannot be
used in the way it is documented (at least).
This is a bug IMHO and you should report it in trac under divmod.org.

But as I said the current version of livepage (which I think should be removed because buggy, not really working and not very supported lately) is not the main one.

>>>I'm going to use the server side sessions and something similar "return 
>>>client.get(btn_idname).disable=true"... but I don't like it.
>>
>>Sessions should not be used at all because you must always be able to 
>>serialize them and their fields should remain somewhat fixed.
>
>I can't understand: why sessions should be "serializzable"? Do you mean that 
>I should be able to write them to a file whenever I want?

Sessions are not in your control. Sessions are there for the server and not for the user. It's the
server that needs to distinguish between different requests from the users and not the developer.

Sessions are also a complete implementation detail (I mean the session object) because it could easily be just a string (although that would be impractical).

Adding/Removing stuff from something that you do not own is pretty risky and it's asking for trouble.

>Probably you are right; my app is only made by few test modules. I have 
>choosed livepage because It is simpler to understand IMHO

Not understanding the source of a problem is a clear sign of not being simple. Athena and livepage are similar in respect to difficulty and IMHO the americano way is a bit better.

From dialtone at divmod.com  Sun Jun 25 04:15:27 2006
From: dialtone at divmod.com (Valentino Volonghi aka Dialtone)
Date: Sun Jun 25 04:15:37 2006
Subject: [Twisted-web] livepage and  IClientHandle().transient
In-Reply-To: <20060625003121.29014.1593747967.divmod.quotient.9549@ohm>
Message-ID: <20060625091527.29014.671335701.divmod.quotient.9972@ohm>

On Sun, 25 Jun 2006 02:31:21 +0200, Valentino Volonghi aka Dialtone <dialtone@divmod.com> wrote:
>Not understanding the source of a problem is a clear sign of not being 
>simple. Athena and livepage are similar in respect to difficulty and IMHO 
>the americano way is a bit better.

The Athena way not the americano way...

Yesterday night I must have had very bad problems...

From aleuser at inwind.it  Sun Jun 25 04:45:06 2006
From: aleuser at inwind.it (Alessandro)
Date: Sun Jun 25 04:40:45 2006
Subject: [Twisted-web] livepage and  IClientHandle().transient
In-Reply-To: <20060625091527.29014.671335701.divmod.quotient.9972@ohm>
References: <20060625091527.29014.671335701.divmod.quotient.9972@ohm>
Message-ID: <449E5B22.2030402@inwind.it>


> The Athena way not the americano way...
>
> Yesterday night I must have had very bad problems...

Eh.. I did understand, but I noted a strange "slang"..

Thanks for your help, I have opened a trac ticket just this morning


From lordvan at lordvan.com  Sun Jun 25 10:19:21 2006
From: lordvan at lordvan.com (Thomas Raschbacher)
Date: Sun Jun 25 10:25:12 2006
Subject: [Twisted-web] Re: OSS Nevow blog ?
References: <D143727A-EC1B-425D-8974-F4B221A26AA4@urbanape.com>
	<20060622193756.29014.1889045091.divmod.quotient.7098@ohm>
	<10956.83.67.126.41.1151063452.squirrel@83.67.126.41>
	<20060624162211.03e96ae8@tron.foobar.homeunix.org>
Message-ID: <pan.2006.06.25.15.19.14.557700@lordvan.com>

Hi.

I was wondering if you are considering making more than one storage
backend (in particular using axiom).

are you willing to let me have the code (yet)?

Regards

On Sat, 24 Jun 2006 16:22:11 +0200, Adrian Perez wrote:

> 
> Hi!
> 
> This is my first post to the twisted-web mailing list, so let me say
> some words about myself first. Name's Adrian and I'm from Spain. I'm
> studying Computer Science (this one is my fifth year -- I hope to
> graduate soon) and I've always been interested in Python; unfortunately
> there's no much people at my University using it...
> 
> I used to have a website I set up on top of Zope but my homemade
> webserver just blew up two months ago. I've been trying some web
> development frameworks since then because I find Zope too heavy for my
> purposes. After taking a quick look at Django, TurboGears (which I
> found quite interesting) and CherryPy I discovered Nevow -- and decided
> to go on with it. I subscribed to this list some weeks ago but I have
> been just ?hearing? what other people had to say.
> 
> "Thomas Raschbacher" <lordvan@lordvan.com> wrote:
> 
>> so I assume that means that there is no nevow blog yet ..
> 
> Well, it does not exist... ?yet?. I'm currently starting to code a
> weblog using Nevow. I currently have a working prototype with nearly
> no features I made in two afternoons. I'm happy Nevow was quite easy
> to start working with -- my previous experience learning Zope was a
> hell.
> 
> The weblog is named ?Bic? (like a mythical brand of ball pens which
> exists here in Spain, http://www.bicworld.com/), and this is a quick
> summary of the features I want it to have:
> 
>  - reStructuredText for writing posts, and maybe comments too.
>    (http://docutils.sf.net/rst.html)
> 
>  - Data is stored on-disk as flat plaintext files. If this proves being
>    slow, maybe caching pre-rendered reStructuredText and/or having a
>    cache of the filesystem contents is acceptable for me.
> 
>  - Articles are categorized by using ?tags?. I'm not sure how I will
>    blend this with the plaintext storage, but I don't consider this as
>    an important feature.
> 
>  - Support for uploading files (including images, of course).
> 
>  - Serving RSS feeds (of course!)
> 
>  - Support for static pages. This could be as simple as marking an
>    article as static page, or tagging it as ?static? if I manage to add
>    support for tags.
> 
>  - Indexing and searching using Xapian (http://www.xapian.org). I think
>    I will use Divmod's Xapwrap for this.
> 
>  - The current default templates are XHTML 1.0 Strict and CSS 2.0
>    compliant. I want to make them accesible, too (WAI-AA at least).
> 
>  - Support for localization. I've starting adding it some days ago, and
>    I plan to provide english, spanish and galician translations of the
>    user interface.
> 
> Some other features I would like to have (but which I consider less
> important):
> 
>  - Stylesheet may be changed ?on the fly? (e.g. a high contrast
>    stylesheet would useful for people with vision problems if they can
>    select it while browsing).
> 
>  - In the future I would like to extend this to have some special URI
>    segments translated (e.g. using ?/search/foo? in english and
>    ?/buscar/foo? in spanish).
> 
>  - Support for pluggable text converters, so articles may be written
>    not only in reStructuredText (e.g. wiki syntax, plain ol' HTML...)
> 
>  - Some XML-RPC APIs, so posts may be done from blogging clients. 
> 
>  - ...some other?
> 
> Currently I'm using Python 2.4, Twisted 2.4, Twisted-Web 0.6, Docutils
> 0.4 and Nevow 0.8 as development environment.
> 
> Of course, all comments, proposals, etc. are welcome. I can notify you
> of my progress on this list, if you want.
> 
> Cheers,



From moebius.lists at gmail.com  Sun Jun 25 11:54:19 2006
From: moebius.lists at gmail.com (Adrian Perez)
Date: Sun Jun 25 11:58:11 2006
Subject: [Twisted-web] Re: OSS Nevow blog ?
In-Reply-To: <pan.2006.06.25.15.19.14.557700@lordvan.com>
References: <D143727A-EC1B-425D-8974-F4B221A26AA4@urbanape.com>
	<20060622193756.29014.1889045091.divmod.quotient.7098@ohm>
	<10956.83.67.126.41.1151063452.squirrel@83.67.126.41>
	<20060624162211.03e96ae8@tron.foobar.homeunix.org>
	<pan.2006.06.25.15.19.14.557700@lordvan.com>
Message-ID: <20060625185419.71e7b924@tron.foobar.homeunix.org>

On Sun, 25 Jun 2006 16:19:21 +0100
Thomas Raschbacher <lordvan@lordvan.com> wrote:

> I was wondering if you are considering making more than one storage
> backend (in particular using axiom).

The storage is an interface, and I'm coding an implementation of it
which stores data as plaintext files. Alternative implementations for
the storage should be easily pluggable when the API for the storage
system stabilizes (it's in flux at the moment).

I haven't played with Axiom yet, but I was reading those days about
SQLite performance --I was worried about that--, it may be interesting
having support for Axiom. 
 
> are you willing to let me have the code (yet)?

Currently I'm the only one writing code, but two friends of mine are
helping with ideas, testing, etc. We are discussing about how to make
the code publicy available. I'm pretty confident we will set-up a Bzr
repository and a space in some server for packaged snapshots soon.

I have't choose which license I will be using for Bic, but we tend to
favor the MIT/X11 license (which of course is OSS, as you surely know).

Expect more posts to the mailing list as things get done =)

Regards,

P.S: Thanks for the feedback, everyone is invited to opine.

-- 
Adrian Perez
"Experience is what you get when you don't get what you want"
                                           -- (Dan Stanford)

From dialtone at divmod.com  Sun Jun 25 12:38:45 2006
From: dialtone at divmod.com (Valentino Volonghi aka Dialtone)
Date: Sun Jun 25 12:38:49 2006
Subject: [Twisted-web] Re: OSS Nevow blog ?
In-Reply-To: <pan.2006.06.25.15.19.14.557700@lordvan.com>
Message-ID: <20060625173845.29014.1368031829.divmod.quotient.10304@ohm>

On Sun, 25 Jun 2006 16:19:21 +0100, Thomas Raschbacher <lordvan@lordvan.com> wrote:
>Hi.
>
>I was wondering if you are considering making more than one storage
>backend (in particular using axiom).
>
>are you willing to let me have the code (yet)?

Notice that one of the many examples that nevow ships with is actually a blog based on Axiom with xmlrpc and smtp APIs (blogengine).

Other notable examples include an image uploader and a news application with xmlrpc insertion (postit).

All based on Axiom.

HTH

From exarkun at divmod.com  Sun Jun 25 12:38:53 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sun Jun 25 12:38:57 2006
Subject: [Twisted-web] Re: OSS Nevow blog ?
In-Reply-To: <20060625185419.71e7b924@tron.foobar.homeunix.org>
Message-ID: <20060625173853.29014.1066056879.divmod.quotient.10305@ohm>

On Sun, 25 Jun 2006 18:54:19 +0200, Adrian Perez <moebius.lists@gmail.com> wrote:
>On Sun, 25 Jun 2006 16:19:21 +0100
>Thomas Raschbacher <lordvan@lordvan.com> wrote:
>
>> I was wondering if you are considering making more than one storage
>> backend (in particular using axiom).
>
>The storage is an interface, and I'm coding an implementation of it
>which stores data as plaintext files. Alternative implementations for
>the storage should be easily pluggable when the API for the storage
>system stabilizes (it's in flux at the moment).
>
>I haven't played with Axiom yet, but I was reading those days about
>SQLite performance --I was worried about that--, it may be interesting
>having support for Axiom.

Axiom performance may become an issue when you have a billion blog
posts.  Probably not before that, though.

Jean-Paul

From aleuser at inwind.it  Sun Jun 25 13:24:30 2006
From: aleuser at inwind.it (Alessandro)
Date: Sun Jun 25 13:20:07 2006
Subject: [Twisted-web] error compiling twisted from svn
In-Reply-To: <20060625185419.71e7b924@tron.foobar.homeunix.org>
References: <D143727A-EC1B-425D-8974-F4B221A26AA4@urbanape.com>	<20060622193756.29014.1889045091.divmod.quotient.7098@ohm>	<10956.83.67.126.41.1151063452.squirrel@83.67.126.41>	<20060624162211.03e96ae8@tron.foobar.homeunix.org>	<pan.2006.06.25.15.19.14.557700@lordvan.com>
	<20060625185419.71e7b924@tron.foobar.homeunix.org>
Message-ID: <449ED4DE.2010608@inwind.it>

Hi,
 I can't compile twisted from svn any more. Since few weeks ago 
compilation process gives me the following error:

#python2.4 setup.py build
...
...
copying twisted/web/woven/simpleguard.py -> build/lib/twisted/web/woven
copying twisted/web/woven/controller.py -> build/lib/twisted/web/woven
copying twisted/web/woven/interfaces.py -> build/lib/twisted/web/woven
copying twisted/web/woven/flashconduit.py -> build/lib/twisted/web/woven
running build_scripts
error: Is a directory
Error: Subprocess exited with result 1 for project web

I have check the revision: the problem appeared with rev. 17027, no 
problem with the 17026.
What could be appened? Does anybody else have this problem?

# svn update -r 17027   [ from 17026 ]
U  win32/twisted_postinstall.py
U  win32/twistenv.bat
U  twisted/python/_twisted_zsh_stub
D  twisted/python/zsh/_websetroot
U  twisted/python/zshcomp.py
D  twisted/web/scripts
D  doc/web/man/websetroot.1
D  bin/web
Updated to revision 17027.


Thanks
Alessandro

From radix at twistedmatrix.com  Sun Jun 25 13:34:47 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sun Jun 25 13:34:50 2006
Subject: [Twisted-web] error compiling twisted from svn
In-Reply-To: <449ED4DE.2010608@inwind.it>
References: <D143727A-EC1B-425D-8974-F4B221A26AA4@urbanape.com>
	<20060622193756.29014.1889045091.divmod.quotient.7098@ohm>
	<10956.83.67.126.41.1151063452.squirrel@83.67.126.41>
	<20060624162211.03e96ae8@tron.foobar.homeunix.org>
	<pan.2006.06.25.15.19.14.557700@lordvan.com>
	<20060625185419.71e7b924@tron.foobar.homeunix.org>
	<449ED4DE.2010608@inwind.it>
Message-ID: <60ed19d40606251134s20f9c86dj63b69f825e634da8@mail.gmail.com>

This should be fixed momentarily (the fix is currently in a branch).

On 6/25/06, Alessandro <aleuser@inwind.it> wrote:
> Hi,
>  I can't compile twisted from svn any more. Since few weeks ago
> compilation process gives me the following error:
>
> #python2.4 setup.py build
> ...
> ...
> copying twisted/web/woven/simpleguard.py -> build/lib/twisted/web/woven
> copying twisted/web/woven/controller.py -> build/lib/twisted/web/woven
> copying twisted/web/woven/interfaces.py -> build/lib/twisted/web/woven
> copying twisted/web/woven/flashconduit.py -> build/lib/twisted/web/woven
> running build_scripts
> error: Is a directory
> Error: Subprocess exited with result 1 for project web
>
> I have check the revision: the problem appeared with rev. 17027, no
> problem with the 17026.
> What could be appened? Does anybody else have this problem?
>
> # svn update -r 17027   [ from 17026 ]
> U  win32/twisted_postinstall.py
> U  win32/twistenv.bat
> U  twisted/python/_twisted_zsh_stub
> D  twisted/python/zsh/_websetroot
> U  twisted/python/zshcomp.py
> D  twisted/web/scripts
> D  doc/web/man/websetroot.1
> D  bin/web
> Updated to revision 17027.
>
>
> Thanks
> Alessandro
>
> _______________________________________________
> Twisted-web mailing list
> Twisted-web@twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web
>


-- 
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/

From aleuser at inwind.it  Sun Jun 25 14:01:56 2006
From: aleuser at inwind.it (Alessandro)
Date: Sun Jun 25 13:57:32 2006
Subject: [Twisted-web] error compiling twisted from svn
In-Reply-To: <60ed19d40606251134s20f9c86dj63b69f825e634da8@mail.gmail.com>
References: <D143727A-EC1B-425D-8974-F4B221A26AA4@urbanape.com>	<20060622193756.29014.1889045091.divmod.quotient.7098@ohm>	<10956.83.67.126.41.1151063452.squirrel@83.67.126.41>	<20060624162211.03e96ae8@tron.foobar.homeunix.org>	<pan.2006.06.25.15.19.14.557700@lordvan.com>	<20060625185419.71e7b924@tron.foobar.homeunix.org>	<449ED4DE.2010608@inwind.it>
	<60ed19d40606251134s20f9c86dj63b69f825e634da8@mail.gmail.com>
Message-ID: <449EDDA4.3050007@inwind.it>

Christopher Armstrong wrote:

> This should be fixed momentarily (the fix is currently in a branch).

Ok, thanks.
For the moment I'll continue with the rev. 17026

Alessandro

From lordvan at lordvan.com  Mon Jun 26 07:30:24 2006
From: lordvan at lordvan.com (Thomas Raschbacher)
Date: Mon Jun 26 07:30:59 2006
Subject: [Twisted-web] Re: Re: OSS Nevow blog ?
References: <pan.2006.06.25.15.19.14.557700@lordvan.com>
	<20060625173845.29014.1368031829.divmod.quotient.10304@ohm>
Message-ID: <pan.2006.06.26.12.30.19.300515@lordvan.com>

Hi.

I had a look at it already it is quite nice actually (rather simple w/o
auth,.. but not bad and quite easy to understand ;)
I was just wondering if anyone took that further already.

btw. Axiom currently uses sqlite but in theory can support other backends
right? (postgres, mysql,.. even plain text files - if someone is bored
enough to implement it) right?

Regards

 On Sun, 25 Jun 2006
19:38:45 +0200, Valentino Volonghi aka Dialtone wrote:

> On Sun, 25 Jun 2006 16:19:21 +0100, Thomas Raschbacher <lordvan@lordvan.com> wrote:
>>Hi.
>>
>>I was wondering if you are considering making more than one storage
>>backend (in particular using axiom).
>>
>>are you willing to let me have the code (yet)?
> 
> Notice that one of the many examples that nevow ships with is actually a blog based on Axiom with xmlrpc and smtp APIs (blogengine).
> 
> Other notable examples include an image uploader and a news application with xmlrpc insertion (postit).
> 
> All based on Axiom.
> 
> HTH

-- 
-----BEGIN GEEK CODE BLOCK-----
GCS/CC/E/M/MU/S d- s: a--- C++++(++) UL++++ P+ L++++ E W+++ N+++ o-- K w-- O
M-- V- PS+ PE-- Y++ PGP+++ t+++ 5+ X- R tv b++++ DI- D+ G++ e-->+++++ h-- !r
z- 
------END GEEK CODE BLOCK------



From glyph at divmod.com  Mon Jun 26 08:05:06 2006
From: glyph at divmod.com (glyph@divmod.com)
Date: Mon Jun 26 08:05:08 2006
Subject: [Twisted-web] Re: Re: OSS Nevow blog ?
In-Reply-To: <pan.2006.06.26.12.30.19.300515@lordvan.com>
Message-ID: <20060626130506.29014.936381641.divmod.quotient.11211@ohm>



On Mon, 26 Jun 2006 13:30:24 +0100, Thomas Raschbacher <lordvan@lordvan.com> wrote:

>btw. Axiom currently uses sqlite but in theory can support other backends
>right? (postgres, mysql,.. even plain text files - if someone is bored
>enough to implement it) right?

Yes, and it is actually getting easier all the time to do that.  Recently I merged the fix for ticket 400, which was a major blocker.  Probably off-topic for this list though :).

From moebius.lists at gmail.com  Mon Jun 26 09:34:15 2006
From: moebius.lists at gmail.com (Adrian Perez)
Date: Mon Jun 26 09:34:18 2006
Subject: [Twisted-web] Re: OSS Nevow blog ?
In-Reply-To: <20060625185419.71e7b924@tron.foobar.homeunix.org>
References: <D143727A-EC1B-425D-8974-F4B221A26AA4@urbanape.com>
	<20060622193756.29014.1889045091.divmod.quotient.7098@ohm>
	<10956.83.67.126.41.1151063452.squirrel@83.67.126.41>
	<20060624162211.03e96ae8@tron.foobar.homeunix.org>
	<pan.2006.06.25.15.19.14.557700@lordvan.com>
	<20060625185419.71e7b924@tron.foobar.homeunix.org>
Message-ID: <4f507c000606260734q703b477bva399e91485c2543d@mail.gmail.com>

On 6/25/06, Adrian Perez <moebius.lists@gmail.com> wrote:

> I have't choose which license I will be using for Bic, but we tend to
> favor the MIT/X11 license (which of course is OSS, as you surely know).

We have talked today about this: it will be under the MIT license. I
will try to make the repository publicy available tomorrow; but I
can't promise anything, I'm having two exams tomorrow...

Best regards,

--
Adrian Perez

From glyph at divmod.com  Mon Jun 26 12:33:57 2006
From: glyph at divmod.com (glyph@divmod.com)
Date: Mon Jun 26 12:34:04 2006
Subject: [Twisted-web] Re: OSS Nevow blog ?
In-Reply-To: <4f507c000606260734q703b477bva399e91485c2543d@mail.gmail.com>
Message-ID: <20060626173357.29014.1150336967.divmod.quotient.11447@ohm>

On Mon, 26 Jun 2006 16:34:15 +0200, Adrian Perez <moebius.lists@gmail.com> wrote:
>On 6/25/06, Adrian Perez <moebius.lists@gmail.com> wrote:
>>I have't choose which license I will be using for Bic, but we tend to
>>favor the MIT/X11 license (which of course is OSS, as you surely know).
>
>We have talked today about this: it will be under the MIT license. I
>will try to make the repository publicy available tomorrow; but I
>can't promise anything, I'm having two exams tomorrow...

I guess I should also mention that there is a prototype of a combination blog/wiki/forum thing in Divmod; Hyperbola.

I haven't said anything about it yet because it is only a "model" right now, and most of the work for a blog or whatever goes into the "view", but of course, patches are accepted :)

    http://divmod.org/trac/browser/trunk/Hyperbola


From alengarbage at yahoo.com  Mon Jun 26 16:12:44 2006
From: alengarbage at yahoo.com (Lenny G Arbage)
Date: Mon Jun 26 16:12:47 2006
Subject: [Twisted-web] http.HTTPFactory(site) equivalent in web2.0.2?
Message-ID: <20060626211244.35288.qmail@web31507.mail.mud.yahoo.com>

I previously used the following code with TwistedWeb2
0.1:

    site = server.Site(Toplevel())
    reactor.listenTCP(1080, http.HTTPFactory(site))
    reactor.run()

This no longer works in 2.0.2.  If I replace
http.HTTPFactory with channel.HTTPFactory or
channel.http.HTTPFactory, I don't get errors, but I
get "405 Method Not Allowed" for any URL Resource I
try to visit.

What is the proper way to do the above in 2.0.2?

Thanks,
Lenny

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From dreid at dreid.org  Mon Jun 26 16:28:41 2006
From: dreid at dreid.org (David Reid)
Date: Mon Jun 26 16:28:48 2006
Subject: [Twisted-web] http.HTTPFactory(site) equivalent in web2.0.2?
In-Reply-To: <20060626211244.35288.qmail@web31507.mail.mud.yahoo.com>
References: <20060626211244.35288.qmail@web31507.mail.mud.yahoo.com>
Message-ID: <44A05189.1040202@dreid.org>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Lenny G Arbage wrote:
> I previously used the following code with TwistedWeb2
> 0.1:
> 
>     site = server.Site(Toplevel())
>     reactor.listenTCP(1080, http.HTTPFactory(site))
>     reactor.run()
> 
> This no longer works in 2.0.2.  If I replace
> http.HTTPFactory with channel.HTTPFactory or
> channel.http.HTTPFactory, I don't get errors, but I
> get "405 Method Not Allowed" for any URL Resource I
> try to visit.
> 
> What is the proper way to do the above in 2.0.2?

channel.HTTPFactory(server.Site(rootresource)) is the proper way, and
I've just verified that it works on web2 0.2 (it's not 2.0.2.)  Without
seeing the implementation of TopLevel I don't have a clue what the
problem might be, except for some error on your part.

- -David

- --
"Usually the protocol is this: I appoint someone for a task,
which they are not qualified to do.  Then, they have to fight
a bear if they don't want to do it." -- Glyph Lefkowitz
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.3 (Darwin)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFEoFGJrsrO6aeULcgRAgrCAJ4nAIw29r7vYSNNz8pjlLVST7804ACeIXAO
TeTjw59qbKrjtyDd9iKcxzU=
=QCDk
-----END PGP SIGNATURE-----

From alengarbage at yahoo.com  Mon Jun 26 17:39:24 2006
From: alengarbage at yahoo.com (Lenny G Arbage)
Date: Mon Jun 26 17:39:27 2006
Subject: [Twisted-web] Re: http.HTTPFactory(site) equivalent in web2.0.2?
Message-ID: <20060626223924.31733.qmail@web31501.mail.mud.yahoo.com>

> channel.HTTPFactory(server.Site(rootresource)) is
the
> proper way, and
> I've just verified that it works on web2 0.2 (it's
not
> 2.0.2.)  Without seeing the implementation of 
> TopLevel I don't have a clue what the problem might
> be, except for some error on your part.


  It looks like it actually ended up being changes in
the format of request.files that tripped everything
up.  With your tip, I was able to get it working
again.

  I'm now running into file size limitations, however.
 It looks like when a file larger than about 10M is
uploaded via a post form, the transfer hangs.

  On the client side, roughly 560K is written before
the socket is blocked and the client can no longer
send.  On the server side, the post never gets into my
render() method.

  Files of size 9M and smaller work fine.

  While the big file client's write is blocked, other
clients can still access the server and upload [small]
files.

  I get the same behavior whether I use Firefox or
python's httplib as the client.

  This behavior isn't new in 0.2 -- I upgraded from
0.1 hoping it would be fixed.

  I'll see if I can't dig in and find where this is
happening, but if you have any pointers, fabulous.

Thanks,
Lenny

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From dreid at dreid.org  Mon Jun 26 18:00:28 2006
From: dreid at dreid.org (David Reid)
Date: Mon Jun 26 18:00:35 2006
Subject: [Twisted-web] Re: http.HTTPFactory(site) equivalent in web2.0.2?
In-Reply-To: <20060626223924.31733.qmail@web31501.mail.mud.yahoo.com>
References: <20060626223924.31733.qmail@web31501.mail.mud.yahoo.com>
Message-ID: <44A0670C.4030207@dreid.org>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Lenny G Arbage wrote:r part.
>   It looks like it actually ended up being changes in
> the format of request.files that tripped everything
> up.  With your tip, I was able to get it working
> again.

Good.

>   I'm now running into file size limitations, however.
>  It looks like when a file larger than about 10M is
> uploaded via a post form, the transfer hangs.
> 
>   On the client side, roughly 560K is written before
> the socket is blocked and the client can no longer
> send.  On the server side, the post never gets into my
> render() method.
> 
>   Files of size 9M and smaller work fine.
> 
>   While the big file client's write is blocked, other
> clients can still access the server and upload [small]
> files.
> 
>   I get the same behavior whether I use Firefox or
> python's httplib as the client.
> 
>   This behavior isn't new in 0.2 -- I upgraded from
> 0.1 hoping it would be fixed.

Did you create a bug about it when you found it in 0.1?  If not could
you?  Because I didn't know about any such issue, and I'm guessing
neither did anyone else.  Assign it to me and I'll look into it this
evening after work (any code you have to reproduce such an issue would
be helpful it doesn't necessarily have to be in the form of a unittest
but if you can do that it'd be awesome.)

>   I'll see if I can't dig in and find where this is
> happening, but if you have any pointers, fabulous.

I'll let you know if I can think of anything.

- -David

- --
"Usually the protocol is this: I appoint someone for a task,
which they are not qualified to do.  Then, they have to fight
a bear if they don't want to do it." -- Glyph Lefkowitz
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.3 (Darwin)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFEoGcMrsrO6aeULcgRAukSAJ90NWlK0S0j7zQEeJF2Z/SVr42lwwCggN2G
slD69wtJND1idqmdHH07FGw=
=c5CI
-----END PGP SIGNATURE-----

From dreid at dreid.org  Mon Jun 26 18:24:56 2006
From: dreid at dreid.org (David Reid)
Date: Mon Jun 26 18:25:02 2006
Subject: [Twisted-web] Bay Area Twisted sprint.
Message-ID: <44A06CC8.4040006@dreid.org>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hello there,
  I'm attempting to think about possibly organizing a Twisted sprint
(focus on closing bugs) in the San Francisco/Bay Area for mid to late
July.  I know there are quite a few Twisted committers who are in the
area and I've approached some of them to gather preliminary information
regarding availability and interest.  There are also some people in town
for the summer for various reasons who've expressed interest.  So this
is an open invitation to every on twisted-python and twisted-web who is
in the bay area (or willing to travel to the bay area) for a weekend
sprint.  I need a rough approximation of how many people will actually
be able to make it so that I can attempt to locate a place to hold the
sprint.

  So if you're interested email me with your availability for the
weekends of the 15-16, 22-23, 29-30.  Basically I'll take the weekend
with the most available participants and start fishing around for a
location.

  Alternatively if you would like to host the sprint at your large
private estate or successful corporate offices you can contact me as
well with your preference for any of the above dates and some details
about the facilities you can provide.  (Close proximity to a caffeine
dispensary and reliable unrestrictive internet access are a must.  Comfy
chairs a plus.)

- -David Reid

- --
"Usually the protocol is this: I appoint someone for a task,
which they are not qualified to do.  Then, they have to fight
a bear if they don't want to do it." -- Glyph Lefkowitz
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.3 (Darwin)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFEoGzIrsrO6aeULcgRAlGmAKCfO9zBU/2UV5mIMXfNHRo7jlyXrACfSDbB
+TQMSPD7uwLnSDV1Ou2H/Qc=
=cWIj
-----END PGP SIGNATURE-----

From moebius.lists at gmail.com  Tue Jun 27 05:49:10 2006
From: moebius.lists at gmail.com (Adrian Perez)
Date: Tue Jun 27 05:49:13 2006
Subject: [Twisted-web] Re: OSS Nevow blog ?
In-Reply-To: <20060626173357.29014.1150336967.divmod.quotient.11447@ohm>
References: <4f507c000606260734q703b477bva399e91485c2543d@mail.gmail.com>
	<20060626173357.29014.1150336967.divmod.quotient.11447@ohm>
Message-ID: <4f507c000606270349r672ba3f6g402719c6efddd1b5@mail.gmail.com>

On 6/26/06, glyph@divmod.com <glyph@divmod.com> wrote:

> I guess I should also mention that there is a prototype of a combination blog/wiki/forum thing in Divmod; Hyperbola.
>
> I haven't said anything about it yet because it is only a "model" right now, and most of the work for a blog or whatever goes into the "view", but of course, patches are accepted :)
>
>     http://divmod.org/trac/browser/trunk/Hyperbola

I downloaded the trunk from SVN some days ago, but haven't had time to
take a look at it yet... it may serve as inspiration as well. Also, I
haven't tried to make anything which runs on Mantissa, but the concept
looks interesting.

I started coding Bic because I wanted to learn how to develope
applications with Nevow from the ground up. I think starting with
Mantissa directly would be somewhat heavy to understand as I haven't
used anything based upon Twisted before. So my (small?) project is
Just For Fun(tm).

Cheers,

--
Adrian Perez

From alengarbage at yahoo.com  Tue Jun 27 10:52:39 2006
From: alengarbage at yahoo.com (Lenny G Arbage)
Date: Tue Jun 27 10:52:42 2006
Subject: [Twisted-web] large file upload in web2 (was Re:
	http.HTTPFactory(site) equivalent in web2.0.2?)
Message-ID: <20060627155239.39351.qmail@web31515.mail.mud.yahoo.com>

> Did you create a bug about it when you found it in
> 0.1? If not could you?  Because I didn't know about
> any such issue, and I'm guessing neither did
> anyone else. Assign it to me and I'll look into it
> this evening after work (any code you have to
> reproduce such an issue would be helpful it doesn't
> necessarily have to be in the form of a unittest
> but if you can do that it'd be awesome.)

  I just found it yesterday (in 0.1) and thought I
should upgrade to 0.2 before bugging anyone about it. 
I'd be happy to create a bug, but I have no idea how
to do that ("TICKET_CREATE privileges are required to
perform this operation", and I haven't been able to
get myself over the wall of "where are the
instructions on getting an account or gaining those
privileges?")

  Here, though, is a simple example illustrating the
problem:

#!/usr/bin/python

import os
from twisted.internet import reactor
from twisted.web2 import server, http, resource,\
    channel
from twisted.web2 import http_headers, responsecode
from twisted.web2 import iweb

SAVEDIR = "/tmp"
READSIZE=8192

class UploadFile(resource.PostableResource):
    def render(self, ctx):
        request = iweb.IRequest(ctx)
        filename = request.files['filename'][0][0]
        file = request.files['filename'][0][2]

        dest = os.path.join(SAVEDIR, filename)
        destfile = open(dest, 'wb')
        tot = 0
        while True:
            buf = file.read(READSIZE)
            tot = tot + READSIZE
            print "reading %d..." % tot
            if buf == '':
                break
            destfile.write(buf)
        destfile.close()
        file.close()

        msg = "saved %s to %s" % (filename, dest)
        print msg
        return http.Response(stream="%s" % msg)

class Toplevel(resource.Resource):
    addSlash = True
    def render(self, ctx):
        return http.Response(responsecode.OK,
                {'content-type':
http_headers.MimeType('text', 'html')},
                "Hello")

    child_uploadfile = UploadFile()

if __name__ == "__main__":
    site = server.Site(Toplevel())
    reactor.listenTCP(1080, channel.HTTPFactory(site))
    reactor.run()


  Run this script, then upload a file to it with the
client of your choice.  Here is an html form which you
can use to do that:

<html>
    <form action="http://localhost:1080/uploadfile"
            enctype="multipart/form-data"
            method="post">
        filename: <input type="file" name="filename">
        <input type="submit" value="submit">
    </form>
</html>

  You should be able to upload files smaller than 9M
without any problem, and files larger than 10M not at
all.

  I can send you an httplib client as well, but at
least this should be enough to get you started.

  I'll go try again, now, to figure out how to get
this filed properly in Trac (and maybe even as a
unittest!).

  Thanks!
  Lenny

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From dreid at dreid.org  Tue Jun 27 12:26:38 2006
From: dreid at dreid.org (David Reid)
Date: Tue Jun 27 12:26:48 2006
Subject: [Twisted-web] large file upload in web2 (was
	Re:	http.HTTPFactory(site) equivalent in web2.0.2?)
In-Reply-To: <20060627155239.39351.qmail@web31515.mail.mud.yahoo.com>
References: <20060627155239.39351.qmail@web31515.mail.mud.yahoo.com>
Message-ID: <44A16A4E.5060305@dreid.org>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Lenny G Arbage wrote:
>   I just found it yesterday (in 0.1) and thought I
> should upgrade to 0.2 before bugging anyone about it. 
> I'd be happy to create a bug, but I have no idea how
> to do that ("TICKET_CREATE privileges are required to
> perform this operation", and I haven't been able to
> get myself over the wall of "where are the
> instructions on getting an account or gaining those
> privileges?")

There is a register link.

>   Here, though, is a simple example illustrating the
> problem:
<snip>
>         while True:
>             buf = file.read(READSIZE)
>             tot = tot + READSIZE
>             print "reading %d..." % tot
>             if buf == '':
>                 break
>             destfile.write(buf)
<snip>

Ok, while True is bad and blocking.  I think you should look at
twisted.web2.static.FileSaver, if it doesn' perform a function close
enough to what you want it is a good example of the right way to handle
uploaded files as far as reading. (Hint it's to use things in the
twisted.web2.stream library)  I expect your problems will go away but
you might still want to file a documentation enhancement bug stating
that how to do this kind of thing is completely undocumented.

- -David

- --
"Usually the protocol is this: I appoint someone for a task,
which they are not qualified to do.  Then, they have to fight
a bear if they don't want to do it." -- Glyph Lefkowitz
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.3 (Darwin)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFEoWpOrsrO6aeULcgRAobuAJ9CA1PoKAmif/TQyFkzBqTs7/Eh8ACcC6ZZ
lSOcEyK/Wf9Qy3HDlIajmYo=
=LvK0
-----END PGP SIGNATURE-----

From foom at fuhm.net  Tue Jun 27 12:35:51 2006
From: foom at fuhm.net (James Y Knight)
Date: Tue Jun 27 12:36:13 2006
Subject: [Twisted-web] large file upload in web2 (was Re:
	http.HTTPFactory(site) equivalent in web2.0.2?)
In-Reply-To: <20060627155239.39351.qmail@web31515.mail.mud.yahoo.com>
References: <20060627155239.39351.qmail@web31515.mail.mud.yahoo.com>
Message-ID: <7F071668-5463-40DC-8FD1-124E1DFBA3AF@fuhm.net>


On Jun 27, 2006, at 11:52 AM, Lenny G Arbage wrote:

>> Did you create a bug about it when you found it in
>> 0.1? If not could you?  Because I didn't know about
>> any such issue, and I'm guessing neither did
>> anyone else. Assign it to me and I'll look into it
>> this evening after work (any code you have to
>> reproduce such an issue would be helpful it doesn't
>> necessarily have to be in the form of a unittest
>> but if you can do that it'd be awesome.)
>
>   I just found it yesterday (in 0.1) and thought I
> should upgrade to 0.2 before bugging anyone about it.

The failing with > 10MB is intentional, but the hanging is not. It's  
supposed to return an error response to the client. In fileupload.py: 
233, parseMultipartFormData has arguments which limit the number of  
fields and the size of the uploaded data. The default limit for size  
is 10MB.

Unfortunately, it looks like there is no way to pass in different  
limits to fileupload.parseMultipartFormData from where it's called in  
server.parsePOSTData.

So there's two bugs here:
1) hangs instead of returning a response.
2) limit is not configurable.

James


From nico at tekNico.net  Tue Jun 27 13:00:21 2006
From: nico at tekNico.net (Nicola Larosa)
Date: Tue Jun 27 13:00:37 2006
Subject: [Twisted-web] Creating tickets in Trac (was: Re: large file upload
 in web2 (was Re: http.HTTPFactory(site) equivalent in web2.0.2?))
In-Reply-To: <20060627155239.39351.qmail@web31515.mail.mud.yahoo.com>
References: <20060627155239.39351.qmail@web31515.mail.mud.yahoo.com>
Message-ID: <44A17235.20001@tekNico.net>

> I'd be happy to create a bug, but I have no idea how
> to do that ("TICKET_CREATE privileges are required to
> perform this operation", and I haven't been able to
> get myself over the wall of "where are the
> instructions on getting an account or gaining those
> privileges?")

Ticket creation is disabled for anonymous visitors, but enabled for all
registered accounts: just use the "Register" account on the upper right.

After you do that, you may want to click on the "User Configuration" link
nearby, and insert a valid email. Then, by using your login name in the Cc:
ticket field, you will receive email at each ticket change.

For anonymous visitors, the "New Ticket" link is not shown; you possibly
got the above error by directly going to the URL:

http://twistedmatrix.com/trac/newticket

while not logged in.

-- 
Nicola Larosa - http://www.tekNico.net/

Implementation of Microsoft SOAP, a protocol running over HTTP
precisely so it could bypass firewalls, should be withdrawn.
[...] It is exactly this feature-above-security mindset
that needs to go. -- Bruce Schneier, February 2002



From alengarbage at yahoo.com  Tue Jun 27 15:48:58 2006
From: alengarbage at yahoo.com (Lenny G Arbage)
Date: Tue Jun 27 15:49:01 2006
Subject: [Twisted-web] large file upload in web2 (was Re:
	http.HTTPFactory(site) equivalent in web2.0.2?)
Message-ID: <20060627204858.16080.qmail@web31501.mail.mud.yahoo.com>

David Reid wrote:
> Ok, while True is bad and blocking.  I
> think you should look at
> twisted.web2.static.FileSaver, if it
> doesn' perform a function close enough
> to what you want it is a good example
> of the right way to handle uploaded
> files as far as reading. (Hint it's to
> use things in the twisted.web2.stream
> library)  I expect your problems will
> go away

  Thanks for pointing this out.  The stream classes
look really cool.

  So I replaced my bad 'while True' blocking code with
the following:

        filestream = stream.FileStream(file)
        dest = os.path.join(SAVEDIR,filename)
        destfile = os.fdopen(os.open(dest,
            os.O_WRONLY | os.O_CREAT | os.O_EXCL,
            0644), 'w', 0)
        stream.readIntoFile(filestream, destfile)

  And this works great -- but only for files smaller
than 10M.  It looks like files >10M still produce the
hang -- same behavior as before.


> but you might still want to
> file a documentation enhancement bug
> stating that how to do this kind of
> thing is completely undocumented.

  I'll file tickets for both of these, to try to stop
cluttering the mailing list with these issues.

Thanks,
Lenny

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From glyph at divmod.com  Tue Jun 27 16:57:27 2006
From: glyph at divmod.com (glyph@divmod.com)
Date: Tue Jun 27 16:57:32 2006
Subject: [Twisted-web] large file upload in web2 (was Re:
	http.HTTPFactory(site) equivalent in web2.0.2?)
In-Reply-To: <20060627204858.16080.qmail@web31501.mail.mud.yahoo.com>
Message-ID: <20060627215727.29014.143347037.divmod.quotient.12888@ohm>



On Tue, 27 Jun 2006 13:48:58 -0700 (PDT), Lenny G Arbage <alengarbage@yahoo.com> wrote:

>  The stream classes look really cool.

Please note that the stream classes will be going away before final release of web2.  This is one of the consequences of its instability :).  Twisted has other mechanisms for dealing with objects which produce arbitrary amounts of data incrementally, though (one might say that's all Twisted *is*, in fact) and the general idea of waiting for callbacks to produce or consume data will remain.

From fractalgfx at gmail.com  Tue Jun 27 17:28:40 2006
From: fractalgfx at gmail.com (Michael Robinson)
Date: Tue Jun 27 17:28:43 2006
Subject: [Twisted-web] New WebDAV implementation that can run on web2
Message-ID: <a5094ed90606271528i3688d142g3e9f7c698ad1dbeb@mail.gmail.com>

My project, NoDAV (http://nodav.python-hosting.com/), is a framework
for developing WebDAV applications in Python. NoDAV includes an
example WSGI server running on web2.

NoDAV is not tied to any specific web framework and should integrate
integrate into any HTTP1.1 framework with ~100-150 of lines of NoDAV
related code.

I don't know if advantagers there would be a major advantage to
implementing NoDAV directly on top of the Twisted API instead of WSGI,
but it would be a trivial task for anyone familiar with Twisted (which
I'm not).

From dreid at dreid.org  Tue Jun 27 18:01:57 2006
From: dreid at dreid.org (David Reid)
Date: Tue Jun 27 18:02:04 2006
Subject: [Twisted-web] New WebDAV implementation that can run on web2
In-Reply-To: <a5094ed90606271528i3688d142g3e9f7c698ad1dbeb@mail.gmail.com>
References: <a5094ed90606271528i3688d142g3e9f7c698ad1dbeb@mail.gmail.com>
Message-ID: <44A1B8E5.7020802@dreid.org>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Michael Robinson wrote:
> My project, NoDAV (http://nodav.python-hosting.com/), is a framework
> for developing WebDAV applications in Python. NoDAV includes an
> example WSGI server running on web2.
> 
> NoDAV is not tied to any specific web framework and should integrate
> integrate into any HTTP1.1 framework with ~100-150 of lines of NoDAV
> related code.
> 
> I don't know if advantagers there would be a major advantage to
> implementing NoDAV directly on top of the Twisted API instead of WSGI,
> but it would be a trivial task for anyone familiar with Twisted (which
> I'm not).

I have to ask, did you find something specifically or particularly
unsuitable about the twisted.web2.dav module?  Obviously there is a
place for a DAV server/framework not specific to Twisted (assuming you
believe there is a place for something that isn't specific to Twisted in
any area,) but your original post appears to indicate that this is a
mere implementation detail.  I suspect that there may be some features
that would be difficult if not impossible to implement without closer
integration with the server (such as WebDAV ACLs.)

- -David

- --
"Usually the protocol is this: I appoint someone for a task,
which they are not qualified to do.  Then, they have to fight
a bear if they don't want to do it." -- Glyph Lefkowitz
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.3 (Darwin)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFEobjkrsrO6aeULcgRAmVxAJ0Xs8py25gNHrz2m4toTcOeVT4lEQCfW9b3
eu/HYGyoYtLf8UEyDYxID+g=
=dXG8
-----END PGP SIGNATURE-----

From dan+twisted at catolabs.org  Wed Jun 28 12:54:54 2006
From: dan+twisted at catolabs.org (Dan Aronson)
Date: Wed Jun 28 12:54:47 2006
Subject: [Twisted-web] guard, mind and component questions
Message-ID: <44A2C26E.9000505@catolabs.org>

I've been using nevow on a project and I think I'm doing something 
cleaner than is in all of the examples (and the examples) that I've seen 
on the net, so I'm wondering if I'm missing something.

All of the examples that keep state do it in the component of the guard 
session.  For my code I'm instead keeping state in the mind.  I find 
this better for two reasons:
  1) I don't have to create an interface class for my state
  2) I don't have to make sure that my state gets cleaned up after 
logout (or new login), since the mind factory gets reinstanced anyway, 
and Ican just rely on python garbage collecting the old state information.

Of course when thinking about it, my assumption is that mind is called 
"mind" for this very reason.

Could any of you experienced nevow users/implementors tell me if I'm 
missing something?

--dan


From matt at pollenation.net  Wed Jun 28 17:35:26 2006
From: matt at pollenation.net (Matt Goodall)
Date: Wed Jun 28 17:35:37 2006
Subject: [Twisted-web] Mailing list for Formal
Message-ID: <44A3042E.9000800@pollenation.net>

Hi,

I've been getting quite a few requests for help with Formal for some 
time now so I (finally!) got round to creating a mailing list for it.

It's better that help requests go to more than just me because I don't 
always get enough free time to answer questions.

I used Google Groups. I know it's not perfect but, hey, it's easy to set up.

   URL: http://groups.google.com/group/formal-nevow
   Email: formal-nevow@googlegroups.com

I haven't changed the group much from the default so anyone can view the 
group but only members can post and it's unmoderated.

If anyone has strong objections to that configuration then I'm willing 
to listen, but it seems reasonable and will hopefully avoid a bit of spam.

So, I hope to see a few members there soon (I'm going to invite a few 
people I know of to encourage things along).

Cheers, Matt

-- 
      __
     /  \__     Matt Goodall, Pollenation Internet Ltd
     \__/  \    w: http://www.pollenation.net
   __/  \__/    e: matt@pollenation.net
  /  \__/  \    t: +44 (0)113 2252500
  \__/  \__/
  /  \	       Any views expressed are my own and do not necessarily
  \__/          reflect the views of my employer.

From fractalgfx at gmail.com  Wed Jun 28 23:28:29 2006
From: fractalgfx at gmail.com (Michael Robinson)
Date: Wed Jun 28 23:30:13 2006
Subject: [Twisted-web] Re: New WebDAV implementation that can run on web2
In-Reply-To: <44A1B8E5.7020802@dreid.org>
References: <a5094ed90606271528i3688d142g3e9f7c698ad1dbeb@mail.gmail.com>
	<44A1B8E5.7020802@dreid.org>
Message-ID: <e7vktf$4he$1@sea.gmane.org>

Initially I didn't set out to write a full WebDAV implementation, it was 
just a little experiment which kept growing.  Had I been aware of 
web2.dav things might have gone differently.  (Google: "python WebDAV" 
and the first relevant to web2.dav will be on page five, and that page 
actually is about web2.dav's predecessor TwistedDAV.)

I don't know what you mean by "tighter server integration", but I have 
been concerned with the implementations of ACL, but I haven't come up 
with a specific example that would demonstrate a problem.

Even if WSGI does not provide an aqueducts interface, I am confident
that it will still be relatively easy to provide the necessary level of 
integration.

Not that it proves anything, but where are the people criticizing WebDAV 
for being unimplementable using CGI, which I believe would have the same 
problem.


David Reid wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> Michael Robinson wrote:
>> My project, NoDAV (http://nodav.python-hosting.com/), is a framework
>> for developing WebDAV applications in Python. NoDAV includes an
>> example WSGI server running on web2.
>>
>> NoDAV is not tied to any specific web framework and should integrate
>> integrate into any HTTP1.1 framework with ~100-150 of lines of NoDAV
>> related code.
>>
>> I don't know if advantagers there would be a major advantage to
>> implementing NoDAV directly on top of the Twisted API instead of WSGI,
>> but it would be a trivial task for anyone familiar with Twisted (which
>> I'm not).
> 
> I have to ask, did you find something specifically or particularly
> unsuitable about the twisted.web2.dav module?  Obviously there is a
> place for a DAV server/framework not specific to Twisted (assuming you
> believe there is a place for something that isn't specific to Twisted in
> any area,) but your original post appears to indicate that this is a
> mere implementation detail.  I suspect that there may be some features
> that would be difficult if not impossible to implement without closer
> integration with the server (such as WebDAV ACLs.)
> 
> - -David
> 
> - --
> "Usually the protocol is this: I appoint someone for a task,
> which they are not qualified to do.  Then, they have to fight
> a bear if they don't want to do it." -- Glyph Lefkowitz
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.3 (Darwin)
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org
> 
> iD8DBQFEobjkrsrO6aeULcgRAmVxAJ0Xs8py25gNHrz2m4toTcOeVT4lEQCfW9b3
> eu/HYGyoYtLf8UEyDYxID+g=
> =dXG8
> -----END PGP SIGNATURE-----



