<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] bandwidth throttling a web2 server
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20bandwidth%20throttling%20a%20web2%20server&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003613.html">
   <LINK REL="Next"  HREF="003615.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] bandwidth throttling a web2 server</H1>
    <B>Cameron Dale</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20bandwidth%20throttling%20a%20web2%20server&In-Reply-To="
       TITLE="[Twisted-web] bandwidth throttling a web2 server">camrdale at gmail.com
       </A><BR>
    <I>Wed Feb 20 00:50:13 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003613.html">[Twisted-web] HTTPS in Twisted
</A></li>
        <LI>Next message: <A HREF="003615.html">[Twisted-web] Example http client in web2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3614">[ date ]</a>
              <a href="thread.html#3614">[ thread ]</a>
              <a href="subject.html#3614">[ subject ]</a>
              <a href="author.html#3614">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm attempting to limit the bandwidth of a Twisted Web2 server.

I've tried using the twisted htb (token bucket) to limit it, which
didn't work at all (limits it to 0, then no more packets).

Now I'm trying to use the ThrottlingFactory, which I don't think works
for web (one), but I think might work for web2 since it is streaming.
So far I have had some success (it does throttle correctly sometimes),
but I do get the occasional errors from the ThrottlingFactory:

'NoneType' object has no attribute 'resumeProducing' in unthrottleWrites
'NoneType' object has no attribute 'pauseProducing' in throttleWrites
Tried to cancel an already-called event in unregisterProtocol

After the last one, my server was broken and had to be restarted,
though the first 2 errors seemed to have very little effect. Is it not
possible to use the ThrottlingFactory with the web2 server?

Maybe I've missed something obvious, but is there a better way to
limit the bandwidth of a web2 server?

Thanks,
Cameron

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003613.html">[Twisted-web] HTTPS in Twisted
</A></li>
	<LI>Next message: <A HREF="003615.html">[Twisted-web] Example http client in web2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3614">[ date ]</a>
              <a href="thread.html#3614">[ thread ]</a>
              <a href="subject.html#3614">[ subject ]</a>
              <a href="author.html#3614">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
