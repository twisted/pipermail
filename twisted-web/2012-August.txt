From poisonoff at gmail.com  Wed Aug 15 05:26:05 2012
From: poisonoff at gmail.com (=?UTF-8?B?0JDRgNC60LDQtNC40Lkg0JvQtdCy0LjQvQ==?=)
Date: Wed, 15 Aug 2012 15:26:05 +0600
Subject: [Twisted-web] FCGI for twisted.web
Message-ID: <CACgbmJkxVmBXMcwWaG5MVLEeH=vMd0yrcVyYpfYbWfUvDrbDTw@mail.gmail.com>

I want to implement a protocol for FCGI twisted.web. Search did not
help me. It may already have an implementation? If nothing like this,
i will continue its implementation.


From exarkun at twistedmatrix.com  Wed Aug 15 08:19:20 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 15 Aug 2012 12:19:20 -0000
Subject: [Twisted-web] FCGI for twisted.web
In-Reply-To: <CACgbmJkxVmBXMcwWaG5MVLEeH=vMd0yrcVyYpfYbWfUvDrbDTw@mail.gmail.com>
References: <CACgbmJkxVmBXMcwWaG5MVLEeH=vMd0yrcVyYpfYbWfUvDrbDTw@mail.gmail.com>
Message-ID: <20120815121920.26009.1881427125.divmod.xquotient.62@localhost6.localdomain6>

On 09:26 am, poisonoff at gmail.com wrote:
>I want to implement a protocol for FCGI twisted.web. Search did not
>help me. It may already have an implementation? If nothing like this,
>i will continue its implementation.

Some of this code - the web2 fcgi implementation - might help you:

   http://bit.ly/RP4Ufg

Jean-Paul


From poisonoff at gmail.com  Wed Aug 15 09:40:51 2012
From: poisonoff at gmail.com (=?UTF-8?B?0JDRgNC60LDQtNC40Lkg0JvQtdCy0LjQvQ==?=)
Date: Wed, 15 Aug 2012 19:40:51 +0600
Subject: [Twisted-web] FCGI for twisted.web
In-Reply-To: <20120815121920.26009.1881427125.divmod.xquotient.62@localhost6.localdomain6>
References: <CACgbmJkxVmBXMcwWaG5MVLEeH=vMd0yrcVyYpfYbWfUvDrbDTw@mail.gmail.com>
	<20120815121920.26009.1881427125.divmod.xquotient.62@localhost6.localdomain6>
Message-ID: <CACgbmJmdfbAQRETT-52P-S-i50U8JAe4GuiNQ92MJSGLbLifww@mail.gmail.com>

Thank you!

On Wed, Aug 15, 2012 at 6:19 PM,  <exarkun at twistedmatrix.com> wrote:
> On 09:26 am, poisonoff at gmail.com wrote:
>>I want to implement a protocol for FCGI twisted.web. Search did not
>>help me. It may already have an implementation? If nothing like this,
>>i will continue its implementation.
>
> Some of this code - the web2 fcgi implementation - might help you:
>
>    http://bit.ly/RP4Ufg
>
> Jean-Paul
>
> _______________________________________________
> Twisted-web mailing list
> Twisted-web at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web


From forsberg at opera.com  Mon Aug 20 01:34:39 2012
From: forsberg at opera.com (Erik Forsberg)
Date: Mon, 20 Aug 2012 07:34:39 +0200
Subject: [Twisted-web] Timeouts on Agent requests
Message-ID: <5031CC6F.3030309@opera.com>

Hi!

I'm thinking about using Twisted as a http client, talking to some 
rather uncooperative servers that sit on the other side of some really 
crappy parts of the internet. So I need timeouts.

I was looking into t.w.c.Agent, and see that it has a connect timeout 
option, which is good, but lacks request timeouts. Then found 
http://twistedmatrix.com/trac/ticket/4330 which looks like a solution.

I'm a little confused on how to use #4330. Would something like this be 
appropriate:

def main():
     agent = Agent(reactor)
     deferred = agent.request('HEAD', url)
     cancel = reactor.callLater(30, deferred.cancel)
     deferred.addCallback(handle_request)
     deferred.addErrback(handle_errors)

def handle_request(response):
     cancel.cancel()
     <handle response>

def handle_errors(failure):
     <see if failure is CanceledError>

Will this also automatically give me a connection timeout, or should I 
give Agent's constructor connectTimeout as argument and handle that in 
handle_errors too?

I might have totally misunderstood the whole thing too, as I'm a bit new 
to Twisted.

Thanks,
\EF







From forsberg at opera.com  Mon Aug 20 03:17:10 2012
From: forsberg at opera.com (Erik Forsberg)
Date: Mon, 20 Aug 2012 09:17:10 +0200
Subject: [Twisted-web] Timeouts on Agent requests
In-Reply-To: <5031CC6F.3030309@opera.com>
References: <5031CC6F.3030309@opera.com>
Message-ID: <5031E476.90602@opera.com>

On 2012-08-20 07:34, Erik Forsberg wrote:
> Will this also automatically give me a connection timeout, or should I
> give Agent's constructor connectTimeout as argument and handle that in
> handle_errors too?

After some experiments, I think I can answer my own question:

* If you're using a callLater to deferred.cancel only, regardless of 
cause of the timout (connection timeout or request timeout), your 
errback will get ConnectingCancelledError.

* If you use connectTimeout and a delayed call to deferred.cancel, and 
connectTimeout set to a lower value than the callback to 
deferred.cancel, you will get a TimeoutError in your errback if the 
connection times out. This allows you to distuingish between connection 
timeouts and request timeouts.

Regards,
\EF


From glyph at twistedmatrix.com  Mon Aug 20 13:56:15 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 20 Aug 2012 10:56:15 -0700
Subject: [Twisted-web] Timeouts on Agent requests
In-Reply-To: <5031CC6F.3030309@opera.com>
References: <5031CC6F.3030309@opera.com>
Message-ID: <60401380-66EB-4397-8C4E-338A8C6824FE@twistedmatrix.com>


On Aug 19, 2012, at 10:34 PM, Erik Forsberg <forsberg at opera.com> wrote:

> I'm a little confused on how to use #4330.

The best way to use it would be to help get it merged to trunk and integrated into a release :).

It looks like it's awaiting some patches to deal with review feedback at this point.  Perhaps you could attach those to the ticket?

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-web/attachments/20120820/ca286c87/attachment.htm 

