<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Using web2 to run a Cherrpy site
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Using%20web2%20to%20run%20a%20Cherrpy%20site&In-Reply-To=033D1AC8-A6A3-41A7-B420-C311F2CD15F0%40dreid.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003323.html">
   <LINK REL="Next"  HREF="003325.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Using web2 to run a Cherrpy site</H1>
    <B>David Konerding</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Using%20web2%20to%20run%20a%20Cherrpy%20site&In-Reply-To=033D1AC8-A6A3-41A7-B420-C311F2CD15F0%40dreid.org"
       TITLE="[Twisted-web] Using web2 to run a Cherrpy site">dakoner at gmail.com
       </A><BR>
    <I>Tue Mar 20 09:40:08 CST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003323.html">[Twisted-web] Using web2 to run a Cherrpy site
</A></li>
        <LI>Next message: <A HREF="003325.html">[Twisted-web] Using web2 to run a Cherrpy site
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3324">[ date ]</a>
              <a href="thread.html#3324">[ thread ]</a>
              <a href="subject.html#3324">[ subject ]</a>
              <a href="author.html#3324">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 3/20/07, David Reid &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">dreid at dreid.org</A>&gt; wrote:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Which version of cherrypy are you using?  I did an easy_install
</I>&gt;<i> cherrypy and got 3.0.1 but your code didn't work on it.  wsgiApp is
</I>&gt;<i> somewhere else now or something.
</I>

I'm using CherryPy 2.2 which I got with TurboGears tgsetup.py.
I can try CherryPy 3.0.1.


&gt;<i> &gt;
</I>&gt;<i> There are only 2 places we redirect like this, if we're a subclass of
</I>&gt;<i> resource.Resource with addSlash=True and the url didn't end in a /,
</I>&gt;<i> and if we're a static.File attached to a directory and the url didn't
</I>&gt;<i> end in a /.
</I>


But WSGIResource does not do either of those things.  Which leads me
&gt;<i> to believe that perhaps cherrypy is causing the redirect?  I don't
</I>&gt;<i> know, let me know what cherrypy version you're using and I'll try to
</I>&gt;<i> play with it later.
</I>

OK, and I will try to adapt my code for CherryPy 3.0.1 as well.  If
the problem goes away with newer code, then I'm fine with it.

It's almost certainly cherrypy causing the redirect:
using the WSGI app from the twisted web2 demo, I don't see the same kind of
problem.

I still think this is a good clue:
2007-03-20 08:39:48-0700 [HTTPChannel,0,127.0.0.1] 127.0.0.1 - -
[20/Mar/2007:08:39:48] &quot;GET // HTTP/1.1&quot; 302 97 &quot;&quot; &quot;curl/7.15.1
(i686-suse-linux) libcurl/7.15.1 OpenSSL/0.9.8a zlib/1.2.3 libidn/0.6.0&quot;
2007-03-20 08:39:48-0700 [-] 127.0.0.1 - - [20/Mar/2007:08:39:48 -0700] &quot;GET
/ HTTP/1.1&quot; 302 97 &quot;-&quot; &quot;curl/7.15.1 (i686-suse-linux) libcurl/7.15.1
OpenSSL/0.9.8a zlib/1.2.3 libidn/0.6.0&quot;

Note the 'GET //': I can't tell if that's the logging line coming from
Twisted or from CherryPy.

Dave
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20070320/8e908199/attachment.htm">http://twistedmatrix.com/pipermail/twisted-web/attachments/20070320/8e908199/attachment.htm</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003323.html">[Twisted-web] Using web2 to run a Cherrpy site
</A></li>
	<LI>Next message: <A HREF="003325.html">[Twisted-web] Using web2 to run a Cherrpy site
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3324">[ date ]</a>
              <a href="thread.html#3324">[ thread ]</a>
              <a href="subject.html#3324">[ subject ]</a>
              <a href="author.html#3324">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
