<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] memory leaks
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20memory%20leaks&In-Reply-To=421AC0C7.2050101%40kit.tomsk.ru">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001222.html">
   <LINK REL="Next"  HREF="001224.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] memory leaks</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20memory%20leaks&In-Reply-To=421AC0C7.2050101%40kit.tomsk.ru"
       TITLE="[Twisted-web] memory leaks">andrew-twisted at puzzling.org
       </A><BR>
    <I>Mon Feb 21 23:51:50 MST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001222.html">[Twisted-web] memory leaks
</A></li>
        <LI>Next message: <A HREF="001224.html">[Twisted-web] memory leaks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1223">[ date ]</a>
              <a href="thread.html#1223">[ thread ]</a>
              <a href="subject.html#1223">[ subject ]</a>
              <a href="author.html#1223">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Feb 22, 2005 at 11:19:03AM +0600, Andrey Chichak wrote:
&gt;<i> Andrew Bennetts wrote:
</I>[...]
&gt;<i> &gt;What version of Twisted? 
</I>&gt;<i> 
</I>&gt;<i> 1.3.0
</I>&gt;<i> 
</I>[...]
&gt;<i> &gt;How many hits/day?
</I>&gt;<i> 
</I>&gt;<i> ~650000 hits per 24 hours
</I>&gt;<i> 
</I>&gt;<i> &gt;There was a small leak in the 1.3.0 release... it was fixed in r10970 in
</I>&gt;<i> &gt;SVN.  As a workaround, you can delete twisted/protocols/_c_urlarg.so.  But
</I>&gt;<i> 
</I>&gt;<i> I'll check this.
</I>
Ok, this sounds like this leak is at least a large part of that.  Assuming
the average URL length is 40 bytes, that version would leak 26MB in 24
hours, according to the stats you give.  If requested URLs are much longer
(e.g. due to forms using request method GET), it may well account for all of
it.

&gt;<i> &gt;this is purely guesswork, please give us more details!
</I>&gt;<i> 
</I>&gt;<i> len(gc.get_objects()) is ~ 30000, and don't change in time.
</I>
This strongly suggests the leak is in a C module somewhere, which is
consistent with the _c_urlarg bug.

-Andrew.


</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001222.html">[Twisted-web] memory leaks
</A></li>
	<LI>Next message: <A HREF="001224.html">[Twisted-web] memory leaks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1223">[ date ]</a>
              <a href="thread.html#1223">[ thread ]</a>
              <a href="subject.html#1223">[ subject ]</a>
              <a href="author.html#1223">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
