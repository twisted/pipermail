<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] canvas without flash and optimization patches
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20canvas%20without%20flash%20and%20optimization%20patches&In-Reply-To=4219FB9C.4090707%40demaledetti.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001215.html">
   <LINK REL="Next"  HREF="001217.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] canvas without flash and optimization patches</H1>
    <B>Steven Armstrong</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20canvas%20without%20flash%20and%20optimization%20patches&In-Reply-To=4219FB9C.4090707%40demaledetti.net"
       TITLE="[Twisted-web] canvas without flash and optimization patches">sa at c-area.ch
       </A><BR>
    <I>Mon Feb 21 09:45:58 MST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001215.html">[Twisted-web] canvas without flash and optimization patches
</A></li>
        <LI>Next message: <A HREF="001217.html">[Twisted-web] canvas without flash and optimization patches
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1216">[ date ]</a>
              <a href="thread.html#1216">[ thread ]</a>
              <a href="subject.html#1216">[ subject ]</a>
              <a href="author.html#1216">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 21 Feb 2005 16:17:48 +0100 Stefano Debenedetti wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I did some further tests on Canvas, the compilation errors I got with KineticFusion were definitely trivial (only two missing semicolons) so I prepared a little patch that corrects those and adds the RVML file, which includes a comment with instructions for downloading KineticFusion and building the Canvas SWF with it.
</I>&gt;<i> 
</I>&gt;<i> I also turned compression on for a further size improvement, now the generated SWF is less than 2KB.
</I>&gt;<i> 
</I>&gt;<i> Perhaps more importantly, I found out why the Canvas demo is crashing Mozilla/Firefox on linux: it is too fast (i.e. the linux Flash player is too crappy)! Indeed it is not crashing, if you stop the server the browser resurrects, so I guess it is more appropriate to call it a choke.
</I>&gt;<i> 
</I>&gt;<i> The demo uses twisted.internet.task to send commands to the client approximatively every 0.25 seconds, raising that value to 0.3 is enough to avoid the choke, at least on my system.
</I>&gt;<i> 
</I>&gt;<i> So I tried optimizing the canvas.as file and I found out that by changing the Canvas protocol in order to use plain old crappy TSV instead of XML gives it a performance boost that allows me to push the above mentioned refresh rate of the demo to 0.21, i.e. even better than the 0.25 that was unreachable before.
</I>&gt;<i> 
</I>&gt;<i> Of course this has other drawbacks, for example you have take care of potential conflicts between the separator token you choose and the string data you want to send to the client, you lose ease of extensibility of the hierarchical structure and so on but it's worth giving it a try when the goal is absolute performance.
</I>&gt;<i> 
</I>&gt;<i> The first patch I attach is just the semicolons fixes + the RVML file, the second one is the same plus the optimizations, sorry about the data duplication but I couldn't figure out a quick way to do incremental patches with SVN without committing first.
</I>&gt;<i> 
</I>&gt;<i> ciao
</I>&gt;<i> ste
</I>
Wouldn't it be possible to use something like JSON [1] instead of XML?
Like that you may have the best of both worlds. Structured data and a
lighter format than xml. JS and Python work very nicely with it.

[1] <A HREF="http://www.json.org">http://www.json.org</A>

cheers
Steven

--
All I know is that I know nothing -- Socrates

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001215.html">[Twisted-web] canvas without flash and optimization patches
</A></li>
	<LI>Next message: <A HREF="001217.html">[Twisted-web] canvas without flash and optimization patches
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1216">[ date ]</a>
              <a href="thread.html#1216">[ thread ]</a>
              <a href="subject.html#1216">[ subject ]</a>
              <a href="author.html#1216">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
