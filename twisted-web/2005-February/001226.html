<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Newov Login Forward
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Newov%20Login%20Forward&In-Reply-To=421AE6AE.80400%40shechen.at">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001225.html">
   <LINK REL="Next"  HREF="001228.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Newov Login Forward</H1>
    <B>Andy Gayton</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Newov%20Login%20Forward&In-Reply-To=421AE6AE.80400%40shechen.at"
       TITLE="[Twisted-web] Newov Login Forward">andy at thecablelounge.com
       </A><BR>
    <I>Tue Feb 22 05:05:20 MST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001225.html">[Twisted-web] Newov Login Forward
</A></li>
        <LI>Next message: <A HREF="001228.html">[Twisted-web] Newov Login Forward
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1226">[ date ]</a>
              <a href="thread.html#1226">[ thread ]</a>
              <a href="subject.html#1226">[ subject ]</a>
              <a href="author.html#1226">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>noema wrote:

&gt;<i> I think an answer to the following issue could be useful for many 
</I>&gt;<i> people: (1) When I have a login page resource like the one listed here 
</I>&gt;<i> how can I return another page than the root one? (2) How can I return a 
</I>&gt;<i> certain page resource depending on the username?
</I>
G'day Noema,

Have a look a guarded.py in the examples directory.  Guard uses the 
realm you've associated with your site's portal to determine which 
object represents your site's root page.

Until the user logs in, guard requests an avatar for the 
checkers.ANONYMOUS user - so your realm usually returns a login page for 
this user.  When a user successfully authenticates themselves with 
guard, guard will ask your realm for an object that matches the user's 
userid.

So for 1/ - arrange for your sites realm to return the new root page 
once you have an authenticated userid

for 2/ I'd approach this using components and adaptors.  Represent each 
user type as an implementation of an interface for that user type - for 
example you might have IUser and IUserAdmin.  Then create adaptors from 
the IUser interface to nevow.IResource and IUserAdmin to nevow.IResource.

Your realm can then simply return a user object which is either an 
implementation of IUser or IUserAdmin - and the correct page will be drawn.

These links might be useful:

<A HREF="http://twistedmatrix.com/documents/current/howto/cred">http://twistedmatrix.com/documents/current/howto/cred</A>
<A HREF="http://twistedmatrix.com/documents/current/howto/components">http://twistedmatrix.com/documents/current/howto/components</A>

Hoping I haven't missed what you've actually asked :)

Andy.




</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001225.html">[Twisted-web] Newov Login Forward
</A></li>
	<LI>Next message: <A HREF="001228.html">[Twisted-web] Newov Login Forward
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1226">[ date ]</a>
              <a href="thread.html#1226">[ thread ]</a>
              <a href="subject.html#1226">[ subject ]</a>
              <a href="author.html#1226">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
