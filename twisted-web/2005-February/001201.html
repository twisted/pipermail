<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] pgasync (was: /freeform_post!!random causes
	exceptions)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20pgasync%20%28was%3A%20/freeform_post%21%21random%20causes%0A%09exceptions%29&In-Reply-To=20050217192730.GA99428%40count.jamwt.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001200.html">
   <LINK REL="Next"  HREF="001208.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] pgasync (was: /freeform_post!!random causes
	exceptions)</H1>
    <B>Andrea Arcangeli</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20pgasync%20%28was%3A%20/freeform_post%21%21random%20causes%0A%09exceptions%29&In-Reply-To=20050217192730.GA99428%40count.jamwt.com"
       TITLE="[Twisted-web] pgasync (was: /freeform_post!!random causes
	exceptions)">andrea at cpushare.com
       </A><BR>
    <I>Thu Feb 17 19:48:57 MST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001200.html">[Twisted-web] pgasync (was: /freeform_post!!random causes
	exceptions)
</A></li>
        <LI>Next message: <A HREF="001208.html">[Twisted-web] pgasync (was: /freeform_post!!random causes
	exceptions)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1201">[ date ]</a>
              <a href="thread.html#1201">[ thread ]</a>
              <a href="subject.html#1201">[ subject ]</a>
              <a href="author.html#1201">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Feb 17, 2005 at 01:27:30PM -0600, J Turner wrote:
&gt;<i> Andrea,
</I>&gt;<i> 
</I>&gt;<i> Thanks for your suggestions; sorry I've taken so long to get back to
</I>&gt;<i> them, but I haven't had time to work on pgasync until now... 
</I>
No problem, take your time. Sorry for not having discussed things last
time in IRC, but I was busy fighting with the mailing lists ;)

&gt;<i> I've patched that in, thanks.
</I>
You're welcome ;).

&gt;<i> This is fixed.
</I>
Ok fine!

&gt;<i> Nope, I don't think so.
</I>
Ok, I also couldn't find anything in the docs, perhaps %u should start
raising a deprecation warning, it's way confusing when two things do the
same thing and you never know if they're really the same thing ;)

&gt;<i> This is fixed as well.
</I>
fine, and this part I already fixed in my app too 8) I had no idea the ;
was added by the lib. it's actually the only part I changed after the
pgasync test, along with the compatibility code for the deferreds in
interaction that should allow me now to exchange psycopg2 with pgasync
back and forth with full compatibility.

&gt;<i> It's not trival to determine whether or not something gets resolved.  If
</I>&gt;<i> it's a keyword argument situation, then I need to search the format
</I>&gt;<i> string for some variation of %(keyword)s.  If it's just tuple-style,
</I>&gt;<i> then I need to count the number of %s/d/whatevers and determine whether
</I>&gt;<i> or not it's beyond the limit.
</I>&gt;<i> 
</I>&gt;<i> This seems ugly, and needlessly expensive for a corner case; I think the
</I>&gt;<i> right answer is, only pass things to format() that are intended to be
</I>&gt;<i> formatted and made safe for insertion into SQL.
</I>&gt;<i> 
</I>&gt;<i> But, then again, maybe I'm misunderstanding you.
</I>
You got it perfectly right, and I see your point, it'd be an unnecessary
slowdown to parse the string too.

But you could silenty convert to string if you can't find the conversion
type. In this case I'm suggesting to actually make it less strict but it
simplfy my code a lot.

I've tons of cases where I've a kwargs filled with stuff that is needed
by lots of chained deferreds. Now the sql one is using a few of the
kwargs entries, and then later on the email deferred uses other entries.

So if I can work with a single kwargs that has all the arguments
collected while the form action starts, the code is a lot simpler.

So my suggestion is not to give it up, but to try to convert to string,
and format it like string if __str__ did its job.

Comments? As soon as we sorted out this last bit, I'll give it a new
spin and perhaps it'll just work without a changing anything on my app.

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001200.html">[Twisted-web] pgasync (was: /freeform_post!!random causes
	exceptions)
</A></li>
	<LI>Next message: <A HREF="001208.html">[Twisted-web] pgasync (was: /freeform_post!!random causes
	exceptions)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1201">[ date ]</a>
              <a href="thread.html#1201">[ thread ]</a>
              <a href="subject.html#1201">[ subject ]</a>
              <a href="author.html#1201">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
