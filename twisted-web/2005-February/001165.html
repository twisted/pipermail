<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Encoding bug in Safari's XMLHttpRequest
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Encoding%20bug%20in%20Safari%27s%20XMLHttpRequest&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001169.html">
   <LINK REL="Next"  HREF="001166.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Encoding bug in Safari's XMLHttpRequest</H1>
    <B>David Remahl</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Encoding%20bug%20in%20Safari%27s%20XMLHttpRequest&In-Reply-To="
       TITLE="[Twisted-web] Encoding bug in Safari's XMLHttpRequest">chmod007 at gmail.com
       </A><BR>
    <I>Fri Feb 11 10:24:28 MST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001169.html">[Twisted-web] how to authenticate with a SSL apache server?
</A></li>
        <LI>Next message: <A HREF="001166.html">[Twisted-web] Encoding bug in Safari's XMLHttpRequest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1165">[ date ]</a>
              <a href="thread.html#1165">[ thread ]</a>
              <a href="subject.html#1165">[ subject ]</a>
              <a href="author.html#1165">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Playing around with LiveSite I encountered a bug in Apple's webkit
which is used by Safari, OmniWeb and a few other browsers. The
XMLHttpRequest object used by those browsers (and probably KHTML based
browsers, too, if they've integerated the code) has a bug which causes
the response to always be interpreted as ISO-8859-1 instead of in the
encoding specified by the content-type, xml document or the parent
document.

I sent a mail to Apple's webcore mailing list
&lt;<A HREF="http://lists.apple.com/archives/webcore-dev/2005/Feb/msg00001.html">http://lists.apple.com/archives/webcore-dev/2005/Feb/msg00001.html</A>&gt;
and got a reply saying that the bug has been fixed in an unreleased
version of the framework.

How would people feel about cluttering liveevil.js with code for
checking for WebKit versions up to and including the current one, and
attempt to re-interpret the string as UTF-8 if found?

A version check and then something along the lines of _from_utf8() on
&lt;<A HREF="http://homepage3.nifty.com/aokura/jscript/utf8.html">http://homepage3.nifty.com/aokura/jscript/utf8.html</A>&gt; should do it,
but that would add dozens of lines to the beautifully simple script...

/ Sincerely, David

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001169.html">[Twisted-web] how to authenticate with a SSL apache server?
</A></li>
	<LI>Next message: <A HREF="001166.html">[Twisted-web] Encoding bug in Safari's XMLHttpRequest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1165">[ date ]</a>
              <a href="thread.html#1165">[ thread ]</a>
              <a href="subject.html#1165">[ subject ]</a>
              <a href="author.html#1165">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
