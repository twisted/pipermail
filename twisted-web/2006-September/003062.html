<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] DOM manipulation in an athena widget
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20DOM%20manipulation%20in%20an%20athena%20widget&In-Reply-To=451EFA46.1070901%40imperial.ac.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003061.html">
   <LINK REL="Next"  HREF="003064.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] DOM manipulation in an athena widget</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20DOM%20manipulation%20in%20an%20athena%20widget&In-Reply-To=451EFA46.1070901%40imperial.ac.uk"
       TITLE="[Twisted-web] DOM manipulation in an athena widget">exarkun at divmod.com
       </A><BR>
    <I>Sat Sep 30 18:36:28 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="003061.html">[Twisted-web] DOM manipulation in an athena widget
</A></li>
        <LI>Next message: <A HREF="003064.html">[Twisted-web] DOM manipulation in an athena widget
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3062">[ date ]</a>
              <a href="thread.html#3062">[ thread ]</a>
              <a href="subject.html#3062">[ subject ]</a>
              <a href="author.html#3062">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 01 Oct 2006 00:14:14 +0100, Phil Mayers &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">p.mayers at imperial.ac.uk</A>&gt; wrote:
&gt;<i> [snip]
</I>&gt;<i>
</I>&gt;<i>db.Record.methods(
</I>&gt;<i>   function editField(self, node, event) {
</I>&gt;<i>     if (node.inEdit) return false;
</I>&gt;<i>     /* make the textbox */
</I>&gt;<i>     var tb = INPUT({'type': 'text', 'value': scrapeText(node)});
</I>&gt;<i>     /* swap the span for a textbox */
</I>&gt;<i>     replaceChildNodes(
</I>&gt;<i>       getElementsByTagAndClassName('span', null, node)[0], tb
</I>&gt;<i>     );
</I>&gt;<i>
</I>&gt;<i>     /* THIS FAILS */
</I>&gt;<i>     connect(tb, 'onblur', self.saveField);
</I>&gt;<i>
</I>&gt;<i>     return false;
</I>&gt;<i>   });
</I>&gt;<i>
</I>&gt;<i>The nevow debug console thing logs &quot;self has no properties&quot; - what is self 
</I>&gt;<i>in this context of a widget method/event call? Why does it have no 
</I>&gt;<i>properties?
</I>
Athena doesn't automatically bind methods to instances, unfortunately.  This
means when the onblur handler is invoked, saveField will be invoked without
any reference to the widget it came from.  Athena will let this happen, but
self won't be bound properly.  Try connecting this instead:

    function() { self.saveField(); }

Jean-Paul

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003061.html">[Twisted-web] DOM manipulation in an athena widget
</A></li>
	<LI>Next message: <A HREF="003064.html">[Twisted-web] DOM manipulation in an athena widget
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3062">[ date ]</a>
              <a href="thread.html#3062">[ thread ]</a>
              <a href="subject.html#3062">[ subject ]</a>
              <a href="author.html#3062">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
