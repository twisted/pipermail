<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Nevow and template like files
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Nevow%20and%20template%20like%20files&In-Reply-To=87wt8ibb32.fsf%40aka.i.naked.iki.fi">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002975.html">
   <LINK REL="Next"  HREF="002980.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Nevow and template like files</H1>
    <B>Valentino Volonghi aka Dialtone</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Nevow%20and%20template%20like%20files&In-Reply-To=87wt8ibb32.fsf%40aka.i.naked.iki.fi"
       TITLE="[Twisted-web] Nevow and template like files">dialtone at divmod.com
       </A><BR>
    <I>Tue Sep  5 13:43:35 CDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002975.html">[Twisted-web] Nevow and template like files
</A></li>
        <LI>Next message: <A HREF="002980.html">[Twisted-web] Re: Nevow and template like files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2978">[ date ]</a>
              <a href="thread.html#2978">[ thread ]</a>
              <a href="subject.html#2978">[ subject ]</a>
              <a href="author.html#2978">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 05 Sep 2006 18:13:37 +0300, Nuutti Kotivuori &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">naked at iki.fi</A>&gt; wrote:
&gt;<i>First are layout pages. These will provide the general
</I>&gt;<i>layout and functionality for a set of pages that will make up a
</I>&gt;<i>section of the site. These pages will contain the actual
</I>&gt;<i>html/head/body tags and such.
</I>&gt;<i>
</I>&gt;<i>Second are the content pages. These pages will fit in a certain layout
</I>&gt;<i>and provide the actual page content to it. There will be static pages,
</I>&gt;<i>dynamic status pages and pages with web forms. The layout pages need
</I>&gt;<i>to be able to dig sections out of the content pages to fill in to the
</I>&gt;<i>layout; for example additional css/javascript to go into head, sidebar
</I>&gt;<i>items, actual content.
</I>
I think what you said sounds reasonable. Maybe have a look here:
<A HREF="http://trac.stiq.it/main/browser/stiq/ui/base.py">http://trac.stiq.it/main/browser/stiq/ui/base.py</A>

Specifically base.Base class which defines 2 class attributes: template and sidebar that are used to fill a sidebar pane and the content pane of the macro.html template.
Basically you just use macro.html as the basis for all the pages and fill the 2 macro slots with a different couple of templates each time.

&gt;<i>Third are so called snippet pages. These will contain a large number
</I>&gt;<i>of text snippets (with markup) that are re-used on many content
</I>&gt;<i>pages. These snippets need to be easily includable from the content
</I>&gt;<i>pages. Some of the snippets are used as is, where as some of the
</I>&gt;<i>snippets need to be parameterised - the calling code needs to be able
</I>&gt;<i>to fill in some things easily.
</I>
&gt;<i>Snippet pages are a bit troublesome. I was thinking of making a
</I>&gt;<i>Fragment that would have the docFactory for such a page. Then that
</I>&gt;<i>fragment would be instantiated where ever some snippet was to be used,
</I>&gt;<i>and a simple method would be called on it. This method would get the
</I>&gt;<i>document, get a pattern from it, call fillSlots a couple times and
</I>&gt;<i>return it. I could make a macro which does this based on the arguments
</I>&gt;<i>it receives.
</I>
Seems reasonable.

&gt;<i>But it's all a bit in the air.
</I>&gt;<i>
</I>&gt;<i>Things I'd like to avoid or achieve. I wouldn't want the actual xhtml
</I>&gt;<i>templates to be read many times in the life of the program - it may
</I>&gt;<i>even be a problem with macros if a page is read once per every pattern
</I>&gt;<i>used from it - so I'd like for them to be read just once. I'd like a
</I>&gt;<i>way to have some patterns be optional, so I could provide a default
</I>&gt;<i>thing to do in case they are not found. And I'd like the lookup of the
</I>&gt;<i>snippet patterns be somehow pre-done, so that every inclusion of a
</I>&gt;<i>snippet wouldn't have go to through 1000 DOM nodes to find the right
</I>&gt;<i>part.
</I>
Each template is rendered/parsed once and only once (not because of my code, but that's how nevow works) unless you modify it (and it's not in a macro, in fact if you modify a template included by a macro you have to modify the macro too).

patterns are always optional.
pre-doing the pattern lookup can be done using self.docFactory as an argument to inevow.IQ(self.docFactory).onePattern() either at class level or at __init__ level. Another way is to simply load a different template for the pattern at class level calling it in another way.
pattern lookup anyway doesn't go through 1000 DOM nodes. Nevow does precompiling of whatever it can.

&gt;<i>So, any suggestions on how to actually go about making this happen?
</I>
What you have in mind already seems good enough.

HTH.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002975.html">[Twisted-web] Nevow and template like files
</A></li>
	<LI>Next message: <A HREF="002980.html">[Twisted-web] Re: Nevow and template like files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2978">[ date ]</a>
              <a href="thread.html#2978">[ thread ]</a>
              <a href="subject.html#2978">[ subject ]</a>
              <a href="author.html#2978">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
