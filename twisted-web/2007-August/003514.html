<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Passing events to (Athena) event handlers.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Passing%20events%20to%20%28Athena%29%20event%20handlers.&In-Reply-To=20070718190833.26384.932443664.divmod.xquotient.920%40joule.divmod.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003513.html">
   <LINK REL="Next"  HREF="003515.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Passing events to (Athena) event handlers.</H1>
    <B>kgi</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Passing%20events%20to%20%28Athena%29%20event%20handlers.&In-Reply-To=20070718190833.26384.932443664.divmod.xquotient.920%40joule.divmod.com"
       TITLE="[Twisted-web] Passing events to (Athena) event handlers.">iacovou at gmail.com
       </A><BR>
    <I>Mon Aug  6 13:48:56 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003513.html">[Twisted-web] Re: athena and widget.nodeById
</A></li>
        <LI>Next message: <A HREF="003515.html">[Twisted-web] rest webservice and big data.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3514">[ date ]</a>
              <a href="thread.html#3514">[ thread ]</a>
              <a href="subject.html#3514">[ subject ]</a>
              <a href="author.html#3514">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wednesday 18 July 2007 22:08:33 <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">glyph at divmod.com</A> wrote:
&gt;<i> You may have noticed JavaScript unit tests lying around in our various
</I>&gt;<i> codebases.  A good example of some pretty thorough unit testing is in
</I>&gt;<i> Mantissa.Test.TestRegionModel.  You'd need to add coverage for your
</I>&gt;<i> event handler stuff that used these tests and ran under trial.
</I>&gt;<i>
</I>&gt;<i> Some other test examples, that will be even closer to the feature you
</I>&gt;<i> are trying to implement, are in
</I>&gt;<i> Nevow.Test.TestWidget.WidgetTests.test_connectDOMEvent*.
</I>
Hi Glyph et al.

I'm having a little trouble running (or indeed, understanding) the unit 
testing infrastructure. This is in relation to the patch I mentioned 
previously that allows the event to be passed along with the node to event 
handlers.

I've read through

  <A HREF="http://divmod.org/trac/wiki/DivmodNevow/AthenaTesting">http://divmod.org/trac/wiki/DivmodNevow/AthenaTesting</A>

and also

  <A HREF="http://blackjml.livejournal.com/21602.html">http://blackjml.livejournal.com/21602.html</A>

You mentioned &quot;trial&quot;, but the pages above refer to &quot;nit&quot;. From what I've 
worked, trial is the general purpose testing infrastructure and nit is a 
Nevow-specific thing that actually requires a browser (rather than using a 
standalone JS interpreter, say). Does trial use nit, nit use trial, or are 
they completely separate?

(And I've got no idea how &quot;nose&quot; fits into all this).

I can see that Nevow/nevow/js/Nevow/Test/TestWidget.js contains exactly the 
sort of tests that I want to extend, just like you said. I intend to leave 
the existing tests alone (to prove that passing and event to methods that 
aren't expecting events still work) and a new test that receives and examines 
the event (to prove that the event getting passed is indeed the type, etc, I 
expect)[1].

I've managed to run the nevow tests by running &quot;nit nevow&quot; and pointing 
Firefox to <A HREF="http://localhost:8080.">http://localhost:8080.</A>

However, when I run open Firebug and go to the &quot;Script&quot; tab I would expect to 
see &quot;Nevow.Test&quot; as an option in the dropdown list of modules. However, it 
looks like this isn't included at all, which means that Firefox hasn't loaded 
it because the test &quot;page&quot; doesn't include it.

It occurred to me that it's possible that it's &quot;pushed&quot; to the browser 
dynamically, but it's not available even after the tests have run. At that 
point I'd definitely expect all relevant JS to have been loaded.

(The list of JS files is: Divmod, Divmod.Base|Defer|Inspect|Runtime|
Runtime.Tests, Nevow, Nevow.Athena, Nevow.Athena.Test, Nevow.Athena.Tests, 
Nevow.Athena.Tests.Resources.

Is the JS code you pointed me to not run by the &quot;nit nevow&quot; tests? If not, how 
can I run that test code?

Thanks,

Ricky

[1] Plus any other tests that fail as a result of the changes; for example, 
Nevow/nevow/test/test_athena.py:test_handlerMacro() checks a serialized 
athena handler against a hardcoded string; if _handlerFormat is changed, this 
will fail and need updating.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003513.html">[Twisted-web] Re: athena and widget.nodeById
</A></li>
	<LI>Next message: <A HREF="003515.html">[Twisted-web] rest webservice and big data.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3514">[ date ]</a>
              <a href="thread.html#3514">[ thread ]</a>
              <a href="subject.html#3514">[ subject ]</a>
              <a href="author.html#3514">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
