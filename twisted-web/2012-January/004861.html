<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] cancelling agent.request
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20cancelling%20agent.request&In-Reply-To=CAKmUHjZPSm6jOA02VK0whvv3qT7hA%2BKTbhe%2BhEqoG8GpDCvv0A%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004859.html">
   <LINK REL="Next"  HREF="004862.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] cancelling agent.request</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20cancelling%20agent.request&In-Reply-To=CAKmUHjZPSm6jOA02VK0whvv3qT7hA%2BKTbhe%2BhEqoG8GpDCvv0A%40mail.gmail.com"
       TITLE="[Twisted-web] cancelling agent.request">exarkun at twistedmatrix.com
       </A><BR>
    <I>Sat Jan 14 10:01:43 EST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="004859.html">[Twisted-web] cancelling agent.request
</A></li>
        <LI>Next message: <A HREF="004862.html">[Twisted-web] cancelling agent.request
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4861">[ date ]</a>
              <a href="thread.html#4861">[ thread ]</a>
              <a href="subject.html#4861">[ subject ]</a>
              <a href="author.html#4861">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10:18 am, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">johnaherne at rocs.co.uk</A> wrote:
&gt;<i>I have a situation where a service I am using will occasionally not 
</I>&gt;<i>respond
</I>&gt;<i>for considerable periods - hours not minutes.
</I>&gt;<i>
</I>&gt;<i>I am using cooperate and yield to loop round a series of requests I 
</I>&gt;<i>want to
</I>&gt;<i>make
</I>&gt;<i>
</I>&gt;<i>The actual function to send the request returns a deferred to the 
</I>&gt;<i>yield. I
</I>&gt;<i>add the callbacks onto this and set a calllater to fire in 30 seconds.
</I>&gt;<i>
</I>&gt;<i>If that fires I can then cancel the deferred. But I think I ought to be
</I>&gt;<i>cancelling the request as well else I assume I will be leaking request
</I>&gt;<i>objects that might not get dealt with.
</I>&gt;<i>
</I>&gt;<i>However, I can't see where I might cancel the request. Or should I be
</I>&gt;<i>dropping the connection associated with the request and if so where 
</I>&gt;<i>would I
</I>&gt;<i>be doing that.
</I>&gt;<i>
</I>&gt;<i>Have I got that right?
</I>
The cancel method of the Deferred returned by Agent.request is probably 
the right API to use to do the cleanup you're interested in.  However, 
cancelation is not specifically implemented for the Agent.request 
Deferred yet.  Though it may sound like one, this is not a contradiction 
due to the way Deferred cancelation works (ideally we would have 
documentation about Deferred cancelation that would explain why this is, 
but we don't).

See <A HREF="http://twistedmatrix.com/trac/ticket/4330">http://twistedmatrix.com/trac/ticket/4330</A> for progress on this issue 
or to contribute.

Jean-Paul

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004859.html">[Twisted-web] cancelling agent.request
</A></li>
	<LI>Next message: <A HREF="004862.html">[Twisted-web] cancelling agent.request
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4861">[ date ]</a>
              <a href="thread.html#4861">[ thread ]</a>
              <a href="subject.html#4861">[ subject ]</a>
              <a href="author.html#4861">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
