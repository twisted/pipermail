<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] adbapi/Nevow Question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20adbapi/Nevow%20Question&In-Reply-To=200412280211.48575.general%40eepatents.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000994.html">
   <LINK REL="Next"  HREF="000995.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] adbapi/Nevow Question</H1>
    <B>orbitz</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20adbapi/Nevow%20Question&In-Reply-To=200412280211.48575.general%40eepatents.com"
       TITLE="[Twisted-web] adbapi/Nevow Question">orbitz at ezabel.com
       </A><BR>
    <I>Wed Dec 29 12:39:52 MST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000994.html">[Twisted-web] adbapi/Nevow Question
</A></li>
        <LI>Next message: <A HREF="000995.html">[Twisted-web] Patch to nevow for deferrable beforeRender and
	afterRender
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#996">[ date ]</a>
              <a href="thread.html#996">[ thread ]</a>
              <a href="subject.html#996">[ subject ]</a>
              <a href="author.html#996">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You define a data method, and for that data you tell it to use the 
sequence renderer.  Your data method will just perform the query and 
return it as a result (nevow handles deferreds properly).  Then in your 
table for each row you simply tell that row to use the index in the data 
which you want in there. 0, 1, 2, etc. The only issue may be what 
db-api2 module you are using. pyscopg for postgresql works well, 
otherwise you'll get a cannot adapt error or something like that.
Here is an example with xmlfile:

  def data_departments(self, context, data):
    db = DatabaseConnection()
    return db.runQuery(&quot;&quot;&quot;SELECT did, name FROM departments&quot;&quot;&quot;)

 &lt;p&gt;
&lt;select name = &quot;department&quot; nevow:data = &quot;departments&quot; nevow:render = 
&quot;sequence&quot;&gt;
&lt;option nevow:pattern = &quot;header&quot; value = &quot;depsel&quot; selected 
=&quot;selected&quot;&gt;Select Department&lt;/option&gt;
&lt;option nevow:pattern = &quot;item&quot;&gt;&lt;nevow:attr name = &quot;value&quot; nevow:render = 
&quot;string&quot; nevow:data = &quot;0&quot;/&gt;
&lt;nevow:invisible nevow:render = &quot;string&quot; nevow:data = &quot;1&quot;/&gt; &lt;/option&gt;
            &lt;/select&gt;&lt;/p&gt;

Ed Suominen wrote:

&gt;<i>Using twisted.enterprise.adbapi and Nevow, I am rendering a big table of 
</I>&gt;<i>entries from one SQL table, each of which has table cells that can 
</I>&gt;<i>contain multiple entries from another SQL table. I have some stan code 
</I>&gt;<i>working for the top-level entries with a top-level 
</I>&gt;<i>render=directive(&quot;sequence&quot;), but am wondering how to go about 
</I>&gt;<i>rendering the table-within-a-cell for the second-level entries. 
</I>&gt;<i>
</I>&gt;<i>Can sequence directives be nested, or would I have to manually run the 
</I>&gt;<i>second-level SQL queries in some sort of fire-and-wait-for-the-deferred 
</I>&gt;<i>iteration from within the render_ method of the top-level sequence? The 
</I>&gt;<i>latter sounds like it would be very difficult to keep from blocking.
</I>&gt;<i>
</I>&gt;<i>Thanks for any help. I am finding Nevow to be fascinating and powerful, 
</I>&gt;<i>but very difficult to understand and use.
</I>&gt;<i>
</I>&gt;<i>-Ed Suominen
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Twisted-web mailing list
</I>&gt;<i><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">Twisted-web at twistedmatrix.com</A>
</I>&gt;<i><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web</A>
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000994.html">[Twisted-web] adbapi/Nevow Question
</A></li>
	<LI>Next message: <A HREF="000995.html">[Twisted-web] Patch to nevow for deferrable beforeRender and
	afterRender
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#996">[ date ]</a>
              <a href="thread.html#996">[ thread ]</a>
              <a href="subject.html#996">[ subject ]</a>
              <a href="author.html#996">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
