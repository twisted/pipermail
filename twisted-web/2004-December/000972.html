<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] loaders.xmlstr versus loader.xmlfile
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20loaders.xmlstr%20versus%20loader.xmlfile&In-Reply-To=41C69E21.2030608%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000971.html">
   <LINK REL="Next"  HREF="000973.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] loaders.xmlstr versus loader.xmlfile</H1>
    <B>Michael Wilson</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20loaders.xmlstr%20versus%20loader.xmlfile&In-Reply-To=41C69E21.2030608%40twistedmatrix.com"
       TITLE="[Twisted-web] loaders.xmlstr versus loader.xmlfile">michael.wilson at gmail.com
       </A><BR>
    <I>Mon Dec 20 09:43:34 MST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000971.html">[Twisted-web] loaders.xmlstr versus loader.xmlfile
</A></li>
        <LI>Next message: <A HREF="000973.html">[Twisted-web] loaders.xmlstr versus loader.xmlfile
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#972">[ date ]</a>
              <a href="thread.html#972">[ thread ]</a>
              <a href="subject.html#972">[ subject ]</a>
              <a href="author.html#972">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sure, below you will find the version of customform.py I used, and the
.xml file follows. Now that I know it should be the same I'll dig
around some more.

#################################################################################
# This is a version of examples/customform.py, except I've moved the template
# off to disk. 

from twisted.application import internet, service
from twisted.web import static
from nevow import inevow, rend, loaders, tags, appserver

from nevow import rend
from nevow import url
from nevow import loaders
from nevow import tags as T

from formless import annotate
from formless import iformless
from formless import webform

FORM_LAYOUT = loaders.xmlfile( 'customform.xml' )

#################################################################################
# ISomething and Page are just something to test the form rendering on.

class ISomething(annotate.TypedInterface):
    
    def doSomething(
        self,
        ctx = annotate.Context(),
        fee = annotate.String(required=True, description=&quot;Wee!&quot;),
        fi = annotate.Integer(description=&quot;Tra-la-la&quot;),
        fo = annotate.Text(),
        fum = annotate.String(),
        ):
        &quot;&quot;&quot;Do Something Really Exciting

        Normally you would put a useful description of the interface here but,
        since the inteface is useless anyway, I cannot think of anything
        useful to say about it. Although ... did I mention it is useless?&quot;&quot;&quot;
    doSomething = annotate.autocallable(doSomething)
    

class Root(rend.Page):
    &quot;&quot;&quot;Render a custom and normal form for an ISomething.
    &quot;&quot;&quot;
    __implements__ = ISomething, rend.Page.__implements__
    addSlash = True
    
    child_webform_css = webform.defaultCSS
    
    def render_normalForm(self, ctx, data):
        return webform.renderForms()
    
    def render_customForm(self, ctx, data):
        return webform.renderForms()[FORM_LAYOUT]
    
    def doSomething(self, ctx, **kwargs):
        print '***** doSomething called with:', kwargs
    
    docFactory = loaders.stan(
        T.html[
            T.head[
                T.title['Example :: Custom Form Layout'],
                T.link(rel='stylesheet', type='text/css',
href=url.here.child(&quot;webform_css&quot;)),
                ],
            T.body[
                T.h1['Custom'],
                render_customForm,
                T.h1['Default'],
                render_normalForm,
                ]
            ]
        )


application = service.Application('hellostan')
webServer = internet.TCPServer(8080, appserver.NevowSite(Root()))
webServer.setServiceParent(application)

--------------- customform.xml follows --------------------

&lt;?xml version=&quot;1.0&quot;?&gt;
    &lt;form xmlns:n=&quot;<A HREF="http://nevow.com/ns/nevow/0.1&quot;">http://nevow.com/ns/nevow/0.1&quot;</A> n:pattern=&quot;freeform-form&quot;&gt;
    
      &lt;!-- Replace/fill the form attributes --&gt;
      &lt;n:attr name=&quot;action&quot;&gt;&lt;n:slot name=&quot;form-action&quot;/&gt;&lt;/n:attr&gt;
      &lt;n:attr name=&quot;id&quot;&gt;&lt;n:slot name=&quot;form-id&quot;/&gt;&lt;/n:attr&gt;
      &lt;n:attr name=&quot;name&quot;&gt;&lt;n:slot name=&quot;form-name&quot;/&gt;&lt;/n:attr&gt;
      
      &lt;!-- General form information --&gt;
      &lt;p&gt;&lt;strong&gt;&lt;n:slot name=&quot;form-label&quot;/&gt;&lt;/strong&gt;&lt;/p&gt;
      &lt;p&gt;&lt;em&gt;&lt;n:slot name=&quot;form-description&quot;/&gt;&lt;/em&gt;&lt;/p&gt;
      &lt;p&gt;&lt;strong&gt;&lt;em&gt;&lt;n:slot name=&quot;form-error&quot;/&gt;&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
      
      &lt;!-- Start of the form layout table --&gt;
      &lt;table style=&quot;background: #eee; border: 1px solid #bbb; padding: 1em;&quot; &gt;
        &lt;!-- Mark location arguments will be added --&gt;
        &lt;n:slot name=&quot;form-arguments&quot;/&gt;
        &lt;!-- General argument layout pattern --&gt;
        &lt;n:invisible n:pattern=&quot;argument&quot; n:render=&quot;remove&quot;&gt;
          &lt;tr&gt;
            &lt;th&gt;&lt;n:slot name=&quot;label&quot;/&gt;:&lt;/th&gt;
            &lt;td&gt;&lt;n:slot name=&quot;input&quot;/&gt;&lt;span
class=&quot;freeform-error&quot;&gt;&lt;n:slot name=&quot;error&quot;/&gt;&lt;/span&gt;&lt;/td&gt;
          &lt;/tr&gt;
          &lt;tr&gt;
            &lt;th&gt;&lt;/th&gt;
            &lt;td&gt;&lt;n:slot name=&quot;description&quot;/&gt;&lt;/td&gt;
          &lt;/tr&gt;
        &lt;/n:invisible&gt;
        &lt;!-- Argument layout, just for fum --&gt;
        &lt;n:invisible n:pattern=&quot;argument!!fo&quot; n:render=&quot;remove&quot;&gt;
          &lt;tr&gt;
            &lt;th&gt;&lt;n:slot name=&quot;label&quot;/&gt;:&lt;/th&gt;
            &lt;td&gt;
              &lt;textarea cols=&quot;40&quot; rows=&quot;5&quot;&gt;&lt;n:attr name=&quot;id&quot;&gt;&lt;n:slot
name=&quot;id&quot;/&gt;&lt;/n:attr&gt;&lt;n:attr name=&quot;name&quot;&gt;&lt;n:slot
name=&quot;name&quot;/&gt;&lt;/n:attr&gt;&lt;n:slot name=&quot;value&quot;/&gt;&lt;/textarea&gt;
              &lt;span class=&quot;freeform-error&quot;&gt;&lt;n:slot name=&quot;error&quot;/&gt;&lt;/span&gt;&lt;/td&gt;
          &lt;/tr&gt;
          &lt;tr&gt;
            &lt;th&gt;&lt;/th&gt;
            &lt;td&gt;&lt;n:slot name=&quot;description&quot;/&gt;&lt;/td&gt;
          &lt;/tr&gt;
        &lt;/n:invisible&gt;
        &lt;!-- Button row --&gt;
        &lt;tr&gt;
          &lt;td colspan=&quot;2&quot;&gt;
            &lt;n:slot name=&quot;form-button&quot;/&gt;
          &lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
    &lt;/form&gt;




On Mon, 20 Dec 2004 11:40:49 +0200, Tommi Virtanen &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">tv at twistedmatrix.com</A>&gt; wrote:
&gt;<i> Michael Wilson wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt;Shouldn't I be able to put it into a file and replace
</I>&gt;<i> &gt;&quot;loaders.xmlstr(...)' with &quot;loaders.xmlfile(...)&quot; and have it act
</I>&gt;<i> &gt;exactly the same?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> Yes. You need to provide more information for anyone to help you;
</I>&gt;<i> preferably a minimal runnable program that demonstrates the issue.
</I>&gt;<i> 
</I>&gt;<i>
</I>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000971.html">[Twisted-web] loaders.xmlstr versus loader.xmlfile
</A></li>
	<LI>Next message: <A HREF="000973.html">[Twisted-web] loaders.xmlstr versus loader.xmlfile
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#972">[ date ]</a>
              <a href="thread.html#972">[ thread ]</a>
              <a href="subject.html#972">[ subject ]</a>
              <a href="author.html#972">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
