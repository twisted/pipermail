<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] web2.server: returning a deferred from
	IResource.render()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20web2.server%3A%20returning%20a%20deferred%20from%0A%09IResource.render%28%29&In-Reply-To=200704122135.58774.ibu%40radempa.de">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003340.html">
   <LINK REL="Next"  HREF="003342.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] web2.server: returning a deferred from
	IResource.render()</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20web2.server%3A%20returning%20a%20deferred%20from%0A%09IResource.render%28%29&In-Reply-To=200704122135.58774.ibu%40radempa.de"
       TITLE="[Twisted-web] web2.server: returning a deferred from
	IResource.render()">exarkun at divmod.com
       </A><BR>
    <I>Thu Apr 12 14:54:20 CDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003340.html">[Twisted-web] web2.server: returning a deferred from
	IResource.render()
</A></li>
        <LI>Next message: <A HREF="003342.html">[Twisted-web] web2.server: returning a deferred from
	IResource.render()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3341">[ date ]</a>
              <a href="thread.html#3341">[ thread ]</a>
              <a href="subject.html#3341">[ subject ]</a>
              <a href="author.html#3341">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 12 Apr 2007 21:35:57 +0200, ibu &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">ibu at radempa.de</A>&gt; wrote:
&gt;<i>Hi,
</I>&gt;<i>
</I>&gt;<i>I'm running web2.server (much like the example at
</I>&gt;<i><A HREF="http://twistedmatrix.com/projects/web2/documentation/examples/intro/simple.py">http://twistedmatrix.com/projects/web2/documentation/examples/intro/simple.py</A>
</I>&gt;<i>) and everything works well, except if I return a deferred from an
</I>&gt;<i>IResource.render() :
</I>&gt;<i>
</I>&gt;<i>This does NOT work:
</I>&gt;<i>    def render(self, req):
</I>&gt;<i>            #...
</I>&gt;<i>            deferredResponse = h.getResponse() # generates a deferred
</I>&gt;<i>            return deferredResponse
</I>
While it may be the case that a program can only work in one particular
way (and so saying that a program works may fully describe its behavior),
it is not the case that a program can only be broken in one particular
way.  Don't just say that something doesn't work.  Explain the behavior
you expected to see and how the behavior you did see differed from that.
It's also very useful to include complete examples.  In the above, I have
no idea what `h' is or what `h.getResponse' might return.  This means I
really have no idea what the render method might even be trying to do, let
alone what it actually does.

&gt;<i>While this DOES work:
</I>&gt;<i>    def render(self, req):
</I>&gt;<i>            #...
</I>&gt;<i>            deferredResponse = h.getResponse() # generates a deferred
</I>&gt;<i>            deferredResponse.callback(None)
</I>&gt;<i>            return deferredResponse.result
</I>
The `result' attribute of Deferreds is not strictly public, and you should
avoid using it.  The above is equivalent to returning f(None), where f is
the composite function of all of the callbacks on deferredResult, though
what those might be I do not know.

Jean-Paul

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003340.html">[Twisted-web] web2.server: returning a deferred from
	IResource.render()
</A></li>
	<LI>Next message: <A HREF="003342.html">[Twisted-web] web2.server: returning a deferred from
	IResource.render()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3341">[ date ]</a>
              <a href="thread.html#3341">[ thread ]</a>
              <a href="subject.html#3341">[ subject ]</a>
              <a href="author.html#3341">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
