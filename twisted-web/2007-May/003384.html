<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Trouble%20chaining%20Javascript%20module%20calls%20in%20Athena%0A%09%28example%20code%20attached%29.&In-Reply-To=20070530121556.30678.1364857909.divmod.quotient.7568%40ohm">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003383.html">
   <LINK REL="Next"  HREF="003385.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).</H1>
    <B>kgi</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Trouble%20chaining%20Javascript%20module%20calls%20in%20Athena%0A%09%28example%20code%20attached%29.&In-Reply-To=20070530121556.30678.1364857909.divmod.quotient.7568%40ohm"
       TITLE="[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).">iacovou at gmail.com
       </A><BR>
    <I>Wed May 30 10:53:11 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003383.html">[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).
</A></li>
        <LI>Next message: <A HREF="003385.html">[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3384">[ date ]</a>
              <a href="thread.html#3384">[ thread ]</a>
              <a href="subject.html#3384">[ subject ]</a>
              <a href="author.html#3384">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wednesday 30 May 2007 15:15:56 Jean-Paul Calderone wrote:

Hi Jean-Paul; thanks for your email - very helpful.

&gt;<i> Widgets on the client have a hierarchical relationship with each other
</I>&gt;<i> which reflects the hierarchical relationship of their corresponding
</I>&gt;<i> server-side LiveElement progenitors.  That is, if LiveElement B has
</I>&gt;<i> setFragmentParent called on it with LiveElement A as an argument, then
</I>&gt;<i> Widget B will have a widgetParent property which refers to Widget A;
</I>&gt;<i> similarly, Widget A's childWidgets array property will include widget B. 
</I>&gt;<i> These relationships can be used to pass messages between widgets in the
</I>&gt;<i> browser without involving the server.
</I>
Yep, I see the attributes for traversing along the hierarchy. Unless I've 
misunderstood, in order for a widget's Javascript to be able to call another 
widget's Javascript, it has to do something like:

  self.widgetParent.widgetParent.widgetParent ... 
childWidgets[0].childWidgets[1].doStuff()

This feels somewhat wrong, partly because of fragility: if I move the location 
of a widget in the hierarchy, its Javascript code will need updating. 

Is there a way of accessing another widget in the page directly by name? An 
example might be a panel where I want any widget to be able to append status 
messages.

I would imagine this might entail assigning a user-controlled widget id to the 
top-level DOM node of a LiveElement (as opposed to *subnodes* of the widget, 
in which ids are rewritten for use by nodeById(), and which need the athena 
id to access).

I suppose the stan would look like this (this doesn't work, because the id 
gets clobbered by the autogenerated id):

    T.div ( _id = 'my-unique-id', render = T.directive ( &quot;mywidget&quot; ) ),
    T.div ( _id = 'another-unique-id', render = T.directive ( &quot;mywidget&quot; ) )

Then in JS code of another widget:

    w = self.getAthenaWidgetByName ( 'my-unique-id' );
    w.doStuff()

Obviously, the LiveElement nodes are already all assigned a unique id, it's 
just that it's done automatically and there's no obvious way of getting at 
them ahead-of-time.

I guess I could always cheat and wrap all LiveElements inside named divs and 
do document.getElementById(), but that feels silly, given that the divs are 
already named.

There are plenty of methods in Nevow/nevow/js/Nevow/Athena/__init__.js for 
getting hold of things but they all seem to need either the *numeric* athena 
id (fromAthenaID, callByAthenaID) or a reference to a node (athenaIDFromNode, 
athenaClassFromNode).

Ricky




</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003383.html">[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).
</A></li>
	<LI>Next message: <A HREF="003385.html">[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3384">[ date ]</a>
              <a href="thread.html#3384">[ thread ]</a>
              <a href="subject.html#3384">[ subject ]</a>
              <a href="author.html#3384">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
