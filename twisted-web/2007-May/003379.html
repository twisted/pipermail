<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Trouble%20chaining%20Javascript%20module%20calls%20in%20Athena%0A%09%28example%20code%20attached%29.&In-Reply-To=200705300144.07550.iacovou%40gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003378.html">
   <LINK REL="Next"  HREF="003381.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Trouble%20chaining%20Javascript%20module%20calls%20in%20Athena%0A%09%28example%20code%20attached%29.&In-Reply-To=200705300144.07550.iacovou%40gmail.com"
       TITLE="[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).">exarkun at divmod.com
       </A><BR>
    <I>Tue May 29 19:25:23 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003378.html">[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).
</A></li>
        <LI>Next message: <A HREF="003381.html">[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3379">[ date ]</a>
              <a href="thread.html#3379">[ thread ]</a>
              <a href="subject.html#3379">[ subject ]</a>
              <a href="author.html#3379">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 30 May 2007 01:44:07 +0300, kgi &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">iacovou at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i>Hi all.
</I>&gt;<i>
</I>&gt;<i>I'm doing a lot of Athena stuff at the moment. Calls from client-&gt;server and
</I>&gt;<i>server-&gt; client (which is virtually 100% of the calls) are working
</I>&gt;<i>wonderfully. However, I'm having difficulty getting one Javascript module to
</I>&gt;<i>call directly onto another Javascript module (that is, client-&gt;client) in a
</I>&gt;<i>way that I would expect, and I think it's something in the package/module
</I>&gt;<i>system Athena uses that I haven't yet grokked.
</I>&gt;<i>
</I>&gt;<i>I've attached a minimal test case. Since it actually has a directory
</I>&gt;<i>structure, I've tar-gzipped it; sorry for the additional inconvenience.
</I>&gt;<i>Directions are in the README file. The only requirement is that you modify
</I>&gt;<i>PYTHONPATH before twistd-ing the tac file (actually, it's a .py file, but it
</I>&gt;<i>should be a .tac file).
</I>&gt;<i>
</I>&gt;<i>Briefly, the problem is this: I've got two Javascript modules associated with
</I>&gt;<i>LiveElements; in the example these are XCall.A and XCall.B. XCall.A knows
</I>&gt;<i>about XCall.B through an import &quot;statement&quot;; that is, it has a line:
</I>&gt;<i>
</I>&gt;<i>    // import XCall.B
</I>&gt;<i>
</I>&gt;<i>It tries to call a method on XCall.B (XCall.B.chain()), but it can't see this
</I>&gt;<i>method and throws an exception (which is caught by Nevow).
</I>
This is like trying to call an unbound method in Python.  What you really
want to be doing is calling chain on an /instance/ of XCall.B, not on the
class object itself.

Also, I'd recommend not clobbering XCall.A and XCall.B with your class
objects, since those are set up to be module objects because they each
have a corresponding .js file.  Athena's module system tries to mimick
many aspects of Python's - in this case, XCall corresponds to a package,
XCall.A and XCall.B are modules in that package, and you want to be
defining things like XCall.A.Foo and XCall.B.Bar as attributes of those
modules.

Jean-Paul

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003378.html">[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).
</A></li>
	<LI>Next message: <A HREF="003381.html">[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3379">[ date ]</a>
              <a href="thread.html#3379">[ thread ]</a>
              <a href="subject.html#3379">[ subject ]</a>
              <a href="author.html#3379">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
