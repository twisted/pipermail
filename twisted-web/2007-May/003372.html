<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Different behavior of twistd with and without -n
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Different%20behavior%20of%20twistd%20with%20and%20without%20-n&In-Reply-To=18005.40268.995881.848767%40terry-jones-computer.local">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003376.html">
   <LINK REL="Next"  HREF="003374.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Different behavior of twistd with and without -n</H1>
    <B>Jarek Zgoda</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Different%20behavior%20of%20twistd%20with%20and%20without%20-n&In-Reply-To=18005.40268.995881.848767%40terry-jones-computer.local"
       TITLE="[Twisted-web] Different behavior of twistd with and without -n">jarek.zgoda at sensisoft.com
       </A><BR>
    <I>Fri May 25 03:30:04 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003376.html">[Twisted-web] Different behavior of twistd with and without -n
</A></li>
        <LI>Next message: <A HREF="003374.html">[Twisted-web] atomic log write
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3372">[ date ]</a>
              <a href="thread.html#3372">[ thread ]</a>
              <a href="subject.html#3372">[ subject ]</a>
              <a href="author.html#3372">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Terry Jones napisa&#322;(a):

&gt;<i> While I realize there's probably something up with PyLucene, I'm wondering
</I>&gt;<i> if anyone can suggest why running with twistd -n is preventing the
</I>&gt;<i> crashing.  What else does -n do, other than (presumably) forking and
</I>&gt;<i> running the server in the child?
</I>
I have other issues regarding forking in twistd and PyLucene. My server
works reliably (on linux, didn't try on OSX) only if I run it without
daemonizong twistd. If I daemonize twistd, the memory consumption grows
out of control and finally system's oomkiller starts killing processes.
There's one Queue object that holds indexing requests and it grows
indefinitely without freeing any memory, so the whole twistd process
eats more and more memory while requests come to the system.

As a temporary solution we start the server under screen session.

-- 
Jarek Zgoda

&quot;We read Knuth so you don't have to.&quot;

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003376.html">[Twisted-web] Different behavior of twistd with and without -n
</A></li>
	<LI>Next message: <A HREF="003374.html">[Twisted-web] atomic log write
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3372">[ date ]</a>
              <a href="thread.html#3372">[ thread ]</a>
              <a href="subject.html#3372">[ subject ]</a>
              <a href="author.html#3372">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
