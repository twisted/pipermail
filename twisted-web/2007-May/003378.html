<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Trouble%20chaining%20Javascript%20module%20calls%20in%20Athena%0A%09%28example%20code%20attached%29.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003377.html">
   <LINK REL="Next"  HREF="003379.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).</H1>
    <B>kgi</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Trouble%20chaining%20Javascript%20module%20calls%20in%20Athena%0A%09%28example%20code%20attached%29.&In-Reply-To="
       TITLE="[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).">iacovou at gmail.com
       </A><BR>
    <I>Tue May 29 18:44:07 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003377.html">[Twisted-web] XML-RPC and Authentication
</A></li>
        <LI>Next message: <A HREF="003379.html">[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3378">[ date ]</a>
              <a href="thread.html#3378">[ thread ]</a>
              <a href="subject.html#3378">[ subject ]</a>
              <a href="author.html#3378">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi all.

I'm doing a lot of Athena stuff at the moment. Calls from client-&gt;server and 
server-&gt; client (which is virtually 100% of the calls) are working 
wonderfully. However, I'm having difficulty getting one Javascript module to 
call directly onto another Javascript module (that is, client-&gt;client) in a 
way that I would expect, and I think it's something in the package/module 
system Athena uses that I haven't yet grokked.

I've attached a minimal test case. Since it actually has a directory 
structure, I've tar-gzipped it; sorry for the additional inconvenience. 
Directions are in the README file. The only requirement is that you modify 
PYTHONPATH before twistd-ing the tac file (actually, it's a .py file, but it 
should be a .tac file).

Briefly, the problem is this: I've got two Javascript modules associated with 
LiveElements; in the example these are XCall.A and XCall.B. XCall.A knows 
about XCall.B through an import &quot;statement&quot;; that is, it has a line:

    // import XCall.B

It tries to call a method on XCall.B (XCall.B.chain()), but it can't see this 
method and throws an exception (which is caught by Nevow).

Examining the Javascript objects through Firebug shows that XCall.B doesn't 
have any of the methods passed to its methods() method in the object 
top-level namespace; instead, these are all available in the &quot;prototype&quot; 
attribute.

In other words, I can call XCall.B.prototype.chain(), but not XCall.B.chain().

Now, I know that the &quot;prototype&quot; attribute is the kooky way that Javascript 
implements some of its OO-ness, but all the Nevow code seems not to do it 
this way: it just imports and uses directly:

    // import Foo.Bar
    Foo.Bar.doStuff()

so I'm confused as to why I can't do the same thing myself. 

I'm running Python 2.5, Twisted 2.5.0, and have the same problem on both Nevow 
0.9.18 and on trunk head.

Can anyone spot what I'm doing wrong?

Thanks,

Ricky

-------------- next part --------------
A non-text attachment was scrubbed...
Name: xcall.tar.gz
Type: application/x-tgz
Size: 1622 bytes
Desc: not available
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20070530/918cf08d/xcall.tar.bin">http://twistedmatrix.com/pipermail/twisted-web/attachments/20070530/918cf08d/xcall.tar.bin</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003377.html">[Twisted-web] XML-RPC and Authentication
</A></li>
	<LI>Next message: <A HREF="003379.html">[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3378">[ date ]</a>
              <a href="thread.html#3378">[ thread ]</a>
              <a href="subject.html#3378">[ subject ]</a>
              <a href="author.html#3378">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
