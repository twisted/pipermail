<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Trouble%20chaining%20Javascript%20module%20calls%20in%20Athena%0A%09%28example%20code%20attached%29.&In-Reply-To=20070529232523.30678.930574423.divmod.quotient.7359%40ohm">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003379.html">
   <LINK REL="Next"  HREF="003383.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).</H1>
    <B>kgi</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Trouble%20chaining%20Javascript%20module%20calls%20in%20Athena%0A%09%28example%20code%20attached%29.&In-Reply-To=20070529232523.30678.930574423.divmod.quotient.7359%40ohm"
       TITLE="[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).">iacovou at gmail.com
       </A><BR>
    <I>Wed May 30 05:58:48 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003379.html">[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).
</A></li>
        <LI>Next message: <A HREF="003383.html">[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3381">[ date ]</a>
              <a href="thread.html#3381">[ thread ]</a>
              <a href="subject.html#3381">[ subject ]</a>
              <a href="author.html#3381">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wednesday 30 May 2007 02:25:23 Jean-Paul Calderone wrote:
&gt;<i> On Wed, 30 May 2007 01:44:07 +0300, kgi &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">iacovou at gmail.com</A>&gt; wrote:
</I>
Hi Jean-Paul; thanks yet again for chiming in with a timely response.

&gt;<i> This is like trying to call an unbound method in Python.  What you really
</I>&gt;<i> want to be doing is calling chain on an /instance/ of XCall.B, not on the
</I>&gt;<i> class object itself.
</I>
I see what you mean. I *thought* I was just mimicking the approach used in 
lots of the Nevow code itself, but now I see The Error Of My Ways. Just to 
make sure that my insight is not bogus, can you comment on the &quot;truthiness&quot; 
of the following statements:

1. When a LiveElement is rendered, it is assigned an Athena Id (probably 
server-side) and something in the Nevow runtime creates a class *instance*, 
identifiable and accessible from the server through the magic of the Athena 
Id. In other words, there is rarely (never?) direct instantiation in JS code 
of objects (&quot;var f = new Foo()&quot;) when the classes are Athena subclasses.

2. If I instantiated N LiveElements of the same class, all N would be 
individually accessible from the server just by calling object.callRemote().

3. However, whereas server-&gt;client calls have implicit access to the Athena 
Id, so the callRemote() can be routed accordingly to the right instance, 
client-side Javascript doesn't have this.

I think I was confused by the fact that up until now I've only been having one 
LiveElement instance of each type on a page, so I never had to think about 
object disambiguation.

If this is the case, then I need a way of informing *client* side objects how 
to find each other. In other words, I need to embed the callee javascript 
object's Athena Id into the caller, either at creation time, or later. Is 
this a &quot;done thing&quot;?

(Either that, or I go via the server)

&gt;<i> Also, I'd recommend not clobbering XCall.A and XCall.B with your class
</I>&gt;<i> objects, since those are set up to be module objects because they each
</I>&gt;<i> have a corresponding .js file.  Athena's module system tries to mimick
</I>&gt;<i> many aspects of Python's - in this case, XCall corresponds to a package,
</I>&gt;<i> XCall.A and XCall.B are modules in that package, and you want to be
</I>&gt;<i> defining things like XCall.A.Foo and XCall.B.Bar as attributes of those
</I>&gt;<i> modules.
</I>
Ah, I see. You mean that the very existence of the files XCall/A.js sets up 
the (empty?) XCall.A namespace, and within XCall.A.js I define classes like:

  XCall.A.Foo = Nevow.Athena.Widget.subclass ( 'XCall.A.Foo' );

Thanks again for your help, Jean-Paul, I know how busy you guys are. I'm sorry 
if it takes two or three attempts to get my head round some of the muddier 
aspects of how it all fits together - it's all pretty new and unfamiliar.

Regards,

Ricky

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003379.html">[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).
</A></li>
	<LI>Next message: <A HREF="003383.html">[Twisted-web] Trouble chaining Javascript module calls in Athena
	(example code attached).
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3381">[ date ]</a>
              <a href="thread.html#3381">[ thread ]</a>
              <a href="subject.html#3381">[ subject ]</a>
              <a href="author.html#3381">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
