<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] twisted.web2.stream.IStream.reset()?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20twisted.web2.stream.IStream.reset%28%29%3F&In-Reply-To=228E5503-2000-4721-A269-79A72C4B3228%40slamb.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001928.html">
   <LINK REL="Next"  HREF="001927.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] twisted.web2.stream.IStream.reset()?</H1>
    <B>James Y Knight</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20twisted.web2.stream.IStream.reset%28%29%3F&In-Reply-To=228E5503-2000-4721-A269-79A72C4B3228%40slamb.org"
       TITLE="[Twisted-web] twisted.web2.stream.IStream.reset()?">foom at fuhm.net
       </A><BR>
    <I>Mon Sep 26 13:04:09 MDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001928.html">[Twisted-web] twisted.web2.stream.IStream.reset()?
</A></li>
        <LI>Next message: <A HREF="001927.html">[Twisted-web] web2.client: Extraneous '\n' in Authorization: header
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1937">[ date ]</a>
              <a href="thread.html#1937">[ thread ]</a>
              <a href="subject.html#1937">[ subject ]</a>
              <a href="author.html#1937">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sep 24, 2005, at 12:41 PM, Scott Lamb wrote:
&gt;<i> On second, thought, i don't buy this at all. You're saying that  
</I>&gt;<i> this wrapper should provide the buffering itself to provide  
</I>&gt;<i> restartability? Will the data be large / should this buffering  
</I>&gt;<i> happen in memory or on disk? For MemoryStream and FileStream, the  
</I>&gt;<i> answers differ. In both cases, the buffering is silly, though; they  
</I>&gt;<i> have all the information to reset themselves.
</I>
Doing any sort of automatic buffering is going to be a bad solution,  
because you won't be able to discard the buffer until you've got the  
final response from the other side, which may not happen until you've  
sent all 20GB of data, two days from now. If the server is well- 
designed, it will send an authorization denied error before you've  
uploaded everything, but you cannot rely on that. And you really  
don't really want to have the server buffer all that data for two  
days. Of course, you also don't want to upload it twice, but some  
things you've just gotta live with. So, anyhow, I think any buffering  
must be explicit so the developer has to explicitly ask to shoot  
themselves in the foot.

Also, I've tried to keep the stream API and implementation relatively  
simple and easy to understand. Some bits of it do get complicated  
already, but I think adding reset will complicate it quite a bit  
further for any non-trivial stream. So, what do you do? Probably it'd  
be best to pass something from which you can get a stream, rather  
than a stream itself. Thus if you need to get the stream again, you  
can call the function again. No muss, no fuss.

James
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20050926/a3e9dee3/attachment.htm">http://twistedmatrix.com/pipermail/twisted-web/attachments/20050926/a3e9dee3/attachment.htm</A>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001928.html">[Twisted-web] twisted.web2.stream.IStream.reset()?
</A></li>
	<LI>Next message: <A HREF="001927.html">[Twisted-web] web2.client: Extraneous '\n' in Authorization: header
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1937">[ date ]</a>
              <a href="thread.html#1937">[ thread ]</a>
              <a href="subject.html#1937">[ subject ]</a>
              <a href="author.html#1937">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
