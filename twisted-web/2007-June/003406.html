<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Twisted and SQLAlchemy Cache Problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Twisted%20and%20SQLAlchemy%20Cache%20Problem&In-Reply-To=71e31fe60706130540p450c6ea9g10ee322331b4384b%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003411.html">
   <LINK REL="Next"  HREF="003413.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Twisted and SQLAlchemy Cache Problem</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Twisted%20and%20SQLAlchemy%20Cache%20Problem&In-Reply-To=71e31fe60706130540p450c6ea9g10ee322331b4384b%40mail.gmail.com"
       TITLE="[Twisted-web] Twisted and SQLAlchemy Cache Problem">exarkun at divmod.com
       </A><BR>
    <I>Wed Jun 13 09:15:59 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003411.html">[Twisted-web] Twisted and SQLAlchemy Cache Problem
</A></li>
        <LI>Next message: <A HREF="003413.html">[Twisted-web] Failure to install javascripts in Nevow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3406">[ date ]</a>
              <a href="thread.html#3406">[ thread ]</a>
              <a href="subject.html#3406">[ subject ]</a>
              <a href="author.html#3406">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 13 Jun 2007 14:40:11 +0200, Magnus Hult &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">magnus at spotify.com</A>&gt; wrote:
&gt;<i>Hi,
</I>&gt;<i>
</I>&gt;<i>When executing the following program, changes in the database (other
</I>&gt;<i>than those made by this program) aren't visible until it is restarted,
</I>&gt;<i>due to some form of SQLAlchemy caching:
</I>&gt;<i>
</I>&gt;<i>from twisted.web import server, resource
</I>&gt;<i>import model # my database model
</I>&gt;<i>
</I>&gt;<i>class MyRoot(resource.Resource):
</I>&gt;<i>  def render(self, request):
</I>&gt;<i>    m = model.MyModel.get(request.args['id'][0])
</I>&gt;<i>    return m.some_column
</I>
Here, you're arranging to render whatever the expression `m.some_column'
evaluates to.  However that is implemented and whatever value it results
in, that's what will be rendered on the page.

&gt;<i> [snip - db and service setup]
</I>&gt;<i>
</I>&gt;<i>So if I visit <A HREF="http://localhost:8080/?id=1,">http://localhost:8080/?id=1,</A> then alter the some_column
</I>&gt;<i>value for the row who's id is 1 and reload, the change is not
</I>&gt;<i>reflected.
</I>&gt;<i>
</I>&gt;<i>Problem is, I need the update to be visible. How would I go about
</I>&gt;<i>implementing this?
</I>&gt;<i>
</I>
It would seem that `m.some_column' evaluates to the same value each time
the page is rendered.  Could it be that SQLAlchemy is performing some
undesirable caching which is preventing the new value from showing up?  I
am not particularly familiar with SQLAlchemy, so I'm not sure why this
might be.  It does seem like you want to be looking into SQLAlchemy behavior
to figure this out, though.

Hope this helps,

Jean-Paul

</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003411.html">[Twisted-web] Twisted and SQLAlchemy Cache Problem
</A></li>
	<LI>Next message: <A HREF="003413.html">[Twisted-web] Failure to install javascripts in Nevow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3406">[ date ]</a>
              <a href="thread.html#3406">[ thread ]</a>
              <a href="subject.html#3406">[ subject ]</a>
              <a href="author.html#3406">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
