<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] 100% CPU; what are my options?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20100%25%20CPU%3B%20what%20are%20my%20options%3F&In-Reply-To=20100103073202.GM2630%40steerpike.home.puzzling.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004407.html">
   <LINK REL="Next"  HREF="004409.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] 100% CPU; what are my options?</H1>
    <B>Alex Clemesha</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20100%25%20CPU%3B%20what%20are%20my%20options%3F&In-Reply-To=20100103073202.GM2630%40steerpike.home.puzzling.org"
       TITLE="[Twisted-web] 100% CPU; what are my options?">clemesha at gmail.com
       </A><BR>
    <I>Sun Jan  3 04:10:02 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="004407.html">[Twisted-web] 100% CPU; what are my options?
</A></li>
        <LI>Next message: <A HREF="004409.html">[Twisted-web] Parallelism is twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4408">[ date ]</a>
              <a href="thread.html#4408">[ thread ]</a>
              <a href="subject.html#4408">[ subject ]</a>
              <a href="author.html#4408">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Jan 3, 2010 at 7:32 AM, Andrew Bennetts &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">andrew at bemusement.org</A>&gt; wrote:
&gt;<i> Leif K-Brooks wrote:
</I>&gt;<i> [...]
</I>&gt;&gt;<i> - EPollReactor
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Omegle currently runs at close to 100% CPU for most of the day, and
</I>I really hope us people on this mailing list can help you fix this issue,
instead of you re-writing your (very cool) app in Erlang or whatever.
In my opinion, then we will have a success story.

Load-balancing over several twisted.web instances seems like something
easy to try,
have you looked harder into that yet? Maybe because you are running the entire
app on just one machine you are seeing some sort of contention between
processes?

More statistics/benchmarks could really help us pin-point the issue.



&gt;<i>
</I>&gt;<i> 100% CPU with epoll sounds like &lt;<A HREF="http://twistedmatrix.com/trac/ticket/2809">http://twistedmatrix.com/trac/ticket/2809</A>&gt;,
</I>&gt;<i> which was fixed in Twisted 8.0.0. &#160;Which version of Twisted are you using?
</I>It looks like he is using version &quot;TwistedWeb/8.1.0&quot;. (from the
Firefox 'server spy' plugin I have).


-Alex




&gt;<i>
</I>&gt;<i> [...]
</I>&gt;&gt;<i> - I've looked at my code pretty closely, and it doesn't seem to be
</I>&gt;&gt;<i> doing anything particularly inefficient, but are there any tricks I
</I>&gt;&gt;<i> might be able to use to increase performance? Tweaking settings, etc.?
</I>&gt;<i>
</I>&gt;<i> Run it under a profiler. &#160;You can't know where the time is going if you
</I>&gt;<i> don't measure. &#160;Guesses about this sort of thing are usually wrong, so
</I>&gt;<i> measurement is vital.
</I>&gt;<i>
</I>&gt;<i> -Andrew.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-web mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">Twisted-web at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web</A>
</I>&gt;<i>
</I>


-- 
Alex Clemesha
clemesha.org

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004407.html">[Twisted-web] 100% CPU; what are my options?
</A></li>
	<LI>Next message: <A HREF="004409.html">[Twisted-web] Parallelism is twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4408">[ date ]</a>
              <a href="thread.html#4408">[ thread ]</a>
              <a href="subject.html#4408">[ subject ]</a>
              <a href="author.html#4408">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
