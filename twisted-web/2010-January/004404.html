<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] 100% CPU; what are my options?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20100%25%20CPU%3B%20what%20are%20my%20options%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004403.html">
   <LINK REL="Next"  HREF="004405.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] 100% CPU; what are my options?</H1>
    <B>Leif K-Brooks</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20100%25%20CPU%3B%20what%20are%20my%20options%3F&In-Reply-To="
       TITLE="[Twisted-web] 100% CPU; what are my options?">eurleif at gmail.com
       </A><BR>
    <I>Sat Jan  2 22:26:57 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="004403.html">[Twisted-web] twisted version of openid
</A></li>
        <LI>Next message: <A HREF="004405.html">[Twisted-web] 100% CPU; what are my options?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4404">[ date ]</a>
              <a href="thread.html#4404">[ thread ]</a>
              <a href="subject.html#4404">[ subject ]</a>
              <a href="author.html#4404">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey,

I operate Omegle (<A HREF="http://omegle.com/">http://omegle.com/</A>), which is a COMET-driven
Twisted.Web app. (It doesn't use Nevow or anything; just Twisted.Web.)
It gets fairly heavy traffic; right now, it peaks daily at around 6500
concurrent users. Technical details:

- Hosted on a Linode 2880 virtual private server
(<A HREF="https://www.linode.com/">https://www.linode.com/</A>); Ubuntu, 2880 MB of RAM, 4 cores available
- EPollReactor

Omegle currently runs at close to 100% CPU for most of the day, and
I'm a bit concerned about that. Here are some questions I have:

- How much more load might my app be able to take before it dies?
Currently, during peak load, a request from localhost is completed in
around 350ms; not ideal, but acceptable. I think anything under 1000ms
would be all right, but I'd prefer the latency to be as low as
possible, of course. Is this likely to scale linearly with traffic, or
what?
- I've looked at my code pretty closely, and it doesn't seem to be
doing anything particularly inefficient, but are there any tricks I
might be able to use to increase performance? Tweaking settings, etc.?
- Ultimately, I think my app will need to be able to use multiple
cores. If I have to, I'm going to either rewrite it in Erlang, or
rewrite it to load balance across multiple Twisted processes. Is there
anything easier I could do to allow the use of multiple cores?

Thanks a lot,
Leif

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004403.html">[Twisted-web] twisted version of openid
</A></li>
	<LI>Next message: <A HREF="004405.html">[Twisted-web] 100% CPU; what are my options?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4404">[ date ]</a>
              <a href="thread.html#4404">[ thread ]</a>
              <a href="subject.html#4404">[ subject ]</a>
              <a href="author.html#4404">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
