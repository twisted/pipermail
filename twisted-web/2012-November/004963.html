<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Peculiarity with putChild() using the root of the	webserver
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Peculiarity%20with%20putChild%28%29%20using%20the%20root%20of%20the%0A%09webserver&In-Reply-To=CAF-ggVNWo7_10OHyZ20tLzapzoZ%2BhbXejujUkOpnRkVpiQ8zmA%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004962.html">
   <LINK REL="Next"  HREF="004964.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Peculiarity with putChild() using the root of the	webserver</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Peculiarity%20with%20putChild%28%29%20using%20the%20root%20of%20the%0A%09webserver&In-Reply-To=CAF-ggVNWo7_10OHyZ20tLzapzoZ%2BhbXejujUkOpnRkVpiQ8zmA%40mail.gmail.com"
       TITLE="[Twisted-web] Peculiarity with putChild() using the root of the	webserver">glyph at twistedmatrix.com
       </A><BR>
    <I>Thu Nov 15 02:55:58 EST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="004962.html">[Twisted-web] Peculiarity with putChild() using the root of the	webserver
</A></li>
        <LI>Next message: <A HREF="004964.html">[Twisted-web] Problems with Twisted Web &amp; non-standard file names...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4963">[ date ]</a>
              <a href="thread.html#4963">[ thread ]</a>
              <a href="subject.html#4963">[ subject ]</a>
              <a href="author.html#4963">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Rich,

On Nov 14, 2012, at 7:05 PM, Rich Brown &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">richb.hanover at gmail.com</A>&gt; wrote:

&gt;<i> I have been playing with Twisted 12.2.0, and encountered this minor infelicity:
</I>
10 points for use of the word &quot;infelicity&quot;.

&gt;<i> 1) Files not at the root of the web server work as expected:
</I>&gt;<i> 
</I>&gt;<i> a) putChild(&quot;foo&quot;, File(&quot;some-directory&quot;)) works as expected - URL is <A HREF="http://example.com/foo/">http://example.com/foo/</A>
</I>&gt;<i> 
</I>&gt;<i> b) Navigating to the directory &quot;bar&quot; within &quot;foo&quot; gives a URL of <A HREF="http://example.com/foo/bar/">http://example.com/foo/bar/</A> as expected.
</I>
Glad to hear it.

&gt;<i> 2) Files at the root of the web server wind up with an extra &quot;/&quot; in the URL:
</I>&gt;<i> 
</I>&gt;<i> a)  putChild(&quot;&quot;, File(&quot;some-directory&quot;)) yields a URL of <A HREF="http://example.com//">http://example.com//</A>   &lt;-- note double slash
</I>
This is not the root of the web server.

The thing you are calling putChild *on* is the root of the web server.  You are placing a directory as the index of another directory.  This is obviously a sort of silly thing to do, but it is nevertheless possible.

&gt;<i> b) navigating to the same directory &quot;bar&quot; gives: <A HREF="http://example.com//bar">http://example.com//bar</A>   &lt;-- double-slash again...
</I>
Think of this as &quot;.getChild('').getChild('bar')&quot; rather than &quot;double-slash&quot;.  Or rather, .getChild(x).getChild(y) where x and y happen to be '' and 'bar' respectively; there just isn't anything special about '' other than it looking funny to humans.

&gt;<i> Conclusion:
</I>&gt;<i> 
</I>&gt;<i> I think it would make sense to special the case of the root directory and not output a double &quot;//&quot; in the URL.
</I>
I think the thing to do would be to provide some better debugging / diagnostic / visualization tools to allow people to see what sort of hierarchy they've constructed, since this is in some sense an entirely sensible thing.  I was momentarily tempted to say that we should make it an error, but then I realized that while constructing hierarchies this way is perhaps gauche according to the idioms of the web, is is in no way incorrect, and there's no reason to break people's programs for doing it.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-web/attachments/20121114/3a0a0103/attachment.htm">http://twistedmatrix.com/pipermail/twisted-web/attachments/20121114/3a0a0103/attachment.htm</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004962.html">[Twisted-web] Peculiarity with putChild() using the root of the	webserver
</A></li>
	<LI>Next message: <A HREF="004964.html">[Twisted-web] Problems with Twisted Web &amp; non-standard file names...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4963">[ date ]</a>
              <a href="thread.html#4963">[ thread ]</a>
              <a href="subject.html#4963">[ subject ]</a>
              <a href="author.html#4963">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
