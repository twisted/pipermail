<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> Fwd: [Twisted-web] [Nevow] again on data directive
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Fwd%3A%20%5BTwisted-web%5D%20%5BNevow%5D%20again%20on%20data%20directive&In-Reply-To=8b339dc40701040432waaa3717q6fccac2494323daf%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003246.html">
   <LINK REL="Next"  HREF="003247.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Fwd: [Twisted-web] [Nevow] again on data directive</H1>
    <B>Manlio Perillo</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Fwd%3A%20%5BTwisted-web%5D%20%5BNevow%5D%20again%20on%20data%20directive&In-Reply-To=8b339dc40701040432waaa3717q6fccac2494323daf%40mail.gmail.com"
       TITLE="Fwd: [Twisted-web] [Nevow] again on data directive">manlio_perillo at libero.it
       </A><BR>
    <I>Thu Jan  4 06:53:06 CST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003246.html">[Twisted-web] [Nevow] again on data directive
</A></li>
        <LI>Next message: <A HREF="003247.html">[Twisted-web] SCGI support in Web2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3242">[ date ]</a>
              <a href="thread.html#3242">[ thread ]</a>
              <a href="subject.html#3242">[ subject ]</a>
              <a href="author.html#3242">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>sifu ha scritto:
&gt;<i> hmmmm... couldn't send it to the list.
</I>&gt;<i> 
</I>&gt;<i> ---------- Forwarded message ----------
</I>&gt;<i> From: sifu &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">lists at 0xx0.net</A>&gt;
</I>&gt;<i> To: &quot;Twisted Web World&quot; &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">twisted-web at twistedmatrix.com</A>&gt;
</I>&gt;<i> Date: Thu, 4 Jan 2007 13:28:46 +0100
</I>&gt;<i> Subject: Re: [Twisted-web] [Nevow] again on data directive
</I>&gt;<i> with the current nevow you can do:
</I>&gt;<i> 
</I>&gt;<i> &lt;div n:render=&quot;yyy xxx&quot; /&gt;
</I>&gt;<i> 
</I>&gt;<i> def render_yyy( self, argument ):
</I>&gt;<i>    def _( ctx, data ):
</I>&gt;<i>        assert argument == 'xxx'
</I>&gt;<i>    return _
</I>&gt;<i> 
</I>&gt;<i> but some nevow developers don't like the feature and want to get rid of it.
</I>&gt;<i> 
</I>
The problem with the current implementation is that data directives are 
handled by the Nevow rendering machinery (with object adaptation).

I'm proposing that data directive must be handled by the user.

Here is an example:


&lt;ul n:render=&quot;list&quot;&gt;
   &lt;li n:data=&quot;x&quot; n:render=&quot;item&quot; /&gt;
   &lt;li n:data=&quot;y&quot; n:render=&quot;item  /&gt;
&lt;/ul&gt;


def render_list(request, tag):
    request.data = {'x': 1, 'y': 2}
    return tag

def render_item(request, tag):
    item = request.data[tag.data]
    return tag[item]


Without data directive I have to do:

&lt;ul n:render=&quot;list&quot;&gt;
   &lt;li n:pattern=&quot;x&quot;&gt;&lt;n:slot name=&quot;value&quot; /&gt;&lt;/li&gt;
   &lt;li n:pattern=&quot;y&quot; /&gt;&lt;n:slot name=&quot;value&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;


def render_list(request, tag):
    data = {'x': 1, 'y': 2}
    for key, val in data.iteritems():
       pat = tag.onePattern(key)
       pat.fillSlots('value', val)

    return tag



In this example, using only patterns and slots is easy (and I do not 
have to store data on the request object), but I'm not sure this will be 
the same with a more complex template.

I will try to do same tests.



Regards  Manlio Perillo

</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003246.html">[Twisted-web] [Nevow] again on data directive
</A></li>
	<LI>Next message: <A HREF="003247.html">[Twisted-web] SCGI support in Web2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3242">[ date ]</a>
              <a href="thread.html#3242">[ thread ]</a>
              <a href="subject.html#3242">[ subject ]</a>
              <a href="author.html#3242">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
