<tt>
&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;May&nbsp;7,&nbsp;2008&nbsp;at&nbsp;12:49&nbsp;PM,&nbsp;Tristan&nbsp;Seligmann&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:mithrandi@mithrandi.net&quot;&gt;mithrandi@mithrandi.net&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;PADDING-LEFT:&nbsp;1ex;&nbsp;MARGIN:&nbsp;0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;&nbsp;BORDER-LEFT:&nbsp;#ccc&nbsp;1px&nbsp;solid&quot;&gt;I&nbsp;haven&amp;#39;t&nbsp;yet&nbsp;had&nbsp;the&nbsp;chance&nbsp;to&nbsp;track&nbsp;this&nbsp;down,&nbsp;so&nbsp;by&nbsp;all&nbsp;means,&nbsp;go&lt;br&gt;&lt;/blockquote&gt;<br>
&lt;div&gt;&amp;nbsp;&lt;/div&gt;Tristan,&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;Just&nbsp;a&nbsp;minor&nbsp;cosmetic&nbsp;touch&nbsp;to&nbsp;my&nbsp;previous&nbsp;fix.&nbsp;Shouldn&amp;#39;t&nbsp;make&nbsp;any&nbsp;visible&nbsp;difference,&nbsp;but&nbsp;makes&nbsp;the&nbsp;code&nbsp;look&nbsp;slightly&nbsp;less&nbsp;IE-centric.&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&amp;nbsp;&lt;br&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt;------------------&nbsp;Nevow/Athena/__init__.js&nbsp;(2&nbsp;additions)&nbsp;--------------------------&lt;br&gt;Nevow.Athena.Widget._initialize&nbsp;=&nbsp;function()&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Divmod.debug(&amp;quot;widget&amp;quot;,&nbsp;&amp;quot;Instantiating&nbsp;live&nbsp;widgets&amp;quot;);&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Nevow.Athena.Widget._pageLoaded&nbsp;=&nbsp;true;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;//&nbsp;With&nbsp;the&nbsp;next&nbsp;line,&nbsp;sendCloseMessage&nbsp;will&nbsp;get&nbsp;called&nbsp;in&nbsp;IE.&nbsp;//&nbsp;Harald&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Divmod.Base.addUnLoadEvent(Nevow.Athena.page.deliveryChannel);&nbsp;//&nbsp;Harald&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Nevow.Athena.Widget._instantiateWidgets();&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Divmod.debug(&amp;quot;widget&amp;quot;,&nbsp;&amp;quot;Finished&nbsp;instantiating&nbsp;live&nbsp;widgets&amp;quot;);&lt;br&gt;};&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt;Nevow.Athena.bootstrap&nbsp;=&nbsp;function&nbsp;(pageClassName,&nbsp;clientID)&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;var&nbsp;self&nbsp;=&nbsp;this;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;var&nbsp;pageClass&nbsp;=&nbsp;Divmod.namedAny(pageClassName);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.page&nbsp;=&nbsp;pageClass(clientID,&nbsp;Nevow.Athena._createMessageDelivery);&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Nevow.Athena.page&nbsp;=&nbsp;self.page;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;//&nbsp;Harald&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.page.bindEvents(window);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;.....&lt;br&gt;&lt;/font&gt;&amp;nbsp;&lt;br&gt;------------------&nbsp;Divmod/Base.js&nbsp;(1&nbsp;added&nbsp;function&nbsp;at&nbsp;the&nbsp;end)&nbsp;--------------------------&lt;br&gt;<br>
&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt;Divmod.Base.addUnLoadEvent&nbsp;=&nbsp;function(channel)&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;/***&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Harald&amp;#39;s&nbsp;desperate&nbsp;try&nbsp;to&nbsp;get&nbsp;IE&nbsp;page&nbsp;refresh&nbsp;to&nbsp;work...&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;***/&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;(window.attachEvent)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;window.attachEvent(&amp;quot;onunload&amp;quot;,&nbsp;function&nbsp;(e)&nbsp;{channel.sendCloseMessage();});&lt;br&gt;<br>
};&lt;br&gt;Divmod.Base.jsonRegistry&nbsp;=&nbsp;Divmod.Base.AdapterRegistry();&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;Have&nbsp;you&nbsp;had&nbsp;a&nbsp;chance&nbsp;to&nbsp;try&nbsp;it?&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;Harald&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&amp;nbsp;&lt;/div&gt;<br>

</tt>
