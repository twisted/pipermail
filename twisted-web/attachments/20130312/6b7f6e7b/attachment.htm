<tt>
&lt;html&gt;&lt;body&gt;&lt;div&nbsp;style=&quot;color:#000;&nbsp;background-color:#fff;&nbsp;font-family:times&nbsp;new&nbsp;roman,&nbsp;new&nbsp;york,&nbsp;times,&nbsp;serif;font-size:12pt&quot;&gt;I&nbsp;penned&nbsp;the&nbsp;questions&nbsp;at&nbsp;3am,&nbsp;so&nbsp;please&nbsp;punt&nbsp;my&nbsp;second&nbsp;question&nbsp;since&nbsp;it&nbsp;is&nbsp;half-baked.&amp;nbsp;&nbsp;Found&nbsp;some&nbsp;time&nbsp;this&nbsp;afternoon&nbsp;to&nbsp;revisit&nbsp;bulk-data&nbsp;flow&nbsp;discussion&nbsp;in&nbsp;Steven's&nbsp;book.&nbsp;&amp;nbsp;&lt;br&gt;&lt;br&gt;The&nbsp;first&nbsp;question&nbsp;still&nbsp;applies&nbsp;though.&lt;br&gt;&lt;br&gt;Using&nbsp;the&nbsp;protocol's&nbsp;transport&nbsp;object,&nbsp;I&nbsp;can&nbsp;fetch&nbsp;the&nbsp;SO_RCVBUF&nbsp;value&nbsp;on&nbsp;the&nbsp;'accepted'&nbsp;connection&nbsp;and&nbsp;even&nbsp;set&nbsp;the&nbsp;SO_SNDBUF&nbsp;value.&amp;nbsp;&nbsp;However,&nbsp;since&nbsp;TCP&nbsp;Window&nbsp;scaling&nbsp;is&nbsp;enabled&nbsp;by&nbsp;default,&nbsp;it&nbsp;is&nbsp;my&nbsp;understanding&nbsp;that&nbsp;the&nbsp;SO_RCVBUF&nbsp;has&nbsp;to&nbsp;be&nbsp;set&nbsp;before&nbsp;the&nbsp;listen()&nbsp;call&nbsp;is&nbsp;invoked.&amp;nbsp;&nbsp;The&nbsp;.tac&nbsp;file&nbsp;passes&nbsp;the&nbsp;TCPServer&nbsp;object&nbsp;to&nbsp;application/service&nbsp;framework,&nbsp;which&nbsp;in&nbsp;turn&nbsp;calls&nbsp;the&nbsp;listener.&amp;nbsp;&nbsp;So&nbsp;I&nbsp;am&nbsp;wondering&nbsp;if&nbsp;I&nbsp;have&nbsp;to&nbsp;derive&nbsp;a&nbsp;subclass&nbsp;of&nbsp;TCPServer&nbsp;and&nbsp;somehow&nbsp;set&nbsp;the&nbsp;SO_RCVBUF&nbsp;value&nbsp;before&nbsp;the&nbsp;application&nbsp;framework&nbsp;invokes&nbsp;listen();&amp;nbsp;&nbsp;i.e.&nbsp;drill&nbsp;down&nbsp;to&nbsp;the&nbsp;Port<br>
&nbsp;object&nbsp;where&nbsp;it&nbsp;calls&nbsp;createInternetSocket()?&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;times&nbsp;new&nbsp;roman,&nbsp;new&nbsp;york,&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;times&nbsp;new&nbsp;roman,&nbsp;new&nbsp;york,&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&lt;div&nbsp;id=&quot;yiv1863000755&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Mar&nbsp;12,&nbsp;2013,&nbsp;at&nbsp;3:15&nbsp;AM,&nbsp;A&nbsp;Desai&nbsp;&amp;lt;&lt;a&nbsp;rel=&quot;nofollow&quot;&nbsp;ymailto=&quot;mailto:ardesai@yahoo.com&quot;&nbsp;target=&quot;_blank&quot;&nbsp;href=&quot;mailto:ardesai@yahoo.com&quot;&gt;ardesai@yahoo.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;yiv1863000755Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;style=&quot;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;&quot;&gt;&lt;div&nbsp;style=&quot;background-color:rgb(255,&nbsp;255,&nbsp;255);font-family:'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;font-size:12pt;&quot;&gt;&lt;div&gt;Scenario:&amp;nbsp;&nbsp;TCP&nbsp;Receive&nbsp;Buffer&nbsp;on&nbsp;twisted&nbsp;HTTP&nbsp;server&nbsp;using&nbsp;the&nbsp;twisted&nbsp;application&nbsp;framework.&amp;nbsp;&nbsp;And&nbsp;its&nbsp;behavior&nbsp;when&nbsp;set&nbsp;up&nbsp;as&nbsp;producer/consumer.&lt;br&gt;&lt;/div&gt;&lt;div<br>
&nbsp;style=&quot;font-size:16px;font-family:'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;background-color:transparent;font-style:normal;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:16px;font-family:'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;background-color:transparent;font-style:normal;&quot;&gt;(1)&nbsp;Would&nbsp;like&nbsp;to&nbsp;set&nbsp;the&nbsp;receive&nbsp;buffer&nbsp;size&nbsp;on&nbsp;socket.&amp;nbsp;&nbsp;One&nbsp;way&nbsp;to&nbsp;do&nbsp;this&nbsp;would&nbsp;be&nbsp;to&nbsp;create&nbsp;a&nbsp;derived&nbsp;class&nbsp;of&nbsp;TCPServer&nbsp;(or&nbsp;SSLServer)&nbsp;and&nbsp;set&nbsp;the&nbsp;buffer&nbsp;size&nbsp;and&nbsp;use&nbsp;derived&nbsp;class&nbsp;server&nbsp;in&nbsp;the&nbsp;.tac&nbsp;file.&amp;nbsp;&nbsp;Would&nbsp;like&nbsp;to&nbsp;know&nbsp;if&nbsp;there&nbsp;is&nbsp;any&nbsp;sample&nbsp;code&nbsp;for&nbsp;such&nbsp;usage?&amp;nbsp;&nbsp;For&nbsp;example,&nbsp;in&nbsp;which&nbsp;method&nbsp;of&nbsp;the&nbsp;derived&nbsp;class&nbsp;would&nbsp;one&nbsp;set&nbsp;the&nbsp;receive&nbsp;buffer&nbsp;size?&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;You&nbsp;don't&nbsp;need&nbsp;to&nbsp;subclass&nbsp;these&nbsp;classes;&nbsp;and&nbsp;in&nbsp;any&nbsp;event,&nbsp;it&nbsp;wouldn't&nbsp;help,&nbsp;TCPServer&nbsp;and&nbsp;SSLServer&nbsp;don't&nbsp;have&nbsp;connections&nbsp;of&nbsp;their&nbsp;own,&nbsp;they're&nbsp;services&nbsp;that&nbsp;hold&nbsp;&lt;i&gt;listening&lt;/i&gt;&nbsp;sockets,&nbsp;not&nbsp;connected&nbsp;sockets.&nbsp;&amp;nbsp;If&nbsp;you&nbsp;want&nbsp;to&nbsp;set&nbsp;an&nbsp;option&nbsp;unsupported&nbsp;by<br>
&nbsp;Twisted,&nbsp;&quot;transport.getHandle()&quot;&nbsp;will&nbsp;give&nbsp;you&nbsp;the&nbsp;Python&nbsp;socket&nbsp;object&nbsp;(on&nbsp;those&nbsp;reactors&nbsp;which&nbsp;use&nbsp;socket&nbsp;objects&nbsp;internally,&nbsp;which&nbsp;is&nbsp;most&nbsp;of&nbsp;them).&nbsp;&amp;nbsp;You&nbsp;can&nbsp;just&nbsp;set&nbsp;SO_RCVBUF&nbsp;on&nbsp;that&nbsp;socket&nbsp;from&nbsp;your&nbsp;Protocol&nbsp;class.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Also,&nbsp;this&nbsp;ticket&nbsp;may&nbsp;be&nbsp;of&nbsp;interest&nbsp;to&nbsp;you:&nbsp;&amp;lt;&lt;a&nbsp;rel=&quot;nofollow&quot;&nbsp;target=&quot;_blank&quot;&nbsp;href=&quot;https://twistedmatrix.com/trac/ticket/4089&quot;&gt;https://twistedmatrix.com/trac/ticket/4089&lt;/a&gt;&amp;gt;.&nbsp;&amp;nbsp;Tuning&nbsp;send&nbsp;and&nbsp;receive&nbsp;buffers&nbsp;&lt;i&gt;should&lt;/i&gt;&amp;nbsp;be&nbsp;more&nbsp;explicitly&nbsp;supported&nbsp;by&nbsp;Twisted.&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;style=&quot;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;&quot;&gt;&lt;div&nbsp;style=&quot;background-color:rgb(255,&nbsp;255,&nbsp;255);font-family:'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;font-size:12pt;&quot;&gt;&lt;div&nbsp;style=&quot;font-size:16px;font-family:'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;background-color:transparent;font-style:normal;&quot;&gt;(2)&nbsp;When&nbsp;an&nbsp;incoming&nbsp;http&nbsp;POST&nbsp;request<br>
&nbsp;is&nbsp;acting&nbsp;as&nbsp;a&nbsp;producer&nbsp;of&nbsp;data,&nbsp;which&nbsp;is&nbsp;tied&nbsp;to&nbsp;a&nbsp;consumer&nbsp;resource&nbsp;(some&nbsp;other&nbsp;connection),&nbsp;how&nbsp;can&nbsp;I&nbsp;control&nbsp;the&nbsp;incoming&nbsp;tcp&nbsp;window&nbsp;size,&nbsp;if&nbsp;the&nbsp;consumer&nbsp;has&nbsp;paused&nbsp;consuming?&amp;nbsp;&nbsp;I&nbsp;presume&nbsp;the&nbsp;incoming&nbsp;network&nbsp;data&nbsp;will&nbsp;keep&nbsp;piling&nbsp;up&nbsp;in&nbsp;the&nbsp;'huge'&nbsp;tcp&nbsp;buffer&nbsp;eventually&nbsp;advertising&nbsp;a&nbsp;'tcp&nbsp;zero&nbsp;window'&nbsp;to&nbsp;the&nbsp;network&nbsp;peer&nbsp;of&nbsp;the&nbsp;data&nbsp;producer,&nbsp;AND&nbsp;the&nbsp;server&nbsp;ends&nbsp;up&nbsp;using&nbsp;up&nbsp;a&nbsp;large&nbsp;amount&nbsp;of&nbsp;memory&nbsp;for&nbsp;the&nbsp;paused&nbsp;connection.&amp;nbsp;&nbsp;Is&nbsp;there&nbsp;an&nbsp;alternative?&amp;nbsp;&nbsp;I&nbsp;realize&nbsp;that&nbsp;the&nbsp;TCP&nbsp;protocol&nbsp;inhibits&nbsp;'reducing&nbsp;of&nbsp;an&nbsp;already&nbsp;advertised&nbsp;receive&nbsp;window',&nbsp;but&nbsp;I&nbsp;am&nbsp;wondering&nbsp;if&nbsp;pauseProducing()&nbsp;on&nbsp;an&nbsp;http&nbsp;channel&nbsp;could&nbsp;do&nbsp;something&nbsp;to&nbsp;at&nbsp;least&nbsp;prevent&nbsp;the&nbsp;tcp&nbsp;window&nbsp;size&nbsp;from&nbsp;increasing&nbsp;any&nbsp;further?&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;don't&nbsp;know&nbsp;that&nbsp;much&nbsp;about&nbsp;window&nbsp;scaling,&nbsp;but&nbsp;won't&nbsp;the&nbsp;fact&nbsp;that&nbsp;the&nbsp;application&nbsp;isn't&nbsp;receiving&nbsp;any&nbsp;data&nbsp;from&nbsp;the&nbsp;kernel&nbsp;automatically&nbsp;prevent&nbsp;the&nbsp;window&nbsp;from&nbsp;scaling&nbsp;any<br>
&nbsp;bigger?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-glyph&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;&nbsp;&lt;/div&gt;&nbsp;&lt;/div&gt;&nbsp;&nbsp;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
