<tt>
<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;Hi,&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;I&nbsp;use&nbsp;twisted&nbsp;as&nbsp;a&nbsp;very&nbsp;simple&nbsp;web&nbsp;server<br>
to&nbsp;serve&nbsp;python&nbsp;scripts.&nbsp;I&nbsp;now&nbsp;have&nbsp;a&nbsp;problem&nbsp;of&nbsp;memory&nbsp;leak&nbsp;on&nbsp;the&nbsp;server.<br>
I&nbsp;use&nbsp;Python&nbsp;2.2.1&nbsp;on&nbsp;QNX&nbsp;6.3,&nbsp;Twisted&nbsp;version&nbsp;is&nbsp;1.3.0.&nbsp;&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;I&nbsp;made&nbsp;the&nbsp;following&nbsp;test&nbsp;scripts&nbsp;:&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;&lt;u&gt;Web&nbsp;server&lt;/u&gt;&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;from&nbsp;twisted.web&nbsp;import&nbsp;server,&nbsp;resource,static,script&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;reactor&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;root&nbsp;=&nbsp;static.File(&amp;quot;site&amp;quot;)&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;root.processors&nbsp;=&nbsp;{'.py':&nbsp;script.PythonScript,&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;'.rpy':&nbsp;script.ResourceScript}&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;site&nbsp;=&nbsp;server.Site(root)&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;reactor.listenTCP(8500,&nbsp;site)&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;reactor.run()&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;&lt;u&gt;Test&nbsp;script&nbsp;(.rpy&nbsp;file)&lt;/u&gt;&lt;br&gt;<br>
&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;from&nbsp;twisted.web&nbsp;import&nbsp;resource&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;class&nbsp;Test(resource.Resource):&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;isLeaf&nbsp;=&nbsp;True&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;def&nbsp;render_GET(self,<br>
request):&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;return<br>
&amp;quot;&amp;quot;&amp;quot;&amp;lt;html&amp;gt;&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;lt;head&amp;gt;&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;lt;meta&nbsp;http-equiv=&amp;quot;refresh&amp;quot;<br>
content=&amp;quot;5&amp;quot;&amp;gt;&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;lt;/head&amp;gt;&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;Hello,&nbsp;world!&amp;lt;/html&amp;gt;&amp;quot;&amp;quot;&amp;quot;&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;resource&nbsp;=&nbsp;Test()&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;About&nbsp;every&nbsp;4&nbsp;&amp;quot;refresh&amp;quot;,&nbsp;the<br>
memory&nbsp;used&nbsp;by&nbsp;my&nbsp;server&nbsp;increases&nbsp;by&nbsp;96k,&nbsp;with&nbsp;nor&nbsp;release&nbsp;of&nbsp;memory.<br>
I&nbsp;checked&nbsp;the&nbsp;object&nbsp;number&nbsp;by&nbsp;watching&lt;/font&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;<br>
len(gc.get_objects())&lt;/font&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;,&nbsp;but&nbsp;it&nbsp;is<br>
stable.&nbsp;&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;Any&nbsp;idea&nbsp;to&nbsp;help&nbsp;me&nbsp;to&nbsp;solve&nbsp;this&nbsp;problem,<br>
my&nbsp;server&nbsp;is&nbsp;expected&nbsp;to&nbsp;run&nbsp;continuously.&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;Thanks.&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;Denis&lt;/font&gt;<br>
&lt;br&gt;
</tt>
