<tt>
&lt;HTML&gt;&lt;BODY&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-khtml-nbsp-mode:&nbsp;space;&nbsp;-khtml-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;BR&gt;&lt;DIV&gt;&lt;DIV&gt;On&nbsp;Jun&nbsp;29,&nbsp;2005,&nbsp;at&nbsp;2:32&nbsp;AM,&nbsp;Michael&nbsp;M&nbsp;wrote:&lt;/DIV&gt;&lt;BR&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;BLOCKQUOTE&nbsp;type=&quot;cite&quot;&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;Firstly,&nbsp;I&nbsp;love&nbsp;nevow,&nbsp;brilliant&nbsp;design,&nbsp;really&nbsp;just&nbsp;plain&nbsp;brilliant.&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;Thanks&nbsp;in&nbsp;advance&nbsp;for&nbsp;any&nbsp;help&nbsp;with&nbsp;this&nbsp;problem.&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;min-height:&nbsp;14px;&nbsp;&quot;&gt;&lt;BR&gt;&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;#&nbsp;PROBLEM&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;The&nbsp;livepage/evil&nbsp;example&nbsp;failes&nbsp;with&nbsp;this&nbsp;error&nbsp;in&nbsp;the&nbsp;Firefox&nbsp;JS&nbsp;console&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;min-height:&nbsp;14px;&nbsp;&quot;&gt;&lt;BR&gt;&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;#&nbsp;ERROR&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;Error:&nbsp;nevow_clientToServerEvent&nbsp;is&nbsp;not&nbsp;defined&lt;/DIV&gt;&lt;/BLOCKQUOTE&gt;&lt;BR&gt;&lt;/DIV&gt;&lt;DIV&gt;Sorry,&nbsp;that&nbsp;example&nbsp;is&nbsp;way&nbsp;out&nbsp;of&nbsp;date.&nbsp;livepage&nbsp;is&nbsp;still&nbsp;under&nbsp;heavy&nbsp;development&nbsp;and&nbsp;has&nbsp;changed&nbsp;a&nbsp;lot&nbsp;in&nbsp;the&nbsp;last&nbsp;year&nbsp;or&nbsp;so.&nbsp;It&nbsp;has&nbsp;even&nbsp;changed&nbsp;a&nbsp;lot&nbsp;since&nbsp;the&nbsp;last&nbsp;release&nbsp;(0.4.1).&nbsp;If&nbsp;you&nbsp;would&nbsp;like&nbsp;to&nbsp;use&nbsp;livepage,&nbsp;I&nbsp;suggest&nbsp;you&nbsp;get&nbsp;a&nbsp;svn&nbsp;checkout&nbsp;of:&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;svn://divmod.org/svn/Nevow/branches/dp/livepage-completion-notification-3&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;I&nbsp;have&nbsp;attached&nbsp;a&nbsp;simple&nbsp;example&nbsp;which&nbsp;works&nbsp;with&nbsp;this&nbsp;branch.&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;I&nbsp;hope&nbsp;to&nbsp;have&nbsp;livepage&nbsp;stabilized&nbsp;by&nbsp;the&nbsp;0.5&nbsp;release&nbsp;(bugfixes&nbsp;notwithstanding).&nbsp;There&nbsp;is&nbsp;still&nbsp;quite&nbsp;a&nbsp;bit&nbsp;of&nbsp;work&nbsp;to&nbsp;be&nbsp;done&nbsp;before&nbsp;this&nbsp;will&nbsp;actually&nbsp;happen&nbsp;though.&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;The&nbsp;reason&nbsp;nevow_clientToServerEvent&nbsp;was&nbsp;not&nbsp;defined&nbsp;in&nbsp;your&nbsp;tests&nbsp;is&nbsp;because&nbsp;the&nbsp;javascript&nbsp;which&nbsp;defines&nbsp;it&nbsp;was&nbsp;never&nbsp;included&nbsp;in&nbsp;the&nbsp;page.&nbsp;In&nbsp;the&nbsp;below&nbsp;example,&nbsp;you'll&nbsp;notice&nbsp;two&nbsp;render&nbsp;directives,&nbsp;one&nbsp;invoking&nbsp;&quot;liveid&quot;&nbsp;and&nbsp;one&nbsp;invoking&nbsp;&quot;liveglue&quot;.&nbsp;The&nbsp;liveid&nbsp;is&nbsp;a&nbsp;fragment&nbsp;of&nbsp;javascript&nbsp;which&nbsp;embeds&nbsp;a&nbsp;unique&nbsp;id&nbsp;in&nbsp;every&nbsp;rendering&nbsp;of&nbsp;a&nbsp;LivePage.&nbsp;It&nbsp;changes&nbsp;every&nbsp;time&nbsp;the&nbsp;page&nbsp;is&nbsp;rendered.&nbsp;The&nbsp;liveglue&nbsp;is&nbsp;a&nbsp;fragment&nbsp;of&nbsp;javascript&nbsp;which&nbsp;never&nbsp;changes.&nbsp;It&nbsp;is&nbsp;separate&nbsp;from&nbsp;the&nbsp;liveid&nbsp;to&nbsp;allow&nbsp;you&nbsp;to&nbsp;have&nbsp;one&nbsp;global&nbsp;location&nbsp;for&nbsp;the&nbsp;liveglue&nbsp;javascript&nbsp;which&nbsp;every&nbsp;page&nbsp;references,&nbsp;to&nbsp;take&nbsp;advantage&nbsp;of&nbsp;browser&nbsp;caches.&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;The&nbsp;other&nbsp;difference&nbsp;with&nbsp;this&nbsp;example&nbsp;is&nbsp;the&nbsp;ease&nbsp;of&nbsp;calling&nbsp;a&nbsp;server-side&nbsp;function&nbsp;from&nbsp;javascript.&nbsp;Once&nbsp;the&nbsp;liveglue&nbsp;javascript&nbsp;has&nbsp;been&nbsp;included&nbsp;in&nbsp;a&nbsp;page,&nbsp;there&nbsp;is&nbsp;a&nbsp;global&nbsp;&quot;server&quot;&nbsp;object&nbsp;which&nbsp;has&nbsp;a&nbsp;&quot;handle&quot;&nbsp;method.&nbsp;The&nbsp;javascript&nbsp;in&nbsp;the&nbsp;example&nbsp;below&nbsp;was&nbsp;written&nbsp;by&nbsp;hand,&nbsp;not&nbsp;generated&nbsp;automatically&nbsp;by&nbsp;the&nbsp;nevow&nbsp;page&nbsp;rendering&nbsp;process.&nbsp;This&nbsp;makes&nbsp;it&nbsp;easier&nbsp;to&nbsp;hook&nbsp;up&nbsp;client-side&nbsp;event&nbsp;handlers&nbsp;to&nbsp;server&nbsp;side&nbsp;methods.&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;One&nbsp;final&nbsp;difference&nbsp;in&nbsp;the&nbsp;example&nbsp;below&nbsp;is&nbsp;that&nbsp;now&nbsp;server-side&nbsp;event&nbsp;handlers&nbsp;can&nbsp;return&nbsp;javascript&nbsp;which&nbsp;will&nbsp;be&nbsp;evaluated&nbsp;in&nbsp;the&nbsp;browser.&nbsp;Previously,&nbsp;you&nbsp;had&nbsp;to&nbsp;make&nbsp;calls&nbsp;on&nbsp;the&nbsp;ClientHandle&nbsp;object&nbsp;to&nbsp;send&nbsp;scripts&nbsp;to&nbsp;the&nbsp;browser&nbsp;(which&nbsp;you&nbsp;can&nbsp;still&nbsp;do&nbsp;if&nbsp;you&nbsp;need&nbsp;to).&nbsp;The&nbsp;new&nbsp;architecture&nbsp;instead&nbsp;renders&nbsp;the&nbsp;result&nbsp;of&nbsp;a&nbsp;server-side&nbsp;handler&nbsp;in&nbsp;a&nbsp;JavascriptContext.&nbsp;This&nbsp;means&nbsp;all&nbsp;the&nbsp;rendering&nbsp;advantages&nbsp;Nevow&nbsp;provides&nbsp;for&nbsp;HTML&nbsp;are&nbsp;also&nbsp;possible&nbsp;with&nbsp;JavaScript&nbsp;now&nbsp;(rendering&nbsp;generators,&nbsp;rendering&nbsp;multiple&nbsp;deferreds,&nbsp;much&nbsp;safer&nbsp;quoting,&nbsp;etc.)&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;Hope&nbsp;all&nbsp;this&nbsp;helps.&lt;/DIV&gt;&lt;DIV&gt;Donovan&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;
</tt>
