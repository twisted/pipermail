<tt>
I&nbsp;would&nbsp;suggest&nbsp;rewriting&nbsp;the&nbsp;test&nbsp;cases&nbsp;so&nbsp;you&nbsp;don&amp;#39;t&nbsp;need&nbsp;to&nbsp;use&nbsp;an&nbsp;internal&nbsp;webserver. &nbsp;You&nbsp;really&nbsp;just&nbsp;need&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;send&nbsp;blobs&nbsp;of&nbsp;data&nbsp;to&nbsp;the&nbsp;HTTP&nbsp;client&nbsp;that&nbsp;contain&nbsp;different&nbsp;response&nbsp;codes&nbsp;and&nbsp;Location&nbsp;headers.&lt;br&gt;<br>
&lt;br&gt;I&nbsp;believe&nbsp;there&nbsp;are&nbsp;already&nbsp;some&nbsp;tests&nbsp;in&nbsp;twisted.web.test.test_webclient&nbsp;that&nbsp;do&nbsp;this,&nbsp;such&nbsp;as:&lt;br&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/trac/browser/trunk/twisted/web/test/test_webclient.py#L172&quot;&gt;http://twistedmatrix.com/trac/browser/trunk/twisted/web/test/test_webclient.py#L172&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/trac/browser/trunk/twisted/web/test/test_webclient.py#L711&quot;&gt;http://twistedmatrix.com/trac/browser/trunk/twisted/web/test/test_webclient.py#L711&lt;/a&gt;&lt;br&gt;&lt;br&gt;Plus&nbsp;there&nbsp;are&nbsp;numerous&nbsp;other&nbsp;examples&nbsp;in&nbsp;twisted&nbsp;of&nbsp;not&nbsp;relying&nbsp;on&nbsp;even&nbsp;the&nbsp;loopback&nbsp;network&nbsp;interface&nbsp;for&nbsp;tests.&lt;br&gt;<br>
&lt;br&gt;-David&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Mar&nbsp;5,&nbsp;2009&nbsp;at&nbsp;9:27&nbsp;AM,&nbsp;Aaron&nbsp;DeVore&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:aaron.devore@gmail.com&quot;&gt;aaron.devore@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Last&nbsp;night&nbsp;I&nbsp;restarted&nbsp;my&nbsp;work&nbsp;on&nbsp;relative&nbsp;redirects&nbsp;in&lt;br&gt;<br>
HTTPClientFactory&nbsp;(Ticket&nbsp;#3384).&nbsp;What&nbsp;I&nbsp;had&nbsp;forgotten&nbsp;was&nbsp;how&lt;br&gt;<br>
insanely&nbsp;difficult&nbsp;it&nbsp;is&nbsp;to&nbsp;write&nbsp;the&nbsp;test&nbsp;cases,&nbsp;which&nbsp;would&nbsp;then&nbsp;be&lt;br&gt;<br>
significantly&nbsp;more&nbsp;bug&nbsp;prone&nbsp;than&nbsp;the&nbsp;code&nbsp;itself.&nbsp;The&nbsp;problem&nbsp;is&nbsp;that&lt;br&gt;<br>
for&nbsp;every&nbsp;possible&nbsp;input&nbsp;I&nbsp;need&nbsp;to&nbsp;add&nbsp;(1)&nbsp;A&nbsp;test_*&nbsp;function,&nbsp;(2)&nbsp;a&lt;br&gt;<br>
callback,&nbsp;(3)&nbsp;one&nbsp;or&nbsp;more&nbsp;children&nbsp;to&nbsp;the&nbsp;internal&nbsp;web&nbsp;server&nbsp;for&nbsp;the&lt;br&gt;<br>
test_*&nbsp;function&nbsp;to&nbsp;connect&nbsp;to.&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;morning&nbsp;I&nbsp;hit&nbsp;on&nbsp;another&nbsp;idea:&nbsp;Why&nbsp;not&nbsp;separate&nbsp;the&nbsp;code&nbsp;in&lt;br&gt;<br>
HTTPClientFactory&nbsp;that&nbsp;does&nbsp;the&nbsp;fix&nbsp;into&nbsp;a&nbsp;separate&nbsp;function?&nbsp;Then&lt;br&gt;<br>
there&nbsp;could&nbsp;be&nbsp;one&nbsp;test&nbsp;case&nbsp;to&nbsp;make&nbsp;sure&nbsp;the&nbsp;code&nbsp;in&lt;br&gt;<br>
HTTPClientFactory&nbsp;works,&nbsp;then&nbsp;a&nbsp;single&nbsp;test&nbsp;case&nbsp;that&nbsp;contains&nbsp;a&lt;br&gt;<br>
series&nbsp;of&nbsp;assertEquals&nbsp;that&nbsp;test&nbsp;the&nbsp;output&nbsp;of&nbsp;the&nbsp;function.&nbsp;How&nbsp;does&lt;br&gt;<br>
that&nbsp;sound?&nbsp;Should&nbsp;I&nbsp;put&nbsp;it&nbsp;outside&nbsp;of&nbsp;HTTPClientFactory&nbsp;or&nbsp;inside?&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers!&lt;br&gt;<br>
Aaron&nbsp;DeVore&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-web&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-web@twistedmatrix.com&quot;&gt;Twisted-web@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
