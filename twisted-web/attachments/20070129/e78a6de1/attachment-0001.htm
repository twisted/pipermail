<tt>
Hello,&lt;br&gt;&lt;br&gt;With&nbsp;Twisted&nbsp;and&nbsp;Nevow&nbsp;I&amp;#39;m&nbsp;building&nbsp;an&nbsp;XML-RPC&nbsp;server&nbsp;that&nbsp;does&nbsp;HTTP&nbsp;authentication.&nbsp;So&nbsp;a&nbsp;basic&nbsp;XML-RPC&nbsp;client&nbsp;can&nbsp;login&nbsp;using&nbsp;&lt;a&nbsp;href=&quot;https://user:passwd@host&quot;&gt;https://user:passwd@host&lt;/a&gt;.&nbsp;I&nbsp;can&nbsp;get&nbsp;the&nbsp;credentials&nbsp;with&nbsp;HTTP&nbsp;authentication,&nbsp;but&nbsp;how&nbsp;can&nbsp;I&nbsp;check&nbsp;the&nbsp;credentials.&nbsp;I&amp;#39;d&nbsp;tried&nbsp;calling&nbsp;<br>
guard.SessionWrapper.login(....),&nbsp;but&nbsp;I&nbsp;get&nbsp;the&nbsp;error:&nbsp;&amp;quot;&lt;a&nbsp;name=&quot;tracebackEnd&quot;&gt;exceptions.TypeError:&nbsp;unbound&nbsp;method&nbsp;login()<br>
must&nbsp;be&nbsp;called&nbsp;with&nbsp;SessionWrapper&nbsp;instance&nbsp;as&nbsp;first&nbsp;argument&nbsp;(got<br>
NevowRequest&nbsp;instance&nbsp;instead)&amp;quot;.&lt;br&gt;&lt;br&gt;So&nbsp;I&amp;#39;m&nbsp;guessing&nbsp;that&nbsp;request.getSession()&nbsp;is&nbsp;wrong&nbsp;and&nbsp;I&nbsp;must&nbsp;get&nbsp;the&nbsp;session&nbsp;of&nbsp;the&nbsp;guard&nbsp;(or&nbsp;something&nbsp;similar).&nbsp;Or&nbsp;I&amp;#39;m&nbsp;calling&nbsp;the&nbsp;wrong&nbsp;function&nbsp;to&nbsp;check&nbsp;the&nbsp;creds.&nbsp;In&nbsp;the&nbsp;guarded.py&nbsp;example&nbsp;from&nbsp;Nevow&nbsp;the&nbsp;credentials&nbsp;get&nbsp;checked&nbsp;thru&nbsp;a&nbsp;html&nbsp;form,&nbsp;but&nbsp;that&nbsp;is&nbsp;not&nbsp;what&nbsp;I&nbsp;want.&nbsp;<br>
&lt;br&gt;&lt;br&gt;Below&nbsp;is&nbsp;an&nbsp;example&nbsp;part&nbsp;of&nbsp;my&nbsp;code:&lt;/a&gt;&lt;br&gt;&lt;br&gt;class&nbsp;RootPage(rend.Page):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;##&nbsp;We&nbsp;are&nbsp;a&nbsp;directory-like&nbsp;resource&nbsp;because&nbsp;we&nbsp;are&nbsp;at&nbsp;the&nbsp;root&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;addSlash&nbsp;=&nbsp;True&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;##&nbsp;Doesn&amp;#39;t&nbsp;work&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;tryLogin(self,&nbsp;ctx,&nbsp;request):<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;session&nbsp;=&amp;nbsp;&nbsp;request.getSession()&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;segments&nbsp;=&nbsp;inevow.ICurrentSegments(ctx)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;httpAuthCredentials&nbsp;=&nbsp;(self.data_username,self.data_password)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;guard.SessionWrapper.login(request,&nbsp;session,&nbsp;httpAuthCredentials,&nbsp;segments).addCallback(self._loginSucceeded).addErrback(<br>
self.loginFailed)&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;renderHTTP(self,&nbsp;ctx):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;request&nbsp;=&nbsp;inevow.IRequest(ctx)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;username,&nbsp;password&nbsp;=&nbsp;request.getUser(),&nbsp;request.getPassword()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;##&nbsp;No&nbsp;REAL&nbsp;authentication&nbsp;yet,&nbsp;must&nbsp;implement&nbsp;it.<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;(username,&nbsp;password)&nbsp;==&nbsp;(&amp;#39;&amp;#39;,&nbsp;&amp;#39;&amp;#39;):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;request.setHeader(&amp;#39;WWW-Authenticate&amp;#39;,&nbsp;&amp;#39;Basic&nbsp;realm=&amp;#39;+cfg.app_name)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;request.setResponseCode(http.UNAUTHORIZED)&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;&amp;quot;Authentication&nbsp;required.&amp;quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;##&nbsp;They&nbsp;provided&nbsp;a&nbsp;username&nbsp;and&nbsp;password,&nbsp;so&nbsp;let&amp;#39;s&nbsp;let&nbsp;them&nbsp;in!&nbsp;horray&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.data_username,&nbsp;self.data_password&nbsp;=&nbsp;username,&nbsp;password&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
self.tryLogin(ctx,&nbsp;request)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;rend.Page.renderHTTP(self,&nbsp;ctx)&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;docFactory&nbsp;=&nbsp;loaders.stan(tags.html[&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;tags.body[&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;tags.h1[&amp;quot;Welcome&nbsp;user!&amp;quot;],&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;tags.div[&amp;quot;You&nbsp;said:&nbsp;&amp;quot;,<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;tags.span(data=tags.directive(&amp;#39;username&amp;#39;),&nbsp;render=str),&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;quot;&nbsp;&amp;quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;tags.span(data=tags.directive(&amp;#39;password&amp;#39;),&nbsp;render=str),&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;tags.a(href=guard.LOGOUT_AVATAR<br>
)[&amp;quot;Logout&amp;quot;]&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;]]])&lt;br&gt;&lt;br&gt;Regards,&lt;br&gt;&lt;br&gt;Kim&nbsp;Chee&nbsp;Leong&lt;br&gt;&lt;br&gt;<br>

</tt>
