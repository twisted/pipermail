<tt>
third&nbsp;and&nbsp;solved&lt;br&gt;<br>
&lt;br&gt;<br>
another&nbsp;irc&nbsp;and&nbsp;thanks&nbsp;to&nbsp;harshaw,&nbsp;who&nbsp;have&nbsp;found&nbsp;the&nbsp;missing&nbsp;link&nbsp;between&nbsp;liveglue.js&nbsp;and&nbsp;athena.js&lt;br&gt;<br>
&lt;br&gt;<br>
indeed&nbsp;a&nbsp;IE&nbsp;specific&nbsp;thing.&nbsp;he&nbsp;postet&nbsp;a&nbsp;fix&nbsp;against&nbsp;athena.js&nbsp;from&nbsp;nevow060,&nbsp;porting&nbsp;a&nbsp;part&nbsp;from&nbsp;liveglue.js:&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://deadbeefbabe.org/paste/2093&quot;&gt;http://deadbeefbabe.org/paste/2093&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
and&nbsp;the&nbsp;world&nbsp;is&nbsp;spinning&nbsp;again&lt;br&gt;<br>
thanks&nbsp;exarkun,&nbsp;harshaw!&lt;br&gt;<br>
&lt;br&gt;<br>
good&nbsp;night&nbsp;from&nbsp;germany&lt;br&gt;<br>
Peter&lt;br&gt;<br>
(=PA=)&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;11/10/05,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Peter&nbsp;Arwanitis&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:spex66@gmx.net&quot;&gt;spex66@gmx.net&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Hmm&nbsp;first&nbsp;self-reply...&lt;br&gt;<br>
&lt;br&gt;<br>
after&nbsp;irc&nbsp;and&nbsp;own&nbsp;deja-vu...&nbsp;I&nbsp;started&nbsp;to&nbsp;compare&nbsp;chatola&nbsp;based&nbsp;on&nbsp;older&nbsp;lifepage&nbsp;implementation,&nbsp;because&nbsp;same&nbsp;&lt;br&gt;<br>
req.notifyFinish().addErrback(...)&lt;br&gt;<br>
thingy&nbsp;was&nbsp;used&nbsp;in&nbsp;&lt;br&gt;<br>
nevow.livepage.OutputHandlerResource.renderHTTP(...)&lt;br&gt;<br>
&lt;br&gt;<br>
and&nbsp;strange...&nbsp;chatola&nbsp;based&nbsp;on&nbsp;this&nbsp;can&nbsp;handle&nbsp;leaving&nbsp;IE's&nbsp;immediately!&lt;br&gt;<br>
&lt;br&gt;<br>
But&nbsp;I&nbsp;cannot&nbsp;see&nbsp;the&nbsp;difference&nbsp;of&nbsp;the&nbsp;two&nbsp;connection-pattern<br>
(athena/livepage)...&nbsp;there&nbsp;are&nbsp;too&nbsp;much&nbsp;surrounding&nbsp;code-jungle&nbsp;for&nbsp;me&lt;br&gt;<br>
&lt;br&gt;<br>
anybody&nbsp;else?&lt;br&gt;<br>
Peter&lt;br&gt;&lt;span&nbsp;class=&quot;sg&quot;&gt;<br>
(=PA=)&lt;/span&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;e&quot;&nbsp;id=&quot;q_107778261a295bb4_2&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;11/9/05,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Peter&nbsp;Arwanitis&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:spex66@gmx.net&quot;&nbsp;target=&quot;_blank&quot;&nbsp;onclick=&quot;return&nbsp;top.js.OpenExtLink(window,event,this)&quot;&gt;<br>
spex66@gmx.net&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Hi&nbsp;there,&lt;br&gt;<br>
&lt;br&gt;<br>
callremote&nbsp;example&nbsp;demonstrates&nbsp;the&nbsp;notifyOnDisconnect()&nbsp;feature&nbsp;for<br>
athena-livepages&nbsp;(using&nbsp;twisted2.0.1&nbsp;/&nbsp;nevow0.6.0&nbsp;/&nbsp;python2.3.5&nbsp;on<br>
winXP).&lt;br&gt;<br>
&lt;br&gt;<br>
Firefox&nbsp;triggers&nbsp;with&nbsp;a&nbsp;reload&nbsp;of&nbsp;the&nbsp;page&nbsp;or&nbsp;a&nbsp;change&nbsp;to&nbsp;another&nbsp;page<br>
the&nbsp;callbacks&nbsp;added&nbsp;to&nbsp;notifyOnDisconnect&nbsp;_immediately_&nbsp;--&amp;gt;&nbsp;perfect!&lt;br&gt;<br>
'A&nbsp;client&nbsp;lives!'&lt;br&gt;<br>
<br>
'A&nbsp;client&nbsp;dies!'&nbsp;twisted.internet.error.ConnectionDone:&nbsp;Connection&nbsp;was&nbsp;closed&nbsp;cleanly.&lt;br&gt;<br>
'A&nbsp;client&nbsp;lives!'&lt;br&gt;<br>
<br>
'A&nbsp;client&nbsp;dies!'&nbsp;twisted.internet.error.ConnectionDone:&nbsp;Connection&nbsp;was&nbsp;closed&nbsp;cleanly.&lt;br&gt;<br>
...&lt;br&gt;<br>
Why&nbsp;doesn't&nbsp;this&nbsp;work&nbsp;with&nbsp;IE,&nbsp;too???&nbsp;The&nbsp;connections&nbsp;dies&nbsp;in&nbsp;a&nbsp;delayed<br>
timeout...&nbsp;but&nbsp;not&nbsp;immediately.&nbsp;The&nbsp;problem&nbsp;is,&nbsp;that&nbsp;meanwhile&nbsp;open<br>
connections&nbsp;from&nbsp;IE&nbsp;to&nbsp;webserver&nbsp;was&nbsp;established,&nbsp;and&nbsp;they&nbsp;are&nbsp;limited<br>
to&nbsp;TWO!!!&nbsp;And&nbsp;the&nbsp;whole&nbsp;things&nbsp;hangs,&nbsp;waiting&nbsp;for&nbsp;timeouts&nbsp;to&nbsp;free&nbsp;the<br>
connections.So&nbsp;this&nbsp;will&nbsp;be&nbsp;a&nbsp;serious&nbsp;bottleneck!&nbsp;(at&nbsp;least&nbsp;for&nbsp;my<br>
design&nbsp;:-/)&lt;br&gt;<br>
'A&nbsp;client&nbsp;lives!'&lt;br&gt;<br>
'A&nbsp;client&nbsp;lives!'&lt;br&gt;<br>
...&lt;br&gt;<br>
...&lt;br&gt;<br>
later:&nbsp;'A&nbsp;client&nbsp;dies!'&amp;nbsp;&nbsp;twisted.internet.error.TimeoutError:&nbsp;User&nbsp;timeout&nbsp;transports&nbsp;created&nbsp;by&nbsp;client.&lt;br&gt;<br>
&lt;br&gt;<br>
thanks&nbsp;to&nbsp;exarkun&nbsp;on&nbsp;irc&nbsp;and&nbsp;his&nbsp;hint&nbsp;to<br>
&lt;a&nbsp;href=&quot;http://www.winguides.com/registry/display.php/536&quot;&nbsp;target=&quot;_blank&quot;&nbsp;onclick=&quot;return&nbsp;top.js.OpenExtLink(window,event,this)&quot;&gt;http://www.winguides.com/registry/display.php/536&lt;/a&gt;,&nbsp;you&nbsp;can&nbsp;play&nbsp;with<br>
number&nbsp;of&nbsp;needed&nbsp;connections,&nbsp;but&nbsp;leaving&nbsp;/&nbsp;refreshing&nbsp;a&nbsp;livepage&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;mechanism&nbsp;is&nbsp;based&nbsp;on&nbsp;twisted.web.server.Request.notifyFinish()&nbsp;and&nbsp;hopes&nbsp;that&nbsp;this&nbsp;one&nbsp;is&nbsp;throwing&nbsp;a&nbsp;&lt;br&gt;<br>
&amp;quot;twisted.internet.error.ConnectionDone:&nbsp;Connection&nbsp;was&nbsp;closed&nbsp;cleanly.&amp;quot;&nbsp;if&nbsp;the&nbsp;connection&nbsp;got&nbsp;lost.&lt;br&gt;<br>
&lt;br&gt;<br>
But&nbsp;this&nbsp;error&nbsp;to&nbsp;trigger&nbsp;the&nbsp;req.notifyFinish().addErrback(...)&nbsp;does&nbsp;not&nbsp;come&nbsp;with&nbsp;IE&nbsp;leaving&nbsp;or&nbsp;reloading&nbsp;a&nbsp;page.&lt;br&gt;<br>
&lt;br&gt;<br>
Is&nbsp;this&nbsp;specific&nbsp;for&nbsp;me,&nbsp;or&nbsp;can&nbsp;somebody&nbsp;else&nbsp;reproduce&nbsp;this&nbsp;&amp;quot;feature&amp;quot;.&lt;br&gt;<br>
&lt;br&gt;<br>
Does&nbsp;someone&nbsp;have&nbsp;deeper&nbsp;knowledge&nbsp;about&nbsp;the&nbsp;live-connection&nbsp;hold&nbsp;with<br>
IE&nbsp;from&nbsp;athena?&nbsp;And&nbsp;how&nbsp;notifyOnDisconnect()&nbsp;could&nbsp;work&nbsp;with&nbsp;IE,&nbsp;too???&lt;br&gt;<br>
&lt;br&gt;<br>
thanks&nbsp;a&nbsp;lot&lt;br&gt;<br>
&lt;br&gt;<br>
greetings&nbsp;from&nbsp;germany,&nbsp;munich&lt;br&gt;<br>
Peter&lt;br&gt;&lt;span&gt;<br>
(=PA=)&lt;br&gt;<br>
<br>
&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>
<br>
&lt;/span&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
