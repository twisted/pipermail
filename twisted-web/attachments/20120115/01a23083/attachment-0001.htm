<tt>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sat,&nbsp;Jan&nbsp;14,&nbsp;2012&nbsp;at&nbsp;3:01&nbsp;PM,&nbsp;&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:exarkun@twistedmatrix.com&quot;&gt;exarkun@twistedmatrix.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;On&nbsp;10:18&nbsp;am,&nbsp;&lt;a&nbsp;href=&quot;mailto:johnaherne@rocs.co.uk&quot;&gt;johnaherne@rocs.co.uk&lt;/a&gt;&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;I&nbsp;have&nbsp;a&nbsp;situation&nbsp;where&nbsp;a&nbsp;service&nbsp;I&nbsp;am&nbsp;using&nbsp;will&nbsp;occasionally&nbsp;not&lt;br&gt;<br>
&amp;gt;respond&lt;br&gt;<br>
&amp;gt;for&nbsp;considerable&nbsp;periods&nbsp;-&nbsp;hours&nbsp;not&nbsp;minutes.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;I&nbsp;am&nbsp;using&nbsp;cooperate&nbsp;and&nbsp;yield&nbsp;to&nbsp;loop&nbsp;round&nbsp;a&nbsp;series&nbsp;of&nbsp;requests&nbsp;I&lt;br&gt;<br>
&amp;gt;want&nbsp;to&lt;br&gt;<br>
&amp;gt;make&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;The&nbsp;actual&nbsp;function&nbsp;to&nbsp;send&nbsp;the&nbsp;request&nbsp;returns&nbsp;a&nbsp;deferred&nbsp;to&nbsp;the&lt;br&gt;<br>
&amp;gt;yield.&nbsp;I&lt;br&gt;<br>
&amp;gt;add&nbsp;the&nbsp;callbacks&nbsp;onto&nbsp;this&nbsp;and&nbsp;set&nbsp;a&nbsp;calllater&nbsp;to&nbsp;fire&nbsp;in&nbsp;30&nbsp;seconds.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;If&nbsp;that&nbsp;fires&nbsp;I&nbsp;can&nbsp;then&nbsp;cancel&nbsp;the&nbsp;deferred.&nbsp;But&nbsp;I&nbsp;think&nbsp;I&nbsp;ought&nbsp;to&nbsp;be&lt;br&gt;<br>
&amp;gt;cancelling&nbsp;the&nbsp;request&nbsp;as&nbsp;well&nbsp;else&nbsp;I&nbsp;assume&nbsp;I&nbsp;will&nbsp;be&nbsp;leaking&nbsp;request&lt;br&gt;<br>
&amp;gt;objects&nbsp;that&nbsp;might&nbsp;not&nbsp;get&nbsp;dealt&nbsp;with.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;However,&nbsp;I&nbsp;can&amp;#39;t&nbsp;see&nbsp;where&nbsp;I&nbsp;might&nbsp;cancel&nbsp;the&nbsp;request.&nbsp;Or&nbsp;should&nbsp;I&nbsp;be&lt;br&gt;<br>
&amp;gt;dropping&nbsp;the&nbsp;connection&nbsp;associated&nbsp;with&nbsp;the&nbsp;request&nbsp;and&nbsp;if&nbsp;so&nbsp;where&lt;br&gt;<br>
&amp;gt;would&nbsp;I&lt;br&gt;<br>
&amp;gt;be&nbsp;doing&nbsp;that.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;Have&nbsp;I&nbsp;got&nbsp;that&nbsp;right?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;The&nbsp;cancel&nbsp;method&nbsp;of&nbsp;the&nbsp;Deferred&nbsp;returned&nbsp;by&nbsp;Agent.request&nbsp;is&nbsp;probably&lt;br&gt;<br>
the&nbsp;right&nbsp;API&nbsp;to&nbsp;use&nbsp;to&nbsp;do&nbsp;the&nbsp;cleanup&nbsp;you&amp;#39;re&nbsp;interested&nbsp;in.&nbsp; However,&lt;br&gt;<br>
cancelation&nbsp;is&nbsp;not&nbsp;specifically&nbsp;implemented&nbsp;for&nbsp;the&nbsp;Agent.request&lt;br&gt;<br>
Deferred&nbsp;yet.&nbsp; Though&nbsp;it&nbsp;may&nbsp;sound&nbsp;like&nbsp;one,&nbsp;this&nbsp;is&nbsp;not&nbsp;a&nbsp;contradiction&lt;br&gt;<br>
due&nbsp;to&nbsp;the&nbsp;way&nbsp;Deferred&nbsp;cancelation&nbsp;works&nbsp;(ideally&nbsp;we&nbsp;would&nbsp;have&lt;br&gt;<br>
documentation&nbsp;about&nbsp;Deferred&nbsp;cancelation&nbsp;that&nbsp;would&nbsp;explain&nbsp;why&nbsp;this&nbsp;is,&lt;br&gt;<br>
but&nbsp;we&nbsp;don&amp;#39;t).&lt;br&gt;<br>
&lt;br&gt;<br>
See&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/trac/ticket/4330&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/trac/ticket/4330&lt;/a&gt;&nbsp;for&nbsp;progress&nbsp;on&nbsp;this&nbsp;issue&lt;br&gt;<br>
or&nbsp;to&nbsp;contribute.&lt;br&gt;<br>
&lt;br&gt;<br>
Jean-Paul&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-web&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-web@twistedmatrix.com&quot;&gt;Twisted-web@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;Thanks&nbsp;for&nbsp;the&nbsp;information.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;did&nbsp;take&nbsp;a&nbsp;look&nbsp;at&nbsp;the&nbsp;ticket.&nbsp;Not&nbsp;sure&nbsp;what&nbsp;I&nbsp;could&nbsp;contribute&nbsp;though.&nbsp;But&nbsp;will&nbsp;take&nbsp;a&nbsp;closer&nbsp;look.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;John&nbsp;Aherne&lt;/div&gt;<br>

</tt>
