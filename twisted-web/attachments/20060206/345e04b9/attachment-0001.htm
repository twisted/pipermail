<tt>
Hi&lt;br&gt;<br>
&lt;br&gt;<br>
I'm&nbsp;trying&nbsp;to&nbsp;use&nbsp;web2&nbsp;to&nbsp;stream&nbsp;uploading&nbsp;of&nbsp;data,&nbsp;but&nbsp;I&nbsp;ran&nbsp;into&nbsp;some<br>
problems.&nbsp;First&nbsp;I&nbsp;tried&nbsp;building&nbsp;from&nbsp;the&nbsp;example&nbsp;in&amp;nbsp;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/projects/web2/documentation/examples/demo.html&quot;&gt;http://twistedmatrix.com/projects/web2/documentation/examples/demo.html&lt;/a&gt;,<br>
however&nbsp;args&nbsp;and&nbsp;files&nbsp;objects&nbsp;in&nbsp;the&nbsp;request&nbsp;did&nbsp;not&nbsp;show<br>
anything.&amp;nbsp;&nbsp;However&nbsp;the&nbsp;length&nbsp;of&nbsp;stream&nbsp;was&nbsp;correct,&nbsp;and&nbsp;using<br>
tcpdump,&nbsp;showed&nbsp;the&nbsp;correct&nbsp;value.&nbsp;So&nbsp;I&nbsp;tried&nbsp;building&nbsp;my&nbsp;own&nbsp;uploader<br>
which&nbsp;look&nbsp;like&nbsp;this:&lt;br&gt;<br>
&lt;br&gt;<br>
class&nbsp;Uploader(resource.PostableResource):&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;http_POST(self,&nbsp;ctx):&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;request&nbsp;=&nbsp;iweb.IRequest(ctx)&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.parse_stream(request.stream)&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;@defer.deferredGenerator&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;parse_stream(self,&nbsp;stream):&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;from&nbsp;twisted.web2&nbsp;import&nbsp;fileupload&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;s&nbsp;=&nbsp;fileupload.parse_urlencoded_stream(stream)&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;while&nbsp;True:&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;datas&nbsp;=&nbsp;s.read()&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;datas&nbsp;=&nbsp;fileupload.wait(datas)&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;yield&nbsp;datas&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;datas&nbsp;=&nbsp;datas.getResult()&lt;br&gt;<br>
&lt;br&gt;<br>
Using&nbsp;the&nbsp;0.1.0&nbsp;release&nbsp;of&nbsp;web2&nbsp;didn't&nbsp;get&nbsp;past&nbsp;the&nbsp;yield&nbsp;line.&nbsp;Using<br>
latest&nbsp;from&nbsp;subversion&nbsp;(revision&nbsp;15836),&nbsp;got&nbsp;past,&nbsp;but&nbsp;datas&nbsp;was&nbsp;None,<br>
even&nbsp;though&nbsp;data&nbsp;had&nbsp;been&nbsp;send.&nbsp;I've&nbsp;used&nbsp;both&nbsp;cURL&nbsp;(using&nbsp;the&nbsp;-d<br>
switch)&nbsp;and&nbsp;wget&nbsp;(using&nbsp;the&nbsp;--post-file&nbsp;switch)&nbsp;for&nbsp;uploading&nbsp;data,&nbsp;so<br>
I&nbsp;do&nbsp;not&nbsp;think&nbsp;the&nbsp;client&nbsp;as&nbsp;malfunctioning.&nbsp;What&nbsp;am&nbsp;I&nbsp;doing&nbsp;wrong?&lt;br&gt;<br>
&lt;br&gt;<br>
I'm&nbsp;aware&nbsp;that&nbsp;web2&nbsp;is&nbsp;under&nbsp;development&nbsp;and&nbsp;all&nbsp;that,&nbsp;but&nbsp;I&nbsp;need&nbsp;streaming&nbsp;upload,&nbsp;so&nbsp;the&nbsp;web&nbsp;module&nbsp;is&nbsp;not&nbsp;an&nbsp;option.&lt;br&gt;<br>
&lt;br&gt;--&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&nbsp;-&nbsp;Henrik<br>

</tt>
