<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Jul&nbsp;3,&nbsp;2017&nbsp;at&nbsp;12:58&nbsp;AM,&nbsp;Jason&nbsp;Litzinger&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:jlitzingerdev@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;jlitzingerdev@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;span&nbsp;class=&quot;gmail-&quot;&gt;&gt;&nbsp;The&nbsp;cryptography&nbsp;APIs&nbsp;for&nbsp;making&nbsp;certs&nbsp;are&nbsp;pretty&nbsp;straightforward&nbsp;and&nbsp;well&lt;br&gt;<br>
&gt;&nbsp;documented. &nbsp;But&nbsp;if&nbsp;another&nbsp;example&nbsp;helps,&nbsp;here&#39;s&nbsp;some&nbsp;code&nbsp;that&nbsp;creates&nbsp;a&lt;br&gt;<br>
&gt;&nbsp;self-signed&nbsp;ca&nbsp;cert&nbsp;and&nbsp;a&nbsp;client&nbsp;cert&nbsp;with&nbsp;an&nbsp;intermediate&nbsp;cert&nbsp;in&nbsp;between:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;https://github.com/LeastAuthority/txkube/blob/faa0374fcef6d089af39a98310f1bd798eb54b08/src/txkube/test/test_authentication.py#L17-L29&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/&lt;wbr&gt;LeastAuthority/txkube/blob/&lt;wbr&gt;faa0374fcef6d089af39a98310f1bd&lt;wbr&gt;798eb54b08/src/txkube/test/&lt;wbr&gt;test_authentication.py#L17-L29&lt;/a&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;https://github.com/LeastAuthority/txkube/blob/faa0374fcef6d089af39a98310f1bd798eb54b08/src/txkube/test/test_authentication.py#L276-L309&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/&lt;wbr&gt;LeastAuthority/txkube/blob/&lt;wbr&gt;faa0374fcef6d089af39a98310f1bd&lt;wbr&gt;798eb54b08/src/txkube/test/&lt;wbr&gt;test_authentication.py#L276-&lt;wbr&gt;L309&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;I&#39;m&nbsp;diving&nbsp;into&nbsp;adding&nbsp;benchmarks&nbsp;for&nbsp;testing&nbsp;HTTPS&nbsp;and&nbsp;this&nbsp;has&nbsp;been&lt;br&gt;<br>
very&nbsp;helpful. &nbsp;I&nbsp;did&nbsp;have&nbsp;one&nbsp;question,&nbsp;in&nbsp;the&nbsp;cert&nbsp;function&lt;br&gt;<br>
neither&nbsp;the&nbsp;pubkey&nbsp;or&nbsp;privkey&nbsp;parameters&nbsp;are&nbsp;used,&nbsp;rather,&nbsp;a_key&nbsp;is&lt;br&gt;<br>
always&nbsp;used&nbsp;as&nbsp;both&nbsp;the&nbsp;public&nbsp;and&nbsp;the&nbsp;signing&nbsp;key. &nbsp;Is&nbsp;that&lt;br&gt;<br>
intentional? &lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
Or,&nbsp;should&nbsp;the&nbsp;public&nbsp;key&nbsp;be&nbsp;the&nbsp;pubkey&nbsp;value&nbsp;and&nbsp;the&nbsp;signing&nbsp;key&nbsp;the&lt;br&gt;<br>
privkey&nbsp;value? &nbsp;Meaning,&nbsp;each&nbsp;cert&nbsp;uses&nbsp;the&nbsp;supplied&nbsp;public&nbsp;key&nbsp;and&nbsp;the&lt;br&gt;<br>
signing&nbsp;order&nbsp;is:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;a&nbsp;signs&nbsp;a&lt;br&gt;<br>
 &nbsp; &nbsp;a&nbsp;signs&nbsp;b&lt;br&gt;<br>
 &nbsp; &nbsp;b&nbsp;signs&nbsp;c&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;so,&nbsp;do&nbsp;you&nbsp;want&nbsp;me&nbsp;to&nbsp;send&nbsp;you&nbsp;a&nbsp;PR&nbsp;for&nbsp;this&nbsp;change?&lt;br&gt;<br>
&lt;br&gt;&lt;div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;Heya&nbsp;Jason,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;pointing&nbsp;this&nbsp;out. &nbsp;Yes,&nbsp;it&#39;s&nbsp;a&nbsp;bug. &nbsp;Also,&nbsp;it&nbsp;turns&nbsp;out&nbsp;re-using&nbsp;serial&nbsp;numbers&nbsp;is&nbsp;a&nbsp;bad&nbsp;idea&nbsp;too. &nbsp;I&nbsp;don&#39;t&nbsp;think&nbsp;their&nbsp;mistake &lt;i&gt;currently&lt;/i&gt; hurts&nbsp;the&nbsp;tests&nbsp;but&nbsp;it&nbsp;would&nbsp;be&nbsp;great&nbsp;to&nbsp;get&nbsp;them&nbsp;both&nbsp;fixed. &nbsp;So&nbsp;a&nbsp;PR&nbsp;would&nbsp;be&nbsp;quite&nbsp;welcome.&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;Regarding&nbsp;Glyph&#39;s&nbsp;comments&nbsp;about&nbsp;where&nbsp;the&nbsp;chain&nbsp;is&nbsp;verified&nbsp;-&nbsp;that&#39;s&nbsp;still&nbsp;handled&nbsp;by&nbsp;the&nbsp;TLS&nbsp;library. &nbsp;The&nbsp;Chain&nbsp;invariant&nbsp;in&nbsp;_authentication.py&nbsp;is&nbsp;just&nbsp;a&nbsp;superficial&nbsp;sanity&nbsp;check&nbsp;to&nbsp;catch&nbsp;the&nbsp;common&nbsp;problem&nbsp;of&nbsp;&quot;a-b-c&quot;&nbsp;vs&nbsp;&quot;c-b-a&quot;&nbsp;chain&nbsp;certificate&nbsp;order.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks!&lt;/div&gt;&lt;div&gt;Jean-Paul&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
