<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hello,&lt;br&gt;&lt;br&gt;I&#39;ve&nbsp;been&nbsp;trying&nbsp;to&nbsp;implement&nbsp;a&nbsp;simple&nbsp;notification&nbsp;system&nbsp;via&nbsp;long&nbsp;polling&nbsp;using&nbsp;Twisted&nbsp;14.0.0.&nbsp;On&nbsp;the&nbsp;client&nbsp;side,&nbsp;a&nbsp;web&nbsp;page&nbsp;makes&nbsp;Ajax&nbsp;calls&nbsp;to&nbsp;an&nbsp;&quot;update&quot;&nbsp;resource,&nbsp;which&nbsp;will&nbsp;deliver&nbsp;the&nbsp;latest&nbsp;status&nbsp;message&nbsp;known&nbsp;to&nbsp;the&nbsp;application.&nbsp;On&nbsp;the&nbsp;server&nbsp;side,&nbsp;a&nbsp;thread&nbsp;feeds&nbsp;a&nbsp;queue&nbsp;with&nbsp;status&nbsp;events&nbsp;and&nbsp;another&nbsp;one&nbsp;polls&nbsp;this&nbsp;queue&nbsp;and&nbsp;sends&nbsp;the&nbsp;latest&nbsp;value&nbsp;to&nbsp;any&nbsp;pending&nbsp;request,&nbsp;trying&nbsp;to&nbsp;keep&nbsp;the&nbsp;request&nbsp;open&nbsp;for&nbsp;30&nbsp;seconds,&nbsp;or&nbsp;until&nbsp;a&nbsp;new&nbsp;status&nbsp;event&nbsp;arrives,&nbsp;whichever&nbsp;happens&nbsp;sooner&nbsp;(this&nbsp;is&nbsp;the&nbsp;long&nbsp;polling).&lt;br&gt;&lt;br&gt;Occasionally,&nbsp;one&nbsp;of&nbsp;responses&nbsp;will&nbsp;just&nbsp;hang.&nbsp;&quot;request.finish()&quot;&nbsp;is&nbsp;called&nbsp;properly&nbsp;(I&#39;ve&nbsp;even&nbsp;checked&nbsp;this&nbsp;with&nbsp;&quot;notifyFinish()&quot;),&nbsp;the&nbsp;response&nbsp;headers&nbsp;are&nbsp;sent,&nbsp;but&nbsp;the&nbsp;response&nbsp;body&nbsp;isn&#39;t&nbsp;(according&nbsp;to&nbsp;Wireshark),&nbsp;thereby&nbsp;leaving&nbsp;the&nbsp;browser&nbsp;hanging&nbsp;(since&nbsp;it&nbsp;thinks&nbsp;a&nbsp;valid&nbsp;response&nbsp;has&nbsp;started&nbsp;to&nbsp;come&nbsp;through).&lt;br&gt;&lt;br&gt;I&nbsp;have&nbsp;noticed&nbsp;this&nbsp;behaviour&nbsp;with&nbsp;Twisted&nbsp;13&nbsp;and&nbsp;14,&nbsp;but&nbsp;not&nbsp;with&nbsp;earlier&nbsp;versions.&nbsp;This&nbsp;is&nbsp;also&nbsp;an&nbsp;intermittent&nbsp;problem.&nbsp;I&nbsp;have&nbsp;been&nbsp;able&nbsp;to&nbsp;reproduce&nbsp;it&nbsp;a&nbsp;number&nbsp;of&nbsp;times,&nbsp;but&nbsp;not&nbsp;always,&nbsp;and&nbsp;it&nbsp;doesn&#39;t&nbsp;necessarily&nbsp;happen&nbsp;after&nbsp;the&nbsp;same&nbsp;number&nbsp;of&nbsp;requests.&nbsp;It&nbsp;seems&nbsp;to&nbsp;fail&nbsp;more&nbsp;easily&nbsp;on&nbsp;machines&nbsp;with&nbsp;one&nbsp;CPU&nbsp;core,&nbsp;or&nbsp;when&nbsp;the&nbsp;execution&nbsp;is&nbsp;limited&nbsp;to&nbsp;one&nbsp;core,&nbsp;with&nbsp;only&nbsp;one&nbsp;request&nbsp;at&nbsp;a&nbsp;time&nbsp;(for&nbsp;some&nbsp;reason,&nbsp;having&nbsp;concurrent&nbsp;requests&nbsp;from&nbsp;multiple&nbsp;browsers&nbsp;or&nbsp;tabs,&nbsp;or&nbsp;being&nbsp;able&nbsp;to&nbsp;use&nbsp;multiple&nbsp;CPUs&nbsp;on&nbsp;the&nbsp;server&nbsp;seems&nbsp;to&nbsp;make&nbsp;the&nbsp;problem&nbsp;harder&nbsp;to&nbsp;reproduce).&lt;br&gt;&lt;br&gt;I&#39;m&nbsp;pasting&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;this&nbsp;message&nbsp;a&nbsp;simple&nbsp;example&nbsp;where&nbsp;the&nbsp;status&nbsp;events&nbsp;are&nbsp;coming&nbsp;from&nbsp;a&nbsp;counter&nbsp;running&nbsp;in&nbsp;a&nbsp;separate&nbsp;thread.&nbsp;When&nbsp;limiting&nbsp;the&nbsp;server&nbsp;process&nbsp;to&nbsp;one&nbsp;CPU,&nbsp;the&nbsp;counter&nbsp;visible&nbsp;on&nbsp;the&nbsp;webpage&nbsp;rarely&nbsp;seems&nbsp;to&nbsp;go&nbsp;much&nbsp;above&nbsp;2000.&nbsp;I&#39;ve&nbsp;only&nbsp;tried&nbsp;under&nbsp;Linux.&nbsp;I&#39;ve&nbsp;tried&nbsp;this&nbsp;on&nbsp;an&nbsp;actual&nbsp;PC&nbsp;(limiting&nbsp;to&nbsp;one&nbsp;core&nbsp;using&nbsp;&quot;taskset&nbsp;-c&nbsp;0&nbsp;python&nbsp;test_server.py&quot;),&nbsp;a&nbsp;VM&nbsp;running&nbsp;in&nbsp;VirtualBox&nbsp;(set&nbsp;to&nbsp;1&nbsp;CPU)&nbsp;and&nbsp;even&nbsp;a&nbsp;Raspberry&nbsp;Pi.&nbsp;The&nbsp;Raspberry&nbsp;Pi&nbsp;is&nbsp;where&nbsp;the&nbsp;problem&nbsp;seems&nbsp;to&nbsp;be&nbsp;the&nbsp;easiest&nbsp;to&nbsp;reproduce,&nbsp;but&nbsp;this&nbsp;also&nbsp;happens&nbsp;with&nbsp;the&nbsp;actual&nbsp;PC&nbsp;and&nbsp;virtual&nbsp;machine.&nbsp;This&nbsp;was&nbsp;also&nbsp;only&nbsp;tried&nbsp;on&nbsp;a&nbsp;LAN&nbsp;(considering&nbsp;that,&nbsp;for&nbsp;the&nbsp;purpose&nbsp;of&nbsp;this&nbsp;test&nbsp;case,&nbsp;the&nbsp;notifications&nbsp;are&nbsp;rather&nbsp;frequent).&nbsp;I&#39;ve&nbsp;tried&nbsp;with&nbsp;the&nbsp;default&nbsp;chunked&nbsp;encoding,&nbsp;or&nbsp;by&nbsp;setting&nbsp;the&nbsp;content-length&nbsp;explicitly,&nbsp;but&nbsp;it&nbsp;didn&#39;t&nbsp;make&nbsp;a&nbsp;difference.&lt;br&gt;&lt;br&gt;Is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;force&nbsp;to&nbsp;the&nbsp;response&nbsp;to&nbsp;be&nbsp;flushed,&nbsp;after&nbsp;a&nbsp;call&nbsp;to&nbsp;&quot;request.finish()&quot;?&nbsp;Any&nbsp;other&nbsp;suggestions&nbsp;to&nbsp;fix&nbsp;this&nbsp;would&nbsp;also&nbsp;be&nbsp;appreciated.&lt;br&gt;&lt;br&gt;Thank&nbsp;you,&lt;br&gt;&lt;br&gt;Bruno.&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;Only&nbsp;2&nbsp;files&nbsp;are&nbsp;required&nbsp;for&nbsp;this&nbsp;test&nbsp;case:&nbsp;counter.html,&nbsp;test_server.py.&lt;br&gt;I&#39;ve&nbsp;run&nbsp;this&nbsp;in&nbsp;a&nbsp;virtual&nbsp;environment,&nbsp;with&nbsp;Python&nbsp;2.7&nbsp;(in&nbsp;which&nbsp;I&#39;ve&nbsp;installed&nbsp;Twisted&nbsp;with&nbsp;`pip&nbsp;install&nbsp;twisted==14.0.0`).&lt;br&gt;On&nbsp;a&nbsp;multicore&nbsp;machine,&nbsp;to&nbsp;limit&nbsp;the&nbsp;execution&nbsp;to&nbsp;one&nbsp;core,&nbsp;call&nbsp;the&nbsp;server&nbsp;with&nbsp;taskset:&nbsp;&quot;taskset&nbsp;-c&nbsp;0&nbsp;python&nbsp;test_server.py&quot;.&lt;br&gt;Once&nbsp;the&nbsp;server&nbsp;is&nbsp;running,&nbsp;point&nbsp;a&nbsp;browser&nbsp;(tried&nbsp;with&nbsp;Chrome&nbsp;and&nbsp;Firefox)&nbsp;to&nbsp;&quot;&lt;a&nbsp;href=&quot;http://the.ip.address.example:8880/&quot;&gt;http://the.ip.address.example:8880/&lt;/a&gt;&quot;,&nbsp;you&nbsp;should&nbsp;see&nbsp;a&nbsp;counter&nbsp;increasing&nbsp;(and&nbsp;eventually&nbsp;stopping,&nbsp;which&nbsp;illustrates&nbsp;the&nbsp;problem).&nbsp;The&nbsp;issue&nbsp;seems&nbsp;to&nbsp;happen&nbsp;more&nbsp;often&nbsp;when&nbsp;only&nbsp;1&nbsp;client&nbsp;(or&nbsp;tab)&nbsp;is&nbsp;connected&nbsp;to&nbsp;the&nbsp;server.&lt;br&gt;&lt;br&gt;&lt;br&gt;-&nbsp;counter.html:&lt;br&gt;&lt;br&gt;&lt;html&gt;&lt;br&gt;&lt;head&gt;&lt;br&gt;&lt;script&nbsp;type=&quot;application/javascript&quot;&nbsp;src=&quot;//&lt;a&nbsp;href=&quot;http://code.jquery.com/jquery-1.11.0.min.js&quot;&gt;code.jquery.com/jquery-1.11.0.min.js&lt;/a&gt;&quot;&gt;&lt;/script&gt;&lt;br&gt;&lt;/head&gt;&lt;br&gt;&lt;body&gt;&lt;br&gt;&lt;div&nbsp;id=&quot;counter&quot;&nbsp;style=&quot;font-size:&nbsp;100pt;&nbsp;font-weight:&nbsp;bold;&quot;&gt;&lt;/div&gt;&lt;br&gt;&lt;script&nbsp;type=&quot;application/javascript&quot;&gt;&lt;br&gt;//&nbsp;&lt;![CDATA[&lt;br&gt;$(document).ready(function()&nbsp;{&lt;br&gt;   &nbsp;var&nbsp;eTag&nbsp;=&nbsp;null;&lt;br&gt;   &nbsp;var&nbsp;normalRefreshDelay&nbsp;=&nbsp;50;&lt;br&gt;   &nbsp;var&nbsp;refreshDelay&nbsp;=&nbsp;normalRefreshDelay;&lt;br&gt;   &nbsp;var&nbsp;maxRefreshDelay&nbsp;=&nbsp;5000;&lt;br&gt;   &nbsp;function&nbsp;refresh()&nbsp;{&lt;br&gt;       &nbsp;var&nbsp;headers&nbsp;=&nbsp;{};&lt;br&gt;       &nbsp;if&nbsp;(eTag)&nbsp;{&lt;br&gt;           &nbsp;headers[&#39;If-None-Match&#39;]&nbsp;=&nbsp;eTag;&lt;br&gt;       &nbsp;}&lt;br&gt;       &nbsp;$.ajax({&lt;br&gt;           &nbsp;url:&nbsp;&quot;/update&quot;,&lt;br&gt;           &nbsp;headers:&nbsp;headers,&lt;br&gt;           &nbsp;dataType:&nbsp;&quot;json&quot;,&lt;br&gt;           &nbsp;cache:&nbsp;false,&lt;br&gt;           &nbsp;success:&nbsp;function(data,&nbsp;status,&nbsp;xhr)&nbsp;{&lt;br&gt;               &nbsp;try&nbsp;{&lt;br&gt;                   &nbsp;if&nbsp;(data[1]&nbsp;!=&nbsp;null)&nbsp;{&nbsp;$(&quot;#counter&quot;).text(&quot;Counter:&nbsp;&quot;+data[1]);&nbsp;}&lt;br&gt;                   &nbsp;eTag&nbsp;=&nbsp;xhr.getResponseHeader(&quot;ETag&quot;)&nbsp;||&nbsp;null;&lt;br&gt;                   &nbsp;refreshDelay&nbsp;=&nbsp;normalRefreshDelay;&lt;br&gt;               &nbsp;}&nbsp;catch&nbsp;(e)&nbsp;{&lt;br&gt;                   &nbsp;refreshDelay&nbsp;=&nbsp;Math.min(refreshDelay&nbsp;*&nbsp;2,&nbsp;maxRefreshDelay);&lt;br&gt;               &nbsp;}&lt;br&gt;           &nbsp;},&lt;br&gt;           &nbsp;error:&nbsp;function(xhr,&nbsp;text,&nbsp;error)&nbsp;{&lt;br&gt;               &nbsp;refreshDelay&nbsp;=&nbsp;Math.min(refreshDelay&nbsp;*&nbsp;2,&nbsp;maxRefreshDelay);&lt;br&gt;           &nbsp;},&lt;br&gt;           &nbsp;complete:&nbsp;function(xhr,&nbsp;textStatus)&nbsp;{&lt;br&gt;               &nbsp;setTimeout(refresh,&nbsp;refreshDelay);&lt;br&gt;           &nbsp;}&lt;br&gt;       &nbsp;});&lt;br&gt;   &nbsp;}&lt;br&gt;   &nbsp;refresh();&lt;br&gt;});&lt;br&gt;//&nbsp;]]&gt;&lt;br&gt;&lt;/script&gt;&lt;br&gt;&lt;/body&gt;&lt;br&gt;&lt;/html&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;-&nbsp;test_server.py&lt;br&gt;&lt;br&gt;&lt;br&gt;#&nbsp;-*-&nbsp;coding:&nbsp;utf-8&nbsp;-*-&lt;br&gt;&lt;br&gt;import&nbsp;threading&lt;br&gt;import&nbsp;time&lt;br&gt;import&nbsp;Queue&lt;br&gt;import&nbsp;uuid&lt;br&gt;import&nbsp;socket&lt;br&gt;import&nbsp;json&lt;br&gt;&lt;br&gt;from&nbsp;twisted.web.server&nbsp;import&nbsp;Site&lt;br&gt;from&nbsp;twisted.web.resource&nbsp;import&nbsp;Resource&lt;br&gt;from&nbsp;twisted.web.server&nbsp;import&nbsp;NOT_DONE_YET&lt;br&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;reactor&lt;br&gt;from&nbsp;twisted.web.static&nbsp;import&nbsp;File&lt;br&gt;&lt;br&gt;q&nbsp;=&nbsp;Queue.Queue()&lt;br&gt;&lt;br&gt;def&nbsp;fake_counter():&lt;br&gt;   &nbsp;i&nbsp;=&nbsp;1&lt;br&gt;   &nbsp;while&nbsp;True:&lt;br&gt;       &nbsp;q.put({&nbsp;1:&nbsp;str(i)&nbsp;})&lt;br&gt;       &nbsp;time.sleep(0.15)&lt;br&gt;       &nbsp;i&nbsp;+=&nbsp;1&lt;br&gt;&lt;br&gt;producer_thread&nbsp;=&nbsp;threading.Thread(target=fake_counter)&lt;br&gt;producer_thread.daemon&nbsp;=&nbsp;True&lt;br&gt;producer_thread.start()&lt;br&gt;&lt;br&gt;&lt;br&gt;class&nbsp;CounterUpdateResource(Resource):&lt;br&gt;   &nbsp;def&nbsp;__init__(self,&nbsp;msg_queue):&lt;br&gt;       &nbsp;Resource.__init__(self)&lt;br&gt;       &nbsp;self.msg_queue&nbsp;=&nbsp;msg_queue&lt;br&gt;       &nbsp;self.msg&nbsp;=&nbsp;{}&lt;br&gt;       &nbsp;self.etag&nbsp;=&nbsp;None&lt;br&gt;       &nbsp;self.pending_requests&nbsp;=&nbsp;[]&lt;br&gt;       &nbsp;&lt;br&gt;       &nbsp;t&nbsp;=&nbsp;threading.Thread(target=self._poll_messages)&lt;br&gt;       &nbsp;t.daemon&nbsp;=&nbsp;True&lt;br&gt;       &nbsp;t.start()&lt;br&gt;       &nbsp;&lt;br&gt;   &nbsp;def&nbsp;_poll_messages(self):&lt;br&gt;       &nbsp;while&nbsp;True:&lt;br&gt;           &nbsp;try:&lt;br&gt;               &nbsp;self.msg&nbsp;=&nbsp;self.msg_queue.get(True,&nbsp;30)&lt;br&gt;               &nbsp;self.etag&nbsp;=&nbsp;&#39;&quot;%s&quot;&#39;&nbsp;%&nbsp;(uuid.uuid4(),)&lt;br&gt;               &nbsp;print&nbsp;&quot;-&gt;&nbsp;Got&nbsp;new&nbsp;message:&nbsp;%s&quot;&nbsp;%&nbsp;(self.msg,)&lt;br&gt;           &nbsp;except&nbsp;Queue.Empty:&lt;br&gt;               &nbsp;pass&lt;br&gt;           &nbsp;json_str&nbsp;=&nbsp;json.dumps(self.msg)&lt;br&gt;           &nbsp;json_len&nbsp;=&nbsp;len(json_str)&lt;br&gt;           &nbsp;while&nbsp;True:&lt;br&gt;               &nbsp;try:&lt;br&gt;                   &nbsp;request&nbsp;=&nbsp;self.pending_requests.pop()&lt;br&gt;                   &nbsp;self._actual_render(request,&nbsp;json_str,&nbsp;json_len)&lt;br&gt;               &nbsp;except&nbsp;IndexError:&lt;br&gt;                   &nbsp;break&lt;br&gt;           &nbsp;&lt;br&gt;   &nbsp;def&nbsp;_actual_render(self,&nbsp;request,&nbsp;json_msg,&nbsp;json_len):&lt;br&gt;       &nbsp;try:&lt;br&gt;           &nbsp;request.setETag(self.etag)&lt;br&gt;           &nbsp;request.setHeader(&quot;Content-Type&quot;,&nbsp;&quot;application/json&quot;)&lt;br&gt;           &nbsp;request.setHeader(&quot;Content-Length&quot;,&nbsp;json_len)&lt;br&gt;           &nbsp;request.write(json_msg)&lt;br&gt;           &nbsp;request.finish()&lt;br&gt;       &nbsp;except:&lt;br&gt;           &nbsp;pass&lt;br&gt;&lt;br&gt;   &nbsp;def&nbsp;render_GET(self,&nbsp;request):&lt;br&gt;       &nbsp;ifNoneMatchHeader&nbsp;=&nbsp;request.getHeader(&quot;If-None-Match&quot;)&lt;br&gt;       &nbsp;if&nbsp;ifNoneMatchHeader&nbsp;is&nbsp;None&nbsp;or&nbsp;ifNoneMatchHeader&nbsp;!=&nbsp;self.etag:&lt;br&gt;           &nbsp;if&nbsp;self.etag:&lt;br&gt;               &nbsp;request.setETag(self.etag)&lt;br&gt;           &nbsp;request.setHeader(&quot;Content-Type&quot;,&nbsp;&quot;application/json&quot;)&lt;br&gt;           &nbsp;data&nbsp;=&nbsp;json.dumps(self.msg)&lt;br&gt;           &nbsp;request.setHeader(&quot;Content-Length&quot;,&nbsp;len(data))&lt;br&gt;           &nbsp;return&nbsp;data&lt;br&gt;       &nbsp;else:&lt;br&gt;           &nbsp;self.pending_requests.append(request)&lt;br&gt;           &nbsp;return&nbsp;NOT_DONE_YET&lt;br&gt;&lt;br&gt;root&nbsp;=&nbsp;Resource()&lt;br&gt;root.putChild(&quot;&quot;,&nbsp;File(&quot;counter.html&quot;))&lt;br&gt;root.putChild(&quot;update&quot;,&nbsp;CounterUpdateResource(q))&lt;br&gt;&lt;br&gt;factory&nbsp;=&nbsp;Site(root)&lt;br&gt;reactor.listenTCP(8880,&nbsp;factory)&lt;br&gt;reactor.run()&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;-&nbsp;Sample&nbsp;Wireshark&nbsp;output:&lt;br&gt;&lt;br&gt;&lt;br&gt;Here&nbsp;is&nbsp;a&nbsp;sample&nbsp;output&nbsp;using&nbsp;Wireshark:&lt;br&gt;&lt;br&gt;GET&nbsp;/update?_=1410440411047&nbsp;HTTP/1.1&lt;br&gt;Host:&nbsp;&lt;a&nbsp;href=&quot;http://192.168.0.8:8880&quot;&gt;192.168.0.8:8880&lt;/a&gt;&lt;br&gt;Connection:&nbsp;keep-alive&lt;br&gt;Cache-Control:&nbsp;max-age=0&lt;br&gt;Accept:&nbsp;application/json,&nbsp;text/javascript,&nbsp;*/*;&nbsp;q=0.01&lt;br&gt;X-Requested-With:&nbsp;XMLHttpRequest&lt;br&gt;User-Agent:&nbsp;Mozilla/5.0&nbsp;(Windows&nbsp;NT&nbsp;6.1;&nbsp;WOW64)&nbsp;AppleWebKit/537.36&nbsp;(KHTML,&nbsp;like&nbsp;Gecko)&nbsp;Chrome/37.0.2062.103&nbsp;Safari/537.36&lt;br&gt;If-None-Match:&nbsp;&quot;84c25895-de1e-4b50-954b-438be9d8d9b7&quot;&lt;br&gt;Referer:&nbsp;&lt;a&nbsp;href=&quot;http://192.168.0.8:8880/&quot;&gt;http://192.168.0.8:8880/&lt;/a&gt;&lt;br&gt;Accept-Encoding:&nbsp;gzip,deflate,sdch&lt;br&gt;Accept-Language:&nbsp;en-GB,en;q=0.8,en-US;q=0.6&lt;br&gt;&lt;br&gt;HTTP/1.1&nbsp;200&nbsp;OK&lt;br&gt;Date:&nbsp;Thu,&nbsp;11&nbsp;Sep&nbsp;2014&nbsp;13:06:23&nbsp;GMT&lt;br&gt;Content-Length:&nbsp;12&lt;br&gt;ETag:&nbsp;&quot;7736231b-ee3a-4a9f-a93e-ced0994df098&quot;&lt;br&gt;Content-Type:&nbsp;application/json&lt;br&gt;Server:&nbsp;TwistedWeb/14.0.0&lt;br&gt;&lt;br&gt;{&quot;1&quot;:&nbsp;&quot;371&quot;}&lt;br&gt;&lt;br&gt;GET&nbsp;/update?_=1410440411048&nbsp;HTTP/1.1&lt;br&gt;Host:&nbsp;&lt;a&nbsp;href=&quot;http://192.168.0.8:8880&quot;&gt;192.168.0.8:8880&lt;/a&gt;&lt;br&gt;Connection:&nbsp;keep-alive&lt;br&gt;Cache-Control:&nbsp;max-age=0&lt;br&gt;Accept:&nbsp;application/json,&nbsp;text/javascript,&nbsp;*/*;&nbsp;q=0.01&lt;br&gt;X-Requested-With:&nbsp;XMLHttpRequest&lt;br&gt;User-Agent:&nbsp;Mozilla/5.0&nbsp;(Windows&nbsp;NT&nbsp;6.1;&nbsp;WOW64)&nbsp;AppleWebKit/537.36&nbsp;(KHTML,&nbsp;like&nbsp;Gecko)&nbsp;Chrome/37.0.2062.103&nbsp;Safari/537.36&lt;br&gt;If-None-Match:&nbsp;&quot;7736231b-ee3a-4a9f-a93e-ced0994df098&quot;&lt;br&gt;Referer:&nbsp;&lt;a&nbsp;href=&quot;http://192.168.0.8:8880/&quot;&gt;http://192.168.0.8:8880/&lt;/a&gt;&lt;br&gt;Accept-Encoding:&nbsp;gzip,deflate,sdch&lt;br&gt;Accept-Language:&nbsp;en-GB,en;q=0.8,en-US;q=0.6&lt;br&gt;&lt;br&gt;HTTP/1.1&nbsp;200&nbsp;OK&lt;br&gt;Date:&nbsp;Thu,&nbsp;11&nbsp;Sep&nbsp;2014&nbsp;13:06:23&nbsp;GMT&lt;br&gt;Content-Length:&nbsp;12&lt;br&gt;ETag:&nbsp;&quot;ddd10400-3530-4cb4-a9cd-0b123032d8af&quot;&lt;br&gt;Content-Type:&nbsp;application/json&lt;br&gt;Server:&nbsp;TwistedWeb/14.0.0&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;(I&#39;ve&nbsp;inserted&nbsp;a&nbsp;coupe&nbsp;of&nbsp;line&nbsp;returns&nbsp;after&nbsp;&quot;{&quot;1&quot;:&nbsp;&quot;371&quot;}&quot;&nbsp;for&nbsp;readability.)&lt;br&gt;Here,&nbsp;nothing&nbsp;is&nbsp;sent&nbsp;on&nbsp;the&nbsp;wire&nbsp;after&nbsp;the&nbsp;headers&nbsp;of&nbsp;the&nbsp;last&nbsp;response&nbsp;(the&nbsp;&quot;\r\n\r\n&quot;&nbsp;are&nbsp;present).&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
