<tt>
<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;thanks&nbsp;for&nbsp;help.&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;I&nbsp;did&nbsp;not&nbsp;see&nbsp;any&nbsp;difference&nbsp;with&nbsp;the<br>
new&nbsp;_c_urlarg&nbsp;moduIe.&nbsp;I&nbsp;made&nbsp;then&nbsp;several&nbsp;trials&nbsp;and&nbsp;I&nbsp;found&nbsp;that&nbsp;Python<br>
2.4.1&nbsp;with&nbsp;Twisted&nbsp;1.3.0&nbsp;seems&nbsp;to&nbsp;be&nbsp;stable.&nbsp;It&nbsp;now&nbsp;runs&nbsp;for&nbsp;several&nbsp;days<br>
without&nbsp;leak.&nbsp;Something&nbsp;a&nbsp;little&nbsp;bit&nbsp;strange&nbsp;is&nbsp;that&nbsp;I&nbsp;tried&nbsp;Python&nbsp;2.4.1<br>
with&nbsp;Twisted&nbsp;2.0.1&nbsp;and&nbsp;TwistedWeb&nbsp;0.5.0,&nbsp;but&nbsp;with&nbsp;this&nbsp;configuration&nbsp;the<br>
memory&nbsp;leak&nbsp;is&nbsp;very&nbsp;important.&nbsp;Yet&nbsp;with&nbsp;this&nbsp;config&nbsp;the&nbsp;objects&nbsp;number<br>
(length&nbsp;of&nbsp;gc.get_objects())&nbsp;is&nbsp;growing&nbsp;with&nbsp;no&nbsp;collection,&nbsp;as&nbsp;I&nbsp;use&nbsp;exactly<br>
the&nbsp;same&nbsp;environment&nbsp;except&nbsp;Twisted&nbsp;version.&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;Can&nbsp;you&nbsp;see&nbsp;a&nbsp;reason&nbsp;for&nbsp;that&nbsp;?&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;&lt;br&gt;<br>
&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;table&nbsp;width=100%&gt;<br>
&lt;tr&nbsp;valign=top&gt;<br>
&lt;td&nbsp;width=40%&gt;&lt;font&nbsp;size=1&nbsp;face=&quot;sans-serif&quot;&gt;&lt;b&gt;Andrew&nbsp;Bennetts&nbsp;&amp;lt;andrew-twisted@puzzling.org&amp;gt;&lt;/b&gt;<br>
&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=1&nbsp;face=&quot;sans-serif&quot;&gt;Sent&nbsp;by:&nbsp;twisted-web-bounces@twistedmatrix.com&lt;/font&gt;<br>
&lt;p&gt;&lt;font&nbsp;size=1&nbsp;face=&quot;sans-serif&quot;&gt;19/10/2005&nbsp;16:05&lt;/font&gt;<br>
&lt;table&nbsp;border&gt;<br>
&lt;tr&nbsp;valign=top&gt;<br>
&lt;td&nbsp;bgcolor=white&gt;<br>
&lt;div&nbsp;align=center&gt;&lt;font&nbsp;size=1&nbsp;face=&quot;sans-serif&quot;&gt;Please&nbsp;respond&nbsp;to&lt;br&gt;<br>
&amp;quot;Discussion&nbsp;of&nbsp;twisted.web,&nbsp;Nevow,&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;and<br>
Woven&amp;quot;&nbsp;&amp;lt;twisted-web@twistedmatrix.com&amp;gt;&lt;/font&gt;&lt;/div&gt;&lt;/table&gt;<br>
&lt;br&gt;<br>
&lt;td&nbsp;width=59%&gt;<br>
&lt;table&nbsp;width=100%&gt;<br>
&lt;tr&nbsp;valign=top&gt;<br>
&lt;td&gt;<br>
&lt;div&nbsp;align=right&gt;&lt;font&nbsp;size=1&nbsp;face=&quot;sans-serif&quot;&gt;To&lt;/font&gt;&lt;/div&gt;<br>
&lt;td&gt;&lt;font&nbsp;size=1&nbsp;face=&quot;sans-serif&quot;&gt;&amp;quot;Discussion&nbsp;of&nbsp;twisted.web,&nbsp;Nevow,<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;and&nbsp;Woven&amp;quot;&nbsp;&amp;lt;twisted-web@twistedmatrix.com&amp;gt;&lt;/font&gt;<br>
&lt;tr&nbsp;valign=top&gt;<br>
&lt;td&gt;<br>
&lt;div&nbsp;align=right&gt;&lt;font&nbsp;size=1&nbsp;face=&quot;sans-serif&quot;&gt;cc&lt;/font&gt;&lt;/div&gt;<br>
&lt;td&gt;<br>
&lt;tr&nbsp;valign=top&gt;<br>
&lt;td&gt;<br>
&lt;div&nbsp;align=right&gt;&lt;font&nbsp;size=1&nbsp;face=&quot;sans-serif&quot;&gt;Subject&lt;/font&gt;&lt;/div&gt;<br>
&lt;td&gt;&lt;font&nbsp;size=1&nbsp;face=&quot;sans-serif&quot;&gt;Re:&nbsp;[Twisted-web]&nbsp;Memory&nbsp;leak&nbsp;with&nbsp;twisted<br>
web&nbsp;server&nbsp;on&nbsp;QNX&lt;/font&gt;&lt;/table&gt;<br>
&lt;br&gt;<br>
&lt;table&gt;<br>
&lt;tr&nbsp;valign=top&gt;<br>
&lt;td&gt;<br>
&lt;td&gt;&lt;/table&gt;<br>
&lt;br&gt;&lt;/table&gt;<br>
&lt;br&gt;<br>
&lt;p&gt;&lt;font&nbsp;size=1&nbsp;color=#000080&nbsp;face=&quot;sans-serif&quot;&gt;&lt;b&gt;Security&nbsp;Level:?&lt;/b&gt;&lt;/font&gt;&lt;font&nbsp;size=1&nbsp;color=#800080&nbsp;face=&quot;sans-serif&quot;&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/font&gt;&lt;font&nbsp;size=1&nbsp;face=&quot;sans-serif&quot;&gt;Internal&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;hr&gt;&lt;font&nbsp;size=2&gt;&lt;tt&gt;On&nbsp;Wed,&nbsp;Oct&nbsp;19,&nbsp;2005&nbsp;at&nbsp;10:15:24AM&nbsp;+0200,&nbsp;denis.leborgne@rieter.com<br>
wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;br&gt;<br>
&amp;gt;&nbsp;Hi,&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;use&nbsp;twisted&nbsp;as&nbsp;a&nbsp;very&nbsp;simple&nbsp;web&nbsp;server&nbsp;to&nbsp;serve&nbsp;python&nbsp;scripts.<br>
I&nbsp;now&nbsp;have&nbsp;a&lt;br&gt;<br>
&amp;gt;&nbsp;problem&nbsp;of&nbsp;memory&nbsp;leak&nbsp;on&nbsp;the&nbsp;server.&nbsp;I&nbsp;use&nbsp;Python&nbsp;2.2.1&nbsp;on&nbsp;QNX&nbsp;6.3,<br>
Twisted&lt;br&gt;<br>
&amp;gt;&nbsp;version&nbsp;is&nbsp;1.3.0.&lt;br&gt;<br>
[...]&lt;br&gt;<br>
&amp;gt;&nbsp;About&nbsp;every&nbsp;4&nbsp;&amp;quot;refresh&amp;quot;,&nbsp;the&nbsp;memory&nbsp;used&nbsp;by&nbsp;my&nbsp;server&nbsp;increases<br>
by&nbsp;96k,&nbsp;with&lt;br&gt;<br>
&amp;gt;&nbsp;nor&nbsp;release&nbsp;of&nbsp;memory.&nbsp;I&nbsp;checked&nbsp;the&nbsp;object&nbsp;number&nbsp;by&nbsp;watching&nbsp;len&lt;br&gt;<br>
&amp;gt;&nbsp;(gc.get_objects()),&nbsp;but&nbsp;it&nbsp;is&nbsp;stable.&lt;br&gt;<br>
&amp;gt;&nbsp;Any&nbsp;idea&nbsp;to&nbsp;help&nbsp;me&nbsp;to&nbsp;solve&nbsp;this&nbsp;problem,&nbsp;my&nbsp;server&nbsp;is&nbsp;expected&nbsp;to<br>
run&lt;br&gt;<br>
&amp;gt;&nbsp;continuously.&lt;br&gt;<br>
&lt;br&gt;<br>
There&nbsp;was&nbsp;a&nbsp;leak&nbsp;in&nbsp;the&nbsp;_c_urlarg.c&nbsp;module&nbsp;in&nbsp;1.3.0,&nbsp;which&nbsp;causes&nbsp;a&nbsp;string&lt;br&gt;<br>
the&nbsp;size&nbsp;of&nbsp;the&nbsp;url&nbsp;to&nbsp;be&nbsp;leaked&nbsp;every&nbsp;request.&nbsp;&amp;nbsp;This&nbsp;doesn't&nbsp;sound<br>
like&nbsp;it&lt;br&gt;<br>
would&nbsp;account&nbsp;for&nbsp;the&nbsp;96k&nbsp;per&nbsp;4&nbsp;requests&nbsp;to&nbsp;me,&nbsp;but&nbsp;perhaps&nbsp;the&nbsp;memory&lt;br&gt;<br>
allocation&nbsp;strategy&nbsp;on&nbsp;QNX&nbsp;explains&nbsp;that.&lt;br&gt;<br>
&lt;br&gt;<br>
Either&nbsp;upgrade&nbsp;to&nbsp;Twisted&nbsp;2.0&nbsp;or&nbsp;newer,&nbsp;or&nbsp;grab&nbsp;_c_urlarg.c&nbsp;from&nbsp;that&lt;br&gt;<br>
version&nbsp;or&nbsp;SVN&nbsp;(it's&nbsp;a&nbsp;one-line&nbsp;fix)&nbsp;and&nbsp;recompile&nbsp;it,&nbsp;or&nbsp;just&nbsp;delete&nbsp;the&lt;br&gt;<br>
compiled&nbsp;module&nbsp;--&nbsp;it'll&nbsp;fall&nbsp;back&nbsp;to&nbsp;the&nbsp;slower&nbsp;pure-python&nbsp;version&nbsp;in<br>
the&lt;br&gt;<br>
standard&nbsp;library,&nbsp;but&nbsp;it&nbsp;won't&nbsp;leak.&lt;br&gt;<br>
&lt;br&gt;<br>
Let&nbsp;us&nbsp;know&nbsp;if&nbsp;that&nbsp;solves&nbsp;it,&nbsp;or&nbsp;at&nbsp;least&nbsp;helps.&lt;br&gt;<br>
&lt;br&gt;<br>
-Andrew.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-web&nbsp;mailing&nbsp;list&lt;br&gt;<br>
Twisted-web@twistedmatrix.com&lt;br&gt;<br>
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web&lt;br&gt;<br>
&lt;/tt&gt;&lt;/font&gt;<br>
&lt;br&gt;
</tt>
