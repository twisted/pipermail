<tt>
Hello&nbsp;from&nbsp;a&nbsp;new&nbsp;list&nbsp;member!&amp;nbsp;&nbsp;I'm&nbsp;evaluating&nbsp;Twisted&nbsp;for&nbsp;use&nbsp;in&nbsp;my&nbsp;company's&nbsp;product,&nbsp;and&nbsp;I'm&nbsp;currently&nbsp;stuck&nbsp;on&nbsp;a&nbsp;problem&nbsp;that&nbsp;I&nbsp;don't&nbsp;know&nbsp;how&nbsp;to&nbsp;debug.&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;creating&nbsp;an&nbsp;XMLRPC&nbsp;server&nbsp;that&nbsp;uses&nbsp;twisted.enterprise.adbapi<br>
<br>
&nbsp;to&nbsp;query&nbsp;a&nbsp;database.&amp;nbsp;&nbsp;The&nbsp;symptom&nbsp;I've&nbsp;seeing&nbsp;is&nbsp;that&nbsp;the&nbsp;*third*&nbsp;call&nbsp;to&nbsp;an&nbsp;xmlrpc&nbsp;method&nbsp;that&nbsp;queries&nbsp;the&nbsp;database&nbsp;delays&nbsp;for&nbsp;some&nbsp;time&nbsp;(a&nbsp;minute&nbsp;or&nbsp;so)&nbsp;before&nbsp;returning&nbsp;with&nbsp;the&nbsp;correct&nbsp;results.&amp;nbsp;&nbsp;The&nbsp;first&nbsp;two&nbsp;calls&nbsp;always&nbsp;return&nbsp;very&nbsp;quickly.&amp;nbsp;&nbsp;Calls&nbsp;after&nbsp;the&nbsp;third&nbsp;one&nbsp;usually&nbsp;return&nbsp;quickly&nbsp;as&nbsp;well.<br>
&lt;br&gt;&lt;br&gt;I've&nbsp;narrowed&nbsp;down&nbsp;the&nbsp;code&nbsp;as&nbsp;far&nbsp;as&nbsp;I&nbsp;can,&nbsp;and&nbsp;I'm&nbsp;not&nbsp;sure&nbsp;what&nbsp;to&nbsp;check&nbsp;next.&amp;nbsp;&nbsp;Any&nbsp;help&nbsp;would&nbsp;be&nbsp;appreciated.&amp;nbsp;&nbsp;Here's&nbsp;what&nbsp;I've&nbsp;found&nbsp;so&nbsp;far&nbsp;(complete&nbsp;code&nbsp;is&nbsp;at&nbsp;the&nbsp;bottom&nbsp;of&nbsp;the&nbsp;email):&lt;br&gt;&lt;br&gt;1)&nbsp;Not&nbsp;using&nbsp;the&nbsp;XMLRPC&nbsp;server,&nbsp;just&nbsp;using&nbsp;<br>
reactor.callLater()&nbsp;to&nbsp;run&nbsp;the&nbsp;query,&nbsp;then&nbsp;calling&nbsp;callLater&nbsp;again&nbsp;in&nbsp;the&nbsp;callback&nbsp;results&nbsp;in&nbsp;the&nbsp;query&nbsp;getting&nbsp;run&nbsp;over&nbsp;and&nbsp;over&nbsp;and&nbsp;I&nbsp;never&nbsp;see&nbsp;a&nbsp;delay.&amp;nbsp;&nbsp;So&nbsp;I&nbsp;suspected&nbsp;the&nbsp;XMLRPC&nbsp;server&nbsp;code.&lt;br&gt;&lt;br&gt;2)&nbsp;Calling&nbsp;XMLRPC&nbsp;methods&nbsp;that&nbsp;don't&nbsp;use&nbsp;the&nbsp;dbpool&nbsp;always&nbsp;return&nbsp;quickly.&amp;nbsp;&nbsp;So&nbsp;I&nbsp;suspected&nbsp;the&nbsp;adbapi&nbsp;code.<br>
&lt;br&gt;&lt;br&gt;3)&nbsp;Changing&nbsp;the&nbsp;cp_min&nbsp;argument&nbsp;to&nbsp;ConnectionPool's&nbsp;constructor&nbsp;can&nbsp;change&nbsp;the&nbsp;behavior&nbsp;-&nbsp;making&nbsp;it&nbsp;larger&nbsp;than&nbsp;3&nbsp;results&nbsp;in&nbsp;the&nbsp;third&nbsp;call&nbsp;being&nbsp;delayed,&nbsp;then&nbsp;the&nbsp;fourth&nbsp;call&nbsp;getting&nbsp;error&nbsp;8002&nbsp;back&nbsp;from&nbsp;the&nbsp;server.&nbsp;<br>
&lt;br&gt;&lt;br&gt;4)&nbsp;I've&nbsp;tried&nbsp;adodbapi&nbsp;as&nbsp;well&nbsp;as&nbsp;the&nbsp;eval&nbsp;version&nbsp;of&nbsp;mxODBC&nbsp;just&nbsp;to&nbsp;make&nbsp;sure&nbsp;it&nbsp;wasn't&nbsp;the&nbsp;db&nbsp;driver&nbsp;-&nbsp;the&nbsp;behavior&nbsp;is&nbsp;identical&nbsp;in&nbsp;both&nbsp;cases.&lt;br&gt;&lt;br&gt;Any&nbsp;ideas?&amp;nbsp;&nbsp;Thanks&nbsp;in&nbsp;advance,&lt;br&gt;Sean&lt;br&gt;&lt;br&gt;---&lt;br&gt;from&nbsp;twisted.internet<br>
&nbsp;import&nbsp;reactor&lt;br&gt;from&nbsp;twisted.web&nbsp;import&nbsp;xmlrpc<br>
&lt;br&gt;from&nbsp;twisted.enterprise&nbsp;import&nbsp;adbapi&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;class&nbsp;ReportRunner(xmlrpc.XMLRPC):&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;__init__(self):<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.dbpool&nbsp;=&nbsp;adbapi.ConnectionPool(&amp;quot;mx.ODBC.Windows&amp;quot;,&nbsp;&amp;quot;dsn&amp;quot;,&amp;quot;user&amp;quot;,&amp;quot;pwd&amp;quot;)&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;xmlrpc_test(self):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;self.dbpool.runQuery(&amp;quot;select&nbsp;1&amp;quot;)<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;xmlrpc_quit(self):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;reactor.callLater(1,&nbsp;reactor.stop)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;&amp;quot;OK&amp;quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;def&nbsp;main():&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;from&nbsp;twisted.web&nbsp;import&nbsp;server&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;r&nbsp;=&nbsp;ReportRunner()<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;reactor.listenTCP(7080,&nbsp;server.Site(r))&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;reactor.run()&lt;br&gt;&lt;br&gt;&lt;br&gt;if&nbsp;__name__&nbsp;==&nbsp;'__main__':&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;main()&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;<br>
<br>

</tt>
