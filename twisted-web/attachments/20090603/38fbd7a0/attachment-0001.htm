<tt>
&lt;table&nbsp;cellspacing=&quot;0&quot;&nbsp;cellpadding=&quot;0&quot;&nbsp;border=&quot;0&quot;&nbsp;&gt;&lt;tr&gt;&lt;td&nbsp;valign=&quot;top&quot;&nbsp;style=&quot;font:&nbsp;inherit;&quot;&gt;I've&nbsp;got&nbsp;a&nbsp;simple&nbsp;little&nbsp;chat&nbsp;server&nbsp;set&nbsp;up&nbsp;that&nbsp;people&nbsp;can&nbsp;telnet&nbsp;into.&amp;nbsp;&nbsp;The&nbsp;code&nbsp;is&nbsp;as&nbsp;follows:&lt;br&gt;&lt;br&gt;----------&lt;br&gt;&lt;br&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;reactor&lt;br&gt;from&nbsp;twisted.internet.protocol&nbsp;import&nbsp;ServerFactory&nbsp;&lt;br&gt;from&nbsp;twisted.protocols.basic&nbsp;import&nbsp;LineOnlyReceiver&nbsp;&lt;br&gt;import&nbsp;threading&lt;br&gt;&lt;br&gt;class&nbsp;ChatProtocol(LineOnlyReceiver):&nbsp;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;name&nbsp;=&nbsp;&quot;&quot;&nbsp;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;getName(self):&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;self.name!=&quot;&quot;:&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;self.name&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;self.transport.getPeer().host&nbsp;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;connectionMade(self):&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;&quot;New&nbsp;connection&nbsp;from&nbsp;&quot;+self.getName()&nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
&nbsp;self.sendLine(&quot;Welcome&nbsp;to&nbsp;the&nbsp;chat.\r\n/quit&nbsp;to&nbsp;quit.&quot;)&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.factory.sendMessageToAllClients(self.getName()+&quot;&nbsp;joined&nbsp;the&nbsp;chat.&quot;)&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.factory.clientProtocols.append(self)&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;connectionLost(self,&nbsp;reason):&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;&quot;Lost&nbsp;connection&nbsp;from&nbsp;&quot;+self.getName()&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.factory.clientProtocols.remove(self)&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.factory.sendMessageToAllClients(self.getName()+&quot;&nbsp;disconnected.&quot;)&nbsp;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;lineReceived(self,&nbsp;line):&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;line==&quot;/quit&quot;:&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.transport.loseConnection()&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;else:<br>
&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.factory.sendMessageToAllClients(self.getName()+&quot;:&nbsp;&quot;+line)&nbsp;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;sendLine(self,&nbsp;line):&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.transport.write(line+&quot;\r\n&quot;)&nbsp;&lt;br&gt;&lt;br&gt;class&nbsp;ChatProtocolFactory(ServerFactory):&nbsp;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;protocol&nbsp;=&nbsp;ChatProtocol&nbsp;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;__init__(self):&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.clientProtocols&nbsp;=&nbsp;[]&nbsp;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;sendMessageToAllClients(self,&nbsp;mesg):&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;for&nbsp;client&nbsp;in&nbsp;self.clientProtocols:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;client.sendLine(mesg)&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;br&gt;def&nbsp;Test():&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;global&nbsp;test&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;factory.sendMessageToAllClients('Hey.')&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;test&nbsp;=&nbsp;threading.Timer(1.0,<br>
&nbsp;Test)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;test.start()&lt;br&gt;test&nbsp;=&nbsp;threading.Timer(1.0,&nbsp;Test)&lt;br&gt;test.start()&lt;br&gt;&lt;br&gt;print&nbsp;&quot;Starting&nbsp;Server&quot;&lt;br&gt;factory&nbsp;=&nbsp;ChatProtocolFactory()&lt;br&gt;reactor.listenTCP(3009,&nbsp;factory)&lt;br&gt;reactor.run()&lt;br&gt;&lt;br&gt;----------&lt;br&gt;&lt;br&gt;The<br>
problem&nbsp;is&nbsp;that&nbsp;last&nbsp;def,&nbsp;&quot;def&nbsp;Test()&quot;.&amp;nbsp;&nbsp;It&nbsp;should&nbsp;send&nbsp;the&nbsp;line&nbsp;&quot;Hey.&quot;<br>
to&nbsp;all&nbsp;connected&nbsp;users&nbsp;every&nbsp;second.&amp;nbsp;&nbsp;It&nbsp;does&nbsp;that&nbsp;-&nbsp;however,&nbsp;the<br>
message&nbsp;only&nbsp;sends&nbsp;through&nbsp;if&nbsp;the&nbsp;client&nbsp;is&nbsp;typing&nbsp;or&nbsp;has&nbsp;entered&nbsp;a<br>
line.&amp;nbsp;&nbsp;So,&nbsp;if&nbsp;a&nbsp;client&nbsp;is&nbsp;idle&nbsp;for&nbsp;30&nbsp;seconds,&nbsp;then&nbsp;starts&nbsp;typing,&nbsp;he<br>
will&nbsp;receive&nbsp;&quot;Hey.&quot;&nbsp;30&nbsp;times&nbsp;in&nbsp;a&nbsp;row&nbsp;-&nbsp;one&nbsp;for&nbsp;each&nbsp;second&nbsp;he&nbsp;was&nbsp;idle.&lt;br&gt;&lt;br&gt;Is&nbsp;there&nbsp;any&nbsp;way&nbsp;to&nbsp;get&nbsp;this&nbsp;to&nbsp;send&nbsp;the&nbsp;message&nbsp;and&nbsp;have&nbsp;it&nbsp;show&nbsp;up&nbsp;for&nbsp;a&nbsp;client&nbsp;even&nbsp;when&nbsp;they're&nbsp;idle?&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
</tt>
