<tt>
Hello&nbsp;all,&lt;br&gt;<br>
&lt;br&gt;<br>
Just&nbsp;getting&nbsp;started&nbsp;with&nbsp;Twisted.&nbsp;Thanks&nbsp;to&nbsp;the&nbsp;community&nbsp;for<br>
tremendous&nbsp;work.&amp;nbsp;&nbsp;I&nbsp;diligently&nbsp;went&nbsp;through&nbsp;the&nbsp;entire&nbsp;archives&nbsp;of<br>
the&nbsp;mailing&nbsp;list&nbsp;--&amp;nbsp;&nbsp;reading&nbsp;choice&nbsp;threads&nbsp;--&amp;nbsp;&nbsp;and&nbsp;I&nbsp;read<br>
through&nbsp;all&nbsp;the&nbsp;documentation&nbsp;on&nbsp;the&nbsp;twisted-matrix&nbsp;website.&amp;nbsp;&nbsp;I've<br>
never&nbsp;done&nbsp;any&nbsp;event-driven&nbsp;programming,&nbsp;but&nbsp;there&nbsp;was&nbsp;enough&nbsp;on&nbsp;the<br>
site&nbsp;for&nbsp;me&nbsp;to&nbsp;start&nbsp;getting&nbsp;a&nbsp;handle&nbsp;on&nbsp;things.&amp;nbsp;&nbsp;Below&nbsp;is&nbsp;a&nbsp;short<br>
script&nbsp;that&nbsp;crawls&nbsp;the&nbsp;links&nbsp;from&nbsp;a&nbsp;URI&nbsp;looking&nbsp;for&nbsp;RSS-type<br>
feeds.&amp;nbsp;&nbsp;I'm&nbsp;hoping&nbsp;that&nbsp;some&nbsp;of&nbsp;the&nbsp;more&nbsp;experienced&nbsp;developers<br>
would&nbsp;be&nbsp;willing&nbsp;to&nbsp;give&nbsp;some&nbsp;advice&nbsp;about&nbsp;whether&nbsp;I'm&nbsp;using<br>
twisted.internet.reactor&nbsp;and&nbsp;twisted.web.client.getPage<br>
correctly.&amp;nbsp;&nbsp;I've&nbsp;put&nbsp;some&nbsp;comments&nbsp;labeled&nbsp;as&nbsp;#Question&nbsp;where&nbsp;I'm<br>
unsure&nbsp;wheter&nbsp;I&nbsp;understand&nbsp;exactly&nbsp;what&nbsp;I'm&nbsp;doing&nbsp;--&nbsp;Im&nbsp;hoping&nbsp;someone<br>
can&nbsp;refute/chastise/critique&nbsp;the&nbsp;understanding&nbsp;that&nbsp;is&nbsp;implied&nbsp;by&nbsp;the<br>
code&nbsp;and&nbsp;questions.&nbsp;I&nbsp;have&nbsp;a&nbsp;thick&nbsp;skin&nbsp;so&nbsp;the&nbsp;more&nbsp;talented/vitriolic<br>
the&nbsp;response&nbsp;the&nbsp;better.&amp;nbsp;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;Find&nbsp;RSS&nbsp;Feeds.&lt;br&gt;<br>
#&nbsp;Richard&nbsp;Meraz&nbsp;--&nbsp;&lt;a&nbsp;href=&quot;mailto:rfmeraz@gmail.com&quot;&gt;rfmeraz@gmail.com&lt;/a&gt;.&nbsp;&lt;br&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;reactor&lt;br&gt;from&nbsp;twisted.web.client&nbsp;import&nbsp;getPage&lt;br&gt;<br>
&lt;br&gt;import&nbsp;feedlib&nbsp;#&nbsp;Includes&nbsp;modified&nbsp;version&nbsp;of&nbsp;M.&nbsp;Pilgrims&nbsp;feedfinder.py&nbsp;and&nbsp;modified&nbsp;version&nbsp;of&lt;br&gt;&amp;nbsp;<br>
&amp;nbsp;&nbsp;&amp;nbsp;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
#&nbsp;D.&nbsp;Mertz&nbsp;code&nbsp;for&nbsp;url&nbsp;extraction&nbsp;from&nbsp;p.&nbsp;228&nbsp;of&nbsp;__TPIP__.&nbsp;&lt;br&gt;&lt;br&gt;MAXTIME&nbsp;=&nbsp;60&nbsp;#&nbsp;Kill&nbsp;crawl&nbsp;after&nbsp;this&nbsp;time&lt;br&gt;TIMEOUT&nbsp;=&nbsp;20&nbsp;#&nbsp;Kill&nbsp;page&nbsp;retrieval&nbsp;after&nbsp;this&nbsp;time&nbsp;inactive&lt;br&gt;MAXDEPTH&nbsp;=&nbsp;3&nbsp;#&nbsp;Recurse&nbsp;this&nbsp;depth&nbsp;when&nbsp;crawling&nbsp;page.<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;Question:&nbsp;There&nbsp;seem&nbsp;to&nbsp;be&nbsp;many&nbsp;idioms&nbsp;to&nbsp;aggregate&nbsp;information&nbsp;from<br>
different&nbsp;defered&nbsp;call-back&nbsp;chains&nbsp;in&nbsp;twisted..&amp;nbsp;&nbsp;Since&nbsp;everything<br>
runs&nbsp;in&nbsp;a&nbsp;single&nbsp;thread&nbsp;I&nbsp;just&nbsp;stuck&nbsp;my&nbsp;stuff&nbsp;in&nbsp;a&nbsp;global&nbsp;class&nbsp;and<br>
everybody&nbsp;modifies&nbsp;the&nbsp;vars&nbsp;there&nbsp;as&nbsp;I&nbsp;pass&nbsp;it&nbsp;around&nbsp;to&nbsp;the&nbsp;call-backs<br>
that&nbsp;should&nbsp;see&nbsp;it.&amp;nbsp;&nbsp;Seems&nbsp;okay&nbsp;for&nbsp;a&nbsp;small&nbsp;script&nbsp;like&nbsp;this?&lt;br&gt;<br>
&lt;br&gt;class&nbsp;StateVars:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;'''Keep&nbsp;Global&nbsp;state<br>
for&nbsp;starting/stopping&nbsp;feedfinding&nbsp;and&nbsp;a&nbsp;record&nbsp;of&nbsp;links&nbsp;we&nbsp;have&nbsp;checked<br>
and&nbsp;their&nbsp;status'''&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;connections&nbsp;=&nbsp;1&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;links_checked&nbsp;=&nbsp;{}&nbsp;#&nbsp;Structure:&nbsp;{url:&nbsp;(is&nbsp;RSS/ATOM/RDF,&nbsp;page-content)}&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;Question:&nbsp;start_feed_crawl&nbsp;is&nbsp;where&nbsp;I&nbsp;set&nbsp;up&nbsp;my&nbsp;defers.&amp;nbsp;&nbsp;getPage&nbsp;returns&nbsp;a&nbsp;defer&nbsp;and&nbsp;I&nbsp;attach&nbsp;my&nbsp;call-back&nbsp;process_link.&lt;br&gt;<br>
#&nbsp;addCallbacks&nbsp;adds&nbsp;a&nbsp;callback/errback&nbsp;in&nbsp;parallel&nbsp;so&nbsp;only&nbsp;one&nbsp;or&nbsp;the&nbsp;other&nbsp;is&nbsp;called?&amp;nbsp;&nbsp;so&nbsp;I&nbsp;need&nbsp;to&nbsp;add&lt;br&gt;<br>
#&nbsp;the&nbsp;final&nbsp;errback&nbsp;to&nbsp;catch&nbsp;errors&nbsp;from&nbsp;callback&nbsp;process_link&nbsp;?&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&nbsp;&lt;br&gt;def&nbsp;start_feed_crawl(uri,depth):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;'''Harvest&nbsp;feeds&nbsp;from&nbsp;a&nbsp;uri'''&lt;br&gt;<br>
#&nbsp;Question:&nbsp;how&nbsp;to&nbsp;time-out&nbsp;this&nbsp;deferred&nbsp;chain&nbsp;if&nbsp;getPage&nbsp;is&nbsp;taking&nbsp;too&nbsp;long&nbsp;to&nbsp;finish&nbsp;its&nbsp;work.&lt;br&gt;<br>
#&nbsp;what&nbsp;exactly&nbsp;does&nbsp;the&nbsp;argument&nbsp;timeout&nbsp;to&nbsp;getPage&nbsp;do,&amp;nbsp;&nbsp;does&nbsp;it&nbsp;timeout&nbsp;the&nbsp;socket&nbsp;after&nbsp;a&nbsp;no-response&lt;br&gt;<br>
#&nbsp;or&nbsp;does&nbsp;it&nbsp;put&nbsp;an&nbsp;upper-bound&nbsp;on&nbsp;how&nbsp;long&nbsp;getPage&nbsp;has&nbsp;to&nbsp;finish&nbsp;its&nbsp;work?&lt;br&gt;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;getPage(uri,&nbsp;timeout=TIMEOUT).addCallbacks(callback=process_link,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;callbackArgs=(uri,<br>
depth,&nbsp;StateVars),&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;errback<br>
=&nbsp;process_error,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;errbackArgs=(uri,StateVars)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;).addErrback(process_error,<br>
uri,&nbsp;StateVars)&lt;br&gt;&lt;br&gt;def&nbsp;process_link(data,uri,depth,state):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;'''Recursive&nbsp;link&nbsp;processing&nbsp;callback.&nbsp;Determines&nbsp;whether&nbsp;a&nbsp;link&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;is&nbsp;a&nbsp;RSS/ATOM/RDF&nbsp;feed.&nbsp;If&nbsp;not&nbsp;then&nbsp;extracts&nbsp;all&nbsp;xml-like&nbsp;links&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;that&nbsp;could&nbsp;point&nbsp;to&nbsp;feeds&nbsp;and&nbsp;starts&nbsp;crawl&nbsp;on&nbsp;those.'''<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&nbsp;feedlib.couldBeFeedData(data):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#print&nbsp;'Feed:&nbsp;%s'&nbsp;%&nbsp;uri&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;state.links_checked[uri]&nbsp;=&nbsp;(True,data)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;state.links_checked[uri]&nbsp;=&nbsp;(False,None)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&amp;nbsp;&amp;nbsp;depth&nbsp;&amp;lt;=&nbsp;MAXDEPTH:<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alinks&nbsp;=&nbsp;feedlib.getALinks(data,uri)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;links&nbsp;=&nbsp;feedlib.getLinks(data,uri)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;rawurls<br>
=<br>
feedlib.extract_urls(data)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;links_to_check&nbsp;=&nbsp;[feedlib.makeFullURI(u)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for<br>
u&nbsp;in&nbsp;set(alinks+links+rawurls)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if<br>
feedlib.isXMLRelatedLink(u)]&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for&nbsp;l&nbsp;in&nbsp;links_to_check:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#&nbsp;Don't&nbsp;need&nbsp;to&nbsp;see&nbsp;it&nbsp;again.&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if<br>
state.links_checked.has_key(l):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;continue&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;state.connections<br>
+=&nbsp;1&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
#&nbsp;Question:&nbsp;since&nbsp;I'm&nbsp;starting&nbsp;up&nbsp;these&nbsp;defers&nbsp;in&nbsp;a&nbsp;callback&nbsp;they&nbsp;are&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
#&nbsp;being&nbsp;created&nbsp;after&nbsp;I've&nbsp;called&nbsp;reactor.run()&nbsp;since&nbsp;we&nbsp;call<br>
start_feed_crawl&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
#&nbsp;as&nbsp;we&nbsp;find&nbsp;new&nbsp;links&nbsp;that&nbsp;meet&nbsp;our&nbsp;criteria.&amp;nbsp;&nbsp;Am&nbsp;I&nbsp;doing<br>
anything&nbsp;bad&nbsp;here?&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
#&nbsp;All&nbsp;the&nbsp;examples&nbsp;I've&nbsp;seen&nbsp;(eg.&nbsp;p.&nbsp;548-552&nbsp;Python&nbsp;Cookbook,&nbsp;great&nbsp;eg<br>
by&nbsp;V.&nbsp;Volonghi&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
#&nbsp;and&nbsp;P.&nbsp;Cogolo)&nbsp;have&nbsp;their&nbsp;data&nbsp;up-front&nbsp;and&nbsp;therefore&nbsp;set-up&nbsp;all&nbsp;the<br>
defers&nbsp;before&nbsp;calling&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
#&nbsp;reactor.run().&amp;nbsp;&nbsp;Here&nbsp;I'm&nbsp;discovering&nbsp;my&nbsp;data&nbsp;as&nbsp;I&nbsp;go&nbsp;along&nbsp;and<br>
setting&nbsp;up&nbsp;deferrs&nbsp;while&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
#&nbsp;the&nbsp;reactor&nbsp;is&nbsp;spinning.&amp;nbsp;&nbsp;Here&nbsp;is&nbsp;my&nbsp;fundamental&nbsp;lack&nbsp;of<br>
understanding.&amp;nbsp;&nbsp;While&nbsp;this&nbsp;script&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
#&nbsp;seems&nbsp;to&nbsp;run&nbsp;okay,&nbsp;is&nbsp;it&nbsp;okay&nbsp;to&nbsp;do&nbsp;this?&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;start_feed_crawl(l,depth+1)&lt;br&gt;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;state.connections&nbsp;-=&nbsp;1&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;Question:&nbsp;Is&nbsp;this&nbsp;how&nbsp;I&nbsp;kill&nbsp;the&nbsp;reactor&nbsp;--&nbsp;ie.<br>
using&nbsp;some&nbsp;sort&nbsp;of&nbsp;state&nbsp;condition.&amp;nbsp;&nbsp;Is&nbsp;there&nbsp;a&nbsp;better&nbsp;way,&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;should&nbsp;I&nbsp;try&nbsp;better&nbsp;to&nbsp;understand<br>
deferred-list.&amp;nbsp;&nbsp;For&nbsp;example.&amp;nbsp;&nbsp;A&nbsp;top-level&nbsp;deferred-list&nbsp;that<br>
contains&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;other&nbsp;deferred-lists&nbsp;which&nbsp;get&nbsp;created&nbsp;to&nbsp;hold&nbsp;all&nbsp;the&nbsp;defers&nbsp;(created&nbsp;by&nbsp;start_feed_crawl)&nbsp;for&nbsp;the&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;links&nbsp;on&nbsp;a&nbsp;given&nbsp;page.&amp;nbsp;&nbsp;Could&nbsp;this&nbsp;deferred-list&nbsp;be&nbsp;told&nbsp;to&nbsp;stop&nbsp;the&nbsp;reactor&nbsp;when&nbsp;the&nbsp;other&nbsp;lists&nbsp;have&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;fired&nbsp;their&nbsp;callback&nbsp;(after&nbsp;the&nbsp;component&nbsp;defers<br>
have&nbsp;finished)&nbsp;?&amp;nbsp;&nbsp;(Sorry&nbsp;for&nbsp;the&nbsp;convoluted&nbsp;question&nbsp;here&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;I'm&nbsp;new&nbsp;at&nbsp;this)&lt;br&gt;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&nbsp;state.connections&nbsp;&amp;lt;=&nbsp;0:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;reactor.stop()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&lt;br&gt;&lt;br&gt;def&nbsp;process_error(error,uri,state):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;'''Catch&nbsp;errors&nbsp;in&nbsp;link&nbsp;processing'''&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;state.connections&nbsp;-=&nbsp;1&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&nbsp;state.connections<br>
&nbsp;&amp;lt;=&nbsp;0:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;reactor.stop()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&nbsp;''&lt;br&gt;&lt;br&gt;if&nbsp;__name__&nbsp;==&nbsp;'__main__':&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;import&nbsp;sys&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&nbsp;len(sys.argv)&nbsp;&amp;lt;&nbsp;2:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;print&nbsp;'feedfinder_new.py&nbsp;&amp;lt;uri&amp;gt;'&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sys.exit()&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;uri&nbsp;=&nbsp;<br>
feedlib.makeFullURI(sys.argv[1])&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;start_feed_crawl(uri,1)&lt;br&gt;&amp;nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;Question:&nbsp;I'm&nbsp;killing&nbsp;the&nbsp;process&nbsp;after&nbsp;a&nbsp;pre-determined&nbsp;amount&nbsp;of&nbsp;time.&amp;nbsp;&nbsp;However&nbsp;reactor.stop()&nbsp;seems&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;to&nbsp;kill&nbsp;network&nbsp;connections.&amp;nbsp;&nbsp;is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;stop&nbsp;the&nbsp;reactor&nbsp;but&nbsp;let&nbsp;the&nbsp;connections&nbsp;finish.&lt;br&gt;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;Hack&nbsp;to&nbsp;blow&nbsp;out&nbsp;any&nbsp;connections&nbsp;that&nbsp;are&nbsp;hung&nbsp;or&nbsp;uncalled&nbsp;after&nbsp;MAXTIME&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;reactor.callLater(MAXTIME,&nbsp;reactor.stop)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;reactor.run()&lt;br&gt;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for&nbsp;l&nbsp;in&nbsp;StateVars.links_checked:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&nbsp;StateVars.links_checked[l][0]:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;print&nbsp;l&lt;br&gt;&lt;br&gt;Final<br>
question:&nbsp;occasionally&nbsp;I&nbsp;get&nbsp;errors&nbsp;that&nbsp;come&nbsp;from&nbsp;the&nbsp;http.py&nbsp;code&nbsp;in<br>
twisted.&amp;nbsp;&nbsp;This&nbsp;get&nbsp;printed&nbsp;to&nbsp;the&nbsp;console,&nbsp;but&nbsp;don't&nbsp;necessarily<br>
stop&nbsp;my&nbsp;program.&amp;nbsp;&nbsp;Should&nbsp;my&nbsp;errbacks&nbsp;be&nbsp;catching&nbsp;these?&amp;nbsp;&nbsp;How<br>
do&nbsp;I&nbsp;keep&nbsp;errors&nbsp;from&nbsp;getting&nbsp;logged&nbsp;to&nbsp;the&nbsp;console&nbsp;(beside&nbsp;redirecting<br>
stderr).&nbsp;I&nbsp;can&nbsp;post&nbsp;an&nbsp;example&nbsp;if&nbsp;necessary&nbsp;of&nbsp;the&nbsp;errors&nbsp;I'm&nbsp;getting.&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks&nbsp;for&nbsp;your&nbsp;help.&lt;br&gt;<br>
&lt;br&gt;<br>
Richard&nbsp;F.&nbsp;Meraz&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;--&nbsp;&lt;br&gt;Never&nbsp;think&nbsp;there&nbsp;is&nbsp;anything&nbsp;impossible&nbsp;for&nbsp;the&nbsp;soul.&nbsp;It&nbsp;is<br>
the&nbsp;greatest&nbsp;heresy&nbsp;to&nbsp;think&nbsp;so.&nbsp;If&nbsp;there&nbsp;is&nbsp;sin,&nbsp;this&nbsp;is&nbsp;the&nbsp;only&nbsp;sin<br>
–&nbsp;to&nbsp;say&nbsp;that&nbsp;you&nbsp;are&nbsp;weak,&nbsp;or&nbsp;others&nbsp;are&nbsp;weak.&lt;br&gt;&lt;br&gt;Swami&nbsp;Vivekananda&amp;nbsp;&amp;nbsp;
</tt>
