<tt>
&lt;table&nbsp;cellspacing=&quot;0&quot;&nbsp;cellpadding=&quot;0&quot;&nbsp;border=&quot;0&quot;&nbsp;&gt;&lt;tr&gt;&lt;td&nbsp;valign=&quot;top&quot;&nbsp;style=&quot;font:&nbsp;inherit;&quot;&gt;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;debug&nbsp;a&nbsp;scenario&nbsp;wherein&nbsp;a&nbsp;program&nbsp;has&nbsp;an&nbsp;http&nbsp;channel/transport&nbsp;&lt;br&gt;that&nbsp;receives&nbsp;an&nbsp;HTTP&nbsp;response;&nbsp;and&nbsp;in&nbsp;some&nbsp;cases&nbsp;(5&nbsp;out&nbsp;of&nbsp;10,000)&nbsp;the&nbsp;&lt;br&gt;channel/transport&nbsp;invokes&nbsp;the&nbsp;lost&nbsp;connection&nbsp;callback&nbsp;while&nbsp;the&nbsp;amount&nbsp;of&nbsp;data&nbsp;&lt;br&gt;received&nbsp;is&nbsp;less&nbsp;than&nbsp;the&nbsp;content&nbsp;length.&amp;nbsp;&nbsp;The&nbsp;connection&nbsp;is&nbsp;used&nbsp;as&nbsp;a&nbsp;producer&nbsp;&lt;br&gt;to&nbsp;write&nbsp;to&nbsp;another&nbsp;connection.&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;debug&nbsp;to&nbsp;check&nbsp;whether:&lt;br&gt;(1)&nbsp;the&nbsp;last&nbsp;chunk&nbsp;(20K+)&nbsp;of&nbsp;data&nbsp;sitting&nbsp;in&nbsp;the&nbsp;incoming&nbsp;response&nbsp;is&nbsp;not&nbsp;being&nbsp;&lt;br&gt;propagated&nbsp;up,&nbsp;e.g.&nbsp;due&nbsp;to&nbsp;a&nbsp;prior&nbsp;pauseProducing()&nbsp;call,&nbsp;or&nbsp;&lt;br&gt;&lt;br&gt;(2)&nbsp;the&nbsp;data&nbsp;was&nbsp;not&nbsp;sent&nbsp;from&nbsp;the&nbsp;peer&nbsp;(e.g.&nbsp;connection&nbsp;closed&nbsp;without&nbsp;using&nbsp;so_linger)&lt;br&gt;&lt;br&gt;In&nbsp;general,&nbsp;I&nbsp;&quot;presume&quot;&nbsp;lost&nbsp;connection&nbsp;callback&nbsp;on&nbsp;a&nbsp;producer&nbsp;socket&nbsp;would&nbsp;not&nbsp;&lt;br&gt;be&nbsp;called&nbsp;if&nbsp;there&nbsp;is&nbsp;pending&nbsp;(paused)&nbsp;data&nbsp;that&nbsp;has&nbsp;yet&nbsp;to&nbsp;be&nbsp;written&nbsp;a&nbsp;&lt;br&gt;consumer&nbsp;(socket).&amp;nbsp;&nbsp;I&nbsp;am&nbsp;also&nbsp;assuming&nbsp;that<br>
&nbsp;the&nbsp;assert&nbsp;in&nbsp;&lt;br&gt;internet/abstract.py::resumeProducing()&nbsp;[self.connected&nbsp;and&nbsp;not&nbsp;self.disconnecting]&nbsp;is&nbsp;valid.&amp;nbsp;&nbsp;&lt;br&gt;I.E:&nbsp;If&nbsp;someone&nbsp;can&nbsp;confirm&nbsp;that&nbsp;scenario&nbsp;(1)&nbsp;above&nbsp;is&nbsp;not&nbsp;possible&nbsp;in&nbsp;twisted&nbsp;(unless&nbsp;a&nbsp;bug).&lt;br&gt;&lt;br&gt;By&nbsp;the&nbsp;time&nbsp;the&nbsp;lost&nbsp;connection&nbsp;callback&nbsp;is&nbsp;called,&nbsp;the&nbsp;transport&nbsp;channel&nbsp;is&nbsp;gone.&amp;nbsp;&nbsp;&lt;br&gt;I&nbsp;would&nbsp;have&nbsp;to&nbsp;instrument&nbsp;either&nbsp;tcp.py,&nbsp;basic.py,&nbsp;or&nbsp;abstract.py&nbsp;to&nbsp;track&nbsp;this.&lt;br&gt;&lt;br&gt;Any&nbsp;clues/suggestions&nbsp;welcome.&lt;br&gt;&lt;br&gt;Thanks.&lt;br&gt;-Arun&lt;br&gt;&lt;br&gt;&lt;blockquote&nbsp;style=&quot;border-left:&nbsp;2px&nbsp;solid&nbsp;rgb(16,&nbsp;16,&nbsp;255);&nbsp;margin-left:&nbsp;5px;&nbsp;padding-left:&nbsp;5px;&quot;&gt;&lt;div&nbsp;id=&quot;yiv1070802278&quot;&gt;&lt;table&nbsp;border=&quot;0&quot;&nbsp;cellpadding=&quot;0&quot;&nbsp;cellspacing=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&nbsp;style=&quot;font:inherit;&quot;&nbsp;valign=&quot;top&quot;&gt;&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
</tt>
