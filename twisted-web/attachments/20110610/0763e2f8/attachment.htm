<tt>
&lt;table&nbsp;cellspacing=&quot;0&quot;&nbsp;cellpadding=&quot;0&quot;&nbsp;border=&quot;0&quot;&nbsp;&gt;&lt;tr&gt;&lt;td&nbsp;valign=&quot;top&quot;&nbsp;style=&quot;font:&nbsp;inherit;&quot;&gt;&lt;br&gt;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;debug&nbsp;a&nbsp;scenario&nbsp;wherein&nbsp;a&nbsp;program&nbsp;has&nbsp;an&nbsp;http&nbsp;channel&nbsp;socket&nbsp;that&nbsp;receives&nbsp;an&nbsp;HTTP&nbsp;response;&nbsp;and&nbsp;in&nbsp;some&nbsp;cases&nbsp;(5&nbsp;out&nbsp;of&nbsp;10,000)&nbsp;the&nbsp;channel/transport&nbsp;invokes&nbsp;the&nbsp;lost&nbsp;connection&nbsp;callback&nbsp;while&nbsp;the&nbsp;amount&nbsp;of&nbsp;data&nbsp;received&nbsp;is&nbsp;less&nbsp;than&nbsp;the&nbsp;content&nbsp;length.&amp;nbsp;&nbsp;The&nbsp;connection&nbsp;is&nbsp;used&nbsp;as&nbsp;a&nbsp;producer&nbsp;to&nbsp;write&nbsp;to&nbsp;another&nbsp;connection.&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;debug&nbsp;to&nbsp;check&nbsp;whether:&lt;br&gt;(1)&nbsp;the&nbsp;last&nbsp;chunk&nbsp;(20K+)&nbsp;of&nbsp;data&nbsp;sitting&nbsp;in&nbsp;the&nbsp;incoming&nbsp;response&nbsp;is&nbsp;not&nbsp;being&nbsp;propagated&nbsp;up,&nbsp;e.g.&nbsp;due&nbsp;to&nbsp;a&nbsp;prior&nbsp;pauseProducing()&nbsp;call,&nbsp;or&nbsp;&lt;br&gt;&lt;br&gt;(2)&nbsp;the&nbsp;data&nbsp;was&nbsp;not&nbsp;sent&nbsp;from&nbsp;the&nbsp;peer&nbsp;(e.g.&nbsp;connection&nbsp;closed&nbsp;without&nbsp;using&nbsp;so_linger)&lt;br&gt;&lt;br&gt;In&nbsp;general,&nbsp;I&nbsp;&quot;presume&quot;&nbsp;lost&nbsp;connection&nbsp;callback&nbsp;on&nbsp;a&nbsp;producer&nbsp;socket&nbsp;would&nbsp;not&nbsp;be&nbsp;called&nbsp;if&nbsp;there&nbsp;is&nbsp;pending&nbsp;(paused)&nbsp;data&nbsp;that&nbsp;has&nbsp;yet&nbsp;to&nbsp;be&nbsp;written&nbsp;a&nbsp;consumer&nbsp;(socket).&amp;nbsp;&nbsp;I&nbsp;am&nbsp;also&nbsp;assuming&nbsp;that&nbsp;the&nbsp;assert&nbsp;in<br>
&nbsp;internet/abstract.py::resumeProducing()&nbsp;[self.connected&nbsp;and&nbsp;not&nbsp;self.disconnecting]&nbsp;is&nbsp;valid.&amp;nbsp;&nbsp;I.E:&nbsp;It&nbsp;would&nbsp;be&nbsp;great&nbsp;someone&nbsp;can&nbsp;confirm&nbsp;that&nbsp;scenario&nbsp;(1)&nbsp;above&nbsp;is&nbsp;not&nbsp;possible&nbsp;in&nbsp;twisted&nbsp;(unless&nbsp;a&nbsp;bug).&lt;br&gt;&lt;br&gt;By&nbsp;the&nbsp;time&nbsp;the&nbsp;lost&nbsp;connection&nbsp;callback&nbsp;is&nbsp;called,&nbsp;the&nbsp;transport&nbsp;channel&nbsp;is&nbsp;gone.&amp;nbsp;&nbsp;I&nbsp;would&nbsp;have&nbsp;to&nbsp;instrument&nbsp;either&nbsp;tcp.py,&nbsp;basic.py,&nbsp;or&nbsp;abstract.py&nbsp;to&nbsp;track&nbsp;this.&lt;br&gt;&lt;br&gt;If&nbsp;the&nbsp;bug&nbsp;is&nbsp;indeed&nbsp;scenario&nbsp;(2),&nbsp;then&nbsp;I&nbsp;will&nbsp;use&nbsp;wireshark&nbsp;(cause&nbsp;the&nbsp;client&nbsp;program&nbsp;has&nbsp;actually&nbsp;written&nbsp;the&nbsp;entire&nbsp;response&nbsp;to&nbsp;its&nbsp;end&nbsp;of&nbsp;the&nbsp;connection).&lt;br&gt;&lt;br&gt;Any&nbsp;clues/suggestions&nbsp;welcome.&lt;br&gt;&lt;br&gt;Thanks.&lt;br&gt;-Arun&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
</tt>
