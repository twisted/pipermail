<tt>
<br>
&lt;HTML&gt;&lt;BODY&gt;&lt;br&gt;&lt;br&gt;Thank&nbsp;you&nbsp;for&nbsp;example.&nbsp;I&nbsp;write&nbsp;a&nbsp;simple&nbsp;plugin&nbsp;for&nbsp;template:&lt;br&gt;&lt;br&gt;from&nbsp;twisted.application&nbsp;import&nbsp;service,&nbsp;internet&lt;br&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;utils,&nbsp;reactor&lt;br&gt;from&nbsp;twisted.python&nbsp;import&nbsp;log&lt;br&gt;from&nbsp;twisted.python&nbsp;import&nbsp;usage&lt;br&gt;&lt;br&gt;class&nbsp;Options(usage.Options):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;pass&lt;br&gt;&lt;br&gt;class&nbsp;TestService(service.Service):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;name&nbsp;=&nbsp;'TestService'&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;reactor):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.reactor&nbsp;=&nbsp;reactor&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;startService(self):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.reactor.callWhenRunning(self.Test)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.reactor.run()&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;Test(self):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;utils.getProcessOutputAndValue('/usr/bin/sleep',&nbsp;args&nbsp;=&nbsp;['1000'])&lt;br&gt;&lt;br&gt;&lt;br&gt;def&nbsp;makeService(options):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;s&nbsp;=&nbsp;TestService(reactor)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;s&lt;br&gt;&lt;span&gt;﻿&lt;/span&gt;&lt;br&gt;It's&nbsp;work&nbsp;(twistd&nbsp;-n&nbsp;test&nbsp;)&nbsp;,&nbsp;but&nbsp;kill&nbsp;pid&nbsp;(&nbsp;without&nbsp;kill&nbsp;-9&nbsp;)&nbsp;don't&nbsp;work.&nbsp;I&nbsp;see&nbsp;a&nbsp;message&nbsp;&quot;Main&nbsp;loop&nbsp;terminated&quot;&nbsp;and&nbsp;script&nbsp;continue&nbsp;running.&nbsp;Why&nbsp;?&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;14&nbsp;июля&nbsp;2011,&nbsp;17:30&nbsp;от&nbsp;Duncan&nbsp;McGreggor&nbsp;&amp;lt;duncan.mcgreggor@gmail.com&amp;gt;:&lt;br&gt;&lt;blockquote&nbsp;style=&quot;border-left:1px&nbsp;solid&nbsp;#0857A6;&nbsp;margin:10px;&nbsp;padding:0&nbsp;0&nbsp;0&nbsp;10px;&quot;&nbsp;class=&quot;mailru-blockquote&quot;&gt;&lt;div&nbsp;id=&quot;class_1310657516&quot;&gt;<br>
&lt;div&nbsp;class=&quot;js-helper&quot;&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;style&nbsp;type=&quot;text/css&quot;&gt;&lt;/style&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;div&nbsp;id=&quot;style_13106502130000000918&quot;&nbsp;class=&quot;pRel&nbsp;dB2&nbsp;w100&quot;&nbsp;style=&quot;overflow-x:auto;&quot;&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;base&nbsp;href=&quot;http://e.mail.ru/cgi-bin/&quot;&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;div&nbsp;id=&quot;style_13106502130000000918_BODY&quot;&gt;On&nbsp;Thu,&nbsp;Jul&nbsp;14,&nbsp;2011&nbsp;at&nbsp;7:05&nbsp;AM,&nbsp;Thorne,&nbsp;Stephen&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;sentmsg?compose&amp;amp;To=stephen@thorne.id.au&quot;&gt;stephen@thorne.id.au&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;On&nbsp;Thu,&nbsp;Jul&nbsp;14,&nbsp;2011&nbsp;at&nbsp;13:50,&nbsp;Ivan&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;sentmsg?compose&amp;amp;To=bdfy@mail.ru&quot;&gt;bdfy@mail.ru&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;I&nbsp;have&nbsp;a&nbsp;very&nbsp;simple&nbsp;example:&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;from&nbsp;twisted.internet&nbsp;import&nbsp;protocol,&nbsp;utils,&nbsp;reactor&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;def&nbsp;start():&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;utils.getProcessOutputAndValue('sleep',['1000'])&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;reactor.callWhenRunning(start)&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;reactor.run()&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;put&nbsp;together&nbsp;an&nbsp;example&nbsp;of&nbsp;how&nbsp;to&nbsp;create&nbsp;a&nbsp;'complete'&nbsp;example&lt;br&gt;<br>
&amp;gt;&nbsp;application&nbsp;using&nbsp;twisted&nbsp;plugins&nbsp;(which&nbsp;are&nbsp;also&nbsp;run&nbsp;with&nbsp;'twistd'&lt;br&gt;<br>
&amp;gt;&nbsp;but&nbsp;allow&nbsp;things&nbsp;like&nbsp;command&nbsp;line&nbsp;arguments)&nbsp;a&nbsp;few&nbsp;weeks&nbsp;ago.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;repo&nbsp;is&nbsp;here:&nbsp;&lt;a&nbsp;href=&quot;https://bitbucket.org/jerub/twisted-plugin-example&amp;amp;msgid=13106502130000000918&quot;&nbsp;target=&quot;_blank&quot;&gt;https://bitbucket.org/jerub/twisted-plugin-example&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;It&nbsp;shows&nbsp;how&nbsp;to&nbsp;do&nbsp;things&nbsp;in&nbsp;'Service.startService',&nbsp;this&nbsp;approach&lt;br&gt;<br>
&amp;gt;&nbsp;would&nbsp;map&nbsp;to&nbsp;using&nbsp;a&nbsp;.tac&nbsp;file&nbsp;as&nbsp;well,&nbsp;with&nbsp;some&nbsp;munging.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;https://bitbucket.org/jerub/twisted-plugin-example/src/a3af1e55194a/examplepackage/examplemodule.py#cl-49&amp;amp;msgid=13106502130000000918&quot;&nbsp;target=&quot;_blank&quot;&gt;https://bitbucket.org/jerub/twisted-plugin-example/src/a3af1e55194a/examplepackage/examplemodule.py#cl-49&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Stephen.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;gotta&nbsp;second&nbsp;this.&nbsp;This&nbsp;is&nbsp;the&nbsp;best&nbsp;example&nbsp;of&nbsp;Twisted&nbsp;plugins&nbsp;I've&lt;br&gt;<br>
seen&nbsp;yet.&nbsp;I&nbsp;know&nbsp;I'll&nbsp;regret&nbsp;saying&nbsp;this,&nbsp;but&nbsp;it's&nbsp;foolproof.&lt;br&gt;<br>
&lt;br&gt;<br>
d&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-web&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;sentmsg?compose&amp;amp;To=Twisted%2dweb@twistedmatrix.com&quot;&gt;Twisted-web@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web&amp;amp;msgid=13106502130000000918&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;base&nbsp;href=&quot;http://e.mail.ru/cgi-bin/&quot;&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/div&gt;<br>
&lt;/div&gt;<br>
<br>
&lt;/div&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
