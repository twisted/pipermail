<tt>
Got&nbsp;it.&nbsp;The&nbsp;latter&nbsp;approach&nbsp;makes&nbsp;sense.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thank&nbsp;you&lt;/div&gt;&lt;div&gt;Jacek&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Mar&nbsp;5,&nbsp;2012&nbsp;at&nbsp;12:45&nbsp;PM,&nbsp;Phil&nbsp;Mayers&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:p.mayers@imperial.ac.uk&quot;&gt;p.mayers@imperial.ac.uk&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;05/03/12&nbsp;15:19,&nbsp;Jacek&nbsp;Furmankiewicz&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;Hm,&nbsp;I&nbsp;would&nbsp;prefer&nbsp;to&nbsp;avoid&nbsp;that.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;In&nbsp;my&nbsp;case,&nbsp;the&nbsp;cost&nbsp;of&nbsp;creating&nbsp;a&nbsp;new&nbsp;Resource&nbsp;is&nbsp;high&nbsp;(since&nbsp;it&nbsp;needs&lt;br&gt;<br>
&amp;gt;&nbsp;to&nbsp;parse&nbsp;all&nbsp;the&nbsp;URLs&nbsp;it&nbsp;can&nbsp;dispatch&nbsp;to&nbsp;for&nbsp;all&nbsp;the&nbsp;REST&nbsp;services),&lt;br&gt;<br>
&amp;gt;&nbsp;therefore&nbsp;I&nbsp;would&nbsp;prefer&nbsp;to&nbsp;cache&nbsp;a&nbsp;single&nbsp;ReadOnlyResource&nbsp;vs&lt;br&gt;<br>
&amp;gt;&nbsp;AdminResource&nbsp;(as&nbsp;an&nbsp;example)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;If&nbsp;you&nbsp;search&nbsp;the&nbsp;archives,&nbsp;you&nbsp;will&nbsp;find&nbsp;discussions&nbsp;on&nbsp;this.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;general&nbsp;conclusion&nbsp;was:&nbsp;Resource&nbsp;objects&nbsp;should&nbsp;be&nbsp;lightweight&nbsp;and&lt;br&gt;<br>
fast.&nbsp;If&nbsp;you&amp;#39;ve&nbsp;got&nbsp;expensive&nbsp;stuff,&nbsp;pre-computer&nbsp;/&nbsp;cache&nbsp;/&nbsp;share&nbsp;/&lt;br&gt;<br>
whatever,&nbsp;and&nbsp;make&nbsp;your&nbsp;Resource&nbsp;objects&nbsp;talk&nbsp;to&nbsp;the&nbsp;cache.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;and&nbsp;just&nbsp;serve&nbsp;one&nbsp;or&nbsp;the&nbsp;other.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;So?&nbsp;Do&nbsp;that:&lt;br&gt;<br>
&lt;br&gt;<br>
avatars&nbsp;=&nbsp;{}&lt;br&gt;<br>
&lt;br&gt;<br>
class&nbsp;MyRealm:&lt;br&gt;<br>
&nbsp; &nbsp;def&nbsp;requestAvatar(...):&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp;if&nbsp;is_admin(avatarId):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp;if&nbsp;not&nbsp;&amp;#39;admin&amp;#39;&nbsp;in&nbsp;avatars:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; avatars[&amp;#39;admin&amp;#39;]&nbsp;=&nbsp;MyAdmin()&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;avatars[&amp;#39;admin&amp;#39;],&nbsp;...&lt;br&gt;<br>
&lt;br&gt;<br>
Of&nbsp;course,&nbsp;you&amp;#39;ll&nbsp;be&nbsp;re-using&nbsp;the&nbsp;same&nbsp;avatar&nbsp;for&nbsp;all&nbsp;admins,&nbsp;and&nbsp;won&amp;#39;t&lt;br&gt;<br>
be&nbsp;able&nbsp;to&nbsp;distinguish&nbsp;them,&nbsp;or&nbsp;access&nbsp;their&nbsp;usernames.&lt;br&gt;<br>
&lt;br&gt;<br>
Alternatively&nbsp;you&nbsp;might&nbsp;have&nbsp;a&nbsp;lightweight&nbsp;resource&nbsp;that&nbsp;just&nbsp;does&lt;br&gt;<br>
simple&nbsp;authorization&nbsp;/&nbsp;logging,&nbsp;and&nbsp;passes&nbsp;render&nbsp;calls&nbsp;through&nbsp;to&nbsp;the&lt;br&gt;<br>
heavyweight&nbsp;resource:&lt;br&gt;<br>
&lt;br&gt;<br>
class&nbsp;MyAdmin():&lt;br&gt;<br>
&nbsp; &nbsp;def&nbsp;render(...):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp;request.username&nbsp;=&nbsp;self.username&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp;return&nbsp;CachedHeavyAdmin.render(request,&nbsp;...)&lt;br&gt;<br>
&lt;br&gt;<br>
class&nbsp;MyRealm():&lt;br&gt;<br>
&nbsp; &nbsp;def&nbsp;requestAvatar(...):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp;if&nbsp;is_admin(avatarId):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp;r&nbsp;=&nbsp;MyAdmin()&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp;r.username&nbsp;=&nbsp;avatarId&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;r&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-web&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-web@twistedmatrix.com&quot;&gt;Twisted-web@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
