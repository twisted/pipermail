<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;Hi&nbsp;Sergey,&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;Several&nbsp;points:&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;1.&nbsp;Making&nbsp;a&nbsp;new&nbsp;factory&nbsp;for&nbsp;each&nbsp;*client*&nbsp;connection&nbsp;isn&#39;t&nbsp;unusual&nbsp;--&nbsp;just&nbsp;for&nbsp;servers.&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;2.&nbsp;The&nbsp;API&nbsp;you&nbsp;probably&nbsp;want&nbsp;to&nbsp;use&nbsp;is&nbsp;twisted.web.client.Agent.&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;3.&nbsp;You&nbsp;could&nbsp;do&nbsp;something&nbsp;like&nbsp;this&nbsp;(I&nbsp;wrote&nbsp;no&nbsp;tests&nbsp;for&nbsp;this!)&lt;br&gt;&lt;br&gt;def&nbsp;timeURL(agent,&nbsp;url):&lt;br&gt;<br>
<br>
   &nbsp;return&nbsp;agent.get(url).addCallback(_responseReceived,&nbsp;time.time(),&nbsp;url)&lt;br&gt;&lt;br&gt;def&nbsp;_responseReceived(response,&nbsp;startTime,&nbsp;url):&lt;br&gt;   &nbsp;elapsed&nbsp;=&nbsp;time.time()&nbsp;-&nbsp;startTime&lt;br&gt;   &nbsp;print&nbsp;&quot;Elapsed&nbsp;for&nbsp;{}:&nbsp;{}s&quot;.format(url,&nbsp;elapsed)&lt;br&gt;<br>
<br>
   &nbsp;#&nbsp;Note:&nbsp;response&nbsp;received&nbsp;gets&nbsp;called&nbsp;before&nbsp;the&nbsp;entire&nbsp;body&nbsp;is&nbsp;received&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;...&nbsp;or&nbsp;you&nbsp;could&nbsp;wrap&nbsp;that&nbsp;startTime&nbsp;and&nbsp;URL&nbsp;state&nbsp;in&nbsp;an&nbsp;object,&nbsp;of&nbsp;course&nbsp;:-)&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;<br>
<br>
hope&nbsp;to&nbsp;help&lt;br&gt;lvh&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
