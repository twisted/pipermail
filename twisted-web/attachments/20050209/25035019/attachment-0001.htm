<tt>
&lt;html&nbsp;xmlns:o=&quot;urn:schemas-microsoft-com:office:office&quot;&nbsp;xmlns:w=&quot;urn:schemas-microsoft-com:office:word&quot;&nbsp;xmlns=&quot;http://www.w3.org/TR/REC-html40&quot;&gt;<br>
<br>
&lt;head&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;<br>
&lt;meta&nbsp;name=Generator&nbsp;content=&quot;Microsoft&nbsp;Word&nbsp;11&nbsp;(filtered&nbsp;medium)&quot;&gt;<br>
&lt;style&gt;<br>
&lt;!--<br>
&nbsp;/*&nbsp;Font&nbsp;Definitions&nbsp;*/<br>
&nbsp;@font-face<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{font-family:Courier;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppanose-1:2&nbsp;7&nbsp;4&nbsp;9&nbsp;2&nbsp;2&nbsp;5&nbsp;2&nbsp;4&nbsp;4;}<br>
&nbsp;/*&nbsp;Style&nbsp;Definitions&nbsp;*/<br>
&nbsp;p.MsoNormal,&nbsp;li.MsoNormal,&nbsp;div.MsoNormal<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{margin:0in;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmargin-bottom:.0001pt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfont-size:12.0pt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfont-family:&quot;Times&nbsp;New&nbsp;Roman&quot;;}<br>
a:link,&nbsp;span.MsoHyperlink<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{color:blue;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptext-decoration:underline;}<br>
a:visited,&nbsp;span.MsoHyperlinkFollowed<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{color:purple;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptext-decoration:underline;}<br>
span.EmailStyle17<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{mso-style-type:personal-compose;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfont-family:Arial;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcolor:windowtext;}<br>
@page&nbsp;Section1<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{size:8.5in&nbsp;11.0in;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmargin:1.0in&nbsp;1.25in&nbsp;1.0in&nbsp;1.25in;}<br>
div.Section1<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{page:Section1;}<br>
&nbsp;/*&nbsp;List&nbsp;Definitions&nbsp;*/<br>
&nbsp;@list&nbsp;l0<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{mso-list-id:2144692884;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-list-type:hybrid;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-list-template-ids:1542256578&nbsp;67698705&nbsp;67698713&nbsp;67698715&nbsp;67698703&nbsp;67698713&nbsp;67698715&nbsp;67698703&nbsp;67698713&nbsp;67698715;}<br>
@list&nbsp;l0:level1<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{mso-level-text:&quot;%1\)&quot;;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-level-tab-stop:.5in;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-level-number-position:left;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptext-indent:-.25in;}<br>
@list&nbsp;l0:level2<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{mso-level-tab-stop:1.0in;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-level-number-position:left;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptext-indent:-.25in;}<br>
@list&nbsp;l0:level3<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{mso-level-tab-stop:1.5in;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-level-number-position:left;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptext-indent:-.25in;}<br>
@list&nbsp;l0:level4<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{mso-level-tab-stop:2.0in;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-level-number-position:left;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptext-indent:-.25in;}<br>
@list&nbsp;l0:level5<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{mso-level-tab-stop:2.5in;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-level-number-position:left;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptext-indent:-.25in;}<br>
@list&nbsp;l0:level6<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{mso-level-tab-stop:3.0in;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-level-number-position:left;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptext-indent:-.25in;}<br>
@list&nbsp;l0:level7<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{mso-level-tab-stop:3.5in;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-level-number-position:left;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptext-indent:-.25in;}<br>
@list&nbsp;l0:level8<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{mso-level-tab-stop:4.0in;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-level-number-position:left;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptext-indent:-.25in;}<br>
@list&nbsp;l0:level9<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{mso-level-tab-stop:4.5in;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-level-number-position:left;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptext-indent:-.25in;}<br>
ol<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{margin-bottom:0in;}<br>
ul<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{margin-bottom:0in;}<br>
--&gt;<br>
&lt;/style&gt;<br>
<br>
&lt;/head&gt;<br>
<br>
&lt;body&nbsp;lang=EN-US&nbsp;link=blue&nbsp;vlink=purple&gt;<br>
<br>
&lt;div&nbsp;class=Section1&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;This&nbsp;bug&nbsp;has&nbsp;occurs&nbsp;when&nbsp;a&nbsp;client&nbsp;request&nbsp;partial&nbsp;content<br>
of&nbsp;a&nbsp;static.File&nbsp;resource.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;There&nbsp;are&nbsp;three&nbsp;problems.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&nbsp;style='margin-left:.5in;text-indent:-.25in;mso-list:l0&nbsp;level1&nbsp;lfo1'&gt;&lt;![if&nbsp;!supportLists]&gt;&lt;font<br>
size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;font-family:Courier'&gt;&lt;span<br>
style='mso-list:Ignore'&gt;1)&lt;font&nbsp;size=1&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&gt;&lt;span<br>
style='font:7.0pt&nbsp;&quot;Times&nbsp;New&nbsp;Roman&quot;'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;![endif]&gt;&lt;font<br>
size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;font-family:Courier'&gt;The<br>
Content-Length&nbsp;header&nbsp;value&nbsp;is&nbsp;off&nbsp;by&nbsp;1.&amp;nbsp;&nbsp;For&nbsp;example&nbsp;a&nbsp;request&nbsp;with&nbsp;a<br>
Range:&nbsp;bytes=0-1999&nbsp;would&nbsp;yield&nbsp;Content-Length&nbsp;of&nbsp;1999&nbsp;when&nbsp;it&nbsp;should&nbsp;actually<br>
be&nbsp;Content-Length:&nbsp;2000.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&nbsp;style='margin-left:.5in;text-indent:-.25in;mso-list:l0&nbsp;level1&nbsp;lfo1'&gt;&lt;![if&nbsp;!supportLists]&gt;&lt;font<br>
size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;font-family:Courier'&gt;&lt;span<br>
style='mso-list:Ignore'&gt;2)&lt;font&nbsp;size=1&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&gt;&lt;span<br>
style='font:7.0pt&nbsp;&quot;Times&nbsp;New&nbsp;Roman&quot;'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;![endif]&gt;&lt;font<br>
size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;font-family:Courier'&gt;The<br>
Content-Range&nbsp;response&nbsp;header&nbsp;was&nbsp;generated&nbsp;incorrectly.&amp;nbsp;&nbsp;For&nbsp;example&nbsp;the<br>
request&nbsp;with&nbsp;a&nbsp;Range:&nbsp;bytes=0-1999&nbsp;header&nbsp;for&nbsp;a&nbsp;file&nbsp;of&nbsp;100000&nbsp;bytes&nbsp;in&nbsp;size<br>
would&nbsp;yield&nbsp;a&nbsp;Content-Range&nbsp;header&nbsp;like&nbsp;Content-Range:&amp;nbsp;&nbsp;bytes&nbsp;0-1999/1999,<br>
when&nbsp;it&nbsp;should&nbsp;be&nbsp;Content-Range:&nbsp;bytes&nbsp;0-1999/100000.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&nbsp;style='margin-left:.5in;text-indent:-.25in;mso-list:l0&nbsp;level1&nbsp;lfo1'&gt;&lt;![if&nbsp;!supportLists]&gt;&lt;font<br>
size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;font-family:Courier'&gt;&lt;span<br>
style='mso-list:Ignore'&gt;3)&lt;font&nbsp;size=1&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&gt;&lt;span<br>
style='font:7.0pt&nbsp;&quot;Times&nbsp;New&nbsp;Roman&quot;'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;![endif]&gt;&lt;font<br>
size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;font-family:Courier'&gt;The<br>
ASISProcessor&nbsp;incorrectly&nbsp;instantiated&nbsp;the&nbsp;File&nbsp;instance&nbsp;by&nbsp;passing&nbsp;a&nbsp;registry<br>
parameter&nbsp;to&nbsp;the&nbsp;defaultType&nbsp;argument.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;The&nbsp;diffs&nbsp;are&nbsp;as&nbsp;follows:&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;diff&nbsp;&amp;#8211;u&nbsp;static.py.orig&nbsp;static.py&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;---&nbsp;static.py.orig&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
2005-02-09&nbsp;18:52:35.422310000&nbsp;-0800&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;+++&nbsp;static.py&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;2005-02-09<br>
19:11:23.181906600&nbsp;-0800&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;@@&nbsp;-319,7&nbsp;+319,7&nbsp;@@&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
return&nbsp;self.redirect(request)&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#for<br>
content-length&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;fsize&nbsp;=&nbsp;size&nbsp;=<br>
self.getFileSize()&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;fsize&nbsp;=&nbsp;csize<br>
=&nbsp;self.getFileSize()&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
request.setHeader('accept-ranges','bytes')&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;@@&nbsp;-350,20&nbsp;+350,19&nbsp;@@&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
&amp;quot;Syntactically&nbsp;invalid&nbsp;http&nbsp;range&nbsp;header!&amp;quot;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
start,&nbsp;end&nbsp;=&nbsp;string.split(bytesrange[1],'-')&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
if&nbsp;start:&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
f.seek(int(start))&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
start&nbsp;=&nbsp;int(start)&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
f.seek(start)&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
if&nbsp;end:&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
end&nbsp;=&nbsp;int(end)&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
size&nbsp;=&nbsp;end&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
csize&nbsp;=&nbsp;int(end)&nbsp;-&nbsp;start&nbsp;+&nbsp;1&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
else:&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
end&nbsp;=&nbsp;size&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
csize&nbsp;-=&nbsp;start&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
request.setResponseCode(http.PARTIAL_CONTENT)&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
request.setHeader('content-range',&amp;quot;bytes&nbsp;%s-%s/%s&nbsp;&amp;quot;&nbsp;%&nbsp;(&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
str(start),&nbsp;str(end),&nbsp;str(size)))&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
#content-length&nbsp;should&nbsp;be&nbsp;the&nbsp;actual&nbsp;size&nbsp;of&nbsp;the&nbsp;stuff&nbsp;we're&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
#sending,&nbsp;not&nbsp;the&nbsp;full&nbsp;size&nbsp;of&nbsp;the&nbsp;on-server&nbsp;entity.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
fsize&nbsp;=&nbsp;end&nbsp;-&nbsp;int(start)&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
request.setHeader('content-range',&amp;quot;bytes&nbsp;%s-%s/%s&nbsp;&amp;quot;&nbsp;%&nbsp;\&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
(start,&nbsp;end,&nbsp;fsize))&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
#content-length&nbsp;should&nbsp;be&nbsp;the&nbsp;actual&nbsp;size&nbsp;of&nbsp;the&nbsp;stuff&nbsp;we're&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
#sending,&nbsp;not&nbsp;the&nbsp;full&nbsp;size&nbsp;of&nbsp;the&nbsp;on-server&nbsp;entity.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
request.setHeader('content-length',&nbsp;str(csize))&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
request.setHeader('content-length',&nbsp;str(fsize))&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;except:&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
traceback.print_exc(file=log.logfile)&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;@@&nbsp;-371,7&nbsp;+370,7&nbsp;@@&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
return&nbsp;''&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;return<br>
data&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
FileTransfer(f,&nbsp;size,&nbsp;request)&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
FileTransfer(f,&nbsp;csize,&nbsp;request)&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;and<br>
make&nbsp;sure&nbsp;the&nbsp;connection&nbsp;doesn't&nbsp;get&nbsp;closed&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return<br>
server.NOT_DONE_YET&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;@@&nbsp;-422,17&nbsp;+421,16&nbsp;@@&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.file<br>
=&nbsp;file&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.size<br>
=&nbsp;size&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
self.request&nbsp;=&nbsp;request&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.written&nbsp;=<br>
self.file.tell()&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
request.registerProducer(self,&nbsp;0)&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;resumeProducing(self):&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;not<br>
self.request:&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
return&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;data&nbsp;=<br>
self.file.read(min(abstract.FileDescriptor.bufferSize,&nbsp;self.size&nbsp;-<br>
self.written))&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;data&nbsp;=<br>
self.file.read(min(abstract.FileDescriptor.bufferSize,&nbsp;self.size))&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;data:&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
self.written&nbsp;+=&nbsp;len(data)&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
self.request.write(data)&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;self.file.tell()<br>
==&nbsp;self.size:&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
self.size&nbsp;-=&nbsp;len(data)&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;self.size<br>
&amp;lt;=&nbsp;0:&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
self.request.unregisterProducer()&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
self.request.finish()&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
self.request&nbsp;=&nbsp;None&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;@@&nbsp;-473,5&nbsp;+471,5&nbsp;@@&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;render(self,&nbsp;request):&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
request.startedWriting&nbsp;=&nbsp;1&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;res&nbsp;=<br>
static.File(self.path,&nbsp;self.registry)&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;res&nbsp;=<br>
static.File(self.path,&nbsp;registry=self.registry)&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Courier&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Courier'&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return<br>
res.render(request)&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Arial&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Arial'&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
&lt;/body&gt;<br>
<br>
&lt;/html&gt;<br>

</tt>
