<tt>
&lt;HTML&nbsp;dir=ltr&gt;&lt;HEAD&gt;<br>
&lt;META&nbsp;http-equiv=Content-Type&nbsp;content=&quot;text/html;&nbsp;charset=unicode&quot;&gt;<br>
&lt;META&nbsp;content=&quot;MSHTML&nbsp;6.00.6001.18226&quot;&nbsp;name=GENERATOR&gt;&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#000000&nbsp;size=2&gt;Hi,&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&amp;nbsp;We&nbsp;are&nbsp;struggling&nbsp;to&nbsp;close&nbsp;a&nbsp;TCP&nbsp;connection&nbsp;using&nbsp;web&nbsp;resource.Resource&amp;nbsp;(the&nbsp;TR69&nbsp;SOAP&nbsp;spec.&nbsp;mandates&nbsp;that&nbsp;we&nbsp;close&nbsp;the&nbsp;connection&nbsp;when&nbsp;we&nbsp;are&nbsp;done).&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&amp;nbsp;Our&nbsp;site&nbsp;is&nbsp;served&nbsp;in&nbsp;a&nbsp;TCP&nbsp;reactor&nbsp;&amp;amp;&nbsp;uses&nbsp;the&nbsp;NOT_DONE_YET&nbsp;variable&nbsp;in&nbsp;the&nbsp;def&nbsp;render_POST&nbsp;method.&amp;nbsp;&nbsp;We&nbsp;close&nbsp;the&nbsp;render_POST&nbsp;with&nbsp;a&nbsp;request.write('data')&nbsp;&amp;amp;&nbsp;a&nbsp;request.finish()&nbsp;but&nbsp;the&nbsp;connection&nbsp;stays&nbsp;open,&nbsp;stub&nbsp;code&nbsp;below.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&amp;nbsp;We&nbsp;are&nbsp;not&nbsp;sure&nbsp;if&nbsp;it&nbsp;is&nbsp;the&nbsp;fact&nbsp;that&nbsp;we&nbsp;are&nbsp;using&nbsp;chunked&nbsp;encoding&nbsp;or&nbsp;if&nbsp;this&nbsp;is&nbsp;a&nbsp;bug?&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&amp;nbsp;Please&nbsp;assist.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;Warm&nbsp;Regards,&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;Michael&nbsp;Toop&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;def&nbsp;render_POST(self,request):&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&amp;nbsp;&nbsp;...do&nbsp;stuff&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&nbsp;d&nbsp;=&nbsp;getSoapText(request)&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&amp;nbsp;d.addCallback(request.write)&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&amp;nbsp;d.addCallback(request.close())&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&nbsp;return&nbsp;server.NOT_DONE_YET&amp;nbsp;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;
</tt>
