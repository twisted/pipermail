<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;style&gt;&lt;!--<br>
.hmmessage&nbsp;P<br>
{<br>
margin:0px;<br>
padding:0px<br>
}<br>
body.hmmessage<br>
{<br>
font-size:&nbsp;10pt;<br>
font-family:Verdana<br>
}<br>
--&gt;&lt;/style&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;class='hmmessage'&gt;<br>
from&nbsp;twisted.internet.protocol&nbsp;import&nbsp;Protocol,&nbsp;ClientFactory&lt;br&gt;from&nbsp;sys&nbsp;import&nbsp;stdout&lt;br&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;reactor&lt;br&gt;&lt;br&gt;from&nbsp;misc.configobj&nbsp;import&nbsp;ConfigObj&lt;br&gt;from&nbsp;misc.get_keywords&nbsp;import&nbsp;get_keywords&lt;br&gt;import&nbsp;time&lt;br&gt;import&nbsp;Queue&lt;br&gt;from&nbsp;bing_runner&nbsp;import&nbsp;msn&lt;br&gt;import&nbsp;simplejson&nbsp;as&nbsp;json&lt;br&gt;import&nbsp;base64&lt;br&gt;from&nbsp;time&nbsp;import&nbsp;sleep&lt;br&gt;&lt;br&gt;class&nbsp;ses(object):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;__init__(self,client):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;&quot;INITIATED&quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.client&nbsp;=&nbsp;client&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.main()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;act_on(self,msg):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;&quot;WE&nbsp;GOT&nbsp;IT&nbsp;BACK&quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;msg&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;main(self):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;&quot;Downloading&nbsp;List&quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.client.sendMessage(&quot;get_data\r\n&quot;).addCallback(self.act_on)&lt;br&gt;&lt;br&gt;class&nbsp;Echo(Protocol):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;connectionMade(self):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;&quot;Connected&nbsp;To&nbsp;Server&quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;s&nbsp;=&nbsp;ses(self)&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;sendMessage(self,&nbsp;msg):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;&quot;Sending:&nbsp;%s&quot;%msg&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.transport.write(msg)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;d&nbsp;=&nbsp;defer.Deferred()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;sleep(5)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;dataReceived(self,&nbsp;data):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;stdout.write(data)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.s.server_data&nbsp;=&nbsp;data&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;encoded&lt;br&gt;&lt;br&gt;class&nbsp;EchoClientFactory(ClientFactory):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;protocol&nbsp;=&nbsp;Protocol&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;startedConnecting(self,&nbsp;connector):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;'Started&nbsp;to&nbsp;connect.'&lt;br&gt;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;buildProtocol(self,&nbsp;addr):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;'Connected.'&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;Echo();&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;clientConnectionLost(self,&nbsp;connector,&nbsp;reason):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;'Lost&nbsp;connection.&amp;nbsp;&nbsp;Reason:',&nbsp;reason&lt;br&gt;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;clientConnectionFailed(self,&nbsp;connector,&nbsp;reason):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;'Connection&nbsp;failed.&nbsp;Reason:',&nbsp;reason&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#def&nbsp;clientConnectionLost(self,&nbsp;connector,&nbsp;reason):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#connector.connect()&lt;br&gt;&lt;br&gt;#&nbsp;this&nbsp;connects&nbsp;the&nbsp;protocol&nbsp;to&nbsp;a&nbsp;server&nbsp;runing&nbsp;on&nbsp;port&nbsp;8000&lt;br&gt;def&nbsp;main():&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;f&nbsp;=&nbsp;EchoClientFactory()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;f.protocol&nbsp;=&nbsp;Echo&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;reactor.connectTCP(&quot;localhost&quot;,&nbsp;8000,&nbsp;f)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;reactor.run()&lt;br&gt;&lt;br&gt;&lt;br&gt;#&nbsp;this&nbsp;only&nbsp;runs&nbsp;if&nbsp;the&nbsp;module&nbsp;was&nbsp;*not*&nbsp;imported&lt;br&gt;if&nbsp;__name__&nbsp;==&nbsp;'__main__':&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;main()&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;figure&nbsp;out&nbsp;a&nbsp;way&nbsp;so&nbsp;I&nbsp;can&nbsp;access&nbsp;the&nbsp;datareceived&nbsp;outside&nbsp;of&nbsp;the&nbsp;Echo&nbsp;Class&nbsp;so&nbsp;I&nbsp;can&nbsp;run&nbsp;operations&nbsp;on&nbsp;the&nbsp;data&nbsp;received.&nbsp;Fairly&nbsp;new&nbsp;to&nbsp;twisted.&nbsp;Any&nbsp;help&nbsp;is&nbsp;appreciated&lt;br&gt;&nbsp;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&lt;br&nbsp;/&gt;&lt;hr&nbsp;/&gt;Get&nbsp;Windows&nbsp;7&nbsp;for&nbsp;only&nbsp;$39.99-CDN&nbsp;College&nbsp;or&nbsp;University&nbsp;students&nbsp;only.&nbsp;&lt;a&nbsp;href='http://go.microsoft.com/?linkid=9691814'&nbsp;target='_new'&gt;This&nbsp;offer&nbsp;ends&nbsp;Jan&nbsp;3-upgrade&nbsp;now!&lt;/a&gt;&lt;/body&gt;<br>
&lt;/html&gt;
</tt>
