<tt>
Hey,&lt;div&gt;my&nbsp;first&nbsp;e-mail&nbsp;on&nbsp;this&nbsp;list,&nbsp;I`m&nbsp;beginning&nbsp;to&nbsp;code&nbsp;with&nbsp;twisted,&nbsp;started&nbsp;after&nbsp;a&nbsp;research&nbsp;about&nbsp;building&nbsp;c10k&nbsp;servers..&nbsp;(with&nbsp;python)&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;using&nbsp;this&nbsp;lib,&nbsp;heard&nbsp;it&nbsp;is&nbsp;the&nbsp;best&nbsp;for&nbsp;working&nbsp;with&nbsp;websockets&nbsp;(correct&nbsp;me&nbsp;if&nbsp;you&nbsp;know&nbsp;another)&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;a&nbsp;href=&quot;https://github.com/wulczer/txWebSocket&quot;&gt;https://github.com/wulczer/txWebSocket&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Well,&lt;/div&gt;&lt;div&gt;There&nbsp;is&nbsp;what&nbsp;I&nbsp;want&nbsp;to&nbsp;do:&lt;/div&gt;&lt;div&gt;I&nbsp;have:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt; &nbsp; &nbsp;site&nbsp;=&nbsp;WebSocketSite(root)&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp;site.addChatHandler(&amp;#39;/room&lt;b&gt;1&lt;/b&gt;&amp;#39;,&nbsp;Chathandler)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;reactor.listenTCP(8080,&nbsp;site) &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;where&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;class&nbsp;Chathandler(WebSocketHandler):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;users&nbsp;=&nbsp;set()&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp;def&nbsp;__init__(self,&nbsp;transport):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;WebSocketHandler.__init__(self,&nbsp;transport)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;def&nbsp;__del__(self):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;print&nbsp;&amp;#39;Deleting&nbsp;handler&amp;#39;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;  &lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp;def&nbsp;setUsers(self,usr):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;self.users&nbsp;=&nbsp;usr&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;def&nbsp;frameReceived(self,&nbsp;frame):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;adr&nbsp;=&nbsp;self.transport.getPeer()&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;print&nbsp;&amp;quot;Msg&nbsp;rcv&nbsp;from:&nbsp;&amp;quot;,&nbsp;adr&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;self.sendChat(adr,frame)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;def&nbsp;connectionMade(self):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;print&nbsp;&amp;#39;Connected&nbsp;to&nbsp;client.&amp;#39;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;self.users.add(self)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;def&nbsp;connectionLost(self,&nbsp;reason):&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;print&nbsp;&amp;#39;Lost&nbsp;connection.&amp;#39;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp;self&nbsp;in&nbsp;self.users:&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.users.remove(self)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;  &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;def&nbsp;sendChat(self,fr,msg):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;for&nbsp;u&nbsp;in&nbsp;self.users:&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;u.transport.write(str(fr)+msg)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;problem&nbsp;is:&lt;/div&gt;&lt;div&gt;If&nbsp;I&nbsp;do&nbsp;this:&lt;/div&gt;&lt;div&gt;&lt;div&gt; &nbsp; &nbsp;site&nbsp;=&nbsp;WebSocketSite(root)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;site.addChatHandler(&amp;#39;/room&lt;b&gt;1&lt;/b&gt;&amp;#39;,&nbsp;Chathandler)&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;div&gt; &nbsp; &nbsp;site.addChatHandler(&amp;#39;/room&lt;b&gt;2&lt;/b&gt;&amp;#39;,&nbsp;Chathandler)&lt;/div&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;site.addChatHandler(&amp;#39;/room&lt;b&gt;3&lt;/b&gt;&amp;#39;,&nbsp;Chathandler)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;reactor.listenTCP(8080,&nbsp;site) &lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;div&gt;will&nbsp;not&nbsp;work&nbsp;(every&nbsp;room&nbsp;will&nbsp;comunicate&nbsp;with&nbsp;every&nbsp;room),&nbsp;because&nbsp;the users&nbsp;=&nbsp;set()&nbsp;will&nbsp;be&nbsp;globally&nbsp;between&nbsp;the&nbsp;handlers..&lt;/div&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;I&nbsp;put&nbsp;on&nbsp;the&nbsp;__init__,&nbsp;every&nbsp;call&nbsp;on&nbsp;/roomX&nbsp;will&nbsp;have&nbsp;your&nbsp;personal&nbsp;set()&nbsp;of&nbsp;users&nbsp;including&nbsp;only&nbsp;themselfs.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;kind&nbsp;stuck&nbsp;on&nbsp;this,&nbsp;I`m&nbsp;new&nbsp;to&nbsp;websocket&nbsp;and&nbsp;server&nbsp;programming,&nbsp;so&nbsp;I&nbsp;don`t&nbsp;even&nbsp;know&nbsp;if&nbsp;is&nbsp;the&nbsp;best&nbsp;way&nbsp;to&nbsp;code&nbsp;a&nbsp;chatroom&nbsp;server. &lt;/div&gt;&lt;div&gt;If&nbsp;you&nbsp;read&nbsp;this&nbsp;far&nbsp;ans&nbsp;have&nbsp;any&nbsp;(even&nbsp;it&nbsp;looks&nbsp;that&nbsp;stupid&nbsp;for&nbsp;you),&nbsp;might&nbsp;help&nbsp;right&nbsp;now&nbsp;(:&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;b&gt;João&nbsp;Ricardo&nbsp;Mattos&nbsp;e&nbsp;Silva&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;font-size:x-small&quot;&gt;Graduando&nbsp;em&nbsp;Ciência&nbsp;da&nbsp;Computação&nbsp;na&nbsp;Universidade&nbsp;Federal&nbsp;de&nbsp;Santa&nbsp;Catarina&lt;br&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;b&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;Cel: &lt;/font&gt;&lt;/b&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;+55&nbsp;(48)&nbsp;96190063&nbsp; |&nbsp; &lt;b&gt;Skype:&lt;/b&gt; jricardomsilva&nbsp; | &lt;b&gt; Msn: &lt;/b&gt;&lt;a&nbsp;href=&quot;mailto:joaoricardo@globalite.com.br&quot;&nbsp;target=&quot;_blank&quot;&gt;joaoricardo@globalite.com.br&lt;/a&gt;&lt;/font&gt;&lt;br&gt;<br>
<br>
<br>
&lt;/div&gt;<br>

</tt>
