<tt>
&lt;HTML&gt;&lt;BODY&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-khtml-nbsp-mode:&nbsp;space;&nbsp;-khtml-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;Thanks&nbsp;for&nbsp;the&nbsp;response&nbsp;Christian. Unfortunately im&nbsp;still&nbsp;not&nbsp;quite&nbsp;there&nbsp;yet.&nbsp;took&nbsp;you&nbsp;advice&nbsp;and&nbsp;change&nbsp;the&nbsp;code&nbsp;to&nbsp;read:&lt;DIV&gt; &lt;/DIV&gt;&lt;DIV&gt;-----&nbsp;Snip&nbsp;----&lt;/DIV&gt;&lt;DIV&gt;  &nbsp; def&nbsp;render_GET(self,request):&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp;def&nbsp;cb(text):&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print&nbsp;text&nbsp;###&nbsp;This&nbsp;text&nbsp;looks&nbsp;like&nbsp;it&nbsp;should &lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;text&lt;/DIV&gt;&lt;DIV&gt;&lt;SPAN&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/SPAN&gt;return&nbsp;self.opt.dbpool.runInteraction(self._getUserList).addCallback(cb)&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp;def&nbsp;_getUserList(self,txn):&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp;doc=Document()&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp;camp=&nbsp;doc.createElement(&quot;userlist&quot;)&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp;doc.appendChild(camp)&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp;txn.execute(&quot;SELECT&nbsp;UserName&nbsp;FROM&nbsp;User&nbsp;&quot;)&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp;res&nbsp;=&nbsp;txn.fetchall()&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp;(res):&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for&nbsp;row&nbsp;in&nbsp;res:&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp;&lt;SPAN&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/SPAN&gt;usr=doc.createElement(&quot;user&quot;)&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;camp.appendChild(usr)&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp;&lt;SPAN&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/SPAN&gt;usr.setAttribute(&quot;name&quot;,&quot;%s&quot;&nbsp;%&nbsp;(row[0]&nbsp;))&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;doc.toprettyxml(indent=&quot;&nbsp;&quot;)&lt;/DIV&gt;&lt;DIV&gt;-----&nbsp;Snip&nbsp;----&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&gt;&lt;DIV&gt;&nbsp;&lt;SPAN&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;separate;&nbsp;border-spacing:&nbsp;0px&nbsp;0px;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;13px;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;&nbsp;line-height:&nbsp;normal;&nbsp;text-align:&nbsp;auto;&nbsp;-khtml-text-decorations-in-effect:&nbsp;none;&nbsp;text-indent:&nbsp;0px;&nbsp;-apple-text-size-adjust:&nbsp;auto;&nbsp;text-transform:&nbsp;none;&nbsp;orphans:&nbsp;2;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;&nbsp;word-spacing:&nbsp;0px;&nbsp;&quot;&gt;&lt;DIV&gt;But&nbsp;still&nbsp;think&nbsp;the&nbsp;problem&nbsp;is basically&nbsp;the&nbsp;same&nbsp;as&nbsp;before.&nbsp;The&nbsp;runInteraction&nbsp;returns&nbsp;a&nbsp;Defered&nbsp;object&nbsp;that&nbsp;I &lt;/DIV&gt;&lt;DIV&gt;now&nbsp;add&nbsp;a&nbsp;callback&nbsp;function&nbsp;to.&nbsp;But&nbsp;the&nbsp;addCallback(cb)&nbsp;returns&nbsp;right&nbsp;away&nbsp;and&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;still &nbsp;the&nbsp;Defered&nbsp;object.&nbsp;So&nbsp;the&nbsp;webserver&nbsp;gives&nbsp;an&nbsp;error&nbsp;saying&nbsp;something&nbsp;like:&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;FONT&nbsp;class=&quot;Apple-style-span&quot;&nbsp;size=&quot;3&quot;&gt;&lt;SPAN&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;FONT&nbsp;class=&quot;Apple-style-span&quot;&nbsp;size=&quot;3&quot;&gt;&lt;SPAN&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;Request&nbsp;did&nbsp;not&nbsp;return&nbsp;a&nbsp;string&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;FONT&nbsp;class=&quot;Apple-style-span&quot;&nbsp;size=&quot;3&quot;&gt;&lt;SPAN&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;Request:&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;FONT&nbsp;class=&quot;Apple-style-span&quot;&nbsp;size=&quot;3&quot;&gt;&lt;SPAN&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;&amp;lt;GET&nbsp;/&nbsp;HTTP/1.1&amp;gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;12px/normal&nbsp;Helvetica;&nbsp;min-height:&nbsp;14px;&nbsp;&quot;&gt;&lt;BR&gt;&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;FONT&nbsp;class=&quot;Apple-style-span&quot;&nbsp;size=&quot;3&quot;&gt;&lt;SPAN&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;Resource:&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;FONT&nbsp;class=&quot;Apple-style-span&quot;&nbsp;size=&quot;3&quot;&gt;&lt;SPAN&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;&amp;lt;__main__.Simple&nbsp;instance&nbsp;at&nbsp;0x1208878&amp;gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;12px/normal&nbsp;Helvetica;&nbsp;min-height:&nbsp;14px;&nbsp;&quot;&gt;&lt;BR&gt;&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;FONT&nbsp;class=&quot;Apple-style-span&quot;&nbsp;size=&quot;3&quot;&gt;&lt;SPAN&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;Value:&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;FONT&nbsp;class=&quot;Apple-style-span&quot;&nbsp;size=&quot;3&quot;&gt;&lt;SPAN&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;&amp;lt;Deferred&nbsp;at&nbsp;0x124cfa8&amp;gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;Later&nbsp;when&nbsp;the&nbsp;_getUserList()&nbsp;returns&nbsp;the&nbsp;Defered&nbsp;object&nbsp;calles&nbsp;the&nbsp;cb()&nbsp;function&nbsp;and&nbsp;i&nbsp;get&nbsp;a&nbsp;printout&nbsp;with&nbsp;the&nbsp;wanted&nbsp;result.&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;So&nbsp;I&nbsp;think&nbsp;my&nbsp;problem&nbsp;is&nbsp;that&nbsp;I&nbsp;whant&nbsp;to&nbsp;*wait*&nbsp;for&nbsp;the&nbsp;result&nbsp;from&nbsp;the&nbsp;db query&nbsp;before&nbsp;the&nbsp;render_GET()&nbsp;returns.&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;/Søren&lt;/DIV&gt;&lt;BR&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;&lt;BR&gt;&lt;DIV&gt;&lt;DIV&gt;On&nbsp;Jul&nbsp;21,&nbsp;2007,&nbsp;at&nbsp;15:34&nbsp;,&nbsp;Christian&nbsp;Simms&nbsp;wrote:&lt;/DIV&gt;&lt;BR&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;BLOCKQUOTE&nbsp;type=&quot;cite&quot;&gt;On&nbsp;7/21/07,&nbsp;&lt;B&nbsp;class=&quot;gmail_sendername&quot;&gt;Søren&nbsp;Bach&nbsp;Christiansen&lt;/B&gt;&nbsp;&amp;lt;&lt;A&nbsp;href=&quot;mailto:sbc@my-place.biz&quot;&gt;sbc@my-place.biz&lt;/A&gt;&amp;gt;&nbsp;wrote:&lt;DIV&gt;&lt;SPAN&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;/SPAN&gt;&lt;BLOCKQUOTE&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&nbsp;Hi&nbsp;all&lt;BR&gt;&lt;BR&gt;I&nbsp;am&nbsp;a&nbsp;new&nbsp;user&nbsp;to&nbsp;the&nbsp;Twisted&nbsp;framework&nbsp;so&nbsp;this&nbsp;might&nbsp;be&nbsp;a&nbsp;trivial&lt;BR&gt;question,&nbsp;but&nbsp;here&nbsp;goes..&lt;BR&gt;&lt;BR&gt;Im&nbsp;trying&nbsp;to&nbsp;use&nbsp;the&nbsp;Web&nbsp;module&nbsp;and&nbsp;adbapi&nbsp;module&nbsp;to&nbsp;create&nbsp;a&nbsp;(rest)&lt;BR&gt;webservice&nbsp;but&nbsp;I&nbsp;am&nbsp;having&nbsp;problems&nbsp;&lt;BR&gt;using&nbsp;the&nbsp;adbapi.&nbsp;As&nbsp;fare&nbsp;as&nbsp;I&nbsp;could&nbsp;figure&nbsp;out,&nbsp;the&nbsp;runInteraction&lt;BR&gt;call&nbsp;spawns&nbsp;a&nbsp;new&nbsp;thread&nbsp;and&nbsp;executes&nbsp;the&nbsp;sql&nbsp;in&nbsp;that,&nbsp;and&nbsp;the&lt;BR&gt;render_GET  handler&nbsp;is&nbsp;then&nbsp;returning&nbsp;right&nbsp;away&nbsp;-bummer.&nbsp;I&nbsp;need&nbsp;the&lt;BR&gt;adbapi&nbsp;for&nbsp;its&nbsp;db&nbsp;pool&nbsp;but&nbsp;dont&nbsp;need&nbsp;it&nbsp;to&nbsp;be&nbsp;&quot;blocking&quot;&nbsp;so&nbsp;that&nbsp;I&nbsp;&lt;BR&gt;can&nbsp;return&nbsp;the&nbsp;result&nbsp;of&nbsp;the&nbsp;db&nbsp;interaction&nbsp;as&nbsp;xml.&lt;BR&gt;&lt;BR&gt;Hope&nbsp;you&nbsp;guys&nbsp;can&nbsp;help&nbsp;me&nbsp;out&nbsp;or&nbsp;give&nbsp;me&nbsp;some&nbsp;pointers&nbsp;if&nbsp;I&nbsp;am&nbsp;doing&lt;BR&gt;this&nbsp;the&nbsp;wrong&nbsp;way.&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Regards&lt;BR&gt;  &nbsp;Søren&lt;BR&gt;&lt;BR&gt;-----&nbsp;Code&nbsp;----&lt;BR&gt;from&nbsp;twisted.web&nbsp;import&nbsp;server&lt;BR&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;reactor&lt;BR&gt;from&nbsp;twisted.enterprise&nbsp;import&nbsp;adbapi&lt;BR&gt;from&nbsp;xml.dom.minidom&nbsp;import&nbsp;Document&lt;BR&gt;&lt;BR&gt;class&nbsp;Simple(Resource):&lt;BR&gt;    &nbsp;isLeaf=True&lt;BR&gt;    &nbsp;def&nbsp;__init__(self,opt):&lt;BR&gt;&nbsp;        &nbsp;Resource.__init__(self)&lt;BR&gt;        &nbsp;self.opt=opt&lt;BR&gt;&lt;BR&gt;    &nbsp;def&nbsp;render_GET(self,request):&lt;BR&gt;        &nbsp;doc=Document()&lt;BR&gt;        self.opt.dbpool.runInteraction(self._getUserList,doc)&lt;BR&gt;        &nbsp;print&nbsp;&quot;returning&nbsp;result&quot;&nbsp;&lt;BR&gt;        return&nbsp;doc.toprettyxml(indent=&quot;  &quot;)&lt;BR&gt;&lt;BR&gt;    &nbsp;def&nbsp;_getUserList(self,txn,doc):&lt;BR&gt;        &nbsp;txn.execute(&quot;SELECT&nbsp;UserName&nbsp;FROM&nbsp;User&nbsp;&quot;)&lt;BR&gt;        &nbsp;res&nbsp;=&nbsp;txn.fetchall()&lt;BR&gt;        &nbsp;if&nbsp;(res):&lt;BR&gt;&nbsp;            &nbsp;for&nbsp;row&nbsp;in&nbsp;res:&lt;BR&gt;                &nbsp;print&nbsp;row&lt;BR&gt;                usr=doc.createElement(&quot;user&quot;)&lt;BR&gt;                usr.setAttribute(&quot;name&quot;,&quot;%s&quot;&nbsp;%&nbsp;(row[0]&nbsp;))&lt;BR&gt;&lt;BR&gt;class&nbsp;options:&lt;BR&gt;&nbsp;    &nbsp;pass&lt;BR&gt;&lt;BR&gt;if&nbsp;__name__&nbsp;==&nbsp;'__main__':&lt;BR&gt;    &nbsp;options.dbpool=&nbsp;adbapi.ConnectionPool(&quot;MySQLdb&quot;,&lt;BR&gt;host='localhost',db='TrackingPresentation',&lt;BR&gt;                                    user='web',&nbsp;passwd='tingogsager')&nbsp;&lt;BR&gt;    &nbsp;site&nbsp;=&nbsp;server.Site(Simple(options))&lt;BR&gt;    &nbsp;reactor.listenTCP(8888,site)&lt;BR&gt;    &nbsp;reactor.run()&lt;BR&gt;&lt;BR&gt;------&nbsp;Code&nbsp;------&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;_______________________________________________&lt;BR&gt;Twisted-web&nbsp;mailing&nbsp;list&lt;BR&gt;&nbsp;&lt;A&nbsp;href=&quot;mailto:Twisted-web@twistedmatrix.com&quot;&gt;Twisted-web@twistedmatrix.com&lt;/A&gt;&lt;BR&gt;&lt;A&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web&lt;/A&gt;&nbsp;&lt;BR&gt;&lt;/BLOCKQUOTE&gt;&lt;/DIV&gt;&lt;BR&gt;You&nbsp;did&nbsp;all&nbsp;the&nbsp;hard&nbsp;work&nbsp;already. &nbsp;The&nbsp;only&nbsp;thing&nbsp;you&nbsp;need&nbsp;to&nbsp;do&nbsp;is&nbsp;connect&nbsp;the&nbsp;database&nbsp;query&nbsp;to&nbsp;the&nbsp;render_GET&nbsp;rendering&nbsp;method's&nbsp;output.&nbsp;You&nbsp;want&nbsp;to&nbsp;take&nbsp;the&nbsp;Deferred&nbsp;that&nbsp;ruInteraction&nbsp;returns&nbsp;(yes&nbsp;it&nbsp;runs&nbsp;in&nbsp;a&nbsp;separate&nbsp;thread&nbsp;async),&nbsp;add&nbsp;a&nbsp;callback&nbsp;to&nbsp;it&nbsp;that&nbsp;converts&nbsp;the&nbsp;xml&nbsp;to&nbsp;a&nbsp;string&nbsp;(called&nbsp;cb&nbsp;below),&nbsp;then&nbsp;return&nbsp;that&nbsp;Deferrred&nbsp;in&nbsp;render_GET. &nbsp;Here's&nbsp;untested&nbsp;code:&nbsp;&lt;BR&gt;&lt;BR&gt;    &nbsp;def&nbsp;render_GET(self,request):&lt;BR&gt;        &nbsp;doc=Document()&lt;BR&gt;        &nbsp;def&nbsp;cb(PARAM_NOT_USED):&lt;BR&gt;            &nbsp;print&nbsp;&quot;returning&nbsp;result&quot;&lt;BR&gt;&nbsp;            &nbsp;return&nbsp;doc.toprettyxml(indent=&quot;  &quot;)&lt;BR&gt;&nbsp;        &nbsp;return&nbsp;self.opt.dbpool.runInteraction(self._getUserList,doc).addCallback(cb)&lt;BR&gt;&lt;BR&gt;If&nbsp;I&nbsp;was&nbsp;writing&nbsp;this&nbsp;code,&nbsp;I&nbsp;would&nbsp;probably&nbsp;have&nbsp;_getUserList&nbsp;create&nbsp;and&nbsp;return&nbsp;the&nbsp;doc,&nbsp;in&nbsp;which&nbsp;case&nbsp;the&nbsp;code&nbsp;would&nbsp;look&nbsp;like&nbsp;this:&nbsp;&lt;BR&gt;&lt;BR&gt;    &nbsp;def&nbsp;render_GET(self,request):&lt;BR&gt;&nbsp;        &nbsp;def&nbsp;cb(doc): &nbsp;#&nbsp;now&nbsp;doc&nbsp;is&nbsp;passed&nbsp;to&nbsp;the&nbsp;callback&nbsp;from&nbsp;_getUserList&lt;BR&gt;&nbsp;            &nbsp;print&nbsp;&quot;returning&nbsp;result&quot;&lt;BR&gt;&nbsp;            &nbsp;return&nbsp;doc.toprettyxml(indent=&quot;  &quot;)&lt;BR&gt;&nbsp;        &nbsp;return&nbsp;self.opt.dbpool.runInteraction(self._getUserList).addCallback(cb)&lt;BR&gt;&nbsp;&lt;BR&gt;Cheers,&lt;BR&gt;Christian&lt;BR&gt;&lt;BR&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;_______________________________________________&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;Twisted-web&nbsp;mailing&nbsp;list&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;A&nbsp;href=&quot;mailto:Twisted-web@twistedmatrix.com&quot;&gt;Twisted-web@twistedmatrix.com&lt;/A&gt;&lt;/DIV&gt;&lt;DIV&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;A&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web&lt;/A&gt;&lt;/DIV&gt;&nbsp;&lt;/BLOCKQUOTE&gt;&lt;/DIV&gt;&lt;BR&gt;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;
</tt>
