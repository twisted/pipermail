<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;tks&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2013/1/6&nbsp;&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:twisted-web-request@twistedmatrix.com&quot;&nbsp;target=&quot;_blank&quot;&gt;twisted-web-request@twistedmatrix.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Send&nbsp;Twisted-web&nbsp;mailing&nbsp;list&nbsp;submissions&nbsp;to&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;mailto:twisted-web@twistedmatrix.com&quot;&gt;twisted-web@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
To&nbsp;subscribe&nbsp;or&nbsp;unsubscribe&nbsp;via&nbsp;the&nbsp;World&nbsp;Wide&nbsp;Web,&nbsp;visit&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web&lt;/a&gt;&lt;br&gt;<br>
or,&nbsp;via&nbsp;email,&nbsp;send&nbsp;a&nbsp;message&nbsp;with&nbsp;subject&nbsp;or&nbsp;body&nbsp;&amp;#39;help&amp;#39;&nbsp;to&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;mailto:twisted-web-request@twistedmatrix.com&quot;&gt;twisted-web-request@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;can&nbsp;reach&nbsp;the&nbsp;person&nbsp;managing&nbsp;the&nbsp;list&nbsp;at&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;mailto:twisted-web-owner@twistedmatrix.com&quot;&gt;twisted-web-owner@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
When&nbsp;replying,&nbsp;please&nbsp;edit&nbsp;your&nbsp;Subject&nbsp;line&nbsp;so&nbsp;it&nbsp;is&nbsp;more&nbsp;specific&lt;br&gt;<br>
than&nbsp;&amp;quot;Re:&nbsp;Contents&nbsp;of&nbsp;Twisted-web&nbsp;digest...&amp;quot;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Today&amp;#39;s&nbsp;Topics:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; 1.&nbsp;Re:&nbsp;[Twisted-Python]&nbsp;Speed&nbsp;of&nbsp;rendering?&nbsp;(Peter&nbsp;Westlake)&lt;br&gt;<br>
 &nbsp; 2.&nbsp;Re:&nbsp;[Twisted-Python]&nbsp;Speed&nbsp;of&nbsp;rendering?&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp;(&lt;a&nbsp;href=&quot;mailto:exarkun@twistedmatrix.com&quot;&gt;exarkun@twistedmatrix.com&lt;/a&gt;)&lt;br&gt;<br>
 &nbsp; 3.&nbsp;file&nbsp;upload&nbsp;with&nbsp;twisted&nbsp;(Levi&nbsp;Nie)&lt;br&gt;<br>
 &nbsp; 4.&nbsp;Re:&nbsp;file&nbsp;upload&nbsp;with&nbsp;twisted&nbsp;(Glyph)&lt;br&gt;<br>
 &nbsp; 5.&nbsp;Re:&nbsp;file&nbsp;upload&nbsp;with&nbsp;twisted&nbsp;(???????&nbsp;?????)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
----------------------------------------------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;1&lt;br&gt;<br>
Date:&nbsp;Fri,&nbsp;04&nbsp;Jan&nbsp;2013&nbsp;18:30:47&nbsp;+0000&lt;br&gt;<br>
From:&nbsp;Peter&nbsp;Westlake&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:peter.westlake@pobox.com&quot;&gt;peter.westlake@pobox.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[Twisted-web]&nbsp;[Twisted-Python]&nbsp;Speed&nbsp;of&nbsp;rendering?&lt;br&gt;<br>
To:&nbsp;Twisted&nbsp;Web&nbsp;World&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:twisted-web@twistedmatrix.com&quot;&gt;twisted-web@twistedmatrix.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Message-ID:&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:1357324247.31399.140661173476561.11F56E5E@webmail.messagingengine.com&quot;&gt;1357324247.31399.140661173476561.11F56E5E@webmail.messagingengine.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Content-Type:&nbsp;text/plain&lt;br&gt;<br>
&lt;br&gt;<br>
A&nbsp;while&nbsp;back&nbsp;I&nbsp;promised&nbsp;to&nbsp;write&nbsp;some&nbsp;benchmarks&nbsp;for&lt;br&gt;<br>
twisted.web.template&amp;#39;s&nbsp;flattening&nbsp;functions.&nbsp;Is&nbsp;something&nbsp;like&nbsp;this&lt;br&gt;<br>
suitable?&nbsp;If&nbsp;so,&nbsp;I&amp;#39;ll&nbsp;add&nbsp;lots&nbsp;more&nbsp;test&nbsp;cases.&nbsp;The&nbsp;output&nbsp;format&nbsp;could&lt;br&gt;<br>
be&nbsp;improved,&nbsp;too&nbsp;-&nbsp;any&nbsp;preferences?&lt;br&gt;<br>
&lt;br&gt;<br>
Peter.&lt;br&gt;<br>
&lt;br&gt;<br>
from&nbsp;twisted.web.template&nbsp;import&nbsp;flatten&lt;br&gt;<br>
from&nbsp;twisted.web.server&nbsp;import&nbsp;Request&lt;br&gt;<br>
import&nbsp;twisted.web.http&lt;br&gt;<br>
&lt;br&gt;<br>
channel&nbsp;=&nbsp;twisted.web.http.HTTPChannel()&lt;br&gt;<br>
request&nbsp;=&nbsp;Request(channel,&nbsp;False)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
def&nbsp;make(content):&lt;br&gt;<br>
 &nbsp; &nbsp;def&nbsp;f():&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;d&nbsp;=&nbsp;flatten(request,&nbsp;content,&nbsp;lambda&nbsp;_:&nbsp;None)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;assert&nbsp;d.called&lt;br&gt;<br>
 &nbsp; &nbsp;return&nbsp;f&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
def&nbsp;test(content):&lt;br&gt;<br>
 &nbsp; &nbsp;return&nbsp;timeit.timeit(stmt=make(content),&nbsp;number=repeats)&lt;br&gt;<br>
&lt;br&gt;<br>
repeats&nbsp;=&nbsp;1000&lt;br&gt;<br>
&lt;br&gt;<br>
deeplist&nbsp;=&nbsp;[&amp;#39;centre&amp;#39;]&lt;br&gt;<br>
for&nbsp;n&nbsp;in&nbsp;range(100):&lt;br&gt;<br>
 &nbsp; &nbsp;deeplist&nbsp;=&nbsp;[deeplist]&lt;br&gt;<br>
&lt;br&gt;<br>
tests&nbsp;=&nbsp;{&lt;br&gt;<br>
 &nbsp; &nbsp;&amp;#39;empty&amp;#39;:&nbsp;&amp;#39;&amp;#39;,&lt;br&gt;<br>
 &nbsp; &nbsp;&amp;#39;string&amp;#39;:&nbsp;&amp;#39;hello&amp;#39;,&lt;br&gt;<br>
 &nbsp; &nbsp;&amp;#39;shortlist&amp;#39;:&nbsp;[&amp;#39;hello&amp;#39;],&lt;br&gt;<br>
 &nbsp; &nbsp;&amp;#39;longlist&amp;#39;:&nbsp;[str(n)&nbsp;for&nbsp;n&nbsp;in&nbsp;range(100)],&lt;br&gt;<br>
 &nbsp; &nbsp;&amp;#39;deeplist&amp;#39;:&nbsp;deeplist,&lt;br&gt;<br>
}&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
if&nbsp;__name__&nbsp;==&nbsp;&amp;#39;__main__&amp;#39;:&lt;br&gt;<br>
 &nbsp; &nbsp;import&nbsp;timeit&lt;br&gt;<br>
 &nbsp; &nbsp;from&nbsp;sys&nbsp;import&nbsp;argv&lt;br&gt;<br>
 &nbsp; &nbsp;for&nbsp;name&nbsp;in&nbsp;argv[1:]&nbsp;or&nbsp;tests:&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;print&nbsp;name,&nbsp;test(tests[name])&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;2&lt;br&gt;<br>
Date:&nbsp;Fri,&nbsp;04&nbsp;Jan&nbsp;2013&nbsp;19:58:13&nbsp;-0000&lt;br&gt;<br>
From:&nbsp;&lt;a&nbsp;href=&quot;mailto:exarkun@twistedmatrix.com&quot;&gt;exarkun@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[Twisted-web]&nbsp;[Twisted-Python]&nbsp;Speed&nbsp;of&nbsp;rendering?&lt;br&gt;<br>
To:&nbsp;Twisted&nbsp;Web&nbsp;World&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:twisted-web@twistedmatrix.com&quot;&gt;twisted-web@twistedmatrix.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Message-ID:&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&amp;lt;20130104195813.4649.1661214274.divmod.xquotient.20@localhost6.localdomain6&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=&amp;quot;utf-8&amp;quot;;&nbsp;format=&amp;quot;flowed&amp;quot;&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;06:30&nbsp;pm,&nbsp;&lt;a&nbsp;href=&quot;mailto:peter.westlake@pobox.com&quot;&gt;peter.westlake@pobox.com&lt;/a&gt;&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;A&nbsp;while&nbsp;back&nbsp;I&nbsp;promised&nbsp;to&nbsp;write&nbsp;some&nbsp;benchmarks&nbsp;for&lt;br&gt;<br>
&amp;gt;twisted.web.template&amp;#39;s&nbsp;flattening&nbsp;functions.&nbsp;Is&nbsp;something&nbsp;like&nbsp;this&lt;br&gt;<br>
&amp;gt;suitable?&nbsp;If&nbsp;so,&nbsp;I&amp;#39;ll&nbsp;add&nbsp;lots&nbsp;more&nbsp;test&nbsp;cases.&nbsp;The&nbsp;output&nbsp;format&nbsp;could&lt;br&gt;<br>
&amp;gt;be&nbsp;improved,&nbsp;too&nbsp;-&nbsp;any&nbsp;preferences?&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;output&nbsp;should&nbsp;be&nbsp;something&nbsp;that&nbsp;we&nbsp;can&nbsp;load&nbsp;into&nbsp;our&nbsp;codespeed&lt;br&gt;<br>
instance.&nbsp; The&nbsp;output&nbsp;of&nbsp;any&nbsp;of&nbsp;the&nbsp;existing&nbsp;benchmarks&nbsp;in&nbsp;lp:twisted-&lt;br&gt;<br>
benchmarks&nbsp;should&nbsp;be&nbsp;a&nbsp;good&nbsp;example&nbsp;of&nbsp;that&nbsp;format&nbsp;(I&nbsp;don&amp;#39;t&nbsp;even&nbsp;recall&lt;br&gt;<br>
what&nbsp;it&nbsp;is&nbsp;right&nbsp;now&nbsp;-&nbsp;it&nbsp;may&nbsp;not&nbsp;even&nbsp;be&nbsp;a&nbsp;&amp;quot;format&amp;quot;&nbsp;so&nbsp;much&nbsp;as&nbsp;a&nbsp;shape&lt;br&gt;<br>
of&nbsp;data&nbsp;to&nbsp;submit&nbsp;to&nbsp;an&nbsp;HTTP&nbsp;API).&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;`timeit`&nbsp;module&nbsp;is&nbsp;probably&nbsp;not&nbsp;suitable&nbsp;to&nbsp;use&nbsp;to&nbsp;collect&nbsp;the&nbsp;data,&lt;br&gt;<br>
as&nbsp;it&nbsp;makes&nbsp;some&nbsp;questionable&nbsp;choices&nbsp;with&nbsp;respect&nbsp;to&nbsp;measurement&lt;br&gt;<br>
technique,&nbsp;and&nbsp;at&nbsp;the&nbsp;very&nbsp;least&nbsp;it&amp;#39;s&nbsp;inconsistent&nbsp;with&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&lt;br&gt;<br>
benchmarks&nbsp;we&nbsp;have.&lt;br&gt;<br>
&lt;br&gt;<br>
Selecting&nbsp;data&nbsp;to&nbsp;operate&nbsp;on&nbsp;is&nbsp;probably&nbsp;an&nbsp;important&nbsp;part&nbsp;of&nbsp;this&lt;br&gt;<br>
benchmark&nbsp;(or&nbsp;collection&nbsp;of&nbsp;benchmarks).&nbsp; It&nbsp;may&nbsp;not&nbsp;be&nbsp;possible&nbsp;to&lt;br&gt;<br>
capture&nbsp;all&nbsp;of&nbsp;the&nbsp;interesting&nbsp;performance&nbsp;characteristics&nbsp;in&nbsp;a&nbsp;single&lt;br&gt;<br>
dataset.&nbsp; However,&nbsp;at&nbsp;least&nbsp;something&nbsp;that&nbsp;includes&nbsp;HTML&nbsp;tags&nbsp;is&lt;br&gt;<br>
probably&nbsp;desirable,&nbsp;since&nbsp;that&nbsp;is&nbsp;the&nbsp;primary&nbsp;use-case.&lt;br&gt;<br>
&lt;br&gt;<br>
There&nbsp;are&nbsp;some&nbsp;other&nbsp;Python&nbsp;templating&nbsp;systems&nbsp;with&nbsp;benchmarks.&nbsp; One&lt;br&gt;<br>
approach&nbsp;that&nbsp;might&nbsp;make&nbsp;sense&nbsp;is&nbsp;to&nbsp;try&nbsp;to&nbsp;build&nbsp;analogous&nbsp;benchmarks&lt;br&gt;<br>
for&nbsp;twisted.web.template.&nbsp; (Or&nbsp;perhaps&nbsp;a&nbsp;little&nbsp;thought&nbsp;will&nbsp;reveal&nbsp;that&lt;br&gt;<br>
it&amp;#39;s&nbsp;not&nbsp;possible&nbsp;to&nbsp;make&nbsp;comparisons&nbsp;between&nbsp;twisted.web.template&nbsp;and&lt;br&gt;<br>
those&nbsp;systems,&nbsp;so&nbsp;there&amp;#39;s&nbsp;no&nbsp;reason&nbsp;to&nbsp;follow&nbsp;their&nbsp;benchmarking&nbsp;lead.)&lt;br&gt;<br>
&lt;br&gt;<br>
Jean-Paul&lt;br&gt;<br>
&amp;gt;Peter.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;from&nbsp;twisted.web.template&nbsp;import&nbsp;flatten&lt;br&gt;<br>
&amp;gt;from&nbsp;twisted.web.server&nbsp;import&nbsp;Request&lt;br&gt;<br>
&amp;gt;import&nbsp;twisted.web.http&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;channel&nbsp;=&nbsp;twisted.web.http.HTTPChannel()&lt;br&gt;<br>
&amp;gt;request&nbsp;=&nbsp;Request(channel,&nbsp;False)&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;def&nbsp;make(content):&lt;br&gt;<br>
&amp;gt;&nbsp; &nbsp; def&nbsp;f():&lt;br&gt;<br>
&amp;gt;&nbsp; &nbsp; &nbsp; &nbsp; d&nbsp;=&nbsp;flatten(request,&nbsp;content,&nbsp;lambda&nbsp;_:&nbsp;None)&lt;br&gt;<br>
&amp;gt;&nbsp; &nbsp; &nbsp; &nbsp; assert&nbsp;d.called&lt;br&gt;<br>
&amp;gt;&nbsp; &nbsp; return&nbsp;f&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;def&nbsp;test(content):&lt;br&gt;<br>
&amp;gt;&nbsp; &nbsp; return&nbsp;timeit.timeit(stmt=make(content),&nbsp;number=repeats)&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;repeats&nbsp;=&nbsp;1000&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;deeplist&nbsp;=&nbsp;[&amp;#39;centre&amp;#39;]&lt;br&gt;<br>
&amp;gt;for&nbsp;n&nbsp;in&nbsp;range(100):&lt;br&gt;<br>
&amp;gt;&nbsp; &nbsp; deeplist&nbsp;=&nbsp;[deeplist]&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;tests&nbsp;=&nbsp;{&lt;br&gt;<br>
&amp;gt;&nbsp; &nbsp; &amp;#39;empty&amp;#39;:&nbsp;&amp;#39;&amp;#39;,&lt;br&gt;<br>
&amp;gt;&nbsp; &nbsp; &amp;#39;string&amp;#39;:&nbsp;&amp;#39;hello&amp;#39;,&lt;br&gt;<br>
&amp;gt;&nbsp; &nbsp; &amp;#39;shortlist&amp;#39;:&nbsp;[&amp;#39;hello&amp;#39;],&lt;br&gt;<br>
&amp;gt;&nbsp; &nbsp; &amp;#39;longlist&amp;#39;:&nbsp;[str(n)&nbsp;for&nbsp;n&nbsp;in&nbsp;range(100)],&lt;br&gt;<br>
&amp;gt;&nbsp; &nbsp; &amp;#39;deeplist&amp;#39;:&nbsp;deeplist,&lt;br&gt;<br>
&amp;gt;}&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;if&nbsp;__name__&nbsp;==&nbsp;&amp;#39;__main__&amp;#39;:&lt;br&gt;<br>
&amp;gt;&nbsp; &nbsp; import&nbsp;timeit&lt;br&gt;<br>
&amp;gt;&nbsp; &nbsp; from&nbsp;sys&nbsp;import&nbsp;argv&lt;br&gt;<br>
&amp;gt;&nbsp; &nbsp; for&nbsp;name&nbsp;in&nbsp;argv[1:]&nbsp;or&nbsp;tests:&lt;br&gt;<br>
&amp;gt;&nbsp; &nbsp; &nbsp; &nbsp; print&nbsp;name,&nbsp;test(tests[name])&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;_______________________________________________&lt;br&gt;<br>
&amp;gt;Twisted-web&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&amp;gt;&lt;a&nbsp;href=&quot;mailto:Twisted-web@twistedmatrix.com&quot;&gt;Twisted-web@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;3&lt;br&gt;<br>
Date:&nbsp;Sat,&nbsp;5&nbsp;Jan&nbsp;2013&nbsp;09:50:37&nbsp;+0800&lt;br&gt;<br>
From:&nbsp;Levi&nbsp;Nie&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:levinie001@gmail.com&quot;&gt;levinie001@gmail.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Subject:&nbsp;[Twisted-web]&nbsp;file&nbsp;upload&nbsp;with&nbsp;twisted&lt;br&gt;<br>
To:&nbsp;&amp;quot;&lt;a&nbsp;href=&quot;mailto:twisted-web@twistedmatrix.com&quot;&gt;twisted-web@twistedmatrix.com&lt;/a&gt;&amp;quot;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:twisted-web@twistedmatrix.com&quot;&gt;twisted-web@twistedmatrix.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Message-ID:&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&amp;lt;CAEMsKDudEvLCeVf=&lt;a&nbsp;href=&quot;mailto:sVPW_BE7rX2qtx9rAQERvssAMsckF9yYfA@mail.gmail.com&quot;&gt;sVPW_BE7rX2qtx9rAQERvssAMsckF9yYfA@mail.gmail.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=&amp;quot;iso-8859-1&amp;quot;&lt;br&gt;<br>
&lt;br&gt;<br>
When&nbsp;i&nbsp;send&nbsp;a&nbsp;http&nbsp;request&nbsp;with&nbsp;a&nbsp;big&nbsp;file,&nbsp;can&nbsp;i&nbsp;check&nbsp;the&nbsp;content-length&lt;br&gt;<br>
then&nbsp;enable&nbsp;or&nbsp;disable&nbsp;the&lt;br&gt;<br>
file&nbsp;upload?&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;use&nbsp;the&nbsp;s3cmd&nbsp;client&nbsp;sent&nbsp;the&nbsp;request.&nbsp;And&nbsp;i&nbsp;need&nbsp;disable&nbsp;the&nbsp;file&nbsp;upload&lt;br&gt;<br>
if&nbsp;the&nbsp;file&nbsp;size&nbsp;is&nbsp;over&nbsp;the&nbsp;quota.&lt;br&gt;<br>
&lt;br&gt;<br>
how&nbsp;can&nbsp;i&nbsp;do&nbsp;this?&lt;br&gt;<br>
--------------&nbsp;next&nbsp;part&nbsp;--------------&lt;br&gt;<br>
An&nbsp;HTML&nbsp;attachment&nbsp;was&nbsp;scrubbed...&lt;br&gt;<br>
URL:&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/pipermail/twisted-web/attachments/20130105/43bc7e14/attachment.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/pipermail/twisted-web/attachments/20130105/43bc7e14/attachment.html&lt;/a&gt;&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;4&lt;br&gt;<br>
Date:&nbsp;Fri,&nbsp;4&nbsp;Jan&nbsp;2013&nbsp;20:14:51&nbsp;-0800&lt;br&gt;<br>
From:&nbsp;Glyph&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:glyph@twistedmatrix.com&quot;&gt;glyph@twistedmatrix.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[Twisted-web]&nbsp;file&nbsp;upload&nbsp;with&nbsp;twisted&lt;br&gt;<br>
To:&nbsp;Twisted&nbsp;Web&nbsp;World&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:twisted-web@twistedmatrix.com&quot;&gt;twisted-web@twistedmatrix.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Message-ID:&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:DEA8BBC4-E7C6-446B-90A3-BA1037BD1267@twistedmatrix.com&quot;&gt;DEA8BBC4-E7C6-446B-90A3-BA1037BD1267@twistedmatrix.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=iso-8859-1&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;Jan&nbsp;4,&nbsp;2013,&nbsp;at&nbsp;5:50&nbsp;PM,&nbsp;Levi&nbsp;Nie&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:levinie001@gmail.com&quot;&gt;levinie001@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;When&nbsp;i&nbsp;send&nbsp;a&nbsp;http&nbsp;request&nbsp;with&nbsp;a&nbsp;big&nbsp;file,&nbsp;can&nbsp;i&nbsp;check&nbsp;the&nbsp;content-length&nbsp;then&nbsp;enable&nbsp;or&nbsp;disable&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;file&nbsp;upload?&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;use&nbsp;the&nbsp;s3cmd&nbsp;client&nbsp;sent&nbsp;the&nbsp;request.&nbsp;And&nbsp;i&nbsp;need&nbsp;disable&nbsp;the&nbsp;file&nbsp;upload&nbsp;if&nbsp;the&nbsp;file&nbsp;size&nbsp;is&nbsp;over&nbsp;the&nbsp;quota.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;how&nbsp;can&nbsp;i&nbsp;do&nbsp;this?&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;s3cmd?&nbsp;&lt;a&nbsp;href=&quot;https://github.com/s3tools/s3cmd/blob/master/s3cmd&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/s3tools/s3cmd/blob/master/s3cmd&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
It&nbsp;doesn&amp;#39;t&nbsp;look&nbsp;like&nbsp;it&nbsp;uses&nbsp;Twisted,&nbsp;so&nbsp;I&nbsp;don&amp;#39;t&nbsp;think&nbsp;this&nbsp;is&nbsp;a&nbsp;question&nbsp;for&nbsp;this&nbsp;list.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;5&lt;br&gt;<br>
Date:&nbsp;Sat,&nbsp;5&nbsp;Jan&nbsp;2013&nbsp;15:25:21&nbsp;+0600&lt;br&gt;<br>
From:&nbsp;???????&nbsp;?????&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:poisonoff@gmail.com&quot;&gt;poisonoff@gmail.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[Twisted-web]&nbsp;file&nbsp;upload&nbsp;with&nbsp;twisted&lt;br&gt;<br>
To:&nbsp;Twisted&nbsp;Web&nbsp;World&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:twisted-web@twistedmatrix.com&quot;&gt;twisted-web@twistedmatrix.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Message-ID:&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&amp;lt;CACgbmJ=&lt;a&nbsp;href=&quot;mailto:G-FZZee62VADTV2FcLUxu0zC4PY9R3LUa2CU7tVP2Lg@mail.gmail.com&quot;&gt;G-FZZee62VADTV2FcLUxu0zC4PY9R3LUa2CU7tVP2Lg@mail.gmail.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=UTF-8&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;resolve&nbsp;same&nbsp;problem&nbsp;in&nbsp;self&nbsp;project,&nbsp;reimplement&nbsp;method&lt;br&gt;<br>
handleContentChunk&nbsp;in&nbsp;server.Request&lt;br&gt;<br>
&lt;br&gt;<br>
My&nbsp;code:&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;lt;code&amp;gt;#&nbsp;For&nbsp;maximum&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;handleContentChunkLength&nbsp;=&nbsp;0&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;def&nbsp;handleContentChunk(self,&nbsp;data):&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&amp;quot;&amp;quot;&amp;quot;&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Write&nbsp;a&nbsp;chunk&nbsp;of&nbsp;data.&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&amp;quot;&amp;quot;&amp;quot;&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.handleContentChunkLength&nbsp;+=&nbsp;len(data)&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp;self.handleContentChunkLength&nbsp;&amp;gt;=&nbsp;WEB_LIMIT_REQUEST_SIZE:&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.transport.write(b&amp;quot;HTTP/1.1&nbsp;413&nbsp;Request&nbsp;Entity&nbsp;Too&nbsp;Large\r\n\r\n&amp;quot;)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.transport.loseConnection()&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;Raise&nbsp;to&nbsp;log&nbsp;error&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;raise&nbsp;ValueError(&amp;#39;Maximum&nbsp;length&nbsp;equal&amp;#39;)&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.content.write(data)&amp;lt;/code&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;Sat,&nbsp;Jan&nbsp;5,&nbsp;2013&nbsp;at&nbsp;10:14&nbsp;AM,&nbsp;Glyph&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:glyph@twistedmatrix.com&quot;&gt;glyph@twistedmatrix.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;On&nbsp;Jan&nbsp;4,&nbsp;2013,&nbsp;at&nbsp;5:50&nbsp;PM,&nbsp;Levi&nbsp;Nie&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:levinie001@gmail.com&quot;&gt;levinie001@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;When&nbsp;i&nbsp;send&nbsp;a&nbsp;http&nbsp;request&nbsp;with&nbsp;a&nbsp;big&nbsp;file,&nbsp;can&nbsp;i&nbsp;check&nbsp;the&nbsp;content-length&nbsp;then&nbsp;enable&nbsp;or&nbsp;disable&nbsp;the&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;file&nbsp;upload?&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;I&nbsp;use&nbsp;the&nbsp;s3cmd&nbsp;client&nbsp;sent&nbsp;the&nbsp;request.&nbsp;And&nbsp;i&nbsp;need&nbsp;disable&nbsp;the&nbsp;file&nbsp;upload&nbsp;if&nbsp;the&nbsp;file&nbsp;size&nbsp;is&nbsp;over&nbsp;the&nbsp;quota.&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;how&nbsp;can&nbsp;i&nbsp;do&nbsp;this?&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;This&nbsp;s3cmd?&nbsp;&lt;a&nbsp;href=&quot;https://github.com/s3tools/s3cmd/blob/master/s3cmd&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/s3tools/s3cmd/blob/master/s3cmd&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;It&nbsp;doesn&amp;#39;t&nbsp;look&nbsp;like&nbsp;it&nbsp;uses&nbsp;Twisted,&nbsp;so&nbsp;I&nbsp;don&amp;#39;t&nbsp;think&nbsp;this&nbsp;is&nbsp;a&nbsp;question&nbsp;for&nbsp;this&nbsp;list.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&amp;gt;&nbsp;Twisted-web&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:Twisted-web@twistedmatrix.com&quot;&gt;Twisted-web@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-web&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-web@twistedmatrix.com&quot;&gt;Twisted-web@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
End&nbsp;of&nbsp;Twisted-web&nbsp;Digest,&nbsp;Vol&nbsp;105,&nbsp;Issue&nbsp;2&lt;br&gt;<br>
*******************************************&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
