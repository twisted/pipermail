#!/usr/bin/env python
from twisted.application import internet, service
from nevow import livepage, rend, loaders, tags, appserver

class LivePage(livepage.LivePage):
    addSlash = True
    def handle_click(self, ctx, whichNode):
        return livepage.alert("Greetings. You clicked the %s node." % whichNode)

    docFactory = loaders.stan(
    tags.html[
        tags.head[
            tags.directive('liveid'),
            tags.directive('liveglue')
        ],
    tags.body[
        tags.ol[
            tags.li(onclick=livepage.server.handle('click', 'one'), name="one")["One"],
            tags.li(onclick=livepage.server.handle('click', 'two'), name="one")["Two"],
            tags.li(onclick=livepage.server.handle('click', 'three'), name="one")["Three"]
        ]
    ]
])

application = service.Application('onfire')
webServer = internet.TCPServer(8080, appserver.NevowSite(LivePage()))
webServer.setServiceParent(application)
