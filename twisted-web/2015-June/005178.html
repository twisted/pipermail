<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] How does Twisted Web Multiprocess work ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-web%5D%20How%20does%20Twisted%20Web%20Multiprocess%20work%20%3F&In-Reply-To=%3CCALL7ch%3DkcxBY1Ykz3t25qaL4zS1RbVSdp3c8rCiTfQ9pv%2B%2BeJA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005175.html">
   <LINK REL="Next"  HREF="005179.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] How does Twisted Web Multiprocess work ?</H1>
    <B>Gavin Panella</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-web%5D%20How%20does%20Twisted%20Web%20Multiprocess%20work%20%3F&In-Reply-To=%3CCALL7ch%3DkcxBY1Ykz3t25qaL4zS1RbVSdp3c8rCiTfQ9pv%2B%2BeJA%40mail.gmail.com%3E"
       TITLE="[Twisted-web] How does Twisted Web Multiprocess work ?">gavin at gromper.net
       </A><BR>
    <I>Thu Jun 11 02:29:51 MDT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="005175.html">[Twisted-web] How does Twisted Web Multiprocess work ?
</A></li>
        <LI>Next message: <A HREF="005179.html">[Twisted-web] How does Twisted Web Multiprocess work ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5178">[ date ]</a>
              <a href="thread.html#5178">[ thread ]</a>
              <a href="subject.html#5178">[ subject ]</a>
              <a href="author.html#5178">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10 June 2015 at 23:39, Sagar Dixit &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">sagar.dixit at gmail.com</A>&gt; wrote:
&gt;<i> Thanks Gavin
</I>&gt;<i>
</I>&gt;<i> Good to know how things are done at your end. thanks! However, why is
</I>&gt;<i> Twisted not internally using SO_REUSEPORT ? Is there any plan to
</I>&gt;<i> integrate it inside twisted so that application need not worry about
</I>&gt;<i> it ?
</I>
I suspect it's only because it's fairly new in Linux and support hasn't
been written/merged into Twisted. Someone else might have detail to add
to that; in this regard I'm only a user of Twisted (for now... maybe
I'll get an itch to address this in Twisted itself if someone else
hasn't already done so).

&gt;<i> The problem with code mentioned here:
</I>&gt;<i> <A HREF="http://stackoverflow.com/questions/10077745/twistedweb-on-multicore-multiprocessor">http://stackoverflow.com/questions/10077745/twistedweb-on-multicore-multiprocessor</A>
</I>&gt;<i> is that the requests are not equally distributed across all processes.
</I>&gt;<i> This imbalance leads to underutilization of CPU cores. This issue is
</I>&gt;<i> also discussed on <A HREF="https://lwn.net/Articles/542629/">https://lwn.net/Articles/542629/</A> and that this is
</I>&gt;<i> not an issue with SO_REUSEPORT
</I>
That's interesting. We used SO_REUSEPORT for convenience but it's good
to know that it's balancing nicely too :)

&gt;<i> Does it mean that Twisted is using single listening socket and all
</I>&gt;<i> processes accept() on that socket ?
</I>
Each process gets its own socket, but the kernel allows all of them to
bind to the same local address:port.

If you need more processes you can start them without ceremony and it'll
all Just Work. Likewise when killing processes. Done right, you can have
seamless upgrades of your service by restarting one process at a time.
No need for special support from a supervisor.

Gavin.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005175.html">[Twisted-web] How does Twisted Web Multiprocess work ?
</A></li>
	<LI>Next message: <A HREF="005179.html">[Twisted-web] How does Twisted Web Multiprocess work ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5178">[ date ]</a>
              <a href="thread.html#5178">[ thread ]</a>
              <a href="subject.html#5178">[ subject ]</a>
              <a href="author.html#5178">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
