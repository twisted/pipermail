<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] Confused about XML-RPC Unicode behaviour (examples
	attached).
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Confused%20about%20XML-RPC%20Unicode%20behaviour%20%28examples%0A%09attached%29.&In-Reply-To=20070207185350.25807.1173435593.divmod.quotient.13455%40ohm">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003272.html">
   <LINK REL="Next"  HREF="003277.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] Confused about XML-RPC Unicode behaviour (examples
	attached).</H1>
    <B>kgi</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20Confused%20about%20XML-RPC%20Unicode%20behaviour%20%28examples%0A%09attached%29.&In-Reply-To=20070207185350.25807.1173435593.divmod.quotient.13455%40ohm"
       TITLE="[Twisted-web] Confused about XML-RPC Unicode behaviour (examples
	attached).">iacovou at gmail.com
       </A><BR>
    <I>Fri Feb  9 05:14:06 CST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003272.html">[Twisted-web] Confused about XML-RPC Unicode behaviour (examples
	attached).
</A></li>
        <LI>Next message: <A HREF="003277.html">[Twisted-web] Confused about XML-RPC Unicode behaviour (examples
	attached).
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3276">[ date ]</a>
              <a href="thread.html#3276">[ thread ]</a>
              <a href="subject.html#3276">[ subject ]</a>
              <a href="author.html#3276">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wednesday 07 February 2007 20:53, Jean-Paul Calderone wrote:

&gt;<i> Nope, it's probably just a bug.  It looks like it may be a bug in the
</I>&gt;<i> xmlrpclib module, though.  Consider this interaction:
</I>
Thanks for your reply, JP.

You're right that it looks like a bug in xmlrpclib itself; however, it only 
looks like it's a bug in Python 2.4's version of xmlrpclib; version Python 
2.5 has a slightly different xmlrpclib.py that does not exhibit this 
behaviour; using your example:

$ python2.5
Python 2.5 (r25:51908, Oct  6 2006, 15:22:41)
[GCC 4.1.2 20060928 (prerelease) (Ubuntu 4.1.1-13ubuntu4)] on linux2
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt;<i> import xmlrpclib
</I>&gt;&gt;&gt;<i> d1 = xmlrpclib.DateTime()
</I>&gt;&gt;&gt;<i> d1
</I>&lt;DateTime '20070209T13:02:31' at b7d4896c&gt;
&gt;&gt;&gt;<i> s = xmlrpclib.dumps((d1,))
</I>&gt;&gt;&gt;<i> s
</I>'&lt;params&gt;\n&lt;param&gt;\n&lt;value&gt;&lt;dateTime.iso8601&gt;20070209T13:02:31&lt;/dateTime.iso8601&gt;&lt;/value&gt;\n&lt;/param&gt;\n&lt;/params&gt;\n'
&gt;&gt;&gt;<i> d2 = xmlrpclib.loads(s)[0][0]
</I>&gt;&gt;&gt;<i> d2
</I>&lt;DateTime '20070209T13:02:31' at b7d48e2c&gt;
&gt;&gt;&gt;<i> xmlrpclib.dumps((d2,))
</I>'&lt;params&gt;\n&lt;param&gt;\n&lt;value&gt;&lt;dateTime.iso8601&gt;20070209T13:02:31&lt;/dateTime.iso8601&gt;&lt;/value&gt;\n&lt;/param&gt;\n&lt;/params&gt;\n'

So obviously someone noticed that 2.4's was buggy from a round-trip 
point-of-view and corrected it for 2.5. Not sure if that means that they will 
be unreceptive to patching 2.4.

It also looks like one can just drop 2.5's xmlrpclib.py into a 2.4 tree and 
run compileall.py and the odd behaviour disappears.

Having Twisted work around this problem would be a Good Thing, however. I'll 
file a bug report.

Cheers

Ricky

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003272.html">[Twisted-web] Confused about XML-RPC Unicode behaviour (examples
	attached).
</A></li>
	<LI>Next message: <A HREF="003277.html">[Twisted-web] Confused about XML-RPC Unicode behaviour (examples
	attached).
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3276">[ date ]</a>
              <a href="thread.html#3276">[ thread ]</a>
              <a href="subject.html#3276">[ subject ]</a>
              <a href="author.html#3276">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
