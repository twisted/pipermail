<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-web] serving unicode body in twisted web
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20serving%20unicode%20body%20in%20twisted%20web&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004663.html">
   <LINK REL="Next"  HREF="004665.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-web] serving unicode body in twisted web</H1>
    <B>Ilja Livenson</B> 
    <A HREF="mailto:twisted-web%40twistedmatrix.com?Subject=%5BTwisted-web%5D%20serving%20unicode%20body%20in%20twisted%20web&In-Reply-To="
       TITLE="[Twisted-web] serving unicode body in twisted web">ilja.livenson at gmail.com
       </A><BR>
    <I>Thu May 26 18:52:59 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004663.html">[Twisted-web] Contract
</A></li>
        <LI>Next message: <A HREF="004665.html">[Twisted-web] serving unicode body in twisted web
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4664">[ date ]</a>
              <a href="thread.html#4664">[ thread ]</a>
              <a href="subject.html#4664">[ subject ]</a>
              <a href="author.html#4664">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm having a problem putting binary data into a body of http response
using twisted web.I'm doing something very wrong, any help is
appreciated. The funny thing is that it runs on python2.7, but fails
on python2.5. Most probably it has something to do with unicode/str.

Code snipplet:
-------
def render_GET(self, request):
    # get contents of a binary file, e.g. zip archive
    request.setHeader('Content-type', 'some-mime')
    return content
-----

This results in a error:
....
          File &quot;C:\Python25\lib\site-packages\twisted\internet\selectreactor.py&quot;,
line 146, in _doReadOrWrite
            why = getattr(selectable, method)()
          File &quot;C:\Python25\lib\site-packages\twisted\internet\tcp.py&quot;,
line 428, in doWrite
            result = abstract.FileDescriptor.doWrite(self)
          File &quot;C:\Python25\lib\site-packages\twisted\internet\abstract.py&quot;,
line 199, in doWrite
            self.dataBuffer = buffer(self.dataBuffer, self.offset) +
&quot;&quot;.join(self._tempDataBuffer)
        exceptions.UnicodeDecodeError: 'ascii' codec can't decode byte
0x92 in position 10: ordinal not in range(128)

Any ideas? I assumed that I can put any contents into http body.

thanks,
Ilja

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004663.html">[Twisted-web] Contract
</A></li>
	<LI>Next message: <A HREF="004665.html">[Twisted-web] serving unicode body in twisted web
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4664">[ date ]</a>
              <a href="thread.html#4664">[ thread ]</a>
              <a href="subject.html#4664">[ subject ]</a>
              <a href="author.html#4664">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">More information about the Twisted-web
mailing list</a><br>
</body></html>
